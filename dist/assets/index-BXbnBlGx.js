var kC=Object.defineProperty;var NC=(a,r,t)=>r in a?kC(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t;var Xe=(a,r,t)=>NC(a,typeof r!="symbol"?r+"":r,t);function IC(a,r){for(var t=0;t<r.length;t++){const n=r[t];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in a)){const i=Object.getOwnPropertyDescriptor(n,o);i&&Object.defineProperty(a,o,i.get?i:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();const AC="modulepreload",DC=function(a,r){return new URL(a,r).href},Ov={},MC=function(r,t,n){let o=Promise.resolve();if(t&&t.length>0){let c=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};const u=document.getElementsByTagName("link"),m=document.querySelector("meta[property=csp-nonce]"),g=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));o=c(t.map(f=>{if(f=DC(f,n),f in Ov)return;Ov[f]=!0;const h=f.endsWith(".css"),v=h?'[rel="stylesheet"]':"";if(!!n)for(let E=u.length-1;E>=0;E--){const N=u[E];if(N.href===f&&(!h||N.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${v}`))return;const x=document.createElement("link");if(x.rel=h?"stylesheet":AC,h||(x.as="script"),x.crossOrigin="",x.href=f,g&&x.setAttribute("nonce",g),document.head.appendChild(x),h)return new Promise((E,N)=>{x.addEventListener("load",E),x.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return o.then(c=>{for(const u of c||[])u.status==="rejected"&&i(u.reason);return r().catch(i)})};function Rp(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var eh={exports:{}},Dt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv;function RC(){if(Fv)return Dt;Fv=1;var a=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function v(T){return T===null||typeof T!="object"?null:(T=h&&T[h]||T["@@iterator"],typeof T=="function"?T:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,E={};function N(T,G,te){this.props=T,this.context=G,this.refs=E,this.updater=te||S}N.prototype.isReactComponent={},N.prototype.setState=function(T,G){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,G,"setState")},N.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function C(){}C.prototype=N.prototype;function I(T,G,te){this.props=T,this.context=G,this.refs=E,this.updater=te||S}var A=I.prototype=new C;A.constructor=I,x(A,N.prototype),A.isPureReactComponent=!0;var _=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function z(T,G,te,P,ne,q){return te=q.ref,{$$typeof:a,type:T,key:G,ref:te!==void 0?te:null,props:q}}function M(T,G){return z(T.type,G,void 0,void 0,void 0,T.props)}function O(T){return typeof T=="object"&&T!==null&&T.$$typeof===a}function U(T){var G={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(te){return G[te]})}var Z=/\/+/g;function H(T,G){return typeof T=="object"&&T!==null&&T.key!=null?U(""+T.key):G.toString(36)}function V(){}function F(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(V,V):(T.status="pending",T.then(function(G){T.status==="pending"&&(T.status="fulfilled",T.value=G)},function(G){T.status==="pending"&&(T.status="rejected",T.reason=G)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function R(T,G,te,P,ne){var q=typeof T;(q==="undefined"||q==="boolean")&&(T=null);var oe=!1;if(T===null)oe=!0;else switch(q){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(T.$$typeof){case a:case r:oe=!0;break;case f:return oe=T._init,R(oe(T._payload),G,te,P,ne)}}if(oe)return ne=ne(T),oe=P===""?"."+H(T,0):P,_(ne)?(te="",oe!=null&&(te=oe.replace(Z,"$&/")+"/"),R(ne,G,te,"",function(nt){return nt})):ne!=null&&(O(ne)&&(ne=M(ne,te+(ne.key==null||T&&T.key===ne.key?"":(""+ne.key).replace(Z,"$&/")+"/")+oe)),G.push(ne)),1;oe=0;var he=P===""?".":P+":";if(_(T))for(var be=0;be<T.length;be++)P=T[be],q=he+H(P,be),oe+=R(P,G,te,q,ne);else if(be=v(T),typeof be=="function")for(T=be.call(T),be=0;!(P=T.next()).done;)P=P.value,q=he+H(P,be++),oe+=R(P,G,te,q,ne);else if(q==="object"){if(typeof T.then=="function")return R(F(T),G,te,P,ne);throw G=String(T),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return oe}function D(T,G,te){if(T==null)return T;var P=[],ne=0;return R(T,P,"","",function(q){return G.call(te,q,ne++)}),P}function j(T){if(T._status===-1){var G=T._result;G=G(),G.then(function(te){(T._status===0||T._status===-1)&&(T._status=1,T._result=te)},function(te){(T._status===0||T._status===-1)&&(T._status=2,T._result=te)}),T._status===-1&&(T._status=0,T._result=G)}if(T._status===1)return T._result.default;throw T._result}var X=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function W(){}return Dt.Children={map:D,forEach:function(T,G,te){D(T,function(){G.apply(this,arguments)},te)},count:function(T){var G=0;return D(T,function(){G++}),G},toArray:function(T){return D(T,function(G){return G})||[]},only:function(T){if(!O(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Dt.Component=N,Dt.Fragment=t,Dt.Profiler=o,Dt.PureComponent=I,Dt.StrictMode=n,Dt.Suspense=m,Dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Dt.__COMPILER_RUNTIME={__proto__:null,c:function(T){return k.H.useMemoCache(T)}},Dt.cache=function(T){return function(){return T.apply(null,arguments)}},Dt.cloneElement=function(T,G,te){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var P=x({},T.props),ne=T.key,q=void 0;if(G!=null)for(oe in G.ref!==void 0&&(q=void 0),G.key!==void 0&&(ne=""+G.key),G)!B.call(G,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&G.ref===void 0||(P[oe]=G[oe]);var oe=arguments.length-2;if(oe===1)P.children=te;else if(1<oe){for(var he=Array(oe),be=0;be<oe;be++)he[be]=arguments[be+2];P.children=he}return z(T.type,ne,void 0,void 0,q,P)},Dt.createContext=function(T){return T={$$typeof:c,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:i,_context:T},T},Dt.createElement=function(T,G,te){var P,ne={},q=null;if(G!=null)for(P in G.key!==void 0&&(q=""+G.key),G)B.call(G,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(ne[P]=G[P]);var oe=arguments.length-2;if(oe===1)ne.children=te;else if(1<oe){for(var he=Array(oe),be=0;be<oe;be++)he[be]=arguments[be+2];ne.children=he}if(T&&T.defaultProps)for(P in oe=T.defaultProps,oe)ne[P]===void 0&&(ne[P]=oe[P]);return z(T,q,void 0,void 0,null,ne)},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(T){return{$$typeof:u,render:T}},Dt.isValidElement=O,Dt.lazy=function(T){return{$$typeof:f,_payload:{_status:-1,_result:T},_init:j}},Dt.memo=function(T,G){return{$$typeof:g,type:T,compare:G===void 0?null:G}},Dt.startTransition=function(T){var G=k.T,te={};k.T=te;try{var P=T(),ne=k.S;ne!==null&&ne(te,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(W,X)}catch(q){X(q)}finally{k.T=G}},Dt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Dt.use=function(T){return k.H.use(T)},Dt.useActionState=function(T,G,te){return k.H.useActionState(T,G,te)},Dt.useCallback=function(T,G){return k.H.useCallback(T,G)},Dt.useContext=function(T){return k.H.useContext(T)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(T,G){return k.H.useDeferredValue(T,G)},Dt.useEffect=function(T,G,te){var P=k.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return P.useEffect(T,G)},Dt.useId=function(){return k.H.useId()},Dt.useImperativeHandle=function(T,G,te){return k.H.useImperativeHandle(T,G,te)},Dt.useInsertionEffect=function(T,G){return k.H.useInsertionEffect(T,G)},Dt.useLayoutEffect=function(T,G){return k.H.useLayoutEffect(T,G)},Dt.useMemo=function(T,G){return k.H.useMemo(T,G)},Dt.useOptimistic=function(T,G){return k.H.useOptimistic(T,G)},Dt.useReducer=function(T,G,te){return k.H.useReducer(T,G,te)},Dt.useRef=function(T){return k.H.useRef(T)},Dt.useState=function(T){return k.H.useState(T)},Dt.useSyncExternalStore=function(T,G,te){return k.H.useSyncExternalStore(T,G,te)},Dt.useTransition=function(){return k.H.useTransition()},Dt.version="19.1.0",Dt}var Uv;function R0(){return Uv||(Uv=1,eh.exports=RC()),eh.exports}var b=R0();const e=Rp(b),tE=IC({__proto__:null,default:e},[b]);var th={exports:{}},Oc={},ah={exports:{}},nh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv;function TC(){return Wv||(Wv=1,function(a){function r(D,j){var X=D.length;D.push(j);e:for(;0<X;){var W=X-1>>>1,T=D[W];if(0<o(T,j))D[W]=j,D[X]=T,X=W;else break e}}function t(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var j=D[0],X=D.pop();if(X!==j){D[0]=X;e:for(var W=0,T=D.length,G=T>>>1;W<G;){var te=2*(W+1)-1,P=D[te],ne=te+1,q=D[ne];if(0>o(P,X))ne<T&&0>o(q,P)?(D[W]=q,D[ne]=X,W=ne):(D[W]=P,D[te]=X,W=te);else if(ne<T&&0>o(q,X))D[W]=q,D[ne]=X,W=ne;else break e}}return j}function o(D,j){var X=D.sortIndex-j.sortIndex;return X!==0?X:D.id-j.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;a.unstable_now=function(){return i.now()}}else{var c=Date,u=c.now();a.unstable_now=function(){return c.now()-u}}var m=[],g=[],f=1,h=null,v=3,S=!1,x=!1,E=!1,N=!1,C=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function _(D){for(var j=t(g);j!==null;){if(j.callback===null)n(g);else if(j.startTime<=D)n(g),j.sortIndex=j.expirationTime,r(m,j);else break;j=t(g)}}function k(D){if(E=!1,_(D),!x)if(t(m)!==null)x=!0,B||(B=!0,H());else{var j=t(g);j!==null&&R(k,j.startTime-D)}}var B=!1,z=-1,M=5,O=-1;function U(){return N?!0:!(a.unstable_now()-O<M)}function Z(){if(N=!1,B){var D=a.unstable_now();O=D;var j=!0;try{e:{x=!1,E&&(E=!1,I(z),z=-1),S=!0;var X=v;try{t:{for(_(D),h=t(m);h!==null&&!(h.expirationTime>D&&U());){var W=h.callback;if(typeof W=="function"){h.callback=null,v=h.priorityLevel;var T=W(h.expirationTime<=D);if(D=a.unstable_now(),typeof T=="function"){h.callback=T,_(D),j=!0;break t}h===t(m)&&n(m),_(D)}else n(m);h=t(m)}if(h!==null)j=!0;else{var G=t(g);G!==null&&R(k,G.startTime-D),j=!1}}break e}finally{h=null,v=X,S=!1}j=void 0}}finally{j?H():B=!1}}}var H;if(typeof A=="function")H=function(){A(Z)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,F=V.port2;V.port1.onmessage=Z,H=function(){F.postMessage(null)}}else H=function(){C(Z,0)};function R(D,j){z=C(function(){D(a.unstable_now())},j)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(D){D.callback=null},a.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<D?Math.floor(1e3/D):5},a.unstable_getCurrentPriorityLevel=function(){return v},a.unstable_next=function(D){switch(v){case 1:case 2:case 3:var j=3;break;default:j=v}var X=v;v=j;try{return D()}finally{v=X}},a.unstable_requestPaint=function(){N=!0},a.unstable_runWithPriority=function(D,j){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var X=v;v=D;try{return j()}finally{v=X}},a.unstable_scheduleCallback=function(D,j,X){var W=a.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?W+X:W):X=W,D){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=X+T,D={id:f++,callback:j,priorityLevel:D,startTime:X,expirationTime:T,sortIndex:-1},X>W?(D.sortIndex=X,r(g,D),t(m)===null&&D===t(g)&&(E?(I(z),z=-1):E=!0,R(k,X-W))):(D.sortIndex=T,r(m,D),x||S||(x=!0,B||(B=!0,H()))),D},a.unstable_shouldYield=U,a.unstable_wrapCallback=function(D){var j=v;return function(){var X=v;v=j;try{return D.apply(this,arguments)}finally{v=X}}}}(nh)),nh}var jv;function PC(){return jv||(jv=1,ah.exports=TC()),ah.exports}var rh={exports:{}},Ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function LC(){if(Hv)return Ln;Hv=1;var a=R0();function r(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)g+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(r(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function i(m,g,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:h==null?null:""+h,children:m,containerInfo:g,implementation:f}}var c=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ln.createPortal=function(m,g){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(r(299));return i(m,g,null,f)},Ln.flushSync=function(m){var g=c.T,f=n.p;try{if(c.T=null,n.p=2,m)return m()}finally{c.T=g,n.p=f,n.d.f()}},Ln.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,n.d.C(m,g))},Ln.prefetchDNS=function(m){typeof m=="string"&&n.d.D(m)},Ln.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var f=g.as,h=u(f,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;f==="style"?n.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:h,integrity:v,fetchPriority:S}):f==="script"&&n.d.X(m,{crossOrigin:h,integrity:v,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Ln.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var f=u(g.as,g.crossOrigin);n.d.M(m,{crossOrigin:f,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&n.d.M(m)},Ln.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var f=g.as,h=u(f,g.crossOrigin);n.d.L(m,f,{crossOrigin:h,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Ln.preloadModule=function(m,g){if(typeof m=="string")if(g){var f=u(g.as,g.crossOrigin);n.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:f,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else n.d.m(m)},Ln.requestFormReset=function(m){n.d.r(m)},Ln.unstable_batchedUpdates=function(m,g){return m(g)},Ln.useFormState=function(m,g,f){return c.H.useFormState(m,g,f)},Ln.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ln.version="19.1.0",Ln}var $v;function aE(){if($v)return rh.exports;$v=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(r){console.error(r)}}return a(),rh.exports=LC(),rh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function BC(){if(Yv)return Oc;Yv=1;var a=PC(),r=R0(),t=aE();function n(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function i(s){var l=s,d=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(d=l.return),s=l.return;while(s)}return l.tag===3?d:null}function c(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(i(s)!==s)throw Error(n(188))}function m(s){var l=s.alternate;if(!l){if(l=i(s),l===null)throw Error(n(188));return l!==s?null:s}for(var d=s,p=l;;){var y=d.return;if(y===null)break;var w=y.alternate;if(w===null){if(p=y.return,p!==null){d=p;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===d)return u(y),s;if(w===p)return u(y),l;w=w.sibling}throw Error(n(188))}if(d.return!==p.return)d=y,p=w;else{for(var L=!1,Y=y.child;Y;){if(Y===d){L=!0,d=y,p=w;break}if(Y===p){L=!0,p=y,d=w;break}Y=Y.sibling}if(!L){for(Y=w.child;Y;){if(Y===d){L=!0,d=w,p=y;break}if(Y===p){L=!0,p=w,d=y;break}Y=Y.sibling}if(!L)throw Error(n(189))}}if(d.alternate!==p)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?s:l}function g(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=g(s),l!==null)return l;s=s.sibling}return null}var f=Object.assign,h=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),A=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function H(s){return s===null||typeof s!="object"?null:(s=Z&&s[Z]||s["@@iterator"],typeof s=="function"?s:null)}var V=Symbol.for("react.client.reference");function F(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===V?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case x:return"Fragment";case N:return"Profiler";case E:return"StrictMode";case k:return"Suspense";case B:return"SuspenseList";case O:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case A:return(s.displayName||"Context")+".Provider";case I:return(s._context.displayName||"Context")+".Consumer";case _:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case z:return l=s.displayName||null,l!==null?l:F(s.type)||"Memo";case M:l=s._payload,s=s._init;try{return F(s(l))}catch{}}return null}var R=Array.isArray,D=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},W=[],T=-1;function G(s){return{current:s}}function te(s){0>T||(s.current=W[T],W[T]=null,T--)}function P(s,l){T++,W[T]=s.current,s.current=l}var ne=G(null),q=G(null),oe=G(null),he=G(null);function be(s,l){switch(P(oe,l),P(q,s),P(ne,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?mv(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=mv(l),s=pv(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}te(ne),P(ne,s)}function nt(){te(ne),te(q),te(oe)}function ye(s){s.memoizedState!==null&&P(he,s);var l=ne.current,d=pv(l,s.type);l!==d&&(P(q,s),P(ne,d))}function We(s){q.current===s&&(te(ne),te(q)),he.current===s&&(te(he),Tc._currentValue=X)}var Ze=Object.prototype.hasOwnProperty,lt=a.unstable_scheduleCallback,Ve=a.unstable_cancelCallback,zt=a.unstable_shouldYield,ve=a.unstable_requestPaint,J=a.unstable_now,Ae=a.unstable_getCurrentPriorityLevel,Ge=a.unstable_ImmediatePriority,Le=a.unstable_UserBlockingPriority,de=a.unstable_NormalPriority,je=a.unstable_LowPriority,ze=a.unstable_IdlePriority,gt=a.log,re=a.unstable_setDisableYieldValue,Be=null,Oe=null;function Te(s){if(typeof gt=="function"&&re(s),Oe&&typeof Oe.setStrictMode=="function")try{Oe.setStrictMode(Be,s)}catch{}}var rt=Math.clz32?Math.clz32:ba,pt=Math.log,jt=Math.LN2;function ba(s){return s>>>=0,s===0?32:31-(pt(s)/jt|0)|0}var da=256,ta=4194304;function wa(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function rn(s,l,d){var p=s.pendingLanes;if(p===0)return 0;var y=0,w=s.suspendedLanes,L=s.pingedLanes;s=s.warmLanes;var Y=p&134217727;return Y!==0?(p=Y&~w,p!==0?y=wa(p):(L&=Y,L!==0?y=wa(L):d||(d=Y&~s,d!==0&&(y=wa(d))))):(Y=p&~w,Y!==0?y=wa(Y):L!==0?y=wa(L):d||(d=p&~s,d!==0&&(y=wa(d)))),y===0?0:l!==0&&l!==y&&(l&w)===0&&(w=y&-y,d=l&-l,w>=d||w===32&&(d&4194048)!==0)?l:y}function He(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function ht(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qt(){var s=da;return da<<=1,(da&4194048)===0&&(da=256),s}function on(){var s=ta;return ta<<=1,(ta&62914560)===0&&(ta=4194304),s}function Tt(s){for(var l=[],d=0;31>d;d++)l.push(s);return l}function Va(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ka(s,l,d,p,y,w){var L=s.pendingLanes;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=d,s.entangledLanes&=d,s.errorRecoveryDisabledLanes&=d,s.shellSuspendCounter=0;var Y=s.entanglements,ae=s.expirationTimes,me=s.hiddenUpdates;for(d=L&~d;0<d;){var Se=31-rt(d),Ie=1<<Se;Y[Se]=0,ae[Se]=-1;var fe=me[Se];if(fe!==null)for(me[Se]=null,Se=0;Se<fe.length;Se++){var ge=fe[Se];ge!==null&&(ge.lane&=-536870913)}d&=~Ie}p!==0&&La(s,p,0),w!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=w&~(L&~l))}function La(s,l,d){s.pendingLanes|=l,s.suspendedLanes&=~l;var p=31-rt(l);s.entangledLanes|=l,s.entanglements[p]=s.entanglements[p]|1073741824|d&4194090}function sn(s,l){var d=s.entangledLanes|=l;for(s=s.entanglements;d;){var p=31-rt(d),y=1<<p;y&l|s[p]&l&&(s[p]|=l),d&=~y}}function wn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Wa(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Jn(){var s=j.p;return s!==0?s:(s=window.event,s===void 0?32:Rv(s.type))}function ss(s,l){var d=j.p;try{return j.p=s,l()}finally{j.p=d}}var Sn=Math.random().toString(36).slice(2),ua="__reactFiber$"+Sn,Na="__reactProps$"+Sn,An="__reactContainer$"+Sn,Wr="__reactEvents$"+Sn,no="__reactListeners$"+Sn,Dn="__reactHandles$"+Sn,jr="__reactResources$"+Sn,hr="__reactMarker$"+Sn;function Hr(s){delete s[ua],delete s[Na],delete s[Wr],delete s[no],delete s[Dn]}function Mn(s){var l=s[ua];if(l)return l;for(var d=s.parentNode;d;){if(l=d[An]||d[ua]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(s=yv(s);s!==null;){if(d=s[ua])return d;s=yv(s)}return l}s=d,d=s.parentNode}return null}function yr(s){if(s=s[ua]||s[An]){var l=s.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return s}return null}function br(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(n(33))}function Xn(s){var l=s[jr];return l||(l=s[jr]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Sa(s){s[hr]=!0}var _o=new Set,ko={};function un(s,l){Kn(s,l),Kn(s+"Capture",l)}function Kn(s,l){for(ko[s]=l,s=0;s<l.length;s++)_o.add(l[s])}var $r=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),er={},ie={};function Ce(s){return Ze.call(ie,s)?!0:Ze.call(er,s)?!1:$r.test(s)?ie[s]=!0:(er[s]=!0,!1)}function ot(s,l,d){if(Ce(l))if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+d)}}function it(s,l,d){if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+d)}}function mt(s,l,d,p){if(p===null)s.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(d);return}s.setAttributeNS(l,d,""+p)}}var $t,Jt;function na(s){if($t===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);$t=l&&l[1]||"",Jt=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$t+s+Jt}var ja=!1;function It(s,l){if(!s||ja)return"";ja=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var Ie=function(){throw Error()};if(Object.defineProperty(Ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ie,[])}catch(ge){var fe=ge}Reflect.construct(s,[],Ie)}else{try{Ie.call()}catch(ge){fe=ge}s.call(Ie.prototype)}}else{try{throw Error()}catch(ge){fe=ge}(Ie=s())&&typeof Ie.catch=="function"&&Ie.catch(function(){})}}catch(ge){if(ge&&fe&&typeof ge.stack=="string")return[ge.stack,fe.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=p.DetermineComponentFrameRoot(),L=w[0],Y=w[1];if(L&&Y){var ae=L.split(`
`),me=Y.split(`
`);for(y=p=0;p<ae.length&&!ae[p].includes("DetermineComponentFrameRoot");)p++;for(;y<me.length&&!me[y].includes("DetermineComponentFrameRoot");)y++;if(p===ae.length||y===me.length)for(p=ae.length-1,y=me.length-1;1<=p&&0<=y&&ae[p]!==me[y];)y--;for(;1<=p&&0<=y;p--,y--)if(ae[p]!==me[y]){if(p!==1||y!==1)do if(p--,y--,0>y||ae[p]!==me[y]){var Se=`
`+ae[p].replace(" at new "," at ");return s.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",s.displayName)),Se}while(1<=p&&0<=y);break}}}finally{ja=!1,Error.prepareStackTrace=d}return(d=s?s.displayName||s.name:"")?na(d):""}function qs(s){switch(s.tag){case 26:case 27:case 5:return na(s.type);case 16:return na("Lazy");case 13:return na("Suspense");case 19:return na("SuspenseList");case 0:case 15:return It(s.type,!1);case 11:return It(s.type.render,!1);case 1:return It(s.type,!0);case 31:return na("Activity");default:return""}}function ls(s){try{var l="";do l+=qs(s),s=s.return;while(s);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function fn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Pl(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function le(s){var l=Pl(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),p=""+s[l];if(!s.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,w=d.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return y.call(this)},set:function(L){p=""+L,w.call(this,L)}}),Object.defineProperty(s,l,{enumerable:d.enumerable}),{getValue:function(){return p},setValue:function(L){p=""+L},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function $(s){s._valueTracker||(s._valueTracker=le(s))}function Ee(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var d=l.getValue(),p="";return s&&(p=Pl(s)?s.checked?"true":"false":s.value),s=p,s!==d?(l.setValue(s),!0):!1}function _e(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Me=/[\n"\\]/g;function $e(s){return s.replace(Me,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Fe(s,l,d,p,y,w,L,Y){s.name="",L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?s.type=L:s.removeAttribute("type"),l!=null?L==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+fn(l)):s.value!==""+fn(l)&&(s.value=""+fn(l)):L!=="submit"&&L!=="reset"||s.removeAttribute("value"),l!=null?Ct(s,L,fn(l)):d!=null?Ct(s,L,fn(d)):p!=null&&s.removeAttribute("value"),y==null&&w!=null&&(s.defaultChecked=!!w),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?s.name=""+fn(Y):s.removeAttribute("name")}function Je(s,l,d,p,y,w,L,Y){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.type=w),l!=null||d!=null){if(!(w!=="submit"&&w!=="reset"||l!=null))return;d=d!=null?""+fn(d):"",l=l!=null?""+fn(l):d,Y||l===s.value||(s.value=l),s.defaultValue=l}p=p??y,p=typeof p!="function"&&typeof p!="symbol"&&!!p,s.checked=Y?s.checked:!!p,s.defaultChecked=!!p,L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(s.name=L)}function Ct(s,l,d){l==="number"&&_e(s.ownerDocument)===s||s.defaultValue===""+d||(s.defaultValue=""+d)}function ct(s,l,d,p){if(s=s.options,l){l={};for(var y=0;y<d.length;y++)l["$"+d[y]]=!0;for(d=0;d<s.length;d++)y=l.hasOwnProperty("$"+s[d].value),s[d].selected!==y&&(s[d].selected=y),y&&p&&(s[d].defaultSelected=!0)}else{for(d=""+fn(d),l=null,y=0;y<s.length;y++){if(s[y].value===d){s[y].selected=!0,p&&(s[y].defaultSelected=!0);return}l!==null||s[y].disabled||(l=s[y])}l!==null&&(l.selected=!0)}}function _t(s,l,d){if(l!=null&&(l=""+fn(l),l!==s.value&&(s.value=l),d==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=d!=null?""+fn(d):""}function ft(s,l,d,p){if(l==null){if(p!=null){if(d!=null)throw Error(n(92));if(R(p)){if(1<p.length)throw Error(n(93));p=p[0]}d=p}d==null&&(d=""),l=d}d=fn(l),s.defaultValue=d,p=s.textContent,p===d&&p!==""&&p!==null&&(s.value=p)}function qe(s,l){if(l){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=l;return}}s.textContent=l}var xe=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pe(s,l,d){var p=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?p?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":p?s.setProperty(l,d):typeof d!="number"||d===0||xe.has(l)?l==="float"?s.cssFloat=d:s[l]=(""+d).trim():s[l]=d+"px"}function Qe(s,l,d){if(l!=null&&typeof l!="object")throw Error(n(62));if(s=s.style,d!=null){for(var p in d)!d.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?s.setProperty(p,""):p==="float"?s.cssFloat="":s[p]="");for(var y in l)p=l[y],l.hasOwnProperty(y)&&d[y]!==p&&Pe(s,y,p)}else for(var w in l)l.hasOwnProperty(w)&&Pe(s,w,l[w])}function et(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rn(s){return Xt.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Yr=null;function Ht(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var tt=null,ra=null;function ma(s){var l=yr(s);if(l&&(s=l.stateNode)){var d=s[Na]||null;e:switch(s=l.stateNode,l.type){case"input":if(Fe(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+$e(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var p=d[l];if(p!==s&&p.form===s.form){var y=p[Na]||null;if(!y)throw Error(n(90));Fe(p,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<d.length;l++)p=d[l],p.form===s.form&&Ee(p)}break e;case"textarea":_t(s,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&ct(s,!!d.multiple,l,!1)}}}var Qa=!1;function Tn(s,l,d){if(Qa)return s(l,d);Qa=!0;try{var p=s(l);return p}finally{if(Qa=!1,(tt!==null||ra!==null)&&(Pu(),tt&&(l=tt,s=ra,ra=tt=null,ma(l),s)))for(l=0;l<s.length;l++)ma(s[l])}}function Ba(s,l){var d=s.stateNode;if(d===null)return null;var p=d[Na]||null;if(p===null)return null;d=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var Ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gn=!1;if(Ca)try{var hn={};Object.defineProperty(hn,"passive",{get:function(){gn=!0}}),window.addEventListener("test",hn,hn),window.removeEventListener("test",hn,hn)}catch{gn=!1}var yn=null,tr=null,Ja=null;function Ha(){if(Ja)return Ja;var s,l=tr,d=l.length,p,y="value"in yn?yn.value:yn.textContent,w=y.length;for(s=0;s<d&&l[s]===y[s];s++);var L=d-s;for(p=1;p<=L&&l[d-p]===y[w-p];p++);return Ja=y.slice(s,1<p?1-p:void 0)}function Fn(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function ar(){return!0}function Gr(){return!1}function Xa(s){function l(d,p,y,w,L){this._reactName=d,this._targetInst=y,this.type=p,this.nativeEvent=w,this.target=L,this.currentTarget=null;for(var Y in s)s.hasOwnProperty(Y)&&(d=s[Y],this[Y]=d?d(w):w[Y]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ar:Gr,this.isPropagationStopped=Gr,this}return f(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=ar)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=ar)},persist:function(){},isPersistent:ar}),l}var qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},is=Xa(qr),No=f({},qr,{view:0,detail:0}),Ll=Xa(No),qi,Zi,Bl,Zs=f({},No,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Bl&&(Bl&&s.type==="mousemove"?(qi=s.screenX-Bl.screenX,Zi=s.screenY-Bl.screenY):Zi=qi=0,Bl=s),qi)},movementY:function(s){return"movementY"in s?s.movementY:Zi}}),Hd=Xa(Zs),$d=f({},Zs,{dataTransfer:0}),af=Xa($d),_y=f({},No,{relatedTarget:0}),Zr=Xa(_y),zl=f({},qr,{animationName:0,elapsedTime:0,pseudoElement:0}),nf=Xa(zl),Yd=f({},qr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ky=Xa(Yd),rf=f({},qr,{data:0}),Vi=Xa(rf),of={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ol(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Vs[s])?!!l[s]:!1}function nr(){return Ol}var qd=f({},No,{key:function(s){if(s.key){var l=of[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Fn(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Gd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nr,charCode:function(s){return s.type==="keypress"?Fn(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Fn(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),sf=Xa(qd),lf=f({},Zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qi=Xa(lf),cs=f({},No,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nr}),cf=Xa(cs),Io=f({},qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zd=Xa(Io),Vd=f({},Zs,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Qd=Xa(Vd),Jd=f({},qr,{newState:0,oldState:0}),Xd=Xa(Jd),Kd=[9,13,27,32],ee=Ca&&"CompositionEvent"in window,De=null;Ca&&"documentMode"in document&&(De=document.documentMode);var Ue=Ca&&"TextEvent"in window&&!De,kt=Ca&&(!ee||De&&8<De&&11>=De),Wt=" ",Nt=!1;function Ia(s,l){switch(s){case"keyup":return Kd.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ao(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var dt=!1;function Un(s,l){switch(s){case"compositionend":return Ao(l);case"keypress":return l.which!==32?null:(Nt=!0,Wt);case"textInput":return s=l.data,s===Wt&&Nt?null:s;default:return null}}function Do(s,l){if(dt)return s==="compositionend"||!ee&&Ia(s,l)?(s=Ha(),Ja=tr=yn=null,dt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return kt&&l.locale!=="ko"?null:l.data;default:return null}}var Fl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eu(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!Fl[s.type]:l==="textarea"}function Ny(s,l,d,p){tt?ra?ra.push(p):ra=[p]:tt=p,l=Uu(l,"onChange"),0<l.length&&(d=new is("onChange","change",null,d,p),s.push({event:d,listeners:l}))}var Ji=null,Xi=null;function tS(s){lv(s,0)}function tu(s){var l=br(s);if(Ee(l))return s}function Iy(s,l){if(s==="change")return l}var Ay=!1;if(Ca){var df;if(Ca){var uf="oninput"in document;if(!uf){var Dy=document.createElement("div");Dy.setAttribute("oninput","return;"),uf=typeof Dy.oninput=="function"}df=uf}else df=!1;Ay=df&&(!document.documentMode||9<document.documentMode)}function My(){Ji&&(Ji.detachEvent("onpropertychange",Ry),Xi=Ji=null)}function Ry(s){if(s.propertyName==="value"&&tu(Xi)){var l=[];Ny(l,Xi,s,Ht(s)),Tn(tS,l)}}function aS(s,l,d){s==="focusin"?(My(),Ji=l,Xi=d,Ji.attachEvent("onpropertychange",Ry)):s==="focusout"&&My()}function nS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return tu(Xi)}function rS(s,l){if(s==="click")return tu(l)}function oS(s,l){if(s==="input"||s==="change")return tu(l)}function sS(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var rr=typeof Object.is=="function"?Object.is:sS;function Ki(s,l){if(rr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var d=Object.keys(s),p=Object.keys(l);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var y=d[p];if(!Ze.call(l,y)||!rr(s[y],l[y]))return!1}return!0}function Ty(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Py(s,l){var d=Ty(s);s=0;for(var p;d;){if(d.nodeType===3){if(p=s+d.textContent.length,s<=l&&p>=l)return{node:d,offset:l-s};s=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Ty(d)}}function Ly(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?Ly(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function By(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=_e(s.document);l instanceof s.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)s=l.contentWindow;else break;l=_e(s.document)}return l}function mf(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var lS=Ca&&"documentMode"in document&&11>=document.documentMode,Ul=null,pf=null,ec=null,ff=!1;function zy(s,l,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;ff||Ul==null||Ul!==_e(p)||(p=Ul,"selectionStart"in p&&mf(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),ec&&Ki(ec,p)||(ec=p,p=Uu(pf,"onSelect"),0<p.length&&(l=new is("onSelect","select",null,l,d),s.push({event:l,listeners:p}),l.target=Ul)))}function Qs(s,l){var d={};return d[s.toLowerCase()]=l.toLowerCase(),d["Webkit"+s]="webkit"+l,d["Moz"+s]="moz"+l,d}var Wl={animationend:Qs("Animation","AnimationEnd"),animationiteration:Qs("Animation","AnimationIteration"),animationstart:Qs("Animation","AnimationStart"),transitionrun:Qs("Transition","TransitionRun"),transitionstart:Qs("Transition","TransitionStart"),transitioncancel:Qs("Transition","TransitionCancel"),transitionend:Qs("Transition","TransitionEnd")},gf={},Oy={};Ca&&(Oy=document.createElement("div").style,"AnimationEvent"in window||(delete Wl.animationend.animation,delete Wl.animationiteration.animation,delete Wl.animationstart.animation),"TransitionEvent"in window||delete Wl.transitionend.transition);function Js(s){if(gf[s])return gf[s];if(!Wl[s])return s;var l=Wl[s],d;for(d in l)if(l.hasOwnProperty(d)&&d in Oy)return gf[s]=l[d];return s}var Fy=Js("animationend"),Uy=Js("animationiteration"),Wy=Js("animationstart"),iS=Js("transitionrun"),cS=Js("transitionstart"),dS=Js("transitioncancel"),jy=Js("transitionend"),Hy=new Map,hf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hf.push("scrollEnd");function Vr(s,l){Hy.set(s,l),un(l,[s])}var $y=new WeakMap;function vr(s,l){if(typeof s=="object"&&s!==null){var d=$y.get(s);return d!==void 0?d:(l={value:s,source:l,stack:ls(l)},$y.set(s,l),l)}return{value:s,source:l,stack:ls(l)}}var xr=[],jl=0,yf=0;function au(){for(var s=jl,l=yf=jl=0;l<s;){var d=xr[l];xr[l++]=null;var p=xr[l];xr[l++]=null;var y=xr[l];xr[l++]=null;var w=xr[l];if(xr[l++]=null,p!==null&&y!==null){var L=p.pending;L===null?y.next=y:(y.next=L.next,L.next=y),p.pending=y}w!==0&&Yy(d,y,w)}}function nu(s,l,d,p){xr[jl++]=s,xr[jl++]=l,xr[jl++]=d,xr[jl++]=p,yf|=p,s.lanes|=p,s=s.alternate,s!==null&&(s.lanes|=p)}function bf(s,l,d,p){return nu(s,l,d,p),ru(s)}function Hl(s,l){return nu(s,null,null,l),ru(s)}function Yy(s,l,d){s.lanes|=d;var p=s.alternate;p!==null&&(p.lanes|=d);for(var y=!1,w=s.return;w!==null;)w.childLanes|=d,p=w.alternate,p!==null&&(p.childLanes|=d),w.tag===22&&(s=w.stateNode,s===null||s._visibility&1||(y=!0)),s=w,w=w.return;return s.tag===3?(w=s.stateNode,y&&l!==null&&(y=31-rt(d),s=w.hiddenUpdates,p=s[y],p===null?s[y]=[l]:p.push(l),l.lane=d|536870912),w):null}function ru(s){if(50<_c)throw _c=0,Cg=null,Error(n(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var $l={};function uS(s,l,d,p){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(s,l,d,p){return new uS(s,l,d,p)}function vf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Mo(s,l){var d=s.alternate;return d===null?(d=or(s.tag,l,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=l,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&65011712,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,l=s.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d.refCleanup=s.refCleanup,d}function Gy(s,l){s.flags&=65011714;var d=s.alternate;return d===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,l=d.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function ou(s,l,d,p,y,w){var L=0;if(p=s,typeof s=="function")vf(s)&&(L=1);else if(typeof s=="string")L=pC(s,d,ne.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case O:return s=or(31,d,l,y),s.elementType=O,s.lanes=w,s;case x:return Xs(d.children,y,w,l);case E:L=8,y|=24;break;case N:return s=or(12,d,l,y|2),s.elementType=N,s.lanes=w,s;case k:return s=or(13,d,l,y),s.elementType=k,s.lanes=w,s;case B:return s=or(19,d,l,y),s.elementType=B,s.lanes=w,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case C:case A:L=10;break e;case I:L=9;break e;case _:L=11;break e;case z:L=14;break e;case M:L=16,p=null;break e}L=29,d=Error(n(130,s===null?"null":typeof s,"")),p=null}return l=or(L,d,l,y),l.elementType=s,l.type=p,l.lanes=w,l}function Xs(s,l,d,p){return s=or(7,s,p,l),s.lanes=d,s}function xf(s,l,d){return s=or(6,s,null,l),s.lanes=d,s}function Ef(s,l,d){return l=or(4,s.children!==null?s.children:[],s.key,l),l.lanes=d,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var Yl=[],Gl=0,su=null,lu=0,Er=[],wr=0,Ks=null,Ro=1,To="";function el(s,l){Yl[Gl++]=lu,Yl[Gl++]=su,su=s,lu=l}function qy(s,l,d){Er[wr++]=Ro,Er[wr++]=To,Er[wr++]=Ks,Ks=s;var p=Ro;s=To;var y=32-rt(p)-1;p&=~(1<<y),d+=1;var w=32-rt(l)+y;if(30<w){var L=y-y%5;w=(p&(1<<L)-1).toString(32),p>>=L,y-=L,Ro=1<<32-rt(l)+y|d<<y|p,To=w+s}else Ro=1<<w|d<<y|p,To=s}function wf(s){s.return!==null&&(el(s,1),qy(s,1,0))}function Sf(s){for(;s===su;)su=Yl[--Gl],Yl[Gl]=null,lu=Yl[--Gl],Yl[Gl]=null;for(;s===Ks;)Ks=Er[--wr],Er[wr]=null,To=Er[--wr],Er[wr]=null,Ro=Er[--wr],Er[wr]=null}var Wn=null,$a=null,Kt=!1,tl=null,ro=!1,Cf=Error(n(519));function al(s){var l=Error(n(418,""));throw nc(vr(l,s)),Cf}function Zy(s){var l=s.stateNode,d=s.type,p=s.memoizedProps;switch(l[ua]=s,l[Na]=p,d){case"dialog":Ut("cancel",l),Ut("close",l);break;case"iframe":case"object":case"embed":Ut("load",l);break;case"video":case"audio":for(d=0;d<Nc.length;d++)Ut(Nc[d],l);break;case"source":Ut("error",l);break;case"img":case"image":case"link":Ut("error",l),Ut("load",l);break;case"details":Ut("toggle",l);break;case"input":Ut("invalid",l),Je(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),$(l);break;case"select":Ut("invalid",l);break;case"textarea":Ut("invalid",l),ft(l,p.value,p.defaultValue,p.children),$(l)}d=p.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||p.suppressHydrationWarning===!0||uv(l.textContent,d)?(p.popover!=null&&(Ut("beforetoggle",l),Ut("toggle",l)),p.onScroll!=null&&Ut("scroll",l),p.onScrollEnd!=null&&Ut("scrollend",l),p.onClick!=null&&(l.onclick=Wu),l=!0):l=!1,l||al(s)}function Vy(s){for(Wn=s.return;Wn;)switch(Wn.tag){case 5:case 13:ro=!1;return;case 27:case 3:ro=!0;return;default:Wn=Wn.return}}function tc(s){if(s!==Wn)return!1;if(!Kt)return Vy(s),Kt=!0,!1;var l=s.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=s.type,d=!(d!=="form"&&d!=="button")||Ug(s.type,s.memoizedProps)),d=!d),d&&$a&&al(s),Vy(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8)if(d=s.data,d==="/$"){if(l===0){$a=Jr(s.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;s=s.nextSibling}$a=null}}else l===27?(l=$a,_s(s.type)?(s=$g,$g=null,$a=s):$a=l):$a=Wn?Jr(s.stateNode.nextSibling):null;return!0}function ac(){$a=Wn=null,Kt=!1}function Qy(){var s=tl;return s!==null&&(Zn===null?Zn=s:Zn.push.apply(Zn,s),tl=null),s}function nc(s){tl===null?tl=[s]:tl.push(s)}var _f=G(null),nl=null,Po=null;function ds(s,l,d){P(_f,l._currentValue),l._currentValue=d}function Lo(s){s._currentValue=_f.current,te(_f)}function kf(s,l,d){for(;s!==null;){var p=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),s===d)break;s=s.return}}function Nf(s,l,d,p){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var w=y.dependencies;if(w!==null){var L=y.child;w=w.firstContext;e:for(;w!==null;){var Y=w;w=y;for(var ae=0;ae<l.length;ae++)if(Y.context===l[ae]){w.lanes|=d,Y=w.alternate,Y!==null&&(Y.lanes|=d),kf(w.return,d,s),p||(L=null);break e}w=Y.next}}else if(y.tag===18){if(L=y.return,L===null)throw Error(n(341));L.lanes|=d,w=L.alternate,w!==null&&(w.lanes|=d),kf(L,d,s),L=null}else L=y.child;if(L!==null)L.return=y;else for(L=y;L!==null;){if(L===s){L=null;break}if(y=L.sibling,y!==null){y.return=L.return,L=y;break}L=L.return}y=L}}function rc(s,l,d,p){s=null;for(var y=l,w=!1;y!==null;){if(!w){if((y.flags&524288)!==0)w=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var L=y.alternate;if(L===null)throw Error(n(387));if(L=L.memoizedProps,L!==null){var Y=y.type;rr(y.pendingProps.value,L.value)||(s!==null?s.push(Y):s=[Y])}}else if(y===he.current){if(L=y.alternate,L===null)throw Error(n(387));L.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Tc):s=[Tc])}y=y.return}s!==null&&Nf(l,s,d,p),l.flags|=262144}function iu(s){for(s=s.firstContext;s!==null;){if(!rr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function rl(s){nl=s,Po=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Pn(s){return Jy(nl,s)}function cu(s,l){return nl===null&&rl(s),Jy(s,l)}function Jy(s,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},Po===null){if(s===null)throw Error(n(308));Po=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Po=Po.next=l;return d}var mS=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(d,p){s.push(p)}};this.abort=function(){l.aborted=!0,s.forEach(function(d){return d()})}},pS=a.unstable_scheduleCallback,fS=a.unstable_NormalPriority,mn={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function If(){return{controller:new mS,data:new Map,refCount:0}}function oc(s){s.refCount--,s.refCount===0&&pS(fS,function(){s.controller.abort()})}var sc=null,Af=0,ql=0,Zl=null;function gS(s,l){if(sc===null){var d=sc=[];Af=0,ql=Mg(),Zl={status:"pending",value:void 0,then:function(p){d.push(p)}}}return Af++,l.then(Xy,Xy),l}function Xy(){if(--Af===0&&sc!==null){Zl!==null&&(Zl.status="fulfilled");var s=sc;sc=null,ql=0,Zl=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function hS(s,l){var d=[],p={status:"pending",value:null,reason:null,then:function(y){d.push(y)}};return s.then(function(){p.status="fulfilled",p.value=l;for(var y=0;y<d.length;y++)(0,d[y])(l)},function(y){for(p.status="rejected",p.reason=y,y=0;y<d.length;y++)(0,d[y])(void 0)}),p}var Ky=D.S;D.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&gS(s,l),Ky!==null&&Ky(s,l)};var ol=G(null);function Df(){var s=ol.current;return s!==null?s:xa.pooledCache}function du(s,l){l===null?P(ol,ol.current):P(ol,l.pool)}function eb(){var s=Df();return s===null?null:{parent:mn._currentValue,pool:s}}var lc=Error(n(460)),tb=Error(n(474)),uu=Error(n(542)),Mf={then:function(){}};function ab(s){return s=s.status,s==="fulfilled"||s==="rejected"}function mu(){}function nb(s,l,d){switch(d=s[d],d===void 0?s.push(l):d!==l&&(l.then(mu,mu),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,ob(s),s;default:if(typeof l.status=="string")l.then(mu,mu);else{if(s=xa,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=l,s.status="pending",s.then(function(p){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=p}},function(p){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,ob(s),s}throw ic=l,lc}}var ic=null;function rb(){if(ic===null)throw Error(n(459));var s=ic;return ic=null,s}function ob(s){if(s===lc||s===uu)throw Error(n(483))}var us=!1;function Rf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tf(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ms(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ps(s,l,d){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(oa&2)!==0){var y=p.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),p.pending=l,l=ru(s),Yy(s,null,d),l}return nu(s,p,l,d),ru(s)}function cc(s,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var p=l.lanes;p&=s.pendingLanes,d|=p,l.lanes=d,sn(s,d)}}function Pf(s,l){var d=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var y=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var L={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};w===null?y=w=L:w=w.next=L,d=d.next}while(d!==null);w===null?y=w=l:w=w.next=l}else y=w=l;d={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:p.shared,callbacks:p.callbacks},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=l}var Lf=!1;function dc(){if(Lf){var s=Zl;if(s!==null)throw s}}function uc(s,l,d,p){Lf=!1;var y=s.updateQueue;us=!1;var w=y.firstBaseUpdate,L=y.lastBaseUpdate,Y=y.shared.pending;if(Y!==null){y.shared.pending=null;var ae=Y,me=ae.next;ae.next=null,L===null?w=me:L.next=me,L=ae;var Se=s.alternate;Se!==null&&(Se=Se.updateQueue,Y=Se.lastBaseUpdate,Y!==L&&(Y===null?Se.firstBaseUpdate=me:Y.next=me,Se.lastBaseUpdate=ae))}if(w!==null){var Ie=y.baseState;L=0,Se=me=ae=null,Y=w;do{var fe=Y.lane&-536870913,ge=fe!==Y.lane;if(ge?(Gt&fe)===fe:(p&fe)===fe){fe!==0&&fe===ql&&(Lf=!0),Se!==null&&(Se=Se.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var Et=s,yt=Y;fe=l;var ga=d;switch(yt.tag){case 1:if(Et=yt.payload,typeof Et=="function"){Ie=Et.call(ga,Ie,fe);break e}Ie=Et;break e;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=yt.payload,fe=typeof Et=="function"?Et.call(ga,Ie,fe):Et,fe==null)break e;Ie=f({},Ie,fe);break e;case 2:us=!0}}fe=Y.callback,fe!==null&&(s.flags|=64,ge&&(s.flags|=8192),ge=y.callbacks,ge===null?y.callbacks=[fe]:ge.push(fe))}else ge={lane:fe,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Se===null?(me=Se=ge,ae=Ie):Se=Se.next=ge,L|=fe;if(Y=Y.next,Y===null){if(Y=y.shared.pending,Y===null)break;ge=Y,Y=ge.next,ge.next=null,y.lastBaseUpdate=ge,y.shared.pending=null}}while(!0);Se===null&&(ae=Ie),y.baseState=ae,y.firstBaseUpdate=me,y.lastBaseUpdate=Se,w===null&&(y.shared.lanes=0),Es|=L,s.lanes=L,s.memoizedState=Ie}}function sb(s,l){if(typeof s!="function")throw Error(n(191,s));s.call(l)}function lb(s,l){var d=s.callbacks;if(d!==null)for(s.callbacks=null,s=0;s<d.length;s++)sb(d[s],l)}var Vl=G(null),pu=G(0);function ib(s,l){s=jo,P(pu,s),P(Vl,l),jo=s|l.baseLanes}function Bf(){P(pu,jo),P(Vl,Vl.current)}function zf(){jo=pu.current,te(Vl),te(pu)}var fs=0,Pt=null,pa=null,ln=null,fu=!1,Ql=!1,sl=!1,gu=0,mc=0,Jl=null,yS=0;function Ka(){throw Error(n(321))}function Of(s,l){if(l===null)return!1;for(var d=0;d<l.length&&d<s.length;d++)if(!rr(s[d],l[d]))return!1;return!0}function Ff(s,l,d,p,y,w){return fs=w,Pt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,D.H=s===null||s.memoizedState===null?Yb:Gb,sl=!1,w=d(p,y),sl=!1,Ql&&(w=db(l,d,p,y)),cb(s),w}function cb(s){D.H=Eu;var l=pa!==null&&pa.next!==null;if(fs=0,ln=pa=Pt=null,fu=!1,mc=0,Jl=null,l)throw Error(n(300));s===null||bn||(s=s.dependencies,s!==null&&iu(s)&&(bn=!0))}function db(s,l,d,p){Pt=s;var y=0;do{if(Ql&&(Jl=null),mc=0,Ql=!1,25<=y)throw Error(n(301));if(y+=1,ln=pa=null,s.updateQueue!=null){var w=s.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}D.H=CS,w=l(d,p)}while(Ql);return w}function bS(){var s=D.H,l=s.useState()[0];return l=typeof l.then=="function"?pc(l):l,s=s.useState()[0],(pa!==null?pa.memoizedState:null)!==s&&(Pt.flags|=1024),l}function Uf(){var s=gu!==0;return gu=0,s}function Wf(s,l,d){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~d}function jf(s){if(fu){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}fu=!1}fs=0,ln=pa=Pt=null,Ql=!1,mc=gu=0,Jl=null}function Gn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?Pt.memoizedState=ln=s:ln=ln.next=s,ln}function cn(){if(pa===null){var s=Pt.alternate;s=s!==null?s.memoizedState:null}else s=pa.next;var l=ln===null?Pt.memoizedState:ln.next;if(l!==null)ln=l,pa=s;else{if(s===null)throw Pt.alternate===null?Error(n(467)):Error(n(310));pa=s,s={memoizedState:pa.memoizedState,baseState:pa.baseState,baseQueue:pa.baseQueue,queue:pa.queue,next:null},ln===null?Pt.memoizedState=ln=s:ln=ln.next=s}return ln}function Hf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pc(s){var l=mc;return mc+=1,Jl===null&&(Jl=[]),s=nb(Jl,s,l),l=Pt,(ln===null?l.memoizedState:ln.next)===null&&(l=l.alternate,D.H=l===null||l.memoizedState===null?Yb:Gb),s}function hu(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return pc(s);if(s.$$typeof===A)return Pn(s)}throw Error(n(438,String(s)))}function $f(s){var l=null,d=Pt.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var p=Pt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=Hf(),Pt.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(s),p=0;p<s;p++)d[p]=U;return l.index++,d}function Bo(s,l){return typeof l=="function"?l(s):l}function yu(s){var l=cn();return Yf(l,pa,s)}function Yf(s,l,d){var p=s.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=d;var y=s.baseQueue,w=p.pending;if(w!==null){if(y!==null){var L=y.next;y.next=w.next,w.next=L}l.baseQueue=y=w,p.pending=null}if(w=s.baseState,y===null)s.memoizedState=w;else{l=y.next;var Y=L=null,ae=null,me=l,Se=!1;do{var Ie=me.lane&-536870913;if(Ie!==me.lane?(Gt&Ie)===Ie:(fs&Ie)===Ie){var fe=me.revertLane;if(fe===0)ae!==null&&(ae=ae.next={lane:0,revertLane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),Ie===ql&&(Se=!0);else if((fs&fe)===fe){me=me.next,fe===ql&&(Se=!0);continue}else Ie={lane:0,revertLane:me.revertLane,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},ae===null?(Y=ae=Ie,L=w):ae=ae.next=Ie,Pt.lanes|=fe,Es|=fe;Ie=me.action,sl&&d(w,Ie),w=me.hasEagerState?me.eagerState:d(w,Ie)}else fe={lane:Ie,revertLane:me.revertLane,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},ae===null?(Y=ae=fe,L=w):ae=ae.next=fe,Pt.lanes|=Ie,Es|=Ie;me=me.next}while(me!==null&&me!==l);if(ae===null?L=w:ae.next=Y,!rr(w,s.memoizedState)&&(bn=!0,Se&&(d=Zl,d!==null)))throw d;s.memoizedState=w,s.baseState=L,s.baseQueue=ae,p.lastRenderedState=w}return y===null&&(p.lanes=0),[s.memoizedState,p.dispatch]}function Gf(s){var l=cn(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var p=d.dispatch,y=d.pending,w=l.memoizedState;if(y!==null){d.pending=null;var L=y=y.next;do w=s(w,L.action),L=L.next;while(L!==y);rr(w,l.memoizedState)||(bn=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),d.lastRenderedState=w}return[w,p]}function ub(s,l,d){var p=Pt,y=cn(),w=Kt;if(w){if(d===void 0)throw Error(n(407));d=d()}else d=l();var L=!rr((pa||y).memoizedState,d);L&&(y.memoizedState=d,bn=!0),y=y.queue;var Y=fb.bind(null,p,y,s);if(fc(2048,8,Y,[s]),y.getSnapshot!==l||L||ln!==null&&ln.memoizedState.tag&1){if(p.flags|=2048,Xl(9,bu(),pb.bind(null,p,y,d,l),null),xa===null)throw Error(n(349));w||(fs&124)!==0||mb(p,l,d)}return d}function mb(s,l,d){s.flags|=16384,s={getSnapshot:l,value:d},l=Pt.updateQueue,l===null?(l=Hf(),Pt.updateQueue=l,l.stores=[s]):(d=l.stores,d===null?l.stores=[s]:d.push(s))}function pb(s,l,d,p){l.value=d,l.getSnapshot=p,gb(l)&&hb(s)}function fb(s,l,d){return d(function(){gb(l)&&hb(s)})}function gb(s){var l=s.getSnapshot;s=s.value;try{var d=l();return!rr(s,d)}catch{return!0}}function hb(s){var l=Hl(s,2);l!==null&&dr(l,s,2)}function qf(s){var l=Gn();if(typeof s=="function"){var d=s;if(s=d(),sl){Te(!0);try{d()}finally{Te(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bo,lastRenderedState:s},l}function yb(s,l,d,p){return s.baseState=d,Yf(s,pa,typeof p=="function"?p:Bo)}function vS(s,l,d,p,y){if(xu(s))throw Error(n(485));if(s=l.action,s!==null){var w={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(L){w.listeners.push(L)}};D.T!==null?d(!0):w.isTransition=!1,p(w),d=l.pending,d===null?(w.next=l.pending=w,bb(l,w)):(w.next=d.next,l.pending=d.next=w)}}function bb(s,l){var d=l.action,p=l.payload,y=s.state;if(l.isTransition){var w=D.T,L={};D.T=L;try{var Y=d(y,p),ae=D.S;ae!==null&&ae(L,Y),vb(s,l,Y)}catch(me){Zf(s,l,me)}finally{D.T=w}}else try{w=d(y,p),vb(s,l,w)}catch(me){Zf(s,l,me)}}function vb(s,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(p){xb(s,l,p)},function(p){return Zf(s,l,p)}):xb(s,l,d)}function xb(s,l,d){l.status="fulfilled",l.value=d,Eb(l),s.state=d,l=s.pending,l!==null&&(d=l.next,d===l?s.pending=null:(d=d.next,l.next=d,bb(s,d)))}function Zf(s,l,d){var p=s.pending;if(s.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=d,Eb(l),l=l.next;while(l!==p)}s.action=null}function Eb(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function wb(s,l){return l}function Sb(s,l){if(Kt){var d=xa.formState;if(d!==null){e:{var p=Pt;if(Kt){if($a){t:{for(var y=$a,w=ro;y.nodeType!==8;){if(!w){y=null;break t}if(y=Jr(y.nextSibling),y===null){y=null;break t}}w=y.data,y=w==="F!"||w==="F"?y:null}if(y){$a=Jr(y.nextSibling),p=y.data==="F!";break e}}al(p)}p=!1}p&&(l=d[0])}}return d=Gn(),d.memoizedState=d.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wb,lastRenderedState:l},d.queue=p,d=jb.bind(null,Pt,p),p.dispatch=d,p=qf(!1),w=Kf.bind(null,Pt,!1,p.queue),p=Gn(),y={state:l,dispatch:null,action:s,pending:null},p.queue=y,d=vS.bind(null,Pt,y,w,d),y.dispatch=d,p.memoizedState=s,[l,d,!1]}function Cb(s){var l=cn();return _b(l,pa,s)}function _b(s,l,d){if(l=Yf(s,l,wb)[0],s=yu(Bo)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=pc(l)}catch(L){throw L===lc?uu:L}else p=l;l=cn();var y=l.queue,w=y.dispatch;return d!==l.memoizedState&&(Pt.flags|=2048,Xl(9,bu(),xS.bind(null,y,d),null)),[p,w,s]}function xS(s,l){s.action=l}function kb(s){var l=cn(),d=pa;if(d!==null)return _b(l,d,s);cn(),l=l.memoizedState,d=cn();var p=d.queue.dispatch;return d.memoizedState=s,[l,p,!1]}function Xl(s,l,d,p){return s={tag:s,create:d,deps:p,inst:l,next:null},l=Pt.updateQueue,l===null&&(l=Hf(),Pt.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=s.next=s:(p=d.next,d.next=s,s.next=p,l.lastEffect=s),s}function bu(){return{destroy:void 0,resource:void 0}}function Nb(){return cn().memoizedState}function vu(s,l,d,p){var y=Gn();p=p===void 0?null:p,Pt.flags|=s,y.memoizedState=Xl(1|l,bu(),d,p)}function fc(s,l,d,p){var y=cn();p=p===void 0?null:p;var w=y.memoizedState.inst;pa!==null&&p!==null&&Of(p,pa.memoizedState.deps)?y.memoizedState=Xl(l,w,d,p):(Pt.flags|=s,y.memoizedState=Xl(1|l,w,d,p))}function Ib(s,l){vu(8390656,8,s,l)}function Ab(s,l){fc(2048,8,s,l)}function Db(s,l){return fc(4,2,s,l)}function Mb(s,l){return fc(4,4,s,l)}function Rb(s,l){if(typeof l=="function"){s=s();var d=l(s);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Tb(s,l,d){d=d!=null?d.concat([s]):null,fc(4,4,Rb.bind(null,l,s),d)}function Vf(){}function Pb(s,l){var d=cn();l=l===void 0?null:l;var p=d.memoizedState;return l!==null&&Of(l,p[1])?p[0]:(d.memoizedState=[s,l],s)}function Lb(s,l){var d=cn();l=l===void 0?null:l;var p=d.memoizedState;if(l!==null&&Of(l,p[1]))return p[0];if(p=s(),sl){Te(!0);try{s()}finally{Te(!1)}}return d.memoizedState=[p,l],p}function Qf(s,l,d){return d===void 0||(fs&1073741824)!==0?s.memoizedState=l:(s.memoizedState=d,s=O1(),Pt.lanes|=s,Es|=s,d)}function Bb(s,l,d,p){return rr(d,l)?d:Vl.current!==null?(s=Qf(s,d,p),rr(s,l)||(bn=!0),s):(fs&42)===0?(bn=!0,s.memoizedState=d):(s=O1(),Pt.lanes|=s,Es|=s,l)}function zb(s,l,d,p,y){var w=j.p;j.p=w!==0&&8>w?w:8;var L=D.T,Y={};D.T=Y,Kf(s,!1,l,d);try{var ae=y(),me=D.S;if(me!==null&&me(Y,ae),ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var Se=hS(ae,p);gc(s,l,Se,cr(s))}else gc(s,l,p,cr(s))}catch(Ie){gc(s,l,{then:function(){},status:"rejected",reason:Ie},cr())}finally{j.p=w,D.T=L}}function ES(){}function Jf(s,l,d,p){if(s.tag!==5)throw Error(n(476));var y=Ob(s).queue;zb(s,y,l,X,d===null?ES:function(){return Fb(s),d(p)})}function Ob(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bo,lastRenderedState:X},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bo,lastRenderedState:d},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function Fb(s){var l=Ob(s).next.queue;gc(s,l,{},cr())}function Xf(){return Pn(Tc)}function Ub(){return cn().memoizedState}function Wb(){return cn().memoizedState}function wS(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var d=cr();s=ms(d);var p=ps(l,s,d);p!==null&&(dr(p,l,d),cc(p,l,d)),l={cache:If()},s.payload=l;return}l=l.return}}function SS(s,l,d){var p=cr();d={lane:p,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},xu(s)?Hb(l,d):(d=bf(s,l,d,p),d!==null&&(dr(d,s,p),$b(d,l,p)))}function jb(s,l,d){var p=cr();gc(s,l,d,p)}function gc(s,l,d,p){var y={lane:p,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(xu(s))Hb(l,y);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var L=l.lastRenderedState,Y=w(L,d);if(y.hasEagerState=!0,y.eagerState=Y,rr(Y,L))return nu(s,l,y,0),xa===null&&au(),!1}catch{}finally{}if(d=bf(s,l,y,p),d!==null)return dr(d,s,p),$b(d,l,p),!0}return!1}function Kf(s,l,d,p){if(p={lane:2,revertLane:Mg(),action:p,hasEagerState:!1,eagerState:null,next:null},xu(s)){if(l)throw Error(n(479))}else l=bf(s,d,p,2),l!==null&&dr(l,s,2)}function xu(s){var l=s.alternate;return s===Pt||l!==null&&l===Pt}function Hb(s,l){Ql=fu=!0;var d=s.pending;d===null?l.next=l:(l.next=d.next,d.next=l),s.pending=l}function $b(s,l,d){if((d&4194048)!==0){var p=l.lanes;p&=s.pendingLanes,d|=p,l.lanes=d,sn(s,d)}}var Eu={readContext:Pn,use:hu,useCallback:Ka,useContext:Ka,useEffect:Ka,useImperativeHandle:Ka,useLayoutEffect:Ka,useInsertionEffect:Ka,useMemo:Ka,useReducer:Ka,useRef:Ka,useState:Ka,useDebugValue:Ka,useDeferredValue:Ka,useTransition:Ka,useSyncExternalStore:Ka,useId:Ka,useHostTransitionStatus:Ka,useFormState:Ka,useActionState:Ka,useOptimistic:Ka,useMemoCache:Ka,useCacheRefresh:Ka},Yb={readContext:Pn,use:hu,useCallback:function(s,l){return Gn().memoizedState=[s,l===void 0?null:l],s},useContext:Pn,useEffect:Ib,useImperativeHandle:function(s,l,d){d=d!=null?d.concat([s]):null,vu(4194308,4,Rb.bind(null,l,s),d)},useLayoutEffect:function(s,l){return vu(4194308,4,s,l)},useInsertionEffect:function(s,l){vu(4,2,s,l)},useMemo:function(s,l){var d=Gn();l=l===void 0?null:l;var p=s();if(sl){Te(!0);try{s()}finally{Te(!1)}}return d.memoizedState=[p,l],p},useReducer:function(s,l,d){var p=Gn();if(d!==void 0){var y=d(l);if(sl){Te(!0);try{d(l)}finally{Te(!1)}}}else y=l;return p.memoizedState=p.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},p.queue=s,s=s.dispatch=SS.bind(null,Pt,s),[p.memoizedState,s]},useRef:function(s){var l=Gn();return s={current:s},l.memoizedState=s},useState:function(s){s=qf(s);var l=s.queue,d=jb.bind(null,Pt,l);return l.dispatch=d,[s.memoizedState,d]},useDebugValue:Vf,useDeferredValue:function(s,l){var d=Gn();return Qf(d,s,l)},useTransition:function(){var s=qf(!1);return s=zb.bind(null,Pt,s.queue,!0,!1),Gn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,d){var p=Pt,y=Gn();if(Kt){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),xa===null)throw Error(n(349));(Gt&124)!==0||mb(p,l,d)}y.memoizedState=d;var w={value:d,getSnapshot:l};return y.queue=w,Ib(fb.bind(null,p,w,s),[s]),p.flags|=2048,Xl(9,bu(),pb.bind(null,p,w,d,l),null),d},useId:function(){var s=Gn(),l=xa.identifierPrefix;if(Kt){var d=To,p=Ro;d=(p&~(1<<32-rt(p)-1)).toString(32)+d,l="«"+l+"R"+d,d=gu++,0<d&&(l+="H"+d.toString(32)),l+="»"}else d=yS++,l="«"+l+"r"+d.toString(32)+"»";return s.memoizedState=l},useHostTransitionStatus:Xf,useFormState:Sb,useActionState:Sb,useOptimistic:function(s){var l=Gn();l.memoizedState=l.baseState=s;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=Kf.bind(null,Pt,!0,d),d.dispatch=l,[s,l]},useMemoCache:$f,useCacheRefresh:function(){return Gn().memoizedState=wS.bind(null,Pt)}},Gb={readContext:Pn,use:hu,useCallback:Pb,useContext:Pn,useEffect:Ab,useImperativeHandle:Tb,useInsertionEffect:Db,useLayoutEffect:Mb,useMemo:Lb,useReducer:yu,useRef:Nb,useState:function(){return yu(Bo)},useDebugValue:Vf,useDeferredValue:function(s,l){var d=cn();return Bb(d,pa.memoizedState,s,l)},useTransition:function(){var s=yu(Bo)[0],l=cn().memoizedState;return[typeof s=="boolean"?s:pc(s),l]},useSyncExternalStore:ub,useId:Ub,useHostTransitionStatus:Xf,useFormState:Cb,useActionState:Cb,useOptimistic:function(s,l){var d=cn();return yb(d,pa,s,l)},useMemoCache:$f,useCacheRefresh:Wb},CS={readContext:Pn,use:hu,useCallback:Pb,useContext:Pn,useEffect:Ab,useImperativeHandle:Tb,useInsertionEffect:Db,useLayoutEffect:Mb,useMemo:Lb,useReducer:Gf,useRef:Nb,useState:function(){return Gf(Bo)},useDebugValue:Vf,useDeferredValue:function(s,l){var d=cn();return pa===null?Qf(d,s,l):Bb(d,pa.memoizedState,s,l)},useTransition:function(){var s=Gf(Bo)[0],l=cn().memoizedState;return[typeof s=="boolean"?s:pc(s),l]},useSyncExternalStore:ub,useId:Ub,useHostTransitionStatus:Xf,useFormState:kb,useActionState:kb,useOptimistic:function(s,l){var d=cn();return pa!==null?yb(d,pa,s,l):(d.baseState=s,[s,d.queue.dispatch])},useMemoCache:$f,useCacheRefresh:Wb},Kl=null,hc=0;function wu(s){var l=hc;return hc+=1,Kl===null&&(Kl=[]),nb(Kl,s,l)}function yc(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Su(s,l){throw l.$$typeof===h?Error(n(525)):(s=Object.prototype.toString.call(l),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function qb(s){var l=s._init;return l(s._payload)}function Zb(s){function l(ce,se){if(s){var ue=ce.deletions;ue===null?(ce.deletions=[se],ce.flags|=16):ue.push(se)}}function d(ce,se){if(!s)return null;for(;se!==null;)l(ce,se),se=se.sibling;return null}function p(ce){for(var se=new Map;ce!==null;)ce.key!==null?se.set(ce.key,ce):se.set(ce.index,ce),ce=ce.sibling;return se}function y(ce,se){return ce=Mo(ce,se),ce.index=0,ce.sibling=null,ce}function w(ce,se,ue){return ce.index=ue,s?(ue=ce.alternate,ue!==null?(ue=ue.index,ue<se?(ce.flags|=67108866,se):ue):(ce.flags|=67108866,se)):(ce.flags|=1048576,se)}function L(ce){return s&&ce.alternate===null&&(ce.flags|=67108866),ce}function Y(ce,se,ue,ke){return se===null||se.tag!==6?(se=xf(ue,ce.mode,ke),se.return=ce,se):(se=y(se,ue),se.return=ce,se)}function ae(ce,se,ue,ke){var at=ue.type;return at===x?Se(ce,se,ue.props.children,ke,ue.key):se!==null&&(se.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===M&&qb(at)===se.type)?(se=y(se,ue.props),yc(se,ue),se.return=ce,se):(se=ou(ue.type,ue.key,ue.props,null,ce.mode,ke),yc(se,ue),se.return=ce,se)}function me(ce,se,ue,ke){return se===null||se.tag!==4||se.stateNode.containerInfo!==ue.containerInfo||se.stateNode.implementation!==ue.implementation?(se=Ef(ue,ce.mode,ke),se.return=ce,se):(se=y(se,ue.children||[]),se.return=ce,se)}function Se(ce,se,ue,ke,at){return se===null||se.tag!==7?(se=Xs(ue,ce.mode,ke,at),se.return=ce,se):(se=y(se,ue),se.return=ce,se)}function Ie(ce,se,ue){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=xf(""+se,ce.mode,ue),se.return=ce,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case v:return ue=ou(se.type,se.key,se.props,null,ce.mode,ue),yc(ue,se),ue.return=ce,ue;case S:return se=Ef(se,ce.mode,ue),se.return=ce,se;case M:var ke=se._init;return se=ke(se._payload),Ie(ce,se,ue)}if(R(se)||H(se))return se=Xs(se,ce.mode,ue,null),se.return=ce,se;if(typeof se.then=="function")return Ie(ce,wu(se),ue);if(se.$$typeof===A)return Ie(ce,cu(ce,se),ue);Su(ce,se)}return null}function fe(ce,se,ue,ke){var at=se!==null?se.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return at!==null?null:Y(ce,se,""+ue,ke);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case v:return ue.key===at?ae(ce,se,ue,ke):null;case S:return ue.key===at?me(ce,se,ue,ke):null;case M:return at=ue._init,ue=at(ue._payload),fe(ce,se,ue,ke)}if(R(ue)||H(ue))return at!==null?null:Se(ce,se,ue,ke,null);if(typeof ue.then=="function")return fe(ce,se,wu(ue),ke);if(ue.$$typeof===A)return fe(ce,se,cu(ce,ue),ke);Su(ce,ue)}return null}function ge(ce,se,ue,ke,at){if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return ce=ce.get(ue)||null,Y(se,ce,""+ke,at);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case v:return ce=ce.get(ke.key===null?ue:ke.key)||null,ae(se,ce,ke,at);case S:return ce=ce.get(ke.key===null?ue:ke.key)||null,me(se,ce,ke,at);case M:var Ot=ke._init;return ke=Ot(ke._payload),ge(ce,se,ue,ke,at)}if(R(ke)||H(ke))return ce=ce.get(ue)||null,Se(se,ce,ke,at,null);if(typeof ke.then=="function")return ge(ce,se,ue,wu(ke),at);if(ke.$$typeof===A)return ge(ce,se,ue,cu(se,ke),at);Su(se,ke)}return null}function Et(ce,se,ue,ke){for(var at=null,Ot=null,ut=se,vt=se=0,xn=null;ut!==null&&vt<ue.length;vt++){ut.index>vt?(xn=ut,ut=null):xn=ut.sibling;var Vt=fe(ce,ut,ue[vt],ke);if(Vt===null){ut===null&&(ut=xn);break}s&&ut&&Vt.alternate===null&&l(ce,ut),se=w(Vt,se,vt),Ot===null?at=Vt:Ot.sibling=Vt,Ot=Vt,ut=xn}if(vt===ue.length)return d(ce,ut),Kt&&el(ce,vt),at;if(ut===null){for(;vt<ue.length;vt++)ut=Ie(ce,ue[vt],ke),ut!==null&&(se=w(ut,se,vt),Ot===null?at=ut:Ot.sibling=ut,Ot=ut);return Kt&&el(ce,vt),at}for(ut=p(ut);vt<ue.length;vt++)xn=ge(ut,ce,vt,ue[vt],ke),xn!==null&&(s&&xn.alternate!==null&&ut.delete(xn.key===null?vt:xn.key),se=w(xn,se,vt),Ot===null?at=xn:Ot.sibling=xn,Ot=xn);return s&&ut.forEach(function(Ds){return l(ce,Ds)}),Kt&&el(ce,vt),at}function yt(ce,se,ue,ke){if(ue==null)throw Error(n(151));for(var at=null,Ot=null,ut=se,vt=se=0,xn=null,Vt=ue.next();ut!==null&&!Vt.done;vt++,Vt=ue.next()){ut.index>vt?(xn=ut,ut=null):xn=ut.sibling;var Ds=fe(ce,ut,Vt.value,ke);if(Ds===null){ut===null&&(ut=xn);break}s&&ut&&Ds.alternate===null&&l(ce,ut),se=w(Ds,se,vt),Ot===null?at=Ds:Ot.sibling=Ds,Ot=Ds,ut=xn}if(Vt.done)return d(ce,ut),Kt&&el(ce,vt),at;if(ut===null){for(;!Vt.done;vt++,Vt=ue.next())Vt=Ie(ce,Vt.value,ke),Vt!==null&&(se=w(Vt,se,vt),Ot===null?at=Vt:Ot.sibling=Vt,Ot=Vt);return Kt&&el(ce,vt),at}for(ut=p(ut);!Vt.done;vt++,Vt=ue.next())Vt=ge(ut,ce,vt,Vt.value,ke),Vt!==null&&(s&&Vt.alternate!==null&&ut.delete(Vt.key===null?vt:Vt.key),se=w(Vt,se,vt),Ot===null?at=Vt:Ot.sibling=Vt,Ot=Vt);return s&&ut.forEach(function(_C){return l(ce,_C)}),Kt&&el(ce,vt),at}function ga(ce,se,ue,ke){if(typeof ue=="object"&&ue!==null&&ue.type===x&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case v:e:{for(var at=ue.key;se!==null;){if(se.key===at){if(at=ue.type,at===x){if(se.tag===7){d(ce,se.sibling),ke=y(se,ue.props.children),ke.return=ce,ce=ke;break e}}else if(se.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===M&&qb(at)===se.type){d(ce,se.sibling),ke=y(se,ue.props),yc(ke,ue),ke.return=ce,ce=ke;break e}d(ce,se);break}else l(ce,se);se=se.sibling}ue.type===x?(ke=Xs(ue.props.children,ce.mode,ke,ue.key),ke.return=ce,ce=ke):(ke=ou(ue.type,ue.key,ue.props,null,ce.mode,ke),yc(ke,ue),ke.return=ce,ce=ke)}return L(ce);case S:e:{for(at=ue.key;se!==null;){if(se.key===at)if(se.tag===4&&se.stateNode.containerInfo===ue.containerInfo&&se.stateNode.implementation===ue.implementation){d(ce,se.sibling),ke=y(se,ue.children||[]),ke.return=ce,ce=ke;break e}else{d(ce,se);break}else l(ce,se);se=se.sibling}ke=Ef(ue,ce.mode,ke),ke.return=ce,ce=ke}return L(ce);case M:return at=ue._init,ue=at(ue._payload),ga(ce,se,ue,ke)}if(R(ue))return Et(ce,se,ue,ke);if(H(ue)){if(at=H(ue),typeof at!="function")throw Error(n(150));return ue=at.call(ue),yt(ce,se,ue,ke)}if(typeof ue.then=="function")return ga(ce,se,wu(ue),ke);if(ue.$$typeof===A)return ga(ce,se,cu(ce,ue),ke);Su(ce,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint"?(ue=""+ue,se!==null&&se.tag===6?(d(ce,se.sibling),ke=y(se,ue),ke.return=ce,ce=ke):(d(ce,se),ke=xf(ue,ce.mode,ke),ke.return=ce,ce=ke),L(ce)):d(ce,se)}return function(ce,se,ue,ke){try{hc=0;var at=ga(ce,se,ue,ke);return Kl=null,at}catch(ut){if(ut===lc||ut===uu)throw ut;var Ot=or(29,ut,null,ce.mode);return Ot.lanes=ke,Ot.return=ce,Ot}finally{}}}var ei=Zb(!0),Vb=Zb(!1),Sr=G(null),oo=null;function gs(s){var l=s.alternate;P(pn,pn.current&1),P(Sr,s),oo===null&&(l===null||Vl.current!==null||l.memoizedState!==null)&&(oo=s)}function Qb(s){if(s.tag===22){if(P(pn,pn.current),P(Sr,s),oo===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(oo=s)}}else hs()}function hs(){P(pn,pn.current),P(Sr,Sr.current)}function zo(s){te(Sr),oo===s&&(oo=null),te(pn)}var pn=G(0);function Cu(s){for(var l=s;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||Hg(d)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function eg(s,l,d,p){l=s.memoizedState,d=d(p,l),d=d==null?l:f({},l,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var tg={enqueueSetState:function(s,l,d){s=s._reactInternals;var p=cr(),y=ms(p);y.payload=l,d!=null&&(y.callback=d),l=ps(s,y,p),l!==null&&(dr(l,s,p),cc(l,s,p))},enqueueReplaceState:function(s,l,d){s=s._reactInternals;var p=cr(),y=ms(p);y.tag=1,y.payload=l,d!=null&&(y.callback=d),l=ps(s,y,p),l!==null&&(dr(l,s,p),cc(l,s,p))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var d=cr(),p=ms(d);p.tag=2,l!=null&&(p.callback=l),l=ps(s,p,d),l!==null&&(dr(l,s,d),cc(l,s,d))}};function Jb(s,l,d,p,y,w,L){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,w,L):l.prototype&&l.prototype.isPureReactComponent?!Ki(d,p)||!Ki(y,w):!0}function Xb(s,l,d,p){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,p),l.state!==s&&tg.enqueueReplaceState(l,l.state,null)}function ll(s,l){var d=l;if("ref"in l){d={};for(var p in l)p!=="ref"&&(d[p]=l[p])}if(s=s.defaultProps){d===l&&(d=f({},d));for(var y in s)d[y]===void 0&&(d[y]=s[y])}return d}var _u=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Kb(s){_u(s)}function e1(s){console.error(s)}function t1(s){_u(s)}function ku(s,l){try{var d=s.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function a1(s,l,d){try{var p=s.onCaughtError;p(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function ag(s,l,d){return d=ms(d),d.tag=3,d.payload={element:null},d.callback=function(){ku(s,l)},d}function n1(s){return s=ms(s),s.tag=3,s}function r1(s,l,d,p){var y=d.type.getDerivedStateFromError;if(typeof y=="function"){var w=p.value;s.payload=function(){return y(w)},s.callback=function(){a1(l,d,p)}}var L=d.stateNode;L!==null&&typeof L.componentDidCatch=="function"&&(s.callback=function(){a1(l,d,p),typeof y!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var Y=p.stack;this.componentDidCatch(p.value,{componentStack:Y!==null?Y:""})})}function _S(s,l,d,p,y){if(d.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=d.alternate,l!==null&&rc(l,d,y,!0),d=Sr.current,d!==null){switch(d.tag){case 13:return oo===null?kg():d.alternate===null&&Ya===0&&(Ya=3),d.flags&=-257,d.flags|=65536,d.lanes=y,p===Mf?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([p]):l.add(p),Ig(s,p,y)),!1;case 22:return d.flags|=65536,p===Mf?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([p]):d.add(p)),Ig(s,p,y)),!1}throw Error(n(435,d.tag))}return Ig(s,p,y),kg(),!1}if(Kt)return l=Sr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,p!==Cf&&(s=Error(n(422),{cause:p}),nc(vr(s,d)))):(p!==Cf&&(l=Error(n(423),{cause:p}),nc(vr(l,d))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,p=vr(p,d),y=ag(s.stateNode,p,y),Pf(s,y),Ya!==4&&(Ya=2)),!1;var w=Error(n(520),{cause:p});if(w=vr(w,d),Cc===null?Cc=[w]:Cc.push(w),Ya!==4&&(Ya=2),l===null)return!0;p=vr(p,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,s=y&-y,d.lanes|=s,s=ag(d.stateNode,p,s),Pf(d,s),!1;case 1:if(l=d.type,w=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ws===null||!ws.has(w))))return d.flags|=65536,y&=-y,d.lanes|=y,y=n1(y),r1(y,s,d,p),Pf(d,y),!1}d=d.return}while(d!==null);return!1}var o1=Error(n(461)),bn=!1;function Cn(s,l,d,p){l.child=s===null?Vb(l,null,d,p):ei(l,s.child,d,p)}function s1(s,l,d,p,y){d=d.render;var w=l.ref;if("ref"in p){var L={};for(var Y in p)Y!=="ref"&&(L[Y]=p[Y])}else L=p;return rl(l),p=Ff(s,l,d,L,w,y),Y=Uf(),s!==null&&!bn?(Wf(s,l,y),Oo(s,l,y)):(Kt&&Y&&wf(l),l.flags|=1,Cn(s,l,p,y),l.child)}function l1(s,l,d,p,y){if(s===null){var w=d.type;return typeof w=="function"&&!vf(w)&&w.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=w,i1(s,l,w,p,y)):(s=ou(d.type,null,p,l,l.mode,y),s.ref=l.ref,s.return=l,l.child=s)}if(w=s.child,!dg(s,y)){var L=w.memoizedProps;if(d=d.compare,d=d!==null?d:Ki,d(L,p)&&s.ref===l.ref)return Oo(s,l,y)}return l.flags|=1,s=Mo(w,p),s.ref=l.ref,s.return=l,l.child=s}function i1(s,l,d,p,y){if(s!==null){var w=s.memoizedProps;if(Ki(w,p)&&s.ref===l.ref)if(bn=!1,l.pendingProps=p=w,dg(s,y))(s.flags&131072)!==0&&(bn=!0);else return l.lanes=s.lanes,Oo(s,l,y)}return ng(s,l,d,p,y)}function c1(s,l,d){var p=l.pendingProps,y=p.children,w=s!==null?s.memoizedState:null;if(p.mode==="hidden"){if((l.flags&128)!==0){if(p=w!==null?w.baseLanes|d:d,s!==null){for(y=l.child=s.child,w=0;y!==null;)w=w|y.lanes|y.childLanes,y=y.sibling;l.childLanes=w&~p}else l.childLanes=0,l.child=null;return d1(s,l,p,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&du(l,w!==null?w.cachePool:null),w!==null?ib(l,w):Bf(),Qb(l);else return l.lanes=l.childLanes=536870912,d1(s,l,w!==null?w.baseLanes|d:d,d)}else w!==null?(du(l,w.cachePool),ib(l,w),hs(),l.memoizedState=null):(s!==null&&du(l,null),Bf(),hs());return Cn(s,l,y,d),l.child}function d1(s,l,d,p){var y=Df();return y=y===null?null:{parent:mn._currentValue,pool:y},l.memoizedState={baseLanes:d,cachePool:y},s!==null&&du(l,null),Bf(),Qb(l),s!==null&&rc(s,l,p,!0),null}function Nu(s,l){var d=l.ref;if(d===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(n(284));(s===null||s.ref!==d)&&(l.flags|=4194816)}}function ng(s,l,d,p,y){return rl(l),d=Ff(s,l,d,p,void 0,y),p=Uf(),s!==null&&!bn?(Wf(s,l,y),Oo(s,l,y)):(Kt&&p&&wf(l),l.flags|=1,Cn(s,l,d,y),l.child)}function u1(s,l,d,p,y,w){return rl(l),l.updateQueue=null,d=db(l,p,d,y),cb(s),p=Uf(),s!==null&&!bn?(Wf(s,l,w),Oo(s,l,w)):(Kt&&p&&wf(l),l.flags|=1,Cn(s,l,d,w),l.child)}function m1(s,l,d,p,y){if(rl(l),l.stateNode===null){var w=$l,L=d.contextType;typeof L=="object"&&L!==null&&(w=Pn(L)),w=new d(p,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=tg,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=p,w.state=l.memoizedState,w.refs={},Rf(l),L=d.contextType,w.context=typeof L=="object"&&L!==null?Pn(L):$l,w.state=l.memoizedState,L=d.getDerivedStateFromProps,typeof L=="function"&&(eg(l,d,L,p),w.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(L=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),L!==w.state&&tg.enqueueReplaceState(w,w.state,null),uc(l,p,w,y),dc(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(s===null){w=l.stateNode;var Y=l.memoizedProps,ae=ll(d,Y);w.props=ae;var me=w.context,Se=d.contextType;L=$l,typeof Se=="object"&&Se!==null&&(L=Pn(Se));var Ie=d.getDerivedStateFromProps;Se=typeof Ie=="function"||typeof w.getSnapshotBeforeUpdate=="function",Y=l.pendingProps!==Y,Se||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(Y||me!==L)&&Xb(l,w,p,L),us=!1;var fe=l.memoizedState;w.state=fe,uc(l,p,w,y),dc(),me=l.memoizedState,Y||fe!==me||us?(typeof Ie=="function"&&(eg(l,d,Ie,p),me=l.memoizedState),(ae=us||Jb(l,d,ae,p,fe,me,L))?(Se||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=me),w.props=p,w.state=me,w.context=L,p=ae):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{w=l.stateNode,Tf(s,l),L=l.memoizedProps,Se=ll(d,L),w.props=Se,Ie=l.pendingProps,fe=w.context,me=d.contextType,ae=$l,typeof me=="object"&&me!==null&&(ae=Pn(me)),Y=d.getDerivedStateFromProps,(me=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(L!==Ie||fe!==ae)&&Xb(l,w,p,ae),us=!1,fe=l.memoizedState,w.state=fe,uc(l,p,w,y),dc();var ge=l.memoizedState;L!==Ie||fe!==ge||us||s!==null&&s.dependencies!==null&&iu(s.dependencies)?(typeof Y=="function"&&(eg(l,d,Y,p),ge=l.memoizedState),(Se=us||Jb(l,d,Se,p,fe,ge,ae)||s!==null&&s.dependencies!==null&&iu(s.dependencies))?(me||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(p,ge,ae),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(p,ge,ae)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||L===s.memoizedProps&&fe===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||L===s.memoizedProps&&fe===s.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=ge),w.props=p,w.state=ge,w.context=ae,p=Se):(typeof w.componentDidUpdate!="function"||L===s.memoizedProps&&fe===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||L===s.memoizedProps&&fe===s.memoizedState||(l.flags|=1024),p=!1)}return w=p,Nu(s,l),p=(l.flags&128)!==0,w||p?(w=l.stateNode,d=p&&typeof d.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,s!==null&&p?(l.child=ei(l,s.child,null,y),l.child=ei(l,null,d,y)):Cn(s,l,d,y),l.memoizedState=w.state,s=l.child):s=Oo(s,l,y),s}function p1(s,l,d,p){return ac(),l.flags|=256,Cn(s,l,d,p),l.child}var rg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function og(s){return{baseLanes:s,cachePool:eb()}}function sg(s,l,d){return s=s!==null?s.childLanes&~d:0,l&&(s|=Cr),s}function f1(s,l,d){var p=l.pendingProps,y=!1,w=(l.flags&128)!==0,L;if((L=w)||(L=s!==null&&s.memoizedState===null?!1:(pn.current&2)!==0),L&&(y=!0,l.flags&=-129),L=(l.flags&32)!==0,l.flags&=-33,s===null){if(Kt){if(y?gs(l):hs(),Kt){var Y=$a,ae;if(ae=Y){e:{for(ae=Y,Y=ro;ae.nodeType!==8;){if(!Y){Y=null;break e}if(ae=Jr(ae.nextSibling),ae===null){Y=null;break e}}Y=ae}Y!==null?(l.memoizedState={dehydrated:Y,treeContext:Ks!==null?{id:Ro,overflow:To}:null,retryLane:536870912,hydrationErrors:null},ae=or(18,null,null,0),ae.stateNode=Y,ae.return=l,l.child=ae,Wn=l,$a=null,ae=!0):ae=!1}ae||al(l)}if(Y=l.memoizedState,Y!==null&&(Y=Y.dehydrated,Y!==null))return Hg(Y)?l.lanes=32:l.lanes=536870912,null;zo(l)}return Y=p.children,p=p.fallback,y?(hs(),y=l.mode,Y=Iu({mode:"hidden",children:Y},y),p=Xs(p,y,d,null),Y.return=l,p.return=l,Y.sibling=p,l.child=Y,y=l.child,y.memoizedState=og(d),y.childLanes=sg(s,L,d),l.memoizedState=rg,p):(gs(l),lg(l,Y))}if(ae=s.memoizedState,ae!==null&&(Y=ae.dehydrated,Y!==null)){if(w)l.flags&256?(gs(l),l.flags&=-257,l=ig(s,l,d)):l.memoizedState!==null?(hs(),l.child=s.child,l.flags|=128,l=null):(hs(),y=p.fallback,Y=l.mode,p=Iu({mode:"visible",children:p.children},Y),y=Xs(y,Y,d,null),y.flags|=2,p.return=l,y.return=l,p.sibling=y,l.child=p,ei(l,s.child,null,d),p=l.child,p.memoizedState=og(d),p.childLanes=sg(s,L,d),l.memoizedState=rg,l=y);else if(gs(l),Hg(Y)){if(L=Y.nextSibling&&Y.nextSibling.dataset,L)var me=L.dgst;L=me,p=Error(n(419)),p.stack="",p.digest=L,nc({value:p,source:null,stack:null}),l=ig(s,l,d)}else if(bn||rc(s,l,d,!1),L=(d&s.childLanes)!==0,bn||L){if(L=xa,L!==null&&(p=d&-d,p=(p&42)!==0?1:wn(p),p=(p&(L.suspendedLanes|d))!==0?0:p,p!==0&&p!==ae.retryLane))throw ae.retryLane=p,Hl(s,p),dr(L,s,p),o1;Y.data==="$?"||kg(),l=ig(s,l,d)}else Y.data==="$?"?(l.flags|=192,l.child=s.child,l=null):(s=ae.treeContext,$a=Jr(Y.nextSibling),Wn=l,Kt=!0,tl=null,ro=!1,s!==null&&(Er[wr++]=Ro,Er[wr++]=To,Er[wr++]=Ks,Ro=s.id,To=s.overflow,Ks=l),l=lg(l,p.children),l.flags|=4096);return l}return y?(hs(),y=p.fallback,Y=l.mode,ae=s.child,me=ae.sibling,p=Mo(ae,{mode:"hidden",children:p.children}),p.subtreeFlags=ae.subtreeFlags&65011712,me!==null?y=Mo(me,y):(y=Xs(y,Y,d,null),y.flags|=2),y.return=l,p.return=l,p.sibling=y,l.child=p,p=y,y=l.child,Y=s.child.memoizedState,Y===null?Y=og(d):(ae=Y.cachePool,ae!==null?(me=mn._currentValue,ae=ae.parent!==me?{parent:me,pool:me}:ae):ae=eb(),Y={baseLanes:Y.baseLanes|d,cachePool:ae}),y.memoizedState=Y,y.childLanes=sg(s,L,d),l.memoizedState=rg,p):(gs(l),d=s.child,s=d.sibling,d=Mo(d,{mode:"visible",children:p.children}),d.return=l,d.sibling=null,s!==null&&(L=l.deletions,L===null?(l.deletions=[s],l.flags|=16):L.push(s)),l.child=d,l.memoizedState=null,d)}function lg(s,l){return l=Iu({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Iu(s,l){return s=or(22,s,null,l),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function ig(s,l,d){return ei(l,s.child,null,d),s=lg(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function g1(s,l,d){s.lanes|=l;var p=s.alternate;p!==null&&(p.lanes|=l),kf(s.return,l,d)}function cg(s,l,d,p,y){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:y}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=d,w.tailMode=y)}function h1(s,l,d){var p=l.pendingProps,y=p.revealOrder,w=p.tail;if(Cn(s,l,p.children,d),p=pn.current,(p&2)!==0)p=p&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&g1(s,d,l);else if(s.tag===19)g1(s,d,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}switch(P(pn,p),y){case"forwards":for(d=l.child,y=null;d!==null;)s=d.alternate,s!==null&&Cu(s)===null&&(y=d),d=d.sibling;d=y,d===null?(y=l.child,l.child=null):(y=d.sibling,d.sibling=null),cg(l,!1,y,d,w);break;case"backwards":for(d=null,y=l.child,l.child=null;y!==null;){if(s=y.alternate,s!==null&&Cu(s)===null){l.child=y;break}s=y.sibling,y.sibling=d,d=y,y=s}cg(l,!0,d,null,w);break;case"together":cg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Oo(s,l,d){if(s!==null&&(l.dependencies=s.dependencies),Es|=l.lanes,(d&l.childLanes)===0)if(s!==null){if(rc(s,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(n(153));if(l.child!==null){for(s=l.child,d=Mo(s,s.pendingProps),l.child=d,d.return=l;s.sibling!==null;)s=s.sibling,d=d.sibling=Mo(s,s.pendingProps),d.return=l;d.sibling=null}return l.child}function dg(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&iu(s)))}function kS(s,l,d){switch(l.tag){case 3:be(l,l.stateNode.containerInfo),ds(l,mn,s.memoizedState.cache),ac();break;case 27:case 5:ye(l);break;case 4:be(l,l.stateNode.containerInfo);break;case 10:ds(l,l.type,l.memoizedProps.value);break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(gs(l),l.flags|=128,null):(d&l.child.childLanes)!==0?f1(s,l,d):(gs(l),s=Oo(s,l,d),s!==null?s.sibling:null);gs(l);break;case 19:var y=(s.flags&128)!==0;if(p=(d&l.childLanes)!==0,p||(rc(s,l,d,!1),p=(d&l.childLanes)!==0),y){if(p)return h1(s,l,d);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),P(pn,pn.current),p)break;return null;case 22:case 23:return l.lanes=0,c1(s,l,d);case 24:ds(l,mn,s.memoizedState.cache)}return Oo(s,l,d)}function y1(s,l,d){if(s!==null)if(s.memoizedProps!==l.pendingProps)bn=!0;else{if(!dg(s,d)&&(l.flags&128)===0)return bn=!1,kS(s,l,d);bn=(s.flags&131072)!==0}else bn=!1,Kt&&(l.flags&1048576)!==0&&qy(l,lu,l.index);switch(l.lanes=0,l.tag){case 16:e:{s=l.pendingProps;var p=l.elementType,y=p._init;if(p=y(p._payload),l.type=p,typeof p=="function")vf(p)?(s=ll(p,s),l.tag=1,l=m1(null,l,p,s,d)):(l.tag=0,l=ng(null,l,p,s,d));else{if(p!=null){if(y=p.$$typeof,y===_){l.tag=11,l=s1(null,l,p,s,d);break e}else if(y===z){l.tag=14,l=l1(null,l,p,s,d);break e}}throw l=F(p)||p,Error(n(306,l,""))}}return l;case 0:return ng(s,l,l.type,l.pendingProps,d);case 1:return p=l.type,y=ll(p,l.pendingProps),m1(s,l,p,y,d);case 3:e:{if(be(l,l.stateNode.containerInfo),s===null)throw Error(n(387));p=l.pendingProps;var w=l.memoizedState;y=w.element,Tf(s,l),uc(l,p,null,d);var L=l.memoizedState;if(p=L.cache,ds(l,mn,p),p!==w.cache&&Nf(l,[mn],d,!0),dc(),p=L.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:L.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=p1(s,l,p,d);break e}else if(p!==y){y=vr(Error(n(424)),l),nc(y),l=p1(s,l,p,d);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for($a=Jr(s.firstChild),Wn=l,Kt=!0,tl=null,ro=!0,d=Vb(l,null,p,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(ac(),p===y){l=Oo(s,l,d);break e}Cn(s,l,p,d)}l=l.child}return l;case 26:return Nu(s,l),s===null?(d=Ev(l.type,null,l.pendingProps,null))?l.memoizedState=d:Kt||(d=l.type,s=l.pendingProps,p=ju(oe.current).createElement(d),p[ua]=l,p[Na]=s,kn(p,d,s),Sa(p),l.stateNode=p):l.memoizedState=Ev(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return ye(l),s===null&&Kt&&(p=l.stateNode=bv(l.type,l.pendingProps,oe.current),Wn=l,ro=!0,y=$a,_s(l.type)?($g=y,$a=Jr(p.firstChild)):$a=y),Cn(s,l,l.pendingProps.children,d),Nu(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&Kt&&((y=p=$a)&&(p=eC(p,l.type,l.pendingProps,ro),p!==null?(l.stateNode=p,Wn=l,$a=Jr(p.firstChild),ro=!1,y=!0):y=!1),y||al(l)),ye(l),y=l.type,w=l.pendingProps,L=s!==null?s.memoizedProps:null,p=w.children,Ug(y,w)?p=null:L!==null&&Ug(y,L)&&(l.flags|=32),l.memoizedState!==null&&(y=Ff(s,l,bS,null,null,d),Tc._currentValue=y),Nu(s,l),Cn(s,l,p,d),l.child;case 6:return s===null&&Kt&&((s=d=$a)&&(d=tC(d,l.pendingProps,ro),d!==null?(l.stateNode=d,Wn=l,$a=null,s=!0):s=!1),s||al(l)),null;case 13:return f1(s,l,d);case 4:return be(l,l.stateNode.containerInfo),p=l.pendingProps,s===null?l.child=ei(l,null,p,d):Cn(s,l,p,d),l.child;case 11:return s1(s,l,l.type,l.pendingProps,d);case 7:return Cn(s,l,l.pendingProps,d),l.child;case 8:return Cn(s,l,l.pendingProps.children,d),l.child;case 12:return Cn(s,l,l.pendingProps.children,d),l.child;case 10:return p=l.pendingProps,ds(l,l.type,p.value),Cn(s,l,p.children,d),l.child;case 9:return y=l.type._context,p=l.pendingProps.children,rl(l),y=Pn(y),p=p(y),l.flags|=1,Cn(s,l,p,d),l.child;case 14:return l1(s,l,l.type,l.pendingProps,d);case 15:return i1(s,l,l.type,l.pendingProps,d);case 19:return h1(s,l,d);case 31:return p=l.pendingProps,d=l.mode,p={mode:p.mode,children:p.children},s===null?(d=Iu(p,d),d.ref=l.ref,l.child=d,d.return=l,l=d):(d=Mo(s.child,p),d.ref=l.ref,l.child=d,d.return=l,l=d),l;case 22:return c1(s,l,d);case 24:return rl(l),p=Pn(mn),s===null?(y=Df(),y===null&&(y=xa,w=If(),y.pooledCache=w,w.refCount++,w!==null&&(y.pooledCacheLanes|=d),y=w),l.memoizedState={parent:p,cache:y},Rf(l),ds(l,mn,y)):((s.lanes&d)!==0&&(Tf(s,l),uc(l,null,null,d),dc()),y=s.memoizedState,w=l.memoizedState,y.parent!==p?(y={parent:p,cache:p},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),ds(l,mn,p)):(p=w.cache,ds(l,mn,p),p!==y.cache&&Nf(l,[mn],d,!0))),Cn(s,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function Fo(s){s.flags|=4}function b1(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!kv(l)){if(l=Sr.current,l!==null&&((Gt&4194048)===Gt?oo!==null:(Gt&62914560)!==Gt&&(Gt&536870912)===0||l!==oo))throw ic=Mf,tb;s.flags|=8192}}function Au(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?on():536870912,s.lanes|=l,ri|=l)}function bc(s,l){if(!Kt)switch(s.tailMode){case"hidden":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function za(s){var l=s.alternate!==null&&s.alternate.child===s.child,d=0,p=0;if(l)for(var y=s.child;y!==null;)d|=y.lanes|y.childLanes,p|=y.subtreeFlags&65011712,p|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)d|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=p,s.childLanes=d,l}function NS(s,l,d){var p=l.pendingProps;switch(Sf(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return za(l),null;case 1:return za(l),null;case 3:return d=l.stateNode,p=null,s!==null&&(p=s.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),Lo(mn),nt(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(tc(l)?Fo(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Qy())),za(l),null;case 26:return d=l.memoizedState,s===null?(Fo(l),d!==null?(za(l),b1(l,d)):(za(l),l.flags&=-16777217)):d?d!==s.memoizedState?(Fo(l),za(l),b1(l,d)):(za(l),l.flags&=-16777217):(s.memoizedProps!==p&&Fo(l),za(l),l.flags&=-16777217),null;case 27:We(l),d=oe.current;var y=l.type;if(s!==null&&l.stateNode!=null)s.memoizedProps!==p&&Fo(l);else{if(!p){if(l.stateNode===null)throw Error(n(166));return za(l),null}s=ne.current,tc(l)?Zy(l):(s=bv(y,p,d),l.stateNode=s,Fo(l))}return za(l),null;case 5:if(We(l),d=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==p&&Fo(l);else{if(!p){if(l.stateNode===null)throw Error(n(166));return za(l),null}if(s=ne.current,tc(l))Zy(l);else{switch(y=ju(oe.current),s){case 1:s=y.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:s=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":s=y.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":s=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":s=y.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof p.is=="string"?y.createElement("select",{is:p.is}):y.createElement("select"),p.multiple?s.multiple=!0:p.size&&(s.size=p.size);break;default:s=typeof p.is=="string"?y.createElement(d,{is:p.is}):y.createElement(d)}}s[ua]=l,s[Na]=p;e:for(y=l.child;y!==null;){if(y.tag===5||y.tag===6)s.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===l)break e;for(;y.sibling===null;){if(y.return===null||y.return===l)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}l.stateNode=s;e:switch(kn(s,d,p),d){case"button":case"input":case"select":case"textarea":s=!!p.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Fo(l)}}return za(l),l.flags&=-16777217,null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==p&&Fo(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(n(166));if(s=oe.current,tc(l)){if(s=l.stateNode,d=l.memoizedProps,p=null,y=Wn,y!==null)switch(y.tag){case 27:case 5:p=y.memoizedProps}s[ua]=l,s=!!(s.nodeValue===d||p!==null&&p.suppressHydrationWarning===!0||uv(s.nodeValue,d)),s||al(l)}else s=ju(s).createTextNode(p),s[ua]=l,l.stateNode=s}return za(l),null;case 13:if(p=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=tc(l),p!==null&&p.dehydrated!==null){if(s===null){if(!y)throw Error(n(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[ua]=l}else ac(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;za(l),y=!1}else y=Qy(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(zo(l),l):(zo(l),null)}if(zo(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=p!==null,s=s!==null&&s.memoizedState!==null,d){p=l.child,y=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(y=p.alternate.memoizedState.cachePool.pool);var w=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),w!==y&&(p.flags|=2048)}return d!==s&&d&&(l.child.flags|=8192),Au(l,l.updateQueue),za(l),null;case 4:return nt(),s===null&&Lg(l.stateNode.containerInfo),za(l),null;case 10:return Lo(l.type),za(l),null;case 19:if(te(pn),y=l.memoizedState,y===null)return za(l),null;if(p=(l.flags&128)!==0,w=y.rendering,w===null)if(p)bc(y,!1);else{if(Ya!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(w=Cu(s),w!==null){for(l.flags|=128,bc(y,!1),s=w.updateQueue,l.updateQueue=s,Au(l,s),l.subtreeFlags=0,s=d,d=l.child;d!==null;)Gy(d,s),d=d.sibling;return P(pn,pn.current&1|2),l.child}s=s.sibling}y.tail!==null&&J()>Ru&&(l.flags|=128,p=!0,bc(y,!1),l.lanes=4194304)}else{if(!p)if(s=Cu(w),s!==null){if(l.flags|=128,p=!0,s=s.updateQueue,l.updateQueue=s,Au(l,s),bc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!Kt)return za(l),null}else 2*J()-y.renderingStartTime>Ru&&d!==536870912&&(l.flags|=128,p=!0,bc(y,!1),l.lanes=4194304);y.isBackwards?(w.sibling=l.child,l.child=w):(s=y.last,s!==null?s.sibling=w:l.child=w,y.last=w)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=J(),l.sibling=null,s=pn.current,P(pn,p?s&1|2:s&1),l):(za(l),null);case 22:case 23:return zo(l),zf(),p=l.memoizedState!==null,s!==null?s.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(d&536870912)!==0&&(l.flags&128)===0&&(za(l),l.subtreeFlags&6&&(l.flags|=8192)):za(l),d=l.updateQueue,d!==null&&Au(l,d.retryQueue),d=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==d&&(l.flags|=2048),s!==null&&te(ol),null;case 24:return d=null,s!==null&&(d=s.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Lo(mn),za(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function IS(s,l){switch(Sf(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Lo(mn),nt(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return We(l),null;case 13:if(zo(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(n(340));ac()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return te(pn),null;case 4:return nt(),null;case 10:return Lo(l.type),null;case 22:case 23:return zo(l),zf(),s!==null&&te(ol),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Lo(mn),null;case 25:return null;default:return null}}function v1(s,l){switch(Sf(l),l.tag){case 3:Lo(mn),nt();break;case 26:case 27:case 5:We(l);break;case 4:nt();break;case 13:zo(l);break;case 19:te(pn);break;case 10:Lo(l.type);break;case 22:case 23:zo(l),zf(),s!==null&&te(ol);break;case 24:Lo(mn)}}function vc(s,l){try{var d=l.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var y=p.next;d=y;do{if((d.tag&s)===s){p=void 0;var w=d.create,L=d.inst;p=w(),L.destroy=p}d=d.next}while(d!==y)}}catch(Y){va(l,l.return,Y)}}function ys(s,l,d){try{var p=l.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var w=y.next;p=w;do{if((p.tag&s)===s){var L=p.inst,Y=L.destroy;if(Y!==void 0){L.destroy=void 0,y=l;var ae=d,me=Y;try{me()}catch(Se){va(y,ae,Se)}}}p=p.next}while(p!==w)}}catch(Se){va(l,l.return,Se)}}function x1(s){var l=s.updateQueue;if(l!==null){var d=s.stateNode;try{lb(l,d)}catch(p){va(s,s.return,p)}}}function E1(s,l,d){d.props=ll(s.type,s.memoizedProps),d.state=s.memoizedState;try{d.componentWillUnmount()}catch(p){va(s,l,p)}}function xc(s,l){try{var d=s.ref;if(d!==null){switch(s.tag){case 26:case 27:case 5:var p=s.stateNode;break;case 30:p=s.stateNode;break;default:p=s.stateNode}typeof d=="function"?s.refCleanup=d(p):d.current=p}}catch(y){va(s,l,y)}}function so(s,l){var d=s.ref,p=s.refCleanup;if(d!==null)if(typeof p=="function")try{p()}catch(y){va(s,l,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(y){va(s,l,y)}else d.current=null}function w1(s){var l=s.type,d=s.memoizedProps,p=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&p.focus();break e;case"img":d.src?p.src=d.src:d.srcSet&&(p.srcset=d.srcSet)}}catch(y){va(s,s.return,y)}}function ug(s,l,d){try{var p=s.stateNode;VS(p,s.type,d,l),p[Na]=l}catch(y){va(s,s.return,y)}}function S1(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&_s(s.type)||s.tag===4}function mg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||S1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&_s(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function pg(s,l,d){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(s,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(s),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Wu));else if(p!==4&&(p===27&&_s(s.type)&&(d=s.stateNode,l=null),s=s.child,s!==null))for(pg(s,l,d),s=s.sibling;s!==null;)pg(s,l,d),s=s.sibling}function Du(s,l,d){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?d.insertBefore(s,l):d.appendChild(s);else if(p!==4&&(p===27&&_s(s.type)&&(d=s.stateNode),s=s.child,s!==null))for(Du(s,l,d),s=s.sibling;s!==null;)Du(s,l,d),s=s.sibling}function C1(s){var l=s.stateNode,d=s.memoizedProps;try{for(var p=s.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);kn(l,p,d),l[ua]=s,l[Na]=d}catch(w){va(s,s.return,w)}}var Uo=!1,en=!1,fg=!1,_1=typeof WeakSet=="function"?WeakSet:Set,vn=null;function AS(s,l){if(s=s.containerInfo,Og=Zu,s=By(s),mf(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var y=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{d.nodeType,w.nodeType}catch{d=null;break e}var L=0,Y=-1,ae=-1,me=0,Se=0,Ie=s,fe=null;t:for(;;){for(var ge;Ie!==d||y!==0&&Ie.nodeType!==3||(Y=L+y),Ie!==w||p!==0&&Ie.nodeType!==3||(ae=L+p),Ie.nodeType===3&&(L+=Ie.nodeValue.length),(ge=Ie.firstChild)!==null;)fe=Ie,Ie=ge;for(;;){if(Ie===s)break t;if(fe===d&&++me===y&&(Y=L),fe===w&&++Se===p&&(ae=L),(ge=Ie.nextSibling)!==null)break;Ie=fe,fe=Ie.parentNode}Ie=ge}d=Y===-1||ae===-1?null:{start:Y,end:ae}}else d=null}d=d||{start:0,end:0}}else d=null;for(Fg={focusedElem:s,selectionRange:d},Zu=!1,vn=l;vn!==null;)if(l=vn,s=l.child,(l.subtreeFlags&1024)!==0&&s!==null)s.return=l,vn=s;else for(;vn!==null;){switch(l=vn,w=l.alternate,s=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&w!==null){s=void 0,d=l,y=w.memoizedProps,w=w.memoizedState,p=d.stateNode;try{var Et=ll(d.type,y,d.elementType===d.type);s=p.getSnapshotBeforeUpdate(Et,w),p.__reactInternalSnapshotBeforeUpdate=s}catch(yt){va(d,d.return,yt)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,d=s.nodeType,d===9)jg(s);else if(d===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":jg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=l.sibling,s!==null){s.return=l.return,vn=s;break}vn=l.return}}function k1(s,l,d){var p=d.flags;switch(d.tag){case 0:case 11:case 15:bs(s,d),p&4&&vc(5,d);break;case 1:if(bs(s,d),p&4)if(s=d.stateNode,l===null)try{s.componentDidMount()}catch(L){va(d,d.return,L)}else{var y=ll(d.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(y,l,s.__reactInternalSnapshotBeforeUpdate)}catch(L){va(d,d.return,L)}}p&64&&x1(d),p&512&&xc(d,d.return);break;case 3:if(bs(s,d),p&64&&(s=d.updateQueue,s!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{lb(s,l)}catch(L){va(d,d.return,L)}}break;case 27:l===null&&p&4&&C1(d);case 26:case 5:bs(s,d),l===null&&p&4&&w1(d),p&512&&xc(d,d.return);break;case 12:bs(s,d);break;case 13:bs(s,d),p&4&&A1(s,d),p&64&&(s=d.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(d=OS.bind(null,d),aC(s,d))));break;case 22:if(p=d.memoizedState!==null||Uo,!p){l=l!==null&&l.memoizedState!==null||en,y=Uo;var w=en;Uo=p,(en=l)&&!w?vs(s,d,(d.subtreeFlags&8772)!==0):bs(s,d),Uo=y,en=w}break;case 30:break;default:bs(s,d)}}function N1(s){var l=s.alternate;l!==null&&(s.alternate=null,N1(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&Hr(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Aa=null,qn=!1;function Wo(s,l,d){for(d=d.child;d!==null;)I1(s,l,d),d=d.sibling}function I1(s,l,d){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount(Be,d)}catch{}switch(d.tag){case 26:en||so(d,l),Wo(s,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:en||so(d,l);var p=Aa,y=qn;_s(d.type)&&(Aa=d.stateNode,qn=!1),Wo(s,l,d),Ac(d.stateNode),Aa=p,qn=y;break;case 5:en||so(d,l);case 6:if(p=Aa,y=qn,Aa=null,Wo(s,l,d),Aa=p,qn=y,Aa!==null)if(qn)try{(Aa.nodeType===9?Aa.body:Aa.nodeName==="HTML"?Aa.ownerDocument.body:Aa).removeChild(d.stateNode)}catch(w){va(d,l,w)}else try{Aa.removeChild(d.stateNode)}catch(w){va(d,l,w)}break;case 18:Aa!==null&&(qn?(s=Aa,hv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,d.stateNode),zc(s)):hv(Aa,d.stateNode));break;case 4:p=Aa,y=qn,Aa=d.stateNode.containerInfo,qn=!0,Wo(s,l,d),Aa=p,qn=y;break;case 0:case 11:case 14:case 15:en||ys(2,d,l),en||ys(4,d,l),Wo(s,l,d);break;case 1:en||(so(d,l),p=d.stateNode,typeof p.componentWillUnmount=="function"&&E1(d,l,p)),Wo(s,l,d);break;case 21:Wo(s,l,d);break;case 22:en=(p=en)||d.memoizedState!==null,Wo(s,l,d),en=p;break;default:Wo(s,l,d)}}function A1(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{zc(s)}catch(d){va(l,l.return,d)}}function DS(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new _1),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new _1),l;default:throw Error(n(435,s.tag))}}function gg(s,l){var d=DS(s);l.forEach(function(p){var y=FS.bind(null,s,p);d.has(p)||(d.add(p),p.then(y,y))})}function sr(s,l){var d=l.deletions;if(d!==null)for(var p=0;p<d.length;p++){var y=d[p],w=s,L=l,Y=L;e:for(;Y!==null;){switch(Y.tag){case 27:if(_s(Y.type)){Aa=Y.stateNode,qn=!1;break e}break;case 5:Aa=Y.stateNode,qn=!1;break e;case 3:case 4:Aa=Y.stateNode.containerInfo,qn=!0;break e}Y=Y.return}if(Aa===null)throw Error(n(160));I1(w,L,y),Aa=null,qn=!1,w=y.alternate,w!==null&&(w.return=null),y.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)D1(l,s),l=l.sibling}var Qr=null;function D1(s,l){var d=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:sr(l,s),lr(s),p&4&&(ys(3,s,s.return),vc(3,s),ys(5,s,s.return));break;case 1:sr(l,s),lr(s),p&512&&(en||d===null||so(d,d.return)),p&64&&Uo&&(s=s.updateQueue,s!==null&&(p=s.callbacks,p!==null&&(d=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=d===null?p:d.concat(p))));break;case 26:var y=Qr;if(sr(l,s),lr(s),p&512&&(en||d===null||so(d,d.return)),p&4){var w=d!==null?d.memoizedState:null;if(p=s.memoizedState,d===null)if(p===null)if(s.stateNode===null){e:{p=s.type,d=s.memoizedProps,y=y.ownerDocument||y;t:switch(p){case"title":w=y.getElementsByTagName("title")[0],(!w||w[hr]||w[ua]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=y.createElement(p),y.head.insertBefore(w,y.querySelector("head > title"))),kn(w,p,d),w[ua]=s,Sa(w),p=w;break e;case"link":var L=Cv("link","href",y).get(p+(d.href||""));if(L){for(var Y=0;Y<L.length;Y++)if(w=L[Y],w.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&w.getAttribute("rel")===(d.rel==null?null:d.rel)&&w.getAttribute("title")===(d.title==null?null:d.title)&&w.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){L.splice(Y,1);break t}}w=y.createElement(p),kn(w,p,d),y.head.appendChild(w);break;case"meta":if(L=Cv("meta","content",y).get(p+(d.content||""))){for(Y=0;Y<L.length;Y++)if(w=L[Y],w.getAttribute("content")===(d.content==null?null:""+d.content)&&w.getAttribute("name")===(d.name==null?null:d.name)&&w.getAttribute("property")===(d.property==null?null:d.property)&&w.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&w.getAttribute("charset")===(d.charSet==null?null:d.charSet)){L.splice(Y,1);break t}}w=y.createElement(p),kn(w,p,d),y.head.appendChild(w);break;default:throw Error(n(468,p))}w[ua]=s,Sa(w),p=w}s.stateNode=p}else _v(y,s.type,s.stateNode);else s.stateNode=Sv(y,p,s.memoizedProps);else w!==p?(w===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):w.count--,p===null?_v(y,s.type,s.stateNode):Sv(y,p,s.memoizedProps)):p===null&&s.stateNode!==null&&ug(s,s.memoizedProps,d.memoizedProps)}break;case 27:sr(l,s),lr(s),p&512&&(en||d===null||so(d,d.return)),d!==null&&p&4&&ug(s,s.memoizedProps,d.memoizedProps);break;case 5:if(sr(l,s),lr(s),p&512&&(en||d===null||so(d,d.return)),s.flags&32){y=s.stateNode;try{qe(y,"")}catch(ge){va(s,s.return,ge)}}p&4&&s.stateNode!=null&&(y=s.memoizedProps,ug(s,y,d!==null?d.memoizedProps:y)),p&1024&&(fg=!0);break;case 6:if(sr(l,s),lr(s),p&4){if(s.stateNode===null)throw Error(n(162));p=s.memoizedProps,d=s.stateNode;try{d.nodeValue=p}catch(ge){va(s,s.return,ge)}}break;case 3:if(Yu=null,y=Qr,Qr=Hu(l.containerInfo),sr(l,s),Qr=y,lr(s),p&4&&d!==null&&d.memoizedState.isDehydrated)try{zc(l.containerInfo)}catch(ge){va(s,s.return,ge)}fg&&(fg=!1,M1(s));break;case 4:p=Qr,Qr=Hu(s.stateNode.containerInfo),sr(l,s),lr(s),Qr=p;break;case 12:sr(l,s),lr(s);break;case 13:sr(l,s),lr(s),s.child.flags&8192&&s.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Eg=J()),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,gg(s,p)));break;case 22:y=s.memoizedState!==null;var ae=d!==null&&d.memoizedState!==null,me=Uo,Se=en;if(Uo=me||y,en=Se||ae,sr(l,s),en=Se,Uo=me,lr(s),p&8192)e:for(l=s.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(d===null||ae||Uo||en||il(s)),d=null,l=s;;){if(l.tag===5||l.tag===26){if(d===null){ae=d=l;try{if(w=ae.stateNode,y)L=w.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none";else{Y=ae.stateNode;var Ie=ae.memoizedProps.style,fe=Ie!=null&&Ie.hasOwnProperty("display")?Ie.display:null;Y.style.display=fe==null||typeof fe=="boolean"?"":(""+fe).trim()}}catch(ge){va(ae,ae.return,ge)}}}else if(l.tag===6){if(d===null){ae=l;try{ae.stateNode.nodeValue=y?"":ae.memoizedProps}catch(ge){va(ae,ae.return,ge)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=s.updateQueue,p!==null&&(d=p.retryQueue,d!==null&&(p.retryQueue=null,gg(s,d))));break;case 19:sr(l,s),lr(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,gg(s,p)));break;case 30:break;case 21:break;default:sr(l,s),lr(s)}}function lr(s){var l=s.flags;if(l&2){try{for(var d,p=s.return;p!==null;){if(S1(p)){d=p;break}p=p.return}if(d==null)throw Error(n(160));switch(d.tag){case 27:var y=d.stateNode,w=mg(s);Du(s,w,y);break;case 5:var L=d.stateNode;d.flags&32&&(qe(L,""),d.flags&=-33);var Y=mg(s);Du(s,Y,L);break;case 3:case 4:var ae=d.stateNode.containerInfo,me=mg(s);pg(s,me,ae);break;default:throw Error(n(161))}}catch(Se){va(s,s.return,Se)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function M1(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;M1(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function bs(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)k1(s,l.alternate,l),l=l.sibling}function il(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:ys(4,l,l.return),il(l);break;case 1:so(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&E1(l,l.return,d),il(l);break;case 27:Ac(l.stateNode);case 26:case 5:so(l,l.return),il(l);break;case 22:l.memoizedState===null&&il(l);break;case 30:il(l);break;default:il(l)}s=s.sibling}}function vs(s,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,y=s,w=l,L=w.flags;switch(w.tag){case 0:case 11:case 15:vs(y,w,d),vc(4,w);break;case 1:if(vs(y,w,d),p=w,y=p.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(me){va(p,p.return,me)}if(p=w,y=p.updateQueue,y!==null){var Y=p.stateNode;try{var ae=y.shared.hiddenCallbacks;if(ae!==null)for(y.shared.hiddenCallbacks=null,y=0;y<ae.length;y++)sb(ae[y],Y)}catch(me){va(p,p.return,me)}}d&&L&64&&x1(w),xc(w,w.return);break;case 27:C1(w);case 26:case 5:vs(y,w,d),d&&p===null&&L&4&&w1(w),xc(w,w.return);break;case 12:vs(y,w,d);break;case 13:vs(y,w,d),d&&L&4&&A1(y,w);break;case 22:w.memoizedState===null&&vs(y,w,d),xc(w,w.return);break;case 30:break;default:vs(y,w,d)}l=l.sibling}}function hg(s,l){var d=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==d&&(s!=null&&s.refCount++,d!=null&&oc(d))}function yg(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&oc(s))}function lo(s,l,d,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)R1(s,l,d,p),l=l.sibling}function R1(s,l,d,p){var y=l.flags;switch(l.tag){case 0:case 11:case 15:lo(s,l,d,p),y&2048&&vc(9,l);break;case 1:lo(s,l,d,p);break;case 3:lo(s,l,d,p),y&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&oc(s)));break;case 12:if(y&2048){lo(s,l,d,p),s=l.stateNode;try{var w=l.memoizedProps,L=w.id,Y=w.onPostCommit;typeof Y=="function"&&Y(L,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ae){va(l,l.return,ae)}}else lo(s,l,d,p);break;case 13:lo(s,l,d,p);break;case 23:break;case 22:w=l.stateNode,L=l.alternate,l.memoizedState!==null?w._visibility&2?lo(s,l,d,p):Ec(s,l):w._visibility&2?lo(s,l,d,p):(w._visibility|=2,ti(s,l,d,p,(l.subtreeFlags&10256)!==0)),y&2048&&hg(L,l);break;case 24:lo(s,l,d,p),y&2048&&yg(l.alternate,l);break;default:lo(s,l,d,p)}}function ti(s,l,d,p,y){for(y=y&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var w=s,L=l,Y=d,ae=p,me=L.flags;switch(L.tag){case 0:case 11:case 15:ti(w,L,Y,ae,y),vc(8,L);break;case 23:break;case 22:var Se=L.stateNode;L.memoizedState!==null?Se._visibility&2?ti(w,L,Y,ae,y):Ec(w,L):(Se._visibility|=2,ti(w,L,Y,ae,y)),y&&me&2048&&hg(L.alternate,L);break;case 24:ti(w,L,Y,ae,y),y&&me&2048&&yg(L.alternate,L);break;default:ti(w,L,Y,ae,y)}l=l.sibling}}function Ec(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=s,p=l,y=p.flags;switch(p.tag){case 22:Ec(d,p),y&2048&&hg(p.alternate,p);break;case 24:Ec(d,p),y&2048&&yg(p.alternate,p);break;default:Ec(d,p)}l=l.sibling}}var wc=8192;function ai(s){if(s.subtreeFlags&wc)for(s=s.child;s!==null;)T1(s),s=s.sibling}function T1(s){switch(s.tag){case 26:ai(s),s.flags&wc&&s.memoizedState!==null&&gC(Qr,s.memoizedState,s.memoizedProps);break;case 5:ai(s);break;case 3:case 4:var l=Qr;Qr=Hu(s.stateNode.containerInfo),ai(s),Qr=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=wc,wc=16777216,ai(s),wc=l):ai(s));break;default:ai(s)}}function P1(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Sc(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];vn=p,B1(p,s)}P1(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)L1(s),s=s.sibling}function L1(s){switch(s.tag){case 0:case 11:case 15:Sc(s),s.flags&2048&&ys(9,s,s.return);break;case 3:Sc(s);break;case 12:Sc(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Mu(s)):Sc(s);break;default:Sc(s)}}function Mu(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];vn=p,B1(p,s)}P1(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:ys(8,l,l.return),Mu(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,Mu(l));break;default:Mu(l)}s=s.sibling}}function B1(s,l){for(;vn!==null;){var d=vn;switch(d.tag){case 0:case 11:case 15:ys(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var p=d.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:oc(d.memoizedState.cache)}if(p=d.child,p!==null)p.return=d,vn=p;else e:for(d=s;vn!==null;){p=vn;var y=p.sibling,w=p.return;if(N1(p),p===d){vn=null;break e}if(y!==null){y.return=w,vn=y;break e}vn=w}}}var MS={getCacheForType:function(s){var l=Pn(mn),d=l.data.get(s);return d===void 0&&(d=s(),l.data.set(s,d)),d}},RS=typeof WeakMap=="function"?WeakMap:Map,oa=0,xa=null,Ft=null,Gt=0,sa=0,ir=null,xs=!1,ni=!1,bg=!1,jo=0,Ya=0,Es=0,cl=0,vg=0,Cr=0,ri=0,Cc=null,Zn=null,xg=!1,Eg=0,Ru=1/0,Tu=null,ws=null,_n=0,Ss=null,oi=null,si=0,wg=0,Sg=null,z1=null,_c=0,Cg=null;function cr(){if((oa&2)!==0&&Gt!==0)return Gt&-Gt;if(D.T!==null){var s=ql;return s!==0?s:Mg()}return Jn()}function O1(){Cr===0&&(Cr=(Gt&536870912)===0||Kt?Qt():536870912);var s=Sr.current;return s!==null&&(s.flags|=32),Cr}function dr(s,l,d){(s===xa&&(sa===2||sa===9)||s.cancelPendingCommit!==null)&&(li(s,0),Cs(s,Gt,Cr,!1)),Va(s,d),((oa&2)===0||s!==xa)&&(s===xa&&((oa&2)===0&&(cl|=d),Ya===4&&Cs(s,Gt,Cr,!1)),io(s))}function F1(s,l,d){if((oa&6)!==0)throw Error(n(327));var p=!d&&(l&124)===0&&(l&s.expiredLanes)===0||He(s,l),y=p?LS(s,l):Ng(s,l,!0),w=p;do{if(y===0){ni&&!p&&Cs(s,l,0,!1);break}else{if(d=s.current.alternate,w&&!TS(d)){y=Ng(s,l,!1),w=!1;continue}if(y===2){if(w=l,s.errorRecoveryDisabledLanes&w)var L=0;else L=s.pendingLanes&-536870913,L=L!==0?L:L&536870912?536870912:0;if(L!==0){l=L;e:{var Y=s;y=Cc;var ae=Y.current.memoizedState.isDehydrated;if(ae&&(li(Y,L).flags|=256),L=Ng(Y,L,!1),L!==2){if(bg&&!ae){Y.errorRecoveryDisabledLanes|=w,cl|=w,y=4;break e}w=Zn,Zn=y,w!==null&&(Zn===null?Zn=w:Zn.push.apply(Zn,w))}y=L}if(w=!1,y!==2)continue}}if(y===1){li(s,0),Cs(s,l,0,!0);break}e:{switch(p=s,w=y,w){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:Cs(p,l,Cr,!xs);break e;case 2:Zn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(y=Eg+300-J(),10<y)){if(Cs(p,l,Cr,!xs),rn(p,0,!0)!==0)break e;p.timeoutHandle=fv(U1.bind(null,p,d,Zn,Tu,xg,l,Cr,cl,ri,xs,w,2,-0,0),y);break e}U1(p,d,Zn,Tu,xg,l,Cr,cl,ri,xs,w,0,-0,0)}}break}while(!0);io(s)}function U1(s,l,d,p,y,w,L,Y,ae,me,Se,Ie,fe,ge){if(s.timeoutHandle=-1,Ie=l.subtreeFlags,(Ie&8192||(Ie&16785408)===16785408)&&(Rc={stylesheets:null,count:0,unsuspend:fC},T1(l),Ie=hC(),Ie!==null)){s.cancelPendingCommit=Ie(q1.bind(null,s,l,w,d,p,y,L,Y,ae,Se,1,fe,ge)),Cs(s,w,L,!me);return}q1(s,l,w,d,p,y,L,Y,ae)}function TS(s){for(var l=s;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var p=0;p<d.length;p++){var y=d[p],w=y.getSnapshot;y=y.value;try{if(!rr(w(),y))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Cs(s,l,d,p){l&=~vg,l&=~cl,s.suspendedLanes|=l,s.pingedLanes&=~l,p&&(s.warmLanes|=l),p=s.expirationTimes;for(var y=l;0<y;){var w=31-rt(y),L=1<<w;p[w]=-1,y&=~L}d!==0&&La(s,d,l)}function Pu(){return(oa&6)===0?(kc(0),!1):!0}function _g(){if(Ft!==null){if(sa===0)var s=Ft.return;else s=Ft,Po=nl=null,jf(s),Kl=null,hc=0,s=Ft;for(;s!==null;)v1(s.alternate,s),s=s.return;Ft=null}}function li(s,l){var d=s.timeoutHandle;d!==-1&&(s.timeoutHandle=-1,JS(d)),d=s.cancelPendingCommit,d!==null&&(s.cancelPendingCommit=null,d()),_g(),xa=s,Ft=d=Mo(s.current,null),Gt=l,sa=0,ir=null,xs=!1,ni=He(s,l),bg=!1,ri=Cr=vg=cl=Es=Ya=0,Zn=Cc=null,xg=!1,(l&8)!==0&&(l|=l&32);var p=s.entangledLanes;if(p!==0)for(s=s.entanglements,p&=l;0<p;){var y=31-rt(p),w=1<<y;l|=s[y],p&=~w}return jo=l,au(),d}function W1(s,l){Pt=null,D.H=Eu,l===lc||l===uu?(l=rb(),sa=3):l===tb?(l=rb(),sa=4):sa=l===o1?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ir=l,Ft===null&&(Ya=1,ku(s,vr(l,s.current)))}function j1(){var s=D.H;return D.H=Eu,s===null?Eu:s}function H1(){var s=D.A;return D.A=MS,s}function kg(){Ya=4,xs||(Gt&4194048)!==Gt&&Sr.current!==null||(ni=!0),(Es&134217727)===0&&(cl&134217727)===0||xa===null||Cs(xa,Gt,Cr,!1)}function Ng(s,l,d){var p=oa;oa|=2;var y=j1(),w=H1();(xa!==s||Gt!==l)&&(Tu=null,li(s,l)),l=!1;var L=Ya;e:do try{if(sa!==0&&Ft!==null){var Y=Ft,ae=ir;switch(sa){case 8:_g(),L=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(l=!0);var me=sa;if(sa=0,ir=null,ii(s,Y,ae,me),d&&ni){L=0;break e}break;default:me=sa,sa=0,ir=null,ii(s,Y,ae,me)}}PS(),L=Ya;break}catch(Se){W1(s,Se)}while(!0);return l&&s.shellSuspendCounter++,Po=nl=null,oa=p,D.H=y,D.A=w,Ft===null&&(xa=null,Gt=0,au()),L}function PS(){for(;Ft!==null;)$1(Ft)}function LS(s,l){var d=oa;oa|=2;var p=j1(),y=H1();xa!==s||Gt!==l?(Tu=null,Ru=J()+500,li(s,l)):ni=He(s,l);e:do try{if(sa!==0&&Ft!==null){l=Ft;var w=ir;t:switch(sa){case 1:sa=0,ir=null,ii(s,l,w,1);break;case 2:case 9:if(ab(w)){sa=0,ir=null,Y1(l);break}l=function(){sa!==2&&sa!==9||xa!==s||(sa=7),io(s)},w.then(l,l);break e;case 3:sa=7;break e;case 4:sa=5;break e;case 7:ab(w)?(sa=0,ir=null,Y1(l)):(sa=0,ir=null,ii(s,l,w,7));break;case 5:var L=null;switch(Ft.tag){case 26:L=Ft.memoizedState;case 5:case 27:var Y=Ft;if(!L||kv(L)){sa=0,ir=null;var ae=Y.sibling;if(ae!==null)Ft=ae;else{var me=Y.return;me!==null?(Ft=me,Lu(me)):Ft=null}break t}}sa=0,ir=null,ii(s,l,w,5);break;case 6:sa=0,ir=null,ii(s,l,w,6);break;case 8:_g(),Ya=6;break e;default:throw Error(n(462))}}BS();break}catch(Se){W1(s,Se)}while(!0);return Po=nl=null,D.H=p,D.A=y,oa=d,Ft!==null?0:(xa=null,Gt=0,au(),Ya)}function BS(){for(;Ft!==null&&!zt();)$1(Ft)}function $1(s){var l=y1(s.alternate,s,jo);s.memoizedProps=s.pendingProps,l===null?Lu(s):Ft=l}function Y1(s){var l=s,d=l.alternate;switch(l.tag){case 15:case 0:l=u1(d,l,l.pendingProps,l.type,void 0,Gt);break;case 11:l=u1(d,l,l.pendingProps,l.type.render,l.ref,Gt);break;case 5:jf(l);default:v1(d,l),l=Ft=Gy(l,jo),l=y1(d,l,jo)}s.memoizedProps=s.pendingProps,l===null?Lu(s):Ft=l}function ii(s,l,d,p){Po=nl=null,jf(l),Kl=null,hc=0;var y=l.return;try{if(_S(s,y,l,d,Gt)){Ya=1,ku(s,vr(d,s.current)),Ft=null;return}}catch(w){if(y!==null)throw Ft=y,w;Ya=1,ku(s,vr(d,s.current)),Ft=null;return}l.flags&32768?(Kt||p===1?s=!0:ni||(Gt&536870912)!==0?s=!1:(xs=s=!0,(p===2||p===9||p===3||p===6)&&(p=Sr.current,p!==null&&p.tag===13&&(p.flags|=16384))),G1(l,s)):Lu(l)}function Lu(s){var l=s;do{if((l.flags&32768)!==0){G1(l,xs);return}s=l.return;var d=NS(l.alternate,l,jo);if(d!==null){Ft=d;return}if(l=l.sibling,l!==null){Ft=l;return}Ft=l=s}while(l!==null);Ya===0&&(Ya=5)}function G1(s,l){do{var d=IS(s.alternate,s);if(d!==null){d.flags&=32767,Ft=d;return}if(d=s.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(s=s.sibling,s!==null)){Ft=s;return}Ft=s=d}while(s!==null);Ya=6,Ft=null}function q1(s,l,d,p,y,w,L,Y,ae){s.cancelPendingCommit=null;do Bu();while(_n!==0);if((oa&6)!==0)throw Error(n(327));if(l!==null){if(l===s.current)throw Error(n(177));if(w=l.lanes|l.childLanes,w|=yf,ka(s,d,w,L,Y,ae),s===xa&&(Ft=xa=null,Gt=0),oi=l,Ss=s,si=d,wg=w,Sg=y,z1=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,US(de,function(){return X1(),null})):(s.callbackNode=null,s.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=D.T,D.T=null,y=j.p,j.p=2,L=oa,oa|=4;try{AS(s,l,d)}finally{oa=L,j.p=y,D.T=p}}_n=1,Z1(),V1(),Q1()}}function Z1(){if(_n===1){_n=0;var s=Ss,l=oi,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=D.T,D.T=null;var p=j.p;j.p=2;var y=oa;oa|=4;try{D1(l,s);var w=Fg,L=By(s.containerInfo),Y=w.focusedElem,ae=w.selectionRange;if(L!==Y&&Y&&Y.ownerDocument&&Ly(Y.ownerDocument.documentElement,Y)){if(ae!==null&&mf(Y)){var me=ae.start,Se=ae.end;if(Se===void 0&&(Se=me),"selectionStart"in Y)Y.selectionStart=me,Y.selectionEnd=Math.min(Se,Y.value.length);else{var Ie=Y.ownerDocument||document,fe=Ie&&Ie.defaultView||window;if(fe.getSelection){var ge=fe.getSelection(),Et=Y.textContent.length,yt=Math.min(ae.start,Et),ga=ae.end===void 0?yt:Math.min(ae.end,Et);!ge.extend&&yt>ga&&(L=ga,ga=yt,yt=L);var ce=Py(Y,yt),se=Py(Y,ga);if(ce&&se&&(ge.rangeCount!==1||ge.anchorNode!==ce.node||ge.anchorOffset!==ce.offset||ge.focusNode!==se.node||ge.focusOffset!==se.offset)){var ue=Ie.createRange();ue.setStart(ce.node,ce.offset),ge.removeAllRanges(),yt>ga?(ge.addRange(ue),ge.extend(se.node,se.offset)):(ue.setEnd(se.node,se.offset),ge.addRange(ue))}}}}for(Ie=[],ge=Y;ge=ge.parentNode;)ge.nodeType===1&&Ie.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<Ie.length;Y++){var ke=Ie[Y];ke.element.scrollLeft=ke.left,ke.element.scrollTop=ke.top}}Zu=!!Og,Fg=Og=null}finally{oa=y,j.p=p,D.T=d}}s.current=l,_n=2}}function V1(){if(_n===2){_n=0;var s=Ss,l=oi,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=D.T,D.T=null;var p=j.p;j.p=2;var y=oa;oa|=4;try{k1(s,l.alternate,l)}finally{oa=y,j.p=p,D.T=d}}_n=3}}function Q1(){if(_n===4||_n===3){_n=0,ve();var s=Ss,l=oi,d=si,p=z1;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?_n=5:(_n=0,oi=Ss=null,J1(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(ws=null),Wa(d),l=l.stateNode,Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot(Be,l,void 0,(l.current.flags&128)===128)}catch{}if(p!==null){l=D.T,y=j.p,j.p=2,D.T=null;try{for(var w=s.onRecoverableError,L=0;L<p.length;L++){var Y=p[L];w(Y.value,{componentStack:Y.stack})}}finally{D.T=l,j.p=y}}(si&3)!==0&&Bu(),io(s),y=s.pendingLanes,(d&4194090)!==0&&(y&42)!==0?s===Cg?_c++:(_c=0,Cg=s):_c=0,kc(0)}}function J1(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,oc(l)))}function Bu(s){return Z1(),V1(),Q1(),X1()}function X1(){if(_n!==5)return!1;var s=Ss,l=wg;wg=0;var d=Wa(si),p=D.T,y=j.p;try{j.p=32>d?32:d,D.T=null,d=Sg,Sg=null;var w=Ss,L=si;if(_n=0,oi=Ss=null,si=0,(oa&6)!==0)throw Error(n(331));var Y=oa;if(oa|=4,L1(w.current),R1(w,w.current,L,d),oa=Y,kc(0,!1),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot(Be,w)}catch{}return!0}finally{j.p=y,D.T=p,J1(s,l)}}function K1(s,l,d){l=vr(d,l),l=ag(s.stateNode,l,2),s=ps(s,l,2),s!==null&&(Va(s,2),io(s))}function va(s,l,d){if(s.tag===3)K1(s,s,d);else for(;l!==null;){if(l.tag===3){K1(l,s,d);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ws===null||!ws.has(p))){s=vr(d,s),d=n1(2),p=ps(l,d,2),p!==null&&(r1(d,p,l,s),Va(p,2),io(p));break}}l=l.return}}function Ig(s,l,d){var p=s.pingCache;if(p===null){p=s.pingCache=new RS;var y=new Set;p.set(l,y)}else y=p.get(l),y===void 0&&(y=new Set,p.set(l,y));y.has(d)||(bg=!0,y.add(d),s=zS.bind(null,s,l,d),l.then(s,s))}function zS(s,l,d){var p=s.pingCache;p!==null&&p.delete(l),s.pingedLanes|=s.suspendedLanes&d,s.warmLanes&=~d,xa===s&&(Gt&d)===d&&(Ya===4||Ya===3&&(Gt&62914560)===Gt&&300>J()-Eg?(oa&2)===0&&li(s,0):vg|=d,ri===Gt&&(ri=0)),io(s)}function ev(s,l){l===0&&(l=on()),s=Hl(s,l),s!==null&&(Va(s,l),io(s))}function OS(s){var l=s.memoizedState,d=0;l!==null&&(d=l.retryLane),ev(s,d)}function FS(s,l){var d=0;switch(s.tag){case 13:var p=s.stateNode,y=s.memoizedState;y!==null&&(d=y.retryLane);break;case 19:p=s.stateNode;break;case 22:p=s.stateNode._retryCache;break;default:throw Error(n(314))}p!==null&&p.delete(l),ev(s,d)}function US(s,l){return lt(s,l)}var zu=null,ci=null,Ag=!1,Ou=!1,Dg=!1,dl=0;function io(s){s!==ci&&s.next===null&&(ci===null?zu=ci=s:ci=ci.next=s),Ou=!0,Ag||(Ag=!0,jS())}function kc(s,l){if(!Dg&&Ou){Dg=!0;do for(var d=!1,p=zu;p!==null;){if(s!==0){var y=p.pendingLanes;if(y===0)var w=0;else{var L=p.suspendedLanes,Y=p.pingedLanes;w=(1<<31-rt(42|s)+1)-1,w&=y&~(L&~Y),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(d=!0,rv(p,w))}else w=Gt,w=rn(p,p===xa?w:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(w&3)===0||He(p,w)||(d=!0,rv(p,w));p=p.next}while(d);Dg=!1}}function WS(){tv()}function tv(){Ou=Ag=!1;var s=0;dl!==0&&(QS()&&(s=dl),dl=0);for(var l=J(),d=null,p=zu;p!==null;){var y=p.next,w=av(p,l);w===0?(p.next=null,d===null?zu=y:d.next=y,y===null&&(ci=d)):(d=p,(s!==0||(w&3)!==0)&&(Ou=!0)),p=y}kc(s)}function av(s,l){for(var d=s.suspendedLanes,p=s.pingedLanes,y=s.expirationTimes,w=s.pendingLanes&-62914561;0<w;){var L=31-rt(w),Y=1<<L,ae=y[L];ae===-1?((Y&d)===0||(Y&p)!==0)&&(y[L]=ht(Y,l)):ae<=l&&(s.expiredLanes|=Y),w&=~Y}if(l=xa,d=Gt,d=rn(s,s===l?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p=s.callbackNode,d===0||s===l&&(sa===2||sa===9)||s.cancelPendingCommit!==null)return p!==null&&p!==null&&Ve(p),s.callbackNode=null,s.callbackPriority=0;if((d&3)===0||He(s,d)){if(l=d&-d,l===s.callbackPriority)return l;switch(p!==null&&Ve(p),Wa(d)){case 2:case 8:d=Le;break;case 32:d=de;break;case 268435456:d=ze;break;default:d=de}return p=nv.bind(null,s),d=lt(d,p),s.callbackPriority=l,s.callbackNode=d,l}return p!==null&&p!==null&&Ve(p),s.callbackPriority=2,s.callbackNode=null,2}function nv(s,l){if(_n!==0&&_n!==5)return s.callbackNode=null,s.callbackPriority=0,null;var d=s.callbackNode;if(Bu()&&s.callbackNode!==d)return null;var p=Gt;return p=rn(s,s===xa?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p===0?null:(F1(s,p,l),av(s,J()),s.callbackNode!=null&&s.callbackNode===d?nv.bind(null,s):null)}function rv(s,l){if(Bu())return null;F1(s,l,!0)}function jS(){XS(function(){(oa&6)!==0?lt(Ge,WS):tv()})}function Mg(){return dl===0&&(dl=Qt()),dl}function ov(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Rn(""+s)}function sv(s,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,s.id&&d.setAttribute("form",s.id),l.parentNode.insertBefore(d,l),s=new FormData(s),d.parentNode.removeChild(d),s}function HS(s,l,d,p,y){if(l==="submit"&&d&&d.stateNode===y){var w=ov((y[Na]||null).action),L=p.submitter;L&&(l=(l=L[Na]||null)?ov(l.formAction):L.getAttribute("formAction"),l!==null&&(w=l,L=null));var Y=new is("action","action",null,p,y);s.push({event:Y,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(dl!==0){var ae=L?sv(y,L):new FormData(y);Jf(d,{pending:!0,data:ae,method:y.method,action:w},null,ae)}}else typeof w=="function"&&(Y.preventDefault(),ae=L?sv(y,L):new FormData(y),Jf(d,{pending:!0,data:ae,method:y.method,action:w},w,ae))},currentTarget:y}]})}}for(var Rg=0;Rg<hf.length;Rg++){var Tg=hf[Rg],$S=Tg.toLowerCase(),YS=Tg[0].toUpperCase()+Tg.slice(1);Vr($S,"on"+YS)}Vr(Fy,"onAnimationEnd"),Vr(Uy,"onAnimationIteration"),Vr(Wy,"onAnimationStart"),Vr("dblclick","onDoubleClick"),Vr("focusin","onFocus"),Vr("focusout","onBlur"),Vr(iS,"onTransitionRun"),Vr(cS,"onTransitionStart"),Vr(dS,"onTransitionCancel"),Vr(jy,"onTransitionEnd"),Kn("onMouseEnter",["mouseout","mouseover"]),Kn("onMouseLeave",["mouseout","mouseover"]),Kn("onPointerEnter",["pointerout","pointerover"]),Kn("onPointerLeave",["pointerout","pointerover"]),un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),un("onBeforeInput",["compositionend","keypress","textInput","paste"]),un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nc));function lv(s,l){l=(l&4)!==0;for(var d=0;d<s.length;d++){var p=s[d],y=p.event;p=p.listeners;e:{var w=void 0;if(l)for(var L=p.length-1;0<=L;L--){var Y=p[L],ae=Y.instance,me=Y.currentTarget;if(Y=Y.listener,ae!==w&&y.isPropagationStopped())break e;w=Y,y.currentTarget=me;try{w(y)}catch(Se){_u(Se)}y.currentTarget=null,w=ae}else for(L=0;L<p.length;L++){if(Y=p[L],ae=Y.instance,me=Y.currentTarget,Y=Y.listener,ae!==w&&y.isPropagationStopped())break e;w=Y,y.currentTarget=me;try{w(y)}catch(Se){_u(Se)}y.currentTarget=null,w=ae}}}}function Ut(s,l){var d=l[Wr];d===void 0&&(d=l[Wr]=new Set);var p=s+"__bubble";d.has(p)||(iv(l,s,2,!1),d.add(p))}function Pg(s,l,d){var p=0;l&&(p|=4),iv(d,s,p,l)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function Lg(s){if(!s[Fu]){s[Fu]=!0,_o.forEach(function(d){d!=="selectionchange"&&(GS.has(d)||Pg(d,!1,s),Pg(d,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Fu]||(l[Fu]=!0,Pg("selectionchange",!1,l))}}function iv(s,l,d,p){switch(Rv(l)){case 2:var y=vC;break;case 8:y=xC;break;default:y=Vg}d=y.bind(null,l,d,s),y=void 0,!gn||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),p?y!==void 0?s.addEventListener(l,d,{capture:!0,passive:y}):s.addEventListener(l,d,!0):y!==void 0?s.addEventListener(l,d,{passive:y}):s.addEventListener(l,d,!1)}function Bg(s,l,d,p,y){var w=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var L=p.tag;if(L===3||L===4){var Y=p.stateNode.containerInfo;if(Y===y)break;if(L===4)for(L=p.return;L!==null;){var ae=L.tag;if((ae===3||ae===4)&&L.stateNode.containerInfo===y)return;L=L.return}for(;Y!==null;){if(L=Mn(Y),L===null)return;if(ae=L.tag,ae===5||ae===6||ae===26||ae===27){p=w=L;continue e}Y=Y.parentNode}}p=p.return}Tn(function(){var me=w,Se=Ht(d),Ie=[];e:{var fe=Hy.get(s);if(fe!==void 0){var ge=is,Et=s;switch(s){case"keypress":if(Fn(d)===0)break e;case"keydown":case"keyup":ge=sf;break;case"focusin":Et="focus",ge=Zr;break;case"focusout":Et="blur",ge=Zr;break;case"beforeblur":case"afterblur":ge=Zr;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Hd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=af;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=cf;break;case Fy:case Uy:case Wy:ge=nf;break;case jy:ge=Zd;break;case"scroll":case"scrollend":ge=Ll;break;case"wheel":ge=Qd;break;case"copy":case"cut":case"paste":ge=ky;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=Qi;break;case"toggle":case"beforetoggle":ge=Xd}var yt=(l&4)!==0,ga=!yt&&(s==="scroll"||s==="scrollend"),ce=yt?fe!==null?fe+"Capture":null:fe;yt=[];for(var se=me,ue;se!==null;){var ke=se;if(ue=ke.stateNode,ke=ke.tag,ke!==5&&ke!==26&&ke!==27||ue===null||ce===null||(ke=Ba(se,ce),ke!=null&&yt.push(Ic(se,ke,ue))),ga)break;se=se.return}0<yt.length&&(fe=new ge(fe,Et,null,d,Se),Ie.push({event:fe,listeners:yt}))}}if((l&7)===0){e:{if(fe=s==="mouseover"||s==="pointerover",ge=s==="mouseout"||s==="pointerout",fe&&d!==Yr&&(Et=d.relatedTarget||d.fromElement)&&(Mn(Et)||Et[An]))break e;if((ge||fe)&&(fe=Se.window===Se?Se:(fe=Se.ownerDocument)?fe.defaultView||fe.parentWindow:window,ge?(Et=d.relatedTarget||d.toElement,ge=me,Et=Et?Mn(Et):null,Et!==null&&(ga=i(Et),yt=Et.tag,Et!==ga||yt!==5&&yt!==27&&yt!==6)&&(Et=null)):(ge=null,Et=me),ge!==Et)){if(yt=Hd,ke="onMouseLeave",ce="onMouseEnter",se="mouse",(s==="pointerout"||s==="pointerover")&&(yt=Qi,ke="onPointerLeave",ce="onPointerEnter",se="pointer"),ga=ge==null?fe:br(ge),ue=Et==null?fe:br(Et),fe=new yt(ke,se+"leave",ge,d,Se),fe.target=ga,fe.relatedTarget=ue,ke=null,Mn(Se)===me&&(yt=new yt(ce,se+"enter",Et,d,Se),yt.target=ue,yt.relatedTarget=ga,ke=yt),ga=ke,ge&&Et)t:{for(yt=ge,ce=Et,se=0,ue=yt;ue;ue=di(ue))se++;for(ue=0,ke=ce;ke;ke=di(ke))ue++;for(;0<se-ue;)yt=di(yt),se--;for(;0<ue-se;)ce=di(ce),ue--;for(;se--;){if(yt===ce||ce!==null&&yt===ce.alternate)break t;yt=di(yt),ce=di(ce)}yt=null}else yt=null;ge!==null&&cv(Ie,fe,ge,yt,!1),Et!==null&&ga!==null&&cv(Ie,ga,Et,yt,!0)}}e:{if(fe=me?br(me):window,ge=fe.nodeName&&fe.nodeName.toLowerCase(),ge==="select"||ge==="input"&&fe.type==="file")var at=Iy;else if(eu(fe))if(Ay)at=oS;else{at=nS;var Ot=aS}else ge=fe.nodeName,!ge||ge.toLowerCase()!=="input"||fe.type!=="checkbox"&&fe.type!=="radio"?me&&et(me.elementType)&&(at=Iy):at=rS;if(at&&(at=at(s,me))){Ny(Ie,at,d,Se);break e}Ot&&Ot(s,fe,me),s==="focusout"&&me&&fe.type==="number"&&me.memoizedProps.value!=null&&Ct(fe,"number",fe.value)}switch(Ot=me?br(me):window,s){case"focusin":(eu(Ot)||Ot.contentEditable==="true")&&(Ul=Ot,pf=me,ec=null);break;case"focusout":ec=pf=Ul=null;break;case"mousedown":ff=!0;break;case"contextmenu":case"mouseup":case"dragend":ff=!1,zy(Ie,d,Se);break;case"selectionchange":if(lS)break;case"keydown":case"keyup":zy(Ie,d,Se)}var ut;if(ee)e:{switch(s){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else dt?Ia(s,d)&&(vt="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(vt="onCompositionStart");vt&&(kt&&d.locale!=="ko"&&(dt||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&dt&&(ut=Ha()):(yn=Se,tr="value"in yn?yn.value:yn.textContent,dt=!0)),Ot=Uu(me,vt),0<Ot.length&&(vt=new Vi(vt,s,null,d,Se),Ie.push({event:vt,listeners:Ot}),ut?vt.data=ut:(ut=Ao(d),ut!==null&&(vt.data=ut)))),(ut=Ue?Un(s,d):Do(s,d))&&(vt=Uu(me,"onBeforeInput"),0<vt.length&&(Ot=new Vi("onBeforeInput","beforeinput",null,d,Se),Ie.push({event:Ot,listeners:vt}),Ot.data=ut)),HS(Ie,s,me,d,Se)}lv(Ie,l)})}function Ic(s,l,d){return{instance:s,listener:l,currentTarget:d}}function Uu(s,l){for(var d=l+"Capture",p=[];s!==null;){var y=s,w=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||w===null||(y=Ba(s,d),y!=null&&p.unshift(Ic(s,y,w)),y=Ba(s,l),y!=null&&p.push(Ic(s,y,w))),s.tag===3)return p;s=s.return}return[]}function di(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function cv(s,l,d,p,y){for(var w=l._reactName,L=[];d!==null&&d!==p;){var Y=d,ae=Y.alternate,me=Y.stateNode;if(Y=Y.tag,ae!==null&&ae===p)break;Y!==5&&Y!==26&&Y!==27||me===null||(ae=me,y?(me=Ba(d,w),me!=null&&L.unshift(Ic(d,me,ae))):y||(me=Ba(d,w),me!=null&&L.push(Ic(d,me,ae)))),d=d.return}L.length!==0&&s.push({event:l,listeners:L})}var qS=/\r\n?/g,ZS=/\u0000|\uFFFD/g;function dv(s){return(typeof s=="string"?s:""+s).replace(qS,`
`).replace(ZS,"")}function uv(s,l){return l=dv(l),dv(s)===l}function Wu(){}function fa(s,l,d,p,y,w){switch(d){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||qe(s,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&qe(s,""+p);break;case"className":it(s,"class",p);break;case"tabIndex":it(s,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":it(s,d,p);break;case"style":Qe(s,p,w);break;case"data":if(l!=="object"){it(s,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||d!=="href")){s.removeAttribute(d);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(d);break}p=Rn(""+p),s.setAttribute(d,p);break;case"action":case"formAction":if(typeof p=="function"){s.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(d==="formAction"?(l!=="input"&&fa(s,l,"name",y.name,y,null),fa(s,l,"formEncType",y.formEncType,y,null),fa(s,l,"formMethod",y.formMethod,y,null),fa(s,l,"formTarget",y.formTarget,y,null)):(fa(s,l,"encType",y.encType,y,null),fa(s,l,"method",y.method,y,null),fa(s,l,"target",y.target,y,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(d);break}p=Rn(""+p),s.setAttribute(d,p);break;case"onClick":p!=null&&(s.onclick=Wu);break;case"onScroll":p!=null&&Ut("scroll",s);break;case"onScrollEnd":p!=null&&Ut("scrollend",s);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(d=p.__html,d!=null){if(y.children!=null)throw Error(n(60));s.innerHTML=d}}break;case"multiple":s.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":s.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){s.removeAttribute("xlink:href");break}d=Rn(""+p),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(d,""+p):s.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(d,""):s.removeAttribute(d);break;case"capture":case"download":p===!0?s.setAttribute(d,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(d,p):s.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?s.setAttribute(d,p):s.removeAttribute(d);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?s.removeAttribute(d):s.setAttribute(d,p);break;case"popover":Ut("beforetoggle",s),Ut("toggle",s),ot(s,"popover",p);break;case"xlinkActuate":mt(s,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":mt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":mt(s,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":mt(s,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":mt(s,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":mt(s,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":mt(s,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":mt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":mt(s,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":ot(s,"is",p);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Yt.get(d)||d,ot(s,d,p))}}function zg(s,l,d,p,y,w){switch(d){case"style":Qe(s,p,w);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(d=p.__html,d!=null){if(y.children!=null)throw Error(n(60));s.innerHTML=d}}break;case"children":typeof p=="string"?qe(s,p):(typeof p=="number"||typeof p=="bigint")&&qe(s,""+p);break;case"onScroll":p!=null&&Ut("scroll",s);break;case"onScrollEnd":p!=null&&Ut("scrollend",s);break;case"onClick":p!=null&&(s.onclick=Wu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ko.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(y=d.endsWith("Capture"),l=d.slice(2,y?d.length-7:void 0),w=s[Na]||null,w=w!=null?w[d]:null,typeof w=="function"&&s.removeEventListener(l,w,y),typeof p=="function")){typeof w!="function"&&w!==null&&(d in s?s[d]=null:s.hasAttribute(d)&&s.removeAttribute(d)),s.addEventListener(l,p,y);break e}d in s?s[d]=p:p===!0?s.setAttribute(d,""):ot(s,d,p)}}}function kn(s,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ut("error",s),Ut("load",s);var p=!1,y=!1,w;for(w in d)if(d.hasOwnProperty(w)){var L=d[w];if(L!=null)switch(w){case"src":p=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:fa(s,l,w,L,d,null)}}y&&fa(s,l,"srcSet",d.srcSet,d,null),p&&fa(s,l,"src",d.src,d,null);return;case"input":Ut("invalid",s);var Y=w=L=y=null,ae=null,me=null;for(p in d)if(d.hasOwnProperty(p)){var Se=d[p];if(Se!=null)switch(p){case"name":y=Se;break;case"type":L=Se;break;case"checked":ae=Se;break;case"defaultChecked":me=Se;break;case"value":w=Se;break;case"defaultValue":Y=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(n(137,l));break;default:fa(s,l,p,Se,d,null)}}Je(s,w,Y,ae,me,L,y,!1),$(s);return;case"select":Ut("invalid",s),p=L=w=null;for(y in d)if(d.hasOwnProperty(y)&&(Y=d[y],Y!=null))switch(y){case"value":w=Y;break;case"defaultValue":L=Y;break;case"multiple":p=Y;default:fa(s,l,y,Y,d,null)}l=w,d=L,s.multiple=!!p,l!=null?ct(s,!!p,l,!1):d!=null&&ct(s,!!p,d,!0);return;case"textarea":Ut("invalid",s),w=y=p=null;for(L in d)if(d.hasOwnProperty(L)&&(Y=d[L],Y!=null))switch(L){case"value":p=Y;break;case"defaultValue":y=Y;break;case"children":w=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(91));break;default:fa(s,l,L,Y,d,null)}ft(s,p,y,w),$(s);return;case"option":for(ae in d)if(d.hasOwnProperty(ae)&&(p=d[ae],p!=null))switch(ae){case"selected":s.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:fa(s,l,ae,p,d,null)}return;case"dialog":Ut("beforetoggle",s),Ut("toggle",s),Ut("cancel",s),Ut("close",s);break;case"iframe":case"object":Ut("load",s);break;case"video":case"audio":for(p=0;p<Nc.length;p++)Ut(Nc[p],s);break;case"image":Ut("error",s),Ut("load",s);break;case"details":Ut("toggle",s);break;case"embed":case"source":case"link":Ut("error",s),Ut("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in d)if(d.hasOwnProperty(me)&&(p=d[me],p!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:fa(s,l,me,p,d,null)}return;default:if(et(l)){for(Se in d)d.hasOwnProperty(Se)&&(p=d[Se],p!==void 0&&zg(s,l,Se,p,d,void 0));return}}for(Y in d)d.hasOwnProperty(Y)&&(p=d[Y],p!=null&&fa(s,l,Y,p,d,null))}function VS(s,l,d,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,w=null,L=null,Y=null,ae=null,me=null,Se=null;for(ge in d){var Ie=d[ge];if(d.hasOwnProperty(ge)&&Ie!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":ae=Ie;default:p.hasOwnProperty(ge)||fa(s,l,ge,null,p,Ie)}}for(var fe in p){var ge=p[fe];if(Ie=d[fe],p.hasOwnProperty(fe)&&(ge!=null||Ie!=null))switch(fe){case"type":w=ge;break;case"name":y=ge;break;case"checked":me=ge;break;case"defaultChecked":Se=ge;break;case"value":L=ge;break;case"defaultValue":Y=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(n(137,l));break;default:ge!==Ie&&fa(s,l,fe,ge,p,Ie)}}Fe(s,L,Y,ae,me,Se,w,y);return;case"select":ge=L=Y=fe=null;for(w in d)if(ae=d[w],d.hasOwnProperty(w)&&ae!=null)switch(w){case"value":break;case"multiple":ge=ae;default:p.hasOwnProperty(w)||fa(s,l,w,null,p,ae)}for(y in p)if(w=p[y],ae=d[y],p.hasOwnProperty(y)&&(w!=null||ae!=null))switch(y){case"value":fe=w;break;case"defaultValue":Y=w;break;case"multiple":L=w;default:w!==ae&&fa(s,l,y,w,p,ae)}l=Y,d=L,p=ge,fe!=null?ct(s,!!d,fe,!1):!!p!=!!d&&(l!=null?ct(s,!!d,l,!0):ct(s,!!d,d?[]:"",!1));return;case"textarea":ge=fe=null;for(Y in d)if(y=d[Y],d.hasOwnProperty(Y)&&y!=null&&!p.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:fa(s,l,Y,null,p,y)}for(L in p)if(y=p[L],w=d[L],p.hasOwnProperty(L)&&(y!=null||w!=null))switch(L){case"value":fe=y;break;case"defaultValue":ge=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(n(91));break;default:y!==w&&fa(s,l,L,y,p,w)}_t(s,fe,ge);return;case"option":for(var Et in d)if(fe=d[Et],d.hasOwnProperty(Et)&&fe!=null&&!p.hasOwnProperty(Et))switch(Et){case"selected":s.selected=!1;break;default:fa(s,l,Et,null,p,fe)}for(ae in p)if(fe=p[ae],ge=d[ae],p.hasOwnProperty(ae)&&fe!==ge&&(fe!=null||ge!=null))switch(ae){case"selected":s.selected=fe&&typeof fe!="function"&&typeof fe!="symbol";break;default:fa(s,l,ae,fe,p,ge)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in d)fe=d[yt],d.hasOwnProperty(yt)&&fe!=null&&!p.hasOwnProperty(yt)&&fa(s,l,yt,null,p,fe);for(me in p)if(fe=p[me],ge=d[me],p.hasOwnProperty(me)&&fe!==ge&&(fe!=null||ge!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(n(137,l));break;default:fa(s,l,me,fe,p,ge)}return;default:if(et(l)){for(var ga in d)fe=d[ga],d.hasOwnProperty(ga)&&fe!==void 0&&!p.hasOwnProperty(ga)&&zg(s,l,ga,void 0,p,fe);for(Se in p)fe=p[Se],ge=d[Se],!p.hasOwnProperty(Se)||fe===ge||fe===void 0&&ge===void 0||zg(s,l,Se,fe,p,ge);return}}for(var ce in d)fe=d[ce],d.hasOwnProperty(ce)&&fe!=null&&!p.hasOwnProperty(ce)&&fa(s,l,ce,null,p,fe);for(Ie in p)fe=p[Ie],ge=d[Ie],!p.hasOwnProperty(Ie)||fe===ge||fe==null&&ge==null||fa(s,l,Ie,fe,p,ge)}var Og=null,Fg=null;function ju(s){return s.nodeType===9?s:s.ownerDocument}function mv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pv(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function Ug(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Wg=null;function QS(){var s=window.event;return s&&s.type==="popstate"?s===Wg?!1:(Wg=s,!0):(Wg=null,!1)}var fv=typeof setTimeout=="function"?setTimeout:void 0,JS=typeof clearTimeout=="function"?clearTimeout:void 0,gv=typeof Promise=="function"?Promise:void 0,XS=typeof queueMicrotask=="function"?queueMicrotask:typeof gv<"u"?function(s){return gv.resolve(null).then(s).catch(KS)}:fv;function KS(s){setTimeout(function(){throw s})}function _s(s){return s==="head"}function hv(s,l){var d=l,p=0,y=0;do{var w=d.nextSibling;if(s.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"){if(0<p&&8>p){d=p;var L=s.ownerDocument;if(d&1&&Ac(L.documentElement),d&2&&Ac(L.body),d&4)for(d=L.head,Ac(d),L=d.firstChild;L;){var Y=L.nextSibling,ae=L.nodeName;L[hr]||ae==="SCRIPT"||ae==="STYLE"||ae==="LINK"&&L.rel.toLowerCase()==="stylesheet"||d.removeChild(L),L=Y}}if(y===0){s.removeChild(w),zc(l);return}y--}else d==="$"||d==="$?"||d==="$!"?y++:p=d.charCodeAt(0)-48;else p=0;d=w}while(d);zc(l)}function jg(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":jg(d),Hr(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}s.removeChild(d)}}function eC(s,l,d,p){for(;s.nodeType===1;){var y=d;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(p){if(!s[hr])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(w=s.getAttribute("rel"),w==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(w!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(w=s.getAttribute("src"),(w!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&w&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var w=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===w)return s}else return s;if(s=Jr(s.nextSibling),s===null)break}return null}function tC(s,l,d){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!d||(s=Jr(s.nextSibling),s===null))return null;return s}function Hg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function aC(s,l){var d=s.ownerDocument;if(s.data!=="$?"||d.readyState==="complete")l();else{var p=function(){l(),d.removeEventListener("DOMContentLoaded",p)};d.addEventListener("DOMContentLoaded",p),s._reactRetry=p}}function Jr(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return s}var $g=null;function yv(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return s;l--}else d==="/$"&&l++}s=s.previousSibling}return null}function bv(s,l,d){switch(l=ju(d),s){case"html":if(s=l.documentElement,!s)throw Error(n(452));return s;case"head":if(s=l.head,!s)throw Error(n(453));return s;case"body":if(s=l.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function Ac(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);Hr(s)}var _r=new Map,vv=new Set;function Hu(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ho=j.d;j.d={f:nC,r:rC,D:oC,C:sC,L:lC,m:iC,X:dC,S:cC,M:uC};function nC(){var s=Ho.f(),l=Pu();return s||l}function rC(s){var l=yr(s);l!==null&&l.tag===5&&l.type==="form"?Fb(l):Ho.r(s)}var ui=typeof document>"u"?null:document;function xv(s,l,d){var p=ui;if(p&&typeof l=="string"&&l){var y=$e(l);y='link[rel="'+s+'"][href="'+y+'"]',typeof d=="string"&&(y+='[crossorigin="'+d+'"]'),vv.has(y)||(vv.add(y),s={rel:s,crossOrigin:d,href:l},p.querySelector(y)===null&&(l=p.createElement("link"),kn(l,"link",s),Sa(l),p.head.appendChild(l)))}}function oC(s){Ho.D(s),xv("dns-prefetch",s,null)}function sC(s,l){Ho.C(s,l),xv("preconnect",s,l)}function lC(s,l,d){Ho.L(s,l,d);var p=ui;if(p&&s&&l){var y='link[rel="preload"][as="'+$e(l)+'"]';l==="image"&&d&&d.imageSrcSet?(y+='[imagesrcset="'+$e(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(y+='[imagesizes="'+$e(d.imageSizes)+'"]')):y+='[href="'+$e(s)+'"]';var w=y;switch(l){case"style":w=mi(s);break;case"script":w=pi(s)}_r.has(w)||(s=f({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:s,as:l},d),_r.set(w,s),p.querySelector(y)!==null||l==="style"&&p.querySelector(Dc(w))||l==="script"&&p.querySelector(Mc(w))||(l=p.createElement("link"),kn(l,"link",s),Sa(l),p.head.appendChild(l)))}}function iC(s,l){Ho.m(s,l);var d=ui;if(d&&s){var p=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+$e(p)+'"][href="'+$e(s)+'"]',w=y;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=pi(s)}if(!_r.has(w)&&(s=f({rel:"modulepreload",href:s},l),_r.set(w,s),d.querySelector(y)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Mc(w)))return}p=d.createElement("link"),kn(p,"link",s),Sa(p),d.head.appendChild(p)}}}function cC(s,l,d){Ho.S(s,l,d);var p=ui;if(p&&s){var y=Xn(p).hoistableStyles,w=mi(s);l=l||"default";var L=y.get(w);if(!L){var Y={loading:0,preload:null};if(L=p.querySelector(Dc(w)))Y.loading=5;else{s=f({rel:"stylesheet",href:s,"data-precedence":l},d),(d=_r.get(w))&&Yg(s,d);var ae=L=p.createElement("link");Sa(ae),kn(ae,"link",s),ae._p=new Promise(function(me,Se){ae.onload=me,ae.onerror=Se}),ae.addEventListener("load",function(){Y.loading|=1}),ae.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,$u(L,l,p)}L={type:"stylesheet",instance:L,count:1,state:Y},y.set(w,L)}}}function dC(s,l){Ho.X(s,l);var d=ui;if(d&&s){var p=Xn(d).hoistableScripts,y=pi(s),w=p.get(y);w||(w=d.querySelector(Mc(y)),w||(s=f({src:s,async:!0},l),(l=_r.get(y))&&Gg(s,l),w=d.createElement("script"),Sa(w),kn(w,"link",s),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(y,w))}}function uC(s,l){Ho.M(s,l);var d=ui;if(d&&s){var p=Xn(d).hoistableScripts,y=pi(s),w=p.get(y);w||(w=d.querySelector(Mc(y)),w||(s=f({src:s,async:!0,type:"module"},l),(l=_r.get(y))&&Gg(s,l),w=d.createElement("script"),Sa(w),kn(w,"link",s),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(y,w))}}function Ev(s,l,d,p){var y=(y=oe.current)?Hu(y):null;if(!y)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=mi(d.href),d=Xn(y).hoistableStyles,p=d.get(l),p||(p={type:"style",instance:null,count:0,state:null},d.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){s=mi(d.href);var w=Xn(y).hoistableStyles,L=w.get(s);if(L||(y=y.ownerDocument||y,L={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(s,L),(w=y.querySelector(Dc(s)))&&!w._p&&(L.instance=w,L.state.loading=5),_r.has(s)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},_r.set(s,d),w||mC(y,s,d,L.state))),l&&p===null)throw Error(n(528,""));return L}if(l&&p!==null)throw Error(n(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=pi(d),d=Xn(y).hoistableScripts,p=d.get(l),p||(p={type:"script",instance:null,count:0,state:null},d.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function mi(s){return'href="'+$e(s)+'"'}function Dc(s){return'link[rel="stylesheet"]['+s+"]"}function wv(s){return f({},s,{"data-precedence":s.precedence,precedence:null})}function mC(s,l,d,p){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=s.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),kn(l,"link",d),Sa(l),s.head.appendChild(l))}function pi(s){return'[src="'+$e(s)+'"]'}function Mc(s){return"script[async]"+s}function Sv(s,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var p=s.querySelector('style[data-href~="'+$e(d.href)+'"]');if(p)return l.instance=p,Sa(p),p;var y=f({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return p=(s.ownerDocument||s).createElement("style"),Sa(p),kn(p,"style",y),$u(p,d.precedence,s),l.instance=p;case"stylesheet":y=mi(d.href);var w=s.querySelector(Dc(y));if(w)return l.state.loading|=4,l.instance=w,Sa(w),w;p=wv(d),(y=_r.get(y))&&Yg(p,y),w=(s.ownerDocument||s).createElement("link"),Sa(w);var L=w;return L._p=new Promise(function(Y,ae){L.onload=Y,L.onerror=ae}),kn(w,"link",p),l.state.loading|=4,$u(w,d.precedence,s),l.instance=w;case"script":return w=pi(d.src),(y=s.querySelector(Mc(w)))?(l.instance=y,Sa(y),y):(p=d,(y=_r.get(w))&&(p=f({},d),Gg(p,y)),s=s.ownerDocument||s,y=s.createElement("script"),Sa(y),kn(y,"link",p),s.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,$u(p,d.precedence,s));return l.instance}function $u(s,l,d){for(var p=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=p.length?p[p.length-1]:null,w=y,L=0;L<p.length;L++){var Y=p[L];if(Y.dataset.precedence===l)w=Y;else if(w!==y)break}w?w.parentNode.insertBefore(s,w.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(s,l.firstChild))}function Yg(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function Gg(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Yu=null;function Cv(s,l,d){if(Yu===null){var p=new Map,y=Yu=new Map;y.set(d,p)}else y=Yu,p=y.get(d),p||(p=new Map,y.set(d,p));if(p.has(s))return p;for(p.set(s,null),d=d.getElementsByTagName(s),y=0;y<d.length;y++){var w=d[y];if(!(w[hr]||w[ua]||s==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var L=w.getAttribute(l)||"";L=s+L;var Y=p.get(L);Y?Y.push(w):p.set(L,[w])}}return p}function _v(s,l,d){s=s.ownerDocument||s,s.head.insertBefore(d,l==="title"?s.querySelector("head > title"):null)}function pC(s,l,d){if(d===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function kv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Rc=null;function fC(){}function gC(s,l,d){if(Rc===null)throw Error(n(475));var p=Rc;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=mi(d.href),w=s.querySelector(Dc(y));if(w){s=w._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(p.count++,p=Gu.bind(p),s.then(p,p)),l.state.loading|=4,l.instance=w,Sa(w);return}w=s.ownerDocument||s,d=wv(d),(y=_r.get(y))&&Yg(d,y),w=w.createElement("link"),Sa(w);var L=w;L._p=new Promise(function(Y,ae){L.onload=Y,L.onerror=ae}),kn(w,"link",d),l.instance=w}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(p.count++,l=Gu.bind(p),s.addEventListener("load",l),s.addEventListener("error",l))}}function hC(){if(Rc===null)throw Error(n(475));var s=Rc;return s.stylesheets&&s.count===0&&qg(s,s.stylesheets),0<s.count?function(l){var d=setTimeout(function(){if(s.stylesheets&&qg(s,s.stylesheets),s.unsuspend){var p=s.unsuspend;s.unsuspend=null,p()}},6e4);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(d)}}:null}function Gu(){if(this.count--,this.count===0){if(this.stylesheets)qg(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var qu=null;function qg(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,qu=new Map,l.forEach(yC,s),qu=null,Gu.call(s))}function yC(s,l){if(!(l.state.loading&4)){var d=qu.get(s);if(d)var p=d.get(null);else{d=new Map,qu.set(s,d);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<y.length;w++){var L=y[w];(L.nodeName==="LINK"||L.getAttribute("media")!=="not all")&&(d.set(L.dataset.precedence,L),p=L)}p&&d.set(null,p)}y=l.instance,L=y.getAttribute("data-precedence"),w=d.get(L)||p,w===p&&d.set(null,y),d.set(L,y),this.count++,p=Gu.bind(this),y.addEventListener("load",p),y.addEventListener("error",p),w?w.parentNode.insertBefore(y,w.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),l.state.loading|=4}}var Tc={$$typeof:A,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function bC(s,l,d,p,y,w,L,Y){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tt(0),this.hiddenUpdates=Tt(null),this.identifierPrefix=p,this.onUncaughtError=y,this.onCaughtError=w,this.onRecoverableError=L,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function Nv(s,l,d,p,y,w,L,Y,ae,me,Se,Ie){return s=new bC(s,l,d,L,Y,ae,me,Ie),l=1,w===!0&&(l|=24),w=or(3,null,null,l),s.current=w,w.stateNode=s,l=If(),l.refCount++,s.pooledCache=l,l.refCount++,w.memoizedState={element:p,isDehydrated:d,cache:l},Rf(w),s}function Iv(s){return s?(s=$l,s):$l}function Av(s,l,d,p,y,w){y=Iv(y),p.context===null?p.context=y:p.pendingContext=y,p=ms(l),p.payload={element:d},w=w===void 0?null:w,w!==null&&(p.callback=w),d=ps(s,p,l),d!==null&&(dr(d,s,l),cc(d,s,l))}function Dv(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<l?d:l}}function Zg(s,l){Dv(s,l),(s=s.alternate)&&Dv(s,l)}function Mv(s){if(s.tag===13){var l=Hl(s,67108864);l!==null&&dr(l,s,67108864),Zg(s,67108864)}}var Zu=!0;function vC(s,l,d,p){var y=D.T;D.T=null;var w=j.p;try{j.p=2,Vg(s,l,d,p)}finally{j.p=w,D.T=y}}function xC(s,l,d,p){var y=D.T;D.T=null;var w=j.p;try{j.p=8,Vg(s,l,d,p)}finally{j.p=w,D.T=y}}function Vg(s,l,d,p){if(Zu){var y=Qg(p);if(y===null)Bg(s,l,p,Vu,d),Tv(s,p);else if(wC(y,s,l,d,p))p.stopPropagation();else if(Tv(s,p),l&4&&-1<EC.indexOf(s)){for(;y!==null;){var w=yr(y);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var L=wa(w.pendingLanes);if(L!==0){var Y=w;for(Y.pendingLanes|=2,Y.entangledLanes|=2;L;){var ae=1<<31-rt(L);Y.entanglements[1]|=ae,L&=~ae}io(w),(oa&6)===0&&(Ru=J()+500,kc(0))}}break;case 13:Y=Hl(w,2),Y!==null&&dr(Y,w,2),Pu(),Zg(w,2)}if(w=Qg(p),w===null&&Bg(s,l,p,Vu,d),w===y)break;y=w}y!==null&&p.stopPropagation()}else Bg(s,l,p,null,d)}}function Qg(s){return s=Ht(s),Jg(s)}var Vu=null;function Jg(s){if(Vu=null,s=Mn(s),s!==null){var l=i(s);if(l===null)s=null;else{var d=l.tag;if(d===13){if(s=c(l),s!==null)return s;s=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Vu=s,null}function Rv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ae()){case Ge:return 2;case Le:return 8;case de:case je:return 32;case ze:return 268435456;default:return 32}default:return 32}}var Xg=!1,ks=null,Ns=null,Is=null,Pc=new Map,Lc=new Map,As=[],EC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tv(s,l){switch(s){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":Ns=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":Pc.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lc.delete(l.pointerId)}}function Bc(s,l,d,p,y,w){return s===null||s.nativeEvent!==w?(s={blockedOn:l,domEventName:d,eventSystemFlags:p,nativeEvent:w,targetContainers:[y]},l!==null&&(l=yr(l),l!==null&&Mv(l)),s):(s.eventSystemFlags|=p,l=s.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),s)}function wC(s,l,d,p,y){switch(l){case"focusin":return ks=Bc(ks,s,l,d,p,y),!0;case"dragenter":return Ns=Bc(Ns,s,l,d,p,y),!0;case"mouseover":return Is=Bc(Is,s,l,d,p,y),!0;case"pointerover":var w=y.pointerId;return Pc.set(w,Bc(Pc.get(w)||null,s,l,d,p,y)),!0;case"gotpointercapture":return w=y.pointerId,Lc.set(w,Bc(Lc.get(w)||null,s,l,d,p,y)),!0}return!1}function Pv(s){var l=Mn(s.target);if(l!==null){var d=i(l);if(d!==null){if(l=d.tag,l===13){if(l=c(d),l!==null){s.blockedOn=l,ss(s.priority,function(){if(d.tag===13){var p=cr();p=wn(p);var y=Hl(d,p);y!==null&&dr(y,d,p),Zg(d,p)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Qu(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var d=Qg(s.nativeEvent);if(d===null){d=s.nativeEvent;var p=new d.constructor(d.type,d);Yr=p,d.target.dispatchEvent(p),Yr=null}else return l=yr(d),l!==null&&Mv(l),s.blockedOn=d,!1;l.shift()}return!0}function Lv(s,l,d){Qu(s)&&d.delete(l)}function SC(){Xg=!1,ks!==null&&Qu(ks)&&(ks=null),Ns!==null&&Qu(Ns)&&(Ns=null),Is!==null&&Qu(Is)&&(Is=null),Pc.forEach(Lv),Lc.forEach(Lv)}function Ju(s,l){s.blockedOn===l&&(s.blockedOn=null,Xg||(Xg=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,SC)))}var Xu=null;function Bv(s){Xu!==s&&(Xu=s,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Xu===s&&(Xu=null);for(var l=0;l<s.length;l+=3){var d=s[l],p=s[l+1],y=s[l+2];if(typeof p!="function"){if(Jg(p||d)===null)continue;break}var w=yr(d);w!==null&&(s.splice(l,3),l-=3,Jf(w,{pending:!0,data:y,method:d.method,action:p},p,y))}}))}function zc(s){function l(ae){return Ju(ae,s)}ks!==null&&Ju(ks,s),Ns!==null&&Ju(Ns,s),Is!==null&&Ju(Is,s),Pc.forEach(l),Lc.forEach(l);for(var d=0;d<As.length;d++){var p=As[d];p.blockedOn===s&&(p.blockedOn=null)}for(;0<As.length&&(d=As[0],d.blockedOn===null);)Pv(d),d.blockedOn===null&&As.shift();if(d=(s.ownerDocument||s).$$reactFormReplay,d!=null)for(p=0;p<d.length;p+=3){var y=d[p],w=d[p+1],L=y[Na]||null;if(typeof w=="function")L||Bv(d);else if(L){var Y=null;if(w&&w.hasAttribute("formAction")){if(y=w,L=w[Na]||null)Y=L.formAction;else if(Jg(y)!==null)continue}else Y=L.action;typeof Y=="function"?d[p+1]=Y:(d.splice(p,3),p-=3),Bv(d)}}}function Kg(s){this._internalRoot=s}Ku.prototype.render=Kg.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(n(409));var d=l.current,p=cr();Av(d,p,s,l,null,null)},Ku.prototype.unmount=Kg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Av(s.current,2,null,s,null,null),Pu(),l[An]=null}};function Ku(s){this._internalRoot=s}Ku.prototype.unstable_scheduleHydration=function(s){if(s){var l=Jn();s={blockedOn:null,target:s,priority:l};for(var d=0;d<As.length&&l!==0&&l<As[d].priority;d++);As.splice(d,0,s),d===0&&Pv(s)}};var zv=r.version;if(zv!=="19.1.0")throw Error(n(527,zv,"19.1.0"));j.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=m(l),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var CC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var em=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!em.isDisabled&&em.supportsFiber)try{Be=em.inject(CC),Oe=em}catch{}}return Oc.createRoot=function(s,l){if(!o(s))throw Error(n(299));var d=!1,p="",y=Kb,w=e1,L=t1,Y=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(L=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(Y=l.unstable_transitionCallbacks)),l=Nv(s,1,!1,null,null,d,p,y,w,L,Y,null),s[An]=l.current,Lg(s),new Kg(l)},Oc.hydrateRoot=function(s,l,d){if(!o(s))throw Error(n(299));var p=!1,y="",w=Kb,L=e1,Y=t1,ae=null,me=null;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onUncaughtError!==void 0&&(w=d.onUncaughtError),d.onCaughtError!==void 0&&(L=d.onCaughtError),d.onRecoverableError!==void 0&&(Y=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(ae=d.unstable_transitionCallbacks),d.formState!==void 0&&(me=d.formState)),l=Nv(s,1,!0,l,d??null,p,y,w,L,Y,ae,me),l.context=Iv(null),d=l.current,p=cr(),p=wn(p),y=ms(p),y.callback=null,ps(d,y,p),d=p,l.current.lanes=d,Va(l,d),io(l),s[An]=l.current,Lg(s),new Ku(l)},Oc.version="19.1.0",Oc}var Gv;function zC(){if(Gv)return th.exports;Gv=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(r){console.error(r)}}return a(),th.exports=BC(),th.exports}var OC=zC();const FC=Rp(OC);var Fc={},qv;function UC(){if(qv)return Fc;qv=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.parse=c,Fc.serialize=g;const a=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,i=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function c(v,S){const x=new i,E=v.length;if(E<2)return x;const N=(S==null?void 0:S.decode)||f;let C=0;do{const I=v.indexOf("=",C);if(I===-1)break;const A=v.indexOf(";",C),_=A===-1?E:A;if(I>_){C=v.lastIndexOf(";",I-1)+1;continue}const k=u(v,C,I),B=m(v,I,k),z=v.slice(k,B);if(x[z]===void 0){let M=u(v,I+1,_),O=m(v,_,M);const U=N(v.slice(M,O));x[z]=U}C=_+1}while(C<E);return x}function u(v,S,x){do{const E=v.charCodeAt(S);if(E!==32&&E!==9)return S}while(++S<x);return x}function m(v,S,x){for(;S>x;){const E=v.charCodeAt(--S);if(E!==32&&E!==9)return S+1}return x}function g(v,S,x){const E=(x==null?void 0:x.encode)||encodeURIComponent;if(!a.test(v))throw new TypeError(`argument name is invalid: ${v}`);const N=E(S);if(!r.test(N))throw new TypeError(`argument val is invalid: ${S}`);let C=v+"="+N;if(!x)return C;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);C+="; Max-Age="+x.maxAge}if(x.domain){if(!t.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);C+="; Domain="+x.domain}if(x.path){if(!n.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);C+="; Path="+x.path}if(x.expires){if(!h(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);C+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(C+="; HttpOnly"),x.secure&&(C+="; Secure"),x.partitioned&&(C+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return C}function f(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function h(v){return o.call(v)==="[object Date]"}return Fc}UC();var Zv="popstate";function WC(a={}){function r(o,i){let{pathname:c="/",search:u="",hash:m=""}=Ml(o.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Zh("",{pathname:c,search:u,hash:m},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(o,i){let c=o.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let m=o.location.href,g=m.indexOf("#");u=g===-1?m:m.slice(0,g)}return u+"#"+(typeof i=="string"?i:bd(i))}function n(o,i){gr(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return HC(r,t,n,a)}function Pa(a,r){if(a===!1||a===null||typeof a>"u")throw new Error(r)}function gr(a,r){if(!a){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function jC(){return Math.random().toString(36).substring(2,10)}function Vv(a,r){return{usr:a.state,key:a.key,idx:r}}function Zh(a,r,t=null,n){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof r=="string"?Ml(r):r,state:t,key:r&&r.key||n||jC()}}function bd({pathname:a="/",search:r="",hash:t=""}){return r&&r!=="?"&&(a+=r.charAt(0)==="?"?r:"?"+r),t&&t!=="#"&&(a+=t.charAt(0)==="#"?t:"#"+t),a}function Ml(a){let r={};if(a){let t=a.indexOf("#");t>=0&&(r.hash=a.substring(t),a=a.substring(0,t));let n=a.indexOf("?");n>=0&&(r.search=a.substring(n),a=a.substring(0,n)),a&&(r.pathname=a)}return r}function HC(a,r,t,n={}){let{window:o=document.defaultView,v5Compat:i=!1}=n,c=o.history,u="POP",m=null,g=f();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function f(){return(c.state||{idx:null}).idx}function h(){u="POP";let N=f(),C=N==null?null:N-g;g=N,m&&m({action:u,location:E.location,delta:C})}function v(N,C){u="PUSH";let I=Zh(E.location,N,C);t&&t(I,N),g=f()+1;let A=Vv(I,g),_=E.createHref(I);try{c.pushState(A,"",_)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;o.location.assign(_)}i&&m&&m({action:u,location:E.location,delta:1})}function S(N,C){u="REPLACE";let I=Zh(E.location,N,C);t&&t(I,N),g=f();let A=Vv(I,g),_=E.createHref(I);c.replaceState(A,"",_),i&&m&&m({action:u,location:E.location,delta:0})}function x(N){return $C(N)}let E={get action(){return u},get location(){return a(o,c)},listen(N){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Zv,h),m=N,()=>{o.removeEventListener(Zv,h),m=null}},createHref(N){return r(o,N)},createURL:x,encodeLocation(N){let C=x(N);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:S,go(N){return c.go(N)}};return E}function $C(a,r=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Pa(t,"No window.location.(origin|href) available to create URL");let n=typeof a=="string"?a:bd(a);return n=n.replace(/ $/,"%20"),!r&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function nE(a,r,t="/"){return YC(a,r,t,!1)}function YC(a,r,t,n){let o=typeof r=="string"?Ml(r):r,i=as(o.pathname||"/",t);if(i==null)return null;let c=rE(a);GC(c);let u=null;for(let m=0;u==null&&m<c.length;++m){let g=n3(i);u=t3(c[m],g,n)}return u}function rE(a,r=[],t=[],n=""){let o=(i,c,u)=>{let m={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:c,route:i};m.relativePath.startsWith("/")&&(Pa(m.relativePath.startsWith(n),`Absolute route path "${m.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(n.length));let g=Vo([n,m.relativePath]),f=t.concat(m);i.children&&i.children.length>0&&(Pa(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),rE(i.children,r,f,g)),!(i.path==null&&!i.index)&&r.push({path:g,score:KC(g,i.index),routesMeta:f})};return a.forEach((i,c)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))o(i,c);else for(let m of oE(i.path))o(i,c,m)}),r}function oE(a){let r=a.split("/");if(r.length===0)return[];let[t,...n]=r,o=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return o?[i,""]:[i];let c=oE(n.join("/")),u=[];return u.push(...c.map(m=>m===""?i:[i,m].join("/"))),o&&u.push(...c),u.map(m=>a.startsWith("/")&&m===""?"/":m)}function GC(a){a.sort((r,t)=>r.score!==t.score?t.score-r.score:e3(r.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var qC=/^:[\w-]+$/,ZC=3,VC=2,QC=1,JC=10,XC=-2,Qv=a=>a==="*";function KC(a,r){let t=a.split("/"),n=t.length;return t.some(Qv)&&(n+=XC),r&&(n+=VC),t.filter(o=>!Qv(o)).reduce((o,i)=>o+(qC.test(i)?ZC:i===""?QC:JC),n)}function e3(a,r){return a.length===r.length&&a.slice(0,-1).every((n,o)=>n===r[o])?a[a.length-1]-r[r.length-1]:0}function t3(a,r,t=!1){let{routesMeta:n}=a,o={},i="/",c=[];for(let u=0;u<n.length;++u){let m=n[u],g=u===n.length-1,f=i==="/"?r:r.slice(i.length)||"/",h=Lm({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},f),v=m.route;if(!h&&g&&t&&!n[n.length-1].route.index&&(h=Lm({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},f)),!h)return null;Object.assign(o,h.params),c.push({params:o,pathname:Vo([i,h.pathname]),pathnameBase:l3(Vo([i,h.pathnameBase])),route:v}),h.pathnameBase!=="/"&&(i=Vo([i,h.pathnameBase]))}return c}function Lm(a,r){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[t,n]=a3(a.path,a.caseSensitive,a.end),o=r.match(t);if(!o)return null;let i=o[0],c=i.replace(/(.)\/+$/,"$1"),u=o.slice(1);return{params:n.reduce((g,{paramName:f,isOptional:h},v)=>{if(f==="*"){let x=u[v]||"";c=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const S=u[v];return h&&!S?g[f]=void 0:g[f]=(S||"").replace(/%2F/g,"/"),g},{}),pathname:i,pathnameBase:c,pattern:a}}function a3(a,r=!1,t=!0){gr(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let n=[],o="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,m)=>(n.push({paramName:u,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(n.push({paramName:"*"}),o+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":a!==""&&a!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,r?void 0:"i"),n]}function n3(a){try{return a.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return gr(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),a}}function as(a,r){if(r==="/")return a;if(!a.toLowerCase().startsWith(r.toLowerCase()))return null;let t=r.endsWith("/")?r.length-1:r.length,n=a.charAt(t);return n&&n!=="/"?null:a.slice(t)||"/"}function r3(a,r="/"){let{pathname:t,search:n="",hash:o=""}=typeof a=="string"?Ml(a):a;return{pathname:t?t.startsWith("/")?t:o3(t,r):r,search:i3(n),hash:c3(o)}}function o3(a,r){let t=r.replace(/\/+$/,"").split("/");return a.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function oh(a,r,t,n){return`Cannot include a '${a}' character in a manually specified \`to.${r}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function s3(a){return a.filter((r,t)=>t===0||r.route.path&&r.route.path.length>0)}function T0(a){let r=s3(a);return r.map((t,n)=>n===r.length-1?t.pathname:t.pathnameBase)}function P0(a,r,t,n=!1){let o;typeof a=="string"?o=Ml(a):(o={...a},Pa(!o.pathname||!o.pathname.includes("?"),oh("?","pathname","search",o)),Pa(!o.pathname||!o.pathname.includes("#"),oh("#","pathname","hash",o)),Pa(!o.search||!o.search.includes("#"),oh("#","search","hash",o)));let i=a===""||o.pathname==="",c=i?"/":o.pathname,u;if(c==null)u=t;else{let h=r.length-1;if(!n&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),h-=1;o.pathname=v.join("/")}u=h>=0?r[h]:"/"}let m=r3(o,u),g=c&&c!=="/"&&c.endsWith("/"),f=(i||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||f)&&(m.pathname+="/"),m}var Vo=a=>a.join("/").replace(/\/\/+/g,"/"),l3=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),i3=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,c3=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function d3(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}var sE=["POST","PUT","PATCH","DELETE"];new Set(sE);var u3=["GET",...sE];new Set(u3);var ji=b.createContext(null);ji.displayName="DataRouter";var Tp=b.createContext(null);Tp.displayName="DataRouterState";var lE=b.createContext({isTransitioning:!1});lE.displayName="ViewTransition";var m3=b.createContext(new Map);m3.displayName="Fetchers";var p3=b.createContext(null);p3.displayName="Await";var to=b.createContext(null);to.displayName="Navigation";var Ad=b.createContext(null);Ad.displayName="Location";var Eo=b.createContext({outlet:null,matches:[],isDataRoute:!1});Eo.displayName="Route";var L0=b.createContext(null);L0.displayName="RouteError";function f3(a,{relative:r}={}){Pa(Hi(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=b.useContext(to),{hash:o,pathname:i,search:c}=Dd(a,{relative:r}),u=i;return t!=="/"&&(u=i==="/"?t:Vo([t,i])),n.createHref({pathname:u,search:c,hash:o})}function Hi(){return b.useContext(Ad)!=null}function ao(){return Pa(Hi(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(Ad).location}var iE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cE(a){b.useContext(to).static||b.useLayoutEffect(a)}function Qn(){let{isDataRoute:a}=b.useContext(Eo);return a?N3():g3()}function g3(){Pa(Hi(),"useNavigate() may be used only in the context of a <Router> component.");let a=b.useContext(ji),{basename:r,navigator:t}=b.useContext(to),{matches:n}=b.useContext(Eo),{pathname:o}=ao(),i=JSON.stringify(T0(n)),c=b.useRef(!1);return cE(()=>{c.current=!0}),b.useCallback((m,g={})=>{if(gr(c.current,iE),!c.current)return;if(typeof m=="number"){t.go(m);return}let f=P0(m,JSON.parse(i),o,g.relative==="path");a==null&&r!=="/"&&(f.pathname=f.pathname==="/"?r:Vo([r,f.pathname])),(g.replace?t.replace:t.push)(f,g.state,g)},[r,t,i,o,a])}b.createContext(null);function Dd(a,{relative:r}={}){let{matches:t}=b.useContext(Eo),{pathname:n}=ao(),o=JSON.stringify(T0(t));return b.useMemo(()=>P0(a,JSON.parse(o),n,r==="path"),[a,o,n,r])}function h3(a,r){return dE(a,r)}function dE(a,r,t,n){var C;Pa(Hi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=b.useContext(to),{matches:i}=b.useContext(Eo),c=i[i.length-1],u=c?c.params:{},m=c?c.pathname:"/",g=c?c.pathnameBase:"/",f=c&&c.route;{let I=f&&f.path||"";uE(m,!f||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let h=ao(),v;if(r){let I=typeof r=="string"?Ml(r):r;Pa(g==="/"||((C=I.pathname)==null?void 0:C.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${I.pathname}" was given in the \`location\` prop.`),v=I}else v=h;let S=v.pathname||"/",x=S;if(g!=="/"){let I=g.replace(/^\//,"").split("/");x="/"+S.replace(/^\//,"").split("/").slice(I.length).join("/")}let E=nE(a,{pathname:x});gr(f||E!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),gr(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=E3(E&&E.map(I=>Object.assign({},I,{params:Object.assign({},u,I.params),pathname:Vo([g,o.encodeLocation?o.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?g:Vo([g,o.encodeLocation?o.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),i,t,n);return r&&N?b.createElement(Ad.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},N):N}function y3(){let a=k3(),r=d3(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),t=a instanceof Error?a.stack:null,n="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",a),c=b.createElement(b.Fragment,null,b.createElement("p",null,"💿 Hey developer 👋"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:i},"ErrorBoundary")," or"," ",b.createElement("code",{style:i},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},r),t?b.createElement("pre",{style:o},t):null,c)}var b3=b.createElement(y3,null),v3=class extends b.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,r){return r.location!==a.location||r.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:r.error,location:r.location,revalidation:a.revalidation||r.revalidation}}componentDidCatch(a,r){console.error("React Router caught the following error during render",a,r)}render(){return this.state.error!==void 0?b.createElement(Eo.Provider,{value:this.props.routeContext},b.createElement(L0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function x3({routeContext:a,match:r,children:t}){let n=b.useContext(ji);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(Eo.Provider,{value:a},t)}function E3(a,r=[],t=null,n=null){if(a==null){if(!t)return null;if(t.errors)a=t.matches;else if(r.length===0&&!t.initialized&&t.matches.length>0)a=t.matches;else return null}let o=a,i=t==null?void 0:t.errors;if(i!=null){let m=o.findIndex(g=>g.route.id&&(i==null?void 0:i[g.route.id])!==void 0);Pa(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,u=-1;if(t)for(let m=0;m<o.length;m++){let g=o[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=m),g.route.id){let{loaderData:f,errors:h}=t,v=g.route.loader&&!f.hasOwnProperty(g.route.id)&&(!h||h[g.route.id]===void 0);if(g.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((m,g,f)=>{let h,v=!1,S=null,x=null;t&&(h=i&&g.route.id?i[g.route.id]:void 0,S=g.route.errorElement||b3,c&&(u<0&&f===0?(uE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,x=null):u===f&&(v=!0,x=g.route.hydrateFallbackElement||null)));let E=r.concat(o.slice(0,f+1)),N=()=>{let C;return h?C=S:v?C=x:g.route.Component?C=b.createElement(g.route.Component,null):g.route.element?C=g.route.element:C=m,b.createElement(x3,{match:g,routeContext:{outlet:m,matches:E,isDataRoute:t!=null},children:C})};return t&&(g.route.ErrorBoundary||g.route.errorElement||f===0)?b.createElement(v3,{location:t.location,revalidation:t.revalidation,component:S,error:h,children:N(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):N()},null)}function B0(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function w3(a){let r=b.useContext(ji);return Pa(r,B0(a)),r}function S3(a){let r=b.useContext(Tp);return Pa(r,B0(a)),r}function C3(a){let r=b.useContext(Eo);return Pa(r,B0(a)),r}function z0(a){let r=C3(a),t=r.matches[r.matches.length-1];return Pa(t.route.id,`${a} can only be used on routes that contain a unique "id"`),t.route.id}function _3(){return z0("useRouteId")}function k3(){var n;let a=b.useContext(L0),r=S3("useRouteError"),t=z0("useRouteError");return a!==void 0?a:(n=r.errors)==null?void 0:n[t]}function N3(){let{router:a}=w3("useNavigate"),r=z0("useNavigate"),t=b.useRef(!1);return cE(()=>{t.current=!0}),b.useCallback(async(o,i={})=>{gr(t.current,iE),t.current&&(typeof o=="number"?a.navigate(o):await a.navigate(o,{fromRouteId:r,...i}))},[a,r])}var Jv={};function uE(a,r,t){!r&&!Jv[a]&&(Jv[a]=!0,gr(!1,t))}b.memo(I3);function I3({routes:a,future:r,state:t}){return dE(a,void 0,t,r)}function co({to:a,replace:r,state:t,relative:n}){Pa(Hi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=b.useContext(to);gr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=b.useContext(Eo),{pathname:c}=ao(),u=Qn(),m=P0(a,T0(i),c,n==="path"),g=JSON.stringify(m);return b.useEffect(()=>{u(JSON.parse(g),{replace:r,state:t,relative:n})},[u,g,n,r,t]),null}function Fa(a){Pa(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function A3({basename:a="/",children:r=null,location:t,navigationType:n="POP",navigator:o,static:i=!1}){Pa(!Hi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=a.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:o,static:i,future:{}}),[c,o,i]);typeof t=="string"&&(t=Ml(t));let{pathname:m="/",search:g="",hash:f="",state:h=null,key:v="default"}=t,S=b.useMemo(()=>{let x=as(m,c);return x==null?null:{location:{pathname:x,search:g,hash:f,state:h,key:v},navigationType:n}},[c,m,g,f,h,v,n]);return gr(S!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${f}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:b.createElement(to.Provider,{value:u},b.createElement(Ad.Provider,{children:r,value:S}))}function mE({children:a,location:r}){return h3(Vh(a),r)}function Vh(a,r=[]){let t=[];return b.Children.forEach(a,(n,o)=>{if(!b.isValidElement(n))return;let i=[...r,o];if(n.type===b.Fragment){t.push.apply(t,Vh(n.props.children,i));return}Pa(n.type===Fa,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pa(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=Vh(n.props.children,i)),t.push(c)}),t}var xm="get",Em="application/x-www-form-urlencoded";function Pp(a){return a!=null&&typeof a.tagName=="string"}function D3(a){return Pp(a)&&a.tagName.toLowerCase()==="button"}function M3(a){return Pp(a)&&a.tagName.toLowerCase()==="form"}function R3(a){return Pp(a)&&a.tagName.toLowerCase()==="input"}function T3(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function P3(a,r){return a.button===0&&(!r||r==="_self")&&!T3(a)}function Qh(a=""){return new URLSearchParams(typeof a=="string"||Array.isArray(a)||a instanceof URLSearchParams?a:Object.keys(a).reduce((r,t)=>{let n=a[t];return r.concat(Array.isArray(n)?n.map(o=>[t,o]):[[t,n]])},[]))}function L3(a,r){let t=Qh(a);return r&&r.forEach((n,o)=>{t.has(o)||r.getAll(o).forEach(i=>{t.append(o,i)})}),t}var tm=null;function B3(){if(tm===null)try{new FormData(document.createElement("form"),0),tm=!1}catch{tm=!0}return tm}var z3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sh(a){return a!=null&&!z3.has(a)?(gr(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Em}"`),null):a}function O3(a,r){let t,n,o,i,c;if(M3(a)){let u=a.getAttribute("action");n=u?as(u,r):null,t=a.getAttribute("method")||xm,o=sh(a.getAttribute("enctype"))||Em,i=new FormData(a)}else if(D3(a)||R3(a)&&(a.type==="submit"||a.type==="image")){let u=a.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=a.getAttribute("formaction")||u.getAttribute("action");if(n=m?as(m,r):null,t=a.getAttribute("formmethod")||u.getAttribute("method")||xm,o=sh(a.getAttribute("formenctype"))||sh(u.getAttribute("enctype"))||Em,i=new FormData(u,a),!B3()){let{name:g,type:f,value:h}=a;if(f==="image"){let v=g?`${g}.`:"";i.append(`${v}x`,"0"),i.append(`${v}y`,"0")}else g&&i.append(g,h)}}else{if(Pp(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=xm,n=null,o=Em,c=a}return i&&o==="text/plain"&&(c=i,i=void 0),{action:n,method:t.toLowerCase(),encType:o,formData:i,body:c}}function O0(a,r){if(a===!1||a===null||typeof a>"u")throw new Error(r)}async function F3(a,r){if(a.id in r)return r[a.id];try{let t=await import(a.module);return r[a.id]=t,t}catch(t){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function U3(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function W3(a,r,t){let n=await Promise.all(a.map(async o=>{let i=r.routes[o.route.id];if(i){let c=await F3(i,t);return c.links?c.links():[]}return[]}));return Y3(n.flat(1).filter(U3).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Xv(a,r,t,n,o,i){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,u=(m,g)=>{var f;return t[g].pathname!==m.pathname||((f=t[g].route.path)==null?void 0:f.endsWith("*"))&&t[g].params["*"]!==m.params["*"]};return i==="assets"?r.filter((m,g)=>c(m,g)||u(m,g)):i==="data"?r.filter((m,g)=>{var h;let f=n.routes[m.route.id];if(!f||!f.hasLoader)return!1;if(c(m,g)||u(m,g))return!0;if(m.route.shouldRevalidate){let v=m.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((h=t[0])==null?void 0:h.params)||{},nextUrl:new URL(a,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function j3(a,r,{includeHydrateFallback:t}={}){return H3(a.map(n=>{let o=r.routes[n.route.id];if(!o)return[];let i=[o.module];return o.clientActionModule&&(i=i.concat(o.clientActionModule)),o.clientLoaderModule&&(i=i.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(i=i.concat(o.hydrateFallbackModule)),o.imports&&(i=i.concat(o.imports)),i}).flat(1))}function H3(a){return[...new Set(a)]}function $3(a){let r={},t=Object.keys(a).sort();for(let n of t)r[n]=a[n];return r}function Y3(a,r){let t=new Set;return new Set(r),a.reduce((n,o)=>{let i=JSON.stringify($3(o));return t.has(i)||(t.add(i),n.push({key:i,link:o})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var G3=new Set([100,101,204,205]);function q3(a,r){let t=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return t.pathname==="/"?t.pathname="_root.data":r&&as(t.pathname,r)==="/"?t.pathname=`${r.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function pE(){let a=b.useContext(ji);return O0(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function Z3(){let a=b.useContext(Tp);return O0(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var F0=b.createContext(void 0);F0.displayName="FrameworkContext";function fE(){let a=b.useContext(F0);return O0(a,"You must render this element inside a <HydratedRouter> element"),a}function V3(a,r){let t=b.useContext(F0),[n,o]=b.useState(!1),[i,c]=b.useState(!1),{onFocus:u,onBlur:m,onMouseEnter:g,onMouseLeave:f,onTouchStart:h}=r,v=b.useRef(null);b.useEffect(()=>{if(a==="render"&&c(!0),a==="viewport"){let E=C=>{C.forEach(I=>{c(I.isIntersecting)})},N=new IntersectionObserver(E,{threshold:.5});return v.current&&N.observe(v.current),()=>{N.disconnect()}}},[a]),b.useEffect(()=>{if(n){let E=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(E)}}},[n]);let S=()=>{o(!0)},x=()=>{o(!1),c(!1)};return t?a!=="intent"?[i,v,{}]:[i,v,{onFocus:Uc(u,S),onBlur:Uc(m,x),onMouseEnter:Uc(g,S),onMouseLeave:Uc(f,x),onTouchStart:Uc(h,S)}]:[!1,v,{}]}function Uc(a,r){return t=>{a&&a(t),t.defaultPrevented||r(t)}}function Q3({page:a,...r}){let{router:t}=pE(),n=b.useMemo(()=>nE(t.routes,a,t.basename),[t.routes,a,t.basename]);return n?b.createElement(X3,{page:a,matches:n,...r}):null}function J3(a){let{manifest:r,routeModules:t}=fE(),[n,o]=b.useState([]);return b.useEffect(()=>{let i=!1;return W3(a,r,t).then(c=>{i||o(c)}),()=>{i=!0}},[a,r,t]),n}function X3({page:a,matches:r,...t}){let n=ao(),{manifest:o,routeModules:i}=fE(),{basename:c}=pE(),{loaderData:u,matches:m}=Z3(),g=b.useMemo(()=>Xv(a,r,m,o,n,"data"),[a,r,m,o,n]),f=b.useMemo(()=>Xv(a,r,m,o,n,"assets"),[a,r,m,o,n]),h=b.useMemo(()=>{if(a===n.pathname+n.search+n.hash)return[];let x=new Set,E=!1;if(r.forEach(C=>{var A;let I=o.routes[C.route.id];!I||!I.hasLoader||(!g.some(_=>_.route.id===C.route.id)&&C.route.id in u&&((A=i[C.route.id])!=null&&A.shouldRevalidate)||I.hasClientLoader?E=!0:x.add(C.route.id))}),x.size===0)return[];let N=q3(a,c);return E&&x.size>0&&N.searchParams.set("_routes",r.filter(C=>x.has(C.route.id)).map(C=>C.route.id).join(",")),[N.pathname+N.search]},[c,u,n,o,g,r,a,i]),v=b.useMemo(()=>j3(f,o),[f,o]),S=J3(f);return b.createElement(b.Fragment,null,h.map(x=>b.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),v.map(x=>b.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),S.map(({key:x,link:E})=>b.createElement("link",{key:x,...E})))}function K3(...a){return r=>{a.forEach(t=>{typeof t=="function"?t(r):t!=null&&(t.current=r)})}}var gE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gE&&(window.__reactRouterVersion="7.6.1")}catch{}function hE({basename:a,children:r,window:t}){let n=b.useRef();n.current==null&&(n.current=WC({window:t,v5Compat:!0}));let o=n.current,[i,c]=b.useState({action:o.action,location:o.location}),u=b.useCallback(m=>{b.startTransition(()=>c(m))},[c]);return b.useLayoutEffect(()=>o.listen(u),[o,u]),b.createElement(A3,{basename:a,children:r,location:i.location,navigationType:i.action,navigator:o})}var yE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bE=b.forwardRef(function({onClick:r,discover:t="render",prefetch:n="none",relative:o,reloadDocument:i,replace:c,state:u,target:m,to:g,preventScrollReset:f,viewTransition:h,...v},S){let{basename:x}=b.useContext(to),E=typeof g=="string"&&yE.test(g),N,C=!1;if(typeof g=="string"&&E&&(N=g,gE))try{let O=new URL(window.location.href),U=g.startsWith("//")?new URL(O.protocol+g):new URL(g),Z=as(U.pathname,x);U.origin===O.origin&&Z!=null?g=Z+U.search+U.hash:C=!0}catch{gr(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let I=f3(g,{relative:o}),[A,_,k]=V3(n,v),B=n4(g,{replace:c,state:u,target:m,preventScrollReset:f,relative:o,viewTransition:h});function z(O){r&&r(O),O.defaultPrevented||B(O)}let M=b.createElement("a",{...v,...k,href:N||I,onClick:C||i?r:z,ref:K3(S,_),target:m,"data-discover":!E&&t==="render"?"true":void 0});return A&&!E?b.createElement(b.Fragment,null,M,b.createElement(Q3,{page:I})):M});bE.displayName="Link";var e4=b.forwardRef(function({"aria-current":r="page",caseSensitive:t=!1,className:n="",end:o=!1,style:i,to:c,viewTransition:u,children:m,...g},f){let h=Dd(c,{relative:g.relative}),v=ao(),S=b.useContext(Tp),{navigator:x,basename:E}=b.useContext(to),N=S!=null&&i4(h)&&u===!0,C=x.encodeLocation?x.encodeLocation(h).pathname:h.pathname,I=v.pathname,A=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(I=I.toLowerCase(),A=A?A.toLowerCase():null,C=C.toLowerCase()),A&&E&&(A=as(A,E)||A);const _=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let k=I===C||!o&&I.startsWith(C)&&I.charAt(_)==="/",B=A!=null&&(A===C||!o&&A.startsWith(C)&&A.charAt(C.length)==="/"),z={isActive:k,isPending:B,isTransitioning:N},M=k?r:void 0,O;typeof n=="function"?O=n(z):O=[n,k?"active":null,B?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let U=typeof i=="function"?i(z):i;return b.createElement(bE,{...g,"aria-current":M,className:O,ref:f,style:U,to:c,viewTransition:u},typeof m=="function"?m(z):m)});e4.displayName="NavLink";var t4=b.forwardRef(({discover:a="render",fetcherKey:r,navigate:t,reloadDocument:n,replace:o,state:i,method:c=xm,action:u,onSubmit:m,relative:g,preventScrollReset:f,viewTransition:h,...v},S)=>{let x=s4(),E=l4(u,{relative:g}),N=c.toLowerCase()==="get"?"get":"post",C=typeof u=="string"&&yE.test(u),I=A=>{if(m&&m(A),A.defaultPrevented)return;A.preventDefault();let _=A.nativeEvent.submitter,k=(_==null?void 0:_.getAttribute("formmethod"))||c;x(_||A.currentTarget,{fetcherKey:r,method:k,navigate:t,replace:o,state:i,relative:g,preventScrollReset:f,viewTransition:h})};return b.createElement("form",{ref:S,method:N,action:E,onSubmit:n?m:I,...v,"data-discover":!C&&a==="render"?"true":void 0})});t4.displayName="Form";function a4(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vE(a){let r=b.useContext(ji);return Pa(r,a4(a)),r}function n4(a,{target:r,replace:t,state:n,preventScrollReset:o,relative:i,viewTransition:c}={}){let u=Qn(),m=ao(),g=Dd(a,{relative:i});return b.useCallback(f=>{if(P3(f,r)){f.preventDefault();let h=t!==void 0?t:bd(m)===bd(g);u(a,{replace:h,state:n,preventScrollReset:o,relative:i,viewTransition:c})}},[m,u,g,t,n,r,a,o,i,c])}function U0(a){gr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=b.useRef(Qh(a)),t=b.useRef(!1),n=ao(),o=b.useMemo(()=>L3(n.search,t.current?null:r.current),[n.search]),i=Qn(),c=b.useCallback((u,m)=>{const g=Qh(typeof u=="function"?u(o):u);t.current=!0,i("?"+g,m)},[i,o]);return[o,c]}var r4=0,o4=()=>`__${String(++r4)}__`;function s4(){let{router:a}=vE("useSubmit"),{basename:r}=b.useContext(to),t=_3();return b.useCallback(async(n,o={})=>{let{action:i,method:c,encType:u,formData:m,body:g}=O3(n,r);if(o.navigate===!1){let f=o.fetcherKey||o4();await a.fetch(f,t,o.action||i,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||c,formEncType:o.encType||u,flushSync:o.flushSync})}else await a.navigate(o.action||i,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||c,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[a,r,t])}function l4(a,{relative:r}={}){let{basename:t}=b.useContext(to),n=b.useContext(Eo);Pa(n,"useFormAction must be used inside a RouteContext");let[o]=n.matches.slice(-1),i={...Dd(a||".",{relative:r})},c=ao();if(a==null){i.search=c.search;let u=new URLSearchParams(i.search),m=u.getAll("index");if(m.some(f=>f==="")){u.delete("index"),m.filter(h=>h).forEach(h=>u.append("index",h));let f=u.toString();i.search=f?`?${f}`:""}}return(!a||a===".")&&o.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:Vo([t,i.pathname])),bd(i)}function i4(a,r={}){let t=b.useContext(lE);Pa(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=vE("useViewTransitionState"),o=Dd(a,{relative:r.relative});if(!t.isTransitioning)return!1;let i=as(t.currentLocation.pathname,n)||t.currentLocation.pathname,c=as(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Lm(o.pathname,c)!=null||Lm(o.pathname,i)!=null}[...G3];var Lp=aE();const Md=Rp(Lp);function Bp({gameType:a,size:r=22}){const t={"8 Ball":{emoji:"🎱"},"9 Ball":{color:"#FFD700",number:9},"10 Ball":{color:"#2196F3",number:10}};if(a==="8 Ball")return e.createElement("span",{role:"img","aria-label":"8-ball",style:{fontSize:r,verticalAlign:"middle",marginRight:4}},t["8 Ball"].emoji);const{color:n,number:o}=t[a]||{};return!n||!o?null:e.createElement("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:r,height:r,borderRadius:"50%",background:n,color:"#222",fontWeight:"bold",fontSize:r*.65,border:"2px solid #fff",boxShadow:"0 1px 2px #0003",marginRight:4,verticalAlign:"middle"},"aria-label":`${o}-ball`},o)}function Bt({open:a,onClose:r,children:t,title:n="Modal",maxWidth:o="500px",className:i=""}){const[c,u]=b.useState({x:0,y:0}),[m,g]=b.useState(!1),f=b.useRef({x:0,y:0});b.useEffect(()=>{a&&u({x:0,y:0})},[a]);const h=x=>{g(!0),f.current={x:x.clientX-c.x,y:x.clientY-c.y},document.body.style.userSelect="none"},v=x=>{m&&u({x:x.clientX-f.current.x,y:x.clientY-f.current.y})},S=()=>{g(!1),document.body.style.userSelect=""};return b.useEffect(()=>(m?(window.addEventListener("mousemove",v),window.addEventListener("mouseup",S)):(window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",S)),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",S)}),[m]),a?e.createElement("div",{className:"modal-overlay",onClick:r,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)"}},e.createElement("div",{className:`draggable-modal ${i}`,style:{transform:`translate(${c.x}px, ${c.y}px)`,cursor:m?"grabbing":"default",background:"linear-gradient(120deg, #232323 80%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:window.innerWidth<=400?"0":"1.2rem",boxShadow:"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",width:window.innerWidth<=400?"100vw":o,maxWidth:window.innerWidth<=400?"100vw":o,minWidth:0,margin:"0 auto",animation:"modalBounceIn 0.5s cubic-bezier(.21,1.02,.73,1.01)",padding:0,position:"relative",fontFamily:"inherit",boxSizing:"border-box",height:window.innerWidth<=500?"75vh":"auto",maxHeight:window.innerWidth<=500?"75vh":"65vh",display:"flex",flexDirection:"column"},onClick:x=>x.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":n,tabIndex:-1},e.createElement("div",{className:"modal-header",onMouseDown:h,style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#e53e3e",padding:"0.05rem .05rem 0.05rem .05rem",borderTopLeftRadius:"1.2rem",borderTopRightRadius:"1.2rem",position:"relative",cursor:"grab",userSelect:"none",gap:"1rem"}},e.createElement("span",{className:"modal-accent-bar",style:{position:"absolute",left:0,top:0,width:"100%",height:"5px",background:"linear-gradient(90deg, #fff0 0%, #e53e3e 60%, #fff0 100%)",borderTopLeftRadius:"1.2rem",borderTopRightRadius:"1.2rem",pointerEvents:"none"}}),e.createElement("h2",{className:"modal-title",style:{margin:0,fontSize:window.innerWidth<=500?"1rem":"1.1rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.02em",color:"#fff",textShadow:"0 1px 12px #000a",zIndex:2,flex:1,wordBreak:"break-word",minWidth:0}},n),e.createElement("button",{className:"modal-close-btn",onClick:r,"aria-label":"Close",style:{background:"none",border:"none",color:"#fff",fontSize:"2em",fontWeight:"bold",cursor:"pointer",zIndex:10,lineHeight:1,transition:"color 0.2s, transform 0.2s",padding:0,marginLeft:"1rem"},onMouseEnter:x=>{x.target.style.color="#ffd6d6",x.target.style.transform="scale(1.2) rotate(10deg)"},onMouseLeave:x=>{x.target.style.color="#fff",x.target.style.transform="scale(1) rotate(0deg)"}},"×")),e.createElement("div",{className:"modal-content",style:{...window.innerWidth<=500?{flex:"1 1 auto",minHeight:0,overflowY:"auto"}:{overflowY:"auto"},padding:window.innerWidth<=500?"1rem 1rem 0.8rem 1rem":"1.4rem 1.5rem 1.2rem 1.5rem",background:"none"}},t)),e.createElement("style",{jsx:!0},`
        @keyframes modalBounceIn {
          0% { opacity: 0; transform: scale(0.95) translateY(-40px);}
          70% { opacity: 1; transform: scale(1.02) translateY(8px);}
          100% { opacity: 1; transform: scale(1) translateY(0);}
        }
        
        @media (max-width: 500px) {
          .draggable-modal {
            max-width: 99vw !important;
            border-radius: 0.7rem !important;
          }
          .modal-header {
            padding: 0.7rem 0.7rem 0.5rem 0.7rem !important;
          }
          .modal-content {
            padding: 1rem 0.6rem 0.8rem 0.6rem !important;
          }
        }
        /* Custom scrollbar for modal-content */
        .modal-content::-webkit-scrollbar {
          width: 10px;
        }
        .modal-content::-webkit-scrollbar-thumb {
          background: #e53e3e;
          border-radius: 6px;
        }
        .modal-content::-webkit-scrollbar-track {
          background: #232323;
          border-radius: 6px;
        }
        .modal-content {
          scrollbar-width: thin;
          scrollbar-color: #e53e3e #232323;
        }
      `)):null}function c4(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-"),m=new Date(parseInt(i),parseInt(c)-1,parseInt(u)),g=String(m.getMonth()+1).padStart(2,"0"),f=String(m.getDate()).padStart(2,"0"),h=m.getFullYear();return`${g}-${f}-${h}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}function xE({open:a,message:r,gameType:t,raceLength:n,day:o,date:i,time:c,location:u,proposalNote:m,confirmationNote:g,phase:f,onClose:h}){if(!a)return null;const v=typeof window<"u"&&window.innerWidth<=500,S=v?"100%":"240px",x=v?"90vw":"240px",E=v?"100%":"220px";return e.createElement(Bt,{open:a,onClose:h,title:"Proposal Sent!",maxWidth:x,width:S},e.createElement("div",{style:{textAlign:"center"}},e.createElement("div",{style:{background:"#222",color:"#fff",borderRadius:6,padding:"0.6rem 0.7rem 0.6rem 0.7rem",margin:"0 auto 0.7rem auto",fontWeight:600,fontSize:"0.97rem",textAlign:"center",maxWidth:"220px",width:"100%",wordBreak:"break-word",whiteSpace:"pre-line"}},r),e.createElement("div",{style:{background:"#f8f8f8",color:"#222",borderRadius:8,padding:v?"0.4rem 0.2rem":"0.5rem 0.5rem",margin:"0.7rem auto 0.7rem auto",textAlign:"center",fontSize:v?"0.92rem":"0.95rem",border:"1px solid #ff0000",maxWidth:E,width:"100%"}},e.createElement("div",{style:{marginBottom:6}},e.createElement("strong",null,"Phase:")," ",f==="scheduled"?"Phase 1 (Scheduled)":f==="challenge"?"Phase 2 (challenge)":f),e.createElement("div",{style:{marginBottom:6}},e.createElement("strong",null,"Game Type:")," ",e.createElement(Bp,{gameType:t,size:16})," ",t),e.createElement("div",{style:{marginBottom:6}},e.createElement("strong",null,"Race to:")," ",n),e.createElement("div",{style:{marginBottom:6}},e.createElement("strong",null,"Day:")," ",o),e.createElement("div",{style:{marginBottom:6}},e.createElement("strong",null,"Date:")," ",c4(i)),e.createElement("div",{style:{marginBottom:6}},e.createElement("strong",null,"Time:")," ",c),e.createElement("div",{style:{marginBottom:6}},e.createElement("strong",null,"Location:")," ",u),m&&e.createElement("div",{style:{marginTop:12,padding:"0.5rem 0.7rem",background:"#fffbe6",borderLeft:"3px solid #ffb300",borderRadius:4,color:"#a36c00",fontSize:"0.97rem"}},e.createElement("strong",null,"Opponent's note:")," ",m),g&&e.createElement("div",{style:{marginTop:10,padding:"0.5rem 0.7rem",background:"#e6fff0",borderLeft:"3px solid #00b36b",borderRadius:4,color:"#006b3c",fontSize:"0.97rem"}},e.createElement("strong",null,"Your note:")," ",g)),e.createElement("button",{style:{marginTop:"1.8rem",background:"#ff0000",color:"#fff",border:"none",borderRadius:"8px",padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer"},onClick:h},"Close")))}function EE(a){var r,t,n="";if(typeof a=="string"||typeof a=="number")n+=a;else if(typeof a=="object")if(Array.isArray(a)){var o=a.length;for(r=0;r<o;r++)a[r]&&(t=EE(a[r]))&&(n&&(n+=" "),n+=t)}else for(t in a)a[t]&&(n&&(n+=" "),n+=t);return n}function In(){for(var a,r,t=0,n="",o=arguments.length;t<o;t++)(a=arguments[t])&&(r=EE(a))&&(n&&(n+=" "),n+=r);return n}const wE=6048e5,d4=864e5,zp=6e4,Rd=36e5,u4=1e3,Kv=Symbol.for("constructDateFrom");function ca(a,r){return typeof a=="function"?a(r):a&&typeof a=="object"&&Kv in a?a[Kv](r):a instanceof Date?new a.constructor(r):new Date(r)}function st(a,r){return ca(r||a,a)}function Kr(a,r,t){const n=st(a,t==null?void 0:t.in);return isNaN(r)?ca((t==null?void 0:t.in)||a,NaN):(r&&n.setDate(n.getDate()+r),n)}function eo(a,r,t){const n=st(a,t==null?void 0:t.in);if(isNaN(r))return ca(a,NaN);if(!r)return n;const o=n.getDate(),i=ca(a,n.getTime());i.setMonth(n.getMonth()+r+1,0);const c=i.getDate();return o>=c?i:(n.setFullYear(i.getFullYear(),i.getMonth(),o),n)}function SE(a,r,t){return ca(a,+st(a)+r)}function m4(a,r,t){return SE(a,r*Rd)}let p4={};function Rl(){return p4}function ns(a,r){var u,m,g,f;const t=Rl(),n=(r==null?void 0:r.weekStartsOn)??((m=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:m.weekStartsOn)??t.weekStartsOn??((f=(g=t.locale)==null?void 0:g.options)==null?void 0:f.weekStartsOn)??0,o=st(a,r==null?void 0:r.in),i=o.getDay(),c=(i<n?7:0)+i-n;return o.setDate(o.getDate()-c),o.setHours(0,0,0,0),o}function Di(a,r){return ns(a,{...r,weekStartsOn:1})}function CE(a,r){const t=st(a,r==null?void 0:r.in),n=t.getFullYear(),o=ca(t,0);o.setFullYear(n+1,0,4),o.setHours(0,0,0,0);const i=Di(o),c=ca(t,0);c.setFullYear(n,0,4),c.setHours(0,0,0,0);const u=Di(c);return t.getTime()>=i.getTime()?n+1:t.getTime()>=u.getTime()?n:n-1}function Bm(a){const r=st(a),t=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return t.setUTCFullYear(r.getFullYear()),+a-+t}function wo(a,...r){const t=ca.bind(null,r.find(n=>typeof n=="object"));return r.map(t)}function _l(a,r){const t=st(a,r==null?void 0:r.in);return t.setHours(0,0,0,0),t}function Mi(a,r,t){const[n,o]=wo(t==null?void 0:t.in,a,r),i=_l(n),c=_l(o),u=+i-Bm(i),m=+c-Bm(c);return Math.round((u-m)/d4)}function f4(a,r){const t=CE(a,r),n=ca(a,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Di(n)}function Jh(a,r,t){const n=st(a,t==null?void 0:t.in);return n.setTime(n.getTime()+r*zp),n}function W0(a,r,t){return eo(a,r*3,t)}function g4(a,r,t){return SE(a,r*1e3)}function zm(a,r,t){return Kr(a,r*7,t)}function Qo(a,r,t){return eo(a,r*12,t)}function e2(a,r){let t,n=r==null?void 0:r.in;return a.forEach(o=>{!n&&typeof o=="object"&&(n=ca.bind(null,o));const i=st(o,n);(!t||t<i||isNaN(+i))&&(t=i)}),ca(n,t||NaN)}function t2(a,r){let t,n=r==null?void 0:r.in;return a.forEach(o=>{!n&&typeof o=="object"&&(n=ca.bind(null,o));const i=st(o,n);(!t||t>i||isNaN(+i))&&(t=i)}),ca(n,t||NaN)}function h4(a,r,t){const[n,o]=wo(t==null?void 0:t.in,a,r);return+_l(n)==+_l(o)}function Jo(a){return a instanceof Date||typeof a=="object"&&Object.prototype.toString.call(a)==="[object Date]"}function Om(a){return!(!Jo(a)&&typeof a!="number"||isNaN(+st(a)))}function Fm(a,r,t){const[n,o]=wo(t==null?void 0:t.in,a,r),i=n.getFullYear()-o.getFullYear(),c=n.getMonth()-o.getMonth();return i*12+c}function El(a,r){const t=st(a,r==null?void 0:r.in);return Math.trunc(t.getMonth()/3)+1}function Um(a,r,t){const[n,o]=wo(t==null?void 0:t.in,a,r),i=n.getFullYear()-o.getFullYear(),c=El(n)-El(o);return i*4+c}function Wm(a,r,t){const[n,o]=wo(t==null?void 0:t.in,a,r);return n.getFullYear()-o.getFullYear()}function _E(a,r,t){const[n,o]=wo(t==null?void 0:t.in,a,r),i=a2(n,o),c=Math.abs(Mi(n,o));n.setDate(n.getDate()-i*c);const u=+(a2(n,o)===-i),m=i*(c-u);return m===0?0:m}function a2(a,r){const t=a.getFullYear()-r.getFullYear()||a.getMonth()-r.getMonth()||a.getDate()-r.getDate()||a.getHours()-r.getHours()||a.getMinutes()-r.getMinutes()||a.getSeconds()-r.getSeconds()||a.getMilliseconds()-r.getMilliseconds();return t<0?-1:t>0?1:t}function y4(a){return r=>{const t=Math.trunc,n=t(r);return n===0?0:n}}function b4(a,r,t){const[n,o]=wo(t==null?void 0:t.in,a,r),i=(+n-+o)/Rd;return y4()(i)}function kE(a,r){const t=st(a,r==null?void 0:r.in);return t.setHours(23,59,59,999),t}function NE(a,r){const t=st(a,r==null?void 0:r.in),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Xh(a,r){const t=st(a,r==null?void 0:r.in),n=t.getMonth(),o=n-n%3;return t.setMonth(o,1),t.setHours(0,0,0,0),t}function IE(a,r){const t=st(a,r==null?void 0:r.in);return t.setDate(1),t.setHours(0,0,0,0),t}function AE(a,r){const t=st(a,r==null?void 0:r.in),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function Op(a,r){const t=st(a,r==null?void 0:r.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function v4(a,r){var u,m;const t=Rl(),n=t.weekStartsOn??((m=(u=t.locale)==null?void 0:u.options)==null?void 0:m.weekStartsOn)??0,o=st(a,r==null?void 0:r.in),i=o.getDay(),c=(i<n?-7:0)+6-(i-n);return o.setDate(o.getDate()+c),o.setHours(23,59,59,999),o}const x4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},E4=(a,r,t)=>{let n;const o=x4[a];return typeof o=="string"?n=o:r===1?n=o.one:n=o.other.replace("{{count}}",r.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function lh(a){return(r={})=>{const t=r.width?String(r.width):a.defaultWidth;return a.formats[t]||a.formats[a.defaultWidth]}}const w4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},S4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},C4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_4={date:lh({formats:w4,defaultWidth:"full"}),time:lh({formats:S4,defaultWidth:"full"}),dateTime:lh({formats:C4,defaultWidth:"full"})},k4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},N4=(a,r,t,n)=>k4[a];function Wc(a){return(r,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let o;if(n==="formatting"&&a.formattingValues){const c=a.defaultFormattingWidth||a.defaultWidth,u=t!=null&&t.width?String(t.width):c;o=a.formattingValues[u]||a.formattingValues[c]}else{const c=a.defaultWidth,u=t!=null&&t.width?String(t.width):a.defaultWidth;o=a.values[u]||a.values[c]}const i=a.argumentCallback?a.argumentCallback(r):r;return o[i]}}const I4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},A4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},D4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},M4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},R4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},T4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},P4=(a,r)=>{const t=Number(a),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},L4={ordinalNumber:P4,era:Wc({values:I4,defaultWidth:"wide"}),quarter:Wc({values:A4,defaultWidth:"wide",argumentCallback:a=>a-1}),month:Wc({values:D4,defaultWidth:"wide"}),day:Wc({values:M4,defaultWidth:"wide"}),dayPeriod:Wc({values:R4,defaultWidth:"wide",formattingValues:T4,defaultFormattingWidth:"wide"})};function jc(a){return(r,t={})=>{const n=t.width,o=n&&a.matchPatterns[n]||a.matchPatterns[a.defaultMatchWidth],i=r.match(o);if(!i)return null;const c=i[0],u=n&&a.parsePatterns[n]||a.parsePatterns[a.defaultParseWidth],m=Array.isArray(u)?z4(u,h=>h.test(c)):B4(u,h=>h.test(c));let g;g=a.valueCallback?a.valueCallback(m):m,g=t.valueCallback?t.valueCallback(g):g;const f=r.slice(c.length);return{value:g,rest:f}}}function B4(a,r){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t)&&r(a[t]))return t}function z4(a,r){for(let t=0;t<a.length;t++)if(r(a[t]))return t}function O4(a){return(r,t={})=>{const n=r.match(a.matchPattern);if(!n)return null;const o=n[0],i=r.match(a.parsePattern);if(!i)return null;let c=a.valueCallback?a.valueCallback(i[0]):i[0];c=t.valueCallback?t.valueCallback(c):c;const u=r.slice(o.length);return{value:c,rest:u}}}const F4=/^(\d+)(th|st|nd|rd)?/i,U4=/\d+/i,W4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},j4={any:[/^b/i,/^(a|c)/i]},H4={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},$4={any:[/1/i,/2/i,/3/i,/4/i]},Y4={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},G4={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},q4={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Z4={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},V4={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Q4={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},J4={ordinalNumber:O4({matchPattern:F4,parsePattern:U4,valueCallback:a=>parseInt(a,10)}),era:jc({matchPatterns:W4,defaultMatchWidth:"wide",parsePatterns:j4,defaultParseWidth:"any"}),quarter:jc({matchPatterns:H4,defaultMatchWidth:"wide",parsePatterns:$4,defaultParseWidth:"any",valueCallback:a=>a+1}),month:jc({matchPatterns:Y4,defaultMatchWidth:"wide",parsePatterns:G4,defaultParseWidth:"any"}),day:jc({matchPatterns:q4,defaultMatchWidth:"wide",parsePatterns:Z4,defaultParseWidth:"any"}),dayPeriod:jc({matchPatterns:V4,defaultMatchWidth:"any",parsePatterns:Q4,defaultParseWidth:"any"})},DE={code:"en-US",formatDistance:E4,formatLong:_4,formatRelative:N4,localize:L4,match:J4,options:{weekStartsOn:0,firstWeekContainsDate:1}};function X4(a,r){const t=st(a,r==null?void 0:r.in);return Mi(t,Op(t))+1}function j0(a,r){const t=st(a,r==null?void 0:r.in),n=+Di(t)-+f4(t);return Math.round(n/wE)+1}function H0(a,r){var f,h,v,S;const t=st(a,r==null?void 0:r.in),n=t.getFullYear(),o=Rl(),i=(r==null?void 0:r.firstWeekContainsDate)??((h=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??o.firstWeekContainsDate??((S=(v=o.locale)==null?void 0:v.options)==null?void 0:S.firstWeekContainsDate)??1,c=ca((r==null?void 0:r.in)||a,0);c.setFullYear(n+1,0,i),c.setHours(0,0,0,0);const u=ns(c,r),m=ca((r==null?void 0:r.in)||a,0);m.setFullYear(n,0,i),m.setHours(0,0,0,0);const g=ns(m,r);return+t>=+u?n+1:+t>=+g?n:n-1}function K4(a,r){var u,m,g,f;const t=Rl(),n=(r==null?void 0:r.firstWeekContainsDate)??((m=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??t.firstWeekContainsDate??((f=(g=t.locale)==null?void 0:g.options)==null?void 0:f.firstWeekContainsDate)??1,o=H0(a,r),i=ca((r==null?void 0:r.in)||a,0);return i.setFullYear(o,0,n),i.setHours(0,0,0,0),ns(i,r)}function ME(a,r){const t=st(a,r==null?void 0:r.in),n=+ns(t,r)-+K4(t,r);return Math.round(n/wE)+1}function la(a,r){const t=a<0?"-":"",n=Math.abs(a).toString().padStart(r,"0");return t+n}const Ms={y(a,r){const t=a.getFullYear(),n=t>0?t:1-t;return la(r==="yy"?n%100:n,r.length)},M(a,r){const t=a.getMonth();return r==="M"?String(t+1):la(t+1,2)},d(a,r){return la(a.getDate(),r.length)},a(a,r){const t=a.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(a,r){return la(a.getHours()%12||12,r.length)},H(a,r){return la(a.getHours(),r.length)},m(a,r){return la(a.getMinutes(),r.length)},s(a,r){return la(a.getSeconds(),r.length)},S(a,r){const t=r.length,n=a.getMilliseconds(),o=Math.trunc(n*Math.pow(10,t-3));return la(o,r.length)}},fi={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},n2={G:function(a,r,t){const n=a.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(a,r,t){if(r==="yo"){const n=a.getFullYear(),o=n>0?n:1-n;return t.ordinalNumber(o,{unit:"year"})}return Ms.y(a,r)},Y:function(a,r,t,n){const o=H0(a,n),i=o>0?o:1-o;if(r==="YY"){const c=i%100;return la(c,2)}return r==="Yo"?t.ordinalNumber(i,{unit:"year"}):la(i,r.length)},R:function(a,r){const t=CE(a);return la(t,r.length)},u:function(a,r){const t=a.getFullYear();return la(t,r.length)},Q:function(a,r,t){const n=Math.ceil((a.getMonth()+1)/3);switch(r){case"Q":return String(n);case"QQ":return la(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(a,r,t){const n=Math.ceil((a.getMonth()+1)/3);switch(r){case"q":return String(n);case"qq":return la(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(a,r,t){const n=a.getMonth();switch(r){case"M":case"MM":return Ms.M(a,r);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(a,r,t){const n=a.getMonth();switch(r){case"L":return String(n+1);case"LL":return la(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(a,r,t,n){const o=ME(a,n);return r==="wo"?t.ordinalNumber(o,{unit:"week"}):la(o,r.length)},I:function(a,r,t){const n=j0(a);return r==="Io"?t.ordinalNumber(n,{unit:"week"}):la(n,r.length)},d:function(a,r,t){return r==="do"?t.ordinalNumber(a.getDate(),{unit:"date"}):Ms.d(a,r)},D:function(a,r,t){const n=X4(a);return r==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):la(n,r.length)},E:function(a,r,t){const n=a.getDay();switch(r){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(a,r,t,n){const o=a.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(r){case"e":return String(i);case"ee":return la(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(o,{width:"short",context:"formatting"});case"eeee":default:return t.day(o,{width:"wide",context:"formatting"})}},c:function(a,r,t,n){const o=a.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(r){case"c":return String(i);case"cc":return la(i,r.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(o,{width:"narrow",context:"standalone"});case"cccccc":return t.day(o,{width:"short",context:"standalone"});case"cccc":default:return t.day(o,{width:"wide",context:"standalone"})}},i:function(a,r,t){const n=a.getDay(),o=n===0?7:n;switch(r){case"i":return String(o);case"ii":return la(o,r.length);case"io":return t.ordinalNumber(o,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(a,r,t){const o=a.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(a,r,t){const n=a.getHours();let o;switch(n===12?o=fi.noon:n===0?o=fi.midnight:o=n/12>=1?"pm":"am",r){case"b":case"bb":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(a,r,t){const n=a.getHours();let o;switch(n>=17?o=fi.evening:n>=12?o=fi.afternoon:n>=4?o=fi.morning:o=fi.night,r){case"B":case"BB":case"BBB":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(a,r,t){if(r==="ho"){let n=a.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return Ms.h(a,r)},H:function(a,r,t){return r==="Ho"?t.ordinalNumber(a.getHours(),{unit:"hour"}):Ms.H(a,r)},K:function(a,r,t){const n=a.getHours()%12;return r==="Ko"?t.ordinalNumber(n,{unit:"hour"}):la(n,r.length)},k:function(a,r,t){let n=a.getHours();return n===0&&(n=24),r==="ko"?t.ordinalNumber(n,{unit:"hour"}):la(n,r.length)},m:function(a,r,t){return r==="mo"?t.ordinalNumber(a.getMinutes(),{unit:"minute"}):Ms.m(a,r)},s:function(a,r,t){return r==="so"?t.ordinalNumber(a.getSeconds(),{unit:"second"}):Ms.s(a,r)},S:function(a,r){return Ms.S(a,r)},X:function(a,r,t){const n=a.getTimezoneOffset();if(n===0)return"Z";switch(r){case"X":return o2(n);case"XXXX":case"XX":return pl(n);case"XXXXX":case"XXX":default:return pl(n,":")}},x:function(a,r,t){const n=a.getTimezoneOffset();switch(r){case"x":return o2(n);case"xxxx":case"xx":return pl(n);case"xxxxx":case"xxx":default:return pl(n,":")}},O:function(a,r,t){const n=a.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+r2(n,":");case"OOOO":default:return"GMT"+pl(n,":")}},z:function(a,r,t){const n=a.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+r2(n,":");case"zzzz":default:return"GMT"+pl(n,":")}},t:function(a,r,t){const n=Math.trunc(+a/1e3);return la(n,r.length)},T:function(a,r,t){return la(+a,r.length)}};function r2(a,r=""){const t=a>0?"-":"+",n=Math.abs(a),o=Math.trunc(n/60),i=n%60;return i===0?t+String(o):t+String(o)+r+la(i,2)}function o2(a,r){return a%60===0?(a>0?"-":"+")+la(Math.abs(a)/60,2):pl(a,r)}function pl(a,r=""){const t=a>0?"-":"+",n=Math.abs(a),o=la(Math.trunc(n/60),2),i=la(n%60,2);return t+o+r+i}const s2=(a,r)=>{switch(a){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},RE=(a,r)=>{switch(a){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},e_=(a,r)=>{const t=a.match(/(P+)(p+)?/)||[],n=t[1],o=t[2];if(!o)return s2(a,r);let i;switch(n){case"P":i=r.dateTime({width:"short"});break;case"PP":i=r.dateTime({width:"medium"});break;case"PPP":i=r.dateTime({width:"long"});break;case"PPPP":default:i=r.dateTime({width:"full"});break}return i.replace("{{date}}",s2(n,r)).replace("{{time}}",RE(o,r))},Kh={p:RE,P:e_},t_=/^D+$/,a_=/^Y+$/,n_=["D","DD","YY","YYYY"];function r_(a){return t_.test(a)}function o_(a){return a_.test(a)}function s_(a,r,t){const n=l_(a,r,t);if(console.warn(n),n_.includes(a))throw new RangeError(n)}function l_(a,r,t){const n=a[0]==="Y"?"years":"days of the month";return`Use \`${a.toLowerCase()}\` instead of \`${a}\` (in \`${r}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const i_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,c_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,d_=/^'([^]*?)'?$/,u_=/''/g,m_=/[a-zA-Z]/;function Hn(a,r,t){var f,h,v,S,x,E,N,C;const n=Rl(),o=(t==null?void 0:t.locale)??n.locale??DE,i=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((S=(v=n.locale)==null?void 0:v.options)==null?void 0:S.firstWeekContainsDate)??1,c=(t==null?void 0:t.weekStartsOn)??((E=(x=t==null?void 0:t.locale)==null?void 0:x.options)==null?void 0:E.weekStartsOn)??n.weekStartsOn??((C=(N=n.locale)==null?void 0:N.options)==null?void 0:C.weekStartsOn)??0,u=st(a,t==null?void 0:t.in);if(!Om(u))throw new RangeError("Invalid time value");let m=r.match(c_).map(I=>{const A=I[0];if(A==="p"||A==="P"){const _=Kh[A];return _(I,o.formatLong)}return I}).join("").match(i_).map(I=>{if(I==="''")return{isToken:!1,value:"'"};const A=I[0];if(A==="'")return{isToken:!1,value:p_(I)};if(n2[A])return{isToken:!0,value:I};if(A.match(m_))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");return{isToken:!1,value:I}});o.localize.preprocessor&&(m=o.localize.preprocessor(u,m));const g={firstWeekContainsDate:i,weekStartsOn:c,locale:o};return m.map(I=>{if(!I.isToken)return I.value;const A=I.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&o_(A)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&r_(A))&&s_(A,r,String(a));const _=n2[A[0]];return _(u,A,o.localize,g)}).join("")}function p_(a){const r=a.match(d_);return r?r[1].replace(u_,"'"):a}function l2(a,r){return st(a,r==null?void 0:r.in).getDate()}function f_(a,r){return st(a,r==null?void 0:r.in).getDay()}function g_(a,r){const t=st(a,r==null?void 0:r.in),n=t.getFullYear(),o=t.getMonth(),i=ca(t,0);return i.setFullYear(n,o+1,0),i.setHours(0,0,0,0),i.getDate()}function h_(){return Object.assign({},Rl())}function Xo(a,r){return st(a,r==null?void 0:r.in).getHours()}function y_(a,r){const t=st(a,r==null?void 0:r.in).getDay();return t===0?7:t}function Ko(a,r){return st(a,r==null?void 0:r.in).getMinutes()}function On(a,r){return st(a,r==null?void 0:r.in).getMonth()}function js(a){return st(a).getSeconds()}function e0(a){return+st(a)}function Lt(a,r){return st(a,r==null?void 0:r.in).getFullYear()}function rs(a,r){return+st(a)>+st(r)}function kl(a,r){return+st(a)<+st(r)}function b_(a,r){return+st(a)==+st(r)}function v_(a,r){const t=x_(r)?new r(0):ca(r,0);return t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),t.setHours(a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()),t}function x_(a){var r;return typeof a=="function"&&((r=a.prototype)==null?void 0:r.constructor)===a}const E_=10;class TE{constructor(){Xe(this,"subPriority",0)}validate(r,t){return!0}}class w_ extends TE{constructor(r,t,n,o,i){super(),this.value=r,this.validateValue=t,this.setValue=n,this.priority=o,i&&(this.subPriority=i)}validate(r,t){return this.validateValue(r,this.value,t)}set(r,t,n){return this.setValue(r,t,this.value,n)}}class S_ extends TE{constructor(t,n){super();Xe(this,"priority",E_);Xe(this,"subPriority",-1);this.context=t||(o=>ca(n,o))}set(t,n){return n.timestampIsSet?t:ca(t,v_(t,this.context))}}class ea{run(r,t,n,o){const i=this.parse(r,t,n,o);return i?{setter:new w_(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(r,t,n){return!0}}class C_ extends ea{constructor(){super(...arguments);Xe(this,"priority",140);Xe(this,"incompatibleTokens",["R","u","t","T"])}parse(t,n,o){switch(n){case"G":case"GG":case"GGG":return o.era(t,{width:"abbreviated"})||o.era(t,{width:"narrow"});case"GGGGG":return o.era(t,{width:"narrow"});case"GGGG":default:return o.era(t,{width:"wide"})||o.era(t,{width:"abbreviated"})||o.era(t,{width:"narrow"})}}set(t,n,o){return n.era=o,t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}}const an={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},go={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function nn(a,r){return a&&{value:r(a.value),rest:a.rest}}function Ua(a,r){const t=r.match(a);return t?{value:parseInt(t[0],10),rest:r.slice(t[0].length)}:null}function ho(a,r){const t=r.match(a);if(!t)return null;if(t[0]==="Z")return{value:0,rest:r.slice(1)};const n=t[1]==="+"?1:-1,o=t[2]?parseInt(t[2],10):0,i=t[3]?parseInt(t[3],10):0,c=t[5]?parseInt(t[5],10):0;return{value:n*(o*Rd+i*zp+c*u4),rest:r.slice(t[0].length)}}function PE(a){return Ua(an.anyDigitsSigned,a)}function Za(a,r){switch(a){case 1:return Ua(an.singleDigit,r);case 2:return Ua(an.twoDigits,r);case 3:return Ua(an.threeDigits,r);case 4:return Ua(an.fourDigits,r);default:return Ua(new RegExp("^\\d{1,"+a+"}"),r)}}function jm(a,r){switch(a){case 1:return Ua(an.singleDigitSigned,r);case 2:return Ua(an.twoDigitsSigned,r);case 3:return Ua(an.threeDigitsSigned,r);case 4:return Ua(an.fourDigitsSigned,r);default:return Ua(new RegExp("^-?\\d{1,"+a+"}"),r)}}function $0(a){switch(a){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function LE(a,r){const t=r>0,n=t?r:1-r;let o;if(n<=50)o=a||100;else{const i=n+50,c=Math.trunc(i/100)*100,u=a>=i%100;o=a+c-(u?100:0)}return t?o:1-o}function BE(a){return a%400===0||a%4===0&&a%100!==0}class __ extends ea{constructor(){super(...arguments);Xe(this,"priority",130);Xe(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,n,o){const i=c=>({year:c,isTwoDigitYear:n==="yy"});switch(n){case"y":return nn(Za(4,t),i);case"yo":return nn(o.ordinalNumber(t,{unit:"year"}),i);default:return nn(Za(n.length,t),i)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,o){const i=t.getFullYear();if(o.isTwoDigitYear){const u=LE(o.year,i);return t.setFullYear(u,0,1),t.setHours(0,0,0,0),t}const c=!("era"in n)||n.era===1?o.year:1-o.year;return t.setFullYear(c,0,1),t.setHours(0,0,0,0),t}}class k_ extends ea{constructor(){super(...arguments);Xe(this,"priority",130);Xe(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,n,o){const i=c=>({year:c,isTwoDigitYear:n==="YY"});switch(n){case"Y":return nn(Za(4,t),i);case"Yo":return nn(o.ordinalNumber(t,{unit:"year"}),i);default:return nn(Za(n.length,t),i)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,o,i){const c=H0(t,i);if(o.isTwoDigitYear){const m=LE(o.year,c);return t.setFullYear(m,0,i.firstWeekContainsDate),t.setHours(0,0,0,0),ns(t,i)}const u=!("era"in n)||n.era===1?o.year:1-o.year;return t.setFullYear(u,0,i.firstWeekContainsDate),t.setHours(0,0,0,0),ns(t,i)}}class N_ extends ea{constructor(){super(...arguments);Xe(this,"priority",130);Xe(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,n){return jm(n==="R"?4:n.length,t)}set(t,n,o){const i=ca(t,0);return i.setFullYear(o,0,4),i.setHours(0,0,0,0),Di(i)}}class I_ extends ea{constructor(){super(...arguments);Xe(this,"priority",130);Xe(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,n){return jm(n==="u"?4:n.length,t)}set(t,n,o){return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}}class A_ extends ea{constructor(){super(...arguments);Xe(this,"priority",120);Xe(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,n,o){switch(n){case"Q":case"QQ":return Za(n.length,t);case"Qo":return o.ordinalNumber(t,{unit:"quarter"});case"QQQ":return o.quarter(t,{width:"abbreviated",context:"formatting"})||o.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(t,{width:"wide",context:"formatting"})||o.quarter(t,{width:"abbreviated",context:"formatting"})||o.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=1&&n<=4}set(t,n,o){return t.setMonth((o-1)*3,1),t.setHours(0,0,0,0),t}}class D_ extends ea{constructor(){super(...arguments);Xe(this,"priority",120);Xe(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,n,o){switch(n){case"q":case"qq":return Za(n.length,t);case"qo":return o.ordinalNumber(t,{unit:"quarter"});case"qqq":return o.quarter(t,{width:"abbreviated",context:"standalone"})||o.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(t,{width:"wide",context:"standalone"})||o.quarter(t,{width:"abbreviated",context:"standalone"})||o.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=1&&n<=4}set(t,n,o){return t.setMonth((o-1)*3,1),t.setHours(0,0,0,0),t}}class M_ extends ea{constructor(){super(...arguments);Xe(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Xe(this,"priority",110)}parse(t,n,o){const i=c=>c-1;switch(n){case"M":return nn(Ua(an.month,t),i);case"MM":return nn(Za(2,t),i);case"Mo":return nn(o.ordinalNumber(t,{unit:"month"}),i);case"MMM":return o.month(t,{width:"abbreviated",context:"formatting"})||o.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(t,{width:"wide",context:"formatting"})||o.month(t,{width:"abbreviated",context:"formatting"})||o.month(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=11}set(t,n,o){return t.setMonth(o,1),t.setHours(0,0,0,0),t}}class R_ extends ea{constructor(){super(...arguments);Xe(this,"priority",110);Xe(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,n,o){const i=c=>c-1;switch(n){case"L":return nn(Ua(an.month,t),i);case"LL":return nn(Za(2,t),i);case"Lo":return nn(o.ordinalNumber(t,{unit:"month"}),i);case"LLL":return o.month(t,{width:"abbreviated",context:"standalone"})||o.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(t,{width:"wide",context:"standalone"})||o.month(t,{width:"abbreviated",context:"standalone"})||o.month(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=11}set(t,n,o){return t.setMonth(o,1),t.setHours(0,0,0,0),t}}function T_(a,r,t){const n=st(a,t==null?void 0:t.in),o=ME(n,t)-r;return n.setDate(n.getDate()-o*7),st(n,t==null?void 0:t.in)}class P_ extends ea{constructor(){super(...arguments);Xe(this,"priority",100);Xe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,n,o){switch(n){case"w":return Ua(an.week,t);case"wo":return o.ordinalNumber(t,{unit:"week"});default:return Za(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,o,i){return ns(T_(t,o,i),i)}}function L_(a,r,t){const n=st(a,t==null?void 0:t.in),o=j0(n,t)-r;return n.setDate(n.getDate()-o*7),n}class B_ extends ea{constructor(){super(...arguments);Xe(this,"priority",100);Xe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,n,o){switch(n){case"I":return Ua(an.week,t);case"Io":return o.ordinalNumber(t,{unit:"week"});default:return Za(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,o){return Di(L_(t,o))}}const z_=[31,28,31,30,31,30,31,31,30,31,30,31],O_=[31,29,31,30,31,30,31,31,30,31,30,31];class F_ extends ea{constructor(){super(...arguments);Xe(this,"priority",90);Xe(this,"subPriority",1);Xe(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,n,o){switch(n){case"d":return Ua(an.date,t);case"do":return o.ordinalNumber(t,{unit:"date"});default:return Za(n.length,t)}}validate(t,n){const o=t.getFullYear(),i=BE(o),c=t.getMonth();return i?n>=1&&n<=O_[c]:n>=1&&n<=z_[c]}set(t,n,o){return t.setDate(o),t.setHours(0,0,0,0),t}}class U_ extends ea{constructor(){super(...arguments);Xe(this,"priority",90);Xe(this,"subpriority",1);Xe(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,n,o){switch(n){case"D":case"DD":return Ua(an.dayOfYear,t);case"Do":return o.ordinalNumber(t,{unit:"date"});default:return Za(n.length,t)}}validate(t,n){const o=t.getFullYear();return BE(o)?n>=1&&n<=366:n>=1&&n<=365}set(t,n,o){return t.setMonth(0,o),t.setHours(0,0,0,0),t}}function Y0(a,r,t){var h,v,S,x;const n=Rl(),o=(t==null?void 0:t.weekStartsOn)??((v=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:v.weekStartsOn)??n.weekStartsOn??((x=(S=n.locale)==null?void 0:S.options)==null?void 0:x.weekStartsOn)??0,i=st(a,t==null?void 0:t.in),c=i.getDay(),m=(r%7+7)%7,g=7-o,f=r<0||r>6?r-(c+g)%7:(m+g)%7-(c+g)%7;return Kr(i,f,t)}class W_ extends ea{constructor(){super(...arguments);Xe(this,"priority",90);Xe(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,n,o){switch(n){case"E":case"EE":case"EEE":return o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(t,{width:"wide",context:"formatting"})||o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,o,i){return t=Y0(t,o,i),t.setHours(0,0,0,0),t}}class j_ extends ea{constructor(){super(...arguments);Xe(this,"priority",90);Xe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,n,o,i){const c=u=>{const m=Math.floor((u-1)/7)*7;return(u+i.weekStartsOn+6)%7+m};switch(n){case"e":case"ee":return nn(Za(n.length,t),c);case"eo":return nn(o.ordinalNumber(t,{unit:"day"}),c);case"eee":return o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"});case"eeeee":return o.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(t,{width:"wide",context:"formatting"})||o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,o,i){return t=Y0(t,o,i),t.setHours(0,0,0,0),t}}class H_ extends ea{constructor(){super(...arguments);Xe(this,"priority",90);Xe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,n,o,i){const c=u=>{const m=Math.floor((u-1)/7)*7;return(u+i.weekStartsOn+6)%7+m};switch(n){case"c":case"cc":return nn(Za(n.length,t),c);case"co":return nn(o.ordinalNumber(t,{unit:"day"}),c);case"ccc":return o.day(t,{width:"abbreviated",context:"standalone"})||o.day(t,{width:"short",context:"standalone"})||o.day(t,{width:"narrow",context:"standalone"});case"ccccc":return o.day(t,{width:"narrow",context:"standalone"});case"cccccc":return o.day(t,{width:"short",context:"standalone"})||o.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(t,{width:"wide",context:"standalone"})||o.day(t,{width:"abbreviated",context:"standalone"})||o.day(t,{width:"short",context:"standalone"})||o.day(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=6}set(t,n,o,i){return t=Y0(t,o,i),t.setHours(0,0,0,0),t}}function $_(a,r,t){const n=st(a,t==null?void 0:t.in),o=y_(n,t),i=r-o;return Kr(n,i,t)}class Y_ extends ea{constructor(){super(...arguments);Xe(this,"priority",90);Xe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,n,o){const i=c=>c===0?7:c;switch(n){case"i":case"ii":return Za(n.length,t);case"io":return o.ordinalNumber(t,{unit:"day"});case"iii":return nn(o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"}),i);case"iiiii":return nn(o.day(t,{width:"narrow",context:"formatting"}),i);case"iiiiii":return nn(o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"}),i);case"iiii":default:return nn(o.day(t,{width:"wide",context:"formatting"})||o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"}),i)}}validate(t,n){return n>=1&&n<=7}set(t,n,o){return t=$_(t,o),t.setHours(0,0,0,0),t}}class G_ extends ea{constructor(){super(...arguments);Xe(this,"priority",80);Xe(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,n,o){switch(n){case"a":case"aa":case"aaa":return o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(t,{width:"wide",context:"formatting"})||o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,o){return t.setHours($0(o),0,0,0),t}}class q_ extends ea{constructor(){super(...arguments);Xe(this,"priority",80);Xe(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,n,o){switch(n){case"b":case"bb":case"bbb":return o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(t,{width:"wide",context:"formatting"})||o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,o){return t.setHours($0(o),0,0,0),t}}class Z_ extends ea{constructor(){super(...arguments);Xe(this,"priority",80);Xe(this,"incompatibleTokens",["a","b","t","T"])}parse(t,n,o){switch(n){case"B":case"BB":case"BBB":return o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(t,{width:"wide",context:"formatting"})||o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,o){return t.setHours($0(o),0,0,0),t}}class V_ extends ea{constructor(){super(...arguments);Xe(this,"priority",70);Xe(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,n,o){switch(n){case"h":return Ua(an.hour12h,t);case"ho":return o.ordinalNumber(t,{unit:"hour"});default:return Za(n.length,t)}}validate(t,n){return n>=1&&n<=12}set(t,n,o){const i=t.getHours()>=12;return i&&o<12?t.setHours(o+12,0,0,0):!i&&o===12?t.setHours(0,0,0,0):t.setHours(o,0,0,0),t}}class Q_ extends ea{constructor(){super(...arguments);Xe(this,"priority",70);Xe(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,n,o){switch(n){case"H":return Ua(an.hour23h,t);case"Ho":return o.ordinalNumber(t,{unit:"hour"});default:return Za(n.length,t)}}validate(t,n){return n>=0&&n<=23}set(t,n,o){return t.setHours(o,0,0,0),t}}class J_ extends ea{constructor(){super(...arguments);Xe(this,"priority",70);Xe(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,n,o){switch(n){case"K":return Ua(an.hour11h,t);case"Ko":return o.ordinalNumber(t,{unit:"hour"});default:return Za(n.length,t)}}validate(t,n){return n>=0&&n<=11}set(t,n,o){return t.getHours()>=12&&o<12?t.setHours(o+12,0,0,0):t.setHours(o,0,0,0),t}}class X_ extends ea{constructor(){super(...arguments);Xe(this,"priority",70);Xe(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,n,o){switch(n){case"k":return Ua(an.hour24h,t);case"ko":return o.ordinalNumber(t,{unit:"hour"});default:return Za(n.length,t)}}validate(t,n){return n>=1&&n<=24}set(t,n,o){const i=o<=24?o%24:o;return t.setHours(i,0,0,0),t}}class K_ extends ea{constructor(){super(...arguments);Xe(this,"priority",60);Xe(this,"incompatibleTokens",["t","T"])}parse(t,n,o){switch(n){case"m":return Ua(an.minute,t);case"mo":return o.ordinalNumber(t,{unit:"minute"});default:return Za(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,o){return t.setMinutes(o,0,0),t}}class ek extends ea{constructor(){super(...arguments);Xe(this,"priority",50);Xe(this,"incompatibleTokens",["t","T"])}parse(t,n,o){switch(n){case"s":return Ua(an.second,t);case"so":return o.ordinalNumber(t,{unit:"second"});default:return Za(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,o){return t.setSeconds(o,0),t}}class tk extends ea{constructor(){super(...arguments);Xe(this,"priority",30);Xe(this,"incompatibleTokens",["t","T"])}parse(t,n){const o=i=>Math.trunc(i*Math.pow(10,-n.length+3));return nn(Za(n.length,t),o)}set(t,n,o){return t.setMilliseconds(o),t}}class ak extends ea{constructor(){super(...arguments);Xe(this,"priority",10);Xe(this,"incompatibleTokens",["t","T","x"])}parse(t,n){switch(n){case"X":return ho(go.basicOptionalMinutes,t);case"XX":return ho(go.basic,t);case"XXXX":return ho(go.basicOptionalSeconds,t);case"XXXXX":return ho(go.extendedOptionalSeconds,t);case"XXX":default:return ho(go.extended,t)}}set(t,n,o){return n.timestampIsSet?t:ca(t,t.getTime()-Bm(t)-o)}}class nk extends ea{constructor(){super(...arguments);Xe(this,"priority",10);Xe(this,"incompatibleTokens",["t","T","X"])}parse(t,n){switch(n){case"x":return ho(go.basicOptionalMinutes,t);case"xx":return ho(go.basic,t);case"xxxx":return ho(go.basicOptionalSeconds,t);case"xxxxx":return ho(go.extendedOptionalSeconds,t);case"xxx":default:return ho(go.extended,t)}}set(t,n,o){return n.timestampIsSet?t:ca(t,t.getTime()-Bm(t)-o)}}class rk extends ea{constructor(){super(...arguments);Xe(this,"priority",40);Xe(this,"incompatibleTokens","*")}parse(t){return PE(t)}set(t,n,o){return[ca(t,o*1e3),{timestampIsSet:!0}]}}class ok extends ea{constructor(){super(...arguments);Xe(this,"priority",20);Xe(this,"incompatibleTokens","*")}parse(t){return PE(t)}set(t,n,o){return[ca(t,o),{timestampIsSet:!0}]}}const sk={G:new C_,y:new __,Y:new k_,R:new N_,u:new I_,Q:new A_,q:new D_,M:new M_,L:new R_,w:new P_,I:new B_,d:new F_,D:new U_,E:new W_,e:new j_,c:new H_,i:new Y_,a:new G_,b:new q_,B:new Z_,h:new V_,H:new Q_,K:new J_,k:new X_,m:new K_,s:new ek,S:new tk,X:new ak,x:new nk,t:new rk,T:new ok},lk=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ik=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ck=/^'([^]*?)'?$/,dk=/''/g,uk=/\S/,mk=/[a-zA-Z]/;function pk(a,r,t,n){var N,C,I,A,_,k,B,z;const o=()=>ca((n==null?void 0:n.in)||t,NaN),i=h_(),c=(n==null?void 0:n.locale)??i.locale??DE,u=(n==null?void 0:n.firstWeekContainsDate)??((C=(N=n==null?void 0:n.locale)==null?void 0:N.options)==null?void 0:C.firstWeekContainsDate)??i.firstWeekContainsDate??((A=(I=i.locale)==null?void 0:I.options)==null?void 0:A.firstWeekContainsDate)??1,m=(n==null?void 0:n.weekStartsOn)??((k=(_=n==null?void 0:n.locale)==null?void 0:_.options)==null?void 0:k.weekStartsOn)??i.weekStartsOn??((z=(B=i.locale)==null?void 0:B.options)==null?void 0:z.weekStartsOn)??0;if(!r)return a?o():st(t,n==null?void 0:n.in);const g={firstWeekContainsDate:u,weekStartsOn:m,locale:c},f=[new S_(n==null?void 0:n.in,t)],h=r.match(ik).map(M=>{const O=M[0];if(O in Kh){const U=Kh[O];return U(M,c.formatLong)}return M}).join("").match(lk),v=[];for(let M of h){const O=M[0],U=sk[O];if(U){const{incompatibleTokens:Z}=U;if(Array.isArray(Z)){const V=v.find(F=>Z.includes(F.token)||F.token===O);if(V)throw new RangeError(`The format string mustn't contain \`${V.fullToken}\` and \`${M}\` at the same time`)}else if(U.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${M}\` and any other token at the same time`);v.push({token:O,fullToken:M});const H=U.run(a,M,c.match,g);if(!H)return o();f.push(H.setter),a=H.rest}else{if(O.match(mk))throw new RangeError("Format string contains an unescaped latin alphabet character `"+O+"`");if(M==="''"?M="'":O==="'"&&(M=fk(M)),a.indexOf(M)===0)a=a.slice(M.length);else return o()}}if(a.length>0&&uk.test(a))return o();const S=f.map(M=>M.priority).sort((M,O)=>O-M).filter((M,O,U)=>U.indexOf(M)===O).map(M=>f.filter(O=>O.priority===M).sort((O,U)=>U.subPriority-O.subPriority)).map(M=>M[0]);let x=st(t,n==null?void 0:n.in);if(isNaN(+x))return o();const E={};for(const M of S){if(!M.validate(x,g))return o();const O=M.set(x,E,g);Array.isArray(O)?(x=O[0],Object.assign(E,O[1])):x=O}return x}function fk(a){return a.match(ck)[1].replace(dk,"'")}function gk(a,r,t){const[n,o]=wo(t==null?void 0:t.in,a,r);return n.getFullYear()===o.getFullYear()&&n.getMonth()===o.getMonth()}function hk(a,r,t){const[n,o]=wo(t==null?void 0:t.in,a,r);return+Xh(n)==+Xh(o)}function yk(a,r,t){const[n,o]=wo(t==null?void 0:t.in,a,r);return n.getFullYear()===o.getFullYear()}function vd(a,r,t){const n=+st(a,t==null?void 0:t.in),[o,i]=[+st(r.start,t==null?void 0:t.in),+st(r.end,t==null?void 0:t.in)].sort((c,u)=>c-u);return n>=o&&n<=i}function bk(a,r,t){return Kr(a,-1,t)}function zE(a,r){const t=()=>ca(r==null?void 0:r.in,NaN),o=wk(a);let i;if(o.date){const g=Sk(o.date,2);i=Ck(g.restDateString,g.year)}if(!i||isNaN(+i))return t();const c=+i;let u=0,m;if(o.time&&(u=_k(o.time),isNaN(u)))return t();if(o.timezone){if(m=kk(o.timezone),isNaN(m))return t()}else{const g=new Date(c+u),f=st(0,r==null?void 0:r.in);return f.setFullYear(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()),f.setHours(g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds()),f}return st(c+u+m,r==null?void 0:r.in)}const am={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},vk=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,xk=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ek=/^([+-])(\d{2})(?::?(\d{2}))?$/;function wk(a){const r={},t=a.split(am.dateTimeDelimiter);let n;if(t.length>2)return r;if(/:/.test(t[0])?n=t[0]:(r.date=t[0],n=t[1],am.timeZoneDelimiter.test(r.date)&&(r.date=a.split(am.timeZoneDelimiter)[0],n=a.substr(r.date.length,a.length))),n){const o=am.timezone.exec(n);o?(r.time=n.replace(o[1],""),r.timezone=o[1]):r.time=n}return r}function Sk(a,r){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+r)+"})|(\\d{2}|[+-]\\d{"+(2+r)+"})$)"),n=a.match(t);if(!n)return{year:NaN,restDateString:""};const o=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?o:i*100,restDateString:a.slice((n[1]||n[2]).length)}}function Ck(a,r){if(r===null)return new Date(NaN);const t=a.match(vk);if(!t)return new Date(NaN);const n=!!t[4],o=Hc(t[1]),i=Hc(t[2])-1,c=Hc(t[3]),u=Hc(t[4]),m=Hc(t[5])-1;if(n)return Mk(r,u,m)?Nk(r,u,m):new Date(NaN);{const g=new Date(0);return!Ak(r,i,c)||!Dk(r,o)?new Date(NaN):(g.setUTCFullYear(r,i,Math.max(o,c)),g)}}function Hc(a){return a?parseInt(a):1}function _k(a){const r=a.match(xk);if(!r)return NaN;const t=ih(r[1]),n=ih(r[2]),o=ih(r[3]);return Rk(t,n,o)?t*Rd+n*zp+o*1e3:NaN}function ih(a){return a&&parseFloat(a.replace(",","."))||0}function kk(a){if(a==="Z")return 0;const r=a.match(Ek);if(!r)return 0;const t=r[1]==="+"?-1:1,n=parseInt(r[2]),o=r[3]&&parseInt(r[3])||0;return Tk(n,o)?t*(n*Rd+o*zp):NaN}function Nk(a,r,t){const n=new Date(0);n.setUTCFullYear(a,0,4);const o=n.getUTCDay()||7,i=(r-1)*7+t+1-o;return n.setUTCDate(n.getUTCDate()+i),n}const Ik=[31,null,31,30,31,30,31,31,30,31,30,31];function OE(a){return a%400===0||a%4===0&&a%100!==0}function Ak(a,r,t){return r>=0&&r<=11&&t>=1&&t<=(Ik[r]||(OE(a)?29:28))}function Dk(a,r){return r>=1&&r<=(OE(a)?366:365)}function Mk(a,r,t){return r>=1&&r<=53&&t>=0&&t<=6}function Rk(a,r,t){return a===24?r===0&&t===0:t>=0&&t<60&&r>=0&&r<60&&a>=0&&a<25}function Tk(a,r){return r>=0&&r<=59}function Pr(a,r,t){const n=st(a,t==null?void 0:t.in),o=n.getFullYear(),i=n.getDate(),c=ca(a,0);c.setFullYear(o,r,15),c.setHours(0,0,0,0);const u=g_(c);return n.setMonth(r,Math.min(i,u)),n}function wm(a,r,t){const n=st(a,t==null?void 0:t.in);return n.setHours(r),n}function Sm(a,r,t){const n=st(a,t==null?void 0:t.in);return n.setMinutes(r),n}function yi(a,r,t){const n=st(a,t==null?void 0:t.in),o=Math.trunc(n.getMonth()/3)+1,i=r-o;return Pr(n,n.getMonth()+i*3)}function Cm(a,r,t){const n=st(a,t==null?void 0:t.in);return n.setSeconds(r),n}function po(a,r,t){const n=st(a,t==null?void 0:t.in);return isNaN(+n)?ca(a,NaN):(n.setFullYear(r),n)}function wl(a,r,t){return eo(a,-r,t)}function FE(a,r,t){return W0(a,-1,t)}function i2(a,r,t){return zm(a,-1,t)}function Ri(a,r,t){return Qo(a,-r,t)}function Fp(){return typeof window<"u"}function $i(a){return UE(a)?(a.nodeName||"").toLowerCase():"#document"}function fr(a){var r;return(a==null||(r=a.ownerDocument)==null?void 0:r.defaultView)||window}function So(a){var r;return(r=(UE(a)?a.ownerDocument:a.document)||window.document)==null?void 0:r.documentElement}function UE(a){return Fp()?a instanceof Node||a instanceof fr(a).Node:!1}function $n(a){return Fp()?a instanceof Element||a instanceof fr(a).Element:!1}function xo(a){return Fp()?a instanceof HTMLElement||a instanceof fr(a).HTMLElement:!1}function c2(a){return!Fp()||typeof ShadowRoot>"u"?!1:a instanceof ShadowRoot||a instanceof fr(a).ShadowRoot}function Td(a){const{overflow:r,overflowX:t,overflowY:n,display:o}=Fr(a);return/auto|scroll|overlay|hidden|clip/.test(r+n+t)&&!["inline","contents"].includes(o)}function Pk(a){return["table","td","th"].includes($i(a))}function Up(a){return[":popover-open",":modal"].some(r=>{try{return a.matches(r)}catch{return!1}})}function G0(a){const r=q0(),t=$n(a)?Fr(a):a;return["transform","translate","scale","rotate","perspective"].some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!r&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!r&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function Lk(a){let r=Ys(a);for(;xo(r)&&!Ti(r);){if(G0(r))return r;if(Up(r))return null;r=Ys(r)}return null}function q0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ti(a){return["html","body","#document"].includes($i(a))}function Fr(a){return fr(a).getComputedStyle(a)}function Wp(a){return $n(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.scrollX,scrollTop:a.scrollY}}function Ys(a){if($i(a)==="html")return a;const r=a.assignedSlot||a.parentNode||c2(a)&&a.host||So(a);return c2(r)?r.host:r}function WE(a){const r=Ys(a);return Ti(r)?a.ownerDocument?a.ownerDocument.body:a.body:xo(r)&&Td(r)?r:WE(r)}function xd(a,r,t){var n;r===void 0&&(r=[]),t===void 0&&(t=!0);const o=WE(a),i=o===((n=a.ownerDocument)==null?void 0:n.body),c=fr(o);if(i){const u=t0(c);return r.concat(c,c.visualViewport||[],Td(o)?o:[],u&&t?xd(u):[])}return r.concat(o,xd(o,[],t))}function t0(a){return a.parent&&Object.getPrototypeOf(a.parent)?a.frameElement:null}const Pi=Math.min,Sl=Math.max,Hm=Math.round,nm=Math.floor,vo=a=>({x:a,y:a}),Bk={left:"right",right:"left",bottom:"top",top:"bottom"},zk={start:"end",end:"start"};function Ok(a,r,t){return Sl(a,Pi(r,t))}function jp(a,r){return typeof a=="function"?a(r):a}function Li(a){return a.split("-")[0]}function Pd(a){return a.split("-")[1]}function Fk(a){return a==="x"?"y":"x"}function Z0(a){return a==="y"?"height":"width"}function wi(a){return["top","bottom"].includes(Li(a))?"y":"x"}function V0(a){return Fk(wi(a))}function Uk(a,r,t){t===void 0&&(t=!1);const n=Pd(a),o=V0(a),i=Z0(o);let c=o==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return r.reference[i]>r.floating[i]&&(c=$m(c)),[c,$m(c)]}function Wk(a){const r=$m(a);return[a0(a),r,a0(r)]}function a0(a){return a.replace(/start|end/g,r=>zk[r])}function jk(a,r,t){const n=["left","right"],o=["right","left"],i=["top","bottom"],c=["bottom","top"];switch(a){case"top":case"bottom":return t?r?o:n:r?n:o;case"left":case"right":return r?i:c;default:return[]}}function Hk(a,r,t,n){const o=Pd(a);let i=jk(Li(a),t==="start",n);return o&&(i=i.map(c=>c+"-"+o),r&&(i=i.concat(i.map(a0)))),i}function $m(a){return a.replace(/left|right|bottom|top/g,r=>Bk[r])}function $k(a){return{top:0,right:0,bottom:0,left:0,...a}}function jE(a){return typeof a!="number"?$k(a):{top:a,right:a,bottom:a,left:a}}function Ym(a){const{x:r,y:t,width:n,height:o}=a;return{width:n,height:o,top:t,left:r,right:r+n,bottom:t+o,x:r,y:t}}var Gm=typeof document<"u"?b.useLayoutEffect:b.useEffect;const Yk={...tE},Gk=Yk.useInsertionEffect,qk=Gk||(a=>a());function Zk(a){const r=b.useRef(()=>{});return qk(()=>{r.current=a}),b.useCallback(function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return r.current==null?void 0:r.current(...n)},[])}var ch={exports:{}},$c={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d2;function Vk(){if(d2)return $c;d2=1;var a=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function t(n,o,i){var c=null;if(i!==void 0&&(c=""+i),o.key!==void 0&&(c=""+o.key),"key"in o){i={};for(var u in o)u!=="key"&&(i[u]=o[u])}else i=o;return o=i.ref,{$$typeof:a,type:n,key:c,ref:o!==void 0?o:null,props:i}}return $c.Fragment=r,$c.jsx=t,$c.jsxs=t,$c}var u2;function Qk(){return u2||(u2=1,ch.exports=Vk()),ch.exports}var Yc=Qk();function m2(a,r,t){let{reference:n,floating:o}=a;const i=wi(r),c=V0(r),u=Z0(c),m=Li(r),g=i==="y",f=n.x+n.width/2-o.width/2,h=n.y+n.height/2-o.height/2,v=n[u]/2-o[u]/2;let S;switch(m){case"top":S={x:f,y:n.y-o.height};break;case"bottom":S={x:f,y:n.y+n.height};break;case"right":S={x:n.x+n.width,y:h};break;case"left":S={x:n.x-o.width,y:h};break;default:S={x:n.x,y:n.y}}switch(Pd(r)){case"start":S[c]-=v*(t&&g?-1:1);break;case"end":S[c]+=v*(t&&g?-1:1);break}return S}const Jk=async(a,r,t)=>{const{placement:n="bottom",strategy:o="absolute",middleware:i=[],platform:c}=t,u=i.filter(Boolean),m=await(c.isRTL==null?void 0:c.isRTL(r));let g=await c.getElementRects({reference:a,floating:r,strategy:o}),{x:f,y:h}=m2(g,n,m),v=n,S={},x=0;for(let E=0;E<u.length;E++){const{name:N,fn:C}=u[E],{x:I,y:A,data:_,reset:k}=await C({x:f,y:h,initialPlacement:n,placement:v,strategy:o,middlewareData:S,rects:g,platform:c,elements:{reference:a,floating:r}});f=I??f,h=A??h,S={...S,[N]:{...S[N],..._}},k&&x<=50&&(x++,typeof k=="object"&&(k.placement&&(v=k.placement),k.rects&&(g=k.rects===!0?await c.getElementRects({reference:a,floating:r,strategy:o}):k.rects),{x:f,y:h}=m2(g,v,m)),E=-1)}return{x:f,y:h,placement:v,strategy:o,middlewareData:S}};async function Xk(a,r){var t;r===void 0&&(r={});const{x:n,y:o,platform:i,rects:c,elements:u,strategy:m}=a,{boundary:g="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:v=!1,padding:S=0}=jp(r,a),x=jE(S),N=u[v?h==="floating"?"reference":"floating":h],C=Ym(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(N)))==null||t?N:N.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(u.floating)),boundary:g,rootBoundary:f,strategy:m})),I=h==="floating"?{x:n,y:o,width:c.floating.width,height:c.floating.height}:c.reference,A=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u.floating)),_=await(i.isElement==null?void 0:i.isElement(A))?await(i.getScale==null?void 0:i.getScale(A))||{x:1,y:1}:{x:1,y:1},k=Ym(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:I,offsetParent:A,strategy:m}):I);return{top:(C.top-k.top+x.top)/_.y,bottom:(k.bottom-C.bottom+x.bottom)/_.y,left:(C.left-k.left+x.left)/_.x,right:(k.right-C.right+x.right)/_.x}}const Kk=a=>({name:"arrow",options:a,async fn(r){const{x:t,y:n,placement:o,rects:i,platform:c,elements:u,middlewareData:m}=r,{element:g,padding:f=0}=jp(a,r)||{};if(g==null)return{};const h=jE(f),v={x:t,y:n},S=V0(o),x=Z0(S),E=await c.getDimensions(g),N=S==="y",C=N?"top":"left",I=N?"bottom":"right",A=N?"clientHeight":"clientWidth",_=i.reference[x]+i.reference[S]-v[S]-i.floating[x],k=v[S]-i.reference[S],B=await(c.getOffsetParent==null?void 0:c.getOffsetParent(g));let z=B?B[A]:0;(!z||!await(c.isElement==null?void 0:c.isElement(B)))&&(z=u.floating[A]||i.floating[x]);const M=_/2-k/2,O=z/2-E[x]/2-1,U=Pi(h[C],O),Z=Pi(h[I],O),H=U,V=z-E[x]-Z,F=z/2-E[x]/2+M,R=Ok(H,F,V),D=!m.arrow&&Pd(o)!=null&&F!==R&&i.reference[x]/2-(F<H?U:Z)-E[x]/2<0,j=D?F<H?F-H:F-V:0;return{[S]:v[S]+j,data:{[S]:R,centerOffset:F-R-j,...D&&{alignmentOffset:j}},reset:D}}}),eN=function(a){return a===void 0&&(a={}),{name:"flip",options:a,async fn(r){var t,n;const{placement:o,middlewareData:i,rects:c,initialPlacement:u,platform:m,elements:g}=r,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:v,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:E=!0,...N}=jp(a,r);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const C=Li(o),I=wi(u),A=Li(u)===u,_=await(m.isRTL==null?void 0:m.isRTL(g.floating)),k=v||(A||!E?[$m(u)]:Wk(u)),B=x!=="none";!v&&B&&k.push(...Hk(u,E,x,_));const z=[u,...k],M=await Xk(r,N),O=[];let U=((n=i.flip)==null?void 0:n.overflows)||[];if(f&&O.push(M[C]),h){const R=Uk(o,c,_);O.push(M[R[0]],M[R[1]])}if(U=[...U,{placement:o,overflows:O}],!O.every(R=>R<=0)){var Z,H;const R=(((Z=i.flip)==null?void 0:Z.index)||0)+1,D=z[R];if(D){var V;const X=h==="alignment"?I!==wi(D):!1,W=((V=U[0])==null?void 0:V.overflows[0])>0;if(!X||W)return{data:{index:R,overflows:U},reset:{placement:D}}}let j=(H=U.filter(X=>X.overflows[0]<=0).sort((X,W)=>X.overflows[1]-W.overflows[1])[0])==null?void 0:H.placement;if(!j)switch(S){case"bestFit":{var F;const X=(F=U.filter(W=>{if(B){const T=wi(W.placement);return T===I||T==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(T=>T>0).reduce((T,G)=>T+G,0)]).sort((W,T)=>W[1]-T[1])[0])==null?void 0:F[0];X&&(j=X);break}case"initialPlacement":j=u;break}if(o!==j)return{reset:{placement:j}}}return{}}}};async function tN(a,r){const{placement:t,platform:n,elements:o}=a,i=await(n.isRTL==null?void 0:n.isRTL(o.floating)),c=Li(t),u=Pd(t),m=wi(t)==="y",g=["left","top"].includes(c)?-1:1,f=i&&m?-1:1,h=jp(r,a);let{mainAxis:v,crossAxis:S,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return u&&typeof x=="number"&&(S=u==="end"?x*-1:x),m?{x:S*f,y:v*g}:{x:v*g,y:S*f}}const aN=function(a){return a===void 0&&(a=0),{name:"offset",options:a,async fn(r){var t,n;const{x:o,y:i,placement:c,middlewareData:u}=r,m=await tN(r,a);return c===((t=u.offset)==null?void 0:t.placement)&&(n=u.arrow)!=null&&n.alignmentOffset?{}:{x:o+m.x,y:i+m.y,data:{...m,placement:c}}}}};function HE(a){const r=Fr(a);let t=parseFloat(r.width)||0,n=parseFloat(r.height)||0;const o=xo(a),i=o?a.offsetWidth:t,c=o?a.offsetHeight:n,u=Hm(t)!==i||Hm(n)!==c;return u&&(t=i,n=c),{width:t,height:n,$:u}}function Q0(a){return $n(a)?a:a.contextElement}function Si(a){const r=Q0(a);if(!xo(r))return vo(1);const t=r.getBoundingClientRect(),{width:n,height:o,$:i}=HE(r);let c=(i?Hm(t.width):t.width)/n,u=(i?Hm(t.height):t.height)/o;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const nN=vo(0);function $E(a){const r=fr(a);return!q0()||!r.visualViewport?nN:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function rN(a,r,t){return r===void 0&&(r=!1),!t||r&&t!==fr(a)?!1:r}function Nl(a,r,t,n){r===void 0&&(r=!1),t===void 0&&(t=!1);const o=a.getBoundingClientRect(),i=Q0(a);let c=vo(1);r&&(n?$n(n)&&(c=Si(n)):c=Si(a));const u=rN(i,t,n)?$E(i):vo(0);let m=(o.left+u.x)/c.x,g=(o.top+u.y)/c.y,f=o.width/c.x,h=o.height/c.y;if(i){const v=fr(i),S=n&&$n(n)?fr(n):n;let x=v,E=t0(x);for(;E&&n&&S!==x;){const N=Si(E),C=E.getBoundingClientRect(),I=Fr(E),A=C.left+(E.clientLeft+parseFloat(I.paddingLeft))*N.x,_=C.top+(E.clientTop+parseFloat(I.paddingTop))*N.y;m*=N.x,g*=N.y,f*=N.x,h*=N.y,m+=A,g+=_,x=fr(E),E=t0(x)}}return Ym({width:f,height:h,x:m,y:g})}function J0(a,r){const t=Wp(a).scrollLeft;return r?r.left+t:Nl(So(a)).left+t}function YE(a,r,t){t===void 0&&(t=!1);const n=a.getBoundingClientRect(),o=n.left+r.scrollLeft-(t?0:J0(a,n)),i=n.top+r.scrollTop;return{x:o,y:i}}function oN(a){let{elements:r,rect:t,offsetParent:n,strategy:o}=a;const i=o==="fixed",c=So(n),u=r?Up(r.floating):!1;if(n===c||u&&i)return t;let m={scrollLeft:0,scrollTop:0},g=vo(1);const f=vo(0),h=xo(n);if((h||!h&&!i)&&(($i(n)!=="body"||Td(c))&&(m=Wp(n)),xo(n))){const S=Nl(n);g=Si(n),f.x=S.x+n.clientLeft,f.y=S.y+n.clientTop}const v=c&&!h&&!i?YE(c,m,!0):vo(0);return{width:t.width*g.x,height:t.height*g.y,x:t.x*g.x-m.scrollLeft*g.x+f.x+v.x,y:t.y*g.y-m.scrollTop*g.y+f.y+v.y}}function sN(a){return Array.from(a.getClientRects())}function lN(a){const r=So(a),t=Wp(a),n=a.ownerDocument.body,o=Sl(r.scrollWidth,r.clientWidth,n.scrollWidth,n.clientWidth),i=Sl(r.scrollHeight,r.clientHeight,n.scrollHeight,n.clientHeight);let c=-t.scrollLeft+J0(a);const u=-t.scrollTop;return Fr(n).direction==="rtl"&&(c+=Sl(r.clientWidth,n.clientWidth)-o),{width:o,height:i,x:c,y:u}}function iN(a,r){const t=fr(a),n=So(a),o=t.visualViewport;let i=n.clientWidth,c=n.clientHeight,u=0,m=0;if(o){i=o.width,c=o.height;const g=q0();(!g||g&&r==="fixed")&&(u=o.offsetLeft,m=o.offsetTop)}return{width:i,height:c,x:u,y:m}}function cN(a,r){const t=Nl(a,!0,r==="fixed"),n=t.top+a.clientTop,o=t.left+a.clientLeft,i=xo(a)?Si(a):vo(1),c=a.clientWidth*i.x,u=a.clientHeight*i.y,m=o*i.x,g=n*i.y;return{width:c,height:u,x:m,y:g}}function p2(a,r,t){let n;if(r==="viewport")n=iN(a,t);else if(r==="document")n=lN(So(a));else if($n(r))n=cN(r,t);else{const o=$E(a);n={x:r.x-o.x,y:r.y-o.y,width:r.width,height:r.height}}return Ym(n)}function GE(a,r){const t=Ys(a);return t===r||!$n(t)||Ti(t)?!1:Fr(t).position==="fixed"||GE(t,r)}function dN(a,r){const t=r.get(a);if(t)return t;let n=xd(a,[],!1).filter(u=>$n(u)&&$i(u)!=="body"),o=null;const i=Fr(a).position==="fixed";let c=i?Ys(a):a;for(;$n(c)&&!Ti(c);){const u=Fr(c),m=G0(c);!m&&u.position==="fixed"&&(o=null),(i?!m&&!o:!m&&u.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Td(c)&&!m&&GE(a,c))?n=n.filter(f=>f!==c):o=u,c=Ys(c)}return r.set(a,n),n}function uN(a){let{element:r,boundary:t,rootBoundary:n,strategy:o}=a;const c=[...t==="clippingAncestors"?Up(r)?[]:dN(r,this._c):[].concat(t),n],u=c[0],m=c.reduce((g,f)=>{const h=p2(r,f,o);return g.top=Sl(h.top,g.top),g.right=Pi(h.right,g.right),g.bottom=Pi(h.bottom,g.bottom),g.left=Sl(h.left,g.left),g},p2(r,u,o));return{width:m.right-m.left,height:m.bottom-m.top,x:m.left,y:m.top}}function mN(a){const{width:r,height:t}=HE(a);return{width:r,height:t}}function pN(a,r,t){const n=xo(r),o=So(r),i=t==="fixed",c=Nl(a,!0,i,r);let u={scrollLeft:0,scrollTop:0};const m=vo(0);function g(){m.x=J0(o)}if(n||!n&&!i)if(($i(r)!=="body"||Td(o))&&(u=Wp(r)),n){const S=Nl(r,!0,i,r);m.x=S.x+r.clientLeft,m.y=S.y+r.clientTop}else o&&g();i&&!n&&o&&g();const f=o&&!n&&!i?YE(o,u):vo(0),h=c.left+u.scrollLeft-m.x-f.x,v=c.top+u.scrollTop-m.y-f.y;return{x:h,y:v,width:c.width,height:c.height}}function dh(a){return Fr(a).position==="static"}function f2(a,r){if(!xo(a)||Fr(a).position==="fixed")return null;if(r)return r(a);let t=a.offsetParent;return So(a)===t&&(t=t.ownerDocument.body),t}function qE(a,r){const t=fr(a);if(Up(a))return t;if(!xo(a)){let o=Ys(a);for(;o&&!Ti(o);){if($n(o)&&!dh(o))return o;o=Ys(o)}return t}let n=f2(a,r);for(;n&&Pk(n)&&dh(n);)n=f2(n,r);return n&&Ti(n)&&dh(n)&&!G0(n)?t:n||Lk(a)||t}const fN=async function(a){const r=this.getOffsetParent||qE,t=this.getDimensions,n=await t(a.floating);return{reference:pN(a.reference,await r(a.floating),a.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function gN(a){return Fr(a).direction==="rtl"}const hN={convertOffsetParentRelativeRectToViewportRelativeRect:oN,getDocumentElement:So,getClippingRect:uN,getOffsetParent:qE,getElementRects:fN,getClientRects:sN,getDimensions:mN,getScale:Si,isElement:$n,isRTL:gN};function ZE(a,r){return a.x===r.x&&a.y===r.y&&a.width===r.width&&a.height===r.height}function yN(a,r){let t=null,n;const o=So(a);function i(){var u;clearTimeout(n),(u=t)==null||u.disconnect(),t=null}function c(u,m){u===void 0&&(u=!1),m===void 0&&(m=1),i();const g=a.getBoundingClientRect(),{left:f,top:h,width:v,height:S}=g;if(u||r(),!v||!S)return;const x=nm(h),E=nm(o.clientWidth-(f+v)),N=nm(o.clientHeight-(h+S)),C=nm(f),A={rootMargin:-x+"px "+-E+"px "+-N+"px "+-C+"px",threshold:Sl(0,Pi(1,m))||1};let _=!0;function k(B){const z=B[0].intersectionRatio;if(z!==m){if(!_)return c();z?c(!1,z):n=setTimeout(()=>{c(!1,1e-7)},1e3)}z===1&&!ZE(g,a.getBoundingClientRect())&&c(),_=!1}try{t=new IntersectionObserver(k,{...A,root:o.ownerDocument})}catch{t=new IntersectionObserver(k,A)}t.observe(a)}return c(!0),i}function bN(a,r,t,n){n===void 0&&(n={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:m=!1}=n,g=Q0(a),f=o||i?[...g?xd(g):[],...xd(r)]:[];f.forEach(C=>{o&&C.addEventListener("scroll",t,{passive:!0}),i&&C.addEventListener("resize",t)});const h=g&&u?yN(g,t):null;let v=-1,S=null;c&&(S=new ResizeObserver(C=>{let[I]=C;I&&I.target===g&&S&&(S.unobserve(r),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var A;(A=S)==null||A.observe(r)})),t()}),g&&!m&&S.observe(g),S.observe(r));let x,E=m?Nl(a):null;m&&N();function N(){const C=Nl(a);E&&!ZE(E,C)&&t(),E=C,x=requestAnimationFrame(N)}return t(),()=>{var C;f.forEach(I=>{o&&I.removeEventListener("scroll",t),i&&I.removeEventListener("resize",t)}),h==null||h(),(C=S)==null||C.disconnect(),S=null,m&&cancelAnimationFrame(x)}}const vN=aN,xN=eN,g2=Kk,EN=(a,r,t)=>{const n=new Map,o={platform:hN,...t},i={...o.platform,_c:n};return Jk(a,r,{...o,platform:i})};var _m=typeof document<"u"?b.useLayoutEffect:b.useEffect;function qm(a,r){if(a===r)return!0;if(typeof a!=typeof r)return!1;if(typeof a=="function"&&a.toString()===r.toString())return!0;let t,n,o;if(a&&r&&typeof a=="object"){if(Array.isArray(a)){if(t=a.length,t!==r.length)return!1;for(n=t;n--!==0;)if(!qm(a[n],r[n]))return!1;return!0}if(o=Object.keys(a),t=o.length,t!==Object.keys(r).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(r,o[n]))return!1;for(n=t;n--!==0;){const i=o[n];if(!(i==="_owner"&&a.$$typeof)&&!qm(a[i],r[i]))return!1}return!0}return a!==a&&r!==r}function VE(a){return typeof window>"u"?1:(a.ownerDocument.defaultView||window).devicePixelRatio||1}function h2(a,r){const t=VE(a);return Math.round(r*t)/t}function uh(a){const r=b.useRef(a);return _m(()=>{r.current=a}),r}function wN(a){a===void 0&&(a={});const{placement:r="bottom",strategy:t="absolute",middleware:n=[],platform:o,elements:{reference:i,floating:c}={},transform:u=!0,whileElementsMounted:m,open:g}=a,[f,h]=b.useState({x:0,y:0,strategy:t,placement:r,middlewareData:{},isPositioned:!1}),[v,S]=b.useState(n);qm(v,n)||S(n);const[x,E]=b.useState(null),[N,C]=b.useState(null),I=b.useCallback(X=>{X!==B.current&&(B.current=X,E(X))},[]),A=b.useCallback(X=>{X!==z.current&&(z.current=X,C(X))},[]),_=i||x,k=c||N,B=b.useRef(null),z=b.useRef(null),M=b.useRef(f),O=m!=null,U=uh(m),Z=uh(o),H=uh(g),V=b.useCallback(()=>{if(!B.current||!z.current)return;const X={placement:r,strategy:t,middleware:v};Z.current&&(X.platform=Z.current),EN(B.current,z.current,X).then(W=>{const T={...W,isPositioned:H.current!==!1};F.current&&!qm(M.current,T)&&(M.current=T,Lp.flushSync(()=>{h(T)}))})},[v,r,t,Z,H]);_m(()=>{g===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,h(X=>({...X,isPositioned:!1})))},[g]);const F=b.useRef(!1);_m(()=>(F.current=!0,()=>{F.current=!1}),[]),_m(()=>{if(_&&(B.current=_),k&&(z.current=k),_&&k){if(U.current)return U.current(_,k,V);V()}},[_,k,V,U,O]);const R=b.useMemo(()=>({reference:B,floating:z,setReference:I,setFloating:A}),[I,A]),D=b.useMemo(()=>({reference:_,floating:k}),[_,k]),j=b.useMemo(()=>{const X={position:t,left:0,top:0};if(!D.floating)return X;const W=h2(D.floating,f.x),T=h2(D.floating,f.y);return u?{...X,transform:"translate("+W+"px, "+T+"px)",...VE(D.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:W,top:T}},[t,u,D.floating,f.x,f.y]);return b.useMemo(()=>({...f,update:V,refs:R,elements:D,floatingStyles:j}),[f,V,R,D,j])}const SN=a=>{function r(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:a,fn(t){const{element:n,padding:o}=typeof a=="function"?a(t):a;return n&&r(n)?n.current!=null?g2({element:n.current,padding:o}).fn(t):{}:n?g2({element:n,padding:o}).fn(t):{}}}},CN=(a,r)=>({...vN(a),options:[a,r]}),_N=(a,r)=>({...xN(a),options:[a,r]}),kN=(a,r)=>({...SN(a),options:[a,r]}),NN={...tE};let y2=!1,IN=0;const b2=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+IN++;function AN(){const[a,r]=b.useState(()=>y2?b2():void 0);return Gm(()=>{a==null&&r(b2())},[]),b.useEffect(()=>{y2=!0},[]),a}const DN=NN.useId,QE=DN||AN,MN=b.forwardRef(function(r,t){const{context:{placement:n,elements:{floating:o},middlewareData:{arrow:i,shift:c}},width:u=14,height:m=7,tipRadius:g=0,strokeWidth:f=0,staticOffset:h,stroke:v,d:S,style:{transform:x,...E}={},...N}=r,C=QE(),[I,A]=b.useState(!1);if(Gm(()=>{if(!o)return;Fr(o).direction==="rtl"&&A(!0)},[o]),!o)return null;const[_,k]=n.split("-"),B=_==="top"||_==="bottom";let z=h;(B&&c!=null&&c.x||!B&&c!=null&&c.y)&&(z=null);const M=f*2,O=M/2,U=u/2*(g/-8+1),Z=m/2*g/4,H=!!S,V=z&&k==="end"?"bottom":"top";let F=z&&k==="end"?"right":"left";z&&I&&(F=k==="end"?"left":"right");const R=(i==null?void 0:i.x)!=null?z||i.x:"",D=(i==null?void 0:i.y)!=null?z||i.y:"",j=S||"M0,0"+(" H"+u)+(" L"+(u-U)+","+(m-Z))+(" Q"+u/2+","+m+" "+U+","+(m-Z))+" Z",X={top:H?"rotate(180deg)":"",left:H?"rotate(90deg)":"rotate(-90deg)",bottom:H?"":"rotate(180deg)",right:H?"rotate(-90deg)":"rotate(90deg)"}[_];return Yc.jsxs("svg",{...N,"aria-hidden":!0,ref:t,width:H?u:u+M,height:u,viewBox:"0 0 "+u+" "+(m>u?m:u),style:{position:"absolute",pointerEvents:"none",[F]:R,[V]:D,[_]:B||H?"100%":"calc(100% - "+M/2+"px)",transform:[X,x].filter(W=>!!W).join(" "),...E},children:[M>0&&Yc.jsx("path",{clipPath:"url(#"+C+")",fill:"none",stroke:v,strokeWidth:M+(S?0:1),d:j}),Yc.jsx("path",{stroke:M&&!S?N.fill:"none",d:j}),Yc.jsx("clipPath",{id:C,children:Yc.jsx("rect",{x:-O,y:O*(H?-1:1),width:u+M,height:u})})]})});function RN(){const a=new Map;return{emit(r,t){var n;(n=a.get(r))==null||n.forEach(o=>o(t))},on(r,t){a.has(r)||a.set(r,new Set),a.get(r).add(t)},off(r,t){var n;(n=a.get(r))==null||n.delete(t)}}}const TN=b.createContext(null),PN=b.createContext(null),LN=()=>{var a;return((a=b.useContext(TN))==null?void 0:a.id)||null},BN=()=>b.useContext(PN);function zN(a){const{open:r=!1,onOpenChange:t,elements:n}=a,o=QE(),i=b.useRef({}),[c]=b.useState(()=>RN()),u=LN()!=null,[m,g]=b.useState(n.reference),f=Zk((S,x,E)=>{i.current.openEvent=S?x:void 0,c.emit("openchange",{open:S,event:x,reason:E,nested:u}),t==null||t(S,x,E)}),h=b.useMemo(()=>({setPositionReference:g}),[]),v=b.useMemo(()=>({reference:m||n.reference||null,floating:n.floating||null,domReference:n.reference}),[m,n.reference,n.floating]);return b.useMemo(()=>({dataRef:i,open:r,onOpenChange:f,elements:v,events:c,floatingId:o,refs:h}),[r,f,v,c,o,h])}function ON(a){a===void 0&&(a={});const{nodeId:r}=a,t=zN({...a,elements:{reference:null,floating:null,...a.elements}}),n=a.rootContext||t,o=n.elements,[i,c]=b.useState(null),[u,m]=b.useState(null),f=(o==null?void 0:o.domReference)||i,h=b.useRef(null),v=BN();Gm(()=>{f&&(h.current=f)},[f]);const S=wN({...a,elements:{...o,...u&&{reference:u}}}),x=b.useCallback(A=>{const _=$n(A)?{getBoundingClientRect:()=>A.getBoundingClientRect(),getClientRects:()=>A.getClientRects(),contextElement:A}:A;m(_),S.refs.setReference(_)},[S.refs]),E=b.useCallback(A=>{($n(A)||A===null)&&(h.current=A,c(A)),($n(S.refs.reference.current)||S.refs.reference.current===null||A!==null&&!$n(A))&&S.refs.setReference(A)},[S.refs]),N=b.useMemo(()=>({...S.refs,setReference:E,setPositionReference:x,domReference:h}),[S.refs,E,x]),C=b.useMemo(()=>({...S.elements,domReference:f}),[S.elements,f]),I=b.useMemo(()=>({...S,...n,refs:N,elements:C,nodeId:r}),[S,N,C,r,n]);return Gm(()=>{n.dataRef.current.floatingContext=I;const A=v==null?void 0:v.nodesRef.current.find(_=>_.id===r);A&&(A.context=I)}),b.useMemo(()=>({...S,context:I,refs:N,elements:C}),[S,N,C,I])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var n0=function(r,t){return n0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},n0(r,t)};function En(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n0(a,r);function t(){this.constructor=a}a.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Zt=function(){return Zt=Object.assign||function(t){for(var n,o=1,i=arguments.length;o<i;o++){n=arguments[o];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t},Zt.apply(this,arguments)};function yo(a,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return a.concat(i||Array.prototype.slice.call(r))}var FN=function(a){var r=a.showTimeSelectOnly,t=r===void 0?!1:r,n=a.showTime,o=n===void 0?!1:n,i=a.className,c=a.children,u=t?"Choose Time":"Choose Date".concat(o?" and Time":"");return e.createElement("div",{className:i,role:"dialog","aria-label":u,"aria-modal":"true"},c)},UN=function(a,r){var t=b.useRef(null),n=b.useRef(a);n.current=a;var o=b.useCallback(function(i){var c,u=i.composed&&i.composedPath&&i.composedPath().find(function(m){return m instanceof Node})||i.target;t.current&&!t.current.contains(u)&&(r&&u instanceof HTMLElement&&u.classList.contains(r)||(c=n.current)===null||c===void 0||c.call(n,i))},[r]);return b.useEffect(function(){return document.addEventListener("mousedown",o),function(){document.removeEventListener("mousedown",o)}},[o]),t},Hp=function(a){var r=a.children,t=a.onClickOutside,n=a.className,o=a.containerRef,i=a.style,c=a.ignoreClass,u=UN(t,c);return e.createElement("div",{className:n,style:i,ref:function(m){u.current=m,o&&(o.current=m)}},r)},Ye;(function(a){a.ArrowUp="ArrowUp",a.ArrowDown="ArrowDown",a.ArrowLeft="ArrowLeft",a.ArrowRight="ArrowRight",a.PageUp="PageUp",a.PageDown="PageDown",a.Home="Home",a.End="End",a.Enter="Enter",a.Space=" ",a.Tab="Tab",a.Escape="Escape",a.Backspace="Backspace",a.X="x"})(Ye||(Ye={}));function JE(){var a=typeof window<"u"?window:globalThis;return a}var Ld=12;function aa(a){if(a==null)return new Date;var r=typeof a=="string"?zE(a):st(a);return $p(r)?r:new Date}function mh(a,r,t,n,o){o===void 0&&(o=aa());for(var i=Bi(t)||Bi(X0()),c=Array.isArray(r)?r:[r],u=0,m=c;u<m.length;u++){var g=m[u],f=pk(a,g,o,{locale:i});if($p(f)&&(!n||a===Ta(f,g,t)))return f}return null}function $p(a,r){return Om(a)&&!kl(a,new Date("1/1/1800"))}function Ta(a,r,t){if(t==="en")return Hn(a,r,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=t?Bi(t):void 0;return t&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(t,'"].')),n=n||Bi(X0()),Hn(a,r,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Tr(a,r){var t=r.dateFormat,n=r.locale,o=Array.isArray(t)&&t.length>0?t[0]:t;return a&&Ta(a,o,n)||""}var XE=" - ";function WN(a,r,t){if(!a)return"";var n=Tr(a,t),o=r?Tr(r,t):"";return"".concat(n).concat(XE).concat(o)}function jN(a,r){if(!(a!=null&&a.length))return"";var t=a[0]?Tr(a[0],r):"";if(a.length===1)return t;if(a.length===2&&a[1]){var n=Tr(a[1],r);return"".concat(t,", ").concat(n)}var o=a.length-1;return"".concat(t," (+").concat(o,")")}function ph(a,r){var t=r.hour,n=t===void 0?0:t,o=r.minute,i=o===void 0?0:o,c=r.second,u=c===void 0?0:c;return wm(Sm(Cm(a,u),i),n)}function HN(a){return j0(a)}function $N(a,r){return Ta(a,"ddd",r)}function km(a){return _l(a)}function Hs(a,r,t){var n=Bi(r||X0());return ns(a,{locale:n,weekStartsOn:t})}function es(a){return IE(a)}function nd(a){return Op(a)}function v2(a){return Xh(a)}function x2(){return _l(aa())}function E2(a){return kE(a)}function YN(a){return v4(a)}function GN(a){return NE(a)}function fo(a,r){return a&&r?yk(a,r):!a&&!r}function jn(a,r){return a&&r?gk(a,r):!a&&!r}function Zm(a,r){return a&&r?hk(a,r):!a&&!r}function qt(a,r){return a&&r?h4(a,r):!a&&!r}function bl(a,r){return a&&r?b_(a,r):!a&&!r}function rd(a,r,t){var n,o=_l(r),i=kE(t);try{n=vd(a,{start:o,end:i})}catch{n=!1}return n}function X0(){var a=JE();return a.__localeId__}function Bi(a){if(typeof a=="string"){var r=JE();return r.__localeData__?r.__localeData__[a]:void 0}else return a}function qN(a,r,t){return r(Ta(a,"EEEE",t))}function ZN(a,r){return Ta(a,"EEEEEE",r)}function VN(a,r){return Ta(a,"EEE",r)}function K0(a,r){return Ta(Pr(aa(),a),"LLLL",r)}function KE(a,r){return Ta(Pr(aa(),a),"LLL",r)}function QN(a,r){return Ta(yi(aa(),a),"QQQ",r)}function Br(a,r){var t=r===void 0?{}:r,n=t.minDate,o=t.maxDate,i=t.excludeDates,c=t.excludeDateIntervals,u=t.includeDates,m=t.includeDateIntervals,g=t.filterDate;return Bd(a,{minDate:n,maxDate:o})||i&&i.some(function(f){return f instanceof Date?qt(a,f):qt(a,f.date)})||c&&c.some(function(f){var h=f.start,v=f.end;return vd(a,{start:h,end:v})})||u&&!u.some(function(f){return qt(a,f)})||m&&!m.some(function(f){var h=f.start,v=f.end;return vd(a,{start:h,end:v})})||g&&!g(aa(a))||!1}function ey(a,r){var t=r===void 0?{}:r,n=t.excludeDates,o=t.excludeDateIntervals;return o&&o.length>0?o.some(function(i){var c=i.start,u=i.end;return vd(a,{start:c,end:u})}):n&&n.some(function(i){var c;return i instanceof Date?qt(a,i):qt(a,(c=i.date)!==null&&c!==void 0?c:new Date)})||!1}function e5(a,r){var t=r===void 0?{}:r,n=t.minDate,o=t.maxDate,i=t.excludeDates,c=t.includeDates,u=t.filterDate;return Bd(a,{minDate:n?IE(n):void 0,maxDate:o?NE(o):void 0})||(i==null?void 0:i.some(function(m){return jn(a,m instanceof Date?m:m.date)}))||c&&!c.some(function(m){return jn(a,m)})||u&&!u(aa(a))||!1}function rm(a,r,t,n){var o=Lt(a),i=On(a),c=Lt(r),u=On(r),m=Lt(n);return o===c&&o===m?i<=t&&t<=u:o<c?m===o&&i<=t||m===c&&u>=t||m<c&&m>o:!1}function JN(a,r){var t=r===void 0?{}:r,n=t.minDate,o=t.maxDate,i=t.excludeDates,c=t.includeDates;return Bd(a,{minDate:n,maxDate:o})||i&&i.some(function(u){return jn(u instanceof Date?u:u.date,a)})||c&&!c.some(function(u){return jn(u,a)})||!1}function om(a,r){var t=r===void 0?{}:r,n=t.minDate,o=t.maxDate,i=t.excludeDates,c=t.includeDates,u=t.filterDate;return Bd(a,{minDate:n,maxDate:o})||(i==null?void 0:i.some(function(m){return Zm(a,m instanceof Date?m:m.date)}))||c&&!c.some(function(m){return Zm(a,m)})||u&&!u(aa(a))||!1}function sm(a,r,t){if(!r||!t||!Om(r)||!Om(t))return!1;var n=Lt(r),o=Lt(t);return n<=a&&o>=a}function Nm(a,r){var t=r===void 0?{}:r,n=t.minDate,o=t.maxDate,i=t.excludeDates,c=t.includeDates,u=t.filterDate,m=new Date(a,0,1);return Bd(m,{minDate:n?Op(n):void 0,maxDate:o?AE(o):void 0})||(i==null?void 0:i.some(function(g){return fo(m,g instanceof Date?g:g.date)}))||c&&!c.some(function(g){return fo(m,g)})||u&&!u(aa(m))||!1}function lm(a,r,t,n){var o=Lt(a),i=El(a),c=Lt(r),u=El(r),m=Lt(n);return o===c&&o===m?i<=t&&t<=u:o<c?m===o&&i<=t||m===c&&u>=t||m<c&&m>o:!1}function Bd(a,r){var t,n=r===void 0?{}:r,o=n.minDate,i=n.maxDate;return(t=o&&Mi(a,o)<0||i&&Mi(a,i)>0)!==null&&t!==void 0?t:!1}function w2(a,r){return r.some(function(t){return Xo(t)===Xo(a)&&Ko(t)===Ko(a)&&js(t)===js(a)})}function S2(a,r){var t=r===void 0?{}:r,n=t.excludeTimes,o=t.includeTimes,i=t.filterTime;return n&&w2(a,n)||o&&!w2(a,o)||i&&!i(a)||!1}function C2(a,r){var t=r.minTime,n=r.maxTime;if(!t||!n)throw new Error("Both minTime and maxTime props required");var o=aa();o=wm(o,Xo(a)),o=Sm(o,Ko(a)),o=Cm(o,js(a));var i=aa();i=wm(i,Xo(t)),i=Sm(i,Ko(t)),i=Cm(i,js(t));var c=aa();c=wm(c,Xo(n)),c=Sm(c,Ko(n)),c=Cm(c,js(n));var u;try{u=!vd(o,{start:i,end:c})}catch{u=!1}return u}function _2(a,r){var t=r===void 0?{}:r,n=t.minDate,o=t.includeDates,i=wl(a,1);return n&&Fm(n,i)>0||o&&o.every(function(c){return Fm(c,i)>0})||!1}function k2(a,r){var t=r===void 0?{}:r,n=t.maxDate,o=t.includeDates,i=eo(a,1);return n&&Fm(i,n)>0||o&&o.every(function(c){return Fm(i,c)>0})||!1}function XN(a,r){var t=r===void 0?{}:r,n=t.minDate,o=t.includeDates,i=Op(a),c=FE(i);return n&&Um(n,c)>0||o&&o.every(function(u){return Um(u,c)>0})||!1}function KN(a,r){var t=r===void 0?{}:r,n=t.maxDate,o=t.includeDates,i=AE(a),c=W0(i,1);return n&&Um(c,n)>0||o&&o.every(function(u){return Um(c,u)>0})||!1}function N2(a,r){var t=r===void 0?{}:r,n=t.minDate,o=t.includeDates,i=Ri(a,1);return n&&Wm(n,i)>0||o&&o.every(function(c){return Wm(c,i)>0})||!1}function eI(a,r){var t=r===void 0?{}:r,n=t.minDate,o=t.yearItemNumber,i=o===void 0?Ld:o,c=nd(Ri(a,i)),u=Ws(c,i).endPeriod,m=n&&Lt(n);return m&&m>u||!1}function I2(a,r){var t=r===void 0?{}:r,n=t.maxDate,o=t.includeDates,i=Qo(a,1);return n&&Wm(i,n)>0||o&&o.every(function(c){return Wm(i,c)>0})||!1}function tI(a,r){var t=r===void 0?{}:r,n=t.maxDate,o=t.yearItemNumber,i=o===void 0?Ld:o,c=Qo(a,i),u=Ws(c,i).startPeriod,m=n&&Lt(n);return m&&m<u||!1}function t5(a){var r=a.minDate,t=a.includeDates;if(t&&r){var n=t.filter(function(o){return Mi(o,r)>=0});return t2(n)}else return t?t2(t):r}function a5(a){var r=a.maxDate,t=a.includeDates;if(t&&r){var n=t.filter(function(o){return Mi(o,r)<=0});return e2(n)}else return t?e2(t):r}function A2(a,r){var t;a===void 0&&(a=[]),r===void 0&&(r="react-datepicker__day--highlighted");for(var n=new Map,o=0,i=a.length;o<i;o++){var c=a[o];if(Jo(c)){var u=Ta(c,"MM.dd.yyyy"),m=n.get(u)||[];m.includes(r)||(m.push(r),n.set(u,m))}else if(typeof c=="object"){var g=Object.keys(c),f=(t=g[0])!==null&&t!==void 0?t:"",h=c[f];if(typeof f=="string"&&Array.isArray(h))for(var v=0,S=h.length;v<S;v++){var x=h[v];if(x){var u=Ta(x,"MM.dd.yyyy"),m=n.get(u)||[];m.includes(f)||(m.push(f),n.set(u,m))}}}}return n}function aI(a,r){return a.length!==r.length?!1:a.every(function(t,n){return t===r[n]})}function nI(a,r){a===void 0&&(a=[]),r===void 0&&(r="react-datepicker__day--holidays");var t=new Map;return a.forEach(function(n){var o=n.date,i=n.holidayName;if(Jo(o)){var c=Ta(o,"MM.dd.yyyy"),u=t.get(c)||{className:"",holidayNames:[]};if(!("className"in u&&u.className===r&&aI(u.holidayNames,[i]))){u.className=r;var m=u.holidayNames;u.holidayNames=m?yo(yo([],m,!0),[i],!1):[i],t.set(c,u)}}}),t}function rI(a,r,t,n,o){for(var i=o.length,c=[],u=0;u<i;u++){var m=a,g=o[u];g&&(m=m4(m,Xo(g)),m=Jh(m,Ko(g)),m=g4(m,js(g)));var f=Jh(a,(t+1)*n);rs(m,r)&&kl(m,f)&&g!=null&&c.push(g)}return c}function D2(a){return a<10?"0".concat(a):"".concat(a)}function Ws(a,r){r===void 0&&(r=Ld);var t=Math.ceil(Lt(a)/r)*r,n=t-(r-1);return{startPeriod:n,endPeriod:t}}function oI(a){var r=new Date(a.getFullYear(),a.getMonth(),a.getDate()),t=new Date(a.getFullYear(),a.getMonth(),a.getDate(),24);return Math.round((+t-+r)/36e5)}function M2(a){var r=a.getSeconds(),t=a.getMilliseconds();return st(a.getTime()-r*1e3-t)}function sI(a,r){return M2(a).getTime()===M2(r).getTime()}function R2(a){if(!Jo(a))throw new Error("Invalid date");var r=new Date(a);return r.setHours(0,0,0,0),r}function T2(a,r){if(!Jo(a)||!Jo(r))throw new Error("Invalid date received");var t=R2(a),n=R2(r);return kl(t,n)}function n5(a){return a.key===Ye.Space}var lI=function(a){En(r,a);function r(t){var n=a.call(this,t)||this;return n.inputRef=e.createRef(),n.onTimeChange=function(o){var i,c;n.setState({time:o});var u=n.props.date,m=u instanceof Date&&!isNaN(+u),g=m?u:new Date;if(o!=null&&o.includes(":")){var f=o.split(":"),h=f[0],v=f[1];g.setHours(Number(h)),g.setMinutes(Number(v))}(c=(i=n.props).onChange)===null||c===void 0||c.call(i,g)},n.renderTimeInput=function(){var o=n.state.time,i=n.props,c=i.date,u=i.timeString,m=i.customTimeInput;return m?b.cloneElement(m,{date:c,value:o,onChange:n.onTimeChange}):e.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var g;(g=n.inputRef.current)===null||g===void 0||g.focus()},required:!0,value:o,onChange:function(g){n.onTimeChange(g.target.value||u)}})},n.state={time:n.props.timeString},n}return r.getDerivedStateFromProps=function(t,n){return t.timeString!==n.time?{time:t.timeString}:null},r.prototype.render=function(){return e.createElement("div",{className:"react-datepicker__input-time-container"},e.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),e.createElement("div",{className:"react-datepicker-time__input-container"},e.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},r}(b.Component),iI=function(a){En(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.dayEl=b.createRef(),t.handleClick=function(n){!t.isDisabled()&&t.props.onClick&&t.props.onClick(n)},t.handleMouseEnter=function(n){!t.isDisabled()&&t.props.onMouseEnter&&t.props.onMouseEnter(n)},t.handleOnKeyDown=function(n){var o,i,c=n.key;c===Ye.Space&&(n.preventDefault(),n.key=Ye.Enter),(i=(o=t.props).handleOnKeyDown)===null||i===void 0||i.call(o,n)},t.isSameDay=function(n){return qt(t.props.day,n)},t.isKeyboardSelected=function(){var n;if(t.props.disabledKeyboardNavigation)return!1;var o=t.props.selectsMultiple?(n=t.props.selectedDates)===null||n===void 0?void 0:n.some(function(c){return t.isSameDayOrWeek(c)}):t.isSameDayOrWeek(t.props.selected),i=t.props.preSelection&&t.isDisabled(t.props.preSelection);return!o&&t.isSameDayOrWeek(t.props.preSelection)&&!i},t.isDisabled=function(n){return n===void 0&&(n=t.props.day),Br(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(){return ey(t.props.day,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.isStartOfWeek=function(){return qt(t.props.day,Hs(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameWeek=function(n){return t.props.showWeekPicker&&qt(n,Hs(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameDayOrWeek=function(n){return t.isSameDay(n)||t.isSameWeek(n)},t.getHighLightedClass=function(){var n=t.props,o=n.day,i=n.highlightDates;if(!i)return!1;var c=Ta(o,"MM.dd.yyyy");return i.get(c)},t.getHolidaysClass=function(){var n,o=t.props,i=o.day,c=o.holidays;if(!c)return[void 0];var u=Ta(i,"MM.dd.yyyy");return c.has(u)?[(n=c.get(u))===null||n===void 0?void 0:n.className]:[void 0]},t.isInRange=function(){var n=t.props,o=n.day,i=n.startDate,c=n.endDate;return!i||!c?!1:rd(o,i,c)},t.isInSelectingRange=function(){var n,o=t.props,i=o.day,c=o.selectsStart,u=o.selectsEnd,m=o.selectsRange,g=o.selectsDisabledDaysInRange,f=o.startDate,h=o.endDate,v=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;return!(c||u||m)||!v||!g&&t.isDisabled()?!1:c&&h&&(kl(v,h)||bl(v,h))?rd(i,v,h):u&&f&&(rs(v,f)||bl(v,f))||m&&f&&!h&&(rs(v,f)||bl(v,f))?rd(i,f,v):!1},t.isSelectingRangeStart=function(){var n;if(!t.isInSelectingRange())return!1;var o=t.props,i=o.day,c=o.startDate,u=o.selectsStart,m=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;return u?qt(i,m):qt(i,c)},t.isSelectingRangeEnd=function(){var n;if(!t.isInSelectingRange())return!1;var o=t.props,i=o.day,c=o.endDate,u=o.selectsEnd,m=o.selectsRange,g=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;return u||m?qt(i,g):qt(i,c)},t.isRangeStart=function(){var n=t.props,o=n.day,i=n.startDate,c=n.endDate;return!i||!c?!1:qt(i,o)},t.isRangeEnd=function(){var n=t.props,o=n.day,i=n.startDate,c=n.endDate;return!i||!c?!1:qt(c,o)},t.isWeekend=function(){var n=f_(t.props.day);return n===0||n===6},t.isAfterMonth=function(){return t.props.month!==void 0&&(t.props.month+1)%12===On(t.props.day)},t.isBeforeMonth=function(){return t.props.month!==void 0&&(On(t.props.day)+1)%12===t.props.month},t.isCurrentDay=function(){return t.isSameDay(aa())},t.isSelected=function(){var n;return t.props.selectsMultiple?(n=t.props.selectedDates)===null||n===void 0?void 0:n.some(function(o){return t.isSameDayOrWeek(o)}):t.isSameDayOrWeek(t.props.selected)},t.getClassNames=function(n){var o=t.props.dayClassName?t.props.dayClassName(n):void 0;return In("react-datepicker__day",o,"react-datepicker__day--"+$N(t.props.day),{"react-datepicker__day--disabled":t.isDisabled(),"react-datepicker__day--excluded":t.isExcluded(),"react-datepicker__day--selected":t.isSelected(),"react-datepicker__day--keyboard-selected":t.isKeyboardSelected(),"react-datepicker__day--range-start":t.isRangeStart(),"react-datepicker__day--range-end":t.isRangeEnd(),"react-datepicker__day--in-range":t.isInRange(),"react-datepicker__day--in-selecting-range":t.isInSelectingRange(),"react-datepicker__day--selecting-range-start":t.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":t.isSelectingRangeEnd(),"react-datepicker__day--today":t.isCurrentDay(),"react-datepicker__day--weekend":t.isWeekend(),"react-datepicker__day--outside-month":t.isAfterMonth()||t.isBeforeMonth()},t.getHighLightedClass(),t.getHolidaysClass())},t.getAriaLabel=function(){var n=t.props,o=n.day,i=n.ariaLabelPrefixWhenEnabled,c=i===void 0?"Choose":i,u=n.ariaLabelPrefixWhenDisabled,m=u===void 0?"Not available":u,g=t.isDisabled()||t.isExcluded()?m:c;return"".concat(g," ").concat(Ta(o,"PPPP",t.props.locale))},t.getTitle=function(){var n=t.props,o=n.day,i=n.holidays,c=i===void 0?new Map:i,u=n.excludeDates,m=Ta(o,"MM.dd.yyyy"),g=[];return c.has(m)&&g.push.apply(g,c.get(m).holidayNames),t.isExcluded()&&g.push(u==null?void 0:u.filter(function(f){return f instanceof Date?qt(f,o):qt(f==null?void 0:f.date,o)}).map(function(f){if(!(f instanceof Date))return f==null?void 0:f.message})),g.join(", ")},t.getTabIndex=function(){var n=t.props.selected,o=t.props.preSelection,i=!(t.props.showWeekPicker&&(t.props.showWeekNumber||!t.isStartOfWeek()))&&(t.isKeyboardSelected()||t.isSameDay(n)&&qt(o,n))?0:-1;return i},t.handleFocusDay=function(){var n;t.shouldFocusDay()&&((n=t.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},t.renderDayContents=function(){return t.props.monthShowsDuplicateDaysEnd&&t.isAfterMonth()||t.props.monthShowsDuplicateDaysStart&&t.isBeforeMonth()?null:t.props.renderDayContents?t.props.renderDayContents(l2(t.props.day),t.props.day):l2(t.props.day)},t.render=function(){return e.createElement("div",{ref:t.dayEl,className:t.getClassNames(t.props.day),onKeyDown:t.handleOnKeyDown,onClick:t.handleClick,onMouseEnter:t.props.usePointerEvent?void 0:t.handleMouseEnter,onPointerEnter:t.props.usePointerEvent?t.handleMouseEnter:void 0,tabIndex:t.getTabIndex(),"aria-label":t.getAriaLabel(),role:"option",title:t.getTitle(),"aria-disabled":t.isDisabled(),"aria-current":t.isCurrentDay()?"date":void 0,"aria-selected":t.isSelected()||t.isInRange()},t.renderDayContents(),t.getTitle()!==""&&e.createElement("span",{className:"overlay"},t.getTitle()))},t}return r.prototype.componentDidMount=function(){this.handleFocusDay()},r.prototype.componentDidUpdate=function(){this.handleFocusDay()},r.prototype.shouldFocusDay=function(){var t=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(t=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(t=!1),this.isDayActiveElement()&&(t=!0),this.isDuplicateDay()&&(t=!1)),t},r.prototype.isDayActiveElement=function(){var t,n,o;return((n=(t=this.props.containerRef)===null||t===void 0?void 0:t.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((o=document.activeElement)===null||o===void 0?void 0:o.classList.contains("react-datepicker__day"))},r.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},r}(b.Component),cI=function(a){En(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.weekNumberEl=b.createRef(),t.handleClick=function(n){t.props.onClick&&t.props.onClick(n)},t.handleOnKeyDown=function(n){var o,i,c=n.key;c===Ye.Space&&(n.preventDefault(),n.key=Ye.Enter),(i=(o=t.props).handleOnKeyDown)===null||i===void 0||i.call(o,n)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!qt(t.props.date,t.props.selected)&&qt(t.props.date,t.props.preSelection)},t.getTabIndex=function(){return t.props.showWeekPicker&&t.props.showWeekNumber&&(t.isKeyboardSelected()||qt(t.props.date,t.props.selected)&&qt(t.props.preSelection,t.props.selected))?0:-1},t.handleFocusWeekNumber=function(n){var o=!1;t.getTabIndex()===0&&!(n!=null&&n.isInputFocused)&&qt(t.props.date,t.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(o=!0),t.props.inline&&!t.props.shouldFocusDayInline&&(o=!1),t.props.containerRef&&t.props.containerRef.current&&t.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(o=!0)),o&&t.weekNumberEl.current&&t.weekNumberEl.current.focus({preventScroll:!0})},t}return Object.defineProperty(r,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),r.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},r.prototype.componentDidUpdate=function(t){this.handleFocusWeekNumber(t)},r.prototype.render=function(){var t=this.props,n=t.weekNumber,o=t.isWeekDisabled,i=t.ariaLabelPrefix,c=i===void 0?r.defaultProps.ariaLabelPrefix:i,u=t.onClick,m={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!u&&!o,"react-datepicker__week-number--selected":!!u&&qt(this.props.date,this.props.selected)};return e.createElement("div",{ref:this.weekNumberEl,className:In(m),"aria-label":"".concat(c," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},n)},r}(b.Component),dI=function(a){En(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.isDisabled=function(n){return Br(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.handleDayClick=function(n,o){t.props.onDayClick&&t.props.onDayClick(n,o)},t.handleDayMouseEnter=function(n){t.props.onDayMouseEnter&&t.props.onDayMouseEnter(n)},t.handleWeekClick=function(n,o,i){for(var c,u,m,g=new Date(n),f=0;f<7;f++){var h=new Date(n);h.setDate(h.getDate()+f);var v=!t.isDisabled(h);if(v){g=h;break}}typeof t.props.onWeekSelect=="function"&&t.props.onWeekSelect(g,o,i),t.props.showWeekPicker&&t.handleDayClick(g,i),((c=t.props.shouldCloseOnSelect)!==null&&c!==void 0?c:r.defaultProps.shouldCloseOnSelect)&&((m=(u=t.props).setOpen)===null||m===void 0||m.call(u,!1))},t.formatWeekNumber=function(n){return t.props.formatWeekNumber?t.props.formatWeekNumber(n):HN(n)},t.isWeekDisabled=function(){for(var n=t.startOfWeek(),o=Kr(n,6),i=new Date(n);i<=o;){if(!t.isDisabled(i))return!1;i=Kr(i,1)}return!0},t.renderDays=function(){var n=t.startOfWeek(),o=[],i=t.formatWeekNumber(n);if(t.props.showWeekNumber){var c=t.props.onWeekSelect||t.props.showWeekPicker?t.handleWeekClick.bind(t,n,i):void 0;o.push(e.createElement(cI,Zt({key:"W"},r.defaultProps,t.props,{weekNumber:i,isWeekDisabled:t.isWeekDisabled(),date:n,onClick:c})))}return o.concat([0,1,2,3,4,5,6].map(function(u){var m=Kr(n,u);return e.createElement(iI,Zt({},r.defaultProps,t.props,{ariaLabelPrefixWhenEnabled:t.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:t.props.disabledDayAriaLabelPrefix,key:m.valueOf(),day:m,onClick:t.handleDayClick.bind(t,m),onMouseEnter:t.handleDayMouseEnter.bind(t,m)}))}))},t.startOfWeek=function(){return Hs(t.props.day,t.props.locale,t.props.calendarStartDay)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!qt(t.startOfWeek(),t.props.selected)&&qt(t.startOfWeek(),t.props.preSelection)},t}return Object.defineProperty(r,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),r.prototype.render=function(){var t={"react-datepicker__week":!0,"react-datepicker__week--selected":qt(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return e.createElement("div",{className:In(t)},this.renderDays())},r}(b.Component),Gc,uI=6,Ci={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},fh=(Gc={},Gc[Ci.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},Gc[Ci.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},Gc[Ci.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},Gc),im=1;function P2(a,r){return a?Ci.FOUR_COLUMNS:r?Ci.TWO_COLUMNS:Ci.THREE_COLUMNS}var mI=function(a){En(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.MONTH_REFS=yo([],Array(12),!0).map(function(){return b.createRef()}),t.QUARTER_REFS=yo([],Array(4),!0).map(function(){return b.createRef()}),t.isDisabled=function(n){return Br(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(n){return ey(n,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.handleDayClick=function(n,o){var i,c;(c=(i=t.props).onDayClick)===null||c===void 0||c.call(i,n,o,t.props.orderInDisplay)},t.handleDayMouseEnter=function(n){var o,i;(i=(o=t.props).onDayMouseEnter)===null||i===void 0||i.call(o,n)},t.handleMouseLeave=function(){var n,o;(o=(n=t.props).onMouseLeave)===null||o===void 0||o.call(n)},t.isRangeStartMonth=function(n){var o=t.props,i=o.day,c=o.startDate,u=o.endDate;return!c||!u?!1:jn(Pr(i,n),c)},t.isRangeStartQuarter=function(n){var o=t.props,i=o.day,c=o.startDate,u=o.endDate;return!c||!u?!1:Zm(yi(i,n),c)},t.isRangeEndMonth=function(n){var o=t.props,i=o.day,c=o.startDate,u=o.endDate;return!c||!u?!1:jn(Pr(i,n),u)},t.isRangeEndQuarter=function(n){var o=t.props,i=o.day,c=o.startDate,u=o.endDate;return!c||!u?!1:Zm(yi(i,n),u)},t.isInSelectingRangeMonth=function(n){var o,i=t.props,c=i.day,u=i.selectsStart,m=i.selectsEnd,g=i.selectsRange,f=i.startDate,h=i.endDate,v=(o=t.props.selectingDate)!==null&&o!==void 0?o:t.props.preSelection;return!(u||m||g)||!v?!1:u&&h?rm(v,h,n,c):m&&f||g&&f&&!h?rm(f,v,n,c):!1},t.isSelectingMonthRangeStart=function(n){var o;if(!t.isInSelectingRangeMonth(n))return!1;var i=t.props,c=i.day,u=i.startDate,m=i.selectsStart,g=Pr(c,n),f=(o=t.props.selectingDate)!==null&&o!==void 0?o:t.props.preSelection;return m?jn(g,f):jn(g,u)},t.isSelectingMonthRangeEnd=function(n){var o;if(!t.isInSelectingRangeMonth(n))return!1;var i=t.props,c=i.day,u=i.endDate,m=i.selectsEnd,g=i.selectsRange,f=Pr(c,n),h=(o=t.props.selectingDate)!==null&&o!==void 0?o:t.props.preSelection;return m||g?jn(f,h):jn(f,u)},t.isInSelectingRangeQuarter=function(n){var o,i=t.props,c=i.day,u=i.selectsStart,m=i.selectsEnd,g=i.selectsRange,f=i.startDate,h=i.endDate,v=(o=t.props.selectingDate)!==null&&o!==void 0?o:t.props.preSelection;return!(u||m||g)||!v?!1:u&&h?lm(v,h,n,c):m&&f||g&&f&&!h?lm(f,v,n,c):!1},t.isWeekInMonth=function(n){var o=t.props.day,i=Kr(n,6);return jn(n,o)||jn(i,o)},t.isCurrentMonth=function(n,o){return Lt(n)===Lt(aa())&&o===On(aa())},t.isCurrentQuarter=function(n,o){return Lt(n)===Lt(aa())&&o===El(aa())},t.isSelectedMonth=function(n,o,i){return On(i)===o&&Lt(n)===Lt(i)},t.isSelectMonthInList=function(n,o,i){return i.some(function(c){return t.isSelectedMonth(n,o,c)})},t.isSelectedQuarter=function(n,o,i){return El(n)===o&&Lt(n)===Lt(i)},t.isMonthSelected=function(){var n=t.props,o=n.day,i=n.selected,c=n.selectedDates,u=n.selectsMultiple,m=On(o);return u?c==null?void 0:c.some(function(g){return t.isSelectedMonth(o,m,g)}):!!i&&t.isSelectedMonth(o,m,i)},t.renderWeeks=function(){for(var n=[],o=t.props.fixedHeight,i=0,c=!1,u=Hs(es(t.props.day),t.props.locale,t.props.calendarStartDay),m=function(x){return t.props.showWeekPicker?Hs(x,t.props.locale,t.props.calendarStartDay):t.props.preSelection},g=function(x){return t.props.showWeekPicker?Hs(x,t.props.locale,t.props.calendarStartDay):t.props.selected},f=t.props.selected?g(t.props.selected):void 0,h=t.props.preSelection?m(t.props.preSelection):void 0;n.push(e.createElement(dI,Zt({},t.props,{ariaLabelPrefix:t.props.weekAriaLabelPrefix,key:i,day:u,month:On(t.props.day),onDayClick:t.handleDayClick,onDayMouseEnter:t.handleDayMouseEnter,selected:f,preSelection:h,showWeekNumber:t.props.showWeekNumbers}))),!c;){i++,u=zm(u,1);var v=o&&i>=uI,S=!o&&!t.isWeekInMonth(u);if(v||S)if(t.props.peekNextMonth)c=!0;else break}return n},t.onMonthClick=function(n,o){var i=t.isMonthDisabledForLabelDate(o),c=i.isDisabled,u=i.labelDate;c||t.handleDayClick(es(u),n)},t.onMonthMouseEnter=function(n){var o=t.isMonthDisabledForLabelDate(n),i=o.isDisabled,c=o.labelDate;i||t.handleDayMouseEnter(es(c))},t.handleMonthNavigation=function(n,o){var i,c,u,m;(c=(i=t.props).setPreSelection)===null||c===void 0||c.call(i,o),(m=(u=t.MONTH_REFS[n])===null||u===void 0?void 0:u.current)===null||m===void 0||m.focus()},t.handleKeyboardNavigation=function(n,o,i){var c,u=t.props,m=u.selected,g=u.preSelection,f=u.setPreSelection,h=u.minDate,v=u.maxDate,S=u.showFourColumnMonthYearPicker,x=u.showTwoColumnMonthYearPicker;if(g){var E=P2(S,x),N=t.getVerticalOffset(E),C=(c=fh[E])===null||c===void 0?void 0:c.grid,I=function(z,M,O){var U,Z,H=M,V=O;switch(z){case Ye.ArrowRight:H=eo(M,im),V=O===11?0:O+im;break;case Ye.ArrowLeft:H=wl(M,im),V=O===0?11:O-im;break;case Ye.ArrowUp:H=wl(M,N),V=!((U=C==null?void 0:C[0])===null||U===void 0)&&U.includes(O)?O+12-N:O-N;break;case Ye.ArrowDown:H=eo(M,N),V=!((Z=C==null?void 0:C[C.length-1])===null||Z===void 0)&&Z.includes(O)?O-12+N:O+N;break}return{newCalculatedDate:H,newCalculatedMonth:V}},A=function(z,M,O){for(var U=40,Z=z,H=!1,V=0,F=I(Z,M,O),R=F.newCalculatedDate,D=F.newCalculatedMonth;!H;){if(V>=U){R=M,D=O;break}if(h&&R<h){Z=Ye.ArrowRight;var j=I(Z,R,D);R=j.newCalculatedDate,D=j.newCalculatedMonth}if(v&&R>v){Z=Ye.ArrowLeft;var j=I(Z,R,D);R=j.newCalculatedDate,D=j.newCalculatedMonth}if(JN(R,t.props)){var j=I(Z,R,D);R=j.newCalculatedDate,D=j.newCalculatedMonth}else H=!0;V++}return{newCalculatedDate:R,newCalculatedMonth:D}};if(o===Ye.Enter){t.isMonthDisabled(i)||(t.onMonthClick(n,i),f==null||f(m));return}var _=A(o,g,i),k=_.newCalculatedDate,B=_.newCalculatedMonth;switch(o){case Ye.ArrowRight:case Ye.ArrowLeft:case Ye.ArrowUp:case Ye.ArrowDown:t.handleMonthNavigation(B,k);break}}},t.getVerticalOffset=function(n){var o,i;return(i=(o=fh[n])===null||o===void 0?void 0:o.verticalNavigationOffset)!==null&&i!==void 0?i:0},t.onMonthKeyDown=function(n,o){var i=t.props,c=i.disabledKeyboardNavigation,u=i.handleOnMonthKeyDown,m=n.key;m!==Ye.Tab&&n.preventDefault(),c||t.handleKeyboardNavigation(n,m,o),u&&u(n)},t.onQuarterClick=function(n,o){var i=yi(t.props.day,o);om(i,t.props)||t.handleDayClick(v2(i),n)},t.onQuarterMouseEnter=function(n){var o=yi(t.props.day,n);om(o,t.props)||t.handleDayMouseEnter(v2(o))},t.handleQuarterNavigation=function(n,o){var i,c,u,m;t.isDisabled(o)||t.isExcluded(o)||((c=(i=t.props).setPreSelection)===null||c===void 0||c.call(i,o),(m=(u=t.QUARTER_REFS[n-1])===null||u===void 0?void 0:u.current)===null||m===void 0||m.focus())},t.onQuarterKeyDown=function(n,o){var i,c,u=n.key;if(!t.props.disabledKeyboardNavigation)switch(u){case Ye.Enter:t.onQuarterClick(n,o),(c=(i=t.props).setPreSelection)===null||c===void 0||c.call(i,t.props.selected);break;case Ye.ArrowRight:if(!t.props.preSelection)break;t.handleQuarterNavigation(o===4?1:o+1,W0(t.props.preSelection,1));break;case Ye.ArrowLeft:if(!t.props.preSelection)break;t.handleQuarterNavigation(o===1?4:o-1,FE(t.props.preSelection));break}},t.isMonthDisabledForLabelDate=function(n){var o,i=t.props,c=i.day,u=i.minDate,m=i.maxDate,g=i.excludeDates,f=i.includeDates,h=Pr(c,n);return{isDisabled:(o=(u||m||g||f)&&e5(h,t.props))!==null&&o!==void 0?o:!1,labelDate:h}},t.isMonthDisabled=function(n){var o=t.isMonthDisabledForLabelDate(n).isDisabled;return o},t.getMonthClassNames=function(n){var o=t.props,i=o.day,c=o.startDate,u=o.endDate,m=o.preSelection,g=o.monthClassName,f=g?g(Pr(i,n)):void 0,h=t.getSelection();return In("react-datepicker__month-text","react-datepicker__month-".concat(n),f,{"react-datepicker__month-text--disabled":t.isMonthDisabled(n),"react-datepicker__month-text--selected":h?t.isSelectMonthInList(i,n,h):void 0,"react-datepicker__month-text--keyboard-selected":!t.props.disabledKeyboardNavigation&&m&&t.isSelectedMonth(i,n,m)&&!t.isMonthSelected()&&!t.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":t.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":c&&u?rm(c,u,n,i):void 0,"react-datepicker__month-text--range-start":t.isRangeStartMonth(n),"react-datepicker__month-text--range-end":t.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":t.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":t.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":t.isCurrentMonth(i,n)})},t.getTabIndex=function(n){if(t.props.preSelection==null)return"-1";var o=On(t.props.preSelection),i=t.isMonthDisabledForLabelDate(o).isDisabled,c=n===o&&!(i||t.props.disabledKeyboardNavigation)?"0":"-1";return c},t.getQuarterTabIndex=function(n){if(t.props.preSelection==null)return"-1";var o=El(t.props.preSelection),i=om(t.props.day,t.props),c=n===o&&!(i||t.props.disabledKeyboardNavigation)?"0":"-1";return c},t.getAriaLabel=function(n){var o=t.props,i=o.chooseDayAriaLabelPrefix,c=i===void 0?"Choose":i,u=o.disabledDayAriaLabelPrefix,m=u===void 0?"Not available":u,g=o.day,f=o.locale,h=Pr(g,n),v=t.isDisabled(h)||t.isExcluded(h)?m:c;return"".concat(v," ").concat(Ta(h,"MMMM yyyy",f))},t.getQuarterClassNames=function(n){var o=t.props,i=o.day,c=o.startDate,u=o.endDate,m=o.selected,g=o.minDate,f=o.maxDate,h=o.excludeDates,v=o.includeDates,S=o.filterDate,x=o.preSelection,E=o.disabledKeyboardNavigation,N=(g||f||h||v||S)&&om(yi(i,n),t.props);return In("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":N,"react-datepicker__quarter-text--selected":m?t.isSelectedQuarter(i,n,m):void 0,"react-datepicker__quarter-text--keyboard-selected":!E&&x&&t.isSelectedQuarter(i,n,x)&&!N,"react-datepicker__quarter-text--in-selecting-range":t.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":c&&u?lm(c,u,n,i):void 0,"react-datepicker__quarter-text--range-start":t.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":t.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":t.isCurrentQuarter(i,n)})},t.getMonthContent=function(n){var o=t.props,i=o.showFullMonthYearPicker,c=o.renderMonthContent,u=o.locale,m=o.day,g=KE(n,u),f=K0(n,u);return c?c(n,g,f,m):i?f:g},t.getQuarterContent=function(n){var o,i=t.props,c=i.renderQuarterContent,u=i.locale,m=QN(n,u);return(o=c==null?void 0:c(n,m))!==null&&o!==void 0?o:m},t.renderMonths=function(){var n,o=t.props,i=o.showTwoColumnMonthYearPicker,c=o.showFourColumnMonthYearPicker,u=o.day,m=o.selected,g=(n=fh[P2(c,i)])===null||n===void 0?void 0:n.grid;return g==null?void 0:g.map(function(f,h){return e.createElement("div",{className:"react-datepicker__month-wrapper",key:h},f.map(function(v,S){return e.createElement("div",{ref:t.MONTH_REFS[v],key:S,onClick:function(x){t.onMonthClick(x,v)},onKeyDown:function(x){n5(x)&&(x.preventDefault(),x.key=Ye.Enter),t.onMonthKeyDown(x,v)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onMonthMouseEnter(v)},onPointerEnter:t.props.usePointerEvent?function(){return t.onMonthMouseEnter(v)}:void 0,tabIndex:Number(t.getTabIndex(v)),className:t.getMonthClassNames(v),"aria-disabled":t.isMonthDisabled(v),role:"option","aria-label":t.getAriaLabel(v),"aria-current":t.isCurrentMonth(u,v)?"date":void 0,"aria-selected":m?t.isSelectedMonth(u,v,m):void 0},t.getMonthContent(v))}))})},t.renderQuarters=function(){var n=t.props,o=n.day,i=n.selected,c=[1,2,3,4];return e.createElement("div",{className:"react-datepicker__quarter-wrapper"},c.map(function(u,m){return e.createElement("div",{key:m,ref:t.QUARTER_REFS[m],role:"option",onClick:function(g){t.onQuarterClick(g,u)},onKeyDown:function(g){t.onQuarterKeyDown(g,u)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onQuarterMouseEnter(u)},onPointerEnter:t.props.usePointerEvent?function(){return t.onQuarterMouseEnter(u)}:void 0,className:t.getQuarterClassNames(u),"aria-selected":i?t.isSelectedQuarter(o,u,i):void 0,tabIndex:Number(t.getQuarterTabIndex(u)),"aria-current":t.isCurrentQuarter(o,u)?"date":void 0},t.getQuarterContent(u))}))},t.getClassNames=function(){var n=t.props,o=n.selectingDate,i=n.selectsStart,c=n.selectsEnd,u=n.showMonthYearPicker,m=n.showQuarterYearPicker,g=n.showWeekPicker;return In("react-datepicker__month",{"react-datepicker__month--selecting-range":o&&(i||c)},{"react-datepicker__monthPicker":u},{"react-datepicker__quarterPicker":m},{"react-datepicker__weekPicker":g})},t}return r.prototype.getSelection=function(){var t=this.props,n=t.selected,o=t.selectedDates,i=t.selectsMultiple;if(i)return o;if(n)return[n]},r.prototype.render=function(){var t=this.props,n=t.showMonthYearPicker,o=t.showQuarterYearPicker,i=t.day,c=t.ariaLabelPrefix,u=c===void 0?"Month ":c,m=u?u.trim()+" ":"";return e.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(m).concat(Ta(i,"MMMM, yyyy",this.props.locale)),role:"listbox"},n?this.renderMonths():o?this.renderQuarters():this.renderWeeks())},r}(b.Component),pI=function(a){En(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.isSelectedMonth=function(n){return t.props.month===n},t.renderOptions=function(){return t.props.monthNames.map(function(n,o){return e.createElement("div",{className:t.isSelectedMonth(o)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:t.onChange.bind(t,o),"aria-selected":t.isSelectedMonth(o)?"true":void 0},t.isSelectedMonth(o)?e.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",n)})},t.onChange=function(n){return t.props.onChange(n)},t.handleClickOutside=function(){return t.props.onCancel()},t}return r.prototype.render=function(){return e.createElement(Hp,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},r}(b.Component),fI=function(a){En(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(n){return n.map(function(o,i){return e.createElement("option",{key:o,value:i},o)})},t.renderSelectMode=function(n){return e.createElement("select",{value:t.props.month,className:"react-datepicker__month-select",onChange:function(o){return t.onChange(parseInt(o.target.value))}},t.renderSelectOptions(n))},t.renderReadView=function(n,o){return e.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:t.toggleDropdown},e.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),e.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},o[t.props.month]))},t.renderDropdown=function(n){return e.createElement(pI,Zt({key:"dropdown"},t.props,{monthNames:n,onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(n){var o=t.state.dropdownVisible,i=[t.renderReadView(!o,n)];return o&&i.unshift(t.renderDropdown(n)),i},t.onChange=function(n){t.toggleDropdown(),n!==t.props.month&&t.props.onChange(n)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return r.prototype.render=function(){var t=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(i){return KE(i,t.props.locale)}:function(i){return K0(i,t.props.locale)}),o;switch(this.props.dropdownMode){case"scroll":o=this.renderScrollMode(n);break;case"select":o=this.renderSelectMode(n);break}return e.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},o)},r}(b.Component);function gI(a,r){for(var t=[],n=es(a),o=es(r);!rs(n,o);)t.push(aa(n)),n=eo(n,1);return t}var hI=function(a){En(r,a);function r(t){var n=a.call(this,t)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(o){var i=e0(o),c=fo(n.props.date,o)&&jn(n.props.date,o);return e.createElement("div",{className:c?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:i,onClick:n.onChange.bind(n,i),"aria-selected":c?"true":void 0},c?e.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",Ta(o,n.props.dateFormat,n.props.locale))})},n.onChange=function(o){return n.props.onChange(o)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:gI(n.props.minDate,n.props.maxDate)},n}return r.prototype.render=function(){var t=In({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return e.createElement(Hp,{className:t,onClickOutside:this.handleClickOutside},this.renderOptions())},r}(b.Component),yI=function(a){En(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var n=es(t.props.minDate),o=es(t.props.maxDate),i=[];!rs(n,o);){var c=e0(n);i.push(e.createElement("option",{key:c,value:c},Ta(n,t.props.dateFormat,t.props.locale))),n=eo(n,1)}return i},t.onSelectChange=function(n){t.onChange(parseInt(n.target.value))},t.renderSelectMode=function(){return e.createElement("select",{value:e0(es(t.props.date)),className:"react-datepicker__month-year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(n){var o=Ta(t.props.date,t.props.dateFormat,t.props.locale);return e.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:t.toggleDropdown},e.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),e.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},o))},t.renderDropdown=function(){return e.createElement(hI,Zt({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var n=t.state.dropdownVisible,o=[t.renderReadView(!n)];return n&&o.unshift(t.renderDropdown()),o},t.onChange=function(n){t.toggleDropdown();var o=aa(n);fo(t.props.date,o)&&jn(t.props.date,o)||t.props.onChange(o)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return r.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return e.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},t)},r}(b.Component),bI=function(a){En(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.state={height:null},t.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,o,i;t.list&&(t.list.scrollTop=(i=t.centerLi&&r.calcCenterPosition(t.props.monthRef?t.props.monthRef.clientHeight-((o=(n=t.header)===null||n===void 0?void 0:n.clientHeight)!==null&&o!==void 0?o:0):t.list.clientHeight,t.centerLi))!==null&&i!==void 0?i:0)})},t.handleClick=function(n){var o,i;(t.props.minTime||t.props.maxTime)&&C2(n,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&S2(n,t.props)||(i=(o=t.props).onChange)===null||i===void 0||i.call(o,n)},t.isSelectedTime=function(n){return t.props.selected&&sI(t.props.selected,n)},t.isDisabledTime=function(n){return(t.props.minTime||t.props.maxTime)&&C2(n,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&S2(n,t.props)},t.liClasses=function(n){var o,i=["react-datepicker__time-list-item",t.props.timeClassName?t.props.timeClassName(n):void 0];return t.isSelectedTime(n)&&i.push("react-datepicker__time-list-item--selected"),t.isDisabledTime(n)&&i.push("react-datepicker__time-list-item--disabled"),t.props.injectTimes&&(Xo(n)*3600+Ko(n)*60+js(n))%(((o=t.props.intervals)!==null&&o!==void 0?o:r.defaultProps.intervals)*60)!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},t.handleOnKeyDown=function(n,o){var i,c;n.key===Ye.Space&&(n.preventDefault(),n.key=Ye.Enter),(n.key===Ye.ArrowUp||n.key===Ye.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===Ye.ArrowDown||n.key===Ye.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===Ye.Enter&&t.handleClick(o),(c=(i=t.props).handleOnKeyDown)===null||c===void 0||c.call(i,n)},t.renderTimes=function(){for(var n,o=[],i=typeof t.props.format=="string"?t.props.format:"p",c=(n=t.props.intervals)!==null&&n!==void 0?n:r.defaultProps.intervals,u=t.props.selected||t.props.openToDate||aa(),m=km(u),g=t.props.injectTimes&&t.props.injectTimes.sort(function(N,C){return N.getTime()-C.getTime()}),f=60*oI(u),h=f/c,v=0;v<h;v++){var S=Jh(m,v*c);if(o.push(S),g){var x=rI(m,S,v,c,g);o=o.concat(x)}}var E=o.reduce(function(N,C){return C.getTime()<=u.getTime()?C:N},o[0]);return o.map(function(N){return e.createElement("li",{key:N.valueOf(),onClick:t.handleClick.bind(t,N),className:t.liClasses(N),ref:function(C){N===E&&(t.centerLi=C)},onKeyDown:function(C){t.handleOnKeyDown(C,N)},tabIndex:N===E?0:-1,role:"option","aria-selected":t.isSelectedTime(N)?"true":void 0,"aria-disabled":t.isDisabledTime(N)?"true":void 0},Ta(N,i,t.props.locale))})},t.renderTimeCaption=function(){return t.props.showTimeCaption===!1?e.createElement(e.Fragment,null):e.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(t.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){t.header=n}},e.createElement("div",{className:"react-datepicker-time__header"},t.props.timeCaption))},t}return Object.defineProperty(r,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),r.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},r.prototype.componentWillUnmount=function(){var t;(t=this.resizeObserver)===null||t===void 0||t.disconnect()},r.prototype.observeDatePickerHeightChanges=function(){var t=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){t.updateContainerHeight()}),this.resizeObserver.observe(n))},r.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},r.prototype.render=function(){var t=this,n,o=this.state.height;return e.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:r.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),e.createElement("div",{className:"react-datepicker__time"},e.createElement("div",{className:"react-datepicker__time-box"},e.createElement("ul",{className:"react-datepicker__time-list",ref:function(i){t.list=i},style:o?{height:o}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},r.calcCenterPosition=function(t,n){return n.offsetTop-(t/2-n.clientHeight/2)},r}(b.Component),L2=3,vI=function(a){En(r,a);function r(t){var n=a.call(this,t)||this;return n.YEAR_REFS=yo([],Array(n.props.yearItemNumber),!0).map(function(){return b.createRef()}),n.isDisabled=function(o){return Br(o,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(o){return ey(o,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var o;return(o=n.props.selectingDate)!==null&&o!==void 0?o:n.props.preSelection},n.updateFocusOnPaginate=function(o){var i=function(){var c,u;(u=(c=n.YEAR_REFS[o])===null||c===void 0?void 0:c.current)===null||u===void 0||u.focus()};window.requestAnimationFrame(i)},n.handleYearClick=function(o,i){n.props.onDayClick&&n.props.onDayClick(o,i)},n.handleYearNavigation=function(o,i){var c,u,m,g,f=n.props,h=f.date,v=f.yearItemNumber;if(!(h===void 0||v===void 0)){var S=Ws(h,v).startPeriod;n.isDisabled(i)||n.isExcluded(i)||((u=(c=n.props).setPreSelection)===null||u===void 0||u.call(c,i),o-S<0?n.updateFocusOnPaginate(v-(S-o)):o-S>=v?n.updateFocusOnPaginate(Math.abs(v-(o-S))):(g=(m=n.YEAR_REFS[o-S])===null||m===void 0?void 0:m.current)===null||g===void 0||g.focus())}},n.isSameDay=function(o,i){return qt(o,i)},n.isCurrentYear=function(o){return o===Lt(aa())},n.isRangeStart=function(o){return n.props.startDate&&n.props.endDate&&fo(po(aa(),o),n.props.startDate)},n.isRangeEnd=function(o){return n.props.startDate&&n.props.endDate&&fo(po(aa(),o),n.props.endDate)},n.isInRange=function(o){return sm(o,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(o){var i=n.props,c=i.selectsStart,u=i.selectsEnd,m=i.selectsRange,g=i.startDate,f=i.endDate;return!(c||u||m)||!n.selectingDate()?!1:c&&f?sm(o,n.selectingDate(),f):u&&g||m&&g&&!f?sm(o,g,n.selectingDate()):!1},n.isSelectingRangeStart=function(o){var i;if(!n.isInSelectingRange(o))return!1;var c=n.props,u=c.startDate,m=c.selectsStart,g=po(aa(),o);return m?fo(g,(i=n.selectingDate())!==null&&i!==void 0?i:null):fo(g,u??null)},n.isSelectingRangeEnd=function(o){var i;if(!n.isInSelectingRange(o))return!1;var c=n.props,u=c.endDate,m=c.selectsEnd,g=c.selectsRange,f=po(aa(),o);return m||g?fo(f,(i=n.selectingDate())!==null&&i!==void 0?i:null):fo(f,u??null)},n.isKeyboardSelected=function(o){if(!(n.props.date===void 0||n.props.selected==null||n.props.preSelection==null)){var i=n.props,c=i.minDate,u=i.maxDate,m=i.excludeDates,g=i.includeDates,f=i.filterDate,h=nd(po(n.props.date,o)),v=(c||u||m||g||f)&&Nm(o,n.props);return!n.props.disabledKeyboardNavigation&&!n.props.inline&&!qt(h,nd(n.props.selected))&&qt(h,nd(n.props.preSelection))&&!v}},n.isSelectedYear=function(o){var i=n.props,c=i.selectsMultiple,u=i.selected,m=i.selectedDates;return c?m==null?void 0:m.some(function(g){return o===Lt(g)}):!!u&&o===Lt(u)},n.onYearClick=function(o,i){var c=n.props.date;c!==void 0&&n.handleYearClick(nd(po(c,i)),o)},n.onYearKeyDown=function(o,i){var c,u,m=o.key,g=n.props,f=g.date,h=g.yearItemNumber,v=g.handleOnKeyDown;if(m!==Ye.Tab&&o.preventDefault(),!n.props.disabledKeyboardNavigation)switch(m){case Ye.Enter:if(n.props.selected==null)break;n.onYearClick(o,i),(u=(c=n.props).setPreSelection)===null||u===void 0||u.call(c,n.props.selected);break;case Ye.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(i+1,Qo(n.props.preSelection,1));break;case Ye.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(i-1,Ri(n.props.preSelection,1));break;case Ye.ArrowUp:{if(f===void 0||h===void 0||n.props.preSelection==null)break;var S=Ws(f,h).startPeriod,x=L2,E=i-x;if(E<S){var N=h%x;i>=S&&i<S+N?x=N:x+=N,E=i-x}n.handleYearNavigation(E,Ri(n.props.preSelection,x));break}case Ye.ArrowDown:{if(f===void 0||h===void 0||n.props.preSelection==null)break;var C=Ws(f,h).endPeriod,x=L2,E=i+x;if(E>C){var N=h%x;i<=C&&i>C-N?x=N:x+=N,E=i+x}n.handleYearNavigation(E,Qo(n.props.preSelection,x));break}}v&&v(o)},n.getYearClassNames=function(o){var i=n.props,c=i.date,u=i.minDate,m=i.maxDate,g=i.excludeDates,f=i.includeDates,h=i.filterDate,v=i.yearClassName;return In("react-datepicker__year-text","react-datepicker__year-".concat(o),c?v==null?void 0:v(po(c,o)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(o),"react-datepicker__year-text--disabled":(u||m||g||f||h)&&Nm(o,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(o),"react-datepicker__year-text--range-start":n.isRangeStart(o),"react-datepicker__year-text--range-end":n.isRangeEnd(o),"react-datepicker__year-text--in-range":n.isInRange(o),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(o),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(o),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(o),"react-datepicker__year-text--today":n.isCurrentYear(o)})},n.getYearTabIndex=function(o){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var i=Lt(n.props.preSelection),c=Nm(o,n.props);return o===i&&!c?"0":"-1"},n.getYearContent=function(o){return n.props.renderYearContent?n.props.renderYearContent(o):o},n}return r.prototype.render=function(){var t=this,n=[],o=this.props,i=o.date,c=o.yearItemNumber,u=o.onYearMouseEnter,m=o.onYearMouseLeave;if(i===void 0)return null;for(var g=Ws(i,c),f=g.startPeriod,h=g.endPeriod,v=function(E){n.push(e.createElement("div",{ref:S.YEAR_REFS[E-f],onClick:function(N){t.onYearClick(N,E)},onKeyDown:function(N){n5(N)&&(N.preventDefault(),N.key=Ye.Enter),t.onYearKeyDown(N,E)},tabIndex:Number(S.getYearTabIndex(E)),className:S.getYearClassNames(E),onMouseEnter:S.props.usePointerEvent?void 0:function(N){return u(N,E)},onPointerEnter:S.props.usePointerEvent?function(N){return u(N,E)}:void 0,onMouseLeave:S.props.usePointerEvent?void 0:function(N){return m(N,E)},onPointerLeave:S.props.usePointerEvent?function(N){return m(N,E)}:void 0,key:E,"aria-current":S.isCurrentYear(E)?"date":void 0},S.getYearContent(E)))},S=this,x=f;x<=h;x++)v(x);return e.createElement("div",{className:"react-datepicker__year"},e.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},r}(b.Component);function xI(a,r,t,n){for(var o=[],i=0;i<2*r+1;i++){var c=a+r-i,u=!0;t&&(u=Lt(t)<=c),n&&u&&(u=Lt(n)>=c),u&&o.push(c)}return o}var EI=function(a){En(r,a);function r(t){var n=a.call(this,t)||this;n.renderOptions=function(){var u=n.props.year,m=n.state.yearsList.map(function(h){return e.createElement("div",{className:u===h?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:h,onClick:n.onChange.bind(n,h),"aria-selected":u===h?"true":void 0},u===h?e.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",h)}),g=n.props.minDate?Lt(n.props.minDate):null,f=n.props.maxDate?Lt(n.props.maxDate):null;return(!f||!n.state.yearsList.find(function(h){return h===f}))&&m.unshift(e.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},e.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!g||!n.state.yearsList.find(function(h){return h===g}))&&m.push(e.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},e.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),m},n.onChange=function(u){n.props.onChange(u)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(u){var m=n.state.yearsList.map(function(g){return g+u});n.setState({yearsList:m})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var o=t.yearDropdownItemNumber,i=t.scrollableYearDropdown,c=o||(i?10:5);return n.state={yearsList:xI(n.props.year,c,n.props.minDate,n.props.maxDate)},n.dropdownRef=b.createRef(),n}return r.prototype.componentDidMount=function(){var t=this.dropdownRef.current;if(t){var n=t.children?Array.from(t.children):null,o=n?n.find(function(i){return i.ariaSelected}):null;t.scrollTop=o&&o instanceof HTMLElement?o.offsetTop+(o.clientHeight-t.clientHeight)/2:(t.scrollHeight-t.clientHeight)/2}},r.prototype.render=function(){var t=In({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return e.createElement(Hp,{className:t,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},r}(b.Component),wI=function(a){En(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var n=t.props.minDate?Lt(t.props.minDate):1900,o=t.props.maxDate?Lt(t.props.maxDate):2100,i=[],c=n;c<=o;c++)i.push(e.createElement("option",{key:c,value:c},c));return i},t.onSelectChange=function(n){t.onChange(parseInt(n.target.value))},t.renderSelectMode=function(){return e.createElement("select",{value:t.props.year,className:"react-datepicker__year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(n){return e.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(o){return t.toggleDropdown(o)}},e.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),e.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},t.props.year))},t.renderDropdown=function(){return e.createElement(EI,Zt({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var n=t.state.dropdownVisible,o=[t.renderReadView(!n)];return n&&o.unshift(t.renderDropdown()),o},t.onChange=function(n){t.toggleDropdown(),n!==t.props.year&&t.props.onChange(n)},t.toggleDropdown=function(n){t.setState({dropdownVisible:!t.state.dropdownVisible},function(){t.props.adjustDateOnChange&&t.handleYearChange(t.props.date,n)})},t.handleYearChange=function(n,o){var i;(i=t.onSelect)===null||i===void 0||i.call(t,n,o),t.setOpen()},t.onSelect=function(n,o){var i,c;(c=(i=t.props).onSelect)===null||c===void 0||c.call(i,n,o)},t.setOpen=function(){var n,o;(o=(n=t.props).setOpen)===null||o===void 0||o.call(n,!0)},t}return r.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return e.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},t)},r}(b.Component),SI=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],CI=function(a){var r=(a.className||"").split(/\s+/);return SI.some(function(t){return r.indexOf(t)>=0})},_I=function(a){En(r,a);function r(t){var n=a.call(this,t)||this;return n.monthContainer=void 0,n.handleClickOutside=function(o){n.props.onClickOutside(o)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(o){var i,c;CI(o.target)&&((c=(i=n.props).onDropdownFocus)===null||c===void 0||c.call(i,o))},n.getDateInView=function(){var o=n.props,i=o.preSelection,c=o.selected,u=o.openToDate,m=t5(n.props),g=a5(n.props),f=aa(),h=u||c||i;return h||(m&&kl(f,m)?m:g&&rs(f,g)?g:f)},n.increaseMonth=function(){n.setState(function(o){var i=o.date;return{date:eo(i,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(o){var i=o.date;return{date:wl(i,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(o,i,c){n.props.onSelect(o,i,c),n.props.setPreSelection&&n.props.setPreSelection(o)},n.handleDayMouseEnter=function(o){n.setState({selectingDate:o}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(o)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(o,i){n.setState({selectingDate:po(aa(),i)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(o,i)},n.handleYearMouseLeave=function(o,i){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(o,i)},n.handleYearChange=function(o){var i,c,u,m;(c=(i=n.props).onYearChange)===null||c===void 0||c.call(i,o),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(o),(m=(u=n.props).setOpen)===null||m===void 0||m.call(u,!0)),n.props.setPreSelection&&n.props.setPreSelection(o)},n.getEnabledPreSelectionDateForMonth=function(o){if(!Br(o,n.props))return o;for(var i=es(o),c=GN(o),u=_E(c,i),m=null,g=0;g<=u;g++){var f=Kr(i,g);if(!Br(f,n.props)){m=f;break}}return m},n.handleMonthChange=function(o){var i,c,u,m=(i=n.getEnabledPreSelectionDateForMonth(o))!==null&&i!==void 0?i:o;n.handleCustomMonthChange(m),n.props.adjustDateOnChange&&(n.props.onSelect(m),(u=(c=n.props).setOpen)===null||u===void 0||u.call(c,!0)),n.props.setPreSelection&&n.props.setPreSelection(m)},n.handleCustomMonthChange=function(o){var i,c;(c=(i=n.props).onMonthChange)===null||c===void 0||c.call(i,o),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(o){n.handleYearChange(o),n.handleMonthChange(o)},n.changeYear=function(o){n.setState(function(i){var c=i.date;return{date:po(c,Number(o))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(o){n.setState(function(i){var c=i.date;return{date:Pr(c,Number(o))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(o){n.setState(function(i){var c=i.date;return{date:po(Pr(c,On(o)),Lt(o))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(o){o===void 0&&(o=n.state.date);var i=Hs(o,n.props.locale,n.props.calendarStartDay),c=[];return n.props.showWeekNumbers&&c.push(e.createElement("div",{key:"W",className:"react-datepicker__day-name"},n.props.weekLabel||"#")),c.concat([0,1,2,3,4,5,6].map(function(u){var m=Kr(i,u),g=n.formatWeekday(m,n.props.locale),f=n.props.weekDayClassName?n.props.weekDayClassName(m):void 0;return e.createElement("div",{key:u,"aria-label":Ta(m,"EEEE",n.props.locale),className:In("react-datepicker__day-name",f)},g)}))},n.formatWeekday=function(o,i){return n.props.formatWeekDay?qN(o,n.props.formatWeekDay,i):n.props.useWeekdaysShort?VN(o,i):ZN(o,i)},n.decreaseYear=function(){n.setState(function(o){var i,c=o.date;return{date:Ri(c,n.props.showYearPicker?(i=n.props.yearItemNumber)!==null&&i!==void 0?i:r.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var o,i,c;if(!n.props.renderCustomHeader){var u=(o=n.props.monthsShown)!==null&&o!==void 0?o:r.defaultProps.monthsShown,m=n.props.showPreviousMonths?u-1:0,g=(i=n.props.monthSelectedIn)!==null&&i!==void 0?i:m,f=wl(n.state.date,g),h;switch(!0){case n.props.showMonthYearPicker:h=N2(n.state.date,n.props);break;case n.props.showYearPicker:h=eI(n.state.date,n.props);break;case n.props.showQuarterYearPicker:h=XN(n.state.date,n.props);break;default:h=_2(f,n.props);break}if(!(!((c=n.props.forceShowMonthNavigation)!==null&&c!==void 0?c:r.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&h||n.props.showTimeSelectOnly)){var v=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],S=["react-datepicker__navigation","react-datepicker__navigation--previous"],x=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(x=n.decreaseYear),h&&n.props.showDisabledMonthNavigation&&(S.push("react-datepicker__navigation--previous--disabled"),x=void 0);var E=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,N=n.props,C=N.previousMonthButtonLabel,I=C===void 0?r.defaultProps.previousMonthButtonLabel:C,A=N.previousYearButtonLabel,_=A===void 0?r.defaultProps.previousYearButtonLabel:A,k=n.props,B=k.previousMonthAriaLabel,z=B===void 0?typeof I=="string"?I:"Previous Month":B,M=k.previousYearAriaLabel,O=M===void 0?typeof _=="string"?_:"Previous Year":M;return e.createElement("button",{type:"button",className:S.join(" "),onClick:x,onKeyDown:n.props.handleOnKeyDown,"aria-label":E?O:z},e.createElement("span",{className:v.join(" ")},E?_:I))}}},n.increaseYear=function(){n.setState(function(o){var i,c=o.date;return{date:Qo(c,n.props.showYearPicker?(i=n.props.yearItemNumber)!==null&&i!==void 0?i:r.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var o;if(!n.props.renderCustomHeader){var i;switch(!0){case n.props.showMonthYearPicker:i=I2(n.state.date,n.props);break;case n.props.showYearPicker:i=tI(n.state.date,n.props);break;case n.props.showQuarterYearPicker:i=KN(n.state.date,n.props);break;default:i=k2(n.state.date,n.props);break}if(!(!((o=n.props.forceShowMonthNavigation)!==null&&o!==void 0?o:r.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&i||n.props.showTimeSelectOnly)){var c=["react-datepicker__navigation","react-datepicker__navigation--next"],u=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&c.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&c.push("react-datepicker__navigation--next--with-today-button");var m=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(m=n.increaseYear),i&&n.props.showDisabledMonthNavigation&&(c.push("react-datepicker__navigation--next--disabled"),m=void 0);var g=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,f=n.props,h=f.nextMonthButtonLabel,v=h===void 0?r.defaultProps.nextMonthButtonLabel:h,S=f.nextYearButtonLabel,x=S===void 0?r.defaultProps.nextYearButtonLabel:S,E=n.props,N=E.nextMonthAriaLabel,C=N===void 0?typeof v=="string"?v:"Next Month":N,I=E.nextYearAriaLabel,A=I===void 0?typeof x=="string"?x:"Next Year":I;return e.createElement("button",{type:"button",className:c.join(" "),onClick:m,onKeyDown:n.props.handleOnKeyDown,"aria-label":g?A:C},e.createElement("span",{className:u.join(" ")},g?x:v))}}},n.renderCurrentMonth=function(o){o===void 0&&(o=n.state.date);var i=["react-datepicker__current-month"];return n.props.showYearDropdown&&i.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&i.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&i.push("react-datepicker__current-month--hasMonthYearDropdown"),e.createElement("h2",{className:i.join(" ")},Ta(o,n.props.dateFormat,n.props.locale))},n.renderYearDropdown=function(o){if(o===void 0&&(o=!1),!(!n.props.showYearDropdown||o))return e.createElement(wI,Zt({},r.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:Lt(n.state.date)}))},n.renderMonthDropdown=function(o){if(o===void 0&&(o=!1),!(!n.props.showMonthDropdown||o))return e.createElement(fI,Zt({},r.defaultProps,n.props,{month:On(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(o){if(o===void 0&&(o=!1),!(!n.props.showMonthYearDropdown||o))return e.createElement(yI,Zt({},r.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(o){n.props.onSelect(x2(),o),n.props.setPreSelection&&n.props.setPreSelection(x2())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return e.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDefaultHeader=function(o){var i=o.monthDate,c=o.i;return e.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(i),e.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(c!==0),n.renderMonthYearDropdown(c!==0),n.renderYearDropdown(c!==0)),e.createElement("div",{className:"react-datepicker__day-names"},n.header(i)))},n.renderCustomHeader=function(o){var i,c,u=o.monthDate,m=o.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var g=_2(n.state.date,n.props),f=k2(n.state.date,n.props),h=N2(n.state.date,n.props),v=I2(n.state.date,n.props),S=!n.props.showMonthYearPicker&&!n.props.showQuarterYearPicker&&!n.props.showYearPicker;return e.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(c=(i=n.props).renderCustomHeader)===null||c===void 0?void 0:c.call(i,Zt(Zt({},n.state),{customHeaderCount:m,monthDate:u,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:g,nextMonthButtonDisabled:f,prevYearButtonDisabled:h,nextYearButtonDisabled:v})),S&&e.createElement("div",{className:"react-datepicker__day-names"},n.header(u)))},n.renderYearHeader=function(o){var i=o.monthDate,c=n.props,u=c.showYearPicker,m=c.yearItemNumber,g=m===void 0?r.defaultProps.yearItemNumber:m,f=Ws(i,g),h=f.startPeriod,v=f.endPeriod;return e.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},u?"".concat(h," - ").concat(v):Lt(i))},n.renderHeader=function(o){var i=o.monthDate,c=o.i,u=c===void 0?0:c,m={monthDate:i,i:u};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(m);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(m);default:return n.renderDefaultHeader(m)}},n.renderMonths=function(){var o,i;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var c=[],u=(o=n.props.monthsShown)!==null&&o!==void 0?o:r.defaultProps.monthsShown,m=n.props.showPreviousMonths?u-1:0,g=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Qo(n.state.date,m):wl(n.state.date,m),f=(i=n.props.monthSelectedIn)!==null&&i!==void 0?i:m,h=0;h<u;++h){var v=h-f+m,S=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Qo(g,v):eo(g,v),x="month-".concat(h),E=h<u-1,N=h>0;c.push(e.createElement("div",{key:x,ref:function(C){n.monthContainer=C??void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:S,i:h}),e.createElement(mI,Zt({},r.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:S,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:h,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:E,monthShowsDuplicateDaysStart:N}))))}return c}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return e.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),e.createElement(vI,Zt({},r.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return e.createElement(bI,Zt({},r.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var o=n.props.selected?new Date(n.props.selected):void 0,i=o&&$p(o)&&!!n.props.selected,c=i?"".concat(D2(o.getHours()),":").concat(D2(o.getMinutes())):"";if(n.props.showTimeInput)return e.createElement(lI,Zt({},r.defaultProps,n.props,{date:o,timeString:c,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var o,i=Ws(n.state.date,(o=n.props.yearItemNumber)!==null&&o!==void 0?o:r.defaultProps.yearItemNumber),c=i.startPeriod,u=i.endPeriod,m;return n.props.showYearPicker?m="".concat(c," - ").concat(u):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?m=Lt(n.state.date):m="".concat(K0(On(n.state.date),n.props.locale)," ").concat(Lt(n.state.date)),e.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&m)},n.renderChildren=function(){if(n.props.children)return e.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=b.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(r,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:Ld}},enumerable:!1,configurable:!0}),r.prototype.componentDidMount=function(){var t=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){t.setState({monthContainer:t.monthContainer})}())},r.prototype.componentDidUpdate=function(t){var n=this;if(this.props.preSelection&&(!qt(this.props.preSelection,t.preSelection)||this.props.monthSelectedIn!==t.monthSelectedIn)){var o=!jn(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return o&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!qt(this.props.openToDate,t.openToDate)&&this.setState({date:this.props.openToDate})},r.prototype.render=function(){var t=this.props.container||FN;return e.createElement(Hp,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},e.createElement("div",{style:{display:"contents"},ref:this.containerRef},e.createElement(t,{className:In("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},r}(b.Component),kI=function(a){var r=a.icon,t=a.className,n=t===void 0?"":t,o=a.onClick,i="react-datepicker__calendar-icon";if(typeof r=="string")return e.createElement("i",{className:"".concat(i," ").concat(r," ").concat(n),"aria-hidden":"true",onClick:o});if(e.isValidElement(r)){var c=r;return e.cloneElement(c,{className:"".concat(c.props.className||""," ").concat(i," ").concat(n),onClick:function(u){typeof c.props.onClick=="function"&&c.props.onClick(u),typeof o=="function"&&o(u)}})}return e.createElement("svg",{className:"".concat(i," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:o},e.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},r5=function(a){En(r,a);function r(t){var n=a.call(this,t)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return r.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},r.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},r.prototype.render=function(){return Md.createPortal(this.props.children,this.el)},r}(b.Component),NI="[tabindex], a, button, input, select, textarea",II=function(a){return(a instanceof HTMLAnchorElement||!a.disabled)&&a.tabIndex!==-1},o5=function(a){En(r,a);function r(t){var n=a.call(this,t)||this;return n.getTabChildren=function(){var o;return Array.prototype.slice.call((o=n.tabLoopRef.current)===null||o===void 0?void 0:o.querySelectorAll(NI),1,-1).filter(II)},n.handleFocusStart=function(){var o=n.getTabChildren();o&&o.length>1&&o[o.length-1].focus()},n.handleFocusEnd=function(){var o=n.getTabChildren();o&&o.length>1&&o[0].focus()},n.tabLoopRef=b.createRef(),n}return r.prototype.render=function(){var t;return((t=this.props.enableTabLoop)!==null&&t!==void 0?t:r.defaultProps.enableTabLoop)?e.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},e.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,e.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},r.defaultProps={enableTabLoop:!0},r}(b.Component);function AI(a){var r=function(t){var n,o=typeof t.hidePopper=="boolean"?t.hidePopper:!0,i=b.useRef(null),c=ON(Zt({open:!o,whileElementsMounted:bN,placement:t.popperPlacement,middleware:yo([_N({padding:15}),CN(10),kN({element:i})],(n=t.popperModifiers)!==null&&n!==void 0?n:[],!0)},t.popperProps)),u=Zt(Zt({},t),{hidePopper:o,popperProps:Zt(Zt({},c),{arrowRef:i})});return e.createElement(a,Zt({},u))};return r}var DI=function(a){En(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),r.prototype.render=function(){var t=this.props,n=t.className,o=t.wrapperClassName,i=t.hidePopper,c=i===void 0?r.defaultProps.hidePopper:i,u=t.popperComponent,m=t.targetComponent,g=t.enableTabLoop,f=t.popperOnKeyDown,h=t.portalId,v=t.portalHost,S=t.popperProps,x=t.showArrow,E=void 0;if(!c){var N=In("react-datepicker-popper",n);E=e.createElement(o5,{enableTabLoop:g},e.createElement("div",{ref:S.refs.setFloating,style:S.floatingStyles,className:N,"data-placement":S.placement,onKeyDown:f},u,x&&e.createElement(MN,{ref:S.arrowRef,context:S.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(E=b.createElement(this.props.popperContainer,{},E)),h&&!c&&(E=e.createElement(r5,{portalId:h,portalHost:v},E));var C=In("react-datepicker-wrapper",o);return e.createElement(e.Fragment,null,e.createElement("div",{ref:S.refs.setReference,className:C},m),E)},r}(b.Component),MI=AI(DI),B2="react-datepicker-ignore-onclickoutside";function RI(a,r){return a&&r?On(a)!==On(r)||Lt(a)!==Lt(r):a!==r}var gh="Date input not valid.",s5=function(a){En(r,a);function r(t){var n=a.call(this,t)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:aa()},n.modifyHolidays=function(){var o;return(o=n.props.holidays)===null||o===void 0?void 0:o.reduce(function(i,c){var u=new Date(c.date);return $p(u)?yo(yo([],i,!0),[Zt(Zt({},c),{date:u})],!1):i},[])},n.calcInitialState=function(){var o,i=n.getPreSelection(),c=t5(n.props),u=a5(n.props),m=c&&kl(i,km(c))?c:u&&rs(i,E2(u))?u:i;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(o=n.props.selectsRange?n.props.startDate:n.props.selected)!==null&&o!==void 0?o:m,highlightDates:A2(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.resetHiddenStatus=function(){n.setState(Zt(Zt({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(Zt(Zt({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var o,i;(i=(o=n.input)===null||o===void 0?void 0:o.focus)===null||i===void 0||i.call(o,{preventScroll:!0})},n.setBlur=function(){var o,i;(i=(o=n.input)===null||o===void 0?void 0:o.blur)===null||i===void 0||i.call(o),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(o,i){i===void 0&&(i=!1),n.setState({open:o,preSelection:o&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:hh},function(){o||n.setState(function(c){return{focused:i?c.focused:!1}},function(){!i&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return Jo(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(o){var i,c,u=n.state.wasHidden,m=u?n.state.open:!0;u&&n.resetHiddenStatus(),n.state.preventFocus||((c=(i=n.props).onFocus)===null||c===void 0||c.call(i,o),m&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.handleBlur=function(o){var i,c;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((c=(i=n.props).onBlur)===null||c===void 0||c.call(i,o)),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(o){var i,c;n.props.inline||n.setOpen(!1),(c=(i=n.props).onClickOutside)===null||c===void 0||c.call(i,o),n.props.withPortal&&o.preventDefault()},n.handleChange=function(){for(var o,i,c,u,m,g=[],f=0;f<arguments.length;f++)g[f]=arguments[f];var h=g[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,g),!h||typeof h.isDefaultPrevented!="function"||h.isDefaultPrevented()))){n.setState({inputValue:(h==null?void 0:h.target)instanceof HTMLInputElement?h.target.value:null,lastPreSelectChange:TI});var v=n.props,S=v.selectsRange,x=v.startDate,E=v.endDate,N=(o=n.props.dateFormat)!==null&&o!==void 0?o:r.defaultProps.dateFormat,C=(i=n.props.strictParsing)!==null&&i!==void 0?i:r.defaultProps.strictParsing,I=(h==null?void 0:h.target)instanceof HTMLInputElement?h.target.value:"";if(S){var A=I.split(N.includes("-")?XE:"-",2).map(function(Z){return Z.trim()}),_=A[0],k=A[1],B=mh(_??"",N,n.props.locale,C),z=mh(k??"",N,n.props.locale,C),M=(x==null?void 0:x.getTime())!==(B==null?void 0:B.getTime()),O=(E==null?void 0:E.getTime())!==(z==null?void 0:z.getTime());if(!M&&!O||B&&Br(B,n.props)||z&&Br(z,n.props))return;(u=(c=n.props).onChange)===null||u===void 0||u.call(c,[B,z],h)}else{var U=mh(I,N,n.props.locale,C,(m=n.props.selected)!==null&&m!==void 0?m:void 0);(U||!I)&&n.setSelected(U,h,!0)}}},n.handleSelect=function(o,i,c){if(!n.props.readOnly){if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&n.sendFocusBackToInput(),n.props.onChangeRaw&&n.props.onChangeRaw(i),n.setSelected(o,i,!1,c),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect)n.setPreSelection(o);else if(!n.props.inline){n.props.selectsRange||n.setOpen(!1);var u=n.props,m=u.startDate,g=u.endDate;m&&!g&&(n.props.swapRange||!T2(o,m))&&n.setOpen(!1)}}},n.setSelected=function(o,i,c,u){var m,g,f=o;if(n.props.showYearPicker){if(f!==null&&Nm(Lt(f),n.props))return}else if(n.props.showMonthYearPicker){if(f!==null&&e5(f,n.props))return}else if(f!==null&&Br(f,n.props))return;var h=n.props,v=h.onChange,S=h.selectsRange,x=h.startDate,E=h.endDate,N=h.selectsMultiple,C=h.selectedDates,I=h.minTime,A=h.swapRange;if(!bl(n.props.selected,f)||n.props.allowSameDay||S||N)if(f!==null&&(n.props.selected&&(!c||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(f=ph(f,{hour:Xo(n.props.selected),minute:Ko(n.props.selected),second:js(n.props.selected)})),!c&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&I&&(f=ph(f,{hour:I.getHours(),minute:I.getMinutes(),second:I.getSeconds()})),n.props.inline||n.setState({preSelection:f}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:u})),S){var _=!x&&!E,k=x&&!E,B=x&&E;_?v==null||v([f,null],i):k&&(f===null?v==null||v([null,null],i):T2(f,x)?A?v==null||v([f,x],i):v==null||v([f,null],i):v==null||v([x,f],i)),B&&(v==null||v([f,null],i))}else if(N){if(f!==null)if(!(C!=null&&C.length))v==null||v([f],i);else{var z=C.some(function(O){return qt(O,f)});if(z){var M=C.filter(function(O){return!qt(O,f)});v==null||v(M,i)}else v==null||v(yo(yo([],C,!0),[f],!1),i)}}else v==null||v(f,i);c||((g=(m=n.props).onSelect)===null||g===void 0||g.call(m,f,i),n.setState({inputValue:null}))},n.setPreSelection=function(o){if(!n.props.readOnly){var i=Jo(n.props.minDate),c=Jo(n.props.maxDate),u=!0;if(o){var m=km(o);if(i&&c)u=rd(o,n.props.minDate,n.props.maxDate);else if(i){var g=km(n.props.minDate);u=rs(o,g)||bl(m,g)}else if(c){var f=E2(n.props.maxDate);u=kl(o,f)||bl(m,f)}}u&&n.setState({preSelection:o})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(o){var i,c;if(!(n.props.selectsRange||n.props.selectsMultiple)){var u=n.props.selected?n.props.selected:n.getPreSelection(),m=n.props.selected?o:ph(u,{hour:Xo(o),minute:Ko(o)});n.setState({preSelection:m}),(c=(i=n.props).onChange)===null||c===void 0||c.call(i,m),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var o,i;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(i=(o=n.props).onInputClick)===null||i===void 0||i.call(o)},n.onInputKeyDown=function(o){var i,c,u,m,g,f;(c=(i=n.props).onKeyDown)===null||c===void 0||c.call(i,o);var h=o.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(h===Ye.ArrowDown||h===Ye.ArrowUp||h===Ye.Enter)&&((u=n.onInputClick)===null||u===void 0||u.call(n));return}if(n.state.open){if(h===Ye.ArrowDown||h===Ye.ArrowUp){o.preventDefault();var v=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',S=((m=n.calendar)===null||m===void 0?void 0:m.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(v);S instanceof HTMLElement&&S.focus({preventScroll:!0});return}var x=aa(n.state.preSelection);h===Ye.Enter?(o.preventDefault(),o.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===hh?(n.handleSelect(x,o),!n.props.shouldCloseOnSelect&&n.setPreSelection(x)):n.setOpen(!1)):h===Ye.Escape?(o.preventDefault(),o.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):h===Ye.Tab&&n.setOpen(!1),n.inputOk()||(f=(g=n.props).onInputError)===null||f===void 0||f.call(g,{code:1,msg:gh})}},n.onPortalKeyDown=function(o){var i=o.key;i===Ye.Escape&&(o.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(o){var i,c,u,m,g,f,h=n.props,v=h.minDate,S=h.maxDate,x=h.disabledKeyboardNavigation,E=h.showWeekPicker,N=h.shouldCloseOnSelect,C=h.locale,I=h.calendarStartDay,A=h.adjustDateOnChange,_=h.inline;if((c=(i=n.props).onKeyDown)===null||c===void 0||c.call(i,o),!x){var k=o.key,B=o.shiftKey,z=aa(n.state.preSelection),M=function(R,D){var j=D;switch(R){case Ye.ArrowRight:j=E?zm(D,1):Kr(D,1);break;case Ye.ArrowLeft:j=E?i2(D):bk(D);break;case Ye.ArrowUp:j=i2(D);break;case Ye.ArrowDown:j=zm(D,1);break;case Ye.PageUp:j=B?Ri(D,1):wl(D,1);break;case Ye.PageDown:j=B?Qo(D,1):eo(D,1);break;case Ye.Home:j=Hs(D,C,I);break;case Ye.End:j=YN(D);break}return j},O=function(R,D){for(var j=40,X=R,W=!1,T=0,G=M(R,D);!W;){if(T>=j){G=D;break}v&&G<v&&(X=Ye.ArrowRight,G=Br(v,n.props)?M(X,G):v),S&&G>S&&(X=Ye.ArrowLeft,G=Br(S,n.props)?M(X,G):S),Br(G,n.props)?((X===Ye.PageUp||X===Ye.Home)&&(X=Ye.ArrowRight),(X===Ye.PageDown||X===Ye.End)&&(X=Ye.ArrowLeft),G=M(X,G)):W=!0,T++}return G};if(k===Ye.Enter){o.preventDefault(),n.handleSelect(z,o),!N&&n.setPreSelection(z);return}else if(k===Ye.Escape){o.preventDefault(),n.setOpen(!1),n.inputOk()||(m=(u=n.props).onInputError)===null||m===void 0||m.call(u,{code:1,msg:gh});return}var U=null;switch(k){case Ye.ArrowLeft:case Ye.ArrowRight:case Ye.ArrowUp:case Ye.ArrowDown:case Ye.PageUp:case Ye.PageDown:case Ye.Home:case Ye.End:U=O(k,z);break}if(!U){(f=(g=n.props).onInputError)===null||f===void 0||f.call(g,{code:1,msg:gh});return}if(o.preventDefault(),n.setState({lastPreSelectChange:hh}),A&&n.setSelected(U),n.setPreSelection(U),_){var Z=On(z),H=On(U),V=Lt(z),F=Lt(U);Z!==H||V!==F?n.setState({shouldFocusDayInline:!0}):n.setState({shouldFocusDayInline:!1})}}},n.onPopperKeyDown=function(o){var i=o.key;i===Ye.Escape&&(o.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(o){o&&o.preventDefault&&o.preventDefault(),n.sendFocusBackToInput();var i=n.props,c=i.selectsRange,u=i.onChange;c?u==null||u([null,null],o):u==null||u(null,o),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(o){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(o.target===document||o.target===document.documentElement||o.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(o)&&n.setOpen(!1)},n.renderCalendar=function(){var o,i;return!n.props.inline&&!n.isCalendarOpen()?null:e.createElement(_I,Zt({showMonthYearDropdown:void 0,ref:function(c){n.calendar=c}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(o=n.props.dateFormatCalendar)!==null&&o!==void 0?o:r.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:nI(n.modifyHolidays()),outsideClickIgnoreClass:B2,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(i=n.props.dropdownMode)!==null&&i!==void 0?i:r.defaultProps.dropdownMode}),n.props.children)},n.renderAriaLiveRegion=function(){var o=n.props,i=o.dateFormat,c=i===void 0?r.defaultProps.dateFormat:i,u=o.locale,m=n.props.showTimeInput||n.props.showTimeSelect,g=m?"PPPPp":"PPPP",f;return n.props.selectsRange?f="Selected start date: ".concat(Tr(n.props.startDate,{dateFormat:g,locale:u}),". ").concat(n.props.endDate?"End date: "+Tr(n.props.endDate,{dateFormat:g,locale:u}):""):n.props.showTimeSelectOnly?f="Selected time: ".concat(Tr(n.props.selected,{dateFormat:c,locale:u})):n.props.showYearPicker?f="Selected year: ".concat(Tr(n.props.selected,{dateFormat:"yyyy",locale:u})):n.props.showMonthYearPicker?f="Selected month: ".concat(Tr(n.props.selected,{dateFormat:"MMMM yyyy",locale:u})):n.props.showQuarterYearPicker?f="Selected quarter: ".concat(Tr(n.props.selected,{dateFormat:"yyyy, QQQ",locale:u})):f="Selected date: ".concat(Tr(n.props.selected,{dateFormat:g,locale:u})),e.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},f)},n.renderDateInput=function(){var o,i,c,u=In(n.props.className,(o={},o[B2]=n.state.open,o)),m=n.props.customInput||e.createElement("input",{type:"text"}),g=n.props.customInputRef||"ref",f=n.props,h=f.dateFormat,v=h===void 0?r.defaultProps.dateFormat:h,S=f.locale,x=typeof n.props.value=="string"?n.props.value:typeof n.state.inputValue=="string"?n.state.inputValue:n.props.selectsRange?WN(n.props.startDate,n.props.endDate,{dateFormat:v,locale:S}):n.props.selectsMultiple?jN((c=n.props.selectedDates)!==null&&c!==void 0?c:[],{dateFormat:v,locale:S}):Tr(n.props.selected,{dateFormat:v,locale:S});return b.cloneElement(m,(i={},i[g]=function(E){n.input=E},i.value=x,i.onBlur=n.handleBlur,i.onChange=n.handleChange,i.onClick=n.onInputClick,i.onFocus=n.handleFocus,i.onKeyDown=n.onInputKeyDown,i.id=n.props.id,i.name=n.props.name,i.form=n.props.form,i.autoFocus=n.props.autoFocus,i.placeholder=n.props.placeholderText,i.disabled=n.props.disabled,i.autoComplete=n.props.autoComplete,i.className=In(m.props.className,u),i.title=n.props.title,i.readOnly=n.props.readOnly,i.required=n.props.required,i.tabIndex=n.props.tabIndex,i["aria-describedby"]=n.props.ariaDescribedBy,i["aria-invalid"]=n.props.ariaInvalid,i["aria-labelledby"]=n.props.ariaLabelledBy,i["aria-required"]=n.props.ariaRequired,i))},n.renderClearButton=function(){var o=n.props,i=o.isClearable,c=o.disabled,u=o.selected,m=o.startDate,g=o.endDate,f=o.clearButtonTitle,h=o.clearButtonClassName,v=h===void 0?"":h,S=o.ariaLabelClose,x=S===void 0?"Close":S,E=o.selectedDates,N=o.readOnly;return i&&!N&&(u!=null||m!=null||g!=null||E!=null&&E.length)?e.createElement("button",{type:"button",className:In("react-datepicker__close-icon",v,{"react-datepicker__close-icon--disabled":c}),disabled:c,"aria-label":x,onClick:n.onClearClick,title:f,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(r,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Ld,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),r.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},r.prototype.componentDidUpdate=function(t,n){var o,i,c,u;t.inline&&RI(t.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&t.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),t.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:A2(this.props.highlightDates)}),!n.focused&&!bl(t.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((i=(o=this.props).onCalendarOpen)===null||i===void 0||i.call(o)),n.open===!0&&this.state.open===!1&&((u=(c=this.props).onCalendarClose)===null||u===void 0||u.call(c)))},r.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},r.prototype.renderInputContainer=function(){var t=this.props,n=t.showIcon,o=t.icon,i=t.calendarIconClassname,c=t.calendarIconClassName,u=t.toggleCalendarOnIconClick,m=this.state.open;return i&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),e.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&e.createElement(kI,Zt({icon:o,className:In(c,!c&&i,m&&"react-datepicker-ignore-onclickoutside")},u?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},r.prototype.render=function(){var t=this.renderCalendar();if(this.props.inline)return t;if(this.props.withPortal){var n=this.state.open?e.createElement(o5,{enableTabLoop:this.props.enableTabLoop},e.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},t)):null;return this.state.open&&this.props.portalId&&(n=e.createElement(r5,Zt({portalId:this.props.portalId},this.props),n)),e.createElement("div",null,this.renderInputContainer(),n)}return e.createElement(MI,Zt({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:t,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},r}(b.Component),TI="input",hh="navigate";function z2(a){if(!a||typeof a!="string"||!a.match(/\d/))return{h:0,m:0};const[r,t]=a.trim().split(/\s+/);let[n,o]=r.split(":").map(Number);return t&&t.toLowerCase()==="pm"&&n!==12&&(n+=12),t&&t.toLowerCase()==="am"&&n===12&&(n=0),{h:n,m:o}}function ty(a,r,t=30){const n=z2(a),o=z2(r),i=[];let c=new Date(0,0,0,n.h,n.m);const u=new Date(0,0,0,o.h,o.m);for(;c<=u;){const m=c.getHours(),g=c.getMinutes();let f=(m%12||12)+":"+(g<10?"0":"")+g+(m<12?" AM":" PM");i.push(f),c=new Date(c.getTime()+t*6e4)}return i}function PI(a){const r={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6},t=new Date,n=t.getDay();let i=(r[a]-n+7)%7;i===0&&(i=7);const c=new Date(t);return c.setDate(t.getDate()+i),c}function l5({proposal:a,open:r,onClose:t,onSubmit:n,senderPlayer:o,phase:i,selectedDivision:c}){var X;const[u,m]=b.useState(new Date),[g,f]=b.useState(""),[h,v]=b.useState(""),[S,x]=b.useState(""),[E,N]=b.useState(""),[C,I]=b.useState(""),[A,_]=b.useState(""),[k,B]=b.useState("");b.useEffect(()=>{if(a&&r){if(a.date){const[W,T,G]=a.date.split("-");m(new Date(parseInt(W),parseInt(T)-1,parseInt(G)))}f(""),v(""),x(a.location||""),N(a.gameType||"8 Ball"),I(a.raceLength||(i==="scheduled"||i==="challenge"?5:7)),_("")}},[a,r,i]),["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][u.getDay()];const O=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][u.getDay()],U=((X=o==null?void 0:o.availability)==null?void 0:X[O])||[],Z=["6:00 PM - 8:00 PM","8:00 PM - 10:00 PM","10:00 PM - 12:00 AM"],H=U.length>0?U:Z,V=o!=null&&o.locations?o.locations.split(/\r?\n/).map(W=>W.trim()).filter(Boolean):[],F=b.useMemo(()=>{if(!g)return[];const W=g.replace(/[–—−]/g,"-").replace(/\s*-\s*/g," - ").trim();if(!W.includes(" - "))return[];let[T,G]=W.split(" - ").map(te=>R(te.trim()));return!T||!G?[]:ty(T,G,30)},[g]);function R(W){let T=W.trim();T=T.replace(/(\d{1,2}):(\d{2})\s*(am|pm)/i,(te,P,ne,q)=>`${parseInt(P,10)}:${ne} ${q.toUpperCase()}`),T=T.replace(/^(\d{1,2})(\d{2})(am|pm)$/i,(te,P,ne,q)=>`${parseInt(P,10)}:${ne} ${q.toUpperCase()}`),T=T.replace(/^(\d{1,2})(am|pm)$/i,(te,P,ne)=>`${parseInt(P,10)}:00 ${ne.toUpperCase()}`),T=T.replace(/(am|pm)$/i," $1"),T=T.replace(/(am|pm)$/i,te=>te.toUpperCase());const G=T.match(/^(\d{1,2}):(\d{2}) (AM|PM)$/i);if(G){const te=G[1],P=G[2],ne=G[3].toUpperCase();return`${te}:${P} ${ne}`}return T}function D(W){if(!W)return"";const T=new Date(W),G=String(T.getMonth()+1).padStart(2,"0"),te=String(T.getDate()).padStart(2,"0"),P=T.getFullYear();return`${G}-${te}-${P}`}const j=W=>{if(W.preventDefault(),!u||!h||!S){B("Please fill in all required fields.");return}B(""),n({date:D(u),time:h,location:S,gameType:E,raceLength:C,note:A})};return!r||!a?null:e.createElement(Bt,{open:r,onClose:t,title:"🔄 Counter Proposal",maxWidth:"500px"},e.createElement("form",{onSubmit:j,style:{textAlign:"left"}},e.createElement("div",{style:{fontWeight:"bold",fontSize:"1.15rem",margin:"0 0 1rem 0",color:"#fff",textAlign:"center"}},"To: ",a.senderName||"Opponent"),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Date:"),e.createElement(s5,{selected:u,onChange:W=>m(W),dateFormat:"MM-dd-yyyy",className:"counter-proposal-date-input",required:!0})),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Time Block:"),e.createElement("select",{value:g,onChange:W=>{f(W.target.value),v("")},required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},e.createElement("option",{value:""},"Select time block"),H.map((W,T)=>e.createElement("option",{key:T,value:W},W)))),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Start Time:"),e.createElement("select",{value:h,onChange:W=>v(W.target.value),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},e.createElement("option",{value:""},"Select..."),F.map((W,T)=>e.createElement("option",{key:T,value:W},W)))),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Location:"),e.createElement("select",{value:S,onChange:W=>x(W.target.value),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},e.createElement("option",{value:""},"Select location"),V.map((W,T)=>e.createElement("option",{key:T,value:W},W)))),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Game Type:"),e.createElement("select",{value:E,onChange:W=>N(W.target.value),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},e.createElement("option",{value:"8 Ball"},"8 Ball"),e.createElement("option",{value:"9 Ball"},"9 Ball"),e.createElement("option",{value:"10 Ball"},"10 Ball"),e.createElement("option",{value:"Mixed"},"Mixed"))),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Race Length:"),e.createElement("select",{value:C,onChange:W=>I(Number(W.target.value)),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},i==="scheduled"||i==="challenge"?e.createElement("option",{value:5},"5"):[...Array(13)].map((W,T)=>{const G=T+3;return e.createElement("option",{key:G,value:G},G)}))),e.createElement("div",{style:{marginBottom:"1.5rem"}},e.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Note (optional):"),e.createElement("textarea",{value:A,onChange:W=>_(W.target.value),placeholder:"Add a note explaining your counter proposal...",rows:3,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",resize:"vertical"}})),k&&e.createElement("div",{style:{color:"#e53e3e",marginBottom:"1rem"}},k),e.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"center"}},e.createElement("button",{type:"submit",style:{background:"#e53e3e",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px"}},"Submit Counter"),e.createElement("button",{type:"button",onClick:t,style:{background:"#6c757d",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px"}},"Cancel"))))}const Ed={_origin:"https://api.emailjs.com"},LI=(a,r="https://api.emailjs.com")=>{Ed._userID=a,Ed._origin=r},i5=(a,r,t)=>{if(!a)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!r)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class O2{constructor(r){this.status=r.status,this.text=r.responseText}}const c5=(a,r,t={})=>new Promise((n,o)=>{const i=new XMLHttpRequest;i.addEventListener("load",({target:c})=>{const u=new O2(c);u.status===200||u.text==="OK"?n(u):o(u)}),i.addEventListener("error",({target:c})=>{o(new O2(c))}),i.open("POST",Ed._origin+a,!0),Object.keys(t).forEach(c=>{i.setRequestHeader(c,t[c])}),i.send(r)}),BI=(a,r,t,n)=>{const o=n||Ed._userID;return i5(o,a,r),c5("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:o,service_id:a,template_id:r,template_params:t}),{"Content-type":"application/json"})},zI=a=>{let r;if(typeof a=="string"?r=document.querySelector(a):r=a,!r||r.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return r},OI=(a,r,t,n)=>{const o=n||Ed._userID,i=zI(t);i5(o,a,r);const c=new FormData(i);return c.append("lib_version","3.2.0"),c.append("service_id",a),c.append("template_id",r),c.append("user_id",o),c5("/api/v1.0/email/send-form",c)},zd={init:LI,send:BI,sendForm:OI};function FI({to_email:a,to_name:r,from_name:t,from_email:n,day:o,date:i,time:c,location:u,note:m,gameType:g,raceLength:f,proposalId:h}){if(!a||a==="undefined")return alert("Recipient email is missing. Cannot send proposal."),Promise.reject(new Error("Recipient email is missing."));if(!n||n==="undefined")return alert("Your email is missing. Cannot send proposal."),Promise.reject(new Error("Sender email is missing."));const v=Hn(zE(i),"MM-dd-yyyy"),x=Object.entries({from:t,to:r,day:o,date:v,time:c,location:u,note:m,proposerEmail:n,gameType:g,raceLength:f,proposalId:h}).map(([I,A])=>`${I}=${encodeURIComponent(A)}`).join("&"),E="https://newapp-1-ic1v.onrender.com",N=`${E}/#/confirm-match?${x}`,C=`${E}/#/confirm-match?${x}`;return zd.send("service_l5q2047","template_xu0tl3i",{to_email:a,to_name:r,from_name:t,day:o,date:v,time:c,location:u,note:m,gameType:g,raceLength:f,confirm_link:N,counter_propose_link:C},"g6vqrOs_Jb6LL1VCZ")}function UI({to_email:a,to_name:r,day:t,date:n,time:o,location:i,proposal_note:c,confirmation_note:u,confirmed_by:m,gameType:g,raceLength:f}){return zd.send("service_l5q2047","template_dtc43h8",{to_email:a,to_name:r,day:t,date:n,time:o,location:i,proposal_note:c,confirmation_note:u,confirmed_by:m,gameType:g,raceLength:f},"g6vqrOs_Jb6LL1VCZ")}function WI({to_email:a,to_name:r,division:t,daysUntilDeadline:n,completedMatches:o,totalRequiredMatches:i,deadlineDate:c,remainingMatches:u}){if(!a||a==="undefined")return console.error("Recipient email is missing. Cannot send deadline reminder."),Promise.reject(new Error("Recipient email is missing."));const m=Math.round(o/i*100),g=n<=1?"CRITICAL":n<=3?"URGENT":n<=7?"WARNING":"REMINDER";return zd.send("service_l5q2047","template_xbpnbge",{to_email:a,to_name:r,division:t,days_until_deadline:n,completed_matches:o,total_required_matches:i,progress_percentage:m,deadline_date:c,remaining_matches:u,urgency_level:g,app_url:"https://newapp-1-ic1v.onrender.com"},"g6vqrOs_Jb6LL1VCZ")}function jI({to_email:a,to_name:r,registrationId:t,registrationDate:n,registrationFee:o,paymentMethods:i=[],additionalInstructions:c="",contactInfo:u={}}){if(!a||a==="undefined")return console.error("Recipient email is missing. Cannot send payment instructions."),Promise.reject(new Error("Recipient email is missing."));const m=i.length>0?i.map((f,h)=>{let v=f.instructions;return f.key==="venmo"&&f.username?v=`Send payment to @${f.username}`:f.key==="cashapp"&&f.username?v=`Send payment to $${f.username}`:f.key==="paypal"&&f.email?v=`Send payment to ${f.email}`:f.key==="creditCard"&&f.paymentLink?v=`Pay securely online: ${f.paymentLink}`:f.key==="applePay"&&f.paymentLink?v=`Pay with Apple Pay: ${f.paymentLink}`:f.key==="googlePay"&&f.paymentLink?v=`Pay with Google Pay: ${f.paymentLink}`:f.key==="check"&&f.payeeName&&(v=`Make check payable to ${f.payeeName}`),`${h+1}. **${f.displayName}:** ${v}`}).join(`
`):"1. **Cash:** Pay in person to league administrator",g=u&&(u.email||u.phone||u.name)?`

**For payment questions, contact:**
${u.name?`Name: ${u.name}
`:""}${u.email?`Email: ${u.email}
`:""}${u.phone?`Phone: ${u.phone}`:""}`:"";return zd.send("service_l5q2047","template_payment_instructions",{to_email:a,to_name:r,registration_id:t,registration_date:n,registration_fee:o,payment_instructions:`
        **League Registration Payment Instructions**
        
        Registration Fee: $${o}
        Registration ID: ${t}
        
        **Payment Methods:**
${m}
        
        ${c?`
**Additional Instructions:**
${c}
`:""}
        
        **Important Notes:**
        • Include your Registration ID (${t}) in payment notes
        • Payment must be completed within 7 days
        • Your PIN will be sent once payment is confirmed
        • Contact league admin if you have payment issues${g}
        
        **Next Steps:**
        1. Complete payment using one of the methods above
        2. Wait for payment confirmation email
        3. You'll receive your unique PIN and full access
      `,app_url:"https://newapp-1-ic1v.onrender.com"},"g6vqrOs_Jb6LL1VCZ")}const HI="_confirmMatchCard_7heot_7",$I="_confirmMatchTitle_7heot_31",YI="_redTitle_7heot_45",GI="_confirmMatchDetails_7heot_55",qI="_detailRow_7heot_65",ZI="_confirmBtn_7heot_173",Da={confirmMatchCard:HI,confirmMatchTitle:$I,redTitle:YI,confirmMatchDetails:GI,detailRow:qI,confirmBtn:ZI};function VI({text:a,query:r}){return r?a.split(new RegExp(`(${r})`,"gi")).map((n,o)=>n.toLowerCase()===r.toLowerCase()?e.createElement("mark",{key:o},n):n):e.createElement(e.Fragment,null,a)}const pe="https://atlasbackend-bnng.onrender.com";function QI(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-"),m=new Date(parseInt(i),parseInt(c)-1,parseInt(u)),g=String(m.getMonth()+1).padStart(2,"0"),f=String(m.getDate()).padStart(2,"0"),h=m.getFullYear();return`${g}-${f}-${h}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}function JI(){const[a]=U0(),[r,t]=b.useState(!1),[n,o]=b.useState(""),[i,c]=b.useState(!1),m=a.get("action")==="counter",g=a.get("from"),f=a.get("to"),h=a.get("day"),v=a.get("date"),S=a.get("time"),x=a.get("location"),E=a.get("proposerEmail"),N=a.get("note"),C=a.get("gameType"),I=a.get("raceLength"),A=a.get("proposalId");b.useEffect(()=>{m&&c(!0)},[m]);const _=()=>{console.log("CONFIRM BUTTON CLICKED"),UI({to_email:E,to_name:g,day:h,date:v,time:S,location:x,confirmed_by:f,proposal_note:N||"",confirmation_note:n||"",gameType:C||"",raceLength:I||""}),A?fetch(`${pe}/api/proposals/${A}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"confirmed",note:n})}).then(B=>{if(!B.ok)throw new Error("Failed to confirm proposal");console.log("Proposal confirmed successfully"),t(!0)}).catch(B=>{console.error("Error confirming proposal:",B),alert("Failed to confirm proposal: "+B.message)}):(console.log("No proposalId provided - showing confirmation modal"),t(!0))};return e.createElement("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)"}},e.createElement("div",{className:"draggable-modal",style:{background:"linear-gradient(120deg, #232323 80%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:window.innerWidth<=400?"0":"1.2rem",boxShadow:"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",width:window.innerWidth<=400?"100vw":"auto",maxWidth:window.innerWidth<=400?"100vw":"480px",minWidth:0,margin:window.innerWidth<=400?"0":"0 auto",left:0,right:0,animation:"modalBounceIn 0.5s cubic-bezier(.21,1.02,.73,1.01)",padding:"1.5rem 2rem 1rem 2rem",position:"relative",fontFamily:"inherit",boxSizing:"border-box",textAlign:"center",marginTop:"100px",maxHeight:"85vh",overflowY:"auto"}},e.createElement("div",{style:{position:"relative"}},e.createElement("button",{onClick:()=>window.location.href="/#/dashboard",style:{position:"absolute",top:"-0.5rem",right:"-0.5rem",background:"#333",color:"#fff",border:"1px solid #666",borderRadius:"50%",width:"2rem",height:"2rem",fontSize:"1.2rem",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s, border-color 0.2s",zIndex:10},onMouseEnter:k=>{k.target.style.background="#e53e3e",k.target.style.borderColor="#fff"},onMouseLeave:k=>{k.target.style.background="#333",k.target.style.borderColor="#666"}},"×"),e.createElement("h1",{style:{marginBottom:"1rem",fontSize:"1.4rem",fontWeight:"bold",letterSpacing:"0.01em",color:"#ff0000"}},"🎱 Front Range Pool League",e.createElement("br",null),"Confirm Match")),e.createElement("p",{style:{marginBottom:"1rem",fontSize:"0.95rem",color:"#faf6f6",textAlign:"center"}},"You are about to confirm this match. Your opponent will be notified by email and the match will be added to your app calendar!"),e.createElement("div",{style:{textAlign:"center",marginBottom:"0.8rem",background:"#1a1a1a",color:"#faf6f6",borderRadius:8,padding:"0.4rem 0.5rem",border:"1px solid #ff0000"}},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},e.createElement("span",{role:"img","aria-label":"you"},"🧑")," ",e.createElement("strong",null,"You:")," ",f||"N/A"),e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},e.createElement("span",{role:"img","aria-label":"opponent"},"🤝")," ",e.createElement("strong",null,"Opponent:")," ",g||"N/A"),e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},e.createElement("span",{role:"img","aria-label":"calendar"},"📅")," ",e.createElement("strong",null,"Day:")," ",h||"N/A"),e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},e.createElement("span",{role:"img","aria-label":"date"},"🗓️")," ",e.createElement("strong",null,"Date:")," ",QI(v)),e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},e.createElement("span",{role:"img","aria-label":"clock"},"⏰")," ",e.createElement("strong",null,"Time:")," ",S||"N/A"),C&&e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},e.createElement(Bp,{gameType:C,size:16})," ",e.createElement("strong",null,"Game Type:")," ",C),I&&e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},e.createElement("span",{role:"img","aria-label":"race"},"🏁")," ",e.createElement("strong",null,"Race to:")," ",I),e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},e.createElement("span",{role:"img","aria-label":"location"},"📍")," ",e.createElement("strong",null,"Location:")," ",x||"N/A")),N&&e.createElement("div",{style:{margin:"12px 0 0 0",padding:"0.6rem 0.8rem",background:"#2a2a2a",borderLeft:"3px solid #ffb300",borderRadius:4,color:"#ffb300",fontSize:"0.98rem",textAlign:"left"}},e.createElement("span",{role:"img","aria-label":"note"},"📝")," ",e.createElement("strong",null,"Note from opponent:"),e.createElement("br",null),N),e.createElement("div",{style:{margin:"1rem 0 0.2rem 0",textAlign:"left"}},e.createElement("label",{htmlFor:"note",style:{fontWeight:500,color:"#faf6f6",marginBottom:"0.2rem",display:"block"}},"📝 Add a note (optional):"),e.createElement("textarea",{id:"note",value:n,onChange:k=>o(k.target.value),rows:2,placeholder:"Write a message to your opponent…",style:{width:"100%",minHeight:"54px",borderRadius:7,border:"1px solid #666",padding:"0.6em 0.8em",fontSize:"1rem",marginTop:"0.2rem",resize:"vertical",background:"#1a1a1a",color:"#faf6f6",boxSizing:"border-box",transition:"border 0.2s"},onFocus:k=>k.target.style.border="1.5px solid #ff0000",onBlur:k=>k.target.style.border="1px solid #666"})),e.createElement("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"1rem",flexWrap:"wrap"}},e.createElement("button",{style:{background:"#ff0000",color:"#fff",border:"none",borderRadius:8,padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px",transition:"background 0.18s, color 0.18s, border 0.18s, box-shadow 0.18s",boxShadow:"0 2px 6px #0001"},onMouseEnter:k=>k.target.style.background="#c90000",onMouseLeave:k=>k.target.style.background="#ff0000",onClick:_},"✅ Confirm Match"),e.createElement("button",{style:{background:"#fff",color:"#ff0000",border:"2px solid #ff0000",borderRadius:8,padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px",transition:"background 0.18s, color 0.18s, border 0.18s, box-shadow 0.18s",boxShadow:"0 2px 6px #0001"},onMouseEnter:k=>{k.target.style.background="#ff0000",k.target.style.color="#fff"},onMouseLeave:k=>{k.target.style.background="#fff",k.target.style.color="#ff0000"},onClick:()=>c(!0)},"🔄 Counter Propose")),e.createElement("div",{style:{textAlign:"center",marginTop:"1rem"}},e.createElement("button",{onClick:()=>window.location.href="/#/dashboard",style:{background:"#333",color:"#fff",border:"1px solid #666",borderRadius:6,padding:"0.5rem 1rem",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"background 0.2s, border-color 0.2s"},onMouseEnter:k=>{k.target.style.background="#444",k.target.style.borderColor="#888"},onMouseLeave:k=>{k.target.style.background="#333",k.target.style.borderColor="#666"}},"📊 Go to Dashboard")),e.createElement(xE,{open:r,message:"Match confirmed! The opponent has been notified and the match has been added to your app calendar.",proposalNote:N,confirmationNote:n,gameType:C,raceLength:I,day:h,date:v,time:S,location:x,onClose:()=>t(!1)}),e.createElement(l5,{open:i,onClose:()=>c(!1),proposal:{senderName:g,receiverName:f,senderEmail:E,receiverEmail:"",date:v,time:S,location:x,message:N,gameType:C,raceLength:I,_id:A},onSubmit:k=>{console.log("Counter proposal submitted:",k),c(!1)},senderPlayer:{firstName:(f==null?void 0:f.split(" ")[0])||"",lastName:(f==null?void 0:f.split(" ").slice(1).join(" "))||"",email:""},phase:"scheduled",selectedDivision:""})))}const XI="_dashboardBg_1ubfn_35",KI="_floatingLogo_1ubfn_55",e8="_dashboardFrame_1ubfn_71",t8="_dashboardCard_1ubfn_103",a8="_fadeInUp_1ubfn_1",n8="_dashboardTitle_1ubfn_163",r8="_dashboardUserName_1ubfn_179",o8="_dashboardSection_1ubfn_199",s8="_newsUpdatesSection_1ubfn_223",l8="_dashboardSectionBox_1ubfn_231",i8="_dashboardSectionTitle_1ubfn_255",c8="_dashboardHelperText_1ubfn_273",d8="_matchesSection_1ubfn_289",u8="_dashboardList_1ubfn_313",m8="_matchCard_1ubfn_335",p8="_matchCardButton_1ubfn_381",f8="_matchCardOpponentLabel_1ubfn_433",g8="_matchCardOpponentName_1ubfn_435",h8="_matchCardDetail_1ubfn_437",y8="_dashboardActions_1ubfn_519",b8="_dashboardBtn_1ubfn_541",v8="_dashboardBtnPrimary_1ubfn_663",x8="_dashboardBtnSecondary_1ubfn_671",E8="_dashboardBtnSuccess_1ubfn_691",w8="_dashboardBtnWarning_1ubfn_711",S8="_dashboardBtnDanger_1ubfn_731",C8="_dashboardBtnSmall_1ubfn_753",_8="_dashboardBtnLarge_1ubfn_767",k8="_buttonRow_1ubfn_803",N8="_errorBox_1ubfn_815",I8="_dashboardAdminBtn_1ubfn_835",A8="_dashboardLogoutBtn_1ubfn_871",D8="_dashboardNoteItem_1ubfn_909",M8="_simulationOuterWrapper_1ubfn_931",R8="_simulationContainer_1ubfn_947",T8="_modalOverlay_1ubfn_989",P8="_dashboardModalContent_1ubfn_1041",L8="_modalBounceIn_1ubfn_1",B8="_modalHeader_1ubfn_1097",z8="_modalTitle_1ubfn_1123",O8="_closeBtn_1ubfn_1141",F8="_modalFooter_1ubfn_1177",U8="_footerCloseBtn_1ubfn_1219",W8="_dashboardHighlight_1ubfn_1289",j8="_pulseGlow_1ubfn_1",H8="_dashboardSimulationBox_1ubfn_1381",$8="_proposalAlertButton_1ubfn_1465",Y8="_proposalAlertRow_1ubfn_1479",G8="_newsUpdatesHeader_1ubfn_1705",q8="_poolTableContainer_1ubfn_1827",Z8="_modalDetailsSnazzy_1ubfn_1949",V8="_modalDetailRowSnazzy_1ubfn_1957",Q8="_gameTypeIcon_1ubfn_1967",J8="_iframeWrapper_1ubfn_1985",X8="_modalIframe_1ubfn_2007",K8="_proposalModalContent_1ubfn_2031",eA="_proposalModalTitle_1ubfn_2069",tA="_proposalModalCloseBtn_1ubfn_2091",aA="_proposalCardButton_1ubfn_2133",nA="_proposalCardLabel_1ubfn_2171",rA="_proposalCardMessage_1ubfn_2183",oA="_smallShowMoreBtn_1ubfn_2193",sA="_counterProposalOverlay_1ubfn_2229",lA="_proposalList_1ubfn_2279",iA="_proposalCard_1ubfn_2133",cA="_proposalCardBtn_1ubfn_2293",dA="_proposalCardName_1ubfn_2329",uA="_emptyMsg_1ubfn_2337",mA="_matchCardContentWrapper_1ubfn_2429",pA="_matchCardDoneBtn_1ubfn_2443",fA="_standingsModalContent_1ubfn_2495",gA="_standingsTableWrapper_1ubfn_2571",hA="_standingsTable_1ubfn_2571",yA="_inputField_1ubfn_2647",bA="_proposalModalHeaderBar_1ubfn_2695",vA="_phasePill_1ubfn_2713",xA="_divisionPill_1ubfn_2733",EA="_proposalModalToRow_1ubfn_2749",wA="_toOpponentLabel_1ubfn_2763",SA="_toOpponentName_1ubfn_2775",CA="_proposalModalDayRow_1ubfn_2785",_A="_dayLabel_1ubfn_2799",kA="_dayValue_1ubfn_2811",NA="_proposalModalFieldRow_1ubfn_2821",IA="_fieldLabel_1ubfn_2831",AA="_datePill_1ubfn_2849",DA="_proposalModalButtonRow_1ubfn_2875",MA="_root_1ubfn_1",RA="_challengeStatsContainer_1ubfn_3207",TA="_challengeStatsHeader_1ubfn_3223",PA="_challengeStatsGrid_1ubfn_3231",LA="_challengeStatCard_1ubfn_3245",BA="_challengeStatHeader_1ubfn_3269",zA="_challengeProgressBar_1ubfn_3287",OA="_challengeProgressFill_1ubfn_3305",FA="_challengeStatDetails_1ubfn_3315",UA="_challengeStatusSummary_1ubfn_3335",WA="_mobileMatchesOverlay_1ubfn_3579",jA="_countersRow_1ubfn_3587",HA="_counterBox_1ubfn_3599",$A="_scheduleMatchBtn_1ubfn_3607",YA="_noMatchesText_1ubfn_3753",GA="_dashboardButton_1ubfn_3955",qA="_dashboardButtonSmall_1ubfn_3969",ZA="_dashboardButtonLarge_1ubfn_3981",VA="_dashboardGrid_1ubfn_3993",QA="_dashboardFlexRow_1ubfn_4003",JA="_dashboardStats_1ubfn_4025",XA="_dashboardStat_1ubfn_4025",KA="_dashboardStatValue_1ubfn_4045",eD="_dashboardStatLabel_1ubfn_4053",tD="_dashboardText_1ubfn_4225",aD="_dashboardTextSmall_1ubfn_4235",nD="_dashboardSpacing_1ubfn_4247",rD="_dashboardSpacingLarge_1ubfn_4255",oD="_matchManager_1ubfn_4573",sD="_matchStats_1ubfn_4587",lD="_statsGrid_1ubfn_4617",iD="_statItem_1ubfn_4629",cD="_statNumber_1ubfn_4645",dD="_statLabel_1ubfn_4661",uD="_matchSection_1ubfn_4675",mD="_noMatches_1ubfn_3753",pD="_matchList_1ubfn_4719",fD="_completedMatch_1ubfn_4759",gD="_matchHeader_1ubfn_4777",hD="_matchStatus_1ubfn_4791",yD="_matchDate_1ubfn_4809",bD="_matchPlayers_1ubfn_4819",vD="_player1_1ubfn_4837",xD="_player2_1ubfn_4837",ED="_winner_1ubfn_4851",wD="_vs_1ubfn_4863",SD="_matchDetails_1ubfn_4873",CD="_location_1ubfn_4891",_D="_type_1ubfn_4891",kD="_matchResult_1ubfn_4903",ND="_score_1ubfn_4921",ID="_matchNotes_1ubfn_4931",AD="_notesLabel_1ubfn_4943",DD="_notesText_1ubfn_4957",MD="_matchActions_1ubfn_4969",RD="_actionButton_1ubfn_4985",TD="_cancelButton_1ubfn_5021",PD="_modal_1ubfn_989",LD="_formGroup_1ubfn_5105",BD="_modalActions_1ubfn_5177",zD="_loading_1ubfn_5257",OD="_mobileCard_1ubfn_5373",FD="_mobileCardElevated_1ubfn_5403",UD="_mobileCardOutlined_1ubfn_5413",WD="_mobileButton_1ubfn_5425",jD="_mobileButtonSecondary_1ubfn_5503",HD="_mobileButtonSuccess_1ubfn_5523",$D="_mobileButtonWarning_1ubfn_5543",YD="_mobileButtonDanger_1ubfn_5563",GD="_mobileButtonSmall_1ubfn_5583",qD="_mobileButtonLarge_1ubfn_5595",ZD="_mobileButtonFullWidth_1ubfn_5607",VD="_mobileList_1ubfn_5617",QD="_mobileListItem_1ubfn_5629",JD="_mobileNavigation_1ubfn_5671",XD="_mobileActionSheetOverlay_1ubfn_5693",KD="_fadeIn_1ubfn_1",e6="_mobileActionSheet_1ubfn_5693",t6="_slideUp_1ubfn_1",a6="_mobileSwipeableCard_1ubfn_5747",n6="_mobilePullToRefresh_1ubfn_5803",r6="_mobileDashboard_1ubfn_5815",o6="_mobileLoadingOverlay_1ubfn_6039",s6="_mobileErrorContainer_1ubfn_6069",l6="_mobileErrorIcon_1ubfn_6091",i6="_mobileErrorMessage_1ubfn_6103",c6="_mobileSuccessContainer_1ubfn_6119",d6="_mobileSuccessIcon_1ubfn_6141",u6="_mobileSuccessMessage_1ubfn_6153",m6="_mobileInfoContainer_1ubfn_6169",p6="_mobileInfoIcon_1ubfn_6191",f6="_mobileInfoMessage_1ubfn_6203",g6="_loadingOverlay_1ubfn_6349",h6="_loadingSpinner_1ubfn_6377",y6="_spin_1ubfn_1",b6="_loadingText_1ubfn_6405",v6="_skeletonLoader_1ubfn_6423",x6="_skeletonLine_1ubfn_6437",E6="_shimmer_1ubfn_1",w6="_errorContainer_1ubfn_6477",S6="_errorIcon_1ubfn_6499",C6="_errorMessage_1ubfn_6511",_6="_errorAction_1ubfn_6525",k6="_successContainer_1ubfn_6561",N6="_successIcon_1ubfn_6583",I6="_successMessage_1ubfn_6595",A6="_infoContainer_1ubfn_6615",D6="_infoIcon_1ubfn_6637",M6="_infoMessage_1ubfn_6649",R6="_srOnly_1ubfn_6705",T6="_slideInLeft_1ubfn_1",P6="_slideInRight_1ubfn_1",we={dashboardBg:XI,floatingLogo:KI,dashboardFrame:e8,dashboardCard:t8,fadeInUp:a8,dashboardTitle:n8,dashboardUserName:r8,dashboardSection:o8,newsUpdatesSection:s8,dashboardSectionBox:l8,dashboardSectionTitle:i8,dashboardHelperText:c8,matchesSection:d8,dashboardList:u8,matchCard:m8,matchCardButton:p8,matchCardOpponentLabel:f8,matchCardOpponentName:g8,matchCardDetail:h8,dashboardActions:y8,dashboardBtn:b8,dashboardBtnPrimary:v8,dashboardBtnSecondary:x8,dashboardBtnSuccess:E8,dashboardBtnWarning:w8,dashboardBtnDanger:S8,dashboardBtnSmall:C8,dashboardBtnLarge:_8,buttonRow:k8,errorBox:N8,dashboardAdminBtn:I8,dashboardLogoutBtn:A8,dashboardNoteItem:D8,simulationOuterWrapper:M8,simulationContainer:R8,modalOverlay:T8,dashboardModalContent:P8,modalBounceIn:L8,modalHeader:B8,modalTitle:z8,closeBtn:O8,modalFooter:F8,footerCloseBtn:U8,dashboardHighlight:W8,pulseGlow:j8,dashboardSimulationBox:H8,proposalAlertButton:$8,proposalAlertRow:Y8,newsUpdatesHeader:G8,poolTableContainer:q8,modalDetailsSnazzy:Z8,modalDetailRowSnazzy:V8,gameTypeIcon:Q8,iframeWrapper:J8,modalIframe:X8,proposalModalContent:K8,proposalModalTitle:eA,proposalModalCloseBtn:tA,proposalCardButton:aA,proposalCardLabel:nA,proposalCardMessage:rA,smallShowMoreBtn:oA,counterProposalOverlay:sA,proposalList:lA,proposalCard:iA,proposalCardBtn:cA,proposalCardName:dA,emptyMsg:uA,matchCardContentWrapper:mA,matchCardDoneBtn:pA,standingsModalContent:fA,standingsTableWrapper:gA,standingsTable:hA,inputField:yA,proposalModalHeaderBar:bA,phasePill:vA,divisionPill:xA,proposalModalToRow:EA,toOpponentLabel:wA,toOpponentName:SA,proposalModalDayRow:CA,dayLabel:_A,dayValue:kA,proposalModalFieldRow:NA,fieldLabel:IA,datePill:AA,proposalModalButtonRow:DA,root:MA,challengeStatsContainer:RA,challengeStatsHeader:TA,challengeStatsGrid:PA,challengeStatCard:LA,challengeStatHeader:BA,challengeProgressBar:zA,challengeProgressFill:OA,challengeStatDetails:FA,challengeStatusSummary:UA,mobileMatchesOverlay:WA,countersRow:jA,counterBox:HA,scheduleMatchBtn:$A,noMatchesText:YA,dashboardButton:GA,dashboardButtonSmall:qA,dashboardButtonLarge:ZA,dashboardGrid:VA,dashboardFlexRow:QA,dashboardStats:JA,dashboardStat:XA,dashboardStatValue:KA,dashboardStatLabel:eD,dashboardText:tD,dashboardTextSmall:aD,dashboardSpacing:nD,dashboardSpacingLarge:rD,matchManager:oD,matchStats:sD,statsGrid:lD,statItem:iD,statNumber:cD,statLabel:dD,matchSection:uD,noMatches:mD,matchList:pD,completedMatch:fD,matchHeader:gD,matchStatus:hD,matchDate:yD,matchPlayers:bD,player1:vD,player2:xD,winner:ED,vs:wD,matchDetails:SD,location:CD,type:_D,matchResult:kD,score:ND,matchNotes:ID,notesLabel:AD,notesText:DD,matchActions:MD,actionButton:RD,cancelButton:TD,modal:PD,formGroup:LD,modalActions:BD,loading:zD,mobileCard:OD,mobileCardElevated:FD,mobileCardOutlined:UD,mobileButton:WD,mobileButtonSecondary:jD,mobileButtonSuccess:HD,mobileButtonWarning:$D,mobileButtonDanger:YD,mobileButtonSmall:GD,mobileButtonLarge:qD,mobileButtonFullWidth:ZD,mobileList:VD,mobileListItem:QD,mobileNavigation:JD,mobileActionSheetOverlay:XD,fadeIn:KD,mobileActionSheet:e6,slideUp:t6,mobileSwipeableCard:a6,mobilePullToRefresh:n6,mobileDashboard:r6,mobileLoadingOverlay:o6,mobileErrorContainer:s6,mobileErrorIcon:l6,mobileErrorMessage:i6,mobileSuccessContainer:c6,mobileSuccessIcon:d6,mobileSuccessMessage:u6,mobileInfoContainer:m6,mobileInfoIcon:p6,mobileInfoMessage:f6,loadingOverlay:g6,loadingSpinner:h6,spin:y6,loadingText:b6,skeletonLoader:v6,skeletonLine:x6,shimmer:E6,errorContainer:w6,errorIcon:S6,errorMessage:C6,errorAction:_6,successContainer:k6,successIcon:N6,successMessage:I6,infoContainer:A6,infoIcon:D6,infoMessage:M6,srOnly:R6,slideInLeft:T6,slideInRight:P6},Yi=""+new URL("tenball-I4UPjCSs.svg",import.meta.url).href,d5=""+new URL("PredatorTable-CE1I7Bce.png",import.meta.url).href,Yp=""+new URL("nineball-5ZBjRXm5.svg",import.meta.url).href,wd=""+new URL("8ball-COe24mO4.svg",import.meta.url).href,u5="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3c!--%20Main%20ball%20gradient%20with%20realistic%20lighting%20--%3e%3cradialGradient%20id='cueMain'%20cx='25%25'%20cy='25%25'%20r='75%25'%3e%3cstop%20offset='0%25'%20stop-color='%23ffffff'/%3e%3cstop%20offset='30%25'%20stop-color='%23f5f5f5'/%3e%3cstop%20offset='60%25'%20stop-color='%23e8e8e8'/%3e%3cstop%20offset='100%25'%20stop-color='%23d0d0d0'/%3e%3c/radialGradient%3e%3c!--%20Secondary%20highlight%20for%20depth%20--%3e%3cradialGradient%20id='cueHighlight'%20cx='20%25'%20cy='20%25'%20r='40%25'%3e%3cstop%20offset='0%25'%20stop-color='%23ffffff'%20stop-opacity='0.9'/%3e%3cstop%20offset='60%25'%20stop-color='%23ffffff'%20stop-opacity='0.3'/%3e%3cstop%20offset='100%25'%20stop-color='%23ffffff'%20stop-opacity='0'/%3e%3c/radialGradient%3e%3c!--%20Specular%20highlight%20--%3e%3cradialGradient%20id='cueSpecular'%20cx='35%25'%20cy='35%25'%20r='15%25'%3e%3cstop%20offset='0%25'%20stop-color='%23ffffff'/%3e%3cstop%20offset='100%25'%20stop-color='%23ffffff'%20stop-opacity='0'/%3e%3c/radialGradient%3e%3c!--%20Shadow%20gradient%20--%3e%3cradialGradient%20id='cueShadow'%20cx='75%25'%20cy='75%25'%20r='25%25'%3e%3cstop%20offset='0%25'%20stop-color='%23000000'%20stop-opacity='0.2'/%3e%3cstop%20offset='100%25'%20stop-color='%23000000'%20stop-opacity='0'/%3e%3c/radialGradient%3e%3c/defs%3e%3c!--%20Main%20ball%20--%3e%3ccircle%20cx='8'%20cy='8'%20r='7.5'%20fill='url(%23cueMain)'%20stroke='%23c0c0c0'%20stroke-width='0.3'/%3e%3c!--%20Primary%20highlight%20--%3e%3ccircle%20cx='6'%20cy='6'%20r='2.5'%20fill='url(%23cueHighlight)'/%3e%3c!--%20Specular%20highlight%20--%3e%3ccircle%20cx='7'%20cy='7'%20r='1.2'%20fill='url(%23cueSpecular)'/%3e%3c!--%20Subtle%20shadow%20for%20depth%20--%3e%3ccircle%20cx='9'%20cy='9'%20r='7.5'%20fill='url(%23cueShadow)'/%3e%3c/svg%3e",L6="_pinBallImg_1hrzk_212",B6={pinBallImg:L6},ay=""+new URL("logo-CyezyYO7.png",import.meta.url).href,z6=[{key:"cue",src:u5,alt:"Cue Ball"},{key:"8",src:wd,alt:"8 Ball"},{key:"9",src:Yp,alt:"9 Ball"},{key:"10",src:Yi,alt:"10 Ball"}],m5=600,p5=300,Ea=15,kr=Ea/2;function O6(a,r,t,n=1){const o=t*n,i=r.x-a.x,c=r.y-a.y,u=Math.sqrt(i*i+c*c);if(u===0||u>=o)return;const m=o-u+.01,g=i/u,f=c/u;a.x-=g*(m/2),a.y-=f*(m/2),r.x+=g*(m/2),r.y+=f*(m/2);const h=a.vx-r.vx,v=a.vy-r.vy,x=-(h*g+v*f)||.01;a.vx+=x*g,a.vy+=x*f,r.vx-=x*g,r.vy-=x*f,a.isMoving=!0,r.isMoving=!0}function F6(a=m5,r=p5,t=1){const n=a/t,o=r/t;return[{x:0,y:0},{x:n,y:0},{x:0,y:o},{x:n,y:o},{x:n/2,y:0},{x:n/2,y:o}]}function Sd({isRotated:a=!1}){console.log("PoolSimulation isRotated:",a);const r=b.useRef(null),t=b.useRef(null),n=b.useRef({cue:e.createRef(),8:e.createRef(),9:e.createRef(),10:e.createRef()}),o=b.useRef({}),i=b.useRef({}),c=b.useRef(null),u=b.useRef(null),m=b.useRef(0),g=b.useRef(1),[f,h]=b.useState(!1);function v(){Object.keys(o.current).forEach(I=>{i.current[I]={x:o.current[I].x,y:o.current[I].y}})}function S(){const I=r.current;if(!I)return;const A=I.offsetWidth,_=I.offsetHeight,k=A/g.current,B=_/g.current,z=k*.25,M=B/2,O=Ea*.87,U=Ea*.5;function Z(){return(Math.random()-.5)*1}o.current={8:{ref:n.current[8],x:z+Z(),y:M+Z(),vx:0,vy:0,isMoving:!1,visible:!0},9:{ref:n.current[9],x:z-O+Z(),y:M-U+Z(),vx:0,vy:0,isMoving:!1,visible:!0},10:{ref:n.current[10],x:z-O+Z(),y:M+U+Z(),vx:0,vy:0,isMoving:!1,visible:!0},cue:{ref:n.current.cue,x:k*.85,y:B/2,vx:0,vy:0,isMoving:!1,visible:!0}},Object.values(o.current).forEach(H=>{H.ref.current&&(H.ref.current.style.opacity=1)}),v()}function x(){S(),m.current=0,setTimeout(()=>{E()},1e3)}b.useEffect(()=>{if(r.current&&!f){const I=r.current,A=I.offsetWidth,_=I.offsetHeight;if(A<400||_<200)g.current=.55;else{const k=A/m5,B=_/p5;g.current=Math.min(k,B)}S(),setTimeout(()=>{E()},1e3),h(!0)}return()=>{cancelAnimationFrame(c.current),clearTimeout(u.current)}},[f]);function E(){if(!o.current.cue||o.current.cue.isMoving)return;const I=o.current.cue;if(m.current+=1,m.current===1){o.current[8];const A=o.current[9],_=r.current;if(!_)return;const k=_.offsetWidth,B=_.offsetHeight,z=k/g.current,M=B/g.current,O=z*.85,U=M*.5;I.x=O,I.y=U;const Z=A.x+(Math.random()-.5)*Ea*.3,H=A.y+(Math.random()-.5)*Ea*.3,V=Z-I.x,F=H-I.y,R=Math.atan2(F,V)+(Math.random()-.5)*(Math.PI/45),D=18+Math.random()*3;I.vx=Math.cos(R)*D,I.vy=Math.sin(R)*D,I.isMoving=!0,C();return}N()}function N(){var D;const I=["8","9","10"],A=I.find(j=>{var X;return(X=o.current[j])==null?void 0:X.visible});if(!A)return;const _=o.current.cue,k=o.current[A],B=r.current;if(!B)return;const z=B.offsetWidth,M=B.offsetHeight;z/g.current,M/g.current;const O=F6(z,M,g.current);let U=null,Z=1/0;for(const j of O){j.x-k.x,j.y-k.y;let X=j.x,W=j.y;const T=X-k.x,G=W-k.y,te=Math.hypot(T,G),P=k.x-T/te*Ea,ne=k.y-G/te*Ea;let q=!0;for(const ye of I)if(ye!==A&&(D=o.current[ye])!=null&&D.visible){const We=o.current[ye];if(Math.abs((ne-_.y)*We.x-(P-_.x)*We.y+P*_.y-ne*_.x)/Math.hypot(P-_.x,ne-_.y)<Ea*.6){q=!1;break}}if(!q)continue;const oe=Math.hypot(_.x-P,_.y-ne),he=Math.hypot(k.x-j.x,k.y-j.y);let be=oe*.05;be+=he*.02,oe<Ea*3?be*=.01:oe<Ea*6?be*=.1:oe<Ea*10&&(be*=.3);const nt=I.find(ye=>{var We;return ye!==A&&((We=o.current[ye])==null?void 0:We.visible)});if(nt){const ye=o.current[nt],We=P+(P-_.x)*.3,Ze=ne+(ne-_.y)*.3;Math.hypot(We-ye.x,Ze-ye.y)<Ea*8&&(be*=.5)}be+=Math.random()*.2,be<Z&&(Z=be,U={ghostX:P,ghostY:ne,targetToPocket:he,cueToGhost:oe,pocket:j})}if(!U){const j=Math.atan2(k.y-_.y,k.x-_.x),X=Math.hypot(k.x-_.x,k.y-_.y);U={ghostX:_.x+Math.cos(j)*X*.7,ghostY:_.y+Math.sin(j)*X*.7,targetToPocket:1e3,cueToGhost:X}}const H=U.ghostX-_.x,V=U.ghostY-_.y,F=Math.hypot(H,V);let R;F<Ea*2?R=3:F<Ea*4?R=4:F<Ea*8?R=5:F<Ea*12?R=6:R=7,U.targetToPocket>Ea*6&&(R+=1),R+=(Math.random()-.5)*.3,R=Math.max(2,Math.min(8,R)),_.vx=H/F*R,_.vy=V/F*R,_.isMoving=!0,C()}function C(){const _=r.current;if(!_)return;const k=_.offsetWidth,B=_.offsetHeight,z=kr*3.5,M=kr*4.5,O=z,U=k/g.current-M,Z=z,H=B/g.current-z;function V(){for(let F=0;F<16;F++){Object.entries(o.current).forEach(([D,j])=>{if(!j.visible)return;let X=j.x+j.vx/16,W=j.y+j.vy/16;const T=r.current;if(T){const G=T.offsetWidth,te=T.offsetHeight,P=G/g.current,ne=te/g.current;[{x:0,y:0},{x:P,y:0},{x:0,y:ne},{x:P,y:ne},{x:P/2,y:0},{x:P/2,y:ne}].some(he=>Math.hypot(X-he.x,W-he.y)<Ea*4)?(console.log(`Ball ${D} pocketed! Position: (${X.toFixed(1)}, ${W.toFixed(1)})`),j.isMoving=!1,j.visible=!1,j.ref.current&&(j.ref.current.style.opacity=0)):(X<O+kr?(j.x=O+kr,j.vx=Math.abs(j.vx)*.75):X>U-kr?(j.x=U-kr,j.vx=-Math.abs(j.vx)*.75):j.x=X,W<Z+kr?(j.y=Z+kr,j.vy=Math.abs(j.vy)*.75):W>H-kr?(j.y=H-kr,j.vy=-Math.abs(j.vy)*.75):j.y=W,j.vx*=Math.pow(.99,1/16),j.vy*=Math.pow(.99,1/16))}j.isMoving&&Math.abs(j.vx)<.03&&Math.abs(j.vy)<.03&&(j.vx=0,j.vy=0,j.isMoving=!1)});const R=Object.keys(o.current);for(let D=0;D<R.length;D++)for(let j=D+1;j<R.length;j++){const X=o.current[R[D]],W=o.current[R[j]];!X.visible||!W.visible||O6(X,W,Ea,g.current)}}if(Object.entries(o.current).forEach(([F,R])=>{if(R.ref.current&&R.visible){const D=R.x*g.current-kr*g.current,j=R.y*g.current-kr*g.current,X=Ea*g.current,W=k-X,T=B-X;R.ref.current.style.left=Math.max(0,Math.min(D,W))+"px",R.ref.current.style.top=Math.max(0,Math.min(j,T))+"px",R.ref.current.style.width=X+"px",R.ref.current.style.height=X+"px",R.ref.current.style.opacity=1}}),!o.current.cue.visible){if(Object.values(o.current).some(T=>T.isMoving)){c.current=requestAnimationFrame(V);return}const F=r.current;if(!F)return;const R=F.offsetWidth,D=F.offsetHeight,j=R/g.current,X=D/g.current,W=["8","9","10"].filter(T=>{var G;return(G=o.current[T])==null?void 0:G.visible});if(W.length>0){const T=W[0],G=o.current[T],te=(Math.random()-.5)*Ea*2,P=(Math.random()-.5)*Ea*2;o.current.cue.x=G.x+te,o.current.cue.y=G.y+P}else o.current.cue.x=j*.5,o.current.cue.y=X*.5;o.current.cue.vx=0,o.current.cue.vy=0,o.current.cue.isMoving=!1,o.current.cue.visible=!0,o.current.cue.ref.current&&(o.current.cue.ref.current.style.opacity=1),setTimeout(()=>{N()},1500);return}if(!o.current[10].visible){setTimeout(()=>{x()},1200);return}Object.values(o.current).some(F=>F.isMoving)?c.current=requestAnimationFrame(V):u.current||(u.current=setTimeout(()=>{u.current=null,N()},2e3))}c.current=requestAnimationFrame(V)}return e.createElement("div",{ref:r,"data-pool-container":!0,style:{width:"100%",height:"100%",position:"relative",background:"linear-gradient(180deg, #1a1a1a 0%, #000000 100%)",zIndex:0,boxShadow:"inset 0 0 50px rgba(0,0,0,0.8)"}},e.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(ellipse 1200px 800px at center 60px, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0.04) 20%, rgba(255,255,255,0.02) 40%, rgba(255,255,255,0.01) 60%, transparent 80%)",zIndex:3,pointerEvents:"none"}}),e.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(circle 800px at center 40px, rgba(255,255,255,0.02) 0%, transparent 70%)",zIndex:3,pointerEvents:"none"}}),e.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(circle 800px at center 40px, rgba(255,255,255,0.02) 0%, transparent 70%)",zIndex:3,pointerEvents:"none"}}),e.createElement("img",{ref:t,src:d5,alt:"Pool Table",style:{width:"100%",height:"100%",display:"block",objectFit:"fill",position:"absolute",top:1,left:0,zIndex:1,pointerEvents:"none",opacity:1,filter:"opacity(1) contrast(1.3) brightness(1.25) saturate(1.1)",boxShadow:"inset 0 0 30px rgba(0,0,0,0.3)",transform:a?"rotate(90deg)":"none",transformOrigin:"center center"},onLoad:()=>{console.log("Table image loaded, isRotated:",a,"transform:",a?"rotate(90deg)":"none")}}),e.createElement("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",userSelect:"none",zIndex:2}},e.createElement("img",{src:ay,alt:"League Logo",style:{position:"absolute",left:"50%",top:"50%",width:"30.5%",height:"auto",transform:a?"translate(-50%, -50%) rotate(-90deg)":"translate(-50%, -50%)",objectFit:"contain",zIndex:2,opacity:.25,filter:"drop-shadow(0 1px 4px rgba(0,0,0,0.3))",pointerEvents:"none",userSelect:"none"}})),z6.map(I=>{var A,_;return e.createElement(e.Fragment,{key:I.key},e.createElement("img",{src:I.src,alt:I.alt,ref:n.current[I.key],className:B6.pinBallImg,style:{position:"absolute",left:0,top:0,width:Ea,height:Ea,zIndex:10,opacity:((A=o.current[I.key])==null?void 0:A.visible)===!1?0:1,transition:"none",pointerEvents:"none",filter:"opacity(1) contrast(1.3) brightness(1.2) saturate(1.1) drop-shadow(0 2px 4px rgba(0,0,0,0.3))",borderRadius:"50%",transform:a?"rotate(-90deg)":"none",transformOrigin:"center center"}}),e.createElement("div",{style:{position:"absolute",left:3,top:3,width:Ea-6,height:Ea-6,borderRadius:"50%",background:"radial-gradient(ellipse 8px 4px at 30% 30%, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.1) 50%, transparent 100%)",zIndex:11,opacity:((_=o.current[I.key])==null?void 0:_.visible)===!1?0:.8,pointerEvents:"none"}}))}))}function ny({aspectWidth:a,aspectHeight:r,children:t}){const n=b.useRef(null),[o,i]=b.useState(1);return b.useEffect(()=>{function c(){if(!n.current)return;const{width:m,height:g}=n.current.getBoundingClientRect(),f=Math.min(m/a,g/r);i(f)}c();const u=()=>{c()};return window.addEventListener("resize",u),()=>{window.removeEventListener("resize",u)}},[a,r]),e.createElement("div",{ref:n,style:{width:"100%",height:"100%",position:"relative",overflow:"visible"}},e.createElement("div",{style:{width:a,height:r,transform:`translate(-50%, -50%) scale(${o})`,transformOrigin:"center center",position:"absolute",top:"50%",left:"50%"}},t))}function U6({open:a,onClose:r,standingsUrl:t}){const[n,o]=b.useState(!0);return a?e.createElement(Bt,{open:a,onClose:r,title:"📊 League Standings",maxWidth:"90vw",className:"standings-modal"},e.createElement("div",{style:{height:"70vh",width:"100%",position:"relative"}},n&&e.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,color:"#e53e3e",fontSize:"1.2rem",fontWeight:"bold"}},"Loading standings..."),e.createElement("iframe",{src:t,style:{width:"100%",height:"100%",border:"none",borderRadius:"8px",background:"#fff"},title:"League Standings",onLoad:()=>o(!1)})),e.createElement("div",{style:{marginTop:"1rem",textAlign:"center",color:"#888",fontSize:"0.9rem"}},"Front Range Pool League")):null}function W6({open:a,onClose:r,playerName:t,playerLastName:n,selectedDivision:o}){const[i,c]=b.useState([]),[u,m]=b.useState(!0),[g,f]=b.useState(null),[h,v]=b.useState(null),[S,x]=b.useState([]),E=`${t} ${n}`;return b.useEffect(()=>{if(!a||!o)return;async function N(){try{m(!0),f(null);const C=o.replace(/[^A-Za-z0-9]/g,"_"),I=`${pe}/static/standings_${C}.json`,A=await fetch(I);if(!A.ok)throw new Error(`Failed to fetch standings: ${A.status}`);const _=await A.json(),k=_.findIndex(B=>B.name&&B.name.toLowerCase().includes(E.toLowerCase()));if(k!==-1){v(k+1);const B=_.slice(k+1,k+5);x(B)}else f("Could not find user in standings")}catch(C){console.error("Error fetching standings:",C),f("Failed to load standings data")}finally{m(!1)}}N()},[a,o,E]),a?e.createElement("div",{className:we.modalOverlay,onClick:r},e.createElement("div",{className:we.dashboardModalContent,onClick:N=>N.stopPropagation()},e.createElement("div",{className:we.modalHeader},e.createElement("h2",{className:we.modalTitle},"🛡️ Potential Challengers"),e.createElement("button",{className:we.closeBtn,onClick:r},"×")),e.createElement("div",{style:{padding:"20px",flex:1,overflowY:"auto",display:"flex",flexDirection:"column"}},e.createElement("p",{style:{margin:"0 0 20px 0",color:"#e0e0e0",fontSize:"0.9rem",fontStyle:"italic",textAlign:"center"}},"Players ranked below you who could challenge you in Phase 2"),u&&e.createElement("div",{style:{textAlign:"center",padding:"40px 20px",color:"#888",flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},e.createElement("div",{style:{fontSize:"1.2rem",marginBottom:"10px"}},"🔄"),"Loading potential challengers..."),g&&e.createElement("div",{style:{textAlign:"center",padding:"40px 20px",color:"#e53e3e",flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},e.createElement("div",{style:{fontSize:"1.2rem",marginBottom:"10px"}},"⚠️"),g),!u&&!g&&e.createElement(e.Fragment,null,e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"8px",padding:"15px",marginBottom:"20px",border:"1px solid rgba(255,255,255,0.1)",textAlign:"center"}},e.createElement("div",{style:{color:"#ffffff",fontSize:"1.1rem",fontWeight:"bold",marginBottom:"5px"}},"Your Position: #",h),e.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.9rem"}},E)),e.createElement("div",{style:{marginBottom:"20px",flex:1}},e.createElement("h3",{style:{color:"#ffffff",fontSize:"1.2rem",marginBottom:"15px",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"Potential Challengers (",S.length,")"),S.length===0?e.createElement("div",{style:{textAlign:"center",padding:"20px",color:"#888",fontStyle:"italic"}},"No players ranked below you found in standings"):e.createElement("div",{style:{display:"grid",gap:"10px"}},S.map((N,C)=>e.createElement("div",{key:C,style:{background:"rgba(255,255,255,0.05)",borderRadius:"8px",padding:"15px",border:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"background-color 0.2s ease"},onMouseEnter:I=>I.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:I=>I.target.style.backgroundColor="rgba(255,255,255,0.05)"},e.createElement("div",{style:{flex:1}},e.createElement("div",{style:{color:"#ffffff",fontSize:"1rem",fontWeight:"bold",marginBottom:"5px"}},"#",h+C+1," - ",N.name||"Unknown Player"),N.record&&e.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.85rem"}},"Record: ",N.record),N.points&&e.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.85rem"}},"Points: ",N.points)),e.createElement("div",{style:{color:"#ff4444",fontSize:"1.5rem",marginLeft:"15px"}},"⚔️"))))),e.createElement("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"15px",border:"1px solid rgba(255,255,255,0.1)",marginBottom:"20px"}},e.createElement("div",{style:{color:"#ffffff",fontSize:"0.9rem",textAlign:"center",lineHeight:"1.4"}},e.createElement("strong",null,"Phase 2 Defense Rules:"),e.createElement("br",null),"• Players ranked below you can challenge you",e.createElement("br",null),"• You must accept at least 2 defense challenges",e.createElement("br",null),"• These are the players who could challenge you")))))):null}const j6="_modalOverlay_8evb8_7",H6="_modalContentSnazzy_8evb8_33",$6="_modalHeaderSnazzy_8evb8_69",Y6="_modalAccentBar_8evb8_89",G6="_modalTitleSnazzy_8evb8_107",q6="_modalCloseBtnSnazzy_8evb8_131",Z6="_modalDetailsSnazzy_8evb8_173",V6="_modalDetailRowSnazzy_8evb8_189",Q6="_modalDetailIcon_8evb8_217",J6="_modalDetailLabelSnazzy_8evb8_229",X6="_modalDetailValueSnazzy_8evb8_243",K6="_modalOpponentName_8evb8_263",eM="_modalVs_8evb8_277",tM="_gameTypeIcon_8evb8_293",aM="_modalActionBtn_8evb8_397",At={modalOverlay:j6,modalContentSnazzy:H6,modalHeaderSnazzy:$6,modalAccentBar:Y6,modalTitleSnazzy:G6,modalCloseBtnSnazzy:q6,modalDetailsSnazzy:Z6,modalDetailRowSnazzy:V6,modalDetailIcon:Q6,modalDetailLabelSnazzy:J6,modalDetailValueSnazzy:X6,modalOpponentName:K6,modalVs:eM,gameTypeIcon:tM,modalActionBtn:aM};class nM{constructor(){this.backendUrl=pe,this.currentAdmin=null,this.isAuthenticated=!1}async authenticateAdmin(r,t){try{console.log("🔐 Authenticating admin:",r);const n=await fetch(`${this.backendUrl}/api/platform/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,pin:t})});if(!n.ok){const i=await n.json();throw new Error(i.message||"Authentication failed")}const o=await n.json();if(o.success&&o.admin)return this.currentAdmin=o.admin,this.isAuthenticated=!0,localStorage.setItem("adminData",JSON.stringify(o.admin)),localStorage.setItem("isAdminAuthenticated","true"),console.log("✅ Admin authenticated:",o.admin.email,"Role:",o.admin.role),o.admin;throw new Error("Invalid response from server")}catch(n){throw console.error("❌ Admin authentication failed:",n),this.currentAdmin=null,this.isAuthenticated=!1,n}}async isSuperAdmin(r,t){try{const n=await this.authenticateAdmin(r,t);return n&&n.role==="super_admin"}catch(n){return console.log("🔍 User is not a super admin:",n.message),!1}}async isAdmin(r,t){try{const n=await this.authenticateAdmin(r,t);return n&&(n.role==="admin"||n.role==="super_admin"||n.role==="support")}catch(n){return console.log("🔍 User is not an admin:",n.message),!1}}getCurrentAdmin(){if(this.currentAdmin)return this.currentAdmin;const r=localStorage.getItem("adminData"),t=localStorage.getItem("isAdminAuthenticated")==="true";if(r&&t)try{return this.currentAdmin=JSON.parse(r),this.isAuthenticated=!0,this.currentAdmin}catch(n){console.error("Error parsing stored admin data:",n),this.logout()}return null}hasPermission(r){const t=this.getCurrentAdmin();return!t||!t.permissions?!1:t.permissions[r]===!0}isSuperAdminRole(){const r=this.getCurrentAdmin();return r&&r.role==="super_admin"}logout(){this.currentAdmin=null,this.isAuthenticated=!1,localStorage.removeItem("adminData"),localStorage.removeItem("isAdminAuthenticated"),console.log("🔓 Admin logged out")}isAuthenticated(){return this.isAuthenticated&&this.getCurrentAdmin()!==null}}const Gs=new nM,F2=""+new URL("ball9-U9rUK9VA.jpg",import.meta.url).href,U2=""+new URL("ball10-pPX9kWaM.jpg",import.meta.url).href;function ry({open:a,onClose:r,player1:t,player2:n,onSelect:o}){return a?e.createElement(Bt,{open:a,onClose:r,title:"Who won?",maxWidth:"340px"},e.createElement("div",{style:{textAlign:"center",marginBottom:18,color:"#fff",fontSize:"1.1em"}},"Please select the winner:"),e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:16,alignItems:"center"}},e.createElement("button",{style:{background:"#23232a",color:"#28a745",border:"2px solid #28a745",borderRadius:8,padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",minWidth:"160px"},onClick:()=>o(t)},t),e.createElement("button",{style:{background:"#23232a",color:"#e53e3e",border:"2px solid #e53e3e",borderRadius:8,padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",minWidth:"160px"},onClick:()=>o(n)},n)),e.createElement("button",{style:{marginTop:24,background:"#6c757d",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px",display:"block",marginLeft:"auto",marginRight:"auto"},onClick:r},"Cancel")):null}const rM=pe;class tn{static async request(r,t={}){const n=`${rM}${r}`,o={headers:{"Content-Type":"application/json",Accept:"application/json",...t.headers},signal:AbortSignal.timeout(3e4),credentials:"include",mode:"cors",...t},i=3;let c;for(let u=1;u<=i;u++)try{console.log(`API Request (attempt ${u}): ${n}`);const m=await fetch(n,o);if(!m.ok)throw new Error(`API Error: ${m.status} - ${m.statusText}`);const g=await m.json();return console.log(`API Success: ${n}`),g}catch(m){if(c=m,console.warn(`API Request failed (attempt ${u}/${i}): ${n}`,m),m.message.includes("400")||m.message.includes("401")||m.message.includes("403")||m.message.includes("404"))break;if(u<i){const g=Math.min(1e3*Math.pow(2,u-1),5e3);await new Promise(f=>setTimeout(f,g))}}throw console.error(`API Request failed after ${i} attempts: ${n}`,c),c}static get(r){return this.request(r)}static post(r,t){return this.request(r,{method:"POST",body:JSON.stringify(t)})}static patch(r,t){return this.request(r,{method:"PATCH",body:JSON.stringify(t)})}static delete(r){return this.request(r,{method:"DELETE"})}static async testConnection(){try{const r=await this.get("/health");return console.log("Backend connection test successful:",r),!0}catch(r){return console.error("Backend connection test failed:",r),!1}}}const ur={async getPendingProposals(a,r){return tn.get(`/api/proposals/by-name?receiverName=${encodeURIComponent(a)}&division=${encodeURIComponent(r)}`)},async getSentProposals(a,r){return tn.get(`/api/proposals/by-sender?senderName=${encodeURIComponent(a)}&division=${encodeURIComponent(r)}`)},async updateProposalStatus(a,r,t){return tn.patch(`/api/proposals/${a}/status`,{status:r,note:t})},async createProposal(a){return tn.post("/api/proposals",a)},async counterProposal(a,r){return tn.patch(`/api/proposals/${a}/counter`,r)},async markCompleted(a,r,t,n){return tn.patch(`/api/matches/completed/${a}`,{winner:r,markedByName:t,markedByEmail:n})},async cancelProposal(a){return tn.post(`/api/proposals/${a}/cancel`)},async getAllProposals(a){const r=a?`?division=${encodeURIComponent(a)}`:"";return tn.get(`/api/proposals/debug-list${r}`)}};function oM(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-"),m=new Date(parseInt(i),parseInt(c)-1,parseInt(u)),g=String(m.getMonth()+1).padStart(2,"0"),f=String(m.getDate()).padStart(2,"0"),h=m.getFullYear();return`${g}-${f}-${h}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}function sM({open:a,onClose:r,match:t,onCompleted:n,userPin:o,onMatchUpdated:i,senderName:c,senderEmail:u}){const[m,g]=b.useState({x:0,y:0}),[f,h]=b.useState(!1),v=b.useRef({x:0,y:0}),S=V=>{h(!0),v.current={x:V.clientX-m.x,y:V.clientY-m.y},document.body.style.userSelect="none"},x=V=>{f&&g({x:V.clientX-v.current.x,y:V.clientY-v.current.y})},E=()=>{h(!1),document.body.style.userSelect=""};b.useEffect(()=>(f?(window.addEventListener("mousemove",x),window.addEventListener("mouseup",E)):(window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",E)),()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",E)}),[f]);const[N,C]=b.useState(!1),[I,A]=b.useState(!1),[_,k]=b.useState({player1:"",player2:""}),[B,z]=b.useState(t);b.useEffect(()=>{z(t)},[t]);const M=()=>{let V=t.player||t.senderName,F=t.opponent||t.receiverName;k({player1:V,player2:F}),A(!0)},O=async V=>{A(!1),C(!0);const F=c&&c.trim()?c:B.player||B.senderName||"Unknown",R=u&&u.trim()?u:B.senderEmail||"unknown@example.com";console.log("Marking winner with:",{winner:V,markedByName:F,markedByEmail:R});try{const D=await ur.markCompleted(B._id,V,F,R);D&&D.proposal?(z(D.proposal),i&&i(D.proposal)):(z({...B,winner:V}),i&&i({...B,winner:V})),n&&n(B._id)}catch{alert("Failed to mark as completed.")}C(!1)};if(!a||!B)return null;let U=new Date,Z="",H="";if(B.date&&B.time){const[V,F,R]=B.date.split("-"),D=`${V}-${F.padStart(2,"0")}-${R.padStart(2,"0")}`;let j=B.time.trim().toUpperCase(),[X,W]=j.split(" "),[T,G]=X.split(":").map(Number);W==="PM"&&T<12&&(T+=12),W==="AM"&&T===12&&(T=0);const te=T.toString().padStart(2,"0"),P=(G||0).toString().padStart(2,"0"),ne=`${te}:${P}`;U=new Date(`${D}T${ne}:00`),Z=oM(B.date),H=U.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})}return e.createElement("div",{className:At.modalOverlay,onClick:r},e.createElement("div",{className:At.modalContentSnazzy,style:{transform:`translate(${m.x}px, ${m.y}px)`,cursor:f?"grabbing":"default"},onClick:V=>V.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Match Details",tabIndex:-1},e.createElement("button",{className:At.modalCloseBtnSnazzy,onClick:r,"aria-label":"Close"},"×"),e.createElement("div",{className:At.modalHeaderSnazzy,onMouseDown:S,style:{cursor:"grab",userSelect:"none"}},e.createElement("span",{className:At.modalAccentBar}),e.createElement("h2",{className:At.modalTitleSnazzy},"🎱 Match Details")),e.createElement("div",{className:At.modalDetailsSnazzy},e.createElement("div",{className:At.modalDetailRowSnazzy},e.createElement("span",{className:At.modalDetailIcon},"🤝"),e.createElement("span",{className:At.modalDetailLabelSnazzy},"Players:"),e.createElement("span",{className:At.modalDetailValueSnazzy},e.createElement("span",{className:At.modalOpponentName},B.player||B.senderName),e.createElement("span",{className:At.modalVs},"vs"),e.createElement("span",{className:At.modalOpponentName},B.opponent||B.receiverName))),e.createElement("div",{className:At.modalDetailRowSnazzy},e.createElement("span",{className:At.modalDetailIcon},"📅"),e.createElement("span",{className:At.modalDetailLabelSnazzy},"Date:"),e.createElement("span",{className:At.modalDetailValueSnazzy},Z)),e.createElement("div",{className:At.modalDetailRowSnazzy},e.createElement("span",{className:At.modalDetailIcon},"⏰"),e.createElement("span",{className:At.modalDetailLabelSnazzy},"Time:"),e.createElement("span",{className:At.modalDetailValueSnazzy},H)),e.createElement("div",{className:At.modalDetailRowSnazzy},e.createElement("span",{className:At.modalDetailIcon},"��"),e.createElement("span",{className:At.modalDetailLabelSnazzy},"Location:"),e.createElement("span",{className:At.modalDetailValueSnazzy},B.location)),B.gameType&&e.createElement("div",{className:At.modalDetailRowSnazzy},lM(B.gameType),e.createElement("span",{className:At.modalDetailLabelSnazzy},"Game Type:"),e.createElement("span",{className:At.modalDetailValueSnazzy},B.gameType)),B.raceLength&&e.createElement("div",{className:At.modalDetailRowSnazzy},e.createElement("span",{className:At.modalDetailIcon},"🏁"),e.createElement("span",{className:At.modalDetailLabelSnazzy},"Race to:"),e.createElement("span",{className:At.modalDetailValueSnazzy},B.raceLength)),B.winner&&e.createElement("div",{style:{color:"#ffd700",fontWeight:700,marginTop:6,fontSize:"1em"}},"🏆 Winner: ",B.winner,Gs.getCurrentAdmin()&&B.winnerChangedByName&&e.createElement("span",{style:{color:"#aaa",fontWeight:400,fontSize:"0.95em",marginLeft:8}},"(marked by ",B.winnerChangedByName,B.winnerChangedAt?` on ${new Date(B.winnerChangedAt).toLocaleString()}`:"",")"))),!B.completed&&e.createElement(e.Fragment,null,e.createElement("button",{className:At.modalActionBtn,onClick:M,disabled:N,style:{marginTop:16,minWidth:180},type:"button"},N?"Marking...":"Mark as Completed"),e.createElement(ry,{open:I,onClose:()=>A(!1),player1:_.player1,player2:_.player2,onSelect:O}))))}function lM(a){if(!a)return e.createElement("span",{className:At.modalDetailIcon},"🎯");const r=a.trim().toLowerCase();return r==="8 ball"||r==="8-ball"||r==="8ball"?e.createElement("img",{src:wd,alt:"8 Ball",className:At.gameTypeIcon}):r==="9 ball"||r==="9-ball"||r==="9ball"?e.createElement("img",{src:F2,alt:"9 Ball",className:At.gameTypeIcon}):r==="10 ball"||r==="10-ball"||r==="10ball"?e.createElement("img",{src:U2,alt:"10 Ball",className:At.gameTypeIcon}):r==="mixed"||r==="mixed games"?e.createElement(e.Fragment,null,e.createElement("img",{src:wd,alt:"8 Ball",className:At.gameTypeIcon}),e.createElement("img",{src:F2,alt:"9 Ball",className:At.gameTypeIcon}),e.createElement("img",{src:U2,alt:"10 Ball",className:At.gameTypeIcon})):e.createElement("span",{className:At.modalDetailIcon},"🎯")}const iM="_proposalList_1gl2k_39",cM="_proposalCardButton_1gl2k_169",dM="_proposalCardLabel_1gl2k_211",uM="_proposalCardMessage_1gl2k_223",mM="_modalContent_1gl2k_277",pM="_confirmDialogBox_1gl2k_345",Nn={proposalList:iM,proposalCardButton:cM,proposalCardLabel:dM,proposalCardMessage:uM,modalContent:mM,confirmDialogBox:pM};function W2(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-"),m=new Date(parseInt(i),parseInt(c)-1,parseInt(u)),g=String(m.getMonth()+1).padStart(2,"0"),f=String(m.getDate()).padStart(2,"0"),h=m.getFullYear();return`${g}-${f}-${h}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}function fM(a){if(!a)return"N/A";if(a.includes(":")&&a.length===5){const[r,t]=a.split(":"),n=parseInt(r),o=n>=12?"PM":"AM";return`${n===0?12:n>12?n-12:n}:${t} ${o}`}return a}function j2({proposals:a,onSelect:r,onClose:t,type:n="received",isAdmin:o=!1,senderEmail:i,senderName:c,onProposalUpdated:u}){console.log("Proposals:",a);const[m,g]=b.useState(null),[f,h]=b.useState(!1),[v,S]=b.useState(""),[x,E]=b.useState(a),[N,C]=b.useState("all"),I=a.filter(R=>R.isCounter),A=a.filter(R=>!R.isCounter),_=N==="counter"?I:A,[k,B]=b.useState(!1),[z,M]=b.useState(null),[O,U]=b.useState({player1:"",player2:""}),[Z,H]=b.useState(!1),V=async R=>{h(!0),S("");try{await ur.cancelProposal(R),E(D=>D.filter(j=>j._id!==R)),g(null)}catch{S("Failed to cancel proposal. Please try again.")}finally{h(!1)}},F=n==="completed"?x:a;return e.createElement(Bt,{open:!0,onClose:t,title:n==="completed"?"Completed Matches":n==="sent"?"Matches You Proposed":"Pending Match Proposals",maxWidth:"600px"},e.createElement("div",{className:Nn.modalContent,style:{position:"relative",maxHeight:"none",overflowY:"visible"}},n!=="completed"&&e.createElement("div",{style:{display:"flex",gap:8,marginBottom:16}},e.createElement("button",{onClick:()=>C("all"),style:{background:N==="all"?"#e53e3e":"#333",color:"#fff",border:"none",borderRadius:"6px",padding:"0.5rem 1.2rem",fontWeight:"bold",cursor:"pointer",boxShadow:N==="all"?"0 2px 8px #e53e3e44":"none",position:"relative"}},"All Proposals (",A.length,")",A.length>0&&e.createElement("span",{style:{background:"#fff",color:"#e53e3e",borderRadius:"50%",padding:"2px 8px",fontSize:"0.85em",fontWeight:"bold",marginLeft:8,position:"absolute",top:"-8px",right:"-12px",minWidth:24,textAlign:"center",boxShadow:"0 1px 4px #0002"}},A.length)),e.createElement("button",{onClick:()=>C("counter"),style:{background:N==="counter"?"#ff9800":"#333",color:"#fff",border:"none",borderRadius:"6px",padding:"0.5rem 1.2rem",fontWeight:"bold",cursor:"pointer",boxShadow:N==="counter"?"0 2px 8px #ff980044":"none",position:"relative"}},"Counter Proposals (",I.length,")",I.length>0&&e.createElement("span",{style:{background:"#fff",color:"#ff9800",borderRadius:"50%",padding:"2px 8px",fontSize:"0.85em",fontWeight:"bold",marginLeft:8,position:"absolute",top:"-8px",right:"-12px",minWidth:24,textAlign:"center",boxShadow:"0 1px 4px #0002"}},I.length))),e.createElement("ul",{className:Nn.proposalList,style:{listStyle:"none",padding:0,margin:0}},n==="completed"?F.map(R=>e.createElement("li",{key:R._id,style:{position:"relative",marginBottom:12}},e.createElement("div",{className:Nn.proposalCardButton,style:{cursor:"default",background:"#23232a",color:"#28a745",border:"2px solid #28a745",borderRadius:8,padding:"1rem",fontWeight:600}},e.createElement("div",null,e.createElement("span",{className:Nn.proposalCardLabel},"Opponent:")," ",R.opponent||R.receiverName||R.senderName),e.createElement("div",null,e.createElement("span",{className:Nn.proposalCardLabel},"Date:")," ",W2(R.date),"  ",e.createElement("span",{className:Nn.proposalCardLabel},"Time:")," ",R.time),e.createElement("div",null,e.createElement("span",{className:Nn.proposalCardLabel},"Location:")," ",R.location),e.createElement("div",null,e.createElement("span",{className:Nn.proposalCardLabel},"Game Type:")," ",R.gameType),R.winner&&e.createElement("div",{style:{color:"#ffd700",fontWeight:700,marginTop:6,fontSize:"1em"}},"🏆 Winner: ",R.winner,o&&R.winnerChangedByName&&e.createElement("span",{style:{color:"#aaa",fontWeight:400,fontSize:"0.95em",marginLeft:8}},"(marked by ",R.winnerChangedByName,R.winnerChangedAt?` on ${new Date(R.winnerChangedAt).toLocaleString()}`:"",")")),o&&e.createElement("button",{style:{marginTop:10,background:"#444",color:"#fff",border:"1px solid #ffd700",borderRadius:6,padding:"4px 12px",fontWeight:600,cursor:"pointer",fontSize:"0.95em",display:"inline-block"},disabled:Z,onClick:()=>{const D=R.player||R.senderName,j=R.opponent||R.receiverName;M(R),U({player1:D,player2:j}),B(!0)},type:"button"},Z?"Saving...":R.winner?"Edit Winner":"Set Winner")))):_.map(R=>e.createElement("li",{key:R._id,style:{position:"relative"}},e.createElement("button",{onClick:()=>r(R),className:Nn.proposalCardButton},e.createElement("div",null,e.createElement("span",{className:Nn.proposalCardLabel},n==="sent"?"To:":"From:"),n==="sent"?R.receiverName:R.senderName,R.isCounter&&e.createElement("span",{style:{background:"#ff9800",color:"#fff",borderRadius:"6px",padding:"2px 8px",fontSize:"0.85em",marginLeft:"8px",fontWeight:"bold",display:"inline-block"}},"Counter Proposal")),e.createElement("div",null,e.createElement("span",{className:Nn.proposalCardLabel},"Date:")," ",W2(R.date),"  ",e.createElement("span",{className:Nn.proposalCardLabel},"Time:")," ",fM(R.time)),e.createElement("div",null,e.createElement("span",{className:Nn.proposalCardLabel},"Location:")," ",R.location),e.createElement("div",{className:Nn.proposalCardMessage},R.message),e.createElement("div",null,e.createElement("span",{className:Nn.proposalCardLabel},"Status:"),e.createElement("span",{style:{color:R.status==="pending"?"#d32f2f":R.status==="countered"?"#fbc02d":"#388e3c"}},R.status))),n==="sent"&&R.status==="pending"&&e.createElement("button",{className:Nn.cancelProposalBtn,style:{position:"absolute",top:10,right:10},onClick:D=>{D.stopPropagation(),g(R._id)},disabled:f},"Cancel")))),_.length===0&&e.createElement("div",{style:{color:"#ffecb3",textAlign:"center",marginTop:16}},"Nothing to see here."),m&&e.createElement("div",{className:Nn.confirmDialogBox,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1001,background:"#222",color:"#fff",borderRadius:"10px",padding:"2rem 2.5rem",boxShadow:"0 4px 32px #000a",maxWidth:"90vw",minWidth:"260px",textAlign:"center",border:"2px solid #e53e3e"}},e.createElement("p",null,"Are you sure you want to cancel this proposal?"),e.createElement("button",{onClick:()=>V(m),disabled:f,style:{marginRight:12}},f?"Cancelling...":"Yes, Cancel"),e.createElement("button",{onClick:()=>g(null),disabled:f},"No, Go Back"),v&&e.createElement("div",{style:{color:"red",marginTop:8}},v))),e.createElement(ry,{open:k,onClose:()=>B(!1),player1:O.player1,player2:O.player2,onSelect:async R=>{if(z){H(!0);try{const D=await ur.markCompleted(z._id,R,c,i),j=D&&D.proposal?D.proposal:{...z,winner:R,winnerChangedByName:c,winnerChangedByEmail:i,winnerChangedAt:new Date().toISOString()};E(X=>X.map(W=>W._id===z._id?j:W)),u&&u(j),B(!1)}catch{alert("Failed to update winner.")}H(!1)}}}))}function gM(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-"),m=new Date(parseInt(i),parseInt(c)-1,parseInt(u)),g=String(m.getMonth()+1).padStart(2,"0"),f=String(m.getDate()).padStart(2,"0"),h=m.getFullYear();return`${g}-${f}-${h}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}function hM({proposal:a,phase:r,userNote:t,setUserNote:n,onConfirm:o,onClose:i,onCounterPropose:c,showNote:u=!0,confirmLabel:m="✅ Confirm Match",currentUserName:g,currentUserEmail:f}){if(!a)return null;const{senderName:h,receiverName:v,senderEmail:S,receiverEmail:x,day:E,date:N,time:C,location:I,gameType:A,raceLength:_,message:k,proposalNote:B}=a,z=f&&S&&f.toLowerCase()===S.toLowerCase()||g&&h&&g.toLowerCase()===h.toLowerCase();return e.createElement("div",{className:Da.confirmMatchCard},e.createElement("h1",{className:Da.confirmMatchTitle},e.createElement("span",{className:Da.redTitle},"🎱 Confirm Match")),e.createElement("div",{className:Da.confirmMatchDetails},e.createElement("div",{className:Da.detailRow},e.createElement("strong",{className:Da.redTitle},"You:")," ",v||a.to||"N/A"),e.createElement("div",{className:Da.detailRow},e.createElement("strong",{className:Da.redTitle},"Opponent:")," ",h||a.from||"N/A"),E&&e.createElement("div",{className:Da.detailRow},e.createElement("strong",{className:Da.redTitle},"Day:")," ",E),e.createElement("div",{className:Da.detailRow},e.createElement("strong",{className:Da.redTitle},"Date:")," ",gM(N)),e.createElement("div",{className:Da.detailRow},e.createElement("strong",{className:Da.redTitle},"Time:")," ",C||"N/A"),e.createElement("div",{className:Da.detailRow},e.createElement("strong",{className:Da.redTitle},"Location:")," ",I||"N/A"),A&&e.createElement("div",{className:Da.detailRow},e.createElement(Bp,{gameType:A,size:16}),e.createElement("strong",{className:Da.redTitle},"Game Type:")," ",A),_&&e.createElement("div",{className:Da.detailRow},e.createElement("strong",{className:Da.redTitle},"Race to:")," ",_),e.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:12,marginTop:18,justifyContent:"center",paddingBottom:8,width:"100%",boxSizing:"border-box"}},z?e.createElement(e.Fragment,null,e.createElement("span",{style:{color:"#888",fontWeight:500,fontSize:"1.1em"}},"You proposed this match. You can edit or message, but only your opponent can confirm/counter/cancel."),e.createElement("button",{className:Da.confirmBtn,style:{background:"#aaa",minWidth:120,marginLeft:16},onClick:i},"OK")):e.createElement(e.Fragment,null,e.createElement("button",{className:Da.confirmBtn,style:{minWidth:120},onClick:o},m),c&&e.createElement("button",{className:Da.confirmBtn,style:{background:"#fff",color:"#d32f2f",border:"1.5px solid #d32f2f",minWidth:120},onClick:c,type:"button"},"Counter-Propose"),e.createElement("button",{className:Da.confirmBtn,style:{background:"#aaa",minWidth:120},onClick:i},"Close")))))}function r0(a){const r={Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat",Sunday:"Sun"},t={Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]};return a&&a.split(/\r?\n/).forEach(n=>{const o=n.match(/Day:\s*(\w+),\s*Available From:\s*([\w:]+),\s*Available Until:\s*([\w: ]+)/i);if(o){const[i,c,u,m]=o,g=r[c];g&&t[g].push(`${u} - ${m}`)}}),t}function f5({open:a,onClose:r,opponents:t,onOpponentClick:n,phase:o,selectedCalendarDate:i,smartMatchMode:c=!1,allPlayers:u=[]}){if(!a)return null;const m=i?t.filter(g=>{if(!g.player||!g.player.availability)return!1;const h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][i.getDay()],v=g.player.availability;return v[h]&&v[h].length>0}):t;return e.createElement(Bt,{open:a,onClose:r,title:c?`🧠 Smart Match - Select Opponent${i?` (${i.toLocaleDateString()})`:""}`:`🎱 Select Opponent - ${o==="scheduled"||o==="offseason"?"Phase 1":"Phase 2"}${i?` (${i.toLocaleDateString()})`:""}`,maxWidth:"500px"},e.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},m.length===0?e.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},i?`No opponents available for ${i.toLocaleDateString()} (${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][i.getDay()]}).`:"No opponents available for scheduling at this time."):e.createElement("div",{style:{display:"grid",gap:"8px"}},m.map((g,f)=>e.createElement("button",{key:g.player&&g.player.email||`${g.opponentName}-${f}`||`opponent-${f}`,onClick:()=>n(g.player&&g.player.name?g.player.name:g.opponentName),style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:h=>{h.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",h.target.style.transform="translateY(-2px)",h.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:h=>{h.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",h.target.style.transform="translateY(0)",h.target.style.boxShadow="none"}},g.player&&g.player.name?g.player.name:g.opponentName)))))}function Gp({player:a,onClose:r,senderEmail:t,onProposeMatch:n,selectedDivision:o,phase:i}){if(!a)return null;const[c,u]=b.useState(!1),[m,g]=b.useState(10);return b.useEffect(()=>{let f;return c&&(g(10),f=setInterval(()=>{g(h=>h<=1?(clearInterval(f),u(!1),10):h-1)},1e3)),()=>clearInterval(f)},[c]),e.createElement(Bt,{open:!0,onClose:r,title:`👤 ${a.name||`${a.firstName} ${a.lastName}`}`,maxWidth:"600px"},e.createElement("div",{style:{textAlign:"left"}},e.createElement("div",{style:{fontSize:"0.9rem",color:"#888",marginBottom:"1.5rem",textAlign:"center"}},i==="scheduled"?"Phase 1 (Scheduled)":i==="challenge"?"Phase 2 (Challenge)":i),e.createElement("div",{style:{marginBottom:"1.5rem"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"0.5rem",fontSize:"1.1rem",textAlign:"center"}},"Preferred Locations:"),e.createElement("div",{style:{color:"#fff",textAlign:"center",maxWidth:"100%",overflow:"hidden"}},a.locations?(()=>{const f=a.locations.split(/\r?\n/).filter(Boolean);return e.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"8px",padding:"8px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",maxWidth:"100%"}},f.map((h,v)=>e.createElement("span",{key:h+v,style:{background:"rgba(229, 62, 62, 0.2)",color:"#fff",padding:"4px 8px",borderRadius:"12px",fontSize:"0.85rem",border:"1px solid rgba(229, 62, 62, 0.3)",whiteSpace:"nowrap",maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block"},title:h},"📍 ",h)))})():"No locations specified")),e.createElement("div",{style:{marginBottom:"1.5rem"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"0.5rem",fontSize:"1.1rem",textAlign:"center"}},"Availability:"),e.createElement("div",{style:{color:"#fff",fontSize:"0.9rem",marginBottom:"1rem",textAlign:"center",fontStyle:"italic"}},"Pick a timeblock within a day to schedule a match with this opponent."),e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"8px"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"}},["Mon","Tue","Wed"].map(f=>e.createElement("div",{key:f,style:{textAlign:"center"}},e.createElement("div",{style:{color:"#e53e3e",fontWeight:"bold",marginBottom:"0.5rem",fontSize:"0.9rem"}},f),!a.availability||!a.availability[f]||a.availability[f].length===0?e.createElement("div",{style:{color:"#666",fontSize:"0.8rem",padding:"0.5rem",background:"#222",borderRadius:"4px"}},"—"):(a.availability[f]||[]).map((h,v)=>e.createElement("div",{key:v,onClick:()=>{n&&n(f,h,i,o)},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"1px solid #e53e3e",borderRadius:"6px",padding:"0.5rem",fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"0.5rem"},onMouseEnter:S=>{S.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",S.target.style.transform="translateY(-1px)",S.target.style.boxShadow="0 2px 8px rgba(229, 62, 62, 0.3)"},onMouseLeave:S=>{S.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",S.target.style.transform="translateY(0)",S.target.style.boxShadow="none"},tabIndex:0,role:"button","aria-label":`Propose match on ${f} at ${h}`,onKeyPress:S=>{(S.key==="Enter"||S.key===" ")&&n&&n(f,h,i,o)}},h))))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"}},["Thu","Fri","Sat"].map(f=>e.createElement("div",{key:f,style:{textAlign:"center"}},e.createElement("div",{style:{color:"#e53e3e",fontWeight:"bold",marginBottom:"0.5rem",fontSize:"0.9rem"}},f),!a.availability||!a.availability[f]||a.availability[f].length===0?e.createElement("div",{style:{color:"#666",fontSize:"0.8rem",padding:"0.5rem",background:"#222",borderRadius:"4px"}},"—"):(a.availability[f]||[]).map((h,v)=>e.createElement("div",{key:v,onClick:()=>{n&&n(f,h,i,o)},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"1px solid #e53e3e",borderRadius:"6px",padding:"0.5rem",fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"0.5rem"},onMouseEnter:S=>{S.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",S.target.style.transform="translateY(-1px)",S.target.style.boxShadow="0 2px 8px rgba(229, 62, 62, 0.3)"},onMouseLeave:S=>{S.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",S.target.style.transform="translateY(0)",S.target.style.boxShadow="none"},tabIndex:0,role:"button","aria-label":`Propose match on ${f} at ${h}`,onKeyPress:S=>{(S.key==="Enter"||S.key===" ")&&n&&n(f,h,i,o)}},h))))))),e.createElement("div",{style:{marginBottom:"1.5rem",textAlign:"center"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"0.5rem",fontSize:"1.1rem",textAlign:"center"}},"Contact Information:"),e.createElement("div",{style:{color:"#fff",textAlign:"center"}},c?e.createElement("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid #e53e3e",borderRadius:"6px",padding:"1rem"}},e.createElement("div",{style:{marginBottom:"0.5rem"}},e.createElement("strong",null,"Email:")," ",a.email||"Not provided"),a.phone&&e.createElement("div",{style:{marginBottom:"0.5rem"}},e.createElement("strong",null,"Phone:")," ",a.phone),a.text&&e.createElement("div",{style:{marginBottom:"0.5rem"}},e.createElement("strong",null,"Text:")," ",a.text),a.preferredContacts&&a.preferredContacts.length>0&&e.createElement("div",null,e.createElement("strong",null,"Preferred Contact:")," ",a.preferredContacts.join(", ")),e.createElement("div",{style:{color:"#ffc107",fontSize:"0.9rem",marginTop:"0.5rem"}},"Auto-hiding in ",m," seconds...")):e.createElement("button",{onClick:()=>u(!0),style:{background:"#e53e3e",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer"}},"Show Contact Info")))))}const yM="_opponentName_1wgqu_479",Ma={"match-proposal-content":"_match-proposal-content_1wgqu_49","match-proposal-title":"_match-proposal-title_1wgqu_135","match-proposal-row":"_match-proposal-row_1wgqu_155","match-proposal-select":"_match-proposal-select_1wgqu_177","match-proposal-location-select":"_match-proposal-location-select_1wgqu_179","match-proposal-textarea":"_match-proposal-textarea_1wgqu_225","match-proposal-date-input":"_match-proposal-date-input_1wgqu_339","match-proposal-send-btn":"_match-proposal-send-btn_1wgqu_365","match-proposal-day-value":"_match-proposal-day-value_1wgqu_449",opponentName:yM,"match-proposal-division":"_match-proposal-division_1wgqu_493","match-proposal-phase":"_match-proposal-phase_1wgqu_493","match-proposal-label-red":"_match-proposal-label-red_1wgqu_501"};var yh={},bM=Object.create,g5=Object.defineProperty,vM=Object.getOwnPropertyDescriptor,h5=Object.getOwnPropertyNames,xM=Object.getPrototypeOf,EM=Object.prototype.hasOwnProperty,Od=(a,r)=>function(){return r||(0,a[h5(a)[0]])((r={exports:{}}).exports,r),r.exports},wM=(a,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of h5(r))!EM.call(a,o)&&o!==t&&g5(a,o,{get:()=>r[o],enumerable:!(n=vM(r,o))||n.enumerable});return a},Fd=(a,r,t)=>(t=a!=null?bM(xM(a)):{},wM(!a||!a.__esModule?g5(t,"default",{value:a,enumerable:!0}):t,a)),SM=Od({"node_modules/base64-js/index.js"(a){a.byteLength=m,a.toByteArray=f,a.fromByteArray=S;var r=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0,c=o.length;i<c;++i)r[i]=o[i],t[o.charCodeAt(i)]=i;var i,c;t[45]=62,t[95]=63;function u(x){var E=x.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var N=x.indexOf("=");N===-1&&(N=E);var C=N===E?0:4-N%4;return[N,C]}function m(x){var E=u(x),N=E[0],C=E[1];return(N+C)*3/4-C}function g(x,E,N){return(E+N)*3/4-N}function f(x){var E,N=u(x),C=N[0],I=N[1],A=new n(g(x,C,I)),_=0,k=I>0?C-4:C,B;for(B=0;B<k;B+=4)E=t[x.charCodeAt(B)]<<18|t[x.charCodeAt(B+1)]<<12|t[x.charCodeAt(B+2)]<<6|t[x.charCodeAt(B+3)],A[_++]=E>>16&255,A[_++]=E>>8&255,A[_++]=E&255;return I===2&&(E=t[x.charCodeAt(B)]<<2|t[x.charCodeAt(B+1)]>>4,A[_++]=E&255),I===1&&(E=t[x.charCodeAt(B)]<<10|t[x.charCodeAt(B+1)]<<4|t[x.charCodeAt(B+2)]>>2,A[_++]=E>>8&255,A[_++]=E&255),A}function h(x){return r[x>>18&63]+r[x>>12&63]+r[x>>6&63]+r[x&63]}function v(x,E,N){for(var C,I=[],A=E;A<N;A+=3)C=(x[A]<<16&16711680)+(x[A+1]<<8&65280)+(x[A+2]&255),I.push(h(C));return I.join("")}function S(x){for(var E,N=x.length,C=N%3,I=[],A=16383,_=0,k=N-C;_<k;_+=A)I.push(v(x,_,_+A>k?k:_+A));return C===1?(E=x[N-1],I.push(r[E>>2]+r[E<<4&63]+"==")):C===2&&(E=(x[N-2]<<8)+x[N-1],I.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),I.join("")}}}),CM=Od({"(disabled):https"(){}}),_M=Od({"node_modules/form-data/lib/browser.js"(a,r){r.exports=typeof self=="object"?self.FormData:window.FormData}}),kM=Od({"(disabled):node_modules/jsonwebtoken/index.js"(){}}),NM=Od({"(disabled):crypto"(){}}),IM=Fd(SM());function o0(a){return typeof a=="string"}function H2(a,r){return!!r&&o0(a)}function AM(a,r){const t=[];if(o0(a)&&H2(a,r)){for(let n=0,o=a.length;n<o;n++)if(a.charAt(n)){const i=a.charAt(n),c=r(i,n,a);t[n]=c}}else if(!o0(a)&&!H2(a,r)){for(let n=0,o=a.length;n<o;n++)if(n in a){const i=a[n],c=r(i,n,a);t[n]=c}}return t}var DM=a=>(0,IM.fromByteArray)(new Uint8Array(AM(a,r=>r.charCodeAt(0)))),MM=a=>{const r={},t=String.fromCharCode,n=a.length;let o,i=0,c,u,m=0,g,f="";const h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(o=0;o<64;o++)r[h.charAt(o)]=o;for(u=0;u<n;u++)for(c=r[a.charAt(u)],i=(i<<6)+c,m+=6;m>=8;)((g=i>>>(m-=8)&255)||u<n-2)&&(f+=t(g));return f},$2=class{constructor(a,r,t){this.client=a,this.id=r,this.data=t}async create(){var t,n,o,i,c,u,m,g,f,h,v,S;const a={id:this.id,message_template:(t=this.data)==null?void 0:t.message_template,segment_ids:(n=this.data)==null?void 0:n.segment_ids,sender_id:(o=this.data)==null?void 0:o.sender_id,sender_mode:(i=this.data)==null?void 0:i.sender_mode,channel_template:(c=this.data)==null?void 0:c.channel_template,create_channels:(u=this.data)==null?void 0:u.create_channels,show_channels:(m=this.data)==null?void 0:m.show_channels,description:(g=this.data)==null?void 0:g.description,name:(f=this.data)==null?void 0:f.name,skip_push:(h=this.data)==null?void 0:h.skip_push,skip_webhook:(v=this.data)==null?void 0:v.skip_webhook,user_ids:(S=this.data)==null?void 0:S.user_ids},r=await this.client.createCampaign(a);return this.id=r.campaign.id,this.data=r.campaign,r}verifyCampaignId(){if(!this.id)throw new Error("Campaign id is missing. Either create the campaign using campaign.create() or set the id during instantiation - const campaign = client.campaign(id)")}async start(a){return this.verifyCampaignId(),await this.client.startCampaign(this.id,a)}update(a){return this.verifyCampaignId(),this.client.updateCampaign(this.id,a)}async delete(){return this.verifyCampaignId(),await this.client.deleteCampaign(this.id)}stop(){return this.verifyCampaignId(),this.client.stopCampaign(this.id)}get(a){return this.verifyCampaignId(),this.client.getCampaign(this.id,a)}};function y5(a,r){return function(){return a.apply(r,arguments)}}var{toString:RM}=Object.prototype,{getPrototypeOf:oy}=Object,qp=(a=>r=>{const t=RM.call(r);return a[t]||(a[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Co=a=>(a=a.toLowerCase(),r=>qp(r)===a),Zp=a=>r=>typeof r===a,{isArray:Gi}=Array,Cd=Zp("undefined");function TM(a){return a!==null&&!Cd(a)&&a.constructor!==null&&!Cd(a.constructor)&&Or(a.constructor.isBuffer)&&a.constructor.isBuffer(a)}var b5=Co("ArrayBuffer");function PM(a){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(a):r=a&&a.buffer&&b5(a.buffer),r}var LM=Zp("string"),Or=Zp("function"),v5=Zp("number"),Vp=a=>a!==null&&typeof a=="object",BM=a=>a===!0||a===!1,Im=a=>{if(qp(a)!=="object")return!1;const r=oy(a);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},zM=Co("Date"),OM=Co("File"),FM=Co("Blob"),UM=Co("FileList"),WM=a=>Vp(a)&&Or(a.pipe),jM=a=>{let r;return a&&(typeof FormData=="function"&&a instanceof FormData||Or(a.append)&&((r=qp(a))==="formdata"||r==="object"&&Or(a.toString)&&a.toString()==="[object FormData]"))},HM=Co("URLSearchParams"),$M=a=>a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ud(a,r,{allOwnKeys:t=!1}={}){if(a===null||typeof a>"u")return;let n,o;if(typeof a!="object"&&(a=[a]),Gi(a))for(n=0,o=a.length;n<o;n++)r.call(null,a[n],n,a);else{const i=t?Object.getOwnPropertyNames(a):Object.keys(a),c=i.length;let u;for(n=0;n<c;n++)u=i[n],r.call(null,a[u],u,a)}}function x5(a,r){r=r.toLowerCase();const t=Object.keys(a);let n=t.length,o;for(;n-- >0;)if(o=t[n],r===o.toLowerCase())return o;return null}var E5=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,w5=a=>!Cd(a)&&a!==E5;function s0(){const{caseless:a}=w5(this)&&this||{},r={},t=(n,o)=>{const i=a&&x5(r,o)||o;Im(r[i])&&Im(n)?r[i]=s0(r[i],n):Im(n)?r[i]=s0({},n):Gi(n)?r[i]=n.slice():r[i]=n};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&Ud(arguments[n],t);return r}var YM=(a,r,t,{allOwnKeys:n}={})=>(Ud(r,(o,i)=>{t&&Or(o)?a[i]=y5(o,t):a[i]=o},{allOwnKeys:n}),a),GM=a=>(a.charCodeAt(0)===65279&&(a=a.slice(1)),a),qM=(a,r,t,n)=>{a.prototype=Object.create(r.prototype,n),a.prototype.constructor=a,Object.defineProperty(a,"super",{value:r.prototype}),t&&Object.assign(a.prototype,t)},ZM=(a,r,t,n)=>{let o,i,c;const u={};if(r=r||{},a==null)return r;do{for(o=Object.getOwnPropertyNames(a),i=o.length;i-- >0;)c=o[i],(!n||n(c,a,r))&&!u[c]&&(r[c]=a[c],u[c]=!0);a=t!==!1&&oy(a)}while(a&&(!t||t(a,r))&&a!==Object.prototype);return r},VM=(a,r,t)=>{a=String(a),(t===void 0||t>a.length)&&(t=a.length),t-=r.length;const n=a.indexOf(r,t);return n!==-1&&n===t},QM=a=>{if(!a)return null;if(Gi(a))return a;let r=a.length;if(!v5(r))return null;const t=new Array(r);for(;r-- >0;)t[r]=a[r];return t},JM=(a=>r=>a&&r instanceof a)(typeof Uint8Array<"u"&&oy(Uint8Array)),XM=(a,r)=>{const n=(a&&a[Symbol.iterator]).call(a);let o;for(;(o=n.next())&&!o.done;){const i=o.value;r.call(a,i[0],i[1])}},KM=(a,r)=>{let t;const n=[];for(;(t=a.exec(r))!==null;)n.push(t);return n},eR=Co("HTMLFormElement"),tR=a=>a.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,o){return n.toUpperCase()+o}),Y2=(({hasOwnProperty:a})=>(r,t)=>a.call(r,t))(Object.prototype),aR=Co("RegExp"),S5=(a,r)=>{const t=Object.getOwnPropertyDescriptors(a),n={};Ud(t,(o,i)=>{let c;(c=r(o,i,a))!==!1&&(n[i]=c||o)}),Object.defineProperties(a,n)},nR=a=>{S5(a,(r,t)=>{if(Or(a)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=a[t];if(Or(n)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},rR=(a,r)=>{const t={},n=o=>{o.forEach(i=>{t[i]=!0})};return Gi(a)?n(a):n(String(a).split(r)),t},oR=()=>{},sR=(a,r)=>(a=+a,Number.isFinite(a)?a:r),bh="abcdefghijklmnopqrstuvwxyz",G2="0123456789",C5={DIGIT:G2,ALPHA:bh,ALPHA_DIGIT:bh+bh.toUpperCase()+G2},lR=(a=16,r=C5.ALPHA_DIGIT)=>{let t="";const{length:n}=r;for(;a--;)t+=r[Math.random()*n|0];return t};function iR(a){return!!(a&&Or(a.append)&&a[Symbol.toStringTag]==="FormData"&&a[Symbol.iterator])}var cR=a=>{const r=new Array(10),t=(n,o)=>{if(Vp(n)){if(r.indexOf(n)>=0)return;if(!("toJSON"in n)){r[o]=n;const i=Gi(n)?[]:{};return Ud(n,(c,u)=>{const m=t(c,o+1);!Cd(m)&&(i[u]=m)}),r[o]=void 0,i}}return n};return t(a,0)},dR=Co("AsyncFunction"),uR=a=>a&&(Vp(a)||Or(a))&&Or(a.then)&&Or(a.catch),Ne={isArray:Gi,isArrayBuffer:b5,isBuffer:TM,isFormData:jM,isArrayBufferView:PM,isString:LM,isNumber:v5,isBoolean:BM,isObject:Vp,isPlainObject:Im,isUndefined:Cd,isDate:zM,isFile:OM,isBlob:FM,isRegExp:aR,isFunction:Or,isStream:WM,isURLSearchParams:HM,isTypedArray:JM,isFileList:UM,forEach:Ud,merge:s0,extend:YM,trim:$M,stripBOM:GM,inherits:qM,toFlatObject:ZM,kindOf:qp,kindOfTest:Co,endsWith:VM,toArray:QM,forEachEntry:XM,matchAll:KM,isHTMLForm:eR,hasOwnProperty:Y2,hasOwnProp:Y2,reduceDescriptors:S5,freezeMethods:nR,toObjectSet:rR,toCamelCase:tR,noop:oR,toFiniteNumber:sR,findKey:x5,global:E5,isContextDefined:w5,ALPHABET:C5,generateString:lR,isSpecCompliantForm:iR,toJSONObject:cR,isAsyncFn:dR,isThenable:uR};function zi(a,r,t,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=a,this.name="AxiosError",r&&(this.code=r),t&&(this.config=t),n&&(this.request=n),o&&(this.response=o)}Ne.inherits(zi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ne.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var _5=zi.prototype,k5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(a=>{k5[a]={value:a}});Object.defineProperties(zi,k5);Object.defineProperty(_5,"isAxiosError",{value:!0});zi.from=(a,r,t,n,o,i)=>{const c=Object.create(_5);return Ne.toFlatObject(a,c,function(m){return m!==Error.prototype},u=>u!=="isAxiosError"),zi.call(c,a.message,r,t,n,o),c.cause=a,c.name=a.name,i&&Object.assign(c,i),c};var ia=zi,mR=null;function l0(a){return Ne.isPlainObject(a)||Ne.isArray(a)}function N5(a){return Ne.endsWith(a,"[]")?a.slice(0,-2):a}function q2(a,r,t){return a?a.concat(r).map(function(o,i){return o=N5(o),!t&&i?"["+o+"]":o}).join(t?".":""):r}function pR(a){return Ne.isArray(a)&&!a.some(l0)}var fR=Ne.toFlatObject(Ne,{},null,function(r){return/^is[A-Z]/.test(r)});function gR(a,r,t){if(!Ne.isObject(a))throw new TypeError("target must be an object");r=r||new FormData,t=Ne.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,N){return!Ne.isUndefined(N[E])});const n=t.metaTokens,o=t.visitor||f,i=t.dots,c=t.indexes,m=(t.Blob||typeof Blob<"u"&&Blob)&&Ne.isSpecCompliantForm(r);if(!Ne.isFunction(o))throw new TypeError("visitor must be a function");function g(x){if(x===null)return"";if(Ne.isDate(x))return x.toISOString();if(!m&&Ne.isBlob(x))throw new ia("Blob is not supported. Use a Buffer instead.");return Ne.isArrayBuffer(x)||Ne.isTypedArray(x)?m&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function f(x,E,N){let C=x;if(x&&!N&&typeof x=="object"){if(Ne.endsWith(E,"{}"))E=n?E:E.slice(0,-2),x=JSON.stringify(x);else if(Ne.isArray(x)&&pR(x)||(Ne.isFileList(x)||Ne.endsWith(E,"[]"))&&(C=Ne.toArray(x)))return E=N5(E),C.forEach(function(A,_){!(Ne.isUndefined(A)||A===null)&&r.append(c===!0?q2([E],_,i):c===null?E:E+"[]",g(A))}),!1}return l0(x)?!0:(r.append(q2(N,E,i),g(x)),!1)}const h=[],v=Object.assign(fR,{defaultVisitor:f,convertValue:g,isVisitable:l0});function S(x,E){if(!Ne.isUndefined(x)){if(h.indexOf(x)!==-1)throw Error("Circular reference detected in "+E.join("."));h.push(x),Ne.forEach(x,function(C,I){(!(Ne.isUndefined(C)||C===null)&&o.call(r,C,Ne.isString(I)?I.trim():I,E,v))===!0&&S(C,E?E.concat(I):[I])}),h.pop()}}if(!Ne.isObject(a))throw new TypeError("data must be an object");return S(a),r}var Qp=gR;function Z2(a){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(a).replace(/[!'()~]|%20|%00/g,function(n){return r[n]})}function I5(a,r){this._pairs=[],a&&Qp(a,this,r)}var A5=I5.prototype;A5.append=function(r,t){this._pairs.push([r,t])};A5.toString=function(r){const t=r?function(n){return r.call(this,n,Z2)}:Z2;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};var D5=I5;function hR(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function M5(a,r,t){if(!r)return a;const n=t&&t.encode||hR,o=t&&t.serialize;let i;if(o?i=o(r,t):i=Ne.isURLSearchParams(r)?r.toString():new D5(r,t).toString(n),i){const c=a.indexOf("#");c!==-1&&(a=a.slice(0,c)),a+=(a.indexOf("?")===-1?"?":"&")+i}return a}var yR=class{constructor(){this.handlers=[]}use(a,r,t){return this.handlers.push({fulfilled:a,rejected:r,synchronous:t?t.synchronous:!1,runWhen:t?t.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){Ne.forEach(this.handlers,function(t){t!==null&&a(t)})}},V2=yR,R5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bR=typeof URLSearchParams<"u"?URLSearchParams:D5,vR=typeof FormData<"u"?FormData:null,xR=typeof Blob<"u"?Blob:null,ER=(()=>{let a;return typeof navigator<"u"&&((a=navigator.product)==="ReactNative"||a==="NativeScript"||a==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),wR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",bo={classes:{URLSearchParams:bR,FormData:vR,Blob:xR},isStandardBrowserEnv:ER,isStandardBrowserWebWorkerEnv:wR,protocols:["http","https","file","blob","url","data"]};function SR(a,r){return Qp(a,new bo.classes.URLSearchParams,Object.assign({visitor:function(t,n,o,i){return bo.isNode&&Ne.isBuffer(t)?(this.append(n,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},r))}function CR(a){return Ne.matchAll(/\w+|\[(\w*)]/g,a).map(r=>r[0]==="[]"?"":r[1]||r[0])}function _R(a){const r={},t=Object.keys(a);let n;const o=t.length;let i;for(n=0;n<o;n++)i=t[n],r[i]=a[i];return r}function kR(a){function r(t,n,o,i){let c=t[i++];const u=Number.isFinite(+c),m=i>=t.length;return c=!c&&Ne.isArray(o)?o.length:c,m?(Ne.hasOwnProp(o,c)?o[c]=[o[c],n]:o[c]=n,!u):((!o[c]||!Ne.isObject(o[c]))&&(o[c]=[]),r(t,n,o[c],i)&&Ne.isArray(o[c])&&(o[c]=_R(o[c])),!u)}if(Ne.isFormData(a)&&Ne.isFunction(a.entries)){const t={};return Ne.forEachEntry(a,(n,o)=>{r(CR(n),o,t,0)}),t}return null}var T5=kR;function NR(a,r,t){if(Ne.isString(a))try{return(r||JSON.parse)(a),Ne.trim(a)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(a)}var sy={transitional:R5,adapter:["xhr","http"],transformRequest:[function(r,t){const n=t.getContentType()||"",o=n.indexOf("application/json")>-1,i=Ne.isObject(r);if(i&&Ne.isHTMLForm(r)&&(r=new FormData(r)),Ne.isFormData(r))return o&&o?JSON.stringify(T5(r)):r;if(Ne.isArrayBuffer(r)||Ne.isBuffer(r)||Ne.isStream(r)||Ne.isFile(r)||Ne.isBlob(r))return r;if(Ne.isArrayBufferView(r))return r.buffer;if(Ne.isURLSearchParams(r))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let u;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return SR(r,this.formSerializer).toString();if((u=Ne.isFileList(r))||n.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Qp(u?{"files[]":r}:r,m&&new m,this.formSerializer)}}return i||o?(t.setContentType("application/json",!1),NR(r)):r}],transformResponse:[function(r){const t=this.transitional||sy.transitional,n=t&&t.forcedJSONParsing,o=this.responseType==="json";if(r&&Ne.isString(r)&&(n&&!this.responseType||o)){const c=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(r)}catch(u){if(c)throw u.name==="SyntaxError"?ia.from(u,ia.ERR_BAD_RESPONSE,this,null,this.response):u}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:bo.classes.FormData,Blob:bo.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ne.forEach(["delete","get","head","post","put","patch"],a=>{sy.headers[a]={}});var ly=sy,IR=Ne.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),AR=a=>{const r={};let t,n,o;return a&&a.split(`
`).forEach(function(c){o=c.indexOf(":"),t=c.substring(0,o).trim().toLowerCase(),n=c.substring(o+1).trim(),!(!t||r[t]&&IR[t])&&(t==="set-cookie"?r[t]?r[t].push(n):r[t]=[n]:r[t]=r[t]?r[t]+", "+n:n)}),r},Q2=Symbol("internals");function qc(a){return a&&String(a).trim().toLowerCase()}function Am(a){return a===!1||a==null?a:Ne.isArray(a)?a.map(Am):String(a)}function DR(a){const r=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(a);)r[n[1]]=n[2];return r}var MR=a=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(a.trim());function vh(a,r,t,n,o){if(Ne.isFunction(n))return n.call(this,r,t);if(o&&(r=t),!!Ne.isString(r)){if(Ne.isString(n))return r.indexOf(n)!==-1;if(Ne.isRegExp(n))return n.test(r)}}function RR(a){return a.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,t,n)=>t.toUpperCase()+n)}function TR(a,r){const t=Ne.toCamelCase(" "+r);["get","set","has"].forEach(n=>{Object.defineProperty(a,n+t,{value:function(o,i,c){return this[n].call(this,r,o,i,c)},configurable:!0})})}var Jp=class{constructor(a){a&&this.set(a)}set(a,r,t){const n=this;function o(c,u,m){const g=qc(u);if(!g)throw new Error("header name must be a non-empty string");const f=Ne.findKey(n,g);(!f||n[f]===void 0||m===!0||m===void 0&&n[f]!==!1)&&(n[f||u]=Am(c))}const i=(c,u)=>Ne.forEach(c,(m,g)=>o(m,g,u));return Ne.isPlainObject(a)||a instanceof this.constructor?i(a,r):Ne.isString(a)&&(a=a.trim())&&!MR(a)?i(AR(a),r):a!=null&&o(r,a,t),this}get(a,r){if(a=qc(a),a){const t=Ne.findKey(this,a);if(t){const n=this[t];if(!r)return n;if(r===!0)return DR(n);if(Ne.isFunction(r))return r.call(this,n,t);if(Ne.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,r){if(a=qc(a),a){const t=Ne.findKey(this,a);return!!(t&&this[t]!==void 0&&(!r||vh(this,this[t],t,r)))}return!1}delete(a,r){const t=this;let n=!1;function o(i){if(i=qc(i),i){const c=Ne.findKey(t,i);c&&(!r||vh(t,t[c],c,r))&&(delete t[c],n=!0)}}return Ne.isArray(a)?a.forEach(o):o(a),n}clear(a){const r=Object.keys(this);let t=r.length,n=!1;for(;t--;){const o=r[t];(!a||vh(this,this[o],o,a,!0))&&(delete this[o],n=!0)}return n}normalize(a){const r=this,t={};return Ne.forEach(this,(n,o)=>{const i=Ne.findKey(t,o);if(i){r[i]=Am(n),delete r[o];return}const c=a?RR(o):String(o).trim();c!==o&&delete r[o],r[c]=Am(n),t[c]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const r=Object.create(null);return Ne.forEach(this,(t,n)=>{t!=null&&t!==!1&&(r[n]=a&&Ne.isArray(t)?t.join(", "):t)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,r])=>a+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...r){const t=new this(a);return r.forEach(n=>t.set(n)),t}static accessor(a){const t=(this[Q2]=this[Q2]={accessors:{}}).accessors,n=this.prototype;function o(i){const c=qc(i);t[c]||(TR(n,i),t[c]=!0)}return Ne.isArray(a)?a.forEach(o):o(a),this}};Jp.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ne.reduceDescriptors(Jp.prototype,({value:a},r)=>{let t=r[0].toUpperCase()+r.slice(1);return{get:()=>a,set(n){this[t]=n}}});Ne.freezeMethods(Jp);var ts=Jp;function xh(a,r){const t=this||ly,n=r||t,o=ts.from(n.headers);let i=n.data;return Ne.forEach(a,function(u){i=u.call(t,i,o.normalize(),r?r.status:void 0)}),o.normalize(),i}function P5(a){return!!(a&&a.__CANCEL__)}function L5(a,r,t){ia.call(this,a??"canceled",ia.ERR_CANCELED,r,t),this.name="CanceledError"}Ne.inherits(L5,ia,{__CANCEL__:!0});var Xp=L5;function PR(a,r,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?a(t):r(new ia("Request failed with status code "+t.status,[ia.ERR_BAD_REQUEST,ia.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}var LR=bo.isStandardBrowserEnv?function(){return{write:function(t,n,o,i,c,u){const m=[];m.push(t+"="+encodeURIComponent(n)),Ne.isNumber(o)&&m.push("expires="+new Date(o).toGMTString()),Ne.isString(i)&&m.push("path="+i),Ne.isString(c)&&m.push("domain="+c),u===!0&&m.push("secure"),document.cookie=m.join("; ")},read:function(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function BR(a){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(a)}function zR(a,r){return r?a.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):a}function B5(a,r){return a&&!BR(r)?zR(a,r):r}var OR=bo.isStandardBrowserEnv?function(){const r=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function o(i){let c=i;return r&&(t.setAttribute("href",c),c=t.href),t.setAttribute("href",c),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=o(window.location.href),function(c){const u=Ne.isString(c)?o(c):c;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}();function FR(a){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(a);return r&&r[1]||""}function UR(a,r){a=a||10;const t=new Array(a),n=new Array(a);let o=0,i=0,c;return r=r!==void 0?r:1e3,function(m){const g=Date.now(),f=n[i];c||(c=g),t[o]=m,n[o]=g;let h=i,v=0;for(;h!==o;)v+=t[h++],h=h%a;if(o=(o+1)%a,o===i&&(i=(i+1)%a),g-c<r)return;const S=f&&g-f;return S?Math.round(v*1e3/S):void 0}}var WR=UR;function J2(a,r){let t=0;const n=WR(50,250);return o=>{const i=o.loaded,c=o.lengthComputable?o.total:void 0,u=i-t,m=n(u),g=i<=c;t=i;const f={loaded:i,total:c,progress:c?i/c:void 0,bytes:u,rate:m||void 0,estimated:m&&c&&g?(c-i)/m:void 0,event:o};f[r?"download":"upload"]=!0,a(f)}}var jR=typeof XMLHttpRequest<"u",HR=jR&&function(a){return new Promise(function(t,n){let o=a.data;const i=ts.from(a.headers).normalize(),c=a.responseType;let u;function m(){a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let g;Ne.isFormData(o)&&(bo.isStandardBrowserEnv||bo.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?Ne.isString(g=i.getContentType())&&i.setContentType(g.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let f=new XMLHttpRequest;if(a.auth){const x=a.auth.username||"",E=a.auth.password?unescape(encodeURIComponent(a.auth.password)):"";i.set("Authorization","Basic "+btoa(x+":"+E))}const h=B5(a.baseURL,a.url);f.open(a.method.toUpperCase(),M5(h,a.params,a.paramsSerializer),!0),f.timeout=a.timeout;function v(){if(!f)return;const x=ts.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),N={data:!c||c==="text"||c==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:x,config:a,request:f};PR(function(I){t(I),m()},function(I){n(I),m()},N),f=null}if("onloadend"in f?f.onloadend=v:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(v)},f.onabort=function(){f&&(n(new ia("Request aborted",ia.ECONNABORTED,a,f)),f=null)},f.onerror=function(){n(new ia("Network Error",ia.ERR_NETWORK,a,f)),f=null},f.ontimeout=function(){let E=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const N=a.transitional||R5;a.timeoutErrorMessage&&(E=a.timeoutErrorMessage),n(new ia(E,N.clarifyTimeoutError?ia.ETIMEDOUT:ia.ECONNABORTED,a,f)),f=null},bo.isStandardBrowserEnv){const x=OR(h)&&a.xsrfCookieName&&LR.read(a.xsrfCookieName);x&&i.set(a.xsrfHeaderName,x)}o===void 0&&i.setContentType(null),"setRequestHeader"in f&&Ne.forEach(i.toJSON(),function(E,N){f.setRequestHeader(N,E)}),Ne.isUndefined(a.withCredentials)||(f.withCredentials=!!a.withCredentials),c&&c!=="json"&&(f.responseType=a.responseType),typeof a.onDownloadProgress=="function"&&f.addEventListener("progress",J2(a.onDownloadProgress,!0)),typeof a.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",J2(a.onUploadProgress)),(a.cancelToken||a.signal)&&(u=x=>{f&&(n(!x||x.type?new Xp(null,a,f):x),f.abort(),f=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const S=FR(h);if(S&&bo.protocols.indexOf(S)===-1){n(new ia("Unsupported protocol "+S+":",ia.ERR_BAD_REQUEST,a));return}f.send(o||null)})},i0={http:mR,xhr:HR};Ne.forEach(i0,(a,r)=>{if(a){try{Object.defineProperty(a,"name",{value:r})}catch{}Object.defineProperty(a,"adapterName",{value:r})}});var X2=a=>`- ${a}`,$R=a=>Ne.isFunction(a)||a===null||a===!1,z5={getAdapter:a=>{a=Ne.isArray(a)?a:[a];const{length:r}=a;let t,n;const o={};for(let i=0;i<r;i++){t=a[i];let c;if(n=t,!$R(t)&&(n=i0[(c=String(t)).toLowerCase()],n===void 0))throw new ia(`Unknown adapter '${c}'`);if(n)break;o[c||"#"+i]=n}if(!n){const i=Object.entries(o).map(([u,m])=>`adapter ${u} `+(m===!1?"is not supported by the environment":"is not available in the build"));let c=r?i.length>1?`since :
`+i.map(X2).join(`
`):" "+X2(i[0]):"as no adapter specified";throw new ia("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n},adapters:i0};function Eh(a){if(a.cancelToken&&a.cancelToken.throwIfRequested(),a.signal&&a.signal.aborted)throw new Xp(null,a)}function K2(a){return Eh(a),a.headers=ts.from(a.headers),a.data=xh.call(a,a.transformRequest),["post","put","patch"].indexOf(a.method)!==-1&&a.headers.setContentType("application/x-www-form-urlencoded",!1),z5.getAdapter(a.adapter||ly.adapter)(a).then(function(n){return Eh(a),n.data=xh.call(a,a.transformResponse,n),n.headers=ts.from(n.headers),n},function(n){return P5(n)||(Eh(a),n&&n.response&&(n.response.data=xh.call(a,a.transformResponse,n.response),n.response.headers=ts.from(n.response.headers))),Promise.reject(n)})}var ex=a=>a instanceof ts?a.toJSON():a;function Oi(a,r){r=r||{};const t={};function n(g,f,h){return Ne.isPlainObject(g)&&Ne.isPlainObject(f)?Ne.merge.call({caseless:h},g,f):Ne.isPlainObject(f)?Ne.merge({},f):Ne.isArray(f)?f.slice():f}function o(g,f,h){if(Ne.isUndefined(f)){if(!Ne.isUndefined(g))return n(void 0,g,h)}else return n(g,f,h)}function i(g,f){if(!Ne.isUndefined(f))return n(void 0,f)}function c(g,f){if(Ne.isUndefined(f)){if(!Ne.isUndefined(g))return n(void 0,g)}else return n(void 0,f)}function u(g,f,h){if(h in r)return n(g,f);if(h in a)return n(void 0,g)}const m={url:i,method:i,data:i,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(g,f)=>o(ex(g),ex(f),!0)};return Ne.forEach(Object.keys(Object.assign({},a,r)),function(f){const h=m[f]||o,v=h(a[f],r[f],f);Ne.isUndefined(v)&&h!==u||(t[f]=v)}),t}var O5="1.6.0",iy={};["object","boolean","number","function","string","symbol"].forEach((a,r)=>{iy[a]=function(n){return typeof n===a||"a"+(r<1?"n ":" ")+a}});var tx={};iy.transitional=function(r,t,n){function o(i,c){return"[Axios v"+O5+"] Transitional option '"+i+"'"+c+(n?". "+n:"")}return(i,c,u)=>{if(r===!1)throw new ia(o(c," has been removed"+(t?" in "+t:"")),ia.ERR_DEPRECATED);return t&&!tx[c]&&(tx[c]=!0,console.warn(o(c," has been deprecated since v"+t+" and will be removed in the near future"))),r?r(i,c,u):!0}};function YR(a,r,t){if(typeof a!="object")throw new ia("options must be an object",ia.ERR_BAD_OPTION_VALUE);const n=Object.keys(a);let o=n.length;for(;o-- >0;){const i=n[o],c=r[i];if(c){const u=a[i],m=u===void 0||c(u,i,a);if(m!==!0)throw new ia("option "+i+" must be "+m,ia.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ia("Unknown option "+i,ia.ERR_BAD_OPTION)}}var c0={assertOptions:YR,validators:iy},Rs=c0.validators,Vm=class{constructor(a){this.defaults=a,this.interceptors={request:new V2,response:new V2}}request(a,r){typeof a=="string"?(r=r||{},r.url=a):r=a||{},r=Oi(this.defaults,r);const{transitional:t,paramsSerializer:n,headers:o}=r;t!==void 0&&c0.assertOptions(t,{silentJSONParsing:Rs.transitional(Rs.boolean),forcedJSONParsing:Rs.transitional(Rs.boolean),clarifyTimeoutError:Rs.transitional(Rs.boolean)},!1),n!=null&&(Ne.isFunction(n)?r.paramsSerializer={serialize:n}:c0.assertOptions(n,{encode:Rs.function,serialize:Rs.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=o&&Ne.merge(o.common,o[r.method]);o&&Ne.forEach(["delete","get","head","post","put","patch","common"],S=>{delete o[S]}),r.headers=ts.concat(i,o);const c=[];let u=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(r)===!1||(u=u&&x.synchronous,c.unshift(x.fulfilled,x.rejected))});const m=[];this.interceptors.response.forEach(function(x){m.push(x.fulfilled,x.rejected)});let g,f=0,h;if(!u){const S=[K2.bind(this),void 0];for(S.unshift.apply(S,c),S.push.apply(S,m),h=S.length,g=Promise.resolve(r);f<h;)g=g.then(S[f++],S[f++]);return g}h=c.length;let v=r;for(f=0;f<h;){const S=c[f++],x=c[f++];try{v=S(v)}catch(E){x.call(this,E);break}}try{g=K2.call(this,v)}catch(S){return Promise.reject(S)}for(f=0,h=m.length;f<h;)g=g.then(m[f++],m[f++]);return g}getUri(a){a=Oi(this.defaults,a);const r=B5(a.baseURL,a.url);return M5(r,a.params,a.paramsSerializer)}};Ne.forEach(["delete","get","head","options"],function(r){Vm.prototype[r]=function(t,n){return this.request(Oi(n||{},{method:r,url:t,data:(n||{}).data}))}});Ne.forEach(["post","put","patch"],function(r){function t(n){return function(i,c,u){return this.request(Oi(u||{},{method:r,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:c}))}}Vm.prototype[r]=t(),Vm.prototype[r+"Form"]=t(!0)});var Dm=Vm,GR=class F5{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const n=this;this.promise.then(o=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](o);n._listeners=null}),this.promise.then=o=>{let i;const c=new Promise(u=>{n.subscribe(u),i=u}).then(o);return c.cancel=function(){n.unsubscribe(i)},c},r(function(i,c,u){n.reason||(n.reason=new Xp(i,c,u),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const t=this._listeners.indexOf(r);t!==-1&&this._listeners.splice(t,1)}static source(){let r;return{token:new F5(function(o){r=o}),cancel:r}}},qR=GR;function ZR(a){return function(t){return a.apply(null,t)}}function VR(a){return Ne.isObject(a)&&a.isAxiosError===!0}var d0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(d0).forEach(([a,r])=>{d0[r]=a});var QR=d0;function U5(a){const r=new Dm(a),t=y5(Dm.prototype.request,r);return Ne.extend(t,Dm.prototype,r,{allOwnKeys:!0}),Ne.extend(t,r,null,{allOwnKeys:!0}),t.create=function(o){return U5(Oi(a,o))},t}var dn=U5(ly);dn.Axios=Dm;dn.CanceledError=Xp;dn.CancelToken=qR;dn.isCancel=P5;dn.VERSION=O5;dn.toFormData=Qp;dn.AxiosError=ia;dn.Cancel=dn.CanceledError;dn.all=function(r){return Promise.all(r)};dn.spread=ZR;dn.isAxiosError=VR;dn.mergeConfig=Oi;dn.AxiosHeaders=ts;dn.formToJSON=a=>T5(Ne.isHTMLForm(a)?new FormData(a):a);dn.getAdapter=z5.getAdapter;dn.HttpStatusCode=QR;dn.default=dn;var _d=dn,{Axios:tH,AxiosError:aH,CanceledError:nH,isCancel:rH,CancelToken:oH,VERSION:sH,all:lH,Cancel:iH,isAxiosError:cH,spread:dH,toFormData:uH,AxiosHeaders:mH,HttpStatusCode:pH,formToJSON:fH,getAdapter:gH,mergeConfig:hH}=_d,JR=Fd(CM()),XR=Fd(_M()),KR=25,eT=100,wh={hasNext:!1,hasPrev:!1},tT=100*1024*1024,aT=10,nT=100,rT={created_at:!0,deleted_at:!0,pinned_at:!0,updated_at:!0,command:!0,mentioned_users:!0,quoted_message:!0,latest_reactions:!0,own_reactions:!0,reaction_counts:!0,reply_count:!0,i18n:!0,type:!0,html:!0,__html:!0,user:!0},oT={error:!0},sT=3,lT=1e3;function W5(a,r){a.then().catch(t=>{console.warn(`failed to do ${r}, ran into error: `,t)})}var $s=a=>new Promise(r=>setTimeout(r,a));function u0(a){return typeof a=="function"||a instanceof Function||Object.prototype.toString.call(a)==="[object Function]"}var od={TOKEN_EXPIRED:40,WS_CLOSED_SUCCESS:1e3};function iT(a){return a!==null&&typeof a=="object"&&(a.readable||typeof a._read=="function")}function cT(a){return a!=null&&a.constructor!=null&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function dT(a){return typeof window<"u"&&"File"in window&&a instanceof File}function uT(a){return typeof window<"u"&&"Blob"in window&&a instanceof Blob}function mT(a){return{channel_mutes:!0,devices:!0,mutes:!0,total_unread_count:!0,unread_channels:!0,unread_count:!0,unread_threads:!0,invisible:!0,privacy_settings:!0,roles:!0,push_preferences:!0}[a]}function pT(a,r,t){const n=new XR.default;return iT(a)||cT(a)||dT(a)||uT(a)?r?n.append("file",a,r):n.append("file",a):n.append("file",{uri:a,name:r||a.split("/").reverse()[0],contentType:t,type:t}),n}function zn(a){const r=[],t=Array.isArray(a)?a:[a];for(const n of t){const o=Object.entries(n);o.length>1&&console.warn("client._buildSort() - multiple fields in a single sort object detected. Object's field order is not guaranteed");for(const[i,c]of o)r.push({field:i,direction:c})}return r}function Qm(a){const r=Math.min(500+a*2e3,25e3),t=Math.min(Math.max(250,(a-1)*2e3),25e3);return Math.floor(Math.random()*(r-t)+t)}function xi(){return Ur()}function Zc(a){let r="";for(let t=0;t<a.length;t++)r+=a[t].toString(16).padStart(2,"0");return r}function Ur(){const a=hT(16);return a[6]=a[6]&15|64,a[8]=a[8]&191|128,Zc(a.subarray(0,4))+"-"+Zc(a.subarray(4,6))+"-"+Zc(a.subarray(6,8))+"-"+Zc(a.subarray(8,10))+"-"+Zc(a.subarray(10,16))}function fT(a){const r=Math.pow(2,8*a.byteLength/a.length);for(let t=0;t<a.length;t++)a[t]=Math.random()*r}var gT=typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)<"u"?crypto.getRandomValues.bind(crypto):typeof msCrypto<"u"?msCrypto.getRandomValues.bind(msCrypto):fT;function hT(a){const r=new Uint8Array(a);return gT(r),r}function yT(a){const r={};if(!a)return r;try{Object.getOwnPropertyNames(a).forEach(t=>{r[t]=Object.getOwnPropertyDescriptor(a,t)})}catch{return{error:"failed to serialize the error"}}return r}function bT(){const a=typeof navigator<"u"?navigator:typeof window<"u"&&window.navigator?window.navigator:void 0;return a?typeof a.onLine!="boolean"?!0:a.onLine:(console.warn("isOnline failed to access window.navigator and assume browser is online"),!0)}function j5(a){typeof window<"u"&&window.addEventListener&&(window.addEventListener("offline",a),window.addEventListener("online",a))}function H5(a){typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("offline",a),window.removeEventListener("online",a))}var vT=a=>{const r=[];for(const t in a)a[t]!==void 0&&(Array.isArray(a[t])||typeof a[t]=="object"?r.push(`${t}=${encodeURIComponent(JSON.stringify(a[t]))}`):r.push(`${t}=${encodeURIComponent(a[t])}`));return r.join("&")};function mr(a){const r=t=>t?{...t,created_at:a.created_at?new Date(a.created_at):new Date,deleted_at:a.deleted_at?new Date(a.deleted_at):null,pinned_at:a.pinned_at?new Date(a.pinned_at):null,reaction_groups:xT(a.reaction_groups,a.reaction_counts,a.reaction_scores),status:a.status||"received",updated_at:a.updated_at?new Date(a.updated_at):new Date}:null;return{...r(a),error:a.error??null,quoted_message:r(a.quoted_message)}}var $5=a=>{var n;const r={...rT,...oT};return{...Object.fromEntries(Object.entries(a).filter(([o])=>!r[o])),pinned:!!a.pinned_at,mentioned_users:(n=a.mentioned_users)==null?void 0:n.map(o=>typeof o=="string"?o:o.id)}},Y5=({needle:a,sortedArray:r,selectKey:t,selectValueToCompare:n=i=>i,sortDirection:o="ascending"})=>{if(!r.length)return 0;let i=0,c=r.length-1,u=0;const m=()=>{u=Math.round((i+c)/2)},g=n(a);for(;i<=c;){m();const f=n(r[u]);o==="ascending"&&g<f||o==="descending"&&g>=f?c=u-1:i=u+1}if(t){const f=t(a),h=o==="ascending"?-1:1;for(let v=i+h;0<=v&&v<r.length&&n(r[v])===g;v+=h)if(t(r[v])===f)return v}return i};function G5(a,r,t=!1,n="created_at",o=!0){const i=o||t;let c=[...a];if(t&&(c=c.filter(f=>!(f.id&&r.id===f.id))),c.length===0&&i)return c.concat(r);if(c.length===0)return c;const u=r[n].getTime(),m=c.at(-1)[n].getTime()<u;if(m&&i)return c.concat(r);if(m)return c;const g=Y5({needle:r,sortedArray:c,sortDirection:"ascending",selectValueToCompare:f=>f[n].getTime(),selectKey:f=>f.id});return!t&&r.id&&c[g]&&r.id===c[g].id?(c[g]=r,c):(i&&c.splice(g,0,r),c)}function xT(a,r,t){if(a)return a;if(r&&t){const n={};for(const o of Object.keys(r))n[o]={count:r[o],sum_scores:t[o]};return n}return null}var m0=(a,r=0,{leading:t=!1,trailing:n=!0}={})=>{let o=null,i=null,c;const u=(...m)=>(o?clearTimeout(o):t&&(c=a(...m)),n&&(i=m),o=setTimeout(()=>{i&&(c=a(...i),i=null),o=null},r),c);return u.cancel=()=>{o&&clearTimeout(o)},u.flush=()=>(o&&(clearTimeout(o),o=null,i&&(c=a(...i))),c),u},q5=(a,r=200,{leading:t=!0,trailing:n=!1}={})=>{let o=null,i=null;return(...c)=>{if(o){n&&(i=c);return}t&&a(...c);const u=()=>{if(i){a(...i),i=null,o=setTimeout(u,r);return}o=null};o=setTimeout(u,r)}},ET=(a,r)=>r.split(".").reduce((t,n)=>{if(t&&typeof t=="object"&&n in t)return t[n]},a),wT=(a,r)=>{if(!Array.isArray(a))return[];const t=new Set;return a.filter(n=>{const o=ET(n,r);return t.has(o)?!1:(t.add(o),!0)})};function ST(a,r){let t=0,n=a.length-1;for(;t<=n;){const o=Math.floor((t+n)/2),i=a[o].created_at;if(!i){t+=1;continue}const c=new Date(i);if(c.getTime()===r.getTime())return o;c.getTime()<r.getTime()?t=o+1:n=o-1}return t}var CT=({parentSet:a,requestedPageSize:r,returnedPage:t,messagePaginationOptions:n})=>{var N,C;const o={...a.pagination};if(!(n!=null&&n.created_at_around))return o;let i,c,u,m;const g=new Date(n.created_at_around),[f,h]=[t[0],t.slice(-1)[0]],v=!!(f!=null&&f.created_at)&&new Date(f.created_at)>g,S=!!(h!=null&&h.created_at)&&new Date(h.created_at)<g,x=r>a.messages.length&&r>t.length,E=(r>a.messages.length||a.messages.length>=t.length)&&r>t.length;if(v)i=!1,u=!0,x&&(c=!1,m=!0);else if(S)c=!1,m=!0,x&&(i=!1,u=!0);else if(E)c=i=!1,u=m=!0;else{const[I,A]=[(f==null?void 0:f.id)&&f.id===((N=a.messages[0])==null?void 0:N.id),(h==null?void 0:h.id)&&h.id===((C=a.messages.slice(-1)[0])==null?void 0:C.id)];u=I,m=A;const _=Math.floor(t.length/2),k=ST(t,g);k!==-1&&(i=_<=k,c=_>=k)}return u&&typeof i<"u"&&(o.hasPrev=i),m&&typeof c<"u"&&(o.hasNext=c),o},_T=({parentSet:a,requestedPageSize:r,returnedPage:t,messagePaginationOptions:n})=>{var N,C;const o={...a.pagination},{id_around:i}=n||{};if(!i)return o;let c,u;const[m,g]=[t[0],t.slice(-1)[0]],[f,h]=[(m==null?void 0:m.id)===((N=a.messages[0])==null?void 0:N.id),(g==null?void 0:g.id)===((C=a.messages.slice(-1)[0])==null?void 0:C.id)];let v=f,S=h;const x=Math.floor(t.length/2);if((r>a.messages.length||a.messages.length>=t.length)&&r>t.length)u=c=!1,v=S=!0;else if(t[x])if(t[x].id===i)c=u=!0;else{let I;const A=[t.slice(0,x),t.slice(x)];c=u=!0;for(let _=0;_<A.length;_++)I=A[_].find(k=>k.id===i),I&&_===0&&(c=!1),I&&_===1&&(u=!1)}else return o;return v&&typeof c<"u"&&(o.hasPrev=c),S&&typeof u<"u"&&(o.hasNext=u),o},kT=({parentSet:a,requestedPageSize:r,returnedPage:t,messagePaginationOptions:n})=>{var N,C;const o={...a.pagination};let i,c;const[u,m]=[t[0],t.slice(-1)[0]],[g,f]=[(u==null?void 0:u.id)&&u.id===((N=a.messages[0])==null?void 0:N.id),(m==null?void 0:m.id)&&m.id===((C=a.messages.slice(-1)[0])==null?void 0:C.id)],h=n&&(n.created_at_after_or_equal||n.created_at_after||n.id_gt||n.id_gte),v=typeof n>"u"?!0:n.created_at_before_or_equal||n.created_at_before||n.id_lt||n.id_lte||n.offset,S=!h&&!v&&!(n!=null&&n.id_around)&&!(n!=null&&n.created_at_around),x=t.length>=r;(typeof v<"u"||S)&&(i=x),typeof h<"u"&&(c=x);const E=t.length===0;return(g||E)&&typeof i<"u"&&(o.hasPrev=i),(f||E)&&typeof c<"u"&&(o.hasNext=c),o},Z5=a=>{var r,t,n;return a.parentSet.messages.length<a.returnedPage.length?((r=a.logger)==null||r.call(a,"error","Corrupted message set state: parent set size < returned page size"),a.parentSet.pagination):(t=a.messagePaginationOptions)!=null&&t.created_at_around?CT(a):(n=a.messagePaginationOptions)!=null&&n.id_around?_T(a):kT(a)},cm={},Sh=async({channel:a,client:r,id:t,members:n,options:o,type:i})=>{if(!a&&!i)throw new Error("Channel or channel type have to be provided to query a channel.");const c=a||r.channel(i,t,{members:n}),u=c.id?c.cid:n&&n.length?cy(c.type,n):void 0;if(!u)throw new Error("Channel ID or channel members array have to be provided to query a channel.");const m=cm[u];if(m)await m;else try{cm[u]=c.watch(o),await cm[u]}finally{delete cm[u]}return c},cy=(a,r)=>{if(!r)return;const t=[...r].sort().join(",");if(t)return`${a}:!members-${t}`},Jm=a=>{if(!a)return!1;const r=a.state.membership;return!!(r!=null&&r.pinned_at)},dm=a=>{if(!a)return!1;const r=a.state.membership;return!!(r!=null&&r.archived_at)},um=a=>a?typeof a.archived=="boolean":!1,V5=({atIndex:a,sort:r,targetKey:t})=>{if(!r)return null;let n=null;if(Array.isArray(r))n=r[a]??null;else for(const o in r){if(o!==t)return null;n=r;break}return(n==null?void 0:n[t])??null},p0=a=>{const r=NT({sort:a});return typeof r!="number"?!1:Math.abs(r)===1},NT=({sort:a})=>V5({atIndex:0,sort:a,targetKey:"pinned_at"}),Q5=({channels:a})=>{let r=null;for(const t of a){if(!Jm(t))break;typeof r=="number"?r++:r=0}return r},mm=({channels:a,channelToMove:r,channelToMoveIndexWithinChannels:t,sort:n})=>{const o=t??a.findIndex(h=>h.cid===r.cid),i=o>=0,c=o===0,u=p0(n),m=Jm(r);if(c||u&&m)return a;const g=[...a];i&&g.splice(o,1);let f=null;return u&&(f=Q5({channels:g})),g.splice(typeof f=="number"?f+1:0,0,r),g},IT=a=>!!a.getTime,J5=a=>IT(a.created_at),AT=class{constructor(a){var r;this.messageSets=[],this.formatMessage=t=>mr(t),this.setIsUpToDate=t=>{this.isUpToDate=t},this.removeMessageFromArray=(t,n)=>{const o=t.filter(i=>!(i.id&&n.id&&i.id===n.id));return{removed:o.length<t.length,result:o}},this.updateUserMessages=t=>{const n=(o,i)=>{var c;for(let u=0;u<o.length;u++){const m=o[u];((c=m.user)==null?void 0:c.id)===i.id&&(o[u]={...m,user:i})}};this.messageSets.forEach(o=>n(o.messages,t));for(const o in this.threads)n(this.threads[o],t);n(this.pinnedMessages,t)},this.deleteUserMessages=(t,n=!1)=>{const o=(i,c,u=!1)=>{var m;for(let g=0;g<i.length;g++){const f=i[g];((m=f.user)==null?void 0:m.id)===c.id&&(u?i[g]={cid:f.cid,created_at:f.created_at,deleted_at:c.deleted_at,id:f.id,latest_reactions:[],mentioned_users:[],own_reactions:[],parent_id:f.parent_id,reply_count:f.reply_count,status:f.status,thread_participants:f.thread_participants,type:"deleted",updated_at:f.updated_at,user:f.user}:i[g]={...f,type:"deleted",deleted_at:c.deleted_at?new Date(c.deleted_at):null})}};this.messageSets.forEach(i=>o(i.messages,t,n));for(const i in this.threads)o(this.threads[i],t,n);o(this.pinnedMessages,t,n)},this._channel=a,this.watcher_count=0,this.typing={},this.read={},this.initMessages(),this.pinnedMessages=[],this.pending_messages=[],this.threads={},this.mutedUsers=[],this.watchers={},this.members={},this.membership={},this.unreadCount=0,this.isUpToDate=!0,this.last_message_at=((r=a==null?void 0:a.state)==null?void 0:r.last_message_at)!=null?new Date(a.state.last_message_at):null}get messages(){var a;return((a=this.messageSets.find(r=>r.isCurrent))==null?void 0:a.messages)||[]}set messages(a){const r=this.messageSets.findIndex(t=>t.isCurrent);this.messageSets[r].messages=a}get latestMessages(){var a;return((a=this.messageSets.find(r=>r.isLatest))==null?void 0:a.messages)||[]}set latestMessages(a){const r=this.messageSets.findIndex(t=>t.isLatest);this.messageSets[r].messages=a}get messagePagination(){var a;return((a=this.messageSets.find(r=>r.isCurrent))==null?void 0:a.pagination)||wh}addMessageSorted(a,r=!1,t=!0,n="latest"){return this.addMessagesSorted([a],r,!1,t,n)}addMessagesSorted(a,r=!1,t=!1,n=!0,o="current"){var u;const{messagesToAdd:i,targetMessageSetIndex:c}=this.findTargetMessageSet(a,n,o);for(let m=0;m<i.length;m+=1){if(i[m].shadowed)continue;const f=i[m].created_at instanceof Date;let h;f?h=i[m]:(h=this.formatMessage(i[m]),h.user&&((u=this._channel)!=null&&u.cid)&&this._channel.getClient().state.updateUserReference(h.user,this._channel.cid),t&&h.id&&this.threads[h.id]&&delete this.threads[h.id],this.last_message_at||(this.last_message_at=new Date(h.created_at.getTime())),h.created_at.getTime()>this.last_message_at.getTime()&&(this.last_message_at=new Date(h.created_at.getTime())));const v=h.parent_id;if((!v||h.show_in_channel)&&c!==-1&&(this.messageSets[c].messages=this._addToMessageList(this.messageSets[c].messages,h,r,"created_at",n)),v&&!t){const S=this.threads[v]||[];this.threads[v]=this._addToMessageList(S,h,r,"created_at",n)}}return{messageSet:this.messageSets[c]}}addPinnedMessages(a){for(let r=0;r<a.length;r+=1)this.addPinnedMessage(a[r])}addPinnedMessage(a){this.pinnedMessages=this._addToMessageList(this.pinnedMessages,this.formatMessage(a),!1,"pinned_at")}removePinnedMessage(a){const{result:r}=this.removeMessageFromArray(this.pinnedMessages,a);this.pinnedMessages=r}addReaction(a,r,t){const n=r;let o;if(n||(o=this.findMessage(a.message_id)),!n&&!o)return;const i=n??o,c={id:i==null?void 0:i.id,parent_id:i==null?void 0:i.parent_id,pinned:i==null?void 0:i.pinned,show_in_channel:i==null?void 0:i.show_in_channel};return this._updateMessage(c,u=>{if(n){const m={...n};return n.own_reactions=this._addOwnReactionToMessage(u.own_reactions,a,t),m.own_reactions=this._channel.getClient().userID===a.user_id?n.own_reactions:u.own_reactions,this.formatMessage(m)}return o?this._addReactionToState(o,a,t):u}),n??o}_addReactionToState(a,r,t){if(a.reaction_groups||(a.reaction_groups={}),t)for(const u of a.own_reactions??[]){const m=a.reaction_groups[u.type];a.reaction_groups[u.type]={...m,count:m.count-1,sum_scores:m.sum_scores-(u.score??1)},a.reaction_groups[u.type].count<1&&delete a.reaction_groups[u.type]}const o=a.reaction_groups[r.type],i=r.score??1;a.reaction_groups[r.type]=o?{...o,count:o.count+1,sum_scores:o.sum_scores+i,last_reaction_at:r.created_at}:{count:1,first_reaction_at:r.created_at,last_reaction_at:r.created_at,sum_scores:i},a.own_reactions=this._addOwnReactionToMessage(a.own_reactions,r,t);const c=this._channel.getClient().userID;return a.latest_reactions=t?[...(a.latest_reactions||[]).filter(u=>u.user_id!==c),r]:[...a.latest_reactions||[],r],a}_addOwnReactionToMessage(a,r,t){return t?a=[]:a=this._removeOwnReactionFromMessage(a,r),a=a||[],this._channel.getClient().userID===r.user_id&&a.push(r),a}_removeOwnReactionFromMessage(a,r){return a&&a.filter(t=>t.user_id!==r.user_id||t.type!==r.type)}removeReaction(a,r){const t=r;let n;if(t||(n=this.findMessage(a.message_id)),!t&&!n)return;const o=t??n,i={id:o==null?void 0:o.id,parent_id:o==null?void 0:o.parent_id,pinned:o==null?void 0:o.pinned,show_in_channel:o==null?void 0:o.show_in_channel};return this._updateMessage(i,c=>t?(t.own_reactions=this._removeOwnReactionFromMessage(c.own_reactions,a),this.formatMessage(t)):n?this._removeReactionFromState(n,a):c),t}_removeReactionFromState(a,r){var o,i,c,u;const t=(o=a.own_reactions)==null?void 0:o.find(m=>m.type===r.type);if(t&&((i=a.reaction_groups)!=null&&i[t.type])){const m=a.reaction_groups[t.type];a.reaction_groups[t.type]={...m,count:m.count-1,sum_scores:m.sum_scores-(t.score??1)},a.reaction_groups[t.type].count<1&&delete a.reaction_groups[t.type]}a.own_reactions=(c=a.own_reactions)==null?void 0:c.filter(m=>m.type!==r.type);const n=this._channel.getClient().userID;return a.latest_reactions=(u=a.latest_reactions)==null?void 0:u.filter(m=>!(m.user_id===n&&m.type===r.type)),a}_updateQuotedMessageReferences({message:a,remove:r}){const t=o=>{var i,c;return{...o,created_at:o.created_at.toISOString(),pinned_at:(i=o.pinned_at)==null?void 0:i.toISOString(),updated_at:(c=o.updated_at)==null?void 0:c.toISOString()}},n=o=>{const i=o.reduce((c,u)=>(u.quoted_message_id===a.id&&c.push({...t(u),quoted_message:r?{...a,attachments:[]}:a}),c),[]);this.addMessagesSorted(i,!0)};a.parent_id?a.parent_id&&this.threads[a.parent_id]&&n(this.threads[a.parent_id]):this.messageSets.forEach(o=>n(o.messages))}removeQuotedMessageReferences(a){this._updateQuotedMessageReferences({message:a,remove:!0})}_updateMessage(a,r){const{parent_id:t,show_in_channel:n,pinned:o}=a;if(t&&this.threads[t]){const i=this.threads[t],c=i.findIndex(u=>u.id===a.id);c!==-1&&(i[c]=r(i[c]),this.threads[t]=i)}if(!n&&!t||n){const i=this.findMessageSetIndex(a);if(i!==-1){const c=this.messageSets[i].messages.findIndex(u=>u.id===a.id);if(c!==-1){const u=r(this.messageSets[i].messages[c]);this.messageSets[i].messages[c]=u}}}if(o){const i=this.pinnedMessages.findIndex(c=>c.id===a.id);i!==-1&&(this.pinnedMessages[i]=r(this.pinnedMessages[i]))}}_addToMessageList(a,r,t=!1,n="created_at",o=!0){return G5(a,r,t,n,o)}removeMessage(a){let r=!1;if(a.parent_id&&this.threads[a.parent_id]){const{removed:t,result:n}=this.removeMessageFromArray(this.threads[a.parent_id],a);this.threads[a.parent_id]=n,r=t}else{const t=a.messageSetIndex??this.findMessageSetIndex(a);if(t!==-1){const{removed:n,result:o}=this.removeMessageFromArray(this.messageSets[t].messages,a);this.messageSets[t].messages=o,r=n}}return r}filterErrorMessages(){const a=this.latestMessages.filter(r=>r.type!=="error");this.latestMessages=a}clean(){const a=new Date;for(const[r,t]of Object.entries(this.typing)){const n=typeof t.received_at=="string"?new Date(t.received_at):t.received_at||new Date;a.getTime()-n.getTime()>7e3&&(delete this.typing[r],this._channel.getClient().dispatchEvent({cid:this._channel.cid,type:"typing.stop",user:{id:r}}))}}clearMessages(){this.initMessages(),this.pinnedMessages=[]}initMessages(){this.messageSets=[{messages:[],isLatest:!0,isCurrent:!0,pagination:wh}]}async loadMessageIntoState(a,r,t=25){var u;let n,o=!1,i=!1;const c=r||a;if(a==="latest"){if(this.messages===this.latestMessages)return;n=this.messageSets.findIndex(m=>m.isLatest)}else n=this.findMessageSetIndex({id:c});n!==-1&&(this.switchToMessageSet(n),o=!0),i=!r||!!((u=this.threads[r])!=null&&u.find(m=>m.id===a)),!(o&&i)&&(o||await this._channel.query({messages:{id_around:c,limit:t}},"new"),!i&&r&&await this._channel.getReplies(r,{id_around:a,limit:t}),n=this.findMessageSetIndex({id:c}),n!==-1&&this.switchToMessageSet(n))}findMessage(a,r){if(r){const n=this.threads[r];return n?n.find(o=>o.id===a):void 0}const t=this.findMessageSetIndex({id:a});if(t!==-1)return this.messageSets[t].messages.find(n=>n.id===a)}switchToMessageSet(a){const r=this.messageSets.find(t=>t.isCurrent);r&&(r.isCurrent=!1,this.messageSets[a].isCurrent=!0)}areMessageSetsOverlap(a,r){return a.some(t=>r.find(n=>t.id===n.id))}findMessageSetIndex(a){return this.messageSets.findIndex(r=>!!r.messages.find(t=>t.id===a.id))}findTargetMessageSet(a,r=!0,t="current"){let n=a,o;if(r){const i=this.messageSets.map((m,g)=>g).filter(m=>this.areMessageSetsOverlap(this.messageSets[m].messages,a));switch(t){case"new":i.length>0?o=i[0]:a.some(m=>!m.parent_id)&&(this.messageSets.push({messages:[],isCurrent:!1,isLatest:!1,pagination:wh}),o=this.messageSets.length-1);break;case"current":o=this.messageSets.findIndex(m=>m.isCurrent);break;case"latest":o=this.messageSets.findIndex(m=>m.isLatest);break;default:o=-1}const c=i.splice(0,1)[0],u=[...i];if(c!==void 0&&c!==o&&u.push(o),u.length>0){const m=this.messageSets[c],g=this.messageSets.filter((h,v)=>u.indexOf(v)!==-1);g.forEach(h=>{m.isLatest=m.isLatest||h.isLatest,m.isCurrent=m.isCurrent||h.isCurrent,m.pagination.hasPrev=h.messages[0].created_at<m.messages[0].created_at?h.pagination.hasPrev:m.pagination.hasPrev,m.pagination.hasNext=m.messages.slice(-1)[0].created_at<h.messages.slice(-1)[0].created_at?h.pagination.hasNext:m.pagination.hasNext,n=[...n,...h.messages]}),g.forEach(h=>this.messageSets.splice(this.messageSets.indexOf(h),1)),o=this.messageSets.findIndex(h=>this.areMessageSetsOverlap(h.messages,a))}}else o=this.findMessageSetIndex(a[0]);return{targetMessageSetIndex:o,messagesToAdd:n}}},DT=a=>!!(a!=null&&a.og_scrape_url)||!!(a!=null&&a.title_link),X5=a=>{var r;return!!((r=a==null?void 0:a.localMetadata)!=null&&r.id)},MT=(a,r=[])=>a.type==="file"||!!(a.mime_type&&r.indexOf(a.mime_type)===-1&&a.type!=="video"),K5=a=>a.type==="image"&&!DT(a),RT=a=>K5(a)&&X5(a),TT=a=>a.type==="audio",PT=a=>a.type==="voiceRecording",LT=(a,r=[])=>a.type==="video"||!!(a.mime_type&&r.indexOf(a.mime_type)!==-1),BT=a=>TT(a)||MT(a)||K5(a)||LT(a)||PT(a),Mm=a=>!!a.lastModified&&!("uri"in a),zT=a=>a==null||typeof a!="object"?!1:typeof FileList<"u"&&a instanceof FileList||"item"in a&&"length"in a&&!Array.isArray(a),OT=a=>a instanceof Blob&&!(a instanceof File),gi=a=>a!==null&&typeof a=="object"&&!Mm(a)&&!OT(a)&&typeof a.name=="string"&&typeof a.uri=="string"&&typeof a.size=="number"&&typeof a.type=="string",ax=({blobsArray:a,fileName:r,mimeType:t})=>{const n=new Blob(a,{type:t});return new File([n],r,{type:n.type})},FT=a=>{const r=a.match(/\/([^/;]+)/);return r==null?void 0:r[1]},nx=a=>{const r=FT(a);return`file_${new Date().toISOString()}${r?"."+r:""}`},Vc=a=>{const r=a.type;return r.startsWith("image/")&&!r.endsWith(".photoshop")},UT=a=>a.startsWith("image/")&&!a.endsWith(".photoshop")?"image":a.includes("video/")?"video":a.includes("audio/")?"audio":"file",rx=a=>{if(!a)return null;if(X5(a))return a;const{localMetadata:r,...t}=a;return{localMetadata:{...r??{},id:(r==null?void 0:r.id)||Ur()},...t}},ew=a=>typeof a=="function",Yn=class{constructor(a){this.value=a,this.handlerSet=new Set,this.next=r=>{const t=ew(r)?r(this.value):r;if(t===this.value)return;const n=this.value;this.value=t,this.handlerSet.forEach(o=>o(this.value,n))},this.partialNext=r=>this.next(t=>({...t,...r})),this.getLatestValue=()=>this.value,this.subscribe=r=>(r(this.value,void 0),this.handlerSet.add(r),()=>{this.handlerSet.delete(r)}),this.subscribeWithSelector=(r,t)=>{let n;const o=i=>{const c=r(i);let u=typeof n>"u";for(const g in n)if(n[g]!==c[g]){u=!0;break}if(!u)return;const m=n;n=c,t(c,m)};return this.subscribe(o)}}},Cl=a=>{if(!a||typeof a!="object"||Array.isArray(a))return!1;const r=Object.getPrototypeOf(a);return r===null||r===Object.prototype?!1:a.constructor&&a.constructor!==Object},f0=(a,r,t=new Set,n=new WeakSet,o=new WeakSet)=>{if(a===r)return!0;if(a==null||r==null)return!1;const i=typeof a;if(i!==typeof r)return!1;if(i!=="object")return a!==a&&r!==r?!0:a===r;const u=a,m=r;if(n.has(u)||o.has(m))return n.has(u)&&o.has(m);if(n.add(u),o.add(m),a instanceof Date&&r instanceof Date)return n.delete(u),o.delete(m),a.getTime()===r.getTime();if(a instanceof RegExp&&r instanceof RegExp)return n.delete(u),o.delete(m),a.toString()===r.toString();if(Cl(a)||Cl(r))return n.delete(u),o.delete(m),!1;const g=Array.isArray(a),f=Array.isArray(r);if(g!==f)return n.delete(u),o.delete(m),!1;if(g&&f){const N=a,C=r;if(N.length!==C.length)return n.delete(u),o.delete(m),!1;const I=[a,r];if(t.has(I))return n.delete(u),o.delete(m),!0;t.add(I);for(let A=0;A<N.length;A++)if(!f0(N[A],C[A],t,n,o))return t.delete(I),n.delete(u),o.delete(m),!1;return t.delete(I),n.delete(u),o.delete(m),!0}const h=a,v=r,S=Object.keys(h),x=Object.keys(v);if(S.length!==x.length)return n.delete(u),o.delete(m),!1;for(const N of x)if(!Object.prototype.hasOwnProperty.call(h,N))return n.delete(u),o.delete(m),!1;const E=[a,r];if(t.has(E))return n.delete(u),o.delete(m),!0;t.add(E);for(const N of S)if(!f0(h[N],v[N],t,n,o))return t.delete(E),n.delete(u),o.delete(m),!1;return t.delete(E),n.delete(u),o.delete(m),!0};function WT(a,r){const t={children:{}};return tw(a,r,t),dy(t)}function tw(a,r,t,n,o=new Set,i=new Set){if(f0(a,r,new Set(o)))return;if(a==null){n!==void 0&&(t.children[String(n)]={type:"added",value:r,children:{}});return}if(typeof a=="object"&&a!==null){if(i.has(a)){n!==void 0&&(t.children[String(n)]={type:"circular",value:r,oldValue:a,children:{}});return}i.add(a)}if(typeof a!="object"||typeof r!="object"||a===null||r===null||Array.isArray(a)!==Array.isArray(r)||Cl(a)||Cl(r)){n!==void 0&&(t.children[String(n)]={type:"updated",value:r,oldValue:a,children:{}}),typeof a=="object"&&a!==null&&i.delete(a);return}const u=a,m=r,g=n!==void 0?{type:"updated",children:{},oldValue:a,value:r}:t;n!==void 0&&(t.children[String(n)]=g);const f=[a,r];if(o.has(f)){typeof a=="object"&&a!==null&&i.delete(a);return}o.add(f);const h=new Set([...Object.keys(u),...Object.getOwnPropertySymbols(u),...Object.keys(m),...Object.getOwnPropertySymbols(m)]);for(const v of h){const S=u[v],x=m[v];if(v in m){if(!(v in u)){g.children[String(v)]={type:"added",value:x,children:{}};continue}tw(S,x,g,v,o,i)}}o.delete(f),typeof a=="object"&&a!==null&&i.delete(a)}function aw(a={}){const{trackDiff:r=!1}=a;return function({target:n,source:o,customizer:i}){const c=Array.isArray(o)?o:[o],u=r?structuredClone(n):void 0;function m(N,C,I,A,_,k){const B=i==null?void 0:i(N,C,I,A,_,k);return B!==void 0?(Object.defineProperty(A,I,{value:B,enumerable:!0,writable:!0,configurable:!0}),!0):!1}function g(N,C){if(N&&typeof N=="object"){const I=Cl(N),A=Cl(C);return I||A?A?C:N:Array.isArray(N)?[...N]:{...N}}return Array.isArray(C)?[]:{}}function f(N,C,I,A,_){const k=C[I],B=N[I];if(!m(B,k,I,N,C,A))if(k&&typeof k=="object"){if(!A.has(k)){const z=g(B,k);if(Object.defineProperty(N,I,{value:z,enumerable:!0,writable:!0,configurable:!0}),Cl(z))return;_.push({target:z,source:k,sourceKey:I,parentTarget:N})}}else k!==void 0&&(N[I]=k)}function h(N,C,I,A){const _=[...Object.keys(C),...Object.getOwnPropertySymbols(C)];for(const k of _)f(N,C,k,I,A)}function v({target:N,source:C,sourceKey:I,parentTarget:A},_,k){if(_.has(C)){r&&I&&A&&Object.defineProperty(A,I,{value:N,enumerable:!0,writable:!0,configurable:!0});return}!_.has(N)&&!_.has(C)&&(_.add(N),_.add(C),h(N,C,_,k),_.delete(C),_.delete(N))}function S(N,C,I=new Set){if(I.has(N)||I.has(C))return{...N};const A={...N},_=[];for(I.add(A),I.add(C),h(A,C,I,_);_.length;)v(_.pop(),I,_);return I.delete(C),I.delete(A),A}const x=c.reduce((N,C)=>S(N,C),{...n}),E=r&&u?WT(u,x):null;return{result:x,diff:E}}}function dy(a){const r={};let t=!1;for(const n in a.children){const o=dy(a.children[n]);o&&(r[n]=o,t=!0)}return a.type||t?{...a,children:r}:null}function Xm(a,r,t){return aw()({target:a,source:r,customizer:t}).result}function nw(a,r,t){const n=aw({trackDiff:!0}),{result:o,diff:i}=n({target:a,source:r,customizer:t});return{result:o,diff:dy(i??{children:{}})||{children:{}}}}var ox=({message:a})=>{var r;return{attachments:(r=(a==null?void 0:a.attachments)??[])==null?void 0:r.filter(({og_scrape_url:t})=>!t).map(t=>{const n=BT(t)?{id:Ur(),uploadState:"finished"}:{id:Ur()};return{...t,localMetadata:n}})}},jT=class{constructor({composer:a,message:r}){this.setCustomUploadFn=t=>{this.composer.updateConfig({attachments:{doUploadRequest:t}})},this.initState=({message:t}={})=>{this.state.next(ox({message:t}))},this.getAttachmentIndex=t=>{const n=this.attachmentsById;return this.attachments.indexOf(n[t])},this.prepareAttachmentUpdate=t=>{const n=this.attachments,o=[...this.attachments],i=this.getAttachmentIndex(t.localMetadata.id);if(i===-1)return null;const c=nw(n[i],t);if(c.diff&&Object.keys(c.diff.children).length){const m=rx(c.result);if(m)return o.splice(i,1,m),o}return null},this.updateAttachment=t=>{const n=this.prepareAttachmentUpdate(t);n&&this.state.partialNext({attachments:n})},this.upsertAttachments=t=>{if(!t.length)return;let n=[...this.attachments],o=!1;t.forEach(i=>{const c=this.prepareAttachmentUpdate(i);if(c)n=c,o=!0;else{const u=rx(i);u&&(n.push(u),o=!0)}}),o&&this.state.partialNext({attachments:n})},this.removeAttachments=t=>{this.state.partialNext({attachments:this.attachments.filter(n=>{var o;return!t.includes((o=n.localMetadata)==null?void 0:o.id)})})},this.getUploadConfigCheck=async t=>{var S,x;const n=this.channel.getClient();let o;n.appSettingsPromise?o=await n.appSettingsPromise:o=await n.getAppSettings();const i=Vc(t)?(S=o==null?void 0:o.app)==null?void 0:S.image_upload_config:(x=o==null?void 0:o.app)==null?void 0:x.file_upload_config;if(!i)return{uploadBlocked:!1};const{allowed_file_extensions:c,allowed_mime_types:u,blocked_file_extensions:m,blocked_mime_types:g,size_limit:f}=i,h=f||tT,v=t.type;if(Mm(t)||gi(t)){if(c!=null&&c.length&&!c.some(E=>t.name.toLowerCase().endsWith(E.toLowerCase())))return{uploadBlocked:!0,reason:"allowed_file_extensions"};if(m!=null&&m.length&&m.some(E=>t.name.toLowerCase().endsWith(E.toLowerCase())))return{uploadBlocked:!0,reason:"blocked_file_extensions"}}return u!=null&&u.length&&!u.some(E=>E.toLowerCase()===(v==null?void 0:v.toLowerCase()))?{uploadBlocked:!0,reason:"allowed_mime_types"}:g!=null&&g.length&&g.some(E=>E.toLowerCase()===(v==null?void 0:v.toLowerCase()))?{uploadBlocked:!0,reason:"blocked_mime_types"}:t.size&&t.size>h?{uploadBlocked:!0,reason:"size_limit"}:{uploadBlocked:!1}},this.fileToLocalUploadAttachment=async t=>{var c;const n=gi(t)||Mm(t)?t:ax({blobsArray:[t],fileName:nx(t.type),mimeType:t.type}),o=await this.getUploadConfigCheck(n),i={file_size:n.size,mime_type:n.type,localMetadata:{file:n,id:Ur(),uploadPermissionCheck:o,uploadState:o.uploadBlocked?"blocked":"pending"},type:UT(n.type)};return i[Vc(n)?"fallback":"title"]=n.name,Vc(n)&&(i.localMetadata.previewUri=gi(t)?t.uri:(c=URL.createObjectURL)==null?void 0:c.call(URL,t),gi(t)&&t.height&&t.width&&(i.original_height=t.height,i.original_width=t.width)),gi(t)&&t.thumb_url&&(i.thumb_url=t.thumb_url),i},this.ensureLocalUploadAttachment=async t=>{var o;if(!((o=t.localMetadata)!=null&&o.file)||!t.localMetadata.id){this.client.notifications.addError({message:"File is required for upload attachment",origin:{emitter:"AttachmentManager",context:{attachment:t}}});return}if(!this.fileUploadFilter(t))return;const n=await this.fileToLocalUploadAttachment(t.localMetadata.file);return t.localMetadata.id&&(n.localMetadata.id=t.localMetadata.id),n},this.doDefaultUploadRequest=async t=>{if(gi(t))return this.channel[Vc(t)?"sendImage":"sendFile"](t.uri,t.name,t.type);const n=Mm(t)?t:ax({blobsArray:[t],fileName:nx(t.type),mimeType:t.type}),{duration:o,...i}=await this.channel[Vc(t)?"sendImage":"sendFile"](n);return i},this.doUploadRequest=async t=>{const n=this.config.doUploadRequest;return n?await n(t):this.doDefaultUploadRequest(t)},this.uploadAttachment=async t=>{if(!this.isUploadEnabled)return;const n=await this.ensureLocalUploadAttachment(t);if(typeof n>"u")return;if(n.localMetadata.uploadState==="blocked")return this.upsertAttachments([n]),this.client.notifications.addError({message:"Error uploading attachment",origin:{emitter:"AttachmentManager",context:{attachment:t}}}),n;this.upsertAttachments([{...t,localMetadata:{...t.localMetadata,uploadState:"uploading"}}]);let o;try{o=await this.doUploadRequest(n.localMetadata.file)}catch(c){let u={message:"Error uploading attachment",name:"Error"};typeof c.message=="string"?u=c:typeof c=="object"&&(u=Object.assign(u,c)),this.client.notifications.addError({message:u.message,origin:{emitter:"AttachmentManager",context:{attachment:t}}});const m={...t,localMetadata:{...t.localMetadata,uploadState:"failed"}};return this.updateAttachment(m),m}if(!o){this.removeAttachments([t.localMetadata.id]);return}const i={...t,localMetadata:{...t.localMetadata,uploadState:"finished"}};return RT(i)?(i.localMetadata.previewUri&&(URL.revokeObjectURL(i.localMetadata.previewUri),delete i.localMetadata.previewUri),i.image_url=o.file):i.asset_url=o.file,o.thumb_url&&(i.thumb_url=o.thumb_url),this.updateAttachment(i),i},this.uploadFiles=async t=>{if(!this.isUploadEnabled)return;const n=zT(t)?Array.from(t):t,o=await Promise.all(n.map(this.fileToLocalUploadAttachment));return Promise.all(o.filter(this.fileUploadFilter).slice(0,this.availableUploadSlots).map(this.uploadAttachment))},this.composer=a,this.state=new Yn(ox({message:r})),this.attachmentsByIdGetterCache={attachmentsById:{},attachments:[]}}get attachmentsById(){const{attachments:a}=this.state.getLatestValue();return a!==this.attachmentsByIdGetterCache.attachments&&(this.attachmentsByIdGetterCache.attachments=a,this.attachmentsByIdGetterCache.attachmentsById=a.reduce((r,t)=>{var n;return t.localMetadata.id&&(r[n=t.localMetadata.id]??(r[n]=t)),r},{})),this.attachmentsByIdGetterCache.attachmentsById}get client(){return this.composer.client}get channel(){return this.composer.channel}get config(){return this.composer.config.attachments}get acceptedFiles(){return this.config.acceptedFiles}set acceptedFiles(a){this.composer.updateConfig({attachments:{acceptedFiles:a}})}get fileUploadFilter(){return this.config.fileUploadFilter}set fileUploadFilter(a){this.composer.updateConfig({attachments:{fileUploadFilter:a}})}get maxNumberOfFilesPerMessage(){return this.config.maxNumberOfFilesPerMessage}set maxNumberOfFilesPerMessage(a){a!==this.maxNumberOfFilesPerMessage&&this.composer.updateConfig({attachments:{maxNumberOfFilesPerMessage:a}})}get attachments(){return this.state.getLatestValue().attachments}get hasUploadPermission(){var a,r;return!!((r=(a=this.channel.data)==null?void 0:a.own_capabilities)!=null&&r.includes("upload-file"))}get isUploadEnabled(){return this.hasUploadPermission&&this.availableUploadSlots>0}get successfulUploads(){return this.getUploadsByState("finished")}get successfulUploadsCount(){return this.successfulUploads.length}get uploadsInProgressCount(){return this.getUploadsByState("uploading").length}get failedUploadsCount(){return this.getUploadsByState("failed").length}get blockedUploadsCount(){return this.getUploadsByState("blocked").length}get pendingUploadsCount(){return this.getUploadsByState("pending").length}get availableUploadSlots(){return this.config.maxNumberOfFilesPerMessage-this.successfulUploadsCount-this.uploadsInProgressCount}getUploadsByState(a){return Object.values(this.attachments).filter(({localMetadata:r})=>r.uploadState===a)}},HT="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",$T="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",Fi=(a,r)=>{for(const t in r)a[t]=r[t];return a},g0="numeric",h0="ascii",y0="alpha",id="asciinumeric",sd="alphanumeric",b0="domain",rw="emoji",YT="scheme",GT="slashscheme",Ch="whitespace";function qT(a,r){return a in r||(r[a]=[]),r[a]}function vl(a,r,t){r[g0]&&(r[id]=!0,r[sd]=!0),r[h0]&&(r[id]=!0,r[y0]=!0),r[id]&&(r[sd]=!0),r[y0]&&(r[sd]=!0),r[sd]&&(r[b0]=!0),r[rw]&&(r[b0]=!0);for(const n in r){const o=qT(n,t);o.indexOf(a)<0&&o.push(a)}}function ZT(a,r){const t={};for(const n in r)r[n].indexOf(a)>=0&&(t[n]=!0);return t}function pr(a=null){this.j={},this.jr=[],this.jd=null,this.t=a}pr.groups={};pr.prototype={accepts(){return!!this.t},go(a){const r=this,t=r.j[a];if(t)return t;for(let n=0;n<r.jr.length;n++){const o=r.jr[n][0],i=r.jr[n][1];if(i&&o.test(a))return i}return r.jd},has(a,r=!1){return r?a in this.j:!!this.go(a)},ta(a,r,t,n){for(let o=0;o<a.length;o++)this.tt(a[o],r,t,n)},tr(a,r,t,n){n=n||pr.groups;let o;return r&&r.j?o=r:(o=new pr(r),t&&n&&vl(r,t,n)),this.jr.push([a,o]),o},ts(a,r,t,n){let o=this;const i=a.length;if(!i)return o;for(let c=0;c<i-1;c++)o=o.tt(a[c]);return o.tt(a[i-1],r,t,n)},tt(a,r,t,n){n=n||pr.groups;const o=this;if(r&&r.j)return o.j[a]=r,r;const i=r;let c,u=o.go(a);if(u?(c=new pr,Fi(c.j,u.j),c.jr.push.apply(c.jr,u.jr),c.jd=u.jd,c.t=u.t):c=new pr,i){if(n)if(c.t&&typeof c.t=="string"){const m=Fi(ZT(c.t,n),t);vl(i,m,n)}else t&&vl(i,t,n);c.t=i}return o.j[a]=c,c}};var Mt=(a,r,t,n,o)=>a.ta(r,t,n,o),Ga=(a,r,t,n,o)=>a.tr(r,t,n,o),sx=(a,r,t,n,o)=>a.ts(r,t,n,o),Re=(a,r,t,n,o)=>a.tt(r,t,n,o),qo="WORD",v0="UWORD",ow="ASCIINUMERICAL",sw="ALPHANUMERICAL",kd="LOCALHOST",x0="TLD",E0="UTLD",Rm="SCHEME",bi="SLASH_SCHEME",uy="NUM",w0="WS",my="NL",cd="OPENBRACE",dd="CLOSEBRACE",Km="OPENBRACKET",ep="CLOSEBRACKET",tp="OPENPAREN",ap="CLOSEPAREN",np="OPENANGLEBRACKET",rp="CLOSEANGLEBRACKET",op="FULLWIDTHLEFTPAREN",sp="FULLWIDTHRIGHTPAREN",lp="LEFTCORNERBRACKET",ip="RIGHTCORNERBRACKET",cp="LEFTWHITECORNERBRACKET",dp="RIGHTWHITECORNERBRACKET",up="FULLWIDTHLESSTHAN",mp="FULLWIDTHGREATERTHAN",pp="AMPERSAND",py="APOSTROPHE",fp="ASTERISK",Fs="AT",gp="BACKSLASH",hp="BACKTICK",yp="CARET",Us="COLON",fy="COMMA",bp="DOLLAR",uo="DOT",vp="EQUALS",gy="EXCLAMATION",Mr="HYPHEN",ud="PERCENT",xp="PIPE",Ep="PLUS",wp="POUND",md="QUERY",hy="QUOTE",lw="FULLWIDTHMIDDLEDOT",yy="SEMI",mo="SLASH",pd="TILDE",Sp="UNDERSCORE",iw="EMOJI",Cp="SYM",cw=Object.freeze({__proto__:null,WORD:qo,UWORD:v0,ASCIINUMERICAL:ow,ALPHANUMERICAL:sw,LOCALHOST:kd,TLD:x0,UTLD:E0,SCHEME:Rm,SLASH_SCHEME:bi,NUM:uy,WS:w0,NL:my,OPENBRACE:cd,CLOSEBRACE:dd,OPENBRACKET:Km,CLOSEBRACKET:ep,OPENPAREN:tp,CLOSEPAREN:ap,OPENANGLEBRACKET:np,CLOSEANGLEBRACKET:rp,FULLWIDTHLEFTPAREN:op,FULLWIDTHRIGHTPAREN:sp,LEFTCORNERBRACKET:lp,RIGHTCORNERBRACKET:ip,LEFTWHITECORNERBRACKET:cp,RIGHTWHITECORNERBRACKET:dp,FULLWIDTHLESSTHAN:up,FULLWIDTHGREATERTHAN:mp,AMPERSAND:pp,APOSTROPHE:py,ASTERISK:fp,AT:Fs,BACKSLASH:gp,BACKTICK:hp,CARET:yp,COLON:Us,COMMA:fy,DOLLAR:bp,DOT:uo,EQUALS:vp,EXCLAMATION:gy,HYPHEN:Mr,PERCENT:ud,PIPE:xp,PLUS:Ep,POUND:wp,QUERY:md,QUOTE:hy,FULLWIDTHMIDDLEDOT:lw,SEMI:yy,SLASH:mo,TILDE:pd,UNDERSCORE:Sp,EMOJI:iw,SYM:Cp}),$o=/[a-z]/,Qc=new RegExp("\\p{L}","u"),_h=new RegExp("\\p{Emoji}","u"),Yo=/\d/,kh=/\s/,lx="\r",Nh=`
`,VT="️",QT="‍",Ih="￼",pm=null,fm=null;function JT(a=[]){const r={};pr.groups=r;const t=new pr;pm==null&&(pm=ix(HT)),fm==null&&(fm=ix($T)),Re(t,"'",py),Re(t,"{",cd),Re(t,"}",dd),Re(t,"[",Km),Re(t,"]",ep),Re(t,"(",tp),Re(t,")",ap),Re(t,"<",np),Re(t,">",rp),Re(t,"（",op),Re(t,"）",sp),Re(t,"「",lp),Re(t,"」",ip),Re(t,"『",cp),Re(t,"』",dp),Re(t,"＜",up),Re(t,"＞",mp),Re(t,"&",pp),Re(t,"*",fp),Re(t,"@",Fs),Re(t,"`",hp),Re(t,"^",yp),Re(t,":",Us),Re(t,",",fy),Re(t,"$",bp),Re(t,".",uo),Re(t,"=",vp),Re(t,"!",gy),Re(t,"-",Mr),Re(t,"%",ud),Re(t,"|",xp),Re(t,"+",Ep),Re(t,"#",wp),Re(t,"?",md),Re(t,'"',hy),Re(t,"/",mo),Re(t,";",yy),Re(t,"~",pd),Re(t,"_",Sp),Re(t,"\\",gp),Re(t,"・",lw);const n=Ga(t,Yo,uy,{[g0]:!0});Ga(n,Yo,n);const o=Ga(n,$o,ow,{[id]:!0}),i=Ga(n,Qc,sw,{[sd]:!0}),c=Ga(t,$o,qo,{[h0]:!0});Ga(c,Yo,o),Ga(c,$o,c),Ga(o,Yo,o),Ga(o,$o,o);const u=Ga(t,Qc,v0,{[y0]:!0});Ga(u,$o),Ga(u,Yo,i),Ga(u,Qc,u),Ga(i,Yo,i),Ga(i,$o),Ga(i,Qc,i);const m=Re(t,Nh,my,{[Ch]:!0}),g=Re(t,lx,w0,{[Ch]:!0}),f=Ga(t,kh,w0,{[Ch]:!0});Re(t,Ih,f),Re(g,Nh,m),Re(g,Ih,f),Ga(g,kh,f),Re(f,lx),Re(f,Nh),Ga(f,kh,f),Re(f,Ih,f);const h=Ga(t,_h,iw,{[rw]:!0});Re(h,"#"),Ga(h,_h,h),Re(h,VT,h);const v=Re(h,QT);Re(v,"#"),Ga(v,_h,h);const S=[[$o,c],[Yo,o]],x=[[$o,null],[Qc,u],[Yo,i]];for(let E=0;E<pm.length;E++)Ts(t,pm[E],x0,qo,S);for(let E=0;E<fm.length;E++)Ts(t,fm[E],E0,v0,x);vl(x0,{tld:!0,ascii:!0},r),vl(E0,{utld:!0,alpha:!0},r),Ts(t,"file",Rm,qo,S),Ts(t,"mailto",Rm,qo,S),Ts(t,"http",bi,qo,S),Ts(t,"https",bi,qo,S),Ts(t,"ftp",bi,qo,S),Ts(t,"ftps",bi,qo,S),vl(Rm,{scheme:!0,ascii:!0},r),vl(bi,{slashscheme:!0,ascii:!0},r),a=a.sort((E,N)=>E[0]>N[0]?1:-1);for(let E=0;E<a.length;E++){const N=a[E][0],I=a[E][1]?{[YT]:!0}:{[GT]:!0};N.indexOf("-")>=0?I[b0]=!0:$o.test(N)?Yo.test(N)?I[id]=!0:I[h0]=!0:I[g0]=!0,sx(t,N,N,I)}return sx(t,"localhost",kd,{ascii:!0}),t.jd=new pr(Cp),{start:t,tokens:Fi({groups:r},cw)}}function dw(a,r){const t=XT(r.replace(/[A-Z]/g,u=>u.toLowerCase())),n=t.length,o=[];let i=0,c=0;for(;c<n;){let u=a,m=null,g=0,f=null,h=-1,v=-1;for(;c<n&&(m=u.go(t[c]));)u=m,u.accepts()?(h=0,v=0,f=u):h>=0&&(h+=t[c].length,v++),g+=t[c].length,i+=t[c].length,c++;i-=h,c-=v,g-=h,o.push({t:f.t,v:r.slice(i-g,i),s:i-g,e:i})}return o}function XT(a){const r=[],t=a.length;let n=0;for(;n<t;){let o=a.charCodeAt(n),i,c=o<55296||o>56319||n+1===t||(i=a.charCodeAt(n+1))<56320||i>57343?a[n]:a.slice(n,n+2);r.push(c),n+=c.length}return r}function Ts(a,r,t,n,o){let i;const c=r.length;for(let u=0;u<c-1;u++){const m=r[u];a.j[m]?i=a.j[m]:(i=new pr(n),i.jr=o.slice(),a.j[m]=i),a=i}return i=new pr(t),i.jr=o.slice(),a.j[r[c-1]]=i,i}function ix(a){const r=[],t=[];let n=0,o="0123456789";for(;n<a.length;){let i=0;for(;o.indexOf(a[n+i])>=0;)i++;if(i>0){r.push(t.join(""));for(let c=parseInt(a.substring(n,n+i),10);c>0;c--)t.pop();n+=i}else t.push(a[n]),n++}return r}var Nd={defaultProtocol:"http",events:null,format:cx,formatHref:cx,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function by(a,r=null){let t=Fi({},Nd);a&&(t=Fi(t,a instanceof by?a.o:a));const n=t.ignoreTags,o=[];for(let i=0;i<n.length;i++)o.push(n[i].toUpperCase());this.o=t,r&&(this.defaultRender=r),this.ignoreTags=o}by.prototype={o:Nd,ignoreTags:[],defaultRender(a){return a},check(a){return this.get("validate",a.toString(),a)},get(a,r,t){const n=r!=null;let o=this.o[a];return o&&(typeof o=="object"?(o=t.t in o?o[t.t]:Nd[a],typeof o=="function"&&n&&(o=o(r,t))):typeof o=="function"&&n&&(o=o(r,t.t,t)),o)},getObj(a,r,t){let n=this.o[a];return typeof n=="function"&&r!=null&&(n=n(r,t.t,t)),n},render(a){const r=a.render(this);return(this.get("render",null,a)||this.defaultRender)(r,a.t,a)}};function cx(a){return a}function uw(a,r){this.t="token",this.v=a,this.tk=r}uw.prototype={isLink:!1,toString(){return this.v},toHref(a){return this.toString()},toFormattedString(a){const r=this.toString(),t=a.get("truncate",r,this),n=a.get("format",r,this);return t&&n.length>t?n.substring(0,t)+"…":n},toFormattedHref(a){return a.get("formatHref",this.toHref(a.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(a=Nd.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(a),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(a){return{type:this.t,value:this.toFormattedString(a),isLink:this.isLink,href:this.toFormattedHref(a),start:this.startIndex(),end:this.endIndex()}},validate(a){return a.get("validate",this.toString(),this)},render(a){const r=this,t=this.toHref(a.get("defaultProtocol")),n=a.get("formatHref",t,this),o=a.get("tagName",t,r),i=this.toFormattedString(a),c={},u=a.get("className",t,r),m=a.get("target",t,r),g=a.get("rel",t,r),f=a.getObj("attributes",t,r),h=a.getObj("events",t,r);return c.href=n,u&&(c.class=u),m&&(c.target=m),g&&(c.rel=g),f&&Fi(c,f),{tagName:o,attributes:c,content:i,eventListeners:h}}};function Kp(a,r){class t extends uw{constructor(o,i){super(o,i),this.t=a}}for(const n in r)t.prototype[n]=r[n];return t.t=a,t}var dx=Kp("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),ux=Kp("text"),KT=Kp("nl"),gm=Kp("url",{isLink:!0,toHref(a=Nd.defaultProtocol){return this.hasProtocol()?this.v:`${a}://${this.v}`},hasProtocol(){const a=this.tk;return a.length>=2&&a[0].t!==kd&&a[1].t===Us}}),Nr=a=>new pr(a);function eP({groups:a}){const r=a.domain.concat([pp,fp,Fs,gp,hp,yp,bp,vp,Mr,uy,ud,xp,Ep,wp,mo,Cp,pd,Sp]),t=[Us,fy,uo,gy,ud,md,hy,yy,np,rp,cd,dd,ep,Km,tp,ap,op,sp,lp,ip,cp,dp,up,mp],n=[pp,py,fp,gp,hp,yp,bp,vp,Mr,cd,dd,ud,xp,Ep,wp,md,mo,Cp,pd,Sp],o=Nr(),i=Re(o,pd);Mt(i,n,i),Mt(i,a.domain,i);const c=Nr(),u=Nr(),m=Nr();Mt(o,a.domain,c),Mt(o,a.scheme,u),Mt(o,a.slashscheme,m),Mt(c,n,i),Mt(c,a.domain,c);const g=Re(c,Fs);Re(i,Fs,g),Re(u,Fs,g),Re(m,Fs,g);const f=Re(i,uo);Mt(f,n,i),Mt(f,a.domain,i);const h=Nr();Mt(g,a.domain,h),Mt(h,a.domain,h);const v=Re(h,uo);Mt(v,a.domain,h);const S=Nr(dx);Mt(v,a.tld,S),Mt(v,a.utld,S),Re(g,kd,S);const x=Re(h,Mr);Re(x,Mr,x),Mt(x,a.domain,h),Mt(S,a.domain,h),Re(S,uo,v),Re(S,Mr,x);const E=Re(S,Us);Mt(E,a.numeric,dx);const N=Re(c,Mr),C=Re(c,uo);Re(N,Mr,N),Mt(N,a.domain,c),Mt(C,n,i),Mt(C,a.domain,c);const I=Nr(gm);Mt(C,a.tld,I),Mt(C,a.utld,I),Mt(I,a.domain,c),Mt(I,n,i),Re(I,uo,C),Re(I,Mr,N),Re(I,Fs,g);const A=Re(I,Us),_=Nr(gm);Mt(A,a.numeric,_);const k=Nr(gm),B=Nr();Mt(k,r,k),Mt(k,t,B),Mt(B,r,k),Mt(B,t,B),Re(I,mo,k),Re(_,mo,k);const z=Re(u,Us),M=Re(m,Us),O=Re(M,mo),U=Re(O,mo);Mt(u,a.domain,c),Re(u,uo,C),Re(u,Mr,N),Mt(m,a.domain,c),Re(m,uo,C),Re(m,Mr,N),Mt(z,a.domain,k),Re(z,mo,k),Re(z,md,k),Mt(U,a.domain,k),Mt(U,r,k),Re(U,mo,k);const Z=[[cd,dd],[Km,ep],[tp,ap],[np,rp],[op,sp],[lp,ip],[cp,dp],[up,mp]];for(let H=0;H<Z.length;H++){const[V,F]=Z[H],R=Re(k,V);Re(B,V,R),Re(R,F,k);const D=Nr(gm);Mt(R,r,D);const j=Nr();Mt(R,t),Mt(D,r,D),Mt(D,t,j),Mt(j,r,D),Mt(j,t,j),Re(D,F,k),Re(j,F,k)}return Re(o,kd,I),Re(o,my,KT),{start:o,tokens:cw}}function tP(a,r,t){let n=t.length,o=0,i=[],c=[];for(;o<n;){let u=a,m=null,g=null,f=0,h=null,v=-1;for(;o<n&&!(m=u.go(t[o].t));)c.push(t[o++]);for(;o<n&&(g=m||u.go(t[o].t));)m=null,u=g,u.accepts()?(v=0,h=u):v>=0&&v++,o++,f++;if(v<0)o-=f,o<n&&(c.push(t[o]),o++);else{c.length>0&&(i.push(Ah(ux,r,c)),c=[]),o-=v,f-=v;const S=h.t,x=t.slice(o-f,o);i.push(Ah(S,r,x))}}return c.length>0&&i.push(Ah(ux,r,c)),i}function Ah(a,r,t){const n=t[0].s,o=t[t.length-1].e,i=r.slice(n,o);return new a(i,t)}var Bn={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function aP(){Bn.scanner=JT(Bn.customSchemes);for(let a=0;a<Bn.tokenQueue.length;a++)Bn.tokenQueue[a][1]({scanner:Bn.scanner});Bn.parser=eP(Bn.scanner.tokens);for(let a=0;a<Bn.pluginQueue.length;a++)Bn.pluginQueue[a][1]({scanner:Bn.scanner,parser:Bn.parser});return Bn.initialized=!0,Bn}function mw(a){return Bn.initialized||aP(),tP(Bn.parser.start,a,dw(Bn.scanner.start,a))}mw.scan=dw;function nP(a,r=null,t=null){if(r&&typeof r=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${r}; must be a string`);t=r,r=null}const n=new by(t),o=mw(a),i=[];for(let c=0;c<o.length;c++){const u=o[c];u.isLink&&(!r||u.t===r)&&n.check(u)&&i.push(u.toFormattedObject(n))}return i}var rP={debounceURLEnrichmentMs:1500,enabled:!1,findURLFn:a=>nP(a,"url",{defaultProtocol:"https"}).reduce((r,t)=>{try{const n=new URL(t.href);t.isLink&&/^[a-zA-Z0-9-.]+\.[a-zA-Z]{2,}$/.test(n.hostname)&&r.push(t.href)}catch{}return r},[])},oP={acceptedFiles:[],fileUploadFilter:()=>!0,maxNumberOfFilesPerMessage:aT},sP={enabled:!0,publishTypingEvents:!0},lP={attachments:oP,drafts:{enabled:!1},linkPreviews:rP,text:sP},mx=a=>a?{message:{},custom:{}}:{message:{},custom:{}},iP=class{constructor({composer:a,message:r}){this.isMessageDataEqual=(t,n)=>JSON.stringify(t.message)===JSON.stringify(n==null?void 0:n.message),this.initState=({message:t}={})=>{this.state.next(mx({composer:this.composer}))},this.composer=a,this.state=new Yn(mx({}))}get customMessageData(){return this.state.getLatestValue().message}get customComposerData(){return this.state.getLatestValue().custom}setMessageData(a){this.state.partialNext({message:{...this.state.getLatestValue().message,...a}})}setCustomData(a){this.state.partialNext({custom:{...this.state.getLatestValue().custom,...a}})}},cP=a=>new Map(a.map(r=>[r.og_scrape_url,r])),px=({message:a})=>{var r;return a?{previews:((r=a.attachments)==null?void 0:r.reduce((t,n)=>(n.og_scrape_url&&t.set(n.og_scrape_url,{...n,status:"loaded"}),t),new Map))??new Map}:{previews:new Map}},Tl=class fl{constructor({composer:r,message:t}){this.shouldDiscardEnrichQueries=!1,this.initState=({message:n}={})=>{this.state.next(px({message:this.enabled?n:void 0}))},this._findAndEnrichUrls=async n=>{if(!this.enabled)return;const o=this.config.findURLFn(n);if(this.shouldDiscardEnrichQueries=!o.length,this.shouldDiscardEnrichQueries){this.state.next({previews:new Map});return}const i=new Map(Array.from(this.previews).filter(([u])=>o.includes(u)||o.includes(u+"/"))),c=o.filter(u=>{const m=this.previews;return!(m.get(u)||m.get(u+"/"))}).map(u=>({og_scrape_url:u.trim(),status:"loading"}));c.length&&(this.state.partialNext({previews:new Map([...i,...cP(c)])}),await Promise.all(c.map(async u=>{try{const{duration:m,...g}=await this.client.enrichURL(u.og_scrape_url);if(this.shouldDiscardEnrichQueries)return;this.previews.has(u.og_scrape_url)&&this.updatePreview(u.og_scrape_url,{status:"loaded",...g})}catch{this.previews.has(u.og_scrape_url)&&this.updatePreview(u.og_scrape_url,{status:"failed"})}return u})))},this.cancelURLEnrichment=()=>{this.findAndEnrichUrls.cancel(),this.findAndEnrichUrls.flush()},this.clearPreviews=()=>{const n=this.previews,o=new Map;n.forEach((i,c)=>{fl.previewIsDismissed(i)&&o.set(c,i)}),this.state.partialNext({previews:o})},this.updatePreview=(n,o)=>{var m;if(!n)return;const i=this.previews.get(n),c=o.status??((m=this.previews.get(n))==null?void 0:m.status)??"pending";let u=o;if(i){const g=nw(i,o);if(!g.diff||Object.keys(g.diff).length===0)return;u=g.result}this.state.partialNext({previews:new Map(this.previews).set(n,{...u,og_scrape_url:n,status:c})})},this.dismissPreview=n=>{var i;const o=this.previews.get(n);o&&((i=this.onLinkPreviewDismissed)==null||i.call(this,o),this.updatePreview(n,{status:"dismissed"}))},this.composer=r,this.state=new Yn(px({message:this.enabled?t:void 0})),this.findAndEnrichUrls=m0(this._findAndEnrichUrls.bind(this),this.config.debounceURLEnrichmentMs)}get client(){return this.composer.client}get channel(){return this.composer.channel}get previews(){return this.state.getLatestValue().previews}get loadingPreviews(){return Array.from(this.previews.values()).filter(r=>fl.previewIsLoading(r))}get loadedPreviews(){return Array.from(this.previews.values()).filter(r=>fl.previewIsLoaded(r))}get dismissedPreviews(){return Array.from(this.previews.values()).filter(r=>fl.previewIsDismissed(r))}get failedPreviews(){return Array.from(this.previews.values()).filter(r=>fl.previewIsFailed(r))}get pendingPreviews(){return Array.from(this.previews.values()).filter(r=>fl.previewIsPending(r))}get config(){return this.composer.config.linkPreviews}get debounceURLEnrichmentMs(){return this.config.debounceURLEnrichmentMs}set debounceURLEnrichmentMs(r){this.cancelURLEnrichment(),this.findAndEnrichUrls=m0(this._findAndEnrichUrls.bind(this),this.config.debounceURLEnrichmentMs),this.composer.updateConfig({linkPreviews:{debounceURLEnrichmentMs:r}})}get enabled(){var r;return!!((r=this.channel.getConfig())!=null&&r.url_enrichment)&&this.composer.config.linkPreviews.enabled}set enabled(r){r!==this.enabled&&this.composer.updateConfig({linkPreviews:{enabled:r}})}get findURLFn(){return this.config.findURLFn}set findURLFn(r){this.composer.updateConfig({linkPreviews:{findURLFn:r}})}get onLinkPreviewDismissed(){return this.config.onLinkPreviewDismissed}set onLinkPreviewDismissed(r){this.composer.updateConfig({linkPreviews:{onLinkPreviewDismissed:r}})}};Tl.previewIsLoading=a=>a.status==="loading";Tl.previewIsLoaded=a=>a.status==="loaded";Tl.previewIsDismissed=a=>a.status==="dismissed";Tl.previewIsFailed=a=>a.status==="failed";Tl.previewIsPending=a=>a.status==="pending";Tl.getPreviewData=a=>{const{status:r,...t}=a;return t};var vy=Tl,dP=uP(mP),S0=new Map;function uP(a){return function(t,n){const{cb:o,onContinued:i}=a(t,n),c=S0.get(t);c==null||c.onContinued();const u=c?c.promise.then(o,o):o();return S0.set(t,{promise:u,onContinued:i}),u}}function mP(a,r){const t=new AbortController;return{cb:()=>t.signal.aborted?Promise.resolve("canceled"):r(t.signal).finally(()=>{t.signal.aborted||S0.delete(a)}),onContinued:()=>t.abort()}}var Wd=class{constructor(){this.middleware=[],this.id=Ur()}use(a){return this.middleware=this.middleware.concat(a),this}replace(a){const r=[...this.middleware];return a.forEach(t=>{const n=this.middleware.findIndex(o=>o.id===t.id);n>=0?r.splice(n,1,t):r.push(t)}),this.middleware=r,this}insert({middleware:a,position:r,unique:t}){t&&a.forEach(c=>{const u=this.middleware.findIndex(m=>m.id===c.id);u>=0&&this.middleware.splice(u,1)});const n=r.after||r.before,o=this.middleware.findIndex(c=>c.id===n),i=r.after?o+1:o;return this.middleware.splice(i,0,...a),this}setOrder(a){this.middleware=a.map(r=>this.middleware.find(t=>t.id===r)).filter(Boolean)}async executeMiddlewareChain({eventName:a,initialValue:r}){let t=-1;const n=async(i,c,u)=>{if(i<=t)throw new Error("next() called multiple times");if(t=i,i===this.middleware.length||u&&["complete","discard"].includes(u))return{state:c,status:u};const f=this.middleware[i].handlers[a];return f?await f({state:c,next:E=>n(i+1,E),complete:E=>n(i+1,E,"complete"),discard:()=>n(i+1,c,"discard"),forward:()=>n(i+1,c)}):n(i+1,c,u)},o=await dP(`middleware-execution-${this.id}-${a}`,async i=>{const c=await n(0,r);return i.aborted?"canceled":c});return o==="canceled"?{state:r,status:"discard"}:o}async execute({eventName:a,initialValue:r}){return await this.executeMiddlewareChain({eventName:a,initialValue:r})}},xy=/^([2-9]|10)$/,pP=100,fx=a=>!a.trim(),fd={enforce_unique_vote:()=>({max_votes_allowed:void 0}),max_votes_allowed:({data:a,value:r})=>a.enforce_unique_vote&&r?{max_votes_allowed:"Enforce unique vote is enabled"}:!r.match(/^[0-9]+$/)&&r?{max_votes_allowed:"Only numbers are allowed"}:(r==null?void 0:r.length)>1&&!r.match(xy)?{max_votes_allowed:"Type a number from 2 to 10"}:{max_votes_allowed:void 0},options:({value:a})=>{const r={},t=new Set;return a.forEach(n=>{const o=n.text.trim();t.has(o)?r[n.id]="Option already exists":t.add(o)}),Object.keys(r).length>0?{options:r}:{options:void 0}}},fP={name:({currentError:a,value:r})=>r&&a?{name:void 0}:{name:typeof a=="string"?a:void 0}},gP={max_votes_allowed:({value:a})=>a&&!a.match(xy)?{max_votes_allowed:"Type a number from 2 to 10"}:{max_votes_allowed:void 0},name:({value:a})=>fx(a)?{name:"Question is required"}:{name:void 0},options:a=>{var n;const r=(n=fd.options)==null?void 0:n.call(fd,a),t=(r==null?void 0:r.options)??{};return a.value.forEach((o,i)=>{const c=i===a.value.length-1;fx(o.text)&&!c&&(t[o.id]="Option is empty")}),Object.keys(t).length>0?{options:t}:{options:void 0}}},hP=a=>!Array.isArray(a)&&typeof(a==null?void 0:a.index)=="number"&&typeof(a==null?void 0:a.text)=="string",yP={enforce_unique_vote:({value:a})=>({enforce_unique_vote:a,max_votes_allowed:""}),options:({value:a,data:r})=>{if(Array.isArray(a))return{options:a.map(f=>({id:f.id,text:f.text.trim()}))};const{index:t,text:n}=a,o=r.options||[],i=o&&o.slice(t+1).length>0&&!n,c=o.slice(0,t),u=o.slice(t+1),m=[...c,...i?[]:[{...o[t],text:n}],...u];return o.length<pP&&!m.some(f=>!f.text.trim())&&m.push({id:Ur(),text:""}),{options:m}}},bP=({processors:a,validators:r}={})=>{const t=({state:n,validators:o,processors:i})=>{const{previousState:c,targetFields:u}=n;let m;if(!i&&hP(u.options)){const f=[...c.data.options],h=c.data.options[u.options.index];h&&(h.text=u.options.text,f.splice(u.options.index,1,h)),m={...u,options:f}}else i?m=Object.entries(u).reduce((f,[h,v])=>{const S=i[h];return f={...f,...S?S({data:c.data,value:v}):{[h]:v}},f},{}):m=u;const g=Object.keys(u).reduce((f,h)=>{const v=o[h];if(v){const S=v({currentError:c.errors[h],data:c.data,value:m[h]});f={...f,...S}}return f},{});return{newData:m,newErrors:g}};return{id:"stream-io/poll-composer-state-processing",handlers:{handleFieldChange:({state:n,next:o,forward:i})=>{if(!n.targetFields)return i();const{previousState:c,injectedFieldErrors:u}=n,{newData:m,newErrors:g}=t({processors:{...yP,...a==null?void 0:a.handleFieldChange},state:n,validators:{...fd,...fP,...r==null?void 0:r.handleFieldChange}});return o({...n,nextState:{...c,data:{...c.data,...m},errors:{...c.errors,...g,...u}}})},handleFieldBlur:({state:n,next:o,forward:i})=>{if(!n.targetFields)return i();const{previousState:c}=n,{newData:u,newErrors:m}=t({processors:a==null?void 0:a.handleFieldBlur,state:n,validators:{...fd,...gP,...r==null?void 0:r.handleFieldBlur}});return o({...n,nextState:{...c,data:{...c.data,...u},errors:{...c.errors,...m,...n.injectedFieldErrors}}})}}}},vP=a=>({id:"stream-io/poll-composer-composition",handlers:{compose:({discard:r,forward:t})=>a.pollComposer.canCreatePoll?t():r()}}),xP=class extends Wd{constructor({composer:a}){super(),this.use([vP(a)])}},EP=class extends Wd{constructor(){super(),this.use([bP()])}},wP=class extends Error{constructor(a,{code:r,status:t,response:n}){super(a),this.name="ErrorFromResponse",this.code=r,this.response=n,this.status=t}toJSON(){const a=[["status",this.status],["code",this.code]],r=[];for(const[t,n]of a)typeof n<"u"&&n!==null&&r.push(`${t}: ${n}`);return{message:`(${r.join(", ")}) - ${this.message}`,stack:this.stack,name:this.name}}},SP=class{constructor({composer:a}){this.initState=()=>{this.state.next(this.initialState)},this.updateFields=async(r,t)=>{const{state:n,status:o}=await this.stateMiddlewareExecutor.execute({eventName:"handleFieldChange",initialValue:{nextState:{...this.state.getLatestValue()},previousState:{...this.state.getLatestValue()},targetFields:r,injectedFieldErrors:t}});o!=="discard"&&this.state.next(n.nextState)},this.handleFieldBlur=async r=>{const t=await this.stateMiddlewareExecutor.execute({eventName:"handleFieldBlur",initialValue:{nextState:{...this.state.getLatestValue()},previousState:{...this.state.getLatestValue()},targetFields:{[r]:this.state.getLatestValue().data[r]}}});t.status!=="discard"&&this.state.next(t.state.nextState)},this.compose=async()=>{var o;const{data:r,errors:t}=this.state.getLatestValue(),n=await this.compositionMiddlewareExecutor.execute({eventName:"compose",initialValue:{data:{...r,max_votes_allowed:r.max_votes_allowed?parseInt(r.max_votes_allowed):void 0,options:(o=r.options)==null?void 0:o.filter(i=>i.text.trim()).map(i=>({text:i.text}))},errors:t}});if(n.status!=="discard")return n.state},this.composer=a,this.state=new Yn(this.initialState),this.compositionMiddlewareExecutor=new xP({composer:a}),this.stateMiddlewareExecutor=new EP}get initialState(){var a;return{data:{allow_answers:!1,allow_user_suggested_options:!1,description:"",enforce_unique_vote:!0,id:Ur(),max_votes_allowed:"",name:"",options:[{id:Ur(),text:""}],user_id:(a=this.composer.client.user)==null?void 0:a.id,voting_visibility:"public"},errors:{}}}get allow_answers(){return this.state.getLatestValue().data.allow_answers}get allow_user_suggested_options(){return this.state.getLatestValue().data.allow_user_suggested_options}get description(){return this.state.getLatestValue().data.description}get enforce_unique_vote(){return this.state.getLatestValue().data.enforce_unique_vote}get id(){return this.state.getLatestValue().data.id}get max_votes_allowed(){return this.state.getLatestValue().data.max_votes_allowed}get name(){return this.state.getLatestValue().data.name}get options(){return this.state.getLatestValue().data.options}get user_id(){return this.state.getLatestValue().data.user_id}get voting_visibility(){return this.state.getLatestValue().data.voting_visibility}get canCreatePoll(){var c,u;const{data:a,errors:r}=this.state.getLatestValue(),t=a.options.filter(m=>!!m.text).length>0,n=!!a.name,o=parseInt(((u=(c=a.max_votes_allowed)==null?void 0:c.match(xy))==null?void 0:u[0])||""),i=a.max_votes_allowed===""||!!o&&(2<=o||o<=10);return t&&n&&i&&Object.values(r).filter(m=>!!m).length===0}},pw=a=>{const{localMetadata:r,...t}=a;return t},CP=a=>({id:"stream-io/message-composer-middleware/attachments",handlers:{compose:({state:r,next:t,discard:n,forward:o})=>{const{attachmentManager:i}=a;if(!i)return o();if(i.uploadsInProgressCount>0)return a.client.notifications.addWarning({message:"Wait until all attachments have uploaded",origin:{emitter:"MessageComposer",context:{composer:a}}}),n();const c=(r.message.attachments??[]).concat(i.successfulUploads.map(pw));return c.length?t({...r,localMessage:{...r.localMessage,attachments:c},message:{...r.message,attachments:c}}):o()}}}),_P=a=>({id:"stream-io/message-composer-middleware/draft-attachments",handlers:{compose:({state:r,next:t,forward:n})=>{const{attachmentManager:o}=a;if(!o)return n();const i=o.successfulUploads,c=i.length?(r.draft.attachments??[]).concat(i.map(pw)):void 0;return t({...r,draft:{...r.draft,attachments:c}})}}}),kP=a=>({id:"stream-io/message-composer-middleware/data-cleanup",handlers:{compose:({state:r,next:t})=>{var i,c,u;const n={type:((i=a.editedMessage)==null?void 0:i.type)??"regular"},o=a.editedMessage?$5(a.editedMessage):void 0;return t({...r,localMessage:mr({...a.editedMessage,...r.localMessage,...n,user:a.client.user}),message:{...o,...r.message,...n},sendOptions:a.editedMessage&&((c=r.sendOptions)!=null&&c.skip_enrich_url)?{skip_enrich_url:(u=r.sendOptions)==null?void 0:u.skip_enrich_url}:r.sendOptions})}}}),NP=a=>({id:"stream-io/message-composer-middleware/custom-data",handlers:{compose:({state:r,next:t,forward:n})=>{const o=a.customDataManager.customMessageData;return o?t({...r,localMessage:{...r.localMessage,...o},message:{...r.message,...o}}):n()}}}),IP=a=>({id:"stream-io/message-composer-middleware/draft-custom-data",handlers:{compose:({state:r,next:t,forward:n})=>{const o=a.customDataManager.customMessageData;return o?t({...r,draft:{...r.draft,...o}}):n()}}}),AP=a=>({id:"stream-io/message-composer-middleware/data-validation",handlers:{compose:async({state:r,discard:t,forward:n})=>{var g;const{maxLengthOnSend:o}=a.config.text??{},i=r.message.text??"",c=Ey(i)&&!((g=r.message.attachments)!=null&&g.length)&&!r.message.poll_id,u=typeof o=="number"&&i.length>o,m=a.editedMessage&&!a.lastChangeOriginIsLocal;return c||m||u?await t():await n()}}}),DP=a=>({id:"stream-io/message-composer-middleware/draft-data-validation",handlers:{compose:async({state:r,discard:t,forward:n})=>{var c;const o=!Ey(r.draft.text??"")||((c=r.draft.attachments)==null?void 0:c.length)||r.draft.poll_id||r.draft.quoted_message_id;return a.lastChangeOriginIsLocal&&o?await n():await t()}}}),MP=a=>({id:"stream-io/message-composer-middleware/link-previews",handlers:{compose:({state:r,next:t,forward:n})=>{const{linkPreviewsManager:o}=a;if(!o)return n();o.cancelURLEnrichment();const i=o.loadingPreviews.length>0,c=o.dismissedPreviews.length>0,u=o.loadingPreviews.length>0?[]:o.loadedPreviews.map(h=>vy.getPreviewData(h)),m=(r.message.attachments??[]).concat(u);if(!m.length)return n();const g={...r.sendOptions};return(!i&&u.length>0||c)&&(g.skip_enrich_url=!0),t({...r,message:{...r.message,attachments:m},localMessage:{...r.localMessage,attachments:m},sendOptions:g})}}}),RP=a=>({id:"stream-io/message-composer-middleware/draft-link-previews",handlers:{compose:({state:r,next:t,forward:n})=>{const{linkPreviewsManager:o}=a;if(!o)return n();o.cancelURLEnrichment();const i=o.loadedPreviews.map(c=>vy.getPreviewData(c));return i.length?t({...r,draft:{...r.draft,attachments:(r.draft.attachments??[]).concat(i)}}):n()}}}),TP=a=>({id:"stream-io/message-composer-middleware/text-composition",handlers:{compose:({state:r,next:t,forward:n})=>{if(!a.textComposer)return n();const{mentionedUsers:o,text:i}=a.textComposer,c=Array.from(new Set(o.filter(({id:u,name:m})=>i.includes(`@${u}`)||i.includes(`@${m}`))));return!i&&c.length===0?n():t({...r,localMessage:{...r.localMessage,mentioned_users:c,text:i},message:{...r.message,mentioned_users:c.map(u=>u.id),text:i}})}}}),PP=a=>({id:"stream-io/message-composer-middleware/draft-text-composition",handlers:{compose:({state:r,next:t,forward:n})=>{if(!a.textComposer)return n();const{maxLengthOnSend:o}=a.config.text??{},{mentionedUsers:i,text:c}=a.textComposer,u=i.length?Array.from(new Set(i.filter(({id:g,name:f})=>c.includes(`@${g}`)||c.includes(`@${f}`)))):void 0,m=typeof o=="number"&&c.length>o?c.slice(0,o):c;return t({...r,draft:{...r.draft,mentioned_users:u==null?void 0:u.map(g=>g.id),text:m}})}}}),LP=a=>({id:"stream-io/message-composer-middleware/own-state",handlers:{compose:({state:r,next:t})=>{const n={};return a.quotedMessage&&(n.quoted_message_id=a.quotedMessage.id),a.pollId&&(n.poll_id=a.pollId),t({...r,localMessage:{...r.localMessage,...n,quoted_message:a.quotedMessage??void 0},message:{...r.message,...n}})}}}),BP=a=>({id:"stream-io/message-composer-middleware/draft-own-state",handlers:{compose:({state:r,next:t})=>{const n={};return a.quotedMessage&&(n.quoted_message_id=a.quotedMessage.id),a.pollId&&(n.poll_id=a.pollId),t({...r,draft:{...r.draft,...n}})}}}),zP={attachments:[],mentioned_users:[],parent_id:void 0,quoted_message:void 0,text:""},OP=a=>({id:"stream-io/message-composer-middleware/poll-only",handlers:{compose:({state:r,complete:t,forward:n})=>{const o=a.pollId,i=!!a.editedMessage,c=!!a.threadId;return!o||c||i?n():t({...r,localMessage:{...r.localMessage,...zP,poll_id:o},message:{id:r.localMessage.id,poll_id:o}})}}}),FP=class extends Wd{constructor({composer:a}){super(),this.use([OP(a),TP(a),CP(a),MP(a),LP(a),NP(a),AP(a),kP(a)])}},UP=class extends Wd{constructor({composer:a}){super(),this.use([PP(a),_P(a),RP(a),BP(a),IP(a),DP(a)])}},WP={debounceMs:300,pageSize:10},fw=class{constructor(a){this.setDebounceOptions=({debounceMs:n})=>{this.searchDebounced=m0(this.executeQuery.bind(this),n)},this.activate=()=>{this.isActive||this.state.partialNext({isActive:!0})},this.deactivate=()=>{this.isActive&&this.state.partialNext({isActive:!1})},this.canExecuteQuery=n=>{const o=typeof n<"u",i=n??this.searchQuery;return!!(this.isActive&&!this.isLoading&&(this.hasNext||o)&&i)},this.search=n=>this.searchDebounced(n);const{debounceMs:r,pageSize:t}={...WP,...a};this.pageSize=t,this.state=new Yn(this.initialState),this.setDebounceOptions({debounceMs:r})}get lastQueryError(){return this.state.getLatestValue().lastQueryError}get hasNext(){return this.state.getLatestValue().hasNext}get hasResults(){return Array.isArray(this.state.getLatestValue().items)}get isActive(){return this.state.getLatestValue().isActive}get isLoading(){return this.state.getLatestValue().isLoading}get initialState(){return{hasNext:!0,isActive:!1,isLoading:!1,items:void 0,lastQueryError:void 0,next:void 0,offset:0,searchQuery:""}}get items(){return this.state.getLatestValue().items}get next(){return this.state.getLatestValue().next}get offset(){return this.state.getLatestValue().offset}get searchQuery(){return this.state.getLatestValue().searchQuery}getStateBeforeFirstQuery(a){return{...this.initialState,isActive:this.isActive,isLoading:!0,searchQuery:a}}getStateAfterQuery(a,r){return{...this.state.getLatestValue(),lastQueryError:void 0,...a,isLoading:!1,items:r?a.items:[...this.items??[],...a.items||[]]}}async executeQuery(a){if(!this.canExecuteQuery(a))return;const r=typeof a<"u",t=a??this.searchQuery;r?this.state.next(this.getStateBeforeFirstQuery(a??"")):this.state.partialNext({isLoading:!0});const n={};try{const o=await this.query(t);if(!o)return;const{items:i,next:c}=o;c||c===null?(n.next=c,n.hasNext=!!c):(n.offset=(this.offset??0)+i.length,n.hasNext=i.length===this.pageSize),n.items=await this.filterQueryResults(i)}catch(o){n.lastQueryError=o}finally{this.state.next(this.getStateAfterQuery(n,r))}}cancelScheduledQuery(){this.searchDebounced.cancel()}resetState(){this.state.next(this.initialState)}resetStateAndActivate(){this.resetState(),this.activate()}},gw=({trigger:a,text:r,isCommand:t=!1,acceptTrailingSpaces:n=!0})=>{const o=`[^\\s${a}]*`,i=r.match(new RegExp(t?`^[${a}]${o}$`:n?`(?!^|\\W)?[${a}]${o}\\s?${o}$`:`(?!^|\\W)?[${a}]${o}$`,"g"));return i&&i[i.length-1].trim()},hw=({insertText:a,selection:r,text:t,trigger:n})=>{const o=t.slice(0,r.end),i=t.slice(r.end),c=o.lastIndexOf(n);return{text:o.slice(0,c)+a+i,selection:{start:c+a.length,end:c+a.length}}};function jP(a){return a.replace(/[-[\]{}()*+?.,/\\^$|#]/g,"\\$&")}var HP=({displayName:a,searchToken:r})=>({tokenizedDisplayName:{token:r,parts:r?a.split(new RegExp(`(${jP(r)})`,"gi")).filter(Boolean):[a]}}),$P=class extends fw{constructor(a,r){super(r),this.type="commands",this.canExecuteQuery=t=>{const n=typeof t<"u";return this.isActive&&!this.isLoading&&(this.hasNext||n)},this.channel=a}getStateBeforeFirstQuery(a){const r=super.getStateBeforeFirstQuery(a),{items:t}=this.state.getLatestValue();return{...r,items:t}}query(a){const r=this.channel.getConfig(),n=((r==null?void 0:r.commands)||[]).filter(o=>!!(o.name&&o.name.toLowerCase().indexOf(a.toLowerCase())!==-1));return n.sort((o,i)=>{var m,g;let c=(m=o.name)==null?void 0:m.toLowerCase(),u=(g=i.name)==null?void 0:g.toLowerCase();if((c==null?void 0:c.indexOf(a))===0&&(c=`0${c}`),(u==null?void 0:u.indexOf(a))===0&&(u=`0${u}`),c!=null&&u!=null){if(c<u)return-1;if(c>u)return 1}return 0}),Promise.resolve({items:n.map(o=>({...o,id:o.name})),next:null})}filterQueryResults(a){return a}},YP={minChars:1,trigger:"/"},GP=(a,r)=>{const t=Xm(YP,{});let n=new $P(a);return n.activate(),{id:"stream-io/text-composer/commands-middleware",handlers:{onChange:({state:o,next:i,complete:c,forward:u})=>{var h;if(!o.selection)return u();const m=gw({trigger:t.trigger,text:o.text.slice(0,o.selection.end),acceptTrailingSpaces:!1,isCommand:!0});if(m&&m.length===t.minChars&&n.resetStateAndActivate(),!m||m.length<t.minChars){const v=((h=o.suggestions)==null?void 0:h.trigger)===t.trigger,S={...o};return v&&delete S.suggestions,i(S)}return c({...o,suggestions:{query:m.slice(1),searchSource:n,trigger:t.trigger}})},onSuggestionItemSelect:({state:o,complete:i,forward:c})=>{var m;const{selectedSuggestion:u}=o.change??{};return!u||((m=o.suggestions)==null?void 0:m.trigger)!==t.trigger?c():(n.resetStateAndActivate(),i({...o,...hw({insertText:`/${u.name} `,selection:o.selection,text:o.text,trigger:t.trigger}),suggestions:void 0}))}}}},gx={a:"á|à|ã|â|À|Á|Ã|Â",c:"ç|Ç",e:"é|è|ê|É|È|Ê",i:"í|ì|î|Í|Ì|Î",n:"ñ|Ñ",o:"ó|ò|ô|ő|õ|Ó|Ò|Ô|Õ",u:"ú|ù|û|ü|Ú|Ù|Û|Ü"},Dh=a=>a?Object.keys(gx).reduce((r,t)=>r.replace(new RegExp(gx[t],"g"),t),a):"",hx=(a,r)=>{if(a.length===0)return r.length;if(r.length===0)return a.length;const t=[];let n;for(n=0;n<=r.length;n++)t[n]=[n];let o;for(o=0;o<=a.length;o++)t[0][o]=o;for(n=1;n<=r.length;n++)for(o=1;o<=a.length;o++)r.charAt(n-1)===a.charAt(o-1)?t[n][o]=t[n-1][o-1]:t[n][o]=Math.min(t[n-1][o-1]+1,Math.min(t[n][o-1]+1,t[n-1][o]+1));return t[r.length][a.length]},qP=class extends fw{constructor(a,r){const{mentionAllAppUsers:t,textComposerText:n,transliterate:o,...i}=r||{};super(i),this.type="mentions",this.canExecuteQuery=c=>{const u=typeof c<"u";return this.isActive&&!this.isLoading&&(u||this.hasNext)},this.transliterate=c=>c,this.getMembersAndWatchers=()=>{const c=Object.values(this.channel.state.members??{}).map(({user:f})=>f),u=Object.values(this.channel.state.watchers??{}),m=[...c,...u],g={};return m.forEach(f=>{f&&!g[f.id]&&(g[f.id]=f)}),Object.values(g)},this.searchMembersLocally=c=>{const{textComposerText:u}=this.config;return u?this.getMembersAndWatchers().filter(m=>{if(m.id===this.client.userID)return!1;if(!c)return!0;const g=this.transliterate(Dh(m.id)).toLowerCase(),f=this.transliterate(Dh(m.name)).toLowerCase(),h=this.transliterate(Dh(c)).toLowerCase(),v=3,S=u.slice(-4).includes("@");if(f){const E=hx(h,f);if(f.includes(h)||E<=v&&S)return!0}const x=hx(h,g);return g.includes(h)||x<=v&&S}).sort((m,g)=>{if(!this.memberSort)return(m.name||"").localeCompare(g.name||"");for(const[f,h]of Object.entries(this.memberSort)){const v=m[f],S=g[f];if(v!==S)return h===1?String(v||"").localeCompare(String(S||"")):String(S||"").localeCompare(String(v||""))}return 0}):[]},this.prepareQueryUsersParams=c=>({filters:{$or:[{id:{$autocomplete:c}},{name:{$autocomplete:c}}],...this.userFilters},sort:this.userSort??[{name:1},{id:1}],options:{...this.searchOptions,limit:this.pageSize,offset:this.offset}}),this.prepareQueryMembersParams=c=>{let m=[{user_id:1}];return this.memberSort?Array.isArray(this.memberSort)?m=this.memberSort[0]:Object.keys(this.memberSort).length===1&&(m=this.memberSort):m=[{user_id:1}],{filters:this.memberFilters??{name:{$autocomplete:c}},sort:m,options:{...this.searchOptions,limit:this.pageSize,offset:this.offset}}},this.queryUsers=async c=>{const{filters:u,sort:m,options:g}=this.prepareQueryUsersParams(c),{users:f}=await this.client.queryUsers(u,m,g);return f},this.queryMembers=async c=>{const{filters:u,sort:m,options:g}=this.prepareQueryMembersParams(c);return(await this.channel.queryMembers(u,m,g)).members.map(h=>h.user)},this.filterMutes=c=>{const{textComposerText:u}=this.config;if(!u)return[];const{mutedUsers:m}=this.client;return u.includes("/unmute")&&!m.length?[]:m.length?u.includes("/unmute")?c.filter(g=>m.some(f=>f.target.id===g.id)):c.filter(g=>m.every(f=>f.target.id!==g.id)):c},this.client=a.getClient(),this.channel=a,this.config={mentionAllAppUsers:t,textComposerText:n},o&&(this.transliterate=o)}get allMembersLoadedWithInitialChannelQuery(){return Object.keys(this.channel.state.members||{}).length<nT}getStateBeforeFirstQuery(a){const r=super.getStateBeforeFirstQuery(a),{items:t}=this.state.getLatestValue();return{...r,items:t}}async query(a){let r;const t=this.allMembersLoadedWithInitialChannelQuery||!a;return this.config.mentionAllAppUsers?r=await this.queryUsers(a):t?r=this.searchMembersLocally(a):r=await this.queryMembers(a),{items:r.map(n=>({...n,...HP({displayName:n.name||n.id,searchToken:this.searchQuery})}))}}filterQueryResults(a){return this.filterMutes(a)}},ZP={minChars:1,trigger:"@"},VP=a=>{const{tokenizedDisplayName:r,...t}=a;return t},QP=(a,r)=>{const t=Xm(ZP,{});let n;return n=new qP(a),n.activate(),{id:"stream-io/text-composer/mentions-middleware",handlers:{onChange:({state:o,next:i,complete:c,forward:u})=>{var h;if(!o.selection)return u();const m=gw({trigger:t.trigger,text:o.text.slice(0,o.selection.end)});if(m&&m.length===t.minChars&&n.resetStateAndActivate(),!m||m.length<t.minChars){const v=((h=o.suggestions)==null?void 0:h.trigger)===t.trigger,S={...o};return v&&delete S.suggestions,i(S)}return n.config.textComposerText=o.text,c({...o,suggestions:{query:m.slice(1),searchSource:n,trigger:t.trigger}})},onSuggestionItemSelect:({state:o,complete:i,forward:c})=>{var m;const{selectedSuggestion:u}=o.change??{};return!u||((m=o.suggestions)==null?void 0:m.trigger)!==t.trigger?c():(n.resetStateAndActivate(),i({...o,...hw({insertText:`@${u.name||u.id} `,selection:o.selection,text:o.text,trigger:t.trigger}),mentionedUsers:o.mentionedUsers.concat(VP(u)),suggestions:void 0}))}}}},JP=a=>({id:"stream-io/text-composer/pre-validation-middleware",handlers:{onChange:({state:r,next:t,forward:n})=>{const{maxLengthOnEdit:o}=a.config.text??{};return typeof o=="number"&&r.text.length>o?(r.text=r.text.slice(0,o),t({...r,text:r.text})):n()},onSuggestionItemSelect:({forward:r})=>r()}}),XP=class extends Wd{constructor({composer:a}){super(),this.use([JP(a),QP(a.channel),GP(a.channel)])}async execute({eventName:a,initialValue:r}){var i;const t=await this.executeMiddlewareChain({eventName:a,initialValue:r}),{query:n,searchSource:o}=t.state.suggestions??{};return(i=o==null?void 0:o.search(n))==null||i.catch(console.error),t}},Ey=a=>{const r=a.trim();return r===""||r===">"||r==="``````"||r==="``"||r==="**"||r==="____"||r==="__"||r==="****"},yx=({composer:a,message:r})=>{if(!r){const n=a.config.text.defaultValue??"";return{mentionedUsers:[],text:n,selection:{start:n.length,end:n.length}}}const t=r.text??"";return{mentionedUsers:(r.mentioned_users??[]).map(n=>typeof n=="string"?{id:n}:n),text:t,selection:{start:t.length,end:t.length}}},KP=class{constructor({composer:a,message:r}){this.initState=({message:t}={})=>{this.state.next(yx({composer:this.composer,message:t}))},this.upsertMentionedUser=t=>{const n=[...this.mentionedUsers],o=n.findIndex(i=>i.id===t.id);o>=0?(n.splice(o,1,t),this.state.partialNext({mentionedUsers:n})):(n.push(t),this.state.partialNext({mentionedUsers:n}))},this.getMentionedUser=t=>this.state.getLatestValue().mentionedUsers.find(n=>n.id===t),this.removeMentionedUser=t=>{const n=this.mentionedUsers.findIndex(i=>i.id===t);if(n===-1)return;const o=[...this.mentionedUsers];o.splice(n,1),this.state.partialNext({mentionedUsers:o})},this.setText=t=>{!this.enabled||t===this.text||this.state.partialNext({text:t})},this.setSelection=t=>{const n=t.start!==this.selection.start||t.end!==this.selection.end;!this.enabled||!n||this.state.partialNext({selection:t})},this.insertText=({text:t,selection:n})=>{if(!this.enabled)return;const o=n??this.selection,{maxLengthOnEdit:i}=this.composer.config.text??{},c=this.text,u=[c.slice(0,o.start),t,c.slice(o.end)].join(""),m=u.slice(0,typeof i=="number"?i:u.length),g=c.slice(0,o.start).length+t.length,f=g>=m.length?m.length:c.slice(0,g).length;this.state.partialNext({text:m,selection:{start:f,end:f}})},this.wrapSelection=({head:t="",selection:n,tail:o=""})=>{if(!this.enabled)return;const i=n??this.selection,c=this.text.slice(0,i.start),u=this.text.slice(i.start,i.end),m=this.text.slice(i.end),g={start:c.length+t.length,end:c.length+t.length+u.length};this.state.partialNext({text:[c,t,u,o,m].join(""),selection:g})},this.setSuggestions=t=>{this.state.partialNext({suggestions:t})},this.closeSuggestions=()=>{const{suggestions:t}=this.state.getLatestValue();t&&this.state.partialNext({suggestions:void 0})},this.handleChange=async({text:t,selection:n})=>{if(!this.enabled)return;const o=await this.middlewareExecutor.execute({eventName:"onChange",initialValue:{...this.state.getLatestValue(),text:t,selection:n}});o.status!=="discard"&&(this.state.next(o.state),this.config.publishTypingEvents&&t&&W5(this.channel.keystroke(this.composer.threadId??void 0),"start typing event"))},this.handleSelect=async t=>{if(!this.enabled)return;const n=await this.middlewareExecutor.execute({eventName:"onSuggestionItemSelect",initialValue:{...this.state.getLatestValue(),change:{selectedSuggestion:t}}});(n==null?void 0:n.status)!=="discard"&&this.state.next(n.state)},this.composer=a,this.state=new Yn(yx({composer:a,message:r})),this.middlewareExecutor=new XP({composer:a})}get channel(){return this.composer.channel}get config(){return this.composer.config.text}get enabled(){return this.composer.config.text.enabled}set enabled(a){a!==this.enabled&&this.composer.updateConfig({text:{enabled:a}})}get defaultValue(){return this.composer.config.text.defaultValue}set defaultValue(a){a!==this.defaultValue&&this.composer.updateConfig({text:{defaultValue:a}})}get maxLengthOnEdit(){return this.composer.config.text.maxLengthOnEdit}set maxLengthOnEdit(a){a!==this.maxLengthOnEdit&&this.composer.updateConfig({text:{maxLengthOnEdit:a}})}get maxLengthOnSend(){return this.composer.config.text.maxLengthOnSend}set maxLengthOnSend(a){a!==this.maxLengthOnSend&&this.composer.updateConfig({text:{maxLengthOnSend:a}})}get publishTypingEvents(){return this.composer.config.text.publishTypingEvents}set publishTypingEvents(a){a!==this.publishTypingEvents&&this.composer.updateConfig({text:{publishTypingEvents:a}})}get mentionedUsers(){return this.state.getLatestValue().mentionedUsers}get selection(){return this.state.getLatestValue().selection}get suggestions(){return this.state.getLatestValue().suggestions}get text(){return this.state.getLatestValue().text}get textIsEmpty(){return Ey(this.text)}setMentionedUsers(a){this.state.partialNext({mentionedUsers:a})}},C0=class yw{constructor(){this.unsubscribeFunctions=new Set}get hasSubscriptions(){return this.unsubscribeFunctions.size>0}addUnsubscribeFunction(r){this.unsubscribeFunctions.add(r)}unregisterSubscriptions(){return this.unsubscribeFunctions.forEach(r=>r()),this.unsubscribeFunctions.clear(),yw.symbol}};C0.symbol=Symbol(C0.name);var jd=C0,Mh=50,eL=[{created_at:-1}],tL=1e3,aL={active_participant_count:!0,channel:!0,channel_cid:!0,created_at:!0,created_by:!0,created_by_user_id:!0,deleted_at:!0,draft:!0,last_message_at:!0,latest_replies:!0,parent_message:!0,parent_message_id:!0,participant_count:!0,read:!0,reply_count:!0,thread_participants:!0,title:!0,updated_at:!0},bx=a=>{const r={};for(const t in a){if(aL[t])continue;const n=t;r[n]=a[n]}return r},gd=class extends jd{constructor({client:a,threadData:r}){super(),this.failedRepliesMap=new Map,this.activate=()=>{this.state.partialNext({active:!0})},this.deactivate=()=>{this.state.partialNext({active:!1})},this.reload=async()=>{if(!this.state.getLatestValue().isLoading){this.state.partialNext({isLoading:!0});try{const o=await this.client.getThread(this.id,{watch:!0});this.hydrateState(o)}finally{this.state.partialNext({isLoading:!1})}}},this.hydrateState=o=>{if(o===this)return;if(o.id!==this.id)throw new Error("Cannot hydrate thread's state using thread with different threadId");const{createdAt:i,custom:c,title:u,deletedAt:m,parentMessage:g,participants:f,read:h,replyCount:v,replies:S,updatedAt:x}=o.state.getLatestValue(),E=Array.from(this.failedRepliesMap.values());this.state.partialNext({title:u,createdAt:i,custom:c,deletedAt:m,parentMessage:g,participants:f,read:h,replyCount:v,replies:E.length?S.concat(E):S,updatedAt:x,isStateStale:!1})},this.registerSubscriptions=()=>{this.hasSubscriptions||(this.addUnsubscribeFunction(this.subscribeThreadUpdated()),this.addUnsubscribeFunction(this.subscribeMarkActiveThreadRead()),this.addUnsubscribeFunction(this.subscribeReloadActiveStaleThread()),this.addUnsubscribeFunction(this.subscribeMarkThreadStale()),this.addUnsubscribeFunction(this.subscribeNewReplies()),this.addUnsubscribeFunction(this.subscribeRepliesRead()),this.addUnsubscribeFunction(this.subscribeMessageDeleted()),this.addUnsubscribeFunction(this.subscribeMessageUpdated()))},this.subscribeThreadUpdated=()=>this.client.on("thread.updated",o=>{if(!o.thread||o.thread.parent_message_id!==this.id)return;const i=o.thread;this.state.partialNext({title:i.title,updatedAt:new Date(i.updated_at),deletedAt:i.deleted_at?new Date(i.deleted_at):null,custom:bx(i)})}).unsubscribe,this.subscribeMarkActiveThreadRead=()=>this.state.subscribeWithSelector(o=>({active:o.active,unreadMessageCount:vx(this.client.userID)(o)}),({active:o,unreadMessageCount:i})=>{!o||!i||this.throttledMarkAsRead()}),this.subscribeReloadActiveStaleThread=()=>this.state.subscribeWithSelector(o=>({active:o.active,isStateStale:o.isStateStale}),({active:o,isStateStale:i})=>{o&&i&&this.reload()}),this.subscribeMarkThreadStale=()=>this.client.on("user.watching.stop",o=>{var c,u;const{channel:i}=this.state.getLatestValue();!this.client.userID||this.client.userID!==((c=o.user)==null?void 0:c.id)||((u=o.channel)==null?void 0:u.cid)!==i.cid||this.state.partialNext({isStateStale:!0})}).unsubscribe,this.subscribeNewReplies=()=>this.client.on("message.new",o=>{var g,f,h;if(!this.client.userID||((g=o.message)==null?void 0:g.parent_id)!==this.id)return;const i=((f=o.message.user)==null?void 0:f.id)===this.client.userID,{active:c,read:u}=this.state.getLatestValue();this.upsertReplyLocally({message:o.message,timestampChanged:i}),c&&this.throttledMarkAsRead();const m={};for(const v of Object.keys(u)){const S=u[v];if(S){let x=S;v===((h=o.user)==null?void 0:h.id)?x={...x,lastReadAt:o.created_at?new Date(o.created_at):new Date,user:o.user,unreadMessageCount:0}:c&&v===this.client.userID||(x={...x,unreadMessageCount:S.unreadMessageCount+1}),m[v]=x}}this.state.partialNext({read:m})}).unsubscribe,this.subscribeRepliesRead=()=>this.client.on("message.read",o=>{if(!o.user||!o.created_at||!o.thread||o.thread.parent_message_id!==this.id)return;const i=o.user.id,c=o.created_at,u=o.user;this.state.next(m=>({...m,read:{...m.read,[i]:{lastReadAt:new Date(c),user:u,lastReadMessageId:o.last_read_message_id,unreadMessageCount:0}}}))}).unsubscribe,this.subscribeMessageDeleted=()=>this.client.on("message.deleted",o=>{o.message&&(o.message.parent_id===this.id&&(o.hard_delete?this.deleteReplyLocally({message:o.message}):this.upsertReplyLocally({message:o.message})),o.message.id===this.id&&this.updateParentMessageLocally({message:o.message}))}).unsubscribe,this.subscribeMessageUpdated=()=>{const i=["message.updated","reaction.new","reaction.deleted","reaction.updated"].map(c=>this.client.on(c,u=>{u.message&&this.updateParentMessageOrReplyLocally(u.message)}).unsubscribe);return()=>i.forEach(c=>c())},this.unregisterSubscriptions=()=>{const o=super.unregisterSubscriptions();return this.state.partialNext({isStateStale:!0}),o},this.deleteReplyLocally=({message:o})=>{var m;const{replies:i}=this.state.getLatestValue(),c=Y5({needle:mr(o),sortedArray:i,sortDirection:"ascending",selectValueToCompare:g=>g.created_at.getTime(),selectKey:g=>g.id});if(((m=i[c])==null?void 0:m.id)!==o.id)return;const u=[...i];u.splice(c,1),this.state.partialNext({replies:u})},this.upsertReplyLocally=({message:o,timestampChanged:i=!1})=>{if(o.parent_id!==this.id)throw new Error("Reply does not belong to this thread");const c=mr(o);o.status==="failed"?this.failedRepliesMap.set(c.id,c):this.failedRepliesMap.has(o.id)&&this.failedRepliesMap.delete(o.id),this.state.next(u=>({...u,replies:G5(u.replies,c,i)}))},this.updateParentMessageLocally=({message:o})=>{if(o.id!==this.id)throw new Error("Message does not belong to this thread");this.state.next(i=>{const c=mr(o);return{...i,deletedAt:c.deleted_at,parentMessage:c,replyCount:o.reply_count??i.replyCount}})},this.updateParentMessageOrReplyLocally=o=>{o.parent_id===this.id&&this.upsertReplyLocally({message:o}),!o.parent_id&&o.id===this.id&&this.updateParentMessageLocally({message:o})},this.markAsRead=async({force:o=!1}={})=>this.ownUnreadCount===0&&!o?null:await this.channel.markRead({thread_id:this.id}),this.throttledMarkAsRead=q5(()=>this.markAsRead(),tL,{trailing:!0}),this.queryReplies=({limit:o=Mh,sort:i=eL,...c}={})=>this.channel.getReplies(this.id,{limit:o,...c},i),this.loadNextPage=({limit:o=Mh}={})=>this.loadPage(o),this.loadPrevPage=({limit:o=Mh}={})=>this.loadPage(-o),this.loadPage=async o=>{var h;const{pagination:i}=this.state.getLatestValue(),[c,u,m]=o>0?["isLoadingNext","nextCursor","push"]:["isLoadingPrev","prevCursor","unshift"];if(i[c]||i[u]===null)return;const g={[o>0?"id_gt":"id_lt"]:i[u]},f=Math.abs(o);this.state.partialNext({pagination:{...i,[c]:!0}});try{const v=await this.queryReplies({...g,limit:f}),S=v.messages.map(mr),x=((h=S.at(o>0?-1:0))==null?void 0:h.id)??null;this.state.next(E=>{let N=E.replies;return S.length>0&&(N=[...E.replies],N[m](...S)),{...E,replies:N,pagination:{...E.pagination,[u]:v.messages.length<f?null:x,[c]:!1}}})}catch(v){this.client.logger("error",v.message),this.state.next(S=>({...S,pagination:{...S.pagination,[c]:!1}}))}};const t=a.channel(r.channel.type,r.channel.id,{name:r.channel.name});t._hydrateMembers({members:r.channel.members??[],overrideCurrentState:!1});const n=a.userID?[{user:{id:a.userID},unread_messages:0,last_read:new Date().toISOString()}]:[];this.state=new Yn({active:!1,isLoading:!1,isStateStale:!1,channel:t,createdAt:new Date(r.created_at),deletedAt:r.deleted_at?new Date(r.deleted_at):null,pagination:rL(r),parentMessage:mr(r.parent_message),participants:r.thread_participants,read:nL(!r.read||r.read.length===0?n:r.read),replies:r.latest_replies.map(mr),replyCount:r.reply_count??0,updatedAt:r.updated_at?new Date(r.updated_at):null,title:r.title,custom:bx(r)}),this.id=r.parent_message_id,this.client=a,this.messageComposer=new _p({client:a,composition:r.draft,compositionContext:this})}get channel(){return this.state.getLatestValue().channel}get hasStaleState(){return this.state.getLatestValue().isStateStale}get ownUnreadCount(){return vx(this.client.userID)(this.state.getLatestValue())}},nL=a=>a.reduce((r,t)=>(r[t.user.id]={user:t.user,lastReadMessageId:t.last_read_message_id,unreadMessageCount:t.unread_messages??0,lastReadAt:new Date(t.last_read)},r),{}),rL=a=>{var t;return{nextCursor:null,prevCursor:a.latest_replies.length===a.reply_count?null:((t=a.latest_replies.at(0))==null?void 0:t.id)??null,isLoadingNext:!1,isLoadingPrev:!1}},vx=a=>r=>{var t;return a&&((t=r.read[a])==null?void 0:t.unreadMessageCount)||0},hd=a=>!!(a!=null&&a.message),oL=a=>{let r=null,t=new Date().getTime();return hd(a)?t=r=new Date(a.created_at).getTime():a&&J5(a)&&(t=new Date(a.updated_at).getTime()),{lastChange:{draftUpdate:r,stateUpdate:t}}},xx=a=>{if(!a)return{id:_p.generateId(),quotedMessage:null,pollId:null,draftId:null};const r=a.quoted_message;let t,n=null,o=_p.generateId();return hd(a)?(t=a.message,n=a.message.id):(t=a,o=a.id),{draftId:n,id:o,quotedMessage:r?mr(r):null,pollId:t.poll_id??null}},sL=()=>{},bw=class _0 extends jd{constructor({composition:r,config:t,compositionContext:n,client:o}){if(super(),this.initState=({composition:c}={})=>{this.editingAuditState.partialNext(this.initEditingAuditState(c));const u=typeof c>"u"?c:hd(c)?c.message:mr(c);this.attachmentManager.initState({message:u}),this.linkPreviewsManager.initState({message:u}),this.textComposer.initState({message:u}),this.pollComposer.initState(),this.customDataManager.initState({message:u}),this.state.next(xx(c)),c&&!hd(c)&&u&&J5(u)&&(this.editedMessage=u)},this.initEditingAuditState=c=>oL(c),this.registerSubscriptions=()=>this.hasSubscriptions?sL:(this.addUnsubscribeFunction(this.subscribeMessageComposerSetupStateChange()),this.addUnsubscribeFunction(this.subscribeMessageUpdated()),this.addUnsubscribeFunction(this.subscribeMessageDeleted()),this.addUnsubscribeFunction(this.subscribeTextComposerStateChanged()),this.addUnsubscribeFunction(this.subscribeAttachmentManagerStateChanged()),this.addUnsubscribeFunction(this.subscribeLinkPreviewsManagerStateChanged()),this.addUnsubscribeFunction(this.subscribePollComposerStateChanged()),this.addUnsubscribeFunction(this.subscribeCustomDataManagerStateChanged()),this.addUnsubscribeFunction(this.subscribeMessageComposerStateChanged()),this.addUnsubscribeFunction(this.subscribeMessageComposerConfigStateChanged()),this.unregisterSubscriptions.bind(this)),this.subscribeMessageUpdated=()=>{const u=["message.updated","reaction.new","reaction.deleted","reaction.updated"].map(m=>this.client.on(m,g=>{var f;g.message&&(g.message.id===this.id&&this.initState({composition:g.message}),(f=this.quotedMessage)!=null&&f.id&&g.message.id===this.quotedMessage.id&&this.setQuotedMessage(mr(g.message)))}).unsubscribe);return()=>u.forEach(m=>m())},this.subscribeMessageComposerSetupStateChange=()=>{let c=null;const u=this.client._messageComposerSetupState.subscribeWithSelector(({setupFunction:m})=>({setup:m}),({setup:m})=>{c==null||c(),c=(m==null?void 0:m({composer:this}))??null});return()=>{c==null||c(),u()}},this.subscribeMessageDeleted=()=>this.client.on("message.deleted",c=>{c.message&&(c.message.id===this.id?this.clear():this.quotedMessage&&c.message.id===this.quotedMessage.id&&this.setQuotedMessage(null))}).unsubscribe,this.subscribeDraftUpdated=()=>this.client.on("draft.updated",c=>{const u=c.draft;!u||!!u.parent_id!=!!this.threadId||u.channel_cid!==this.channel.cid||this.initState({composition:u})}).unsubscribe,this.subscribeDraftDeleted=()=>this.client.on("draft.deleted",c=>{const u=c.draft;!u||!!u.parent_id!=!!this.threadId||u.channel_cid!==this.channel.cid||(this.logDraftUpdateTimestamp(),!this.compositionIsEmpty&&this.clear())}).unsubscribe,this.subscribeTextComposerStateChanged=()=>this.textComposer.state.subscribeWithSelector(({text:c})=>[c],([c],u)=>{if(!(typeof u>"u")){if(this.logStateUpdateTimestamp(),this.compositionIsEmpty){this.deleteDraft();return}this.linkPreviewsManager.enabled&&(c?this.linkPreviewsManager.findAndEnrichUrls(c):this.linkPreviewsManager.clearPreviews())}}),this.subscribeAttachmentManagerStateChanged=()=>this.attachmentManager.state.subscribe((c,u)=>{if(!(typeof u>"u")&&(this.logStateUpdateTimestamp(),this.compositionIsEmpty)){this.deleteDraft();return}}),this.subscribeLinkPreviewsManagerStateChanged=()=>this.linkPreviewsManager.state.subscribe((c,u)=>{if(!(typeof u>"u")&&(this.logStateUpdateTimestamp(),this.compositionIsEmpty)){this.deleteDraft();return}}),this.subscribePollComposerStateChanged=()=>this.pollComposer.state.subscribe((c,u)=>{if(!(typeof u>"u")&&(this.logStateUpdateTimestamp(),this.compositionIsEmpty)){this.deleteDraft();return}}),this.subscribeCustomDataManagerStateChanged=()=>this.customDataManager.state.subscribe((c,u)=>{typeof u<"u"&&!this.customDataManager.isMessageDataEqual(c,u)&&this.logStateUpdateTimestamp()}),this.subscribeMessageComposerStateChanged=()=>this.state.subscribe((c,u)=>{typeof u>"u"||(this.logStateUpdateTimestamp(),this.compositionIsEmpty&&this.deleteDraft())}),this.subscribeMessageComposerConfigStateChanged=()=>{let c;const u=this.configState.subscribeWithSelector(m=>({textDefaultValue:m.text.defaultValue,draftsEnabled:m.drafts.enabled}),({textDefaultValue:m,draftsEnabled:g})=>{this.textComposer.text===""&&m&&this.textComposer.insertText({text:m,selection:{start:0,end:0}}),g&&!c?c=[this.subscribeDraftUpdated(),this.subscribeDraftDeleted()]:!g&&c&&(c.forEach(f=>f()),c=null)});return()=>{c==null||c.forEach(m=>m()),u()}},this.setQuotedMessage=c=>{this.state.partialNext({quotedMessage:c})},this.clear=()=>{this.initState()},this.restore=()=>{const{editedMessage:c}=this;if(c){this.initState({composition:c});return}this.clear()},this.compose=async()=>{var g;const c=((g=this.editedMessage)==null?void 0:g.created_at)??new Date,m=await this.compositionMiddlewareExecutor.execute({eventName:"compose",initialValue:{message:{id:this.id,parent_id:this.threadId??void 0,type:"regular"},localMessage:{attachments:[],created_at:c,deleted_at:null,error:void 0,id:this.id,mentioned_users:[],parent_id:this.threadId??void 0,pinned_at:null,reaction_groups:null,status:this.editedMessage?this.editedMessage.status:"sending",text:"",type:"regular",updated_at:c},sendOptions:{}}});if(m.status!=="discard")return m.state},this.composeDraft=async()=>{const{state:c,status:u}=await this.draftCompositionMiddlewareExecutor.execute({eventName:"compose",initialValue:{draft:{id:this.id,parent_id:this.threadId??void 0,text:""}}});if(u!=="discard")return c},this.createDraft=async()=>{if(this.editedMessage||!this.config.drafts.enabled)return;const c=await this.composeDraft();if(!c)return;const{draft:u}=c;this.state.partialNext({draftId:u.id}),this.logDraftUpdateTimestamp(),await this.channel.createDraft(u)},this.deleteDraft=async()=>{this.editedMessage||!this.config.drafts.enabled||!this.draftId||(this.state.partialNext({draftId:null}),this.logDraftUpdateTimestamp(),await this.channel.deleteDraft({parent_id:this.threadId??void 0}))},this.createPoll=async()=>{const c=await this.pollComposer.compose();if(!(!c||!c.data.id))try{const{poll:u}=await this.client.createPoll(c.data);this.state.partialNext({pollId:u.id}),this.pollComposer.initState()}catch(u){throw this.client.notifications.add({message:"Failed to create the poll",origin:{emitter:"MessageComposer",context:{composer:this}}}),u}},this.compositionContext=n,this.configState=new Yn(Xm(lP,t??{})),n instanceof _i)this.channel=n;else if(n instanceof gd)this.channel=n.channel;else if(n.cid){const[c,u]=n.cid.split(":");this.channel=o.channel(c,u)}else throw new Error("MessageComposer requires composition context pointing to channel (channel or context.cid)");let i;hd(r)?i=r.message:r&&(i=mr(r),this.editedMessage=i),this.attachmentManager=new jT({composer:this,message:i}),this.linkPreviewsManager=new vy({composer:this,message:i}),this.textComposer=new KP({composer:this,message:i}),this.pollComposer=new SP({composer:this}),this.customDataManager=new iP({composer:this,message:i}),this.editingAuditState=new Yn(this.initEditingAuditState(r)),this.state=new Yn(xx(r)),this.compositionMiddlewareExecutor=new FP({composer:this}),this.draftCompositionMiddlewareExecutor=new UP({composer:this})}static evaluateContextType(r){return r instanceof _i?"channel":r instanceof gd?"thread":typeof r.legacyThreadId=="string"?"legacy_thread":"message"}static constructTag(r){return`${this.evaluateContextType(r)}_${r.id}`}get config(){return this.configState.getLatestValue()}updateConfig(r){this.configState.partialNext(Xm(this.config,r))}get contextType(){return _0.evaluateContextType(this.compositionContext)}get tag(){return _0.constructTag(this.compositionContext)}get threadId(){return this.compositionContext instanceof _i?null:this.compositionContext instanceof gd?this.compositionContext.id:typeof this.compositionContext.legacyThreadId=="string"?this.compositionContext.legacyThreadId:typeof this.compositionContext.parent_id=="string"?this.compositionContext.parent_id:null}get client(){return this.channel.getClient()}get id(){return this.state.getLatestValue().id}get draftId(){return this.state.getLatestValue().draftId}get lastChange(){return this.editingAuditState.getLatestValue().lastChange}get quotedMessage(){return this.state.getLatestValue().quotedMessage}get pollId(){return this.state.getLatestValue().pollId}get hasSendableData(){return!!(!this.attachmentManager.uploadsInProgressCount&&(!this.textComposer.textIsEmpty||this.attachmentManager.successfulUploadsCount>0)||this.pollId)}get compositionIsEmpty(){return!this.quotedMessage&&this.textComposer.textIsEmpty&&!this.attachmentManager.attachments.length&&!this.pollId}get lastChangeOriginIsLocal(){var i;const t=this.lastChange.draftUpdate===null&&!this.editedMessage,n=!!((i=this.editedMessage)!=null&&i.updated_at)&&new Date(this.editedMessage.updated_at).getTime()<this.lastChange.stateUpdate,o=!!this.lastChange.draftUpdate&&this.lastChange.draftUpdate<this.lastChange.stateUpdate;return n||o||t}logStateUpdateTimestamp(){this.editingAuditState.partialNext({lastChange:{...this.lastChange,stateUpdate:new Date().getTime()}})}logDraftUpdateTimestamp(){if(!this.config.drafts.enabled)return;const r=new Date().getTime();this.editingAuditState.partialNext({lastChange:{draftUpdate:r,stateUpdate:r}})}};bw.generateId=Ur;var _p=bw,_i=class{constructor(a,r,t,n){this.create=async c=>{const u={...c,watch:!1,state:!1,presence:!1};return await this.query(u,"latest")},this._callChannelListeners=c=>{const u=this,m=[];u.listeners.all&&m.push(...u.listeners.all),u.listeners[c.type]&&m.push(...u.listeners[c.type]);for(const g of m)typeof g!="string"&&g(c)},this._channelURL=()=>{if(!this.id)throw new Error("channel id is not defined");return`${this.getClient().baseURL}/channels/${encodeURIComponent(this.type)}/${encodeURIComponent(this.id)}`};const o=/^[\w_-]+$/,i=/^[\w!_-]+$/;if(!o.test(r))throw new Error(`Invalid chat type ${r}, letters, numbers and "_-" are allowed`);if(typeof t=="string"&&!i.test(t))throw new Error(`Invalid chat id ${t}, letters, numbers and "!-_" are allowed`);this._client=a,this.type=r,this.id=t,this.data=n,this._data={...n},this.cid=`${r}:${t}`,this.listeners={},this.state=new AT(this),this.initialized=!1,this.offlineMode=!1,this.lastTypingEvent=null,this.isTyping=!1,this.disconnected=!1,this.messageComposer=new _p({client:this._client,compositionContext:this})}getClient(){if(this.disconnected===!0)throw Error("You can't use a channel after client.disconnect() was called");return this._client}getConfig(){return this.getClient().configs[this.cid]}async _sendMessage(a,r){return await this.getClient().post(this._channelURL()+"/message",{message:a,...r})}async sendMessage(a,r){try{const t=this.getClient().offlineDb;if(t){const n=a.id;if(n)return await t.queueTask({task:{channelId:this.id,channelType:this.type,messageId:n,payload:[a,r],type:"send-message"}})}}catch(t){this._client.logger("error","offlineDb:send-message",{tags:["channel","offlineDb"],error:t})}return await this._sendMessage(a,r)}sendFile(a,r,t,n){return this.getClient().sendFile(`${this._channelURL()}/file`,a,r,t,n)}sendImage(a,r,t,n){return this.getClient().sendFile(`${this._channelURL()}/image`,a,r,t,n)}deleteFile(a){return this.getClient().delete(`${this._channelURL()}/file`,{url:a})}deleteImage(a){return this.getClient().delete(`${this._channelURL()}/image`,{url:a})}async sendEvent(a){return this._checkInitialized(),await this.getClient().post(this._channelURL()+"/event",{event:a})}async search(a,r={}){if(r.offset&&r.next)throw Error("Cannot specify offset with next");const t={filter_conditions:{cid:this.cid},...r,sort:r.sort?zn(r.sort):void 0};if(typeof a=="string")t.query=a;else if(typeof a=="object")t.message_filter_conditions=a;else throw Error(`Invalid type ${typeof a} for query parameter`);return await this.getClient().wsPromise,await this.getClient().get(this.getClient().baseURL+"/search",{payload:t})}async queryMembers(a,r=[],t={}){var c;let n;const o=this.type;let i;return this.id?n=this.id:(c=this.data)!=null&&c.members&&Array.isArray(this.data.members)&&(i=this.data.members),await this.getClient().get(this.getClient().baseURL+"/members",{payload:{type:o,id:n,members:i,sort:zn(r),filter_conditions:a,...t}})}async updateMemberPartial(a,r){const t=new URL(`${this._channelURL()}/member`);return r!=null&&r.userId&&t.searchParams.append("user_id",r.userId),await this.getClient().patch(t.toString(),a)}async partialUpdateMember(a,r){if(!a)throw Error("Please specify the user id");return await this.getClient().patch(this._channelURL()+`/member/${encodeURIComponent(a)}`,r)}async sendReaction(a,r,t){if(!a)throw Error("Message id is missing");if(!r||Object.keys(r).length===0)throw Error("Reaction object is missing");try{const n=this.getClient().offlineDb;if(n)return await n.queueTask({task:{channelId:this.id,channelType:this.type,messageId:a,payload:[a,r,t],type:"send-reaction"}})}catch(n){this._client.logger("error","offlineDb:send-reaction",{tags:["channel","offlineDb"],error:n})}return this._sendReaction(a,r,t)}async _sendReaction(a,r,t){if(!a)throw Error("Message id is missing");if(!r||Object.keys(r).length===0)throw Error("Reaction object is missing");return await this.getClient().post(this.getClient().baseURL+`/messages/${encodeURIComponent(a)}/reaction`,{reaction:r,...t})}async deleteReaction(a,r,t){if(this._checkInitialized(),!r||!a)throw Error("Deleting a reaction requires specifying both the message and reaction type");try{const n=this.getClient().offlineDb;if(n){const o=this.state.messages.find(({id:c})=>c===a),i={created_at:"",updated_at:"",message_id:a,type:r,user_id:this.getClient().userID??t};return o&&await n.deleteReaction({message:o,reaction:i}),await n.queueTask({task:{channelId:this.id,channelType:this.type,messageId:a,payload:[a,r],type:"delete-reaction"}})}}catch(n){this._client.logger("error","offlineDb:delete-reaction",{tags:["channel","offlineDb"],error:n})}return await this._deleteReaction(a,r,t)}async _deleteReaction(a,r,t){if(this._checkInitialized(),!r||!a)throw Error("Deleting a reaction requires specifying both the message and reaction type");const n=this.getClient().baseURL+`/messages/${encodeURIComponent(a)}/reaction/${encodeURIComponent(r)}`;return t?await this.getClient().delete(n,{user_id:t}):await this.getClient().delete(n,{})}async update(a={},r,t){return["config","cid","created_by","id","member_count","type","created_at","updated_at","last_message_at","own_capabilities"].forEach(o=>{delete a[o]}),await this._update({message:r,data:a,...t})}async updatePartial(a){var n,o;const r=await this.getClient().patch(this._channelURL(),a),t=[...r.channel.own_capabilities||[]].sort().join()!==[...Array.isArray((n=this.data)==null?void 0:n.own_capabilities)?(o=this.data)==null?void 0:o.own_capabilities:[]].sort().join();return this.data=r.channel,t&&this.getClient().dispatchEvent({type:"capabilities.changed",cid:this.cid,own_capabilities:r.channel.own_capabilities}),r}async enableSlowMode(a){const r=await this.getClient().post(this._channelURL(),{cooldown:a});return this.data=r.channel,r}async disableSlowMode(){const a=await this.getClient().post(this._channelURL(),{cooldown:0});return this.data=a.channel,a}async delete(a={}){return await this.getClient().delete(this._channelURL(),{...a})}async truncate(a={}){return await this.getClient().post(this._channelURL()+"/truncate",a)}async acceptInvite(a={}){return await this._update({accept_invite:!0,...a})}async rejectInvite(a={}){return await this._update({reject_invite:!0,...a})}async addMembers(a,r,t={}){return await this._update({add_members:a,message:r,...t})}async addModerators(a,r,t={}){return await this._update({add_moderators:a,message:r,...t})}async assignRoles(a,r,t={}){return await this._update({assign_roles:a,message:r,...t})}async inviteMembers(a,r,t={}){return await this._update({invites:a,message:r,...t})}async removeMembers(a,r,t={}){return await this._update({remove_members:a,message:r,...t})}async demoteModerators(a,r,t={}){return await this._update({demote_moderators:a,message:r,...t})}async _update(a){const r=await this.getClient().post(this._channelURL(),a);return this.data=r.channel,r}async mute(a={}){return await this.getClient().post(this.getClient().baseURL+"/moderation/mute/channel",{channel_cid:this.cid,...a})}async unmute(a={}){return await this.getClient().post(this.getClient().baseURL+"/moderation/unmute/channel",{channel_cid:this.cid,...a})}async archive(a={}){const r=this.getClient(),t=a.user_id||r.userID;if(!t)throw Error("A user_id is required for archiving a channel");return(await this.partialUpdateMember(t,{set:{archived:!0}})).channel_member}async unarchive(a={}){const r=this.getClient(),t=a.user_id||r.userID;if(!t)throw Error("A user_id is required for unarchiving a channel");return(await this.partialUpdateMember(t,{set:{archived:!1}})).channel_member}async pin(a={}){const r=this.getClient(),t=a.user_id||r.userID;if(!t)throw new Error("A user_id is required for pinning a channel");return(await this.partialUpdateMember(t,{set:{pinned:!0}})).channel_member}async unpin(a={}){const r=this.getClient(),t=a.user_id||r.userID;if(!t)throw new Error("A user_id is required for unpinning a channel");return(await this.partialUpdateMember(t,{set:{pinned:!1}})).channel_member}muteStatus(){return this._checkInitialized(),this.getClient()._muteStatus(this.cid)}sendAction(a,r){if(this._checkInitialized(),!a)throw Error("Message id is missing");return this.getClient().post(this.getClient().baseURL+`/messages/${encodeURIComponent(a)}/action`,{message_id:a,form_data:r,id:this.id,type:this.type})}async keystroke(a,r){if(!this._isTypingIndicatorsEnabled())return;const t=new Date,n=this.lastTypingEvent&&t.getTime()-this.lastTypingEvent.getTime();this.lastKeyStroke=t,this.isTyping=!0,(n===null||n>2e3)&&(this.lastTypingEvent=new Date,await this.sendEvent({type:"typing.start",parent_id:a,...r||{}}))}async updateAIState(a,r,t={}){await this.sendEvent({...t,type:"ai_indicator.update",message_id:a,ai_state:r})}async clearAIIndicator(){await this.sendEvent({type:"ai_indicator.clear"})}async stopAIResponse(){await this.sendEvent({type:"ai_indicator.stop"})}async stopTyping(a,r){this._isTypingIndicatorsEnabled()&&(this.lastTypingEvent=null,this.isTyping=!1,await this.sendEvent({type:"typing.stop",parent_id:a,...r||{}}))}_isTypingIndicatorsEnabled(){var a,r,t,n,o;return!((a=this.getConfig())!=null&&a.typing_events)||!((r=this.getClient().wsConnection)!=null&&r.isHealthy)?!1:((o=(n=(t=this.getClient().user)==null?void 0:t.privacy_settings)==null?void 0:n.typing_indicators)==null?void 0:o.enabled)??!0}lastMessage(){let a=this.state.latestMessages.length-5;a<0&&(a=0);const r=this.state.latestMessages.length+1,t=this.state.latestMessages.slice(a,r);return t.sort((n,o)=>o.created_at.getTime()-n.created_at.getTime()),t[0]}async markRead(a={}){var r;return this._checkInitialized(),!((r=this.getConfig())!=null&&r.read_events)&&!this.getClient()._isUsingServerAuth()?Promise.resolve(null):await this.getClient().post(this._channelURL()+"/read",{...a})}async markUnread(a){var r;return this._checkInitialized(),!((r=this.getConfig())!=null&&r.read_events)&&!this.getClient()._isUsingServerAuth()?Promise.resolve(null):await this.getClient().post(this._channelURL()+"/unread",{...a})}clean(){this.lastKeyStroke&&new Date().getTime()-this.lastKeyStroke.getTime()>1e3&&this.isTyping&&W5(this.stopTyping(),"stop typing event"),this.state.clean()}async watch(a){const r={state:!0,watch:!0,presence:!1};await this.getClient().wsPromise,this.getClient()._hasConnectionID()||(r.watch=!1);const t={...r,...a},n=await this.query(t,"latest");return this.initialized=!0,this.data=n.channel,this._client.logger("info",`channel:watch() - started watching channel ${this.cid}`,{tags:["channel"],channel:this}),n}async stopWatching(){const a=await this.getClient().post(this._channelURL()+"/stop-watching",{});return this._client.logger("info",`channel:watch() - stopped watching channel ${this.cid}`,{tags:["channel"],channel:this}),a}async getReplies(a,r,t){const n=t?zn(t):void 0,o=await this.getClient().get(this.getClient().baseURL+`/messages/${encodeURIComponent(a)}/replies`,{sort:n,...r});return o.messages&&this.state.addMessagesSorted(o.messages),o}async getPinnedMessages(a,r=[]){return await this.getClient().get(this._channelURL()+"/pinned_messages",{payload:{...a,sort:zn(r)}})}getReactions(a,r){return this.getClient().get(this.getClient().baseURL+`/messages/${encodeURIComponent(a)}/reactions`,{...r})}getMessagesById(a){return this.getClient().get(this._channelURL()+"/messages",{ids:a.join(",")})}lastRead(){const{userID:a}=this.getClient();if(a)return this.state.read[a]?this.state.read[a].last_read:null}_countMessageAsUnread(a){var r,t,n,o;return!(a.shadowed||a.silent||a.parent_id&&!a.show_in_channel||((r=a.user)==null?void 0:r.id)===this.getClient().userID||(t=a.user)!=null&&t.id&&this.getClient().userMuteStatus(a.user.id)||Array.isArray((n=this.data)==null?void 0:n.own_capabilities)&&!((o=this.data)!=null&&o.own_capabilities.includes("read-events"))||this.muteStatus().muted)}countUnread(a){if(!a)return this.state.unreadCount;let r=0;for(let t=0;t<this.state.latestMessages.length;t+=1){const n=this.state.latestMessages[t];n.created_at>a&&this._countMessageAsUnread(n)&&r++}return r}countUnreadMentions(){var n;const a=this.lastRead(),r=this.getClient().userID;let t=0;for(let o=0;o<this.state.latestMessages.length;o+=1){const i=this.state.latestMessages[o];this._countMessageAsUnread(i)&&(!a||i.created_at>a)&&((n=i.mentioned_users)!=null&&n.some(c=>c.id===r))&&t++}return t}async query(a={},r="current"){var u,m,g,f,h,v,S;await this.getClient().wsPromise;const t=((u=a.created_by)==null?void 0:u.id)??a.created_by_id??((g=(m=this._data)==null?void 0:m.created_by)==null?void 0:g.id)??((f=this._data)==null?void 0:f.created_by_id);this.getClient()._isUsingServerAuth()&&typeof t!="string"&&this.getClient().logger("warn","Either `created_by` (with `id` property) or `created_by_id` are missing from both `Channel._data` and `options` parameter");let n=`${this.getClient().baseURL}/channels/${encodeURIComponent(this.type)}`;this.id&&(n+=`/${encodeURIComponent(this.id)}`);const o=await this.getClient().post(n+"/query",{data:this._data,state:!0,...a});if(!this.id){this.id=o.channel.id,this.cid=o.channel.cid;const x=cy(this.type,o.members.map(E=>{var N;return E.user_id||((N=E.user)==null?void 0:N.id)||""}));x&&x in this.getClient().activeChannels&&delete this.getClient().activeChannels[x],!(this.cid in this.getClient().activeChannels)&&this.getClient()._cacheEnabled()&&(this.getClient().activeChannels[this.cid]=this)}this.getClient()._addChannelConfig(o.channel);const{messageSet:i}=this._initializeState(o,r);i.pagination={...i.pagination,...Z5({parentSet:i,messagePaginationOptions:a==null?void 0:a.messages,requestedPageSize:((h=a==null?void 0:a.messages)==null?void 0:h.limit)??eT,returnedPage:o.messages,logger:this.getClient().logger})},this.getClient().polls.hydratePollCache(o.messages,!0),o.draft&&this.messageComposer.initState({composition:o.draft});const c=[...o.channel.own_capabilities||[]].sort().join()!==[...this.data&&Array.isArray((v=this.data)==null?void 0:v.own_capabilities)?this.data.own_capabilities:[]].sort().join();return this.data=o.channel,this.offlineMode=!1,c&&this.getClient().dispatchEvent({type:"capabilities.changed",cid:this.cid,own_capabilities:o.channel.own_capabilities}),this.getClient().dispatchEvent({type:"channels.queried",queriedChannels:{channels:[o],isLatestMessageSet:i.isLatest}}),(S=this.getClient().offlineDb)==null||S.executeQuerySafely(x=>{var E;return(E=x.upsertChannels)==null?void 0:E.call(x,{channels:[o],isLatestMessagesSet:i.isLatest})},{method:"upsertChannels"}),o}async banUser(a,r){return this._checkInitialized(),await this.getClient().banUser(a,{...r,type:this.type,id:this.id})}async hide(a=null,r=!1){return this._checkInitialized(),await this.getClient().post(`${this._channelURL()}/hide`,{user_id:a,clear_history:r})}async show(a=null){return this._checkInitialized(),await this.getClient().post(`${this._channelURL()}/show`,{user_id:a})}async unbanUser(a){return this._checkInitialized(),await this.getClient().unbanUser(a,{type:this.type,id:this.id})}async shadowBan(a,r){return this._checkInitialized(),await this.getClient().shadowBan(a,{...r,type:this.type,id:this.id})}async removeShadowBan(a){return this._checkInitialized(),await this.getClient().removeShadowBan(a,{type:this.type,id:this.id})}async vote(a,r,t){return await this.getClient().castPollVote(a,r,t)}async removeVote(a,r,t){return await this.getClient().removePollVote(a,r,t)}async createDraft(a){return await this.getClient().post(this._channelURL()+"/draft",{message:a})}async deleteDraft({parent_id:a}={}){return await this.getClient().delete(this._channelURL()+"/draft",{parent_id:a})}async getDraft({parent_id:a}={}){return await this.getClient().get(this._channelURL()+"/draft",{parent_id:a})}on(a,r){const t=r?a:"all",n=r||a;return t in this.listeners||(this.listeners[t]=[]),this._client.logger("info",`Attaching listener for ${t} event on channel ${this.cid}`,{tags:["event","channel"],channel:this}),this.listeners[t].push(n),{unsubscribe:()=>{this._client.logger("info",`Removing listener for ${t} event from channel ${this.cid}`,{tags:["event","channel"],channel:this}),this.listeners[t]=this.listeners[t].filter(o=>o!==n)}}}off(a,r){const t=r?a:"all",n=r||a;t in this.listeners||(this.listeners[t]=[]),this._client.logger("info",`Removing listener for ${t} event from channel ${this.cid}`,{tags:["event","channel"],channel:this}),this.listeners[t]=this.listeners[t].filter(o=>o!==n)}_handleChannelEvent(a){var n,o,i,c,u,m,g,f,h,v,S,x,E,N,C,I,A,_,k,B,z,M,O,U,Z,H,V,F;const r=this;this._client.logger("info",`channel:_handleChannelEvent - Received event of type { ${a.type} } on ${this.cid}`,{tags:["event","channel"],channel:this});const t=r.state;switch(a.type){case"typing.start":(n=a.user)!=null&&n.id&&(t.typing[a.user.id]=a);break;case"typing.stop":(o=a.user)!=null&&o.id&&delete t.typing[a.user.id];break;case"message.read":(i=a.user)!=null&&i.id&&a.created_at&&(t.read[a.user.id]={last_read:new Date(a.created_at),last_read_message_id:a.last_read_message_id,user:a.user,unread_messages:0},((c=a.user)==null?void 0:c.id)===((u=this.getClient().user)==null?void 0:u.id)&&(t.unreadCount=0));break;case"user.watching.start":case"user.updated":(m=a.user)!=null&&m.id&&(t.watchers[a.user.id]=a.user);break;case"user.watching.stop":(g=a.user)!=null&&g.id&&delete t.watchers[a.user.id];break;case"message.deleted":a.message&&(this._extendEventWithOwnReactions(a),a.hard_delete?t.removeMessage(a.message):t.addMessageSorted(a.message,!1,!1),t.removeQuotedMessageReferences(a.message),a.message.pinned&&t.removePinnedMessage(a.message));break;case"message.new":if(a.message){const R=((f=a.user)==null?void 0:f.id)===((h=this.getClient().user)==null?void 0:h.id),D=a.message.parent_id&&!a.message.show_in_channel;if((this.state.isUpToDate||D)&&t.addMessageSorted(a.message,R),a.message.pinned&&t.addPinnedMessage(a.message),R||D)break;if((v=a.user)!=null&&v.id)for(const X in t.read)X===a.user.id?t.read[a.user.id]={last_read:new Date(a.created_at),user:a.user,unread_messages:0}:t.read[X].unread_messages+=1;this._countMessageAsUnread(a.message)&&(t.unreadCount=t.unreadCount+1)}break;case"message.updated":case"message.undeleted":a.message&&(this._extendEventWithOwnReactions(a),t.addMessageSorted(a.message,!1,!1),t._updateQuotedMessageReferences({message:a.message}),a.message.pinned?t.addPinnedMessage(a.message):t.removePinnedMessage(a.message));break;case"channel.truncated":if((S=a.channel)!=null&&S.truncated_at){const R=+new Date(a.channel.truncated_at);t.messageSets.forEach((D,j)=>{D.messages.forEach(({created_at:X,id:W})=>{R>+X&&t.removeMessage({id:W,messageSetIndex:j})})}),t.pinnedMessages.forEach(({id:D,created_at:j})=>{R>+j&&t.removePinnedMessage({id:D})}),t.unreadCount=this.countUnread(new Date(a.channel.truncated_at))}else t.clearMessages(),t.unreadCount=0;a.message&&(t.addMessageSorted(a.message),a.message.pinned&&t.addPinnedMessage(a.message));break;case"member.added":case"member.updated":{const R={...a.member};R.pinned_at===null&&delete R.pinned_at,R.archived_at===null&&delete R.archived_at,R!=null&&R.user&&(t.members={...t.members,[R.user.id]:R},(x=r.data)!=null&&x.member_count&&a.type==="member.added"&&(r.data.member_count+=1));const D=this.getClient().userID;typeof D=="string"&&typeof((E=R==null?void 0:R.user)==null?void 0:E.id)=="string"&&R.user.id===D&&(t.membership=R);break}case"member.removed":if((N=a.user)!=null&&N.id){const R={...t.members};delete R[a.user.id],t.members=R,(C=r.data)!=null&&C.member_count&&(r.data.member_count=Math.max(r.data.member_count-1,0))}break;case"notification.mark_unread":{if(!(((I=a.user)==null?void 0:I.id)===((A=this.getClient().user)==null?void 0:A.id)&&a.user))break;const D=a.unread_messages??0;t.read[a.user.id]={first_unread_message_id:a.first_unread_message_id,last_read:new Date(a.last_read_at),last_read_message_id:a.last_read_message_id,user:a.user,unread_messages:D},t.unreadCount=D;break}case"channel.updated":if(a.channel){((_=a.channel)==null?void 0:_.frozen)!==void 0&&a.channel.frozen!==((k=r.data)==null?void 0:k.frozen)&&this.query({state:!1,messages:{limit:0},watchers:{limit:0}});const D={...a.channel,hidden:((B=a.channel)==null?void 0:B.hidden)??((z=r.data)==null?void 0:z.hidden),own_capabilities:((M=a.channel)==null?void 0:M.own_capabilities)??((O=r.data)==null?void 0:O.own_capabilities)};r.data=D}break;case"reaction.new":if(a.message&&a.reaction){const{message:R,reaction:D}=a;a.message=t.addReaction(D,R)}break;case"reaction.deleted":if(a.message&&a.reaction){const{message:R,reaction:D}=a;a.message=t.removeReaction(D,R)}break;case"reaction.updated":if(a.message&&a.reaction){const{message:R,reaction:D}=a;a.message=t.addReaction(D,R,!0)}break;case"channel.hidden":r.data={...r.data,hidden:!0},a.clear_history&&t.clearMessages();break;case"channel.visible":r.data={...r.data,hidden:!1},(U=this.getClient().offlineDb)==null||U.handleChannelVisibilityEvent({event:a});break;case"user.banned":if(!((Z=a.user)!=null&&Z.id))break;t.members[a.user.id]={...t.members[a.user.id]||{},shadow_banned:!!a.shadow,banned:!a.shadow,user:{...((H=t.members[a.user.id])==null?void 0:H.user)||{},...a.user}};break;case"user.unbanned":if(!((V=a.user)!=null&&V.id))break;t.members[a.user.id]={...t.members[a.user.id]||{},shadow_banned:!1,banned:!1,user:{...((F=t.members[a.user.id])==null?void 0:F.user)||{},...a.user}};break}a.watcher_count!==void 0&&(r.state.watcher_count=a.watcher_count)}_checkInitialized(){if(!this.initialized&&!this.offlineMode&&!this.getClient()._isUsingServerAuth())throw Error(`Channel ${this.cid} hasn't been initialized yet. Make sure to call .watch() and wait for it to resolve`)}_initializeState(a,r="latest"){const{state:t,user:n,userID:o}=this.getClient();if(a.members){this._hydrateMembers({members:a.members});for(const u of a.members)u.user&&t.updateUserReference(u.user,this.cid)}this.state.membership=a.membership||{};const i=a.messages||[];this.state.messages||this.state.initMessages();const{messageSet:c}=this.state.addMessagesSorted(i,!1,!0,!0,r);if(this.state.pinnedMessages||(this.state.pinnedMessages=[]),this.state.addPinnedMessages(a.pinned_messages||[]),a.pending_messages&&(this.state.pending_messages=a.pending_messages),a.watcher_count!==void 0&&(this.state.watcher_count=a.watcher_count),a.watchers)for(const u of a.watchers)u&&(t.updateUserReference(u,this.cid),this.state.watchers[u.id]=u);if(o!=null){const u=this.state.last_message_at||new Date;n&&(this.state.read[n.id]={user:n,last_read:u,unread_messages:0})}if(a.read)for(const u of a.read)this.state.read[u.user.id]={last_read:new Date(u.last_read),last_read_message_id:u.last_read_message_id,unread_messages:u.unread_messages??0,user:u.user},u.user.id===(n==null?void 0:n.id)&&(this.state.unreadCount=this.state.read[u.user.id].unread_messages);return{messageSet:c}}_extendEventWithOwnReactions(a){if(!a.message)return;const r=this.state.findMessage(a.message.id,a.message.parent_id);r&&(a.message.own_reactions=r.own_reactions)}_hydrateMembers({members:a,overrideCurrentState:r=!0}){const t=a.reduce((n,o)=>(o.user&&(n[o.user.id]=o),n),{});r?this.state.members=t:!r&&a.length&&(this.state.members={...this.state.members,...t})}_disconnect(){this._client.logger("info",`channel:disconnect() - Disconnecting the channel ${this.cid}`,{tags:["connection","channel"],channel:this}),this.disconnected=!0,this.state.setIsUpToDate(!1)}},Ex=class{constructor({client:a}){this.client=a,this.users={},this.userChannelReferences={}}updateUsers(a){for(const r of a)this.updateUser(r)}updateUser(a){a!=null&&this.client._cacheEnabled()&&(this.users[a.id]=a)}updateUserReference(a,r){a==null||!this.client._cacheEnabled()||(this.updateUser(a),this.userChannelReferences[a.id]||(this.userChannelReferences[a.id]={}),this.userChannelReferences[a.id][r]=!0)}deleteAllChannelReference(a){for(const r in this.userChannelReferences)delete this.userChannelReferences[r][a]}},vi=null;typeof WebSocket<"u"?vi=WebSocket:typeof MozWebSocket<"u"?vi=MozWebSocket:typeof global<"u"?vi=global.WebSocket||global.MozWebSocket:typeof window<"u"?vi=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(vi=self.WebSocket||self.MozWebSocket);var lL=vi,iL=class{constructor(){this.connectionStartTimestamp=null,this.wsTotalFailures=0,this.wsConsecutiveFailures=0,this.instanceClientId=xi()}},ld=async(a,r)=>{for(let n=0;n<3;n++){try{await _d.post(`https://chat-insights.getstream.io/insights/${a}`,r)}catch{await $s((n+1)*3e3);continue}break}};function cL(a,r){return{...r,...vw(a)}}function vw(a){var t;const{client:r}=a;return{ready_state:(t=a.ws)==null?void 0:t.readyState,url:a._buildUrl(),api_key:r.key,start_ts:r.insightMetrics.connectionStartTimestamp,end_ts:new Date().getTime(),auth_type:r.getAuthType(),token:r.tokenManager.token,user_id:r.userID,user_details:r._user,device:r.options.device,client_id:a.connectionID,ws_details:a.ws,ws_consecutive_failures:r.insightMetrics.wsConsecutiveFailures,ws_total_failures:r.insightMetrics.wsTotalFailures,request_id:a.requestID,online:typeof navigator<"u"?navigator==null?void 0:navigator.onLine:null,user_agent:typeof navigator<"u"?navigator==null?void 0:navigator.userAgent:null,instance_client_id:r.insightMetrics.instanceClientId}}function dL(a){return vw(a)}var uL=a=>a.code!==void 0,mL=a=>a.error!==void 0,pL=class{constructor({client:a}){this._buildUrl=()=>{const r=this.client._buildWSPayload(this.requestID),t=this.client.tokenManager.getToken(),n=this.client.options.wsUrlParams,o=new URLSearchParams(n);return o.set("json",r),o.set("api_key",this.client.key),o.set("authorization",`${t}`),o.set("stream-auth-type",this.client.getAuthType()),o.set("X-Stream-Client",this.client.getUserAgent()),`${this.client.wsBaseURL}/connect?${o.toString()}`},this.onlineStatusChanged=r=>{r.type==="offline"?(this._log("onlineStatusChanged() - Status changing to offline"),this._setHealth(!1)):r.type==="online"&&(this._log(`onlineStatusChanged() - Status changing to online. isHealthy: ${this.isHealthy}`),this.isHealthy||this._reconnect({interval:10}))},this.onopen=r=>{this.wsID===r&&this._log("onopen() - onopen callback",{wsID:r})},this.onmessage=(r,t)=>{var o,i;if(this.wsID!==r)return;this._log("onmessage() - onmessage callback",{event:t,wsID:r});const n=typeof t.data=="string"?JSON.parse(t.data):null;if(!this.isResolved&&n){if(this.isResolved=!0,n.error){(o=this.rejectPromise)==null||o.call(this,this._errorFromWSEvent(n,!1));return}(i=this.resolvePromise)==null||i.call(this,n),this._setHealth(!0)}this.lastEvent=new Date,n&&n.type==="health.check"&&this.scheduleNextPing(),this.client.handleEvent(t),this.scheduleConnectionCheck()},this.onclose=(r,t)=>{var n,o;if(this.wsID===r)if(this._log("onclose() - onclose callback - "+t.code,{event:t,wsID:r}),t.code===od.WS_CLOSED_SUCCESS){const i=new Error(`WS connection reject with error ${t.reason}`);i.reason=t.reason,i.code=t.code,i.wasClean=t.wasClean,i.target=t.target,(n=this.rejectPromise)==null||n.call(this,i),this._log(`onclose() - WS connection reject with error ${t.reason}`,{event:t})}else this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,(o=this.rejectPromise)==null||o.call(this,this._errorFromWSEvent(t)),this._log("onclose() - WS connection closed. Calling reconnect ...",{event:t}),this._reconnect()},this.onerror=(r,t)=>{var n;this.wsID===r&&(this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,(n=this.rejectPromise)==null||n.call(this,this._errorFromWSEvent(t)),this._log("onerror() - WS connection resulted into error",{event:t}),this._reconnect())},this._setHealth=r=>{if(r!==this.isHealthy){if(this.isHealthy=r,this.isHealthy){this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy});return}setTimeout(()=>{this.isHealthy||this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy})},5e3)}},this._errorFromWSEvent=(r,t=!0)=>{let n,o,i;uL(r)&&(n=r.code,o="unknown",i=r.reason),mL(r)&&(n=r.error.code,o=r.error.StatusCode,i=r.error.message),this._log(`_errorFromWSEvent() - WS failed with code ${n}`,{event:r},"warn");const c=new Error(`WS failed with code ${n} and reason - ${i}`);return c.code=n,c.StatusCode=o,c.isWSFailure=t,c},this._setupConnectionPromise=()=>{this.isResolved=!1,this.connectionOpen=new Promise((r,t)=>{this.resolvePromise=r,this.rejectPromise=t})},this.scheduleNextPing=()=>{this.healthCheckTimeoutRef&&clearTimeout(this.healthCheckTimeoutRef),this.healthCheckTimeoutRef=setTimeout(()=>{var t;const r=[{type:"health.check",client_id:this.client.clientID}];try{(t=this.ws)==null||t.send(JSON.stringify(r))}catch{}},this.pingInterval)},this.scheduleConnectionCheck=()=>{this.connectionCheckTimeoutRef&&clearTimeout(this.connectionCheckTimeoutRef),this.connectionCheckTimeoutRef=setTimeout(()=>{const r=new Date;this.lastEvent&&r.getTime()-this.lastEvent.getTime()>this.connectionCheckTimeout&&(this._log("scheduleConnectionCheck - going to reconnect"),this._setHealth(!1),this._reconnect())},this.connectionCheckTimeout)},this.client=a,this.consecutiveFailures=0,this.totalFailures=0,this.isConnecting=!1,this.isDisconnected=!1,this.isResolved=!1,this.isHealthy=!1,this.wsID=1,this.lastEvent=null,this.pingInterval=25*1e3,this.connectionCheckTimeout=this.pingInterval+10*1e3,j5(this.onlineStatusChanged)}_log(a,r={},t="info"){this.client.logger(t,"connection:"+a,{tags:["connection"],...r})}setClient(a){this.client=a}async connect(a=15e3){if(this.isConnecting)throw Error("You've called connect twice, can only attempt 1 connection at the time");this.isDisconnected=!1;try{const r=await this._connect();this.consecutiveFailures=0,this._log(`connect() - Established ws connection with healthcheck: ${r}`)}catch(r){this.isHealthy=!1,this.consecutiveFailures+=1;const t=r;if(t.code===od.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});else if(!t.isWSFailure)throw new Error(JSON.stringify({code:t.code,StatusCode:t.StatusCode,message:t.message,isWSFailure:t.isWSFailure}))}return await this._waitForHealthy(a)}_waitForHealthy(a=15e3){return Promise.race([(async()=>{for(let t=0;t<=a;t+=50)try{return await this.connectionOpen}catch(n){if(t===a)throw new Error(JSON.stringify({code:n.code,StatusCode:n.StatusCode,message:n.message,isWSFailure:n.isWSFailure}));await $s(50)}})(),(async()=>{throw await $s(a),this.isConnecting=!1,new Error(JSON.stringify({code:"",StatusCode:"",message:"initial WS connection could not be established",isWSFailure:!0}))})()])}disconnect(a){this._log(`disconnect() - Closing the websocket connection for wsID ${this.wsID}`),this.wsID+=1,this.isConnecting=!1,this.isDisconnected=!0,this.healthCheckTimeoutRef&&clearInterval(this.healthCheckTimeoutRef),this.connectionCheckTimeoutRef&&clearInterval(this.connectionCheckTimeoutRef),H5(this.onlineStatusChanged),this.isHealthy=!1,this.ws&&this.ws.removeAllListeners&&this.ws.removeAllListeners();let r;const{ws:t}=this;return t&&t.close&&t.readyState===t.OPEN?(r=new Promise(n=>{const o=i=>{this._log(`disconnect() - resolving isClosedPromise ${i?"with":"without"} close frame`,{event:i}),n()};t.onclose=o,setTimeout(o,a??1e3)}),this._log("disconnect() - Manually closed connection by calling client.disconnect()"),t.close(od.WS_CLOSED_SUCCESS,"Manually closed connection by calling client.disconnect()")):(this._log("disconnect() - ws connection doesn't exist or it is already closed."),r=Promise.resolve()),delete this.ws,r}async _connect(){if(this.isConnecting||this.isDisconnected&&this.client.options.enableWSFallback)return;this.isConnecting=!0,this.requestID=xi(),this.client.insightMetrics.connectionStartTimestamp=new Date().getTime();let a=!1;try{this._log("_connect() - waiting for token"),await this.client.tokenManager.tokenReady(),a=!0}catch{}try{a||(this._log("_connect() - tokenProvider failed before, so going to retry"),await this.client.tokenManager.loadToken()),this._setupConnectionPromise();const r=this._buildUrl();this._log(`_connect() - Connecting to ${r}`,{wsURL:r,requestID:this.requestID}),this.ws=new lL(r),this.ws.onopen=this.onopen.bind(this,this.wsID),this.ws.onclose=this.onclose.bind(this,this.wsID),this.ws.onerror=this.onerror.bind(this,this.wsID),this.ws.onmessage=this.onmessage.bind(this,this.wsID);const t=await this.connectionOpen;if(this.isConnecting=!1,t)return this.connectionID=t.connection_id,this.client.insightMetrics.wsConsecutiveFailures>0&&this.client.options.enableInsights&&(ld("ws_success_after_failure",dL(this)),this.client.insightMetrics.wsConsecutiveFailures=0),t}catch(r){if(this.isConnecting=!1,this._log("_connect() - Error - ",r),this.client.options.enableInsights){this.client.insightMetrics.wsConsecutiveFailures++,this.client.insightMetrics.wsTotalFailures++;const t=cL(this,yT(r));ld==null||ld("ws_fatal",t)}throw r}}async _reconnect(a={}){if(this._log("_reconnect() - Initiating the reconnect"),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (1) since already connecting or healthy");return}let r=a.interval;if(r||(r=Qm(this.consecutiveFailures)),await $s(r),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (2) since already connecting or healthy");return}if(this.isDisconnected&&this.client.options.enableWSFallback){this._log("_reconnect() - Abort (3) since disconnect() is called");return}this._log("_reconnect() - Destroying current WS connection"),this._destroyCurrentWSConnection(),a.refreshToken&&await this.client.tokenManager.loadToken();try{await this._connect(),this._log("_reconnect() - Waiting for recoverCallBack"),await this.client.recoverState(),this._log("_reconnect() - Finished recoverCallBack"),this.consecutiveFailures=0}catch(t){if(this.isHealthy=!1,this.consecutiveFailures+=1,t.code===od.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())return this._log("_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});t.isWSFailure&&(this._log("_reconnect() - WS failure, so going to try to reconnect"),this._reconnect())}this._log("_reconnect() - == END ==")}_destroyCurrentWSConnection(){var a,r;this.wsID+=1;try{(a=this==null?void 0:this.ws)==null||a.removeAllListeners(),(r=this==null?void 0:this.ws)==null||r.close()}catch{}}},Tm=Fd(kM()),wx=Fd(NM());function xw(a,r,t={},n={}){if(typeof r!="string")throw new TypeError("userId should be a string");const o={user_id:r,...t};if(Tm.default==null||Tm.default.sign==null)throw Error("Unable to find jwt crypto, if you are getting this error is probably because you are trying to generate tokens on browser or React Native (or other environment where crypto functions are not available). Please Note: token should only be generated server-side.");const i=Object.assign({algorithm:"HS256",noTimestamp:!0},n);return o.iat&&(i.noTimestamp=!1),Tm.default.sign(o,a,i)}function Sx(a,r={}){const t={server:!0},n=Object.assign({algorithm:"HS256",noTimestamp:!0},r);return Tm.default.sign(t,a,n)}function fL(a){const r=a.split(".");if(r.length!==3)return"";const t=r[1],n=MM(t);return JSON.parse(n).user_id}function gL(a){return["eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",DM(JSON.stringify({user_id:a})),"devtoken"].join(".")}function hL(a,r,t){const n=Buffer.from(r,"utf8"),o=wx.default.createHmac("sha256",n).update(a).digest("hex");try{return wx.default.timingSafeEqual(Buffer.from(o),Buffer.from(t))}catch{return!1}}var yL=class{constructor(a){this.setTokenOrProvider=async(r,t)=>{this.validateToken(r,t),this.user=t,u0(r)&&(this.tokenProvider=r,this.type="provider"),typeof r=="string"&&(this.token=r,this.type="static"),!r&&this.user&&this.secret&&(this.token=xw(this.secret,t.id,{},{}),this.type="static"),await this.loadToken()},this.reset=()=>{this.token=void 0,this.tokenProvider=void 0,this.type="static",this.user=void 0,this.loadTokenPromise=null},this.validateToken=(r,t)=>{if(!(t&&t.anon&&!r)){if(!this.secret&&!r)throw new Error("User token can not be empty");if(r&&typeof r!="string"&&!u0(r))throw new Error("user token should either be a string or a function");if(typeof r=="string"){if(t.anon&&r==="")return;const n=fL(r);if(r!=null&&(n==null||n===""||n!==t.id))throw new Error("userToken does not have a user_id or is not matching with user.id")}}},this.tokenReady=()=>this.loadTokenPromise,this.loadToken=()=>(this.loadTokenPromise=new Promise(async(r,t)=>{if(this.type==="static")return r(this.token);if(this.tokenProvider&&typeof this.tokenProvider!="string"){try{this.token=await this.tokenProvider()}catch(n){return t(new Error(`Call to tokenProvider failed with message: ${n}`))}r(this.token)}}),this.loadTokenPromise),this.getToken=()=>{if(this.token)return this.token;if(this.user&&this.user.anon&&!this.token)return this.token;if(this.secret)return Sx(this.secret);throw new Error("Both secret and user tokens are not set. Either client.connectUser wasn't called or client.disconnect was called")},this.isStatic=()=>this.type==="static",this.loadTokenPromise=null,a&&(this.secret=a),this.type="static",this.secret&&(this.token=Sx(this.secret))}},bL={"-1":{name:"InternalSystemError",retryable:!0},2:{name:"AccessKeyError",retryable:!1},3:{name:"AuthenticationFailedError",retryable:!0},4:{name:"InputError",retryable:!1},6:{name:"DuplicateUsernameError",retryable:!1},9:{name:"RateLimitError",retryable:!0},16:{name:"DoesNotExistError",retryable:!1},17:{name:"NotAllowedError",retryable:!1},18:{name:"EventNotSupportedError",retryable:!1},19:{name:"ChannelFeatureNotSupportedError",retryable:!1},20:{name:"MessageTooLongError",retryable:!1},21:{name:"MultipleNestingLevelError",retryable:!1},22:{name:"PayloadTooBigError",retryable:!1},23:{name:"RequestTimeoutError",retryable:!0},24:{name:"MaxHeaderSizeExceededError",retryable:!1},40:{name:"AuthErrorTokenExpired",retryable:!1},41:{name:"AuthErrorTokenNotValidYet",retryable:!1},42:{name:"AuthErrorTokenUsedBeforeIssuedAt",retryable:!1},43:{name:"AuthErrorTokenSignatureInvalid",retryable:!1},44:{name:"CustomCommandEndpointMissingError",retryable:!1},45:{name:"CustomCommandEndpointCallError",retryable:!0},46:{name:"ConnectionIDNotFoundError",retryable:!1},60:{name:"CoolDownError",retryable:!0},69:{name:"ErrWrongRegion",retryable:!1},70:{name:"ErrQueryChannelPermissions",retryable:!1},71:{name:"ErrTooManyConnections",retryable:!0},99:{name:"AppSuspendedError",retryable:!1}};function vL(a){return a.code!==void 0}function Cx(a){if(!a.code)return!1;const r=bL[`${a.code}`];return r?r.retryable:!1}function xL(a){return a.code===46}function EL(a){if(typeof a.isWSFailure=="boolean")return a.isWSFailure;try{return JSON.parse(a.message).isWSFailure}catch{return!1}}function wL(a){return!a.status||a.status<200||300<=a.status}var SL=class{constructor({client:a}){this._onlineStatusChanged=r=>{var t;if(this._log(`_onlineStatusChanged() - ${r.type}`),r.type==="offline"){this._setState("CLOSED"),(t=this.cancelToken)==null||t.cancel("disconnect() is called"),this.cancelToken=void 0;return}r.type==="online"&&this.state==="CLOSED"&&this.connect(!0)},this._req=async(r,t,n)=>{var o;!this.cancelToken&&!r.close&&(this.cancelToken=_d.CancelToken.source());try{const i=await this.client.doAxiosRequest("get",this.client.baseURL.replace(":3030",":8900")+"/longpoll",void 0,{config:{...t,cancelToken:(o=this.cancelToken)==null?void 0:o.token},params:r});return this.consecutiveFailures=0,i}catch(i){if(this.consecutiveFailures+=1,n&&Cx(i))return this._log("_req() - Retryable error, retrying request"),await $s(Qm(this.consecutiveFailures)),this._req(r,t,n);throw i}},this._poll=async()=>{var r;for(;this.state==="CONNECTED";)try{const t=await this._req({},{timeout:3e4},!0);if((r=t.events)!=null&&r.length)for(let n=0;n<t.events.length;n++)this.client.dispatchEvent(t.events[n])}catch(t){if(_d.isCancel(t)){this._log("_poll() - axios canceled request");return}if(xL(t)){this._log("_poll() - ConnectionID error, connecting without ID..."),this._setState("DISCONNECTED"),this.connect(!0);return}if(vL(t)&&!Cx(t)){this._setState("CLOSED");return}await $s(Qm(this.consecutiveFailures))}},this.connect=async(r=!1)=>{if(this.state==="CONNECTING"){this._log("connect() - connecting already in progress",{reconnect:r},"warn");return}if(this.state==="CONNECTED"){this._log("connect() - already connected and polling",{reconnect:r},"warn");return}this._setState("CONNECTING"),this.connectionID=void 0;try{const{event:t}=await this._req({json:this.client._buildWSPayload()},{timeout:8e3},r);return this._setState("CONNECTED"),this.connectionID=t.connection_id,this.client.dispatchEvent(t),this._poll(),r&&this.client.recoverState(),t}catch(t){throw this._setState("CLOSED"),t}},this.isHealthy=()=>!!this.connectionID&&this.state==="CONNECTED",this.disconnect=async(r=2e3)=>{var n;H5(this._onlineStatusChanged),this._setState("DISCONNECTED"),(n=this.cancelToken)==null||n.cancel("disconnect() is called"),this.cancelToken=void 0;const t=this.connectionID;this.connectionID=void 0;try{await this._req({close:!0,connection_id:t},{timeout:r},!1),this._log("disconnect() - Closed connectionID")}catch(o){this._log("disconnect() - Failed",{err:o},"error")}},this.client=a,this.state="INIT",this.consecutiveFailures=0,j5(this._onlineStatusChanged)}_log(a,r={},t="info"){this.client.logger(t,"WSConnectionFallback:"+a,{tags:["connection_fallback","connection"],...r})}_setState(a){this._log(`_setState() - ${a}`),this.state==="CONNECTING"&&a==="CONNECTED"&&this.client.dispatchEvent({type:"connection.changed",online:!0}),(a==="CLOSED"||a==="DISCONNECTED")&&this.client.dispatchEvent({type:"connection.changed",online:!1}),this.state=a}},_x=class{constructor(a,r,t,n){this.client=a,this.type=r,this.id=t,this.data=n}create(){var r,t,n,o,i;const a={name:(r=this.data)==null?void 0:r.name,filter:(t=this.data)==null?void 0:t.filter,description:(n=this.data)==null?void 0:n.description,all_sender_channels:(o=this.data)==null?void 0:o.all_sender_channels,all_users:(i=this.data)==null?void 0:i.all_users};return this.client.createSegment(this.type,this.id,a)}verifySegmentId(){if(!this.id)throw new Error("Segment id is missing. Either create the segment using segment.create() or set the id during instantiation - const segment = client.segment(id)")}get(){return this.verifySegmentId(),this.client.getSegment(this.id)}update(a){return this.verifySegmentId(),this.client.updateSegment(this.id,a)}addTargets(a){return this.verifySegmentId(),this.client.addSegmentTargets(this.id,a)}removeTargets(a){return this.verifySegmentId(),this.client.removeSegmentTargets(this.id,a)}delete(){return this.verifySegmentId(),this.client.deleteSegment(this.id)}targetExists(a){return this.verifySegmentId(),this.client.segmentTargetExists(this.id,a)}queryTargets(a={},r=[],t={}){return this.verifySegmentId(),this.client.querySegmentTargets(this.id,a,r,t)}},hm={user:"stream:user",message:"stream:chat:v1:message",userprofile:"stream:v1:user_profile"},CL=class{constructor(a){this.client=a}flagUser(a,r,t={}){return this.flag(hm.user,a,"",r,t)}flagMessage(a,r,t={}){return this.flag(hm.message,a,"",r,t)}async flag(a,r,t,n,o={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/flag",{entity_type:a,entity_id:r,entity_creator_id:t,reason:n,...o})}async muteUser(a,r={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/mute",{target_ids:[a],...r})}async unmuteUser(a,r){return await this.client.post(this.client.baseURL+"/api/v2/moderation/unmute",{target_ids:[a],...r})}async getUserModerationReport(a,r={}){return await this.client.get(this.client.baseURL+"/api/v2/moderation/user_report",{user_id:a,...r})}async queryReviewQueue(a={},r=[],t={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/review_queue",{filter:a,sort:zn(r),...t})}async upsertConfig(a){return await this.client.post(this.client.baseURL+"/api/v2/moderation/config",a)}async getConfig(a,r){return await this.client.get(this.client.baseURL+"/api/v2/moderation/config/"+a,r)}async deleteConfig(a,r){return await this.client.delete(this.client.baseURL+"/api/v2/moderation/config/"+a,r)}async queryConfigs(a,r,t={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/configs",{filter:a,sort:r,...t})}async submitAction(a,r,t={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/submit_action",{action_type:a,item_id:r,...t})}async check(a,r,t,n,o,i){return await this.client.post(this.client.baseURL+"/api/v2/moderation/check",{entity_type:a,entity_id:r,entity_creator_id:t,moderation_payload:n,config_key:o,options:i})}async checkUserProfile(a,r){if(!r.username&&!r.image)throw new Error("Either username or image must be provided");const t={};return r.username&&(t.texts=[r.username]),r.image&&(t.images=[r.image]),await this.check(hm.userprofile,a,a,t,"user_profile:default",{force_sync:!0,test_mode:!0})}async addCustomFlags(a,r,t,n,o){return await this.client.post(this.client.baseURL+"/api/v2/moderation/custom_check",{entity_type:a,entity_id:r,entity_creator_id:t,moderation_payload:n,flags:o})}async addCustomMessageFlags(a,r){return await this.addCustomFlags(hm.message,a,"",{},r)}},_L=1e3,kx=25,Nx={active:!1,isThreadOrderStale:!1,threads:[],unreadThreadCount:0,unseenThreadIds:[],lastConnectionDropAt:null,pagination:{isLoading:!1,isLoadingNext:!1,nextCursor:null},ready:!1},kL=class extends jd{constructor({client:a}){super(),this.resetState=()=>{this.state.next(Nx)},this.activate=()=>{this.state.partialNext({active:!0})},this.deactivate=()=>{this.state.partialNext({active:!1})},this.registerSubscriptions=()=>{this.hasSubscriptions||(this.addUnsubscribeFunction(this.subscribeUnreadThreadsCountChange()),this.addUnsubscribeFunction(this.subscribeManageThreadSubscriptions()),this.addUnsubscribeFunction(this.subscribeReloadOnActivation()),this.addUnsubscribeFunction(this.subscribeNewReplies()),this.addUnsubscribeFunction(this.subscribeRecoverAfterConnectionDrop()),this.addUnsubscribeFunction(this.subscribeChannelDeleted()))},this.subscribeUnreadThreadsCountChange=()=>{const{unread_threads:r=0}=this.client.user??{};this.state.partialNext({unreadThreadCount:r});const t=["health.check","notification.mark_read","notification.thread_message_new","notification.channel_deleted"].map(n=>this.client.on(n,o=>{const{unread_threads:i}=o.me??o;typeof i=="number"&&this.state.partialNext({unreadThreadCount:i})}).unsubscribe);return()=>t.forEach(n=>n())},this.subscribeChannelDeleted=()=>this.client.on("notification.channel_deleted",r=>{const{cid:t}=r,{threads:n}=this.state.getLatestValue(),o=n.filter(i=>i.channel.cid!==t);this.state.partialNext({threads:o})}).unsubscribe,this.subscribeManageThreadSubscriptions=()=>this.state.subscribeWithSelector(r=>({threads:r.threads}),({threads:r},t)=>{const{threads:n=[]}=t??{},o=n.filter(i=>i!==this.threadsById[i.id]);r.forEach(i=>i.registerSubscriptions()),o.forEach(i=>i.unregisterSubscriptions())}),this.subscribeReloadOnActivation=()=>this.state.subscribeWithSelector(r=>({active:r.active}),({active:r})=>{r&&this.reload()}),this.subscribeNewReplies=()=>this.client.on("notification.thread_message_new",r=>{var i;const t=(i=r.message)==null?void 0:i.parent_id;if(!t)return;const{unseenThreadIds:n,ready:o}=this.state.getLatestValue();o&&(this.threadsById[t]?this.state.partialNext({isThreadOrderStale:!0}):n.includes(t)||this.state.partialNext({unseenThreadIds:n.concat(t)}))}).unsubscribe,this.subscribeRecoverAfterConnectionDrop=()=>{const r=this.client.on("connection.changed",o=>{o.online===!1&&this.state.next(i=>i.lastConnectionDropAt?i:{...i,lastConnectionDropAt:new Date})}).unsubscribe,t=q5(()=>{const{lastConnectionDropAt:o}=this.state.getLatestValue();o&&this.reload({force:!0})},_L,{trailing:!0}),n=this.client.on("connection.recovered",t).unsubscribe;return()=>{r(),n()}},this.unregisterSubscriptions=()=>(this.state.getLatestValue().threads.forEach(r=>r.unregisterSubscriptions()),super.unregisterSubscriptions()),this.reload=async({force:r=!1}={})=>{const{threads:t,unseenThreadIds:n,isThreadOrderStale:o,pagination:i,ready:c}=this.state.getLatestValue();if(i.isLoading||!r&&c&&!n.length&&!o)return;const u=t.length+n.length;try{this.state.next(f=>({...f,pagination:{...f.pagination,isLoading:!0}}));const m=await this.queryThreads({limit:Math.min(u,kx)||kx}),g=[];for(const f of m.threads){const h=this.threadsById[f.id];h?(g.push(h),h.hasStaleState&&h.hydrateState(f)):g.push(f)}this.state.next(f=>({...f,threads:g,unseenThreadIds:[],isThreadOrderStale:!1,pagination:{...f.pagination,isLoading:!1,nextCursor:m.next??null},ready:!0}))}catch(m){this.client.logger("error",m.message),this.state.next(g=>({...g,pagination:{...g.pagination,isLoading:!1}}))}},this.queryThreads=(r={})=>this.client.queryThreads({limit:25,participant_limit:10,reply_limit:10,watch:!0,...r}),this.loadNextPage=async(r={})=>{const{pagination:t}=this.state.getLatestValue();if(!(t.isLoadingNext||!t.nextCursor))try{this.state.partialNext({pagination:{...t,isLoadingNext:!0}});const n=await this.queryThreads({...r,next:t.nextCursor});this.state.next(o=>({...o,threads:n.threads.length?o.threads.concat(n.threads):o.threads,pagination:{...o.pagination,nextCursor:n.next??null,isLoadingNext:!1}}))}catch(n){this.client.logger("error",n.message),this.state.next(o=>({...o,pagination:{...o.pagination,isLoadingNext:!1}}))}},this.client=a,this.state=new Yn(Nx),this.threadsByIdGetterCache={threads:[],threadsById:{}}}get threadsById(){const{threads:a}=this.state.getLatestValue();if(a===this.threadsByIdGetterCache.threads)return this.threadsByIdGetterCache.threadsById;const r=a.reduce((t,n)=>(t[n.id]=n,t),{});return this.threadsByIdGetterCache.threads=a,this.threadsByIdGetterCache.threadsById=r,r}},NL=a=>a.type==="poll.updated",IL=a=>a.type==="poll.closed",AL=a=>a.type==="poll.vote_casted",DL=a=>a.type==="poll.vote_changed",ML=a=>a.type==="poll.vote_removed",gl=a=>!!(a!=null&&a.answer_text),Ix=class{constructor({client:a,poll:r}){this.getInitialStateFromPollResponse=t=>{const{own_votes:n,id:o,...i}=t,{ownAnswer:c,ownVotes:u}=(n==null?void 0:n.reduce((m,g)=>(gl(g)?m.ownAnswer=g:m.ownVotes.push(g),m),{ownVotes:[]}))??{ownVotes:[]};return{...i,lastActivityAt:new Date,maxVotedOptionIds:Jc(i.vote_counts_by_option),ownAnswer:c,ownVotesByOptionId:RL(u)}},this.upsertOfflineDb=()=>{var t;(t=this.client.offlineDb)==null||t.executeQuerySafely(n=>n.upsertPoll({poll:PL(this)}),{method:"upsertPoll"})},this.reinitializeState=t=>{this.state.partialNext(this.getInitialStateFromPollResponse(t))},this.handlePollUpdated=t=>{var i;if((i=t.poll)!=null&&i.id&&t.poll.id!==this.id||!NL(t))return;const{id:n,...o}=TL(t.poll);this.state.partialNext({...o,lastActivityAt:new Date(t.created_at)}),this.upsertOfflineDb()},this.handlePollClosed=t=>{var n;(n=t.poll)!=null&&n.id&&t.poll.id!==this.id||IL(t)&&(this.state.partialNext({is_closed:!0,lastActivityAt:new Date(t.created_at)}),this.upsertOfflineDb())},this.handleVoteCasted=t=>{var f;if((f=t.poll)!=null&&f.id&&t.poll.id!==this.id||!AL(t))return;const n=this.data,o=t.poll_vote.user_id===this.client.userID;let i=[...n.latest_answers],c=n.ownAnswer;const u=n.ownVotesByOptionId;let m=n.maxVotedOptionIds;o&&(gl(t.poll_vote)?c=t.poll_vote:t.poll_vote.option_id&&(u[t.poll_vote.option_id]=t.poll_vote)),gl(t.poll_vote)?i=[t.poll_vote,...i]:m=Jc(t.poll.vote_counts_by_option);const g=Rh(t.poll);this.state.partialNext({...g,latest_answers:i,lastActivityAt:new Date(t.created_at),ownAnswer:c,ownVotesByOptionId:u,maxVotedOptionIds:m}),this.upsertOfflineDb()},this.handleVoteChanged=t=>{var f;if((f=t.poll)!=null&&f.id&&t.poll.id!==this.id||!DL(t))return;const n=this.data,o=t.poll_vote.user_id===this.client.userID;let i=[...n.latest_answers],c=n.ownAnswer,u=n.ownVotesByOptionId,m=n.maxVotedOptionIds;o?gl(t.poll_vote)?(i=[t.poll_vote,...i.filter(h=>h.id!==t.poll_vote.id)],c=t.poll_vote):t.poll_vote.option_id&&(t.poll.enforce_unique_vote?u={[t.poll_vote.option_id]:t.poll_vote}:(u=Object.entries(u).reduce((h,[v,S])=>(v!==t.poll_vote.option_id&&S.id===t.poll_vote.id||(h[v]=S),h),{}),u[t.poll_vote.option_id]=t.poll_vote),(c==null?void 0:c.id)===t.poll_vote.id&&(c=void 0),m=Jc(t.poll.vote_counts_by_option)):gl(t.poll_vote)?i=[t.poll_vote,...i]:m=Jc(t.poll.vote_counts_by_option);const g=Rh(t.poll);this.state.partialNext({...g,latest_answers:i,lastActivityAt:new Date(t.created_at),ownAnswer:c,ownVotesByOptionId:u,maxVotedOptionIds:m}),this.upsertOfflineDb()},this.handleVoteRemoved=t=>{var f;if((f=t.poll)!=null&&f.id&&t.poll.id!==this.id||!ML(t))return;const n=this.data,o=t.poll_vote.user_id===this.client.userID;let i=[...n.latest_answers],c=n.ownAnswer;const u={...n.ownVotesByOptionId};let m=n.maxVotedOptionIds;gl(t.poll_vote)?(i=i.filter(h=>h.id!==t.poll_vote.id),o&&(c=void 0)):(m=Jc(t.poll.vote_counts_by_option),o&&t.poll_vote.option_id&&delete u[t.poll_vote.option_id]);const g=Rh(t.poll);this.state.partialNext({...g,latest_answers:i,lastActivityAt:new Date(t.created_at),ownAnswer:c,ownVotesByOptionId:u,maxVotedOptionIds:m}),this.upsertOfflineDb()},this.query=async t=>{const{poll:n}=await this.client.getPoll(t);return this.state.partialNext({...n,lastActivityAt:new Date}),n},this.update=async t=>await this.client.updatePoll({...t,id:this.id}),this.partialUpdate=async t=>await this.client.partialUpdatePoll(this.id,t),this.close=async()=>await this.client.closePoll(this.id),this.delete=async()=>await this.client.deletePoll(this.id),this.createOption=async t=>await this.client.createPollOption(this.id,t),this.updateOption=async t=>await this.client.updatePollOption(this.id,t),this.deleteOption=async t=>await this.client.deletePollOption(this.id,t),this.castVote=async(t,n)=>{const{max_votes_allowed:o,ownVotesByOptionId:i}=this.data;if(o&&o===Object.keys(i).length){let u=Object.values(i)[0];Object.values(i).slice(1).forEach(m=>{(!(u!=null&&u.created_at)||new Date(m.created_at)<new Date(u.created_at))&&(u=m)}),u!=null&&u.id&&await this.removeVote(u.id,n)}return await this.client.castPollVote(n,this.id,{option_id:t})},this.removeVote=async(t,n)=>await this.client.removePollVote(n,this.id,t),this.addAnswer=async(t,n)=>await this.client.addPollAnswer(n,this.id,t),this.removeAnswer=async(t,n)=>await this.client.removePollVote(n,this.id,t),this.queryAnswers=async t=>await this.client.queryPollAnswers(this.id,t.filter,t.sort,t.options),this.queryOptionVotes=async t=>await this.client.queryPollVotes(this.id,t.filter,t.sort,t.options),this.client=a,this.id=r.id,this.state=new Yn(this.getInitialStateFromPollResponse(r))}get data(){return this.state.getLatestValue()}};function Jc(a){let r=0,t=[];for(const[n,o]of Object.entries(a??{}))o>r?(t=[n],r=o):o===r&&t.push(n);return t}function RL(a){return a?a.reduce((r,t)=>(gl(t)||!t.option_id||(r[t.option_id]=t),r),{}):{}}function TL(a){return{allow_answers:a.allow_answers,allow_user_suggested_options:a.allow_user_suggested_options,description:a.description,enforce_unique_vote:a.enforce_unique_vote,id:a.id,is_closed:a.is_closed,max_votes_allowed:a.max_votes_allowed,name:a.name,options:a.options,voting_visibility:a.voting_visibility}}function PL(a){const{lastActivityAt:r,maxVotedOptionIds:t,ownVotesByOptionId:n,ownAnswer:o,...i}=a.data,c=[...Object.values(n),...o?[o]:[]].sort((u,m)=>Date.parse(u.created_at)-Date.parse(m.created_at));return{...i,own_votes:c,id:a.id}}function Rh(a){return{answers_count:a.answers_count,latest_votes_by_option:a.latest_votes_by_option,vote_count:a.vote_count,vote_counts_by_option:a.vote_counts_by_option}}var LL=class extends jd{constructor({client:a}){super(),this.pollCache=new Map,this.fromState=r=>this.pollCache.get(r),this.registerSubscriptions=()=>{this.hasSubscriptions||(this.addUnsubscribeFunction(this.subscribeMessageNew()),this.addUnsubscribeFunction(this.subscribePollUpdated()),this.addUnsubscribeFunction(this.subscribePollClosed()),this.addUnsubscribeFunction(this.subscribeVoteCasted()),this.addUnsubscribeFunction(this.subscribeVoteChanged()),this.addUnsubscribeFunction(this.subscribeVoteRemoved()))},this.createPoll=async r=>{const{poll:t}=await this.client.createPoll(r);return new Ix({client:this.client,poll:t})},this.getPoll=async r=>{const t=this.fromState(r);if(t)return this.client.getPoll(r).then(({poll:o})=>this.setOrOverwriteInCache(o,!0)),t;const{poll:n}=await this.client.getPoll(r);return this.setOrOverwriteInCache(n),this.fromState(r)},this.queryPolls=async(r,t=[],n={})=>{const{polls:o,next:i}=await this.client.queryPolls(r,t,n);return{polls:o.map(u=>(this.setOrOverwriteInCache(u,!0),this.fromState(u.id))),next:i}},this.hydratePollCache=(r,t)=>{for(const n of r){if(!n.poll)continue;const o=n.poll;this.setOrOverwriteInCache(o,t)}},this.setOrOverwriteInCache=(r,t)=>{if(!this.client._cacheEnabled())return;const n=this.fromState(r.id);if(n)t&&n.reinitializeState(r);else{const o=new Ix({client:this.client,poll:r});this.pollCache.set(o.id,o)}},this.subscribePollUpdated=()=>this.client.on("poll.updated",r=>{var t,n;(t=r.poll)!=null&&t.id&&((n=this.fromState(r.poll.id))==null||n.handlePollUpdated(r))}).unsubscribe,this.subscribePollClosed=()=>this.client.on("poll.closed",r=>{var t,n;(t=r.poll)!=null&&t.id&&((n=this.fromState(r.poll.id))==null||n.handlePollClosed(r))}).unsubscribe,this.subscribeVoteCasted=()=>this.client.on("poll.vote_casted",r=>{var t,n;(t=r.poll)!=null&&t.id&&((n=this.fromState(r.poll.id))==null||n.handleVoteCasted(r))}).unsubscribe,this.subscribeVoteChanged=()=>this.client.on("poll.vote_changed",r=>{var t,n;(t=r.poll)!=null&&t.id&&((n=this.fromState(r.poll.id))==null||n.handleVoteChanged(r))}).unsubscribe,this.subscribeVoteRemoved=()=>this.client.on("poll.vote_removed",r=>{var t,n;(t=r.poll)!=null&&t.id&&((n=this.fromState(r.poll.id))==null||n.handleVoteRemoved(r))}).unsubscribe,this.subscribeMessageNew=()=>this.client.on("message.new",r=>{const{message:t}=r;if(t){const n=mr(t);this.hydratePollCache([n])}}).unsubscribe,this.client=a}get data(){return this.pollCache}},Ax={"channel.deleted":"channelDeletedHandler","channel.hidden":"channelHiddenHandler","channel.truncated":"channelTruncatedHandler","channel.updated":"channelUpdatedHandler","channel.visible":"channelVisibleHandler","message.new":"newMessageHandler","member.updated":"memberUpdatedHandler","notification.added_to_channel":"notificationAddedToChannelHandler","notification.message_new":"notificationNewMessageHandler","notification.removed_from_channel":"notificationRemovedFromChannelHandler"},BL={abortInFlightQuery:!1,allowNotLoadedChannelPromotionForEvent:{"channel.visible":!0,"message.new":!0,"notification.added_to_channel":!0,"notification.message_new":!0},lockChannelOrder:!1},Th={limit:10,offset:0},zL=class extends jd{constructor({client:a,eventHandlerOverrides:r={},options:t={}}){super(),this.eventHandlers=new Map,this.eventHandlerOverrides=new Map,this.options={},this.stateOptions={},this.setChannels=n=>{var u;this.state.next(m=>{const{channels:g}=m,f=ew(n)?n(g):n;return g===f?m:{...m,channels:f}});const{channels:o,pagination:{filters:i,sort:c}}=this.state.getLatestValue();(u=this.client.offlineDb)==null||u.executeQuerySafely(m=>m.upsertCidsForQuery({cids:o.map(g=>g.cid),filters:i,sort:c}),{method:"upsertCidsForQuery"})},this.setEventHandlerOverrides=(n={})=>{const o=Object.entries(n).reduce((i,[c,u])=>(u&&(i[c]=u),i),{});this.eventHandlerOverrides=new Map(Object.entries(o))},this.setOptions=(n={})=>{this.options={...BL,...n}},this.executeChannelsQuery=async(n,o=0)=>{var h;const{filters:i,sort:c,options:u,stateOptions:m}=n,{offset:g,limit:f}={...Th,...u};try{const v=await this.client.queryChannels(i,c,u,m),S=g+((v==null?void 0:v.length)??0),x={...u,offset:S},{pagination:E}=this.state.getLatestValue();this.state.partialNext({channels:v,pagination:{...E,hasNext:((v==null?void 0:v.length)??0)>=f,isLoading:!1,options:x},initialized:!0,error:void 0}),(h=this.client.offlineDb)==null||h.executeQuerySafely(N=>N.upsertCidsForQuery({cids:v.map(C=>C.cid),filters:E.filters,sort:E.sort}),{method:"upsertCidsForQuery"})}catch(v){if(o>=sT){console.warn(v);const S=new Error(`Maximum number of retries reached in queryChannels. Last error message is: ${v}`);this.state.partialNext({error:S});return}return await $s(lT),this.executeChannelsQuery(n,o+1)}},this.queryChannels=async(n,o=[],i={},c={})=>{var h,v;const{pagination:{isLoading:u,filters:m},initialized:g}=this.state.getLatestValue();if(u&&!this.options.abortInFlightQuery&&JSON.stringify(m)===JSON.stringify(n))return;const f={filters:n,sort:o,options:i,stateOptions:c};try{if(this.stateOptions=c,this.state.next(S=>({...S,pagination:{...S.pagination,isLoading:!0,isLoadingNext:!1,filters:n,sort:o,options:i},error:void 0})),(h=this.client.offlineDb)!=null&&h.getChannelsForQuery&&((v=this.client.user)!=null&&v.id)){if(!g){const S=await this.client.offlineDb.getChannelsForQuery({userId:this.client.user.id,filters:n,sort:o});if(S){const x=this.client.hydrateActiveChannels(S,{offlineMode:!0,skipInitialization:[]});this.state.partialNext({channels:x})}}if(!this.client.offlineDb.syncManager.syncStatus){this.client.offlineDb.syncManager.scheduleSyncStatusChangeCallback(this.id,async()=>{await this.executeChannelsQuery(f)});return}}await this.executeChannelsQuery(f)}catch(S){throw this.client.logger("error",S.message),this.state.next(x=>({...x,pagination:{...x.pagination,isLoading:!1}})),S}},this.loadNext=async()=>{const{pagination:n,initialized:o}=this.state.getLatestValue(),{filters:i,sort:c,options:u,isLoadingNext:m,hasNext:g}=n;if(!(!o||m||!g))try{const{offset:f,limit:h}={...Th,...u};this.state.partialNext({pagination:{...n,isLoading:!1,isLoadingNext:!0}});const v=await this.client.queryChannels(i,c,u,this.stateOptions),{channels:S}=this.state.getLatestValue(),x=f+((v==null?void 0:v.length)??0),E={...u,offset:x};this.state.partialNext({channels:wT([...S||[],...v],"cid"),pagination:{...n,hasNext:((v==null?void 0:v.length)??0)>=h,isLoading:!1,isLoadingNext:!1,options:E}})}catch(f){throw this.client.logger("error",f.message),this.state.next(h=>({...h,pagination:{...h.pagination,isLoadingNext:!1}})),f}},this.notificationAddedToChannelHandler=async n=>{var h;const{id:o,type:i,members:c}=(n==null?void 0:n.channel)??{};if(!i||!((h=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&h["notification.added_to_channel"]))return;const u=await Sh({client:this.client,id:o,members:c==null?void 0:c.reduce((v,{user:S,user_id:x})=>{const E=x||(S==null?void 0:S.id);return E&&v.push(E),v},[]),type:i}),{pagination:m,channels:g}=this.state.getLatestValue();if(!g)return;const{sort:f}=m??{};this.setChannels(mm({channels:g,channelToMove:u,sort:f}))},this.channelDeletedHandler=n=>{const{channels:o}=this.state.getLatestValue();if(!o)return;const i=[...o],c=i.findIndex(u=>{var m;return u.cid===(n.cid||((m=n.channel)==null?void 0:m.cid))});c<0||(i.splice(c,1),this.setChannels(i))},this.channelHiddenHandler=this.channelDeletedHandler,this.newMessageHandler=n=>{var C;const{pagination:o,channels:i}=this.state.getLatestValue();if(!i)return;const{filters:c,sort:u}=o??{},m=n.channel_type,g=n.channel_id;if(!m||!g)return;const f=this.client.channel(m,g),h=i.indexOf(f),v=h>=0,S=Jm(f),x=dm(f),E=um(c),N=p0(u);E&&x&&!c.archived||E&&!x&&c.archived||N&&S||this.options.lockChannelOrder||!v&&!((C=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&C["message.new"])||this.setChannels(mm({channels:i,channelToMove:f,channelToMoveIndexWithinChannels:h,sort:u}))},this.notificationNewMessageHandler=async n=>{var S;const{id:o,type:i}=(n==null?void 0:n.channel)??{};if(!o||!i)return;const c=await Sh({client:this.client,id:o,type:i}),{channels:u,pagination:m}=this.state.getLatestValue(),{filters:g,sort:f}=m??{},h=um(g),v=dm(c);!u||h&&v&&!g.archived||h&&!v&&g.archived||!((S=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&S["notification.message_new"])||this.setChannels(mm({channels:u,channelToMove:c,sort:f}))},this.channelVisibleHandler=async n=>{var S;const{channel_type:o,channel_id:i}=n;if(!o||!i)return;const c=await Sh({client:this.client,id:n.channel_id,type:n.channel_type}),{channels:u,pagination:m}=this.state.getLatestValue(),{sort:g,filters:f}=m??{},h=um(f),v=dm(c);!u||h&&v&&!f.archived||h&&!v&&f.archived||!((S=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&S["channel.visible"])||this.setChannels(mm({channels:u,channelToMove:c,sort:g}))},this.notificationRemovedFromChannelHandler=this.channelDeletedHandler,this.memberUpdatedHandler=n=>{var k;const{pagination:o,channels:i}=this.state.getLatestValue(),{filters:c,sort:u}=o;if(!((k=n.member)!=null&&k.user)||n.member.user.id!==this.client.userID||!n.channel_type||!n.channel_id)return;const m=n.channel_type,g=n.channel_id,f=p0(u),h=um(c),v=V5({atIndex:0,sort:u,targetKey:"pinned_at"});if(!i||!f&&!h||this.options.lockChannelOrder)return;const S=this.client.channel(m,g),x=i.indexOf(S),E=x>=0,N=Jm(S),C=dm(S),I=[...i];if(E&&I.splice(x,1),h&&!C&&(c!=null&&c.archived)||h&&C&&!(c!=null&&c.archived)){this.setChannels(I);return}let A=null;(v===1||v===-1&&!N)&&(A=Q5({channels:I}));const _=typeof A=="number"?A+1:0;i[_]!==S&&(I.splice(_,0,S),this.setChannels(I))},this.subscriptionOrOverride=n=>{const o=Ax[n.type],i=this.eventHandlers.get(o),c=this.eventHandlerOverrides.get(o);if(c&&typeof c=="function"){c(this.setChannels,n);return}i&&typeof i=="function"&&i(n)},this.registerSubscriptions=()=>{if(!this.hasSubscriptions)for(const n of Object.keys(Ax))this.addUnsubscribeFunction(this.client.on(n,this.subscriptionOrOverride).unsubscribe)},this.id=`channel-manager-${Ur()}`,this.client=a,this.state=new Yn({channels:[],pagination:{isLoading:!1,isLoadingNext:!1,hasNext:!1,filters:{},sort:{},options:Th},initialized:!1,error:void 0}),this.setEventHandlerOverrides(r),this.setOptions(t),this.eventHandlers=new Map(Object.entries({channelDeletedHandler:this.channelDeletedHandler,channelHiddenHandler:this.channelHiddenHandler,channelVisibleHandler:this.channelVisibleHandler,memberUpdatedHandler:this.memberUpdatedHandler,newMessageHandler:this.newMessageHandler,notificationAddedToChannelHandler:this.notificationAddedToChannelHandler,notificationNewMessageHandler:this.notificationNewMessageHandler,notificationRemovedFromChannelHandler:this.notificationRemovedFromChannelHandler}))}},OL={error:1e4,warning:5e3,info:3e3,success:3e3},FL=class{constructor(a={}){this.timeouts=new Map,this.store=new Yn({notifications:[]}),this.config={...a,durations:a.durations||OL}}get notifications(){return this.store.getLatestValue().notifications}get warning(){return this.notifications.filter(a=>a.severity==="warning")}get error(){return this.notifications.filter(a=>a.severity==="error")}get info(){return this.notifications.filter(a=>a.severity==="info")}get success(){return this.notifications.filter(a=>a.severity==="success")}add({message:a,origin:r,options:t={}}){const n=Ur(),o=Date.now(),i={id:n,message:a,origin:r,severity:t.severity||"info",createdAt:o,expiresAt:t.duration?o+t.duration:void 0,autoClose:t.autoClose??!0,actions:t.actions,metadata:t.metadata};if(this.store.partialNext({notifications:[...this.store.getLatestValue().notifications,i]}),i.autoClose&&i.expiresAt){const c=setTimeout(()=>{this.remove(n)},t.duration||this.config.durations[i.severity]);this.timeouts.set(n,c)}return n}addError({message:a,origin:r,options:t}){return this.add({message:a,origin:r,options:{...t,severity:"error"}})}addWarning({message:a,origin:r,options:t}){return this.add({message:a,origin:r,options:{...t,severity:"warning"}})}addInfo({message:a,origin:r,options:t}){return this.add({message:a,origin:r,options:{...t,severity:"info"}})}addSuccess({message:a,origin:r,options:t}){return this.add({message:a,origin:r,options:{...t,severity:"success"}})}remove(a){const r=this.timeouts.get(a);r&&(clearTimeout(r),this.timeouts.delete(a)),this.store.partialNext({notifications:this.store.getLatestValue().notifications.filter(t=>t.id!==a)})}clear(){this.timeouts.forEach(a=>clearTimeout(a)),this.timeouts.clear(),this.store.partialNext({notifications:[]})}};function Ph(a){return typeof a=="string"||a instanceof String}var wy=class hl{constructor(r,t,n){var i;this.nextRequestAbortController=null,this._messageComposerSetupState=new Yn({setupFunction:null}),this._getConnectionID=()=>{var c,u;return((c=this.wsConnection)==null?void 0:c.connectionID)||((u=this.wsFallback)==null?void 0:u.connectionID)},this._hasConnectionID=()=>!!this._getConnectionID(),this.connectUser=async(c,u)=>{if(!c.id)throw new Error('The "id" field on the user is missing');if(this.userID===c.id&&this.setUserPromise)return console.warn("Consecutive calls to connectUser is detected, ideally you should only call this function once in your app."),this.setUserPromise;if(this.userID)throw new Error("Use client.disconnect() before trying to connect as a different user. connectUser was called twice.");(this._isUsingServerAuth()||this.node)&&!this.options.allowServerSideConnect&&console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),this.userID=c.id,this.anonymous=!1;const m=this._setToken(c,u);this._setUser(c);const g=this.openConnection();this.setUserPromise=Promise.all([m,g]).then(f=>f[1]);try{return await this.setUserPromise}catch(f){throw this.persistUserOnConnectionFailure?this.closeConnection():this.disconnectUser(),f}},this.setUser=this.connectUser,this._setToken=(c,u)=>this.tokenManager.setTokenOrProvider(u,c),this.closeConnection=async c=>{var u,m,g;return this.cleaningIntervalRef!=null&&(clearInterval(this.cleaningIntervalRef),this.cleaningIntervalRef=void 0),await Promise.all([(u=this.wsConnection)==null?void 0:u.disconnect(c),(m=this.wsFallback)==null?void 0:m.disconnect(c)]),(g=this.offlineDb)==null||g.executeQuerySafely(async f=>{this.userID&&await f.upsertUserSyncStatus({userId:this.userID,lastSyncedAt:new Date().toString()})},{method:"upsertUserSyncStatus"}),Promise.resolve()},this.createChannelManager=({eventHandlerOverrides:c={},options:u={}})=>new zL({client:this,eventHandlerOverrides:c,options:u}),this.openConnection=()=>{var c,u,m;if(!this.userID)throw Error("User is not set on client, use client.connectUser or client.connectAnonymousUser instead");if((c=this.wsConnection)!=null&&c.isConnecting&&this.wsPromise)return this.logger("info","client:openConnection() - connection already in progress",{tags:["connection","client"]}),this.wsPromise;if(((u=this.wsConnection)!=null&&u.isHealthy||(m=this.wsFallback)!=null&&m.isHealthy())&&this._hasConnectionID()){this.logger("info","client:openConnection() - openConnection called twice, healthy connection already exists",{tags:["connection","client"]});return}return this.clientID=`${this.userID}--${xi()}`,this.wsPromise=this.connect(),this._startCleaning(),this.wsPromise},this._setupConnection=this.openConnection,this._normalizeDate=c=>{if(c instanceof Date&&(c=c.toISOString()),c==="")throw new Error("Don't pass blank string for since, use null instead if resetting the token revoke");return c},this.disconnectUser=c=>{this.logger("info","client:disconnect() - Disconnecting the client",{tags:["connection","client"]}),delete this.user,delete this._user,delete this.userID,this.anonymous=!1;const u=this.closeConnection(c);for(const m of Object.values(this.activeChannels))m._disconnect();return this.activeChannels={},this.state=new Ex({client:this}),this.threads.resetState(),setTimeout(this.tokenManager.reset),u},this.disconnect=this.disconnectUser,this.connectAnonymousUser=()=>{(this._isUsingServerAuth()||this.node)&&!this.options.allowServerSideConnect&&console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),this.anonymous=!0,this.userID=xi();const c={id:this.userID,anon:!0};return this._setToken(c,""),this._setUser(c),this._setupConnection()},this.setAnonymousUser=this.connectAnonymousUser,this.doAxiosRequest=async(c,u,m,g={})=>{var h;await this.tokenManager.tokenReady();const f=this._enrichAxiosOptions(g);try{let v;switch(this._logApiRequest(c,u,m,f),c){case"get":v=await this.axiosInstance.get(u,f);break;case"delete":v=await this.axiosInstance.delete(u,f);break;case"post":v=await this.axiosInstance.post(u,m,f);break;case"postForm":v=await this.axiosInstance.postForm(u,m,f);break;case"put":v=await this.axiosInstance.put(u,m,f);break;case"patch":v=await this.axiosInstance.patch(u,m,f);break;case"options":v=await this.axiosInstance.options(u,f);break;default:throw new Error("Invalid request type")}return this._logApiResponse(c,u,v),this.consecutiveFailures=0,this.handleResponse(v)}catch(v){if(v.client_request_id=(h=f.headers)==null?void 0:h["x-client-request-id"],this._logApiError(c,u,v),this.consecutiveFailures+=1,v.response)return v.response.data.code===od.TOKEN_EXPIRED&&!this.tokenManager.isStatic()?(this.consecutiveFailures>1&&await $s(Qm(this.consecutiveFailures)),this.tokenManager.loadToken(),await this.doAxiosRequest(c,u,m,g)):this.handleResponse(v.response);throw v}},this.dispatchEvent=c=>{var f;c.received_at||(c.received_at=new Date);const u=this._handleClientEvent(c),m=c.cid,g=m?this.activeChannels[m]:void 0;g&&g._handleChannelEvent(c),this._callClientListeners(c),g&&g._callChannelListeners(c),u.forEach(h=>h()),(f=this.offlineDb)==null||f.executeQuerySafely(h=>h.handleEvent({event:c}),{method:`handleEvent;${c.type}`})},this.handleEvent=c=>{const u=c.data,m=JSON.parse(u);this.dispatchEvent(m)},this._updateMemberWatcherReferences=c=>{const u=this.state.userChannelReferences[c.id]||{};for(const m in u){const g=this.activeChannels[m];g!=null&&g.state&&(g.state.members[c.id]&&(g.state.members[c.id].user=c),g.state.watchers[c.id]&&(g.state.watchers[c.id]=c),g.state.read[c.id]&&(g.state.read[c.id].user=c))}},this._updateUserReferences=this._updateMemberWatcherReferences,this._updateUserMessageReferences=c=>{const u=this.state.userChannelReferences[c.id]||{};for(const m in u){const g=this.activeChannels[m];if(!g)continue;const f=g.state;f==null||f.updateUserMessages(c)}},this._deleteUserMessageReference=(c,u=!1)=>{const m=this.state.userChannelReferences[c.id]||{};for(const g in m){const f=this.activeChannels[g];if(f){const h=f.state;h==null||h.deleteUserMessages(c,u)}}},this._handleUserEvent=c=>{if(c.user){if(c.type==="user.presence.changed"||c.type==="user.updated"){if(c.user.id===this.userID){const u={...this.user},m={...this._user};for(const g in this.user){if(g in c.user||mT(g))continue;const f=g;delete u[f],delete m[f]}for(const g in m){const f=g;f in c.user&&(m[f]=c.user[f])}this._user=m,this.user={...u,...c.user}}this.state.updateUser(c.user),this._updateMemberWatcherReferences(c.user)}c.type==="user.updated"&&this._updateUserMessageReferences(c.user),c.type==="user.deleted"&&c.user.deleted_at&&(c.mark_messages_deleted||c.hard_delete)&&this._deleteUserMessageReference(c.user,c.hard_delete)}},this._callClientListeners=c=>{const u=this,m=[];u.listeners.all&&m.push(...u.listeners.all),u.listeners[c.type]&&m.push(...u.listeners[c.type]);for(const g of m)g(c)},this.recoverState=async()=>{this.logger("info",`client:recoverState() - Start of recoverState with connectionID ${this._getConnectionID()}`,{tags:["connection"]});const c=Object.keys(this.activeChannels);c.length&&this.recoverStateOnReconnect?(this.logger("info",`client:recoverState() - Start the querying of ${c.length} channels`,{tags:["connection","client"]}),await this.queryChannels({cid:{$in:c}},{last_message_at:-1},{limit:30}),this.logger("info","client:recoverState() - Querying channels finished",{tags:["connection","client"]}),this.dispatchEvent({type:"connection.recovered"})):this.dispatchEvent({type:"connection.recovered"}),this.wsPromise=Promise.resolve(),this.setUserPromise=Promise.resolve()},this.getChannelByMembers=(c,u)=>{const m=(u.members??[]).map(v=>typeof v=="string"?v:v.user_id??""),g=m.sort().join(","),f=cy(c,m);if(!f)throw Error("Please specify atleast one member when creating unique conversation");for(const v in this.activeChannels){const S=this.activeChannels[v];if(!S.disconnected&&(v===f||v.indexOf(`${c}:!members-`)===0&&Object.keys(S.state.members).sort().join(",")===g))return S}const h=new _i(this,c,void 0,u);return this._cacheEnabled()&&(this.activeChannels[f]=h),h},this.getChannelById=(c,u,m)=>{if(typeof u=="string"&&~u.indexOf(":"))throw Error(`Invalid channel id ${u}, can't contain the : character`);const g=`${c}:${u}`;if(g in this.activeChannels&&this.activeChannels[g]&&!this.activeChannels[g].disconnected){const h=this.activeChannels[g];return Object.keys(m).length>0&&(h.data={...h.data,...m},h._data={...h._data,...m}),h}const f=new _i(this,c,u,m);return this._cacheEnabled()&&(this.activeChannels[f.cid]=f),f},this.updateUsers=this.upsertUsers,this.updateUser=this.upsertUser,this._unblockMessage=this.unblockMessage,this.markAllRead=this.markChannelsRead,this._isUsingServerAuth=()=>!!this.secret,this._cacheEnabled=()=>!this._isUsingServerAuth()||!this.options.disableCache,this._buildWSPayload=c=>JSON.stringify({user_id:this.userID,user_details:this._user,device:this.options.device,client_request_id:c}),this.setMessageComposerSetupFunction=c=>{this._messageComposerSetupState.partialNext({setupFunction:c})},this.key=r,this.listeners={},this.state=new Ex({client:this}),this.mutedChannels=[],this.mutedUsers=[],this.moderation=new CL(this),this.notifications=(n==null?void 0:n.notifications)??new FL,t&&Ph(t)&&(this.secret=t);const o=n||(t&&!Ph(t)?t:{});this.browser=typeof o.browser<"u"?o.browser:typeof window<"u",this.node=!this.browser,this.options={timeout:3e3,withCredentials:!1,warmUp:!1,recoverStateOnReconnect:!0,disableCache:!1,wsUrlParams:new URLSearchParams({}),...o},this.node&&!this.options.httpsAgent&&(this.options.httpsAgent=new JR.default.Agent({keepAlive:!0,keepAliveMsecs:3e3})),this.axiosInstance=_d.create(this.options),this.setBaseURL(this.options.baseURL||"https://chat.stream-io-api.com"),typeof process<"u"&&"env"in process&&yh.STREAM_LOCAL_TEST_RUN&&this.setBaseURL("http://localhost:3030"),typeof process<"u"&&"env"in process&&yh.STREAM_LOCAL_TEST_HOST&&this.setBaseURL("http://"+yh.STREAM_LOCAL_TEST_HOST),this.wsConnection=null,this.wsPromise=null,this.setUserPromise=null,this.activeChannels={},this.configs={},this.anonymous=!1,this.persistUserOnConnectionFailure=(i=this.options)==null?void 0:i.persistUserOnConnectionFailure,this.tokenManager=new yL(this.secret),this.consecutiveFailures=0,this.insightMetrics=new iL,this.defaultWSTimeoutWithFallback=6*1e3,this.defaultWSTimeout=15*1e3,this.axiosInstance.defaults.paramsSerializer=vT,this.logger=u0(o.logger)?o.logger:()=>null,this.recoverStateOnReconnect=this.options.recoverStateOnReconnect,this.threads=new kL({client:this}),this.polls=new LL({client:this})}static getInstance(r,t,n){return hl._instance||(typeof t=="string"?hl._instance=new hl(r,t,n):hl._instance=new hl(r,t)),hl._instance}setOfflineDBApi(r){this.offlineDb||(this.offlineDb=r)}devToken(r){return gL(r)}getAuthType(){return this.anonymous?"anonymous":"jwt"}setBaseURL(r){this.baseURL=r,this.wsBaseURL=this.baseURL.replace("http","ws").replace(":3030",":8800")}_setUser(r){this.user=r,this.userID=r.id,this._user={...r}}async updateAppSettings(r){const t=r.apn_config;return t!=null&&t.p12_cert&&(r={...r,apn_config:{...t,p12_cert:Buffer.from(t.p12_cert).toString("base64")}}),await this.patch(this.baseURL+"/app",r)}async revokeTokens(r){return await this.updateAppSettings({revoke_tokens_issued_before:this._normalizeDate(r)})}async revokeUserToken(r,t){return await this.revokeUsersToken([r],t)}async revokeUsersToken(r,t){t===void 0?t=new Date().toISOString():t=this._normalizeDate(t);const n=[];for(const o of r)n.push({id:o,set:{revoke_tokens_issued_before:t}});return await this.partialUpdateUsers(n)}async getAppSettings(){return this.appSettingsPromise=this.get(this.baseURL+"/app"),await this.appSettingsPromise}async testPushSettings(r,t={}){return await this.post(this.baseURL+"/check_push",{user_id:r,...t.messageID?{message_id:t.messageID}:{},...t.apnTemplate?{apn_template:t.apnTemplate}:{},...t.firebaseTemplate?{firebase_template:t.firebaseTemplate}:{},...t.firebaseDataTemplate?{firebase_data_template:t.firebaseDataTemplate}:{},...t.skipDevices?{skip_devices:!0}:{},...t.pushProviderName?{push_provider_name:t.pushProviderName}:{},...t.pushProviderType?{push_provider_type:t.pushProviderType}:{}})}async testSQSSettings(r={}){return await this.post(this.baseURL+"/check_sqs",r)}async testSNSSettings(r={}){return await this.post(this.baseURL+"/check_sns",r)}async setGuestUser(r){let t;this.anonymous=!0;try{t=await this.post(this.baseURL+"/guest",{user:r})}catch(m){throw this.anonymous=!1,m}this.anonymous=!1;const{created_at:n,updated_at:o,last_active:i,online:c,...u}=t.user;return await this.connectUser(u,t.access_token)}createToken(r,t,n){if(this.secret==null)throw Error("tokens can only be created server-side using the API Secret");const o={};return t&&(o.exp=t),n&&(o.iat=n),xw(this.secret,r,o,{})}on(r,t){const n=t?r:"all",o=t||r;return n in this.listeners||(this.listeners[n]=[]),this.logger("info",`Attaching listener for ${n} event`,{tags:["event","client"]}),this.listeners[n].push(o),{unsubscribe:()=>{this.logger("info",`Removing listener for ${n} event`,{tags:["event","client"]}),this.listeners[n]=this.listeners[n].filter(i=>i!==o)}}}off(r,t){const n=t?r:"all",o=t||r;n in this.listeners||(this.listeners[n]=[]),this.logger("info",`Removing listener for ${n} event`,{tags:["event","client"]}),this.listeners[n]=this.listeners[n].filter(i=>i!==o)}_logApiRequest(r,t,n,o){this.logger("info",`client: ${r} - Request - ${t}`,{tags:["api","api_request","client"],url:t,payload:n,config:o})}_logApiResponse(r,t,n){this.logger("info",`client:${r} - Response - url: ${t} > status ${n.status}`,{tags:["api","api_response","client"],url:t,response:n})}_logApiError(r,t,n){this.logger("error",`client:${r} - Error - url: ${t}`,{tags:["api","api_response","client"],url:t,error:n})}get(r,t){return this.doAxiosRequest("get",r,null,{params:t})}put(r,t){return this.doAxiosRequest("put",r,t)}post(r,t){return this.doAxiosRequest("post",r,t)}patch(r,t){return this.doAxiosRequest("patch",r,t)}delete(r,t){return this.doAxiosRequest("delete",r,null,{params:t})}sendFile(r,t,n,o,i){const c=pT(t,n,o||"multipart/form-data");return i!=null&&c.append("user",JSON.stringify(i)),this.doAxiosRequest("postForm",r,c,{headers:c.getHeaders?c.getHeaders():{},config:{timeout:0,maxContentLength:1/0,maxBodyLength:1/0}})}errorFromResponse(r){const t=typeof r.data.code<"u"?`StreamChat error code ${r.data.code}: ${r.data.message}`:`StreamChat error HTTP code: ${r.status}`;return new wP(t,{code:r.data.code??null,response:r,status:r.status})}handleResponse(r){const t=r.data;if(wL(r))throw this.errorFromResponse(r);return t}_handleClientEvent(r){var o,i,c;const t=this,n=[];if(this.logger("info",`client:_handleClientEvent - Received event of type { ${r.type} }`,{tags:["event","client"],event:r}),(r.type==="user.presence.changed"||r.type==="user.updated"||r.type==="user.deleted")&&this._handleUserEvent(r),r.type==="health.check"&&r.me&&(t.user=r.me,t.state.updateUser(r.me),t.mutedChannels=r.me.channel_mutes,t.mutedUsers=r.me.mutes),r.channel&&r.type==="notification.message_new"){const{channel:u}=r;this._addChannelConfig(u)}if(r.type==="notification.channel_mutes_updated"&&((o=r.me)!=null&&o.channel_mutes)&&(this.mutedChannels=r.me.channel_mutes),r.type==="notification.mutes_updated"&&((i=r.me)!=null&&i.mutes)&&(this.mutedUsers=r.me.mutes),r.type==="notification.mark_read"&&r.unread_channels===0&&Object.keys(this.activeChannels).forEach(m=>this.activeChannels[m].state.unreadCount=0),(r.type==="channel.deleted"||r.type==="notification.channel_deleted")&&r.cid){const{cid:u}=r;t.state.deleteAllChannelReference(u),(c=this.activeChannels[r.cid])==null||c._disconnect(),n.push(()=>{u&&delete this.activeChannels[u]})}return n}_muteStatus(r){var n;let t;for(let o=0;o<this.mutedChannels.length;o++){const i=this.mutedChannels[o];if(((n=i.channel)==null?void 0:n.cid)===r){t={muted:i.expires?new Date(i.expires).getTime()>new Date().getTime():!0,createdAt:i.created_at?new Date(i.created_at):new Date,expiresAt:i.expires?new Date(i.expires):null};break}}return t||{muted:!1,createdAt:null,expiresAt:null}}async connect(){if(!this.userID||!this._user)throw Error("Call connectUser or connectAnonymousUser before starting the connection");if(!this.wsBaseURL)throw Error("Websocket base url not set");if(!this.clientID)throw Error("clientID is not set");!this.wsConnection&&(this.options.warmUp||this.options.enableInsights)&&this._sayHi(),this.options.wsConnection&&this.node?(this.options.wsConnection.setClient(this),this.wsConnection=this.options.wsConnection):this.wsConnection=new pL({client:this});try{return this.wsFallback?await this.wsFallback.connect():await this.wsConnection.connect(this.options.enableWSFallback?this.defaultWSTimeoutWithFallback:this.defaultWSTimeout)}catch(r){if(this.options.enableWSFallback&&EL(r)&&bT())return this.logger("info","client:connect() - WS failed, fallback to longpoll",{tags:["connection","client"]}),this.dispatchEvent({type:"transport.changed",mode:"longpoll"}),this.wsConnection._destroyCurrentWSConnection(),this.wsConnection.disconnect().then(),this.wsFallback=new SL({client:this}),await this.wsFallback.connect();throw r}}_sayHi(){const r=xi(),t={headers:{"x-client-request-id":r}};this.doAxiosRequest("get",this.baseURL+"/hi",null,t).catch(n=>{this.options.enableInsights&&ld("http_hi_failed",{api_key:this.key,err:n,client_request_id:r})})}async queryUsers(r,t=[],n={}){const o={presence:!1};await this.wsPromise,this._hasConnectionID()||(o.presence=!1);const i=await this.get(this.baseURL+"/users",{payload:{filter_conditions:r,sort:zn(t),...o,...n}});return this.state.updateUsers(i.users),i}async queryBannedUsers(r={},t=[],n={}){return await this.get(this.baseURL+"/query_banned_users",{payload:{filter_conditions:r,sort:zn(t),...n}})}async queryMessageFlags(r={},t={}){return await this.get(this.baseURL+"/moderation/flags/message",{payload:{filter_conditions:r,...t}})}async queryChannelsRequest(r,t=[],n={}){const o={state:!0,watch:!0,presence:!1};await this.wsPromise,this._hasConnectionID()||(o.watch=!1);const i={filter_conditions:r,sort:zn(t),...o,...n};return(await this.post(this.baseURL+"/channels",i)).channels}async queryChannels(r,t=[],n={},o={}){var c;const i=await this.queryChannelsRequest(r,t,n);return this.dispatchEvent({type:"channels.queried",queriedChannels:{channels:i,isLatestMessageSet:!0}}),i!=null&&i.length&&((c=this.offlineDb)!=null&&c.upsertChannels)&&await this.offlineDb.upsertChannels({channels:i,isLatestMessagesSet:!0}),this.hydrateActiveChannels(i,o,n)}async queryReactions(r,t,n=[],o={}){var c;const i={filter:t,sort:zn(n),...o};if((c=this.offlineDb)!=null&&c.getReactions&&!o.next)try{const u=await this.offlineDb.getReactions({messageId:r,filters:t,sort:n,limit:o.limit});u&&this.dispatchEvent({type:"offline_reactions.queried",offlineReactions:u})}catch(u){this.logger("warn","An error has occurred while querying offline reactions",{error:u})}return await this.wsPromise,await this.post(this.baseURL+"/messages/"+encodeURIComponent(r)+"/reactions",i)}hydrateActiveChannels(r=[],t={},n){const{skipInitialization:o,offlineMode:i=!1}=t,c=[];for(const u of r){this._addChannelConfig(u.channel);const m=this.channel(u.channel.type,u.channel.id);m.data=u.channel,m.offlineMode=i,m.initialized=!i,m.push_preferences=u.push_preferences;let g;if(o===void 0){const{messageSet:f}=m._initializeState(u,"latest");g=f}else if(!o.includes(u.channel.id)){m.state.clearMessages();const{messageSet:f}=m._initializeState(u,"latest");g=f}g&&(g.pagination={...g.pagination,...Z5({parentSet:g,requestedPageSize:(n==null?void 0:n.message_limit)||KR,returnedPage:u.messages,logger:this.logger})},this.polls.hydratePollCache(u.messages,!0)),u.draft&&m.messageComposer.initState({composition:u.draft}),c.push(m)}return c}async search(r,t,n={}){if(n.offset&&n.next)throw Error("Cannot specify offset with next");const o={filter_conditions:r,...n,sort:n.sort?zn(n.sort):void 0};if(typeof t=="string")o.query=t;else if(typeof t=="object")o.message_filter_conditions=t;else throw Error(`Invalid type ${typeof t} for query parameter`);return await this.wsPromise,await this.get(this.baseURL+"/search",{payload:o})}setLocalDevice(r){var t,n,o;if((t=this.wsConnection)!=null&&t.isConnecting&&this.wsPromise||((n=this.wsConnection)!=null&&n.isHealthy||(o=this.wsFallback)!=null&&o.isHealthy())&&this._hasConnectionID())throw new Error("you can only set device before opening a websocket connection");this.options.device=r}async addDevice(r,t,n,o){return await this.post(this.baseURL+"/devices",{id:r,push_provider:t,...n!=null?{user_id:n}:{},...o!=null?{push_provider_name:o}:{}})}async getDevices(r){return await this.get(this.baseURL+"/devices",r?{user_id:r}:{})}async getUnreadCount(r){return await this.get(this.baseURL+"/unread",r?{user_id:r}:{})}async getUnreadCountBatch(r){return await this.post(this.baseURL+"/unread_batch",{user_ids:r})}async setPushPreferences(r){return await this.post(this.baseURL+"/push_preferences",{preferences:r})}async removeDevice(r,t){return await this.delete(this.baseURL+"/devices",{id:r,...t?{user_id:t}:{}})}getRateLimits(r){const{serverSide:t,web:n,android:o,ios:i,endpoints:c}=r||{};return this.get(this.baseURL+"/rate_limits",{server_side:t,web:n,android:o,ios:i,endpoints:c?c.join(","):void 0})}_addChannelConfig({cid:r,config:t}){this._cacheEnabled()&&(this.configs[r]=t)}channel(r,t,n={}){var o;if(!this.userID&&!this._isUsingServerAuth())throw Error("Call connectUser or connectAnonymousUser before creating a channel");if(~r.indexOf(":"))throw new Error(`Invalid channel group ${r}, can't contain the : character`);return t&&typeof t=="object"?this.getChannelByMembers(r,t):!t&&typeof n=="object"&&((o=n.members)!=null&&o.length)?this.getChannelByMembers(r,n):t?this.getChannelById(r,t,n):new _i(this,r,void 0,n)}async partialUpdateUser(r){return await this.partialUpdateUsers([r])}async upsertUsers(r){const t={};for(const n of r){if(!n.id)throw Error("User ID is required when updating a user");t[n.id]=n}return await this.post(this.baseURL+"/users",{users:t})}upsertUser(r){return this.upsertUsers([r])}async partialUpdateUsers(r){for(const t of r)if(!t.id)throw Error("User ID is required when updating a user");return await this.patch(this.baseURL+"/users",{users:r})}async deleteUser(r,t){return await this.delete(this.baseURL+`/users/${encodeURIComponent(r)}`,t)}async restoreUsers(r){return await this.post(this.baseURL+"/users/restore",{user_ids:r})}async reactivateUser(r,t){return await this.post(this.baseURL+`/users/${encodeURIComponent(r)}/reactivate`,{...t})}async reactivateUsers(r,t){return await this.post(this.baseURL+"/users/reactivate",{user_ids:r,...t})}async deactivateUser(r,t){return await this.post(this.baseURL+`/users/${encodeURIComponent(r)}/deactivate`,{...t})}async deactivateUsers(r,t){return await this.post(this.baseURL+"/users/deactivate",{user_ids:r,...t})}async exportUser(r,t){return await this.get(this.baseURL+`/users/${encodeURIComponent(r)}/export`,{...t})}async banUser(r,t){return await this.post(this.baseURL+"/moderation/ban",{target_user_id:r,...t})}async unbanUser(r,t){return await this.delete(this.baseURL+"/moderation/ban",{target_user_id:r,...t})}async shadowBan(r,t){return await this.banUser(r,{shadow:!0,...t})}async removeShadowBan(r,t){return await this.unbanUser(r,{shadow:!0,...t})}async blockUser(r,t){return await this.post(this.baseURL+"/users/block",{blocked_user_id:r,...t?{user_id:t}:{}})}async getBlockedUsers(r){return await this.get(this.baseURL+"/users/block",{...r?{user_id:r}:{}})}async unBlockUser(r,t){return await this.post(this.baseURL+"/users/unblock",{blocked_user_id:r,...t?{user_id:t}:{}})}async muteUser(r,t,n={}){return await this.post(this.baseURL+"/moderation/mute",{target_id:r,...t?{user_id:t}:{},...n})}async unmuteUser(r,t){return await this.post(this.baseURL+"/moderation/unmute",{target_id:r,...t?{user_id:t}:{}})}userMuteStatus(r){if(!this.user||!this.wsPromise)throw new Error("Make sure to await connectUser() first.");for(let t=0;t<this.mutedUsers.length;t+=1)if(this.mutedUsers[t].target.id===r)return!0;return!1}async flagMessage(r,t={}){return await this.post(this.baseURL+"/moderation/flag",{target_message_id:r,...t})}async flagUser(r,t={}){return await this.post(this.baseURL+"/moderation/flag",{target_user_id:r,...t})}async unflagMessage(r,t={}){return await this.post(this.baseURL+"/moderation/unflag",{target_message_id:r,...t})}async unflagUser(r,t={}){return await this.post(this.baseURL+"/moderation/unflag",{target_user_id:r,...t})}async _queryFlags(r={},t={}){return await this.post(this.baseURL+"/moderation/flags",{filter_conditions:r,...t})}async _queryFlagReports(r={},t={}){return await this.post(this.baseURL+"/moderation/reports",{filter_conditions:r,...t})}async _reviewFlagReport(r,t,n={}){return await this.patch(this.baseURL+`/moderation/reports/${encodeURIComponent(r)}`,{review_result:t,...n})}async unblockMessage(r,t={}){return await this.post(this.baseURL+"/moderation/unblock_message",{target_message_id:r,...t})}async markChannelsRead(r={}){await this.post(this.baseURL+"/channels/read",{...r})}createCommand(r){return this.post(this.baseURL+"/commands",r)}getCommand(r){return this.get(this.baseURL+`/commands/${encodeURIComponent(r)}`)}updateCommand(r,t){return this.put(this.baseURL+`/commands/${encodeURIComponent(r)}`,t)}deleteCommand(r){return this.delete(this.baseURL+`/commands/${encodeURIComponent(r)}`)}listCommands(){return this.get(this.baseURL+"/commands")}createChannelType(r){const t=Object.assign({},{commands:["all"]},r);return this.post(this.baseURL+"/channeltypes",t)}getChannelType(r){return this.get(this.baseURL+`/channeltypes/${encodeURIComponent(r)}`)}updateChannelType(r,t){return this.put(this.baseURL+`/channeltypes/${encodeURIComponent(r)}`,t)}DBDeleteChannelType(r){return this.delete(this.baseURL+`/channeltypes/${encodeURIComponent(r)}`)}listChannelTypes(){return this.get(this.baseURL+"/channeltypes")}async translateMessage(r,t){return await this.post(this.baseURL+`/messages/${encodeURIComponent(r)}/translate`,{language:t})}async translate(r,t,n){return await this.post(this.baseURL+"/translate",{text:r,source_language:n,destination_language:t})}_normalizeExpiration(r){let t=null;if(typeof r=="number"){const n=new Date;n.setSeconds(n.getSeconds()+r),t=n.toISOString()}else Ph(r)?t=r:r instanceof Date&&(t=r.toISOString());return t}_validateAndGetMessageId(r,t){let n;if(typeof r=="string")n=r;else{if(!r.id)throw Error(t);n=r.id}return n}pinMessage(r,t,n,o){const i=this._validateAndGetMessageId(r,"Please specify the message id when calling unpinMessage");return this.partialUpdateMessage(i,{set:{pinned:!0,pin_expires:this._normalizeExpiration(t),pinned_at:this._normalizeExpiration(o)}},n)}unpinMessage(r,t){const n=this._validateAndGetMessageId(r,"Please specify the message id when calling unpinMessage");return this.partialUpdateMessage(n,{set:{pinned:!1}},t)}async updateMessage(r,t,n){if(!r.id)throw Error("Please specify the message.id when calling updateMessage");const o=$5(r);return typeof t=="string"?o.user_id=t:typeof(t==null?void 0:t.id)=="string"&&(o.user_id=t.id),await this.post(this.baseURL+`/messages/${encodeURIComponent(r.id)}`,{message:o,...n})}async partialUpdateMessage(r,t,n,o){if(!r)throw Error("Please specify the message.id when calling partialUpdateMessage");let i;return typeof n=="string"?i={id:n}:typeof(n==null?void 0:n.id)=="string"&&(i={id:n.id}),await this.put(this.baseURL+`/messages/${encodeURIComponent(r)}`,{...t,...o,user:i})}async deleteMessage(r,t){try{if(this.offlineDb)return t?await this.offlineDb.hardDeleteMessage({id:r}):await this.offlineDb.softDeleteMessage({id:r}),await this.offlineDb.queueTask({task:{messageId:r,payload:[r,t],type:"delete-message"}})}catch(n){this.logger("error","offlineDb:deleteMessage",{tags:["channel","offlineDb"],error:n})}return this._deleteMessage(r,t)}async _deleteMessage(r,t){let n={};return t&&(n={hard:!0}),await this.delete(this.baseURL+`/messages/${encodeURIComponent(r)}`,n)}async undeleteMessage(r,t){return await this.post(this.baseURL+`/messages/${encodeURIComponent(r)}/undelete`,{undeleted_by:t})}async getMessage(r,t){return await this.get(this.baseURL+`/messages/${encodeURIComponent(r)}`,{...t})}async queryThreads(r={}){const t={limit:10,participant_limit:10,reply_limit:3,watch:!0,...r},n={...t};t.filter&&Object.keys(t.filter).length>0&&(n.filter=t.filter),t.sort&&(Array.isArray(t.sort)?t.sort.length>0:Object.keys(t.sort).length>0)&&(n.sort=zn(t.sort));const o=await this.post(`${this.baseURL}/threads`,n);return{threads:o.threads.map(i=>new gd({client:this,threadData:i})),next:o.next}}async getThread(r,t={}){if(!r)throw new Error("Please specify the messageId when calling getThread");const n={participant_limit:100,reply_limit:3,watch:!0,...t},o=await this.get(`${this.baseURL}/threads/${encodeURIComponent(r)}`,n);return new gd({client:this,threadData:o.thread})}async partialUpdateThread(r,t){if(!r)throw Error("Please specify the message id when calling partialUpdateThread");const n=["created_at","id","last_message_at","type","updated_at","user","reply_count","participants","channel","custom"];for(const o in{...t.set,...t.unset})if(n.includes(o))throw Error(`You cannot set ${o} field on Thread object. ${o} is reserved for server-side use. Please omit ${o} from your set object.`);return await this.patch(`${this.baseURL}/threads/${encodeURIComponent(r)}`,t)}getUserAgent(){if(this.userAgent)return this.userAgent;const r="9.2.0",t="browser-esm";let n="";this.sdkIdentifier?n=`stream-chat-${this.sdkIdentifier.name}-v${this.sdkIdentifier.version}-llc-v${r}`:n=`stream-chat-js-v${r}-${this.node?"node":"browser"}`;const{os:o,model:i}=this.deviceIdentifier??{};return[["os",o],["device_model",i],["client_bundle",t]].reduce((c,[u,m])=>m&&m.length>0?c.concat(`|${u}=${m}`):c,n)}setUserAgent(r){this.userAgent=r}_enrichAxiosOptions(r={params:{},headers:{},config:{}}){var m;const t=this._getToken(),n=t?{Authorization:t}:void 0;let o=null;this.nextRequestAbortController!==null&&(o=this.nextRequestAbortController.signal,this.nextRequestAbortController=null),(m=r.headers)!=null&&m["x-client-request-id"]||(r.headers={...r.headers,"x-client-request-id":xi()});const{params:i,headers:c,...u}=this.options.axiosRequestConfig||{};return{params:{user_id:this.userID,connection_id:this._getConnectionID(),api_key:this.key,...r.params,...i||{}},headers:{...n,"stream-auth-type":this.getAuthType(),"X-Stream-Client":this.getUserAgent(),...r.headers,...c||{}},...o?{signal:o}:{},...r.config,...u||{}}}_getToken(){return!this.tokenManager||this.anonymous?null:this.tokenManager.getToken()}_startCleaning(){const r=this;this.cleaningIntervalRef==null&&(this.cleaningIntervalRef=setInterval(()=>{for(const t of Object.values(r.activeChannels))t.clean()},500))}verifyWebhook(r,t){return!!this.secret&&hL(r,this.secret,t)}getPermission(r){return this.get(`${this.baseURL}/permissions/${encodeURIComponent(r)}`)}createPermission(r){return this.post(`${this.baseURL}/permissions`,{...r})}updatePermission(r,t){return this.put(`${this.baseURL}/permissions/${encodeURIComponent(r)}`,{...t})}deletePermission(r){return this.delete(`${this.baseURL}/permissions/${encodeURIComponent(r)}`)}listPermissions(){return this.get(`${this.baseURL}/permissions`)}createRole(r){return this.post(`${this.baseURL}/roles`,{name:r})}listRoles(){return this.get(`${this.baseURL}/roles`)}deleteRole(r){return this.delete(`${this.baseURL}/roles/${encodeURIComponent(r)}`)}sync(r,t,n={}){return this.post(`${this.baseURL}/sync`,{channel_cids:r,last_sync_at:t,...n})}async sendUserCustomEvent(r,t){return await this.post(`${this.baseURL}/users/${encodeURIComponent(r)}/event`,{event:t})}createBlockList(r){return this.post(`${this.baseURL}/blocklists`,r)}listBlockLists(r){return this.get(`${this.baseURL}/blocklists`,r)}getBlockList(r,t){return this.get(`${this.baseURL}/blocklists/${encodeURIComponent(r)}`,t)}updateBlockList(r,t){return this.put(`${this.baseURL}/blocklists/${encodeURIComponent(r)}`,t)}deleteBlockList(r,t){return this.delete(`${this.baseURL}/blocklists/${encodeURIComponent(r)}`,t)}exportChannels(r,t={}){const n={channels:r,...t};return this.post(`${this.baseURL}/export_channels`,n)}exportUsers(r){return this.post(`${this.baseURL}/export/users`,r)}exportChannel(r,t){return this.exportChannels([r],t)}getExportChannelStatus(r){return this.get(`${this.baseURL}/export_channels/${encodeURIComponent(r)}`)}campaign(r,t){return r&&typeof r=="object"?new $2(this,null,r):new $2(this,r,t)}segment(r,t,n){return typeof t=="string"?new _x(this,r,t,n):new _x(this,r,null,t)}validateServerSideAuth(){if(!this.secret)throw new Error("Campaigns is a server-side only feature. Please initialize the client with a secret to use this feature.")}createSegment(r,t,n){this.validateServerSideAuth();const o={id:t,type:r,...n};return this.post(this.baseURL+"/segments",o)}createUserSegment(r,t){return this.validateServerSideAuth(),this.createSegment("user",r,t)}createChannelSegment(r,t){return this.validateServerSideAuth(),this.createSegment("channel",r,t)}getSegment(r){return this.validateServerSideAuth(),this.get(this.baseURL+`/segments/${encodeURIComponent(r)}`)}updateSegment(r,t){return this.validateServerSideAuth(),this.put(this.baseURL+`/segments/${encodeURIComponent(r)}`,t)}addSegmentTargets(r,t){this.validateServerSideAuth();const n={target_ids:t};return this.post(this.baseURL+`/segments/${encodeURIComponent(r)}/addtargets`,n)}querySegmentTargets(r,t={},n=[],o={}){return this.validateServerSideAuth(),this.post(this.baseURL+`/segments/${encodeURIComponent(r)}/targets/query`,{filter:t||{},sort:n||[],...o})}removeSegmentTargets(r,t){this.validateServerSideAuth();const n={target_ids:t};return this.post(this.baseURL+`/segments/${encodeURIComponent(r)}/deletetargets`,n)}querySegments(r,t,n={}){return this.validateServerSideAuth(),this.post(this.baseURL+"/segments/query",{filter:r,sort:t,...n})}deleteSegment(r){return this.validateServerSideAuth(),this.delete(this.baseURL+`/segments/${encodeURIComponent(r)}`)}segmentTargetExists(r,t){return this.validateServerSideAuth(),this.get(this.baseURL+`/segments/${encodeURIComponent(r)}/target/${encodeURIComponent(t)}`)}createCampaign(r){return this.validateServerSideAuth(),this.post(this.baseURL+"/campaigns",{...r})}getCampaign(r,t){return this.validateServerSideAuth(),this.get(this.baseURL+`/campaigns/${encodeURIComponent(r)}`,{...t==null?void 0:t.users})}startCampaign(r,t){return this.validateServerSideAuth(),this.post(this.baseURL+`/campaigns/${encodeURIComponent(r)}/start`,{scheduled_for:t==null?void 0:t.scheduledFor,stop_at:t==null?void 0:t.stopAt})}async queryCampaigns(r,t,n){return this.validateServerSideAuth(),await this.post(this.baseURL+"/campaigns/query",{filter:r,sort:t,...n||{}})}updateCampaign(r,t){return this.validateServerSideAuth(),this.put(this.baseURL+`/campaigns/${encodeURIComponent(r)}`,t)}deleteCampaign(r){return this.validateServerSideAuth(),this.delete(this.baseURL+`/campaigns/${encodeURIComponent(r)}`)}stopCampaign(r){return this.validateServerSideAuth(),this.post(this.baseURL+`/campaigns/${encodeURIComponent(r)}/stop`)}enrichURL(r){return this.get(this.baseURL+"/og",{url:r})}getTask(r){return this.get(`${this.baseURL}/tasks/${encodeURIComponent(r)}`)}async deleteChannels(r,t={}){return await this.post(this.baseURL+"/channels/delete",{cids:r,...t})}async deleteUsers(r,t={}){if(typeof t.user<"u"&&!["soft","hard","pruning"].includes(t.user))throw new Error("Invalid delete user options. user must be one of [soft hard pruning]");if(typeof t.conversations<"u"&&!["soft","hard"].includes(t.conversations))throw new Error("Invalid delete user options. conversations must be one of [soft hard]");if(typeof t.messages<"u"&&!["soft","hard","pruning"].includes(t.messages))throw new Error("Invalid delete user options. messages must be one of [soft hard pruning]");return await this.post(this.baseURL+"/users/delete",{user_ids:r,...t})}async _createImportURL(r){return await this.post(this.baseURL+"/import_urls",{filename:r})}async _createImport(r,t={mode:"upsert"}){return await this.post(this.baseURL+"/imports",{path:r,...t})}async _getImport(r){return await this.get(this.baseURL+`/imports/${encodeURIComponent(r)}`)}async _listImports(r){return await this.get(this.baseURL+"/imports",r)}async upsertPushProvider(r){return await this.post(this.baseURL+"/push_providers",{push_provider:r})}async deletePushProvider({type:r,name:t}){return await this.delete(this.baseURL+`/push_providers/${encodeURIComponent(r)}/${encodeURIComponent(t)}`)}async listPushProviders(){return await this.get(this.baseURL+"/push_providers")}createAbortControllerForNextRequest(){return this.nextRequestAbortController=new AbortController}async commitMessage(r){return await this.post(this.baseURL+`/messages/${encodeURIComponent(r)}/commit`)}async createPoll(r,t){return await this.post(this.baseURL+"/polls",{...r,...t?{user_id:t}:{}})}async getPoll(r,t){return await this.get(this.baseURL+`/polls/${encodeURIComponent(r)}`,t?{user_id:t}:{})}async updatePoll(r,t){return await this.put(this.baseURL+"/polls",{...r,...t?{user_id:t}:{}})}async partialUpdatePoll(r,t,n){return await this.patch(this.baseURL+`/polls/${encodeURIComponent(r)}`,{...t,...n?{user_id:n}:{}})}async deletePoll(r,t){return await this.delete(this.baseURL+`/polls/${encodeURIComponent(r)}`,{...t?{user_id:t}:{}})}closePoll(r,t){return this.partialUpdatePoll(r,{set:{is_closed:!0}},t)}async createPollOption(r,t,n){return await this.post(this.baseURL+`/polls/${encodeURIComponent(r)}/options`,{...t,...n?{user_id:n}:{}})}async getPollOption(r,t,n){return await this.get(this.baseURL+`/polls/${encodeURIComponent(r)}/options/${encodeURIComponent(t)}`,n?{user_id:n}:{})}async updatePollOption(r,t,n){return await this.put(this.baseURL+`/polls/${encodeURIComponent(r)}/options`,{...t,...n?{user_id:n}:{}})}async deletePollOption(r,t,n){return await this.delete(this.baseURL+`/polls/${encodeURIComponent(r)}/options/${encodeURIComponent(t)}`,n?{user_id:n}:{})}async castPollVote(r,t,n,o){return await this.post(this.baseURL+`/messages/${encodeURIComponent(r)}/polls/${encodeURIComponent(t)}/vote`,{vote:n,...o?{user_id:o}:{}})}addPollAnswer(r,t,n,o){return this.castPollVote(r,t,{answer_text:n},o)}async removePollVote(r,t,n,o){return await this.delete(this.baseURL+`/messages/${encodeURIComponent(r)}/polls/${encodeURIComponent(t)}/vote/${encodeURIComponent(n)}`,{...o?{user_id:o}:{}})}async queryPolls(r={},t=[],n={},o){const i=o?`?user_id=${o}`:"";return await this.post(this.baseURL+`/polls/query${i}`,{filter:r,sort:zn(t),...n})}async queryPollVotes(r,t={},n=[],o={},i){const c=i?`?user_id=${i}`:"";return await this.post(this.baseURL+`/polls/${encodeURIComponent(r)}/votes${c}`,{filter:t,sort:zn(n),...o})}async queryPollAnswers(r,t={},n=[],o={},i){const c=i?`?user_id=${i}`:"";return await this.post(this.baseURL+`/polls/${encodeURIComponent(r)}/votes${c}`,{filter:{...t,is_answer:!0},sort:zn(n),...o})}async queryMessageHistory(r={},t=[],n={}){return await this.post(this.baseURL+"/messages/history",{filter:r,sort:zn(t),...n})}async updateFlags(r,t,n={}){return await this.post(this.baseURL+"/automod/v1/moderation/update_flags",{message_ids:r,reviewed_by:t,...n})}async queryDrafts(r={}){const t={...r,sort:r.sort?zn(r.sort):void 0};return await this.post(this.baseURL+"/drafts/query",t)}};const Ew=(a,r)=>{const[t,n]=b.useState([]),[o,i]=b.useState([]),[c,u]=b.useState(!0),[m,g]=b.useState(null),[f,h]=b.useState(null),v=b.useRef(null),S=b.useRef(null),x=b.useCallback(async(C=!1)=>{S.current&&S.current.abort(),S.current=new AbortController;try{C||u(!0);const[I,A]=await Promise.all([ur.getPendingProposals(a,r),ur.getSentProposals(a,r)]);S.current.signal.aborted||(n(I.filter(_=>_.status==="pending")),i(A.filter(_=>["pending","countered"].includes(_.status))),g(null),h(new Date))}catch(I){if(I.name==="AbortError")return;g(I.message),C||(n([]),i([]))}finally{S.current.signal.aborted||u(!1)}},[a,r]);b.useEffect(()=>{if(a&&r)return x(),v.current=setInterval(()=>{x(!0)},3e4),()=>{v.current&&clearInterval(v.current),S.current&&S.current.abort()}},[a,r,x]);const E=b.useCallback(()=>{x()},[x]),N=b.useCallback((C,I="add")=>{I==="add"?i(A=>[C,...A]):I==="update"?(n(A=>A.map(_=>_._id===C._id?C:_)),i(A=>A.map(_=>_._id===C._id?C:_))):I==="remove"&&(n(A=>A.filter(_=>_._id!==C._id)),i(A=>A.filter(_=>_._id!==C._id))),h(new Date)},[]);return{pendingProposals:t,sentProposals:o,loading:c,error:m,lastUpdate:f,refetch:E,updateProposalLocally:N}},UL=void 0,WL="frbcaplgmailcom";function jL(a){if(!a)return"";const r=new Date(a),t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}function Xc(a){if(!a)return"";const r=new Date(a),t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0");return`${r.getFullYear()}-${t}-${n}`}function HL(a){let r=a.trim();r=r.replace(/(\d{1,2}):(\d{2})\s*(am|pm)/i,(n,o,i,c)=>`${parseInt(o,10)}:${i} ${c.toUpperCase()}`),r=r.replace(/^(\d{1,2})(\d{2})(am|pm)$/i,(n,o,i,c)=>`${parseInt(o,10)}:${i} ${c.toUpperCase()}`),r=r.replace(/^(\d{1,2})(am|pm)$/i,(n,o,i)=>`${parseInt(o,10)}:00 ${i.toUpperCase()}`),r=r.replace(/(am|pm)$/i," $1"),r=r.replace(/(am|pm)$/i,n=>n.toUpperCase());const t=r.match(/^(\d{1,2}):(\d{2}) (AM|PM)$/i);if(t){const n=t[1],o=t[2],i=t[3].toUpperCase(),c=`${n}:${o} ${i}`;return console.log("normalizeTimeString final:",c),c}return console.log("normalizeTimeString fallback:",r),r}function ym(a){return a.replace(/[^a-zA-Z0-9]/g,"")}async function $L({senderEmail:a,senderName:r,receiverEmail:t,receiverName:n,matchName:o}){try{const i=wy.getInstance(UL),c=await fetch(`${pe}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:ym(a)})}),{token:u}=await c.json();if(!u)throw new Error("Could not get chat token");i.userID||await i.connectUser({id:ym(a),name:r},u);const m=Array.from(new Set([ym(a),ym(t),WL])),g=i.channel("messaging",{members:m,name:o});await g.create(),await g.sendMessage({text:"Chat created for your match proposal!"})}catch(i){console.error("Failed to create chat channel:",i),alert("Failed to create chat channel: "+i.message)}}const Lh=`This is a BETA test match. Matches that are created, scheduled, and confirmed will NOT be played.

`,YL=a=>a.replace(/[–—−]/g,"-").replace(/\s*-\s*/g," - ").trim();function ef({player:a,day:r,slot:t,onClose:n,senderName:o,senderEmail:i,onProposalComplete:c,selectedDivision:u,phase:m}){console.log("MatchProposalModal player prop:",a),console.log("MatchProposalModal phase prop:",m),console.log("MatchProposalModal slot prop:",t,JSON.stringify(t));const[g,f]=b.useState(t),[h,v]=b.useState(""),[S,x]=b.useState(""),[E,N]=b.useState(""),[C,I]=b.useState(!1),[A,_]=b.useState("8 Ball"),[k,B]=b.useState(m==="scheduled"||m==="challenge"?5:7),z=a.locations?a.locations.split(/\r?\n/).map(W=>W.trim()).filter(Boolean):[],M=PI(r),[O,U]=b.useState(M),Z=a.availability[r]||[],V=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][O.getDay()],F=b.useMemo(()=>{if(!t)return[];const W=YL(t);if(console.log("DEBUG: normalized slot:",W),!W.includes(" - "))return[];let[T,G]=W.split(" - ").map(P=>HL(P.trim()));if(console.log("DEBUG: blockStart:",T,"blockEnd:",G),!T||!G)return[];const te=ty(T,G,30);return console.log("DEBUG: generated times:",te),te},[t]);b.useEffect(()=>{v("")},[t]);const{sentProposals:R}=Ew(o,u);function D(W){return R.some(T=>T.receiverName===(W.player?`${W.player.firstName} ${W.player.lastName}`:W.opponentName)&&T.date===Xc(O)&&T.time===h&&T.location===S&&T.phase===m&&T.divisions&&T.divisions.includes(u)&&["pending","countered"].includes(T.status))}a.opponents&&a.opponents.filter(W=>!D(W));const j=()=>{if(!i||!a.email||!h||!S||!O){alert("Please fill in all required fields.");return}if(m==="scheduled"){const T=new Date,G=new Date(O),te=Math.ceil((G-T)/(1e3*60*60*24));if(te<0){alert("⚠️ You cannot schedule a match in the past.");return}if(te<=2&&!window.confirm(`⚠️ WARNING: This match is scheduled for ${te} day(s) from now.

Phase 1 matches must be completed by the end of week 6. Scheduling this close to the deadline may not give enough time to complete the match.

Do you want to continue with this schedule?`))return}const W={senderEmail:i,senderName:o,receiverEmail:a.email,receiverName:a.firstName?`${a.firstName} ${a.lastName}`:a.name,date:Xc(O),time:h,location:S,message:E,gameType:A,raceLength:k,phase:m,divisions:[u]};console.log("Proposal data to send:",W),fetch(`${pe}/api/proposals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)}).then(T=>T.json()).then(T=>{if(console.log("Backend response:",T),T.error)throw new Error(T.error);if($L({senderEmail:i,senderName:o,receiverEmail:a.email,receiverName:a.firstName?`${a.firstName} ${a.lastName}`:a.name,matchName:`${o} vs ${a.firstName?`${a.firstName} ${a.lastName}`:a.name} - ${jL(O)}`}),FI({to_email:a.email,to_name:a.firstName?`${a.firstName} ${a.lastName}`:a.name,from_name:o,from_email:i,day:V,date:Xc(O),time:h,location:S,note:E,gameType:A,raceLength:k,proposalId:T.proposalId}),I(!0),c){const G={_id:T.proposalId,senderEmail:i,senderName:o,receiverEmail:a.email,receiverName:a.firstName?`${a.firstName} ${a.lastName}`:a.name,date:Xc(O),time:h,location:S,message:E,gameType:A,raceLength:k,phase:m,divisions:[u],status:"pending",createdAt:new Date};c(G)}}).catch(T=>{console.error("Failed to send proposal:",T),alert("Failed to send proposal: "+T.message)})},X=()=>{I(!1),n(),c&&c()};return e.createElement(e.Fragment,null,e.createElement(Bt,{open:!0,onClose:n,title:e.createElement("span",{className:Ma["match-proposal-title"]},"Propose a Match - BETA"),maxWidth:"500px",className:"proposal-modal"},e.createElement("div",{className:Ma["match-proposal-content"]},e.createElement("div",{style:{display:"flex",justifyContent:"center",gap:12,marginBottom:12}},e.createElement("div",{className:Ma["match-proposal-phase"]},e.createElement("b",null,e.createElement("span",{style:{color:"#fff"}},m==="scheduled"?"Phase 1:":m==="challenge"?"Phase 2:":""),e.createElement("span",{className:Ma["match-proposal-label-red"],style:{marginLeft:4}},m==="scheduled"?"Scheduled Match Phase":m==="challenge"?"Challenge Phase":""))),e.createElement("div",{className:Ma["match-proposal-division"]},e.createElement("b",null,e.createElement("span",{style:{color:"#fff"}},"Division:"))," ",e.createElement("span",{className:Ma["match-proposal-label-red"]},u))),e.createElement("div",{className:Ma["match-proposal-row"],style:{marginBottom:10}},e.createElement("b",null,"To Opponent:"),e.createElement("div",{className:Ma.opponentName,style:{fontWeight:"bold",fontSize:"1.25rem",margin:"2px 0"}},a.firstName?`${a.firstName} ${a.lastName}`:a.name),e.createElement("span",{style:{color:"#fff",fontSize:"1rem"}},"Day: "),e.createElement("span",{className:Ma["match-proposal-day-value"],style:{color:"#e53e3e",fontWeight:600}},V)),e.createElement("div",{className:Ma["match-proposal-row"],style:{marginBottom:10}},e.createElement("b",null,"Date:"),e.createElement(s5,{selected:O,onChange:W=>U(W),dateFormat:"MM-dd-yyyy",className:Ma["match-proposal-date-input"],required:!0})),e.createElement("div",{className:Ma["match-proposal-row"],style:{marginBottom:10}},e.createElement("b",null,"Time Block:"),e.createElement("select",{className:Ma["match-proposal-select"],value:g,onChange:W=>f(W.target.value)},e.createElement("option",{value:""},"Select time block"),Z.map((W,T)=>e.createElement("option",{key:T,value:W},W)))),e.createElement("div",{className:Ma["match-proposal-row"],style:{marginBottom:10}},e.createElement("b",null,"Start Time:"),e.createElement("select",{className:Ma["match-proposal-select"],value:h,onChange:W=>v(W.target.value)},e.createElement("option",{value:""},"Select..."),F.map((W,T)=>e.createElement("option",{key:T,value:W},W)))),e.createElement("div",{className:Ma["match-proposal-row"],style:{marginBottom:10}},e.createElement("b",null,"Game Type:"),e.createElement("select",{className:Ma["match-proposal-select"],value:A,onChange:W=>_(W.target.value)},e.createElement("option",{value:"8 Ball"},"8 Ball"),e.createElement("option",{value:"9 Ball"},"9 Ball"),e.createElement("option",{value:"10 Ball"},"10 Ball"),e.createElement("option",{value:"Mixed"},"Mixed"))),e.createElement("div",{className:Ma["match-proposal-row"],style:{marginBottom:10}},e.createElement("b",null,"Race Length:"),e.createElement("select",{className:Ma["match-proposal-select"],value:k,onChange:W=>B(Number(W.target.value))},m==="scheduled"||m==="challenge"?e.createElement("option",{value:5},"5"):[...Array(13)].map((W,T)=>{const G=T+3;return e.createElement("option",{key:G,value:G},G)}))),e.createElement("div",{className:Ma["match-proposal-row"],style:{marginBottom:10}},e.createElement("b",null,"Location:"),e.createElement("select",{className:Ma["match-proposal-location-select"],value:S,onChange:W=>x(W.target.value)},e.createElement("option",{value:""},"Select..."),z.map((W,T)=>e.createElement("option",{key:T,value:W},W)))),e.createElement("div",{className:Ma["match-proposal-row"],style:{marginBottom:10}},e.createElement("b",null,"Message to Opponent:"),e.createElement("textarea",{className:Ma["match-proposal-textarea"],value:Lh+E,onChange:W=>{const T=W.target.value;T.startsWith(Lh)?N(T.slice(Lh.length)):N("")},placeholder:"Add a comment to your opponent...",rows:5})),e.createElement("button",{className:Ma["match-proposal-send-btn"],onClick:j,disabled:!h||!S},"Send Proposal"))),C&&e.createElement(xE,{open:C,onClose:X,message:`Your match proposal has been sent to ${a.firstName?`${a.firstName} ${a.lastName}`:a.name}.
          They will receive an email notification and can respond through the app.`,phase:m,gameType:A,raceLength:k,day:V,date:Xc(O),time:h,location:S,proposalNote:E}))}async function GL(a){try{if(!a)return console.warn("No division selected for standings"),[];const r=a.replace(/[^A-Za-z0-9]/g,"_"),t=`${pe}/static/standings_${r}.json`,n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch standings: ${n.status}`);const o=await n.json();if(!Array.isArray(o))return console.error("Standings data is not an array:",o),[];const i=o.filter(c=>{if(!c||typeof c!="object")return console.warn("Invalid standings entry:",c),!1;if(!c.name||!c.rank)return console.warn("Standings entry missing name or rank:",c),!1;const u=parseInt(c.rank);return isNaN(u)||u<=0?(console.warn("Invalid rank in standings entry:",c),!1):!0});return console.log(`Loaded ${i.length} valid standings entries for division: ${a}`),i}catch(r){return console.error("Failed to load standings:",r),[]}}function Ui(a,r){if(!r||typeof r!="string")return console.warn("getPlayerPosition: playerName is undefined or not a string:",r),null;const t=r.toLowerCase().trim(),n=a.find(o=>o.name&&o.name.toLowerCase().trim()===t);return n?parseInt(n.rank):null}function qL(a,r){return a.sort((t,n)=>{const o=t&&t.firstName&&t.lastName?`${t.firstName} ${t.lastName}`:"",i=n&&n.firstName&&n.lastName?`${n.firstName} ${n.lastName}`:"",c=Ui(r,o),u=Ui(r,i);return c!==null&&u!==null?c-u:c!==null&&u===null?-1:c===null&&u!==null?1:o.localeCompare(i)})}function ZL(a,r,t){if(!r||r.length===0)return console.warn("No standings data available for Phase 2 filtering"),a;console.log("=== PHASE 2 FILTERING DEBUG ==="),console.log("Current player name:",t),console.log("Standings data:",r),console.log("All players from sheet:",a.map(i=>`${i.firstName} ${i.lastName}`));const n=Ui(r,t);if(n===null)return console.warn(`Player ${t} not found in standings`),console.log("Available standings names:",r.map(i=>i.name)),a;console.log(`Phase 2 filtering: ${t} is at position ${n}`);const o=a.filter(i=>{if(!i||!i.firstName||!i.lastName)return console.warn("Player data incomplete, excluding from Phase 2 filtering:",i),!1;const c=`${i.firstName} ${i.lastName}`,u=Ui(r,c);if(u===null)return console.warn(`Opponent ${c} not found in standings - excluding from Phase 2`),!1;const m=u-n,g=m<0&&m>=-4;return console.log(`${c} (${u}) - difference: ${m}, eligible: ${g}`),g});return console.log(`Phase 2 filtering complete: ${o.length} eligible opponents out of ${a.length} total players`),console.log("Eligible players:",o.map(i=>`${i.firstName} ${i.lastName}`)),console.log("=== END PHASE 2 DEBUG ==="),o}function k0({onClose:a,excludeName:r,senderName:t,senderEmail:n,onProposalComplete:o,selectedDivision:i,phase:c}){const[u,m]=b.useState([]),[g,f]=b.useState(""),[h,v]=b.useState(!0),[S,x]=b.useState([]),[E,N]=b.useState("search"),[C,I]=b.useState(null),[A,_]=b.useState(null);b.useEffect(()=>{},[u]),b.useEffect(()=>{let M=!0;async function O(){try{const U=await GL(i);M&&x(U);const Z=await fetch(`${pe}/api/users/search?approved=true`);if(!Z.ok)throw new Error("Failed to fetch players from database");const H=await Z.json();if(!H.users||H.users.length===0){M&&m([]),v(!1);return}let V=H.users.map(F=>({firstName:F.firstName||"",lastName:F.lastName||"",email:F.email||"",phone:F.phone||"",locations:F.locations||"",availability:F.availability||{Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},pin:F.pin||"",preferredContacts:F.preferredContacts||[],division:F.division||"",divisions:F.divisions||[]})).filter(F=>F.email&&F.firstName&&F.lastName&&F.isApproved&&`${F.firstName} ${F.lastName}`.toLowerCase()!==(r==null?void 0:r.toLowerCase()));c==="challenge"&&U.length>0?(console.log("🔄 Phase value:",c),console.log("🔄 Standings data length:",U.length),console.log("🔄 Sender name:",t),V=ZL(V,U,t),V=qL(V,U)):(console.log("🔄   - phase === 'challenge':",c==="challenge"),console.log("🔄   - standingsData.length > 0:",U.length>0),console.log("🔄   - phase value:",c),console.log("🔄   - standingsData length:",U.length)),M&&(m(V),setTimeout(()=>{},2e3))}catch(U){console.error("Error loading data:",U),M&&m([])}finally{M&&v(!1)}}return O(),()=>{M=!1}},[r,c,t,i]);const k=g.length>=3?u.filter(M=>`${M.firstName} ${M.lastName}`.toLowerCase().includes(g.toLowerCase())&&`${M.firstName} ${M.lastName}`.toLowerCase()!==(r==null?void 0:r.toLowerCase())):[],B=Ui(S,t),z=e.createElement(e.Fragment,null,E==="search"&&e.createElement(Bt,{open:!0,onClose:a,title:"🔍 Player Search",maxWidth:"500px"},c==="challenge"?e.createElement(e.Fragment,null,e.createElement("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid #e53e3e",borderRadius:"6px",padding:"1rem",marginBottom:"1.5rem",color:"#fff"}},e.createElement("strong",null,"Phase 2 (Challenge):")," You can only challenge players ranked 4 spots above in the standings.",e.createElement("br",null),e.createElement("span",{style:{fontSize:"1rem",color:"#fff",marginTop:8,display:"block"}},e.createElement("b",null,"Your Position:")," #",B??"N/A"),u.length>0&&e.createElement("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",opacity:.9}},u.length," eligible opponent",u.length!==1?"s":""," available")),h?e.createElement("p",{style:{color:"#fff",textAlign:"center"}},"Loading players..."):e.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},u.length===0?e.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},"No eligible opponents found within 4 spots above you in the standings."):e.createElement("div",{style:{display:"grid",gap:"8px"}},u.map((M,O)=>{const U=`${M.firstName} ${M.lastName}`,Z=Ui(S,U);return e.createElement("button",{key:O,onClick:()=>{I(M),N("availability")},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:H=>{H.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",H.target.style.transform="translateY(-2px)",H.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:H=>{H.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",H.target.style.transform="translateY(0)",H.target.style.boxShadow="none"}},e.createElement("span",{style:{fontWeight:"bold",color:"#fff"}},"#",Z??"N/A"," ",U))})))):e.createElement(e.Fragment,null,g.length>=3&&k.length>0&&e.createElement("div",{style:{color:"#e53e3e",fontSize:"0.9rem",marginBottom:"1rem",textAlign:"center"}},"Click opponent's name to see availability."),e.createElement("input",{type:"text",placeholder:"Type at least 3 letters to search...",value:g,onChange:M=>f(M.target.value),autoFocus:!0,"aria-label":"Search for player",style:{width:"100%",padding:"0.75rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"6px",fontSize:"1rem",marginBottom:"1rem"}}),h?e.createElement("p",{style:{color:"#fff",textAlign:"center"}},"Loading players..."):e.createElement(e.Fragment,null,g.length<3?e.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},"Please enter at least 3 letters to search for a player."):e.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},k.length===0?e.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},"No players found."):e.createElement("div",{style:{display:"grid",gap:"8px"}},k.map((M,O)=>e.createElement("button",{key:O,onClick:()=>{I(M),N("availability")},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:U=>{U.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",U.target.style.transform="translateY(-2px)",U.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:U=>{U.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",U.target.style.transform="translateY(0)",U.target.style.boxShadow="none"}},e.createElement(VI,{text:`${M.firstName} ${M.lastName}`,query:g})))))))),E==="availability"&&C&&e.createElement(Gp,{player:C,onClose:a,onProposeMatch:(M,O,U,Z)=>{_({player:C,day:M,slot:O,phase:U,selectedDivision:Z||i}),N("proposal")},phase:c,selectedDivision:i}),E==="proposal"&&A&&e.createElement(e.Fragment,null,e.createElement(ef,{player:A.player,day:A.day,slot:A.slot,onClose:a,senderName:t,senderEmail:n,onProposalComplete:()=>{N("search"),_(null),I(null),o&&o(),a()},phase:A.phase,selectedDivision:A.selectedDivision||i})));return Md.createPortal(z,document.body)}function ww({size:a="medium",color:r="#e53e3e",text:t="Loading...",showText:n=!0,variant:o="default"}){const i={small:"16px",medium:"24px",large:"32px",xlarge:"48px"},c=i[a]||i.medium,u=()=>{switch(o){case"pulse":return e.createElement("div",{style:{width:c,height:c,borderRadius:"50%",background:r,animation:"pulse 1.5s ease-in-out infinite"}});case"dots":return e.createElement("div",{style:{display:"flex",gap:"4px"}},[0,1,2].map(m=>e.createElement("div",{key:m,style:{width:"8px",height:"8px",borderRadius:"50%",background:r,animation:"bounce 1.4s ease-in-out infinite both",animationDelay:`${m*.16}s`}})));case"bars":return e.createElement("div",{style:{display:"flex",gap:"2px"}},[0,1,2,3,4].map(m=>e.createElement("div",{key:m,style:{width:"4px",height:"20px",background:r,animation:"bars 1.2s ease-in-out infinite",animationDelay:`${m*.1}s`}})));default:return e.createElement("div",{style:{width:c,height:c,border:"3px solid rgba(229, 62, 62, 0.2)",borderTop:`3px solid ${r}`,borderRadius:"50%",animation:"spin 1s linear infinite"}})}};return e.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"12px",padding:"20px"}},u(),n&&t&&e.createElement("div",{style:{color:r,fontSize:"0.9rem",fontWeight:"500",textAlign:"center",maxWidth:"200px"}},t),e.createElement("style",null,`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
          0%, 100% { 
            transform: scale(0.8);
            opacity: 0.5;
          }
          50% { 
            transform: scale(1);
            opacity: 1;
          }
        }
        
        @keyframes bounce {
          0%, 80%, 100% { 
            transform: scale(0);
          }
          40% { 
            transform: scale(1);
          }
        }
        
        @keyframes bars {
          0%, 40%, 100% { 
            transform: scaleY(0.4);
          }
          20% { 
            transform: scaleY(1);
          }
        }
      `))}function Sw({loading:a,children:r,loadingText:t="Loading...",disabled:n=!1,variant:o="default",size:i="medium",...c}){const u={small:{padding:"8px 16px",fontSize:"0.875rem",minHeight:"36px"},medium:{padding:"12px 20px",fontSize:"1rem",minHeight:"48px"},large:{padding:"16px 24px",fontSize:"1.125rem",minHeight:"56px"}},m=u[i]||u.medium;return e.createElement("button",{...c,disabled:a||n,style:{...c.style,...m,position:"relative",opacity:a?.8:1,cursor:a?"not-allowed":"pointer",transition:"all 0.3s ease"}},a?e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}},e.createElement(ww,{size:"small",variant:o,showText:!1,color:"#fff"}),t):r)}function VL({lines:a=3,height:r="20px",width:t="100%",gap:n="8px",variant:o="default"}){const i=c=>{const m=c===a-1?"60%":t;switch(o){case"pulse":return e.createElement("div",{key:c,style:{height:r,width:m,background:"#444",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}});case"shimmer":return e.createElement("div",{key:c,style:{height:r,width:m,background:"linear-gradient(90deg, #333 25%, #444 50%, #333 75%)",backgroundSize:"200% 100%",borderRadius:"4px",animation:"shimmer 1.5s infinite"}});default:return e.createElement("div",{key:c,style:{height:r,width:m,background:"#333",borderRadius:"4px",opacity:.7}})}};return e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:n,padding:"16px"}},Array.from({length:a}).map((c,u)=>i(u)),e.createElement("style",null,`
        @keyframes pulse {
          0%, 100% { 
            opacity: 0.7;
          }
          50% { 
            opacity: 1;
          }
        }
        
        @keyframes shimmer {
          0% { background-position: -200% 0; }
          100% { background-position: 200% 0; }
        }
      `))}function QL(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-"),m=new Date(parseInt(i),parseInt(c)-1,parseInt(u)),g=String(m.getMonth()+1).padStart(2,"0"),f=String(m.getDate()).padStart(2,"0"),h=m.getFullYear();return`${g}-${f}-${h}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}function JL({proposal:a,open:r,onClose:t,onEdit:n,onMessage:o}){if(b.useEffect(()=>{r&&setTimeout(()=>{window.dispatchEvent(new Event("resize"))},50)},[r]),!r||!a)return null;const{senderName:i,receiverName:c,day:u,date:m,time:g,location:f,gameType:h,raceLength:v,message:S,proposalNote:x}=a,E=window.innerWidth<=500,[N,C]=b.useState(!1),[I,A]=b.useState("");async function _(){C(!0),A("");try{if(!(await fetch(`${pe}/api/proposals/${a._id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"confirmed"})})).ok)throw new Error("Failed to confirm proposal");t&&t()}catch(B){A(B.message||"Failed to confirm proposal")}finally{C(!1)}}const k=e.createElement(Bt,{open:r,onClose:t,title:"🎱 Proposal Details",maxWidth:E?"99vw":"480px"},a.isCounter&&e.createElement("div",{style:{color:"#ff9800",fontWeight:"bold",marginBottom:8,fontSize:"1.05em",textAlign:"center"}},"This is a counter proposal from ",a.counteredBy||"your opponent"),e.createElement("div",{style:{textAlign:"left",marginBottom:E?"0.7rem":"1.5rem",fontSize:E?"0.95rem":"1.05rem",padding:E?"0.2rem 0.2rem":void 0}},e.createElement("div",{className:we.modalDetailRowSnazzy,style:{padding:E?"0.2em 0.3em":void 0}},e.createElement("strong",{style:{color:"#e53e3e",minWidth:E?"80px":"120px",fontSize:E?"0.95em":void 0}},"You:"),e.createElement("span",{style:{color:"#fff",marginLeft:E?"4px":"8px"}},i||"N/A")),e.createElement("div",{className:we.modalDetailRowSnazzy,style:{padding:E?"0.2em 0.3em":void 0}},e.createElement("strong",{style:{color:"#e53e3e",minWidth:E?"80px":"120px",fontSize:E?"0.95em":void 0}},"Opponent:"),e.createElement("span",{style:{color:"#fff",marginLeft:E?"4px":"8px"}},c||"N/A")),u&&e.createElement("div",{className:we.modalDetailRowSnazzy,style:{padding:E?"0.2em 0.3em":void 0}},e.createElement("strong",{style:{color:"#e53e3e",minWidth:E?"80px":"120px",fontSize:E?"0.95em":void 0}},"Day:"),e.createElement("span",{style:{color:"#fff",marginLeft:E?"4px":"8px"}},u)),e.createElement("div",{className:we.modalDetailRowSnazzy,style:{padding:E?"0.2em 0.3em":void 0}},e.createElement("strong",{style:{color:"#e53e3e",minWidth:E?"80px":"120px",fontSize:E?"0.95em":void 0}},"Date:"),e.createElement("span",{style:{color:"#fff",marginLeft:E?"4px":"8px"}},QL(m))),e.createElement("div",{className:we.modalDetailRowSnazzy,style:{padding:E?"0.2em 0.3em":void 0}},e.createElement("strong",{style:{color:"#e53e3e",minWidth:E?"80px":"120px",fontSize:E?"0.95em":void 0}},"Time:"),e.createElement("span",{style:{color:"#fff",marginLeft:E?"4px":"8px"}},g||"N/A")),e.createElement("div",{className:we.modalDetailRowSnazzy,style:{padding:E?"0.2em 0.3em":void 0}},e.createElement("strong",{style:{color:"#e53e3e",minWidth:E?"80px":"120px",fontSize:E?"0.95em":void 0}},"Location:"),e.createElement("span",{style:{color:"#fff",marginLeft:E?"4px":"8px"}},f||"N/A")),h&&e.createElement("div",{className:we.modalDetailRowSnazzy,style:{padding:E?"0.2em 0.3em":void 0}},e.createElement(Bp,{gameType:h,size:E?12:16}),e.createElement("strong",{style:{color:"#e53e3e",minWidth:E?"80px":"120px",fontSize:E?"0.95em":void 0}},"Game:"),e.createElement("span",{style:{color:"#fff",marginLeft:E?"4px":"8px"}},h)),v&&e.createElement("div",{className:we.modalDetailRowSnazzy,style:{padding:E?"0.2em 0.3em":void 0}},e.createElement("strong",{style:{color:"#e53e3e",minWidth:E?"80px":"120px",fontSize:E?"0.95em":void 0}},"Race:"),e.createElement("span",{style:{color:"#fff",marginLeft:E?"4px":"8px"}},v)),x&&e.createElement("div",{style:{margin:E?"8px 0 0 0":"16px 0 0 0",padding:E?"0.4rem 0.5rem":"0.8rem 1rem",background:"rgba(255, 193, 7, 0.1)",borderLeft:"3px solid #ffc107",borderRadius:"6px",color:"#ffc107",fontSize:E?"0.9rem":"0.95rem",textAlign:"left"}},e.createElement("span",{role:"img","aria-label":"note"},"📝")," ",e.createElement("strong",null,"Note:"),e.createElement("br",null),x)),e.createElement("div",{style:{display:"flex",gap:E?6:12,justifyContent:"center",marginTop:E?10:24,flexDirection:E?"column":"row",alignItems:E?"stretch":"center"}},n&&e.createElement("button",{className:we.dashboardBtn,onClick:n,style:{background:"#e53e3e",color:"#fff",minWidth:E?"90px":"120px",fontSize:E?"0.95em":void 0,padding:E?"0.5em 0.7em":void 0}},"Edit"),o&&e.createElement("button",{className:we.dashboardBtn,onClick:o,style:{background:"#007bff",color:"#fff",minWidth:E?"90px":"120px",fontSize:E?"0.95em":void 0,padding:E?"0.5em 0.7em":void 0}},"Msg"),a.isCounter&&a.status==="countered"&&e.createElement(Sw,{className:we.dashboardBtn,onClick:_,loading:N,loadingText:"Confirming...",disabled:N,style:{background:"#43a047",color:"#fff",minWidth:E?"90px":"120px",fontSize:E?"0.95em":void 0,padding:E?"0.5em 0.7em":void 0}},"Confirm"),e.createElement("button",{className:we.dashboardBtn,onClick:t,style:{background:"#6c757d",color:"#fff",minWidth:E?"90px":"120px",fontSize:E?"0.95em":void 0,padding:E?"0.5em 0.7em":void 0}},"Close")),I&&e.createElement("div",{style:{color:"red",marginTop:8}},I));return Md.createPortal(k,document.body)}function Bh(a){const r=a.getFullYear(),t=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0");return`${r}-${t}-${n}`}function XL(a){const t=a.trim().replace(/\s+/g,"").toLowerCase().match(/^(\d{1,2})(:\d{2})?(am|pm)$/);if(t){const o=t[1],i=t[2]?t[2]:":00",c=t[3].toUpperCase();return`${o}${i} ${c}`}const n=a.trim().match(/^(\d{1,2})(:\d{2})?\s?(am|pm)$/i);if(n){const o=n[1],i=n[2]?n[2]:":00",c=n[3].toUpperCase();return`${o}${i} ${c}`}return a.trim()}const KL=a=>a.replace(/[–—−]/g,"-").replace(/\s*-\s*/g," - ").trim();function e9({proposal:a,open:r,onClose:t,onSave:n,selectedDivision:o,phase:i,receiverPlayer:c}){var T;const[u,m]=b.useState(new Date),[g,f]=b.useState(""),[h,v]=b.useState(""),[S,x]=b.useState(""),[E,N]=b.useState(""),[C,I]=b.useState(""),[A,_]=b.useState(""),[k,B]=b.useState(""),[z,M]=b.useState(!1);b.useEffect(()=>{if(a&&r){if(a.date){const[G,te,P]=a.date.split("-");m(new Date(parseInt(G),parseInt(te)-1,parseInt(P)))}f(a.time||""),x(a.location||""),N(a.message||""),I(a.gameType||""),_(a.raceLength||"")}},[a,r]);const U=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][u.getDay()],H=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][u.getDay()],V=((T=c==null?void 0:c.availability)==null?void 0:T[H])||[];console.log("EditProposalModal - Receiver player:",c),console.log("EditProposalModal - Selected day short:",H),console.log("EditProposalModal - Opponent time blocks:",V);const F=["6:00 PM - 8:00 PM","8:00 PM - 10:00 PM","10:00 PM - 12:00 AM"],R=V.length>0?V:F;console.log("EditProposalModal - Available time blocks:",R);const D=!c&&r,j=e.useMemo(()=>{if(!g)return console.log("EditProposalModal - No time selected:",g),[];console.log("EditProposalModal - Selected time block:",g);const G=KL(g);if(console.log("EditProposalModal - Normalized slot:",G),!G.includes(" - "))return console.log("EditProposalModal - No dash found in normalized slot"),[];let[te,P]=G.split(" - ").map(q=>XL(q.trim()));if(console.log("EditProposalModal - Normalized times:",{blockStart:te,blockEnd:P}),!te||!P)return console.log("EditProposalModal - Failed to normalize times"),[];const ne=ty(te,P,30);return console.log("EditProposalModal - Generated start times:",ne),console.log("EditProposalModal - Times array length:",ne.length),ne},[g]);b.useEffect(()=>{v("")},[g]);const X=async()=>{if(!h||!S){B("Please fill in all required fields.");return}M(!0),B("");try{const G=await fetch(`${pe}/api/proposals/${a._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:Bh(u),time:h,location:S,message:E,gameType:C,raceLength:A,phase:i,divisions:[o]})}),te=await G.json();if(!G.ok)throw new Error(te.error||"Failed to update proposal");n&&n({...a,date:Bh(u),time:h,location:S,message:E,gameType:C,raceLength:A}),t()}catch(G){B(G.message||"Failed to update proposal")}finally{M(!1)}};if(!r||!a)return null;const W=e.createElement(Bt,{open:r,onClose:t,title:"✏️ Edit Proposal",maxWidth:"400px"},e.createElement("div",{className:we.proposalModalContent,style:{width:"100%",maxWidth:400,margin:"0 auto"}},e.createElement("div",{className:we.proposalModalHeaderBar},e.createElement("span",{className:we.phasePill},"Phase 1: Scheduled Match Phase"),e.createElement("span",{className:we.divisionPill},"Division: ",o||"N/A")),e.createElement("div",{className:we.proposalModalToRow},e.createElement("span",{className:we.toOpponentLabel},"To Opponent:"),e.createElement("span",{className:we.toOpponentName},a.receiverName)),e.createElement("div",{className:we.proposalModalDayRow},e.createElement("span",{className:we.dayLabel},"Day:"),e.createElement("span",{className:we.dayValue},U)),e.createElement("div",{className:we.formGroup,style:{display:"flex",flexDirection:"column",alignItems:"center"}},e.createElement("label",{htmlFor:"proposal-date",style:{marginBottom:4,textAlign:"center"}},"Date"),e.createElement("input",{id:"proposal-date",type:"date",value:Bh(u),onChange:G=>{const[te,P,ne]=G.target.value.split("-");m(new Date(parseInt(te),parseInt(P)-1,parseInt(ne)))},className:we.input,required:!0,style:{textAlign:"center"}})),e.createElement("div",{className:we.proposalModalFieldRow},e.createElement("span",{className:we.fieldLabel},"Time Block:"),D&&e.createElement("div",{style:{color:"#ff6b6b",fontSize:"0.9rem",marginBottom:"0.5rem"}},"⚠️ Opponent availability data not available. Using default time blocks."),c&&V.length===0&&e.createElement("div",{style:{color:"#ffa500",fontSize:"0.9rem",marginBottom:"0.5rem"}},"ℹ️ No availability for ",U,". Using default time blocks."),e.createElement("select",{value:g,onChange:G=>f(G.target.value),className:we.inputField},e.createElement("option",{value:""},"Select time block"),R.map(G=>e.createElement("option",{key:G,value:G},G)))),e.createElement("div",{className:we.proposalModalFieldRow},e.createElement("span",{className:we.fieldLabel},"Start Time:"),e.createElement("select",{value:h,onChange:G=>v(G.target.value),className:we.inputField},e.createElement("option",{value:""},"Select start time"),j.map(G=>e.createElement("option",{key:G,value:G},G)))),e.createElement("div",{className:we.proposalModalFieldRow},e.createElement("span",{className:we.fieldLabel},"Game Type:"),e.createElement("select",{value:C,onChange:G=>I(G.target.value),className:we.inputField},e.createElement("option",{value:""},"Select game type"),e.createElement("option",{value:"8 Ball"},"8 Ball"),e.createElement("option",{value:"9 Ball"},"9 Ball"),e.createElement("option",{value:"10 Ball"},"10 Ball"),e.createElement("option",{value:"Mixed"},"Mixed"))),e.createElement("div",{className:we.proposalModalFieldRow},e.createElement("span",{className:we.fieldLabel},"Race Length:"),e.createElement("select",{value:A,onChange:G=>_(G.target.value),className:we.inputField},e.createElement("option",{value:""},"Select race length"),e.createElement("option",{value:"3"},"3"),e.createElement("option",{value:"5"},"5"),e.createElement("option",{value:"7"},"7"),e.createElement("option",{value:"9"},"9"))),e.createElement("div",{className:we.proposalModalFieldRow},e.createElement("span",{className:we.fieldLabel},"Location:"),e.createElement("input",{type:"text",value:S,onChange:G=>x(G.target.value),placeholder:"Enter location",className:we.inputField})),e.createElement("div",{className:we.proposalModalFieldRow},e.createElement("span",{className:we.fieldLabel},"Message to Opponent:"),e.createElement("textarea",{value:E,onChange:G=>N(G.target.value),placeholder:"Message to opponent",rows:3,className:we.inputField})),k&&e.createElement("div",{className:we.errorBox},k),e.createElement("div",{className:we.proposalModalButtonRow},e.createElement("button",{className:we.dashboardBtn,onClick:X,disabled:z,style:{width:"48%"}},z?"Saving...":"Save Changes"),e.createElement("button",{className:we.dashboardBtn,onClick:t,disabled:z,style:{width:"48%"}},"Cancel"))));return Md.createPortal(W,document.body)}const t9="_container_qqpwh_3",a9="_header_qqpwh_23",n9="_headerButtons_qqpwh_57",r9="_newChatButton_qqpwh_69",o9="_closeButton_qqpwh_101",s9="_content_qqpwh_133",l9="_conversationsList_qqpwh_147",i9="_loading_qqpwh_181",c9="_emptyState_qqpwh_193",d9="_startChatButton_qqpwh_215",u9="_conversationItems_qqpwh_245",m9="_conversationItem_qqpwh_245",p9="_active_qqpwh_283",f9="_conversationInfo_qqpwh_293",g9="_conversationName_qqpwh_303",h9="_lastMessage_qqpwh_321",y9="_conversationMeta_qqpwh_345",b9="_timestamp_qqpwh_361",v9="_unreadBadge_qqpwh_379",x9="_messagesArea_qqpwh_407",E9="_messagesHeader_qqpwh_421",w9="_messagesList_qqpwh_447",S9="_messageItem_qqpwh_465",C9="_myMessage_qqpwh_475",_9="_theirMessage_qqpwh_483",k9="_messageBubble_qqpwh_491",N9="_messageContent_qqpwh_527",I9="_messageTime_qqpwh_539",A9="_readStatus_qqpwh_563",D9="_noConversation_qqpwh_571",M9="_messageInput_qqpwh_591",R9="_sendButton_qqpwh_647",T9="_playerList_qqpwh_769",P9="_playerItem_qqpwh_781",L9="_selected_qqpwh_807",B9="_playerName_qqpwh_817",z9="_modalActions_qqpwh_847",O9="_cancelButton_qqpwh_861",F9="_startButton_qqpwh_893",U9="_error_qqpwh_939",Rt={container:t9,header:a9,headerButtons:n9,newChatButton:r9,closeButton:o9,content:s9,conversationsList:l9,loading:i9,emptyState:c9,startChatButton:d9,conversationItems:u9,conversationItem:m9,active:p9,conversationInfo:f9,conversationName:g9,lastMessage:h9,conversationMeta:y9,timestamp:b9,unreadBadge:v9,messagesArea:x9,messagesHeader:E9,messagesList:w9,messageItem:S9,myMessage:C9,theirMessage:_9,messageBubble:k9,messageContent:N9,messageTime:I9,readStatus:A9,noConversation:D9,messageInput:M9,sendButton:R9,playerList:T9,playerItem:P9,selected:L9,playerName:B9,modalActions:z9,cancelButton:O9,startButton:F9,error:U9};console.log("DirectMessagingModal BACKEND_URL in use:",pe);function W9({userName:a,userEmail:r,userPin:t,selectedDivision:n,opponentEmails:o=[],onClose:i}){console.log("Opponent Emails:",o);const[c,u]=b.useState([]),[m,g]=b.useState(null),[f,h]=b.useState([]),[v,S]=b.useState(""),[x,E]=b.useState(!1),[N,C]=b.useState(!1),[I,A]=b.useState(""),[_,k]=b.useState([]),[B,z]=b.useState(!1),[M,O]=b.useState(null),U=b.useRef(null);b.useEffect(()=>{async function D(){try{const X=await(await fetch(`${pe}/api/users`)).json();Array.isArray(X)&&k(X.filter(W=>W.email!==r))}catch(j){console.error("Failed to load players:",j)}}D()},[r]),b.useEffect(()=>{async function D(){E(!0);try{const X=await(await fetch(`${pe}/api/messages/conversations?user=${encodeURIComponent(r)}`)).json();console.log("Conversations fetch data:",X),Array.isArray(X)&&u(X)}catch(j){console.error("Failed to load conversations:",j),A("Failed to load conversations")}finally{E(!1)}}D()},[r]),b.useEffect(()=>{if(!m){h([]);return}async function D(){try{const X=await(await fetch(`${pe}/api/messages?user1=${encodeURIComponent(r)}&user2=${encodeURIComponent(m.email)}`)).json();Array.isArray(X)&&(h(X),X.forEach(W=>{W.receiverEmail===r&&!W.read&&fetch(`${pe}/api/messages/${W._id}/read`,{method:"PUT"})}))}catch(j){console.error("Failed to load messages:",j),A("Failed to load messages")}}D()},[m,r]),b.useEffect(()=>{U.current&&U.current.scrollIntoView({behavior:"smooth"})},[f]);const Z=async()=>{if(!v.trim()||!m)return;C(!0),A("");let D=m.email;if(!D){const j=_.find(X=>X.name===m.name&&X.email);j&&(D=j.email)}if(console.log("Sending message to:",D),!D){A("No email found for selected opponent."),C(!1);return}try{const j=await fetch(`${pe}/api/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderEmail:r,receiverEmail:D,content:v})});if(console.log("Send response:",j),!j.ok)throw new Error("Failed to send message");S("");const W=await(await fetch(`${pe}/api/messages?user1=${encodeURIComponent(r)}&user2=${encodeURIComponent(D)}`)).json();Array.isArray(W)&&h(W)}catch(j){A(j.message||"Failed to send message")}finally{C(!1)}},H=async()=>{M&&(g(M),z(!1),O(null))},V=D=>D.unreadCount||0,F=D=>{const j=new Date(D),W=(new Date-j)/(1e3*60*60);return W<24?j.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):W<48?"Yesterday":j.toLocaleDateString()},R=_.filter(D=>o.length>0?o.includes(D.name):n?Array.isArray(D.divisions)?D.divisions.includes(n):typeof D.divisions=="string"?D.divisions.split(",").map(j=>j.trim()).includes(n):!1:!0).sort((D,j)=>{const X=`${D.name||""}`.trim().toLowerCase(),W=`${j.name||""}`.trim().toLowerCase();return X.localeCompare(W)});return e.createElement("div",{className:Rt.container},e.createElement("div",{className:Rt.header},e.createElement("h2",null,"Direct Messages"),e.createElement("div",{className:Rt.headerButtons},e.createElement("button",{className:Rt.newChatButton,onClick:()=>z(!0),type:"button"},"💬 New Chat"),e.createElement("button",{className:Rt.closeButton,onClick:i,type:"button"},"×"))),e.createElement("div",{className:Rt.content},e.createElement("div",{className:Rt.conversationsList},e.createElement("h3",null,"Conversations"),x?e.createElement("div",{className:Rt.loading},"Loading conversations..."):c.length===0?e.createElement("div",{className:Rt.emptyState},e.createElement("p",null,"No conversations yet"),e.createElement("button",{className:Rt.startChatButton,onClick:()=>z(!0),type:"button"},"Start a conversation")):e.createElement("div",{className:Rt.conversationItems},c.map(D=>e.createElement("div",{key:D.email,className:`${Rt.conversationItem} ${(m==null?void 0:m.email)===D.email?Rt.active:""}`,onClick:()=>g(D)},e.createElement("div",{className:Rt.conversationInfo},e.createElement("div",{className:Rt.conversationName},D.name||D.email),e.createElement("div",{className:Rt.lastMessage},D.lastMessage||"No messages yet")),e.createElement("div",{className:Rt.conversationMeta},e.createElement("div",{className:Rt.timestamp},D.lastMessageTime?F(D.lastMessageTime):""),V(D)>0&&e.createElement("div",{className:Rt.unreadBadge},V(D))))))),e.createElement("div",{className:Rt.messagesArea},m?e.createElement(e.Fragment,null,e.createElement("div",{className:Rt.messagesHeader},e.createElement("h3",null,"Chat with ",m.name||m.email)),e.createElement("div",{className:Rt.messagesList},f.map(D=>e.createElement("div",{key:D._id,className:`${Rt.messageItem} ${D.senderEmail===r?Rt.myMessage:Rt.theirMessage}`},e.createElement("div",{className:Rt.messageBubble},e.createElement("div",{className:Rt.messageContent},D.content),e.createElement("div",{className:Rt.messageTime},F(D.timestamp),D.senderEmail===r&&e.createElement("span",{className:Rt.readStatus},D.read?"✓✓":"✓"))))),e.createElement("div",{ref:U})),e.createElement("div",{className:Rt.messageInput},e.createElement("input",{type:"text",value:v,onChange:D=>S(D.target.value),onKeyDown:D=>{D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),Z())},placeholder:"Type a message...",disabled:N}),e.createElement("button",{onClick:Z,disabled:N||!v.trim(),className:Rt.sendButton,type:"button"},"Send"))):e.createElement("div",{className:Rt.noConversation},e.createElement("p",null,"Select a conversation to start messaging")))),B&&e.createElement(Bt,{open:B,onClose:()=>{z(!1),O(null)},title:"Start New Conversation",maxWidth:"400px"},e.createElement("button",{style:{position:"absolute",top:10,right:10,background:"none",border:"none",color:"#fff",fontSize:24,cursor:"pointer",zIndex:10001},onClick:()=>{z(!1),O(null)},"aria-label":"Close",type:"button"},"×"),e.createElement("div",{className:Rt.playerList},R.map(D=>e.createElement("div",{key:D._id||D.email,className:`${Rt.playerItem} ${(M==null?void 0:M.email)===D.email?Rt.selected:""}`,onClick:()=>O(D)},e.createElement("div",{className:Rt.playerName},D.name?D.name:D.email)))),e.createElement("div",{className:Rt.modalActions},e.createElement("button",{onClick:()=>{z(!1),O(null)},className:Rt.cancelButton,type:"button"},"Cancel"),e.createElement("button",{onClick:H,disabled:!M,className:Rt.startButton,type:"button"},"Start Chat"))),I&&e.createElement("div",{className:Rt.error},I))}const j9="_customChannelHeader_1kvzt_1",H9="_customChannelHeaderIcon_1kvzt_51",$9="_customChannelHeaderTitle_1kvzt_61",Y9="_customChannelHeaderDate_1kvzt_71",G9="_customChannelHeaderOnline_1kvzt_83",q9="_customChannelHeaderOnlineLabel_1kvzt_97",Z9="_customChannelHeaderNone_1kvzt_109",V9="_customChannelHeaderAvatar_1kvzt_119",Ps={customChannelHeader:j9,customChannelHeaderIcon:H9,customChannelHeaderTitle:$9,customChannelHeaderDate:Y9,customChannelHeaderOnline:G9,customChannelHeaderOnlineLabel:q9,customChannelHeaderNone:Z9,customChannelHeaderAvatar:V9};function Q9(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-"),m=new Date(parseInt(i),parseInt(c)-1,parseInt(u)),g=String(m.getMonth()+1).padStart(2,"0"),f=String(m.getDate()).padStart(2,"0"),h=m.getFullYear();return`${g}-${f}-${h}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}function J9(a){if(!a)return"";const r=a.trim().split(" ");if(r.length===1){const t=r[0].split(/[^a-zA-Z0-9]/).filter(Boolean);return t.length>1?(t[0][0]+t[1][0]).toUpperCase():r[0].slice(0,2).toUpperCase()}return(r[0][0]+r[r.length-1][0]).toUpperCase()}function X9({channel:a,currentUser:r}){var c,u,m;const t=((c=a==null?void 0:a.data)==null?void 0:c.name)||(a==null?void 0:a.id)||"General Chat",n=(u=a==null?void 0:a.data)==null?void 0:u.matchDate,o=r==null?void 0:r.id,i=(m=a==null?void 0:a.state)!=null&&m.members?Object.values(a.state.members).filter(g=>{var f,h;return((f=g.user)==null?void 0:f.online)||((h=g.user)==null?void 0:h.id)===o}).map(g=>{var f,h;return((f=g.user)==null?void 0:f.name)||((h=g.user)==null?void 0:h.id)}).filter(Boolean):[(r==null?void 0:r.name)||(r==null?void 0:r.id)].filter(Boolean);return e.createElement("div",{className:Ps.customChannelHeader,style:{width:"100%",margin:"0",borderRadius:"0",marginTop:"0",marginBottom:"0"}},e.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",width:"100%"}},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.8em",fontSize:"1.1em",textAlign:"center",width:"100%"}},e.createElement("span",{className:Ps.customChannelHeaderIcon},"💬"),e.createElement("span",{style:{textAlign:"center"}},"You're in the"," ",e.createElement("span",{className:Ps.customChannelHeaderTitle},'"',t,'"')," ","channel."),n&&e.createElement("span",{className:Ps.customChannelHeaderDate},"Match Date: ",Q9(n))),e.createElement("div",{className:Ps.customChannelHeaderOnline},e.createElement("span",{className:Ps.customChannelHeaderOnlineLabel},"Online:"),i.length===0&&e.createElement("span",{className:Ps.customChannelHeaderNone},"No one online"),i.map(g=>e.createElement("span",{key:g,className:Ps.customChannelHeaderAvatar,title:g},J9(g))))))}var zh={exports:{}},Oh,Dx;function K9(){if(Dx)return Oh;Dx=1;var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Oh=a,Oh}var Fh,Mx;function eB(){if(Mx)return Fh;Mx=1;var a=K9();function r(){}function t(){}return t.resetWarningCache=r,Fh=function(){function n(c,u,m,g,f,h){if(h!==a){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}n.isRequired=n;function o(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:o,element:n,elementType:n,instanceOf:o,node:n,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:r};return i.PropTypes=i,i},Fh}var Rx;function tB(){return Rx||(Rx=1,zh.exports=eB()()),zh.exports}var aB=tB();const Q=Rp(aB),Cw={async getUser(a){return tn.get(`/api/users/${encodeURIComponent(a)}`)},async syncUsers(){return tn.post("/admin/sync-users")}};class nB{async getCurrentSeason(r){try{const t=await fetch(`${pe}/api/seasons/current/${encodeURIComponent(r)}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.error("Error fetching current season:",t),null}}async getCurrentPhaseAndWeek(r){try{const t=await fetch(`${pe}/api/seasons/phase/${encodeURIComponent(r)}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.error("Error fetching current phase and week:",t),{currentWeek:null,phase:"offseason",isActive:!1,season:null}}}async getAllSeasons(r){try{const t=await fetch(`${pe}/api/seasons/${encodeURIComponent(r)}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.error("Error fetching all seasons:",t),[]}}isMatchWithinPhase1Deadline(r,t){if(!t||!t.phase1End)return!0;const n=new Date(r),o=new Date(t.phase1End);return n<=o}getDaysUntilPhase1Deadline(r){if(!r||!r.phase1End)return null;const t=new Date,o=new Date(r.phase1End)-t;return Math.ceil(o/(1e3*60*60*24))}hasPhase1DeadlinePassed(r){if(!r||!r.phase1End)return!1;const t=new Date,n=new Date(r.phase1End);return t>n}hasPhase2Started(r){if(!r||!r.phase2Start)return!1;const t=new Date,n=new Date(r.phase2Start);return t>=n}getDaysUntilPhase2Deadline(r){if(!r||!r.phase2End)return null;const t=new Date,o=new Date(r.phase2End)-t;return Math.ceil(o/(1e3*60*60*24))}hasPhase2DeadlinePassed(r){if(!r||!r.phase2End)return!1;const t=new Date,n=new Date(r.phase2End);return t>n}getCurrentPhaseFromDates(r){if(!r)return"offseason";const t=new Date,n=new Date(r.phase1Start),o=new Date(r.phase1End),i=new Date(r.phase2Start),c=new Date(r.phase2End);return t<n?"offseason":t>=n&&t<=o?"scheduled":t>=i&&t<=c?"challenge":t>c?"completed":"transition"}}const Zo=new nB;function rB({userName:a,userEmail:r,userPin:t,onClose:n,fromChat:o=!1}){const[i,c]=b.useState([]),[u,m]=b.useState(!0),[g,f]=b.useState(""),[h,v]=b.useState("scheduled"),[S,x]=b.useState(!1),[E,N]=b.useState(!1),[C,I]=b.useState(!1),[A,_]=b.useState(!1),[k,B]=b.useState(null),[z,M]=b.useState(null),[O,U]=b.useState([]),[Z,H]=b.useState([]),[V,F]=b.useState(!1);b.useEffect(()=>{r&&Cw.getUser(r).then(G=>{let te=[];Array.isArray(G.divisions)?te=G.divisions.map(P=>P.trim()).filter(Boolean):typeof G.divisions=="string"?te=G.divisions.split(",").map(P=>P.trim()).filter(Boolean):te=[],c(te),m(!1)}).catch(()=>{c([]),m(!1)})},[r]);const R=async G=>{F(!0);try{const te=`schedule_${G.replace(/[^A-Za-z0-9]/g,"_")}.json`,P=Date.now(),ne=`${pe}/static/${te}?t=${P}`,q=await fetch(ne,{method:"GET",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!q.ok)throw new Error("Schedule not found");const oe=await q.json();U(oe);const he=await fetch(`${pe}/api/users/search?approved=true&division=${encodeURIComponent(G)}`,{method:"GET",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!he.ok)throw new Error("Players not found");const be=await he.json();H(be.users||[])}catch(te){console.error("Failed to load schedule data:",te),U([]),H([])}finally{F(!1)}},D=async G=>{f(G);try{const te=await Zo.getCurrentPhaseAndWeek(G),P=(te==null?void 0:te.phase)||"scheduled";v(P),P==="scheduled"||P==="offseason"?(await R(G),x(!0)):N(!0)}catch(te){console.error("Error fetching phase data:",te),N(!0)}},j=()=>{if(!O.length||!Z.length||!g)return[];const G=`${a}`,te=[];for(const q of O)if(q.player1&&q.player2&&!q.scheduled){const oe=q.player1.trim(),he=q.player2.trim();(oe.toLowerCase()===G.toLowerCase()||he.toLowerCase()===G.toLowerCase())&&te.push(q)}const P=Z.filter(q=>q.divisions&&q.divisions.includes(g));return te.map(q=>{var be,nt;const oe=q.player1&&q.player1.trim().toLowerCase()===G.toLowerCase()?(be=q.player2)==null?void 0:be.trim():(nt=q.player1)==null?void 0:nt.trim();if(!oe)return null;const he=P.find(ye=>ye.name&&ye.name.trim().toLowerCase()===oe.toLowerCase());return{match:q,player:he,opponentName:oe}}).filter(Boolean)},X=async G=>{const P=Z.filter(ne=>ne.divisions&&ne.divisions.includes(g)).find(ne=>ne.name&&ne.name.trim().toLowerCase()===G.trim().toLowerCase());if(!P){alert("Player data not found for: "+G);return}if(!P.email){alert("This opponent does not have an email on file and cannot be proposed a match.");return}if(o){try{const ne=await fetch(`${pe}/api/users/search?approved=true`);if(!ne.ok)throw new Error("Failed to fetch players from database");const oe=(await ne.json()).users.find(he=>`${he.firstName} ${he.lastName}`.trim().toLowerCase()===G.trim().toLowerCase());if(oe){const he=typeof oe.availability=="string"?r0(oe.availability):oe.availability,be={...oe,availability:he};B(be)}else B(P)}catch(ne){console.error("Error fetching detailed player data:",ne),B(P)}x(!1),I(!0)}else x(!1),N(!0)},W=(G,te,P,ne)=>{M({day:G,slot:te,phase:P,division:ne,opponent:k}),I(!1),_(!0)},T=()=>{x(!1),N(!1),I(!1),_(!1),B(null),M(null),f(""),n()};return u?e.createElement(Bt,{open:!0,onClose:n,title:"Loading Divisions...",maxWidth:"500px"},e.createElement("div",{style:{textAlign:"center",padding:"2rem"}},e.createElement("p",null,"Please wait while we load your divisions..."))):i.length===0?e.createElement(Bt,{open:!0,onClose:n,title:"No Divisions Found",maxWidth:"500px"},e.createElement("div",{style:{textAlign:"center",padding:"2rem"}},e.createElement("p",null,"You are not registered for any divisions. Please contact an administrator."),e.createElement("button",{onClick:n,style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"0.8rem 1.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",marginTop:"1rem"},onMouseEnter:G=>{G.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",G.target.style.transform="translateY(-2px)",G.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:G=>{G.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",G.target.style.transform="translateY(0)",G.target.style.boxShadow="none"}},"Close"))):e.createElement(e.Fragment,null,!S&&!E&&e.createElement(Bt,{open:!0,onClose:n,title:"Select Division",maxWidth:"500px"},e.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},e.createElement("p",{style:{color:"#fff",textAlign:"center",marginBottom:"1.5rem",fontSize:"1rem"}},"Choose a division to schedule a match:"),e.createElement("div",{style:{display:"grid",gap:"12px"}},i.map(G=>e.createElement("button",{key:G,onClick:()=>D(G),style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem 1.5rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:te=>{te.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",te.target.style.transform="translateY(-2px)",te.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:te=>{te.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",te.target.style.transform="translateY(0)",te.target.style.boxShadow="none"}},"🏆 ",G))))),S&&(V?e.createElement(Bt,{open:!0,onClose:T,title:"Loading Opponents...",maxWidth:"500px"},e.createElement("div",{style:{textAlign:"center",padding:"2rem"}},e.createElement("p",null,"Please wait while we load your scheduled opponents..."))):e.createElement(f5,{open:S,onClose:T,opponents:j(),onOpponentClick:X,phase:h})),E&&e.createElement(k0,{onClose:T,excludeName:a,senderName:a,senderEmail:r,onProposalComplete:()=>{T()},selectedDivision:g,phase:h}),C&&k&&e.createElement(Gp,{open:C,onClose:T,player:k,senderName:a,senderEmail:r,selectedDivision:g,onProposeMatch:W,phase:h}),A&&z&&e.createElement(ef,{open:A,onClose:T,player:z.opponent,day:z.day,slot:z.slot,senderName:a,senderEmail:r,selectedDivision:z.division,phase:z.phase,onProposalComplete:()=>{T()}}))}const oB="_outerChatBg_whq3p_29",sB="_chatContainer_whq3p_85",lB="_topNavBar_whq3p_125",iB="_chatGreeting_whq3p_169",cB="_buttonRow_whq3p_193",dB="_topChatButton_whq3p_207",uB="_logoutWithTimer_whq3p_297",mB="_timerBox_whq3p_311",pB="_sectionHeader_whq3p_339",fB="_collapsed_whq3p_421",gB="_sectionContent_whq3p_455",hB="_expanded_whq3p_485",yB="_channelListRow_whq3p_499",bB="_announcements_whq3p_499",vB="_divisions_whq3p_509",xB="_gameButton_whq3p_561",EB="_mainChatArea_whq3p_597",wB="_mainChatWindow_whq3p_615",SB="_poolBackground_whq3p_675",CB="_chatContent_whq3p_749",_B="_sidebar_whq3p_763",kB="_hamburgerButton_whq3p_817",NB="_hamburgerIcon_whq3p_865",IB="_sidebarBackdrop_whq3p_875",AB="_closeSidebarButton_whq3p_901",DB="_mobileNavButtons_whq3p_949",MB="_mobileNavButton_whq3p_949",RB="_mobileTimerBox_whq3p_1011",TB="_generalChannelRow_whq3p_1037",PB="_active_whq3p_1129",LB="_pulse_whq3p_1",BB="_channelListName_whq3p_1183",zB="_pinIcon_whq3p_1225",OB="_channelIcon_whq3p_1247",FB="_pinned_whq3p_1273",UB="_noPinnedChannels_whq3p_1283",WB="_noChannelsFound_whq3p_1285",jB="_sidebarSearch_whq3p_1307",HB="_channelListWrapper_whq3p_1387",$B="_customMessageUi_whq3p_1431",YB="_onlineDot_whq3p_1469",GB="_online_whq3p_1469",qB="_messageContent_whq3p_1525",ZB="_messageUsername_whq3p_1543",VB="_messageText_whq3p_1563",QB="_loadingContainer_whq3p_1583",JB="_spinner_whq3p_1597",XB="_spin_whq3p_1597",KB="_open_whq3p_1739",e7="_messagesArea_whq3p_1981",t7="_messageInputContainer_whq3p_1989",a7="_messageInput_whq3p_1989",n7="_sendButton_whq3p_2011",r7="_messageItem_whq3p_2151",o7="_messageItemLeft_whq3p_2797",s7="_messageItemRight_whq3p_2807",l7="_messageListBackground_whq3p_2821",i7="_poolTableImg_whq3p_2851",c7="_poolTableSvg_whq3p_2853",d7="_channelNamePreview_whq3p_2881",u7="_messageHeader_whq3p_3825",m7="_messageAuthor_whq3p_3839",p7="_messageTime_whq3p_3853",f7="_chatHeader_whq3p_4091",g7="_chatMessages_whq3p_4101",h7="_message_whq3p_1525",y7="_sent_whq3p_4207",b7="_received_whq3p_4219",v7="_messageSender_whq3p_4273",x7="_sending_whq3p_4797",E7="_error_whq3p_4813",w7="_typingIndicator_whq3p_4825",S7="_messageGroup_whq3p_4847",C7="_scrollToBottom_whq3p_4925",St={outerChatBg:oB,chatContainer:sB,topNavBar:lB,chatGreeting:iB,buttonRow:cB,topChatButton:dB,logoutWithTimer:uB,timerBox:mB,sectionHeader:pB,collapsed:fB,sectionContent:gB,expanded:hB,channelListRow:yB,announcements:bB,divisions:vB,"game-rooms":"_game-rooms_whq3p_519",gameButton:xB,mainChatArea:EB,mainChatWindow:wB,poolBackground:SB,chatContent:CB,sidebar:_B,hamburgerButton:kB,hamburgerIcon:NB,sidebarBackdrop:IB,closeSidebarButton:AB,mobileNavButtons:DB,mobileNavButton:MB,mobileTimerBox:RB,generalChannelRow:TB,active:PB,pulse:LB,channelListName:BB,pinIcon:zB,channelIcon:OB,pinned:FB,noPinnedChannels:UB,noChannelsFound:WB,sidebarSearch:jB,channelListWrapper:HB,customMessageUi:$B,onlineDot:YB,online:GB,messageContent:qB,messageUsername:ZB,messageText:VB,loadingContainer:QB,spinner:JB,spin:XB,"str-chat__send-button":"_str-chat__send-button_whq3p_1629",open:KB,messagesArea:e7,messageInputContainer:t7,messageInput:a7,sendButton:n7,messageItem:r7,messageItemLeft:o7,messageItemRight:s7,messageListBackground:l7,poolTableImg:i7,poolTableSvg:c7,"str-chat__main-panel":"_str-chat__main-panel_whq3p_2869",channelNamePreview:d7,"str-chat":"_str-chat_whq3p_1629","str-chat__container":"_str-chat__container_whq3p_2933","str-chat__messenger":"_str-chat__messenger_whq3p_2943","str-chat__messenger--main":"_str-chat__messenger--main_whq3p_2953","str-chat__messenger--main-panel":"_str-chat__messenger--main-panel_whq3p_2963","str-chat__messenger--main-panel-inner":"_str-chat__messenger--main-panel-inner_whq3p_2973","str-chat__messenger--main-panel-inner-content":"_str-chat__messenger--main-panel-inner-content_whq3p_2983","str-chat__messenger--main-panel-inner-content-inner":"_str-chat__messenger--main-panel-inner-content-inner_whq3p_2993","str-chat__messenger--main-panel-inner-content-inner-inner":"_str-chat__messenger--main-panel-inner-content-inner-inner_whq3p_3003","str-chat__message-list":"_str-chat__message-list_whq3p_3015","str-chat__input-flat--wrapper":"_str-chat__input-flat--wrapper_whq3p_3025","str-chat__input-flat":"_str-chat__input-flat_whq3p_3025","str-chat__channel-header":"_str-chat__channel-header_whq3p_3047","str-chat__thread":"_str-chat__thread_whq3p_3059","str-chat__window":"_str-chat__window_whq3p_3071","str-chat__channel":"_str-chat__channel_whq3p_3047","str-chat__message":"_str-chat__message_whq3p_3015","str-chat__message-text":"_str-chat__message-text_whq3p_3145","str-chat__message-author":"_str-chat__message-author_whq3p_3159","str-chat__message-timestamp":"_str-chat__message-timestamp_whq3p_3175","str-chat__channel-header-title":"_str-chat__channel-header-title_whq3p_3323","str-chat__channel-header-info":"_str-chat__channel-header-info_whq3p_3345","str-chat__thread-header":"_str-chat__thread-header_whq3p_3365","str-chat__thread-start":"_str-chat__thread-start_whq3p_3377","str-chat__typing-indicator":"_str-chat__typing-indicator_whq3p_3397","str-chat__avatar":"_str-chat__avatar_whq3p_3415","str-chat__avatar-fallback":"_str-chat__avatar-fallback_whq3p_3425","str-chat__channel-list":"_str-chat__channel-list_whq3p_3459","str-chat__channel-list-messenger":"_str-chat__channel-list-messenger_whq3p_3469","str-chat__channel-preview-messenger":"_str-chat__channel-preview-messenger_whq3p_3477","str-chat__channel-preview-messenger--active":"_str-chat__channel-preview-messenger--active_whq3p_3505","str-chat__channel-preview-messenger--title":"_str-chat__channel-preview-messenger--title_whq3p_3517","str-chat__channel-preview-messenger--subtitle":"_str-chat__channel-preview-messenger--subtitle_whq3p_3529",messageHeader:u7,messageAuthor:m7,messageTime:p7,chatHeader:f7,chatMessages:g7,message:h7,sent:y7,received:b7,messageSender:v7,sending:x7,error:E7,typingIndicator:w7,messageGroup:S7,scrollToBottom:C7},_7={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},kp="nbvut8j4y6se";console.log("🔑 Stream Chat API Key:",kp);console.log("🔑 Environment variables:",_7);console.log("✅ VITE_STREAM_API_KEY is set:",kp);const k7=pe,Tx="general",N7="announcements";let bm=!1;const I7=["FRBCAPL TEST","Singles Test"],Px={GENERAL:"general",DIVISIONS:"divisions",ANNOUNCEMENTS:"announcements",GAME_ROOMS:"game-rooms"};function Lx(a){return a.toLowerCase().replace(/[^a-z0-9_-]/g,"")}const A7=({channel:a})=>{var r;return e.createElement("div",{className:St.channelNamePreview},((r=a.data)==null?void 0:r.name)||a.id)};function D7(){return JSON.parse(localStorage.getItem("pinnedChannels")||"[]")}function M7(a){localStorage.setItem("pinnedChannels",JSON.stringify(a))}const R7=({pinned:a,onClick:r})=>e.createElement("span",{onClick:r,className:`${St.pinIcon}${a?" "+St.pinned:""}`,title:a?"Unpin channel":"Pin channel"},a?"📌":"📍"),Uh=({children:a,icon:r,sectionKey:t,isCollapsed:n,onToggle:o})=>e.createElement("div",{className:`${St.sectionHeader} ${n?St.collapsed:""}`,onClick:()=>o(t)},r&&e.createElement("span",{style:{marginRight:"8px"}},r),a);function _w({userName:a,userEmail:r,userPin:t,channelId:n,onClose:o}){var nt;const i=Qn(),[c,u]=b.useState(!1),[m,g]=b.useState(null),[f,h]=b.useState(null),[v,S]=b.useState(null),[x,E]=b.useState({}),[N,C]=b.useState([]),[I,A]=b.useState(null),[_,k]=b.useState(D7()),[B,z]=b.useState(!1),[M,O]=b.useState(!1),[U,Z]=b.useState(1800),[H,V]=b.useState(""),[F,R]=b.useState([]),[D,j]=b.useState(""),[X,W]=b.useState(!0),[T,G]=b.useState({announcements:!1,divisions:!1,gameRooms:!1});b.useEffect(()=>{if(U<=0){te();return}const ye=setInterval(()=>{Z(We=>We-1)},1e3);return()=>clearInterval(ye)},[U]),b.useEffect(()=>{if(bm)return;bm=!0;let ye=wy.getInstance(kp);console.log("🔑 Using API key for Stream Chat client:",kp);let We=!1,Ze=!0;async function lt(){var Ve,zt,ve,J;try{if(ye.userID)try{await ye.disconnectUser()}catch{}await new Promise(Te=>setTimeout(Te,300));const Ae=Lx(r),Ge=await fetch(`${k7}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:Ae})}),{token:Le,userId:de}=await Ge.json();if(await ye.connectUser({id:de,name:a,email:r},Le),We=!0,!Ze)return;g(ye);const je=ye.channel("messaging",Tx,{name:"General Chat",description:"General discussion for all players"});let ze=0,gt=!1;for(;ze<3&&!gt;)try{await je.watch({limit:100}),gt=!0,console.log("Successfully loaded general channel with",((Ve=je.state.messages)==null?void 0:Ve.length)||0,"messages")}catch(Te){ze++,console.log(`Retry ${ze} for general channel:`,Te.message),ze>=3?(console.error("Failed to load general channel after 3 retries, but continuing..."),gt=!0):await new Promise(rt=>setTimeout(rt,1e3))}const re=ye.channel("messaging",N7,{name:"📢 Announcements",description:"Important announcements and updates"});try{await re.watch({limit:100}),console.log("Successfully loaded announcements channel with",((zt=re.state.messages)==null?void 0:zt.length)||0,"messages")}catch(Te){console.error("Error loading announcements channel:",Te)}const Be={};for(const Te of I7){const rt=Lx(Te),pt=ye.channel("messaging",`division-${rt}`,{name:`🏆 ${Te}`,description:`Discussion for ${Te} players`,category:Px.DIVISIONS});try{await pt.watch({limit:100}),Be[Te]=pt,console.log(`Successfully loaded division channel ${Te} with`,((ve=pt.state.messages)==null?void 0:ve.length)||0,"messages")}catch(jt){console.error(`Error loading division channel ${Te}:`,jt),Be[Te]=pt}}const Oe=[];for(let Te=1;Te<=5;Te++){const rt=`game-room-${Te}`,pt=ye.channel("messaging",rt,{name:`🎮 Game Room ${Te}`,description:`Multiplayer game room ${Te} - for future online play`,category:Px.GAME_ROOMS});try{await pt.watch({limit:100}),Oe.push(pt),console.log(`Successfully loaded game room ${Te} with`,((J=pt.state.messages)==null?void 0:J.length)||0,"messages")}catch(jt){console.error(`Error loading game room ${Te}:`,jt),Oe.push(pt)}}Ze&&(console.log("Setting channels:",{general:je,announcements:re,divisions:Object.keys(Be),gameRooms:Oe.length}),h(je),S(re),E(Be),C(Oe),setTimeout(()=>{Ze&&(console.log("Setting general channel as active"),A(je),W(!1))},100))}catch(Ae){console.error("Error initializing chat:",Ae),Ze&&W(!1)}finally{bm=!1}}return lt(),()=>{if(Ze=!1,ye&&We)try{ye.disconnectUser()}catch{}bm=!1}},[r,a]),b.useEffect(()=>{M7(_)},[_]),b.useEffect(()=>{var ye;if(I){console.log("Channel changed to:",I.id,((ye=I.state.messages)==null?void 0:ye.length)||0,"messages");const We=I.state.messages||[];R(We);const Ze=Ve=>{console.log("New message received in channel:",I.id);const zt=I.state.messages||[];R([...zt])},lt=()=>{console.log("Channel state updated:",I.id);const Ve=I.state.messages||[];R([...Ve])};return I.on("message.new",Ze),I.on("message.updated",lt),I.on("message.deleted",lt),()=>{I.off("message.new",Ze),I.off("message.updated",lt),I.off("message.deleted",lt)}}else f&&!I?(console.log("Fallback: setting general channel"),A(f)):R([])},[I,f]);function te(){m&&m.disconnectUser(),localStorage.clear(),o?o():(i("/"),window.location.reload())}function P(){O(!0)}const ne=async()=>{if(D.trim()&&I)try{const ye=await I.sendMessage({text:D});j("")}catch(ye){console.error("Error sending message:",ye)}},q=ye=>{ye.key==="Enter"&&!ye.shiftKey&&(ye.preventDefault(),ne())};if(X)return e.createElement("div",{className:St.loadingContainer},e.createElement("div",{className:St.spinner}),e.createElement("div",null,"Loading chat...Please wait"));(nt=m==null?void 0:m.user)==null||nt.id;const oe=Math.floor(U/60),he=U%60,be=(ye,We=null)=>!ye||!ye.cid?null:e.createElement("div",{key:ye.cid,className:`${St.channelListRow} ${We?St[We]:""} ${(I==null?void 0:I.id)===ye.id?St.active:""}`,onClick:()=>{A(ye),u(!1)}},e.createElement("div",{className:St.channelListName},e.createElement(A7,{channel:ye})),e.createElement(R7,{pinned:_.includes(ye.id),onClick:Ze=>{Ze.stopPropagation();let lt;_.includes(ye.id)?lt=_.filter(Ve=>Ve!==ye.id):lt=[..._,ye.id],k(lt)}}));return e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3}},e.createElement("div",{style:{background:"linear-gradient(120deg, #232323 80%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"1rem",boxShadow:"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",width:"90vw",maxWidth:"1000px",height:"80vh",maxHeight:"600px",display:"flex",flexDirection:"column",position:"relative"}},e.createElement("button",{className:St.hamburgerButton,onClick:()=>u(!0),"aria-label":"Open channel list"},e.createElement("span",{className:St.hamburgerIcon},"☰")),c&&e.createElement("div",{className:St.sidebarBackdrop,onClick:()=>u(!1)}),e.createElement("div",{style:{padding:"1rem",borderBottom:"2px solid #e53e3e",display:"flex",justifyContent:"center",alignItems:"center",position:"relative"}},e.createElement("h2",{style:{margin:0,color:"#fff",fontSize:"1.5rem",fontWeight:"bold"}},"League Chat - ",a),e.createElement("button",{onClick:o||(()=>i("/")),style:{position:"absolute",right:"1rem",background:"none",border:"none",color:"#fff",fontSize:"2rem",cursor:"pointer",padding:"0.5rem"}},"×")),e.createElement("div",{style:{flex:1,display:"flex",minHeight:0}},e.createElement("div",{style:{width:"250px",backgroundColor:"linear-gradient(180deg, #1a1a1a 0%, #2a2a2a 100%)",borderRight:"2px solid #e53e3e",overflowY:"auto",padding:"1rem",boxShadow:"inset -2px 0 8px rgba(0,0,0,0.3)"}},e.createElement("button",{className:St.closeSidebarButton,onClick:()=>u(!1),"aria-label":"Close channel list"},"×"),e.createElement("div",{className:St.mobileNavButtons},e.createElement("button",{className:St.mobileNavButton,onClick:()=>{o?o():(i("/"),window.location.reload()),u(!1)}},"🏠 Dashboard"),e.createElement("button",{className:St.mobileNavButton,onClick:()=>{P(),u(!1)}},"📅 Schedule a Match"),e.createElement("button",{className:St.mobileNavButton,onClick:()=>{te(),u(!1)}},"🚪 Logout"),e.createElement("div",{className:St.mobileTimerBox},"Auto Logout: ",oe,":",he.toString().padStart(2,"0"))),e.createElement("div",{className:`${St.generalChannelRow}${(I==null?void 0:I.id)===Tx||I===f?" "+St.active:""}`,onClick:()=>{A(f),u(!1)}},e.createElement("span",{style:{marginRight:8}},"#")," General Chat"),e.createElement("div",{className:St.sidebarSearch},e.createElement("input",{type:"text",placeholder:"Search channels...",value:H,onChange:ye=>V(ye.target.value)})),e.createElement("div",{className:St.channelListWrapper},e.createElement(Uh,{icon:"📢",sectionKey:"announcements",isCollapsed:T.announcements,onToggle:ye=>G(We=>({...We,[ye]:!We[ye]}))},"Announcements"),e.createElement("div",{className:`${St.sectionContent} ${T.announcements?St.collapsed:St.expanded}`},v?be(v,"announcements"):e.createElement("div",{style:{padding:"8px",color:"#888",fontStyle:"italic"}},"No announcements channel available")),e.createElement(Uh,{icon:"🏆",sectionKey:"divisions",isCollapsed:T.divisions,onToggle:ye=>G(We=>({...We,[ye]:!We[ye]}))},"Division Channels"),e.createElement("div",{className:`${St.sectionContent} ${T.divisions?St.collapsed:St.expanded}`},Object.values(x).length>0?Object.values(x).map(ye=>be(ye,"divisions")):e.createElement("div",{style:{padding:"8px",color:"#888",fontStyle:"italic"}},"No division channels available")),e.createElement(Uh,{icon:"🎮",sectionKey:"gameRooms",isCollapsed:T.gameRooms,onToggle:ye=>G(We=>({...We,[ye]:!We[ye]}))},"Game Rooms"),e.createElement("div",{className:`${St.sectionContent} ${T.gameRooms?St.collapsed:St.expanded}`},N.length>0?N.map(ye=>be(ye,"game-rooms")):e.createElement("div",{style:{padding:"8px",color:"#888",fontStyle:"italic"}},"No game room channels available")),e.createElement("div",{className:`${St.channelListRow} ${St.gameButton}`,onClick:()=>{i("/tenball"),u(!1)}},e.createElement("span",{style:{marginRight:8}},"🎯"),"Play Pool Game"))),e.createElement("div",{className:St.mainChatWindow,style:{flex:1,display:"flex",flexDirection:"column",position:"relative"}},e.createElement("div",{className:St.poolBackground},e.createElement(Sd,null)),e.createElement(X9,{channel:I,currentUser:m==null?void 0:m.user}),e.createElement("div",{className:St.messagesArea,style:{flex:1,overflowY:"auto",paddingBottom:"80px"}},F.map(ye=>{var Ve,zt,ve,J;const We=(Ve=ye.user)==null?void 0:Ve.id,Ze=(zt=m==null?void 0:m.user)==null?void 0:zt.id;let lt=We===Ze;if(!lt&&We&&Ze){const Ae=We.split("_")[0];lt=Ze.startsWith(Ae)}return e.createElement("div",{key:ye.id,className:`${St.messageItem} ${lt?St.messageItemRight:St.messageItemLeft}`},e.createElement("div",{className:St.messageHeader},e.createElement("span",{className:St.messageAuthor},((ve=ye.user)==null?void 0:ve.name)||((J=ye.user)==null?void 0:J.id)),e.createElement("span",{className:St.messageTime},new Date(ye.created_at).toLocaleTimeString())),e.createElement("div",{className:St.messageText},ye.text))})),e.createElement("div",{className:St.messageInputContainer,style:{position:"absolute",bottom:0,left:0,right:0,zIndex:10}},e.createElement("input",{type:"text",value:D,onChange:ye=>j(ye.target.value),onKeyPress:q,placeholder:"Type your message...",className:St.messageInput}),e.createElement("button",{onClick:ne,className:St.sendButton,disabled:!D.trim()},"🚀 Send"))))),M&&e.createElement(rB,{userName:a,userEmail:r,userPin:t,onClose:()=>O(!1),fromChat:!0}))}const T7=({isMobile:a})=>e.createElement("div",{style:{background:"rgba(0, 0, 0, 0.75)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:a?"12px":"16px",padding:a?"8px":"16px",margin:a?"-15px 0 0 0":"13px auto",width:a?"100%":"90%",maxWidth:a?"none":"1200px",boxShadow:"0 4px 16px rgba(0,0,0,0.3)",backdropFilter:"blur(4px)",height:a?"350px":"400px",position:"relative",overflow:"hidden"}},e.createElement("div",{style:{position:"relative",textAlign:"center",marginBottom:a?"0px":"4px",padding:a?"2px":"4px",borderRadius:"8px",background:"rgba(0, 0, 0, 0.6)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",minHeight:a?"2.5rem":"3rem"}},e.createElement("div",{style:{display:"inline-block",width:a?"80px":"100px",height:a?"24px":"32px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"6px",animation:"shimmer 1.5s infinite",margin:"8px"}}),e.createElement("div",{style:{display:"inline-block",width:a?"60px":"80px",height:a?"20px":"28px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"6px",animation:"shimmer 1.5s infinite",margin:"8px"}})),e.createElement("div",{style:{width:a?"200px":"300px",height:a?"16px":"20px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"4px",animation:"shimmer 1.5s infinite",margin:"8px auto"}}),e.createElement("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",marginTop:a?"20px":"30px",gap:a?"10px":"20px"}},e.createElement("div",{style:{width:a?"100px":"140px",height:a?"80px":"120px",background:"linear-gradient(90deg, rgba(0,255,0,0.1) 25%, rgba(0,255,0,0.2) 50%, rgba(0,255,0,0.1) 75%)",borderRadius:"12px",animation:"shimmer 1.5s infinite",border:"2px solid rgba(0,255,0,0.3)"}}),e.createElement("div",{style:{width:a?"80px":"140px",height:a?"60px":"100px",background:"linear-gradient(90deg, rgba(52,152,219,0.1) 25%, rgba(52,152,219,0.2) 50%, rgba(52,152,219,0.1) 75%)",borderRadius:"12px",animation:"shimmer 1.5s infinite",border:"2px solid rgba(52,152,219,0.3)"}})),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"stretch",marginTop:a?"20px":"30px",gap:a?"6px":"12px",padding:a?"6px":"8px",borderRadius:"8px",background:"rgba(0, 0, 0, 0.5)",border:"1px solid rgba(255,255,255,0.15)"}},e.createElement("div",{style:{flex:1,height:a?"70px":"80px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}}),e.createElement("div",{style:{flex:1,height:a?"70px":"80px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}}),e.createElement("div",{style:{flex:1,height:a?"70px":"80px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}})),e.createElement("div",{style:{display:"flex",gap:a?"8px":"12px",marginTop:a?"10px":"15px"}},e.createElement("div",{style:{flex:a?"0 0 140px":"0 0 200px",height:a?"80px":"100px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}}),e.createElement("div",{style:{flex:1,height:a?"80px":"100px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}})),e.createElement("style",null,`
        @keyframes shimmer {
          0% {
            background-position: -200px 0;
          }
          100% {
            background-position: calc(200px + 100%) 0;
          }
        }
      `));function Wh(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-");return`${c}-${u}-${i}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}const kw=({currentPhase:a,seasonData:r,completedMatches:t,totalRequiredMatches:n,playerName:o,playerLastName:i,selectedDivision:c,onOpenOpponentsModal:u,onOpenCompletedMatchesModal:m,onOpenStandingsModal:g,onOpenAllMatchesModal:f,pendingCount:h,sentCount:v,onOpenProposalListModal:S,onOpenSentProposalListModal:x,upcomingMatches:E,onMatchClick:N,isMobile:C,onOpenMessageCenter:I,currentUser:A,allPlayers:_,onSmartMatchClick:k,showPhase1Rules:B,setShowPhase1Rules:z,showPhase1Overview:M,setShowPhase1Overview:O,setPlayerStats:U,setTimeLeft:Z,setDeadlineStatus:H,setPhase1EndDate:V,onOpenCalendar:F})=>{const R=()=>!o||!i?(console.warn("Phase1Tracker: Missing player name information"),!1):c?!t||!Array.isArray(t)?(console.warn("Phase1Tracker: Invalid completedMatches prop"),!1):typeof n!="number"||n<=0?(console.warn("Phase1Tracker: Invalid totalRequiredMatches prop"),!1):!0:(console.warn("Phase1Tracker: Missing selected division"),!1);b.useEffect(()=>{R()},[o,i,c,t,n]);const[D,j]=b.useState(null),[X,W]=b.useState([]),[T,G]=b.useState(!1),[te,P]=b.useState(!0),[ne,q]=b.useState(new Date),[oe,he]=b.useState(null),[be,nt]=b.useState(null),[ye,We]=b.useState("normal"),[Ze,lt]=b.useState(null),[Ve,zt]=b.useState(null);b.useEffect(()=>{if(!c||a!=="scheduled"){nt(null),Z(null);return}const re=async()=>{try{const Oe=c.replace(/[^A-Za-z0-9]/g,"_"),Te=Date.now(),rt=`${pe}/static/schedule_${Oe}.json?t=${Te}`,pt=await fetch(rt,{method:"GET",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!pt.ok){console.warn(`Failed to fetch schedule: ${pt.status} - ${pt.statusText}`);return}const jt=await pt.json();if(!Array.isArray(jt)||jt.length===0){console.warn("No schedule data available");return}const ba=jt.filter(He=>He.date).sort((He,ht)=>new Date(He.date)-new Date(ht.date));if(ba.length===0){console.warn("No valid matches found in schedule");return}const da=Math.min(47,ba.length-1),ta=ba[da];if(!ta||!ta.date){console.warn("Could not determine Phase 1 end date from schedule");return}const wa=new Date(ta.date);wa.setHours(23,59,59,999),lt(wa),V(wa);const rn=new Date;if(rs(rn,wa)){const He={days:0,hours:0,passed:!0};nt(He),Z(He),We("passed"),H("passed")}else{const He=_E(wa,rn),ht=b4(wa,rn)%24,Qt={days:He,hours:ht,passed:!1};nt(Qt),Z(Qt),He<=0&&ht<=24?(We("critical"),H("critical")):He<=2?(We("urgent"),H("urgent")):He<=7?(We("warning"),H("warning")):(We("normal"),H("normal"))}}catch(Oe){console.error("Error calculating Phase 1 deadline from schedule:",Oe)}};re();const Be=setInterval(re,6e4);return()=>clearInterval(Be)},[c,a]),b.useEffect(()=>{a==="scheduled"&&c&&t&&(Ae(),Ge())},[a,c,t,n,X]),b.useEffect(()=>{c&&a==="scheduled"&&ve()},[c,a]);const ve=async()=>{try{if(G(!0),!c){console.warn("No division selected for standings");return}const re=c.replace(/[^A-Za-z0-9]/g,"_"),Be=`${pe}/static/standings_${re}.json`,Oe=await fetch(Be);if(!Oe.ok){console.warn(`Failed to fetch standings: ${Oe.status} - ${Oe.statusText}`);return}const Te=await Oe.json();if(!Array.isArray(Te)){console.error("Standings data is not an array:",Te);return}const rt=Te.filter(pt=>{if(!pt||typeof pt!="object")return console.warn("Invalid standings entry:",pt),!1;if(!pt.name||!pt.rank)return console.warn("Standings entry missing name or rank:",pt),!1;const jt=parseInt(pt.rank);return isNaN(jt)||jt<=0?(console.warn("Invalid rank in standings entry:",pt),!1):!0});W(rt)}catch(re){console.error("Failed to load standings:",re)}finally{G(!1)}},J=(re,Be)=>{if(!re||re.length===0)return null;const Oe=Be.toLowerCase().trim(),Te=re.find(rt=>rt.name.toLowerCase().trim()===Oe);return Te?parseInt(Te.rank):null},Ae=()=>{const re=t.length,Be=n-re,Oe={completedCount:re,remainingCount:Be,deadlinePassed:Zo.hasPhase1DeadlinePassed(r)};j(Oe)},Ge=()=>{let re=0,Be=0;const Oe=`${o} ${i}`;t&&t.length>0&&t.forEach(ba=>{ba.winner===Oe?re++:Be++});const Te=t&&t.length>0?Math.round(re/(re+Be)*100):0,rt=J(X,Oe);let pt="N/A";rt!==null?pt=`${rt}${Le(rt)}`:t&&t.length>=1&&(Te>=80?pt="1st-3rd":Te>=60?pt="4th-6th":Te>=40?pt="7th-9th":pt="10th+");const jt={wins:re,losses:Be,winRate:Te,position:pt,actualPosition:rt};zt(jt),U(jt)},Le=re=>{const Be=re%10,Oe=re%100;return Be===1&&Oe!==11?"st":Be===2&&Oe!==12?"nd":Be===3&&Oe!==13?"rd":"th"};if(T||!be||!D||a!=="scheduled")return e.createElement(T7,{isMobile:C});const de=()=>ye==="passed"?"#e74c3c":ye==="critical"?"#ff6b6b":ye==="urgent"?"#ff8800":ye==="warning"?"#ffaa00":"#4CAF50",je=()=>{if(ye==="passed")return"⚠️ DEADLINE PASSED!";if(ye==="critical"){const re=Ze?Hn(Ze,C?"MMM d":"MMM d, yyyy"):"";return`🚨 CRITICAL: ENDS in ${be.hours} hours! (${re})`}else if(ye==="urgent"){const re=Ze?Hn(Ze,C?"MMM d":"MMM d, yyyy"):"";return`⚠️ URGENT: ENDS in ${be.days} days! (${re})`}else if(ye==="warning"){const re=Ze?Hn(Ze,C?"MMM d":"MMM d, yyyy"):"";return`⚠️ WARNING: ENDS in ${be.days} days. (${re})`}else{const re=Ze?Hn(Ze,C?"MMM d":"MMM d, yyyy"):"";return`ENDS in ${be.days} days. (${re})`}},ze=()=>Math.round(t.length/n*100),gt=de();return e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(0, 0, 0, 0.85), rgba(20, 20, 20, 0.9), rgba(0, 0, 0, 0.85))",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:C?"16px":"20px",padding:C?"6px 10px 10px 10px":"10px 16px 16px 16px",margin:C?"-15px 0 0 0":"13px auto",width:C?"100%":"98%",maxWidth:C?"none":"1600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4), 0 4px 16px rgba(255,255,255,0.1), inset 0 1px 0 rgba(255,255,255,0.1)",display:"flex",flexDirection:"column",justifyContent:"flex-start",backdropFilter:"blur(8px)",overflow:C?"auto":"hidden",maxHeight:C?"none":"35vh",height:C?te?"350px":"60px":te?"408px":"160px",transition:"height 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",transform:"none",touchAction:"none"},role:"presentation",tabIndex:"-1"},e.createElement("div",{style:{position:"relative",textAlign:"center",marginBottom:C?"0px":"3px",padding:C?"2px":"3px",borderRadius:"12px",background:"linear-gradient(135deg, rgba(0, 0, 0, 0.7), rgba(20, 20, 20, 0.8))",border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 4px 16px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)"}},e.createElement("h3",{style:{margin:0,color:"#ffffff",fontSize:C?"0.6rem":"0.9rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:C?"3px":"5px",flexWrap:"wrap",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",letterSpacing:"0.5px",minHeight:C?"2rem":"2.5rem"}},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:C?"2px":"6px"}},ye==="critical"&&"🚨",ye==="urgent"&&"⚠️",ye==="warning"&&"⚠️",ye==="passed"&&"⏰",ye==="normal"&&""),e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:C?"3px":"6px"}},e.createElement("button",{onClick:re=>{re.stopPropagation(),console.log("Smart match button clicked in Phase1Tracker"),console.log("onSmartMatchClick function:",k),k?(console.log("Calling onSmartMatchClick"),k()):console.log("onSmartMatchClick is not defined")},"aria-label":"Open smart match making",role:"button",tabIndex:"0",style:{background:"linear-gradient(135deg, rgba(255, 193, 7, 0.3), rgba(255, 193, 7, 0.2), rgba(255, 193, 7, 0.1))",border:"1px solid rgba(255, 193, 7, 0.4)",color:"#ffffff",fontSize:C?"0.4rem":"0.7rem",fontWeight:"bold",padding:C?"6px 10px":"8px 14px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",boxShadow:"0 2px 8px rgba(255, 193, 7, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)",zIndex:10},onMouseEnter:re=>{re.target.style.background="linear-gradient(135deg, rgba(255, 193, 7, 0.4), rgba(255, 193, 7, 0.3), rgba(255, 193, 7, 0.2))",re.target.style.transform="scale(1.02) translateY(-1px)",re.target.style.boxShadow="0 4px 12px rgba(255, 193, 7, 0.3), inset 0 1px 0 rgba(255,255,255,0.2)"},onMouseLeave:re=>{re.target.style.background="linear-gradient(135deg, rgba(255, 193, 7, 0.3), rgba(255, 193, 7, 0.2), rgba(255, 193, 7, 0.1))",re.target.style.transform="scale(1) translateY(0)",re.target.style.boxShadow="0 2px 8px rgba(255, 193, 7, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)"}},"🧠 SMART MATCH"),e.createElement("span",{onClick:re=>{re.stopPropagation(),O(!0)},style:{fontSize:C?"0.4rem":"0.7rem",background:`linear-gradient(135deg, ${gt}, ${gt}dd, ${gt})`,padding:C?"6px 10px":"8px 14px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2), 0 0 10px rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.3)",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:re=>{re.target.style.transform="scale(1.02) translateY(-1px)",re.target.style.boxShadow="0 6px 16px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.3), 0 0 15px rgba(255,255,255,0.2)"},onMouseLeave:re=>{re.target.style.transform="scale(1) translateY(0)",re.target.style.boxShadow="0 4px 12px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2), 0 0 10px rgba(255,255,255,0.1)"},title:"Click to view Phase 1 overview",role:"button",tabIndex:"0","aria-label":"Open Phase 1 overview"},"PHASE 1"),e.createElement("button",{onClick:re=>{re.stopPropagation(),z(!0)},"aria-label":"Open Phase 1 rules and information",role:"button",tabIndex:"0",style:{background:"linear-gradient(135deg, rgba(255, 68, 68, 0.3), rgba(255, 68, 68, 0.2), rgba(255, 68, 68, 0.1))",border:"1px solid rgba(255, 68, 68, 0.4)",color:"#ffffff",fontSize:C?"0.4rem":"0.7rem",fontWeight:"bold",padding:C?"6px 10px":"8px 14px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",boxShadow:"0 2px 8px rgba(255, 68, 68, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)",zIndex:10},onMouseEnter:re=>{re.target.style.background="linear-gradient(135deg, rgba(255, 68, 68, 0.4), rgba(255, 68, 68, 0.3), rgba(255, 68, 68, 0.2))",re.target.style.transform="scale(1.02) translateY(-1px)",re.target.style.boxShadow="0 4px 12px rgba(255, 68, 68, 0.3), inset 0 1px 0 rgba(255,255,255,0.2)"},onMouseLeave:re=>{re.target.style.background="linear-gradient(135deg, rgba(255, 68, 68, 0.3), rgba(255, 68, 68, 0.2), rgba(255, 68, 68, 0.1))",re.target.style.transform="scale(1) translateY(0)",re.target.style.boxShadow="0 2px 8px rgba(255, 68, 68, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)"}},"⚔️ RULES"))),e.createElement("div",{style:{color:"#ffffff",fontSize:C?"0.6rem":"0.8rem",lineHeight:"1.1",marginTop:"1px",marginBottom:C?"1px":"3px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center"}},je()),e.createElement("div",{style:{position:C?"relative":"absolute",left:C?"auto":"15%",top:C?"auto":"50%",transform:C?"none":"translate(-50%, -50%)",cursor:"pointer",fontSize:C?"2rem":"2.8rem",transition:"all 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",minHeight:C?"80px":"120px",lineHeight:1,background:"linear-gradient(135deg, rgba(76, 175, 80, 0.35), rgba(76, 175, 80, 0.3), rgba(76, 175, 80, 0.25))",border:"1px solid rgba(76, 175, 80, 0.7)",padding:C?"3px":"5px",borderRadius:C?"10px":"16px",zIndex:1,boxShadow:"0 2px 8px rgba(76, 175, 80, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)",minWidth:C?"60px":"90px",minHeight:C?"80px":"120px",backdropFilter:"blur(8px)",margin:C?"8px auto":"0"},onClick:()=>{P(!0),F&&F()},"aria-label":"Open calendar to schedule matches by date",role:"button",tabIndex:"0"},e.createElement("div",{style:{fontSize:C?"0.4rem":"0.6rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:C?"8px":"12px",textAlign:"center"}},"Today's Date"),e.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1}},e.createElement("div",{style:{fontSize:C?"0.7rem":"1rem"}},["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date().getDay()]),e.createElement("div",{style:{fontSize:C?"1rem":"1.8rem"}},(()=>{const re=new Date,Be=String(re.getMonth()+1).padStart(2,"0"),Oe=String(re.getDate()).padStart(2,"0"),Te=String(re.getFullYear()).slice(-2);return`${Be}/${Oe}/${Te}`})())),e.createElement("div",{style:{fontSize:C?"0.25rem":"0.6rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginTop:"auto",textAlign:"center",whiteSpace:"nowrap",background:"rgba(0, 0, 0, 0.7)",padding:C?"1px 2px":"2px 3px",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.3)"}},C?"Schedule":"Click to Schedule Match by Date")),e.createElement("div",{style:{position:C?"relative":"absolute",right:C?"auto":"15%",top:C?"auto":"50%",transform:C?"none":"translate(50%, -50%)",transition:"all 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",lineHeight:1,background:"linear-gradient(135deg, rgba(52, 152, 219, 0.15), rgba(52, 152, 219, 0.1), rgba(52, 152, 219, 0.05))",border:"1px solid rgba(52, 152, 219, 0.3)",padding:C?"3px":"5px",borderRadius:C?"10px":"16px",zIndex:1,boxShadow:"0 2px 8px rgba(52, 152, 219, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)",minWidth:C?"60px":"90px",minHeight:C?"80px":"120px",backdropFilter:"blur(8px)",margin:C?"8px auto":"0"},title:"Proposal management - view pending and sent proposals",onMouseEnter:re=>{re.currentTarget.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.25), rgba(52, 152, 219, 0.2), rgba(52, 152, 219, 0.15))",re.currentTarget.style.boxShadow="0 4px 12px rgba(52, 152, 219, 0.3), inset 0 1px 0 rgba(255,255,255,0.2)",re.currentTarget.style.border="1px solid rgba(52, 152, 219, 0.5)",re.currentTarget.style.transform="translate(50%, -50%) scale(1.02)"},onMouseLeave:re=>{re.currentTarget.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.15), rgba(52, 152, 219, 0.1), rgba(52, 152, 219, 0.05))",re.currentTarget.style.boxShadow="0 2px 8px rgba(52, 152, 219, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)",re.currentTarget.style.border="1px solid rgba(52, 152, 219, 0.3)",re.currentTarget.style.transform="translate(50%, -50%) scale(1)"}},e.createElement("div",{style:{fontSize:C?"0.5rem":"0.75rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginBottom:C?"3px":"6px",textAlign:"center",whiteSpace:"nowrap"}},"📋 Proposals"),e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:C?"2px":"4px",justifyContent:"center",width:"100%"}},e.createElement("button",{onClick:re=>{re.stopPropagation(),S&&S()},style:{background:"rgba(255, 255, 255, 0.1)",color:"#ffffff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",padding:C?"2px 3px":"5px 7px",fontSize:C?"0.4rem":"0.65rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:re=>{re.target.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.3), rgba(52, 152, 219, 0.25), rgba(52, 152, 219, 0.2))",re.target.style.transform="translateY(-1px) scale(1.01)",re.target.style.boxShadow="0 4px 12px rgba(52, 152, 219, 0.4), inset 0 1px 0 rgba(255,255,255,0.2)"},onMouseLeave:re=>{re.target.style.background="rgba(255, 255, 255, 0.1)",re.target.style.transform="translateY(0) scale(1)",re.target.style.boxShadow="0 2px 6px rgba(0,0,0,0.3)"}},"📥 ",h," waiting for you"),e.createElement("button",{onClick:re=>{re.stopPropagation(),x&&x()},style:{background:"rgba(255, 255, 255, 0.1)",color:"#ffffff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",padding:C?"2px 3px":"5px 7px",fontSize:C?"0.4rem":"0.65rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:re=>{re.target.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.3), rgba(52, 152, 219, 0.25), rgba(52, 152, 219, 0.2))",re.target.style.transform="translateY(-1px) scale(1.01)",re.target.style.boxShadow="0 4px 12px rgba(52, 152, 219, 0.4), inset 0 1px 0 rgba(255,255,255,0.2)"},onMouseLeave:re=>{re.target.style.background="rgba(255, 255, 255, 0.1)",re.target.style.transform="translateY(0) scale(1)",re.target.style.boxShadow="0 2px 6px rgba(0,0,0,0.3)"}},"📤 ",v," waiting for opponents"))),e.createElement("div",{style:{color:"#ffffff",fontSize:C?"0.65rem":"0.8rem",fontWeight:"bold",marginTop:C?"3px":"1px",marginBottom:C?"1px":"3px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",lineHeight:"1.1",textAlign:"center"}},t.length,"/",n," Matches Complete"),e.createElement("div",{style:{color:"#ffffff",fontSize:C?"0.65rem":"0.8rem",fontWeight:"bold",marginTop:"1px",marginBottom:C?"3px":"1px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",lineHeight:"1.1",textAlign:"center"}},n-t.length," to Schedule"),e.createElement("div",{style:{textAlign:"center",marginTop:C?"2px":"4px"}},e.createElement("button",{onClick:re=>{re.stopPropagation(),P(!te)},style:{fontSize:C?"0.4rem":"0.8rem",color:"#ffffff",fontWeight:"bold",cursor:"pointer",padding:C?"1px 2px":"3px 6px",borderRadius:"6px",display:"inline-block",transition:"background-color 0.2s ease",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",background:"transparent",border:"none"}},te?"Hide Stats ▲":"Show Stats ▼"))),te&&e.createElement(e.Fragment,null,e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"stretch",marginBottom:C?"6px":"3px",gap:C?"4px":"8px",padding:C?"4px":"6px",borderRadius:"8px",background:"rgba(0, 0, 0, 0.5)",border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"}},e.createElement("div",{onClick:re=>{re.stopPropagation(),u&&u()},style:{background:"rgba(0, 0, 0, 0.4)",padding:C?"4px":"6px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",flex:1,textAlign:"center",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:C?"60px":"70px"},onMouseEnter:re=>{re.currentTarget.style.background="linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(76, 175, 80, 0.3))",re.currentTarget.style.transform="translateY(-2px) scale(1.02)",re.currentTarget.style.boxShadow="0 4px 16px rgba(76, 175, 80, 0.3), 0 2px 8px rgba(0,0,0,0.2)",re.currentTarget.style.border="1px solid rgba(76, 175, 80, 0.5)"},onMouseLeave:re=>{re.currentTarget.style.background="rgba(255,255,255,0.08)",re.currentTarget.style.transform="translateY(0) scale(1)",re.currentTarget.style.boxShadow="none",re.currentTarget.style.border="1px solid rgba(255,255,255,0.15)"}},e.createElement("div",{style:{fontSize:C?"0.5rem":"0.7rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:C?"3px":"1px"}},"Progress"),e.createElement("div",{style:{fontSize:C?"0.6rem":"0.8rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:C?"2px":"1px"}},t.length,"/",n),e.createElement("div",{style:{width:"100%",height:C?"2px":"5px",background:"rgba(255,255,255,0.15)",borderRadius:"3px",overflow:"hidden",marginBottom:"1px",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.3)"}},e.createElement("div",{style:{width:`${ze()}%`,height:"100%",background:"linear-gradient(90deg, #4CAF50, #45a049, #4CAF50)",borderRadius:"3px",transition:"width 0.4s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 0 8px rgba(76, 175, 80, 0.5)",position:"relative"}},e.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent)",animation:"shimmer 2s infinite"}}))),e.createElement("div",{style:{fontSize:C?"0.45rem":"0.65rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click to see opponents")),e.createElement("div",{onClick:re=>{re.stopPropagation(),m&&m()},style:{background:"rgba(0, 0, 0, 0.4)",padding:C?"3px":"6px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",flex:1,textAlign:"center",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"70px"},onMouseEnter:re=>{re.currentTarget.style.background="linear-gradient(135deg, rgba(33, 150, 243, 0.2), rgba(33, 150, 243, 0.3))",re.currentTarget.style.transform="translateY(-2px) scale(1.02)",re.currentTarget.style.boxShadow="0 4px 16px rgba(33, 150, 243, 0.3), 0 2px 8px rgba(0,0,0,0.2)",re.currentTarget.style.border="1px solid rgba(33, 150, 243, 0.5)"},onMouseLeave:re=>{re.currentTarget.style.background="rgba(255,255,255,0.08)",re.currentTarget.style.transform="translateY(0) scale(1)",re.currentTarget.style.boxShadow="none",re.currentTarget.style.border="1px solid rgba(255,255,255,0.15)"}},e.createElement("div",{style:{fontSize:C?"0.3rem":"0.7rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:"1px"}},"Record"),e.createElement("div",{style:{fontSize:C?"0.4rem":"0.8rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:"1px"}},(Ve==null?void 0:Ve.wins)||0,"-",(Ve==null?void 0:Ve.losses)||0," (",(Ve==null?void 0:Ve.winRate)||0,"%)"),e.createElement("div",{style:{fontSize:C?"0.35rem":"0.65rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click to see results")),e.createElement("div",{onClick:re=>{re.stopPropagation(),g&&g()},style:{background:"rgba(0, 0, 0, 0.4)",padding:C?"4px":"8px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",flex:1,textAlign:"center",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"80px"},onMouseEnter:re=>{re.currentTarget.style.background="linear-gradient(135deg, rgba(156, 39, 176, 0.2), rgba(156, 39, 176, 0.3))",re.currentTarget.style.transform="translateY(-2px) scale(1.02)",re.currentTarget.style.boxShadow="0 4px 16px rgba(156, 39, 176, 0.3), 0 2px 8px rgba(0,0,0,0.2)",re.currentTarget.style.border="1px solid rgba(156, 39, 176, 0.5)"},onMouseLeave:re=>{re.currentTarget.style.background="rgba(0, 0, 0, 0.4)",re.currentTarget.style.transform="translateY(0) scale(1)",re.currentTarget.style.boxShadow="none",re.currentTarget.style.border="1px solid rgba(255,255,255,0.15)"}},e.createElement("div",{style:{fontSize:C?"0.35rem":"0.8rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:"1px"}},"Position"),e.createElement("div",{style:{fontSize:C?"0.4rem":"0.9rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:"1px"}},T?"...":(Ve==null?void 0:Ve.position)||"N/A"),e.createElement("div",{style:{fontSize:C?"0.35rem":"0.65rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click to view standings"))),e.createElement("div",{style:{display:"flex",gap:C?"6px":"10px",marginBottom:"3px"}},e.createElement("div",{style:{flex:C?"0 0 120px":"0 0 180px",background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",padding:"3px",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",display:"flex",flexDirection:"column",gap:"3px"}},e.createElement("div",{style:{fontSize:C?"0.4rem":"0.8rem",color:"#ffffff",fontWeight:"bold",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:"1px"}},"📨 ",C?"Messages":"Message Center"),e.createElement("button",{onClick:re=>{re.stopPropagation(),I&&I("direct")},style:{background:"linear-gradient(135deg, #ff4444 0%, #cc3333 50%, #aa2222 100%)",color:"#ffffff",border:"none",borderRadius:"6px",padding:"3px 5px",fontSize:C?"0.5rem":"0.6rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(255, 68, 68, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:re=>{re.target.style.background="linear-gradient(135deg, #cc3333 0%, #aa2222 50%, #881111 100%)",re.target.style.transform="translateY(-2px) scale(1.02)",re.target.style.boxShadow="0 4px 12px rgba(255, 68, 68, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.6), inset 0 -1px 0 rgba(0, 0, 0, 0.3)"},onMouseLeave:re=>{re.target.style.background="linear-gradient(135deg, #ff4444 0%, #cc3333 50%, #aa2222 100%)",re.target.style.transform="translateY(0) scale(1)",re.target.style.boxShadow="0 2px 6px rgba(255, 68, 68, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)"}},"💬 ",C?"DM":"Direct Messages"),e.createElement("button",{onClick:re=>{re.stopPropagation(),I&&I("league")},style:{background:"linear-gradient(135deg, #00bcd4 0%, #0097a7 50%, #00695c 100%)",color:"#ffffff",border:"none",borderRadius:"6px",padding:"3px 5px",fontSize:C?"0.5rem":"0.6rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(0, 188, 212, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:re=>{re.target.style.background="linear-gradient(135deg, #0097a7 0%, #00695c 50%, #004d40 100%)",re.target.style.transform="translateY(-2px) scale(1.02)",re.target.style.boxShadow="0 4px 12px rgba(0, 188, 212, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.6), inset 0 -1px 0 rgba(0, 0, 0, 0.3)"},onMouseLeave:re=>{re.target.style.background="linear-gradient(135deg, #00bcd4 0%, #0097a7 50%, #00695c 100%)",re.target.style.transform="translateY(0) scale(1)",re.target.style.boxShadow="0 2px 6px rgba(0, 188, 212, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)"}},"🚀 ",C?"Chat":"League Chat")),e.createElement("div",{onClick:re=>{re.stopPropagation(),f&&f()},style:{flex:"1",background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",padding:"3px",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:re=>{re.currentTarget.style.background="linear-gradient(135deg, rgba(255, 68, 68, 0.15), rgba(255, 68, 68, 0.1), rgba(255, 68, 68, 0.05))",re.currentTarget.style.border="1px solid rgba(255, 68, 68, 0.4)",re.currentTarget.style.transform="translateY(-1px) scale(1.01)",re.currentTarget.style.boxShadow="0 4px 12px rgba(255, 68, 68, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)"},onMouseLeave:re=>{re.currentTarget.style.background="rgba(0, 0, 0, 0.4)",re.currentTarget.style.border="1px solid rgba(255,255,255,0.15)",re.currentTarget.style.transform="translateY(0) scale(1)",re.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)"}},e.createElement("div",{style:{fontSize:C?"0.5rem":"0.9rem",color:"#ff4444",fontWeight:"bold",marginBottom:"0px",textAlign:"center",cursor:"pointer",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",letterSpacing:"0.5px"}},"🎯 Upcoming Matches"),e.createElement("div",{style:{fontSize:C?"0.35rem":"0.65rem",color:"#e0e0e0",textAlign:"center",fontStyle:"italic",fontWeight:"500",marginTop:"0px",marginBottom:"0px",padding:"0px"}},"click for match details"),(()=>{const re=E;return re&&re.length>0?e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"1px",marginTop:"1px"}},re.slice(0,3).map((Be,Oe)=>e.createElement("div",{key:Oe,onClick:Te=>{Te.stopPropagation(),N&&Be&&N(Be)},style:{fontSize:C?"0.4rem":"0.7rem",color:"#ccc",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"pointer",padding:C?"1px 2px":"2px 3px",borderRadius:"2px",transition:"all 0.2s ease"},onMouseEnter:Te=>{Te.target.style.color="#ffffff",Te.target.style.background="rgba(255,255,255,0.1)"},onMouseLeave:Te=>{Te.target.style.color="#ccc",Te.target.style.background="transparent"}},(()=>{let Te="",rt="";if(Be.type==="proposal"||Be.status==="confirmed")Be.senderName&&Be.receiverName&&(Te=Be.senderName.trim().toLowerCase()===`${o} ${i}`.trim().toLowerCase()?Be.receiverName:Be.senderName),Be.date&&(rt=Wh(Be.date));else if(Be.player1Id&&Be.player2Id&&(Te=Be.player1Id.trim().toLowerCase()===`${o} ${i}`.trim().toLowerCase()?Be.player2Id:Be.player1Id),Be.scheduledDate){const pt=new Date(Be.scheduledDate);isNaN(pt.getTime())||(rt=Wh(pt.toISOString().split("T")[0]))}else Be.date&&(rt=Wh(Be.date));return Te?rt?`vs ${Te} (${rt})`:`vs ${Te}`:"No matches"})())),re.length>3&&e.createElement("div",{style:{fontSize:C?"0.2rem":"0.5rem",color:"#888",textAlign:"center",fontStyle:"italic",padding:C?"0px":"1px"}},"+",re.length-3," more")):e.createElement("div",{style:{fontSize:C?"0.35rem":"0.6rem",color:"#999",textAlign:"center"}},"No matches")})()))))},Bx={async validateChallenge(a,r,t,n=!1,o=null){return tn.post("/api/challenges/validate",{senderName:a,receiverName:r,division:t,isRematch:n,originalChallengeId:o})},async validateDefenseAcceptance(a,r,t){return tn.post("/api/challenges/validate-defense",{defenderName:a,challengerName:r,division:t})},async getChallengeStats(a,r){return tn.get(`/api/challenges/stats/${encodeURIComponent(a)}/${encodeURIComponent(r)}`)},async getChallengeLimits(a,r){return tn.get(`/api/challenges/limits/${encodeURIComponent(a)}/${encodeURIComponent(r)}`)},async getEligibleOpponents(a,r){return tn.get(`/api/challenges/eligible-opponents/${encodeURIComponent(a)}/${encodeURIComponent(r)}`)},async getDivisionChallengeStats(a){return tn.get(`/api/challenges/division-stats/${encodeURIComponent(a)}`)},async updateChallengeStats(a,r,t){return tn.put(`/api/challenges/stats/${encodeURIComponent(a)}/${encodeURIComponent(r)}`,t)},async resetDivisionChallengeStats(a){return tn.delete(`/api/challenges/division-stats/${encodeURIComponent(a)}`)}};function Nw({isOpen:a,onClose:r,isMobile:t}){return a?e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"10px"}},e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"2px solid #ff4444",borderRadius:"12px",width:t?"98%":"50%",maxWidth:"500px",height:t?"98%":"90vh",maxHeight:"800px",display:"flex",flexDirection:"column",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",color:"#ffffff"}},e.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderBottom:"2px solid #ff4444",flexShrink:0}},e.createElement("h2",{style:{margin:0,fontSize:t?"1.2rem":"1.5rem",color:"#ffffff",fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px",textAlign:"center"}},"⚔️ Phase 2 Challenge Rules"),e.createElement("button",{onClick:r,style:{position:"absolute",right:"20px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ffffff",fontSize:"2rem",cursor:"pointer",padding:"5px",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s ease"},onMouseEnter:n=>n.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:n=>n.target.style.backgroundColor="transparent"},"×")),e.createElement("div",{style:{flex:1,overflowY:"auto",padding:"25px",fontSize:t?"1rem":"1.1rem",lineHeight:"1.6"}},e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#ff4444",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"🎯 Overview"),e.createElement("p",{style:{margin:"0 0 15px 0",color:"#e0e0e0"}},"Phase 2 is the challenge phase where players compete against each other based on standings from Phase 1."),e.createElement("p",null,"You must complete 2-4 total matches during this phase, as either a challenger or defender.")),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#ff4444",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"📊 Match Requirements"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Total Matches:")," 2-4 matches (minimum 2, maximum 4)"),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("p",null,e.createElement("strong",null,"Defenses:")," If challenged, at least 2 defensive matches are required(you may accept more voluntarily). "),e.createElement("li",null,e.createElement("p",null,"If not challenged no defensive matches are required."))),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Weekly Limit:")," Only 1 match per week (as challenger or defender)"))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#ff4444",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"⚔️ Dynamic Challenge Limits"),e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",padding:"15px",marginBottom:"15px"}},e.createElement("p",{style:{margin:"0 0 10px 0",color:"#ffc107",fontWeight:"bold"}},"Your challenge limit depends on how many times you've been challenged:"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},e.createElement("li",{style:{marginBottom:"5px"}},e.createElement("strong",null,"0 times challenged:")," You can issue 4 challenges"),e.createElement("li",{style:{marginBottom:"5px"}},e.createElement("strong",null,"1 time challenged:")," You can issue 3 challenges"),e.createElement("li",{style:{marginBottom:"5px"}},e.createElement("strong",null,"2 times challenged:")," You can issue 2 challenges")))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#ff4444",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"🎯 Challenge Rules"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Standings Limit:")," You can challenge players ranked up to 4 spots higher than you."),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"One Challenge:")," You may challenge the same opponent only once."),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Rematch Rule:")," If you lose a challenge as a defender, you may issue a rematch (if both remain eligible). Opponent is not required to accept the rematch if they have played the required 2 defensive matches."),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Defense Priority:")," If you receive multiple challenges in the same week, the lowest-ranked challenger has priority."))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#ff4444",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"🛡️ Defense Rules"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Required Defenses:")," You must accept challenges until you've played at least 2 matches as a defender."),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Defense Limit:")," No player may be required to defend more than 2 times."),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Voluntary Defenses:")," You may accept additional defenses beyond the required 2."),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Declining Challenges:")," After 2 defenses, declining further challenges is not a forfeit"))),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"8px",padding:"15px",marginTop:"20px"}},e.createElement("h4",{style:{color:"#ff4444",fontSize:t?"1rem":"1.1rem",margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"8px"}},"⚠️ Important Notes"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0",fontSize:t?"0.85rem":"0.9rem"}},e.createElement("li",{style:{marginBottom:"5px"}},"All challenges and responses must be recorded in the League Scheduling Hub"),e.createElement("li",{style:{marginBottom:"5px"}},"Any attempt to exploit rules or collude will be treated as a sportsmanship violation"),e.createElement("li",{style:{marginBottom:"5px"}},"Once you complete 4 matches, you may not accept or issue further challenges")))),e.createElement("div",{style:{textAlign:"center",padding:"20px",borderTop:"1px solid rgba(255,255,255,0.2)",flexShrink:0}},e.createElement("button",{onClick:r,style:{background:"linear-gradient(135deg, #ff4444, #cc3333)",border:"none",color:"#ffffff",fontSize:t?"0.9rem":"1rem",fontWeight:"bold",padding:t?"10px 20px":"12px 25px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"},onMouseEnter:n=>{n.target.style.transform="translateY(-2px)",n.target.style.boxShadow="0 6px 12px rgba(0,0,0,0.4)"},onMouseLeave:n=>{n.target.style.transform="translateY(0)",n.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"}},"Got It! ✓")))):null}function P7({isOpen:a,onClose:r,phase1Stats:t,playerName:n,playerLastName:o,isMobile:i}){if(!a||!t)return null;const c=`${n} ${o}`;return e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"flex-start",justifyContent:"center",zIndex:1e3,padding:i?"10px":"20px",overflowY:"auto"},onClick:r},e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"3px solid #ff4444",borderRadius:i?"12px":"16px",padding:i?"20px":"30px",maxWidth:i?"90vw":"500px",width:"100%",maxHeight:i?"80vh":"70vh",overflowY:"auto",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",backdropFilter:"blur(5px)",position:"relative",marginTop:i?"20px":"40px",marginBottom:i?"20px":"40px"},onClick:u=>u.stopPropagation()},e.createElement("button",{onClick:r,style:{position:"absolute",top:i?"10px":"15px",right:i?"10px":"15px",background:"linear-gradient(135deg, #ff4444, #cc3333)",border:"3px solid #ffffff",color:"#ffffff",fontSize:i?"1.2rem":"1.5rem",fontWeight:"bold",width:i?"35px":"40px",height:i?"35px":"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease",zIndex:1e3,boxShadow:"0 4px 8px rgba(0,0,0,0.5)",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},onMouseEnter:u=>{u.target.style.background="linear-gradient(135deg, #ff6666, #dd4444)",u.target.style.transform="scale(1.1)",u.target.style.boxShadow="0 6px 12px rgba(0,0,0,0.7)"},onMouseLeave:u=>{u.target.style.background="linear-gradient(135deg, #ff4444, #cc3333)",u.target.style.transform="scale(1)",u.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.5)"}},"✕"),e.createElement("div",{style:{textAlign:"center",marginBottom:i?"20px":"25px"}},e.createElement("h2",{style:{color:"#ffffff",fontSize:i?"1.2rem":"1.5rem",fontWeight:"bold",margin:"0 0 5px 0",textShadow:"2px 2px 4px rgba(0,0,0,0.8)"}},"📊 Phase 1 Results"),e.createElement("div",{style:{color:"#e0e0e0",fontSize:i?"0.9rem":"1rem",fontStyle:"italic"}},c)),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:i?"12px":"16px",marginBottom:i?"20px":"25px"}},e.createElement("div",{style:{padding:i?"15px":"20px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",border:"2px solid rgba(255,255,255,0.2)",textAlign:"center"}},e.createElement("div",{style:{fontSize:i?"0.8rem":"1rem",color:"#e0e0e0",marginBottom:"8px",fontWeight:"bold"}},"Record"),e.createElement("div",{style:{fontSize:i?"1.5rem":"2rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",marginBottom:"5px"}},t.wins,"-",t.losses),e.createElement("div",{style:{fontSize:i?"0.9rem":"1.1rem",color:"#e0e0e0",fontStyle:"italic"}},t.winRate,"% Win Rate")),e.createElement("div",{style:{padding:i?"15px":"20px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",border:"2px solid rgba(255,255,255,0.2)",textAlign:"center"}},e.createElement("div",{style:{fontSize:i?"0.8rem":"1rem",color:"#e0e0e0",marginBottom:"8px",fontWeight:"bold"}},"Final Position"),e.createElement("div",{style:{fontSize:i?"1.5rem":"2rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",marginBottom:"5px"}},t.position),e.createElement("div",{style:{fontSize:i?"0.9rem":"1.1rem",color:"#e0e0e0",fontStyle:"italic"}},"in Division")),e.createElement("div",{style:{padding:i?"15px":"20px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",border:"2px solid rgba(255,255,255,0.2)",textAlign:"center"}},e.createElement("div",{style:{fontSize:i?"0.8rem":"1rem",color:"#e0e0e0",marginBottom:"8px",fontWeight:"bold"}},"Matches Played"),e.createElement("div",{style:{fontSize:i?"1.5rem":"2rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",marginBottom:"5px"}},t.totalMatches),e.createElement("div",{style:{fontSize:i?"0.9rem":"1.1rem",color:"#e0e0e0",fontStyle:"italic"}},"Total Games"))),e.createElement("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:i?"15px":"20px",border:"1px solid rgba(255,255,255,0.1)",marginBottom:i?"15px":"20px"}},e.createElement("h3",{style:{color:"#ffffff",fontSize:i?"1rem":"1.2rem",margin:"0 0 10px 0",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"Performance Summary"),e.createElement("div",{style:{color:"#e0e0e0",fontSize:i?"0.85rem":"1rem",lineHeight:"1.5",textAlign:"center"}},t.totalMatches===0?e.createElement("div",null,"No matches completed in Phase 1"):e.createElement("div",null,e.createElement("div",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Win Rate:")," ",t.winRate,"% (",t.wins," wins, ",t.losses," losses)"),e.createElement("div",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Final Standing:")," ",t.position," place"),e.createElement("div",null,e.createElement("strong",null,"Total Matches:")," ",t.totalMatches," games played")))),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",borderRadius:"8px",padding:i?"15px":"20px",border:"2px solid rgba(255, 68, 68, 0.3)",textAlign:"center"}},e.createElement("div",{style:{color:"#ff4444",fontSize:i?"0.9rem":"1rem",fontWeight:"bold",marginBottom:"5px"}},"🏆 Phase 2 Qualified"),e.createElement("div",{style:{color:"#e0e0e0",fontSize:i?"0.8rem":"0.9rem"}},"Ready for challenge matches and defenses"))))}function L7({playerName:a,playerLastName:r,selectedDivision:t,phase:n,isMobile:o,onOpenOpponentsModal:i,onOpenCompletedMatchesModal:c,onOpenStandingsModal:u,onOpenDefenseChallengersModal:m,onOpenAllMatchesModal:g,onOpenProposalListModal:f,onOpenSentProposalListModal:h,onOpenPlayerSearch:v,pendingCount:S=0,sentCount:x=0,upcomingMatches:E=[],onMatchClick:N,seasonData:C,completedMatches:I=[],standings:A=[]}){var Ge,Le;const[_,k]=b.useState(null),[B,z]=b.useState(null),[M,O]=b.useState(!0),[U,Z]=b.useState(null),[H,V]=b.useState(!0),[F,R]=b.useState(!1),[D,j]=b.useState(!1),[X,W]=b.useState(null),T=`${a} ${r}`,G=()=>{let de=0,je=0;I&&I.length>0&&I.forEach(rt=>{rt.winner===T?de++:je++});const ze=I&&I.length>0?Math.round(de/(de+je)*100):0,gt=(rt,pt)=>{if(!rt||rt.length===0)return null;const jt=pt.toLowerCase().trim(),ba=rt.find(da=>da.name.toLowerCase().trim()===jt);return ba?parseInt(ba.rank):null},re=rt=>{const pt=rt%10,jt=rt%100;return pt===1&&jt!==11?"st":pt===2&&jt!==12?"nd":pt===3&&jt!==13?"rd":"th"},Be=gt(A,T);let Oe="N/A";Be!==null?Oe=`${Be}${re(Be)}`:I&&I.length>=1&&(ze>=80?Oe="1st-3rd":ze>=60?Oe="4th-6th":ze>=40?Oe="7th-9th":Oe="10th+");const Te={wins:de,losses:je,winRate:ze,position:Oe,totalMatches:I?I.length:0};console.log("Phase2Tracker - Calculated Phase 1 stats:",Te),W(Te)};b.useEffect(()=>{console.log("Phase2Tracker - Calculating Phase 1 stats:"),console.log("  completedMatches:",I),console.log("  standings:",A),console.log("  fullPlayerName:",T),G()},[I,A,T]);const P=(()=>{if(console.log("Phase2Tracker - Received seasonData:",C),console.log("Phase2Tracker - seasonData.phase1End:",C==null?void 0:C.phase1End),!C||!C.phase1End)return console.log("Phase2Tracker - No seasonData or phase1End found"),{days:null,status:"no_deadline"};const de=new Date,je=new Date(C.phase1End);if(console.log("Phase2Tracker - Date comparison:"),console.log("  now:",de.toISOString()),console.log("  phase1End:",je.toISOString()),console.log("  nowTime:",de.getTime()),console.log("  phase1EndTime:",je.getTime()),console.log("  isPhase1Active:",de<=je),console.log("  currentDate:",de.toLocaleDateString()),console.log("  phase1EndDate:",je.toLocaleDateString()),de<=je)return console.log("Phase2Tracker - Phase 1 is still active, returning phase1_active status"),{days:null,status:"phase1_active"};const ze=new Date(je);ze.setDate(ze.getDate()+28);const gt=ze-de,re=Math.ceil(gt/(1e3*60*60*24));return console.log("Phase2Tracker - Phase 2 calculation:"),console.log("  phase2End:",ze.toISOString()),console.log("  diffTime:",gt),console.log("  diffDays:",re),console.log("  status:",re<0?"passed":re<=1?"critical":re<=3?"urgent":re<=7?"warning":"normal"),re<0?{days:Math.abs(re),status:"passed"}:re<=1?{days:re,status:"critical"}:re<=3?{days:re,status:"urgent"}:re<=7?{days:re,status:"warning"}:{days:re,status:"normal"}})();if(console.log("Phase2Tracker - Final deadlineStatus:",P),console.log("Phase2Tracker - Final deadlineStatus.status:",P==null?void 0:P.status),console.log("Phase2Tracker - Final deadlineStatus.days:",P==null?void 0:P.days),b.useEffect(()=>{if(!a||!r||!t||n!=="challenge"){O(!1);return}async function de(){try{O(!0),Z(null);const[je,ze]=await Promise.all([Bx.getChallengeStats(T,t),Bx.getChallengeLimits(T,t)]);k(je),z(ze)}catch(je){console.error("Error loading challenge data:",je),Z("Failed to load challenge statistics")}finally{O(!1)}}de()},[a,r,t,n,T]),n!=="challenge")return null;if(M)return e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.7), rgba(26, 26, 26, 0.8))",border:"2px solid #ff4444",borderRadius:o?"8px":"12px",padding:o?"1px":"18px",margin:o?"-15px 0 0 0":"16px 0",boxShadow:"0 6px 20px rgba(0,0,0,0.3), 0 2px 8px rgba(0,0,0,0.2)",backdropFilter:"blur(2px)",textAlign:"center",color:"#888"}},"Loading Phase 2 challenge statistics...");if(U)return e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.7), rgba(26, 26, 26, 0.8))",border:"2px solid #e53e3e",borderRadius:o?"8px":"12px",padding:o?"1px":"18px",margin:o?"-15px 0 0 0":"16px 0",boxShadow:"0 6px 20px rgba(0,0,0,0.3), 0 2px 8px rgba(0,0,0,0.2)",backdropFilter:"blur(2px)",textAlign:"center",color:"#e53e3e"}},U);if(!_||!B)return null;const ne=_.matchesAsChallenger+_.requiredDefenses,q=2,oe=4,he=ne>=q,be=ne>=oe,ye=(()=>{var je;const de=((je=B.dynamicLimits)==null?void 0:je.timesChallenged)||0;return de===0?4:de===1?3:de===2?2:0})(),We=((Ge=B.dynamicLimits)==null?void 0:Ge.challengesIssued)||0,Ze=ye-We,lt=_.requiredDefenses||0,Ve=()=>be?"completed":he?"active":ne>=1?"progressing":"ready",zt=(de,je)=>{const ze=de/je*100;return ze>=90?"#e53e3e":ze>=75?"#ffc107":"#28a745"},ve=()=>{if(P.status==="phase1_active")return"#ffaa00";switch(Ve()){case"completed":return"#00aa00";case"active":return"#ff4444";case"progressing":return"#ff4444";case"ready":return"#ff4444";default:return"#ff4444"}},J=()=>{const de=Ve();if(P.status==="phase1_active")return`⏳ Phase 1 still active until ${C&&C.phase1End?Hn(new Date(C.phase1End),o?"MMM d":"MMM d, yyyy"):""}`;if(P.status==="passed")return"⚠️ DEADLINE PASSED!";if(P.status==="critical"){const je=new Date(C.phase1End),ze=new Date(je);ze.setDate(ze.getDate()+28);const gt=Hn(ze,o?"MMM d":"MMM d, yyyy");return`🚨 CRITICAL: ENDS in ${P.days} hours! (${gt})`}else if(P.status==="urgent"){const je=new Date(C.phase1End),ze=new Date(je);ze.setDate(ze.getDate()+28);const gt=Hn(ze,o?"MMM d":"MMM d, yyyy");return`⚠️ URGENT: ENDS in ${P.days} days! (${gt})`}else if(P.status==="warning"){const je=new Date(C.phase1End),ze=new Date(je);ze.setDate(ze.getDate()+28);const gt=Hn(ze,o?"MMM d":"MMM d, yyyy");return`⚠️ WARNING: ENDS in ${P.days} days. (${gt})`}else if(P.status==="normal"){const je=new Date(C.phase1End),ze=new Date(je);ze.setDate(ze.getDate()+28);const gt=Hn(ze,o?"MMM d":"MMM d, yyyy");return`ENDS in ${P.days} days. (${gt})`}switch(de){case"completed":return"🎉 Phase 2 Complete! (4/4 matches)";case"active":return`🏆 Active in Phase 2! ${ne}/4 matches (min met)`;case"progressing":return`📈 Phase 2 in progress! ${ne}/4 matches (need ${q-ne} more)`;case"ready":return"⚔️ Ready for Phase 2! Need 2-4 challenge matches.";default:return"Phase 2 Challenge Status"}},Ae=ve();return e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(0, 0, 0, 0.85), rgba(20, 20, 20, 0.9), rgba(0, 0, 0, 0.85))",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:o?"16px":"20px",padding:o?"6px":"12px",margin:o?"-15px 0 0 0":"13px auto",width:o?"100%":"98%",maxWidth:o?"none":"1600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4), 0 4px 16px rgba(255,255,255,0.1), inset 0 1px 0 rgba(255,255,255,0.1)",cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"flex-start",backdropFilter:"blur(8px)",overflow:"auto",maxHeight:"none",height:o?H?"auto":"60px":H?"380px":"160px",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"},onClick:()=>V(!H),onKeyDown:de=>{(de.key==="Enter"||de.key===" ")&&(de.preventDefault(),V(!H))},role:"button",tabIndex:"0","aria-label":H?"Collapse Phase 2 tracker":"Expand Phase 2 tracker"},e.createElement("div",{style:{position:"relative",textAlign:"center",marginBottom:o?"0px":"4px",padding:o?"6px":"8px",borderRadius:"12px",background:"linear-gradient(135deg, rgba(0, 0, 0, 0.7), rgba(20, 20, 20, 0.8))",border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 4px 16px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)"}},e.createElement("h3",{style:{margin:0,color:"#ffffff",fontSize:o?"0.8rem":"1.1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:o?"4px":"6px",flexWrap:"wrap",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",letterSpacing:"0.5px",minHeight:o?"2.5rem":"3rem"}},e.createElement("button",{onClick:de=>{de.stopPropagation(),j(!0)},"aria-label":"View Phase 1 results",role:"button",tabIndex:"0",style:{background:"linear-gradient(135deg, #22c55e, #16a34a, #15803d)",border:"2px solid rgba(255,255,255,0.8)",color:"#ffffff",fontSize:o?"0.5rem":"0.8rem",fontWeight:"bold",padding:o?"6px 10px":"8px 14px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",boxShadow:"0 4px 12px rgba(34, 197, 94, 0.4), inset 0 1px 0 rgba(255,255,255,0.3), 0 0 10px rgba(34, 197, 94, 0.2)",zIndex:10},onMouseEnter:de=>{de.target.style.background="linear-gradient(135deg, #4ade80, #22c55e, #16a34a)",de.target.style.transform="scale(1.05) translateY(-2px)",de.target.style.boxShadow="0 6px 16px rgba(34, 197, 94, 0.6), inset 0 1px 0 rgba(255,255,255,0.4), 0 0 15px rgba(34, 197, 94, 0.3)"},onMouseLeave:de=>{de.target.style.background="linear-gradient(135deg, #22c55e, #16a34a, #15803d)",de.target.style.transform="scale(1) translateY(0)",de.target.style.boxShadow="0 4px 12px rgba(34, 197, 94, 0.4), inset 0 1px 0 rgba(255,255,255,0.3), 0 0 10px rgba(34, 197, 94, 0.2)"}},"📊 PHASE 1 RESULTS"),e.createElement("span",{style:{fontSize:o?"0.9rem":"1.1rem",background:`linear-gradient(135deg, ${Ae}, ${Ae}dd, ${Ae})`,padding:o?"4px 8px":"6px 12px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2), 0 0 10px rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.3)",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontWeight:"bold"}},"Phase 2"),e.createElement("button",{onClick:de=>{de.stopPropagation(),R(!0)},"aria-label":"Open Phase 2 rules and information",role:"button",tabIndex:"0",style:{background:"linear-gradient(135deg, #ff4444, #cc3333, #aa2222)",border:"2px solid rgba(255,255,255,0.8)",color:"#ffffff",fontSize:o?"0.5rem":"0.8rem",fontWeight:"bold",padding:o?"6px 10px":"8px 14px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",boxShadow:"0 4px 12px rgba(255, 68, 68, 0.4), inset 0 1px 0 rgba(255,255,255,0.3), 0 0 10px rgba(255, 68, 68, 0.2)",zIndex:10},onMouseEnter:de=>{de.target.style.background="linear-gradient(135deg, #ff6666, #dd4444, #cc3333)",de.target.style.transform="scale(1.05) translateY(-2px)",de.target.style.boxShadow="0 6px 16px rgba(255, 68, 68, 0.6), inset 0 1px 0 rgba(255,255,255,0.4), 0 0 15px rgba(255, 68, 68, 0.3)"},onMouseLeave:de=>{de.target.style.background="linear-gradient(135deg, #ff4444, #cc3333, #aa2222)",de.target.style.transform="scale(1) translateY(0)",de.target.style.boxShadow="0 4px 12px rgba(255, 68, 68, 0.4), inset 0 1px 0 rgba(255,255,255,0.3), 0 0 10px rgba(255, 68, 68, 0.2)"}},"⚔️ RULES")),e.createElement("div",{style:{color:"#ffffff",fontSize:o?"0.7rem":"0.95rem",lineHeight:"1.1",marginTop:"2px",marginBottom:o?"2px":"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center"}},J()),e.createElement("div",{style:{position:o?"relative":"absolute",left:o?"auto":"8%",top:o?"auto":"50%",transform:o?"none":"translate(-50%, -50%)",cursor:"pointer",fontSize:o?"2.5rem":"3.2rem",transition:"all 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:o?"90px":"120px",lineHeight:1,background:"linear-gradient(135deg, rgba(255, 68, 68, 0.25), rgba(220, 53, 69, 0.2), rgba(200, 35, 51, 0.15))",border:"2px solid rgba(255, 68, 68, 0.6)",padding:o?"4px":"6px",borderRadius:o?"12px":"18px",zIndex:1,boxShadow:"0 6px 20px rgba(255, 68, 68, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 0 20px rgba(255, 68, 68, 0.2)",minWidth:o?"60px":"80px",minHeight:o?"75px":"90px",backdropFilter:"blur(8px)",margin:o?"8px auto":"0"},onClick:de=>{de.stopPropagation(),V(!0),v&&v()},"aria-label":"Open player search to schedule Phase 2 matches",role:"button",tabIndex:"0",onMouseEnter:de=>{de.currentTarget.style.transform="translate(-50%, -50%) scale(1.1)",de.currentTarget.style.background="rgba(255, 68, 68, 0.25)",de.currentTarget.style.boxShadow="0 4px 16px rgba(255, 68, 68, 0.5)",de.currentTarget.style.border="2px solid rgba(255, 68, 68, 0.6)"},onMouseLeave:de=>{de.currentTarget.style.transform="translate(-50%, -50%) scale(1)",de.currentTarget.style.background="rgba(255, 68, 68, 0.15)",de.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)",de.currentTarget.style.border="1px solid rgba(255, 68, 68, 0.4)"}},e.createElement("div",{style:{fontSize:o?"0.35rem":"0.5rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:o?"6px":"8px",textAlign:"center"}},"Today's Date"),e.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1}},e.createElement("div",{style:{fontSize:o?"0.6rem":"0.85rem"}},["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date().getDay()]),e.createElement("div",{style:{fontSize:o?"0.85rem":"1.4rem"}},(()=>{const de=new Date,je=String(de.getMonth()+1).padStart(2,"0"),ze=String(de.getDate()).padStart(2,"0"),gt=String(de.getFullYear()).slice(-2);return`${je}/${ze}/${gt}`})())),e.createElement("div",{style:{fontSize:o?"0.2rem":"0.45rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginTop:"auto",textAlign:"center",whiteSpace:"nowrap",background:"rgba(0, 0, 0, 0.7)",padding:o?"1px 2px":"2px 3px",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.3)"}},o?"Schedule":"Click to Schedule Match by Date")),e.createElement("div",{style:{position:o?"relative":"absolute",right:o?"auto":"8%",top:o?"auto":"50%",transform:o?"none":"translate(50%, -50%)",transition:"all 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",lineHeight:1,background:"linear-gradient(135deg, rgba(52, 152, 219, 0.25), rgba(41, 128, 185, 0.2), rgba(30, 100, 150, 0.15))",border:"2px solid rgba(52, 152, 219, 0.6)",padding:o?"3px":"5px",borderRadius:o?"10px":"16px",zIndex:1,boxShadow:"0 6px 20px rgba(52, 152, 219, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 0 20px rgba(52, 152, 219, 0.2)",minWidth:o?"60px":"80px",minHeight:o?"75px":"90px",backdropFilter:"blur(8px)",margin:o?"8px auto":"0"},title:"Proposal management - view pending and sent proposals",onMouseEnter:de=>{de.currentTarget.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.3), rgba(41, 128, 185, 0.25))",de.currentTarget.style.boxShadow="0 6px 20px rgba(52, 152, 219, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.2)",de.currentTarget.style.border="2px solid rgba(52, 152, 219, 0.7)",de.currentTarget.style.transform="translate(50%, -50%) scale(1.02)"},onMouseLeave:de=>{de.currentTarget.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.2), rgba(41, 128, 185, 0.15))",de.currentTarget.style.boxShadow="0 4px 16px rgba(52, 152, 219, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1)",de.currentTarget.style.border="2px solid rgba(52, 152, 219, 0.5)",de.currentTarget.style.transform="translate(50%, -50%) scale(1)"}},e.createElement("div",{style:{fontSize:o?"0.45rem":"0.65rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginBottom:o?"2px":"4px",textAlign:"center",whiteSpace:"nowrap"}},"📋 Proposals"),e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:o?"2px":"4px",justifyContent:"center",width:"100%"}},e.createElement("button",{onClick:de=>{de.stopPropagation(),f&&f()},style:{background:"linear-gradient(135deg, #d35400 0%, #e67e22 50%, #f39c12 100%)",color:"#ffffff",border:"none",borderRadius:"6px",padding:o?"1px 2px":"3px 4px",fontSize:o?"0.35rem":"0.55rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(211, 84, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:de=>{de.target.style.background="linear-gradient(135deg, #e67e22 0%, #f39c12 50%, #f1c40f 100%)",de.target.style.transform="translateY(-2px) scale(1.02)",de.target.style.boxShadow="0 4px 12px rgba(211, 84, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.6), inset 0 -1px 0 rgba(0, 0, 0, 0.3)"},onMouseLeave:de=>{de.target.style.background="linear-gradient(135deg, #d35400 0%, #e67e22 50%, #f39c12 100%)",de.target.style.transform="translateY(0) scale(1)",de.target.style.boxShadow="0 2px 6px rgba(211, 84, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)"}},"📥 ",S," waiting for you"),e.createElement("button",{onClick:de=>{de.stopPropagation(),h&&h()},style:{background:"linear-gradient(135deg, #1e8449 0%, #27ae60 50%, #2ecc71 100%)",color:"#ffffff",border:"none",borderRadius:"6px",padding:o?"1px 2px":"3px 4px",fontSize:o?"0.35rem":"0.55rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(30, 132, 73, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:de=>{de.target.style.background="linear-gradient(135deg, #27ae60 0%, #2ecc71 50%, #58d68d 100%)",de.target.style.transform="translateY(-2px) scale(1.02)",de.target.style.boxShadow="0 4px 12px rgba(30, 132, 73, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.6), inset 0 -1px 0 rgba(0, 0, 0, 0.3)"},onMouseLeave:de=>{de.target.style.background="linear-gradient(135deg, #1e8449 0%, #27ae60 50%, #2ecc71 100%)",de.target.style.transform="translateY(0) scale(1)",de.target.style.boxShadow="0 2px 6px rgba(30, 132, 73, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)"}},"📤 ",x," waiting for opponents"))),e.createElement("div",{style:{color:"#ffffff",fontSize:o?"0.7rem":"0.9rem",fontWeight:"bold",marginTop:o?"4px":"2px",marginBottom:o?"2px":"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",lineHeight:"1.1",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",gap:o?"8px":"12px",flexWrap:"wrap"}},e.createElement("span",null,"⚔️ ",ne,"/4 Matches"),e.createElement("span",null,"•"),e.createElement("span",{style:{color:Ze>0?"#4ade80":"#ef4444"}},Ze," Challenges Left"),e.createElement("span",null,"•"),e.createElement("span",{style:{color:he?"#4ade80":"#fbbf24"}},he?"Min ✅":`${q-ne} to min`))),e.createElement("div",{style:{textAlign:"center",marginBottom:o?"0px":"4px"}},e.createElement("div",{style:{fontSize:o?"0.5rem":"0.9rem",color:"#ffffff",fontWeight:"bold",cursor:"pointer",padding:o?"1px 3px":"4px 8px",borderRadius:"6px",display:"inline-block",transition:"background-color 0.2s ease",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},onMouseEnter:de=>de.target.style.backgroundColor=`${Ae}20`,onMouseLeave:de=>de.target.style.backgroundColor="transparent"},H?"Hide Stats ▲":"Show Stats ▼")),H&&e.createElement(e.Fragment,null,e.createElement("div",{style:{marginBottom:o?"0.3rem":"0.5rem"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:o?"0.4rem":"0.6rem",marginBottom:o?"0.3rem":"0.5rem"}},e.createElement("div",{onClick:de=>{de.stopPropagation(),v&&v()},style:{padding:o?"0.4rem":"0.6rem",background:"linear-gradient(135deg, rgba(255, 68, 68, 0.15), rgba(59, 130, 246, 0.1))",borderRadius:"8px",border:"1px solid rgba(255, 68, 68, 0.3)",textAlign:"center",cursor:"pointer",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},onMouseEnter:de=>{de.target.style.background="linear-gradient(135deg, rgba(255, 68, 68, 0.25), rgba(59, 130, 246, 0.2))",de.target.style.transform="translateY(-2px)",de.target.style.boxShadow="0 4px 12px rgba(255, 68, 68, 0.3)"},onMouseLeave:de=>{de.target.style.background="linear-gradient(135deg, rgba(255, 68, 68, 0.15), rgba(59, 130, 246, 0.1))",de.target.style.transform="translateY(0)",de.target.style.boxShadow="none"}},e.createElement("div",{style:{fontSize:o?"0.5rem":"0.85rem",fontWeight:"bold",color:"#ff4444",marginBottom:o?"3px":"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"⚔️ Phase 2 Progress"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:o?"4px":"6px",fontSize:o?"0.4rem":"0.7rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginBottom:o?"3px":"4px"}},e.createElement("div",null,e.createElement("div",{style:{color:"#ff4444",fontSize:o?"0.35rem":"0.6rem"}},"Challenges"),e.createElement("div",null,ne,"/4")),e.createElement("div",null,e.createElement("div",{style:{color:"#3b82f6",fontSize:o?"0.35rem":"0.6rem"}},"Defenses"),e.createElement("div",null,lt,"/2"))),e.createElement("div",{style:{width:"100%",height:o?"3px":"4px",background:"rgba(255,255,255,0.2)",borderRadius:"3px",overflow:"hidden",marginBottom:o?"2px":"3px",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.3)"}},e.createElement("div",{style:{width:`${ne/oe*100}%`,height:"100%",background:`linear-gradient(90deg, ${zt(ne,oe)}, ${zt(ne,oe)}dd)`,borderRadius:"3px",transition:"width 0.4s ease",boxShadow:"0 0 4px rgba(255,255,255,0.3)"}})),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.7rem",color:he?"#4ade80":"#fbbf24",fontWeight:"bold",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},he?"✅ Min met":`${q-ne} to min`)),e.createElement("div",{style:{padding:o?"0.4rem":"0.6rem",background:"linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(255, 193, 7, 0.1))",borderRadius:"8px",border:"1px solid rgba(168, 85, 247, 0.3)",textAlign:"center",position:"relative",overflow:"hidden"}},e.createElement("div",{style:{fontSize:o?"0.5rem":"0.85rem",fontWeight:"bold",color:"#a855f7",marginBottom:o?"3px":"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"🎯 Challenge Limits"),e.createElement("div",{style:{fontSize:o?"0.45rem":"1rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginBottom:o?"3px":"4px"}},Ze," remaining"),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.6rem",color:"#fbbf24",marginBottom:o?"2px":"3px"}},((Le=B.dynamicLimits)==null?void 0:Le.timesChallenged)||0," times challenged"),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.7rem",color:Ze>0?"#4ade80":"#ef4444",fontWeight:"bold",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},We," issued")))),e.createElement("div",{style:{padding:o?"0.5rem":"0.8rem",background:"linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(22, 163, 74, 0.1))",border:"1px solid rgba(34, 197, 94, 0.4)",borderRadius:"8px",marginBottom:o?"0.4rem":"0.6rem",color:"#ffffff",boxShadow:"0 2px 8px rgba(34, 197, 94, 0.2)"}},e.createElement("div",{style:{fontSize:o?"0.45rem":"0.8rem",fontWeight:"bold",color:"#22c55e",marginBottom:o?"0.3rem":"0.5rem",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"📊 Current Record & Standings"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:o?"0.4rem":"0.6rem",fontSize:o?"0.4rem":"0.7rem",color:"#ffffff",textAlign:"center",lineHeight:o?"1.3":"1.4"}},e.createElement("div",{style:{background:"rgba(255,255,255,0.1)",padding:o?"0.2rem":"0.3rem",borderRadius:"4px",border:"1px solid rgba(255,255,255,0.2)"}},e.createElement("div",{style:{fontWeight:"bold",color:"#22c55e",marginBottom:"2px"}},"Wins"),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.6rem",fontWeight:"bold"}},(X==null?void 0:X.wins)||0)),e.createElement("div",{style:{background:"rgba(255,255,255,0.1)",padding:o?"0.2rem":"0.3rem",borderRadius:"4px",border:"1px solid rgba(255,255,255,0.2)"}},e.createElement("div",{style:{fontWeight:"bold",color:"#ef4444",marginBottom:"2px"}},"Losses"),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.6rem",fontWeight:"bold"}},(X==null?void 0:X.losses)||0)),e.createElement("div",{style:{background:"rgba(255,255,255,0.1)",padding:o?"0.2rem":"0.3rem",borderRadius:"4px",border:"1px solid rgba(255,255,255,0.2)"}},e.createElement("div",{style:{fontWeight:"bold",color:"#3b82f6",marginBottom:"2px"}},"Win Rate"),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.6rem",fontWeight:"bold"}},(X==null?void 0:X.winRate)||0,"%"))),e.createElement("div",{style:{marginTop:o?"0.3rem":"0.5rem",padding:o?"0.2rem":"0.3rem",background:"rgba(168, 85, 247, 0.2)",borderRadius:"4px",border:"1px solid rgba(168, 85, 247, 0.4)",textAlign:"center"}},e.createElement("div",{style:{fontWeight:"bold",color:"#a855f7",marginBottom:"2px",fontSize:o?"0.35rem":"0.6rem"}},"Current Standings Position"),e.createElement("div",{style:{fontSize:o?"0.4rem":"0.7rem",fontWeight:"bold"}},(X==null?void 0:X.position)||"N/A"))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:o?"0.4rem":"0.6rem",marginBottom:o?"0.3rem":"0.5rem"}},e.createElement("div",{style:{padding:o?"0.4rem":"0.6rem",background:"rgba(255,255,255,0.1)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)",textAlign:"center",cursor:"pointer",transition:"background-color 0.2s ease"},onClick:de=>{de.stopPropagation(),v&&v()},onMouseEnter:de=>de.target.style.backgroundColor="rgba(255,255,255,0.15)",onMouseLeave:de=>de.target.style.backgroundColor="rgba(255,255,255,0.1)"},e.createElement("div",{style:{fontSize:o?"0.4rem":"0.7rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:o?"1px":"2px"}},"📅 Schedule Match"),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.8rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:o?"1px":"2px"}},_.eligibleOpponentsCount," available"),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.65rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click to schedule")),e.createElement("div",{style:{padding:o?"0.4rem":"0.6rem",background:"rgba(255,255,255,0.1)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)",textAlign:"center",cursor:"pointer",transition:"background-color 0.2s ease"},onClick:de=>{de.stopPropagation(),g&&g()},onMouseEnter:de=>de.target.style.backgroundColor="rgba(255,255,255,0.15)",onMouseLeave:de=>de.target.style.backgroundColor="rgba(255,255,255,0.1)"},e.createElement("div",{style:{fontSize:o?"0.4rem":"0.7rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:o?"1px":"2px"}},"🏆 View Matches"),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.8rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:o?"1px":"2px"}},E.length," upcoming"),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.65rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click for details"))),E.length>0&&e.createElement("div",{style:{marginBottom:o?"0.3rem":"0.5rem"}},e.createElement("div",{style:{fontSize:o?"0.4rem":"0.7rem",fontWeight:"bold",color:"#ffffff",marginBottom:o?"0.2rem":"0.4rem",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"Upcoming Matches"),e.createElement("div",{style:{maxHeight:o?"50px":"60px",overflowY:"auto",background:"rgba(0,0,0,0.3)",borderRadius:"4px",padding:o?"0.2rem":"0.4rem"}},E.slice(0,2).map((de,je)=>{let ze="";return de.senderName&&de.receiverName&&(ze=de.senderName.trim().toLowerCase()===T.toLowerCase()?de.receiverName:de.senderName),e.createElement("div",{key:de._id||je,style:{fontSize:o?"0.3rem":"0.6rem",color:"#ffffff",padding:o?"0.15rem 0.25rem":"0.25rem 0.4rem",marginBottom:o?"0.1rem":"0.15rem",background:"rgba(255,255,255,0.1)",borderRadius:"3px",cursor:"pointer",transition:"background-color 0.2s ease",textAlign:"center"},onClick:gt=>{gt.stopPropagation(),N&&N(de)},onMouseEnter:gt=>gt.target.style.backgroundColor="rgba(255,255,255,0.2)",onMouseLeave:gt=>gt.target.style.backgroundColor="rgba(255,255,255,0.1)"},"VS ",ze||"Unknown"," - ",de.date||"No Date")}),E.length>2&&e.createElement("div",{style:{fontSize:o?"0.3rem":"0.6rem",color:"#e0e0e0",textAlign:"center",fontStyle:"italic",padding:o?"0.15rem":"0.25rem"}},"+",E.length-2," more..."))),e.createElement("div",{style:{padding:o?"0.4rem":"0.6rem",background:"linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(0,0,0,0.2))",borderRadius:"6px",border:"1px solid rgba(255, 193, 7, 0.3)",fontSize:o?"0.35rem":"0.65rem",color:"#ffffff",textAlign:"center",marginBottom:o?"0.3rem":"0.5rem"}},e.createElement("div",{style:{fontWeight:"bold",color:"#ffc107",marginBottom:"3px"}},"💡 Phase 2 Status"),e.createElement("div",{style:{fontSize:o?"0.3rem":"0.55rem",lineHeight:"1.3"}},he?e.createElement("span",{style:{color:"#4ade80"}},"✅ Minimum met (",ne,"/4 matches)"):e.createElement("span",{style:{color:"#fbbf24"}},"📈 Need ",q-ne," more to minimum"),Ze>0&&e.createElement("span",{style:{color:"#3b82f6"}}," • Can challenge ",Ze," more (max 4 spots higher)")))),e.createElement(Nw,{isOpen:F,onClose:()=>R(!1),isMobile:o}),e.createElement(P7,{isOpen:D,onClose:()=>j(!1),phase1Stats:X,playerName:a,playerLastName:r,isMobile:o}))}const B7=({phase1EndDate:a,isMobile:r,currentMonth:t,onMonthChange:n,onOpenOpponentsModal:o,upcomingMatches:i,playerName:c,playerLastName:u,onDateSelect:m,onMatchClick:g})=>{const f=new Date,h=t.getMonth(),v=t.getFullYear(),S=new Date(v,h,1),E=new Date(v,h+1,0).getDate(),N=S.getDay(),C=[];for(let F=0;F<N;F++)C.push(null);for(let F=1;F<=E;F++)C.push(F);const I=C.length,A=7-I%7;for(let F=0;F<A;F++)C.push(null);const _=A>=3;console.log(`Calendar debug: totalCells=${I}, emptyCellsInLastRow=${A}, needsMoreMargin=${_}`);const k=F=>!a||!F?!1:F===a.getDate()&&h===a.getMonth()&&v===a.getFullYear(),B=F=>F===f.getDate()&&h===f.getMonth()&&v===f.getFullYear(),z=F=>F&&F<f.getDate()&&h===f.getMonth()&&v===f.getFullYear(),M=["January","February","March","April","May","June","July","August","September","October","November","December"],O=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],U=()=>{const F=new Date(v,h-1,1);n(F)},Z=()=>{const F=new Date(v,h+1,1);n(F)},H=F=>{if(!F||!i)return[];const D=new Date(v,h,F).toISOString().split("T")[0];return i.filter(j=>{let X=null;if(j.scheduledDate){const W=new Date(j.scheduledDate);isNaN(W.getTime())||(X=W.toISOString().split("T")[0])}else if(j.date){const W=j.date.split("-");if(W.length===3){const[T,G,te]=W;X=`${te}-${T.padStart(2,"0")}-${G.padStart(2,"0")}`}}return X===D})},V=F=>H(F).length>0;return e.createElement("div",{style:{color:"#ffffff"}},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:r?"2px":"4px"}},e.createElement("button",{onClick:U,style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"#ffffff",fontSize:r?"0.9rem":"1rem",cursor:"pointer",padding:r?"4px 6px":"6px 8px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:F=>F.target.style.background="rgba(255, 255, 255, 0.2)",onMouseLeave:F=>F.target.style.background="rgba(255, 255, 255, 0.1)"},"←"),e.createElement("div",{style:{textAlign:"center",fontSize:r?"1rem":"1.2rem",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",width:"100%"}},M[h]," ",v),e.createElement("button",{onClick:Z,style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"#ffffff",fontSize:r?"0.9rem":"1rem",cursor:"pointer",padding:r?"4px 6px":"6px 8px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:F=>F.target.style.background="rgba(255, 255, 255, 0.2)",onMouseLeave:F=>F.target.style.background="rgba(255, 255, 255, 0.1)"},"→")),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0px",marginBottom:r?"2px":"3px"}},O.map(F=>e.createElement("div",{key:F,style:{textAlign:"center",fontSize:r?"0.8rem":"0.9rem",fontWeight:"bold",color:"#cccccc",padding:r?"2px 1px":"3px 1px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},F))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0px",width:r?"450px":"800px",height:r?"280px":"400px",margin:"0 auto"}},C.map((F,R)=>e.createElement("div",{key:R,onClick:()=>{if(F&&!V(F)&&m){const D=new Date(v,h,F);m(D)}},title:V(F)?H(F).map(D=>{let j="";return D.player1Id&&D.player2Id?j=D.player1Id.trim().toLowerCase()===`${c} ${u}`.trim().toLowerCase()?D.player2Id:D.player1Id:D.senderName&&D.receiverName&&(j=D.senderName.trim().toLowerCase()===`${c} ${u}`.trim().toLowerCase()?D.receiverName:D.senderName),`Click to view match details vs ${j}`}).join(", "):"Click to schedule match",style:{aspectRatio:"1.2",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",fontSize:r?"0.9rem":"1rem",fontWeight:"bold",borderRadius:"2px",cursor:F?"pointer":"default",background:F?k(F)?"#e74c3c":z(F)?"rgba(255,255,255,0.1)":"transparent":"transparent",border:F?k(F)?"1px solid #c0392b":B(F)?"2px solid #4CAF50":"1px solid rgba(255,255,255,0.1)":"none",color:F?k(F)||B(F)?"#ffffff":z(F)?"#888888":"#ffffff":"transparent",transition:"all 0.2s ease",padding:"2px"},onMouseEnter:D=>{F&&(D.target.style.transform="scale(1.05)",D.target.style.boxShadow="0 2px 8px rgba(255,255,255,0.2)")},onMouseLeave:D=>{F&&(D.target.style.transform="scale(1)",D.target.style.boxShadow="none")}},e.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-between",width:"100%",height:"100%"}},e.createElement("span",{style:{fontSize:r?"0.8rem":"0.9rem",fontWeight:"bold",color:"inherit",textAlign:"right",padding:"1px"}},F||""),V(F)&&e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"1px",padding:"1px",flex:1,justifyContent:"flex-end"}},H(F).slice(0,r?2:3).map((j,X)=>{let W="";j.player1Id&&j.player2Id?W=j.player1Id.trim().toLowerCase()===`${c} ${u}`.trim().toLowerCase()?j.player2Id:j.player1Id:j.senderName&&j.receiverName&&(W=j.senderName.trim().toLowerCase()===`${c} ${u}`.trim().toLowerCase()?j.receiverName:j.senderName);const T=W.length>(r?8:10)?W.substring(0,r?8:10)+"...":W;return e.createElement("div",{key:j._id||X,style:{fontSize:r?"0.5rem":"0.6rem",color:"#4CAF50",fontWeight:"bold",textAlign:"center",cursor:"pointer",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",padding:"1px",borderRadius:"1px",background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",transition:"all 0.2s ease",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},onMouseEnter:G=>{G.target.style.background="rgba(76, 175, 80, 0.3)",G.target.style.transform="scale(1.05)"},onMouseLeave:G=>{G.target.style.background="rgba(76, 175, 80, 0.1)",G.target.style.transform="scale(1)"},onClick:G=>{G.stopPropagation(),g&&g(j)},title:`Click to view match details vs ${W}`},T)}),(()=>{const D=H(F);return D.length>(r?2:3)?e.createElement("div",{style:{fontSize:r?"0.4rem":"0.5rem",color:"#4CAF50",textAlign:"center",padding:"1px",fontStyle:"italic"}},"+",D.length-(r?2:3)," more"):null})()))))),e.createElement("div",{style:{marginTop:(()=>{const F=_?r?"60px":"80px":r?"20px":"24px";return console.log(`Legend margin: needsMoreMargin=${_}, isMobile=${r}, margin=${F}`),F})(),fontSize:r?"0.7rem":"0.8rem",display:"flex",flexDirection:"column",gap:"6px",padding:r?"12px":"16px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:r?"3px":"4px"}},e.createElement("div",{style:{width:r?"6px":"8px",height:r?"6px":"8px",background:"transparent",border:"1px solid #4CAF50",borderRadius:"1px"}}),e.createElement("span",null,"Today (outline)")),a&&e.createElement("div",{style:{display:"flex",alignItems:"center",gap:r?"3px":"4px"}},e.createElement("div",{style:{width:r?"6px":"8px",height:r?"6px":"8px",background:"#e74c3c",border:"1px solid #c0392b",borderRadius:"1px"}}),e.createElement("span",null,"Phase 1 Deadline (",Hn(a,"MMM d, yyyy"),")")),e.createElement("div",{style:{display:"flex",alignItems:"center",gap:r?"3px":"4px"}},e.createElement("div",{style:{width:r?"6px":"8px",height:r?"6px":"8px",background:"transparent",border:"1px solid #4CAF50",borderRadius:"50%",position:"relative"}},e.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"2px",height:"2px",background:"#4CAF50",borderRadius:"50%"}})),e.createElement("span",null,"Click scheduled opponent for match details"))))},z7=({isOpen:a,onClose:r,isMobile:t,phase1EndDate:n,upcomingMatches:o,playerName:i,playerLastName:c,onOpenOpponentsModal:u,onMatchClick:m,onSmartMatchClick:g})=>{const[f,h]=b.useState(new Date);return a?e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)",padding:"60px"},onClick:r},e.createElement("div",{style:{background:t?"rgba(0, 0, 0, 0.9)":"linear-gradient(120deg, #232323 80%, #2a0909 100%)",border:t?"2px solid rgba(255, 255, 255, 0.3)":"2px solid #e53e3e",borderRadius:t?"16px":"1.2rem",padding:t?"12px":"0",width:t?"95%":"auto",maxWidth:t?"none":"700px",minWidth:t?"auto":"400px",boxShadow:t?"0 8px 32px rgba(0,0,0,0.6)":"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",backdropFilter:t?"blur(12px)":"none",maxHeight:t?"80%":"65vh",overflow:"auto",margin:t?"0":"0 auto",animation:"modalBounceIn 0.5s cubic-bezier(.21,1.02,.73,1.01)",display:"flex",flexDirection:"column"},onClick:v=>v.stopPropagation()},e.createElement("div",{style:{position:"relative",textAlign:"center",marginBottom:t?"12px":"0",padding:t?"8px":"1.1rem 1.5rem 0.7rem 1.5rem",borderRadius:t?"12px":"1.2rem 1.2rem 0 0",background:t?"rgba(0, 0, 0, 0.6)":"#e53e3e",border:t?"1px solid rgba(255,255,255,0.2)":"none",boxShadow:t?"0 4px 16px rgba(0,0,0,0.3)":"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:t?"default":"grab",userSelect:"none"}},!t&&e.createElement("span",{style:{position:"absolute",left:0,top:0,width:"100%",height:"5px",background:"linear-gradient(90deg, #fff0 0%, #e53e3e 60%, #fff0 100%)",borderTopLeftRadius:"1.2rem",borderTopRightRadius:"1.2rem",pointerEvents:"none"}}),e.createElement("h3",{style:{margin:0,color:"#ffffff",fontSize:t?"1.2rem":"1.3rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",textShadow:t?"2px 2px 4px rgba(0,0,0,0.8)":"0 1px 12px #000a",letterSpacing:t?"0.5px":"0.02em",wordBreak:"break-word",minWidth:0}},e.createElement("span",{style:{fontSize:t?"1rem":"1.3rem",background:t?"linear-gradient(45deg, #4CAF50, #4CAF50dd)":"none",padding:t?"8px 16px":"0",borderRadius:t?"8px":"0",boxShadow:t?"0 4px 16px rgba(0,0,0,0.4)":"none"}},"📅 Phase 1 Calendar")),e.createElement("button",{onClick:r,style:{position:"absolute",right:t?"8px":"1.5rem",top:"50%",transform:"translateY(-50%)",background:t?"rgba(255, 255, 255, 0.1)":"none",border:t?"1px solid rgba(255, 255, 255, 0.3)":"none",color:"#ffffff",fontSize:t?"1.2rem":"2em",cursor:"pointer",padding:"0",width:t?"32px":"auto",height:t?"32px":"auto",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:t?"50%":"0",transition:"all 0.2s ease",fontWeight:"bold",lineHeight:1,zIndex:10},onMouseEnter:v=>{t?(v.target.style.background="rgba(255, 255, 255, 0.2)",v.target.style.transform="scale(1.1)"):v.target.style.color="#ffd6d6"},onMouseLeave:v=>{t?(v.target.style.background="rgba(255, 255, 255, 0.1)",v.target.style.transform="scale(1)"):v.target.style.color="#ffffff"}},"×")),e.createElement("div",{style:{padding:t?"0":"0.8rem",flex:1,overflow:"auto",maxHeight:"calc(100vh - 200px)"}},e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.15)",border:"1px solid rgba(76, 175, 80, 0.4)",borderRadius:"12px",padding:t?"6px":"10px",marginBottom:t?"6px":"10px",textAlign:"center"}},e.createElement("div",{style:{fontSize:t?"0.8rem":"1rem",color:"#ffffff",fontWeight:"bold",marginBottom:t?"3px":"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"📅 Click any date to see opponents available for that day"),e.createElement("div",{style:{fontSize:t?"0.7rem":"0.9rem",color:"#cccccc",fontStyle:"italic",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"💡 Or click the Progress meter on the home screen to see all available opponents"),e.createElement("div",{style:{fontSize:t?"0.7rem":"0.9rem",color:"#cccccc",fontStyle:"italic",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginTop:t?"2px":"3px",marginBottom:t?"4px":"6px"}},"🤖 Smart Match pairs you with assigned opponents based on matching availability"),e.createElement("button",{onClick:()=>{console.log("🎯 Calendar Modal: Smart Match button clicked"),g?(console.log("🎯 Calendar Modal: Calling onSmartMatchClick"),g()):(console.log("❌ Calendar Modal: onSmartMatchClick is not defined"),alert("Smart Match functionality is not available. Please try again."))},style:{background:"linear-gradient(135deg, rgba(255, 193, 7, 0.3), rgba(255, 193, 7, 0.2), rgba(255, 193, 7, 0.1))",border:"1px solid rgba(255, 193, 7, 0.4)",color:"#ffffff",fontSize:t?"0.7rem":"0.8rem",fontWeight:"bold",cursor:"pointer",padding:t?"8px 12px":"10px 16px",borderRadius:"8px",transition:"all 0.3s ease",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",boxShadow:"0 2px 8px rgba(255, 193, 7, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",margin:"0 auto",zIndex:10},onMouseEnter:v=>{v.target.style.background="linear-gradient(135deg, rgba(255, 193, 7, 0.4), rgba(255, 193, 7, 0.3), rgba(255, 193, 7, 0.2))",v.target.style.transform="scale(1.02) translateY(-1px)",v.target.style.boxShadow="0 4px 12px rgba(255, 193, 7, 0.3), inset 0 1px 0 rgba(255,255,255,0.2)"},onMouseLeave:v=>{v.target.style.background="linear-gradient(135deg, rgba(255, 193, 7, 0.3), rgba(255, 193, 7, 0.2), rgba(255, 193, 7, 0.1))",v.target.style.transform="scale(1)",v.target.style.boxShadow="0 2px 8px rgba(255, 193, 7, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)"}},"🤖 Smart Match")),e.createElement(B7,{phase1EndDate:n,isMobile:t,currentMonth:f,onMonthChange:h,onOpenOpponentsModal:u,upcomingMatches:o,playerName:i,playerLastName:c,onMatchClick:m,onDateSelect:v=>{console.log("🎯 Calendar Modal: Date selected:",v),u?(console.log("🎯 Calendar Modal: Calling onOpenOpponentsModal"),u(v)):console.log("❌ Calendar Modal: onOpenOpponentsModal is not defined")}})))):null},O7=({isOpen:a,onClose:r,match:t,onValidate:n,onReject:o})=>{const[i,c]=b.useState({actualDate:"",actualTime:"",actualLocation:"",winner:"",score:"",notes:"",witnesses:"",photos:null}),[u,m]=b.useState(!1);if(!a||!t)return null;const g=async h=>{h.preventDefault(),m(!0);try{if(!i.actualDate||!i.winner||!i.score){alert("Please fill in all required fields: Date, Winner, and Score");return}await n({matchId:t._id,...i}),r()}catch(v){console.error("Error validating match:",v),alert("Error validating match. Please try again.")}finally{m(!1)}},f=async()=>{if(window.confirm("Are you sure you want to reject this match completion? This will require the match to be replayed.")){m(!0);try{await o(t._id),r()}catch(h){console.error("Error rejecting match:",h),alert("Error rejecting match. Please try again.")}finally{m(!1)}}};return e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3}},e.createElement("div",{style:{background:"#222",border:"2px solid #444",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"}},e.createElement("h2",{style:{margin:0,color:"#fff"}},"🎯 Match Validation"),e.createElement("button",{onClick:r,style:{background:"none",border:"none",color:"#aaa",fontSize:"24px",cursor:"pointer"}},"×")),e.createElement("div",{style:{background:"#333",padding:"16px",borderRadius:"8px",marginBottom:"20px"}},e.createElement("h3",{style:{margin:"0 0 12px 0",color:"#fff"}},"Match Details"),e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},e.createElement("div",null,e.createElement("strong",null,"Players:")," ",t.player1," vs ",t.player2),e.createElement("div",null,e.createElement("strong",null,"Scheduled Date:")," ",t.date),e.createElement("div",null,e.createElement("strong",null,"Location:")," ",t.location))),e.createElement("form",{onSubmit:g},e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Actual Date Played * ",e.createElement("span",{style:{color:"#ff4444"}},"Required")),e.createElement("input",{type:"date",value:i.actualDate,onChange:h=>c({...i,actualDate:h.target.value}),style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"},required:!0})),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Actual Time Played"),e.createElement("input",{type:"time",value:i.actualTime,onChange:h=>c({...i,actualTime:h.target.value}),style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"}})),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Actual Location"),e.createElement("input",{type:"text",value:i.actualLocation,onChange:h=>c({...i,actualLocation:h.target.value}),placeholder:"Where was the match actually played?",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"}})),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Winner * ",e.createElement("span",{style:{color:"#ff4444"}},"Required")),e.createElement("select",{value:i.winner,onChange:h=>c({...i,winner:h.target.value}),style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"},required:!0},e.createElement("option",{value:""},"Select winner..."),e.createElement("option",{value:t.player1},t.player1),e.createElement("option",{value:t.player2},t.player2))),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Final Score * ",e.createElement("span",{style:{color:"#ff4444"}},"Required")),e.createElement("input",{type:"text",value:i.score,onChange:h=>c({...i,score:h.target.value}),placeholder:"e.g., 7-3, 8-2, etc.",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"},required:!0})),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Witnesses (optional)"),e.createElement("input",{type:"text",value:i.witnesses,onChange:h=>c({...i,witnesses:h.target.value}),placeholder:"Names of people who witnessed the match",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"}})),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Additional Notes"),e.createElement("textarea",{value:i.notes,onChange:h=>c({...i,notes:h.target.value}),placeholder:"Any additional details about the match...",rows:"3",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff",resize:"vertical"}})),e.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"}},e.createElement("button",{type:"button",onClick:f,disabled:u,style:{padding:"10px 16px",background:"#ff4444",border:"none",borderRadius:"6px",color:"#fff",cursor:u?"not-allowed":"pointer",opacity:u?.6:1}},u?"Rejecting...":"Reject Match"),e.createElement("button",{type:"submit",disabled:u,style:{padding:"10px 16px",background:"#00aa00",border:"none",borderRadius:"6px",color:"#fff",cursor:u?"not-allowed":"pointer",opacity:u?.6:1}},u?"Validating...":"Validate Match")))))};class F7 extends e.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,t){this.setState({error:r,errorInfo:t}),console.error("ErrorBoundary caught an error:",r,t)}render(){return this.state.hasError?e.createElement("div",{style:{padding:"20px",margin:"10px",border:"1px solid #ff6b6b",borderRadius:"8px",backgroundColor:"#fff5f5",color:"#d63031"}},e.createElement("h3",null,"Something went wrong."),e.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),e.createElement("br",null),this.state.errorInfo&&this.state.errorInfo.componentStack),e.createElement("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),style:{marginTop:"10px",padding:"8px 16px",backgroundColor:"#ff6b6b",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}},"Try again")):this.props.children}}function Iw({isOpen:a,onClose:r,isMobile:t}){return a?e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"10px"}},e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"2px solid #4CAF50",borderRadius:"12px",width:t?"98%":"50%",maxWidth:"500px",height:t?"98%":"90vh",maxHeight:"800px",display:"flex",flexDirection:"column",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",color:"#ffffff"}},e.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderBottom:"2px solid #4CAF50",flexShrink:0}},e.createElement("h2",{style:{margin:0,fontSize:t?"1.2rem":"1.5rem",color:"#ffffff",fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px",textAlign:"center"}},"🎯 Phase 1 Scheduled Opponents Rules"),e.createElement("button",{onClick:r,style:{position:"absolute",right:"20px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ffffff",fontSize:"2rem",cursor:"pointer",padding:"5px",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s ease"},onMouseEnter:n=>n.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:n=>n.target.style.backgroundColor="transparent"},"×")),e.createElement("div",{style:{flex:1,overflowY:"auto",padding:"25px",fontSize:t?"1rem":"1.1rem",lineHeight:"1.6"}},e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#4CAF50",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"📅 Overview"),e.createElement("p",{style:{margin:"0 0 15px 0",color:"#e0e0e0"}},"Phase 1 covers Weeks 1-6 where each player is assigned specific opponents to schedule and complete matches with."),e.createElement("p",{style:{margin:"0 0 15px 0",color:"#e0e0e0"}},"This phase focuses on completing your assigned matches with maximum scheduling flexibility.")),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#4CAF50",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"👥 Opponent Assignment"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Assigned Opponents:")," Each player is assigned 6 opponents at the start of the session"),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Match Requirements:")," You must complete 1 match against each of your 6 assigned opponents"),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Total Matches:")," 6 matches total during Phase 1"))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#4CAF50",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"⏰ Scheduling Flexibility"),e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"8px",padding:"15px",marginBottom:"15px"}},e.createElement("p",{style:{margin:"0 0 10px 0",color:"#4CAF50",fontWeight:"bold"}},"Maximum scheduling flexibility for your convenience:"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},e.createElement("li",{style:{marginBottom:"5px"}},e.createElement("strong",null,"Any Day:")," Matches may be played on any day of the week"),e.createElement("li",{style:{marginBottom:"5px"}},e.createElement("strong",null,"Any Time:")," Matches may be played at any time that works for both players"),e.createElement("li",{style:{marginBottom:"5px"}},e.createElement("strong",null,"Any Location:")," Matches may be played at any safe, mutually agreed location")))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#4CAF50",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"⏳ Completion Deadline"),e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",padding:"15px",marginBottom:"15px"}},e.createElement("p",{style:{margin:"0 0 10px 0",color:"#ffc107",fontWeight:"bold"}},"All Phase 1 matches must be completed by the end of Week 6"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},e.createElement("li",{style:{marginBottom:"5px"}},e.createElement("strong",null,"Deadline:")," End of Week 6 (Sunday at 11:59 PM)"),e.createElement("li",{style:{marginBottom:"5px"}},e.createElement("strong",null,"No Extensions:")," Phase 1 deadline is firm and cannot be extended"),e.createElement("li",{style:{marginBottom:"5px"}},e.createElement("strong",null,"Impact:")," Incomplete matches may affect your standings and Phase 2 eligibility")))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#4CAF50",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"🎱 Match Rules"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Standard Rules:")," All matches use the official CSI rule book"),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Scoring:")," All scoring must be done with the BCAPL scoring app"),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Payment:")," Standard match payment and fees apply"),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"FargoRate:")," All matches are integrated with FargoRate for ratings"))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#4CAF50",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"📋 Scheduling Process"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Contact Opponents:")," Reach out to your assigned opponents to schedule matches"),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Mutual Agreement:")," Both players must agree on date, time, and location"),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Record Matches:")," All scheduled matches must be recorded in the League Scheduling Hub"),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Communication:")," Use the message center to coordinate with opponents"))),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"8px",padding:"15px",marginTop:"20px"}},e.createElement("h4",{style:{color:"#ff4444",fontSize:t?"1rem":"1.1rem",margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"8px"}},"⚠️ Important Notes"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0",fontSize:t?"0.85rem":"0.9rem"}},e.createElement("li",{style:{marginBottom:"5px"}},"Phase 1 results determine your standings position for Phase 2 challenges"),e.createElement("li",{style:{marginBottom:"5px"}},"Incomplete matches may result in forfeits and affect your overall standings"),e.createElement("li",{style:{marginBottom:"5px"}},"All matches must be completed and recorded before Phase 2 begins"),e.createElement("li",{style:{marginBottom:"5px"}},"Use the calendar feature to track your scheduled matches and deadlines")))),e.createElement("div",{style:{textAlign:"center",padding:"20px",borderTop:"1px solid rgba(255,255,255,0.2)",flexShrink:0}},e.createElement("button",{onClick:r,style:{background:"linear-gradient(135deg, #4CAF50, #45a049)",border:"none",color:"#ffffff",fontSize:t?"0.9rem":"1rem",fontWeight:"bold",padding:t?"10px 20px":"12px 25px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"},onMouseEnter:n=>{n.target.style.transform="translateY(-2px)",n.target.style.boxShadow="0 6px 12px rgba(0,0,0,0.4)"},onMouseLeave:n=>{n.target.style.transform="translateY(0)",n.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"}},"Got It! ✓")))):null}const U7=({isOpen:a,onClose:r,isMobile:t,playerName:n,playerLastName:o,completedMatches:i,totalRequiredMatches:c,playerStats:u,standings:m,timeLeft:g,deadlineStatus:f,phase1EndDate:h,allPlayers:v,selectedDivision:S})=>{const[x,E]=b.useState(null);b.useEffect(()=>{a&&v&&m&&N()},[a,v,m]);const N=()=>{if(!v||!m)return;const A=v.length,_=m.filter(U=>U.matchesCompleted&&U.matchesCompleted>0).length,k=m.reduce((U,Z)=>U+(Z.matchesCompleted||0),0),B=A*c,z=Math.round(k/B*100),M=Math.round(k/A/c*100),O=m.filter(U=>U.matchesCompleted>0).sort((U,Z)=>{const H=(U.matchesCompleted||0)/c;return(Z.matchesCompleted||0)/c-H}).slice(0,5);E({totalPlayers:A,playersWithMatches:_,totalMatchesCompleted:k,totalMatchesRequired:B,leagueProgress:z,avgCompletion:M,topPerformers:O})},C=()=>f==="passed"?"#e74c3c":f==="critical"?"#ff6b6b":f==="urgent"?"#ff8800":f==="warning"?"#ffaa00":"#4CAF50",I=()=>f==="passed"?"⏰":f==="critical"?"🚨":f==="urgent"||f==="warning"?"⚠️":"✅";return a?e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(8px)"},onClick:r},e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(20, 20, 20, 0.95))",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:t?"8px":"12px",padding:t?"8px":"12px",width:t?"88%":"75%",maxWidth:t?"none":"800px",maxHeight:t?"75vh":"70vh",overflow:"auto",boxShadow:"0 8px 32px rgba(0,0,0,0.5), 0 4px 16px rgba(255,255,255,0.1)",backdropFilter:"blur(12px)"},onClick:A=>A.stopPropagation()},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:t?"8px":"12px",paddingBottom:t?"6px":"8px",borderBottom:"1px solid rgba(255,255,255,0.2)"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:t?"4px":"8px"}},e.createElement("div",{style:{fontSize:t?"1rem":"1.2rem",color:C()}},I()),e.createElement("h2",{style:{margin:0,color:"#ffffff",fontSize:t?"0.8rem":"1.1rem",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.8)"}},"Phase 1 Overview")),e.createElement("button",{onClick:r,style:{background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.3)",color:"#ffffff",fontSize:t?"0.9rem":"1.1rem",cursor:"pointer",padding:t?"4px 8px":"6px 10px",borderRadius:"4px",transition:"all 0.2s ease",fontWeight:"bold"},onMouseEnter:A=>A.target.style.background="rgba(255,255,255,0.2)",onMouseLeave:A=>A.target.style.background="rgba(255,255,255,0.1)"},"Close")),e.createElement("div",{style:{display:"grid",gridTemplateColumns:t?"1fr":"1fr 1fr",gap:t?"8px":"12px"}},e.createElement("div",{style:{background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",padding:t?"8px":"12px",border:"1px solid rgba(255,255,255,0.15)"}},e.createElement("h3",{style:{margin:"0 0 8px 0",color:"#ffffff",fontSize:t?"0.7rem":"0.9rem",fontWeight:"bold",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"Your Status"),e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"4px",padding:t?"6px":"8px",marginBottom:t?"6px":"8px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"}},e.createElement("span",{style:{color:"#ffffff",fontSize:t?"0.7rem":"0.9rem",fontWeight:"600"}},"Progress"),e.createElement("span",{style:{color:"#4CAF50",fontSize:t?"0.7rem":"0.9rem",fontWeight:"bold"}},i.length,"/",c)),e.createElement("div",{style:{width:"100%",height:t?"6px":"8px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",overflow:"hidden"}},e.createElement("div",{style:{width:`${Math.round(i.length/c*100)}%`,height:"100%",background:`linear-gradient(90deg, ${C()}, ${C()}dd)`,borderRadius:"4px",transition:"width 0.4s ease"}}))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:t?"6px":"8px"}},e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"6px",padding:t?"6px":"8px",textAlign:"center"}},e.createElement("div",{style:{color:"#cccccc",fontSize:t?"0.6rem":"0.8rem",marginBottom:"3px"}},"Record"),e.createElement("div",{style:{color:"#ffffff",fontSize:t?"0.8rem":"1rem",fontWeight:"bold"}},(u==null?void 0:u.wins)||0,"-",(u==null?void 0:u.losses)||0),e.createElement("div",{style:{color:"#4CAF50",fontSize:t?"0.6rem":"0.8rem",fontWeight:"600"}},(u==null?void 0:u.winRate)||0,"%")),e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"6px",padding:t?"6px":"8px",textAlign:"center"}},e.createElement("div",{style:{color:"#cccccc",fontSize:t?"0.6rem":"0.8rem",marginBottom:"3px"}},"Position"),e.createElement("div",{style:{color:"#ffffff",fontSize:t?"0.8rem":"1rem",fontWeight:"bold"}},(u==null?void 0:u.position)||"N/A"))),e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"4px",padding:t?"6px":"8px",marginTop:t?"6px":"8px",textAlign:"center"}},e.createElement("div",{style:{color:"#cccccc",fontSize:t?"0.6rem":"0.8rem",marginBottom:"4px"}},"Time Remaining"),e.createElement("div",{style:{color:C(),fontSize:t?"0.8rem":"1rem",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},g!=null&&g.passed?"DEADLINE PASSED":(g==null?void 0:g.days)>0?`${g.days} days`:(g==null?void 0:g.hours)>0?`${g.hours} hours`:"Less than 1 hour"),h&&e.createElement("div",{style:{color:"#cccccc",fontSize:t?"0.5rem":"0.7rem",marginTop:"2px"}},"Ends: ",Hn(h,"MMM d, yyyy")))),e.createElement("div",{style:{background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",padding:t?"8px":"12px",border:"1px solid rgba(255,255,255,0.15)"}},e.createElement("h3",{style:{margin:"0 0 8px 0",color:"#ffffff",fontSize:t?"0.7rem":"0.9rem",fontWeight:"bold",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"League Status"),x?e.createElement(e.Fragment,null,e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"4px",padding:t?"6px":"8px",marginBottom:t?"6px":"8px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"}},e.createElement("span",{style:{color:"#ffffff",fontSize:t?"0.7rem":"0.9rem",fontWeight:"600"}},"League Progress"),e.createElement("span",{style:{color:"#4CAF50",fontSize:t?"0.7rem":"0.9rem",fontWeight:"bold"}},x.leagueProgress,"%")),e.createElement("div",{style:{width:"100%",height:t?"6px":"8px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",overflow:"hidden"}},e.createElement("div",{style:{width:`${x.leagueProgress}%`,height:"100%",background:"linear-gradient(90deg, #4CAF50, #45a049)",borderRadius:"4px",transition:"width 0.4s ease"}}))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:t?"4px":"6px",marginBottom:t?"6px":"8px"}},e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"4px",padding:t?"4px":"6px",textAlign:"center"}},e.createElement("div",{style:{color:"#cccccc",fontSize:t?"0.5rem":"0.7rem",marginBottom:"2px"}},"Active Players"),e.createElement("div",{style:{color:"#ffffff",fontSize:t?"0.7rem":"0.9rem",fontWeight:"bold"}},x.playersWithMatches,"/",x.totalPlayers)),e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"4px",padding:t?"4px":"6px",textAlign:"center"}},e.createElement("div",{style:{color:"#cccccc",fontSize:t?"0.5rem":"0.7rem",marginBottom:"2px"}},"Avg Completion"),e.createElement("div",{style:{color:"#ffffff",fontSize:t?"0.7rem":"0.9rem",fontWeight:"bold"}},x.avgCompletion,"%"))),e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"4px",padding:t?"6px":"8px"}},e.createElement("div",{style:{color:"#ffffff",fontSize:t?"0.7rem":"0.9rem",fontWeight:"600",marginBottom:"4px",textAlign:"center"}},"Top Performers"),e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"4px"}},x.topPerformers.map((A,_)=>e.createElement("div",{key:_,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 8px",background:"rgba(255,255,255,0.03)",borderRadius:"4px"}},e.createElement("span",{style:{color:"#ffffff",fontSize:t?"0.5rem":"0.7rem",fontWeight:_===0?"bold":"normal"}},_+1,". ",A.name),e.createElement("span",{style:{color:"#4CAF50",fontSize:t?"0.5rem":"0.7rem",fontWeight:"600"}},Math.round(A.matchesCompleted/c*100),"%")))))):e.createElement("div",{style:{color:"#cccccc",textAlign:"center",fontSize:t?"0.9rem":"1.1rem",padding:"20px"}},"Loading league statistics..."))),e.createElement("div",{style:{marginTop:t?"8px":"12px",paddingTop:t?"6px":"8px",borderTop:"1px solid rgba(255,255,255,0.2)",textAlign:"center"}},e.createElement("div",{style:{color:"#cccccc",fontSize:t?"0.5rem":"0.7rem",fontStyle:"italic",marginBottom:t?"8px":"12px"}},"Phase 1 ends when all players complete ",c," matches or the deadline passes"),e.createElement("button",{onClick:r,style:{background:"linear-gradient(135deg, #4CAF50, #45a049)",border:"none",color:"#ffffff",fontSize:t?"0.8rem":"1rem",cursor:"pointer",padding:t?"8px 16px":"10px 20px",borderRadius:"6px",transition:"all 0.2s ease",fontWeight:"bold",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",minWidth:t?"100px":"120px"},onMouseEnter:A=>A.target.style.transform="translateY(-2px)",onMouseLeave:A=>A.target.style.transform="translateY(0)"},"Close Overview")))):null},zx={findOverlappingAvailability(a,r){try{console.log("Smart Match Debug - Parsing P1 availability:",a);let t;typeof a=="string"?t=r0(a):typeof a=="object"&&a!==null?t=a:t={Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},console.log("Smart Match Debug - Parsed P1 availability:",t),console.log("Smart Match Debug - Parsing P2 availability:",r);let n;typeof r=="string"?n=r0(r):typeof r=="object"&&r!==null?n=r:n={Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},console.log("Smart Match Debug - Parsed P2 availability:",n);const o={};return["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].forEach(i=>{o[i]=[],t[i]&&n[i]&&(console.log(`Smart Match Debug - Checking ${i}: P1 slots:`,t[i],"P2 slots:",n[i]),t[i].forEach(c=>{n[i].forEach(u=>{const m=this.findTimeOverlap(c,u);m&&(o[i].push(m),console.log(`Smart Match Debug - Found overlap on ${i}:`,m))})}))}),console.log("Smart Match Debug - Final overlapping slots:",o),o}catch(t){return console.error("Error parsing availability:",t),{Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]}}},findTimeOverlap(a,r){console.log("Smart Match Debug - Finding overlap between:",a,"and",r);const[t,n]=a.split(" - "),[o,i]=r.split(" - ");console.log("Smart Match Debug - Parsed times:",{start1:t,end1:n,start2:o,end2:i});const c=this.parseTime(t),u=this.parseTime(n),m=this.parseTime(o),g=this.parseTime(i);console.log("Smart Match Debug - Parsed minutes:",{start1Time:c,end1Time:u,start2Time:m,end2Time:g});const f=Math.max(c,m),h=Math.min(u,g);if(console.log("Smart Match Debug - Overlap calculation:",{overlapStart:f,overlapEnd:h}),f<h){const v=`${this.formatTime(f)} - ${this.formatTime(h)}`;return console.log("Smart Match Debug - Found overlap:",v),v}return console.log("Smart Match Debug - No overlap found"),null},parseTime(a){console.log("Smart Match Debug - Parsing time:",a);let r=a.trim().toLowerCase(),t="am";r.includes("pm")?(t="pm",r=r.replace("pm","")):r.includes("am")&&(t="am",r=r.replace("am",""));let n,o=0;r.includes(":")?[n,o]=r.split(":").map(Number):r.length<=2?(n=parseInt(r),o=0):(n=parseInt(r.slice(0,-2)),o=parseInt(r.slice(-2)));let i=n;t==="pm"&&n!==12&&(i+=12),t==="am"&&n===12&&(i=0);const c=i*60+o;return console.log("Smart Match Debug - Parsed time result:",{timeStr:a,hours:n,minutes:o,period:t,hour24:i,result:c}),c},formatTime(a){const r=Math.floor(a/60),t=a%60;let n="AM",o=r;return r>=12&&(n="PM",r>12&&(o=r-12)),o===0&&(o=12),`${o}:${t.toString().padStart(2,"0")} ${n}`},calculateConfidenceScore(a,r,t){let n=0;const o=Object.values(t).flat().length;n+=o*10;const i=Object.keys(t).filter(c=>t[c].length>0).length;if(n+=i*5,Object.values(t).flat().forEach(c=>{const[u,m]=c.split(" - "),g=this.parseTime(m)-this.parseTime(u);g>=120&&(n+=5),g>=180&&(n+=5)}),a.locations&&r.locations){const c=typeof a.locations=="string"?a.locations.split(`
`).map(g=>g.trim()).filter(Boolean):Array.isArray(a.locations)?a.locations:[],u=typeof r.locations=="string"?r.locations.split(`
`).map(g=>g.trim()).filter(Boolean):Array.isArray(r.locations)?r.locations:[],m=c.filter(g=>u.includes(g));n+=m.length*10}return Math.min(n,100)},findOptimalLocation(a,r){if(!a.locations||!r.locations)return null;const t=typeof a.locations=="string"?a.locations.split(`
`).map(i=>i.trim()).filter(Boolean):Array.isArray(a.locations)?a.locations:[],n=typeof r.locations=="string"?r.locations.split(`
`).map(i=>i.trim()).filter(Boolean):Array.isArray(r.locations)?r.locations:[],o=t.filter(i=>n.includes(i));return o.length>0?o[0]:null},checkForConflicts(a,r,t){const n=[];return t.forEach(o=>{(o.player1===a.firstName||o.player2===a.firstName||o.player1===r.firstName||o.player2===r.firstName)&&n.push(o)}),n},generateSuggestions(a,r,t=[]){console.log("Smart Match Debug - Player 1:",a),console.log("Smart Match Debug - Player 2:",r);const n=`Day: Monday, Available From: 6:00 PM, Available Until: 10:00 PM
Day: Tuesday, Available From: 6:00 PM, Available Until: 10:00 PM
Day: Wednesday, Available From: 6:00 PM, Available Until: 10:00 PM
Day: Thursday, Available From: 6:00 PM, Available Until: 10:00 PM
Day: Friday, Available From: 6:00 PM, Available Until: 10:00 PM
Day: Saturday, Available From: 2:00 PM, Available Until: 8:00 PM`,o=a.availability||n,i=r.availability||n;console.log("Smart Match Debug - P1 Availability:",o),console.log("Smart Match Debug - P2 Availability:",i);const c=this.findOverlappingAvailability(o,i);console.log("Smart Match Debug - Overlapping Slots:",c);const u=this.calculateConfidenceScore(a,r,c),m=this.findOptimalLocation(a,r),g=this.checkForConflicts(a,r,t),f=[];Object.entries(c).forEach(([S,x])=>{x.forEach(E=>{f.push({day:S,timeSlot:E,location:m,confidence:Math.min(u+x.length*2,100),player1:a.firstName,player2:r.firstName})})}),f.sort((S,x)=>x.confidence-S.confidence);const h=f.slice(0,3),v=!a.availability||!r.availability;return{suggestions:h,confidence:u,conflicts:g,message:h.length>0?`Found ${f.length} potential match times, showing top ${h.length}${v?" (using default availability)":""}`:"No overlapping availability found"}},generateQuickProposal(a,r,t){const n={Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday",Sun:"Sunday"};return{player1:r.firstName,player2:t.firstName,proposedDate:n[a.day],proposedTime:a.timeSlot,proposedLocation:a.location||"TBD",confidence:a.confidence,message:`Smart Match Suggestion: ${n[a.day]} at ${a.timeSlot}${a.location?` at ${a.location}`:""}`}}},W7=({isOpen:a,onClose:r,player1:t,player2:n,upcomingMatches:o=[],isMobile:i=!1,selectedDivision:c,phase:u,senderName:m,senderEmail:g,onProposalComplete:f})=>{const[h,v]=b.useState([]),[S,x]=b.useState(!1),[E,N]=b.useState(null),[C,I]=b.useState(!1),[A,_]=b.useState(!1),[k,B]=b.useState(null);b.useEffect(()=>{a&&t&&n&&z()},[a,t,n]);const z=async()=>{x(!0),v([]),N(null);try{await new Promise(V=>setTimeout(V,1e3));const H=zx.generateSuggestions(t,n,o);v(H.suggestions),x(!1)}catch(H){console.error("Error generating suggestions:",H),x(!1)}},M=H=>{N(H);const V=zx.generateQuickProposal(H,t,n);B({player:n,day:{Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat",Sunday:"Sun"}[V.proposedDate]||V.proposedDate,slot:V.proposedTime,selectedDivision:c,phase:u,prefilledData:V}),_(!0)},O=()=>{v([]),N(null),r()},U=H=>H>=80?"#dc2626":H>=60?"#f59e0b":"#6b7280",Z=H=>H>=80?"High":H>=60?"Medium":"Low";return a?e.createElement(Bt,{open:a,onClose:O,title:`Smart Match: ${t==null?void 0:t.firstName} vs ${n==null?void 0:n.firstName}`,isMobile:i},e.createElement("div",{style:{padding:"20px",maxHeight:"70vh",overflowY:"auto",backgroundColor:"#1f2937",color:"#f9fafb"}},S&&e.createElement("div",{style:{textAlign:"center",padding:"40px"}},e.createElement(ww,null),e.createElement("p",{style:{marginTop:"16px",color:"#9ca3af"}},"Analyzing availability and generating suggestions...")),!S&&h.length===0&&e.createElement("div",{style:{textAlign:"center",padding:"40px",color:"#9ca3af"}},e.createElement("h3",{style:{color:"#f9fafb"}},"No Match Suggestions Found"),e.createElement("p",null,"No overlapping availability was found between the two players."),e.createElement("p",{style:{fontSize:"14px",marginTop:"8px"}},"Make sure both players have availability data in the system."),e.createElement("button",{onClick:()=>I(!0),style:{marginTop:"16px",padding:"10px 20px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"6px",fontWeight:"500",cursor:"pointer",fontSize:"14px",transition:"all 0.3s ease"},onMouseEnter:H=>H.target.style.backgroundColor="#b91c1c",onMouseLeave:H=>H.target.style.backgroundColor="#dc2626"},"📅 View ",n==null?void 0:n.firstName,"'s Availability & Send Proposal")),!S&&h.length>0&&e.createElement(e.Fragment,null,e.createElement("div",{style:{marginBottom:"20px",textAlign:"center"}},e.createElement("h3",{style:{margin:"0 0 8px 0",color:"#f9fafb"}},"Found ",h.length," potential match times"),e.createElement("p",{style:{margin:0,color:"#9ca3af",fontSize:"14px"}},"Select a suggestion below to create a match proposal")),e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"12px"}},h.map((H,V)=>e.createElement("div",{key:V,style:{border:`2px solid ${E===H?"#dc2626":"#374151"}`,borderRadius:"8px",padding:"16px",cursor:"pointer",backgroundColor:"#374151",transition:"all 0.3s ease",boxShadow:E===H?"0 4px 12px rgba(220, 38, 38, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},onClick:()=>M(H)},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}},e.createElement("div",{style:{flex:1}},e.createElement("h4",{style:{margin:"0 0 8px 0",color:"#f9fafb",fontWeight:"600"}},H.day==="Mon"?"Monday":H.day==="Tue"?"Tuesday":H.day==="Wed"?"Wednesday":H.day==="Thu"?"Thursday":H.day==="Fri"?"Friday":"Saturday"),e.createElement("p",{style:{margin:"0 0 4px 0",fontSize:"16px",fontWeight:"500",color:"#e5e7eb"}},H.timeSlot),H.location&&e.createElement("p",{style:{margin:0,color:"#9ca3af",fontSize:"14px"}},"📍 ",H.location)),e.createElement("div",{style:{padding:"6px 12px",borderRadius:"6px",backgroundColor:U(H.confidence),color:"white",fontSize:"12px",fontWeight:"600",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}},Z(H.confidence)," (",H.confidence,"%)")))))),e.createElement("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid #374151",display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("button",{onClick:()=>I(!0),style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"6px",fontWeight:"500",cursor:"pointer",fontSize:"14px",transition:"all 0.3s ease"},onMouseEnter:H=>H.target.style.backgroundColor="#b91c1c",onMouseLeave:H=>H.target.style.backgroundColor="#dc2626"},"📅 View ",n==null?void 0:n.firstName,"'s Availability & Send Proposal"),e.createElement("button",{onClick:O,style:{padding:"10px 20px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"6px",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:H=>H.target.style.backgroundColor="#4b5563",onMouseLeave:H=>H.target.style.backgroundColor="#6b7280"},"Close")),C&&n&&e.createElement(Gp,{onClose:()=>{I(!1)},player:n,onProposeMatch:(H,V)=>{B({player:n,day:H,slot:V,selectedDivision:c,phase:u}),_(!0),I(!1)},selectedDivision:c,phase:u}),A&&k&&e.createElement(ef,{player:k.player,day:k.day,slot:k.slot,selectedDivision:k.selectedDivision,phase:k.phase||u,onClose:()=>_(!1),senderName:m,senderEmail:g,onProposalComplete:()=>{_(!1),B(null),f&&f()}}))):null};function j7({isOpen:a,onClose:r,onSuccess:t,isMobile:n=!1,existingPlayer:o=null,isAdmin:i=!1}){const[c,u]=b.useState({firstName:"",lastName:"",email:"",phone:"",textNumber:"",preferredContacts:[],emergencyContactName:"",emergencyContactPhone:"",availability:{Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},locations:"",pin:"",paymentStatus:"pending",division:""}),[m,g]=b.useState(1),[f,h]=b.useState(!1),[v,S]=b.useState(""),[x,E]=b.useState(""),[N,C]=b.useState({}),[I,A]=b.useState([]),[_,k]=b.useState([]),[B,z]=b.useState(""),M=["10:00 AM - 12:00 PM","12:00 PM - 2:00 PM","2:00 PM - 4:00 PM","4:00 PM - 6:00 PM","6:00 PM - 8:00 PM","8:00 PM - 10:00 PM","10:00 PM - 12:00 AM","Other (specify)"],O=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],U=[{value:"email",label:"Email"},{value:"phone",label:"Phone Call"},{value:"text",label:"Text Message"}],Z=async()=>{let q=0;const oe=100;for(;q<oe;){const he=Math.floor(1e3+Math.random()*9e3).toString();try{const be=await fetch(`${pe}/api/users/check-pin/${he}`);if(be.ok&&!(await be.json()).exists)return he}catch(be){return console.error("Error checking PIN uniqueness:",be),he}q++}return Math.floor(1e3+Math.random()*9e3).toString()+Date.now().toString().slice(-1)};b.useEffect(()=>{H()},[]),b.useEffect(()=>{if(o&&(u({firstName:o.firstName||"",lastName:o.lastName||"",email:o.email||"",phone:o.phone||"",textNumber:o.textNumber||"",preferredContacts:o.preferredContacts||[],emergencyContactName:o.emergencyContactName||"",emergencyContactPhone:o.emergencyContactPhone||"",availability:o.availability||{Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},locations:o.locations||"",pin:o.pin||"",confirmPin:o.pin||"",division:o.division||""}),o.locations)){const q=o.locations.split(`
`).map(be=>be.trim()).filter(be=>be),oe=[],he=[];q.forEach(be=>{I.some(ye=>ye.name===be)?oe.push(be):he.push(be)}),k(oe),z(he.join(`
`))}},[o,I]);const H=async()=>{try{const q=await fetch(`${pe}/api/locations`);if(q.ok){const oe=await q.json();A(oe.locations||[])}}catch(q){console.error("Failed to load locations:",q)}},V=(q,oe)=>{u(he=>({...he,[q]:oe})),S("")},F=(q,oe,he)=>{u(be=>({...be,availability:{...be.availability,[q]:he?[...be.availability[q],oe]:be.availability[q].filter(nt=>nt!==oe)}}))},R=(q,oe,he)=>{u(be=>{const nt=be.availability[q];if(nt.includes("Other (specify)")&&oe&&he){const We=`${oe} - ${he}`,Ze=nt.map(lt=>lt==="Other (specify)"?We:lt);return{...be,availability:{...be.availability,[q]:Ze}}}return be})},D=(q,oe)=>{u(he=>({...he,preferredContacts:oe?[...he.preferredContacts,q]:he.preferredContacts.filter(be=>be!==q)}))},j=(q,oe)=>{k(he=>oe?[...he,q]:he.filter(be=>be!==q))},X=q=>{z(q)},W=()=>{const q=[..._];if(B.trim()){const oe=B.split(`
`).map(he=>he.trim()).filter(he=>he.length>0);q.push(...oe)}return q.join(`
`)},T=q=>{if(i)return null;switch(q){case 1:return c.firstName.trim()?c.lastName.trim()?c.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email)?c.phone.trim()?null:"Phone number is required":"Valid email is required":"Email is required":"Last name is required":"First name is required";case 2:return Object.values(c.availability).some(be=>be.length>0)?null:"Please select at least one time slot";case 3:return W().trim()?null:"At least one location is required";case 4:return c.preferredContacts.length===0?"Please select at least one contact preference":null;case 5:return null;default:return null}},G=()=>{const q=T(m);if(q){S(q);return}S(""),m<5?g(m+1):P()},te=()=>{S(""),m>1&&g(m-1)},P=async()=>{var oe;const q=T(m);if(q){S(q);return}h(!0),S("");try{const he=await Z(),nt={...i?{firstName:c.firstName.trim()||"Test",lastName:c.lastName.trim()||"Player",email:c.email.trim()||`test${Date.now()}@example.com`,phone:c.phone.trim()||"555-1234",textNumber:c.textNumber||"",emergencyContactName:c.emergencyContactName||"",emergencyContactPhone:c.emergencyContactPhone||"",preferredContacts:c.preferredContacts.length>0?c.preferredContacts:["email"],availability:c.availability,locations:W()||"Test Location",pin:he,paymentStatus:"pending",division:"",notes:c.notes||"Created by admin for testing"}:{...c,pin:he,paymentStatus:"pending",division:""},confirmPin:void 0},ye=o?`${pe}/api/users/${o.id}/profile`:`${pe}/api/users/register`,Ze=await fetch(ye,{method:o?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(nt)});if(!Ze.ok){const Ve=await Ze.json();throw new Error(Ve.message||"Registration failed")}const lt=await Ze.json();if(!o&&!i)try{const Ve=await fetch(`${pe}/api/payment-config/enabled-methods`);let zt={enabledMethods:[],registrationFee:30,additionalInstructions:"",contactInfo:{}};Ve.ok&&(zt=await Ve.json()),await jI({to_email:c.email,to_name:`${c.firstName} ${c.lastName}`,registrationId:((oe=lt.user)==null?void 0:oe.id)||lt.id||`REG-${Date.now()}`,registrationDate:new Date().toLocaleDateString(),registrationFee:zt.registrationFee||30,paymentMethods:zt.enabledMethods||[],additionalInstructions:zt.additionalInstructions||"",contactInfo:zt.contactInfo||{}}),console.log("Payment instructions email sent successfully")}catch(Ve){console.error("Failed to send payment instructions email:",Ve)}E(o?"Profile updated successfully!":i?"Test player created successfully!":"Registration submitted successfully! Payment instructions have been sent to your email."),setTimeout(()=>{t&&t(lt),r()},1500)}catch(he){S(he.message||"An error occurred during registration")}finally{h(!1)}},ne=()=>{switch(m){case 1:return e.createElement("div",{style:{padding:"10px"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"20px",textAlign:"center",fontSize:"20px"}},"Personal Information"),e.createElement("div",{style:{display:"grid",gap:"15px"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"1fr 1fr",gap:"15px"}},e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold",fontSize:"16px"}},"First Name *"),e.createElement("input",{type:"text",value:c.firstName,onChange:q=>V("firstName",q.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"18px"},placeholder:"Enter first name"})),e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold",fontSize:"16px"}},"Last Name *"),e.createElement("input",{type:"text",value:c.lastName,onChange:q=>V("lastName",q.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"18px"},placeholder:"Enter last name"}))),e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold",fontSize:"16px"}},"Email Address *"),e.createElement("input",{type:"email",value:c.email,onChange:q=>V("email",q.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"18px"},placeholder:"Enter email address"})),e.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"1fr 1fr",gap:"15px"}},e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold",fontSize:"16px"}},"Phone Number *"),e.createElement("input",{type:"tel",value:c.phone,onChange:q=>V("phone",q.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"18px"},placeholder:"Enter phone number"})),e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold",fontSize:"16px"}},"Text Number (if different)"),e.createElement("input",{type:"tel",value:c.textNumber,onChange:q=>V("textNumber",q.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"18px"},placeholder:"Optional text number"}))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"1fr 1fr",gap:"15px"}},e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Emergency Contact Name"),e.createElement("input",{type:"text",value:c.emergencyContactName,onChange:q=>V("emergencyContactName",q.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"16px"},placeholder:"Emergency contact name"})),e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Emergency Contact Phone"),e.createElement("input",{type:"tel",value:c.emergencyContactPhone,onChange:q=>V("emergencyContactPhone",q.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"16px"},placeholder:"Emergency contact phone"})))));case 2:return e.createElement("div",{style:{padding:"10px"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"15px",textAlign:"center",fontSize:"18px"}},"Availability Schedule"),e.createElement("p",{style:{color:"#ccc",textAlign:"center",marginBottom:"15px",fontSize:"14px"}},"Select the time slots when you're available to play matches"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"repeat(2, 1fr)",gap:"10px",maxHeight:"50vh",overflowY:"auto"}},O.map(q=>e.createElement("div",{key:q,style:{background:"rgba(255,255,255,0.05)",padding:"8px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}},e.createElement("h4",{style:{color:"#e53e3e",marginBottom:"6px",textAlign:"center",fontSize:"16px",fontWeight:"bold"}},q==="Mon"?"Monday":q==="Tue"?"Tuesday":q==="Wed"?"Wednesday":q==="Thu"?"Thursday":q==="Fri"?"Friday":q==="Sat"?"Saturday":"Sunday"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"repeat(2, 1fr)",gap:"6px",justifyContent:"center",alignItems:"center",padding:"0 6px"}},M.map(oe=>{var he,be,nt,ye;return e.createElement("div",{key:oe},e.createElement("label",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"4px 8px",borderRadius:"6px",background:c.availability[q].includes(oe)?"rgba(229, 62, 62, 0.2)":"rgba(255,255,255,0.05)",border:c.availability[q].includes(oe)?"1px solid #e53e3e":"1px solid rgba(255,255,255,0.1)",cursor:"pointer",transition:"all 0.2s ease",fontSize:"12px",width:"100%",minWidth:"110px",margin:"0 auto",boxShadow:c.availability[q].includes(oe)?"0 2px 4px rgba(229, 62, 62, 0.3)":"0 1px 2px rgba(0,0,0,0.1)"}},e.createElement("input",{type:"checkbox",checked:c.availability[q].includes(oe),onChange:We=>F(q,oe,We.target.checked),style:{marginRight:"4px",transform:"scale(1)"}}),e.createElement("span",{style:{color:"#fff",fontSize:"12px"}},oe)),oe==="Other (specify)"&&c.availability[q].includes(oe)&&e.createElement("div",{style:{marginTop:"6px",padding:"8px",background:"rgba(229, 62, 62, 0.1)",borderRadius:"4px",border:"1px solid rgba(229, 62, 62, 0.3)"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"6px",alignItems:"center",marginBottom:"4px"}},e.createElement("select",{value:((he=N[q])==null?void 0:he.start)||"",onChange:We=>{var lt;const Ze=We.target.value;C(Ve=>({...Ve,[q]:{...Ve[q],start:Ze}})),R(q,Ze,(lt=N[q])==null?void 0:lt.end)},style:{padding:"4px 6px",borderRadius:"3px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(0,0,0,0.3)",color:"#fff",fontSize:"14px",textAlign:"center"}},e.createElement("option",{value:""},"Start"),e.createElement("option",{value:"6:00 AM"},"6:00 AM"),e.createElement("option",{value:"7:00 AM"},"7:00 AM"),e.createElement("option",{value:"8:00 AM"},"8:00 AM"),e.createElement("option",{value:"9:00 AM"},"9:00 AM"),e.createElement("option",{value:"10:00 AM"},"10:00 AM"),e.createElement("option",{value:"11:00 AM"},"11:00 AM"),e.createElement("option",{value:"12:00 PM"},"12:00 PM"),e.createElement("option",{value:"1:00 PM"},"1:00 PM"),e.createElement("option",{value:"2:00 PM"},"2:00 PM"),e.createElement("option",{value:"3:00 PM"},"3:00 PM"),e.createElement("option",{value:"4:00 PM"},"4:00 PM"),e.createElement("option",{value:"5:00 PM"},"5:00 PM"),e.createElement("option",{value:"6:00 PM"},"6:00 PM"),e.createElement("option",{value:"7:00 PM"},"7:00 PM"),e.createElement("option",{value:"8:00 PM"},"8:00 PM"),e.createElement("option",{value:"9:00 PM"},"9:00 PM"),e.createElement("option",{value:"10:00 PM"},"10:00 PM"),e.createElement("option",{value:"11:00 PM"},"11:00 PM"),e.createElement("option",{value:"12:00 AM"},"12:00 AM")),e.createElement("span",{style:{color:"#fff",fontSize:"11px"}},"to"),e.createElement("select",{value:((be=N[q])==null?void 0:be.end)||"",onChange:We=>{var lt;const Ze=We.target.value;C(Ve=>({...Ve,[q]:{...Ve[q],end:Ze}})),R(q,(lt=N[q])==null?void 0:lt.start,Ze)},style:{padding:"4px 6px",borderRadius:"3px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(0,0,0,0.3)",color:"#fff",fontSize:"14px",textAlign:"center"}},e.createElement("option",{value:""},"End"),e.createElement("option",{value:"6:00 AM"},"6:00 AM"),e.createElement("option",{value:"7:00 AM"},"7:00 AM"),e.createElement("option",{value:"8:00 AM"},"8:00 AM"),e.createElement("option",{value:"9:00 AM"},"9:00 AM"),e.createElement("option",{value:"10:00 AM"},"10:00 AM"),e.createElement("option",{value:"11:00 AM"},"11:00 AM"),e.createElement("option",{value:"12:00 PM"},"12:00 PM"),e.createElement("option",{value:"1:00 PM"},"1:00 PM"),e.createElement("option",{value:"2:00 PM"},"2:00 PM"),e.createElement("option",{value:"3:00 PM"},"3:00 PM"),e.createElement("option",{value:"4:00 PM"},"4:00 PM"),e.createElement("option",{value:"5:00 PM"},"5:00 PM"),e.createElement("option",{value:"6:00 PM"},"6:00 PM"),e.createElement("option",{value:"7:00 PM"},"7:00 PM"),e.createElement("option",{value:"8:00 PM"},"8:00 PM"),e.createElement("option",{value:"9:00 PM"},"9:00 PM"),e.createElement("option",{value:"10:00 PM"},"10:00 PM"),e.createElement("option",{value:"11:00 PM"},"11:00 PM"),e.createElement("option",{value:"12:00 AM"},"12:00 AM"))),((nt=N[q])==null?void 0:nt.start)&&((ye=N[q])==null?void 0:ye.end)&&e.createElement("div",{style:{fontSize:"10px",color:"#4CAF50",textAlign:"center",fontWeight:"bold"}},"✓ Custom time set: ",N[q].start," - ",N[q].end)))}))))));case 3:return e.createElement("div",{style:{padding:"10px"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"15px",textAlign:"center"}},"Playing Locations"),e.createElement("p",{style:{color:"#ccc",textAlign:"center",marginBottom:"15px",fontSize:"13px"}},"Select from predefined locations and/or add your own custom locations"),I.length>0&&e.createElement("div",{style:{marginBottom:"15px"}},e.createElement("label",{style:{display:"block",marginBottom:"10px",color:"#fff",fontWeight:"bold",fontSize:"16px",textAlign:"center",width:"100%"}},"Select from Available Locations:"),e.createElement("div",{style:{display:"grid",gap:"3px",maxHeight:"180px",overflowY:"auto",padding:"6px",background:"rgba(0,0,0,0.3)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)"}},I.map(q=>e.createElement("label",{key:q._id,style:{display:"flex",alignItems:"center",padding:"4px 6px",borderRadius:"4px",background:_.includes(q.name)?"rgba(76, 175, 80, 0.2)":"rgba(255,255,255,0.05)",border:_.includes(q.name)?"1px solid #4CAF50":"1px solid rgba(255,255,255,0.1)",cursor:"pointer",transition:"all 0.2s ease"}},e.createElement("input",{type:"checkbox",checked:_.includes(q.name),onChange:oe=>j(q.name,oe.target.checked),style:{marginRight:"6px",transform:"scale(1)"}}),e.createElement("div",{style:{flex:1,textAlign:"center"}},e.createElement("div",{style:{color:"#fff",fontWeight:"bold",fontSize:"15px",textAlign:"center"}},q.name),q.address&&e.createElement("div",{style:{color:"#ccc",fontSize:"13px",marginTop:"1px",textAlign:"center"}},"📍 ",q.address),q.notes&&e.createElement("div",{style:{color:"#999",fontSize:"12px",marginTop:"1px",textAlign:"center"}},"📝 ",q.notes)))))),e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"10px",color:"#fff",fontWeight:"bold",fontSize:"16px",textAlign:"center"}},"Add Custom Locations (Optional):"),e.createElement("textarea",{value:B,onChange:q=>X(q.target.value),style:{width:"100%",minHeight:"60px",padding:"8px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"16px",resize:"vertical"},placeholder:`Enter additional locations, one per line:
My Home Table
Friend's House
Local Bar`})),(_.length>0||B.trim())&&e.createElement("div",{style:{marginTop:"10px",padding:"10px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"6px",border:"1px solid rgba(76, 175, 80, 0.3)"}},e.createElement("h4",{style:{color:"#4CAF50",margin:"0 0 10px 0",fontSize:"14px",fontWeight:"bold"}},"📍 Your Selected Locations:"),e.createElement("div",{style:{color:"#ccc",fontSize:"13px"}},W().split(`
`).map((q,oe)=>e.createElement("div",{key:oe,style:{marginBottom:"2px"}},"• ",q)))),e.createElement("div",{style:{marginTop:"10px",padding:"8px",background:"rgba(229, 62, 62, 0.1)",borderRadius:"6px"}},e.createElement("p",{style:{color:"#ccc",fontSize:"14px",margin:0}},e.createElement("strong",null,"Tip:")," Select from the predefined locations above, or add your own custom locations. These will be used to help match you with other players in your area.")));case 4:return e.createElement("div",{style:{padding:"10px"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"20px",textAlign:"center"}},"Contact Preferences"),e.createElement("p",{style:{color:"#ccc",textAlign:"center",marginBottom:"20px",fontSize:"14px"}},"How would you prefer other players to contact you for match scheduling?"),e.createElement("div",{style:{display:"grid",gap:"15px"}},U.map(q=>e.createElement("label",{key:q.value,style:{display:"flex",alignItems:"center",padding:"15px",borderRadius:"8px",background:c.preferredContacts.includes(q.value)?"rgba(229, 62, 62, 0.2)":"rgba(255,255,255,0.05)",border:c.preferredContacts.includes(q.value)?"1px solid #e53e3e":"1px solid rgba(255,255,255,0.1)",cursor:"pointer",transition:"all 0.2s ease"}},e.createElement("input",{type:"checkbox",checked:c.preferredContacts.includes(q.value),onChange:oe=>D(q.value,oe.target.checked),style:{marginRight:"12px",transform:"scale(1.2)"}}),e.createElement("span",{style:{color:"#fff",fontSize:"16px",fontWeight:"bold"}},q.label)))),e.createElement("div",{style:{marginTop:"20px",padding:"15px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"8px",border:"1px solid rgba(76, 175, 80, 0.3)"}},e.createElement("p",{style:{color:"#ccc",fontSize:"14px",margin:0}},e.createElement("strong",null,"Note:")," Your contact information will only be shared with players who are scheduling matches with you. You can change these preferences later in your profile settings.")));case 5:return e.createElement("div",{style:{padding:"10px"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"20px",textAlign:"center"}},"Registration & Payment"),e.createElement("div",{style:{display:"grid",gap:"20px"}},e.createElement("div",{style:{padding:"15px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"8px",border:"1px solid rgba(76, 175, 80, 0.3)",textAlign:"center"}},e.createElement("h4",{style:{color:"#4CAF50",margin:"0 0 10px 0",fontSize:"16px",fontWeight:"bold"}},"🔐 Your PIN will be auto-generated"),e.createElement("p",{style:{color:"#ccc",fontSize:"14px",margin:0}},"A unique 4-digit PIN will be automatically generated for you. You'll receive it after payment is confirmed.")),e.createElement("div",{style:{padding:"15px",background:"rgba(255, 193, 7, 0.1)",borderRadius:"8px",border:"1px solid rgba(255, 193, 7, 0.3)",textAlign:"center"}},e.createElement("h4",{style:{color:"#ffc107",margin:"0 0 10px 0",fontSize:"16px",fontWeight:"bold"}},"🏆 Division Assignment"),e.createElement("p",{style:{color:"#ccc",fontSize:"14px",margin:0}},"Your division will be assigned by league administrators based on your skill level and availability. You'll be notified once assigned.")),e.createElement("div",{style:{padding:"15px",background:"rgba(229, 62, 62, 0.1)",borderRadius:"8px",border:"1px solid rgba(229, 62, 62, 0.3)",textAlign:"center"}},e.createElement("h4",{style:{color:"#e53e3e",margin:"0 0 10px 0",fontSize:"16px",fontWeight:"bold"}},"💳 Payment Required"),e.createElement("p",{style:{color:"#ccc",fontSize:"14px",margin:0}},"Registration fee: ",e.createElement("strong",null,"$30")," must be paid before you receive your PIN and can access the league system. Payment instructions will be sent to your email immediately after registration."))),e.createElement("div",{style:{marginTop:"20px",padding:"15px",background:"rgba(0, 123, 255, 0.1)",borderRadius:"8px",border:"1px solid rgba(0, 123, 255, 0.3)"}},e.createElement("p",{style:{color:"#ccc",fontSize:"14px",margin:0}},e.createElement("strong",null,"Next Steps:")," After registration, you'll receive payment instructions. Once payment is confirmed, you'll get your PIN and full access to the league system.")));default:return null}};return a?e.createElement(e.Fragment,null,e.createElement(Bt,{open:a,onClose:r,title:o?"Edit Player Profile":i?"Admin: Test Player Registration":"Player Registration",maxWidth:n?"95vw":"800px",className:"player-registration-modal"},e.createElement("div",{style:{background:"rgba(255,255,255,0.1)",height:"4px",position:"relative",marginBottom:"15px"}},e.createElement("div",{style:{background:"linear-gradient(90deg, #e53e3e, #ff6b6b)",height:"100%",width:`${m/5*100}%`,transition:"width 0.3s ease"}})),e.createElement("div",{style:{padding:"10px 15px",background:"rgba(0,0,0,0.8)",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:"15px",borderRadius:"6px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("span",{style:{color:"#fff",fontSize:"14px"}},"Step ",m," of 5"),e.createElement("span",{style:{color:"#e53e3e",fontSize:"14px",fontWeight:"bold"}},m===1&&"Personal Info",m===2&&"Availability",m===3&&"Locations",m===4&&"Contact Preferences",m===5&&"Registration & Payment")),i&&e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.2)",border:"1px solid rgba(255, 193, 7, 0.5)",borderRadius:"4px",padding:"6px 10px",marginTop:"8px",textAlign:"center"}},e.createElement("span",{style:{color:"#ffc107",fontSize:"12px",fontWeight:"bold"}},"🔧 ADMIN MODE: Validation bypassed for testing"))),e.createElement("div",{style:{marginBottom:"25px",maxHeight:"60vh",overflowY:"auto",paddingRight:"10px"}},ne()),v&&e.createElement("div",{style:{padding:"10px 15px",background:"rgba(229, 62, 62, 0.2)",border:"1px solid #e53e3e",color:"#ff6b6b",textAlign:"center",fontSize:"14px",borderRadius:"6px",marginBottom:"15px"}},v),x&&e.createElement("div",{style:{padding:"10px 15px",background:"rgba(76, 175, 80, 0.2)",border:"1px solid #4CAF50",color:"#4CAF50",textAlign:"center",fontSize:"14px",borderRadius:"6px",marginBottom:"15px"}},x),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",gap:"10px"}},e.createElement("button",{onClick:m===1?r:te,style:{padding:"12px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#fff",cursor:"pointer",fontSize:"16px",transition:"all 0.2s ease",flex:1},onMouseEnter:q=>{q.target.style.background="rgba(255,255,255,0.1)"},onMouseLeave:q=>{q.target.style.background="transparent"}},m===1?"Cancel":"Previous"),e.createElement("button",{onClick:G,disabled:f,style:{padding:"12px 20px",borderRadius:"6px",border:"none",background:f?"#666":"#e53e3e",color:"#fff",cursor:f?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",transition:"all 0.2s ease",flex:1},onMouseEnter:q=>{f||(q.target.style.background="#ff6b6b")},onMouseLeave:q=>{f||(q.target.style.background="#e53e3e")}},f?"Processing...":m===5?o?"Update Profile":"Complete Registration":"Next"))),e.createElement("style",{jsx:!0},`
               .player-registration-modal {
          max-height: 95vh !important;
          height: auto !important;
        }
        
        .player-registration-modal .draggable-modal {
          max-height: 95vh !important;
          height: auto !important;
        }
        
        .player-registration-modal .modal-content {
          max-height: 70vh !important;
          overflow-y: auto !important;
        }
       
       /* Custom scrollbar */
       .player-registration-modal .modal-content::-webkit-scrollbar {
         width: 6px;
       }
       
       .player-registration-modal .modal-content::-webkit-scrollbar-thumb {
         background: #e53e3e;
         border-radius: 3px;
       }
       
               .player-registration-modal .modal-content::-webkit-scrollbar-track {
          background: rgba(255,255,255,0.1);
          border-radius: 3px;
        }
        
                 /* Custom dropdown styling for dark theme */
         .player-registration-modal select option {
           background: #222 !important;
           color: #fff !important;
           border: none !important;
           font-size: 14px !important;
           padding: 4px 8px !important;
         }
        
        .player-registration-modal select:focus {
          outline: none !important;
          border-color: #e53e3e !important;
          box-shadow: 0 0 0 2px rgba(229, 62, 62, 0.2) !important;
        }
     `)):null}var Aw={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ox=e.createContext&&e.createContext(Aw),H7=["attr","size","title"];function $7(a,r){if(a==null)return{};var t=Y7(a,r),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(o=0;o<i.length;o++)n=i[o],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(a,n)&&(t[n]=a[n])}return t}function Y7(a,r){if(a==null)return{};var t={};for(var n in a)if(Object.prototype.hasOwnProperty.call(a,n)){if(r.indexOf(n)>=0)continue;t[n]=a[n]}return t}function Np(){return Np=Object.assign?Object.assign.bind():function(a){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},Np.apply(this,arguments)}function Fx(a,r){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),t.push.apply(t,n)}return t}function Ip(a){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Fx(Object(t),!0).forEach(function(n){G7(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Fx(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function G7(a,r,t){return r=q7(r),r in a?Object.defineProperty(a,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[r]=t,a}function q7(a){var r=Z7(a,"string");return typeof r=="symbol"?r:r+""}function Z7(a,r){if(typeof a!="object"||!a)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var n=t.call(a,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}function Dw(a){return a&&a.map((r,t)=>e.createElement(r.tag,Ip({key:t},r.attr),Dw(r.child)))}function bt(a){return r=>e.createElement(V7,Np({attr:Ip({},a.attr)},r),Dw(a.child))}function V7(a){var r=t=>{var{attr:n,size:o,title:i}=a,c=$7(a,H7),u=o||t.size||"1em",m;return t.className&&(m=t.className),a.className&&(m=(m?m+" ":"")+a.className),e.createElement("svg",Np({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,c,{className:m,style:Ip(Ip({color:a.color||t.color},t.style),a.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&e.createElement("title",null,i),a.children)};return Ox!==void 0?e.createElement(Ox.Consumer,null,t=>r(t)):r(Aw)}function Q7(a){return bt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z"},child:[]}]})(a)}function Ap(a){return bt({attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(a)}function J7(a){return bt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M111.4 295.9c-3.5 19.2-17.4 108.7-21.5 134-.3 1.8-1 2.5-3 2.5H12.3c-7.6 0-13.1-6.6-12.1-13.9L58.8 46.6c1.5-9.6 10.1-16.9 20-16.9 152.3 0 165.1-3.7 204 11.4 60.1 23.3 65.6 79.5 44 140.3-21.5 62.6-72.5 89.5-140.1 90.3-43.4.7-69.5-7-75.3 24.2zM357.1 152c-1.8-1.3-2.5-1.8-3 1.3-2 11.4-5.1 22.5-8.8 33.6-39.9 113.8-150.5 103.9-204.5 103.9-6.1 0-10.1 3.3-10.9 9.4-22.6 140.4-27.1 169.7-27.1 169.7-1 7.1 3.5 12.9 10.6 12.9h63.5c8.6 0 15.7-6.3 17.4-14.9.7-5.4-1.1 6.1 14.4-91.3 4.6-22 14.3-19.7 29.3-19.7 71 0 126.4-28.8 142.9-112.3 6.5-34.8 4.6-71.4-23.8-92.6z"},child:[]}]})(a)}function jh(a){return bt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(a)}function xl(a){return bt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(a)}function Il(a){return bt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(a)}function N0(a){return bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(a)}function zr(a){return bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(a)}function Mw(a){return bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(a)}function X7(a){return bt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(a)}function Rw(a){return bt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(a)}function K7(a){return bt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(a)}function ez(a){return bt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(a)}function Tw(a){return bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(a)}function I0(a){return bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(a)}function Pw(a){return bt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(a)}function Ux(a){return bt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(a)}function tz(a){return bt({attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"},child:[]}]})(a)}function az(a){return bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(a)}function ki(a){return bt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(a)}function tf(a){return bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(a)}function Dp(a){return bt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(a)}function Wx(a){return bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"},child:[]}]})(a)}function nz(a){return bt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(a)}function Ni(a){return bt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(a)}function rz(a){return bt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"},child:[]}]})(a)}function oz(a){return bt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(a)}function Sy(a){return bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(a)}function sz(a){return bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 176.001C512 273.203 433.202 352 336 352c-11.22 0-22.19-1.062-32.827-3.069l-24.012 27.014A23.999 23.999 0 0 1 261.223 384H224v40c0 13.255-10.745 24-24 24h-40v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-78.059c0-6.365 2.529-12.47 7.029-16.971l161.802-161.802C163.108 213.814 160 195.271 160 176 160 78.798 238.797.001 335.999 0 433.488-.001 512 78.511 512 176.001zM336 128c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z"},child:[]}]})(a)}function lz(a){return bt({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"},child:[]}]})(a)}function Ii(a){return bt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(a)}function iz(a){return bt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M272 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h224c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(a)}function cz(a){return bt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(a)}function dz(a){return bt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(a)}function Vn(a){return bt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(a)}function uz(a){return bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"},child:[]}]})(a)}function yl(a){return bt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(a)}function Lw(a){return bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(a)}function mz(a){return bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M480 160H32c-17.673 0-32-14.327-32-32V64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24z"},child:[]}]})(a)}function jx(a){return bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(a)}function Lr(a){return bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(a)}function A0(a){return bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"},child:[]}]})(a)}function Kc(a){return bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"},child:[]}]})(a)}function pz(a){return bt({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(a)}function Al(a){return bt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(a)}function Wi(a){return bt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 35.7 22.5 72.4 61.9 100.7 31.5 22.7 69.8 37.1 110 41.7C203.3 338.5 240 360 240 360v72h-48c-35.3 0-64 20.7-64 56v12c0 6.6 5.4 12 12 12h296c6.6 0 12-5.4 12-12v-12c0-35.3-28.7-56-64-56h-48v-72s36.7-21.5 68.1-73.6c40.3-4.6 78.6-19 110-41.7 39.3-28.3 61.9-65 61.9-100.7V88c0-13.3-10.7-24-24-24zM99.3 192.8C74.9 175.2 64 155.6 64 144v-16h64.2c1 32.6 5.8 61.2 12.8 86.2-15.1-5.2-29.2-12.4-41.7-21.4zM512 144c0 16.1-17.7 36.1-35.3 48.8-12.5 9-26.7 16.2-41.8 21.4 7-25 11.8-53.6 12.8-86.2H512v16z"},child:[]}]})(a)}function D0(a){return bt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"},child:[]}]})(a)}function fz(a){return bt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208H432c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h192c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(a)}function Ai(a){return bt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(a)}function Bw(a){return bt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(a)}function os(a){return bt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(a)}function zw({activeTab:a,onTabChange:r,onQuickAction:t,pendingCount:n=0,sentCount:o=0,matchesCount:i=0}){const c=[{id:"overview",label:"Home",icon:e.createElement(oz,null),badge:null},{id:"matches",label:"Matches",icon:e.createElement(Il,null),badge:i>0?i:null},{id:"proposals",label:"Proposals",icon:e.createElement(os,null),badge:n>0?n:null},{id:"standings",label:"Standings",icon:e.createElement(Wi,null),badge:null},{id:"chat",label:"Chat",icon:e.createElement(Pw,null),badge:null}];return e.createElement("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"rgba(24, 24, 27, 0.95)",backdropFilter:"blur(20px)",borderTop:"1px solid rgba(255, 255, 255, 0.1)",padding:"8px 0",zIndex:1e3,display:"flex",justifyContent:"space-around",alignItems:"center"}},c.map(u=>e.createElement("button",{key:u.id,onClick:()=>r(u.id),style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"transparent",border:"none",color:a===u.id?"#e53e3e":"#888",padding:"8px 4px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",minHeight:"60px",minWidth:"60px",position:"relative"},onTouchStart:m=>{m.target.style.transform="scale(0.95)"},onTouchEnd:m=>{m.target.style.transform="scale(1)"}},e.createElement("div",{style:{fontSize:"1.2rem",marginBottom:"2px",display:"flex",alignItems:"center",justifyContent:"center"}},u.icon),e.createElement("span",{style:{fontSize:"0.7rem",fontWeight:a===u.id?"600":"400",textAlign:"center"}},u.label),u.badge&&e.createElement("div",{style:{position:"absolute",top:"4px",right:"4px",background:"#e53e3e",color:"#fff",borderRadius:"50%",width:"18px",height:"18px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.6rem",fontWeight:"600",border:"2px solid rgba(24, 24, 27, 0.95)"}},u.badge>99?"99+":u.badge))),e.createElement("button",{onClick:t,style:{position:"absolute",top:"-20px",left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg, #e53e3e, #c53030)",color:"#fff",border:"none",borderRadius:"50%",width:"56px",height:"56px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",cursor:"pointer",boxShadow:"0 4px 16px rgba(229, 62, 62, 0.4)",transition:"all 0.2s ease",zIndex:1001},onTouchStart:u=>{u.target.style.transform="translateX(-50%) scale(0.95)"},onTouchEnd:u=>{u.target.style.transform="translateX(-50%) scale(1)"}},e.createElement(Vn,null)))}function yd({children:a,title:r,subtitle:t,onTap:n,onSwipeLeft:o,onSwipeRight:i,swipeThreshold:c=80,showSwipeActions:u=!0,className:m="",style:g={},...f}){const[h,v]=b.useState(!1),[S,x]=b.useState(0),[E,N]=b.useState(0),[C,I]=b.useState(null),A=b.useRef(null),_=M=>{x(M.touches[0].clientX),N(M.touches[0].clientX),v(!0),I(null)},k=M=>{if(!h)return;const O=M.touches[0].clientX;N(O);const U=O-S;Math.abs(U)>20&&I(U>0?"right":"left")},B=()=>{if(!h)return;const M=E-S;Math.abs(M)>c&&(M>0&&i?i():M<0&&o&&o()),v(!1),x(0),N(0),I(null)},z=()=>{!h&&n&&n()};return e.createElement("div",{ref:A,className:`mobile-optimized-card ${m}`,onTouchStart:_,onTouchMove:k,onTouchEnd:B,onClick:z,style:{position:"relative",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.04) 100%)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.15)",padding:"16px",marginBottom:"12px",cursor:n?"pointer":"default",transition:h?"none":"all 0.3s ease",transform:h?`translateX(${E-S}px)`:"translateX(0)",touchAction:"pan-y",userSelect:"none",WebkitTapHighlightColor:"transparent",...g},...f},u&&e.createElement(e.Fragment,null,e.createElement("div",{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",opacity:C==="right"?.8:0,transition:"opacity 0.2s ease",color:"#10b981",fontSize:"1.2rem"}},e.createElement(Ni,null)),e.createElement("div",{style:{position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)",opacity:C==="left"?.8:0,transition:"opacity 0.2s ease",color:"#ef4444",fontSize:"1.2rem"}},e.createElement(Al,null))),(r||t)&&e.createElement("div",{style:{marginBottom:"12px"}},r&&e.createElement("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600",color:"#fff",lineHeight:"1.3"}},r),t&&e.createElement("p",{style:{margin:"4px 0 0 0",fontSize:"0.85rem",color:"#ccc",opacity:.8,lineHeight:"1.4"}},t)),e.createElement("div",{style:{position:"relative"}},a),n&&e.createElement("div",{style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",color:"#888",fontSize:"0.8rem",opacity:.6}},e.createElement(Rw,null)),e.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"12px",background:C==="right"?"linear-gradient(90deg, rgba(16, 185, 129, 0.1) 0%, transparent 50%)":C==="left"?"linear-gradient(90deg, transparent 50%, rgba(239, 68, 68, 0.1) 100%)":"transparent",opacity:Math.abs(E-S)/c,transition:"opacity 0.2s ease",pointerEvents:"none"}}))}function Hh({children:a,variant:r="primary",size:t="medium",fullWidth:n=!1,icon:o,onClick:i,disabled:c=!1,loading:u=!1,className:m="",style:g={},...f}){const h=()=>{switch(r){case"primary":return{background:"linear-gradient(135deg, #e53e3e, #c53030)",color:"#fff",border:"none"};case"secondary":return{background:"rgba(255, 255, 255, 0.1)",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.2)"};case"danger":return{background:"linear-gradient(135deg, #ef4444, #dc2626)",color:"#fff",border:"none"};default:return{background:"linear-gradient(135deg, #e53e3e, #c53030)",color:"#fff",border:"none"}}},v=()=>{switch(t){case"small":return{padding:"8px 12px",fontSize:"0.8rem",minHeight:"36px"};case"medium":return{padding:"12px 16px",fontSize:"0.9rem",minHeight:"44px"};case"large":return{padding:"16px 20px",fontSize:"1rem",minHeight:"52px"};default:return{padding:"12px 16px",fontSize:"0.9rem",minHeight:"44px"}}};return e.createElement("button",{onClick:i,disabled:c||u,className:`mobile-action-button ${m}`,style:{...h(),...v(),width:n?"100%":"auto",borderRadius:"8px",cursor:c||u?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",opacity:c||u?.6:1,...g},onTouchStart:S=>{!c&&!u&&(S.target.style.transform="scale(0.98)")},onTouchEnd:S=>{!c&&!u&&(S.target.style.transform="scale(1)")},...f},u?e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}},e.createElement("div",{style:{width:"16px",height:"16px",border:"2px solid transparent",borderTop:"2px solid currentColor",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Loading..."):e.createElement(e.Fragment,null,o&&e.createElement("span",null,o),a))}function Rr({title:a,subtitle:r,children:t,collapsible:n=!1,defaultCollapsed:o=!1,onToggle:i,className:c="",style:u={},...m}){const[g,f]=e.useState(o),h=()=>{n&&(f(!g),i&&i(!g))};return e.createElement("div",{className:`mobile-section ${c}`,style:{background:"rgba(255, 255, 255, 0.02)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.08)",padding:"16px",marginBottom:"16px",...u},...m},(a||r)&&e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:n&&!g?"12px":"0",cursor:n?"pointer":"default"},onClick:h},e.createElement("div",{style:{flex:1}},a&&e.createElement("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600",color:"#fff",lineHeight:"1.3"}},a),r&&e.createElement("p",{style:{margin:"4px 0 0 0",fontSize:"0.85rem",color:"#ccc",opacity:.8,lineHeight:"1.4"}},r)),n&&e.createElement("div",{style:{color:"#888",fontSize:"0.8rem",transition:"transform 0.2s ease",transform:g?"rotate(0deg)":"rotate(180deg)"}},e.createElement(K7,null))),e.createElement("div",{style:{display:n&&g?"none":"block",transition:"all 0.3s ease"}},t))}function Ow({children:a,columns:r=2,className:t="",style:n={}}){return e.createElement("div",{className:`mobile-stats-grid ${t}`,style:{display:"grid",gridTemplateColumns:`repeat(${r}, 1fr)`,gap:"12px",...n}},a)}function Ei({title:a,value:r,subtitle:t,icon:n,color:o="#e53e3e",onClick:i,className:c="",style:u={},...m}){return e.createElement("div",{className:`mobile-stat-card ${c}`,onClick:i,style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",padding:"12px",textAlign:"center",cursor:i?"pointer":"default",transition:"all 0.2s ease",...u},onTouchStart:g=>{i&&(g.target.style.transform="scale(0.98)")},onTouchEnd:g=>{i&&(g.target.style.transform="scale(1)")},...m},n&&e.createElement("div",{style:{fontSize:"1.5rem",color:o,marginBottom:"8px",display:"flex",justifyContent:"center"}},n),e.createElement("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#fff",marginBottom:"4px",lineHeight:"1.2"}},r),e.createElement("div",{style:{fontSize:"0.8rem",color:"#ccc",fontWeight:"500",marginBottom:t?"2px":"0"}},a),t&&e.createElement("div",{style:{fontSize:"0.7rem",color:"#888",lineHeight:"1.3"}},t))}function ed({children:a,emptyMessage:r="No items to display",loading:t=!1,className:n="",style:o={},...i}){return e.createElement("div",{className:`mobile-list ${n}`,style:{display:"flex",flexDirection:"column",gap:"8px",...o},...i},t?e.createElement("div",{style:{textAlign:"center",padding:"20px",color:"#888",fontSize:"0.9rem"}},"Loading..."):a&&a.length>0?a:e.createElement("div",{style:{textAlign:"center",padding:"20px",color:"#888",fontSize:"0.9rem"}},r))}function Hx({children:a,onTap:r,onSwipeLeft:t,onSwipeRight:n,swipeThreshold:o=80,className:i="",style:c={},...u}){const[m,g]=e.useState(!1),[f,h]=e.useState(0),[v,S]=e.useState(0),x=I=>{h(I.touches[0].clientX),S(I.touches[0].clientX),g(!0)},E=I=>{m&&S(I.touches[0].clientX)},N=()=>{if(!m)return;const I=v-f;Math.abs(I)>o&&(I>0&&n?n():I<0&&t&&t()),g(!1),h(0),S(0)},C=()=>{!m&&r&&r()};return e.createElement("div",{className:`mobile-list-item ${i}`,onClick:C,onTouchStart:x,onTouchMove:E,onTouchEnd:N,style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",padding:"12px",cursor:r?"pointer":"default",transition:m?"none":"all 0.2s ease",transform:m?`translateX(${v-f}px)`:"translateX(0)",touchAction:"pan-y",userSelect:"none",WebkitTapHighlightColor:"transparent",...c},...u},a)}function Cy(){const[a,r]=b.useState(!1),[t,n]=b.useState(!1),[o,i]=b.useState(!1),[c,u]=b.useState({width:0,height:0}),[m,g]=b.useState(!1),[f,h]=b.useState("portrait"),v=b.useCallback(()=>{if(typeof window>"u")return!1;const I=window.innerWidth,A=window.innerHeight;u({width:I,height:A});const _=I>A;i(_),h(_?"landscape":"portrait");const k=(()=>{if(I<=768)return!0;if(typeof navigator<"u"){const B=navigator.userAgent.toLowerCase();if(["android","webos","iphone","ipad","ipod","blackberry","iemobile","opera mini","mobile"].some(M=>B.includes(M)))return!0}return"ontouchstart"in window||navigator.maxTouchPoints>0?I<=1024:!1})();r(k),n(I>768&&I<=1024),g("ontouchstart"in window||navigator.maxTouchPoints>0)},[]),S={xs:480,sm:640,md:768,lg:1024,xl:1280,"2xl":1536},x=b.useCallback(()=>{const I=c.width;return I<S.xs?"xs":I<S.sm?"sm":I<S.md?"md":I<S.lg?"lg":I<S.xl?"xl":"2xl"},[c.width]),E={spacing:{xs:a?"4px":"8px",sm:a?"8px":"12px",md:a?"12px":"16px",lg:a?"16px":"24px",xl:a?"24px":"32px"},sizes:{buttonHeight:a?"44px":"36px",inputHeight:a?"44px":"36px",iconSize:a?"1.2rem":"1rem",fontSize:{xs:a?"0.7rem":"0.75rem",sm:a?"0.8rem":"0.875rem",md:a?"0.9rem":"1rem",lg:a?"1rem":"1.125rem",xl:a?"1.1rem":"1.25rem"}},animations:{duration:a?"0.2s":"0.3s",easing:"ease-out",scale:a?.98:.95},styles:{card:{padding:a?"12px":"16px",borderRadius:a?"8px":"12px",marginBottom:a?"8px":"12px"},button:{padding:a?"12px 16px":"10px 20px",fontSize:a?"0.9rem":"1rem",minHeight:a?"44px":"36px"},input:{padding:a?"12px":"10px",fontSize:a?"16px":"14px",minHeight:a?"44px":"36px"}}},N={threshold:80,velocity:.3,calculateSwipe:(I,A,_,k)=>{const B=_-I,z=k-A,M=Math.sqrt(B*B+z*z),O=M/300;return{deltaX:B,deltaY:z,distance:M,velocity:O,direction:Math.abs(B)>Math.abs(z)?B>0?"right":"left":z>0?"down":"up",isHorizontal:Math.abs(B)>Math.abs(z),isValid:M>50&&O>N.velocity}},createSwipeHandler:(I,A,_,k)=>{let B=0,z=0;return{onTouchStart:M=>{B=M.touches[0].clientX,z=M.touches[0].clientY},onTouchEnd:M=>{const O=M.changedTouches[0].clientX,U=M.changedTouches[0].clientY,Z=N.calculateSwipe(B,z,O,U);if(Z.isValid)switch(Z.direction){case"left":I&&I(Z);break;case"right":A&&A(Z);break;case"up":_&&_(Z);break;case"down":k&&k(Z);break}}}}},C={threshold:80,createPullToRefreshHandler:I=>{let A=0,_=0,k=!1;return{onTouchStart:B=>{window.scrollY===0&&(A=B.touches[0].clientY,k=!0)},onTouchMove:B=>{k&&window.scrollY===0&&(_=B.touches[0].clientY,_-A>0&&B.preventDefault())},onTouchEnd:async()=>{k&&(_-A>C.threshold&&await I(),k=!1,A=0,_=0)}}}};return b.useEffect(()=>{v();const I=()=>{v()},A=()=>{setTimeout(v,100)};return window.addEventListener("resize",I),window.addEventListener("orientationchange",A),()=>{window.removeEventListener("resize",I),window.removeEventListener("orientationchange",A)}},[v]),{isMobile:a,isTablet:t,isLandscape:o,screenSize:c,touchCapable:m,orientation:f,breakpoints:S,getBreakpoint:x,mobileUtils:E,swipeUtils:N,pullToRefreshUtils:C,isSmallScreen:c.width<S.md,isMediumScreen:c.width>=S.md&&c.width<S.lg,isLargeScreen:c.width>=S.lg,isIOS:typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent),isAndroid:typeof navigator<"u"&&/Android/.test(navigator.userAgent),isSafari:typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),redetect:v}}function gz({playerName:a,playerLastName:r,pendingProposals:t=[],sentProposals:n=[],matches:o=[],notes:i=[],standings:c=[],schedule:u=[],proposalsLoading:m=!1,matchesLoading:g=!1,notesLoading:f=!1,seasonLoading:h=!1,standingsLoading:v=!1,scheduleLoading:S=!1,onTabChange:x,onQuickAction:E,onViewMatch:N,onViewProposal:C,onViewStandings:I,onViewSchedule:A,onViewProfile:_,onViewSettings:k,setShowMatchProposalModal:B,setShowUserProfileModal:z,setShowSettingsModal:M,className:O="",style:U={},...Z}){const[H,V]=b.useState("overview"),{pullToRefreshUtils:F}=Cy(),R=P=>{V(P),x&&x(P)},D=()=>{E?E():B(!0)},j=F.createPullToRefreshHandler(async()=>{window.location.reload()}),X=()=>e.createElement("div",{style:{paddingBottom:"80px"}},e.createElement(Rr,{title:`Hello, ${a} ${r}`,subtitle:"Your pool league dashboard"},e.createElement(Ow,{columns:2},e.createElement(Ei,{title:"Pending",value:t.length,icon:e.createElement(os,null),color:"#f59e0b",onClick:()=>R("proposals")}),e.createElement(Ei,{title:"Matches",value:o.length,icon:e.createElement(Il,null),color:"#10b981",onClick:()=>R("matches")}),e.createElement(Ei,{title:"Position",value:c.length>0?`#${c.findIndex(P=>P.playerName===`${a} ${r}`)+1}`:"N/A",subtitle:"in standings",icon:e.createElement(Wi,null),color:"#e53e3e",onClick:()=>R("standings")}),e.createElement(Ei,{title:"Next Match",value:u.length>0?"Scheduled":"None",subtitle:u.length>0?u[0].date:"No upcoming matches",icon:e.createElement(Tw,null),color:"#8b5cf6",onClick:()=>R("schedule")}))),e.createElement(Rr,{title:"Quick Actions"},e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"12px"}},e.createElement(Hh,{variant:"primary",icon:e.createElement(Vn,null),onClick:()=>B(!0),fullWidth:!0},"Create Match Proposal"),e.createElement(Hh,{variant:"secondary",icon:e.createElement(Bw,null),onClick:()=>z(!0),fullWidth:!0},"View Profile"),e.createElement(Hh,{variant:"secondary",icon:e.createElement(I0,null),onClick:()=>M(!0),fullWidth:!0},"Settings"))),e.createElement(Rr,{title:"Recent Activity",collapsible:!0,defaultCollapsed:!1},e.createElement(ed,{emptyMessage:"No recent activity"},i.slice(0,3).map((P,ne)=>e.createElement(Hx,{key:ne,onTap:()=>{}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"12px"}},e.createElement("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#e53e3e",flexShrink:0}}),e.createElement("div",{style:{flex:1}},e.createElement("div",{style:{fontSize:"0.9rem",color:"#fff",fontWeight:"500",marginBottom:"2px"}},P.title||"News Update"),e.createElement("div",{style:{fontSize:"0.8rem",color:"#ccc",lineHeight:"1.3"}},P.content||P.message)))))))),W=()=>e.createElement("div",{style:{paddingBottom:"80px"}},e.createElement(Rr,{title:"Your Matches",subtitle:`${o.length} total matches`},e.createElement(ed,{emptyMessage:"No matches found",loading:g},o.map((P,ne)=>e.createElement(yd,{key:P._id||ne,title:`${P.playerName} vs ${P.opponent||"TBD"}`,subtitle:`${P.date} • ${P.location||"Location TBD"}`,onTap:()=>N&&N(P),onSwipeLeft:()=>{},onSwipeRight:()=>{}},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},e.createElement("div",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"600",background:P.status==="completed"?"#10b981":P.status==="pending"?"#f59e0b":"#6b7280",color:"#fff"}},P.status),P.location&&e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#ccc",fontSize:"0.8rem"}},e.createElement(Ii,null),P.location)),e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},e.createElement("div",{style:{color:"#ccc",fontSize:"0.8rem"}},P.time||"Time TBD")))))))),T=()=>e.createElement("div",{style:{paddingBottom:"80px"}},e.createElement(Rr,{title:"Match Proposals",subtitle:`${t.length} pending, ${n.length} sent`},e.createElement(Rr,{title:"Pending Proposals",subtitle:`${t.length} waiting for response`,collapsible:!0,defaultCollapsed:!1},e.createElement(ed,{emptyMessage:"No pending proposals",loading:m},t.map((P,ne)=>e.createElement(yd,{key:P._id||ne,title:`Proposal to ${P.recipientName}`,subtitle:`${P.date} • ${P.location||"Location TBD"}`,onTap:()=>C&&C(P),onSwipeLeft:()=>{},onSwipeRight:()=>{}},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},e.createElement("div",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"600",background:"#f59e0b",color:"#fff"}},"Pending"),P.location&&e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#ccc",fontSize:"0.8rem"}},e.createElement(Ii,null),P.location)),e.createElement("div",{style:{color:"#ccc",fontSize:"0.8rem"}},P.time||"Time TBD")))))),e.createElement(Rr,{title:"Sent Proposals",subtitle:`${n.length} proposals sent`,collapsible:!0,defaultCollapsed:!0},e.createElement(ed,{emptyMessage:"No sent proposals",loading:m},n.map((P,ne)=>e.createElement(yd,{key:P._id||ne,title:`Proposal to ${P.recipientName}`,subtitle:`${P.date} • ${P.location||"Location TBD"}`,onTap:()=>C&&C(P)},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},e.createElement("div",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"600",background:P.status==="accepted"?"#10b981":P.status==="rejected"?"#ef4444":"#6b7280",color:"#fff"}},P.status),P.location&&e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#ccc",fontSize:"0.8rem"}},e.createElement(Ii,null),P.location)),e.createElement("div",{style:{color:"#ccc",fontSize:"0.8rem"}},P.time||"Time TBD")))))))),G=()=>e.createElement("div",{style:{paddingBottom:"80px"}},e.createElement(Rr,{title:"League Standings",subtitle:"Current season rankings"},e.createElement(ed,{emptyMessage:"No standings available",loading:v},c.map((P,ne)=>e.createElement(Hx,{key:P._id||ne,onTap:()=>I&&I()},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"12px"}},e.createElement("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:ne<3?"#fbbf24":"#6b7280",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:"600",flexShrink:0}},ne+1),e.createElement("div",{style:{flex:1}},e.createElement("div",{style:{fontSize:"0.9rem",color:"#fff",fontWeight:"500",marginBottom:"2px"}},P.playerName),e.createElement("div",{style:{fontSize:"0.8rem",color:"#ccc"}},P.wins,"W - ",P.losses,"L • ",P.points," pts")),e.createElement("div",{style:{fontSize:"0.8rem",color:"#888",fontWeight:"600"}},"#",ne+1))))))),te=()=>e.createElement("div",{style:{paddingBottom:"80px"}},e.createElement(Rr,{title:"League Chat",subtitle:"Communicate with other players"},e.createElement("div",{style:{textAlign:"center",padding:"40px 20px"}},e.createElement("div",{style:{fontSize:"3rem",color:"#888",marginBottom:"16px"}},e.createElement(Pw,null)),e.createElement("div",{style:{fontSize:"1.1rem",color:"#fff",marginBottom:"8px"}},"Chat Coming Soon"),e.createElement("div",{style:{fontSize:"0.9rem",color:"#ccc"}},"Direct messaging and league chat will be available soon"))));return e.createElement("div",{className:`mobile-dashboard ${O}`,style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a1a 0%, #2d1b69 100%)",overflowX:"hidden",...U},...j,...Z},e.createElement("div",{style:{padding:"16px"}},H==="overview"&&X(),H==="matches"&&W(),H==="proposals"&&T(),H==="standings"&&G(),H==="chat"&&te()),e.createElement(zw,{activeTab:H,onTabChange:R,onQuickAction:D,pendingCount:t.length,sentCount:n.length,matchesCount:o.length}))}const Mp=async(a,r)=>{const t=await fetch(`${pe}/api/matches/status/${encodeURIComponent(a)}/${r}`);if(!t.ok)throw new Error("Failed to fetch matches by status");return t.json()},hz=async(a,r,t,n="")=>{const o=await fetch(`${pe}/api/matches/${a}/complete`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({winner:r,score:t,notes:n})});if(!o.ok){const i=await o.json();throw new Error(i.error||"Failed to complete match")}return o.json()},yz=async(a,r="")=>{const t=await fetch(`${pe}/api/matches/${a}/cancel`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:r})});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to cancel match")}return t.json()},bz=async a=>{const r=await fetch(`${pe}/api/matches/stats/${encodeURIComponent(a)}`);if(!r.ok)throw new Error("Failed to fetch match statistics");return r.json()},vz=(a,r,t)=>{const[n,o]=b.useState([]),[i,c]=b.useState([]),[u,m]=b.useState(!0),[g,f]=b.useState(null),[h,v]=b.useState(null),S=b.useRef(null),x=b.useRef(null),E=b.useCallback(async(I=!1)=>{x.current&&x.current.abort(),x.current=new AbortController;try{I||m(!0);const[A,_]=await Promise.all([Mp(r,"scheduled"),Mp(r,"completed")]),k=A.filter(M=>M.player1Id===a||M.player2Id===a).map(M=>{const O=M.player1Id===a,U=O?M.player1Id:M.player2Id,Z=O?M.player2Id:M.player1Id,H=new Date(M.scheduledDate),V=H.toISOString().split("T")[0],F=H.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return{...M,player:U,opponent:Z,senderName:M.player1Id,receiverName:M.player2Id,date:V,time:F,gameType:M.gameType||"8 ball",raceLength:M.raceLength||5,type:"scheduled"}}),B=_.filter(M=>M.player1Id===a||M.player2Id===a).map(M=>{const O=M.player1Id===a,U=O?M.player1Id:M.player2Id,Z=O?M.player2Id:M.player1Id,H=new Date(M.scheduledDate),V=H.toISOString().split("T")[0],F=H.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return{...M,player:U,opponent:Z,senderName:M.player1Id,receiverName:M.player2Id,date:V,time:F,gameType:M.gameType||"8 ball",raceLength:M.raceLength||5,type:"completed"}});let z=[];try{const M=await ur.getPendingProposals(a,r),O=await ur.getSentProposals(a,r);z=[...M,...O].filter(V=>V.status==="confirmed"&&(V.senderName===a||V.receiverName===a));const Z=z.map(V=>{const F=V.senderName===a,R=F?V.senderName:V.receiverName,D=F?V.receiverName:V.senderName;return{_id:V._id,type:"proposal",status:"confirmed",player1Id:V.senderName,player2Id:V.receiverName,player:R,opponent:D,senderName:V.senderName,receiverName:V.receiverName,scheduledDate:V.date?new Date(V.date):new Date,date:V.date,time:V.time,location:V.location,message:V.message,gameType:V.gameType,raceLength:V.raceLength,completed:V.completed||!1,winner:V.winner||null}}),H=[...k,...Z];H.sort((V,F)=>new Date(V.scheduledDate)-new Date(F.scheduledDate)),B.sort((V,F)=>new Date(F.completedDate)-new Date(V.completedDate)),x.current.signal.aborted||(o(H),c(B),f(null),v(new Date))}catch(M){console.warn("Error fetching confirmed proposals:",M),x.current.signal.aborted||(k.sort((O,U)=>new Date(O.scheduledDate)-new Date(U.scheduledDate)),B.sort((O,U)=>new Date(U.completedDate)-new Date(O.completedDate)),o(k),c(B),v(new Date))}}catch(A){if(A.name==="AbortError")return;console.error("Error fetching matches:",A),f(A.message),I||(o([]),c([]))}finally{x.current.signal.aborted||m(!1)}},[a,r,t]);b.useEffect(()=>{if(a&&r)return E(),S.current=setInterval(()=>{E(!0)},3e4),()=>{S.current&&clearInterval(S.current),x.current&&x.current.abort()}},[a,r,t,E]);const N=b.useCallback(()=>{E()},[E]),C=b.useCallback((I,A="add")=>{A==="add"?o(_=>[I,..._]):A==="update"?(o(_=>_.map(k=>k._id===I._id?I:k)),c(_=>_.map(k=>k._id===I._id?I:k))):A==="remove"&&(o(_=>_.filter(k=>k._id!==I._id)),c(_=>_.filter(k=>k._id!==I._id))),v(new Date)},[]);return{matches:n,completedMatches:i,scheduledConfirmedMatches:n,loading:u,error:g,lastUpdate:h,refetch:N,updateMatchLocally:C,markMatchCompleted:I=>{o(A=>A.filter(_=>_._id!==I._id)),c(A=>{const _={...I,completed:!0};return[...A,_]}),v(new Date)},updateCompletedMatch:I=>{c(A=>A.map(_=>_._id===I._id?I:_)),v(new Date)}}},xz=a=>{const[r,t]=b.useState(null),[n,o]=b.useState(null),[i,c]=b.useState(!0),[u,m]=b.useState(null),[g,f]=b.useState(null),h=b.useRef(null),v=b.useRef(null),S=b.useCallback(async(E=!1)=>{if(a){v.current&&v.current.abort(),v.current=new AbortController;try{E||c(!0),console.log("useSeasonData - Fetching season data for division:",a);const[N,C]=await Promise.all([Zo.getCurrentSeason(a),Zo.getCurrentPhaseAndWeek(a)]);console.log("useSeasonData - Season result:",N),console.log("useSeasonData - Phase result:",C),v.current.signal.aborted||(t((N==null?void 0:N.season)||null),o(C),m(null),f(new Date))}catch(N){if(N.name==="AbortError")return;console.error("Error fetching season data:",N),m(N.message),E||(t(null),o(null))}finally{v.current.signal.aborted||c(!1)}}},[a]);b.useEffect(()=>{if(a)return S(),h.current=setInterval(()=>{S(!0)},5*60*1e3),()=>{h.current&&clearInterval(h.current),v.current&&v.current.abort()}},[a,S]);const x=b.useCallback(()=>{S()},[S]);return{seasonData:r,currentPhaseInfo:n,loading:i,error:u,lastUpdate:g,refetch:x}},Ez=a=>{const[r,t]=b.useState([]),[n,o]=b.useState(!0),[i,c]=b.useState(null),[u,m]=b.useState(null),g=b.useRef(null),f=b.useRef(null),h=b.useCallback(async(S=!1)=>{if(a){f.current&&f.current.abort(),f.current=new AbortController;try{S||o(!0);const x=a.replace(/[^A-Za-z0-9]/g,"_"),E=`${pe}/static/standings_${x}.json`,N=await fetch(E,{signal:f.current.signal});if(!N.ok){console.warn(`Failed to fetch standings: ${N.status} - ${N.statusText}`),S||c(`Failed to fetch standings: ${N.status}`);return}const C=await N.json();if(!Array.isArray(C)){console.error("Standings data is not an array:",C),S||c("Invalid standings data format");return}const I=C.filter(A=>{if(!A||typeof A!="object")return console.warn("Invalid standings entry:",A),!1;if(!A.name||!A.rank)return console.warn("Standings entry missing name or rank:",A),!1;const _=parseInt(A.rank);return isNaN(_)||_<=0?(console.warn("Invalid rank in standings entry:",A),!1):!0});f.current.signal.aborted||(t(I),c(null),m(new Date))}catch(x){if(x.name==="AbortError")return;console.error("Failed to load standings:",x),c(x.message),S||t([])}finally{f.current.signal.aborted||o(!1)}}},[a]);b.useEffect(()=>{if(a)return h(),g.current=setInterval(()=>{h(!0)},10*60*1e3),()=>{g.current&&clearInterval(g.current),f.current&&f.current.abort()}},[a,h]);const v=b.useCallback(()=>{h()},[h]);return{standings:r,loading:n,error:i,lastUpdate:u,refetch:v}},Pm={async getAllNotes(){return tn.get("/api/notes")},async createNote(a){return tn.post("/api/notes",{text:a})},async deleteNote(a){return tn.delete(`/api/notes/${a}`)}},wz=()=>{const[a,r]=b.useState([]),[t,n]=b.useState(!0),[o,i]=b.useState(null),[c,u]=b.useState(null),m=b.useRef(null),g=b.useRef(null),f=b.useCallback(async(S=!1)=>{g.current&&g.current.abort(),g.current=new AbortController;try{S||n(!0);const x=await Pm.getAllNotes();g.current.signal.aborted||(r(x),i(null),u(new Date))}catch(x){if(x.name==="AbortError")return;console.error("Error fetching notes:",x),i(x.message),S||r([])}finally{g.current.signal.aborted||n(!1)}},[]);b.useEffect(()=>(f(),m.current=setInterval(()=>{f(!0)},2*60*1e3),()=>{m.current&&clearInterval(m.current),g.current&&g.current.abort()}),[f]);const h=b.useCallback(()=>{f()},[f]),v=b.useCallback((S,x="add")=>{x==="add"?r(E=>[S,...E]):x==="update"?r(E=>E.map(N=>N._id===S._id?S:N)):x==="remove"&&r(E=>E.filter(N=>N._id!==S._id)),u(new Date)},[]);return{notes:a,loading:t,error:o,lastUpdate:c,refetch:h,updateNoteLocally:v}},Sz=a=>{const[r,t]=b.useState([]),[n,o]=b.useState(!0),[i,c]=b.useState(null),[u,m]=b.useState(null),g=b.useRef(null),f=b.useRef(null),h=b.useCallback(async(S=!1)=>{if(!a){t([]);return}f.current&&f.current.abort(),f.current=new AbortController;try{S||o(!0);let x;a==="FRBCAPL TEST"?x="schedule_FRBCAPL_TEST.json":a==="Singles Test"?x="schedule_Singles_Test.json":x=`schedule_${a.replace(/[^A-Za-z0-9]/g,"_")}.json`;const E=`${pe}/static/${x}`,N=await fetch(E,{signal:f.current.signal});if(!N.ok)throw new Error("Schedule not found");const C=await N.json();f.current.signal.aborted||(console.log("Schedule loaded for",a,":",C.length,"matches"),t(C),c(null),m(new Date))}catch(x){if(x.name==="AbortError")return;console.error("Failed to load schedule for",a,":",x),c(x.message),S||t([])}finally{f.current.signal.aborted||o(!1)}},[a]);b.useEffect(()=>{if(a)return h(),g.current=setInterval(()=>{h(!0)},15*60*1e3),()=>{g.current&&clearInterval(g.current),f.current&&f.current.abort()}},[a,h]);const v=b.useCallback(()=>{h()},[h]);return{scheduledMatches:r,loading:n,error:i,lastUpdate:u,refetch:v}};class Cz{async checkAndSendDeadlineReminder(r,t,n){try{const o=await Zo.getCurrentSeason(n);if(!(o!=null&&o.season)){console.log("No current season found for division:",n);return}const i=o.season,c=new Date,u=new Date(i.phase1End);if(c>u){console.log("Phase 1 deadline has passed, no reminder needed");return}const m=Math.ceil((u-c)/(1e3*60*60*24));if(!this.shouldSendReminder(m))return;const f=await this.getUserMatchStatus(t,n);await WI({to_email:r,to_name:t,division:n,daysUntilDeadline:m,completedMatches:f.completedCount,totalRequiredMatches:f.totalRequired,deadlineDate:Hn(u,"EEEE, MMMM d, yyyy"),remainingMatches:f.remainingCount}),console.log(`Deadline reminder sent to ${t} for ${n}`)}catch(o){console.error("Error sending deadline reminder:",o)}}shouldSendReminder(r){return[7,3,1,0].includes(r)}async getUserMatchStatus(r,t){try{return{completedCount:1,totalRequired:6,remainingCount:5}}catch(n){return console.error("Error getting user match status:",n),{completedCount:0,totalRequired:6,remainingCount:6}}}async sendBulkDeadlineReminders(r){try{console.log(`Sending bulk deadline reminders for ${r}`)}catch(t){console.error("Error sending bulk deadline reminders:",t)}}}const _z=new Cz,kz={"FRBCAPL TEST":"https://lms.fargorate.com/PublicReport/LeagueReports?leagueId=e05896bb-b0f4-4a80-bf99-b2ca012ceaaa&divisionId=b345a437-3415-4765-b19a-b2f7014f2cfa","Singles Test":"https://lms.fargorate.com/PublicReport/LeagueReports?leagueId=e05896bb-b0f4-4a80-bf99-b2ca012ceaaa&divisionId=9058a0cc-3231-4118-bd91-b305006fe578"};Q.shape({name:Q.string.isRequired,description:Q.string,playerCount:Q.number,currentPhase:Q.string,totalMatches:Q.number,completedMatches:Q.number,startDate:Q.string,endDate:Q.string,status:Q.oneOf(["active","completed","pending","inactive"]),logo:Q.string,primaryColor:Q.string,secondaryColor:Q.string}).isRequired,Q.func,Q.bool,Q.bool,Q.bool,Q.node,Q.string,Q.object;Q.shape({name:Q.string.isRequired,email:Q.string,phone:Q.string,rank:Q.number,wins:Q.number,losses:Q.number,totalMatches:Q.number,winPercentage:Q.number,currentStreak:Q.number,bestStreak:Q.number,lastPlayed:Q.string,availability:Q.string,status:Q.oneOf(["active","inactive","suspended","pending"]),avatar:Q.string,primaryColor:Q.string,secondaryColor:Q.string,isOnline:Q.bool}).isRequired,Q.func,Q.bool,Q.bool,Q.bool,Q.node,Q.bool,Q.bool,Q.string,Q.object;Q.shape({id:Q.string.isRequired,player1:Q.string.isRequired,player2:Q.string.isRequired,player1Score:Q.number,player2Score:Q.number,status:Q.oneOf(["scheduled","in_progress","completed","cancelled"]),date:Q.string,time:Q.string,location:Q.string,division:Q.string,phase:Q.string,winner:Q.string,notes:Q.string,primaryColor:Q.string,secondaryColor:Q.string}).isRequired,Q.func,Q.bool,Q.bool,Q.node,Q.bool,Q.bool,Q.string,Q.object;const Fw=({playerName:a,playerLastName:r,isMobile:t,userPin:n,playerEmail:o,proposalsLoading:i,matchesLoading:c,notesLoading:u,seasonLoading:m,standingsLoading:g,scheduleLoading:f,styles:h})=>{const v=i||c||u||m||g||f;return e.createElement(e.Fragment,null,e.createElement("div",{style:{textAlign:"center",marginBottom:t?"8px":"16px"}},e.createElement("h1",{className:h.dashboardTitle,style:{fontSize:t?"1.6rem":"2rem",textAlign:"center",margin:0,transition:"all 0.2s ease"}},"Hello,",e.createElement("span",{className:h.dashboardUserName,style:{fontSize:t?"1.4rem":"1.8rem"}},a," ",r)),e.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",marginTop:t?"4px":"8px",fontSize:t?"0.7rem":"0.8rem",color:"#888"}},e.createElement("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:v?"#f59e0b":"#10b981",animation:v?"pulse 2s infinite":"none"}}),e.createElement("span",null,v?"Updating...":"Live"))),e.createElement("div",{className:h.announcement,style:{fontSize:t?"0.75rem":"1rem",marginBottom:t?"8px":"16px"}},e.createElement("p",null,"This is the BETA version. "),"Matches that are created, scheduled, and confirmed will NOT be played.",e.createElement("br",null),"This is for testing purposes only."),Gs.getCurrentAdmin()&&o!=="guest@frontrangepool.com"&&e.createElement("div",{style:{marginBottom:t?12:16,textAlign:"center"}},e.createElement("button",{onClick:()=>window.location.hash="#/tenball-tutorial",style:{background:"linear-gradient(45deg, #4CAF50, #8BC34A)",border:"none",color:"white",padding:t?"10px 16px":"12px 20px",borderRadius:"25px",cursor:"pointer",fontSize:t?"0.9rem":"1rem",fontWeight:"bold",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(76, 175, 80, 0.3)"}},e.createElement("img",{src:Yi,alt:"10-Ball",style:{width:"20px",height:"20px",marginRight:"8px",display:"inline-block",verticalAlign:"text-bottom"}}),"Play 10-Ball Tutorial & Learn Official CSI Rules")),!t&&e.createElement("br",null))};Fw.propTypes={playerName:Q.string.isRequired,playerLastName:Q.string.isRequired,isMobile:Q.bool.isRequired,userPin:Q.string,playerEmail:Q.string,proposalsLoading:Q.bool,matchesLoading:Q.bool,notesLoading:Q.bool,seasonLoading:Q.bool,standingsLoading:Q.bool,scheduleLoading:Q.bool,onProfileClick:Q.func.isRequired,styles:Q.object.isRequired};const Uw=({divisions:a,selectedDivision:r,onDivisionChange:t,isMobile:n})=>a.length===0?null:e.createElement("div",{style:{marginBottom:n?8:16,display:"flex",flexDirection:"column",alignItems:n?"flex-start":"center",gap:n?"8px":"12px"}},e.createElement("div",{style:{display:"flex",flexDirection:n?"column":"row",alignItems:n?"flex-start":"center",gap:n?"4px":"12px",width:"100%"}},e.createElement("label",{style:{fontSize:n?"0.9rem":"1rem"}},"Division: ",a.length>1?e.createElement("select",{value:r,onChange:t,style:{fontSize:n?"0.9em":"1em",padding:n?6:4,borderRadius:4}},a.map(o=>e.createElement("option",{key:o,value:o},o))):e.createElement("span",{style:{fontWeight:600}},a[0]))));Uw.propTypes={divisions:Q.arrayOf(Q.string).isRequired,selectedDivision:Q.string.isRequired,onDivisionChange:Q.func.isRequired,isMobile:Q.bool.isRequired};const Ww=({isMobile:a,styles:r,effectivePhase:t,seasonData:n,completedMatches:o,totalRequiredMatches:i,playerName:c,playerLastName:u,selectedDivision:m,pendingCount:g,sentCount:f,filteredUpcomingMatches:h,currentUser:v,allPlayers:S,showPhase1Rules:x,setShowPhase1Rules:E,setShowPhase1Overview:N,setPlayerStats:C,setTimeLeft:I,setDeadlineStatus:A,setPhase1EndDate:_,onOpenOpponentsModal:k,onOpenCompletedMatchesModal:B,onOpenStandingsModal:z,onOpenDefenseChallengersModal:M,onOpenAllMatchesModal:O,onOpenProposalListModal:U,onOpenSentProposalListModal:Z,onOpenPlayerSearch:H,onMatchClick:V,onSmartMatchClick:F,onOpenMessageCenter:R,onOpenCalendar:D,simulationRef:j,opponentsModalPortal:X})=>e.createElement("section",{className:`${r.dashboardSection} ${r.dashboardSectionBox} ${r.matchesSection}`,style:{position:"relative",overflow:"visible",backgroundColor:"rgba(0, 0, 0, .5)",minHeight:a?"650px":"570px",marginBottom:a?"16px":"36px",paddingBottom:"20px"}},e.createElement("div",{style:{display:"flex",justifyContent:"center",width:"100%"}},e.createElement("div",{className:r.poolTableContainer,style:{marginBottom:a?"12px":"24px",position:"relative",width:"100%",maxWidth:a?"98%":"600px",height:a?"400px":"auto",display:"flex",justifyContent:"center",alignItems:"center"}},t==="scheduled"&&n&&e.createElement("div",{style:{position:"absolute",top:a?"50px":"35px",left:"0",right:"0",margin:"0 auto",zIndex:100,width:a?"95%":"90%",maxWidth:a?"500px":"1200px",height:a?"150px":"200px",pointerEvents:"auto"}},e.createElement(F7,null,e.createElement(kw,{currentPhase:t,seasonData:n,completedMatches:o,totalRequiredMatches:i,playerName:c,playerLastName:u,selectedDivision:m,onOpenOpponentsModal:k,onOpenCompletedMatchesModal:B,onOpenStandingsModal:z,onOpenAllMatchesModal:O,pendingCount:g,sentCount:f,onOpenProposalListModal:U,onOpenSentProposalListModal:Z,upcomingMatches:h,onMatchClick:V,isMobile:a,onOpenMessageCenter:R,currentUser:v,allPlayers:S,onSmartMatchClick:F,showPhase1Rules:x,setShowPhase1Rules:E,showPhase1Overview:!1,setShowPhase1Overview:N,setPlayerStats:C,setTimeLeft:I,setDeadlineStatus:A,setPhase1EndDate:_,onOpenCalendar:D}))),t==="challenge"&&e.createElement("div",{style:{position:"absolute",top:a?"50px":"35px",left:"0",right:"0",margin:"0 auto",zIndex:10,width:a?"95%":"90%",maxWidth:a?"500px":"1200px",height:a?"150px":"200px"}},e.createElement(L7,{playerName:c,playerLastName:u,selectedDivision:m,phase:t,isMobile:a,onOpenOpponentsModal:k,onOpenCompletedMatchesModal:B,onOpenStandingsModal:z,onOpenDefenseChallengersModal:M,onOpenAllMatchesModal:O,pendingCount:g,sentCount:f,onOpenProposalListModal:U,onOpenSentProposalListModal:Z,onOpenPlayerSearch:H,upcomingMatches:h,onMatchClick:V,seasonData:n,completedMatches:o,standings:[]})),a?e.createElement("div",{className:r.simulationContainer,ref:j,style:{width:"100% !important",height:"400px !important",position:"relative",minWidth:"0 !important",maxWidth:"100% !important",minHeight:"400px !important",maxHeight:"400px !important",pointerEvents:t==="scheduled"?"none":"auto"}},e.createElement(Sd,{isRotated:!0})):e.createElement(ny,{aspectWidth:600,aspectHeight:300},e.createElement("div",{className:r.simulationContainer,ref:j,style:{width:"100%",height:"100%",position:"relative",pointerEvents:t==="scheduled"?"none":"auto"}},e.createElement(Sd,null))),X)));Ww.propTypes={isMobile:Q.bool.isRequired,styles:Q.object.isRequired,effectivePhase:Q.string.isRequired,seasonData:Q.object,completedMatches:Q.array,totalRequiredMatches:Q.number,playerName:Q.string.isRequired,playerLastName:Q.string.isRequired,selectedDivision:Q.string.isRequired,pendingCount:Q.number,sentCount:Q.number,filteredUpcomingMatches:Q.array,currentUser:Q.object,allPlayers:Q.array,showPhase1Rules:Q.bool,setShowPhase1Rules:Q.func,setShowPhase1Overview:Q.func,setPlayerStats:Q.func,setTimeLeft:Q.func,setDeadlineStatus:Q.func,setPhase1EndDate:Q.func,onOpenOpponentsModal:Q.func.isRequired,onOpenCompletedMatchesModal:Q.func.isRequired,onOpenStandingsModal:Q.func.isRequired,onOpenDefenseChallengersModal:Q.func.isRequired,onOpenAllMatchesModal:Q.func.isRequired,onOpenProposalListModal:Q.func.isRequired,onOpenSentProposalListModal:Q.func.isRequired,onOpenPlayerSearch:Q.func.isRequired,onMatchClick:Q.func.isRequired,onSmartMatchClick:Q.func.isRequired,onOpenMessageCenter:Q.func.isRequired,onOpenCalendar:Q.func.isRequired,simulationRef:Q.object,opponentsModalPortal:Q.node};const jw=({notes:a,notesLoading:r,noteError:t,userPin:n,onDeleteNote:o,onClearNotes:i,styles:c})=>e.createElement("section",{className:`${c.dashboardSection} ${c.dashboardSectionBox} ${c.newsUpdatesSection}`},e.createElement("h2",{className:c.dashboardSectionTitle},"News & Updates"),r?e.createElement(VL,{lines:3,height:"16px"}):e.createElement("ul",{className:c.dashboardList},a.length===0?e.createElement("li",{className:c.dashboardNoteItem},"No news yet."):a.map((u,m)=>e.createElement("li",{key:u._id||m,className:c.dashboardNoteItem},e.createElement("span",{style:{flex:1}},u.text),Gs.getCurrentAdmin()&&e.createElement("button",{onClick:()=>o(u._id),style:{background:"#e53935",color:"#fff",border:"none",borderRadius:4,padding:"2px 8px",cursor:"pointer",fontSize:"0.95em"},"aria-label":"Delete note",title:"Delete note",type:"button"},"Delete")))),Gs.getCurrentAdmin()&&a.length>0&&e.createElement("button",{style:{marginTop:10,background:"#444",color:"#fff",border:"none",borderRadius:5,padding:"4px 14px",cursor:"pointer",fontSize:"0.98em"},onClick:i,type:"button"},"Clear All Notes"),t&&e.createElement("div",{style:{marginTop:10,padding:"10px",background:"#ffebee",color:"#c62828",border:"1px solid #ffcdd2",borderRadius:"4px",fontSize:"0.9em"}},"Error: ",t));jw.propTypes={notes:Q.array.isRequired,notesLoading:Q.bool.isRequired,noteError:Q.string,userPin:Q.string,onDeleteNote:Q.func.isRequired,onClearNotes:Q.func.isRequired,styles:Q.object.isRequired};const Hw=({userPin:a,loadingPendingRegistrations:r,phaseOverride:t,selectedDivision:n,BACKEND_URL:o,styles:i,onShowRegistrationModal:c,onLoadPendingRegistrations:u,onSetPendingRegistrations:m,onShowPendingRegistrationsModal:g,onCreateTestRegistration:f,onShowNoteModal:h,onGoToAdmin:v,onGoToPlatformAdmin:S,isSuperAdmin:x,onActivatePhase2:E,onSetPhaseOverride:N,onRefreshSeasonData:C,onShowPendingClaimsModal:I})=>Gs.getCurrentAdmin()?e.createElement(e.Fragment,null,e.createElement("button",{className:i.dashboardAdminBtn,onClick:c,type:"button",style:{background:"#4CAF50"}},"Register Player"),e.createElement("button",{className:i.dashboardAdminBtn,onClick:async()=>{u(!0);try{const _=await fetch(`${o}/api/users/pending-registrations`);if(_.ok){const k=await _.json();m(k),g(!0)}else alert("Failed to load pending registrations")}catch{alert("Error loading pending registrations")}finally{u(!1)}},type:"button",style:{background:"#FF9800"},disabled:r},r?"Loading...":"Pending Registrations"),e.createElement("button",{className:i.dashboardAdminBtn,onClick:f,type:"button",style:{background:"#9C27B0"}},"Create Test Registration"),e.createElement("button",{className:i.dashboardAdminBtn,onClick:h,type:"button"},"Add Note"),e.createElement("button",{className:i.dashboardAdminBtn,onClick:I,type:"button",style:{background:"#2196F3"}},"🔑 Pending Claims"),e.createElement("button",{className:i.dashboardAdminBtn,onClick:v,type:"button"},"Admin"),x()&&S&&e.createElement("button",{className:i.dashboardAdminBtn,onClick:S,type:"button",style:{background:"#8B4513"}},"Platform Admin"),e.createElement("button",{className:i.dashboardAdminBtn,onClick:async()=>{if(t==="challenge")N("scheduled");else try{const k=await(await fetch(`${o}/api/seasons/activate-phase2/${encodeURIComponent(n)}`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();k.success?(N("challenge"),alert("✅ Phase 2 activated successfully! The system will now allow Phase 2 challenges."),n&&C()):alert("Failed to activate Phase 2: "+k.error)}catch(_){alert("Error activating Phase 2: "+_.message)}},type:"button"},t==="challenge"?"Switch to Phase 1 (Scheduled)":"Activate Phase 2 (Challenge)"),t&&e.createElement("button",{className:i.dashboardAdminBtn,onClick:()=>N(null),type:"button",style:{background:"#888"}},"Clear Phase Override")):null;Hw.propTypes={userPin:Q.string,loadingPendingRegistrations:Q.bool,phaseOverride:Q.string,selectedDivision:Q.string,BACKEND_URL:Q.string.isRequired,styles:Q.object.isRequired,onShowRegistrationModal:Q.func.isRequired,onLoadPendingRegistrations:Q.func.isRequired,onSetPendingRegistrations:Q.func.isRequired,onShowPendingRegistrationsModal:Q.func.isRequired,onCreateTestRegistration:Q.func.isRequired,onShowNoteModal:Q.func.isRequired,onGoToAdmin:Q.func.isRequired,onGoToPlatformAdmin:Q.func,isSuperAdmin:Q.func.isRequired,onActivatePhase2:Q.func.isRequired,onSetPhaseOverride:Q.func.isRequired,onRefreshSeasonData:Q.func.isRequired,onShowPendingClaimsModal:Q.func.isRequired};const Nz=({onClose:a})=>{const[r,t]=b.useState([]),[n,o]=b.useState(!0),[i,c]=b.useState(""),[u,m]=b.useState(null),[g,f]=b.useState(""),[h,v]=b.useState(!1);b.useEffect(()=>{S()},[]);const S=async()=>{try{const C=await fetch(`${pe}/api/auth/pending-claims`),I=await C.json();C.ok&&I.success?t(I.claims):c(I.message||"Error fetching pending claims")}catch(C){console.error("Fetch claims error:",C),c("Error fetching pending claims")}finally{o(!1)}},x=async C=>{if(!g.trim()){c("Please enter a PIN for the user");return}if(g.length<4){c("PIN must be at least 4 characters");return}v(!0),c("");try{const I=await fetch(`${pe}/api/auth/approve-account-claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({claimId:C,pin:g})}),A=await I.json();I.ok&&A.success?(t(_=>_.filter(k=>k.id!==C)),m(null),f(""),alert("Account claim approved successfully!")):c(A.message||"Error approving claim")}catch(I){console.error("Approve error:",I),c("Error approving claim")}finally{v(!1)}},E=async C=>{if(confirm("Are you sure you want to reject this account claim? This action cannot be undone.")){v(!0),c("");try{const I=await fetch(`${pe}/api/auth/reject-account-claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({claimId:C})}),A=await I.json();I.ok&&A.success?(t(_=>_.filter(k=>k.id!==C)),m(null),alert("Account claim rejected successfully!")):c(A.message||"Error rejecting claim")}catch(I){console.error("Reject error:",I),c("Error rejecting claim")}finally{v(!1)}}},N=C=>new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return n?e.createElement("div",{className:"pending-claims-overlay"},e.createElement("div",{className:"pending-claims-modal"},e.createElement("div",{className:"loading"},"Loading pending claims..."))):e.createElement("div",{className:"pending-claims-overlay"},e.createElement("div",{className:"pending-claims-modal"},e.createElement("div",{className:"pending-claims-header"},e.createElement("h2",null,"Pending Account Claims"),e.createElement("button",{className:"close-btn",onClick:a},"×")),e.createElement("div",{className:"pending-claims-content"},i&&e.createElement("div",{className:"error-message"},i),r.length===0?e.createElement("div",{className:"no-claims"},e.createElement("p",null,"No pending account claims")):e.createElement("div",{className:"claims-list"},r.map(C=>e.createElement("div",{key:C.id,className:"claim-item"},e.createElement("div",{className:"claim-header"},e.createElement("h3",null,C.firstName," ",C.lastName),e.createElement("span",{className:"claim-date"},N(C.submittedAt))),e.createElement("div",{className:"claim-details"},e.createElement("div",{className:"contact-info"},e.createElement("p",null,e.createElement("strong",null,"Email:")," ",C.email),C.phone&&e.createElement("p",null,e.createElement("strong",null,"Phone:")," ",C.phone)),C.ladderInfo&&e.createElement("div",{className:"ladder-info"},e.createElement("p",null,e.createElement("strong",null,"Ladder Position:")," #",C.ladderInfo.position),e.createElement("p",null,e.createElement("strong",null,"Fargo Rate:")," ",C.ladderInfo.fargoRate),e.createElement("p",null,e.createElement("strong",null,"Record:")," ",C.ladderInfo.wins,"W - ",C.ladderInfo.losses,"L")),C.claimMessage&&e.createElement("div",{className:"claim-message"},e.createElement("p",null,e.createElement("strong",null,"Message:")),e.createElement("p",null,C.claimMessage))),e.createElement("div",{className:"claim-actions"},e.createElement("button",{className:"approve-btn",onClick:()=>m(C),disabled:h},"Approve"),e.createElement("button",{className:"reject-btn",onClick:()=>E(C.id),disabled:h},"Reject")))))),u&&e.createElement("div",{className:"approval-modal-overlay"},e.createElement("div",{className:"approval-modal"},e.createElement("div",{className:"approval-modal-header"},e.createElement("h3",null,"Approve Account for ",u.firstName," ",u.lastName),e.createElement("button",{className:"close-btn",onClick:()=>m(null)},"×")),e.createElement("div",{className:"approval-modal-content"},e.createElement("p",null,"Set a PIN for this user:"),e.createElement("div",{className:"form-group"},e.createElement("input",{type:"text",value:g,onChange:C=>f(C.target.value),placeholder:"Enter 4-digit PIN",maxLength:"4",pattern:"[0-9]*"})),e.createElement("div",{className:"approval-modal-actions"},e.createElement("button",{className:"cancel-btn",onClick:()=>{m(null),f("")}},"Cancel"),e.createElement("button",{className:"confirm-approve-btn",onClick:()=>x(u.id),disabled:h||g.length<4},h?"Approving...":"Approve Account")))))))},$w=({showPlayerSearch:a,showAdminPlayerSearch:r,showPlayerAvailability:t,showProposalModal:n,selectedOpponent:o,proposalData:i,fullName:c,senderEmail:u,selectedDivision:m,effectivePhase:g,playerName:f,playerLastName:h,onClosePlayerSearch:v,onCloseAdminPlayerSearch:S,onClosePlayerAvailability:x,onCloseProposalModal:E,onProposeMatch:N,onProposalComplete:C,onUpdateProposalLocally:I,onRefetchMatches:A,onRefetchProposals:_})=>e.createElement(e.Fragment,null,a&&e.createElement(k0,{onClose:v,excludeName:c,senderName:c,senderEmail:u,selectedDivision:m,phase:g,onProposalComplete:v}),r&&e.createElement(k0,{onClose:S,excludeName:null,senderName:c,senderEmail:u,phase:g,onProposalComplete:S}),t&&o&&e.createElement(Gp,{onClose:x,player:o,onProposeMatch:N,selectedDivision:m,phase:g}),n&&i&&e.createElement(ef,{player:i.player,day:i.day,slot:i.slot,selectedDivision:i.selectedDivision,phase:i.phase||g,onClose:E,senderName:`${f} ${h}`,senderEmail:u,onProposalComplete:k=>{E(),k&&I(k,"add"),A(),_()}}));$w.propTypes={showPlayerSearch:Q.bool,showAdminPlayerSearch:Q.bool,showPlayerAvailability:Q.bool,showProposalModal:Q.bool,selectedOpponent:Q.object,proposalData:Q.object,fullName:Q.string.isRequired,senderEmail:Q.string.isRequired,selectedDivision:Q.string.isRequired,effectivePhase:Q.string.isRequired,playerName:Q.string.isRequired,playerLastName:Q.string.isRequired,onClosePlayerSearch:Q.func.isRequired,onCloseAdminPlayerSearch:Q.func.isRequired,onClosePlayerAvailability:Q.func.isRequired,onCloseProposalModal:Q.func.isRequired,onProposeMatch:Q.func.isRequired,onProposalComplete:Q.func.isRequired,onUpdateProposalLocally:Q.func.isRequired,onRefetchMatches:Q.func.isRequired,onRefetchProposals:Q.func.isRequired};const Yw=({showStandings:a,showDefenseChallengers:r,modalOpen:t,showNoteModal:n,showProposalListModal:o,showSentProposalListModal:i,showCounterModal:c,showProposalDetailsModal:u,selectedMatch:m,selectedProposal:g,counterProposal:f,newNote:h,noteError:v,proposalNote:S,pendingProposals:x,sentProposals:E,players:N,STANDINGS_URLS:C,onCloseStandings:I,onCloseDefenseChallengers:A,onCloseModal:_,onCloseNoteModal:k,onCloseProposalListModal:B,onCloseSentProposalListModal:z,onCloseCounterModal:M,onCloseProposalDetailsModal:O,onAddNote:U,onUpdateNewNote:Z,onSelectProposal:H,onSelectSentProposal:V,onConfirmProposal:F,onCounterPropose:R,onSubmitCounterProposal:D,onEditProposal:j,onDeleteProposal:X,onUpdateProposalLocally:W,onRefetchMatches:T,onRefetchProposals:G,selectedDivision:te,effectivePhase:P,userPin:ne,playerName:q,playerLastName:oe,senderEmail:he,styles:be,proposalService:nt})=>e.createElement(e.Fragment,null,e.createElement(U6,{open:a,onClose:I,standingsUrl:C[te]}),e.createElement(W6,{open:r,onClose:A,playerName:q,playerLastName:oe,selectedDivision:te}),e.createElement(sM,{open:t,onClose:_,match:m,onCompleted:ye=>W(ye,"remove"),userPin:ne,onMatchUpdated:ye=>W(ye,"update"),senderName:`${q} ${oe}`,senderEmail:he}),n&&e.createElement("div",{className:be.modalOverlay,style:{zIndex:99999}},e.createElement("div",{className:be.modalContent,style:{maxWidth:400,margin:"auto"}},e.createElement("h2",null,"Add News/Note"),e.createElement("textarea",{value:h,onChange:Z,rows:4,style:{width:"100%",marginBottom:12,borderRadius:6,padding:8},placeholder:"Enter your note..."}),v&&e.createElement("div",{style:{color:"red",marginBottom:8}},v),e.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:8}},e.createElement("button",{className:be.dashboardBtn,onClick:k,type:"button"},"Cancel"),e.createElement("button",{className:be.dashboardBtn,disabled:!h.trim(),onClick:U,type:"button"},"Add Note")))),o&&e.createElement(j2,{proposals:x,onSelect:H,onClose:B,type:"received"}),i&&e.createElement(j2,{proposals:E,onSelect:V,onClose:z,type:"sent"}),g&&!u&&e.createElement("div",{className:be.modalOverlay},e.createElement("div",{className:be.modalContent,style:{maxWidth:420,margin:"auto"}},e.createElement(hM,{proposal:g,userNote:S,setUserNote:Z,onConfirm:F,onClose:O,onCounterPropose:R,phase:P,currentUserName:`${q} ${oe}`,currentUserEmail:he}))),e.createElement(l5,{proposal:f,open:c,onClose:M,onSubmit:D,senderPlayer:N.find(ye=>{var We,Ze;return`${ye.firstName} ${ye.lastName}`.trim().toLowerCase()===((f==null?void 0:f.senderName)||"").trim().toLowerCase()||((We=ye.email)==null?void 0:We.toLowerCase())===((Ze=f==null?void 0:f.senderEmail)==null?void 0:Ze.toLowerCase())}),phase:P,selectedDivision:te}),g&&u&&e.createElement(JL,{proposal:g,open:u,onClose:O,onEdit:j,onDelete:X,phase:P,currentUserName:`${q} ${oe}`,currentUserEmail:he}));Yw.propTypes={showStandings:Q.bool,showDefenseChallengers:Q.bool,modalOpen:Q.bool,showNoteModal:Q.bool,showProposalListModal:Q.bool,showSentProposalListModal:Q.bool,showCounterModal:Q.bool,showProposalDetailsModal:Q.bool,selectedMatch:Q.object,selectedProposal:Q.object,counterProposal:Q.object,newNote:Q.string,noteError:Q.string,proposalNote:Q.string,pendingProposals:Q.array,sentProposals:Q.array,players:Q.array,STANDINGS_URLS:Q.object.isRequired,onCloseStandings:Q.func.isRequired,onCloseDefenseChallengers:Q.func.isRequired,onCloseModal:Q.func.isRequired,onCloseNoteModal:Q.func.isRequired,onCloseProposalListModal:Q.func.isRequired,onCloseSentProposalListModal:Q.func.isRequired,onCloseCounterModal:Q.func.isRequired,onCloseProposalDetailsModal:Q.func.isRequired,onAddNote:Q.func.isRequired,onUpdateNewNote:Q.func.isRequired,onSelectProposal:Q.func.isRequired,onSelectSentProposal:Q.func.isRequired,onConfirmProposal:Q.func.isRequired,onCounterPropose:Q.func.isRequired,onSubmitCounterProposal:Q.func.isRequired,onEditProposal:Q.func.isRequired,onDeleteProposal:Q.func.isRequired,onUpdateProposalLocally:Q.func.isRequired,onRefetchMatches:Q.func.isRequired,onRefetchProposals:Q.func.isRequired,selectedDivision:Q.string.isRequired,effectivePhase:Q.string.isRequired,userPin:Q.string,playerName:Q.string.isRequired,playerLastName:Q.string.isRequired,senderEmail:Q.string.isRequired,styles:Q.object.isRequired,proposalService:Q.object.isRequired};const Iz=({isOpen:a,onClose:r,currentLocations:t="",availableLocations:n=[],onSave:o})=>{const[i,c]=b.useState([]),[u,m]=b.useState(""),[g,f]=b.useState("");b.useEffect(()=>{if(a&&t){const k=t.split(`
`).filter(Boolean);console.log("📍 LocationSelectionModal: Initializing with currentLocations:",t),console.log("📍 Parsed locations array:",k),c(k)}else console.log("📍 LocationSelectionModal: No currentLocations, setting empty array"),c([]);m(""),f("")},[a,t]);const h=()=>{try{return i&&Array.isArray(i)?i.map(k=>String(k).trim()).filter(Boolean):!t||typeof t!="string"?[]:t.split(`
`).filter(Boolean).map(k=>String(k).trim())}catch(k){return console.error("Error parsing user locations:",k),[]}},v=()=>{try{if(!n||!Array.isArray(n))return[];const k=i.length>0?i:h();return n.filter(B=>typeof B!="string"?!1:!k.some(z=>typeof z!="string"?!1:z.trim().toLowerCase()===B.trim().toLowerCase()))}catch(k){return console.error("Error getting unselected locations:",k),[]}},S=k=>g.trim()?k.filter(B=>String(B).toLowerCase().includes(g.toLowerCase())):k,x=k=>{const B=String(k);console.log("📍 LocationSelectionModal: Toggling location:",B),c(z=>{const M=z.includes(B)?z.filter(O=>O!==B):[...z,B];return console.log("📍 LocationSelectionModal: Updated selectedLocations:",M),M})},E=()=>{if(u.trim()){const k=u.trim();i.includes(k)||c(B=>[...B,k]),m("")}},N=()=>{const k=i.join(`
`);console.log("📍 LocationSelectionModal: Saving locations..."),console.log("📍 selectedLocations state:",i),console.log("📍 locationsString being sent:",k),o(k),r()},C=k=>{k.key==="Enter"&&E()};if(!a)return null;const I=h(),A=v();S(I);const _=S(A);return e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)",padding:"20px"},onClick:r},e.createElement("div",{style:{transform:"translate(0px, 0px)",cursor:"default",background:"linear-gradient(120deg, #232323 80%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"1rem",boxShadow:"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",width:"auto",maxWidth:"850px",minWidth:"700px",margin:"0 auto",left:0,right:0,animation:"modalBounceIn 0.5s cubic-bezier(.21,1.02,.73,1.01)",padding:0,position:"relative",fontFamily:"inherit",boxSizing:"border-box",textAlign:"center",maxHeight:"85vh",overflowY:"auto"},onClick:k=>k.stopPropagation()},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#e53e3e",padding:"0.8rem 1rem 0.6rem 1rem",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",position:"relative",cursor:"grab",userSelect:"none",gap:"0.8rem"}},e.createElement("span",{style:{position:"absolute",left:0,top:0,width:"100%",height:"4px",background:"linear-gradient(90deg, #fff0 0%, #e53e3e 60%, #fff0 100%)",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",pointerEvents:"none"}}),e.createElement("h2",{style:{margin:0,fontSize:"1rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.02em",color:"#fff",textShadow:"0 1px 12px #000a",zIndex:2,flex:1,wordBreak:"break-word",minWidth:0}},"📍 Select Your Locations"),e.createElement("button",{onClick:r,style:{background:"none",border:"none",color:"#fff",fontSize:"1.5rem",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",minWidth:"24px",zIndex:3},onMouseEnter:k=>k.target.style.backgroundColor="rgba(255, 255, 255, 0.1)",onMouseLeave:k=>k.target.style.backgroundColor="transparent"},"×")),e.createElement("div",{style:{padding:"0.5rem",overflowY:"auto",maxHeight:"calc(75vh - 80px)"}},e.createElement("div",{style:{marginBottom:"8px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"}},e.createElement("input",{type:"text",placeholder:"🔍 Search locations...",value:g,onChange:k=>f(k.target.value),style:{flex:1,padding:"8px 10px",borderRadius:"6px",border:"1px solid #333",backgroundColor:"#2a2a2a",color:"#fff",fontSize:"14px"}}),e.createElement("span",{style:{color:"#888",fontSize:"0.8rem",whiteSpace:"nowrap"}},g?`${_.length} of ${A.length}`:`${A.length} total`),g&&e.createElement("button",{onClick:()=>f(""),style:{padding:"4px 8px",borderRadius:"4px",border:"1px solid #555",backgroundColor:"transparent",color:"#888",cursor:"pointer",fontSize:"0.75rem"}},"Clear"))),e.createElement("div",{style:{marginBottom:"8px"}},e.createElement("div",{style:{color:"#ffc107",fontSize:"0.9rem",fontWeight:"bold",marginBottom:"6px",textAlign:"left"}},"➕ Add Custom Location:"),e.createElement("div",{style:{display:"flex",gap:"8px"}},e.createElement("input",{type:"text",placeholder:"Type a custom location name...",value:u,onChange:k=>m(k.target.value),onKeyPress:C,style:{flex:1,padding:"6px 8px",borderRadius:"6px",border:"1px solid #333",backgroundColor:"#2a2a2a",color:"#fff",fontSize:"14px"}}),e.createElement("button",{onClick:E,disabled:!u.trim(),style:{padding:"6px 10px",borderRadius:"6px",border:"none",backgroundColor:u.trim()?"#dc3545":"#555",color:"#fff",cursor:u.trim()?"pointer":"not-allowed",fontSize:"14px",fontWeight:"bold",whiteSpace:"nowrap"}},"Add"))),e.createElement("div",{style:{marginBottom:"12px"}},e.createElement("div",{style:{color:"#4CAF50",fontSize:"0.9rem",fontWeight:"bold",marginBottom:"6px",textAlign:"left"}},"✅ Selected (",i.length,")"),e.createElement("div",{style:{maxHeight:"120px",overflowY:"auto",padding:"6px",backgroundColor:"rgba(76, 175, 80, 0.05)",borderRadius:"6px",border:"1px solid rgba(76, 175, 80, 0.2)"}},i.length>0?e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"4px"}},i.map((k,B)=>e.createElement("div",{key:B,onClick:()=>x(k),style:{cursor:"pointer",padding:"4px 8px",borderRadius:"4px",background:"rgba(76, 175, 80, 0.2)",border:"1px solid rgba(76, 175, 80, 0.4)",color:"#4CAF50",fontSize:"0.75rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center",transition:"all 0.2s ease"},onMouseEnter:z=>{z.target.style.background="rgba(76, 175, 80, 0.3)",z.target.style.transform="scale(1.02)"},onMouseLeave:z=>{z.target.style.background="rgba(76, 175, 80, 0.2)",z.target.style.transform="scale(1)"}},"✓ ",String(k)))):e.createElement("div",{style:{color:"#888",fontSize:"0.8rem",textAlign:"center",fontStyle:"italic",padding:"8px"}},"No locations selected"))),e.createElement("div",{style:{marginBottom:"12px"}},e.createElement("div",{style:{color:"#ffc107",fontSize:"0.9rem",fontWeight:"bold",marginBottom:"6px",textAlign:"left"}},"➕ Available (",_.length,")"),e.createElement("div",{style:{maxHeight:"300px",overflowY:"auto",padding:"6px",backgroundColor:"rgba(255, 193, 7, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 193, 7, 0.2)"}},_.length>0?e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"4px"}},_.map((k,B)=>e.createElement("div",{key:B,onClick:()=>x(k),style:{cursor:"pointer",padding:"4px 8px",borderRadius:"4px",background:i.includes(k)?"rgba(255, 193, 7, 0.3)":"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.4)",color:"#ffc107",fontSize:"0.75rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center",transition:"all 0.2s ease"},onMouseEnter:z=>{i.includes(k)||(z.target.style.background="rgba(255, 193, 7, 0.2)",z.target.style.transform="scale(1.02)")},onMouseLeave:z=>{i.includes(k)||(z.target.style.background="rgba(255, 193, 7, 0.1)",z.target.style.transform="scale(1)")}},i.includes(k)?"✓ ":"",String(k)))):e.createElement("div",{style:{color:"#888",fontSize:"0.8rem",textAlign:"center",fontStyle:"italic",padding:"8px"}},g?"No locations match your search":"No available locations to add"))),e.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",paddingTop:"8px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("button",{onClick:r,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid #555",backgroundColor:"transparent",color:"#888",cursor:"pointer",fontSize:"14px"}},"Cancel"),e.createElement("button",{onClick:N,style:{padding:"8px 16px",borderRadius:"6px",border:"none",backgroundColor:"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"bold"}},"Save Locations")))))},Gw=({isOpen:a,onClose:r,currentUser:t,isMobile:n,onUserUpdate:o})=>{const[i,c]=b.useState(null),[u,m]=b.useState({}),[g,f]=b.useState(t),[h,v]=b.useState([]),[S,x]=b.useState(!1),[E,N]=b.useState(0);b.useEffect(()=>{f(t)},[t]),b.useEffect(()=>{console.log("🔄 localUser state updated:",g)},[g]),b.useEffect(()=>{console.log("🔄 refreshTrigger changed to:",E)},[E]),b.useEffect(()=>{(async()=>{var O,U,Z;if(a&&(t!=null&&t.email))try{console.log("🔄 Loading profile data for:",t.email);const V=`http://localhost:8080/api/unified-auth/profile-data?email=${encodeURIComponent(t.email)}&appType=league&t=${Date.now()}`;console.log("📡 Fetching from URL:",V);const F=await fetch(V);if(console.log("📥 Response status:",F.status),console.log("📥 Response ok:",F.ok),F.ok){const R=await F.json();console.log("✅ Loaded profile data:",R),console.log("📍 Locations from API:",(O=R.profile)==null?void 0:O.locations),console.log("⏰ Availability from API:",(U=R.profile)==null?void 0:U.availability),console.log("📞 Phone from API:",(Z=R.profile)==null?void 0:Z.phone),f(D=>{var X,W,T,G,te;const j={...D,locations:((X=R.profile)==null?void 0:X.locations)||"",availability:((W=R.profile)==null?void 0:W.availability)||{},phone:((T=R.profile)==null?void 0:T.phone)||"",divisions:((G=R.profile)==null?void 0:G.divisions)||[],ladderInfo:((te=R.profile)==null?void 0:te.ladderInfo)||null};return console.log("🔄 Updated localUser:",j),j})}else{const R=await F.text();console.error("❌ Failed to load profile data. Status:",F.status),console.error("❌ Error response:",R)}}catch(H){console.error("💥 Error loading profile data:",H)}else console.log("⚠️ Modal not open or no email:",{isOpen:a,email:t==null?void 0:t.email})})()},[a,t==null?void 0:t.email]),b.useEffect(()=>{(async()=>{if(a)try{console.log("🔄 Loading available locations...");const U=await fetch("http://localhost:8080/api/locations");if(console.log("📡 Locations API response status:",U.status),U.ok){const Z=await U.json();console.log("📥 Locations API data:",Z);const H=Z.locations||[];console.log("🔍 Raw locations structure:",H);const V=H.map(F=>{if(typeof F=="string")return console.log(`  ✅ String location: "${F}"`),F;if(F&&typeof F=="object"){console.log("  🔍 Object location:",F);const R=F.name||F.locationName||F.title||F.location||F.value||JSON.stringify(F);return console.log(`  📍 Extracted name: "${R}"`),R}else return console.log("  ⚠️ Other type location:",F),String(F)}).filter(Boolean);console.log("📍 Final processed locations:",V),console.log("📍 Setting availableLocations to:",V),v(V)}else console.error("❌ Failed to load locations. Status:",U.status)}catch(O){console.error("💥 Error loading locations:",O)}})()},[a]);const C=(M,O)=>{c(M),m(O)},I=()=>{c(null),m({})},A=async M=>{var O;try{console.log("Saving section:",M),console.log("Edit data:",u),console.log("Current user:",t),console.log("User ID:",t==null?void 0:t._id),console.log("User email:",t==null?void 0:t.email),console.log("All user fields:",Object.keys(t||{})),console.log("Environment VITE_BACKEND_URL:",void 0);const U=t==null?void 0:t.email;if(!U){console.error("No valid user email found"),alert("Error: No valid user email found. Please refresh the page and try again.");return}console.log("Using user email:",U);const Z="http://localhost:8080";console.log("Using backend URL:",Z);const H=await fetch(`${Z}/api/users/${encodeURIComponent(U)}`);if(!H.ok){console.error("Failed to fetch user by email"),alert("Error: Failed to fetch user data. Please refresh the page and try again.");return}const V=await H.json(),F=((O=V.user)==null?void 0:O._id)||V._id;if(!F){console.error("No user ID found in response"),alert("Error: No user ID found. Please refresh the page and try again.");return}console.log("Found user ID:",F);let R=M,D;M==="basic"?D={firstName:u.firstName,lastName:u.lastName,email:u.email,phone:u.phone}:M==="locations"?D=u.locations:M==="availability"?D=u.availability:D=u[M],console.log("Sending unified profile update:",{fieldName:R,fieldValue:D});const j=await fetch(`${Z}/api/unified-auth/update-profile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:F,email:U,appType:"league",updates:{[R]:D}})});if(!j.ok){const W=await j.json();throw new Error(W.error||"Failed to update profile")}const X=await j.json();console.log("Unified profile update successful:",X);try{const W=await fetch(`${Z}/api/unified-auth/profile-data?email=${encodeURIComponent(U)}&appType=league&t=${Date.now()}`);if(W.ok){const T=await W.json();console.log("Refreshed league profile data:",T),f(G=>({...G,locations:T.profile.locations||"",availability:T.profile.availability||{}})),o&&o()}}catch(W){console.error("Error refreshing profile data:",W)}c(null),m({}),alert("✅ League profile updated successfully!")}catch(U){console.error("Error updating profile:",U),alert("Error updating profile. Please try again.")}},_=(M,O)=>{m(U=>({...U,[M]:O}))},k=async M=>{var O;try{console.log("🔄 Starting location save process..."),console.log("📍 New locations string:",M),f(D=>{const j={...D,locations:M};return console.log("🔄 Updated localUser immediately:",j),j}),N(D=>D+1),console.log("🔄 Triggered refresh for immediate update");const U=t==null?void 0:t.email;if(!U){console.error("No valid user email found"),alert("Error: No valid user email found. Please refresh the page and try again.");return}const Z="http://localhost:8080",H=await fetch(`${Z}/api/users/${encodeURIComponent(U)}`);if(!H.ok){console.error("Failed to fetch user by email"),alert("Error: Failed to fetch user data. Please refresh the page and try again.");return}const V=await H.json(),F=((O=V.user)==null?void 0:O._id)||V._id;if(!F){console.error("No user ID found in response"),alert("Error: No user ID found. Please refresh the page and try again.");return}const R=await fetch(`${Z}/api/unified-auth/update-profile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:F,email:U,appType:"league",updates:{locations:M}})});if(!R.ok){const D=await R.json();throw new Error(D.error||"Failed to update locations")}console.log("✅ Locations updated successfully in backend"),c(null),N(D=>D+1),console.log("🔄 Final refresh triggered after backend save"),o&&o()}catch(U){console.error("Error saving locations:",U),alert("Error saving locations. Please try again.")}},B=()=>{try{const M=g.locations||"";if(console.log("🔍 getUserLocations called with refreshTrigger:",E),console.log("🔍 Current locations data:",M),console.log("🔍 localUser.locations:",g.locations),!M)return[];if(typeof M=="string")if(M.includes(`
`)){const O=M.split(`
`).filter(Boolean).map(U=>String(U).trim());return console.log("🔍 Parsed newline locations:",O),O}else if(M.includes(",")){const O=M.split(",").map(U=>String(U).trim()).filter(Boolean);return console.log("🔍 Parsed comma locations:",O),O}else{const O=M.trim()?[String(M).trim()]:[];return console.log("🔍 Parsed single location:",O),O}if(Array.isArray(M)){const O=M.map(U=>String(U).trim()).filter(Boolean);return console.log("🔍 Parsed array locations:",O),O}return console.log("🔍 No valid locations found, returning empty array"),[]}catch(M){return console.error("❌ Error in getUserLocations:",M),[]}};if(!a||!g)return null;const z=g.divisions||[];return console.log("🎯 Modal rendering with localUser:",g),console.log("📍 Current locations:",g.locations),console.log("⏰ Current availability:",g.availability),console.log("📞 Current phone:",g.phone),e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)",padding:n?"10px":"20px"},onClick:r},e.createElement("div",{style:{transform:"translate(0px, 0px)",cursor:"default",background:"linear-gradient(120deg, #232323 80%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:n?"0":"1rem",boxShadow:"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",width:n?"95vw":"auto",maxWidth:n?"95vw":"750px",minWidth:n?"auto":"500px",margin:n?"0":"0 auto",left:0,right:0,animation:"modalBounceIn 0.5s cubic-bezier(.21,1.02,.73,1.01)",padding:0,position:"relative",fontFamily:"inherit",boxSizing:"border-box",textAlign:"center",maxHeight:n?"70vh":"75vh",overflowY:"auto"},onClick:M=>M.stopPropagation()},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#e53e3e",padding:"0.8rem 1rem 0.6rem 1rem",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",position:"relative",cursor:"grab",userSelect:"none",gap:"0.8rem"}},e.createElement("span",{style:{position:"absolute",left:0,top:0,width:"100%",height:"4px",background:"linear-gradient(90deg, #fff0 0%, #e53e3e 60%, #fff0 100%)",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",pointerEvents:"none"}}),e.createElement("h2",{style:{margin:0,fontSize:n?"0.9rem":"1rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.02em",color:"#fff",textShadow:"0 1px 12px #000a",zIndex:2,flex:1,wordBreak:"break-word",minWidth:0}},"👤 Profile Information"),e.createElement("button",{onClick:r,style:{background:"none",border:"none",color:"#fff",fontSize:"1.5rem",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",minWidth:"24px",zIndex:3},onMouseEnter:M=>M.target.style.backgroundColor="rgba(255, 255, 255, 0.1)",onMouseLeave:M=>M.target.style.backgroundColor="transparent"},"×")),e.createElement("div",{style:{padding:n?"0.8rem":"1rem",overflowY:"auto",maxHeight:n?"calc(60vh - 80px)":"calc(65vh - 80px)"}},e.createElement("div",{style:{display:"grid",gap:n?"8px":"10px"}},e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:n?"6px":"8px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"}},e.createElement("div",{style:{fontWeight:"bold",color:"#ffffff",fontSize:n?"0.9rem":"1rem"}},"👤 Basic Information"),i!=="basic"&&e.createElement("button",{onClick:()=>C("basic",{firstName:g.firstName||"",lastName:g.lastName||"",email:g.email||"",phone:g.phone||""}),style:{background:"rgba(76, 175, 80, 0.2)",border:"1px solid rgba(76, 175, 80, 0.4)",color:"#4CAF50",padding:"4px 8px",borderRadius:"4px",fontSize:n?"0.7rem":"0.8rem",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:M=>M.target.style.background="rgba(76, 175, 80, 0.3)",onMouseLeave:M=>M.target.style.background="rgba(76, 175, 80, 0.2)"},"✏️ Edit")),i==="basic"?e.createElement("div",{style:{display:"grid",gap:"8px"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"}},e.createElement("input",{type:"text",value:u.firstName||"",onChange:M=>_("firstName",M.target.value),placeholder:"First Name",style:{padding:"8px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(0, 0, 0, 0.3)",color:"#ffffff",fontSize:"0.9rem"}}),e.createElement("input",{type:"text",value:u.lastName||"",onChange:M=>_("lastName",M.target.value),placeholder:"Last Name",style:{padding:"8px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(0, 0, 0, 0.3)",color:"#ffffff",fontSize:"0.9rem"}})),e.createElement("input",{type:"email",value:u.email||"",onChange:M=>_("email",M.target.value),placeholder:"Email",style:{padding:"8px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(0, 0, 0, 0.3)",color:"#ffffff",fontSize:"0.9rem"}}),e.createElement("input",{type:"tel",value:u.phone||"",onChange:M=>_("phone",M.target.value),placeholder:"Phone",style:{padding:"8px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(0, 0, 0, 0.3)",color:"#ffffff",fontSize:"0.9rem"}}),e.createElement("div",{style:{display:"flex",gap:"8px",justifyContent:"center"}},e.createElement("button",{onClick:()=>A("basic"),style:{background:"#4CAF50",color:"#fff",border:"none",padding:"6px 12px",borderRadius:"4px",fontSize:"0.8rem",cursor:"pointer"}},"💾 Save"),e.createElement("button",{onClick:I,style:{background:"#6c757d",color:"#fff",border:"none",padding:"6px 12px",borderRadius:"4px",fontSize:"0.8rem",cursor:"pointer"}},"❌ Cancel"))):e.createElement("div",{style:{color:"#cccccc",lineHeight:"1.4",fontSize:n?"0.85rem":"0.9rem"}},e.createElement("div",null,e.createElement("strong",null,"Name:")," ",g.firstName," ",g.lastName),e.createElement("div",null,e.createElement("strong",null,"Email:")," ",g.email),e.createElement("div",null,e.createElement("strong",null,"Phone:")," ",g.phone||"Not provided"))),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:n?"6px":"8px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"}},e.createElement("div",{style:{fontWeight:"bold",color:"#ffffff",fontSize:n?"0.9rem":"1rem"}},"⏰ Availability"),i!=="availability"&&e.createElement("button",{onClick:()=>C("availability",{availability:g.availability||{}}),style:{background:"rgba(76, 175, 80, 0.2)",border:"1px solid rgba(76, 175, 80, 0.4)",color:"#4CAF50",padding:"4px 8px",borderRadius:"4px",fontSize:n?"0.7rem":"0.8rem",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:M=>M.target.style.background="rgba(76, 175, 80, 0.3)",onMouseLeave:M=>M.target.style.background="rgba(76, 175, 80, 0.2)"},"✏️ Edit")),i==="availability"?e.createElement("div",{style:{display:"grid",gap:"6px"}},e.createElement("div",{style:{color:"#ffc107",fontSize:"0.85rem",fontWeight:"bold",marginBottom:"4px"}},"Quick Time Slot Editor:"),e.createElement("div",{style:{padding:"4px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"3px",border:"1px solid rgba(255, 255, 255, 0.08)"}},e.createElement("div",{style:{color:"#4CAF50",fontSize:"0.8rem",fontWeight:"bold",marginBottom:"3px"}},"➕ Quick Add:"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr auto",gap:"3px",alignItems:"end"}},e.createElement("select",{id:"quick-day",style:{padding:"3px 4px",borderRadius:"3px",border:"1px solid rgba(255, 255, 255, 0.15)",background:"rgba(0, 0, 0, 0.4)",color:"#ffffff",fontSize:"0.8rem",minHeight:"24px"}},e.createElement("option",{value:""},"Day"),e.createElement("option",{value:"Mon"},"Mon"),e.createElement("option",{value:"Tue"},"Tue"),e.createElement("option",{value:"Wed"},"Wed"),e.createElement("option",{value:"Thu"},"Thu"),e.createElement("option",{value:"Fri"},"Fri"),e.createElement("option",{value:"Sat"},"Sat"),e.createElement("option",{value:"Sun"},"Sun")),e.createElement("input",{type:"time",id:"quick-start",style:{padding:"3px 4px",borderRadius:"3px",border:"1px solid rgba(255, 255, 255, 0.15)",background:"rgba(0, 0, 0, 0.4)",color:"#ffffff",fontSize:"0.8rem",minHeight:"24px"}}),e.createElement("input",{type:"time",id:"quick-end",style:{padding:"3px 4px",borderRadius:"3px",border:"1px solid rgba(255, 255, 255, 0.15)",background:"rgba(0, 0, 0, 0.4)",color:"#ffffff",fontSize:"0.8rem",minHeight:"24px"}}),e.createElement("button",{type:"button",onClick:()=>{var X,W;const M=document.getElementById("quick-day"),O=document.getElementById("quick-start"),U=document.getElementById("quick-end"),Z=M.value,H=O.value,V=U.value;if(!Z||!H||!V){alert("Please select day, start, and end times.");return}if(H>=V){alert("End time must be after start time.");return}const F=T=>{const[G,te]=T.split(":"),P=parseInt(G),ne=P>=12?"PM":"AM";return`${P%12||12}:${te} ${ne}`},R=`${F(H)} - ${F(V)}`,D=((X=u.availability)==null?void 0:X[Z])||((W=g.availability)==null?void 0:W[Z])||[];if(D.includes(R)){alert("This time slot already exists.");return}const j=[...D,R];m(T=>({...T,availability:{...T.availability,[Z]:j}})),M.value="",O.value="",U.value=""},style:{background:"rgba(76, 175, 80, 0.3)",border:"1px solid rgba(76, 175, 80, 0.5)",color:"#4CAF50",padding:"3px 6px",borderRadius:"3px",fontSize:"0.75rem",cursor:"pointer",fontWeight:"bold",minHeight:"24px"}},"Add"))),e.createElement("div",{style:{padding:"4px",background:"rgba(255, 255, 255, 0.02)",borderRadius:"3px",border:"1px solid rgba(255, 255, 255, 0.05)"}},e.createElement("div",{style:{color:"#4CAF50",fontSize:"0.8rem",fontWeight:"bold",marginBottom:"3px"}},"📅 Current Slots:"),e.createElement("div",{style:{display:"grid",gap:"2px",maxHeight:"120px",overflowY:"auto"}},Object.entries(u.availability||g.availability||{}).map(([M,O])=>O&&O.length>0?O.map((U,Z)=>e.createElement("div",{key:`${M}-${Z}`,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"2px 4px",background:"rgba(76, 175, 80, 0.08)",borderRadius:"2px",border:"1px solid rgba(76, 175, 80, 0.2)"}},e.createElement("span",{style:{color:"#4CAF50",fontSize:"0.75rem",fontWeight:"500"}},e.createElement("strong",null,M,":")," ",U),e.createElement("button",{type:"button",onClick:()=>{const H=O.filter((V,F)=>F!==Z);m(V=>({...V,availability:{...V.availability,[M]:H}}))},style:{background:"rgba(220, 53, 69, 0.2)",border:"1px solid rgba(220, 53, 69, 0.3)",color:"#dc3545",padding:"2px 4px",borderRadius:"2px",fontSize:"0.7rem",cursor:"pointer",fontWeight:"bold"}},"✕"))):null).flat().filter(Boolean))),e.createElement("div",{style:{display:"flex",gap:"6px",justifyContent:"center"}},e.createElement("button",{onClick:()=>A("availability"),style:{background:"#4CAF50",color:"#fff",border:"none",padding:"4px 8px",borderRadius:"3px",fontSize:"0.7rem",cursor:"pointer"}},"💾 Save"),e.createElement("button",{onClick:I,style:{background:"#6c757d",color:"#fff",border:"none",padding:"4px 8px",borderRadius:"3px",fontSize:"0.7rem",cursor:"pointer"}},"❌ Cancel"))):e.createElement("div",{style:{color:"#cccccc",lineHeight:"1.4",fontSize:n?"0.85rem":"0.9rem"}},g.availability&&Object.keys(g.availability).length>0?(()=>{const M=Object.entries(g.availability).filter(([U,Z])=>Z&&Z.length>0);if(M.length===0)return"No availability set";const O={Mon:"Mon",Tue:"Tue",Wed:"Wed",Thu:"Thu",Fri:"Fri",Sat:"Sat",Sun:"Sun"};return e.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"repeat(2, 1fr)",gap:"6px"}},M.map(([U,Z])=>e.createElement("div",{key:U,style:{padding:"4px 6px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)",fontSize:"0.85rem"}},e.createElement("span",{style:{fontWeight:"bold",color:"#ffc107"}},O[U],":")," ",Z.join(", "))))})():"No availability set")),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:n?"6px":"8px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"}},e.createElement("div",{style:{fontWeight:"bold",color:"#ffffff",fontSize:n?"0.9rem":"1rem"}},"📍 Preferred Locations"),i!=="locations"&&e.createElement("button",{onClick:()=>x(!0),style:{background:"rgba(76, 175, 80, 0.2)",border:"1px solid rgba(76, 175, 80, 0.4)",color:"#4CAF50",padding:"4px 8px",borderRadius:"4px",fontSize:n?"0.7rem":"0.8rem",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:M=>M.target.style.background="rgba(76, 175, 80, 0.3)",onMouseLeave:M=>M.target.style.background="rgba(76, 175, 80, 0.2)"},"✏️ Edit")),e.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"repeat(2, 1fr)":"repeat(3, 1fr)",gap:"6px"},key:E},(()=>{try{const M=B();return!M||M.length===0?e.createElement("span",{style:{color:"#888",fontSize:"0.8rem",fontStyle:"italic",gridColumn:"1 / -1",textAlign:"center",padding:"10px"}},"No locations selected"):M.map((O,U)=>e.createElement("span",{key:`${O}-${U}-${E}`,style:{background:"rgba(255, 255, 255, 0.1)",color:"#ffffff",padding:"5px 8px",borderRadius:"8px",fontSize:n?"0.75rem":"0.8rem",display:"flex",justifyContent:"center",alignItems:"center",gap:"3px",width:"100%",minHeight:"24px",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:String(O)},"📍 ",String(O)))}catch(M){return console.error("❌ Error rendering locations display:",M),e.createElement("span",{style:{color:"#ff6b6b",fontSize:"0.8rem",fontStyle:"italic",gridColumn:"1 / -1",textAlign:"center",padding:"10px"}},"Error loading locations")}})())),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:n?"6px":"8px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("div",{style:{fontWeight:"bold",color:"#ffffff",marginBottom:"4px",fontSize:n?"0.9rem":"1rem"}},"🏆 League & Ladder Status"),e.createElement("div",{style:{display:"flex",gap:"16px",flexDirection:n?"column":"row"}},e.createElement("div",{style:{flex:1,minWidth:n?"auto":"200px"}},e.createElement("div",{style:{color:"#4CAF50",fontWeight:"bold",fontSize:n?"0.8rem":"0.9rem",marginBottom:"2px"}},"🏆 League Divisions:"),e.createElement("div",{style:{color:"#cccccc",lineHeight:"1.5",fontSize:n?"0.8rem":"0.9rem",paddingLeft:"8px"}},z.length>0?z.join(", "):"No divisions assigned")),e.createElement("div",{style:{flex:1,minWidth:n?"auto":"200px"}},e.createElement("div",{style:{color:"#FF9800",fontWeight:"bold",fontSize:n?"0.8rem":"0.9rem",marginBottom:"2px"}},"🏅 Ladder Status:"),e.createElement("div",{style:{color:"#cccccc",lineHeight:"1.5",fontSize:n?"0.8rem":"0.9rem",paddingLeft:"8px"}},g.ladderInfo?e.createElement("div",null,e.createElement("div",null,"📊 Ladder: ",g.ladderInfo.ladderName),e.createElement("div",null,"🏆 Position: ",g.ladderInfo.position)):"Not on any ladder"))))),e.createElement("div",{style:{marginTop:"20px",textAlign:"center"}},e.createElement("button",{style:{background:"linear-gradient(135deg, #6c757d, #5a6268)",color:"#fff",border:"none",borderRadius:"8px",padding:n?"10px 20px":"12px 24px",fontSize:n?"0.9rem":"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(108, 117, 125, 0.3)",minWidth:n?"100px":"120px"},onMouseEnter:M=>{M.target.style.background="linear-gradient(135deg, #5a6268, #495057)",M.target.style.transform="translateY(-1px)",M.target.style.boxShadow="0 4px 12px rgba(108, 117, 125, 0.4)"},onMouseLeave:M=>{M.target.style.background="linear-gradient(135deg, #6c757d, #5a6268)",M.target.style.transform="translateY(0)",M.target.style.boxShadow="0 2px 8px rgba(108, 117, 125, 0.3)"},onClick:r},"❌ Close")))),e.createElement(Iz,{isOpen:S,onClose:()=>x(!1),currentLocations:g.locations||"",availableLocations:h,onSave:k}))},qw=({showEditProposalModal:a,showChatModal:r,showCompletedModal:t,winnerModalOpen:n,validationModalOpen:o,showSmartMatchmakingModal:i,showUserProfileModal:c,showPhase1Rules:u,showPhase1Overview:m,showRegistrationModal:g,showPendingRegistrationsModal:f,showCalendarModal:h,selectedProposal:v,chatType:S,opponentEmails:x,completedMatches:E,winnerModalPlayers:N,winnerModalMatch:C,matchToValidate:I,selectedOpponentForSmartMatch:A,pendingRegistrations:_,onCloseEditProposalModal:k,onCloseChatModal:B,onCloseCompletedModal:z,onCloseWinnerModal:M,onCloseValidationModal:O,onCloseSmartMatchmakingModal:U,onCloseUserProfileModal:Z,onClosePhase1Rules:H,onClosePhase1Overview:V,onCloseRegistrationModal:F,onClosePendingRegistrationsModal:R,onCloseCalendarModal:D,onSaveEditProposal:j,onProposalUpdated:X,onSelectWinner:W,onValidateMatch:T,onRejectMatch:G,onSmartMatchProposalComplete:te,onUserUpdate:P,onRegistrationSuccess:ne,onApproveRegistration:q,onRejectRegistration:oe,onOpenOpponentsModal:he,onMatchClick:be,onSmartMatchClick:nt,selectedDivision:ye,effectivePhase:We,userPin:Ze,playerName:lt,playerLastName:Ve,senderEmail:zt,isMobile:ve,currentUser:J,players:Ae,filteredUpcomingMatches:Ge,phase1EndDate:Le,playerStats:de,standings:je,timeLeft:ze,deadlineStatus:gt,allPlayers:re,styles:Be,proposalService:Oe,seasonService:Te,seasonData:rt,currentPhaseInfo:pt,BACKEND_URL:jt,markMatchCompleted:ba,setCompletingMatchId:da,updateCompletedMatch:ta,refetchMatches:wa,refetchProposals:rn,setPendingRegistrations:He})=>e.createElement(e.Fragment,null,v&&a&&e.createElement(e9,{proposal:v,open:a,onClose:k,onSave:j,selectedDivision:ye,phase:We,receiverPlayer:Ae.find(ht=>{var Qt,on;return`${ht.firstName} ${ht.lastName}`.trim().toLowerCase()===(v.receiverName||"").trim().toLowerCase()||((Qt=ht.email)==null?void 0:Qt.toLowerCase())===((on=v.receiverEmail)==null?void 0:on.toLowerCase())})}),r&&e.createElement("div",{className:Be.modalOverlay,style:{zIndex:99999}},e.createElement("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"95vw",height:"95vh",maxWidth:"1400px",maxHeight:"900px",background:"#181818",borderRadius:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",overflow:"hidden"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:"1px solid #333",background:"#222",borderRadius:"12px 12px 0 0"}},e.createElement("h2",{style:{margin:0,color:"#ffffff",fontSize:"1.2em"}},S==="league"?"League Chat":"Direct Messages"),e.createElement("button",{onClick:B,style:{background:"none",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"background-color 0.2s"},onMouseOver:ht=>ht.target.style.background="#444",onMouseOut:ht=>ht.target.style.background="none",type:"button"},"×")),e.createElement("div",{style:{flex:1,overflow:"hidden",position:"relative"}},S==="league"?e.createElement(_w,{userName:`${lt} ${Ve}`,userEmail:zt,userPin:Ze,onClose:B}):e.createElement(W9,{userName:`${lt} ${Ve}`,userEmail:zt,userPin:Ze,selectedDivision:ye,opponentEmails:x,onClose:B})))),t&&e.createElement("div",{className:Be.modalOverlay},e.createElement("div",{className:Be.modalContent,style:{maxWidth:800,margin:"auto"}},e.createElement("h2",null,"Completed Matches"),e.createElement("div",{style:{maxHeight:"70vh",overflowY:"auto"}},E.length===0?e.createElement("p",null,"No completed matches yet."):e.createElement("div",{style:{display:"grid",gap:"10px"}},E.map((ht,Qt)=>e.createElement("div",{key:ht._id||Qt,style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",padding:"15px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("div",null,e.createElement("strong",null,ht.senderName)," vs ",e.createElement("strong",null,ht.receiverName)),e.createElement("div",{style:{color:"#4CAF50"}},"Winner: ",e.createElement("strong",null,ht.winner))),ht.notes&&e.createElement("p",{style:{margin:"5px 0 0 0",color:"#ccc",fontSize:"0.9em"}},"Notes: ",ht.notes))))),e.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:15}},e.createElement("button",{className:Be.dashboardBtn,onClick:z,type:"button"},"Close")))),e.createElement(ry,{open:n,onClose:M,player1:N.player1,player2:N.player2,onSelect:W}),e.createElement(O7,{isOpen:o,onClose:O,match:I,onValidate:T,onReject:G}),e.createElement(W7,{isOpen:i,onClose:U,player1:J,player2:A,upcomingMatches:Ge,isMobile:ve,selectedDivision:ye,phase:We,senderName:`${lt} ${Ve}`,senderEmail:zt,onProposalComplete:te}),e.createElement(Gw,{isOpen:c,onClose:Z,currentUser:J,isMobile:ve,onUserUpdate:P,availableLocations:["Legends Brews & Cues","Antiques","Rac m","Westside Billiards","Bijou Billiards","Crooked Cue","Back on the Boulevard","Main Street Tavern","Murray Street Darts","My House"]}),e.createElement(Iw,{isOpen:u,onClose:H,isMobile:ve}),e.createElement(U7,{isOpen:m,onClose:V,isMobile:ve,playerName:lt,playerLastName:Ve,completedMatches:E,totalRequiredMatches:0,playerStats:de,standings:je,timeLeft:ze,deadlineStatus:gt,phase1EndDate:Le,allPlayers:re,selectedDivision:ye}),e.createElement(j7,{isOpen:g,onClose:F,onSuccess:ne,isMobile:ve,isAdmin:!0}),f&&e.createElement("div",{className:Be.modalOverlay,style:{zIndex:99999}},e.createElement("div",{className:Be.modalContent,style:{maxWidth:800,margin:"auto"}},e.createElement("h2",null,"Pending Registrations"),e.createElement("div",{style:{padding:"20px",maxHeight:"70vh",overflowY:"auto"}},_.length===0?e.createElement("div",{style:{textAlign:"center",color:"#ccc",padding:"40px"}},e.createElement("h3",null,"No Pending Registrations"),e.createElement("p",null,"All registrations have been processed.")):e.createElement("div",{style:{display:"grid",gap:"15px"}},_.sort((ht,Qt)=>new Date(ht.registrationDate)-new Date(Qt.registrationDate)).map((ht,Qt)=>e.createElement("div",{key:ht._id,style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",padding:"15px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"}},e.createElement("div",null,e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"5px"}},e.createElement("span",{style:{background:"#e53e3e",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold",minWidth:"20px",textAlign:"center"}},"#",Qt+1),e.createElement("h4",{style:{color:"#e53e3e",margin:"0"}},ht.firstName," ",ht.lastName)),e.createElement("p",{style:{color:"#ccc",margin:"0 0 5px 0"}},ht.email," • ",ht.phone),e.createElement("p",{style:{color:"#999",margin:"0 0 5px 0",fontSize:"12px"}},"Registered: ",new Date(ht.registrationDate).toLocaleDateString()),e.createElement("p",{style:{color:"#999",margin:"0",fontSize:"12px"}},"Division: ",ht.division||"Not assigned")),e.createElement("div",{style:{display:"flex",gap:"8px",flexDirection:"column",alignItems:"flex-end"}},e.createElement("div",{style:{marginBottom:"10px",textAlign:"right"}},e.createElement("label",{style:{color:"#ccc",fontSize:"12px",display:"block",marginBottom:"2px"}},"Assign Division:"),e.createElement("select",{id:`division-${ht._id}`,defaultValue:ht.division||"",style:{padding:"4px 8px",borderRadius:"4px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"12px",minWidth:"120px"}},e.createElement("option",{value:""},"Select Division"),e.createElement("option",{value:"FRBCAPL TEST"},"FRBCAPL TEST"),e.createElement("option",{value:"Singles Test"},"Singles Test"),e.createElement("option",{value:"Waiting List"},"Waiting List"))),e.createElement("div",{style:{display:"flex",gap:"8px"}},e.createElement("button",{onClick:()=>q(ht),style:{background:"#4CAF50",color:"white",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"Approve"),e.createElement("button",{onClick:()=>oe(ht),style:{background:"#f44336",color:"white",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"Reject")))),e.createElement("div",{style:{marginTop:"10px"}},e.createElement("h5",{style:{color:"#e53e3e",margin:"0 0 5px 0",fontSize:"14px"}},"Availability:"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"5px",fontSize:"12px"}},Object.entries(ht.availability).map(([on,Tt])=>e.createElement("div",{key:on,style:{color:"#ccc"}},e.createElement("strong",null,on,":")," ",Tt.length>0?Tt.join(", "):"None")))),e.createElement("div",{style:{marginTop:"10px"}},e.createElement("h5",{style:{color:"#e53e3e",margin:"0 0 5px 0",fontSize:"14px"}},"Locations:"),e.createElement("p",{style:{color:"#ccc",margin:"0",fontSize:"12px"}},ht.locations)))))),e.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:15}},e.createElement("button",{className:Be.dashboardBtn,onClick:R,type:"button"},"Close")))),e.createElement(z7,{isOpen:h,onClose:D,isMobile:ve,phase1EndDate:Le,upcomingMatches:Ge,playerName:lt,playerLastName:Ve,onOpenOpponentsModal:he,onMatchClick:be,onSmartMatchClick:nt}));qw.propTypes={showEditProposalModal:Q.bool,showChatModal:Q.bool,showCompletedModal:Q.bool,winnerModalOpen:Q.bool,validationModalOpen:Q.bool,showSmartMatchmakingModal:Q.bool,showUserProfileModal:Q.bool,showPhase1Rules:Q.bool,showPhase1Overview:Q.bool,showRegistrationModal:Q.bool,showPendingRegistrationsModal:Q.bool,showCalendarModal:Q.bool,selectedProposal:Q.object,chatType:Q.string,opponentEmails:Q.array,completedMatches:Q.array,winnerModalPlayers:Q.object,winnerModalMatch:Q.object,matchToValidate:Q.object,selectedOpponentForSmartMatch:Q.object,pendingRegistrations:Q.array,onCloseEditProposalModal:Q.func.isRequired,onCloseChatModal:Q.func.isRequired,onCloseCompletedModal:Q.func.isRequired,onCloseWinnerModal:Q.func.isRequired,onCloseValidationModal:Q.func.isRequired,onCloseSmartMatchmakingModal:Q.func.isRequired,onCloseUserProfileModal:Q.func.isRequired,onClosePhase1Rules:Q.func.isRequired,onClosePhase1Overview:Q.func.isRequired,onCloseRegistrationModal:Q.func.isRequired,onClosePendingRegistrationsModal:Q.func.isRequired,onCloseCalendarModal:Q.func.isRequired,onSaveEditProposal:Q.func.isRequired,onProposalUpdated:Q.func.isRequired,onSelectWinner:Q.func.isRequired,onValidateMatch:Q.func.isRequired,onRejectMatch:Q.func.isRequired,onSmartMatchProposalComplete:Q.func.isRequired,onUserUpdate:Q.func.isRequired,onRegistrationSuccess:Q.func.isRequired,onApproveRegistration:Q.func.isRequired,onRejectRegistration:Q.func.isRequired,onOpenOpponentsModal:Q.func.isRequired,onMatchClick:Q.func.isRequired,onSmartMatchClick:Q.func.isRequired,selectedDivision:Q.string.isRequired,effectivePhase:Q.string.isRequired,userPin:Q.string,playerName:Q.string.isRequired,playerLastName:Q.string.isRequired,senderEmail:Q.string.isRequired,isMobile:Q.bool.isRequired,currentUser:Q.object,players:Q.array,filteredUpcomingMatches:Q.array,phase1EndDate:Q.string,playerStats:Q.object,standings:Q.array,timeLeft:Q.string,deadlineStatus:Q.string,allPlayers:Q.array,styles:Q.object.isRequired,proposalService:Q.object.isRequired,seasonService:Q.object.isRequired,seasonData:Q.object,currentPhaseInfo:Q.object,BACKEND_URL:Q.string.isRequired,markMatchCompleted:Q.func.isRequired,setCompletingMatchId:Q.func.isRequired,updateCompletedMatch:Q.func.isRequired,refetchMatches:Q.func.isRequired,refetchProposals:Q.func.isRequired,setPendingRegistrations:Q.func.isRequired};function $x(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-");return`${c}-${u}-${i}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}function Zw({playerName:a,playerLastName:r,onOpenChat:t,userPin:n,onGoToAdmin:o,onScheduleMatch:i,senderEmail:c,onGoToPlatformAdmin:u,isAdmin:m}){const[g,f]=b.useState([]),[h,v]=b.useState(""),[S,x]=b.useState(!1),[E,N]=b.useState(!1),[C,I]=b.useState(!1),[A,_]=b.useState(null),[k,B]=b.useState(""),[z,M]=b.useState(!1),[O,U]=b.useState(!1),[Z,H]=b.useState(null),[V,F]=b.useState(!1),[R,D]=b.useState(""),[j,X]=b.useState(""),[W,T]=b.useState(null),[G,te]=b.useState(!1),[P,ne]=b.useState(!1),[q,oe]=b.useState(!1),[he,be]=b.useState("scheduled"),[nt,ye]=b.useState(!1),[We,Ze]=b.useState(null),[lt,Ve]=b.useState(!1),[zt,ve]=b.useState(!1),[J,Ae]=b.useState(null),[Ge,Le]=b.useState(!1),[de,je]=b.useState(null),[ze,gt]=b.useState(!1),[re,Be]=b.useState(null),[Oe,Te]=b.useState([]),[rt,pt]=b.useState(!1),[jt,ba]=b.useState(0),[da,ta]=b.useState(0),[wa,rn]=b.useState(0),He=`${a} ${r}`.trim(),{pendingProposals:ht,sentProposals:Qt,loading:on,refetch:Tt,updateProposalLocally:Va}=Ew(He,h),ka=J||he,{matches:La,completedMatches:sn,loading:wn,refetch:Wa,markMatchCompleted:Jn,updateCompletedMatch:ss}=vz(He,h,ka),Sn=()=>["frbcapl@gmail.com","sslampro@gmail.com"].includes(c.toLowerCase())&&n==="777777",{seasonData:ua,currentPhaseInfo:Na,loading:An}=xz(h),{standings:Wr,loading:no}=Ez(h),{notes:Dn,loading:jr,refetch:hr,updateNoteLocally:Hr}=wz(),{scheduledMatches:Mn,loading:yr}=Sz(h),[br,Xn]=b.useState(0),[Sa,_o]=b.useState(0),[ko,un]=b.useState(!1),[Kn,$r]=b.useState(!1),[er,ie]=b.useState(""),[Ce,ot]=b.useState("all"),[it,mt]=b.useState("date"),[$t,Jt]=b.useState(null),[na,ja]=b.useState(!1),[It,qs]=b.useState("direct"),[ls,fn]=b.useState(0),[Pl,le]=b.useState(!1),[$,Ee]=b.useState(null),[_e,Me]=b.useState({player1:"",player2:""}),[$e,Fe]=b.useState(!1),[Je,Ct]=b.useState(null),[ct,_t]=b.useState(!1),[ft,qe]=b.useState(!1),[xe,Pe]=b.useState(!1),[Qe,et]=b.useState([]),[Yt,Xt]=b.useState(!1),[Rn,Yr]=b.useState(!1),[Ht,tt]=b.useState(!1),[ra,ma]=b.useState(!1),[Qa,Tn]=b.useState(null),[Ba,Ca]=b.useState(null),[gn,hn]=b.useState("normal"),[yn,tr]=b.useState(null),Ja=b.useRef(null);Qn();const{isMobile:Ha}=Cy();b.useEffect(()=>{(async()=>{try{const De=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);console.log("Device Info:",{userAgent:navigator.userAgent,isMobile:De,backendUrl:pe,protocol:window.location.protocol,hostname:window.location.hostname}),console.log("Testing backend connection...");const Ue=await fetch(`${pe}/health`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors",credentials:"include"});Ue.ok?console.log("✅ Backend connection successful"):console.error("❌ Backend connection failed:",Ue.status,Ue.statusText)}catch(De){console.error("❌ Backend connection error:",De),console.error("Error details:",{name:De.name,message:De.message,stack:De.stack})}})()},[]),b.useEffect(()=>{Xn(ht.length)},[ht]),b.useEffect(()=>{_o(Qt.length)},[Qt]),b.useEffect(()=>{async function ee(){try{const Ue=await(await fetch(`${pe}/api/messages/unread?user=${encodeURIComponent(c)}`)).json();Array.isArray(Ue)&&fn(Ue.length)}catch(De){console.error("Failed to fetch unread messages:",De)}}if(c){ee();const De=setInterval(ee,3e4);return()=>clearInterval(De)}},[c]),b.useEffect(()=>{if(!a||!r||!h||wn||on)return;const ee=ka==="challenge"?2:1,Ue=Mn.filter(Ia=>Ia.division===h&&Ia.phase===ee&&(Ia.player1&&Ia.player1.trim().toLowerCase()===He.toLowerCase()||Ia.player2&&Ia.player2.trim().toLowerCase()===He.toLowerCase())).length;ta(sn.length);const Wt=La.filter(Ia=>Ia.status==="confirmed"&&(Ia.completed===!1||Ia.completed===void 0)).length+sn.length,Nt=Math.max(0,Ue-Wt);ba(Nt),rn(Ue)},[a,r,h,Mn,sn,La,wn,on]);const Fn=(()=>{if(!a||!r||!h)return 0;const De=Mn.filter(Ue=>Ue.division===h&&(Ue.player1&&Ue.player1.trim().toLowerCase()===He.toLowerCase()||Ue.player2&&Ue.player2.trim().toLowerCase()===He.toLowerCase())).length;return De===0&&ka==="scheduled"?(console.log("No schedule matches found, using fallback of 6 matches for Phase 1"),6):De})();b.useEffect(()=>{let ee=!0;async function De(){try{const Ue=await fetch(`${pe}/api/users/search?approved=true`);if(!Ue.ok)throw new Error("Failed to fetch players from database");const kt=await Ue.json();if(!kt.users||kt.users.length===0){ee&&Te([]);return}const Wt=kt.users.map(Nt=>({firstName:Nt.firstName||"",lastName:Nt.lastName||"",email:Nt.email||"",phone:Nt.phone||"",locations:Nt.locations||"",availability:Nt.availability||{Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},pin:Nt.pin||"",preferredContacts:Nt.preferredContacts||[],division:Nt.division||"",divisions:Nt.divisions||[]})).filter(Nt=>Nt.email&&Nt.firstName&&Nt.lastName);if(ee){Te(Wt),qd(Wt);const Nt=Wt.find(Ia=>Ia.firstName===a&&Ia.lastName===r);Nt&&Ol(Nt)}}catch(Ue){console.error("Error loading players:",Ue),ee&&(Te([]),qd([]),Ol(null))}}return De(),()=>{ee=!1}},[]),b.useEffect(()=>{c&&Cw.getUser(c).then(ee=>{let De=[];Array.isArray(ee.divisions)?De=ee.divisions.map(Ue=>Ue.trim()).filter(Boolean):typeof ee.divisions=="string"?De=ee.divisions.split(",").map(Ue=>Ue.trim()).filter(Boolean):De=[],f(De)}).catch(()=>{f([])})},[c]),b.useEffect(()=>{g.length>0?v(g[0]):v("")},[g]),b.useEffect(()=>{if(!c)return;(async()=>{try{const De=await fetch(`${pe}/api/unified-auth/profile-data?email=${encodeURIComponent(c)}&appType=league&t=${Date.now()}`);if(De.ok){const Ue=await De.json();console.log("Loaded league profile data:",Ue),Ue.success&&Ue.profile&&Ol(kt=>({...kt,locations:Ue.profile.locations||"",availability:Ue.profile.availability||{}}))}}catch(De){console.error("Error loading profile data:",De)}})()},[c]);const ar=async()=>{X("");try{const ee=await Pm.createNote(R.trim());Hr(ee,"add"),D(""),F(!1)}catch{X("Failed to add note")}},Gr=async ee=>{if(window.confirm("Delete this note?"))try{await Pm.deleteNote(ee),Hr({_id:ee},"remove")}catch(De){console.error("Failed to delete note:",De)}},Xa=async()=>{if(window.confirm("Are you sure you want to clear all notes?"))try{for(const ee of Dn)await Pm.deleteNote(ee._id);setNotes([]),hr()}catch(ee){console.error("Failed to clear notes:",ee)}};async function qr(ee){if(Z)try{await ur.counterProposal(Z._id,ee),U(!1),H(null),Wa(),Tt()}catch(De){console.error("Failed to counter proposal:",De)}}function is(){te(!1),T(null)}const No=ka==="challenge"?2:1,Ll=Mn.filter(ee=>ee.division===h&&(!ee.phase||ee.phase===No)&&(ee.player1&&ee.player1.trim().toLowerCase()===He.toLowerCase()||ee.player2&&ee.player2.trim().toLowerCase()===He.toLowerCase())),qi=Array.from(new Set(Ll.map(ee=>ee.player1&&ee.player1.trim().toLowerCase()===He.toLowerCase()?ee.player2Email||ee.player2EmailAddress||ee.player2Email||ee.player2||null:ee.player2&&ee.player2.trim().toLowerCase()===He.toLowerCase()&&(ee.player1Email||ee.player1EmailAddress||ee.player1Email||ee.player1)||null).filter(Boolean)));function Zi(){var Ue,kt;const ee=new Set,De=[];for(const Wt of Ll){const Nt=Wt.player1&&Wt.player1.trim().toLowerCase()===He.toLowerCase()?Wt.player2:Wt.player1;if(sn.some(dt=>{var Do,Fl;const Un=[(Do=dt.player1Id)==null?void 0:Do.trim().toLowerCase(),(Fl=dt.player2Id)==null?void 0:Fl.trim().toLowerCase()];return dt.division===h&&Un.includes(He.toLowerCase())&&Un.includes(Nt==null?void 0:Nt.trim().toLowerCase())}))continue;let Ao=!1;for(let dt=0;dt<La.length;dt++){if(ee.has(dt))continue;const Un=La[dt],Do=[(Ue=Un.player1Id)==null?void 0:Ue.trim().toLowerCase(),(kt=Un.player2Id)==null?void 0:kt.trim().toLowerCase()];if(Un.division===h&&Do.includes(He.toLowerCase())&&Do.includes(Nt==null?void 0:Nt.trim().toLowerCase())){ee.add(dt),Ao=!0;break}}Ao||De.push(Wt)}return De}const Zs=Zi().map(ee=>{var kt,Wt;const De=ee.player1&&ee.player1.trim().toLowerCase()===He.toLowerCase()?(kt=ee.player2)==null?void 0:kt.trim():(Wt=ee.player1)==null?void 0:Wt.trim();if(!De)return null;const Ue=Oe.find(Nt=>`${Nt.firstName} ${Nt.lastName}`.trim().toLowerCase()===De.toLowerCase());return{match:ee,player:Ue,opponentName:De}}).filter(Boolean);function Hd(ee){const De=Zs.find(kt=>kt.opponentName&&kt.opponentName.trim().toLowerCase()===ee.trim().toLowerCase()),Ue=(De==null?void 0:De.player)||Oe.find(kt=>`${kt.firstName} ${kt.lastName}`.trim().toLowerCase()===ee.trim().toLowerCase());if(!Ue){alert("Player data not found for: "+ee);return}if(Qi){af(Ue);return}if(!Ue.email){alert("This opponent does not have an email on file and cannot be proposed a match.");return}je(Ue),Le(!0),ye(!1)}function $d(){if(console.log("Smart match button clicked!"),console.log("currentUser:",Vs),console.log("allPlayers:",nr),console.log("allPlayers length:",nr==null?void 0:nr.length),!Vs||!nr||nr.length===0){console.log("Player data not available, showing alert"),alert("Player data not available for smart match. Please try again.");return}ye(!0),cs(!0)}function af(ee){lf(ee),ye(!1),cs(!1),Gd(!0)}b.useEffect(()=>{if(!c||!a||!h||!ua||ka!=="scheduled")return;const ee=async()=>{try{await _z.checkAndSendDeadlineReminder(c,`${a} ${r}`,h)}catch(Ue){console.error("Error checking deadline reminders:",Ue)}};ee();const De=setInterval(ee,60*60*1e3);return()=>clearInterval(De)},[c,a,r,h,ua,ka]);const Zr=La.filter(ee=>ee.division===h).filter(ee=>{if(er){let De="";if(ee.player1Id&&ee.player2Id?ee.player1Id.trim().toLowerCase()===He.trim().toLowerCase()?De=ee.player2Id:De=ee.player1Id:ee.senderName&&ee.receiverName&&(ee.senderName.trim().toLowerCase()===He.trim().toLowerCase()?De=ee.receiverName:De=ee.senderName),!De.toLowerCase().includes(er.toLowerCase()))return!1}return!(Ce!=="all"&&(Ce==="completed"&&ee.status!=="completed"||Ce==="pending"&&ee.status!=="pending"||Ce==="upcoming"&&ee.status==="completed"))}).sort((ee,De)=>{switch(it){case"date":const Ue=ee.scheduledDate?new Date(ee.scheduledDate):new Date(ee.date||0),kt=De.scheduledDate?new Date(De.scheduledDate):new Date(De.date||0);return Ue-kt;case"opponent":let Wt="",Nt="";return ee.player1Id&&ee.player2Id?Wt=ee.player1Id.trim().toLowerCase()===He.trim().toLowerCase()?ee.player2Id:ee.player1Id:ee.senderName&&ee.receiverName&&(Wt=ee.senderName.trim().toLowerCase()===He.trim().toLowerCase()?ee.receiverName:ee.senderName),De.player1Id&&De.player2Id?Nt=De.player1Id.trim().toLowerCase()===He.trim().toLowerCase()?De.player2Id:De.player1Id:De.senderName&&De.receiverName&&(Nt=De.senderName.trim().toLowerCase()===He.trim().toLowerCase()?De.receiverName:De.senderName),Wt.localeCompare(Nt);case"status":const Ia={pending:1,confirmed:2,completed:3},Ao=Ia[ee.status]||0,dt=Ia[De.status]||0;return Ao-dt;default:return 0}});function zl(ee){T(ee),te(!0)}const nf=q&&e.createElement(Bt,{open:q,onClose:()=>{oe(!1),ie(""),ot("all"),mt("date")},title:`🎯 All Upcoming Matches (${Zr.length})`,maxWidth:"900px",className:"all-matches-modal"},e.createElement("div",{style:{display:"flex",gap:"8px",flexWrap:Ha?"wrap":"nowrap",alignItems:"center",marginBottom:"8px"}},e.createElement("div",{style:{flex:1,minWidth:Ha?"100%":"200px",position:"relative"}},e.createElement("input",{type:"text",placeholder:"Search by opponent name...",value:er,onChange:ee=>ie(ee.target.value),style:{width:"100%",padding:"8px 12px 8px 36px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff",fontSize:"0.9rem",outline:"none",transition:"all 0.2s ease"},onFocus:ee=>{ee.target.style.border="1px solid rgba(255, 255, 255, 0.4)",ee.target.style.background="rgba(0, 0, 0, 0.5)"},onBlur:ee=>{ee.target.style.border="1px solid rgba(255, 255, 255, 0.2)",ee.target.style.background="rgba(0, 0, 0, 0.3)"}}),e.createElement("span",{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#888",fontSize:"0.9rem"}},"🔍")),e.createElement("select",{value:Ce,onChange:ee=>ot(ee.target.value),style:{padding:"8px 12px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff",fontSize:"0.9rem",outline:"none",cursor:"pointer",minWidth:Ha?"100%":"120px"},onFocus:ee=>{ee.target.style.border="1px solid rgba(255, 255, 255, 0.4)"},onBlur:ee=>{ee.target.style.border="1px solid rgba(255, 255, 255, 0.2)"}},e.createElement("option",{value:"all"},"All Matches"),e.createElement("option",{value:"upcoming"},"Upcoming"),e.createElement("option",{value:"completed"},"Completed"),e.createElement("option",{value:"pending"},"Pending")),e.createElement("select",{value:it,onChange:ee=>mt(ee.target.value),style:{padding:"8px 12px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff",fontSize:"0.9rem",outline:"none",cursor:"pointer",minWidth:Ha?"100%":"100px"},onFocus:ee=>{ee.target.style.border="1px solid rgba(255, 255, 255, 0.4)"},onBlur:ee=>{ee.target.style.border="1px solid rgba(255, 255, 255, 0.2)"}},e.createElement("option",{value:"date"},"Sort by Date"),e.createElement("option",{value:"opponent"},"Sort by Opponent"),e.createElement("option",{value:"status"},"Sort by Status"))),e.createElement("div",{style:{flex:1,overflowY:"auto",height:"450px",minHeight:"200px"}},Zr.length===0?e.createElement("div",{style:{textAlign:"center",padding:"40px 20px",color:"#888",fontSize:"1.1rem"}},e.createElement("div",{style:{fontSize:"3rem",marginBottom:"16px"}},"📅"),e.createElement("div",{style:{marginBottom:"8px",fontWeight:"bold"}},"No matches found"),e.createElement("div",{style:{fontSize:"0.9rem"}},"You don't have any upcoming matches scheduled.")):e.createElement("div",{style:{display:"grid",gap:"12px",gridTemplateColumns:Ha?"1fr":"repeat(auto-fit, minmax(300px, 1fr))",maxWidth:"100%"}},Zr.map((ee,De)=>{let Ue="",kt="",Wt="upcoming";if(ee.player1Id&&ee.player2Id)if(ee.player1Id.trim().toLowerCase()===He.trim().toLowerCase()?Ue=ee.player2Id:Ue=ee.player1Id,ee.scheduledDate){const dt=new Date(ee.scheduledDate);isNaN(dt.getTime())?kt="[Invalid Date]":kt=$x(dt.toISOString().split("T")[0])}else kt="[No Date]";else if(ee.senderName&&ee.receiverName&&(ee.senderName.trim().toLowerCase()===He.trim().toLowerCase()?Ue=ee.receiverName:Ue=ee.senderName),ee.date){const dt=ee.date.split("-");if(dt.length===3){const[Un,Do,Fl]=dt,eu=new Date(`${Un}-${Do}-${Fl}`);isNaN(eu.getTime())?kt="[Invalid Date]":kt=$x(ee.date)}else kt="[Invalid Date]"}else kt="[No Date]";ee.status;const Nt=ee.status==="completed";Nt?Wt="completed":ee.status==="pending"&&(Wt="pending");const Ia=dt=>{switch(dt){case"completed":return"#10b981";case"pending":return"#f59e0b";default:return"var(--accent-red)"}},Ao=dt=>{switch(dt){case"completed":return"✅";case"pending":return"⏳";default:return"📅"}};return e.createElement("div",{key:ee._id||De,style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.04) 100%)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.15)",padding:"12px",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},onMouseEnter:dt=>{dt.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.06) 100%)",dt.currentTarget.style.border="1px solid rgba(229, 62, 62, 0.3)",dt.currentTarget.style.transform="translateY(-2px)",dt.currentTarget.style.boxShadow="0 8px 24px rgba(229, 62, 62, 0.2)"},onMouseLeave:dt=>{dt.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.04) 100%)",dt.currentTarget.style.border="1px solid rgba(255, 255, 255, 0.15)",dt.currentTarget.style.transform="translateY(0)",dt.currentTarget.style.boxShadow="none"}},e.createElement("div",{style:{position:"absolute",top:"16px",right:"16px",background:Ia(Wt),color:"#fff",padding:"6px 12px",borderRadius:"16px",fontSize:"0.8rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"}},Ao(Wt)," ",Wt),e.createElement("div",{style:{textAlign:"center",marginBottom:"8px",paddingRight:"100px"}},e.createElement("div",{style:{fontSize:"1.2rem",fontWeight:"700",color:"#fff",textShadow:"0 2px 4px rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",flexWrap:"wrap"}},e.createElement("span",null,a," ",r),e.createElement("span",{style:{color:"var(--accent-red)",fontSize:"1rem",fontWeight:"600"}},"VS"),e.createElement("span",null,Ue||"[Unknown Opponent]"))),e.createElement("div",{style:{display:"flex",justifyContent:"center",gap:"16px",marginBottom:"12px",fontSize:"0.9rem",color:"#ccc"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:"rgba(255, 255, 255, 0.1)",padding:"8px 12px",borderRadius:"8px"}},"📅 ",kt),ee.location&&e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:"rgba(255, 255, 255, 0.1)",padding:"8px 12px",borderRadius:"8px"}},"📍 ",ee.location)),e.createElement("div",{style:{display:"flex",gap:"8px",justifyContent:"center"}},e.createElement("button",{onClick:()=>zl(ee),style:{padding:"8px 16px",background:"linear-gradient(135deg, var(--accent-red), var(--accent-red-dark))",border:"none",borderRadius:"8px",color:"#fff",fontSize:"0.85rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(229, 62, 62, 0.3)",minWidth:"100px"},onMouseEnter:dt=>{dt.target.style.transform="translateY(-1px)",dt.target.style.boxShadow="0 4px 16px rgba(229, 62, 62, 0.5)"},onMouseLeave:dt=>{dt.target.style.transform="translateY(0)",dt.target.style.boxShadow="0 2px 8px rgba(229, 62, 62, 0.3)"}},"📋 View Details"),!Nt&&e.createElement(Sw,{className:we.dashboardBtn+" "+we.matchCardDoneBtn,loading:$t===ee._id,loadingText:"Completing...",style:{padding:"8px 16px",fontSize:"0.85rem",fontWeight:"600",background:"linear-gradient(135deg, #6c757d, #5a6268)",border:"none",borderRadius:"8px",color:"#fff",cursor:"pointer",transition:"all 0.2s ease",minWidth:"100px",boxShadow:"0 2px 8px rgba(108, 117, 125, 0.3)"},onMouseEnter:dt=>{$t!==ee._id&&(dt.target.style.background="linear-gradient(135deg, #10b981, #059669)",dt.target.style.transform="translateY(-1px)",dt.target.style.boxShadow="0 4px 16px rgba(16, 185, 129, 0.5)")},onMouseLeave:dt=>{$t!==ee._id&&(dt.target.style.background="linear-gradient(135deg, #6c757d, #5a6268)",dt.target.style.transform="translateY(0)",dt.target.style.boxShadow="0 2px 8px rgba(108, 117, 125, 0.3)")},onClick:()=>{let dt="",Un="";ee.player1Id&&ee.player2Id?(dt=ee.player1Id,Un=ee.player2Id):ee.type==="scheduled"?(dt=ee.player1,Un=ee.player2):(dt=ee.senderName,Un=ee.receiverName),Ee(ee),Me({player1:dt,player2:Un}),le(!0)},type:"button"},"✅ Mark as Complete")))}))),e.createElement("div",{style:{padding:"8px 0 0",borderTop:"1px solid rgba(255, 255, 255, 0.1)",marginTop:"8px",textAlign:"center"}},e.createElement("div",{style:{fontSize:"0.9rem",color:"#888"}},"Showing ",Zr.length," match",Zr.length!==1?"es":""))),Yd=[...La.filter(ee=>{var De,Ue;return ee.division===h&&[(De=ee.player1Id)==null?void 0:De.trim().toLowerCase(),(Ue=ee.player2Id)==null?void 0:Ue.trim().toLowerCase()].includes(He.toLowerCase())}),...sn.filter(ee=>{var De,Ue;return ee.division===h&&[(De=ee.player1Id)==null?void 0:De.trim().toLowerCase(),(Ue=ee.player2Id)==null?void 0:Ue.trim().toLowerCase()].includes(He.toLowerCase())})];Array.from(new Set(Yd.map(ee=>ee._id))).map(ee=>Yd.find(De=>De._id===ee)).length;const[rf,Vi]=b.useState(!1),[of,Gd]=b.useState(!1),[Vs,Ol]=b.useState(null),[nr,qd]=b.useState([]),[sf,lf]=b.useState(null),[Qi,cs]=b.useState(!1);[...ht.filter(ee=>ee.status==="pending"&&ee.receiverName===He),...Qt.filter(ee=>ee.status==="countered"&&ee.senderName===He)],[...Qt.filter(ee=>ee.status==="pending"&&ee.senderName===He),...ht.filter(ee=>ee.status==="countered"&&ee.receiverName===He)],console.log("🎯 Dashboard: showOpponents state:",nt),console.log("🎯 Dashboard: simulationRef.current:",!!Ja.current);const cf=nt&&Ja.current?Md.createPortal(e.createElement("div",{style:{position:"absolute",top:Ja.current.getBoundingClientRect().top+window.scrollY,left:Ja.current.getBoundingClientRect().left+window.scrollX,width:Ja.current.offsetWidth,height:Ja.current.offsetHeight,zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.6)",pointerEvents:"auto"}},e.createElement(f5,{open:nt,onClose:()=>ye(!1),opponents:Zs,onOpponentClick:Hd,phase:ka,selectedCalendarDate:We,smartMatchMode:Qi,allPlayers:nr})),document.body):null,Io=c==="guest@frontrangepool.com",Zd=Io?!1:on,Vd=Io?!1:wn,Qd=Io?!1:jr,Jd=Io?!1:An,Xd=Io?!1:no,Kd=Io?!1:yr;return e.createElement("div",{className:we.dashboardBg,style:{position:"relative"}},e.createElement("style",null,`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
          }
        `),Ha?e.createElement(gz,{playerName:a,playerLastName:r,pendingProposals:ht,sentProposals:Qt,matches:sn,notes:Dn,standings:Wr,schedule,proposalsLoading:Zd,matchesLoading:Vd,notesLoading:Qd,seasonLoading:Jd,standingsLoading:Xd,scheduleLoading:Kd,setShowMatchProposalModal:()=>setShowMatchProposalModal(!0),onViewMatch:zl,onViewProposal:ee=>{_(ee),un(!0)},onViewStandings:()=>x(!0),onViewSchedule:()=>ma(!0),onQuickAction:()=>setShowMatchProposalModal(!0)}):e.createElement("div",{className:we.dashboardFrame,style:{position:"relative",zIndex:1}},e.createElement("div",{className:we.dashboardCard,style:{position:"relative",zIndex:1,padding:"20px",margin:"16px"}},e.createElement(Fw,{playerName:a,playerLastName:r,isMobile:Ha,userPin:n,playerEmail:c,proposalsLoading:Zd,matchesLoading:Vd,notesLoading:Qd,seasonLoading:Jd,standingsLoading:Xd,scheduleLoading:Kd,styles:we}),e.createElement(Uw,{divisions:g,selectedDivision:h,onDivisionChange:ee=>v(ee.target.value),isMobile:Ha}),e.createElement(Ww,{isMobile:Ha,styles:we,effectivePhase:ka,seasonData:ua,completedMatches:sn,totalRequiredMatches:Fn,playerName:a,playerLastName:r,selectedDivision:h,pendingCount:br,sentCount:Sa,filteredUpcomingMatches:Zr,currentUser:Vs,allPlayers:nr,showPhase1Rules:Rn,setShowPhase1Rules:Yr,setShowPhase1Overview:tt,setPlayerStats:Tn,setTimeLeft:Ca,setDeadlineStatus:hn,setPhase1EndDate:tr,onOpenOpponentsModal:ee=>{console.log("🎯 Dashboard: onOpenOpponentsModal called with date:",ee),Ze(ee),ee?(console.log("🎯 Dashboard: Setting smart match mode to false"),cs(!1)):(console.log("🎯 Dashboard: Setting smart match mode to true"),cs(!0)),console.log("🎯 Dashboard: Setting showOpponents to true"),ye(!0)},onOpenCompletedMatchesModal:()=>Vi(!0),onOpenStandingsModal:()=>x(!0),onOpenDefenseChallengersModal:()=>N(!0),onOpenAllMatchesModal:()=>oe(!0),onOpenProposalListModal:()=>I(!0),onOpenSentProposalListModal:()=>M(!0),onOpenPlayerSearch:()=>Ve(!0),onMatchClick:zl,onSmartMatchClick:$d,onOpenMessageCenter:ee=>{qs(ee),pt(!0)},onOpenCalendar:()=>ma(!0),simulationRef:Ja,opponentsModalPortal:cf}),e.createElement(jw,{notes:Dn,notesLoading:jr,noteError:j,userPin:n,onDeleteNote:Gr,onClearNotes:Xa,styles:we}),!Io&&m&&e.createElement(Hw,{userPin:n,loadingPendingRegistrations:Yt,phaseOverride:J,selectedDivision:h,BACKEND_URL:pe,styles:we,onShowRegistrationModal:()=>_t(!0),onLoadPendingRegistrations:Xt,onSetPendingRegistrations:et,onShowPendingRegistrationsModal:()=>qe(!0),onCreateTestRegistration:async()=>{try{const ee={firstName:"Test",lastName:"Player",email:`testplayer${Date.now()}@example.com`,phone:"555-1234",textNumber:"555-5678",emergencyContactName:"Emergency Contact",emergencyContactPhone:"555-9999",preferredContacts:["email","text"],availability:{Mon:["6:00 PM - 8:00 PM"],Tue:["8:00 PM - 10:00 PM"],Wed:[],Thu:["4:00 PM - 6:00 PM"],Fri:[],Sat:["2:00 PM - 4:00 PM"],Sun:["10:00 AM - 12:00 PM"]},locations:`Test Pool Hall
Community Center
Sports Bar`,pin:"1234",division:"FRBCAPL TEST",notes:"Test registration created by admin"},De=await fetch(`${pe}/api/users/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ee)});if(De.ok){const Ue=await De.json();alert(`✅ Test registration created successfully!

Player: Test Player
Email: `+ee.email+`

You can now approve this registration.`);const kt=await fetch(`${pe}/api/users/pending-registrations`);if(kt.ok){const Wt=await kt.json();et(Wt)}}else{const Ue=await De.json();alert("Failed to create test registration: "+Ue.error)}}catch(ee){console.error("Error creating test registration:",ee),alert("Error creating test registration: "+ee.message)}},onShowNoteModal:()=>F(!0),onShowPendingClaimsModal:()=>Pe(!0),onGoToAdmin:o,onGoToPlatformAdmin:u,isSuperAdmin:Sn,onActivatePhase2:()=>{},onSetPhaseOverride:Ae,onRefreshSeasonData:async()=>{try{const[ee,De]=await Promise.all([Zo.getCurrentSeason(h),Zo.getCurrentPhaseAndWeek(h)]);setSeasonData((ee==null?void 0:ee.season)||null),setCurrentPhaseInfo(De)}catch(ee){console.error("Error refreshing season data:",ee)}}}))),e.createElement($w,{showPlayerSearch:lt,showAdminPlayerSearch:zt,showPlayerAvailability:Ge,showProposalModal:ze,selectedOpponent:de,proposalData:re,fullName:He,senderEmail:c,selectedDivision:h,effectivePhase:ka,playerName:a,playerLastName:r,onClosePlayerSearch:()=>Ve(!1),onCloseAdminPlayerSearch:()=>ve(!1),onClosePlayerAvailability:()=>{Le(!1),je(null)},onCloseProposalModal:()=>gt(!1),onProposeMatch:(ee,De)=>{Be({player:de,day:ee,slot:De,selectedDivision:h,phase:ka}),gt(!0),Le(!1),je(null)},onProposalComplete:()=>{},onUpdateProposalLocally:Va,onRefetchMatches:Wa,onRefetchProposals:Tt}),e.createElement(Yw,{showStandings:S,showDefenseChallengers:E,modalOpen:G,showNoteModal:V,showProposalListModal:C,showSentProposalListModal:z,showCounterModal:O,showProposalDetailsModal:ko,selectedMatch:W,selectedProposal:A,counterProposal:Z,newNote:R,noteError:j,proposalNote:k,pendingProposals:ht,sentProposals:Qt,players:Oe,STANDINGS_URLS:kz,onCloseStandings:()=>x(!1),onCloseDefenseChallengers:()=>N(!1),onCloseModal:is,onCloseNoteModal:()=>F(!1),onCloseProposalListModal:()=>I(!1),onCloseSentProposalListModal:()=>M(!1),onCloseCounterModal:()=>{U(!1),H(null)},onCloseProposalDetailsModal:()=>{un(!1),_(null)},onAddNote:ar,onUpdateNewNote:ee=>D(ee.target.value),onSelectProposal:ee=>{const De=c&&ee.senderEmail&&c.toLowerCase()===ee.senderEmail.toLowerCase()||`${a} ${r}`.toLowerCase()===(ee.senderName||"").toLowerCase();_(ee),B(""),I(!1),un(De)},onSelectSentProposal:ee=>{const De=c&&ee.senderEmail&&c.toLowerCase()===ee.senderEmail.toLowerCase()||`${a} ${r}`.toLowerCase()===(ee.senderName||"").toLowerCase();_(ee),B(""),M(!1),un(De)},onConfirmProposal:async()=>{await ur.updateProposalStatus(A._id,"confirmed",k),_(null),B(""),Wa(),Tt()},onCounterPropose:()=>{H(A),U(!0),_(null)},onSubmitCounterProposal:qr,onEditProposal:()=>{A.isCounter?(un(!1),setTimeout(()=>{_(null),H(A),U(!0)},100)):(un(!1),setTimeout(()=>{_(null),$r(!0)},100))},onDeleteProposal:async()=>{if(window.confirm("Are you sure you want to delete this proposal?"))try{await ur.deleteProposal(A._id),un(!1),_(null),Tt()}catch(ee){console.error("Error deleting proposal:",ee),alert("Failed to delete proposal")}},onUpdateProposalLocally:Va,onRefetchMatches:Wa,onRefetchProposals:Tt,selectedDivision:h,effectivePhase:ka,userPin:n,playerName:a,playerLastName:r,senderEmail:c,styles:we,proposalService:ur}),e.createElement(qw,{showEditProposalModal:Kn,showChatModal:rt,showCompletedModal:rf,winnerModalOpen:Pl,validationModalOpen:$e,showSmartMatchmakingModal:of,showPhase1Rules:Rn,showPhase1Overview:Ht,showRegistrationModal:ct,showPendingRegistrationsModal:ft,showCalendarModal:ra,selectedProposal:A,chatType:It,opponentEmails:qi,completedMatches:sn,winnerModalPlayers:_e,winnerModalMatch:$,matchToValidate:Je,selectedOpponentForSmartMatch:sf,pendingRegistrations:Qe,onCloseEditProposalModal:()=>$r(!1),onCloseChatModal:()=>pt(!1),onCloseCompletedModal:()=>Vi(!1),onCloseWinnerModal:()=>le(!1),onCloseValidationModal:()=>{Fe(!1),Ct(null)},onCloseSmartMatchmakingModal:()=>Gd(!1),onClosePhase1Rules:()=>Yr(!1),onClosePhase1Overview:()=>tt(!1),onCloseRegistrationModal:()=>_t(!1),onClosePendingRegistrationsModal:()=>qe(!1),onCloseCalendarModal:()=>ma(!1),onSaveEditProposal:ee=>{_(ee),Tt(),$r(!1)},onProposalUpdated:ee=>{ss(ee),Tt()},onSelectWinner:async ee=>{if($){if((Na==null?void 0:Na.phase)==="scheduled"&&ua&&Zo.hasPhase1DeadlinePassed(ua)&&!window.confirm(`⚠️ PHASE 1 DEADLINE HAS PASSED!

You are attempting to complete a match after the Phase 1 deadline. This may affect your standings or eligibility for Phase 2.

Do you want to continue marking this match as completed?`)){le(!1);return}le(!1),Jt($._id);try{const Ue=await(await fetch(`${pe}/api/matches?proposalId=${$._id}`)).json();if(Ue.length>0){const kt=Ue[0]._id;await fetch(`${pe}/api/matches/${kt}/complete`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({winner:ee,score:"TBD",notes:`Completed by ${a} ${r}`})})}else await ur.markCompleted($._id,ee);Jn({...$,winner:ee}),Wa(),Tt()}catch(De){console.error("Error completing match:",De),alert("Failed to mark as completed.")}Jt(null)}},onValidateMatch:async ee=>{console.log("Validating match:",ee),Wa()},onRejectMatch:async ee=>{console.log("Rejecting match:",ee),Wa()},onSmartMatchProposalComplete:()=>{Wa(),Tt()},onUserUpdate:ee=>{Ol(ee)},onRegistrationSuccess:ee=>{console.log("New player registered by admin:",ee),_t(!1),window.location.reload()},onApproveRegistration:async ee=>{const Ue=document.getElementById(`division-${ee._id}`).value;if(!Ue){alert("Please select a division before approving.");return}const kt={hasPaid:!0,paymentDate:new Date,paymentMethod:"Cash",paymentNotes:"Approved by admin"};try{const Wt=await fetch(`${pe}/api/users/admin/approve-registration/${ee._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approvedBy:`${a} ${r}`,paymentInfo:kt,division:Ue})});if(Wt.ok)alert(`Registration approved successfully!

Player: ${ee.firstName} ${ee.lastName}
Division: ${Ue}`),et(Nt=>Nt.filter(Ia=>Ia._id!==ee._id));else{const Nt=await Wt.json();alert("Failed to approve: "+Nt.error)}}catch(Wt){console.error("Error approving registration:",Wt),alert("Error approving registration")}},onRejectRegistration:async ee=>{const De=prompt("Enter rejection reason (optional):");if(De!==null)try{const Ue=await fetch(`${pe}/api/users/admin/reject-registration/${ee._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rejectedBy:`${a} ${r}`,notes:De})});if(Ue.ok)alert("Registration rejected successfully!"),et(kt=>kt.filter(Wt=>Wt._id!==ee._id));else{const kt=await Ue.json();alert("Failed to reject: "+kt.error)}}catch(Ue){console.error("Error rejecting registration:",Ue),alert("Error rejecting registration")}},onOpenOpponentsModal:ee=>{console.log("🎯 Dashboard: Calendar modal calling onOpenOpponentsModal with date:",ee),Ze(ee),ee?(console.log("🎯 Dashboard: Setting smart match mode to false"),cs(!1)):(console.log("🎯 Dashboard: Setting smart match mode to true"),cs(!0)),console.log("🎯 Dashboard: Setting showOpponents to true"),ye(!0),ma(!1)},onMatchClick:zl,onSmartMatchClick:$d,selectedDivision:h,effectivePhase:ka,userPin:n,playerName:a,playerLastName:r,senderEmail:c,isMobile:Ha,currentUser:Vs,players:Oe,filteredUpcomingMatches:Zr,phase1EndDate:yn,playerStats:Qa,standings:Wr,timeLeft:Ba,deadlineStatus:gn,allPlayers:nr,styles:we,proposalService:ur,seasonService:Zo,seasonData:ua,currentPhaseInfo:Na,BACKEND_URL:pe,markMatchCompleted:Jn,setCompletingMatchId:Jt,updateCompletedMatch:ss,refetchMatches:Wa,refetchProposals:Tt,setPendingRegistrations:et}),nf,xe&&e.createElement(Nz,{onClose:()=>Pe(!1)}),c==="guest@frontrangepool.com"&&e.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:9999,width:"85%",maxWidth:"1000px",height:"500px",pointerEvents:"auto"}},e.createElement("div",{style:{background:"transparent",borderRadius:"12px",padding:"20px",width:"100%",height:"100%",overflow:"auto"}},e.createElement(kw,{currentPhase:"scheduled",seasonData:{_id:"guest-season-1",name:"BCAPL Singles Division - Guest Preview",division:"FRBCAPL TEST",startDate:new Date,endDate:new Date(Date.now()+60*24*60*60*1e3),phase1EndDate:new Date(Date.now()+42*24*60*60*1e3),totalWeeks:10,currentWeek:3,isActive:!0},completedMatches:[{_id:"guest-match-1",player1Id:"Guest User",player2Id:"John Smith",winner:"Guest User",score:"5-3",matchDate:new Date(Date.now()-7*24*60*60*1e3),status:"completed"},{_id:"guest-match-2",player1Id:"Guest User",player2Id:"Jane Doe",winner:"Jane Doe",score:"3-5",matchDate:new Date(Date.now()-14*24*60*60*1e3),status:"completed"}],totalRequiredMatches:6,playerName:a,playerLastName:r,selectedDivision:"FRBCAPL TEST",onOpenOpponentsModal:()=>alert("👥 Opponents Modal - Members only!"),onOpenCompletedMatchesModal:()=>alert("✅ Completed Matches - Members only!"),onOpenStandingsModal:()=>alert("📊 Standings - Members only!"),onOpenAllMatchesModal:()=>alert("📋 All Matches - Members only!"),pendingCount:2,sentCount:1,onOpenProposalListModal:()=>alert("📝 Proposals - Members only!"),onOpenSentProposalListModal:()=>alert("📤 Sent Proposals - Members only!"),upcomingMatches:[{_id:"guest-upcoming-1",player1Id:"Guest User",player2Id:"Mike Johnson",proposedDate:new Date(Date.now()+7*24*60*60*1e3),status:"pending"}],onMatchClick:()=>alert("🎯 Match Details - Members only!"),isMobile:Ha,onOpenMessageCenter:()=>alert("💬 Message Center - Members only!"),currentUser:Vs,allPlayers:[{firstName:"Guest",lastName:"User",email:"guest@frontrangepool.com"},{firstName:"John",lastName:"Smith",email:"john@example.com"},{firstName:"Jane",lastName:"Doe",email:"jane@example.com"},{firstName:"Mike",lastName:"Johnson",email:"mike@example.com"}],onSmartMatchClick:()=>alert("🧠 Smart Match - Members only!"),showPhase1Rules:Rn,setShowPhase1Rules:Yr,showPhase1Overview:Ht,setShowPhase1Overview:tt,setPlayerStats:Tn,setTimeLeft:Ca,setDeadlineStatus:hn,setPhase1EndDate:tr,onOpenCalendar:()=>alert("📅 Calendar - Members only!")}))))}const Az="_adminDashboardRoot_1xwqk_9",Dz="_adminDashboardNav_1xwqk_25",Mz="_navLeft_1xwqk_45",Rz="_navRight_1xwqk_45",Tz="_adminDashboardMainColumn_1xwqk_89",Pz="_banner_1xwqk_103",Lz="_slideIn_1xwqk_1",Bz="_success_1xwqk_125",zz="_error_1xwqk_137",Oz="_sectionNavigation_1xwqk_173",Fz="_sectionButton_1xwqk_193",Uz="_active_1xwqk_231",Wz="_sectionContent_1xwqk_245",jz="_overviewSection_1xwqk_263",Hz="_quickActions_1xwqk_301",$z="_quickActionButton_1xwqk_317",Yz="_workflowContainer_1xwqk_383",Gz="_workflowHeader_1xwqk_393",qz="_workflowProgress_1xwqk_427",Zz="_workflowSteps_1xwqk_445",Vz="_workflowStepIndicator_1xwqk_461",Qz="_pending_1xwqk_483",Jz="_completed_1xwqk_505",Xz="_stepNumber_1xwqk_517",Kz="_stepInfo_1xwqk_569",eO="_stepTitle_1xwqk_577",tO="_stepDescription_1xwqk_587",aO="_workflowContent_1xwqk_597",nO="_workflowStep_1xwqk_445",rO="_stepInstructions_1xwqk_621",oO="_instructionItem_1xwqk_637",sO="_stepActions_1xwqk_675",lO="_workflowButton_1xwqk_689",iO="_divisionForm_1xwqk_743",cO="_workflowInput_1xwqk_757",dO="_workflowNote_1xwqk_799",uO="_workflowResult_1xwqk_823",mO="_dataSyncTools_1xwqk_847",pO="_syncButton_1xwqk_863",fO="_syncResult_1xwqk_913",gO="_playerManagementContainer_1xwqk_941",hO="_tabHeader_1xwqk_951",yO="_tabButton_1xwqk_969",bO="_tabContent_1xwqk_1015",vO="_approvalSection_1xwqk_1029",xO="_loadingMessage_1xwqk_1039",EO="_emptyState_1xwqk_1053",wO="_registrationList_1xwqk_1075",SO="_registrationCard_1xwqk_1087",CO="_registrationHeader_1xwqk_1115",_O="_registrationNumber_1xwqk_1129",kO="_registrationDetails_1xwqk_1159",NO="_registrationActions_1xwqk_1185",IO="_divisionSelect_1xwqk_1199",AO="_approveButton_1xwqk_1243",DO="_rejectButton_1xwqk_1283",MO="_userSearchContainer_1xwqk_1325",RO="_searchForm_1xwqk_1335",TO="_searchInput_1xwqk_1347",PO="_searchButton_1xwqk_1387",LO="_searchResults_1xwqk_1425",BO="_userCard_1xwqk_1437",zO="_userInfo_1xwqk_1463",OO="_userHeader_1xwqk_1475",FO="_userName_1xwqk_1491",UO="_systemBadges_1xwqk_1509",WO="_leagueBadge_1xwqk_1525",jO="_ladderBadge_1xwqk_1549",HO="_bothBadges_1xwqk_1573",$O="_ladderInfo_1xwqk_1583",YO="_resultsSummary_1xwqk_1619",GO="_summaryCard_1xwqk_1627",qO="_summaryStats_1xwqk_1657",ZO="_summaryStat_1xwqk_1657",VO="_statNumber_1xwqk_1685",QO="_statLabel_1xwqk_1701",JO="_userEmail_1xwqk_1713",XO="_userContactInfo_1xwqk_1725",KO="_userPhone_1xwqk_1741",eF="_userTextNumber_1xwqk_1741",tF="_userDetails_1xwqk_1753",aF="_userAvailability_1xwqk_1783",nF="_availabilityGrid_1xwqk_1791",rF="_availabilityDay_1xwqk_1805",oF="_dayLabel_1xwqk_1819",sF="_timeSlots_1xwqk_1831",lF="_userActions_1xwqk_1851",iF="_addButton_1xwqk_1867",cF="_removeButton_1xwqk_1917",dF="_matchManagementContainer_1xwqk_1965",uF="_sectionHeader_1xwqk_1975",mF="_systemStatusContainer_1xwqk_2019",pF="_statsGrid_1xwqk_2029",fF="_statCard_1xwqk_2043",gF="_systemActions_1xwqk_2099",hF="_systemButton_1xwqk_2113",yF="_editButton_1xwqk_2317",bF="_modalOverlay_1xwqk_2357",vF="_modal_1xwqk_2357",xF="_modalHeader_1xwqk_2403",EF="_closeButton_1xwqk_2433",wF="_modalForm_1xwqk_2475",SF="_formRow_1xwqk_2487",CF="_formField_1xwqk_2499",_F="_modalActions_1xwqk_2569",kF="_cancelButton_1xwqk_2583",NF="_saveButton_1xwqk_2613",K={adminDashboardRoot:Az,adminDashboardNav:Dz,navLeft:Mz,navRight:Rz,adminDashboardMainColumn:Tz,banner:Pz,slideIn:Lz,success:Bz,error:zz,sectionNavigation:Oz,sectionButton:Fz,active:Uz,sectionContent:Wz,overviewSection:jz,quickActions:Hz,quickActionButton:$z,workflowContainer:Yz,workflowHeader:Gz,workflowProgress:qz,workflowSteps:Zz,workflowStepIndicator:Vz,pending:Qz,completed:Jz,stepNumber:Xz,stepInfo:Kz,stepTitle:eO,stepDescription:tO,workflowContent:aO,workflowStep:nO,stepInstructions:rO,instructionItem:oO,stepActions:sO,workflowButton:lO,divisionForm:iO,workflowInput:cO,workflowNote:dO,workflowResult:uO,dataSyncTools:mO,syncButton:pO,syncResult:fO,playerManagementContainer:gO,tabHeader:hO,tabButton:yO,tabContent:bO,approvalSection:vO,loadingMessage:xO,emptyState:EO,registrationList:wO,registrationCard:SO,registrationHeader:CO,registrationNumber:_O,registrationDetails:kO,registrationActions:NO,divisionSelect:IO,approveButton:AO,rejectButton:DO,userSearchContainer:MO,searchForm:RO,searchInput:TO,searchButton:PO,searchResults:LO,userCard:BO,userInfo:zO,userHeader:OO,userName:FO,systemBadges:UO,leagueBadge:WO,ladderBadge:jO,bothBadges:HO,ladderInfo:$O,resultsSummary:YO,summaryCard:GO,summaryStats:qO,summaryStat:ZO,statNumber:VO,statLabel:QO,userEmail:JO,userContactInfo:XO,userPhone:KO,userTextNumber:eF,userDetails:tF,userAvailability:aF,availabilityGrid:nF,availabilityDay:rF,dayLabel:oF,timeSlots:sF,userActions:lF,addButton:iF,removeButton:cF,matchManagementContainer:dF,sectionHeader:uF,systemStatusContainer:mF,statsGrid:pF,statCard:fF,systemActions:gF,systemButton:hF,editButton:yF,modalOverlay:bF,modal:vF,modalHeader:xF,closeButton:EF,modalForm:wF,formRow:SF,formField:CF,modalActions:_F,cancelButton:kF,saveButton:NF};function IF(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-"),m=new Date(parseInt(i),parseInt(c)-1,parseInt(u)),g=String(m.getMonth()+1).padStart(2,"0"),f=String(m.getDate()).padStart(2,"0"),h=m.getFullYear();return`${g}-${f}-${h}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}const Yx=pe;function AF({open:a,onClose:r}){const[t,n]=b.useState([]),[o,i]=b.useState(!0);b.useEffect(()=>{a&&(i(!0),fetch(`${Yx}/admin/unentered-matches`).then(u=>u.json()).then(u=>{n(u),i(!1)}))},[a]);const c=u=>{fetch(`${Yx}/admin/mark-lms-entered/${u}`,{method:"PATCH"}).then(m=>m.json()).then(()=>n(t.filter(m=>m._id!==u)))};return a?e.createElement(Bt,{open:a,onClose:r,title:"Confirmed Challenge Matches Needing LMS Entry",maxWidth:"520px"},o?e.createElement("div",{style:{color:"#fff",textAlign:"center",padding:"2rem"}},"Loading unentered matches..."):t.length===0?e.createElement("div",{style:{color:"#fff",textAlign:"center",padding:"2rem"}},"All matches are entered!"):e.createElement("ul",{style:{padding:0,listStyle:"none"}},t.map(u=>e.createElement("li",{key:u._id,style:{marginBottom:12,background:"#222",borderRadius:8,padding:"12px 14px",display:"flex",alignItems:"center",justifyContent:"space-between",borderLeft:"4px solid #c00"}},e.createElement("span",null,e.createElement("span",{style:{color:"#fff"}},e.createElement("b",null,IF(u.date))," — ",e.createElement("span",{style:{color:"#c00"}},u.senderName)," vs ",e.createElement("span",{style:{color:"#c00"}},u.receiverName),u.location&&e.createElement("span",{style:{color:"#fff"}}," @ ",u.location))),e.createElement("button",{style:{marginLeft:16,background:"#c00",color:"#fff",border:"none",borderRadius:5,padding:"7px 14px",fontWeight:"bold",cursor:"pointer",fontSize:"1em",transition:"background 0.2s"},onClick:()=>c(u._id)},"Mark as Entered"))))):null}const DF=({division:a,isAdmin:r=!1})=>{const[t,n]=b.useState([]),[o,i]=b.useState([]),[c,u]=b.useState(!0),[m,g]=b.useState(null),[f,h]=b.useState(null),[v,S]=b.useState(!1),[x,E]=b.useState(!1),[N,C]=b.useState(""),[I,A]=b.useState(""),[_,k]=b.useState(""),[B,z]=b.useState("");b.useEffect(()=>{a&&(M(),O())},[a]);const M=async()=>{try{u(!0);const[F,R]=await Promise.all([Mp(a,"scheduled"),Mp(a,"completed")]);n(F),i(R)}catch(F){console.error("Error loading matches:",F)}finally{u(!1)}},O=async()=>{try{const F=await bz(a);g(F)}catch(F){console.error("Error loading match stats:",F)}},U=async()=>{if(!(!f||!N||!I))try{await hz(f._id,N,I,_),S(!1),h(null),C(""),A(""),k(""),M(),O()}catch(F){console.error("Error completing match:",F),alert("Failed to complete match: "+F.message)}},Z=async()=>{if(f)try{await yz(f._id,B),E(!1),h(null),z(""),M(),O()}catch(F){console.error("Error cancelling match:",F),alert("Failed to cancel match: "+F.message)}},H=F=>new Date(F).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),V=F=>F.status==="completed"?"✅ Completed":F.status==="cancelled"?"❌ Cancelled":"⏳ Scheduled";return c?e.createElement("div",{className:we.loading},"Loading matches..."):e.createElement("div",{className:we.matchManager},m&&e.createElement("div",{className:we.matchStats},e.createElement("h3",null,"Match Statistics"),e.createElement("div",{className:we.statsGrid},e.createElement("div",{className:we.statItem},e.createElement("span",{className:we.statNumber},m.total),e.createElement("span",{className:we.statLabel},"Total Matches")),e.createElement("div",{className:we.statItem},e.createElement("span",{className:we.statNumber},m.scheduled),e.createElement("span",{className:we.statLabel},"Scheduled")),e.createElement("div",{className:we.statItem},e.createElement("span",{className:we.statNumber},m.completed),e.createElement("span",{className:we.statLabel},"Completed")))),e.createElement("div",{className:we.matchSection},e.createElement("h3",null,"Scheduled Matches (",t.length,")"),t.length===0?e.createElement("p",{className:we.noMatches},"No scheduled matches"):e.createElement("div",{className:we.matchList},t.map(F=>e.createElement("div",{key:F._id,className:we.matchCard},e.createElement("div",{className:we.matchHeader},e.createElement("span",{className:we.matchStatus},V(F)),e.createElement("span",{className:we.matchDate},H(F.scheduledDate))),e.createElement("div",{className:we.matchPlayers},e.createElement("span",{className:we.player1},F.player1Id),e.createElement("span",{className:we.vs},"vs"),e.createElement("span",{className:we.player2},F.player2Id)),e.createElement("div",{className:we.matchDetails},e.createElement("span",{className:we.location},"📍 ",F.location),e.createElement("span",{className:we.type},"🎯 ",F.type)),r&&e.createElement("div",{className:we.matchActions},e.createElement("button",{className:we.actionButton,onClick:()=>{h(F),S(!0)}},"Complete"),e.createElement("button",{className:`${we.actionButton} ${we.cancelButton}`,onClick:()=>{h(F),E(!0)}},"Cancel")))))),e.createElement("div",{className:we.matchSection},e.createElement("h3",null,"Completed Matches (",o.length,")"),o.length===0?e.createElement("p",{className:we.noMatches},"No completed matches"):e.createElement("div",{className:we.matchList},o.map(F=>e.createElement("div",{key:F._id,className:`${we.matchCard} ${we.completedMatch}`},e.createElement("div",{className:we.matchHeader},e.createElement("span",{className:we.matchStatus},V(F)),e.createElement("span",{className:we.matchDate},H(F.completedDate))),e.createElement("div",{className:we.matchPlayers},e.createElement("span",{className:`${we.player1} ${F.winner===F.player1Id?we.winner:""}`},F.player1Id),e.createElement("span",{className:we.vs},"vs"),e.createElement("span",{className:`${we.player2} ${F.winner===F.player2Id?we.winner:""}`},F.player2Id)),e.createElement("div",{className:we.matchResult},e.createElement("span",{className:we.winner},"🏆 Winner: ",F.winner),e.createElement("span",{className:we.score},"Score: ",F.score)),F.notes&&e.createElement("div",{className:we.matchNotes},e.createElement("span",{className:we.notesLabel},"Notes:"),e.createElement("span",{className:we.notesText},F.notes)))))),v&&f&&e.createElement("div",{className:we.modalOverlay},e.createElement("div",{className:we.modal},e.createElement("h3",null,"Complete Match"),e.createElement("p",null,f.player1Id," vs ",f.player2Id),e.createElement("div",{className:we.formGroup},e.createElement("label",null,"Winner:"),e.createElement("select",{value:N,onChange:F=>C(F.target.value)},e.createElement("option",{value:""},"Select winner"),e.createElement("option",{value:f.player1Id},f.player1Id),e.createElement("option",{value:f.player2Id},f.player2Id))),e.createElement("div",{className:we.formGroup},e.createElement("label",null,"Score:"),e.createElement("input",{type:"text",value:I,onChange:F=>A(F.target.value),placeholder:"e.g., 7-5"})),e.createElement("div",{className:we.formGroup},e.createElement("label",null,"Notes (optional):"),e.createElement("textarea",{value:_,onChange:F=>k(F.target.value),placeholder:"Any additional notes..."})),e.createElement("div",{className:we.modalActions},e.createElement("button",{onClick:U,disabled:!N||!I},"Complete Match"),e.createElement("button",{onClick:()=>S(!1)},"Cancel")))),x&&f&&e.createElement("div",{className:we.modalOverlay},e.createElement("div",{className:we.modal},e.createElement("h3",null,"Cancel Match"),e.createElement("p",null,f.player1Id," vs ",f.player2Id),e.createElement("div",{className:we.formGroup},e.createElement("label",null,"Reason for cancellation:"),e.createElement("textarea",{value:B,onChange:F=>z(F.target.value),placeholder:"Why is this match being cancelled?"})),e.createElement("div",{className:we.modalActions},e.createElement("button",{onClick:Z},"Cancel Match"),e.createElement("button",{onClick:()=>E(!1)},"Keep Match")))))};function MF({backendUrl:a}){const[r,t]=b.useState({enabled:!1,sheetId:"",sheetName:"Player Backup",apiKey:"",backupFrequency:"weekly",autoBackup:!0}),[n,o]=b.useState(!1),[i,c]=b.useState(""),[u,m]=b.useState(""),[g,f]=b.useState(null),[h,v]=b.useState(null),[S,x]=b.useState(1),[E,N]=b.useState(!1);b.useEffect(()=>{C(),I()},[]);const C=async()=>{try{const R=await fetch(`${a}/api/league-config`);if(!R.ok)throw new Error(`HTTP error! status: ${R.status}`);const D=await R.json();if(D.success&&D.config){const j=D.config.googleSheetsBackup||{};t({enabled:j.enabled||!1,sheetId:j.sheetId||"",sheetName:j.sheetName||"Player Backup",apiKey:j.apiKey==="***CONFIGURED***"?"":j.apiKey||"",backupFrequency:j.backupFrequency||"weekly",autoBackup:j.autoBackup!==void 0?j.autoBackup:!0}),j.sheetId&&j.apiKey==="***CONFIGURED***"&&f(X=>({...X,enabled:j.enabled,sheetId:j.sheetId,sheetName:j.sheetName,configured:!0,frequency:j.backupFrequency,autoBackup:j.autoBackup,lastBackup:j.lastBackupDate}))}}catch(R){console.error("Error loading config:",R)}},I=async()=>{try{const R=await fetch(`${a}/api/league-config/backup/status`);if(R.ok){const D=await R.json();D.success&&f(D.backup)}}catch(R){console.error("Error loading backup status:",R)}},A=(R,D)=>{m(R),c(D),setTimeout(()=>c(""),5e3)},_=(R,D)=>{t(j=>({...j,[R]:D})),(R==="sheetId"||R==="apiKey")&&v(null)},k=async()=>{if(!r.sheetId||!r.apiKey){A("error","Please fill in both fields first");return}o(!0),v(null);try{const D=await(await fetch(`${a}/api/league-config/backup/test-connection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetId:r.sheetId,apiKey:r.apiKey})})).json();D.success?(v({success:!0,message:"✅ Great! Connection successful!"}),A("success","Connection successful!")):(v({success:!1,message:`❌ Connection failed: ${D.error}`}),A("error",`Connection failed: ${D.error}`))}catch{v({success:!1,message:"Connection test failed - please check your internet"}),A("error","Connection test failed")}o(!1)},B=async()=>{if(!r.sheetId||!r.apiKey){A("error","Please fill in both fields");return}if(!(h!=null&&h.success)){A("error","Please test the connection first");return}o(!0);try{const D=await(await fetch(`${a}/api/league-config/backup/configure`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();D.success?(A("success","✅ Backup setup complete!"),I(),x(4)):A("error",`Setup failed: ${D.error}`)}catch{A("error","Failed to save configuration")}o(!1)},z=async()=>{o(!0);try{const D=await(await fetch(`${a}/api/league-config/backup/run`,{method:"POST"})).json();D.success?(A("success",`✅ Backup completed! ${D.count} players backed up.`),I()):A("error",`Backup failed: ${D.error}`)}catch{A("error","Backup failed")}o(!1)},M=R=>`https://docs.google.com/spreadsheets/d/${R}`,O=()=>e.createElement("div",{style:{textAlign:"center",padding:"40px 20px"}},e.createElement("div",{style:{fontSize:"64px",marginBottom:"20px"}},"📊"),e.createElement("h2",{style:{color:"white",marginBottom:"20px"}},"Backup Your League Data"),e.createElement("p",{style:{fontSize:"18px",color:"white",marginBottom:"30px",lineHeight:"1.6",opacity:.9}},"Keep a safe copy of all your player information in Google Sheets.",e.createElement("br",null),"It's free, secure, and takes just a few minutes to set up."),e.createElement("div",{style:{background:"#ffffff",padding:"20px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},e.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"15px"}},"What You'll Get:"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"}},e.createElement("div",{style:{textAlign:"center",padding:"15px"}},e.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"🛡️"),e.createElement("strong",{style:{color:"#1a1a1a"}},"Data Safety"),e.createElement("br",null),e.createElement("small",{style:{color:"#2c2c2c"}},"Backup copy of all player info")),e.createElement("div",{style:{textAlign:"center",padding:"15px"}},e.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"📱"),e.createElement("strong",{style:{color:"#1a1a1a"}},"Easy Viewing"),e.createElement("br",null),e.createElement("small",{style:{color:"#2c2c2c"}},"View data in Google Sheets")),e.createElement("div",{style:{textAlign:"center",padding:"15px"}},e.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"🔄"),e.createElement("strong",{style:{color:"#1a1a1a"}},"Auto Backup"),e.createElement("br",null),e.createElement("small",{style:{color:"#2c2c2c"}},"Keeps data up to date")))),e.createElement("div",{style:{background:"#f8f9fa",padding:"25px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},e.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"}},e.createElement(uz,null)," Frequently Asked Questions"),e.createElement("div",{style:{display:"grid",gap:"15px"}},e.createElement("div",{style:{padding:"15px",background:"#ffffff",borderRadius:"8px",border:"1px solid #e0e0e0"}},e.createElement("strong",{style:{color:"#1a1a1a",display:"block",marginBottom:"8px"}},"Q: Is this free to use?"),e.createElement("span",{style:{color:"#2c2c2c"}},"A: Yes! Google Sheets is completely free. You only need a Google account.")),e.createElement("div",{style:{padding:"15px",background:"#ffffff",borderRadius:"8px",border:"1px solid #e0e0e0"}},e.createElement("strong",{style:{color:"#1a1a1a",display:"block",marginBottom:"8px"}},"Q: How often does it backup?"),e.createElement("span",{style:{color:"#2c2c2c"}},"A: By default, it backs up weekly, but you can run manual backups anytime.")),e.createElement("div",{style:{padding:"15px",background:"#ffffff",borderRadius:"8px",border:"1px solid #e0e0e0"}},e.createElement("strong",{style:{color:"#1a1a1a",display:"block",marginBottom:"8px"}},"Q: Is my data secure?"),e.createElement("span",{style:{color:"#2c2c2c"}},"A: Yes! Your API key only works with your specific Google Sheet and is stored securely.")),e.createElement("div",{style:{padding:"15px",background:"#ffffff",borderRadius:"8px",border:"1px solid #e0e0e0"}},e.createElement("strong",{style:{color:"#1a1a1a",display:"block",marginBottom:"8px"}},"Q: What if I change my mind?"),e.createElement("span",{style:{color:"#2c2c2c"}},"A: You can disable backup anytime, and your Google Sheet will remain as a backup copy.")))),e.createElement("button",{onClick:()=>x(2),style:{padding:"15px 30px",background:"#007bff",color:"white",border:"none",borderRadius:"8px",fontSize:"18px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",margin:"0 auto"}},"Get Started ",e.createElement(xl,null))),U=()=>e.createElement("div",{style:{padding:"30px 20px"}},e.createElement("div",{style:{textAlign:"center",marginBottom:"30px"}},e.createElement("h2",{style:{color:"white",marginBottom:"10px"}},"Step 1: Create a Google Sheet"),e.createElement("p",{style:{color:"white",fontSize:"16px",opacity:.9}},"First, let's create a place to store your backup data")),e.createElement("div",{style:{background:"#ffffff",padding:"25px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},e.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"}},e.createElement(Ap,null)," Create Your Google Sheet"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"20px",alignItems:"center"}},e.createElement("div",null,e.createElement("p",{style:{marginBottom:"15px",color:"#1a1a1a"}},e.createElement("strong",null,"1.")," Go to ",e.createElement("a",{href:"https://sheets.google.com",target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",textDecoration:"underline"}},"Google Sheets")),e.createElement("p",{style:{marginBottom:"15px",color:"#1a1a1a"}},e.createElement("strong",null,"2."),' Click "Blank" to create a new sheet'),e.createElement("p",{style:{marginBottom:"15px",color:"#1a1a1a"}},e.createElement("strong",null,"3."),' Give it a name like "League Backup" or "Player Data"'),e.createElement("p",{style:{color:"#1a1a1a"}},e.createElement("strong",null,"4.")," Copy the Sheet ID from the URL (we'll show you how)")),e.createElement("div",{style:{textAlign:"center"}},e.createElement("div",{style:{fontSize:"48px",marginBottom:"10px"}},"📋"),e.createElement("button",{onClick:()=>window.open("https://sheets.google.com","_blank"),style:{padding:"10px 20px",background:"#28a745",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"}},"Open Google Sheets")))),e.createElement("div",{style:{background:"#fff8dc",padding:"20px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #ffd700"}},e.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"15px"}},"How to Find Your Sheet ID:"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",alignItems:"center"}},e.createElement("div",null,e.createElement("p",{style:{marginBottom:"10px",color:"#1a1a1a"}},e.createElement("strong",null,"Look at your Google Sheet URL:")),e.createElement("div",{style:{background:"#f8f9fa",padding:"15px",borderRadius:"6px",border:"1px solid #dee2e6",fontFamily:"monospace",fontSize:"14px",wordBreak:"break-all",color:"#1a1a1a"}},"https://docs.google.com/spreadsheets/d/",e.createElement("span",{style:{background:"#ffeb3b",padding:"2px 4px",borderRadius:"3px"}},"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"),"/edit"),e.createElement("p",{style:{marginTop:"10px",color:"#2c2c2c",fontSize:"14px"}},"Copy the highlighted part (the long string of letters and numbers)")),e.createElement("div",{style:{textAlign:"center"}},e.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"🔍"),e.createElement("p",{style:{color:"#2c2c2c",fontSize:"14px"}},"It's the part between ",e.createElement("code",{style:{background:"#f0f0f0",padding:"2px 4px",borderRadius:"3px"}},"/d/")," and ",e.createElement("code",{style:{background:"#f0f0f0",padding:"2px 4px",borderRadius:"3px"}},"/edit"))))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("label",{style:{display:"block",marginBottom:"10px",fontWeight:"bold",color:"#1a1a1a"}},"Paste Your Sheet ID Here:"),e.createElement("input",{type:"text",value:r.sheetId,onChange:R=>_("sheetId",R.target.value),placeholder:"Example: 1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",style:{width:"100%",padding:"15px",border:"2px solid #ddd",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",color:"#1a1a1a",backgroundColor:"#ffffff"}}),r.sheetId&&e.createElement("div",{style:{marginTop:"10px",fontSize:"14px",color:"#2c2c2c"}},e.createElement("a",{href:M(r.sheetId),target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",textDecoration:"underline"}},"🔗 Open this sheet to verify"))),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("button",{onClick:()=>x(1),style:{padding:"12px 24px",background:"#6c757d",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(jh,null)," Back"),e.createElement("button",{onClick:()=>x(3),disabled:!r.sheetId,style:{padding:"12px 24px",background:r.sheetId?"#007bff":"#ccc",color:"white",border:"none",borderRadius:"6px",cursor:r.sheetId?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"8px"}},"Next ",e.createElement(xl,null)))),Z=()=>e.createElement("div",{style:{padding:"30px 20px"}},e.createElement("div",{style:{textAlign:"center",marginBottom:"30px"}},e.createElement("h2",{style:{color:"white",marginBottom:"10px"}},"Step 2: Get Your API Key"),e.createElement("p",{style:{color:"white",fontSize:"16px",opacity:.9}},"This allows the app to write to your Google Sheet (it's free and secure)")),e.createElement("div",{style:{background:"#ffffff",padding:"25px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},e.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"20px"}},"Getting Your API Key (Takes 2 Minutes):"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"20px",alignItems:"center"}},e.createElement("div",null,e.createElement("ol",{style:{margin:0,paddingLeft:"20px",lineHeight:"2"}},e.createElement("li",{style:{marginBottom:"10px",color:"#1a1a1a"}},e.createElement("strong",null,"Go to")," ",e.createElement("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",textDecoration:"underline"}},"Google Cloud Console")),e.createElement("li",{style:{marginBottom:"10px",color:"#1a1a1a"}},e.createElement("strong",null,'Click "Create Project"')," (or select an existing one)"),e.createElement("li",{style:{marginBottom:"10px",color:"#1a1a1a"}},e.createElement("strong",null,'Search for "Google Sheets API"'),' and click "Enable"'),e.createElement("li",{style:{marginBottom:"10px",color:"#1a1a1a"}},e.createElement("strong",null,'Go to "Credentials"'),' → "Create Credentials" → "API Key"'),e.createElement("li",{style:{color:"#1a1a1a"}},e.createElement("strong",null,"Copy the API key")," (it looks like: AIzaSyC...)"))),e.createElement("div",{style:{textAlign:"center"}},e.createElement("div",{style:{fontSize:"48px",marginBottom:"10px"}},"🔑"),e.createElement("button",{onClick:()=>window.open("https://console.cloud.google.com/apis/credentials","_blank"),style:{padding:"10px 20px",background:"#28a745",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"}},"Open Google Cloud Console")))),e.createElement("div",{style:{background:"#e8f5e8",padding:"20px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #28a745"}},e.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"15px"}},"🔒 Don't Worry About Security:"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#1a1a1a"}},e.createElement("li",null,"Your API key only works with your specific Google Sheet"),e.createElement("li",null,"It can't access any other files or data"),e.createElement("li",null,"It's stored securely and encrypted"),e.createElement("li",null,"You can delete it anytime from Google Cloud Console"))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("label",{style:{display:"block",marginBottom:"10px",fontWeight:"bold",color:"#1a1a1a"}},"Paste Your API Key Here:"),e.createElement("div",{style:{position:"relative"}},e.createElement("input",{type:E?"text":"password",value:r.apiKey,onChange:R=>_("apiKey",R.target.value),placeholder:"Example: AIzaSyC...",style:{width:"100%",padding:"15px",paddingRight:"50px",border:"2px solid #ddd",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",color:"#1a1a1a",backgroundColor:"#ffffff"}}),e.createElement("button",{onClick:()=>N(!E),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666"}},E?e.createElement(nz,null):e.createElement(Ni,null)))),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("button",{onClick:()=>x(2),style:{padding:"12px 24px",background:"#6c757d",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(jh,null)," Back"),e.createElement("button",{onClick:()=>x(4),disabled:!r.sheetId||!r.apiKey,style:{padding:"12px 24px",background:r.sheetId&&r.apiKey?"#007bff":"#ccc",color:"white",border:"none",borderRadius:"6px",cursor:r.sheetId&&r.apiKey?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"8px"}},"Test & Save ",e.createElement(xl,null)))),H=()=>e.createElement("div",{style:{padding:"30px 20px"}},e.createElement("div",{style:{textAlign:"center",marginBottom:"30px"}},e.createElement("h2",{style:{color:"white",marginBottom:"10px"}},"Step 3: Test & Save"),e.createElement("p",{style:{color:"white",fontSize:"16px",opacity:.9}},"Let's make sure everything works before saving")),e.createElement("div",{style:{background:"#ffffff",padding:"25px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},e.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"20px"}},"Your Setup Summary:"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"}},e.createElement("div",null,e.createElement("strong",{style:{color:"#1a1a1a"}},"Sheet ID:"),e.createElement("br",null),e.createElement("code",{style:{background:"#f8f9fa",padding:"5px 8px",borderRadius:"4px",fontSize:"14px",wordBreak:"break-all",color:"#1a1a1a",border:"1px solid #dee2e6"}},r.sheetId||"Not set")),e.createElement("div",null,e.createElement("strong",{style:{color:"#1a1a1a"}},"API Key:"),e.createElement("br",null),e.createElement("code",{style:{background:"#f8f9fa",padding:"5px 8px",borderRadius:"4px",fontSize:"14px",color:"#1a1a1a",border:"1px solid #dee2e6"}},r.apiKey?`${r.apiKey.substring(0,10)}...`:"Not set")))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("button",{onClick:k,disabled:n||!r.sheetId||!r.apiKey,style:{width:"100%",padding:"15px",background:"#17a2b8",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",opacity:n||!r.sheetId||!r.apiKey?.6:1}},n?e.createElement(Kc,{style:{animation:"spin 1s linear infinite"}}):e.createElement(Kc,null),n?"Testing Connection...":"Test Connection"),h&&e.createElement("div",{style:{marginTop:"15px",padding:"15px",borderRadius:"8px",background:h.success?"#d4edda":"#f8d7da",color:h.success?"#155724":"#721c24",border:`1px solid ${h.success?"#c3e6cb":"#f5c6cb"}`,display:"flex",alignItems:"center",gap:"10px"}},h.success?e.createElement(zr,null):e.createElement(Dp,null),h.message)),(h==null?void 0:h.success)&&e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("button",{onClick:B,disabled:n,style:{width:"100%",padding:"15px",background:"#28a745",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",opacity:n?.6:1}},n?e.createElement(Kc,{style:{animation:"spin 1s linear infinite"}}):e.createElement(zr,null),n?"Saving...":"Save Configuration")),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("button",{onClick:()=>x(3),style:{padding:"12px 24px",background:"#6c757d",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(jh,null)," Back"),(g==null?void 0:g.configured)&&e.createElement("button",{onClick:()=>x(5),style:{padding:"12px 24px",background:"#007bff",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"}},"Next ",e.createElement(xl,null)))),V=()=>e.createElement("div",{style:{padding:"30px 20px",textAlign:"center"}},e.createElement("div",{style:{fontSize:"64px",marginBottom:"20px"}},"🎉"),e.createElement("h2",{style:{color:"#1a1a1a",marginBottom:"20px"}},"Setup Complete!"),e.createElement("p",{style:{fontSize:"18px",color:"#2c2c2c",marginBottom:"30px",lineHeight:"1.6"}},"Your Google Sheets backup is now configured and ready to use."),e.createElement("div",{style:{background:"#e8f5e8",padding:"25px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #28a745"}},e.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"20px"}},"✅ What's Working Now:"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"}},e.createElement("div",null,e.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"🔄"),e.createElement("strong",{style:{color:"#1a1a1a"}},"Auto Backup"),e.createElement("br",null),e.createElement("small",{style:{color:"#2c2c2c"}},"Your data will be backed up automatically")),e.createElement("div",null,e.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"📊"),e.createElement("strong",{style:{color:"#1a1a1a"}},"Easy Viewing"),e.createElement("br",null),e.createElement("small",{style:{color:"#2c2c2c"}},"View your data in Google Sheets anytime")),e.createElement("div",null,e.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"🛡️"),e.createElement("strong",{style:{color:"#1a1a1a"}},"Data Safety"),e.createElement("br",null),e.createElement("small",{style:{color:"#2c2c2c"}},"Your data is now safely backed up")))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("button",{onClick:z,disabled:n,style:{padding:"15px 30px",background:"#007bff",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",margin:"0 auto"}},n?e.createElement(Kc,{style:{animation:"spin 1s linear infinite"}}):e.createElement(Kc,null),n?"Running Backup...":"Run Your First Backup"),e.createElement("p",{style:{marginTop:"10px",color:"#2c2c2c",fontSize:"14px"}},"This will copy all your current player data to your Google Sheet")),(g==null?void 0:g.sheetId)&&e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("a",{href:M(g.sheetId),target:"_blank",rel:"noopener noreferrer",style:{padding:"12px 24px",background:"#28a745",color:"white",textDecoration:"none",borderRadius:"6px",display:"inline-flex",alignItems:"center",gap:"8px",fontSize:"16px"}},e.createElement(Wx,null)," View Your Backup Sheet")),e.createElement("div",{style:{background:"#fff8dc",padding:"20px",borderRadius:"12px",border:"2px solid #ffd700",textAlign:"left"}},e.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"15px"}},"💡 What Happens Next:"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#1a1a1a",lineHeight:"1.6"}},e.createElement("li",null,"Your data will be backed up automatically"),e.createElement("li",null,"You can view your data anytime in Google Sheets"),e.createElement("li",null,"You can run manual backups whenever you want"),e.createElement("li",null,"Your data is safe and secure")))),F=()=>e.createElement("div",{style:{background:"#ffffff",padding:"16px",borderRadius:"8px",marginBottom:"20px",border:"2px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},e.createElement("h4",{style:{margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"8px",color:"#1a1a1a"}},e.createElement(Sy,null)," Current Status"),g?e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"14px",color:"#1a1a1a"}},e.createElement("div",null,e.createElement("strong",null,"Status:")," ",g.enabled?"✅ Enabled":"❌ Disabled"),e.createElement("div",null,e.createElement("strong",null,"Last Backup:")," ",g.lastBackup?new Date(g.lastBackup).toLocaleString():"Never"),g.sheetId&&e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement("strong",null,"Sheet:")," ",g.sheetName||"Player Backup"),e.createElement("div",null,e.createElement("strong",null,"Sheet ID:")," ",g.sheetId.substring(0,20),"..."))):e.createElement("div",{style:{color:"#2c2c2c",fontStyle:"italic"}},"No backup configured"),e.createElement("div",{style:{marginTop:"15px",display:"flex",gap:"10px",flexWrap:"wrap",justifyContent:"center"}},(g==null?void 0:g.sheetId)&&e.createElement("a",{href:M(g.sheetId),target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"5px",padding:"8px 12px",border:"1px solid #007bff",borderRadius:"4px",fontSize:"14px"}},e.createElement(Wx,null)," View Backup Sheet"),e.createElement("button",{onClick:()=>x(5),disabled:!(g!=null&&g.configured),style:{padding:"8px 12px",background:g!=null&&g.configured?"#007bff":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:g!=null&&g.configured?"pointer":"not-allowed",fontSize:"14px",opacity:g!=null&&g.configured?1:.6}},"Manage Backup Settings")));return e.createElement("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"20px"}},e.createElement("style",null,`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `),e.createElement("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"20px",borderRadius:"12px",marginBottom:"20px"}},e.createElement("h2",{style:{margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"10px",color:"white"}},e.createElement(Ap,null)," Google Sheets Backup"),e.createElement("p",{style:{margin:0,opacity:.9,color:"white"}},"Keep your league data safe with automatic Google Sheets backup")),i&&e.createElement("div",{style:{padding:"12px 16px",borderRadius:"8px",marginBottom:"20px",background:u==="success"?"#d4edda":"#f8d7da",color:u==="success"?"#155724":"#721c24",border:`1px solid ${u==="success"?"#c3e6cb":"#f5c6cb"}`}},i),(g==null?void 0:g.configured)&&F(),S===1&&O(),S===2&&U(),S===3&&Z(),S===4&&H(),S===5&&V())}function RF({backendUrl:a}){const[r,t]=b.useState([]),[n,o]=b.useState(!0),[i,c]=b.useState(null),[u,m]=b.useState({name:"",address:"",notes:""}),[g,f]=b.useState(""),[h,v]=b.useState("");b.useEffect(()=>{S()},[]);const S=async()=>{try{o(!0);const A=await fetch(`${a}/api/locations`);if(!A.ok)throw new Error("Failed to load locations");const _=await A.json();t(_.locations||[])}catch(A){f("Failed to load locations: "+A.message)}finally{o(!1)}},x=async()=>{if(!u.name.trim()){f("Location name is required");return}try{const A=await fetch(`${a}/api/locations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!A.ok)throw new Error("Failed to add location");const _=await A.json();t([...r,_.location]),m({name:"",address:"",notes:""}),v("Location added successfully!"),setTimeout(()=>v(""),3e3)}catch(A){f("Failed to add location: "+A.message)}},E=async(A,_)=>{try{const k=await fetch(`${a}/api/locations/${A}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(!k.ok)throw new Error("Failed to update location");const B=await k.json();t(r.map(z=>z._id===A?B.location:z)),c(null),v("Location updated successfully!"),setTimeout(()=>v(""),3e3)}catch(k){f("Failed to update location: "+k.message)}},N=async A=>{if(window.confirm("Are you sure you want to delete this location? This will affect any players who have selected this location."))try{if(!(await fetch(`${a}/api/locations/${A}`,{method:"DELETE"})).ok)throw new Error("Failed to delete location");t(r.filter(k=>k._id!==A)),v("Location deleted successfully!"),setTimeout(()=>v(""),3e3)}catch(_){f("Failed to delete location: "+_.message)}},C=A=>{c(A._id)},I=()=>{c(null)};return n?e.createElement("div",{style:{textAlign:"center",padding:"20px"}},e.createElement("div",{style:{fontSize:"18px",color:"#ccc"}},"Loading locations...")):e.createElement("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"}},e.createElement("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px",borderRadius:"12px",marginBottom:"20px",color:"white"}},e.createElement("h2",{style:{margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"10px"}},e.createElement(Ii,null)," Location Management"),e.createElement("p",{style:{margin:0,opacity:.9}},"Manage predefined locations that players can select during registration. Players can also add custom locations if needed.")),h&&e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.2)",border:"1px solid #4CAF50",color:"#4CAF50",padding:"12px",borderRadius:"6px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(Mw,null)," ",h),g&&e.createElement("div",{style:{background:"rgba(244, 67, 54, 0.2)",border:"1px solid #f44336",color:"#f44336",padding:"12px",borderRadius:"6px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(Dp,null)," ",g),e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",padding:"20px",borderRadius:"8px",marginBottom:"20px",border:"1px solid rgba(255,255,255,0.1)"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(Vn,null)," Add New Location"),e.createElement("div",{style:{display:"grid",gap:"15px"}},e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Location Name *"),e.createElement("input",{type:"text",value:u.name,onChange:A=>m({...u,name:A.target.value}),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"16px"},placeholder:"e.g., Pool Hall A, Community Center"})),e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Address (Optional)"),e.createElement("input",{type:"text",value:u.address,onChange:A=>m({...u,address:A.target.value}),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"16px"},placeholder:"e.g., 123 Main St, City, State"})),e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Notes (Optional)"),e.createElement("textarea",{value:u.notes,onChange:A=>m({...u,notes:A.target.value}),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"16px",minHeight:"80px",resize:"vertical"},placeholder:"Additional information about this location..."})),e.createElement("button",{onClick:x,style:{padding:"12px 20px",borderRadius:"6px",border:"none",background:"#e53e3e",color:"#fff",cursor:"pointer",fontSize:"16px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center"}},e.createElement(Vn,null)," Add Location"))),e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",padding:"20px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"15px"}},"Existing Locations (",r.length,")"),r.length===0?e.createElement("div",{style:{textAlign:"center",padding:"40px",color:"#ccc"}},e.createElement(Ii,{style:{fontSize:"48px",marginBottom:"15px",opacity:.5}}),e.createElement("p",null,"No locations added yet. Add your first location above!")):e.createElement("div",{style:{display:"grid",gap:"15px"}},r.map(A=>e.createElement("div",{key:A._id,style:{background:"rgba(0,0,0,0.3)",padding:"15px",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)"}},i===A._id?e.createElement(PF,{location:A,onSave:_=>E(A._id,_),onCancel:I}):e.createElement(TF,{location:A,onEdit:()=>C(A),onDelete:()=>N(A._id)}))))))}function TF({location:a,onEdit:r,onDelete:t}){return e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("div",{style:{flex:1}},e.createElement("h4",{style:{color:"#fff",margin:"0 0 5px 0",fontSize:"18px"}},a.name),a.address&&e.createElement("p",{style:{color:"#ccc",margin:"0 0 5px 0",fontSize:"14px"}},"📍 ",a.address),a.notes&&e.createElement("p",{style:{color:"#999",margin:0,fontSize:"13px"}},"📝 ",a.notes)),e.createElement("div",{style:{display:"flex",gap:"8px"}},e.createElement("button",{onClick:r,style:{padding:"8px 12px",borderRadius:"4px",border:"1px solid #666",background:"transparent",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"}},e.createElement(ki,null)," Edit"),e.createElement("button",{onClick:t,style:{padding:"8px 12px",borderRadius:"4px",border:"1px solid #f44336",background:"transparent",color:"#f44336",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"}},e.createElement(Al,null)," Delete")))}function PF({location:a,onSave:r,onCancel:t}){const[n,o]=b.useState({name:a.name,address:a.address||"",notes:a.notes||""}),i=()=>{if(!n.name.trim()){alert("Location name is required");return}r(n)};return e.createElement("div",{style:{display:"grid",gap:"10px"}},e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Location Name *"),e.createElement("input",{type:"text",value:n.name,onChange:c=>o({...n,name:c.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"14px"}})),e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Address"),e.createElement("input",{type:"text",value:n.address,onChange:c=>o({...n,address:c.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"14px"}})),e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Notes"),e.createElement("textarea",{value:n.notes,onChange:c=>o({...n,notes:c.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"14px",minHeight:"60px",resize:"vertical"}})),e.createElement("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"}},e.createElement("button",{onClick:t,style:{padding:"8px 12px",borderRadius:"4px",border:"1px solid #666",background:"transparent",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"}},e.createElement(pz,null)," Cancel"),e.createElement("button",{onClick:i,style:{padding:"8px 12px",borderRadius:"4px",border:"none",background:"#4CAF50",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"}},e.createElement(yl,null)," Save")))}function LF(){const[a,r]=b.useState({registrationFee:30,weeklyDues:10,totalWeeks:10,participationFee:100,phase1Weeks:6,penaltyStructure:{strike1:5,strike2:10,strike3:0},paymentMethods:{venmo:{enabled:!0,username:"",displayName:"Venmo",instructions:"Send payment to @username"},cashapp:{enabled:!0,username:"",displayName:"Cash App",instructions:"Send payment to $username"},creditCard:{enabled:!1,processor:"square",displayName:"Credit/Debit Card",instructions:"Pay online using the link below",paymentLink:"",squareAppId:"",squareLocationId:""},applePay:{enabled:!1,displayName:"Apple Pay",instructions:"Pay using Apple Pay",paymentLink:""},googlePay:{enabled:!1,displayName:"Google Pay",instructions:"Pay using Google Pay",paymentLink:""},cash:{enabled:!0,displayName:"Cash",instructions:"Pay in person to league administrator"},check:{enabled:!1,displayName:"Check",instructions:"Make check payable to [Payee Name]",payeeName:"",mailingAddress:""}},additionalInstructions:"",contactInfo:{adminName:"",adminEmail:"",adminPhone:""},currentSession:{name:"Current Session",startDate:"",endDate:"",isActive:!0}}),[t,n]=b.useState(!0),[o,i]=b.useState(!1),[c,u]=b.useState(""),[m,g]=b.useState({type:"",text:""}),[f,h]=b.useState({feeStructure:!1,penaltyStructure:!1,paymentMethods:!1,additionalInstructions:!1,contactInfo:!1});b.useEffect(()=>{v()},[]);const v=async()=>{try{const _=await fetch(`${pe}/api/payment-config`);if(_.ok){const k=await _.json();if(k.config){const B={...k.config,penaltyStructure:{strike1:5,strike2:10,strike3:0,...k.config.penaltyStructure},currentSession:{name:"Current Session",startDate:"",endDate:"",isActive:!0,...k.config.currentSession}};r(B)}}}catch(_){console.error("Error loading payment config:",_),g({type:"error",text:"Failed to load payment configuration"})}finally{n(!1)}},S=async()=>{i(!0),g({type:"",text:""});try{(await fetch(`${pe}/api/payment-config`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok?g({type:"success",text:"Payment configuration saved successfully!"}):g({type:"error",text:"Failed to save payment configuration"})}catch(_){console.error("Error saving payment config:",_),g({type:"error",text:"Error saving payment configuration"})}finally{i(!1)}},x=async(_,k)=>{u(_),g({type:"",text:""});try{if((await fetch(`${pe}/api/payment-config`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,...k})})).ok){g({type:"success",text:`${_} saved successfully!`});let z=null;_==="Fee Structure"?z="feeStructure":_==="Penalty Structure"?z="penaltyStructure":_==="Payment Methods"?z="paymentMethods":_==="Additional Instructions"?z="additionalInstructions":_==="Contact Information"&&(z="contactInfo"),z&&h(M=>({...M,[z]:!1}))}else g({type:"error",text:`Failed to save ${_}`})}catch(B){console.error(`Error saving ${_}:`,B),g({type:"error",text:`Error saving ${_}`})}finally{u("")}},E=(_,k,B)=>{r(z=>({...z,paymentMethods:{...z.paymentMethods,[_]:{...z.paymentMethods[_],[k]:B}}}))},N=(_,k)=>{r(B=>({...B,contactInfo:{...B.contactInfo,[_]:k}}))},C=_=>{switch(_){case"venmo":return e.createElement(iz,null);case"cashapp":return e.createElement(tz,null);case"paypal":return e.createElement(J7,null);case"creditCard":return e.createElement(Ux,null);case"applePay":return e.createElement(Q7,null);case"googlePay":return e.createElement(Ap,null);case"cash":return e.createElement(cz,null);case"check":return e.createElement(Mw,null);default:return e.createElement(Ux,null)}},I=_=>{h(k=>({...k,[_]:!k[_]}))},A=_=>{h(k=>({...k,[_]:!1})),v()};return t?e.createElement("div",{style:{textAlign:"center",padding:"20px"}},e.createElement(Lr,{style:{animation:"spin 1s linear infinite"}}),e.createElement("p",null,"Loading payment configuration...")):e.createElement("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"}},e.createElement("h2",{style:{color:"#e53e3e",marginBottom:"20px",textAlign:"center"}},"💳 Payment Configuration"),m.text&&e.createElement("div",{style:{padding:"10px 15px",borderRadius:"6px",marginBottom:"20px",background:m.type==="success"?"rgba(76, 175, 80, 0.2)":"rgba(229, 62, 62, 0.2)",border:`1px solid ${m.type==="success"?"#4CAF50":"#e53e3e"}`,color:m.type==="success"?"#4CAF50":"#e53e3e",display:"flex",alignItems:"center",gap:"10px"}},m.type==="success"?e.createElement(zr,null):e.createElement(tf,null),m.text),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},e.createElement("h3",{style:{color:"#fff",margin:0}},"League Fee Structure"),e.createElement("button",{onClick:()=>I("feeStructure"),style:{padding:"6px 12px",borderRadius:"4px",border:"none",background:f.feeStructure?"#ff9800":"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},f.feeStructure?"🔒 Cancel Edit":"✏️ Edit")),e.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:f.feeStructure?"rgba(76, 175, 80, 0.05)":"rgba(255,255,255,0.02)",opacity:f.feeStructure?1:.8}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"}},e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Registration Fee ($)"),e.createElement("input",{type:"number",value:a.registrationFee,onChange:_=>r(k=>({...k,registrationFee:Number(_.target.value)})),disabled:!f.feeStructure,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.feeStructure?"#222":"#333",color:f.feeStructure?"#fff":"#888",cursor:f.feeStructure?"text":"not-allowed"},min:"0",step:"0.01"})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Weekly Dues ($)"),e.createElement("input",{type:"number",value:a.weeklyDues,onChange:_=>r(k=>({...k,weeklyDues:Number(_.target.value)})),disabled:!f.feeStructure,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.feeStructure?"#222":"#333",color:f.feeStructure?"#fff":"#888",cursor:f.feeStructure?"text":"not-allowed"},min:"0",step:"0.01"})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Total Weeks"),e.createElement("input",{type:"number",value:a.totalWeeks,onChange:_=>r(k=>({...k,totalWeeks:Number(_.target.value)})),disabled:!f.feeStructure,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.feeStructure?"#222":"#333",color:f.feeStructure?"#fff":"#888",cursor:f.feeStructure?"text":"not-allowed"},min:"1"})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Participation Fee ($)"),e.createElement("div",{style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#333",color:"#4CAF50",fontWeight:"bold",textAlign:"center"}},"$",a.registrationFee+a.weeklyDues*a.totalWeeks,e.createElement("div",{style:{fontSize:"12px",color:"#888",marginTop:"2px"}},"Auto-calculated: $",a.registrationFee," + ($",a.weeklyDues," × ",a.totalWeeks,")"))))),e.createElement("div",{style:{marginTop:"10px",padding:"10px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"6px",border:"1px solid #4CAF50"}},e.createElement("div",{style:{color:"#4CAF50",fontSize:"14px"}},e.createElement("strong",null,"Total Session Cost:")," $",a.registrationFee+a.weeklyDues*a.totalWeeks,"(",a.registrationFee," + ",a.weeklyDues," × ",a.totalWeeks," weeks)")),f.feeStructure&&e.createElement("div",{style:{marginTop:"15px",textAlign:"center",display:"flex",gap:"10px",justifyContent:"center"}},e.createElement("button",{onClick:()=>x("Fee Structure",{registrationFee:a.registrationFee,weeklyDues:a.weeklyDues,totalWeeks:a.totalWeeks,participationFee:a.registrationFee+a.weeklyDues*a.totalWeeks}),disabled:c==="Fee Structure",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:c==="Fee Structure"?"#666":"#4CAF50",color:"#fff",cursor:c==="Fee Structure"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},c==="Fee Structure"?e.createElement(Lr,{style:{animation:"spin 1s linear infinite"}}):e.createElement(yl,null),c==="Fee Structure"?"Saving...":"Save Fee Structure"),e.createElement("button",{onClick:()=>A("feeStructure"),disabled:c==="Fee Structure",style:{padding:"8px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#ccc",cursor:c==="Fee Structure"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"}},"Cancel"))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},e.createElement("h3",{style:{color:"#fff",margin:0}},"Penalty Structure"),e.createElement("button",{onClick:()=>I("penaltyStructure"),style:{padding:"6px 12px",borderRadius:"4px",border:"none",background:f.penaltyStructure?"#ff9800":"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},f.penaltyStructure?"🔒 Cancel Edit":"✏️ Edit")),e.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:f.penaltyStructure?"rgba(76, 175, 80, 0.05)":"rgba(255,255,255,0.02)",opacity:f.penaltyStructure?1:.8}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"}},e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"1st Strike Fine ($)"),e.createElement("input",{type:"number",value:a.penaltyStructure.strike1,onChange:_=>r(k=>({...k,penaltyStructure:{...k.penaltyStructure,strike1:Number(_.target.value)}})),disabled:!f.penaltyStructure,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.penaltyStructure?"#222":"#333",color:f.penaltyStructure?"#fff":"#888",cursor:f.penaltyStructure?"text":"not-allowed"},min:"0",step:"0.01"})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"2nd Strike Fine ($)"),e.createElement("input",{type:"number",value:a.penaltyStructure.strike2,onChange:_=>r(k=>({...k,penaltyStructure:{...k.penaltyStructure,strike2:Number(_.target.value)}})),disabled:!f.penaltyStructure,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.penaltyStructure?"#222":"#333",color:f.penaltyStructure?"#fff":"#888",cursor:f.penaltyStructure?"text":"not-allowed"},min:"0",step:"0.01"})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"3rd Strike Fine ($)"),e.createElement("input",{type:"number",value:a.penaltyStructure.strike3,onChange:_=>r(k=>({...k,penaltyStructure:{...k.penaltyStructure,strike3:Number(_.target.value)}})),disabled:!f.penaltyStructure,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.penaltyStructure?"#222":"#333",color:f.penaltyStructure?"#fff":"#888",cursor:f.penaltyStructure?"text":"not-allowed"},min:"0",step:"0.01"})))),f.penaltyStructure&&e.createElement("div",{style:{marginTop:"15px",textAlign:"center",display:"flex",gap:"10px",justifyContent:"center"}},e.createElement("button",{onClick:()=>x("Penalty Structure",{penaltyStructure:a.penaltyStructure}),disabled:c==="Penalty Structure",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:c==="Penalty Structure"?"#666":"#4CAF50",color:"#fff",cursor:c==="Penalty Structure"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},c==="Penalty Structure"?e.createElement(Lr,{style:{animation:"spin 1s linear infinite"}}):e.createElement(yl,null),c==="Penalty Structure"?"Saving...":"Save Penalty Structure"),e.createElement("button",{onClick:()=>A("penaltyStructure"),disabled:c==="Penalty Structure",style:{padding:"8px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#ccc",cursor:c==="Penalty Structure"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"}},"Cancel"))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},e.createElement("h3",{style:{color:"#fff",margin:0}},"Payment Methods"),e.createElement("button",{onClick:()=>I("paymentMethods"),style:{padding:"6px 12px",borderRadius:"4px",border:"none",background:f.paymentMethods?"#ff9800":"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},f.paymentMethods?"🔒 Cancel Edit":"✏️ Edit")),e.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:f.paymentMethods?"rgba(76, 175, 80, 0.05)":"rgba(255,255,255,0.02)",opacity:f.paymentMethods?1:.8}},Object.entries(a.paymentMethods).map(([_,k])=>e.createElement("div",{key:_,style:{marginBottom:"20px",padding:"15px",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",background:"rgba(255,255,255,0.02)"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"}},C(_),e.createElement("h4",{style:{color:"#fff",margin:0,flex:1}},k.displayName),e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"5px"}},e.createElement("input",{type:"checkbox",checked:k.enabled,onChange:B=>E(_,"enabled",B.target.checked),disabled:!f.paymentMethods,style:{cursor:f.paymentMethods?"pointer":"not-allowed"}}),e.createElement("span",{style:{color:"#fff",fontSize:"14px"}},"Enabled"))),k.enabled&&e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"10px"}},_==="venmo"&&e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Venmo Username"),e.createElement("input",{type:"text",value:k.username,onChange:B=>E(_,"username",B.target.value),disabled:!f.paymentMethods,placeholder:"@username",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.paymentMethods?"#222":"#333",color:f.paymentMethods?"#fff":"#888",cursor:f.paymentMethods?"text":"not-allowed"}})),_==="cashapp"&&e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Cash App Username"),e.createElement("input",{type:"text",value:k.username,onChange:B=>E(_,"username",B.target.value),disabled:!f.paymentMethods,placeholder:"$username",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.paymentMethods?"#222":"#333",color:f.paymentMethods?"#fff":"#888",cursor:f.paymentMethods?"text":"not-allowed"}})),(_==="creditCard"||_==="applePay"||_==="googlePay")&&e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Payment Link"),e.createElement("input",{type:"url",value:k.paymentLink,onChange:B=>E(_,"paymentLink",B.target.value),disabled:!f.paymentMethods,placeholder:"https://...",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.paymentMethods?"#222":"#333",color:f.paymentMethods?"#fff":"#888",cursor:f.paymentMethods?"text":"not-allowed"}})),_==="check"&&e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Payee Name"),e.createElement("input",{type:"text",value:k.payeeName,onChange:B=>E(_,"payeeName",B.target.value),disabled:!f.paymentMethods,placeholder:"Pay to the order of...",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.paymentMethods?"#222":"#333",color:f.paymentMethods?"#fff":"#888",cursor:f.paymentMethods?"text":"not-allowed"}})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Mailing Address"),e.createElement("textarea",{value:k.mailingAddress,onChange:B=>E(_,"mailingAddress",B.target.value),disabled:!f.paymentMethods,placeholder:"Mailing address for checks...",rows:"3",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.paymentMethods?"#222":"#333",color:f.paymentMethods?"#fff":"#888",cursor:f.paymentMethods?"text":"not-allowed",resize:"vertical"}}))),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Instructions"),e.createElement("textarea",{value:k.instructions,onChange:B=>E(_,"instructions",B.target.value),disabled:!f.paymentMethods,placeholder:"Payment instructions...",rows:"2",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.paymentMethods?"#222":"#333",color:f.paymentMethods?"#fff":"#888",cursor:f.paymentMethods?"text":"not-allowed",resize:"vertical"}})))))),f.paymentMethods&&e.createElement("div",{style:{marginTop:"15px",textAlign:"center",display:"flex",gap:"10px",justifyContent:"center"}},e.createElement("button",{onClick:()=>x("Payment Methods",{paymentMethods:a.paymentMethods}),disabled:c==="Payment Methods",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:c==="Payment Methods"?"#666":"#4CAF50",color:"#fff",cursor:c==="Payment Methods"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},c==="Payment Methods"?e.createElement(Lr,{style:{animation:"spin 1s linear infinite"}}):e.createElement(yl,null),c==="Payment Methods"?"Saving...":"Save Payment Methods"),e.createElement("button",{onClick:()=>A("paymentMethods"),disabled:c==="Payment Methods",style:{padding:"8px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#ccc",cursor:c==="Payment Methods"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"}},"Cancel"))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},e.createElement("h3",{style:{color:"#fff",margin:0}},"Additional Instructions"),e.createElement("button",{onClick:()=>I("additionalInstructions"),style:{padding:"6px 12px",borderRadius:"4px",border:"none",background:f.additionalInstructions?"#ff9800":"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},f.additionalInstructions?"🔒 Cancel Edit":"✏️ Edit")),e.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:f.additionalInstructions?"rgba(76, 175, 80, 0.05)":"rgba(255,255,255,0.02)",opacity:f.additionalInstructions?1:.8}},e.createElement("textarea",{value:a.additionalInstructions,onChange:_=>r(k=>({...k,additionalInstructions:_.target.value})),disabled:!f.additionalInstructions,placeholder:"Enter any additional payment instructions or notes for players...",rows:"4",style:{width:"100%",padding:"12px",borderRadius:"6px",border:"1px solid #444",background:f.additionalInstructions?"#222":"#333",color:f.additionalInstructions?"#fff":"#888",cursor:f.additionalInstructions?"text":"not-allowed",resize:"vertical",fontFamily:"inherit"}})),f.additionalInstructions&&e.createElement("div",{style:{marginTop:"15px",textAlign:"center",display:"flex",gap:"10px",justifyContent:"center"}},e.createElement("button",{onClick:()=>x("Additional Instructions",{additionalInstructions:a.additionalInstructions}),disabled:c==="Additional Instructions",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:c==="Additional Instructions"?"#666":"#4CAF50",color:"#fff",cursor:c==="Additional Instructions"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},c==="Additional Instructions"?e.createElement(Lr,{style:{animation:"spin 1s linear infinite"}}):e.createElement(yl,null),c==="Additional Instructions"?"Saving...":"Save Additional Instructions"),e.createElement("button",{onClick:()=>A("additionalInstructions"),disabled:c==="Additional Instructions",style:{padding:"8px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#ccc",cursor:c==="Additional Instructions"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"}},"Cancel"))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},e.createElement("h3",{style:{color:"#fff",margin:0}},"Contact Information"),e.createElement("button",{onClick:()=>I("contactInfo"),style:{padding:"6px 12px",borderRadius:"4px",border:"none",background:f.contactInfo?"#ff9800":"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},f.contactInfo?"🔒 Cancel Edit":"✏️ Edit")),e.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:f.contactInfo?"rgba(76, 175, 80, 0.05)":"rgba(255,255,255,0.02)",opacity:f.contactInfo?1:.8}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"15px"}},e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Admin Name"),e.createElement("input",{type:"text",value:a.contactInfo.adminName,onChange:_=>N("adminName",_.target.value),disabled:!f.contactInfo,placeholder:"League Administrator Name",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.contactInfo?"#222":"#333",color:f.contactInfo?"#fff":"#888",cursor:f.contactInfo?"text":"not-allowed"}})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Admin Email"),e.createElement("input",{type:"email",value:a.contactInfo.adminEmail,onChange:_=>N("adminEmail",_.target.value),disabled:!f.contactInfo,placeholder:"admin@example.com",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.contactInfo?"#222":"#333",color:f.contactInfo?"#fff":"#888",cursor:f.contactInfo?"text":"not-allowed"}})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Admin Phone"),e.createElement("input",{type:"tel",value:a.contactInfo.adminPhone,onChange:_=>N("adminPhone",_.target.value),disabled:!f.contactInfo,placeholder:"(555) 123-4567",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.contactInfo?"#222":"#333",color:f.contactInfo?"#fff":"#888",cursor:f.contactInfo?"text":"not-allowed"}})))),f.contactInfo&&e.createElement("div",{style:{marginTop:"15px",textAlign:"center",display:"flex",gap:"10px",justifyContent:"center"}},e.createElement("button",{onClick:()=>x("Contact Information",{contactInfo:a.contactInfo}),disabled:c==="Contact Information",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:c==="Contact Information"?"#666":"#4CAF50",color:"#fff",cursor:c==="Contact Information"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},c==="Contact Information"?e.createElement(Lr,{style:{animation:"spin 1s linear infinite"}}):e.createElement(yl,null),c==="Contact Information"?"Saving...":"Save Contact Information"),e.createElement("button",{onClick:()=>A("contactInfo"),disabled:c==="Contact Information",style:{padding:"8px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#ccc",cursor:c==="Contact Information"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"}},"Cancel"))),e.createElement("div",{style:{marginTop:"40px",padding:"20px",border:"2px solid rgba(76, 175, 80, 0.3)",borderRadius:"12px",background:"rgba(76, 175, 80, 0.05)",textAlign:"center"}},e.createElement("h3",{style:{color:"#4CAF50",marginBottom:"15px"}},"💾 Save All Changes"),e.createElement("p",{style:{color:"#ccc",marginBottom:"20px",fontSize:"14px"}},"Use this button to save all configuration changes at once, or use the individual save buttons for each section above."),e.createElement("button",{onClick:S,disabled:o,style:{padding:"12px 30px",borderRadius:"8px",border:"none",background:o?"#666":"linear-gradient(135deg, #4CAF50, #45a049)",color:"#fff",cursor:o?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px",margin:"0 auto",boxShadow:o?"none":"0 4px 15px rgba(76, 175, 80, 0.3)",transition:"all 0.2s ease"},onMouseEnter:_=>{o||(_.target.style.transform="translateY(-2px)",_.target.style.boxShadow="0 6px 20px rgba(76, 175, 80, 0.4)")},onMouseLeave:_=>{o||(_.target.style.transform="translateY(0)",_.target.style.boxShadow="0 4px 15px rgba(76, 175, 80, 0.3)")}},o?e.createElement(Lr,{style:{animation:"spin 1s linear infinite"}}):e.createElement(yl,null),o?"Saving All Changes...":"Save All Configuration")))}function BF(){const[a,r]=b.useState([]),[t,n]=b.useState(!0),[o,i]=b.useState(""),[c,u]=b.useState("all"),[m,g]=b.useState(null),[f,h]=b.useState(!1),[v,S]=b.useState(!1),[x,E]=b.useState(!1),[N,C]=b.useState({amount:"",paymentType:"weekly_dues",paymentMethod:"cash",notes:"",date:new Date().toISOString().split("T")[0]}),[I,A]=b.useState({amount:"",reason:"",strikeLevel:"1",notes:"",date:new Date().toISOString().split("T")[0]}),[_,k]=b.useState({registrationFee:30,weeklyDues:10,totalWeeks:10,penaltyStructure:{strike1:5,strike2:10,strike3:0}});b.useEffect(()=>{B(),z()},[]);const B=async()=>{n(!0);try{console.log("🔄 Loading players..."),console.log("🔍 API URL:",`${pe}/api/users/search?approved=true`);const R=await fetch(`${pe}/api/users/search?approved=true&t=${Date.now()}`);if(R.ok){const D=await R.json();console.log("📊 Loaded players data:",D.users.length,"players");const j=D.users.find(te=>te.firstName==="Beta"&&te.lastName==="Test User");if(j)console.log("🔍 Raw Beta Test User data from API:",{id:j._id,firstName:j.firstName,lastName:j.lastName,paymentHistory:j.paymentHistory,paymentHistoryLength:j.paymentHistory?j.paymentHistory.length:"undefined"});else{console.log("❌ Beta Test User not found in raw data"),console.log("Available users:",D.users.map(P=>`${P.firstName} ${P.lastName}`)),console.log("🔍 All users with IDs:",D.users.map(P=>({id:P._id,name:`${P.firstName} ${P.lastName}`,email:P.email})));const te=D.users.filter(P=>!P.firstName||!P.lastName||P.firstName.trim()===""||P.lastName.trim()==="");te.length>0&&(console.log("⚠️ Users with empty names found:",te.length),te.forEach((P,ne)=>{console.log(`   ${ne+1}. ID: ${P._id}`),console.log(`      Email: ${P.email||"No email"}`),console.log(`      First Name: "${P.firstName||"EMPTY"}"`),console.log(`      Last Name: "${P.lastName||"EMPTY"}"`)}))}const X=D.users.filter(te=>te.paymentHistory&&te.paymentHistory.length>0);console.log("🔍 Users with payment history:",X.length),X.length>0&&console.log("🔍 First user with payments:",{name:`${X[0].firstName} ${X[0].lastName}`,paymentHistory:X[0].paymentHistory});const W=D.users.find(te=>te.email==="frbcapl@gmail.com");W?(console.log("🔍 Found frbcapl@gmail.com user:",{id:W._id,name:`${W.firstName} ${W.lastName}`,email:W.email,paymentHistory:W.paymentHistory,paymentHistoryLength:W.paymentHistory?W.paymentHistory.length:0}),console.log("🔍 Full frbcapl user object:",W),console.log("🔍 frbcapl user keys:",Object.keys(W)),console.log("🔍 frbcapl paymentHistory field:",W.paymentHistory),console.log("🔍 frbcapl paymentHistory type:",typeof W.paymentHistory)):console.log("❌ frbcapl@gmail.com user not found");const T=D.users.filter(te=>te.firstName&&te.lastName&&te.firstName.trim()&&te.lastName.trim()).map(te=>{const P={...te,paymentHistory:te.paymentHistory||[],penalties:te.penalties||[]};return P.currentBalance=M(P),P.paymentStatus=O(P),P}),G=T.find(te=>te.firstName==="Beta"&&te.lastName==="Test User");G&&(console.log("🔍 Beta Test User found in loaded data:"),console.log("Payment history length:",G.paymentHistory.length),console.log("Payment history:",G.paymentHistory),console.log("Calculated balance:",G.currentBalance),console.log("Payment status:",G.paymentStatus)),r(T),console.log("✅ Players loaded and processed")}else console.error("❌ Failed to load players:",R.status)}catch(R){console.error("Error loading players:",R)}finally{n(!1)}},z=async()=>{try{const R=await fetch(`${pe}/api/payment-config`);if(R.ok){const D=await R.json();D.config&&k({registrationFee:D.config.registrationFee||30,weeklyDues:D.config.weeklyDues||10,totalWeeks:D.config.totalWeeks||10,penaltyStructure:D.config.penaltyStructure||{strike1:5,strike2:10,strike3:0}})}}catch(R){console.error("Error loading fee config:",R)}},M=R=>{if(!_)return console.warn("feeConfig not loaded yet for balance calculation."),0;const D=(_.registrationFee||0)+(_.weeklyDues||0)*(_.totalWeeks||0),j=(R.paymentHistory||[]).reduce((T,G)=>G.paymentType==="registration_fee"||G.paymentType==="weekly_dues"||G.paymentType==="participation_fee"||G.paymentType==="penalty"?T+(G.amount||0):T,0),X=(R.penalties||[]).reduce((T,G)=>T+(G.amount||0),0),W=D-j+X;return console.log(`Balance for ${R.firstName} ${R.lastName}: Expected=${D}, Paid=${j}, Penalties=${X}, Balance=${W}`),W},O=R=>{const D=M(R);return D<=0?"paid":D<=20?"partial":"overdue"},U=a.filter(R=>{var X,W,T;const D=((X=R.firstName)==null?void 0:X.toLowerCase().includes(o.toLowerCase()))||((W=R.lastName)==null?void 0:W.toLowerCase().includes(o.toLowerCase()))||((T=R.email)==null?void 0:T.toLowerCase().includes(o.toLowerCase())),j=c==="all"||R.paymentStatus===c;return D&&j}),Z=async()=>{if(!(!m||!N.amount))try{console.log("Adding payment for player:",m._id),console.log("Payment data:",N);const R=await fetch(`${pe}/api/users/${m._id}/add-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(console.log("Response status:",R.status),R.ok){const D=await R.json();console.log("Payment added successfully:",D),console.log("🔍 Payment result details:",{success:D.success,message:D.message,payment:D.payment,user:D.user}),h(!1),C({amount:"",paymentType:"weekly_dues",paymentMethod:"cash",notes:"",date:new Date().toISOString().split("T")[0]}),console.log("🔄 Reloading players after payment..."),await B(),console.log("✅ Players reloaded after payment"),alert("Payment added successfully!")}else{const D=await R.json();console.error("Payment failed:",D);const j=D.message||D.error||"Unknown error";alert(`Error adding payment: ${j}`)}}catch(R){console.error("Error adding payment:",R),alert(`Error adding payment: ${R.message}`)}},H=async()=>{if(!(!m||!I.amount))try{(await fetch(`${pe}/api/users/${m._id}/add-penalty`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).ok&&(S(!1),A({amount:"",reason:"",strikeLevel:"1",notes:"",date:new Date().toISOString().split("T")[0]}),B())}catch(R){console.error("Error adding penalty:",R)}},V=R=>{switch(R){case"paid":return"#4CAF50";case"partial":return"#FF9800";case"overdue":return"#f44336";default:return"#666"}},F=R=>{switch(R){case"paid":return e.createElement(zr,null);case"partial":return e.createElement(Tw,null);case"overdue":return e.createElement(Dp,null);default:return e.createElement(Bw,null)}};return t?e.createElement("div",{style:{textAlign:"center",padding:"20px"}},e.createElement("div",{style:{animation:"spin 1s linear infinite"}},"🔄"),e.createElement("p",null,"Loading payment data...")):e.createElement("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"}},e.createElement("h2",{style:{color:"#e53e3e",marginBottom:"20px",textAlign:"center"}},"💰 Payment Tracker"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginBottom:"30px"}},e.createElement("div",{style:{padding:"15px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"8px",border:"1px solid #4CAF50",textAlign:"center"}},e.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#4CAF50"}},a.filter(R=>R.paymentStatus==="paid").length),e.createElement("div",{style:{color:"#fff"}},"Fully Paid")),e.createElement("div",{style:{padding:"15px",background:"rgba(255, 152, 0, 0.1)",borderRadius:"8px",border:"1px solid #FF9800",textAlign:"center"}},e.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#FF9800"}},a.filter(R=>R.paymentStatus==="partial").length),e.createElement("div",{style:{color:"#fff"}},"Partial Payment")),e.createElement("div",{style:{padding:"15px",background:"rgba(244, 67, 54, 0.1)",borderRadius:"8px",border:"1px solid #f44336",textAlign:"center"}},e.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#f44336"}},a.filter(R=>R.paymentStatus==="overdue").length),e.createElement("div",{style:{color:"#fff"}},"Overdue")),e.createElement("div",{style:{padding:"15px",background:"rgba(102, 102, 102, 0.1)",borderRadius:"8px",border:"1px solid #666",textAlign:"center"}},e.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#666"}},"$",a.reduce((R,D)=>R+Math.max(0,D.currentBalance),0).toFixed(2)),e.createElement("div",{style:{color:"#fff"}},"Total Outstanding"))),e.createElement("div",{style:{display:"flex",gap:"15px",marginBottom:"20px",flexWrap:"wrap"}},e.createElement("div",{style:{flex:"1",minWidth:"200px"}},e.createElement("input",{type:"text",placeholder:"Search players...",value:o,onChange:R=>i(R.target.value),style:{width:"100%",padding:"10px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}})),e.createElement("select",{value:c,onChange:R=>u(R.target.value),style:{padding:"10px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",minWidth:"150px"}},e.createElement("option",{value:"all"},"All Status"),e.createElement("option",{value:"paid"},"Fully Paid"),e.createElement("option",{value:"partial"},"Partial Payment"),e.createElement("option",{value:"overdue"},"Overdue")),e.createElement("button",{onClick:()=>{},style:{padding:"10px 15px",borderRadius:"6px",border:"none",background:"#4CAF50",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(az,null)," Export")),e.createElement("div",{style:{display:"grid",gap:"15px"}},U.map(R=>e.createElement("div",{key:R._id,style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"10px"}},e.createElement("div",{style:{flex:"1",minWidth:"200px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"5px"}},e.createElement("span",{style:{color:V(R.paymentStatus),fontSize:"18px"}},F(R.paymentStatus)),e.createElement("h4",{style:{color:"#fff",margin:0}},R.firstName," ",R.lastName)),e.createElement("div",{style:{color:"#ccc",fontSize:"14px"}},R.email," • ",R.phone||"No phone")),e.createElement("div",{style:{textAlign:"center",minWidth:"120px"}},e.createElement("div",{style:{fontSize:"18px",fontWeight:"bold",color:R.currentBalance>0?"#f44336":"#4CAF50"}},"$",R.currentBalance.toFixed(2)),e.createElement("div",{style:{color:"#ccc",fontSize:"12px"}},R.currentBalance>0?"Owed":"Paid")),e.createElement("div",{style:{display:"flex",gap:"8px"}},e.createElement("button",{onClick:()=>{g(R),h(!0)},style:{padding:"8px 12px",borderRadius:"4px",border:"none",background:"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"5px"}},e.createElement(Vn,null)," Payment"),e.createElement("button",{onClick:()=>{g(R),S(!0)},style:{padding:"8px 12px",borderRadius:"4px",border:"none",background:"#f44336",color:"#fff",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"5px"}},e.createElement(Dp,null)," Penalty"),e.createElement("button",{onClick:()=>{g(R),E(!0)},style:{padding:"8px 12px",borderRadius:"4px",border:"1px solid #666",background:"transparent",color:"#fff",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"5px"}},e.createElement(Ni,null)," Details"))))),f&&m&&e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"flex-start",justifyContent:"center",zIndex:9999,padding:"20px",overflowY:"auto"}},e.createElement("div",{style:{background:"#333",padding:"20px",borderRadius:"8px",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflow:"auto",margin:"auto"}},e.createElement("h3",{style:{color:"#fff",marginBottom:"20px"}},"Add Payment - ",m.firstName," ",m.lastName),e.createElement("div",{style:{display:"grid",gap:"15px"}},e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Payment Type"),e.createElement("select",{value:N.paymentType,onChange:R=>{const D=R.target.value;let j=0;D==="registration_fee"?j=_.registrationFee:D==="weekly_dues"?j=_.weeklyDues:D==="participation_fee"&&(j=_.registrationFee+_.weeklyDues*_.totalWeeks),C(X=>({...X,paymentType:D,amount:j}))},style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}},e.createElement("option",{value:"registration_fee"},"Registration Fee ($",_.registrationFee,")"),e.createElement("option",{value:"weekly_dues"},"Weekly Dues ($",_.weeklyDues,")"),e.createElement("option",{value:"participation_fee"},"Participation Fee ($",_.registrationFee+_.weeklyDues*_.totalWeeks,")"),e.createElement("option",{value:"penalty"},"Penalty Payment"),e.createElement("option",{value:"other"},"Other"))),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Amount ($)"),e.createElement("input",{type:"number",value:N.amount,onChange:R=>C(D=>({...D,amount:R.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"},step:"0.01"})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Payment Method"),e.createElement("select",{value:N.paymentMethod,onChange:R=>C(D=>({...D,paymentMethod:R.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}},e.createElement("option",{value:"cash"},"Cash"),e.createElement("option",{value:"venmo"},"Venmo"),e.createElement("option",{value:"credit_card"},"Credit/Debit Card"),e.createElement("option",{value:"check"},"Check"))),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Date"),e.createElement("input",{type:"date",value:N.date,onChange:R=>C(D=>({...D,date:R.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Notes"),e.createElement("textarea",{value:N.notes,onChange:R=>C(D=>({...D,notes:R.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",minHeight:"60px",resize:"vertical"},placeholder:"Optional notes about this payment..."}))),e.createElement("div",{style:{display:"flex",gap:"10px",marginTop:"20px"}},e.createElement("button",{onClick:Z,style:{padding:"10px 20px",borderRadius:"6px",border:"none",background:"#4CAF50",color:"#fff",cursor:"pointer",flex:"1"}},"Add Payment"),e.createElement("button",{onClick:()=>h(!1),style:{padding:"10px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#fff",cursor:"pointer",flex:"1"}},"Cancel")))),v&&m&&e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"flex-start",justifyContent:"center",zIndex:9999,padding:"20px",overflowY:"auto"}},e.createElement("div",{style:{background:"#333",padding:"20px",borderRadius:"8px",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflow:"auto",margin:"auto"}},e.createElement("h3",{style:{color:"#fff",marginBottom:"20px"}},"Add Penalty - ",m.firstName," ",m.lastName),e.createElement("div",{style:{display:"grid",gap:"15px"}},e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Strike Level"),e.createElement("select",{value:I.strikeLevel,onChange:R=>{const D=R.target.value;A(j=>({...j,strikeLevel:D,amount:D==="1"?_.penaltyStructure.strike1:D==="2"?_.penaltyStructure.strike2:D==="3"?_.penaltyStructure.strike3:0}))},style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}},e.createElement("option",{value:"1"},"Strike 1 - $",_.penaltyStructure.strike1," fine"),e.createElement("option",{value:"2"},"Strike 2 - $",_.penaltyStructure.strike2," fine"),e.createElement("option",{value:"3"},"Strike 3 - ",_.penaltyStructure.strike3>0?`$${_.penaltyStructure.strike3} fine`:"Removal"))),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Fine Amount ($)"),e.createElement("input",{type:"number",value:I.amount,onChange:R=>A(D=>({...D,amount:R.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"},step:"0.01"})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Reason"),e.createElement("input",{type:"text",value:I.reason,onChange:R=>A(D=>({...D,reason:R.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"},placeholder:"Reason for penalty..."})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Date"),e.createElement("input",{type:"date",value:I.date,onChange:R=>A(D=>({...D,date:R.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Notes"),e.createElement("textarea",{value:I.notes,onChange:R=>A(D=>({...D,notes:R.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",minHeight:"60px",resize:"vertical"},placeholder:"Additional details about the penalty..."}))),e.createElement("div",{style:{display:"flex",gap:"10px",marginTop:"20px"}},e.createElement("button",{onClick:H,style:{padding:"10px 20px",borderRadius:"6px",border:"none",background:"#f44336",color:"#fff",cursor:"pointer",flex:"1"}},"Add Penalty"),e.createElement("button",{onClick:()=>S(!1),style:{padding:"10px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#fff",cursor:"pointer",flex:"1"}},"Cancel")))),x&&m&&e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"flex-start",justifyContent:"center",zIndex:9999,padding:"20px",overflowY:"auto"}},e.createElement("div",{style:{background:"#333",padding:"20px",borderRadius:"8px",maxWidth:"800px",width:"90%",maxHeight:"80vh",overflow:"auto",margin:"auto"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"}},e.createElement("h3",{style:{color:"#fff",margin:0}},"Payment Details - ",m.firstName," ",m.lastName),e.createElement("button",{onClick:()=>E(!1),style:{background:"none",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer"}},"×")),e.createElement("div",{style:{marginBottom:"20px",padding:"15px",background:"#222",borderRadius:"6px"}},e.createElement("h4",{style:{color:"#fff",marginBottom:"10px"}},"Player Information"),e.createElement("div",{style:{color:"#ccc",fontSize:"14px"}},e.createElement("div",null,"Email: ",m.email),e.createElement("div",null,"Phone: ",m.phone||"Not provided"),e.createElement("div",null,"Current Balance: ",e.createElement("span",{style:{color:m.currentBalance>0?"#f44336":"#4CAF50",fontWeight:"bold"}},"$",m.currentBalance.toFixed(2))),e.createElement("div",null,"Payment Status: ",e.createElement("span",{style:{color:V(m.paymentStatus)}},m.paymentStatus.toUpperCase())))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h4",{style:{color:"#fff",marginBottom:"10px"}},"Payment History"),console.log("🔍 Details Modal - selectedPlayer:",m),console.log("🔍 Details Modal - paymentHistory:",m.paymentHistory),m.paymentHistory&&m.paymentHistory.length>0?e.createElement("div",{style:{maxHeight:"300px",overflowY:"auto"}},m.paymentHistory.map((R,D)=>e.createElement("div",{key:D,style:{padding:"10px",marginBottom:"8px",background:"#222",borderRadius:"4px",border:"1px solid #444"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("div",{style:{color:"#fff",fontWeight:"bold"}},"$",R.amount," - ",R.paymentType.replace("_"," ").toUpperCase()),e.createElement("div",{style:{color:"#ccc",fontSize:"12px"}},new Date(R.date||R.timestamp).toLocaleDateString())),e.createElement("div",{style:{color:"#ccc",fontSize:"12px",marginTop:"5px"}},"Method: ",R.paymentMethod," • ",R.notes&&`Notes: ${R.notes}`)))):e.createElement("div",{style:{color:"#ccc",fontStyle:"italic"}},"No payment history found.")),e.createElement("div",null,e.createElement("h4",{style:{color:"#fff",marginBottom:"10px"}},"Penalties"),m.penalties&&m.penalties.length>0?e.createElement("div",{style:{maxHeight:"200px",overflowY:"auto"}},m.penalties.map((R,D)=>e.createElement("div",{key:D,style:{padding:"10px",marginBottom:"8px",background:"#222",borderRadius:"4px",border:"1px solid #f44336"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("div",{style:{color:"#f44336",fontWeight:"bold"}},"$",R.amount," - ",R.reason),e.createElement("div",{style:{color:"#ccc",fontSize:"12px"}},new Date(R.date||R.timestamp).toLocaleDateString())),e.createElement("div",{style:{color:"#ccc",fontSize:"12px",marginTop:"5px"}},"Strike Level: ",R.strikeLevel," • ",R.notes&&`Notes: ${R.notes}`)))):e.createElement("div",{style:{color:"#ccc",fontStyle:"italic"}},"No penalties found.")))))}function zF(){const[a,r]=b.useState({phase1Weeks:6,currentSession:{name:"Current Session",startDate:"",endDate:"",isActive:!0}}),[t,n]=b.useState(!0),[o,i]=b.useState(!1),[c,u]=b.useState({type:"",text:""}),[m,g]=b.useState("phases"),[f,h]=b.useState([]),[v,S]=b.useState(""),[x,E]=b.useState([]),[N,C]=b.useState([]),[I,A]=b.useState({}),[_,k]=b.useState("");b.useEffect(()=>{B(),z(),M()},[]);const B=async()=>{try{const H=await fetch(`${pe}/api/payment-config`);if(H.ok){const V=await H.json();V.config&&r({phase1Weeks:V.config.phase1Weeks||6,currentSession:{name:"Current Session",startDate:"",endDate:"",isActive:!0,...V.config.currentSession}})}}catch(H){console.error("Error loading league config:",H),u({type:"error",text:"Failed to load league configuration"})}finally{n(!1)}},z=async()=>{try{const H=await fetch(`${pe}/admin/divisions`);if(H.ok){const V=await H.json();h(V),V.length>0&&S(V[0].name)}}catch(H){console.error("Error loading divisions:",H)}},M=async()=>{try{const H=await fetch(`${pe}/api/users`);if(H.ok){const V=await H.json();E(V.filter(F=>F.isApproved)),C(V.filter(F=>F.isApproved&&(!F.divisions||F.divisions.length===0)))}}catch(H){console.error("Error loading players:",H)}},O=async(H,V)=>{try{(await fetch(`${pe}/admin/user/${H}/add-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:V})})).ok?(u({type:"success",text:"Player added to division successfully!"}),M()):u({type:"error",text:"Failed to add player to division"})}catch(F){console.error("Error adding player to division:",F),u({type:"error",text:"Error adding player to division"})}},U=async(H,V)=>{try{(await fetch(`${pe}/admin/user/${H}/remove-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:V})})).ok?(u({type:"success",text:"Player removed from division successfully!"}),M()):u({type:"error",text:"Failed to remove player from division"})}catch(F){console.error("Error removing player from division:",F),u({type:"error",text:"Error removing player from division"})}};if(t)return e.createElement("div",{style:{textAlign:"center",padding:"20px"}},e.createElement(Lr,{style:{animation:"spin 1s linear infinite"}}),e.createElement("p",null,"Loading league configuration..."));const Z=()=>{switch(m){case"phases":return e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px"}},e.createElement(Il,{style:{color:"#4CAF50"}}),e.createElement("h3",{style:{color:"#fff",margin:0}},"Phase Configuration")),e.createElement("div",{style:{padding:"20px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"8px",border:"1px solid #4CAF50",textAlign:"center"}},e.createElement(Sy,{style:{fontSize:"48px",color:"#4CAF50",marginBottom:"15px"}}),e.createElement("p",{style:{color:"#4CAF50",margin:0,fontSize:"16px"}},"Phase configuration is now part of the division creation process.",e.createElement("br",null),'Use the "Divisions" tab to create new divisions with phase settings.')));case"rosters":return e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px"}},e.createElement(Ai,{style:{color:"#4CAF50"}}),e.createElement("h3",{style:{color:"#fff",margin:0}},"Player Rosters")),e.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(255,255,255,0.02)"}},e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Select Division"),e.createElement("select",{value:v,onChange:H=>S(H.target.value),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}},e.createElement("option",{value:""},"Choose a division..."),f.map(H=>e.createElement("option",{key:H._id,value:H.name},H.name)))),v&&e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"}},e.createElement("div",null,e.createElement("h4",{style:{color:"#fff",marginBottom:"15px"}},"Players in ",v),e.createElement("div",{style:{maxHeight:"400px",overflowY:"auto"}},x.filter(H=>H.divisions&&H.divisions.includes(v)).length===0?e.createElement("p",{style:{color:"#888",textAlign:"center"}},"No players in this division"):x.filter(H=>H.divisions&&H.divisions.includes(v)).map(H=>e.createElement("div",{key:H._id,style:{padding:"10px",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",background:"rgba(255,255,255,0.02)",marginBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("div",null,e.createElement("p",{style:{color:"#fff",margin:"0 0 5px 0"}},H.firstName," ",H.lastName),e.createElement("p",{style:{color:"#888",margin:0,fontSize:"12px"}},H.email)),e.createElement("button",{onClick:()=>U(H._id,v),style:{padding:"4px 8px",borderRadius:"4px",border:"none",background:"#e53e3e",color:"#fff",cursor:"pointer",fontSize:"12px"}},e.createElement(fz,null)))))),e.createElement("div",null,e.createElement("h4",{style:{color:"#fff",marginBottom:"15px"}},"Available Players"),e.createElement("div",{style:{maxHeight:"400px",overflowY:"auto"}},N.length===0?e.createElement("p",{style:{color:"#888",textAlign:"center"}},"No available players"):N.map(H=>e.createElement("div",{key:H._id,style:{padding:"10px",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",background:"rgba(255,255,255,0.02)",marginBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("div",null,e.createElement("p",{style:{color:"#fff",margin:"0 0 5px 0"}},H.firstName," ",H.lastName),e.createElement("p",{style:{color:"#888",margin:0,fontSize:"12px"}},H.email)),e.createElement("button",{onClick:()=>O(H._id,v),style:{padding:"4px 8px",borderRadius:"4px",border:"none",background:"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px"}},e.createElement(Ai,null)))))))));case"standings":return e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px"}},e.createElement(Wi,{style:{color:"#4CAF50"}}),e.createElement("h3",{style:{color:"#fff",margin:0}},"Standings Tracking")),e.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(255,255,255,0.02)"}},e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Select Division"),e.createElement("select",{value:_,onChange:H=>k(H.target.value),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}},e.createElement("option",{value:""},"Choose a division..."),f.map(H=>e.createElement("option",{key:H._id,value:H.name},H.name)))),_&&e.createElement("div",null,e.createElement("h4",{style:{color:"#fff",marginBottom:"15px"}},"Standings for ",_),e.createElement("div",{style:{padding:"15px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"6px",border:"1px solid #4CAF50",textAlign:"center"}},e.createElement(N0,{style:{fontSize:"48px",color:"#4CAF50",marginBottom:"10px"}}),e.createElement("p",{style:{color:"#4CAF50",margin:0}},"Standings tracking will be integrated with CSI LMS data.",e.createElement("br",null),'Use the "Divisions" tab to sync standings from CSI LMS.')))));default:return null}};return e.createElement("div",{style:{padding:"20px",maxWidth:"1000px",margin:"0 auto"}},e.createElement("h2",{style:{color:"#e53e3e",marginBottom:"20px",textAlign:"center"}},"📅 League Management"),c.text&&e.createElement("div",{style:{padding:"10px 15px",borderRadius:"6px",marginBottom:"20px",background:c.type==="success"?"rgba(76, 175, 80, 0.2)":"rgba(229, 62, 62, 0.2)",border:`1px solid ${c.type==="success"?"#4CAF50":"#e53e3e"}`,color:c.type==="success"?"#4CAF50":"#e53e3e",display:"flex",alignItems:"center",gap:"10px"}},c.type==="success"?e.createElement(zr,null):e.createElement(tf,null),c.text),e.createElement("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap"}},e.createElement("button",{onClick:()=>g("phases"),style:{padding:"10px 20px",borderRadius:"6px",border:"none",background:m==="phases"?"#4CAF50":"#333",color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(Il,null)," Phase Configuration"),e.createElement("button",{onClick:()=>g("rosters"),style:{padding:"10px 20px",borderRadius:"6px",border:"none",background:m==="rosters"?"#4CAF50":"#333",color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(Ai,null)," Player Rosters"),e.createElement("button",{onClick:()=>g("standings"),style:{padding:"10px 20px",borderRadius:"6px",border:"none",background:m==="standings"?"#4CAF50":"#333",color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(Wi,null)," Standings Tracking")),Z())}class OF{async login(r){try{const t=await fetch(`${pe}/api/unified-auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:r})}),n=await t.json();return t.ok&&n.success?{success:!0,user:n.user,userType:n.userType,profileStatus:n.profileStatus,message:"Login successful"}:{success:!1,message:n.message||"Login failed"}}catch(t){return console.error("Unified login error:",t),{success:!1,message:"Network error. Please check your connection."}}}async getUserStatus(r){try{const t=await fetch(`${pe}/api/unified-auth/user-status/${r}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();return t.ok&&n.success?{success:!0,user:n.user,isLeaguePlayer:n.isLeaguePlayer,isLadderPlayer:n.isLadderPlayer,leagueData:n.leagueData,ladderData:n.ladderData}:{success:!1,message:n.message||"Failed to get user status"}}catch(t){return console.error("Get user status error:",t),{success:!1,message:"Network error. Please check your connection."}}}async claimAccount(r,t,n){try{const o=await fetch(`${pe}/api/unified-auth/claim-account`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,firstName:t,lastName:n})}),i=await o.json();return o.ok&&i.success?{success:!0,user:i.user,message:i.message||"Account claimed successfully"}:{success:!1,message:i.message||"Failed to claim account"}}catch(o){return console.error("Claim account error:",o),{success:!1,message:"Network error. Please check your connection."}}}async updateProfile(r,t,n){try{const o=await fetch(`${pe}/api/unified-auth/update-profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r,profile:t,preferences:n})}),i=await o.json();return o.ok&&i.success?{success:!0,user:i.user,message:i.message||"Profile updated successfully"}:{success:!1,message:i.message||"Failed to update profile"}}catch(o){return console.error("Update profile error:",o),{success:!1,message:"Network error. Please check your connection."}}}async changePin(r,t,n){try{const o=await fetch(`${pe}/api/unified-auth/change-pin`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r,currentPin:t,newPin:n})}),i=await o.json();return o.ok&&i.success?{success:!0,message:i.message||"PIN changed successfully"}:{success:!1,message:i.message||"Failed to change PIN"}}catch(o){return console.error("Change PIN error:",o),{success:!1,message:"Network error. Please check your connection."}}}async checkUserExists(r){try{const t=await fetch(`${pe}/api/unified-auth/user-status/${r}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();return t.ok&&n.success}catch(t){return console.error("Check user exists error:",t),!1}}async copyProfileData(r,t,n){try{const o=await fetch(`${pe}/api/unified-auth/copy-profile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r,fromApp:t,toApp:n})}),i=await o.json();return o.ok&&i.success?{success:!0,targetProfile:i.targetProfile,message:i.message||"Profile data copied successfully"}:{success:!1,message:i.message||"Failed to copy profile data"}}catch(o){return console.error("Copy profile data error:",o),{success:!1,message:"Network error. Please check your connection."}}}async getUserProfile(r){try{const t=await fetch(`${pe}/api/unified-auth/user-profile/${r}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();return t.ok&&n.success?{success:!0,user:n.user,leagueProfile:n.leagueProfile,ladderProfile:n.ladderProfile}:{success:!1,message:n.message||"Failed to get user profile"}}catch(t){return console.error("Get user profile error:",t),{success:!1,message:"Network error. Please check your connection."}}}}const FF=new OF;class UF{constructor(){this.backendUrl=pe}async getAllUsers(){try{const r=await fetch(`${this.backendUrl}/api/unified-auth/all-users`,{method:"GET",headers:{"Content-Type":"application/json"}}),t=await r.json();if(r.ok&&t.success)return t.users||[];throw new Error(t.message||"Failed to get users")}catch(r){throw console.error("Get all unified users error:",r),r}}async searchUsers(r){try{const t=await fetch(`${this.backendUrl}/api/unified-auth/search-users?q=${encodeURIComponent(r)}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();if(t.ok&&n.success)return n.users||[];throw new Error(n.message||"Failed to search users")}catch(t){throw console.error("Search unified users error:",t),t}}async getUserData(r){try{const t=await fetch(`${this.backendUrl}/api/unified-auth/user-profile/${r}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();if(t.ok&&n.success)return{user:n.user,leagueProfile:n.leagueProfile,ladderProfile:n.ladderProfile};throw new Error(n.message||"Failed to get user data")}catch(t){throw console.error("Get unified user data error:",t),t}}async addUser(r){try{const t=await fetch(`${this.backendUrl}/api/unified-auth/admin/add-user`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),n=await t.json();if(t.ok&&n.success)return n.user;throw new Error(n.message||"Failed to add user")}catch(t){throw console.error("Add unified user error:",t),t}}async updateUser(r,t){try{const n=await fetch(`${this.backendUrl}/api/unified-auth/admin/update-user/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),o=await n.json();if(n.ok&&o.success)return o.user;throw new Error(o.message||"Failed to update user")}catch(n){throw console.error("Update unified user error:",n),n}}async deleteUser(r){try{const t=await fetch(`${this.backendUrl}/api/unified-auth/admin/delete-user/${r}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),n=await t.json();if(t.ok&&n.success)return!0;throw new Error(n.message||"Failed to delete user")}catch(t){throw console.error("Delete unified user error:",t),t}}async addUserDivision(r,t){try{const n=await fetch(`${this.backendUrl}/api/unified-auth/admin/add-division/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:t})}),o=await n.json();if(n.ok&&o.success)return!0;throw new Error(o.message||"Failed to add division")}catch(n){throw console.error("Add user division error:",n),n}}async removeUserDivision(r,t){try{const n=await fetch(`${this.backendUrl}/api/unified-auth/admin/remove-division/${r}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:t})}),o=await n.json();if(n.ok&&o.success)return!0;throw new Error(o.message||"Failed to remove division")}catch(n){throw console.error("Remove user division error:",n),n}}async approveUser(r,t){try{const n=await fetch(`${this.backendUrl}/api/unified-auth/admin/approve-user/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),o=await n.json();if(n.ok&&o.success)return o.user;throw new Error(o.message||"Failed to approve user")}catch(n){throw console.error("Approve unified user error:",n),n}}async deactivateUser(r,t){try{const n=await fetch(`${this.backendUrl}/api/unified-auth/admin/deactivate-user/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:t})}),o=await n.json();if(n.ok&&o.success)return o.user;throw new Error(o.message||"Failed to deactivate user")}catch(n){throw console.error("Deactivate unified user error:",n),n}}async getSystemStats(){try{const r=await fetch(`${this.backendUrl}/api/unified-auth/admin/system-stats`,{method:"GET",headers:{"Content-Type":"application/json"}}),t=await r.json();if(r.ok&&t.success)return t.stats;throw new Error(t.message||"Failed to get system stats")}catch(r){throw console.error("Get unified system stats error:",r),r}}async getPendingApprovals(){try{const r=await fetch(`${this.backendUrl}/api/unified-auth/admin/pending-approvals`,{method:"GET",headers:{"Content-Type":"application/json"}}),t=await r.json();if(r.ok&&t.success)return t.approvals||[];throw new Error(t.message||"Failed to get pending approvals")}catch(r){throw console.error("Get pending unified approvals error:",r),r}}async linkUserProfiles(r,t){try{const n=await fetch(`${this.backendUrl}/api/unified-auth/admin/link-profiles/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),o=await n.json();if(n.ok&&o.success)return o.user;throw new Error(o.message||"Failed to link profiles")}catch(n){throw console.error("Link user profiles error:",n),n}}async getUserActivityLog(r){try{const t=await fetch(`${this.backendUrl}/api/unified-auth/admin/user-activity/${r}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();if(t.ok&&n.success)return n.activity||[];throw new Error(n.message||"Failed to get user activity")}catch(t){throw console.error("Get user activity log error:",t),t}}}const ul=new UF,WF=void 0,Gx="frbcaplgmailcom";function jF({backendUrl:a,onComplete:r}){const[t,n]=b.useState(1),[o,i]=b.useState({name:"",description:"",scheduleUrl:"",standingsUrl:"",seasonStart:"",phase1Weeks:6,phase2Weeks:4,totalWeeks:10}),[c,u]=b.useState(!1),[m,g]=b.useState(""),f=[{id:1,title:"Create Division in CSI LMS",description:"First, create the division in the CSI LMS software",instructions:["1. Log into CSI LMS at https://lms.fargorate.com","2. Navigate to League Management","3. Create a new division with your desired name","4. Set up the division settings and rules","5. Make sure the division is active and ready for players"],completed:!1},{id:2,title:"Get Division URLs",description:"Copy the schedule and standings URLs from CSI LMS",instructions:["1. In CSI LMS, go to the division you just created","2. Click on the 'Reports' link in the navigation","3. Click the 'Schedule' button","4. Copy the URL from the schedule report page","5. Click the 'Teams' button","6. Copy the URL from the teams report page","7. Both URLs should look like: https://lms.fargorate.com/PublicReport/LeagueReports?..."],completed:!1},{id:3,title:"Configure Phase Settings",description:"Set up the division's phase structure and session dates",instructions:["1. Set the total number of weeks for the session","2. Configure how many weeks Phase 1 should last","3. Phase 2 weeks will be calculated automatically","4. Set the session start date","5. Review the calculated phase dates"],completed:!1},{id:4,title:"Add Division to App",description:"Create the division in your app with the URLs",instructions:["1. Enter the division name (exactly as in CSI LMS)","2. Add a description (optional)","3. Paste the schedule URL from CSI LMS","4. Paste the standings URL from CSI LMS","5. Click 'Create Division'"],completed:!1},{id:5,title:"Test Data Sync",description:"Verify the division is working correctly",instructions:["1. Click 'Update Schedule' to sync match data","2. Click 'Update Standings' to sync player rankings","3. Verify data appears correctly in the app","4. Test the division in the main dashboard"],completed:!1}],h=(x,E)=>{i(N=>({...N,[x]:E}))},v=async()=>{u(!0),g("");try{const x=await fetch(`${a}/api/seasons`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.name,division:o.name,description:o.description,scheduleUrl:o.scheduleUrl,standingsUrl:o.standingsUrl,seasonStart:o.seasonStart})}),E=await x.json();if(x.ok){try{const N=await fetch(`${a}/admin/divisions`);if(N.ok){const I=(await N.json()).find(A=>A.name===o.name);I&&await fetch(`${a}/api/division-config/${I._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({phase1Weeks:o.phase1Weeks,phase2Weeks:o.phase2Weeks,totalWeeks:o.totalWeeks,currentSession:{name:`${o.name} Session`,startDate:o.seasonStart,endDate:null,isActive:!0}})})}}catch(N){console.error("Error saving phase configuration:",N)}g("✅ Division created successfully with phase configuration!"),n(5),r&&r()}else g("❌ "+(E.error||"Failed to create division."))}catch(x){g("❌ Failed to create division: "+x.message)}u(!1)},S=()=>{switch(t){case 1:return e.createElement("div",{className:K.workflowStep},e.createElement("div",{className:K.stepInstructions},f[0].instructions.map((x,E)=>e.createElement("div",{key:E,className:K.instructionItem},x))),e.createElement("div",{className:K.stepActions},e.createElement("button",{className:K.workflowButton,onClick:()=>n(2)},e.createElement(xl,null)," I've Created the Division in CSI LMS")));case 2:return e.createElement("div",{className:K.workflowStep},e.createElement("div",{className:K.stepInstructions},f[1].instructions.map((x,E)=>e.createElement("div",{key:E,className:K.instructionItem},x))),e.createElement("div",{className:K.stepActions},e.createElement("button",{className:K.workflowButton,onClick:()=>n(3)},e.createElement(xl,null)," I Have the URLs Ready")));case 3:return e.createElement("div",{className:K.workflowStep},e.createElement("div",{className:K.stepInstructions},f[2].instructions.map((x,E)=>e.createElement("div",{key:E,className:K.instructionItem},x))),e.createElement("div",{className:K.divisionForm},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"15px"}},e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px",fontSize:"14px"}},"Total Weeks"),e.createElement("input",{type:"number",value:o.totalWeeks,onChange:x=>{const E=Number(x.target.value),N=o.phase1Weeks,C=Math.max(1,E-N);h("totalWeeks",E),h("phase2Weeks",C)},className:K.workflowInput,min:"2",max:"40"})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px",fontSize:"14px"}},"Phase 1 Weeks"),e.createElement("input",{type:"number",value:o.phase1Weeks,onChange:x=>{const E=Number(x.target.value);if(h("phase1Weeks",E),o.totalWeeks){const N=Math.max(1,o.totalWeeks-E);h("phase2Weeks",N)}},className:K.workflowInput,min:"1",max:"20"}))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"15px"}},e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px",fontSize:"14px"}},"Phase 2 Weeks"),e.createElement("input",{type:"number",value:o.phase2Weeks,onChange:x=>{const E=Number(x.target.value);h("phase2Weeks",E);const N=o.phase1Weeks+E;h("totalWeeks",N)},className:K.workflowInput,min:"1",max:"20"})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px",fontSize:"14px"}},"Session Start Date"),e.createElement("input",{type:"date",value:o.seasonStart,onChange:x=>h("seasonStart",x.target.value),className:K.workflowInput}))),o.seasonStart&&e.createElement("div",{style:{marginTop:"15px",padding:"15px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"6px",border:"1px solid #4CAF50"}},e.createElement("div",{style:{color:"#4CAF50",fontSize:"14px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"10px"}},e.createElement(Sy,null),e.createElement("strong",null,"Calculated Session Dates:")),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"10px"}},e.createElement("div",null,e.createElement("strong",null,"Phase 1:"),e.createElement("br",null),new Date(o.seasonStart).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})," to ",(()=>{const x=new Date(o.seasonStart),E=new Date(x);return E.setDate(x.getDate()+o.phase1Weeks*6-1),E.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})()),e.createElement("div",null,e.createElement("strong",null,"Phase 2:"),e.createElement("br",null),(()=>{const x=new Date(o.seasonStart),E=new Date(x);return E.setDate(x.getDate()+o.phase1Weeks*6),E.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})()," to ",(()=>{const x=new Date(o.seasonStart),E=new Date(x);return E.setDate(x.getDate()+o.phase1Weeks*6+o.phase2Weeks*6-1),E.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})())),e.createElement("div",{style:{marginTop:"10px",fontSize:"12px",opacity:.8}},"Total Session Length: ",o.totalWeeks," weeks (",o.phase1Weeks," weeks Phase 1 + ",o.phase2Weeks," weeks Phase 2)"))),e.createElement("button",{className:K.workflowButton,onClick:()=>n(4),disabled:!o.seasonStart},e.createElement(xl,null)," Continue to Division Setup")));case 4:return e.createElement("div",{className:K.workflowStep},e.createElement("div",{className:K.stepInstructions},f[3].instructions.map((x,E)=>e.createElement("div",{key:E,className:K.instructionItem},x))),e.createElement("div",{className:K.divisionForm},e.createElement("input",{type:"text",placeholder:"Division Name (exactly as in CSI LMS)",value:o.name,onChange:x=>h("name",x.target.value),className:K.workflowInput}),e.createElement("input",{type:"text",placeholder:"Description (optional)",value:o.description,onChange:x=>h("description",x.target.value),className:K.workflowInput}),e.createElement("input",{type:"url",placeholder:"Schedule URL from CSI LMS",value:o.scheduleUrl,onChange:x=>h("scheduleUrl",x.target.value),className:K.workflowInput}),e.createElement("input",{type:"url",placeholder:"Standings URL from CSI LMS",value:o.standingsUrl,onChange:x=>h("standingsUrl",x.target.value),className:K.workflowInput}),e.createElement("button",{className:K.workflowButton,onClick:v,disabled:c||!o.name||!o.scheduleUrl||!o.standingsUrl},c?"Creating...":"Create Division")),m&&e.createElement("div",{className:K.workflowResult},m));case 5:return e.createElement("div",{className:K.workflowStep},e.createElement("div",{className:K.stepInstructions},f[4].instructions.map((x,E)=>e.createElement("div",{key:E,className:K.instructionItem},x))),e.createElement("div",{className:K.stepActions},e.createElement(HF,{backendUrl:a,divisionName:o.name}),e.createElement("button",{className:K.workflowButton,onClick:()=>{n(1),i({name:"",description:"",scheduleUrl:"",standingsUrl:"",seasonStart:"",phase1Weeks:6,phase2Weeks:4,totalWeeks:10}),g("")}},e.createElement(Vn,null)," Create Another Division")));default:return null}};return e.createElement("div",{className:K.workflowContainer},e.createElement("div",{className:K.workflowHeader},e.createElement("h3",null,e.createElement(Vn,null)," Create New Division"),e.createElement("div",{className:K.workflowProgress},"Step ",t," of ",f.length)),e.createElement("div",{className:K.workflowSteps},f.map((x,E)=>e.createElement("div",{key:x.id,className:`${K.workflowStepIndicator} ${t>x.id?K.completed:t===x.id?K.active:K.pending}`},e.createElement("div",{className:K.stepNumber},x.id),e.createElement("div",{className:K.stepInfo},e.createElement("div",{className:K.stepTitle},x.title),e.createElement("div",{className:K.stepDescription},x.description))))),e.createElement("div",{className:K.workflowContent},S()))}function HF({backendUrl:a,divisionName:r}){const[t,n]=b.useState(!1),[o,i]=b.useState(""),c=async u=>{n(!0),i("");try{const g=await fetch(`${a}${u==="schedule"?"/admin/update-schedule":"/admin/update-standings"}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:r})}),f=await g.json();g.ok?i(`✅ ${u==="schedule"?"Schedule":"Standings"} updated successfully!`):i(`❌ Failed to update ${u}: ${f.error||"Unknown error"}`)}catch(m){i(`❌ Failed to update ${u}: ${m.message}`)}n(!1)};return e.createElement("div",{className:K.dataSyncTools},e.createElement("button",{className:K.syncButton,onClick:()=>c("schedule"),disabled:t},e.createElement(A0,null)," Update Schedule"),e.createElement("button",{className:K.syncButton,onClick:()=>c("standings"),disabled:t},e.createElement(A0,null)," Update Standings"),o&&e.createElement("div",{className:K.syncResult},o))}function $F({backendUrl:a}){const[r,t]=b.useState("approve"),[n,o]=b.useState([]),[i,c]=b.useState([]),[u,m]=b.useState(!1);b.useEffect(()=>{g(),f()},[]);const g=async()=>{m(!0);try{const x=await fetch(`${a}/api/users/pending-registrations`);if(x.ok){const E=await x.json();o(E.sort((N,C)=>new Date(N.registrationDate)-new Date(C.registrationDate)))}}catch(x){console.error("Error fetching pending registrations:",x)}m(!1)},f=async()=>{try{const x=await fetch(`${a}/api/users/pending-payment`);if(x.ok){const E=await x.json();c(E.users||[])}}catch(x){console.error("Error fetching pending payments:",x)}},h=async(x,E,N)=>{try{const C=await fetch(`${a}/api/users/${x}/confirm-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentMethod:E||"Admin Confirmed",paymentNotes:N||""})});if(C.ok){const I=await C.json();alert(`Payment confirmed! PIN: ${I.user.pin}`),f()}else alert("Failed to confirm payment")}catch(C){console.error("Error confirming payment:",C),alert("Error confirming payment")}},v=async(x,E)=>{try{(await fetch(`${a}/api/users/admin/approve-registration/${x}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approvedBy:"Admin",paymentInfo:{hasPaid:!0,paymentDate:new Date,paymentMethod:"Cash",paymentNotes:"Approved by admin"},division:E})})).ok?g():alert("Failed to approve registration")}catch(N){console.error("Error approving registration:",N),alert("Error approving registration")}},S=async(x,E)=>{try{(await fetch(`${a}/api/users/admin/reject-registration/${x}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rejectedBy:"Admin",notes:E})})).ok?g():alert("Failed to reject registration")}catch(N){console.error("Error rejecting registration:",N),alert("Error rejecting registration")}};return e.createElement("div",{className:K.playerManagementContainer},e.createElement("div",{className:K.tabHeader},e.createElement("button",{className:`${K.tabButton} ${r==="approve"?K.active:""}`,onClick:()=>t("approve")},e.createElement(Ai,null)," Approve New Players (",n.length,")"),e.createElement("button",{className:`${K.tabButton} ${r==="payments"?K.active:""}`,onClick:()=>t("payments")},e.createElement(zr,null)," Pending Payments (",i.length,")"),e.createElement("button",{className:`${K.tabButton} ${r==="manage"?K.active:""}`,onClick:()=>t("manage")},e.createElement(os,null)," Manage Existing Players")),e.createElement("div",{className:K.tabContent},r==="approve"&&e.createElement("div",{className:K.approvalSection},u?e.createElement("div",{className:K.loadingMessage},"Loading pending registrations..."):n.length===0?e.createElement("div",{className:K.emptyState},e.createElement(zr,null)," No pending registrations"):e.createElement("div",{className:K.registrationList},n.map((x,E)=>e.createElement("div",{key:x._id,className:K.registrationCard},e.createElement("div",{className:K.registrationHeader},e.createElement("span",{className:K.registrationNumber},"#",E+1),e.createElement("h4",null,x.firstName," ",x.lastName)),e.createElement("div",{className:K.registrationDetails},e.createElement("p",null,e.createElement("strong",null,"Email:")," ",x.email),e.createElement("p",null,e.createElement("strong",null,"Phone:")," ",x.phone),e.createElement("p",null,e.createElement("strong",null,"Registered:")," ",new Date(x.registrationDate).toLocaleDateString())),e.createElement("div",{className:K.registrationActions},e.createElement("select",{id:`division-${x._id}`,className:K.divisionSelect},e.createElement("option",{value:""},"Select Division"),e.createElement("option",{value:"FRBCAPL TEST"},"FRBCAPL TEST"),e.createElement("option",{value:"Singles Test"},"Singles Test"),e.createElement("option",{value:"Waiting List"},"Waiting List")),e.createElement("button",{className:K.approveButton,onClick:()=>{const N=document.getElementById(`division-${x._id}`).value;if(!N){alert("Please select a division before approving.");return}v(x._id,N)}},e.createElement(zr,null)," Approve"),e.createElement("button",{className:K.rejectButton,onClick:()=>{const N=prompt("Enter rejection reason (optional):");N!==null&&S(x._id,N)}},e.createElement(Al,null)," Reject")))))),r==="payments"&&e.createElement("div",{className:K.paymentSection},i.length===0?e.createElement("div",{className:K.emptyState},e.createElement(zr,null)," No pending payments"):e.createElement("div",{className:K.paymentList},i.map((x,E)=>e.createElement("div",{key:x._id,className:K.paymentCard},e.createElement("div",{className:K.paymentHeader},e.createElement("span",{className:K.paymentNumber},"#",E+1),e.createElement("h4",null,x.firstName," ",x.lastName)),e.createElement("div",{className:K.paymentDetails},e.createElement("p",null,e.createElement("strong",null,"Email:")," ",x.email),e.createElement("p",null,e.createElement("strong",null,"Registered:")," ",new Date(x.registrationDate).toLocaleDateString()),e.createElement("p",null,e.createElement("strong",null,"Status:")," ",e.createElement("span",{className:K.pendingStatus},"Payment Pending"))),e.createElement("div",{className:K.paymentActions},e.createElement("select",{id:`payment-method-${x._id}`,className:K.paymentMethodSelect},e.createElement("option",{value:"Cash"},"Cash"),e.createElement("option",{value:"Venmo"},"Venmo"),e.createElement("option",{value:"Cash App"},"Cash App"),e.createElement("option",{value:"PayPal"},"PayPal"),e.createElement("option",{value:"Credit Card"},"Credit Card"),e.createElement("option",{value:"Apple Pay"},"Apple Pay"),e.createElement("option",{value:"Google Pay"},"Google Pay"),e.createElement("option",{value:"Check"},"Check"),e.createElement("option",{value:"Admin Confirmed"},"Admin Confirmed")),e.createElement("button",{className:K.confirmPaymentButton,onClick:()=>{const N=document.getElementById(`payment-method-${x._id}`).value,C=prompt("Payment notes (optional):");C!==null&&h(x._id,N,C)}},e.createElement(zr,null)," Confirm Payment")))))),r==="manage"&&e.createElement("div",{className:K.manageSection},e.createElement(YF,{backendUrl:a}))))}function Vw({player:a,onSave:r,onClose:t}){const[n,o]=b.useState({firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",phone:a.phone||"",textNumber:a.textNumber||"",emergencyContactName:a.emergencyContactName||"",emergencyContactPhone:a.emergencyContactPhone||"",locations:a.locations||"",notes:a.notes||""}),i=(u,m)=>{let g=m;if(u==="phone"||u==="textNumber"||u==="emergencyContactPhone"){const f=m.replace(/\D/g,"");f.length<=3?g=`(${f}`:f.length<=6?g=`(${f.slice(0,3)}) ${f.slice(3)}`:f.length<=10?g=`(${f.slice(0,3)}) ${f.slice(3,6)}-${f.slice(6)}`:g=`(${f.slice(0,3)}) ${f.slice(3,6)}-${f.slice(6,10)}`}o(f=>({...f,[u]:g}))},c=u=>{u.preventDefault(),r({...a,...n})};return e.createElement("div",{className:K.modalOverlay},e.createElement("div",{className:K.modal},e.createElement("div",{className:K.modalHeader},e.createElement("h3",null,"Edit Player: ",a.firstName," ",a.lastName),e.createElement("button",{onClick:t,className:K.closeButton},"×")),e.createElement("form",{onSubmit:c,className:K.modalForm},e.createElement("div",{className:K.formRow},e.createElement("div",{className:K.formField},e.createElement("label",null,"First Name:"),e.createElement("input",{type:"text",value:n.firstName,onChange:u=>i("firstName",u.target.value),required:!0})),e.createElement("div",{className:K.formField},e.createElement("label",null,"Last Name:"),e.createElement("input",{type:"text",value:n.lastName,onChange:u=>i("lastName",u.target.value),required:!0}))),e.createElement("div",{className:K.formRow},e.createElement("div",{className:K.formField},e.createElement("label",null,"Email:"),e.createElement("input",{type:"email",value:n.email,onChange:u=>i("email",u.target.value),required:!0})),e.createElement("div",{className:K.formField},e.createElement("label",null,"Phone:"),e.createElement("input",{type:"tel",value:n.phone,onChange:u=>i("phone",u.target.value),placeholder:"(555) 123-4567"}))),e.createElement("div",{className:K.formRow},e.createElement("div",{className:K.formField},e.createElement("label",null,"Text Number:"),e.createElement("input",{type:"tel",value:n.textNumber,onChange:u=>i("textNumber",u.target.value),placeholder:"(555) 123-4567"})),e.createElement("div",{className:K.formField},e.createElement("label",null,"Emergency Contact Name:"),e.createElement("input",{type:"text",value:n.emergencyContactName,onChange:u=>i("emergencyContactName",u.target.value)}))),e.createElement("div",{className:K.formRow},e.createElement("div",{className:K.formField},e.createElement("label",null,"Emergency Contact Phone:"),e.createElement("input",{type:"tel",value:n.emergencyContactPhone,onChange:u=>i("emergencyContactPhone",u.target.value),placeholder:"(555) 123-4567"})),e.createElement("div",{className:K.formField},e.createElement("label",null,"Playing Locations:"),e.createElement("input",{type:"text",value:n.locations,onChange:u=>i("locations",u.target.value)}))),e.createElement("div",{className:K.formField},e.createElement("label",null,"Notes:"),e.createElement("textarea",{value:n.notes,onChange:u=>i("notes",u.target.value),rows:"3"})),e.createElement("div",{className:K.modalActions},e.createElement("button",{type:"button",onClick:t,className:K.cancelButton},"Cancel"),e.createElement("button",{type:"submit",className:K.saveButton},"Save Changes")))))}function YF({backendUrl:a}){const[r,t]=b.useState(""),[n,o]=b.useState([]),[i,c]=b.useState([]),[u,m]=b.useState({}),[g,f]=b.useState(null),[h,v]=b.useState(!1);b.useEffect(()=>{fetch(`${a}/admin/divisions`).then(_=>_.json()).then(_=>c(_.map(k=>k.name))).catch(()=>c([]))},[a]);const S=async _=>{if(_.preventDefault(),!!r.trim())try{const B=await(await fetch(`${a}/admin/search-users?query=${encodeURIComponent(r)}`)).json();o(B),m({})}catch{o([]),alert("Search failed")}},x=async(_,k)=>{try{await fetch(`${a}/admin/user/${_}/add-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:k})}),S({preventDefault:()=>{}})}catch{alert("Failed to add user to division")}},E=async(_,k)=>{try{await fetch(`${a}/admin/user/${_}/remove-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:k})}),S({preventDefault:()=>{}})}catch{alert("Failed to remove user from division")}},N=(_,k)=>{m(B=>({...B,[_]:k}))},C=async()=>{try{const k=await(await fetch(`${a}/api/users`)).json();o(k),t("")}catch{o([]),alert("Failed to load all players")}},I=_=>{f(_),v(!0)},A=async _=>{try{const k=await fetch(`${a}/api/users/${_._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(k.ok){const B=await k.json();r.trim()?S({preventDefault:()=>{}}):C(),v(!1),f(null),alert("✅ Player updated successfully!")}else{const B=await k.json();alert(`Failed to update player: ${B.message||B.error||"Unknown error"}`)}}catch(k){alert(`Failed to update unified player: ${k.message}`)}};return e.createElement("div",{className:K.userSearchContainer},e.createElement("form",{onSubmit:S,className:K.searchForm},e.createElement("input",{type:"text",placeholder:"Search by name or email...",value:r,onChange:_=>t(_.target.value),className:K.searchInput}),e.createElement("button",{type:"submit",className:K.searchButton},e.createElement(Lw,null)," Search")),e.createElement("button",{onClick:C,className:K.searchButton,style:{marginLeft:"10px"}},e.createElement(os,null)," Show All Players"),n.length>0&&e.createElement("div",{className:K.resultsSummary},e.createElement("div",{className:K.summaryCard},e.createElement("h4",null,"📊 Player Summary"),e.createElement("div",{className:K.summaryStats},e.createElement("div",{className:K.summaryStat},e.createElement("span",{className:K.statNumber},n.length),e.createElement("span",{className:K.statLabel},"Total Players")),e.createElement("div",{className:K.summaryStat},e.createElement("span",{className:K.statNumber},n.filter(_=>_.isLeaguePlayer).length),e.createElement("span",{className:K.statLabel},"League Players")),e.createElement("div",{className:K.summaryStat},e.createElement("span",{className:K.statNumber},n.filter(_=>_.isLadderPlayer).length),e.createElement("span",{className:K.statLabel},"Ladder Players")),e.createElement("div",{className:K.summaryStat},e.createElement("span",{className:K.statNumber},n.filter(_=>_.system==="both").length),e.createElement("span",{className:K.statLabel},"Both Systems"))))),n.length>0&&e.createElement("div",{className:K.searchResults},n.map(_=>{var k,B;return e.createElement("div",{key:_._id,className:K.userCard},e.createElement("div",{className:K.userInfo},e.createElement("div",{className:K.userHeader},e.createElement("h4",{className:K.userName},_.firstName&&_.lastName?`${_.firstName} ${_.lastName}`:_.name||_.email||"Unknown User"),e.createElement("div",{className:K.systemBadges},_.system==="league"&&e.createElement("span",{className:K.leagueBadge},"🏆 League"),_.system==="ladder"&&e.createElement("span",{className:K.ladderBadge},"🏁 Ladder"),_.system==="both"&&e.createElement("div",{className:K.bothBadges},e.createElement("span",{className:K.leagueBadge},"🏆 League"),e.createElement("span",{className:K.ladderBadge},"🏁 Ladder")))),e.createElement("div",{className:K.userContactInfo},e.createElement("p",{className:K.userEmail},e.createElement("strong",null,"Email:")," ",_.email),e.createElement("p",{className:K.userPhone},e.createElement("strong",null,"Phone:")," ",_.phone||"Not provided"),_.textNumber&&e.createElement("p",{className:K.userTextNumber},e.createElement("strong",null,"Text:")," ",_.textNumber)),e.createElement("div",{className:K.userDetails},e.createElement("p",null,e.createElement("strong",null,"Current Divisions:")," ",((k=_.divisions)==null?void 0:k.join(", "))||"None"),_.locations&&e.createElement("p",null,e.createElement("strong",null,"Playing Locations:")," ",_.locations),_.availability&&e.createElement("div",{className:K.userAvailability},e.createElement("p",null,e.createElement("strong",null,"Availability:")),e.createElement("div",{className:K.availabilityGrid},Object.entries(_.availability).map(([z,M])=>M&&M.length>0&&e.createElement("div",{key:z,className:K.availabilityDay},e.createElement("span",{className:K.dayLabel},z,":"),e.createElement("span",{className:K.timeSlots},M.join(", ")))))),_.emergencyContactName&&e.createElement("p",null,e.createElement("strong",null,"Emergency Contact:")," ",_.emergencyContactName," (",_.emergencyContactPhone,")"),_.notes&&e.createElement("p",null,e.createElement("strong",null,"Notes:")," ",_.notes),_.system==="ladder"&&e.createElement("div",{className:K.ladderInfo},e.createElement("p",null,e.createElement("strong",null,"Ladder:")," ",_.ladderName),e.createElement("p",null,e.createElement("strong",null,"Position:")," #",_.position),e.createElement("p",null,e.createElement("strong",null,"Fargo Rate:")," ",_.fargoRate),e.createElement("p",null,e.createElement("strong",null,"Status:")," ",_.isActive?"Active":"Inactive")),_.system==="both"&&_.ladderInfo&&e.createElement("div",{className:K.ladderInfo},e.createElement("p",null,e.createElement("strong",null,"Ladder:")," ",_.ladderInfo.ladderName),e.createElement("p",null,e.createElement("strong",null,"Position:")," #",_.ladderInfo.position),e.createElement("p",null,e.createElement("strong",null,"Fargo Rate:")," ",_.ladderInfo.fargoRate),e.createElement("p",null,e.createElement("strong",null,"Status:")," ",_.ladderInfo.isActive?"Active":"Inactive")))),e.createElement("div",{className:K.userActions},e.createElement("button",{onClick:()=>I(_),className:K.editButton},e.createElement(ki,null)," Edit Player"),e.createElement("select",{value:u[_._id]||"",onChange:z=>N(_._id,z.target.value),className:K.divisionSelect},e.createElement("option",{value:""},"Select Division"),i.map(z=>e.createElement("option",{key:z,value:z},z))),e.createElement("button",{onClick:()=>x(_._id,u[_._id]),disabled:!u[_._id],className:K.addButton},e.createElement(Vn,null)," Add to Division"),(B=_.divisions)==null?void 0:B.map(z=>e.createElement("button",{key:z,onClick:()=>E(_._id,z),className:K.removeButton},e.createElement(Al,null)," Remove from ",z))))})),h&&g&&e.createElement(Vw,{player:g,onSave:A,onClose:()=>{v(!1),f(null)}}))}function GF({backendUrl:a}){const[r,t]=b.useState([]),[n,o]=b.useState("");return b.useEffect(()=>{fetch(`${a}/admin/divisions`).then(i=>i.json()).then(i=>{const c=i.map(u=>u.name);t(c),o(c[0]||"")}).catch(()=>t([]))},[a]),e.createElement("div",{className:K.matchManagementContainer},e.createElement("div",{className:K.sectionHeader},e.createElement("h3",null,e.createElement(Il,null)," Match Management"),e.createElement("select",{value:n,onChange:i=>o(i.target.value),className:K.divisionSelect},r.map(i=>e.createElement("option",{key:i,value:i},i)))),n&&e.createElement(DF,{division:n,isAdmin:!0}))}function qF({backendUrl:a}){const[r,t]=b.useState(!1),[n,o]=b.useState({});b.useEffect(()=>{i()},[]);const i=async()=>{try{const[c,u]=await Promise.all([fetch(`${a}/api/users`),fetch(`${a}/admin/divisions`)]),m=await c.json(),g=await u.json();o({totalUsers:m.length,activeUsers:m.filter(f=>f.isActive).length,pendingRegistrations:m.filter(f=>!f.isApproved).length,totalDivisions:g.length})}catch(c){console.error("Error fetching system stats:",c)}};return e.createElement("div",{className:K.systemStatusContainer},e.createElement("div",{className:K.statsGrid},e.createElement("div",{className:K.statCard},e.createElement("div",{className:K.statNumber},n.totalUsers||0),e.createElement("div",{className:K.statLabel},"Total Users")),e.createElement("div",{className:K.statCard},e.createElement("div",{className:K.statNumber},n.activeUsers||0),e.createElement("div",{className:K.statLabel},"Active Users")),e.createElement("div",{className:K.statCard},e.createElement("div",{className:K.statNumber},n.pendingRegistrations||0),e.createElement("div",{className:K.statLabel},"Pending Approvals")),e.createElement("div",{className:K.statCard},e.createElement("div",{className:K.statNumber},n.totalDivisions||0),e.createElement("div",{className:K.statLabel},"Divisions"))),e.createElement("div",{className:K.systemActions},e.createElement("button",{className:K.systemButton,onClick:()=>t(!0)},e.createElement(ez,null)," View Unentered LMS Matches"),e.createElement("button",{className:K.systemButton,onClick:i},e.createElement(A0,null)," Refresh Stats")),e.createElement(AF,{open:r,onClose:()=>t(!1)}))}function ZF({backendUrl:a}){const[r,t]=b.useState("view"),[n,o]=b.useState([]),[i,c]=b.useState(!1),[u,m]=b.useState(null),[g,f]=b.useState(""),[h,v]=b.useState(null),[S,x]=b.useState(!1);b.useEffect(()=>{E()},[a]);const E=async()=>{c(!0);try{const z=await ul.getAllUsers();o(z)}catch(z){m("Failed to fetch users: "+z.message)}finally{c(!1)}},N=async z=>{if(z.preventDefault(),!!g.trim()){c(!0);try{const M=await ul.searchUsers(g);o(M)}catch(M){m("Search failed: "+M.message)}finally{c(!1)}}},C=async z=>{c(!0);try{const M=await ul.addUser(z);o(O=>[...O,M]),alert("User added successfully!"),t("view")}catch(M){m("Failed to add user: "+M.message)}finally{c(!1)}},I=z=>{v(z),x(!0)},A=async z=>{c(!0);try{const M=await ul.updateUser(z._id,z);o(O=>O.map(U=>U._id===z._id?M:U)),alert("User updated successfully!"),x(!1),v(null)}catch(M){m("Failed to update user: "+M.message)}finally{c(!1)}},_=async z=>{if(window.confirm("Are you sure you want to delete this user?")){c(!0);try{await ul.deleteUser(z),o(M=>M.filter(O=>O._id!==z)),alert("User deleted successfully!")}catch(M){m("Failed to delete user: "+M.message)}finally{c(!1)}}},k=async(z,M)=>{c(!0);try{await ul.addUserDivision(z,M),o(O=>O.map(U=>U._id===z?{...U,divisions:[...U.divisions,M]}:U)),alert("Division added to user successfully!")}catch(O){m("Failed to add division to user: "+O.message)}finally{c(!1)}},B=async(z,M)=>{c(!0);try{await ul.removeUserDivision(z,M),o(O=>O.map(U=>U._id===z?{...U,divisions:U.divisions.filter(Z=>Z!==M)}:U)),alert("Division removed from user successfully!")}catch(O){m("Failed to remove division from user: "+O.message)}finally{c(!1)}};return e.createElement("div",{className:K.unifiedUsersContainer},e.createElement("div",{className:K.tabHeader},e.createElement("button",{className:`${K.tabButton} ${r==="view"?K.active:""}`,onClick:()=>t("view")},e.createElement(os,null)," View All Users (",n.length,")"),e.createElement("button",{className:`${K.tabButton} ${r==="add"?K.active:""}`,onClick:()=>t("add")},e.createElement(Ai,null)," Add New User"),e.createElement("button",{className:`${K.tabButton} ${r==="edit"?K.active:""}`,onClick:()=>t("edit")},e.createElement(D0,null)," Edit User")),e.createElement("div",{className:K.tabContent},r==="view"&&e.createElement("div",{className:K.viewUsersSection},e.createElement("form",{onSubmit:N,className:K.searchForm},e.createElement("input",{type:"text",placeholder:"Search users by name, email, or ID...",value:g,onChange:z=>f(z.target.value),className:K.searchInput}),e.createElement("button",{type:"submit",className:K.searchButton},e.createElement(Lw,null)," Search")),i?e.createElement("div",{className:K.loadingMessage},"Loading users..."):u?e.createElement("div",{className:K.errorMessage},u):n.length===0?e.createElement("div",{className:K.emptyState},e.createElement(os,null)," No users found. Add one to get started!"):e.createElement("div",{className:K.userList},n.map(z=>{var M;return e.createElement("div",{key:z._id,className:K.userCard},e.createElement("div",{className:K.userHeader},e.createElement("h4",{className:K.userName},z.firstName&&z.lastName?`${z.firstName} ${z.lastName}`:z.name||z.email||"Unknown User"),e.createElement("div",{className:K.systemBadges},z.system==="league"&&e.createElement("span",{className:K.leagueBadge},"🏆 League"),z.system==="ladder"&&e.createElement("span",{className:K.ladderBadge},"🏁 Ladder"),z.system==="both"&&e.createElement("div",{className:K.bothBadges},e.createElement("span",{className:K.leagueBadge},"🏆 League"),e.createElement("span",{className:K.ladderBadge},"🏁 Ladder")))),e.createElement("div",{className:K.userContactInfo},e.createElement("p",{className:K.userEmail},e.createElement("strong",null,"Email:")," ",z.email),e.createElement("p",{className:K.userPhone},e.createElement("strong",null,"Phone:")," ",z.phone||"Not provided"),z.textNumber&&e.createElement("p",{className:K.userTextNumber},e.createElement("strong",null,"Text:")," ",z.textNumber)),e.createElement("div",{className:K.userDetails},e.createElement("p",null,e.createElement("strong",null,"Current Divisions:")," ",((M=z.divisions)==null?void 0:M.join(", "))||"None"),z.locations&&e.createElement("p",null,e.createElement("strong",null,"Playing Locations:")," ",z.locations),z.availability&&e.createElement("div",{className:K.userAvailability},e.createElement("p",null,e.createElement("strong",null,"Availability:")),e.createElement("div",{className:K.availabilityGrid},Object.entries(z.availability).map(([O,U])=>U&&U.length>0&&e.createElement("div",{key:O,className:K.availabilityDay},e.createElement("span",{className:K.dayLabel},O,":"),e.createElement("span",{className:K.timeSlots},U.join(", ")))))),z.emergencyContactName&&e.createElement("p",null,e.createElement("strong",null,"Emergency Contact:")," ",z.emergencyContactName," (",z.emergencyContactPhone,")"),z.notes&&e.createElement("p",null,e.createElement("strong",null,"Notes:")," ",z.notes),z.system==="ladder"&&e.createElement("div",{className:K.ladderInfo},e.createElement("p",null,e.createElement("strong",null,"Ladder:")," ",z.ladderName),e.createElement("p",null,e.createElement("strong",null,"Position:")," #",z.position),e.createElement("p",null,e.createElement("strong",null,"Fargo Rate:")," ",z.fargoRate),e.createElement("p",null,e.createElement("strong",null,"Status:")," ",z.isActive?"Active":"Inactive")),z.system==="both"&&z.ladderInfo&&e.createElement("div",{className:K.ladderInfo},e.createElement("p",null,e.createElement("strong",null,"Ladder:")," ",z.ladderInfo.ladderName),e.createElement("p",null,e.createElement("strong",null,"Position:")," #",z.ladderInfo.position),e.createElement("p",null,e.createElement("strong",null,"Fargo Rate:")," ",z.ladderInfo.fargoRate),e.createElement("p",null,e.createElement("strong",null,"Status:")," ",z.ladderInfo.isActive?"Active":"Inactive"))),e.createElement("div",{className:K.userActions},e.createElement("button",{onClick:()=>I(z),className:K.editButton},e.createElement(ki,null)," Edit User"),e.createElement("select",{value:z.system||"",onChange:O=>{const U=O.target.value;U==="league"?(B(z._id,"ladder"),B(z._id,"both")):U==="ladder"?(B(z._id,"league"),B(z._id,"both")):(B(z._id,"league"),B(z._id,"ladder")),k(z._id,U)},className:K.systemSelect},e.createElement("option",{value:""},"Select System"),e.createElement("option",{value:"league"},"League Only"),e.createElement("option",{value:"ladder"},"Ladder Only"),e.createElement("option",{value:"both"},"Both Systems")),e.createElement("button",{onClick:()=>_(z._id),className:K.deleteButton},e.createElement(Al,null)," Delete User")))}))),r==="add"&&e.createElement("div",{className:K.addUserSection},e.createElement("h3",null,"Add New User"),e.createElement("form",{onSubmit:z=>{z.preventDefault();const M={firstName:document.getElementById("add-firstName").value,lastName:document.getElementById("add-lastName").value,email:document.getElementById("add-email").value,phone:document.getElementById("add-phone").value,textNumber:document.getElementById("add-textNumber").value,emergencyContactName:document.getElementById("add-emergencyContactName").value,emergencyContactPhone:document.getElementById("add-emergencyContactPhone").value,locations:document.getElementById("add-locations").value,notes:document.getElementById("add-notes").value,system:document.getElementById("add-system").value,isActive:!0,isApproved:!0,isLeaguePlayer:!1,isLadderPlayer:!1,ladderName:"",position:"",fargoRate:"",availability:{},divisions:[],paymentInfo:{hasPaid:!1,paymentDate:null,paymentMethod:"",paymentNotes:""}};C(M)},className:K.addUserForm},e.createElement("div",{className:K.formRow},e.createElement("div",{className:K.formField},e.createElement("label",null,"First Name:"),e.createElement("input",{type:"text",id:"add-firstName",required:!0})),e.createElement("div",{className:K.formField},e.createElement("label",null,"Last Name:"),e.createElement("input",{type:"text",id:"add-lastName",required:!0}))),e.createElement("div",{className:K.formRow},e.createElement("div",{className:K.formField},e.createElement("label",null,"Email:"),e.createElement("input",{type:"email",id:"add-email",required:!0})),e.createElement("div",{className:K.formField},e.createElement("label",null,"Phone:"),e.createElement("input",{type:"tel",id:"add-phone",placeholder:"(555) 123-4567"}))),e.createElement("div",{className:K.formRow},e.createElement("div",{className:K.formField},e.createElement("label",null,"Text Number:"),e.createElement("input",{type:"tel",id:"add-textNumber",placeholder:"(555) 123-4567"})),e.createElement("div",{className:K.formField},e.createElement("label",null,"Emergency Contact Name:"),e.createElement("input",{type:"text",id:"add-emergencyContactName"}))),e.createElement("div",{className:K.formRow},e.createElement("div",{className:K.formField},e.createElement("label",null,"Emergency Contact Phone:"),e.createElement("input",{type:"tel",id:"add-emergencyContactPhone",placeholder:"(555) 123-4567"})),e.createElement("div",{className:K.formField},e.createElement("label",null,"Playing Locations:"),e.createElement("input",{type:"text",id:"add-locations"}))),e.createElement("div",{className:K.formField},e.createElement("label",null,"Notes:"),e.createElement("textarea",{id:"add-notes",rows:"3"})),e.createElement("div",{className:K.formRow},e.createElement("div",{className:K.formField},e.createElement("label",null,"System:"),e.createElement("select",{id:"add-system",required:!0},e.createElement("option",{value:""},"Select System"),e.createElement("option",{value:"league"},"League Only"),e.createElement("option",{value:"ladder"},"Ladder Only"),e.createElement("option",{value:"both"},"Both Systems")))),e.createElement("button",{type:"submit",className:K.addUserButton},i?"Adding...":"Add User"),u&&e.createElement("div",{className:K.errorMessage},u))),r==="edit"&&h&&e.createElement(Vw,{player:h,onSave:A,onClose:()=>{x(!1),v(null)}})))}function VF(){const[a,r]=b.useState(null),[t,n]=b.useState([]),[o,i]=b.useState(null),[c,u]=b.useState([]),[m,g]=b.useState(!1),[f,h]=b.useState(null),[v,S]=b.useState("overview"),x=Qn();b.useEffect(()=>{const C=new wy(WF);return C.connectUser({id:Gx,name:"Admin"},C.devToken(Gx)),r(C),()=>C.disconnectUser()},[]),b.useEffect(()=>{if(!a)return;(async()=>{try{const I=await a.queryChannels({});n(I)}catch(I){console.error("Error fetching channels:",I)}})()},[a]),b.useEffect(()=>{if(!o)return;(async()=>{g(!0);try{const I=await o.getMessages();u(I.messages)}catch(I){console.error("Error fetching messages:",I)}g(!1)})()},[o]);const E=(C,I)=>{h({type:C,message:I}),setTimeout(()=>h(null),5e3)};if(!a)return e.createElement("div",null,"Loading admin dashboard...");const N=()=>{switch(v){case"overview":return e.createElement("div",{className:K.overviewSection},e.createElement("h2",null,"Welcome to Admin Dashboard"),e.createElement("p",null,"Select a section below to manage your league:"),e.createElement("div",{className:K.quickActions},e.createElement("button",{className:K.quickActionButton,onClick:()=>S("divisions")},e.createElement(Vn,null)," Create New Division"),e.createElement("button",{className:K.quickActionButton,onClick:()=>S("players")},e.createElement(Ai,null)," Manage Players"),e.createElement("button",{className:K.quickActionButton,onClick:()=>S("matches")},e.createElement(Il,null)," Match Management"),e.createElement("button",{className:K.quickActionButton,onClick:()=>S("system")},e.createElement(I0,null)," System Status")));case"divisions":return e.createElement(jF,{backendUrl:pe,onComplete:()=>E("success","Division created successfully!")});case"players":return e.createElement($F,{backendUrl:pe});case"matches":return e.createElement(GF,{backendUrl:pe});case"system":return e.createElement(qF,{backendUrl:pe});case"backup":return e.createElement(MF,{backendUrl:pe});case"locations":return e.createElement(RF,{backendUrl:pe});case"payments":return e.createElement(LF,null);case"payment-tracker":return e.createElement(BF,null);case"league-management":return e.createElement(zF,null);case"unified-users":return e.createElement(ZF,{backendUrl:pe});default:return null}};return e.createElement("div",{className:K.adminDashboardRoot},e.createElement("div",{className:K.adminDashboardNav},e.createElement("div",{className:K.navLeft},e.createElement("button",{onClick:()=>{x("/"),window.location.reload()}},"🏠 User Dashboard"),e.createElement("button",{onClick:()=>x("/chat")},"💬 Back to Chat")),e.createElement("div",{className:K.navRight},e.createElement("button",{onClick:()=>{localStorage.clear(),x("/"),window.location.reload()}},"🚪 Logout"))),e.createElement("div",{className:K.adminDashboardMainColumn},f&&e.createElement("div",{className:`${K.banner} ${K[f.type]}`},f.type==="success"?e.createElement(zr,null):e.createElement(tf,null),f.message),e.createElement("div",{className:K.sectionNavigation},e.createElement("button",{className:`${K.sectionButton} ${v==="overview"?K.active:""}`,onClick:()=>S("overview")},"📊 Overview"),e.createElement("button",{className:`${K.sectionButton} ${v==="divisions"?K.active:""}`,onClick:()=>S("divisions")},e.createElement(Vn,null)," Divisions"),e.createElement("button",{className:`${K.sectionButton} ${v==="players"?K.active:""}`,onClick:()=>S("players")},e.createElement(os,null)," Players"),e.createElement("button",{className:`${K.sectionButton} ${v==="matches"?K.active:""}`,onClick:()=>S("matches")},e.createElement(Il,null)," Matches"),e.createElement("button",{className:`${K.sectionButton} ${v==="system"?K.active:""}`,onClick:()=>S("system")},e.createElement(I0,null)," System"),e.createElement("button",{className:`${K.sectionButton} ${v==="backup"?K.active:""}`,onClick:()=>S("backup")},e.createElement(Ap,null)," Backup"),e.createElement("button",{className:`${K.sectionButton} ${v==="locations"?K.active:""}`,onClick:()=>S("locations")},e.createElement(Ii,null)," Locations"),e.createElement("button",{className:`${K.sectionButton} ${v==="payments"?K.active:""}`,onClick:()=>S("payments")},"💳 Payments"),e.createElement("button",{className:`${K.sectionButton} ${v==="payment-tracker"?K.active:""}`,onClick:()=>S("payment-tracker")},"💰 Payment Tracker"),e.createElement("button",{className:`${K.sectionButton} ${v==="league-management"?K.active:""}`,onClick:()=>S("league-management")},"📅 League Management"),e.createElement("button",{className:`${K.sectionButton} ${v==="unified-users"?K.active:""}`,onClick:()=>S("unified-users")},"👥 Unified Users")),e.createElement("div",{className:K.sectionContent},N())))}function QF(){const[a,r]=b.useState("overview"),[t,n]=b.useState(!1),[o,i]=b.useState(""),[c,u]=b.useState(""),[m,g]=b.useState(null),[f,h]=b.useState([]),[v,S]=b.useState([]),[x,E]=b.useState([]),N=()=>{const P=Gs.getCurrentAdmin();if(!P)throw new Error("No authenticated admin found");return{email:P.email,pin:P.pin}},[C,I]=b.useState(!1),[A,_]=b.useState(!1),[k,B]=b.useState(!1),[z,M]=b.useState(!1),[O,U]=b.useState({leagueId:"",name:"",description:"",adminEmail:"",adminName:"",operatorEmail:""}),[Z,H]=b.useState({email:"",firstName:"",lastName:"",phone:"",password:""}),[V,F]=b.useState({email:"",firstName:"",lastName:"",phone:"",password:"",role:"admin",permissions:{canCreateLeagues:!1,canDeleteLeagues:!1,canManageLeagueOperators:!1,canViewAllLeagueData:!1,canManageBilling:!1,canViewSystemLogs:!1}});b.useEffect(()=>{R()},[]);const R=async()=>{n(!0);try{const{email:P,pin:ne}=N(),q={"Content-Type":"application/json","x-admin-email":P,"x-admin-pin":ne},[oe,he,be,nt]=await Promise.all([fetch(`${pe}/api/platform/stats`,{headers:q}),fetch(`${pe}/api/platform/leagues`,{headers:q}),fetch(`${pe}/api/platform/operators`,{headers:q}),fetch(`${pe}/api/platform/admins`,{headers:q})]);if(oe.ok){const ye=await oe.json();g(ye)}else console.error("Stats response error:",oe.status,await oe.text());if(he.ok){const ye=await he.json();h(ye.leagues||[])}else console.error("Leagues response error:",he.status,await he.text());if(be.ok){const ye=await be.json();S(ye.operators||[])}else console.error("Operators response error:",be.status,await be.text());if(nt.ok){const ye=await nt.json();E(ye.admins||[])}else console.error("Admins response error:",nt.status,await nt.text())}catch{i("Failed to load dashboard data")}finally{n(!1)}},D=async P=>{P.preventDefault(),n(!0),i("");try{const{email:ne,pin:q}=N(),oe=await fetch(`${pe}/api/platform/leagues`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...O,adminEmail:ne,adminPin:q})}),he=await oe.json();oe.ok?(u("League created successfully!"),I(!1),U({leagueId:"",name:"",description:"",adminEmail:"",adminName:"",operatorEmail:""}),R()):i(he.message||"Failed to create league")}catch{i("Network error. Please try again.")}finally{n(!1)}},j=async P=>{P.preventDefault(),n(!0),i("");try{const{email:ne,pin:q}=N(),oe=await fetch(`${pe}/api/platform/operators`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...Z,adminEmail:ne,adminPin:q})}),he=await oe.json();oe.ok?(u("Operator created successfully!"),_(!1),H({email:"",firstName:"",lastName:"",phone:"",password:""}),R()):i(he.message||"Failed to create operator")}catch{i("Network error. Please try again.")}finally{n(!1)}},X=async P=>{P.preventDefault(),n(!0),i("");try{const{email:ne,pin:q}=N(),oe=await fetch(`${pe}/api/platform/admins`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...V,adminEmail:ne,adminPin:q})}),he=await oe.json();oe.ok?(u("Admin created successfully!"),B(!1),F({email:"",firstName:"",lastName:"",phone:"",password:"",role:"admin",permissions:{canCreateLeagues:!1,canDeleteLeagues:!1,canManageLeagueOperators:!1,canViewAllLeagueData:!1,canManageBilling:!1,canViewSystemLogs:!1}}),R()):i(he.message||"Failed to create admin")}catch{i("Network error. Please try again.")}finally{n(!1)}},W=()=>e.createElement("div",{className:"overview-section"},e.createElement("h2",null,"Platform Overview"),m&&e.createElement("div",{className:"stats-grid"},e.createElement("div",{className:"stat-card"},e.createElement(Wi,{className:"stat-icon"}),e.createElement("div",{className:"stat-content"},e.createElement("h3",null,m.stats.leagues.total),e.createElement("p",null,"Total Leagues"))),e.createElement("div",{className:"stat-card"},e.createElement(os,{className:"stat-icon"}),e.createElement("div",{className:"stat-content"},e.createElement("h3",null,m.stats.operators),e.createElement("p",null,"League Operators"))),e.createElement("div",{className:"stat-card"},e.createElement(D0,{className:"stat-icon"}),e.createElement("div",{className:"stat-content"},e.createElement("h3",null,m.stats.admins),e.createElement("p",null,"Platform Admins"))),e.createElement("div",{className:"stat-card"},e.createElement(N0,{className:"stat-icon"}),e.createElement("div",{className:"stat-content"},e.createElement("h3",null,m.stats.leagues.active),e.createElement("p",null,"Active Leagues")))),e.createElement("div",{className:"quick-actions"},e.createElement("h3",null,"Quick Actions"),e.createElement("div",{className:"action-buttons"},e.createElement("button",{onClick:()=>I(!0),className:"btn-primary"},e.createElement(Vn,null)," Create New League"),e.createElement("button",{onClick:()=>_(!0),className:"btn-secondary"},e.createElement(D0,null)," Add League Operator"),e.createElement("button",{onClick:()=>B(!0),className:"btn-secondary"},e.createElement(jx,null)," Add Platform Admin")))),T=()=>e.createElement("div",{className:"leagues-section"},e.createElement("div",{className:"section-header"},e.createElement("h2",null,"League Management"),e.createElement("button",{onClick:()=>I(!0),className:"btn-primary"},e.createElement(Vn,null)," Create League")),e.createElement("div",{className:"leagues-grid"},f.map(P=>e.createElement("div",{key:P.leagueId,className:"league-card"},e.createElement("div",{className:"league-header"},e.createElement("h3",null,P.name),e.createElement("span",{className:`status-badge ${P.subscription.status}`},P.subscription.status)),e.createElement("div",{className:"league-details"},e.createElement("p",null,e.createElement("strong",null,"ID:")," ",P.leagueId),e.createElement("p",null,e.createElement("strong",null,"Admin:")," ",P.adminEmail),e.createElement("p",null,e.createElement("strong",null,"Plan:")," ",P.subscription.plan),e.createElement("p",null,e.createElement("strong",null,"Created:")," ",new Date(P.createdAt).toLocaleDateString())),e.createElement("div",{className:"league-actions"},e.createElement("button",{className:"btn-small"},e.createElement(Ni,null)," View Details"),e.createElement("button",{className:"btn-small"},e.createElement(ki,null)," Edit"),e.createElement("button",{className:"btn-small btn-danger"},e.createElement(Al,null)," Delete")))))),G=()=>e.createElement("div",{className:"operators-section"},e.createElement("div",{className:"section-header"},e.createElement("h2",null,"League Operators"),e.createElement("button",{onClick:()=>_(!0),className:"btn-primary"},e.createElement(Vn,null)," Add Operator")),e.createElement("div",{className:"operators-grid"},v.map(P=>e.createElement("div",{key:P._id,className:"operator-card"},e.createElement("div",{className:"operator-header"},e.createElement("h3",null,P.firstName," ",P.lastName),e.createElement("span",{className:"status-badge active"},"Active")),e.createElement("div",{className:"operator-details"},e.createElement("p",null,e.createElement("strong",null,"Email:")," ",P.email),e.createElement("p",null,e.createElement("strong",null,"Leagues:")," ",P.assignedLeagues.length),e.createElement("p",null,e.createElement("strong",null,"Last Login:")," ",P.lastLoginAt?new Date(P.lastLoginAt).toLocaleDateString():"Never")),e.createElement("div",{className:"operator-actions"},e.createElement("button",{className:"btn-small"},e.createElement(Ni,null)," View Details"),e.createElement("button",{className:"btn-small"},e.createElement(ki,null)," Edit"),e.createElement("button",{onClick:()=>M(!0),className:"btn-small"},e.createElement(sz,null)," Assign League")))))),te=()=>e.createElement("div",{className:"admins-section"},e.createElement("div",{className:"section-header"},e.createElement("h2",null,"Platform Admins"),e.createElement("button",{onClick:()=>B(!0),className:"btn-primary"},e.createElement(Vn,null)," Add Admin")),e.createElement("div",{className:"admins-grid"},x.map(P=>e.createElement("div",{key:P._id,className:"admin-card"},e.createElement("div",{className:"admin-header"},e.createElement("h3",null,P.firstName," ",P.lastName),e.createElement("span",{className:`role-badge ${P.role}`},P.role)),e.createElement("div",{className:"admin-details"},e.createElement("p",null,e.createElement("strong",null,"Email:")," ",P.email),e.createElement("p",null,e.createElement("strong",null,"Role:")," ",P.role),e.createElement("p",null,e.createElement("strong",null,"Last Login:")," ",P.lastLoginAt?new Date(P.lastLoginAt).toLocaleDateString():"Never")),e.createElement("div",{className:"admin-actions"},e.createElement("button",{className:"btn-small"},e.createElement(Ni,null)," View Details"),e.createElement("button",{className:"btn-small"},e.createElement(ki,null)," Edit"),e.createElement("button",{className:"btn-small btn-danger"},e.createElement(Al,null)," Delete"))))));return e.createElement("div",{className:"platform-admin-dashboard"},o&&e.createElement("div",{className:"error-message"},e.createElement(tf,null)," ",o),c&&e.createElement("div",{className:"success-message"},e.createElement(zr,null)," ",c),e.createElement("div",{className:"dashboard-header"},e.createElement("h1",null,"Platform Administration"),e.createElement("div",{className:"header-actions"},e.createElement("button",{onClick:R,className:"btn-secondary",disabled:t},t?e.createElement(Lr,{className:"spinner"}):e.createElement(mz,null)," Refresh"))),e.createElement("div",{className:"dashboard-tabs"},e.createElement("button",{className:`tab ${a==="overview"?"active":""}`,onClick:()=>r("overview")},e.createElement(N0,null)," Overview"),e.createElement("button",{className:`tab ${a==="leagues"?"active":""}`,onClick:()=>r("leagues")},e.createElement(Wi,null)," Leagues"),e.createElement("button",{className:`tab ${a==="operators"?"active":""}`,onClick:()=>r("operators")},e.createElement(os,null)," Operators"),e.createElement("button",{className:`tab ${a==="admins"?"active":""}`,onClick:()=>r("admins")},e.createElement(jx,null)," Admins")),e.createElement("div",{className:"dashboard-content"},a==="overview"&&W(),a==="leagues"&&T(),a==="operators"&&G(),a==="admins"&&te()),e.createElement(Bt,{isOpen:C,onClose:()=>I(!1),title:"Create New League",maxWidth:"600px"},e.createElement("form",{onSubmit:D},e.createElement("div",{className:"form-group"},e.createElement("label",null,"League ID *"),e.createElement("input",{type:"text",value:O.leagueId,onChange:P=>U({...O,leagueId:P.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"-")}),placeholder:"e.g., front-range-pool",required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"League Name *"),e.createElement("input",{type:"text",value:O.name,onChange:P=>U({...O,name:P.target.value}),placeholder:"e.g., Front Range Pool League",required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Description"),e.createElement("textarea",{value:O.description,onChange:P=>U({...O,description:P.target.value}),placeholder:"Brief description of the league"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Admin Email *"),e.createElement("input",{type:"email",value:O.adminEmail,onChange:P=>U({...O,adminEmail:P.target.value}),placeholder:"admin@league.com",required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Admin Name *"),e.createElement("input",{type:"text",value:O.adminName,onChange:P=>U({...O,adminName:P.target.value}),placeholder:"John Doe",required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Assign Operator (Optional)"),e.createElement("input",{type:"email",value:O.operatorEmail,onChange:P=>U({...O,operatorEmail:P.target.value}),placeholder:"operator@league.com"})),e.createElement("div",{className:"form-actions"},e.createElement("button",{type:"button",onClick:()=>I(!1),className:"btn-secondary"},"Cancel"),e.createElement("button",{type:"submit",className:"btn-primary",disabled:t},t?e.createElement(Lr,{className:"spinner"}):"Create League")))),e.createElement(Bt,{isOpen:A,onClose:()=>_(!1),title:"Create League Operator",maxWidth:"500px"},e.createElement("form",{onSubmit:j},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Email *"),e.createElement("input",{type:"email",value:Z.email,onChange:P=>H({...Z,email:P.target.value}),placeholder:"operator@example.com",required:!0})),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"First Name *"),e.createElement("input",{type:"text",value:Z.firstName,onChange:P=>H({...Z,firstName:P.target.value}),placeholder:"John",required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Last Name *"),e.createElement("input",{type:"text",value:Z.lastName,onChange:P=>H({...Z,lastName:P.target.value}),placeholder:"Doe",required:!0}))),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Phone"),e.createElement("input",{type:"tel",value:Z.phone,onChange:P=>H({...Z,phone:P.target.value}),placeholder:"(555) 123-4567"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Password *"),e.createElement("input",{type:"password",value:Z.password,onChange:P=>H({...Z,password:P.target.value}),placeholder:"Enter password",required:!0})),e.createElement("div",{className:"form-actions"},e.createElement("button",{type:"button",onClick:()=>_(!1),className:"btn-secondary"},"Cancel"),e.createElement("button",{type:"submit",className:"btn-primary",disabled:t},t?e.createElement(Lr,{className:"spinner"}):"Create Operator")))),e.createElement(Bt,{isOpen:k,onClose:()=>B(!1),title:"Create Platform Admin",maxWidth:"600px"},e.createElement("form",{onSubmit:X},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Email *"),e.createElement("input",{type:"email",value:V.email,onChange:P=>F({...V,email:P.target.value}),placeholder:"admin@platform.com",required:!0})),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"First Name *"),e.createElement("input",{type:"text",value:V.firstName,onChange:P=>F({...V,firstName:P.target.value}),placeholder:"Admin",required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Last Name *"),e.createElement("input",{type:"text",value:V.lastName,onChange:P=>F({...V,lastName:P.target.value}),placeholder:"User",required:!0}))),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Phone"),e.createElement("input",{type:"tel",value:V.phone,onChange:P=>F({...V,phone:P.target.value}),placeholder:"(555) 123-4567"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Password *"),e.createElement("input",{type:"password",value:V.password,onChange:P=>F({...V,password:P.target.value}),placeholder:"Enter password",required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Role *"),e.createElement("select",{value:V.role,onChange:P=>F({...V,role:P.target.value}),required:!0},e.createElement("option",{value:"admin"},"Admin"),e.createElement("option",{value:"support"},"Support"))),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Permissions"),e.createElement("div",{className:"permissions-grid"},Object.entries(V.permissions).map(([P,ne])=>e.createElement("label",{key:P,className:"permission-checkbox"},e.createElement("input",{type:"checkbox",checked:ne,onChange:q=>F({...V,permissions:{...V.permissions,[P]:q.target.checked}})}),P.replace(/([A-Z])/g," $1").replace(/^./,q=>q.toUpperCase()))))),e.createElement("div",{className:"form-actions"},e.createElement("button",{type:"button",onClick:()=>B(!1),className:"btn-secondary"},"Cancel"),e.createElement("button",{type:"submit",className:"btn-primary",disabled:t},t?e.createElement(Lr,{className:"spinner"}):"Create Admin")))),e.createElement("style",{jsx:!0},`
        .platform-admin-dashboard {
          padding: 20px;
          max-width: 1200px;
          margin: 0 auto;
        }

        .dashboard-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 30px;
          padding-bottom: 20px;
          border-bottom: 2px solid #e0e0e0;
        }

        .dashboard-tabs {
          display: flex;
          gap: 10px;
          margin-bottom: 30px;
          border-bottom: 1px solid #e0e0e0;
        }

        .tab {
          padding: 12px 24px;
          border: none;
          background: none;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 8px;
          border-bottom: 3px solid transparent;
          transition: all 0.3s ease;
        }

        .tab.active {
          border-bottom-color: #007bff;
          color: #007bff;
        }

        .tab:hover {
          background: #f8f9fa;
        }

        .stats-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 20px;
          margin-bottom: 30px;
        }

        .stat-card {
          background: white;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.1);
          display: flex;
          align-items: center;
          gap: 15px;
        }

        .stat-icon {
          font-size: 2rem;
          color: #007bff;
        }

        .stat-content h3 {
          margin: 0;
          font-size: 2rem;
          color: #333;
        }

        .stat-content p {
          margin: 5px 0 0 0;
          color: #666;
        }

        .quick-actions {
          background: white;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .action-buttons {
          display: flex;
          gap: 15px;
          flex-wrap: wrap;
        }

        .section-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 20px;
        }

        .leagues-grid,
        .operators-grid,
        .admins-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
          gap: 20px;
        }

        .league-card,
        .operator-card,
        .admin-card {
          background: white;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .league-header,
        .operator-header,
        .admin-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 15px;
        }

        .status-badge,
        .role-badge {
          padding: 4px 8px;
          border-radius: 4px;
          font-size: 0.8rem;
          font-weight: 500;
        }

        .status-badge.active { background: #d4edda; color: #155724; }
        .status-badge.trial { background: #fff3cd; color: #856404; }
        .status-badge.expired { background: #f8d7da; color: #721c24; }

        .role-badge.admin { background: #cce5ff; color: #004085; }
        .role-badge.support { background: #d1ecf1; color: #0c5460; }

        .league-details,
        .operator-details,
        .admin-details {
          margin-bottom: 15px;
        }

        .league-details p,
        .operator-details p,
        .admin-details p {
          margin: 5px 0;
          font-size: 0.9rem;
        }

        .league-actions,
        .operator-actions,
        .admin-actions {
          display: flex;
          gap: 10px;
          flex-wrap: wrap;
        }

        .btn-primary,
        .btn-secondary,
        .btn-small {
          padding: 10px 20px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 8px;
          font-size: 0.9rem;
          transition: all 0.3s ease;
        }

        .btn-primary {
          background: #007bff;
          color: white;
        }

        .btn-primary:hover:not(:disabled) {
          background: #0056b3;
        }

        .btn-secondary {
          background: #6c757d;
          color: white;
        }

        .btn-secondary:hover:not(:disabled) {
          background: #545b62;
        }

        .btn-small {
          padding: 6px 12px;
          font-size: 0.8rem;
        }

        .btn-danger {
          background: #dc3545;
          color: white;
        }

        .btn-danger:hover {
          background: #c82333;
        }

        .btn-primary:disabled,
        .btn-secondary:disabled {
          background: #ccc;
          cursor: not-allowed;
        }

        .form-group {
          margin-bottom: 15px;
        }

        .form-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 15px;
        }

        .form-group label {
          display: block;
          margin-bottom: 5px;
          font-weight: 500;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
          width: 100%;
          padding: 10px;
          border: 1px solid #ddd;
          border-radius: 4px;
          font-size: 14px;
        }

        .permissions-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 10px;
        }

        .permission-checkbox {
          display: flex;
          align-items: center;
          gap: 8px;
          font-size: 0.9rem;
        }

        .form-actions {
          display: flex;
          gap: 15px;
          justify-content: flex-end;
          margin-top: 20px;
          padding-top: 20px;
          border-top: 1px solid #e0e0e0;
        }

        .error-message,
        .success-message {
          padding: 10px;
          margin-bottom: 20px;
          border-radius: 4px;
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .error-message {
          background: #fee;
          color: #c33;
          border: 1px solid #fcc;
        }

        .success-message {
          background: #efe;
          color: #363;
          border: 1px solid #cfc;
        }

        .spinner {
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
          .dashboard-header {
            flex-direction: column;
            gap: 15px;
            align-items: stretch;
          }

          .dashboard-tabs {
            flex-wrap: wrap;
          }

          .tab {
            flex: 1;
            min-width: 120px;
          }

          .stats-grid {
            grid-template-columns: 1fr;
          }

          .leagues-grid,
          .operators-grid,
          .admins-grid {
            grid-template-columns: 1fr;
          }

          .action-buttons {
            flex-direction: column;
          }

          .form-row {
            grid-template-columns: 1fr;
          }

          .permissions-grid {
            grid-template-columns: 1fr;
          }
        }
      `))}const JF="_simplePoolGame_1kwr6_1",XF="_tableContainer_1kwr6_11",KF="_tableCanvas_1kwr6_22",eU="_aimingInstructions_1kwr6_35",tU="_instructions_1kwr6_47",aU="_controls_1kwr6_52",nU="_shootButton_1kwr6_70",rU="_buttonRow_1kwr6_105",oU="_resetAimButton_1kwr6_111",sU="_powerControl_1kwr6_145",lU="_gameInfo_1kwr6_274",iU="_resetButton_1kwr6_291",cU="_pushOutModal_1kwr6_710",dU="_pushOutContent_1kwr6_723",uU="_pushOutButtons_1kwr6_762",mU="_acceptButton_1kwr6_768",pU="_declineButton_1kwr6_769",_a={simplePoolGame:JF,tableContainer:XF,tableCanvas:KF,aimingInstructions:eU,instructions:tU,controls:aU,shootButton:nU,buttonRow:rU,resetAimButton:oU,powerControl:sU,gameInfo:lU,resetButton:iU,pushOutModal:cU,pushOutContent:dU,pushOutButtons:uU,acceptButton:mU,declineButton:pU},Dl={BREAK:"break",PLAY:"play"};function ml(a){return a===Dl.BREAK}function $h(a){return a===Dl.PLAY}function fU(a,r){return a===Dl.BREAK&&r?Dl.PLAY:a}function gU(a,r){return a===Dl.BREAK&&r}function qx(a,r){return a===Dl.PLAY&&r}const hU="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHllbGxvdyAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGwxTWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZmZlYjNiIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZkZDgzNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNmNTdmMTciLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2U2NTEwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDFIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmOWM0IiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsMVNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsMVNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsMU1haW4pIiBzdHJva2U9IiNlNjUxMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGwxSGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsMVNwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgMSAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzAwMDAwMCI+MTwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGwxU2hhZG93KSIvPg0KPC9zdmc+IA==",yU="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGJsdWUgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsMk1haW4iIGN4PSIzMCUiIGN5PSIzMCUiIHI9IjcwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjOTBjYWY5Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjI1JSIgc3RvcC1jb2xvcj0iIzQyYTVmNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiMyMTk2ZjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNzUlIiBzdG9wLWNvbG9yPSIjMTk3NmQyIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwZDQ3YTEiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICAgIA0KICAgIDwhLS0gSGlnaGxpZ2h0IGZvciBkZXB0aCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGwySGlnaGxpZ2h0IiBjeD0iMjUlIiBjeT0iMjUlIiByPSI0NSUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2JiZGVmYiIgc3RvcC1vcGFjaXR5PSIwLjkiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjOTBjYWY5IiBzdG9wLW9wYWNpdHk9IjAuNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjOTBjYWY5IiBzdG9wLW9wYWNpdHk9IjAiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICAgIA0KICAgIDwhLS0gU3BlY3VsYXIgaGlnaGxpZ2h0IC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDJTcGVjdWxhciIgY3g9IjQwJSIgY3k9IjQwJSIgcj0iMjAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIiBzdG9wLW9wYWNpdHk9IjAuOCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICAgIA0KICAgIDwhLS0gU2hhZG93IGdyYWRpZW50IC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDJTaGFkb3ciIGN4PSI3MCUiIGN5PSI3MCUiIHI9IjMwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIiBzdG9wLW9wYWNpdHk9IjAuMyIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIiBzdG9wLW9wYWNpdHk9IjAiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICA8L2RlZnM+DQogIA0KICA8IS0tIE1haW4gYmFsbCAtLT4NCiAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDJNYWluKSIgc3Ryb2tlPSIjMGQ0N2ExIiBzdHJva2Utd2lkdGg9IjAuNSIvPg0KICANCiAgPCEtLSBQcmltYXJ5IGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iNSIgZmlsbD0idXJsKCNiYWxsMkhpZ2hsaWdodCkiLz4NCiAgDQogIDwhLS0gU3BlY3VsYXIgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxNCIgY3k9IjE0IiByPSIyLjUiIGZpbGw9InVybCgjYmFsbDJTcGVjdWxhcikiLz4NCiAgDQogIDwhLS0gTnVtYmVyIDIgLSBtdWNoIGxhcmdlciBhbmQgbW9yZSB2aXNpYmxlIC0tPg0KICA8dGV4dCB4PSIxNiIgeT0iMjIiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiNmZmZmZmYiPjI8L3RleHQ+DQogIA0KICA8IS0tIFN1YnRsZSBzaGFkb3cgZm9yIGRlcHRoIC0tPg0KICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjE4IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsMlNoYWRvdykiLz4NCjwvc3ZnPiA=",bU="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHJlZCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGwzTWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmNkZDIiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZjQ0MzM2Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2QzMmYyZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNiNzFjMWMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzhlMDAwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDNIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZlYmVlIiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmNkZDIiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmNkZDIiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsM1NwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsM1NoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsM01haW4pIiBzdHJva2U9IiM4ZTAwMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGwzSGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsM1NwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgMyAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iI2ZmZmZmZiI+MzwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGwzU2hhZG93KSIvPg0KPC9zdmc+IA==",vU="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHB1cnBsZSAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw0TWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNlMWJlZTciLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjYWI0N2JjIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzljMjdiMCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiM3YjFmYTIiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzRhMTQ4YyIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDRIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZjNlNWY1IiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNlMWJlZTciIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlMWJlZTciIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNFNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNFNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsNE1haW4pIiBzdHJva2U9IiM0YTE0OGMiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGw0SGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsNFNwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgNCAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iI2ZmZmZmZiI+NDwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw0U2hhZG93KSIvPg0KPC9zdmc+IA==",xU="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIG9yYW5nZSAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw1TWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmUwYjIiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZmY5ODAwIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2Y1N2MwMCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNlZjZjMDAiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2U2NTEwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDVIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmM2UwIiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmUwYjIiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmUwYjIiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNVNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNVNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsNU1haW4pIiBzdHJva2U9IiNlNjUxMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGw1SGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsNVNwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgNSAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzAwMDAwMCI+NTwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw1U2hhZG93KSIvPg0KPC9zdmc+IA==",EU="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGdyZWVuIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDZNYWluIiBjeD0iMzAlIiBjeT0iMzAlIiByPSI3MCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2M4ZTZjOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIyNSUiIHN0b3AtY29sb3I9IiM2NmJiNmEiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjNGNhZjUwIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9Ijc1JSIgc3RvcC1jb2xvcj0iIzM4OGUzYyIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMWI1ZTIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIEhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNkhpZ2hsaWdodCIgY3g9IjI1JSIgY3k9IjI1JSIgcj0iNDUlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNlOGY1ZTgiIHN0b3Atb3BhY2l0eT0iMC45Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2M4ZTZjOSIgc3RvcC1vcGFjaXR5PSIwLjUiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2M4ZTZjOSIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw2U3BlY3VsYXIiIGN4PSI0MCUiIGN5PSI0MCUiIHI9IjIwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNoYWRvdyBncmFkaWVudCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw2U2hhZG93IiBjeD0iNzAlIiBjeT0iNzAlIiByPSIzMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgPC9kZWZzPg0KICANCiAgPCEtLSBNYWluIGJhbGwgLS0+DQogIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw2TWFpbikiIHN0cm9rZT0iIzFiNWUyMCIgc3Ryb2tlLXdpZHRoPSIwLjUiLz4NCiAgDQogIDwhLS0gUHJpbWFyeSBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjUiIGZpbGw9InVybCgjYmFsbDZIaWdobGlnaHQpIi8+DQogIA0KICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMi41IiBmaWxsPSJ1cmwoI2JhbGw2U3BlY3VsYXIpIi8+DQogIA0KICA8IS0tIE51bWJlciA2IC0gbXVjaCBsYXJnZXIgYW5kIG1vcmUgdmlzaWJsZSAtLT4NCiAgPHRleHQgeD0iMTYiIHk9IjIyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjZmZmZmZmIj42PC90ZXh0Pg0KICANCiAgPCEtLSBTdWJ0bGUgc2hhZG93IGZvciBkZXB0aCAtLT4NCiAgPGNpcmNsZSBjeD0iMTgiIGN5PSIxOCIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDZTaGFkb3cpIi8+DQo8L3N2Zz4g",wU="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGJyb3duIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDdNYWluIiBjeD0iMzAlIiBjeT0iMzAlIiByPSI3MCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2Q3Y2NjOCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIyNSUiIHN0b3AtY29sb3I9IiNhMTg4N2YiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjOGQ2ZTYzIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9Ijc1JSIgc3RvcC1jb2xvcj0iIzZkNGM0MSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjM2UyNzIzIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIEhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsN0hpZ2hsaWdodCIgY3g9IjI1JSIgY3k9IjI1JSIgcj0iNDUlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNlZmViZTkiIHN0b3Atb3BhY2l0eT0iMC45Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2Q3Y2NjOCIgc3RvcC1vcGFjaXR5PSIwLjUiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2Q3Y2NjOCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw3U3BlY3VsYXIiIGN4PSI0MCUiIGN5PSI0MCUiIHI9IjIwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNoYWRvdyBncmFkaWVudCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw3U2hhZG93IiBjeD0iNzAlIiBjeT0iNzAlIiByPSIzMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgPC9kZWZzPg0KICANCiAgPCEtLSBNYWluIGJhbGwgLS0+DQogIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw3TWFpbikiIHN0cm9rZT0iIzNlMjcyMyIgc3Ryb2tlLXdpZHRoPSIwLjUiLz4NCiAgDQogIDwhLS0gUHJpbWFyeSBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjUiIGZpbGw9InVybCgjYmFsbDdIaWdobGlnaHQpIi8+DQogIA0KICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMi41IiBmaWxsPSJ1cmwoI2JhbGw3U3BlY3VsYXIpIi8+DQogIA0KICA8IS0tIE51bWJlciA3IC0gbXVjaCBsYXJnZXIgYW5kIG1vcmUgdmlzaWJsZSAtLT4NCiAgPHRleHQgeD0iMTYiIHk9IjIyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjZmZmZmZmIj43PC90ZXh0Pg0KICANCiAgPCEtLSBTdWJ0bGUgc2hhZG93IGZvciBkZXB0aCAtLT4NCiAgPGNpcmNsZSBjeD0iMTgiIGN5PSIxOCIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDdTaGFkb3cpIi8+DQo8L3N2Zz4g",Qw="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGJsYWNrIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDhNYWluIiBjeD0iMzAlIiBjeT0iMzAlIiByPSI3MCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzQyNDI0MiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIyNSUiIHN0b3AtY29sb3I9IiMyMTIxMjEiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9Ijc1JSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIEhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsOEhpZ2hsaWdodCIgY3g9IjI1JSIgY3k9IjI1JSIgcj0iNDUlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiM3NTc1NzUiIHN0b3Atb3BhY2l0eT0iMC45Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzQyNDI0MiIgc3RvcC1vcGFjaXR5PSIwLjUiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzQyNDI0MiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw4U3BlY3VsYXIiIGN4PSI0MCUiIGN5PSI0MCUiIHI9IjIwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNoYWRvdyBncmFkaWVudCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw4U2hhZG93IiBjeD0iNzAlIiBjeT0iNzAlIiByPSIzMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgPC9kZWZzPg0KICANCiAgPCEtLSBNYWluIGJhbGwgLS0+DQogIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw4TWFpbikiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIwLjUiLz4NCiAgDQogIDwhLS0gUHJpbWFyeSBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjUiIGZpbGw9InVybCgjYmFsbDhIaWdobGlnaHQpIi8+DQogIA0KICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMi41IiBmaWxsPSJ1cmwoI2JhbGw4U3BlY3VsYXIpIi8+DQogIA0KICA8IS0tIE51bWJlciA4IC0gbXVjaCBsYXJnZXIgYW5kIG1vcmUgdmlzaWJsZSAtLT4NCiAgPHRleHQgeD0iMTYiIHk9IjIyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjZmZmZmZmIj44PC90ZXh0Pg0KICANCiAgPCEtLSBTdWJ0bGUgc2hhZG93IGZvciBkZXB0aCAtLT4NCiAgPGNpcmNsZSBjeD0iMTgiIGN5PSIxOCIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDhTaGFkb3cpIi8+DQo8L3N2Zz4g",SU="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHllbGxvdyAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw5TWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZmZlYjNiIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZkZDgzNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNmNTdmMTciLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2U2NTEwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDlIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmOWM0IiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsOVNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsOVNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBXaGl0ZSBzdHJpcGUgZ3JhZGllbnQgLS0+DQogICAgPGxpbmVhckdyYWRpZW50IGlkPSJiYWxsOVN0cmlwZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmOGY4ZjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgIDwvbGluZWFyR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsOU1haW4pIiBzdHJva2U9IiNlNjUxMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFJlYWxpc3RpYyBjdXJ2ZWQgd2hpdGUgc3RyaXBlIC0tPg0KICA8cGF0aCBkPSJNIDQgOCBBIDggOCAwIDAgMSAxMiA4IEwgMTIgMjQgQSA4IDggMCAwIDEgNCAyNCBaIiBmaWxsPSJ1cmwoI2JhbGw5U3RyaXBlKSIvPg0KICANCiAgPCEtLSBQcmltYXJ5IGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iNSIgZmlsbD0idXJsKCNiYWxsOUhpZ2hsaWdodCkiLz4NCiAgDQogIDwhLS0gU3BlY3VsYXIgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxNCIgY3k9IjE0IiByPSIyLjUiIGZpbGw9InVybCgjYmFsbDlTcGVjdWxhcikiLz4NCiAgDQogIDwhLS0gTnVtYmVyIDkgLSBtdWNoIGxhcmdlciBhbmQgbW9yZSB2aXNpYmxlIC0tPg0KICA8dGV4dCB4PSIxNiIgeT0iMjIiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMwMDAwMDAiPjk8L3RleHQ+DQogIA0KICA8IS0tIFN1YnRsZSBzaGFkb3cgZm9yIGRlcHRoIC0tPg0KICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjE4IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsOVNoYWRvdykiLz4NCjwvc3ZnPiA=",ya=600,Oa=300,xt=15,wt=xt/2,Ir=1.3,hi=.9,td=30,Yh=160,ad=24.5,Gh=270.18,Zx=ya*.75,Vx=Oa/2,qh=wt*.1,Qx=.7,Jx=.45,Xx=.05,vm=.99,Ls=.75,Bs=.75,Ar=.95,zs=.3,CU=.8,qa=(...a)=>{},M0=({onGameEnd:a})=>{const r=b.useRef(null),[t,n]=b.useState({balls:[],cueBall:{x:100,y:150,originalX:100,originalY:150,vx:0,vy:0,visible:!0,isMoving:!1,rotation:0,rotationSpeed:0,spinX:0,spinY:0},isAnimating:!1,currentPlayer:1,gamePhase:Dl.BREAK,ballInHand:!1,scratchOccurred:!1}),[o,i]=b.useState(!1),[c,u]=b.useState({x:0,y:0}),[m,g]=b.useState(0),[f,h]=b.useState(.5),[v,S]=b.useState(0),[x,E]=b.useState(0),[N,C]=b.useState(!0),[I,A]=b.useState(null),[_,k]=b.useState(null),[B,z]=b.useState(null),[M,O]=b.useState(!1),[U,Z]=b.useState(!1),[H,V]=b.useState(0),[F,R]=b.useState(!1),[D,j]=b.useState(null),[X,W]=b.useState(null),[T,G]=b.useState(!1),[te,P]=b.useState(!1),[ne,q]=b.useState(!1),[oe,he]=b.useState(!1),[be,nt]=b.useState(!1),[ye,We]=b.useState(!1),[Ze,lt]=b.useState(null),[Ve,zt]=b.useState(!1),[ve,J]=b.useState({1:0,2:0}),[Ae,Ge]=b.useState(null),[Le,de]=b.useState(null),[je,ze]=b.useState(!1),[gt,re]=b.useState(null),[Be,Oe]=b.useState(!1),[Te,rt]=b.useState(!1),[pt,jt]=b.useState(!1),[ba,da]=b.useState(!1),[ta,wa]=b.useState(null),[rn,He]=b.useState(0),[ht,Qt]=b.useState([]),[on,Tt]=b.useState(!1),Va=b.useRef(null),ka={cue:u5,1:hU,2:yU,3:bU,4:vU,5:xU,6:EU,7:wU,8:Qw,9:SU,10:Yi},La=b.useRef({}),sn=b.useRef(null),wn=b.useRef(null),Wa=[{x:30,y:24.5,id:"top-left"},{x:570.77,y:24.5,id:"top-right"},{x:30,y:270.18,id:"bottom-left"},{x:570.77,y:270.18,id:"bottom-right"},{x:300.385,y:24.5,id:"top-center"},{x:300.385,y:270.18,id:"bottom-center"}],Jn=b.useCallback(le=>{if(!te)return;const $=r.current.getBoundingClientRect(),Ee=$.width/ya,_e=(le.clientX-$.left)/Ee,Me=(le.clientY-$.top)/Ee,$e=t.balls.find(Je=>Je.visible&&!Je.pocketed&&Math.sqrt((Je.x-_e)**2+(Je.y-Me)**2)<wt*1.5);if($e){j($e.id);return}const Fe=Wa.find(Je=>Math.sqrt((Je.x-_e)**2+(Je.y-Me)**2)<60);if(Fe){W(Fe.id);return}},[te,t.balls,Wa]),ss=b.useCallback((le,$)=>{const Je=[{x:30,y:24.5,id:"top-left"},{x:570.77,y:24.5,id:"top-right"},{x:30,y:270.18,id:"bottom-left"},{x:570.77,y:270.18,id:"bottom-right"},{x:300.385,y:24.5,id:"top-center"},{x:300.385,y:270.18,id:"bottom-center"}];let Ct=null,ct=1/0;return Je.forEach(_t=>{const ft=Math.hypot(le-_t.x,$-_t.y);ft<ct&&(ct=ft,Ct=_t)}),Ct?Ct.id:null},[]),Sn=b.useCallback(le=>{const Fe=[{x:30,y:24.5,margin:xt*Ir,type:"corner"},{x:570.77,y:24.5,margin:xt*Ir,type:"corner"},{x:30,y:270.18,margin:xt*Ir,type:"corner"},{x:570.77,y:270.18,margin:xt*Ir,type:"corner"},{x:300.385,y:24.5,margin:xt*hi,type:"side"},{x:300.385,y:270.18,margin:xt*hi,type:"side"}],Je=le.x,Ct=le.y,ct=le.vx??0,_t=le.vy??0,ft=Math.hypot(ct,_t);return Fe.some(qe=>{const xe=qe.x-Je,Pe=qe.y-Ct,Qe=Math.hypot(xe,Pe);if(Qe>=qe.margin+qh)return!1;if(ft>0){const et=(ct*xe+_t*Pe)/(ft*(Qe||1)),Yt=qe.type==="side"?Qx:Jx,Xt=(ct*xe+_t*Pe)/(Qe||1);if(et<Yt||Xt<Xx)return!1}return!0})},[]),ua=b.useCallback((le,$)=>le>=td&&le<=Yh&&$>=ad&&$<=Gh,[]);b.useCallback(()=>{n(le=>({...le,scratchOccurred:!0,ballInHand:!0,currentPlayer:le.currentPlayer===1?2:1,cueBall:{...le.cueBall,x:100,y:150,vx:0,vy:0,visible:!0,isMoving:!1,rotation:0,rotationSpeed:0}}))},[]);const Na=b.useCallback(()=>{const le=t.balls.filter(Ee=>Ee.visible&&!Ee.pocketed);if(qa("Visible balls on table:",le.map(Ee=>Ee.id).sort((Ee,_e)=>Ee-_e)),le.length===0)return null;const $=le.reduce((Ee,_e)=>_e.id<Ee.id?_e:Ee);return qa("Lowest numbered ball:",$.id),$},[t.balls]),An=b.useCallback(()=>{if(ne)return null;const le=gt||Na();let $=null;if(t.cueBall.visible||($="scratch"),t.gamePhase==="break"){Le&&Le!==1&&($="break_wrong_ball_first");const Ee=t.balls.filter(Me=>Me.pocketed&&!Me.wasPocketedBeforeShot),_e=rn;Ee.length===0&&_e<4&&($="break_insufficient_cushions")}return!$&&Le&&le&&Le!==le.id&&(qa("Wrong ball first foul - Hit:",Le,"Lowest:",le.id),qa("Visible balls on table:",t.balls.filter(Ee=>Ee.visible&&!Ee.pocketed).map(Ee=>Ee.id).sort((Ee,_e)=>Ee-_e)),$="wrong_ball_first"),!$&&!Te&&!ne&&t.gamePhase!=="break"&&($="no_contact"),!$&&Te&&!je&&t.balls.filter(_e=>_e.pocketed&&!_e.wasPocketedBeforeShot).length===0&&($="no_rail_contact"),qa("Current lowest ball:",le?le.id:"none"),$},[ne,Le,je,Te,Na,t.balls,gt,t.cueBall.visible,t.gamePhase,rn]),Wr=b.useCallback(()=>{if(t.gamePhase==="break"||ne)return[];const le=t.balls.filter(Ee=>Ee.pocketed&&!Ee.wasPocketedBeforeShot);if(le.length===0)return[];const $=[];return le.forEach(Ee=>{if(Ee.id===D)Ee.pocketedPocket!==X&&(qa("Illegally pocketed ball:",Ee.id,"- called ball went in wrong pocket"),$.push(Ee));else{const _e=le.find(Me=>Me.id===D);(!_e||_e.pocketedPocket!==X)&&(qa("Illegally pocketed ball:",Ee.id,"- not called ball and called ball not legally pocketed"),$.push(Ee))}}),$},[t.gamePhase,ne,D,X,t.balls]),no=b.useCallback(le=>{const $=ta||t.currentPlayer;window.dispatchEvent(new CustomEvent("gameFoul",{detail:{foulType:le,player:$}})),le==="scratch"?window.dispatchEvent(new CustomEvent("scratchFoul",{detail:{player:$}})):le==="wrong_ball_first"?window.dispatchEvent(new CustomEvent("wrongBallFoul",{detail:{player:$}})):le==="no_rail_contact"&&window.dispatchEvent(new CustomEvent("noRailFoul",{detail:{player:$}})),window.dispatchEvent(new CustomEvent("ballInHand",{detail:{player:$}})),J(Ee=>{const _e={...Ee,[$]:Ee[$]+1};return _e[$]>=3&&(window.dispatchEvent(new CustomEvent("threeFoul",{detail:{player:$}})),alert(`Player ${$} loses due to 3 consecutive fouls!`)),_e}),n(Ee=>({...Ee,ballInHand:!0,currentPlayer:Ee.currentPlayer===1?2:1,scratchOccurred:le==="scratch"})),le==="scratch"&&n(Ee=>({...Ee,cueBall:{...Ee.cueBall,visible:!0,x:100,y:150,vx:0,vy:0}})),Ge(le)},[t.currentPlayer,ta]),Dn=b.useCallback((le,$)=>{const Ee=t.cueBall;return Math.hypot(le-Ee.x,$-Ee.y)<=wt},[t.cueBall]),jr=b.useCallback((le,$)=>{(t.ballInHand||t.gamePhase==="break")&&Dn(le,$)&&(i(!0),u({x:le-t.cueBall.x,y:$-t.cueBall.y}))},[t.ballInHand,t.gamePhase,t.cueBall,Dn]),hr=b.useCallback((le,$)=>{if(o){const Ee=le-c.x,_e=$-c.y;let Me,$e;t.gamePhase==="break"?(Me=Math.max(td+wt,Math.min(Yh-wt,Ee)),$e=Math.max(ad+wt,Math.min(Gh-wt,_e))):(Me=Math.max(30+wt,Math.min(570.77-wt,Ee)),$e=Math.max(24.5+wt,Math.min(270.18-wt,_e))),n(Fe=>({...Fe,cueBall:{...Fe.cueBall,x:Me,y:$e}}))}},[o,c,t.gamePhase]),Hr=b.useCallback(()=>{o&&i(!1)},[o]);b.useCallback((le,$)=>{ua(le,$)&&n(Ee=>({...Ee,cueBall:{...Ee.cueBall,x:le,y:$,vx:0,vy:0,visible:!0,isMoving:!1},ballInHand:!1}))},[ua]),b.useCallback((le,$)=>{let Ee=null,_e=1/0;return Wa.forEach(Me=>{const $e=Math.hypot(le-Me.x,$-Me.y);$e<_e&&(_e=$e,Ee=Me)}),Ee},[]);const Mn=b.useCallback((le,$,Ee,_e)=>{const Me=le-Ee,$e=$-_e,Fe=Math.sqrt(Me*Me+$e*$e);if(Fe<wt*2)return null;const Je=le-Me/Fe*(wt*2),Ct=$-$e/Fe*(wt*2);return{x:Je,y:Ct}},[]);function yr(le,$){return le>=15&&le<=30&&$>=Oa-75&&$<=Oa-60}function br(le,$,Ee,_e,Me){qx(Me,_e)&&(le.fillStyle="rgba(255, 215, 0, 0.2)",le.fillRect(10,$-80,200,25),le.strokeStyle="rgba(255, 215, 0, 0.5)",le.lineWidth=1,le.strokeRect(10,$-80,200,25),le.fillStyle="rgba(255, 215, 0, 0.9)",le.font="12px Arial",le.textAlign="left",le.fillText("Push Out Available",15,$-65),le.fillStyle=Ee?"rgba(255, 215, 0, 0.9)":"rgba(255, 255, 255, 0.3)",le.fillRect(15,$-75,15,15),le.strokeStyle="rgba(255, 215, 0, 0.8)",le.lineWidth=2,le.strokeRect(15,$-75,15,15),Ee&&(le.fillStyle="rgba(255, 215, 0, 0.9)",le.font="bold 16px Arial",le.textAlign="center",le.fillText("✓",22,$-65)))}function Xn(le,$){le.setLineDash([]),le.beginPath(),le.moveTo($[0].x,$[0].y);for(let Ee=1;Ee<$.length;Ee++){const _e=$[Ee];le.lineTo(_e.x,_e.y)}le.stroke()}function Sa(le){let $="rgba(255, 255, 255, 0.8)";M?$="rgba(0, 255, 0, 0.95)":U&&($="rgba(255, 255, 0, 0.9)"),Math.abs(v)>.1&&(v>0?$="rgba(76, 175, 80, 0.9)":$="rgba(244, 67, 54, 0.9)"),le.strokeStyle=$,le.lineWidth=M?4:U?2:3,le.setLineDash([]),le.globalAlpha=.9}function _o(le){const $=ya*.3,Ee=ya*.5*le;return $+Ee}function ko(le,$){let Ee=le-$;for(;Ee>Math.PI;)Ee-=Math.PI*2;for(;Ee<-Math.PI;)Ee+=Math.PI*2;return Ee}const un=b.useCallback((le,$)=>{const Je=[{x:30,y:24.5,id:"top-left"},{x:570.77,y:24.5,id:"top-right"},{x:30,y:270.18,id:"bottom-left"},{x:570.77,y:270.18,id:"bottom-right"},{x:300.385,y:24.5,id:"top-center"},{x:300.385,y:270.18,id:"bottom-center"}];let Ct=null,ct=1/0;if(Je.forEach(_t=>{const ft=Math.hypot(le-_t.x,$-_t.y);ft<ct&&(ct=ft,Ct=_t)}),Ct&&ct<80){const _t=Math.max(0,(80-ct)/80),ft=le+(Ct.x-le)*_t*.3,qe=$+(Ct.y-$)*_t*.3;return{x:ft,y:qe,assisted:!0}}return{x:le,y:$,assisted:!1}},[]),Kn=b.useCallback((le,$,Ee=null,_e={})=>{const{ignoreCuePocket:Me=!0}=_e,$e={},Fe=.99,Je=16,Ct=30.77,ct=570.77,_t=24.5,ft=270.18,qe={1:"#ffff00",2:"#0000ff",3:"#ff0000",4:"#800080",5:"#ffa500",6:"#008000",7:"#8b4513",8:"#000000",9:"#ffff00",10:"#ff0000"};return(()=>{const Pe=new Map;t.balls.forEach(et=>{et.visible&&!et.pocketed&&Pe.set(et.id,{id:et.id,x:et.x,y:et.y,vx:0,vy:0,visible:!0,isMoving:!1,trajectory:[{x:et.x,y:et.y}]})});const Qe=Ee||t.cueBall;Pe.set("cue",{id:"cue",x:Qe.x,y:Qe.y,vx:le,vy:$,visible:!0,isMoving:!0,trajectory:[{x:Qe.x,y:Qe.y}]});for(let et=0;et<300;et++){const Yt=Array.from(Pe.values()).filter(Ht=>Ht.visible);for(let Ht=0;Ht<Je;Ht++)Yt.forEach(tt=>{if(Math.abs(tt.vx)<.03&&Math.abs(tt.vy)<.03){tt.vx=0,tt.vy=0;return}tt.vx*=Math.pow(Fe,1/Je),tt.vy*=Math.pow(Fe,1/Je);let ra=tt.x+tt.vx/Je,ma=tt.y+tt.vy/Je,Qa=!1;ra<Ct+wt?(tt.x=Ct+wt,tt.vx=Math.abs(tt.vx)*.85,Qa=!0):ra>ct-wt?(tt.x=ct-wt,tt.vx=-Math.abs(tt.vx)*.8,Qa=!0):tt.x=ra,ma<_t+wt?(tt.y=_t+wt,tt.vy=Math.abs(tt.vy)*.85,Qa=!0):ma>ft-wt?(tt.y=ft-wt,tt.vy=-Math.abs(tt.vy)*.8,Qa=!0):tt.y=ma;let Tn=!1;const Ba=(Ct+ct)/2,Ca=[{x:Ct,y:_t,margin:xt*Ir},{x:ct,y:_t,margin:xt*Ir},{x:Ct,y:ft,margin:xt*Ir},{x:ct,y:ft,margin:xt*Ir},{x:Ba,y:_t,margin:xt*hi},{x:Ba,y:ft,margin:xt*hi}],gn=tt.x,hn=tt.y,yn=tt.vx??0,tr=tt.vy??0,Ja=Math.hypot(yn,tr);let Ha=!1;if(Me||(Ha=Ca.some(Fn=>{const ar=Fn.x-gn,Gr=Fn.y-hn,Xa=Math.hypot(ar,Gr),qr=Fn.margin+qh;if(Xa>=qr)return!1;if(Ja>0){const is=(yn*ar+tr*Gr)/(Ja*(Xa||1)),No=Fn.x===Ba?Qx:Jx,Ll=(yn*ar+tr*Gr)/(Xa||1);if(is<No||Ll<Xx)return!1}return!0})),Ha&&!(Me&&tt.id==="cue")&&(Tn=!0),!Tn&&tt.id!=="cue"){const Fn=un(tt.x,tt.y);if(Fn.assisted){const ar=Fn.x-tt.x,Gr=Fn.y-tt.y;Math.sqrt(ar*ar+Gr*Gr)<5&&(Tn=!0)}}if(Tn){tt.visible=!1,tt.trajectory.push({x:tt.x,y:tt.y,pocketed:!0});return}tt.isMoving&&Math.abs(tt.vx)<.03&&Math.abs(tt.vy)<.03&&(tt.vx=0,tt.vy=0,tt.isMoving=!1),tt.trajectory.push({x:tt.x,y:tt.y,bounced:Qa})});const Xt=Pe.get("cue");Xt&&Xt.visible&&Pe.forEach((Ht,tt)=>{if(tt!=="cue"&&Ht.visible){const ra=Ht.x-Xt.x,ma=Ht.y-Xt.y,Qa=Math.sqrt(ra*ra+ma*ma);if(Qa>0&&Qa<xt+.5){const Tn=xt-Qa+.01,Ba=ra/Qa,Ca=ma/Qa,gn=Math.max(Tn/2,.1);Xt.x-=Ba*gn,Xt.y-=Ca*gn,Ht.x+=Ba*gn,Ht.y+=Ca*gn;const hn=Xt.vx-Ht.vx,yn=Xt.vy-Ht.vy,Ja=-(hn*Ba+yn*Ca)||.01;Xt.vx+=Ja*Ba,Xt.vy+=Ja*Ca,Ht.vx-=Ja*Ba,Ht.vy-=Ja*Ca,Xt.trajectory.length>0&&(Xt.trajectory[Xt.trajectory.length-1].collision=!0),Ht.trajectory.length>0&&(Ht.trajectory[Ht.trajectory.length-1].collision=!0)}}});const Rn=Array.from(Pe.values()).filter(Ht=>Ht.id!=="cue"&&Ht.visible);for(let Ht=0;Ht<Rn.length;Ht++)for(let tt=Ht+1;tt<Rn.length;tt++){const ra=Rn[Ht],ma=Rn[tt],Qa=ma.x-ra.x,Tn=ma.y-ra.y,Ba=Math.sqrt(Qa*Qa+Tn*Tn);if(Ba>0&&Ba<xt){const Ca=xt-Ba+.01,gn=Qa/Ba,hn=Tn/Ba;ra.x-=gn*(Ca/2),ra.y-=hn*(Ca/2),ma.x+=gn*(Ca/2),ma.y+=hn*(Ca/2);const yn=ra.vx-ma.vx,tr=ra.vy-ma.vy,Ha=-(yn*gn+tr*hn)||.01;ra.vx+=Ha*gn,ra.vy+=Ha*hn,ma.vx-=Ha*gn,ma.vy-=Ha*hn,ra.isMoving=!0,ma.isMoving=!0,ra.trajectory.length>0&&(ra.trajectory[ra.trajectory.length-1].collision=!0),ma.trajectory.length>0&&(ma.trajectory[ma.trajectory.length-1].collision=!0)}}if(Yt.every(Ht=>Math.abs(Ht.vx)<.028&&Math.abs(Ht.vy)<.028))break}Pe.forEach((et,Yt)=>{et.trajectory.length>1&&($e[Yt]={points:et.trajectory,color:qe[Yt]||"#ffffff"})})})(),$e},[t.balls,t.cueBall,Sn]),$r=b.useCallback((le,$)=>{const Ee=$.x-le.x,_e=$.y-le.y,Me=Math.sqrt(Ee*Ee+_e*_e);if(Me===0||Me>=xt)return!1;const $e=xt-Me+.01,Fe=Ee/Me,Je=_e/Me;le.x-=Fe*($e/2),le.y-=Je*($e/2),$.x+=Fe*($e/2),$.y+=Je*($e/2);const Ct=le.vx-$.vx,ct=le.vy-$.vy,ft=-(Ct*Fe+ct*Je)||.01;le.vx+=ft*Fe,le.vy+=ft*Je,$.vx-=ft*Fe,$.vy-=ft*Je;const qe=CU,xe=le.spinX||0,Pe=le.spinY||0,Qe=$.spinX||0,et=$.spinY||0,Yt=(xe-Qe)*qe*Fe,Xt=(Pe-et)*qe*Je;return le.spinX=(xe-Yt)*.9,le.spinY=(Pe-Xt)*.9,$.spinX=(Qe+Yt)*.9,$.spinY=(et+Xt)*.9,le.isMoving=!0,$.isMoving=!0,!0},[]),er=b.useCallback(()=>{const le=[],$=ya*.75,Ee=Oa/2;function _e(){return(Math.random()-.5)*1.5}const Me=[{x:$,y:Ee},{x:$+xt*.95,y:Ee-xt*.48},{x:$+xt*.95,y:Ee+xt*.48},{x:$+2*xt*.95,y:Ee-xt*.95},{x:$+2*xt*.95,y:Ee},{x:$+2*xt*.95,y:Ee+xt*.95},{x:$+3*xt*.95,y:Ee-xt*1.43},{x:$+3*xt*.95,y:Ee-xt*.48},{x:$+3*xt*.95,y:Ee+xt*.48},{x:$+3*xt*.95,y:Ee+xt*1.43}],$e=[{x:$+3*xt*.95,y:Ee-xt*1.43},{x:$+3*xt*.95,y:Ee+xt*1.43}],Je=[2,3].sort(()=>Math.random()-.5),ct=[4,5,6,7,8,9].sort(()=>Math.random()-.5);return[1,10,...Je,...ct].forEach((ft,qe)=>{let xe;if(qe===0)xe=Me[0];else if(qe===1)xe=Me[4];else if(qe===2||qe===3){const Pe=qe-2;xe=$e[Pe]}else xe=[Me[1],Me[2],Me[3],Me[5],Me[7],Me[8]][qe-4];xe&&le.push({id:ft,x:xe.x+_e(),y:xe.y+_e(),vx:0,vy:0,visible:!0,pocketed:!1,wasPocketedBeforeShot:!1,isMoving:!1,rotation:0,rotationSpeed:0,spinX:0,spinY:0})}),le},[]),ie=b.useCallback(()=>{function $e(){let Fe=[];for(let qe=0;qe<16;qe++){if(t.cueBall.visible){let xe=t.cueBall.x+t.cueBall.vx/16,Pe=t.cueBall.y+t.cueBall.vy/16;xe<30+wt?(t.cueBall.x=30+wt,t.cueBall.vx=Math.abs(t.cueBall.vx)*Ls*Bs,t.cueBall.spinY*=Ar,Te&&ze(!0)):xe>570.77-wt?(t.cueBall.x=570.77-wt,t.cueBall.vx=-Math.abs(t.cueBall.vx)*Ls*Bs,t.cueBall.spinY*=Ar,Te&&ze(!0)):t.cueBall.x=xe,Pe<24.5+wt?(t.cueBall.y=24.5+wt,t.cueBall.vy=Math.abs(t.cueBall.vy)*Ls*Bs,t.cueBall.spinX*=Ar,Te&&ze(!0)):Pe>270.18-wt?(t.cueBall.y=270.18-wt,t.cueBall.vy=-Math.abs(t.cueBall.vy)*Ls*Bs,t.cueBall.spinX*=Ar,Te&&ze(!0)):t.cueBall.y=Pe,t.cueBall.vx*=Math.pow(vm,1/16),t.cueBall.vy*=Math.pow(vm,1/16),t.cueBall.vx+=t.cueBall.spinX*zs,t.cueBall.vy+=t.cueBall.spinY*zs,t.cueBall.spinX*=Math.pow(Ar,1/16),t.cueBall.spinY*=Math.pow(Ar,1/16);const Qe=Math.sqrt(t.cueBall.vx*t.cueBall.vx+t.cueBall.vy*t.cueBall.vy);Qe>.01?(t.cueBall.rotationSpeed=Qe/wt,Math.abs(t.cueBall.vx)>Math.abs(t.cueBall.vy)?t.cueBall.rotation+=t.cueBall.rotationSpeed/16*Math.sign(t.cueBall.vx):t.cueBall.rotation+=t.cueBall.rotationSpeed/16*Math.sign(t.cueBall.vy)):t.cueBall.rotationSpeed=0,Sn(t.cueBall)&&(t.cueBall.isMoving=!1,t.cueBall.visible=!1),t.cueBall.isMoving&&Math.abs(t.cueBall.vx)<.03&&Math.abs(t.cueBall.vy)<.03&&(t.cueBall.vx=0,t.cueBall.vy=0,t.cueBall.isMoving=!1)}t.balls.forEach(xe=>{if(!xe.visible)return;let Pe=xe.x+xe.vx/16,Qe=xe.y+xe.vy/16;Pe<30+wt?(xe.x=30+wt,xe.vx=Math.abs(xe.vx)*Ls*Bs,xe.spinY*=Ar,Te&&(qa("Rail contact detected for ball:",xe.id),ze(!0)),t.gamePhase==="break"&&xe.id!=="cue"&&He(Yt=>Yt+1)):Pe>570.77-wt?(xe.x=570.77-wt,xe.vx=-Math.abs(xe.vx)*Ls*Bs,xe.spinY*=Ar,Te&&ze(!0),t.gamePhase==="break"&&xe.id!=="cue"&&He(Yt=>Yt+1)):xe.x=Pe,Qe<24.5+wt?(xe.y=24.5+wt,xe.vy=Math.abs(xe.vy)*Ls*Bs,xe.spinX*=Ar,Te&&ze(!0),t.gamePhase==="break"&&xe.id!=="cue"&&He(Yt=>Yt+1)):Qe>270.18-wt?(xe.y=270.18-wt,xe.vy=-Math.abs(xe.vy)*Ls*Bs,xe.spinX*=Ar,Te&&ze(!0),t.gamePhase==="break"&&xe.id!=="cue"&&He(Yt=>Yt+1)):xe.y=Qe,xe.vx*=Math.pow(vm,1/16),xe.vy*=Math.pow(vm,1/16),xe.vx+=xe.spinX*zs,xe.vy+=xe.spinY*zs,xe.spinX*=Math.pow(Ar,1/16),xe.spinY*=Math.pow(Ar,1/16);const et=Math.sqrt(xe.vx*xe.vx+xe.vy*xe.vy);et>.01?(xe.rotationSpeed=et/wt,Math.abs(xe.vx)>Math.abs(xe.vy)?xe.rotation+=xe.rotationSpeed/16*Math.sign(xe.vx):xe.rotation+=xe.rotationSpeed/16*Math.sign(xe.vy)):xe.rotationSpeed=0,Sn(xe)&&(xe.isMoving=!1,xe.visible=!1,xe.pocketed=!0,xe.pocketedPocket=ss(xe.x,xe.y),Fe.includes(xe.id)||Fe.push(xe.id)),xe.isMoving&&Math.abs(xe.vx)<.03&&Math.abs(xe.vy)<.03&&(xe.vx=0,xe.vy=0,xe.isMoving=!1)}),t.cueBall.visible&&t.balls.forEach(xe=>{if(xe.visible){const Pe=$r(t.cueBall,xe);!pt&&Pe&&t.cueBall.isMoving&&(qa("First contact made with ball:",xe.id),de(xe.id),rt(!0),jt(!0))}}),t.balls.forEach((xe,Pe)=>{xe.visible&&t.balls.slice(Pe+1).forEach(Qe=>{Qe.visible&&$r(xe,Qe)})})}const Je=t.balls.every(qe=>!qe.isMoving)&&!t.cueBall.isMoving;if(Je&&Ze&&(zt(!0),lt(null)),Je&&ne&&!Be&&!ba&&ta===t.currentPlayer&&(qa("currentPlayer:",t.currentPlayer),qa("cueBall visible:",t.cueBall.visible),t.cueBall.visible?(da(!0),q(!1)):(Oe(!0),da(!0),q(!1),no("scratch"))),Je&&!ne&&t.gamePhase!=="break"&&!Be&&!ba&&ta===t.currentPlayer&&ta!==null&&!ye){qa("currentPlayer:",t.currentPlayer),qa("gamePhase:",t.gamePhase),qa("Checking for fouls - Current player:",t.currentPlayer,"First ball hit:",Le);const qe=An();if(qe)qa("Foul detected:",qe,"by player:",t.currentPlayer),Oe(!0),da(!0),j(null),W(null),q(!1),no(qe);else{if(!ye){const Pe=Wr();if(Pe.length>0){qa("Illegally pocketed balls detected:",Pe.map(Qe=>Qe.id)),Qt(Pe),Tt(!0),da(!0),j(null),W(null);return}}da(!0),j(null),W(null),q(!1),J(Pe=>{const Qe={...Pe,[ta]:0};return qa(`Resetting fouls for player ${ta} only. Player 1 fouls: ${Qe[1]}, Player 2 fouls: ${Qe[2]}`),Qe}),t.balls.filter(Pe=>Pe.pocketed&&!Pe.wasPocketedBeforeShot).length===0&&n(Pe=>({...Pe,currentPlayer:Pe.currentPlayer===1?2:1}))}}if(Je&&ye&&!Be&&!ba){da(!0),We(!1);const qe=An();qe?(qa("Break foul detected:",qe,"by player:",t.currentPlayer),Oe(!0),no(qe)):t.balls.filter(Pe=>Pe.pocketed&&!Pe.wasPocketedBeforeShot).length===0&&n(Pe=>({...Pe,currentPlayer:Pe.currentPlayer===1?2:1}))}const Ct=t.balls.find(qe=>qe.id===10&&qe.pocketed),ct=t.balls.filter(qe=>qe.visible&&!qe.pocketed),_t=ct.length>0?ct.reduce((qe,xe)=>xe.id<qe.id?xe:qe):null;if(Je&&_t&&_t.id===10&&window.dispatchEvent(new CustomEvent("tenBallTarget",{detail:{player:t.currentPlayer}})),Je&&_t&&$h(t.gamePhase)&&window.dispatchEvent(new CustomEvent("lowestBall",{detail:{player:t.currentPlayer,lowestBall:_t.id}})),Je&&$h(t.gamePhase)&&Math.random()<.1&&window.dispatchEvent(new CustomEvent("safetyOpportunity",{detail:{player:t.currentPlayer}})),Je&&Ct){const qe=D===10,xe=X&&Ct.pocketedPocket===X;if(qe&&xe){const Pe=ta;a&&a(Pe),window.dispatchEvent(new CustomEvent("gameWinning",{detail:{player:Pe}})),setTimeout(()=>{n(Qe=>({...Qe,balls:er(),cueBall:{x:100,y:150,originalX:100,originalY:150,vx:0,vy:0,visible:!0,isMoving:!1},isAnimating:!1,gamePhase:"break",ballInHand:!1,scratchOccurred:!1})),setIsDragging(!1),C(!0),J({1:0,2:0}),n(Qe=>({...Qe,_foulReset:Date.now()})),window.tipManager&&window.tipManager.resetTips&&window.tipManager.resetTips()},2e3)}else{n(Qe=>({...Qe,balls:Qe.balls.map(et=>et.id===10?{...et,pocketed:!1,visible:!0,x:Zx,y:Vx,vx:0,vy:0,isMoving:!1}:et)}));const Pe=t.balls.find(Qe=>Qe.id===D&&Qe.pocketed&&!Qe.wasPocketedBeforeShot);Pe&&Pe.pocketedPocket===X||n(Qe=>({...Qe,currentPlayer:Qe.currentPlayer===1?2:1})),j(null),W(null)}}const ft=ml(t.gamePhase);qa("Step function - wasBreakPhase:",ft,"allStopped:",Je,"gamePhase:",t.gamePhase),n(qe=>({...qe,isAnimating:!Je,gamePhase:fU(qe.gamePhase,Je)})),gU(t.gamePhase,Je)&&(he(!0),nt(!1),setTimeout(()=>{window.dispatchEvent(new CustomEvent("pushOutStrategy",{detail:{player:t.currentPlayer}}))},500),setTimeout(()=>{window.dispatchEvent(new CustomEvent("pushOutAvailable",{detail:{player:t.currentPlayer}}))},1e3)),Je||(Va.current=requestAnimationFrame($e))}Va.current=requestAnimationFrame($e)},[t,Sn,$r,Le,ne,An,no,Ze,Be,ta,ba,Wr,ye]),Ce=b.useCallback(()=>{if(t.isAnimating||!M)return;if(!ml(t.gamePhase)){if(!ne){if(!D&&!X){P(!0),O(!1);return}}}t.cueBall;const le=f*18,$=x*Math.PI/180,Ee=Math.cos($)*v*zs*le*.05,_e=Math.sin($)*v*zs*le*.05;de(null),ze(!1),Ge(null),Oe(!1),rt(!1),jt(!1),da(!1),wa(t.currentPlayer),He(0);const Me=t.balls.filter(Fe=>Fe.visible&&!Fe.pocketed),$e=Me.length>0?Me.reduce((Fe,Je)=>Je.id<Fe.id?Je:Fe):null;re($e),n(Fe=>({...Fe,balls:Fe.balls.map(Je=>({...Je,wasPocketedBeforeShot:Je.pocketed}))})),n(Fe=>({...Fe,cueBall:{...Fe.cueBall,vx:Math.cos(m)*le,vy:Math.sin(m)*le,isMoving:!0,spinX:Ee,spinY:_e},isAnimating:!0,ballInHand:!1,gamePhase:Fe.gamePhase})),ml(t.gamePhase)&&setTimeout(()=>{window.dispatchEvent(new CustomEvent("callPocket",{detail:{player:t.currentPlayer}}))},500),ml(t.gamePhase)&&We(!0),O(!1),C(!0),A(null),k(null),z(null),ne&&lt({ballsPocketed:t.balls.filter(Fe=>Fe.pocketed).length,cueBallPosition:{x:t.cueBall.x,y:t.cueBall.y},player:t.currentPlayer}),P(!1),oe&&!be&&t.gamePhase!=="break"&&(nt(!0),he(!1)),ne&&(he(!1),nt(!0))},[t.isAnimating,M,t.cueBall,f,m,ne,D,X,t.gamePhase,oe,be]),ot=b.useCallback(le=>{if(t.isAnimating)return;if(le.button===2){Z(!0);return}const $=r.current.getBoundingClientRect(),Ee=$.width/ya,_e=(le.clientX-$.left)/Ee,Me=(le.clientY-$.top)/Ee;if(_e>=0&&_e<=ya&&Me>=0&&Me<=Oa){if(te){if($h(t.gamePhase)&&oe&&yr(_e,Me)){q(!ne);return}if(D&&X||ne){if(_e>=ya/2-80&&_e<=ya/2-10&&Me>=Oa-30&&Me<=Oa-5){P(!1),O(!0);return}if(_e>=ya/2+10&&_e<=ya/2+80&&Me>=Oa-30&&Me<=Oa-5){P(!1),j(null),W(null),q(!1),O(!0);return}}const Je=t.balls.find(ct=>ct.visible&&!ct.pocketed&&Math.sqrt((_e-ct.x)**2+(Me-ct.y)**2)<wt),Ct=Wa.find(ct=>Math.sqrt((_e-ct.x)**2+(Me-ct.y)**2)<50);if(Je||Ct){Jn(le);return}else{P(!1),j(null),W(null),O(!1);return}}if((t.ballInHand||ml(t.gamePhase))&&Dn(_e,Me)){jr(_e,Me);return}const Fe=!M;O(Fe),Fe&&!ml(t.gamePhase)&&!ne&&P(!0),Fe||(P(!1),j(null),W(null))}},[t.isAnimating,t.ballInHand,t.gamePhase,Dn,jr,M,te,D,X,Jn,oe,ne]),it=b.useCallback(le=>{o&&Hr(),le.button===2&&(Z(!1),!M&&!t.isAnimating&&(O(!0),t.gamePhase!=="break"&&!ne&&P(!0)))},[o,Hr,M,t.isAnimating,t.gamePhase,ne]),mt=b.useCallback(le=>{if(t.isAnimating)return;const $=r.current.getBoundingClientRect(),Ee=$.width/ya,_e=(le.clientX-$.left)/Ee,Me=(le.clientY-$.top)/Ee;if(o){hr(_e,Me);return}if(M&&!(te&&(F||le.altKey)))return;const $e={x:t.cueBall.x,y:t.cueBall.y},Fe={x:Math.max(30,Math.min(570,$e.x)),y:Math.max(24,Math.min(270,$e.y))},Je=Math.atan2(Me-Fe.y,_e-Fe.x);let Ct=!1,ct=null,_t=1/0;t.balls.forEach(Pe=>{if(Pe.visible&&!Pe.pocketed){const Qe=Pe.x-Fe.x,et=Pe.y-Fe.y,Yt=Math.sqrt(Qe*Qe+et*et),Xt=Math.atan2(et,Qe);Math.abs(Je-Xt)<.25&&Yt<_t&&(_t=Yt,ct=Pe,Ct=!0)}});let ft=Je;if(U){let Pe=2e-5;Ct&&ct&&(Pe=1e-5*(Math.sqrt((ct.x-Fe.x)**2+(ct.y-Fe.y)**2)/100));const Qe=Fe.x,et=Fe.y,Yt=(_e-Qe)*Pe,Xt=(Me-et)*Pe;ft=Math.atan2(Xt,Yt)}else if(Ct){const Qe=Fe.x,et=Fe.y,Yt=(_e-Qe)*.25,Xt=(Me-et)*.25;ft=Math.atan2(Xt,Yt)}else{const Pe=.9*Math.PI/180;ft=Math.round(Je/Pe)*Pe}if(M&&te&&(F||le.altKey)){const Pe=ko(ft,H),et=Math.max(-.001,Math.min(.001,Pe));ft=H+et}if((Math.abs(ko(ft,H))>2e-4||!U)&&(g(ft),V(ft)),Ct&&ct){const Pe=Mn(ct.x,ct.y,Fe.x,Fe.y);A(Pe),k(ct)}else A(null),k(null)},[t.isAnimating,o,hr,t.cueBall,t.balls,Mn,M,te]),$t=b.useCallback(()=>{},[]);b.useCallback(()=>{C(!0),h(.5),S(0),E(0),z(null),O(!1)},[]),b.useCallback(()=>{const le=t.cueBall;let $=null,Ee=1/0;return t.balls.forEach(_e=>{_e.visible&&!_e.pocketed&&_e.id<Ee&&(Ee=_e.id,$=_e)}),$?Math.atan2($.y-le.y,$.x-le.x):Math.atan2(Oa/2-le.y,ya/2-le.x)},[t.cueBall,t.balls]),b.useEffect(()=>{n(le=>({...le,balls:er()}))},[er]),b.useEffect(()=>{if(t.isAnimating)return ie(),()=>{Va.current&&cancelAnimationFrame(Va.current)}},[t.isAnimating,ie]),b.useEffect(()=>{const le=$=>{$.key==="Escape"&&te&&(P(!1),j(null),W(null),O(!1))};return document.addEventListener("keydown",le),()=>{document.removeEventListener("keydown",le)}},[te]);const Jt=b.useCallback(()=>{const le=r.current;if(!le)return;const $=le.getContext("2d");if($.clearRect(0,0,ya,Oa),sn.current?$.drawImage(sn.current,0,0,ya,Oa):($.fillStyle="#0d5c0d",$.fillRect(0,0,ya,Oa)),wn.current){$.save(),$.globalAlpha=.25;const _e=ya*.305,Me=_e*(wn.current.height/wn.current.width),$e=(ya-_e)/2,Fe=(Oa-Me)/2;$.shadowColor="rgba(0, 0, 0, 0.3)",$.shadowBlur=4,$.shadowOffsetX=0,$.shadowOffsetY=1,$.drawImage(wn.current,$e,Fe,_e,Me),$.restore()}ml(t.gamePhase)&&!t.isAnimating&&($.save(),$.strokeStyle="rgba(255, 0, 0, 0.5)",$.lineWidth=2,$.setLineDash([10,5]),$.strokeRect(td,ad,Yh-td,Gh-ad),$.fillStyle="rgba(255, 0, 0, 0.8)",$.font="12px Arial",$.fillText("KITCHEN",td+10,ad+20),$.restore());const Ee=(_e,Me)=>{if(La.current[Me]){const $e=La.current[Me];$.save(),$.translate(_e.x,_e.y),$.rotate(_e.rotation||0),$.shadowColor="rgba(0, 0, 0, 0.3)",$.shadowBlur=3,$.shadowOffsetX=1,$.shadowOffsetY=1,$.beginPath(),$.arc(0,0,wt,0,2*Math.PI),$.clip(),$.drawImage($e,-7.5,-7.5,xt,xt),$.shadowColor="transparent",$.globalAlpha=.3,$.fillStyle="rgba(255, 255, 255, 0.8)",$.beginPath(),$.arc(-7.5*.3,-7.5*.3,wt*.4,0,2*Math.PI),$.fill(),$.restore()}else{const $e=new Image;$e.onload=()=>{La.current[Me]=$e,Ee(_e,Me)},$e.src=Me}};if(t.balls.forEach(_e=>{_e.visible&&!_e.pocketed&&Ee(_e,ka[_e.id])}),N&&!t.isAnimating){const _e={x:Math.max(30,Math.min(570,t.cueBall.x)),y:Math.max(24,Math.min(270,t.cueBall.y))},Me=m,$e=f*18,Fe=Math.cos(Me)*$e,Je=Math.sin(Me)*$e,Ct=x*Math.PI/180,ct=Math.cos(Ct)*v*zs*$e*.05,_t=Math.sin(Ct)*v*zs*$e*.05,ft=Kn(Fe+ct,Je+_t,_e,{ignoreCuePocket:!0});if(ft.cue&&ft.cue.points.length>1){const qe=ft.cue.points.find(xe=>xe.collision);if(qe){qa("Trajectory collision at:",qe.x.toFixed(2),qe.y.toFixed(2));const xe=t.balls.find(Pe=>Pe.visible&&!Pe.pocketed&&Pe.id===1);xe&&qa("Actual ball 1 position:",xe.x.toFixed(2),xe.y.toFixed(2))}}Object.entries(ft).forEach(([qe,xe])=>{const Pe=qe==="cue"?1:3;if(xe.points.length>Pe){if($.save(),qe==="cue"?Sa($):($.strokeStyle=xe.color,$.lineWidth=2,$.globalAlpha=.7),qe==="cue"){const Qe=xe.points,et=Qe[0],Yt=Qe[Qe.length-1]||et;if(Math.hypot(Yt.x-et.x,Yt.y-et.y)<20){const Yr=_o(f);$.beginPath(),$.moveTo(et.x,et.y),$.lineTo(et.x+Math.cos(Me)*Yr,et.y+Math.sin(Me)*Yr),$.stroke()}else Xn($,Qe)}else Xn($,xe.points);$.restore();for(let Qe=1;Qe<xe.points.length;Qe++){const et=xe.points[Qe];if(et.collision&&($.save(),$.fillStyle=xe.color,$.globalAlpha=.6,$.beginPath(),$.arc(et.x,et.y,4,0,2*Math.PI),$.fill(),$.restore()),et.pocketed){$.save(),$.fillStyle="#00ff00",$.globalAlpha=.8,$.beginPath(),$.arc(et.x,et.y,6,0,2*Math.PI),$.fill(),$.restore();break}}}else if(qe==="cue"){$.save(),Sa($);const Qe=xe.points[0],et=_o(f),Yt=Qe.x+Math.cos(Me)*et,Xt=Qe.y+Math.sin(Me)*et;$.beginPath(),$.moveTo(Qe.x,Qe.y),$.lineTo(Yt,Xt),$.stroke(),$.restore()}})}if(B&&!t.isAnimating&&($.save(),$.strokeStyle="rgba(255, 255, 0, 0.8)",$.lineWidth=3,$.setLineDash([5,5]),$.beginPath(),$.arc(B.x,B.y,25,0,2*Math.PI),$.stroke(),$.restore()),!t.isAnimating&&!M){const Ct=[{x:30,y:24.5,margin:xt*Ir},{x:570.77,y:24.5,margin:xt*Ir},{x:30,y:270.18,margin:xt*Ir},{x:570.77,y:270.18,margin:xt*Ir},{x:300.385,y:24.5,margin:xt*hi},{x:300.385,y:270.18,margin:xt*hi}],ct=t.cueBall.x+Math.cos(m)*100,_t=t.cueBall.y+Math.sin(m)*100;let ft=null,qe=1/0;if(Ct.forEach(xe=>{const Pe=Math.hypot(ct-xe.x,_t-xe.y);Pe<qe&&(qe=Pe,ft=xe)}),ft&&qe<120){const xe=ft.margin+qh;$.save(),$.strokeStyle="rgba(0, 255, 0, 0.18)",$.lineWidth=1.5,$.setLineDash([]),$.beginPath(),$.arc(ft.x,ft.y,xe,0,2*Math.PI),$.stroke(),$.fillStyle="rgba(0, 255, 0, 0.15)",$.beginPath(),$.arc(ft.x,ft.y,2,0,2*Math.PI),$.fill(),$.restore()}}if(te&&!t.isAnimating){if($.save(),$.fillStyle="rgba(0, 0, 0, 0.4)",$.fillRect(0,0,ya,Oa),$.fillStyle="rgba(255, 215, 0, 0.9)",$.font="bold 16px Arial",$.textAlign="center",$.fillText("CALL YOUR SHOT",ya/2,30),$.font="14px Arial",$.fillStyle="rgba(255, 255, 255, 0.9)",$.fillText("Click a ball, then click a pocket",ya/2,50),D&&($.fillStyle="rgba(0, 255, 0, 0.8)",$.font="bold 14px Arial",$.fillText(`Selected Ball: ${D}`,ya/2,Oa-60)),X&&($.fillStyle="rgba(0, 255, 0, 0.8)",$.font="bold 14px Arial",$.fillText(`Selected Pocket: ${X.replace("-"," ")}`,ya/2,Oa-40)),D){const _e=t.balls.find(Me=>Me.id===D&&Me.visible&&!Me.pocketed);_e&&($.strokeStyle="rgba(0, 255, 0, 0.8)",$.lineWidth=3,$.setLineDash([5,5]),$.beginPath(),$.arc(_e.x,_e.y,wt+5,0,2*Math.PI),$.stroke())}if(X){const _e=Wa.find(Me=>Me.id===X);_e&&($.strokeStyle="rgba(0, 255, 0, 0.8)",$.lineWidth=3,$.setLineDash([5,5]),$.beginPath(),$.arc(_e.x,_e.y,30,0,2*Math.PI),$.stroke())}qa("Draw function - gamePhase:",t.gamePhase,"pushOutAvailable:",oe,"isCallShotMode:",te),br($,Oa,ne,oe,t.gamePhase),(D&&X||ne)&&($.fillStyle="rgba(76, 175, 80, 0.9)",$.fillRect(ya/2-80,Oa-30,70,25),$.fillStyle="white",$.font="bold 12px Arial",$.textAlign="center",$.fillText("CONFIRM",ya/2-45,Oa-15),$.fillStyle="rgba(244, 67, 54, 0.9)",$.fillRect(ya/2+10,Oa-30,70,25),$.fillStyle="white",$.font="bold 12px Arial",$.textAlign="center",$.fillText("CANCEL",ya/2+45,Oa-15)),$.restore()}if(t.cueBall.visible){const _e=t.cueBall,Me=ka.cue;if(La.current[Me]){const $e=La.current[Me];$.save(),$.translate(_e.x,_e.y),$.rotate(_e.rotation||0),$.beginPath(),$.arc(0,0,wt,0,2*Math.PI),$.clip(),$.drawImage($e,-7.5,-7.5,xt,xt),v!==0&&!t.isAnimating&&($.restore(),$.save(),$.strokeStyle=v>0?"rgba(76, 175, 80, 0.8)":"rgba(244, 67, 54, 0.8)",$.lineWidth=3,$.setLineDash([5,5]),$.beginPath(),$.arc(_e.x,_e.y,wt+5,0,2*Math.PI),$.stroke(),$.strokeStyle=v>0?"rgba(76, 175, 80, 0.9)":"rgba(244, 67, 54, 0.9)",$.lineWidth=2,$.setLineDash([]),$.beginPath(),$.moveTo(_e.x,_e.y),$.lineTo(_e.x+Math.cos(x*Math.PI/180)*(wt+10),_e.y+Math.sin(x*Math.PI/180)*(wt+10)),$.stroke()),$.restore()}else{const $e=new Image;$e.onload=()=>{La.current[Me]=$e,Jt()},$e.src=Me}}$.globalAlpha=1},[t,N,m,ka,f,B,M,Kn,te,D,X,Wa,oe,ne]);b.useEffect(()=>{Jt()},[t.isAnimating,N,m,f,B,M,te,D,X,oe,ne]),b.useEffect(()=>{const le=new Image;le.onload=()=>{sn.current=le,Jt()},le.src=d5},[Jt]),b.useEffect(()=>{const le=new Image;le.onload=()=>{wn.current=le,Jt()},le.src=ay},[Jt]),b.useEffect(()=>{const le=Ee=>{Ee.altKey&&R(!0)},$=Ee=>{Ee.altKey||R(!1),Ee.key==="Alt"&&R(!1)};return window.addEventListener("keydown",le),window.addEventListener("keyup",$),()=>{window.removeEventListener("keydown",le),window.removeEventListener("keyup",$)}},[]);const[na,ja]=b.useState(!1),It=b.useCallback(le=>{le.preventDefault(),ja(!0),console.log("English drag started")},[]),qs=b.useCallback(le=>{if(!na)return;const $=le.currentTarget.getBoundingClientRect(),Ee=le.clientX-$.left,_e=le.clientY-$.top,Me=Ee/$.width,$e=_e/$.height,Fe=.5,Je=.5,Ct=Math.sqrt((Me-Fe)**2+($e-Je)**2),ct=Math.min(Ct,.4),_t=Math.min(ct/.4,1),qe=(Math.atan2($e-Je,Me-Fe)*180/Math.PI+360)%360;S(_t),E(qe),console.log(`English updated: ${Math.round(_t*100)}% at ${Math.round(qe)}°`)},[na]),ls=b.useCallback(()=>{ja(!1),console.log("English drag ended")},[]),fn=b.useCallback(le=>{const $=le%360;return $>=247.5&&$<=292.5?"#4CAF50":$>=67.5&&$<=112.5?"#F44336":$>=157.5&&$<=202.5?"#9C27B0":$>=337.5||$<=22.5?"#FF9800":$>292.5&&$<337.5?"#00BCD4":$>202.5&&$<247.5?"#CDDC39":$>22.5&&$<67.5?"#E91E63":"#FFC107"},[]),Pl=b.useCallback(le=>{const $=le%360;return $>=247.5&&$<=292.5?"Top Spin":$>=67.5&&$<=112.5?"Back Spin":$>=157.5&&$<=202.5?"Left Spin":$>=337.5||$<=22.5?"Right Spin":$>292.5&&$<337.5?"Top-Right Spin":$>202.5&&$<247.5?"Top-Left Spin":$>22.5&&$<67.5?"Bottom-Right Spin":"Bottom-Left Spin"},[]);return e.createElement("div",{className:_a.simplePoolGame},e.createElement("div",{className:_a.aimingInstructions},e.createElement("div",{className:_a.instructions},e.createElement("strong",null,"How To Aim:"),e.createElement("br",null),"Move mouse to aim • Click table to lock aim • Call Shot • Adjust power • Drag English ball • Click SHOOT",e.createElement("br",null),e.createElement("small",{style:{color:"#888",fontSize:"12px"}},"💡 ",e.createElement("strong",null,"Aim Line Colors:")," White = Aiming • Green = Locked & ready • Yellow = Fine-tuning • Green/Red = English spin • Colored = Object ball paths",e.createElement("br",null),"💡 ",e.createElement("strong",null,"Fine-tuning:")," Hold right-click for precise aiming, release to lock aim",e.createElement("br",null),"💡 ",e.createElement("strong",null,"English:")," Click and drag on the English ball to set spin direction and intensity"))),qx(t.gamePhase,oe)&&e.createElement("div",{style:{alignSelf:"center",margin:"8px 0 14px 0",padding:"6px 14px",background:"rgba(255, 215, 0, 0.95)",color:"#000",fontWeight:700,fontSize:"15px",borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.25)"}},"Push Out Available"),e.createElement("div",{className:_a.tableContainer},e.createElement("canvas",{ref:r,width:ya,height:Oa,onPointerDown:ot,onPointerUp:it,onPointerMove:mt,onPointerLeave:$t,onContextMenu:le=>le.preventDefault(),className:_a.tableCanvas})),e.createElement("div",{className:_a.controls},e.createElement("div",{className:_a.powerControl},e.createElement("label",null,"Power: ",Math.round(f*100),"%"),e.createElement("div",{style:{position:"relative",width:"100%",height:"8px",background:"#ffffff",borderRadius:"4px",border:"1px solid #e0e0e0",overflow:"hidden"}},e.createElement("div",{style:{position:"absolute",top:0,left:0,width:`${f*100}%`,height:"100%",background:"#2196F3",borderRadius:"3px"}}),e.createElement("div",{style:{position:"absolute",top:"-4px",left:`${f*100}%`,width:"16px",height:"16px",background:"#2196F3",borderRadius:"50%",border:"1px solid #1976D2",cursor:"pointer",transform:"translateX(-50%)"}}),e.createElement("input",{type:"range",min:"0.1",max:"1",step:"0.01",value:f,onChange:le=>h(parseFloat(le.target.value)),style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"transparent",outline:"none",cursor:"pointer",opacity:0}}))),e.createElement("div",{className:_a.englishControl},e.createElement("label",null,"English: Drag to set spin"),e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"5px"}},e.createElement("div",{onMouseDown:It,onMouseMove:qs,onMouseUp:ls,onMouseLeave:ls,style:{width:"60px",height:"60px",borderRadius:"50%",border:"2px solid #333",background:"linear-gradient(135deg, #fff 0%, #f0f0f0 100%)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",color:"#333",cursor:na?"grabbing":"grab",userSelect:"none"}},v>0?"+":"",Math.round(v*100),"%",v!==0&&e.createElement(e.Fragment,null,e.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) translate(${Math.cos(x*Math.PI/180)*20}px, ${Math.sin(x*Math.PI/180)*20}px)`,width:"8px",height:"8px",borderRadius:"50%",background:fn(x),border:"1px solid #fff"}}),e.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) rotate(${x}deg)`,width:"2px",height:"20px",background:fn(x),borderRadius:"1px"}}))),v!==0&&e.createElement("div",{style:{fontSize:"12px",color:fn(x),fontWeight:"bold"}},Pl(x)),v===0&&e.createElement("div",{style:{fontSize:"12px",color:"#666"}},"No Spin"),v!==0&&e.createElement("button",{onClick:()=>{S(0),E(0)},style:{fontSize:"10px",padding:"2px 6px",background:"#666",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",marginLeft:"5px"}},"Reset"))),e.createElement("div",{className:_a.shootButton},e.createElement("button",{className:_a.shootButton,onClick:Ce,disabled:t.isAnimating||!M},M?t.gamePhase==="break"||D&&X||ne?"SHOOT!":"CALL SHOT":"LOCK AIM FIRST")),e.createElement("div",{className:_a.gameInfo},e.createElement("span",null,"Player: ",t.currentPlayer),e.createElement("span",null,"Phase: ",t.gamePhase),e.createElement("span",null,"Status: ",t.isAnimating?"Animating":t.ballInHand||t.gamePhase==="break"?o?"Drag Cue Ball to Position":t.gamePhase==="break"?"Click Cue Ball to Move (Kitchen Only)":"Click Cue Ball to Move (Anywhere)":M?"Aim Locked - Ready to Shoot":B?"Pocket assistance active - Click to lock!":"Move Mouse to Aim"),Ae&&e.createElement("span",{style:{color:"#ff6b6b",fontWeight:"bold"}},"FOUL: ",Ae==="scratch"?"Scratch":Ae==="wrong_ball_first"?"Wrong Ball First":Ae==="no_rail_contact"?"No Rail Contact":Ae),e.createElement("span",null,"Consecutive Fouls P1: ",ve[1]," | P2: ",ve[2])),e.createElement("div",{className:_a.buttonRow},e.createElement("button",{className:_a.resetAimButton,onClick:()=>{setIsDragging(!1),C(!1),h(.5)},disabled:t.isAnimating},"Reset Aim"),e.createElement("button",{className:_a.resetButton,onClick:()=>{n(le=>({...le,balls:er(),cueBall:{x:100,y:150,originalX:100,originalY:150,vx:0,vy:0,visible:!0,isMoving:!1,rotation:0,rotationSpeed:0},isAnimating:!1,gamePhase:"break",ballInHand:!1,scratchOccurred:!1,currentPlayer:1})),C(!0),i(!1),z(null),O(!1),S(0),E(0),he(!1),nt(!1),q(!1),lt(null),zt(!1),re(null),console.log("Resetting foul counters via reset button"),J({1:0,2:0}),Ge(null),Oe(!1),da(!1),wa(null),He(0),Qt([]),Tt(!1),window.tipManager&&window.tipManager.resetTips&&window.tipManager.resetTips()}},"Reset Game"),e.createElement("button",{className:_a.resetButton,onClick:()=>{n(le=>({...le,ballInHand:!0,currentPlayer:le.currentPlayer===1?2:1}))},style:{marginLeft:"10px",backgroundColor:"#ff6b6b"}},"Test Ball-in-Hand"))),Ve&&e.createElement("div",{className:_a.pushOutModal},e.createElement("div",{className:_a.pushOutContent},e.createElement("h3",null,"Push Out Result"),e.createElement("p",null,"Player ",t.currentPlayer===1?2:1,", do you want to accept this push out result?"),e.createElement("div",{className:_a.pushOutButtons},e.createElement("button",{onClick:()=>{zt(!1),n(le=>({...le,currentPlayer:le.currentPlayer===1?2:1}))},className:_a.acceptButton},"Accept"),e.createElement("button",{onClick:()=>{zt(!1)},className:_a.declineButton},"Decline")))),on&&e.createElement("div",{className:_a.pushOutModal},e.createElement("div",{className:_a.pushOutContent},e.createElement("h3",null,"Illegally Pocketed Balls"),e.createElement("p",null,"Player ",t.currentPlayer===1?2:1,", balls were illegally pocketed:"),e.createElement("ul",null,ht.map(le=>e.createElement("li",{key:le.id},"Ball ",le.id," ",le.id===10?"(will be spotted)":"(remains pocketed)"))),e.createElement("p",null,"Do you want to:"),e.createElement("div",{className:_a.pushOutButtons},e.createElement("button",{onClick:()=>{Tt(!1),n($=>({...$,currentPlayer:$.currentPlayer===1?2:1})),ht.find($=>$.id===10)&&n($=>({...$,balls:$.balls.map(Ee=>Ee.id===10?{...Ee,pocketed:!1,visible:!0,x:Zx,y:Vx}:Ee)})),Qt([])},className:_a.acceptButton},"Accept Table"),e.createElement("button",{onClick:()=>{Tt(!1),Qt([])},className:_a.declineButton},"Require Re-Shot")))))},_U="_tutorialRules_use5n_1",kU="_header_use5n_14",NU="_progressContainer_use5n_25",IU="_progressBar_use5n_31",AU="_progressFill_use5n_39",DU="_progressText_use5n_46",MU="_content_use5n_52",RU="_stepContent_use5n_56",TU="_highlightBox_use5n_73",PU="_highlightIcon_use5n_86",LU="_tipSection_use5n_90",BU="_navigation_use5n_110",zU="_navButton_use5n_119",OU="_disabled_use5n_135",FU="_centerButtons_use5n_145",UU="_skipButton_use5n_153",WU="_nextButton_use5n_171",jU="_startButton_use5n_171",HU="_quickRules_use5n_193",$U="_ruleGrid_use5n_205",YU="_ruleItem_use5n_211",GU="_ruleNumber_use5n_231",ha={tutorialRules:_U,header:kU,progressContainer:NU,progressBar:IU,progressFill:AU,progressText:DU,content:MU,stepContent:RU,highlightBox:TU,highlightIcon:PU,tipSection:LU,navigation:BU,navButton:zU,disabled:OU,centerButtons:FU,skipButton:UU,nextButton:WU,startButton:jU,quickRules:HU,ruleGrid:$U,ruleItem:YU,ruleNumber:GU},qU=({step:a,currentStep:r,totalSteps:t,onNext:n,onBack:o,onSkip:i})=>{const c=(r+1)/t*100,u=["Remember: Always hit the lowest numbered ball first!","Call your shots clearly - specify ball and pocket.","The 10-ball is the money ball - pocket it legally to win!","Use the push out strategically to improve your position.","Three consecutive fouls result in loss of game.","Practice your break shot - it sets up the entire game.","Defensive play is just as important as offensive play.","Watch for safety opportunities when you can't make a shot."];return e.createElement("div",{className:ha.tutorialRules},e.createElement("div",{className:ha.header},e.createElement("h3",null,"10-Ball Rules Tutorial"),e.createElement("div",{className:ha.progressContainer},e.createElement("div",{className:ha.progressBar},e.createElement("div",{className:ha.progressFill,style:{width:`${c}%`}})),e.createElement("span",{className:ha.progressText},"Step ",r+1," of ",t))),e.createElement("div",{className:ha.content},e.createElement("div",{className:ha.stepContent},e.createElement("h4",null,a.title),e.createElement("p",null,a.content),a.highlight&&e.createElement("div",{className:ha.highlightBox},e.createElement(lz,{className:ha.highlightIcon}),e.createElement("span",null,"This concept will be highlighted on the table"))),e.createElement("div",{className:ha.tipSection},e.createElement("h5",null,"💡 Pro Tip"),e.createElement("p",null,u[r%u.length]))),e.createElement("div",{className:ha.navigation},e.createElement("button",{className:`${ha.navButton} ${r===0?ha.disabled:""}`,onClick:o,disabled:r===0},e.createElement(X7,null),"Previous"),e.createElement("div",{className:ha.centerButtons},e.createElement("button",{className:ha.skipButton,onClick:i},"Skip Tutorial"),r===t-1?e.createElement("button",{className:ha.startButton,onClick:n},e.createElement(dz,null),"Start Playing"):e.createElement("button",{className:ha.nextButton,onClick:n},"Next",e.createElement(Rw,null)))),e.createElement("div",{className:ha.quickRules},e.createElement("h5",null,"Quick Reference"),e.createElement("div",{className:ha.ruleGrid},e.createElement("div",{className:ha.ruleItem},e.createElement("span",{className:ha.ruleNumber},"1"),e.createElement("span",null,"Hit lowest ball first")),e.createElement("div",{className:ha.ruleItem},e.createElement("span",{className:ha.ruleNumber},"2"),e.createElement("span",null,"Call your shots")),e.createElement("div",{className:ha.ruleItem},e.createElement("span",{className:ha.ruleNumber},"3"),e.createElement("span",null,"10-ball wins the game")),e.createElement("div",{className:ha.ruleItem},e.createElement("span",{className:ha.ruleNumber},"4"),e.createElement("span",null,"Push out after break")))))},ZU="_gameModeSelector_s58nb_29",VU="_header_s58nb_67",QU="_backToDashboardButton_s58nb_113",JU="_modesGrid_s58nb_277",XU="_modeCard_s58nb_291",KU="_recommended_s58nb_333",eW="_recommendedBadge_s58nb_353",tW="_modeIcon_s58nb_379",aW="_modeContent_s58nb_403",nW="_modeArrow_s58nb_441",rW="_whatYoullLearn_s58nb_539",Xr={gameModeSelector:ZU,header:VU,backToDashboardButton:QU,modesGrid:JU,modeCard:XU,recommended:KU,recommendedBadge:eW,modeIcon:tW,modeContent:aW,modeArrow:nW,whatYoullLearn:rW},Kx=({onModeSelect:a,fromLogin:r=!1})=>{const t=[{id:"tutorial",title:"Interactive Tutorial",description:"Learn the official CSI 10-Ball rules step by step with interactive examples and tips.",icon:rz,color:"#4CAF50",recommended:!0}];return e.createElement("div",{className:Xr.gameModeSelector,style:{maxWidth:"280px",width:"280px",margin:"0 auto",overflowX:"hidden",boxSizing:"border-box"}},e.createElement("div",{className:Xr.header},!r&&e.createElement("button",{className:Xr.backToDashboardButton,onClick:()=>window.location.href="/dashboard"},"← Back to Dashboard"),e.createElement("h2",null,"10-Ball Tutorial"),e.createElement("p",null,"Learn and master the official CSI 10-Ball rules")),e.createElement("div",{className:Xr.modesGrid},t.map(n=>{const o=n.icon;return e.createElement("div",{key:n.id,className:`${Xr.modeCard} ${n.recommended?Xr.recommended:""}`,onClick:()=>a(n.id)},n.recommended&&e.createElement("div",{className:Xr.recommendedBadge},"Recommended"),e.createElement("div",{className:Xr.modeIcon,style:{backgroundColor:n.color}},e.createElement(o,null)),e.createElement("div",{className:Xr.modeContent},e.createElement("h3",null,n.title),e.createElement("p",null,n.description)),e.createElement("div",{className:Xr.modeArrow},"→"))})),e.createElement("div",{className:Xr.whatYoullLearn},e.createElement("h3",null,"What You'll Learn"),e.createElement("ul",null,e.createElement("li",null,"Official CSI 10-Ball Rules"),e.createElement("li",null,"Break/Push Out Requirements"),e.createElement("li",null,"Call Shot/Ball in Hand Requirements"),e.createElement("li",null,"Illegally Pocketed Balls/Opponent's Option"),e.createElement("li",null,"Foul Detection and Penalties"),e.createElement("li",null,"Advanced Shot Planning"))))},oW="_tipContainer_1z0xf_1",sW="_show_1z0xf_27",lW="_dragging_1z0xf_35",iW="_tipContent_1z0xf_47",cW="_tipHeader_1z0xf_71",dW="_tipIcon_1z0xf_89",uW="_tipTitle_1z0xf_99",mW="_closeButton_1z0xf_113",pW="_tipText_1z0xf_155",Go={tipContainer:oW,show:sW,dragging:lW,tipContent:iW,tipHeader:cW,tipIcon:dW,tipTitle:uW,closeButton:mW,tipText:pW},fW=({tip:a,isVisible:r,onClose:t})=>{const[n,o]=b.useState(!1),[i,c]=b.useState({x:0,y:0}),[u,m]=b.useState(!1),[g,f]=b.useState({x:0,y:0}),h=b.useRef(null);b.useEffect(()=>{if(r){o(!0);const E=setTimeout(()=>{t()},8e3);return()=>clearTimeout(E)}},[r,t]);const v=E=>{if(E.target.closest("button"))return;m(!0);const N=h.current.getBoundingClientRect();f({x:E.clientX-N.left,y:E.clientY-N.top})},S=E=>{if(!u)return;const N=E.clientX-g.x,C=E.clientY-g.y,I=window.innerWidth-250,A=window.innerHeight-100;c({x:Math.max(0,Math.min(N,I)),y:Math.max(0,Math.min(C,A))})},x=()=>{m(!1)};return b.useEffect(()=>{if(u)return document.addEventListener("mousemove",S),document.addEventListener("mouseup",x),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",x)}},[u,g]),r?e.createElement("div",{ref:h,className:`${Go.tipContainer} ${n?Go.show:""} ${u?Go.dragging:""}`,style:{maxWidth:"250px",width:"250px",minWidth:"250px",top:i.y||20,left:i.x||"50%",transform:i.x?"none":"translateX(-50%)",right:"auto",cursor:u?"grabbing":"grab"},onMouseDown:v},e.createElement("div",{className:Go.tipContent},e.createElement("div",{className:Go.tipHeader},e.createElement("span",{className:Go.tipIcon},"💡"),e.createElement("span",{className:Go.tipTitle},"Pro Tip"),e.createElement("button",{className:Go.closeButton,onClick:t},"×")),e.createElement("div",{className:Go.tipText},a))):null},gW=b.forwardRef(({gameState:a,onTipShown:r},t)=>{const[n,o]=b.useState(null),[i,c]=b.useState(!1),[u,m]=b.useState(new Set),g=x=>{v(x)},f=()=>{m(new Set)};b.useImperativeHandle(t,()=>({triggerTip:g,resetTips:f}));const h={breakShot:{title:"Break Shot",tip:"Always hit the lowest numbered ball first! A good break can set up your entire game!"},callShot:{title:"Call Shot",tip:"Be specific about which pocket you're aiming for! If you don't call it, it doesn't count!"},pushOut:{title:"Push Out Opportunity",tip:"Use push out to improve your position when the table is difficult!"},foul:{title:"Foul Committed",tip:"Three consecutive fouls by the same player results in loss of game!"},tenBall:{title:"10-Ball Target",tip:"The 10-ball is the only ball that matters for winning!"},defensive:{title:"Defensive Play",tip:"Sometimes the best shot is the one that leaves your opponent nothing!"},practice:{title:"Keep Learning",tip:"Practice makes perfect - keep playing and learning!"},scratch:{title:"Scratch Foul",tip:"The cue ball went in a pocket! Your opponent gets ball-in-hand."},wrongBall:{title:"Wrong Ball First",tip:"You must hit the lowest numbered ball first! This is a foul."},noRail:{title:"No Rail Contact",tip:"After contact, a ball must hit a rail or be pocketed. This is a foul."},ballInHand:{title:"Ball-in-Hand",tip:"You can place the cue ball anywhere on the table after a foul."},kitchen:{title:"Kitchen Rule",tip:"During break, the cue ball must start in the kitchen (behind the head string)."},threeFoul:{title:"Three Foul Rule",tip:"Three consecutive fouls by the same player results in loss of game!"},pushOutStrategy:{title:"Push Out Strategy",tip:"After a legal break, you can push out to improve position. Opponent then chooses to shoot or pass."},callPocket:{title:"Call Pocket",tip:"You must call both the ball and the pocket for every shot after the break."},lowestBall:{title:"Lowest Ball First",tip:"Always hit the lowest numbered ball on the table first!"},safety:{title:"Safety Shot",tip:"A safety shot is when you don't expect to pocket a ball but leave your opponent in a difficult position."},jumpShot:{title:"Jump Shot",tip:"Jump shots are legal in 10-ball, but be careful not to jump the cue ball off the table!"},gameWinning:{title:"Game Winner",tip:"Legally pocket the 10-ball to win! Remember to call it and the pocket."}},v=x=>{if(u.has(x))return;const E=h[x];E&&(o(E),c(!0),m(N=>new Set([...N,x])),r==null||r(x))},S=()=>{c(!1)};return b.useEffect(()=>{a&&(a.gamePhase==="break"&&!u.has("breakShot")&&(v("breakShot"),window.dispatchEvent(new CustomEvent("kitchenRule"))),a.gamePhase==="play"&&!u.has("callShot")&&v("callShot"))},[a,u]),b.useEffect(()=>{const x=V=>{u.has("foul")||v("foul")},E=V=>{u.has("scratch")||v("scratch")},N=V=>{u.has("wrongBall")||v("wrongBall")},C=V=>{u.has("noRail")||v("noRail")},I=V=>{u.has("ballInHand")||v("ballInHand")},A=V=>{u.has("kitchen")||v("kitchen")},_=V=>{u.has("threeFoul")||v("threeFoul")},k=V=>{u.has("pushOut")||v("pushOut")},B=V=>{u.has("pushOutStrategy")||v("pushOutStrategy")},z=V=>{u.has("callPocket")||v("callPocket")},M=V=>{u.has("lowestBall")||v("lowestBall")},O=V=>{u.has("safety")||v("safety")},U=V=>{u.has("jumpShot")||v("jumpShot")},Z=V=>{u.has("tenBall")||v("tenBall")},H=V=>{u.has("gameWinning")||v("gameWinning")};return window.addEventListener("gameFoul",x),window.addEventListener("scratchFoul",E),window.addEventListener("wrongBallFoul",N),window.addEventListener("noRailFoul",C),window.addEventListener("ballInHand",I),window.addEventListener("kitchenRule",A),window.addEventListener("threeFoul",_),window.addEventListener("pushOutAvailable",k),window.addEventListener("pushOutStrategy",B),window.addEventListener("callPocket",z),window.addEventListener("lowestBall",M),window.addEventListener("safetyOpportunity",O),window.addEventListener("jumpShot",U),window.addEventListener("tenBallTarget",Z),window.addEventListener("gameWinning",H),()=>{window.removeEventListener("gameFoul",x),window.removeEventListener("scratchFoul",E),window.removeEventListener("wrongBallFoul",N),window.removeEventListener("noRailFoul",C),window.removeEventListener("ballInHand",I),window.removeEventListener("kitchenRule",A),window.removeEventListener("threeFoul",_),window.removeEventListener("pushOutAvailable",k),window.removeEventListener("pushOutStrategy",B),window.removeEventListener("callPocket",z),window.removeEventListener("lowestBall",M),window.removeEventListener("safetyOpportunity",O),window.removeEventListener("jumpShot",U),window.removeEventListener("tenBallTarget",Z),window.removeEventListener("gameWinning",H)}},[u]),e.createElement(fW,{tip:n==null?void 0:n.tip,isVisible:i,onClose:S})}),hW="_container_1jm20_1",yW="_backButton_1jm20_53",bW="_tutorialContainer_1jm20_79",Os={container:hW,backButton:yW,tutorialContainer:bW},vW=({fromLogin:a=!1,onBackToLogin:r})=>{const[t,n]=b.useState("menu"),[o,i]=b.useState(0),[c,u]=b.useState(!0),[m,g]=b.useState({player1Score:0,player2Score:0,currentPlayer:1,gamePhase:"break",rules:{callPocket:!0,pushOut:!0,threeFoulRule:!0,jumpShots:!0}}),f=[{title:"The Break Shot",content:"Start the game with a legal break shot. You must break from the kitchen hitting the 1-ball first and drive at least 4 balls to the rails or pocket a ball.",proTip:"A good break can set up your entire game!"},{title:"Welcome to 10-Ball!",content:"10-Ball is a call-shot game where you must hit the lowest numbered ball first and call your shots. The 10-ball is the game-winning ball!",proTip:"Always hit the lowest numbered ball first!"},{title:"Call Shot Rules",content:"After the break, you must call both the ball and the pocket for every shot. If you don't call it, it doesn't count!",proTip:"CSI rules state that you do not have to call obvious shots. Banks, Kicks, and Caroms should always be called. Be specific about which pocket you're aiming for! Make sure your opponent acknowledges your called shot."},{title:"Push Out Option",content:"After a legal break, the incoming player may choose to 'push out' - shoot the cue ball anywhere without hitting any ball. The opponent then chooses to shoot or pass.",proTip:"Use push out to improve your position when the table is difficult!"},{title:"Fouls and Penalties",content:"Common fouls include: scratching (cue ball in pocket), hitting wrong ball first, not hitting any rail after contact, and jumping the cue ball off the table.",proTip:"Three consecutive fouls by the same player results in loss of game!"},{title:"Winning the Game",content:"Legally pocket the 10-ball to win! Yes, you can win with an early ten ball...Remember, you must call the 10-ball and the pocket, and hit the lowest numbered ball first.",proTip:"The 10-ball is the only ball that matters for winning!"},{title:"Strategy Tips",content:"Plan your shots ahead, use defensive play when needed, and always consider your opponent's options after your shot.",proTip:"Sometimes the best shot is the one that leaves your opponent nothing!"},{title:"Ready to Play!",content:"You now know the basics of 10-Ball! Practice these rules and strategies to improve your game.",proTip:"Practice makes perfect - keep playing and learning!"}],h=N=>{n(N),N==="tutorial"&&(i(0),u(!0))},v=()=>{o<f.length-1?i(o+1):n("game")},S=()=>{o>0&&i(o-1)},x=N=>{g(C=>({...C,gamePhase:"end",player1Score:N===1?C.player1Score+1:C.player1Score,player2Score:N===2?C.player2Score+1:C.player2Score}))},E=()=>{switch(t){case"menu":return e.createElement(Kx,{onModeSelect:h,fromLogin:a});case"tutorial":return e.createElement("div",{className:Os.tutorialContainer},e.createElement(qU,{step:f[o],currentStep:o,totalSteps:f.length,onNext:v,onBack:S,onSkip:()=>n("game")}),e.createElement(M0,{onGameEnd:x}));case"game":return e.createElement(M0,{onGameEnd:x});default:return e.createElement(Kx,{onModeSelect:h})}};return e.createElement("div",{className:Os.container},E(),(t==="game"||t==="tutorial")&&e.createElement(gW,{gameState:m,onTipShown:N=>console.log(`Tip shown: ${N}`),ref:N=>{N&&(window.tipManager=N)}}),t!=="menu"&&!a&&e.createElement("div",{className:Os.navigation},e.createElement("button",{className:Os.backButton,onClick:()=>n("menu")},"← Back to Menu")),t!=="menu"&&e.createElement("div",{className:Os.gameInfo},e.createElement("div",{className:Os.scoreBoard},e.createElement("div",{className:Os.playerScore},e.createElement("span",null,"Player 1: ",m.player1Score)),e.createElement("div",{className:Os.playerScore},e.createElement("span",null,"Player 2: ",m.player2Score)))))},xW=""+new URL("bcapl_logo-BvvUeHn5.png",import.meta.url).href,EW=""+new URL("csi_logo-ChVaLM6t.png",import.meta.url).href,wW=""+new URL("usapl_logo-jJ_LE_Bw.png",import.meta.url).href,SW=""+new URL("fargorate-logo-BVCRpqvV.png",import.meta.url).href,Jw=""+new URL("LBC logo with address-Dg7KP2ok.png",import.meta.url).href;function CW(){const[a,r]=b.useState(window.innerWidth),[t,n]=b.useState(window.innerHeight),[o]=b.useState(()=>[0,1,2,3,4,5,6,7,8].map(_=>{const k=.1+Math.random()*.15,B=Math.random()*Math.PI*2;return{x:Math.random()*a,y:Math.random()*t,vx:Math.cos(B)*k*1.2,vy:Math.sin(B)*k*1.2,baseSize:.8+Math.random()*.4,sizePhase:Math.random()*Math.PI*2,isSizeChanger:!1,speedCategory:"base",lastChange:Date.now(),changeInterval:8e3+Math.random()*12e3,rotationDirection:_>=5?Math.random()>.5?1:-1:0}}));b.useEffect(()=>{const _=()=>{r(window.innerWidth),n(window.innerHeight)};return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]);function i(_,k,B){const[z,M]=b.useState(_);b.useRef(null);const O=b.useRef(_);return b.useEffect(()=>{let U,Z=Date.now();const H=()=>{const V=Date.now(),F=V-Z,R=O.current;if(V-R.lastChange>R.changeInterval){const ne=B.includes(k)?"fast":"base",q={...R,speedCategory:ne,lastChange:V,changeInterval:3e3+Math.random()*6e3};O.current=q,M(q)}if(Math.random()<.003){const P=Math.atan2(R.vy,R.vx),ne=(Math.random()-.5)*Math.PI*.3,q=P+ne,oe=.3+Math.random()*1,he=R.speedCategory==="fast"?.6:.2;R.vx=Math.cos(q)*oe*he,R.vy=Math.sin(q)*oe*he}let D=R.x+R.vx*(F/16),j=R.y+R.vy*(F/16);(D<0||D>a||j<0||j>t)&&(R.edgeShrink||(R.edgeShrink=!0,R.edgeShrinkTime=V));const X=V/1e3;let W=R.baseSize;const T=Math.sin(X*.07+R.sizePhase)*.1,G=Math.sin(X*.35+R.sizePhase*2)*.05;if(W=R.baseSize+T+G,W<R.baseSize*.3&&!R.sizeShrink&&(R.sizeShrink=!0,R.sizeShrinkTime=V),R.edgeShrink){const P=V-R.edgeShrinkTime;if(P<2e3){const q=1-P/2e3;R.edgeOpacity=q,W=R.baseSize+T+G}else if(P<4e3)R.edgeOpacity=.01,W=.01;else if(P<4100)D=Math.random()*a,j=Math.random()*t,R.x=D,R.y=j,W=.01,R.edgeOpacity=.01;else if(P<12500){const q=.01+.99*((P-4100)/8400);W*=q,R.edgeOpacity=q}else R.edgeShrink=!1,R.edgeOpacity=1}else R.edgeOpacity=1;if(R.sizeShrink){const P=V-R.sizeShrinkTime;if(P<2e3){const q=1-P/2e3;R.sizeOpacity=q}else if(P<4e3)R.sizeOpacity=.01,W=.01;else if(P<4100)D=Math.random()*a,j=Math.random()*t,R.x=D,R.y=j,W=.01,R.sizeOpacity=.01;else if(P<12500){const q=.01+.99*((P-4100)/8400);W*=q,R.sizeOpacity=q}else R.sizeShrink=!1,R.sizeOpacity=1}else R.sizeOpacity=1;let te=R.rotation||0;if(k>=5){const ne=(Math.sqrt(R.vx*R.vx+R.vy*R.vy)*2+.3)*(F/16)*(R.rotationDirection||1);te+=ne}O.current={...R,x:D,y:j,size:W,rotation:te},V-Z>100&&(M(O.current),Z=V),U=requestAnimationFrame(H)};return H(),()=>cancelAnimationFrame(U)},[a,t,B]),z}const[c]=b.useState(()=>{const _=[];for(;_.length<3;){const B=Math.floor(Math.random()*9);_.includes(B)||_.push(B)}const k=[];for(;k.length<3;){const B=Math.floor(Math.random()*9);!k.includes(B)&&!_.includes(B)&&k.push(B)}return o.forEach((B,z)=>{_.includes(z)?(B.speedCategory="fast",B.vx=(Math.random()-.5)*2,B.vy=(Math.random()-.5)*2):(B.speedCategory="base",B.vx=(Math.random()-.5)*.5,B.vy=(Math.random()-.5)*.5),k.includes(z)&&(B.isSizeChanger=!0)}),!0}),[u,m]=b.useState(()=>{const _=[];for(;_.length<3;){const k=Math.floor(Math.random()*9);_.includes(k)||_.push(k)}return _}),g=()=>{const _=[];for(;_.length<3;){const k=Math.floor(Math.random()*9);_.includes(k)||_.push(k)}m(_)};b.useEffect(()=>{const _=setInterval(()=>{g(),console.log("Speed reassignment triggered")},4e3+Math.random()*4e3);return()=>clearInterval(_)},[]);const f=i(o[0],0,u),h=i(o[1],1,u),v=i(o[2],2,u),S=i(o[3],3,u),x=i(o[4],4,u),E=i(o[5],5,u),N=i(o[6],6,u),C=i(o[7],7,u),I=i(o[8],8,u),A=(_,k,B,z,M=!1)=>{const O=M&&_.rotation||0;return{position:"absolute",left:_.x,top:_.y,transform:`translate(-50%, -50%) scale(${_.size}) rotate(${O}deg)`,width:k,height:"auto",opacity:B*(_.edgeOpacity||1)*(_.sizeOpacity||1),zIndex:1,pointerEvents:"none",filter:z,transition:"none"}};return e.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:1,pointerEvents:"none",overflow:"hidden"}},e.createElement("img",{src:ay,alt:"League Logo Background",style:A(f,150,.75,"drop-shadow(0 0 24px rgba(245, 30, 30, 0.2))")}),e.createElement("img",{src:xW,alt:"BCAPL Logo Background",style:A(h,120,.75,"drop-shadow(0 0 18px rgba(245, 30, 30, 0.2))")}),e.createElement("img",{src:EW,alt:"CSI Logo Background",style:A(v,120,.75,"drop-shadow(0 0 12px rgba(245, 30, 30, 0.2))")}),e.createElement("img",{src:wW,alt:"USAPL Logo Background",style:A(S,140,.8,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.2))")}),e.createElement("img",{src:SW,alt:"Fargorate Logo Background",style:A(x,140,.8,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.2))")}),e.createElement("img",{src:wd,alt:"8 Ball Background",style:A(E,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))",!0)}),e.createElement("img",{src:Yp,alt:"9 Ball Background",style:A(N,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))",!0)}),e.createElement("img",{src:Yi,alt:"10 Ball Background",style:A(C,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))",!0)}),e.createElement("img",{src:Jw,alt:"Legends Logo Background",style:A(I,160,.75,"drop-shadow(0 0 20px rgba(245, 30, 30, 0.2))")}))}function _W(){const{isMobile:a,isTablet:r,screenSize:t,touchCapable:n,orientation:o,getBreakpoint:i}=Cy(),[c,u]=e.useState("overview");return e.createElement("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a1a 0%, #2d1b69 100%)",color:"#fff",padding:"16px",paddingBottom:"100px"}},e.createElement(Rr,{title:"Mobile Detection Test"},e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"8px"}},e.createElement("div",null,"📱 Is Mobile: ",e.createElement("strong",null,a?"YES":"NO")),e.createElement("div",null,"📱 Is Tablet: ",e.createElement("strong",null,r?"YES":"NO")),e.createElement("div",null,"📱 Touch Capable: ",e.createElement("strong",null,n?"YES":"NO")),e.createElement("div",null,"📱 Orientation: ",e.createElement("strong",null,o)),e.createElement("div",null,"📱 Screen Size: ",e.createElement("strong",null,t.width," x ",t.height)),e.createElement("div",null,"📱 Breakpoint: ",e.createElement("strong",null,i())))),e.createElement(Rr,{title:"Touch Interaction Test"},e.createElement(yd,{title:"Swipe Test Card",subtitle:"Try swiping left or right",onTap:()=>alert("Card tapped!"),onSwipeLeft:()=>alert("Swiped left!"),onSwipeRight:()=>alert("Swiped right!")},e.createElement("div",{style:{padding:"8px 0"}},e.createElement("p",null,"This card supports swipe gestures. Try swiping left or right to see the action indicators."))),e.createElement(yd,{title:"Tap Test Card",subtitle:"Tap to test touch response",onTap:()=>alert("Touch response working!")},e.createElement("div",{style:{padding:"8px 0"}},e.createElement("p",null,"Tap this card to test touch responsiveness and visual feedback.")))),e.createElement(Rr,{title:"Stats Grid Test"},e.createElement(Ow,{columns:2},e.createElement(Ei,{title:"Test Stat 1",value:"42",subtitle:"Sample data",color:"#e53e3e",onClick:()=>alert("Stat 1 clicked!")}),e.createElement(Ei,{title:"Test Stat 2",value:"17",subtitle:"More data",color:"#10b981",onClick:()=>alert("Stat 2 clicked!")}))),e.createElement(zw,{activeTab:c,onTabChange:u,onQuickAction:()=>alert("Quick action!"),pendingCount:3,sentCount:5,matchesCount:12}))}const Xw=({isAuthenticated:a,userFirstName:r,userLastName:t,userEmail:n,userPin:o,userType:i,handleLogout:c,onOpenProfile:u})=>{const m=Qn(),[g,f]=b.useState(null),[h,v]=b.useState("league"),[S,x]=b.useState(!0);b.useEffect(()=>{n&&(async()=>{try{console.log("🔍 Hub: Starting player type detection for:",n),x(!0);const I=await fetch(`${pe}/api/unified-auth/profile-data?email=${encodeURIComponent(n)}&appType=league`);if(console.log("🔍 Hub: API response status:",I.status),I.ok){const A=await I.json();if(console.log("🔍 Hub: API response data:",A),A.success&&A.profile){const _=A.profile.divisions&&A.profile.divisions.length>0,k=A.profile.ladderInfo&&A.profile.ladderInfo.ladderName;console.log("🔍 Hub: Profile analysis:",{hasLeagueProfile:_,hasLadderProfile:k,divisions:A.profile.divisions,ladderInfo:A.profile.ladderInfo}),_&&k?(console.log("✅ Hub: Setting user type to BOTH"),v("both")):_?(console.log("✅ Hub: Setting user type to LEAGUE"),v("league")):k?(console.log("✅ Hub: Setting user type to LADDER"),v("ladder")):(console.log("⚠️ Hub: No profiles found, defaulting to LEAGUE"),v("league"))}else console.log("⚠️ Hub: API response not successful or no profile data")}else console.log("❌ Hub: API response not ok:",I.status)}catch(I){console.error("❌ Hub: Error detecting player type:",I),v("league")}finally{x(!1),console.log("🔍 Hub: Player type detection complete. Final type:",h)}})()},[n]);const E=[{id:"league",name:"League App",description:"Manage league matches, schedules, and standings",icon:"🏆",color:"#4CAF50",status:"active",route:"/league"},{id:"ladder",name:"Ladder App",description:"Challenge-based ladder system with rankings",icon:"📈",color:"#2196F3",status:"active",route:"/ladder"}],N=async C=>{C.status==="active"?(f(C),m(C.route)):alert(`${C.name} is coming soon!`)};return e.createElement("div",{className:"app-hub-container"},e.createElement("div",{className:"pool-simulation-background"},e.createElement(ny,{aspectWidth:800,aspectHeight:400},e.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},e.createElement(Sd,null)))),e.createElement("div",{className:"app-hub-content"},e.createElement("div",{className:"app-hub-header"},a&&e.createElement("div",{className:"user-info"},e.createElement("div",{style:{fontSize:"1.8rem",fontWeight:"600",color:"white",marginBottom:"0.3rem",textAlign:"center",textShadow:"0 2px 4px rgba(0,0,0,0.3)"}},"Hello, ",r),e.createElement("div",{style:{color:"rgba(255,255,255,0.95)",fontSize:"1.1rem",fontWeight:"500",textAlign:"center",letterSpacing:"0.2px",textShadow:"0 1px 2px rgba(0,0,0,0.2)",marginBottom:"0.8rem"}},S?"Detecting your player type...":`Thank you for being a ${h==="both"?"League & Ladder":h==="league"?"League":h==="ladder"?"Ladder":"Unknown"} player`),S?e.createElement("span",{style:{background:"#666",padding:"6px 18px",borderRadius:"16px",fontSize:"0.9rem",fontWeight:"600",display:"inline-block",boxShadow:"0 3px 12px rgba(102, 102, 102, 0.4), inset 0 1px 2px rgba(255, 255, 255, 0.4), inset 0 -1px 1px rgba(0, 0, 0, 0.2)",border:"1px solid rgba(255,255,255,0.35)",textShadow:"0 1px 2px rgba(0,0,0,0.2)",position:"relative",backdropFilter:"blur(4px)",letterSpacing:"0.3px"}},"Detecting..."):e.createElement("span",{style:{background:h==="both"||h==="league"?"linear-gradient(135deg, #4CAF50 20%, #2E7D32 80%)":h==="ladder"?"linear-gradient(135deg, #2196F3 20%, #1565C0 80%)":"#666",padding:"6px 18px",borderRadius:"16px",fontSize:"0.9rem",fontWeight:"600",display:"inline-block",boxShadow:`
                    0 3px 12px ${h.includes("league")?"rgba(76, 175, 80, 0.4)":"rgba(33, 150, 243, 0.4)"},
                    inset 0 1px 2px rgba(255, 255, 255, 0.4),
                    inset 0 -1px 1px rgba(0, 0, 0, 0.2)
                  `,border:"1px solid rgba(255,255,255,0.35)",textShadow:"0 1px 2px rgba(0,0,0,0.2)",position:"relative",backdropFilter:"blur(4px)",letterSpacing:"0.3px"}},h==="both"?"League & Ladder Player":h==="league"?"League Player":h==="ladder"?"Ladder Player":"Unknown")),e.createElement("div",{className:"hub-subtitle"},e.createElement("p",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"white",marginTop:"0.4rem"}},"Where would you like to go today?")),e.createElement("div",{className:"apps-section"},e.createElement("div",{className:"apps-grid active-apps"},E.map(C=>e.createElement("div",{key:C.id,className:`app-card ${C.status}`,onClick:()=>N(C),style:{"--app-color":C.color}},e.createElement("div",{className:"app-icon"},C.icon),e.createElement("div",{className:"app-info"},e.createElement("h3",null,C.name),e.createElement("p",null,C.description),e.createElement("div",{className:"app-status"},e.createElement("span",{className:"status-active"},"Available"))))))))))};function kW({onSuccess:a,onShowSignup:r}){const[t,n]=b.useState(""),[o,i]=b.useState(""),[c,u]=b.useState(!1),[m,g]=b.useState(!1),[f,h]=b.useState(null),v=window.innerWidth<=768,S=async()=>{if(!t||t.trim()===""){i("Please enter your email or PIN.");return}const E=t.trim();i(""),u(!0),h(null);try{const N=await FF.login(E);u(!1),N.success?(i(""),a(`${N.user.firstName} ${N.user.lastName}`.trim(),N.user.email,N.user.pin,N.userType,N.user,N.profileStatus)):i(N.message||"Login failed. Please try again or contact frbcapl@gmail.com for help.")}catch(N){u(!1),console.error("Login verification error:",N),N.name==="TypeError"&&N.message.includes("Failed to fetch")?i("Cannot connect to server. Please check your connection and try again."):i("An unexpected error occurred. Please try again.")}},x=E=>{E.key==="Enter"&&S()};return f?e.createElement("div",{style:{padding:"20px",color:"white"}},e.createElement("h3",null,"Error"),e.createElement("p",null,"Something went wrong. Please refresh the page and try again.")):e.createElement("div",{style:{position:"relative",width:"100%",height:v?"350px":"450px",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"}},e.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%",zIndex:1}},e.createElement(ny,{aspectWidth:v?350:800,aspectHeight:v?200:400},e.createElement(Sd,null))),e.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,width:v?"180px":"420px",maxWidth:v?"60%":"90%",pointerEvents:"auto",touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",transformOrigin:"center center",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"}},e.createElement("div",{style:{padding:v?"8px":"24px",background:"rgba(0, 0, 0, 0.85)",border:"2px solid #e53e3e",borderRadius:"12px",width:"100%",backdropFilter:"blur(10px)"}},e.createElement("h3",{style:{color:"white",textAlign:"center",marginBottom:v?"4px":"20px",fontSize:v?"0.7rem":"1.4rem",fontWeight:"bold",whiteSpace:"nowrap"}},"🔒 Front Range Pool League"),e.createElement("div",{style:{marginBottom:v?"4px":"20px",position:"relative"}},e.createElement("input",{type:m?"text":"password",value:t,onChange:E=>n(E.target.value),onKeyDown:x,placeholder:"Enter Email or PIN",autoFocus:!0,disabled:c,style:{width:"100%",padding:v?"6px 40px 6px 16px":"16px 40px 16px 16px",border:"2px solid #e53e3e",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:v?"16px":"1rem",boxSizing:"border-box",minHeight:v?"28px":"auto"}}),e.createElement("button",{type:"button",onClick:()=>g(!m),style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",fontSize:v?"14px":"16px",color:"#666",display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":m?"Hide password":"Show password"},m?"🙈":"👁️")),e.createElement("button",{onClick:S,disabled:c,type:"button",style:{width:"100%",background:"#e53e3e",color:"white",border:"none",padding:v?"6px":"16px",fontSize:v?"0.6rem":"1.1rem",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",marginBottom:v?"3px":"12px",minHeight:v?"28px":"auto"}},c?"Verifying...":"Login to Access Hub"),e.createElement("button",{onClick:r,type:"button",style:{width:"100%",background:"transparent",color:"#FF6B35",border:"2px solid #FF6B35",padding:v?"4px":"14px",fontSize:v?"0.5rem":"1rem",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",marginBottom:v?"3px":"16px",transition:"all 0.3s ease",minHeight:v?"24px":"auto"},onMouseEnter:E=>{E.target.style.background="#FF6B35",E.target.style.color="white"},onMouseLeave:E=>{E.target.style.background="transparent",E.target.style.color="#FF6B35"}},"🆕 First Time User? Apply for Access"),o&&e.createElement("p",{style:{color:"#ff6b6b",textAlign:"center",margin:"0 0 4px 0",fontSize:v?"0.4rem":"0.9rem",padding:"2px",borderRadius:"4px",background:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.3)"}},o),e.createElement("p",{style:{color:"#ccc",fontSize:v?"0.3rem":"0.8rem",textAlign:"center",margin:"0"}},"Access league matches, ladder challenges, and more"))))}const NW=({onClose:a,onSuccess:r})=>{const[t,n]=b.useState({firstName:"",lastName:"",email:"",phone:"",fargoRate:"",experience:"",currentLeague:"",currentRanking:"",interests:[],payNow:!1,paymentMethod:""}),[o,i]=b.useState(!1),[c,u]=b.useState(""),[m,g]=b.useState(""),[f,h]=b.useState(null),[v,S]=b.useState(!1),x=A=>{const{name:_,value:k,type:B,checked:z}=A.target;n(B==="checkbox"?M=>({...M,interests:z?[...M.interests,k]:M.interests.filter(O=>O!==k)}):M=>({...M,[_]:k}))},E=async()=>{try{const A=await fetch(`${pe}/api/payment-config`);if(A.ok){const _=await A.json();h(_)}}catch(A){console.error("Error loading payment config:",A)}};e.useEffect(()=>{E()},[]);const N=A=>{const _=A.target.value;n(k=>({...k,paymentMethod:_})),S(!!_)},C=A=>{var B,z,M,O,U,Z,H;if(!f||!f.config)return"Loading payment instructions...";const _=f.config.paymentMethods,k=f.config.contactInfo;switch(A){case"venmo":return(B=_.venmo)!=null&&B.enabled?`Send $5 to: ${_.venmo.username}
Note: "Ladder Membership - ${t.firstName} ${t.lastName}"`:"Venmo payments are currently unavailable";case"cashapp":return(z=_.cashapp)!=null&&z.enabled?`Send $5 to: ${_.cashapp.username}
Note: "Ladder Membership - ${t.firstName} ${t.lastName}"`:"CashApp payments are currently unavailable";case"credit_card":return(M=_.creditCard)!=null&&M.enabled?`Credit/Debit card payments available. Contact: ${(k==null?void 0:k.adminPhone)||"frbcapl@gmail.com"}`:"Credit card payments are currently unavailable";case"apple_pay":return(O=_.applePay)!=null&&O.enabled?`Apple Pay available. Contact: ${(k==null?void 0:k.adminPhone)||"frbcapl@gmail.com"}`:"Apple Pay is currently unavailable";case"google_pay":return(U=_.googlePay)!=null&&U.enabled?`Google Pay available. Contact: ${(k==null?void 0:k.adminPhone)||"frbcapl@gmail.com"}`:"Google Pay is currently unavailable";case"cash":return(Z=_.cash)!=null&&Z.enabled?`Cash payments accepted. Contact: ${(k==null?void 0:k.adminPhone)||"frbcapl@gmail.com"}`:"Cash payments are currently unavailable";case"check":return(H=_.check)!=null&&H.enabled?`Check payments accepted. Contact: ${(k==null?void 0:k.adminPhone)||"frbcapl@gmail.com"}`:"Check payments are currently unavailable";default:return"Please select a payment method"}},I=async A=>{A.preventDefault(),i(!0),u("");try{if(t.payNow&&t.paymentMethod){const B=await fetch(`${pe}/api/monetization/create-membership-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerName:`${t.firstName} ${t.lastName}`,playerEmail:t.email,paymentMethod:t.paymentMethod,amount:5})});if(!B.ok)throw new Error("Failed to create payment session. Please try again.");const z=await B.json();console.log("Payment session created:",z)}const _=await fetch(`${pe}/api/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),k=await _.json();if(!_.ok)throw new Error(k.message||"Failed to sign up. Please try again.");t.payNow&&t.paymentMethod?g("Successfully applied for access to the Front Range Pool Hub! Please complete your payment using the instructions above, then we will contact you soon."):g("Successfully applied for access to the Front Range Pool Hub! We will contact you soon."),setTimeout(()=>{r&&r(k),a()},3e3)}catch(_){console.error("Signup error:",_),u(_.message||"Network error. Please check your connection and try again.")}finally{i(!1)}};return e.createElement(Bt,{open:!0,onClose:a,title:"Join the Front Range Pool Hub",maxWidth:"600px"},e.createElement("div",{style:{padding:"1rem 0"}},e.createElement("p",{style:{color:"#ccc",textAlign:"center",marginBottom:"1.5rem",fontSize:"0.95rem"}},"Tell us about yourself and what you're interested in. We'll get back to you soon!"),c&&e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"6px",padding:"12px",marginBottom:"1rem",color:"#ffc107"}},"⚠️ ",c),m&&e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"6px",padding:"12px",marginBottom:"1rem",color:"#4caf50"}},"✅ ",m),e.createElement("form",{onSubmit:I},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"0.75rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"firstName",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"First Name *"),e.createElement("input",{type:"text",id:"firstName",name:"firstName",value:t.firstName,onChange:x,required:!0,placeholder:"Enter your first name",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"lastName",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Last Name *"),e.createElement("input",{type:"text",id:"lastName",name:"lastName",value:t.lastName,onChange:x,required:!0,placeholder:"Enter your last name",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}}))),e.createElement("div",{style:{marginBottom:"0.75rem"}},e.createElement("label",{htmlFor:"email",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Email Address *"),e.createElement("input",{type:"email",id:"email",name:"email",value:t.email,onChange:x,required:!0,placeholder:"Enter your email address",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}})),e.createElement("div",{style:{marginBottom:"0.75rem"}},e.createElement("label",{htmlFor:"phone",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Phone Number (Optional)"),e.createElement("input",{type:"tel",id:"phone",name:"phone",value:t.phone,onChange:x,placeholder:"Enter your phone number (optional)",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}})),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"0.75rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"fargoRate",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Fargo Rate (if known)"),e.createElement("input",{type:"number",id:"fargoRate",name:"fargoRate",value:t.fargoRate,onChange:x,placeholder:"e.g., 450",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"experience",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Years of Experience"),e.createElement("select",{id:"experience",name:"experience",value:t.experience,onChange:x,style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}},e.createElement("option",{value:""},"Select experience level"),e.createElement("option",{value:"beginner"},"Beginner (0-2 years)"),e.createElement("option",{value:"intermediate"},"Intermediate (3-5 years)"),e.createElement("option",{value:"advanced"},"Advanced (6-10 years)"),e.createElement("option",{value:"expert"},"Expert (10+ years)")))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"0.75rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"currentLeague",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Current League (if any)"),e.createElement("input",{type:"text",id:"currentLeague",name:"currentLeague",value:t.currentLeague,onChange:x,placeholder:"e.g., APA, BCA, Local League",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"currentRanking",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Current Ranking (if any)"),e.createElement("input",{type:"text",id:"currentRanking",name:"currentRanking",value:t.currentRanking,onChange:x,placeholder:"e.g., APA 5, BCA 7, etc.",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}}))),e.createElement("div",{style:{marginBottom:"1.5rem"}},e.createElement("label",{style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"I'm interested in: *"),e.createElement("div",{style:{display:"grid",gap:"0.5rem"}},e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#fff"}},e.createElement("input",{type:"checkbox",name:"interests",value:"ladder",checked:t.interests.includes("ladder"),onChange:x,style:{cursor:"pointer"}}),"🏓 Ladder System"),e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#fff"}},e.createElement("input",{type:"checkbox",name:"interests",value:"league",checked:t.interests.includes("league"),onChange:x,style:{cursor:"pointer"}}),"🏆 Singles League"))),t.interests.includes("ladder")&&e.createElement("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"8px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"}},e.createElement("input",{type:"checkbox",name:"payNow",checked:t.payNow,onChange:A=>n(_=>({..._,payNow:A.target.checked})),style:{cursor:"pointer"}}),e.createElement("label",{style:{color:"#4caf50",fontWeight:"bold",fontSize:"1rem"}},"💳 Pay $5 Monthly Fee Now (Optional)")),e.createElement("p",{style:{color:"#ccc",fontSize:"0.9rem",margin:"0",fontStyle:"italic"}},"If you pay now, you'll be added to the ladder immediately. If not, you'll need to pay before being added to the ladder system."),t.payNow&&e.createElement("div",{style:{marginTop:"1rem"}},e.createElement("label",{style:{display:"block",color:"#4caf50",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"0.95rem"}},"Select Payment Method: *"),e.createElement("select",{value:t.paymentMethod,onChange:N,required:t.payNow,style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(76, 175, 80, 0.3)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}},e.createElement("option",{value:""},"Choose payment method..."),e.createElement("option",{value:"venmo"},"Venmo"),e.createElement("option",{value:"cashapp"},"CashApp"),e.createElement("option",{value:"credit_card"},"Credit/Debit Card"),e.createElement("option",{value:"apple_pay"},"Apple Pay"),e.createElement("option",{value:"google_pay"},"Google Pay"),e.createElement("option",{value:"cash"},"Cash"),e.createElement("option",{value:"check"},"Check")),v&&t.paymentMethod&&e.createElement("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#4caf50",margin:"0 0 0.5rem 0",fontSize:"1rem",fontWeight:"bold"}},"💳 Payment Instructions"),e.createElement("div",{style:{color:"#fff",fontSize:"0.9rem",lineHeight:"1.4",whiteSpace:"pre-line"}},C(t.paymentMethod)),e.createElement("div",{style:{marginTop:"0.5rem",padding:"0.5rem",background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"4px",color:"#ffc107",fontSize:"0.85rem"}},"⚠️ Please complete your payment before submitting this form. Your application will be processed once payment is received.")))),e.createElement("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"}},e.createElement("button",{type:"submit",disabled:o,style:{padding:"12px 24px",background:"linear-gradient(45deg, #e53e3e, #c53030)",border:"none",borderRadius:"25px",color:"#fff",fontWeight:"bold",cursor:o?"not-allowed":"pointer",fontSize:"1rem",boxShadow:"0 4px 15px rgba(229, 62, 62, 0.3)",transition:"all 0.3s ease",opacity:o?.6:1},onMouseEnter:A=>{o||(A.target.style.transform="translateY(-2px)",A.target.style.boxShadow="0 6px 20px rgba(229, 62, 62, 0.4)")},onMouseLeave:A=>{A.target.style.transform="translateY(0)",A.target.style.boxShadow="0 4px 15px rgba(229, 62, 62, 0.3)"}},o?"Submitting...":"Submit Application")))))};function Kw({isOpen:a,onClose:r,isMobile:t}){return a?e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"flex-start",zIndex:1e3,padding:"120px 10px 10px 10px"}},e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"2px solid #ff4444",borderRadius:"12px",width:t?"98%":"50%",maxWidth:"500px",height:t?"98%":"90vh",maxHeight:"800px",display:"flex",flexDirection:"column",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",color:"#ffffff"}},e.createElement("div",{style:{padding:"20px",borderBottom:"1px solid #ff4444",display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("h2",{style:{color:"#ff4444",margin:0}},"🏆 Ladder of Legends Rules"),e.createElement("button",{onClick:r,style:{background:"none",border:"none",color:"#ff4444",fontSize:"24px",cursor:"pointer",padding:"5px"}},"×")),e.createElement("div",{style:{flex:1,overflowY:"auto",padding:"15px",lineHeight:"1.6",fontSize:"1.3rem"}},e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"🎯 Ladder of Legends Introduction"),e.createElement("p",{style:{color:"#e0e0e0",fontSize:"1.3rem"}},"Please see official rules for full details. ",e.createElement("br",null),'Join the Facebook group: "Top Colorado Springs Pool Players - The Ladder of Legends."'),e.createElement("p",{style:{color:"#e0e0e0",fontSize:"1.3rem"}},e.createElement("strong",null,"Player Responsibility:")," Players must know the rules before participating.")),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"🏆 Three Brackets/Ladders"),e.createElement("p",{style:{color:"#e0e0e0",marginBottom:"10px",fontSize:"1.3rem"}},"Players are placed in brackets based on skill levels:"),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"10px"}},e.createElement("h4",{style:{color:"#ffc107",margin:"0 0 8px 0",fontSize:"1.6rem"}},"499 and under")),e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"10px"}},e.createElement("h4",{style:{color:"#ffc107",margin:"0 0 8px 0",fontSize:"1.6rem"}},"500-549")),e.createElement("div",{style:{background:"rgba(0, 255, 0, 0.1)",border:"1px solid rgba(0, 255, 0, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"10px"}},e.createElement("h4",{style:{color:"#ffc107",margin:"0 0 8px 0",fontSize:"1.6rem"}},"550+"))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"📋 Challenge Acceptance"),e.createElement("p",{style:{color:"#e0e0e0",fontSize:"1.3rem"}},"For all match types, players must accept a challenge when called out.")),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"⚔️ Types of Matches"),e.createElement("h4",{style:{color:"#ffc107",marginBottom:"3px",fontSize:"1.6rem"}},"CHALLENGE MATCH:"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,"Players can challenge opponents up to 4 spots above them"),e.createElement("li",null,"Challenger wins: Players switch positions"),e.createElement("li",null,"Defender wins: Ladder positions remain unchanged")),e.createElement("h4",{style:{color:"#ffc107",marginBottom:"3px",fontSize:"1.6rem"}},"SMACKDOWN MATCH:"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,'Any player can call out a "SmackDown"'),e.createElement("li",null,"Player calls out an opponent no more than 5 spots below them"),e.createElement("li",null,"The Challenger ",e.createElement("em",null,"(Person calling out the SmackDown)")," pays the full entry fee; the Defender pays 50% of the entry fee"),e.createElement("li",null,e.createElement("strong",null,"If Challenger Wins:")," Opponent moves THREE spots down, challenger moves TWO spots up (but not into first place)"),e.createElement("li",null,e.createElement("strong",null,"If Challenger Loses:")," Players switch positions"),e.createElement("li",null,"First place must be earned via a Challenge Match or SmackBack match")),e.createElement("h4",{style:{color:"#ffc107",marginBottom:"3px",fontSize:"1.6rem"}},"SMACKBACK MATCH:"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,"If the SmackDown defender wins, they can challenge for 1st place in their next match with a SmackBack"),e.createElement("li",null,"The Challenger ",e.createElement("em",null,"(Person calling out the SmackBack)")," pays the full entry fee; the Defender pays 50% of the entry fee"),e.createElement("li",null,e.createElement("strong",null,"If Challenger Wins:")," Moves into 1st place, all other positions move down one spot"),e.createElement("li",null,e.createElement("strong",null,"If Defender Wins:")," Ladder positions remain unchanged"))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"📜 OFFICIAL RULES"),e.createElement("h4",{style:{color:"#ffc107",marginBottom:"3px",fontSize:"1.6rem"}},"Player Responsibility"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,"Players are responsible for knowing the rules"),e.createElement("li",null,"Players under 18 require parental approval"),e.createElement("li",null,"Participation implies agreement to the following rules")),e.createElement("h4",{style:{color:"#ffc107",marginBottom:"3px",fontSize:"1.6rem"}},"Match Scheduling"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,"Matches can be played anyday, any time, at any safe mutually agreed upon location")),e.createElement("h4",{style:{color:"#ffc107",marginBottom:"3px",fontSize:"1.6rem"}},"TOP 5 EXCEPTION"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,"Matches involving top 5 players will be played on SATURDAYS OR SUNDAYS",e.createElement("br",null)," At Legends Brews & Cues (2790 Hancock Expwy, Colorado Springs)"),e.createElement("li",null,"Match start times: Between 2pm-8pm, by mutual agreement"),e.createElement("li",null,"Top 5 matches will be live-streamed on the Legends Facebook page"),e.createElement("li",null,"Tables for top 5 matches are open - No Greens Fees"),e.createElement("li",null,"An admin/TD will be present at top 5 matches to referee and make final decisions on disputes"))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"🏆 Brackets/Minimum Races"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,"Brackets are determined using FargoRate"),e.createElement("li",null,"If no FargoRate, known skill level equivalent applies"),e.createElement("li",null,"499 and under = $20 entry fee per match. Race to 5"),e.createElement("li",null,"500-549 = $25 entry fee per match. Race to 7"),e.createElement("li",null,"550+ = $50 entry fee per match. Race to 7"),e.createElement("li",null,"Higher fees/races are allowed by mutual agreement, with exceptions for SmackDown & SmackBack Matches"))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"💳 Membership & Payment Structure"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,e.createElement("strong",null,"Ladder Membership:")," $5/month (required to participate)"),e.createElement("li",null,e.createElement("strong",null,"Match Fees:")," $5 per match (total, not per player)"),e.createElement("li",null,e.createElement("strong",null,"Fee Distribution:")," $3 to prize pool, $2 to platform"),e.createElement("li",null,e.createElement("strong",null,"Payment Methods:")," Credit card (Stripe) or manual payment"),e.createElement("li",null,e.createElement("strong",null,"Billing:")," Monthly automatic renewal for membership"),e.createElement("li",null,e.createElement("strong",null,"Match Reporting:")," Requires active membership and match fee payment"))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"💰 Winner Takes All"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,"Entry fees"),e.createElement("li",null,"Any added sponsor prizes/money (TBD)"),e.createElement("li",null,"Ladder position"),e.createElement("li",null,"Bragging rights"))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"🛡️ Immunity"),e.createElement("p",{style:{color:"#e0e0e0",fontSize:"1.3rem"}},"Winners receive 7 day immunity from new challenges.")),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"🏆 Prize Distribution"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,e.createElement("strong",null,"Prize Period:")," Every 2 months (6 times per year)"),e.createElement("li",null,e.createElement("strong",null,"Separate Prize Pools:")," Each ladder (499-under, 500-549, 550+) has its own prize pool"),e.createElement("li",null,e.createElement("strong",null,"Prize Split:")," 50% to 1st place, 50% to most improved player"),e.createElement("li",null,e.createElement("strong",null,"Most Improved:")," Player who climbed the most ladder positions during the 2-month period"),e.createElement("li",null,e.createElement("strong",null,"Eligibility:")," Must have active membership and played at least 1 match during the period"))),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"8px",padding:"12px"}},e.createElement("h4",{style:{color:"#ffc107",margin:"0 0 3px 0",fontSize:"1.6rem"}},"📞 Questions?"),e.createElement("p",{style:{color:"#e0e0e0",margin:0,fontSize:"1.25rem"}},'Join the Facebook group: "Top Colorado Springs Pool Players - The Ladder of Legends" for more information and to participate.'))))):null}const IW=({onClose:a})=>{const[r,t]=b.useState([]),[n,o]=b.useState(!0),[i,c]=b.useState(""),[u,m]=b.useState(null),[g,f]=b.useState(!1),[h,v]=b.useState(!1);b.useEffect(()=>{S()},[]);const S=async()=>{try{o(!0);const O=await fetch(`${pe}/api/ladder/applications`),U=await O.json();O.ok?t(U):c(U.message||"Failed to fetch applications")}catch(O){console.error("Error fetching applications:",O),c("Network error. Please check your connection.")}finally{o(!1)}},x=O=>{m(O),f(!0)},[E,N]=b.useState(!1),[C,I]=b.useState(null),[A,_]=b.useState(null),k=async O=>{try{v(!0);const U=await fetch(`${pe}/api/ladder/applications/${O}/approve`,{method:"POST",headers:{"Content-Type":"application/json"}}),Z=await U.json();if(U.ok){try{const H=await zd.send("service_l5q2047","template_ladder_approval",{to_email:Z.playerCreated.email,to_name:`${Z.playerCreated.firstName} ${Z.playerCreated.lastName}`,email:Z.playerCreated.email,pin:Z.playerCreated.pin,ladder_name:Z.playerCreated.ladderName,position:Z.playerCreated.position,login_url:"https://newapp-1-ic1v.onrender.com"},"g6vqrOs_Jb6LL1VCZ");console.log("📧 Email sent successfully!",H),_("sent")}catch(H){console.error("📧 Email sending failed:",H),_("failed")}I(Z.playerCreated),N(!0),await S(),f(!1),m(null)}else c(Z.message||"Failed to approve application")}catch(U){console.error("Error approving application:",U),c("Network error. Please try again.")}finally{v(!1)}},B=async(O,U)=>{try{v(!0);const Z=await fetch(`${pe}/api/ladder/applications/${O}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:U})}),H=await Z.json();Z.ok?(await S(),f(!1),m(null)):c(H.message||"Failed to reject application")}catch(Z){console.error("Error rejecting application:",Z),c("Network error. Please try again.")}finally{v(!1)}},z=O=>{switch(O){case"pending":return"#ffa726";case"approved":return"#4caf50";case"rejected":return"#f44336";default:return"#757575"}},M=O=>{switch(O){case"pending":return"⏳ Pending";case"approved":return"✅ Approved";case"rejected":return"❌ Rejected";default:return"Unknown"}};return e.createElement(Bt,{open:!0,onClose:a,title:"📋 Ladder Applications Manager",maxWidth:"900px"},e.createElement("div",{style:{padding:"1rem"}},i&&e.createElement("div",{style:{background:"rgba(244, 67, 54, 0.2)",border:"1px solid rgba(244, 67, 54, 0.5)",color:"#ff6b6b",padding:"0.8rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"1rem"}},i),n?e.createElement("div",{style:{textAlign:"center",padding:"2rem",color:"#ccc",fontSize:"1.1rem"}},"Loading applications..."):r.length===0?e.createElement("div",{style:{textAlign:"center",padding:"2rem",color:"#ccc",fontSize:"1.1rem"}},"No ladder applications found."):e.createElement("div",null,e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr auto",gap:"1rem",padding:"0.8rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",marginBottom:"1rem",fontWeight:"bold",fontSize:"0.9rem",color:"#fff"}},e.createElement("div",null,"Name"),e.createElement("div",null,"Email"),e.createElement("div",null,"Experience"),e.createElement("div",null,"Status"),e.createElement("div",null,"Actions")),r.map(O=>e.createElement("div",{key:O._id,style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr auto",gap:"1rem",padding:"0.8rem",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",marginBottom:"0.5rem",alignItems:"center",background:"rgba(255, 255, 255, 0.02)"}},e.createElement("div",{style:{color:"#fff",fontWeight:"bold"}},O.firstName," ",O.lastName),e.createElement("div",{style:{color:"#ccc"}},O.email),e.createElement("div",{style:{color:"#ccc",textTransform:"capitalize"}},O.experience),e.createElement("div",{style:{color:z(O.status),fontWeight:"bold"}},M(O.status)),e.createElement("div",null,e.createElement("button",{onClick:()=>x(O),disabled:h,style:{padding:"0.5rem 1rem",background:"rgba(33, 150, 243, 0.2)",color:"#2196F3",border:"1px solid #2196F3",borderRadius:"6px",fontSize:"0.85rem",cursor:"pointer",transition:"all 0.3s ease"}},"View Details")))))),g&&u&&e.createElement(Bt,{open:g,onClose:()=>f(!1),title:`📄 Application Details - ${u.firstName} ${u.lastName}`,maxWidth:"600px"},e.createElement("div",{style:{padding:"1rem"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"}},e.createElement("div",null,e.createElement("strong",{style:{color:"#2196F3"}},"Personal Information:"),e.createElement("div",{style:{marginTop:"0.5rem",color:"#ccc"}},e.createElement("div",null,e.createElement("strong",null,"Name:")," ",u.firstName," ",u.lastName),e.createElement("div",null,e.createElement("strong",null,"Email:")," ",u.email),e.createElement("div",null,e.createElement("strong",null,"Phone:")," ",u.phone||"Not provided"))),e.createElement("div",null,e.createElement("strong",{style:{color:"#2196F3"}},"Skill Information:"),e.createElement("div",{style:{marginTop:"0.5rem",color:"#ccc"}},e.createElement("div",null,e.createElement("strong",null,"Experience:")," ",u.experience),e.createElement("div",null,e.createElement("strong",null,"Fargo Rate:")," ",u.fargoRate||"Not provided"),e.createElement("div",null,e.createElement("strong",null,"Current League:")," ",u.currentLeague||"Not provided"),e.createElement("div",null,e.createElement("strong",null,"Current Ranking:")," ",u.currentRanking||"Not provided")))),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"}},e.createElement("strong",{style:{color:"#2196F3"}},"Application Status:"),e.createElement("div",{style:{color:z(u.status),fontWeight:"bold",marginTop:"0.5rem"}},M(u.status)),u.status==="rejected"&&u.rejectionReason&&e.createElement("div",{style:{color:"#ff6b6b",marginTop:"0.5rem"}},e.createElement("strong",null,"Reason:")," ",u.rejectionReason)),u.status==="pending"&&e.createElement("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"}},e.createElement("button",{onClick:()=>B(u._id,"Application rejected by admin"),disabled:h,style:{padding:"0.8rem 1.5rem",background:"rgba(244, 67, 54, 0.2)",color:"#ff6b6b",border:"2px solid #ff6b6b",borderRadius:"8px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease"}},h?"Processing...":"Reject"),e.createElement("button",{onClick:()=>k(u._id),disabled:h,style:{padding:"0.8rem 1.5rem",background:"linear-gradient(45deg, #4CAF50, #45a049)",color:"white",border:"2px solid #4CAF50",borderRadius:"8px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease"}},h?"Processing...":"Approve")))),E&&C&&e.createElement(Bt,{open:E,onClose:()=>N(!1),title:"✅ Application Approved - Login Credentials",maxWidth:"500px"},e.createElement("div",{style:{padding:"1rem"}},e.createElement("div",{style:{background:"linear-gradient(45deg, #4CAF50, #45a049)",color:"white",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",textAlign:"center"}},e.createElement("h3",{style:{margin:"0 0 0.5rem 0"}},"🎉 Application Approved!"),e.createElement("p",{style:{margin:0,fontSize:"1rem"}},"Player has been added to the ladder and can now log in.")),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"}},e.createElement("h4",{style:{color:"#2196F3",margin:"0 0 1rem 0"}},"📧 Login Credentials:"),e.createElement("div",{style:{color:"#ccc"}},e.createElement("div",{style:{marginBottom:"0.5rem"}},e.createElement("strong",null,"Email:")," ",C.email),e.createElement("div",{style:{marginBottom:"0.5rem"}},e.createElement("strong",null,"PIN:")," ",e.createElement("span",{style:{background:"rgba(255, 255, 255, 0.1)",padding:"0.25rem 0.5rem",borderRadius:"4px",fontFamily:"monospace",fontSize:"1.1rem"}},C.pin)),e.createElement("div",{style:{marginBottom:"0.5rem"}},e.createElement("strong",null,"Ladder:")," ",C.ladderName),e.createElement("div",null,e.createElement("strong",null,"Position:")," #",C.position))),A==="sent"&&e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"}},e.createElement("h4",{style:{color:"#4CAF50",margin:"0 0 0.5rem 0"}},"✅ Email Sent Successfully!"),e.createElement("p",{style:{color:"#ccc",margin:0}},"An approval email with login credentials has been automatically sent to ",C.email)),A==="failed"&&e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"}},e.createElement("h4",{style:{color:"#FFC107",margin:"0 0 0.5rem 0"}},"⚠️ Email Not Sent:"),e.createElement("p",{style:{color:"#ccc",margin:0}},"Please manually send these credentials to ",C.email," via email")),e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"}},e.createElement("h4",{style:{color:"#FFC107",margin:"0 0 0.5rem 0"}},"⚠️ Important:"),e.createElement("ul",{style:{color:"#ccc",margin:0,paddingLeft:"1.5rem"}},e.createElement("li",null,"Player can log in using the unified login system"),e.createElement("li",null,"League app will recognize their ladder account"),e.createElement("li",null,"They can access both league and ladder features"),e.createElement("li",null,"Keep these credentials secure"))),e.createElement("div",{style:{textAlign:"center"}},e.createElement("button",{onClick:()=>N(!1),style:{padding:"0.8rem 2rem",background:"linear-gradient(45deg, #2196F3, #1976D2)",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease"}},"Got it!")))))};function AW(){const[a,r]=b.useState(window.innerWidth),[t,n]=b.useState(window.innerHeight),[o]=b.useState(()=>[0,1,2,3].map(E=>{const N=.1+Math.random()*.15,C=Math.random()*Math.PI*2;return{x:Math.random()*a,y:Math.random()*t,vx:Math.cos(C)*N*1.2,vy:Math.sin(C)*N*1.2,baseSize:.8+Math.random()*.4,sizePhase:Math.random()*Math.PI*2,isSizeChanger:!1,speedCategory:"base",lastChange:Date.now(),changeInterval:8e3+Math.random()*12e3,rotationDirection:E>=1?Math.random()>.5?1:-1:0}}));b.useEffect(()=>{const E=()=>{r(window.innerWidth),n(window.innerHeight)};return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]);function i(E,N,C){const[I,A]=b.useState(E);b.useRef(null);const _=b.useRef(E);return b.useEffect(()=>{let k,B=Date.now();const z=()=>{const M=Date.now(),O=M-B,U=_.current;if(M-U.lastChange>U.changeInterval){const W=C.includes(N)?"fast":"base",T={...U,speedCategory:W,lastChange:M,changeInterval:3e3+Math.random()*6e3};_.current=T,A(T)}if(Math.random()<.003){const X=Math.atan2(U.vy,U.vx),W=(Math.random()-.5)*Math.PI*.3,T=X+W,G=.3+Math.random()*1,te=U.speedCategory==="fast"?.6:.2;U.vx=Math.cos(T)*G*te,U.vy=Math.sin(T)*G*te}let Z=U.x+U.vx*(O/16),H=U.y+U.vy*(O/16);(Z<0||Z>a||H<0||H>t)&&(U.edgeShrink||(U.edgeShrink=!0,U.edgeShrinkTime=M));const V=M/1e3;let F=U.baseSize;const R=Math.sin(V*.07+U.sizePhase)*.1,D=Math.sin(V*.35+U.sizePhase*2)*.05;if(F=U.baseSize+R+D,F<U.baseSize*.3&&!U.sizeShrink&&(U.sizeShrink=!0,U.sizeShrinkTime=M),U.edgeShrink){const X=M-U.edgeShrinkTime;if(X<2e3){const T=1-X/2e3;U.edgeOpacity=T,F=U.baseSize+R+D}else if(X<4e3)U.edgeOpacity=.01,F=.01;else if(X<4100)Z=Math.random()*a,H=Math.random()*t,U.x=Z,U.y=H,F=.01,U.edgeOpacity=.01;else if(X<12500){const T=.01+.99*((X-4100)/8400);F*=T,U.edgeOpacity=T}else U.edgeShrink=!1,U.edgeOpacity=1}else U.edgeOpacity=1;if(U.sizeShrink){const X=M-U.sizeShrinkTime;if(X<2e3){const T=1-X/2e3;U.sizeOpacity=T}else if(X<4e3)U.sizeOpacity=.01,F=.01;else if(X<4100)Z=Math.random()*a,H=Math.random()*t,U.x=Z,U.y=H,F=.01,U.sizeOpacity=.01;else if(X<12500){const T=.01+.99*((X-4100)/8400);F*=T,U.sizeOpacity=T}else U.sizeShrink=!1,U.sizeOpacity=1}else U.sizeOpacity=1;let j=U.rotation||0;if(N>=1){const W=(Math.sqrt(U.vx*U.vx+U.vy*U.vy)*2+.3)*(O/16)*(U.rotationDirection||1);j+=W}_.current={...U,x:Z,y:H,size:F,rotation:j},M-B>100&&(A(_.current),B=M),k=requestAnimationFrame(z)};return z(),()=>cancelAnimationFrame(k)},[a,t,C]),I}const[c]=b.useState(()=>{const E=[];for(;E.length<2;){const C=Math.floor(Math.random()*4);E.includes(C)||E.push(C)}const N=[];for(;N.length<2;){const C=Math.floor(Math.random()*4);!N.includes(C)&&!E.includes(C)&&N.push(C)}return o.forEach((C,I)=>{E.includes(I)?(C.speedCategory="fast",C.vx=(Math.random()-.5)*2,C.vy=(Math.random()-.5)*2):(C.speedCategory="base",C.vx=(Math.random()-.5)*.5,C.vy=(Math.random()-.5)*.5),N.includes(I)&&(C.isSizeChanger=!0)}),!0}),[u,m]=b.useState(()=>{const E=[];for(;E.length<2;){const N=Math.floor(Math.random()*4);E.includes(N)||E.push(N)}return E}),g=()=>{const E=[];for(;E.length<2;){const N=Math.floor(Math.random()*4);E.includes(N)||E.push(N)}m(E)};b.useEffect(()=>{const E=setInterval(()=>{g(),console.log("Speed reassignment triggered")},4e3+Math.random()*4e3);return()=>clearInterval(E)},[]);const f=i(o[0],0,u),h=i(o[1],1,u),v=i(o[2],2,u),S=i(o[3],3,u),x=(E,N,C,I,A=!1)=>{const _=A&&E.rotation||0;return{position:"absolute",left:E.x,top:E.y,transform:`translate(-50%, -50%) scale(${E.size}) rotate(${_}deg)`,width:N,height:"auto",opacity:C*(E.edgeOpacity||1)*(E.sizeOpacity||1),zIndex:1,pointerEvents:"none",filter:I,transition:"none"}};return e.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none",overflow:"hidden"}},e.createElement("img",{src:Jw,alt:"Legends Logo Background",style:x(f,160,.75,"drop-shadow(0 0 20px rgba(245, 30, 30, 0.2))")}),e.createElement("img",{src:wd,alt:"8 Ball Background",style:x(h,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))",!0)}),e.createElement("img",{src:Yp,alt:"9 Ball Background",style:x(v,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))",!0)}),e.createElement("img",{src:Yi,alt:"10 Ball Background",style:x(S,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))",!0)}))}const eS=({isOpen:a,onClose:r,challenger:t,defender:n,challengeType:o="challenge",onChallengeComplete:i})=>{const[c,u]=b.useState({entryFee:"",raceLength:"",gameType:"9-ball",tableSize:"9-foot",preferredDates:[],postContent:"",location:"Legends Brews & Cues"}),[m,g]=b.useState(!1),[f,h]=b.useState(!1),[v,S]=b.useState("");b.useEffect(()=>{if(n&&n.ladderName){const _={"499-under":{entryFee:20,raceLength:5},"500-549":{entryFee:25,raceLength:7},"550-plus":{entryFee:50,raceLength:7}},k=_[n.ladderName]||_["499-under"];u(B=>({...B,entryFee:k.entryFee.toString(),raceLength:k.raceLength.toString()}))}},[n]);const x=_=>{const{name:k,value:B}=_.target;u(z=>({...z,[k]:B}))},E=()=>{const _=document.getElementById("preferredDate").value;_&&(u(k=>({...k,preferredDates:[...k.preferredDates,_]})),document.getElementById("preferredDate").value="")},N=_=>{u(k=>({...k,preferredDates:k.preferredDates.filter((B,z)=>z!==_)}))},C=()=>{const k={challenge:"Challenge Match",smackdown:"SmackDown Match",smackback:"SmackBack Match"}[o]||"Challenge Match";return`🏆 ${k} 🏆

${t.firstName} ${t.lastName} (Position ${t.position}) is calling out ${n.firstName} ${n.lastName} (Position ${n.position}) for a ${k.toLowerCase()}!

💰 Entry Fee: $${c.entryFee}
🎯 Race to: ${c.raceLength}
🎱 Game: ${c.gameType}
🏓 Table: ${c.tableSize}
📍 Location: ${c.location}

${c.postContent?`
💬 Message: ${c.postContent}`:""}

${n.firstName}, you have 3 days to respond! ⏰`},I=async _=>{_.preventDefault(),g(!0),S("");try{const k={challengerEmail:t.email,defenderEmail:n.email,challengeType:o,entryFee:parseInt(c.entryFee),raceLength:parseInt(c.raceLength),gameType:c.gameType,tableSize:c.tableSize,preferredDates:c.preferredDates,postContent:C(),location:c.location},B=await fetch(`${pe}/api/ladder/challenge`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)}),z=await B.json();if(!B.ok)throw new Error(z.error||"Failed to create challenge");h(!0),i&&i(z)}catch(k){console.error("Error creating challenge:",k),S(k.message)}finally{g(!1)}},A=()=>{h(!1),r()};return a?f?e.createElement(Bt,{open:!0,onClose:A,title:"🎯 Challenge Sent!",maxWidth:"500px"},e.createElement("div",{style:{padding:"20px",textAlign:"center"}},e.createElement("div",{style:{fontSize:"48px",marginBottom:"16px"}},"✅"),e.createElement("h3",{style:{color:"#ff4444",marginBottom:"16px"}},"Challenge Successfully Sent!"),e.createElement("p",{style:{color:"#e0e0e0",marginBottom:"20px"}},"Your ",o," challenge has been sent to ",n.firstName," ",n.lastName,"."),e.createElement("p",{style:{color:"#ccc",fontSize:"0.9rem",marginBottom:"20px"}},"They have 3 days to respond. You'll be notified when they accept, decline, or counter-propose."),e.createElement("button",{onClick:A,style:{background:"linear-gradient(135deg, #ff4444, #cc3333)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"}},"Close"))):e.createElement(Bt,{open:!0,onClose:r,title:`⚔️ ${o.charAt(0).toUpperCase()+o.slice(1)} Challenge`,maxWidth:"600px"},e.createElement("div",{style:{padding:"16px"}},e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px"}},e.createElement("h3",{style:{color:"#ff4444",margin:"0 0 8px 0",textAlign:"center",fontSize:"1.1rem"}},t.firstName," ",t.lastName," vs ",n.firstName," ",n.lastName),e.createElement("div",{style:{display:"flex",justifyContent:"space-around",color:"#e0e0e0",fontSize:"0.9rem"}},e.createElement("div",null,e.createElement("strong",null,"Challenger:"),e.createElement("br",null),"Position ",t.position,e.createElement("br",null),t.ladderName),e.createElement("div",{style:{fontSize:"20px",color:"#ff4444"}},"⚔️"),e.createElement("div",null,e.createElement("strong",null,"Defender:"),e.createElement("br",null),"Position ",n.position,e.createElement("br",null),n.ladderName))),e.createElement("form",{onSubmit:I},e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("h4",{style:{color:"#ffc107",marginBottom:"8px",fontSize:"1rem"}},"Match Details"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"12px"}},e.createElement("div",null,e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px",fontSize:"0.9rem"}},"Entry Fee ($)"),e.createElement("input",{type:"number",name:"entryFee",value:c.entryFee,onChange:x,required:!0,min:"1",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",fontSize:"0.9rem"}})),e.createElement("div",null,e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px",fontSize:"0.9rem"}},"Race Length"),e.createElement("select",{name:"raceLength",value:c.raceLength,onChange:x,required:!0,style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",fontSize:"0.9rem"}},Array.from({length:16},(_,k)=>k+5).map(_=>e.createElement("option",{key:_,value:_},_))))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"12px"}},e.createElement("div",null,e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px",fontSize:"0.9rem"}},"Game Type"),e.createElement("select",{name:"gameType",value:c.gameType,onChange:x,style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",fontSize:"0.9rem"}},e.createElement("option",{value:"9-ball"},"9-Ball"),e.createElement("option",{value:"8-ball"},"8-Ball"),e.createElement("option",{value:"10-ball"},"10-Ball"),e.createElement("option",{value:"mixed"},"Mixed"))),e.createElement("div",null,e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px",fontSize:"0.9rem"}},"Table Size"),e.createElement("select",{name:"tableSize",value:c.tableSize,onChange:x,style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",fontSize:"0.9rem"}},e.createElement("option",{value:"9-foot"},"9-Foot"),e.createElement("option",{value:"7-foot"},"7-Foot")))),e.createElement("div",null,e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px",fontSize:"0.9rem"}},"Location"),e.createElement("select",{name:"location",value:c.location,onChange:x,style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",fontSize:"0.9rem"}},e.createElement("option",{value:"Legends Brews & Cues"},"Legends Brews & Cues"),e.createElement("option",{value:"Antiques"},"Antiques"),e.createElement("option",{value:"Rac m"},"Rac m"),e.createElement("option",{value:"Westside Billiards"},"Westside Billiards"),e.createElement("option",{value:"Bijou Billiards"},"Bijou Billiards"),e.createElement("option",{value:"Crooked Cue"},"Crooked Cue"),e.createElement("option",{value:"Back on the Boulevard"},"Back on the Boulevard"),e.createElement("option",{value:"Main Street Tavern"},"Main Street Tavern"),e.createElement("option",{value:"Murray Street Darts"},"Murray Street Darts"),e.createElement("option",{value:"My House"},"My House")))),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("h4",{style:{color:"#ffc107",marginBottom:"8px",fontSize:"1rem"}},"Preferred Dates"),e.createElement("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"}},e.createElement("input",{type:"date",id:"preferredDate",style:{flex:1,padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",fontSize:"0.9rem"}}),e.createElement("button",{type:"button",onClick:E,style:{padding:"8px 16px",background:"#ff4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"}},"Add")),c.preferredDates.length>0&&e.createElement("div",{style:{marginTop:"8px"}},e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px",fontSize:"0.9rem"}},"Selected Dates:"),c.preferredDates.map((_,k)=>e.createElement("div",{key:k,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 8px",background:"rgba(255, 68, 68, 0.1)",borderRadius:"4px",marginBottom:"4px"}},e.createElement("span",{style:{color:"#e0e0e0",fontSize:"0.9rem"}},new Date(_).toLocaleDateString()),e.createElement("button",{type:"button",onClick:()=>N(k),style:{background:"none",border:"none",color:"#ff4444",cursor:"pointer",fontSize:"14px"}},"×"))))),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px",fontSize:"0.9rem"}},"Additional Message (Optional)"),e.createElement("textarea",{name:"postContent",value:c.postContent,onChange:x,rows:"2",placeholder:"Add any additional message for your challenge...",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",resize:"vertical",fontSize:"0.9rem"}})),v&&e.createElement("div",{style:{background:"rgba(255, 0, 0, 0.1)",border:"1px solid #ff0000",borderRadius:"4px",padding:"8px",marginBottom:"12px",color:"#ff6666",fontSize:"0.9rem"}},v),e.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"}},e.createElement("button",{type:"button",onClick:r,style:{padding:"10px 20px",background:"#666",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem"}},"Cancel"),e.createElement("button",{type:"submit",disabled:m,style:{padding:"10px 20px",background:m?"#666":"linear-gradient(135deg, #ff4444, #cc3333)",color:"white",border:"none",borderRadius:"8px",cursor:m?"not-allowed":"pointer",fontSize:"0.9rem",fontWeight:"bold"}},m?"Sending...":"Send Challenge"))))):null},DW=({isOpen:a,onClose:r,challenge:t,currentUser:n,onChallengeResponse:o})=>{const[i,c]=b.useState(""),[u,m]=b.useState(!1),[g,f]=b.useState(""),[h,v]=b.useState(!1),[S,x]=b.useState(""),E=async()=>{m(!0),f("");try{const k=await fetch(`${pe}/api/ladder/challenge/${t._id}/accept`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:i,selectedDate:S})}),B=await k.json();if(!k.ok)throw new Error(B.error||"Failed to accept challenge");await I({to_email:t.challenger.email,to_name:`${t.challenger.firstName} ${t.challenger.lastName}`,from_name:`${n.firstName} ${n.lastName}`,challenge_type:t.challengeType,entry_fee:t.matchDetails.entryFee,race_length:t.matchDetails.raceLength,game_type:t.matchDetails.gameType,location:t.matchDetails.location,note:i,challenge_id:t._id,match_date:S}),o&&o("accepted",B),r()}catch(k){console.error("Error accepting challenge:",k),f(k.message)}finally{m(!1)}},N=async()=>{m(!0),f("");try{const k=await fetch(`${pe}/api/ladder/challenge/${t._id}/decline`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:i})}),B=await k.json();if(!k.ok)throw new Error(B.error||"Failed to decline challenge");o&&o("declined",B),r()}catch(k){console.error("Error declining challenge:",k),f(k.message)}finally{m(!1)}},C=()=>{v(!0)},I=async k=>{try{(await fetch(`${pe}/api/email/send-challenge-confirmation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)})).ok||console.error("Failed to send confirmation email")}catch(B){console.error("Error sending confirmation email:",B)}},A=k=>({challenge:"Challenge Match",smackdown:"SmackDown Match",smackback:"SmackBack Match"})[k]||k,_=()=>t.challengeType==="challenge"?"If you win: Positions remain unchanged. If challenger wins: You switch positions.":t.challengeType==="smackdown"?"If challenger wins: You move 3 spots down, challenger moves 2 spots up. If you win: You switch positions.":t.challengeType==="smackback"?"If challenger wins: They move to 1st place, all others move down. If you win: Positions remain unchanged.":"";return!a||!t?null:e.createElement(Bt,{open:!0,onClose:r,title:`🎯 ${A(t.challengeType)}`,maxWidth:"600px"},e.createElement("div",{style:{padding:"20px"}},e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"8px",padding:"16px",marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",margin:"0 0 12px 0",textAlign:"center"}},t.challenger.firstName," ",t.challenger.lastName," vs ",t.defender.firstName," ",t.defender.lastName),e.createElement("div",{style:{display:"flex",justifyContent:"space-around",color:"#e0e0e0"}},e.createElement("div",null,e.createElement("strong",null,"Challenger:"),e.createElement("br",null),"Position ",t.challenger.position,e.createElement("br",null),t.challenger.ladderName),e.createElement("div",{style:{fontSize:"24px",color:"#ff4444"}},"⚔️"),e.createElement("div",null,e.createElement("strong",null,"Defender:"),e.createElement("br",null),"Position ",t.defender.position,e.createElement("br",null),t.defender.ladderName))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h4",{style:{color:"#ffc107",marginBottom:"12px"}},"Match Details"),e.createElement("div",{style:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",padding:"16px",color:"#e0e0e0"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"12px"}},e.createElement("div",null,e.createElement("strong",null,"Entry Fee:")," $",t.matchDetails.entryFee),e.createElement("div",null,e.createElement("strong",null,"Race Length:")," ",t.matchDetails.raceLength)),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"12px"}},e.createElement("div",null,e.createElement("strong",null,"Game Type:")," ",t.matchDetails.gameType),e.createElement("div",null,e.createElement("strong",null,"Table Size:")," ",t.matchDetails.tableSize)),e.createElement("div",null,e.createElement("strong",null,"Location:")," ",t.matchDetails.location))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h4",{style:{color:"#ffc107",marginBottom:"12px"}},"Position Changes"),e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",padding:"12px",color:"#e0e0e0",fontSize:"0.9rem",lineHeight:"1.4"}},_())),t.challengePost.postContent&&e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h4",{style:{color:"#ffc107",marginBottom:"12px"}},"Challenge Message"),e.createElement("div",{style:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",padding:"12px",color:"#e0e0e0",fontSize:"0.9rem",lineHeight:"1.4",whiteSpace:"pre-line"}},t.challengePost.postContent)),t.matchDetails.preferredDates&&t.matchDetails.preferredDates.length>0&&e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h4",{style:{color:"#ffc107",marginBottom:"12px"}},"Select Match Date"),e.createElement("div",{style:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",padding:"12px",color:"#e0e0e0"}},e.createElement("p",{style:{marginBottom:"12px",fontSize:"0.9rem",color:"#ccc"}},"Choose from the challenger's preferred dates:"),t.matchDetails.preferredDates.map((k,B)=>e.createElement("label",{key:B,style:{display:"block",marginBottom:"8px",cursor:"pointer",padding:"8px",borderRadius:"4px",background:S===k?"rgba(16, 185, 129, 0.2)":"transparent",border:S===k?"1px solid #10b981":"1px solid transparent",transition:"all 0.2s ease"}},e.createElement("input",{type:"radio",name:"selectedDate",value:k,checked:S===k,onChange:z=>x(z.target.value),style:{marginRight:"8px"}}),new Date(k).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))),S&&e.createElement("div",{style:{marginTop:"12px",padding:"8px",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"4px",color:"#10b981",fontSize:"0.9rem"}},"✅ Match scheduled for: ",new Date(S).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px"}},"Your Response Note (Optional)"),e.createElement("textarea",{value:i,onChange:k=>c(k.target.value),rows:"3",placeholder:"Add a note to your response...",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",resize:"vertical"}})),g&&e.createElement("div",{style:{background:"rgba(255, 0, 0, 0.1)",border:"1px solid #ff0000",borderRadius:"4px",padding:"8px",marginBottom:"16px",color:"#ff6666"}},g),e.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"space-between"}},e.createElement("button",{onClick:N,disabled:u,style:{padding:"12px 24px",background:u?"#666":"#dc2626",color:"white",border:"none",borderRadius:"8px",cursor:u?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"}},u?"Processing...":"Decline"),e.createElement("div",{style:{display:"flex",gap:"8px"}},e.createElement("button",{onClick:C,disabled:u,style:{padding:"12px 24px",background:u?"#666":"#f59e0b",color:"white",border:"none",borderRadius:"8px",cursor:u?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"}},"Counter"),e.createElement("button",{onClick:E,disabled:u||t.matchDetails.preferredDates&&t.matchDetails.preferredDates.length>0&&!S,style:{padding:"12px 24px",background:u||t.matchDetails.preferredDates&&t.matchDetails.preferredDates.length>0&&!S?"#666":"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"8px",cursor:u||t.matchDetails.preferredDates&&t.matchDetails.preferredDates.length>0&&!S?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"}},u?"Processing...":t.matchDetails.preferredDates&&t.matchDetails.preferredDates.length>0&&!S?"Select Date First":"Accept"))),e.createElement("div",{style:{marginTop:"16px",padding:"12px",background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"4px",color:"#ffc107",fontSize:"0.9rem",textAlign:"center"}},"⏰ This challenge expires on ",new Date(t.deadline).toLocaleDateString())))},MW=({isOpen:a,onClose:r,challenger:t,availableDefenders:n=[],onChallengeComplete:o})=>{const[i,c]=b.useState([]),[u,m]=b.useState(!1),[g,f]=b.useState(null),[h,v]=b.useState(!1),[S,x]=b.useState("challenge");b.useEffect(()=>{a&&t&&n.length>0&&E()},[a,t,n]);const E=async()=>{m(!0),c([]);try{await new Promise(O=>setTimeout(O,1e3));const M=N(t,n);c(M)}catch(M){console.error("Error generating suggestions:",M)}finally{m(!1)}},N=(M,O)=>{const U=[],Z=O.filter(F=>F.ladderName===M.ladderName);return Z.filter(F=>F.position<M.position&&F.position>=M.position-4).forEach(F=>{const R=C(M,F,"challenge");U.push({defender:F,type:"challenge",confidence:R,reason:`Challenge Match: ${F.firstName} is ${M.position-F.position} spots above you`,priority:1})}),Z.filter(F=>F.position>M.position&&F.position<=M.position+5).forEach(F=>{const R=C(M,F,"smackdown");U.push({defender:F,type:"smackdown",confidence:R,reason:`SmackDown Match: ${F.firstName} is ${F.position-M.position} spots below you`,priority:2})}),M.ladderName==="499-under"&&M.position<=3&&O.filter(R=>["500-549","550-plus"].includes(R.ladderName)).slice(-4).forEach(R=>{const D=C(M,R,"ladder-jump");U.push({defender:R,type:"ladder-jump",confidence:D,reason:`Ladder Jump: ${R.firstName} is in ${R.ladderName} ladder`,priority:3})}),U.sort((F,R)=>F.priority!==R.priority?F.priority-R.priority:R.confidence-F.confidence).slice(0,10)},C=(M,O,U)=>{let Z=50;const H=Math.abs(M.position-O.position);if(H<=2?Z+=20:H<=4&&(Z+=10),O.recentMatches&&O.recentMatches.length>0){const V=new Date(O.recentMatches[0].date),F=(new Date-V)/(1e3*60*60*24);F<=7?Z+=15:F<=30&&(Z+=10)}if(O.wins&&O.totalMatches){const V=O.wins/O.totalMatches;V>=.6?Z+=10:V>=.4&&(Z+=5)}return U==="challenge"?Z+=5:U==="smackdown"&&(Z+=10),Math.min(Z,95)},I=M=>{f(M.defender),x(M.type),v(!0)},A=()=>{c([]),f(null),v(!1),r()},_=M=>M>=80?"#10b981":M>=60?"#f59e0b":"#6b7280",k=M=>M>=80?"High":M>=60?"Medium":"Low",B=M=>({challenge:"⚔️",smackdown:"💥","ladder-jump":"🆙",smackback:"🔄"})[M]||"⚔️",z=M=>({challenge:"Challenge Match",smackdown:"SmackDown Match","ladder-jump":"Ladder Jump",smackback:"SmackBack Match"})[M]||M;return a?e.createElement(e.Fragment,null,e.createElement(Bt,{open:!0,onClose:A,title:`🧠 Smart Match: ${t.firstName} ${t.lastName}`,maxWidth:"700px"},e.createElement("div",{style:{padding:"20px"}},e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"8px",padding:"16px",marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",margin:"0 0 8px 0",textAlign:"center"}},"Smart Match Suggestions"),e.createElement("p",{style:{color:"#e0e0e0",textAlign:"center",margin:0,fontSize:"0.9rem"}},"AI-powered suggestions based on ladder rules, player activity, and match history")),u&&e.createElement("div",{style:{textAlign:"center",padding:"40px"}},e.createElement("div",{style:{border:"4px solid #333",borderTop:"4px solid #ff4444",borderRadius:"50%",width:"40px",height:"40px",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),e.createElement("p",{style:{color:"#9ca3af"}},"Analyzing ladder data and generating suggestions...")),!u&&i.length===0&&e.createElement("div",{style:{textAlign:"center",padding:"40px",color:"#9ca3af"}},e.createElement("div",{style:{fontSize:"48px",marginBottom:"16px"}},"🤔"),e.createElement("h3",{style:{marginBottom:"8px"}},"No Suggestions Available"),e.createElement("p",null,"No suitable opponents found for smart match suggestions.")),!u&&i.length>0&&e.createElement("div",null,e.createElement("h4",{style:{color:"#ffc107",marginBottom:"16px"}},"Top Suggestions (",i.length,")"),e.createElement("div",{style:{maxHeight:"400px",overflowY:"auto"}},i.map((M,O)=>e.createElement("div",{key:`${M.defender._id}-${M.type}`,style:{background:"rgba(0, 0, 0, 0.3)",border:"1px solid #444",borderRadius:"8px",padding:"16px",marginBottom:"12px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:U=>{U.target.style.background="rgba(255, 68, 68, 0.1)",U.target.style.borderColor="#ff4444"},onMouseLeave:U=>{U.target.style.background="rgba(0, 0, 0, 0.3)",U.target.style.borderColor="#444"},onClick:()=>I(M)},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},e.createElement("span",{style:{fontSize:"20px"}},B(M.type)),e.createElement("div",null,e.createElement("h4",{style:{color:"#fff",margin:"0 0 4px 0"}},M.defender.firstName," ",M.defender.lastName),e.createElement("p",{style:{color:"#ccc",margin:0,fontSize:"0.9rem"}},"Position ",M.defender.position," • ",M.defender.ladderName))),e.createElement("div",{style:{textAlign:"right"}},e.createElement("div",{style:{background:_(M.confidence),color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.8rem",fontWeight:"bold"}},k(M.confidence)," (",M.confidence,"%)"))),e.createElement("p",{style:{color:"#e0e0e0",margin:"0 0 8px 0",fontSize:"0.9rem"}},M.reason),e.createElement("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"}},e.createElement("span",{style:{background:"rgba(255, 68, 68, 0.2)",color:"#ff4444",padding:"2px 6px",borderRadius:"4px",fontSize:"0.8rem"}},z(M.type)),M.defender.recentMatches&&M.defender.recentMatches.length>0&&e.createElement("span",{style:{background:"rgba(16, 185, 129, 0.2)",color:"#10b981",padding:"2px 6px",borderRadius:"4px",fontSize:"0.8rem"}},"Active Player"),M.defender.wins&&M.defender.totalMatches&&e.createElement("span",{style:{background:"rgba(245, 158, 11, 0.2)",color:"#f59e0b",padding:"2px 6px",borderRadius:"4px",fontSize:"0.8rem"}},Math.round(M.defender.wins/M.defender.totalMatches*100),"% Win Rate"))))),e.createElement("div",{style:{marginTop:"16px",padding:"12px",background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"4px",color:"#ffc107",fontSize:"0.9rem"}},"💡 ",e.createElement("strong",null,"Tip:")," Click on any suggestion to create a challenge. The confidence score indicates how likely the opponent is to respond positively.")),e.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"20px"}},e.createElement("button",{onClick:A,style:{padding:"12px 24px",background:"#666",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem"}},"Close")))),h&&g&&e.createElement(eS,{isOpen:h,onClose:()=>v(!1),challenger:t,defender:g,challengeType:S,onChallengeComplete:M=>{v(!1),f(null),o&&o(M),A()}}),e.createElement("style",{jsx:!0},`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `)):null},RW=({isOpen:a,onClose:r,selectedLadder:t})=>{const[n,o]=b.useState(t),[i,c]=b.useState(null),[u,m]=b.useState(!0),[g,f]=b.useState(null),[h,v]=b.useState([]),[S,x]=b.useState([]),[E,N]=b.useState(!1),[C,I]=b.useState(!1);b.useEffect(()=>{a&&o(t)},[a,t]),b.useEffect(()=>{if(a){A(),_(),k();const Z=setInterval(()=>{A()},3e4);return()=>clearInterval(Z)}},[a,n]);const A=async()=>{try{m(!0),f(null);const Z=await fetch(`${pe}/api/ladder/prize-pool/${n}`);if(Z.ok){const H=await Z.json();c(H)}else{const H=B();c(H)}}catch(Z){console.error("Error fetching prize pool data:",Z);const H=B();c(H),f("Using estimated data - API connection failed")}finally{m(!1)}},_=async()=>{try{const Z=await fetch(`${pe}/api/ladder/prize-pool/${n}/history`);if(Z.ok){const H=await Z.json();v(H)}}catch(Z){console.error("Error fetching historical data:",Z)}},k=async()=>{try{const Z=await fetch(`${pe}/api/ladder/prize-pool/${n}/winners`);if(Z.ok){const H=await Z.json();x(H)}}catch(Z){console.error("Error fetching winners:",Z)}},B=()=>{const Z=new Date,H=new Date(Z.getFullYear(),Math.floor(Z.getMonth()/2)*2,1),V=Math.floor((Z-H)/(1e3*60*60*24)),F=Math.floor(V/7*3),R=F*3,D=new Date(H);return D.setMonth(D.getMonth()+2),{currentPrizePool:R,totalMatches:F,nextDistribution:D.toISOString(),isEstimated:!0}},z=Z=>{switch(Z){case"499-under":return"499 & Under";case"500-549":return"500-549";case"550-plus":return"550+";default:return Z}},M=Z=>{o(Z),N(!1),I(!1)},O=Z=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Z),U=Z=>new Date(Z).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return a?e.createElement("div",{className:"prize-pool-modal"},e.createElement("div",{className:"prize-pool-modal-content"},e.createElement("div",{className:"modal-header"},e.createElement("h2",{style:{color:"#ff4444",margin:"0",fontSize:"1.8rem",textAlign:"center"}},"🏆 Prize Pool Tracker"),e.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem",marginTop:"1rem"}},e.createElement("label",{style:{color:"#ccc",fontWeight:"bold",fontSize:"1rem"}},"Select Ladder:"),e.createElement("select",{value:n,onChange:Z=>M(Z.target.value),style:{background:"rgba(0, 0, 0, 0.8)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",minWidth:"150px"}},e.createElement("option",{value:"499-under"},"499 & Under"),e.createElement("option",{value:"500-549"},"500-549"),e.createElement("option",{value:"550-plus"},"550+"))),e.createElement("div",{style:{marginTop:"0.5rem",textAlign:"center",color:"#ff4444",fontSize:"1.2rem",fontWeight:"bold"}},z(n)," Ladder"),e.createElement("div",{style:{position:"absolute",top:"20px",right:"20px",display:"flex",alignItems:"center",gap:"5px",fontSize:"0.8rem",color:"#00ff00"}},e.createElement("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#00ff00",animation:"pulse 2s infinite"}}),"Live"),e.createElement("button",{onClick:r,style:{position:"absolute",top:"15px",left:"20px",background:"none",border:"none",color:"#ccc",fontSize:"1.5rem",cursor:"pointer",padding:"5px",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:Z=>{Z.target.style.background="rgba(255, 255, 255, 0.1)",Z.target.style.color="#fff"},onMouseLeave:Z=>{Z.target.style.background="none",Z.target.style.color="#ccc"}},"×")),e.createElement("div",{className:"modal-body"},u&&!i?e.createElement("div",{style:{textAlign:"center",padding:"2rem"}},e.createElement("div",{className:"loading-spinner"}),e.createElement("p",{style:{color:"#ccc",marginTop:"1rem"}},"Loading prize pool data...")):e.createElement(e.Fragment,null,g&&e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"6px",padding:"8px",marginBottom:"1rem",fontSize:"0.9rem",color:"#ffc107"}},"⚠️ ",g),e.createElement("div",{style:{marginBottom:"2rem"}},e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"12px",padding:"1.5rem",textAlign:"center"}},e.createElement("div",{style:{fontSize:"2.5rem",fontWeight:"bold",color:"#ff4444"}},O((i==null?void 0:i.currentPrizePool)||0)),e.createElement("div",{style:{color:"#ccc",fontSize:"1rem"}},"Current Prize Pool"),(i==null?void 0:i.isEstimated)&&e.createElement("div",{style:{color:"#ffc107",fontSize:"0.9rem",marginTop:"8px"}},"(Estimated)"))),e.createElement("div",{style:{marginBottom:"2rem"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"1rem",fontSize:"1.3rem"}},"Prize Pool Details"),e.createElement("div",{style:{display:"grid",gap:"0.75rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",padding:"1rem"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},e.createElement("span",{style:{color:"#ccc"}},"Total Matches:"),e.createElement("span",{style:{color:"#fff",fontWeight:"bold"}},(i==null?void 0:i.totalMatches)||0)),e.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},e.createElement("span",{style:{color:"#ccc"}},"Next Distribution:"),e.createElement("span",{style:{color:"#fff"}},i!=null&&i.nextDistribution?U(i.nextDistribution):"TBD")),e.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},e.createElement("span",{style:{color:"#ccc"}},"Prize Split:"),e.createElement("span",{style:{color:"#fff"}},"50% 1st Place, 50% Most Improved")))),e.createElement("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"2rem"}},e.createElement("button",{onClick:()=>I(!C),style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",color:"#ffc107",padding:"12px 16px",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},onMouseEnter:Z=>{Z.target.style.background="rgba(255, 193, 7, 0.2)"},onMouseLeave:Z=>{Z.target.style.background="rgba(255, 193, 7, 0.1)"}},"🏅 ",C?"Hide":"Show"," Winners"),e.createElement("button",{onClick:()=>N(!E),style:{background:"rgba(0, 123, 255, 0.1)",border:"1px solid rgba(0, 123, 255, 0.3)",color:"#007bff",padding:"12px 16px",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},onMouseEnter:Z=>{Z.target.style.background="rgba(0, 123, 255, 0.2)"},onMouseLeave:Z=>{Z.target.style.background="rgba(0, 123, 255, 0.1)"}},"📊 ",E?"Hide":"Show"," History")),C&&e.createElement("div",{style:{marginBottom:"2rem"}},e.createElement("h3",{style:{color:"#ffc107",marginBottom:"1rem",fontSize:"1.3rem"}},"🏅 Recent Winners"),e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.05)",borderRadius:"8px",padding:"1rem"}},S.length>0?e.createElement("div",{style:{display:"grid",gap:"0.75rem"}},S.slice(0,5).map((Z,H)=>e.createElement("div",{key:H,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px"}},e.createElement("div",null,e.createElement("div",{style:{color:"#fff",fontWeight:"bold"}},Z.playerName),e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},Z.category," - ",U(Z.date))),e.createElement("div",{style:{color:"#ffc107",fontWeight:"bold"}},O(Z.amount))))):e.createElement("div",{style:{color:"#ccc",fontStyle:"italic",textAlign:"center"}},"No winners recorded yet"))),E&&e.createElement("div",{style:{marginBottom:"2rem"}},e.createElement("h3",{style:{color:"#007bff",marginBottom:"1rem",fontSize:"1.3rem"}},"📊 Prize Pool History"),e.createElement("div",{style:{background:"rgba(0, 123, 255, 0.05)",borderRadius:"8px",padding:"1rem"}},h.length>0?e.createElement("div",{style:{display:"grid",gap:"0.75rem"}},h.slice(0,5).map((Z,H)=>e.createElement("div",{key:H,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px"}},e.createElement("div",null,e.createElement("div",{style:{color:"#fff",fontWeight:"bold"}},Z.period),e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},Z.matches," matches")),e.createElement("div",{style:{color:"#007bff",fontWeight:"bold"}},O(Z.prizePool))))):e.createElement("div",{style:{color:"#ccc",fontStyle:"italic",textAlign:"center"}},"No historical data available"))))))):null},TW=({isOpen:a,onClose:r,playerName:t,selectedLadder:n,onMatchReported:o})=>{const[i,c]=b.useState([]),[u,m]=b.useState(null),[g,f]=b.useState(!0),[h,v]=b.useState(!1),[S,x]=b.useState(""),[E,N]=b.useState(""),[C,I]=b.useState(""),[A,_]=b.useState(""),[k,B]=b.useState(""),[z,M]=b.useState(!1),[O,U]=b.useState(""),[Z,H]=b.useState(!1),[V,F]=b.useState(null),[R,D]=b.useState(null),[j,X]=b.useState(0),[W,T]=b.useState([]),[G,te]=b.useState(null);b.useEffect(()=>{a&&(ne(),q(),P(),oe())},[a,t,n]);const P=async()=>{try{const ve=await fetch(`${pe}/api/monetization/payment-methods`);if(ve.ok){const J=await ve.json();T(J.paymentMethods),te(J),J.paymentMethods.length>0&&U(J.paymentMethods[0].id)}}catch(ve){console.error("Error loading payment methods:",ve)}},ne=async()=>{try{f(!0),x("");const ve=await fetch(`${pe}/api/ladder/front-range-pool-hub/ladders/${n}/matches?status=scheduled`);if(ve.ok){const Ge=((await ve.json()).matches||[]).filter(Le=>{var ze,gt,re,Be,Oe,Te;const de=((ze=Le.player1)==null?void 0:ze.email)||((re=(gt=Le.player1)==null?void 0:gt.unifiedAccount)==null?void 0:re.email),je=((Be=Le.player2)==null?void 0:Be.email)||((Te=(Oe=Le.player2)==null?void 0:Oe.unifiedAccount)==null?void 0:Te.email);return de===t||je===t}).map(Le=>{var de,je,ze,gt;return{_id:Le._id,senderName:((de=Le.player1)==null?void 0:de.firstName)+" "+((je=Le.player1)==null?void 0:je.lastName),receiverName:((ze=Le.player2)==null?void 0:ze.firstName)+" "+((gt=Le.player2)==null?void 0:gt.lastName),date:Le.scheduledDate?new Date(Le.scheduledDate).toISOString().split("T")[0]:"",time:Le.scheduledDate?new Date(Le.scheduledDate).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"",location:Le.location||"TBD",status:Le.status,createdAt:Le.createdAt||new Date().toISOString(),matchFormat:Le.matchFormat,raceLength:Le.raceLength}});c(Ge)}else console.error("Failed to fetch scheduled matches:",ve.status,ve.statusText),c([])}catch(ve){console.error("Error fetching pending matches:",ve),x("Failed to load pending matches"),c([])}finally{f(!1)}},q=async()=>{try{const ve=await fetch(`${pe}/api/monetization/membership/${t}`);if(ve.ok){const J=await ve.json();F(J.membership)}}catch(ve){console.error("Error fetching membership:",ve)}},oe=async()=>{try{const ve=await fetch(`${pe}/api/monetization/user-payment-data/${t}`);if(ve.ok){const J=await ve.json();D(J.paymentHistory),X(J.credits||0)}}catch(ve){console.error("Error loading user payment data:",ve)}},he=ve=>{m(ve),I(""),_(""),B(""),M(!1),x(""),N("")},be=()=>{if(!R)return"new";const ve=R.totalPayments||0,J=R.failedPayments||0,Ae=ve>0?(ve-J)/ve:0;return ve>=10&&Ae>=.95?"trusted":ve>=3&&Ae>=.8?"verified":"new"},nt=()=>j>=5,ye=async ve=>{if(ve.preventDefault(),!C||!A){x("Please select a winner and enter the score");return}if(!V||!V.isActive){x("❌ Active membership required to report matches. Please renew your membership first."),M(!0);return}nt()?await We():M(!0)},We=async()=>{try{if((await fetch(`${pe}/api/monetization/use-credits`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerEmail:t,amount:5,description:"Ladder Match Fee"})})).ok)await lt(),X(J=>J-5);else throw new Error("Failed to use credits")}catch(ve){console.error("Credit payment error:",ve),x("Credit payment failed. Please try again.")}},Ze=async ve=>{H(!0),x("");try{const J=!V||!V.isActive,Ae=J?10:5,Ge=[];if(Ge.push(fetch(`${pe}/api/monetization/record-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"match_fee",email:t,playerName:t,amount:5,paymentMethod:ve,matchId:u._id,playerId:t,notes:`Match fee for ${u.senderName} vs ${u.receiverName}`,status:"completed"})})),J&&Ge.push(fetch(`${pe}/api/monetization/record-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"membership",email:t,playerName:t,amount:5,paymentMethod:ve,playerId:t,notes:`Membership renewal for ${t}`,status:"completed"})})),(await Promise.all(Ge)).every(je=>je.ok))be()==="new"?(N("✅ Payment recorded! Your match is pending admin verification."),setTimeout(()=>{r(),o()},2e3)):await lt();else throw new Error("Failed to record payment(s)")}catch(J){console.error("Payment error:",J),x("Payment processing failed. Please try again.")}finally{H(!1)}},lt=async()=>{try{v(!0),x("");const ve={challengeId:u._id,winner:C,loser:C===u.senderName?u.receiverName:u.senderName,score:A,notes:k,reportedBy:t},J=await fetch(`${pe}/api/challenges/report-result`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ve)});if(J.ok){const Ae=await J.json();N("Match result reported successfully!"),c(Ge=>Ge.filter(Le=>Le._id!==u._id)),o&&o(Ae.challenge),setTimeout(()=>{r()},2e3)}else{const Ae=await J.json();throw new Error(Ae.message||"Failed to report match result")}}catch(ve){console.error("Error reporting match result:",ve),x(ve.message||"Failed to report match result")}finally{v(!1)}},Ve=ve=>new Date(ve).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),zt=ve=>{switch(ve){case"499-under":return"499 & Under";case"500-549":return"500-549";case"550-plus":return"550+";default:return ve}};return a?e.createElement("div",{className:"prize-pool-modal"},e.createElement("div",{className:"prize-pool-modal-content"},e.createElement("div",{className:"modal-header"},e.createElement("h2",{style:{color:"#ff4444",margin:"0",fontSize:"1.8rem",textAlign:"center"}},"🏓 Report Match Result"),e.createElement("div",{style:{marginTop:"0.5rem",textAlign:"center",color:"#ff4444",fontSize:"1.2rem",fontWeight:"bold"}},zt(n)," Ladder"),e.createElement("button",{onClick:r,style:{position:"absolute",top:"15px",left:"20px",background:"none",border:"none",color:"#ccc",fontSize:"1.5rem",cursor:"pointer",padding:"5px",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:ve=>{ve.target.style.background="rgba(255, 255, 255, 0.1)",ve.target.style.color="#fff"},onMouseLeave:ve=>{ve.target.style.background="none",ve.target.style.color="#ccc"}},"×")),e.createElement("div",{className:"modal-body"},g?e.createElement("div",{style:{textAlign:"center",padding:"2rem"}},e.createElement("div",{className:"loading-spinner"}),e.createElement("p",{style:{color:"#ccc",marginTop:"1rem"}},"Loading pending matches...")):e.createElement(e.Fragment,null,S&&e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"6px",padding:"8px",marginBottom:"1rem",fontSize:"0.9rem",color:"#ffc107"}},"⚠️ ",S),E&&e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"6px",padding:"8px",marginBottom:"1rem",fontSize:"0.9rem",color:"#4caf50"}},"✅ ",E),!u&&e.createElement("div",{style:{marginBottom:"2rem"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"1rem",fontSize:"1.3rem"}},"📋 Pending Matches to Report"),i.length===0?e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",padding:"2rem",textAlign:"center",color:"#ccc"}},e.createElement("div",{style:{fontSize:"2rem",marginBottom:"1rem"}},"🎉"),e.createElement("div",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"}},"No pending matches!"),e.createElement("div",{style:{fontSize:"0.9rem"}},"All your matches have been reported.")):e.createElement("div",{style:{display:"grid",gap:"0.75rem"}},i.map(ve=>e.createElement("div",{key:ve._id,style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"1rem",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:J=>{J.target.style.background="rgba(255, 255, 255, 0.08)",J.target.style.borderColor="rgba(255, 68, 68, 0.3)"},onMouseLeave:J=>{J.target.style.background="rgba(255, 255, 255, 0.05)",J.target.style.borderColor="rgba(255, 255, 255, 0.1)"},onClick:()=>he(ve)},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("div",null,e.createElement("div",{style:{color:"#fff",fontWeight:"bold",fontSize:"1.1rem"}},ve.senderName," vs ",ve.receiverName),e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem",marginTop:"0.25rem"}},"📅 ",Ve(ve.date)," at ",ve.time),ve.location&&e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},"📍 ",ve.location)),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.2)",color:"#ff4444",padding:"0.5rem 1rem",borderRadius:"6px",fontSize:"0.9rem",fontWeight:"bold"}},"Report Result")))))),u&&!z&&e.createElement("div",{style:{marginBottom:"2rem"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"1rem",fontSize:"1.3rem"}},"🏆 Report Match Result"),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem"}},e.createElement("h4",{style:{color:"#fff",margin:"0 0 0.75rem 0"}},"Match Details"),e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},e.createElement("div",null,e.createElement("strong",null,u.senderName)," vs ",e.createElement("strong",null,u.receiverName)),e.createElement("div",null,"📅 ",Ve(u.date)," at ",u.time),u.location&&e.createElement("div",null,"📍 ",u.location))),e.createElement("form",{onSubmit:ye},e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",color:"#ccc",marginBottom:"0.5rem",fontWeight:"bold"}},"Winner *"),e.createElement("select",{value:C,onChange:ve=>I(ve.target.value),style:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(0, 0, 0, 0.3)",color:"#fff",fontSize:"1rem"},required:!0},e.createElement("option",{value:""},"Select winner"),e.createElement("option",{value:u.senderName},u.senderName),e.createElement("option",{value:u.receiverName},u.receiverName))),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",color:"#ccc",marginBottom:"0.5rem",fontWeight:"bold"}},"Score *"),e.createElement("input",{type:"text",value:A,onChange:ve=>_(ve.target.value),placeholder:"e.g., 7-5, 9-3, etc.",style:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(0, 0, 0, 0.3)",color:"#fff",fontSize:"1rem"},required:!0})),e.createElement("div",{style:{marginBottom:"1.5rem"}},e.createElement("label",{style:{display:"block",color:"#ccc",marginBottom:"0.5rem",fontWeight:"bold"}},"Notes (optional)"),e.createElement("textarea",{value:k,onChange:ve=>B(ve.target.value),placeholder:"Any additional notes about the match...",rows:"3",style:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(0, 0, 0, 0.3)",color:"#fff",fontSize:"1rem",resize:"vertical"}})),e.createElement("div",{style:{display:"grid",gap:"0.75rem"}},e.createElement("button",{type:"submit",disabled:h||!C||!A,style:{background:"rgba(255, 68, 68, 0.8)",border:"none",color:"#fff",padding:"12px 16px",borderRadius:"8px",cursor:h||!C||!A?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold",opacity:h||!C||!A?.6:1,transition:"all 0.2s ease"},onMouseEnter:ve=>{!h&&C&&A&&(ve.target.style.background="rgba(255, 68, 68, 1)")},onMouseLeave:ve=>{ve.target.style.background="rgba(255, 68, 68, 0.8)"}},h?"Submitting...":"🏆 Report Match Result"),e.createElement("button",{type:"button",onClick:()=>{m(null),I(""),_(""),B("")},style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#ccc",padding:"12px 16px",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",transition:"all 0.2s ease"},onMouseEnter:ve=>{ve.target.style.background="rgba(255, 255, 255, 0.15)",ve.target.style.color="#fff"},onMouseLeave:ve=>{ve.target.style.background="rgba(255, 255, 255, 0.1)",ve.target.style.color="#ccc"}},"← Back to Matches")))),z&&e.createElement("div",{style:{marginBottom:"2rem"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"1rem",fontSize:"1.3rem"}},"💳 Payment Required - Membership & Match Fee"),e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem"}},e.createElement("div",{style:{color:"#ffc107",fontSize:"1rem",fontWeight:"bold",marginBottom:"0.5rem"}},"⚠️ Active Membership Required"),e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},!V||!V.isActive?"Your membership has expired. You need to renew your membership ($5/month) AND pay the match fee ($5) to report match results.":"Pay the $5 match fee to report your match result. Choose your preferred payment method below.")),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"}},e.createElement("span",{style:{color:"#fff",fontWeight:"bold"}},"Account Status:"),e.createElement("span",{style:{color:be()==="trusted"?"#4caf50":be()==="verified"?"#ff9800":"#f44336",fontWeight:"bold",textTransform:"uppercase",fontSize:"0.9rem"}},be()==="trusted"?"🟢 Instant Process":be()==="verified"?"🟡 Auto Process":"🔴 Needs Admin Approval")),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("span",{style:{color:"#ccc"}},"Available Credits:"),e.createElement("span",{style:{color:"#4caf50",fontWeight:"bold"}},"$",j.toFixed(2)))),nt()&&e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem"}},e.createElement("h3",{style:{color:"#4caf50",margin:"0 0 0.5rem 0",fontSize:"1.1rem"}},"💳 Use Credits"),e.createElement("p",{style:{color:"#ccc",margin:"0 0 1rem 0",fontSize:"0.9rem"}},"You have enough credits to pay for this match instantly!"),e.createElement("button",{onClick:We,style:{background:"rgba(76, 175, 80, 0.8)",color:"#fff",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",width:"100%",transition:"all 0.2s ease"},onMouseEnter:ve=>{ve.target.style.background="rgba(76, 175, 80, 1)"},onMouseLeave:ve=>{ve.target.style.background="rgba(76, 175, 80, 0.8)"}},"💳 Pay with Credits ($5.00)")),!nt()&&e.createElement("div",{style:{background:"rgba(33, 150, 243, 0.1)",border:"1px solid rgba(33, 150, 243, 0.3)",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem"}},e.createElement("h3",{style:{color:"#2196f3",margin:"0 0 0.5rem 0",fontSize:"1.1rem"}},"💳 Buy Credits for Instant Payment"),e.createElement("p",{style:{color:"#ccc",margin:"0 0 1rem 0",fontSize:"0.9rem"}},"Purchase credits to pay for matches instantly without verification!"),e.createElement("div",{style:{display:"flex",gap:"0.5rem"}},e.createElement("button",{onClick:()=>{window.open("/ladder","_blank")},style:{background:"rgba(33, 150, 243, 0.8)",color:"#fff",border:"none",padding:"0.75rem 1rem",borderRadius:"6px",fontSize:"0.9rem",fontWeight:"bold",cursor:"pointer",flex:1,transition:"all 0.2s ease"},onMouseEnter:ve=>{ve.target.style.background="rgba(33, 150, 243, 1)"},onMouseLeave:ve=>{ve.target.style.background="rgba(33, 150, 243, 0.8)"}},"💳 Buy Credits"),e.createElement("div",{style:{color:"#2196f3",fontSize:"0.9rem",display:"flex",alignItems:"center",padding:"0.75rem 0"}},"Current: $",j.toFixed(2)))),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem"}},e.createElement("div",{style:{color:"#fff",fontWeight:"bold",marginBottom:"0.75rem",fontSize:"1.1rem"}},"💰 Payment Summary"),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"}},e.createElement("span",{style:{color:"#ccc"}},"Match Fee:"),e.createElement("span",{style:{color:"#fff",fontWeight:"bold"}},"$5.00")),(!V||!V.isActive)&&e.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"}},e.createElement("span",{style:{color:"#ccc"}},"Membership Renewal:"),e.createElement("span",{style:{color:"#fff",fontWeight:"bold"}},"$5.00")),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(255, 255, 255, 0.1)",paddingTop:"0.5rem"}},e.createElement("span",{style:{color:"#ccc",fontWeight:"bold"}},"Total:"),e.createElement("span",{style:{color:"#4caf50",fontWeight:"bold",fontSize:"1.1rem"}},"$",!V||!V.isActive?"10.00":"5.00")),be()==="new"&&e.createElement("div",{style:{background:"rgba(255, 152, 0, 0.1)",border:"1px solid rgba(255, 152, 0, 0.3)",borderRadius:"6px",padding:"0.75rem",marginTop:"1rem"}},e.createElement("p",{style:{color:"#ff9800",margin:"0",fontSize:"0.9rem",fontWeight:"bold"}},"⚠️ New users require admin verification for payments"))),e.createElement("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"1.5rem"}},W.map(ve=>e.createElement("div",{key:ve.id,style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"1rem",transition:"all 0.2s ease"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"}},e.createElement("div",null,e.createElement("div",{style:{color:"#fff",fontWeight:"bold",fontSize:"1.1rem"}},ve.name),e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem",marginTop:"0.25rem"}},ve.instructions),ve.username&&e.createElement("div",{style:{color:"#4caf50",fontSize:"0.9rem",fontWeight:"bold",marginTop:"0.25rem"}},"Username: ",ve.username)),e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.8)",color:"#fff",padding:"0.5rem 1rem",borderRadius:"6px",fontSize:"0.9rem",fontWeight:"bold",minWidth:"80px",textAlign:"center"}},"$",!V||!V.isActive?"10":"5")),e.createElement("div",{style:{display:"flex",gap:"0.5rem"}},ve.paymentLink?e.createElement("a",{href:ve.paymentLink,target:"_blank",rel:"noopener noreferrer",style:{background:"rgba(76, 175, 80, 0.8)",color:"#fff",padding:"0.75rem 1rem",borderRadius:"6px",fontSize:"0.9rem",fontWeight:"bold",textDecoration:"none",textAlign:"center",flex:1,transition:"all 0.2s ease"},onMouseEnter:J=>{J.target.style.background="rgba(76, 175, 80, 1)"},onMouseLeave:J=>{J.target.style.background="rgba(76, 175, 80, 0.8)"}},"🔗 Pay Online"):e.createElement("button",{onClick:()=>Ze(ve.id),disabled:Z,style:{background:Z?"rgba(255, 255, 255, 0.1)":"rgba(76, 175, 80, 0.8)",color:"#fff",border:"none",padding:"0.75rem 1rem",borderRadius:"6px",fontSize:"0.9rem",fontWeight:"bold",cursor:Z?"not-allowed":"pointer",flex:1,transition:"all 0.2s ease",opacity:Z?.6:1},onMouseEnter:J=>{Z||(J.target.style.background="rgba(76, 175, 80, 1)")},onMouseLeave:J=>{J.target.style.background=Z?"rgba(255, 255, 255, 0.1)":"rgba(76, 175, 80, 0.8)"}},Z?"Processing...":"✅ Mark as Paid"))))),e.createElement("button",{type:"button",onClick:()=>M(!1),style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#ccc",padding:"12px 16px",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",transition:"all 0.2s ease",width:"100%"},onMouseEnter:ve=>{ve.target.style.background="rgba(255, 255, 255, 0.15)",ve.target.style.color="#fff"},onMouseLeave:ve=>{ve.target.style.background="rgba(255, 255, 255, 0.1)",ve.target.style.color="#ccc"}},"← Back to Match Form")))))):null},PW=({isOpen:a,onClose:r,playerEmail:t})=>{const[n,o]=b.useState("overview"),[i,c]=b.useState(!1),[u,m]=b.useState(""),[g,f]=b.useState(""),[h,v]=b.useState({credits:0,membership:null,paymentHistory:[],trustLevel:"new",stats:{}}),[S,x]=b.useState({amount:20,paymentMethod:"",customAmount:""}),[E,N]=b.useState({paymentMethod:"",duration:"monthly"}),[C,I]=b.useState([]),[A,_]=b.useState({x:0,y:0}),[k,B]=b.useState(!1),z=b.useRef({x:0,y:0});b.useEffect(()=>{a&&t&&(Z(),H(),_({x:0,y:0}))},[a,t]);const M=P=>{B(!0),z.current={x:P.clientX-A.x,y:P.clientY-A.y},document.body.style.userSelect="none"},O=P=>{k&&_({x:P.clientX-z.current.x,y:P.clientY-z.current.y})},U=()=>{B(!1),document.body.style.userSelect=""};b.useEffect(()=>(k?(window.addEventListener("mousemove",O),window.addEventListener("mouseup",U)):(window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",U)),()=>{window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",U)}),[k]);const Z=async()=>{var P,ne;try{c(!0),console.log(`🔍 Loading account data for: ${t}`),console.log(`📡 URL: ${pe}/api/monetization/user-payment-data/${t}`);const q=await fetch(`${pe}/api/monetization/user-payment-data/${t}`);if(console.log(`📊 Response status: ${q.status}`),q.ok){const oe=await q.json();console.log("📊 Account data loaded:",oe),v({credits:oe.credits||0,membership:oe.membership||null,paymentHistory:((P=oe.paymentHistory)==null?void 0:P.recentPayments)||[],trustLevel:((ne=oe.paymentHistory)==null?void 0:ne.trustLevel)||"new",stats:oe.paymentHistory||{}}),m("")}else{const oe=await q.json().catch(()=>({}));console.error("❌ Failed to load account data:",q.status,oe),v({credits:0,membership:null,paymentHistory:[],trustLevel:"new",stats:{totalPayments:0,failedPayments:0,successRate:0}}),m("Payment system temporarily unavailable. Using default settings.")}}catch(q){console.error("❌ Network error loading account data:",q),v({credits:0,membership:null,paymentHistory:[],trustLevel:"new",stats:{totalPayments:0,failedPayments:0,successRate:0}}),m("Network error. Using default settings.")}finally{c(!1)}},H=async()=>{try{const P=await fetch(`${pe}/api/monetization/payment-methods`);if(P.ok){const ne=await P.json();I(ne.paymentMethods||[]),ne.paymentMethods.length>0&&(x(q=>({...q,paymentMethod:ne.paymentMethods[0].id})),N(q=>({...q,paymentMethod:ne.paymentMethods[0].id})))}}catch(P){console.error("Error loading payment methods:",P)}},V=async()=>{try{c(!0),m("");const P=S.customAmount?parseFloat(S.customAmount):S.amount;if(!P||P<5){m("Minimum purchase amount is $5.00");return}const ne=await fetch(`${pe}/api/monetization/purchase-credits`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerEmail:t,amount:P,paymentMethod:S.paymentMethod,paymentData:{source:"payment_dashboard"}})});if(ne.ok)f(`✅ Successfully purchased $${P.toFixed(2)} in credits!`),await Z(),x({amount:20,paymentMethod:S.paymentMethod,customAmount:""});else{const q=await ne.json();m(q.message||"Failed to purchase credits")}}catch(P){console.error("Error purchasing credits:",P),m("Network error purchasing credits")}finally{c(!1)}},F=async()=>{try{c(!0),m("");const P=await fetch(`${pe}/api/monetization/record-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerEmail:t,amount:5,paymentMethod:E.paymentMethod,description:"Monthly Ladder Membership",type:"membership",requiresVerification:h.trustLevel==="new",notes:`Membership purchase via dashboard - ${E.duration}`})});if(P.ok)(await P.json()).requiresVerification?f("✅ Membership payment recorded! Pending admin verification."):f("✅ Membership activated successfully!"),await Z();else{const ne=await P.json();m(ne.message||"Failed to purchase membership")}}catch(P){console.error("Error purchasing membership:",P),m("Network error purchasing membership")}finally{c(!1)}},R=P=>{switch(P){case"trusted":return"#4caf50";case"verified":return"#ff9800";default:return"#f44336"}},D=P=>{switch(P){case"trusted":return"🟢";case"verified":return"🟡";default:return"🔴"}},j=P=>{switch(P){case"trusted":return"Instant Process";case"verified":return"Auto Process";default:return"Needs Admin Approval"}},X=P=>new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),W=()=>{var P,ne,q,oe,he;return e.createElement("div",null,e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"}},e.createElement("h3",{style:{color:"#fff",margin:"0 0 1rem 0",fontSize:"1.2rem"}},"📊 Account Status"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"}},e.createElement("div",null,e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem",marginBottom:"0.25rem"}},"Available Credits"),e.createElement("div",{style:{color:"#4caf50",fontSize:"1.5rem",fontWeight:"bold"}},"$",h.credits.toFixed(2))),e.createElement("div",null,e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem",marginBottom:"0.25rem"}},"Payment Status"),e.createElement("div",{style:{color:R(h.trustLevel),fontSize:"0.8rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"}},D(h.trustLevel)," ",j(h.trustLevel)))),e.createElement("div",{style:{background:(P=h.membership)!=null&&P.isActive?"rgba(76, 175, 80, 0.1)":"rgba(255, 152, 0, 0.1)",border:`1px solid ${(ne=h.membership)!=null&&ne.isActive?"rgba(76, 175, 80, 0.3)":"rgba(255, 152, 0, 0.3)"}`,borderRadius:"8px",padding:"1rem"}},e.createElement("div",{style:{color:(q=h.membership)!=null&&q.isActive?"#4caf50":"#ff9800",fontWeight:"bold",marginBottom:"0.5rem"}},(oe=h.membership)!=null&&oe.isActive?"✅ Active Membership":"⚠️ Membership Expired"),(he=h.membership)!=null&&he.isActive?e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},"Expires: ",X(h.membership.expiresAt)):e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},"Renew your membership to report matches"))),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"}},e.createElement("h3",{style:{color:"#fff",margin:"0 0 1rem 0",fontSize:"1.2rem"}},"⚡ Quick Actions"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"}},e.createElement("button",{onClick:()=>o("credits"),style:{background:"linear-gradient(45deg, #4CAF50, #45a049)",color:"white",border:"none",borderRadius:"8px",padding:"1rem",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"}},"💳 Buy Credits"),e.createElement("button",{onClick:()=>o("membership"),style:{background:"linear-gradient(45deg, #ff9800, #f57c00)",color:"white",border:"none",borderRadius:"8px",padding:"1rem",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"}},"🎯 Renew Membership"))),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"1rem"}},e.createElement("h3",{style:{color:"#fff",margin:"0 0 1rem 0",fontSize:"1.2rem"}},"📈 Payment Statistics"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem",color:"#ccc",fontSize:"0.9rem"}},e.createElement("div",null,e.createElement("div",{style:{color:"#4caf50",fontSize:"1.2rem",fontWeight:"bold"}},h.stats.totalPayments||0),e.createElement("div",null,"Total Payments")),e.createElement("div",null,e.createElement("div",{style:{color:"#ff9800",fontSize:"1.2rem",fontWeight:"bold"}},((h.stats.successRate||0)*100).toFixed(0),"%"),e.createElement("div",null,"Success Rate")),e.createElement("div",null,e.createElement("div",{style:{color:"#2196f3",fontSize:"1.2rem",fontWeight:"bold"}},h.stats.failedPayments||0),e.createElement("div",null,"Failed Payments")))))},T=()=>e.createElement("div",null,e.createElement("h3",{style:{color:"#fff",margin:"0 0 1rem 0",fontSize:"1.2rem"}},"💳 Purchase Credits"),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"}},e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{color:"#ccc",display:"block",marginBottom:"0.5rem"}},"Credit Amount"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginBottom:"1rem"}},[20,50,100,200].map(P=>e.createElement("button",{key:P,onClick:()=>x(ne=>({...ne,amount:P,customAmount:""})),style:{background:S.amount===P?"rgba(76, 175, 80, 0.8)":"rgba(255, 255, 255, 0.1)",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",padding:"0.75rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold"}},"$",P))),e.createElement("input",{type:"number",placeholder:"Custom amount (min $5)",value:S.customAmount,onChange:P=>x(ne=>({...ne,customAmount:P.target.value,amount:0})),style:{width:"100%",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem"}})),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{color:"#ccc",display:"block",marginBottom:"0.5rem"}},"Payment Method"),e.createElement("select",{value:S.paymentMethod,onChange:P=>x(ne=>({...ne,paymentMethod:P.target.value})),style:{width:"100%",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem"}},C.map(P=>e.createElement("option",{key:P.id,value:P.id},P.name)))),e.createElement("button",{onClick:V,disabled:i,style:{width:"100%",background:i?"rgba(255, 255, 255, 0.1)":"linear-gradient(45deg, #4CAF50, #45a049)",color:"white",border:"none",borderRadius:"8px",padding:"1rem",cursor:i?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"}},i?"Processing...":`Purchase $${S.customAmount||S.amount} Credits`)),e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"8px",padding:"1rem"}},e.createElement("h4",{style:{color:"#4caf50",margin:"0 0 0.5rem 0"}},"💡 Why Buy Credits?"),e.createElement("ul",{style:{color:"#ccc",fontSize:"0.9rem",margin:0,paddingLeft:"1.5rem"}},e.createElement("li",null,"Instant match fee payments - no waiting for verification"),e.createElement("li",null,"No need to enter payment details for each match"),e.createElement("li",null,"Bulk discounts available for larger purchases"),e.createElement("li",null,"Credits never expire")))),G=()=>e.createElement("div",null,e.createElement("h3",{style:{color:"#fff",margin:"0 0 1rem 0",fontSize:"1.2rem"}},"🎯 Membership Management"),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"}},e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{color:"#ccc",display:"block",marginBottom:"0.5rem"}},"Payment Method"),e.createElement("select",{value:E.paymentMethod,onChange:P=>N(ne=>({...ne,paymentMethod:P.target.value})),style:{width:"100%",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem"}},C.map(P=>e.createElement("option",{key:P.id,value:P.id},P.name)))),e.createElement("div",{style:{background:"rgba(255, 152, 0, 0.1)",border:"1px solid rgba(255, 152, 0, 0.3)",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"}},e.createElement("div",{style:{color:"#ff9800",fontWeight:"bold",marginBottom:"0.5rem"}},"💰 Membership Fee: $5.00/month"),e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},h.trustLevel==="new"&&e.createElement("div",{style:{color:"#ff9800",fontWeight:"bold",marginBottom:"0.5rem"}},"⚠️ New users require admin verification"),"Active membership is required to report match results")),e.createElement("button",{onClick:F,disabled:i,style:{width:"100%",background:i?"rgba(255, 255, 255, 0.1)":"linear-gradient(45deg, #ff9800, #f57c00)",color:"white",border:"none",borderRadius:"8px",padding:"1rem",cursor:i?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"}},i?"Processing...":"Purchase Monthly Membership ($5.00)"))),te=()=>e.createElement("div",null,e.createElement("h3",{style:{color:"#fff",margin:"0 0 1rem 0",fontSize:"1.2rem"}},"📋 Payment History"),h.paymentHistory.length===0?e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"2rem",textAlign:"center",color:"#ccc"}},"No payment history found"):e.createElement("div",{style:{maxHeight:"400px",overflowY:"auto"}},h.paymentHistory.map((P,ne)=>e.createElement("div",{key:ne,style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"}},e.createElement("div",null,e.createElement("strong",{style:{color:"#fff"}},P.description),e.createElement("span",{style:{marginLeft:"1rem",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"bold",background:P.type==="membership"?"rgba(76, 175, 80, 0.2)":P.type==="match_fee"?"rgba(255, 152, 0, 0.2)":"rgba(156, 39, 176, 0.2)",color:P.type==="membership"?"#4caf50":P.type==="match_fee"?"#ff9800":"#9c27b0"}},P.type==="membership"?"MEMBERSHIP":P.type==="match_fee"?"MATCH FEE":"CREDITS")),e.createElement("span",{style:{color:"#4caf50",fontWeight:"bold",fontSize:"1.1rem"}},"$",P.amount.toFixed(2))),e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},e.createElement("div",null,e.createElement("strong",null,"Method:")," ",P.paymentMethod),e.createElement("div",null,e.createElement("strong",null,"Date:")," ",X(P.createdAt)),e.createElement("div",null,e.createElement("strong",null,"Status:"),e.createElement("span",{style:{color:P.status==="completed"?"#4caf50":P.status==="failed"?"#f44336":"#ff9800",marginLeft:"0.5rem"}},P.status.toUpperCase())))))));return e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:a?"flex":"none",alignItems:"flex-start",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)",paddingTop:"120px",paddingBottom:"20px"},onClick:r},e.createElement("div",{style:{transform:`translate(${A.x}px, ${A.y}px)`,cursor:k?"grabbing":"default",background:"linear-gradient(120deg, #232323 80%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"1.2rem",boxShadow:"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",width:"800px",maxWidth:"95vw",maxHeight:"calc(100vh - 160px)",display:"flex",flexDirection:"column",animation:"modalBounceIn 0.5s cubic-bezier(.21,1.02,.73,1.01)",position:"relative",fontFamily:"inherit",boxSizing:"border-box"},onClick:P=>P.stopPropagation()},e.createElement("div",{onMouseDown:M,style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#e53e3e",padding:"0.3rem .5rem",borderTopLeftRadius:"1.2rem",borderTopRightRadius:"1.2rem",cursor:k?"grabbing":"grab",userSelect:"none",gap:"1rem"}},e.createElement("h2",{style:{margin:0,fontSize:"1rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.02em",color:"#fff",textShadow:"0 1px 12px #000a",flex:1}},"💳 Payment Dashboard"),e.createElement("button",{onClick:r,style:{background:"transparent",border:"none",color:"#fff",fontSize:"1.2rem",cursor:"pointer",padding:"0.2rem",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px"},onMouseEnter:P=>{P.target.style.background="rgba(255, 255, 255, 0.2)"},onMouseLeave:P=>{P.target.style.background="transparent"}},"×")),e.createElement("div",{style:{padding:"1rem 0",maxHeight:"calc(100vh - 240px)",overflowY:"auto"}},u&&e.createElement("div",{style:{background:"rgba(244, 67, 54, 0.1)",border:"1px solid rgba(244, 67, 54, 0.3)",borderRadius:"6px",padding:"12px",marginBottom:"1rem",color:"#f44336"}},"⚠️ ",u),g&&e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"6px",padding:"12px",marginBottom:"1rem",color:"#4caf50"}},g),e.createElement("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"}},[{id:"overview",label:"📊 Overview",icon:"📊"},{id:"credits",label:"💳 Credits",icon:"💳"},{id:"membership",label:"🎯 Membership",icon:"🎯"},{id:"history",label:"📋 History",icon:"📋"}].map(P=>e.createElement("button",{key:P.id,onClick:()=>o(P.id),style:{background:n===P.id?"rgba(76, 175, 80, 0.8)":"transparent",color:n===P.id?"#fff":"#ccc",border:"none",borderRadius:"6px 6px 0 0",padding:"0.75rem 1rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold",transition:"all 0.2s ease"}},P.label))),n==="overview"&&W(),n==="credits"&&T(),n==="membership"&&G(),n==="history"&&te())))},Id=({playerName:a,playerLastName:r,senderEmail:t,userPin:n,userType:o,isAdmin:i=!1,showClaimForm:c=!1,initialView:u="main",isPublicView:m=!1,onClaimLadderPosition:g,claimedPositions:f=new Set,isPositionClaimed:h=()=>!1})=>{const v=Qn(),[S,x]=b.useState(u),[E,N]=b.useState(null),[C,I]=b.useState([]),[A,_]=b.useState(!0),[k,B]=b.useState(null),[z,M]=b.useState(!1),[O,U]=b.useState({firstName:"",lastName:"",email:"",pin:""}),[Z,H]=b.useState(!1),[V,F]=b.useState(!1),[R,D]=b.useState({firstName:"",lastName:"",email:"",phone:""}),[j,X]=b.useState(!1),[W,T]=b.useState(!1),[G,te]=b.useState(null),[P,ne]=b.useState(!1),[q,oe]=b.useState("499-under"),[he,be]=b.useState(!1),[nt,ye]=b.useState(!1),[We,Ze]=b.useState([]),[lt,Ve]=b.useState(!1),[zt,ve]=b.useState(!1),[J,Ae]=b.useState(!1),[Ge,Le]=b.useState(null),[de,je]=b.useState(null),[ze,gt]=b.useState("challenge"),[re,Be]=b.useState([]),[Oe,Te]=b.useState([]),[rt,pt]=b.useState([]),[jt,ba]=b.useState(!1),[da,ta]=b.useState(!1),[wa,rn]=b.useState(!1),[He,ht]=b.useState(null),[Qt,on]=b.useState(!1),[Tt,Va]=b.useState(null),[ka,La]=b.useState([]),[sn,wn]=b.useState(!1);b.useEffect(()=>{Jn(),ss(),Dn(),Wa()},[q]),b.useEffect(()=>{S==="matches"&&Mn()},[S,E==null?void 0:E.email]),b.useEffect(()=>{S==="challenges"&&Dn()},[S,E==null?void 0:E.email,q]),b.useEffect(()=>{E&&E.ladder&&E.ladder!=="Guest"&&E.ladder!=="League Player - Claim Account"&&E.ladder!=="Not Recognized"&&q==="499-under"&&!nt&&(console.log("🔄 Setting selectedLadder to user ladder:",E.ladder),oe(E.ladder))},[E]);const Wa=async()=>{if(t){console.log("Loading profile data for email:",t);try{const ie=await fetch(`${pe}/api/unified-auth/profile-data?email=${encodeURIComponent(t)}&appType=ladder&t=${Date.now()}`);if(console.log("Profile data response status:",ie.status),ie.ok){const Ce=await ie.json();if(console.log("Loaded profile data:",Ce),Ce.success&&Ce.profile){const ot={firstName:a,lastName:r,email:t,phone:"",preferredContacts:[],locations:Ce.profile.locations||"",availability:Ce.profile.availability||{}};console.log("Setting new playerInfo:",ot),console.log("playerInfo.locations:",ot.locations),te(ot)}else console.log("No profile data found, setting default playerInfo"),te({firstName:a,lastName:r,email:t,phone:"",preferredContacts:[],locations:"",availability:{}})}else console.log("Profile data response not ok:",ie.status)}catch(ie){console.error("Error loading profile data:",ie)}}};b.useEffect(()=>{c&&M(!0)},[c]);const Jn=async()=>{var ie;try{_(!0);const ot=await(await fetch(`${pe}/api/ladder/ladders/${q}/players`)).json();console.log("Ladder API response:",ot),ot&&Array.isArray(ot)?(I(ot),console.log(`Loaded ${ot.length} players from ${q} ladder`)):console.error("Invalid ladder data format:",ot);const it=localStorage.getItem("unifiedUserData");if(it)try{const mt=JSON.parse(it);if(console.log("🔍 Found unified user data:",mt),mt.ladderProfile){const $t=mt.ladderProfile;N({playerId:"ladder",name:`${mt.firstName} ${mt.lastName}`,firstName:mt.firstName,lastName:mt.lastName,email:mt.email,fargoRate:$t.fargoRate,ladder:$t.ladderName,position:$t.position,immunityUntil:$t.immunityUntil,activeChallenges:[],canChallenge:$t.isActive&&!!((ie=mt.unifiedAccount)!=null&&ie.hasUnifiedAccount),unifiedAccount:mt.unifiedAccount,stats:{wins:$t.wins,losses:$t.losses,totalMatches:$t.totalMatches}}),console.log("✅ Set user ladder data from unified profile")}}catch(mt){console.error("Error parsing unified user data:",mt)}console.log("🔍 senderEmail exists:",!!t,"Value:",t),t?(console.log("🚀 Calling checkPlayerStatus for:",t),await Sn(t)):N({playerId:"guest",name:`${a} ${r}`,firstName:a,lastName:r,email:null,fargoRate:450,ladder:"499-under",position:"Guest",immunityUntil:null,activeChallenges:[],canChallenge:!1})}catch(Ce){console.error("Error loading ladder data:",Ce),N({playerId:"guest",name:`${a} ${r}`,firstName:a,lastName:r,email:t,fargoRate:450,ladder:"499-under",position:"Guest",immunityUntil:null,activeChallenges:[],canChallenge:!1})}finally{_(!1)}},ss=async()=>{Ze(["Legends Brews & Cues","Antiques","Rac m","Westside Billiards","Bijou Billiards","Crooked Cue","Back on the Boulevard","Main Street Tavern","Murray Street Darts","My House"])},Sn=async ie=>{var Ce;try{console.log("🔍 Checking player status for email:",ie);const it=await(await fetch(`${pe}/api/ladder/player-status/${ie}`)).json();console.log("📋 Player status response:",it),B(it),it.isLadderPlayer?N({playerId:"ladder",name:`${it.ladderInfo.firstName} ${it.ladderInfo.lastName}`,firstName:it.ladderInfo.firstName,lastName:it.ladderInfo.lastName,email:ie,fargoRate:it.ladderInfo.fargoRate,ladder:it.ladderInfo.ladderName,position:it.ladderInfo.position,immunityUntil:it.ladderInfo.immunityUntil,activeChallenges:[],canChallenge:it.ladderInfo.isActive&&!!((Ce=it.unifiedAccount)!=null&&Ce.hasUnifiedAccount),unifiedAccount:it.unifiedAccount,stats:it.ladderInfo.stats}):it.isLeaguePlayer?N({playerId:"league",name:`${it.leagueInfo.firstName} ${it.leagueInfo.lastName}`,firstName:it.leagueInfo.firstName,lastName:it.leagueInfo.lastName,email:ie,fargoRate:450,ladder:"499-under",position:"League Player - Claim Account",immunityUntil:null,activeChallenges:[],canChallenge:!1,needsClaim:!0}):N({playerId:"unknown",name:`${a} ${r}`,firstName:a,lastName:r,email:ie,fargoRate:450,ladder:"499-under",position:"Not Recognized",immunityUntil:null,activeChallenges:[],canChallenge:!1})}catch(ot){console.error("Error checking player status:",ot)}},ua=async ie=>{var Ce,ot,it,mt,$t,Jt,na;if(ie.preventDefault(),!O.firstName||!O.lastName){alert("Please enter both first and last name");return}!O.email&&!O.pin&&console.log("Attempting name-only access for ladder player"),H(!0);try{const It=await(await fetch(`${pe}/api/ladder/claim-account`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)})).json();if(It.success){const qs=`Access granted!

You are recognized as a ${It.message}.

You now have access to both league and ladder systems.

The system will automatically show the appropriate features for your player type.`;if(alert(qs),It.playerInfo&&N({playerId:It.playerType,name:`${It.playerInfo.firstName} ${It.playerInfo.lastName}`,firstName:It.playerInfo.firstName,lastName:It.playerInfo.lastName,email:It.playerInfo.email,fargoRate:((Ce=It.ladderInfo)==null?void 0:Ce.fargoRate)||450,ladder:((ot=It.ladderInfo)==null?void 0:ot.ladderName)||"499-under",position:((it=It.ladderInfo)==null?void 0:it.position)||It.message,immunityUntil:((mt=It.ladderInfo)==null?void 0:mt.immunityUntil)||null,activeChallenges:[],canChallenge:((($t=It.ladderInfo)==null?void 0:$t.isActive)||!1)&&!!((Jt=It.unifiedAccount)!=null&&Jt.hasUnifiedAccount),stats:((na=It.ladderInfo)==null?void 0:na.stats)||{wins:0,losses:0},needsClaim:!1}),M(!1),U({firstName:"",lastName:"",email:"",pin:""}),!t&&It.playerInfo){const ls=new CustomEvent("ladderLoginSuccess",{detail:{name:`${It.playerInfo.firstName} ${It.playerInfo.lastName}`,email:It.playerInfo.email,pin:It.playerInfo.pin||"",userType:It.playerType}});window.dispatchEvent(ls)}}else It.requiresApproval?(T(!0),te(It.playerInfo),D({firstName:It.playerInfo.firstName,lastName:It.playerInfo.lastName,email:"",phone:""}),M(!1),F(!0)):alert(It.error||"Failed to access account")}catch(ja){console.error("Error accessing account:",ja),alert("Failed to access account")}finally{H(!1)}},Na=async ie=>{if(ie.preventDefault(),!R.email){alert("Please enter your email address");return}X(!0);try{const ot=await(await fetch(`${pe}/api/ladder/apply-for-existing-ladder-account`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)})).json();ot.success?(alert(`Application submitted successfully!

You are recognized as ${R.firstName} ${R.lastName}, Position ${ot.playerInfo.position} in the ${ot.playerInfo.ladderName} ladder.

An admin will review your application and approve your access. You will be contacted at ${R.email} once approved.`),F(!1),D({firstName:"",lastName:"",email:"",phone:""}),T(!1),te(null)):alert(ot.error||"Failed to submit application")}catch(Ce){console.error("Error submitting application:",Ce),alert("Failed to submit application")}finally{X(!1)}},An=ie=>{x(ie)},Wr=(ie,Ce)=>{var $t,Jt,na,ja;if(console.log(`🔍 Ladder comparison: Challenger ${ie.firstName} ${ie.lastName} ladder="${ie.ladder}", Defender ${Ce.firstName} ${Ce.lastName} ladderName="${Ce.ladderName}"`),console.log("🔍 Challenger unifiedAccount:",ie.unifiedAccount),console.log("🔍 Defender unifiedAccount:",Ce.unifiedAccount),console.log("🔍 Challenger canChallenge:",ie.canChallenge),console.log("🔍 Defender hasUnifiedAccount:",($t=Ce.unifiedAccount)==null?void 0:$t.hasUnifiedAccount),ie.ladder!==Ce.ladderName)return console.log(`🚫 Challenge blocked: ${ie.firstName} ${ie.lastName} (${ie.ladder}) cannot challenge ${Ce.firstName} ${Ce.lastName} (${Ce.ladderName}) - Different ladder`),!1;if(!((Jt=ie.unifiedAccount)!=null&&Jt.hasUnifiedAccount)||!((na=Ce.unifiedAccount)!=null&&na.hasUnifiedAccount))return console.log(`🚫 Challenge blocked: ${ie.firstName} ${ie.lastName} cannot challenge ${Ce.firstName} ${Ce.lastName} - Unified account required`),!1;if(ie.email===((ja=Ce.unifiedAccount)==null?void 0:ja.email))return console.log(`🚫 Challenge blocked: ${ie.firstName} ${ie.lastName} cannot challenge themselves`),!1;if(!ie.isActive)return console.log(`🚫 Challenge blocked: ${ie.firstName} ${ie.lastName} is not active`),!1;if(!Ce.isActive)return console.log(`🚫 Challenge blocked: ${Ce.firstName} ${Ce.lastName} is not active`),!1;if(Ce.immunityUntil&&new Date(Ce.immunityUntil)>new Date)return console.log(`🚫 Challenge blocked: ${Ce.firstName} ${Ce.lastName} has immunity until ${Ce.immunityUntil}`),!1;const ot=ie.position,it=Ce.position,mt=ot-it;return mt>=-4&&mt<=0?(console.log(`✅ Standard Challenge allowed: ${ie.firstName} ${ie.lastName} (Position ${ot}) can challenge ${Ce.firstName} ${Ce.lastName} (Position ${it}) - ${Math.abs(mt)} positions above`),!0):mt>0&&mt<=5?(console.log(`✅ SmackDown allowed: ${ie.firstName} ${ie.lastName} (Position ${ot}) can challenge ${Ce.firstName} ${Ce.lastName} (Position ${it}) - ${mt} positions below`),!0):(console.log(`🚫 Challenge blocked: ${ie.firstName} ${ie.lastName} (Position ${ot}) cannot challenge ${Ce.firstName} ${Ce.lastName} (Position ${it}) - Position difference ${mt} is outside allowed range (-4 to +5)`),!1)},no=(ie,Ce)=>{var $t,Jt,na;if(!(($t=ie.unifiedAccount)!=null&&$t.hasUnifiedAccount)||!((Jt=Ce.unifiedAccount)!=null&&Jt.hasUnifiedAccount))return"No unified account";if(ie.email===((na=Ce.unifiedAccount)==null?void 0:na.email))return"Same player";if(!ie.isActive)return"Challenger inactive";if(!Ce.isActive)return"Defender inactive";if(Ce.immunityUntil&&new Date(Ce.immunityUntil)>new Date)return"Defender immune";const ot=ie.position,it=Ce.position,mt=ot-it;return mt<-4?`Too far above (${Math.abs(mt)} positions) - Max 4 positions above allowed`:mt>5?`Too far below (${mt} positions) - Max 5 positions below allowed for SmackDown`:"Eligible"},Dn=async()=>{var ie;if(t)try{const Ce=await fetch(`${pe}/api/ladder/challenges/pending/${encodeURIComponent(t)}`);if(Ce.ok){const mt=await Ce.json();Be(mt)}const ot=await fetch(`${pe}/api/ladder/challenges/sent/${encodeURIComponent(t)}`);if(ot.ok){const $t=(await ot.json()).filter(Jt=>{var na,ja,It;return!(((na=Jt.matchDetails)==null?void 0:na.entryFee)===0&&((It=(ja=Jt.challengePost)==null?void 0:ja.postContent)!=null&&It.toLowerCase().includes("admin")))});Te($t)}const it=await fetch(`${pe}/api/ladder/front-range-pool-hub/ladders/${q}/matches?status=scheduled`);if(it.ok){const $t=((ie=(await it.json()).matches)==null?void 0:ie.filter(Jt=>{var na,ja;return((na=Jt.player1)==null?void 0:na.email)===t||((ja=Jt.player2)==null?void 0:ja.email)===t}))||[];pt($t)}}catch(Ce){console.error("Error loading challenges:",Ce)}},jr=(ie,Ce="challenge")=>{Le(ie),gt(Ce),Ve(!0)},hr=ie=>{console.log("🎯 Player clicked:",ie),console.log("📊 Setting modal state..."),ht(ie),on(!0),console.log("📊 Modal should now be visible"),Hr(ie)},Hr=async ie=>{var Ce;if(!((Ce=ie.unifiedAccount)!=null&&Ce.email)){Va(null);return}try{const ot=await fetch(`${pe}/api/ladder/matches/last-match/${encodeURIComponent(ie.unifiedAccount.email)}`);if(ot.ok){const it=await ot.json();Va(it)}else Va(null)}catch(ot){console.error("Error fetching last match data:",ot),Va(null)}},Mn=async()=>{if(!(E!=null&&E.email)){wn(!1);return}try{wn(!0);const ie=await fetch(`${pe}/api/ladder/player/${encodeURIComponent(E.email)}/matches`);if(ie.ok){const Ce=await ie.json();La(Ce)}else console.error("Failed to load player matches"),La([])}catch(ie){console.error("Error loading player matches:",ie),La([])}finally{wn(!1)}},yr=()=>{console.log("🧠 Smart Match clicked"),console.log("📊 Current ladder data:",C),console.log("👤 User ladder data:",E),console.log("🎯 Available defenders:",C.filter(ie=>{var Ce,ot;return((Ce=ie.unifiedAccount)==null?void 0:Ce.hasUnifiedAccount)&&((ot=ie.unifiedAccount)==null?void 0:ot.email)!==(E==null?void 0:E.email)})),Ae(!0)},br=ie=>{Dn(),Jn()},Xn=(ie,Ce)=>{Dn(),Jn()},Sa=ie=>{je(ie),ve(!0)},_o=()=>e.createElement("div",{className:"claim-account-modal"},e.createElement("div",{className:"claim-account-content"},e.createElement("h3",null,"First Time User Application"),e.createElement("p",null,"If you're a new user who wants to join the ladder system, please fill out this form. Your application will be sent to admin for approval. Existing users should use the login form above."),e.createElement("form",{onSubmit:ua},e.createElement("div",{className:"form-group"},e.createElement("label",null,"First Name:"),e.createElement("input",{type:"text",value:O.firstName||"",onChange:ie=>U({...O,firstName:ie.target.value}),placeholder:"Enter your first name",required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Last Name:"),e.createElement("input",{type:"text",value:O.lastName||"",onChange:ie=>U({...O,lastName:ie.target.value}),placeholder:"Enter your last name",required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Email Address: *"),e.createElement("input",{type:"email",value:O.email||"",onChange:ie=>U({...O,email:ie.target.value}),placeholder:"Enter your email address",required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Phone Number (Optional):"),e.createElement("input",{type:"tel",value:O.phone||"",onChange:ie=>U({...O,phone:ie.target.value}),placeholder:"Enter your phone number (optional)"})),e.createElement("div",{className:"form-actions"},e.createElement("button",{type:"submit",disabled:Z,className:"claim-btn"},Z?"Submitting...":"Submit Application"),e.createElement("button",{type:"button",onClick:()=>M(!1),className:"cancel-btn"},"Cancel"))))),ko=()=>e.createElement("div",{className:"claim-account-modal"},e.createElement("div",{className:"claim-account-content"},e.createElement("h3",null,"Admin Approval Required"),e.createElement("p",null,"We found you in our ladder system! You are ",e.createElement("strong",null,G==null?void 0:G.firstName," ",G==null?void 0:G.lastName),", Position ",G==null?void 0:G.position," in the ",G==null?void 0:G.ladderName," ladder."),e.createElement("p",null,"To access your account, please provide your email and optional phone number for admin approval."),e.createElement("form",{onSubmit:Na},e.createElement("div",{className:"form-group"},e.createElement("label",null,"First Name:"),e.createElement("input",{type:"text",value:R.firstName||"",disabled:!0,style:{backgroundColor:"#f0f0f0",color:"#666"}})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Last Name:"),e.createElement("input",{type:"text",value:R.lastName||"",disabled:!0,style:{backgroundColor:"#f0f0f0",color:"#666"}})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Email Address: *"),e.createElement("input",{type:"email",value:R.email||"",onChange:ie=>D({...R,email:ie.target.value}),placeholder:"Enter your email address",required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Phone Number (Optional):"),e.createElement("input",{type:"tel",value:R.phone||"",onChange:ie=>D({...R,phone:ie.target.value}),placeholder:"Enter your phone number (optional)"})),e.createElement("div",{className:"form-actions"},e.createElement("button",{type:"submit",disabled:j,className:"claim-btn"},j?"Submitting...":"Submit Application"),e.createElement("button",{type:"button",onClick:()=>{F(!1),T(!1),te(null),D({firstName:"",lastName:"",email:"",phone:""})},className:"cancel-btn"},"Cancel"))))),un=()=>{const ie=Ce=>{switch(Ce){case"499-under":return"499 & Under";case"500-549":return"500-549";case"550-plus":return"550+";default:return Ce}};return e.createElement("div",{className:"ladder-view"},e.createElement("div",{className:"ladder-header-section"},e.createElement("h2",null,ie(q)," Ladder"),e.createElement("p",null,"Current rankings and positions"),e.createElement("div",{className:"ladder-selector",style:{marginTop:"1rem",padding:"1rem",background:"rgba(0, 0, 0, 0.3)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",gap:"1rem",alignItems:"center",justifyContent:"center",flexWrap:"wrap"}},e.createElement("label",{style:{color:"#fff",fontWeight:"bold",whiteSpace:"nowrap",flexShrink:0,fontSize:"0.9rem"}},"Select Ladder:"),e.createElement("select",{value:q,onChange:Ce=>{oe(Ce.target.value),ye(!0)},style:{background:"rgba(0, 0, 0, 0.8)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"white",padding:"0.5rem 0.8rem",borderRadius:"8px",fontSize:"0.9rem",cursor:"pointer",minWidth:"120px",flexShrink:0}},e.createElement("option",{value:"499-under"},"499 & Under"),e.createElement("option",{value:"500-549"},"500-549"),e.createElement("option",{value:"550-plus"},"550+")))),e.createElement("div",{className:"ladder-table",style:{position:"relative"}},e.createElement("div",{className:"table-header"},e.createElement("div",{className:"header-cell"},"Rank"),e.createElement("div",{className:"header-cell"},"Player"),e.createElement("div",{className:"header-cell"},"FargoRate"),e.createElement("div",{className:"header-cell"},"W"),e.createElement("div",{className:"header-cell"},"L"),e.createElement("div",{className:"header-cell"},"Status")),C.map((Ce,ot)=>{var it,mt;return e.createElement("div",{key:Ce._id||ot,className:"table-row"},e.createElement("div",{className:"table-cell rank"},"#",Ce.position),e.createElement("div",{className:"table-cell name"},e.createElement("div",{className:"player-name-clickable",onClick:()=>hr(Ce)},Ce.firstName," ",Ce.lastName,!m&&!((it=Ce.unifiedAccount)!=null&&it.hasUnifiedAccount)&&e.createElement("span",{className:"no-account"},"*")),!m&&g&&!((mt=Ce.unifiedAccount)!=null&&mt.hasUnifiedAccount)&&!h({ladder:q,position:Ce.position})&&e.createElement("div",{style:{display:"inline-block",width:"fit-content",flexShrink:"0"}},e.createElement("button",{className:"compact-claim-btn",onClick:()=>g({firstName:Ce.firstName,lastName:Ce.lastName,fargoRate:Ce.fargoRate,ladder:q,position:Ce.position})},"🎯 Claim")),!m&&h({ladder:q,position:Ce.position})&&e.createElement("div",{style:{display:"inline-block",width:"fit-content",flexShrink:"0"}},e.createElement("div",{style:{background:"#4CAF50",color:"white",borderRadius:"1px",padding:"0px",fontSize:"0.6rem",marginTop:"0px",fontWeight:"400",textAlign:"center",height:"12px",lineHeight:"12px",display:"block",whiteSpace:"nowrap",width:"45px",boxSizing:"border-box",overflow:"hidden"}},"✅ Claimed")),(E==null?void 0:E.canChallenge)&&e.createElement("div",{style:{marginTop:"4px"}},Wr(E,Ce)?e.createElement(e.Fragment,null,e.createElement("button",{onClick:()=>jr(Ce,"challenge"),style:{background:"#ff4444",color:"white",border:"none",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",cursor:"pointer",marginRight:"4px"}},"Challenge"),e.createElement("button",{onClick:()=>jr(Ce,"smackdown"),style:{background:"#f59e0b",color:"white",border:"none",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",cursor:"pointer"}},"SmackDown")):e.createElement("div",{style:{fontSize:"0.6rem",color:"#888",fontStyle:"italic",marginTop:"2px"}},no(E,Ce)))),e.createElement("div",{className:"table-cell fargo"},Ce.fargoRate===0?"No FargoRate":Ce.fargoRate),e.createElement("div",{className:"table-cell wins"},Ce.wins||0),e.createElement("div",{className:"table-cell losses"},Ce.losses||0),e.createElement("div",{className:"table-cell status"},Ce.isActive?Ce.immunityUntil&&new Date(Ce.immunityUntil)>new Date?e.createElement("span",{className:"immune"},"Immune"):e.createElement("span",{className:"active"},"Active"):e.createElement("span",{className:"inactive"},"Inactive")))})),e.createElement("div",{className:"ladder-legend"},!m&&e.createElement("p",null,e.createElement("span",{className:"no-account"},"*")," = No unified account yet"),e.createElement("p",null,"Players need a unified account to participate in challenges"),e.createElement("p",null,e.createElement("strong",null,"Challenge Rules:")," Standard challenges up to 4 positions above, SmackDown up to 5 positions below"),e.createElement("p",null,e.createElement("strong",null,"Anyone can view the ladder - no account required!")),!m&&g&&e.createElement("p",{style:{color:"#4CAF50",fontWeight:"bold",marginTop:"8px",padding:"8px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"4px"}},"🎯 ",e.createElement("strong",null,"Claim Available Positions:"),' Click the green "Claim" button next to any position marked with * to claim it'),!m&&!(E!=null&&E.canChallenge)&&e.createElement("div",{style:{marginTop:"16px",padding:"12px",background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",color:"#ffc107"}},e.createElement("p",{style:{margin:"0 0 8px 0",fontWeight:"bold"}},"🔒 Challenge Features Locked"),e.createElement("p",{style:{margin:"0 0 8px 0",fontSize:"0.9rem"}},"To challenge other players, you need a unified account."),e.createElement("button",{onClick:()=>M(!0),style:{background:"#ff4444",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:"pointer",fontSize:"0.8rem"}},"Get Unified Account"))),!m&&e.createElement("button",{onClick:()=>x("main"),className:"back-btn"},"← Back to Main Menu"))},Kn=()=>e.createElement("div",{className:"challenges-view"},e.createElement("div",{className:"challenges-header-section"},e.createElement("h2",null,"My Challenges"),e.createElement("p",null,"Manage your challenges and responses")),e.createElement("div",{className:"challenges-section"},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"16px"}},"Pending Challenges (",re.length,")"),re.length===0?e.createElement("div",{style:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",padding:"20px",textAlign:"center",color:"#ccc"}},"No pending challenges to respond to."):e.createElement("div",{className:"challenges-list"},re.map(ie=>e.createElement("div",{key:ie._id,className:"challenge-card"},e.createElement("div",{className:"challenge-header"},e.createElement("h4",null,ie.challenger.firstName," ",ie.challenger.lastName," vs ",ie.defender.firstName," ",ie.defender.lastName),e.createElement("span",{className:`challenge-type challenge-${ie.challengeType}`},ie.challengeType.charAt(0).toUpperCase()+ie.challengeType.slice(1)," Match")),e.createElement("div",{className:"challenge-details"},e.createElement("p",null,e.createElement("strong",null,"Entry Fee:")," $",ie.matchDetails.entryFee),e.createElement("p",null,e.createElement("strong",null,"Race Length:")," ",ie.matchDetails.raceLength),e.createElement("p",null,e.createElement("strong",null,"Game Type:")," ",ie.matchDetails.gameType),e.createElement("p",null,e.createElement("strong",null,"Location:")," ",ie.matchDetails.location),e.createElement("p",null,e.createElement("strong",null,"Expires:")," ",new Date(ie.deadline).toLocaleDateString())),e.createElement("div",{className:"challenge-actions"},e.createElement("button",{onClick:()=>Sa(ie),style:{background:"#ff4444",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",cursor:"pointer",fontSize:"0.9rem"}},"Respond to Challenge")))))),e.createElement("div",{className:"challenges-section"},e.createElement("h3",{style:{color:"#ffc107",marginBottom:"16px"}},"Sent Challenges (",Oe.length,")"),Oe.length===0?e.createElement("div",{style:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",padding:"20px",textAlign:"center",color:"#ccc"}},"No sent challenges to display."):e.createElement("div",{className:"challenges-list"},Oe.map(ie=>e.createElement("div",{key:ie._id,className:"challenge-card"},e.createElement("div",{className:"challenge-header"},e.createElement("h4",null,ie.challenger.firstName," ",ie.challenger.lastName," vs ",ie.defender.firstName," ",ie.defender.lastName),e.createElement("span",{className:`challenge-type challenge-${ie.challengeType}`},ie.challengeType.charAt(0).toUpperCase()+ie.challengeType.slice(1)," Match")),e.createElement("div",{className:"challenge-details"},e.createElement("p",null,e.createElement("strong",null,"Status:")," ",e.createElement("span",{className:`status-${ie.status}`},ie.status)),e.createElement("p",null,e.createElement("strong",null,"Entry Fee:")," $",ie.matchDetails.entryFee),e.createElement("p",null,e.createElement("strong",null,"Race Length:")," ",ie.matchDetails.raceLength),e.createElement("p",null,e.createElement("strong",null,"Game Type:")," ",ie.matchDetails.gameType),e.createElement("p",null,e.createElement("strong",null,"Location:")," ",ie.matchDetails.location),e.createElement("p",null,e.createElement("strong",null,"Expires:")," ",new Date(ie.deadline).toLocaleDateString())))))),e.createElement("div",{className:"challenges-section"},e.createElement("h3",{style:{color:"#28a745",marginBottom:"16px"}},"Scheduled Matches (",rt.length,")"),rt.length===0?e.createElement("div",{style:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",padding:"20px",textAlign:"center",color:"#ccc"}},"No scheduled matches to display."):e.createElement("div",{className:"challenges-list"},rt.map(ie=>{var Ce,ot,it,mt;return e.createElement("div",{key:ie._id,className:"challenge-card"},e.createElement("div",{className:"challenge-header"},e.createElement("h4",null,(Ce=ie.player1)==null?void 0:Ce.firstName," ",(ot=ie.player1)==null?void 0:ot.lastName," vs ",(it=ie.player2)==null?void 0:it.firstName," ",(mt=ie.player2)==null?void 0:mt.lastName),e.createElement("span",{className:`challenge-type challenge-${ie.matchType}`},ie.matchType.charAt(0).toUpperCase()+ie.matchType.slice(1)," Match")),e.createElement("div",{className:"challenge-details"},e.createElement("p",null,e.createElement("strong",null,"Status:")," ",e.createElement("span",{className:"status-scheduled"},ie.challengeId?"Created by Admin":"Scheduled")),e.createElement("p",null,e.createElement("strong",null,"Race Length:")," ",ie.raceLength),e.createElement("p",null,e.createElement("strong",null,"Game Type:")," ",ie.gameType),e.createElement("p",null,e.createElement("strong",null,"Table Size:")," ",ie.tableSize),e.createElement("p",null,e.createElement("strong",null,"Scheduled Date:")," ",new Date(ie.scheduledDate).toLocaleDateString()),ie.venue&&e.createElement("p",null,e.createElement("strong",null,"Location:")," ",ie.venue)),e.createElement("div",{className:"challenge-actions"},e.createElement("button",{style:{background:"#28a745",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",cursor:"pointer",fontSize:"0.9rem"}},"View Match Details")))}))),!m&&e.createElement("button",{onClick:()=>x("main"),className:"back-btn"},"← Back to Main Menu")),$r=()=>e.createElement("div",{className:"matches-view"},e.createElement("div",{className:"view-header"},e.createElement("h2",null,"🎯 My Matches"),e.createElement("p",null,"View your active and completed matches")),sn?e.createElement("div",{className:"loading-container"},e.createElement("div",{className:"loading-spinner"}),e.createElement("p",null,"Loading your matches...")):ka.length===0?e.createElement("div",{className:"no-matches"},e.createElement("div",{className:"no-matches-icon"},"🎱"),e.createElement("h3",null,"No Matches Yet"),e.createElement("p",null,"You haven't played any matches yet. Challenge another player to get started!"),e.createElement("button",{onClick:()=>An("ladders"),className:"challenge-button"},"View Ladder & Challenge Players")):e.createElement("div",{className:"matches-list"},ka.map((ie,Ce)=>{var ot,it,mt,$t,Jt,na,ja,It;return e.createElement("div",{key:ie._id||Ce,className:"match-card"},e.createElement("div",{className:"match-header"},e.createElement("div",{className:"match-type"},ie.matchType==="challenge"?"⚔️ Challenge":ie.matchType==="ladder-jump"?"🚀 Ladder Jump":ie.matchType==="smackdown"?"💥 SmackDown":"🎯 Match"),e.createElement("div",{className:"match-status"},ie.status==="scheduled"?"📅 Scheduled":ie.status==="completed"?"✅ Completed":ie.status==="cancelled"?"❌ Cancelled":"⏳ Pending")),e.createElement("div",{className:"match-players"},e.createElement("div",{className:"player"},e.createElement("span",{className:"player-name"},(ot=ie.player1)==null?void 0:ot.firstName," ",(it=ie.player1)==null?void 0:it.lastName),e.createElement("span",{className:"player-position"},"#",(mt=ie.player1)==null?void 0:mt.position)),e.createElement("div",{className:"vs"},"VS"),e.createElement("div",{className:"player"},e.createElement("span",{className:"player-name"},($t=ie.player2)==null?void 0:$t.firstName," ",(Jt=ie.player2)==null?void 0:Jt.lastName),e.createElement("span",{className:"player-position"},"#",(na=ie.player2)==null?void 0:na.position))),ie.status==="completed"&&e.createElement("div",{className:"match-result"},e.createElement("div",{className:"winner"},"🏆 Winner: ",(ja=ie.winner)==null?void 0:ja.firstName," ",(It=ie.winner)==null?void 0:It.lastName),e.createElement("div",{className:"score"},"Score: ",ie.score)),e.createElement("div",{className:"match-details"},e.createElement("div",{className:"detail"},e.createElement("span",{className:"label"},"Date:"),e.createElement("span",{className:"value"},new Date(ie.scheduledDate).toLocaleDateString())),e.createElement("div",{className:"detail"},e.createElement("span",{className:"label"},"Game:"),e.createElement("span",{className:"value"},ie.gameType)),e.createElement("div",{className:"detail"},e.createElement("span",{className:"label"},"Race to:"),e.createElement("span",{className:"value"},ie.raceLength)),ie.venue&&e.createElement("div",{className:"detail"},e.createElement("span",{className:"label"},"Location:"),e.createElement("span",{className:"value"},ie.venue))))}))),er=()=>e.createElement(e.Fragment,null,e.createElement("div",{className:"user-status-card"},e.createElement("div",{className:"status-info"},e.createElement("h3",null,"Your Ladder Status"),e.createElement("div",{className:"status-details"},e.createElement("div",{className:"status-item"},e.createElement("span",{className:"label"},"Ladder:"),e.createElement("span",{className:"value"},(E==null?void 0:E.ladder)==="499-under"?"499 & Under":(E==null?void 0:E.ladder)==="500-549"?"500-549":"550+")),e.createElement("div",{className:"status-item"},e.createElement("span",{className:"label"},"Position:"),e.createElement("span",{className:"value"},E==null?void 0:E.position)),e.createElement("div",{className:"status-item"},e.createElement("span",{className:"label"},"FargoRate:"),e.createElement("span",{className:"value"},(E==null?void 0:E.fargoRate)===0?"No FargoRate":E==null?void 0:E.fargoRate)),(E==null?void 0:E.immunityUntil)&&e.createElement("div",{className:"status-item immunity"},e.createElement("span",{className:"label"},"Immunity Until:"),e.createElement("span",{className:"value"},new Date(E.immunityUntil).toLocaleDateString())),(E==null?void 0:E.needsClaim)&&e.createElement("div",{className:"status-item claim-notice"},e.createElement("span",{className:"label"},"Account Status:"),e.createElement("span",{className:"value"},"League Player - Claim your ladder account to participate!")),(E==null?void 0:E.playerId)==="unknown"&&e.createElement("div",{className:"status-item unknown-notice"},e.createElement("span",{className:"label"},"Account Status:"),e.createElement("span",{className:"value"},"Not recognized - Apply for ladder access below"))),!m&&(E==null?void 0:E.needsClaim)&&e.createElement("div",{className:"claim-account-section"},e.createElement("button",{onClick:()=>M(!0),className:"claim-account-btn"},"Login to Access Hub"),e.createElement("p",{className:"claim-info"},"Enter your name and email OR PIN to login and access both league and ladder systems")),!m&&(E==null?void 0:E.playerId)==="unknown"&&e.createElement("div",{className:"claim-account-section"},e.createElement("button",{onClick:()=>v("/ladder/signup"),className:"claim-account-btn"},"Apply for Ladder Access"),e.createElement("p",{className:"claim-info"},"Submit an application to join the ladder system")))),e.createElement("div",{className:"ladder-navigation"},e.createElement("div",{className:"nav-grid"},!m&&e.createElement(e.Fragment,null,e.createElement("div",{className:"nav-card",onClick:()=>An("ladders")},e.createElement("div",{className:"nav-icon"},"📊"),e.createElement("h3",null,"View Ladders"),e.createElement("p",null,"See all ladder positions and rankings")),(E==null?void 0:E.canChallenge)&&e.createElement(e.Fragment,null,e.createElement("div",{className:"nav-card",onClick:yr},e.createElement("div",{className:"nav-icon"},"🧠"),e.createElement("h3",null,"Smart Match"),e.createElement("p",null,"AI-powered challenge suggestions")),e.createElement("div",{className:"nav-card",onClick:()=>x("challenges")},e.createElement("div",{className:"nav-icon"},"⚔️"),e.createElement("h3",null,"My Challenges"),e.createElement("p",null,"Manage your challenges and responses"),re.length>0&&e.createElement("div",{style:{position:"absolute",top:"-8px",right:"-8px",background:"#ff4444",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:"bold"}},re.length)))),!m&&e.createElement("div",{className:"nav-card",onClick:()=>ta(!0)},e.createElement("div",{className:"nav-icon"},"🏓"),e.createElement("h3",null,"Report Match"),e.createElement("p",null,"Report match results and pay fees")),!m&&(E==null?void 0:E.playerId)==="ladder"&&e.createElement("div",{className:"nav-card",onClick:()=>An("matches")},e.createElement("div",{className:"nav-icon"},"🎯"),e.createElement("h3",null,"My Completed Matches"),e.createElement("p",null,"View your completed match history")),e.createElement("div",{className:"nav-card",onClick:()=>rn(!0)},e.createElement("div",{className:"nav-icon"},"💳"),e.createElement("h3",null,"Payment Dashboard"),e.createElement("p",null,"Manage credits, membership, and payments")),e.createElement("div",{className:"nav-card",onClick:()=>ba(!0)},e.createElement("div",{className:"nav-icon"},"💰"),e.createElement("h3",null,"Prize Pools"),e.createElement("p",null,"View current prize pools and winners")),!(E!=null&&E.canChallenge)&&(E==null?void 0:E.playerId)!=="guest"&&e.createElement("div",{className:"nav-card",style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",cursor:"default"}},e.createElement("div",{className:"nav-icon"},"🔒"),e.createElement("h3",null,"Challenge Features"),e.createElement("p",null,"Login to access Smart Match and challenge other players"),e.createElement("button",{onClick:()=>M(!0),style:{background:"#ff4444",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",marginTop:"8px",cursor:"pointer",fontSize:"0.9rem"}},"Login Now")),e.createElement("div",{className:"nav-card",onClick:()=>be(!0)},e.createElement("div",{className:"nav-icon"},"📋"),e.createElement("h3",null,"Ladder Rules"),e.createElement("p",null,"Read the complete ladder rules")),i&&e.createElement(e.Fragment,null,e.createElement("div",{className:"nav-card admin-card",onClick:()=>ne(!0)},e.createElement("div",{className:"nav-icon"},"📋"),e.createElement("h3",null,"Applications"),e.createElement("p",null,"Review ladder signup applications")),e.createElement("div",{className:"nav-card admin-card",onClick:()=>v("/ladder/admin")},e.createElement("div",{className:"nav-icon"},"⚙️"),e.createElement("h3",null,"Ladder Admin"),e.createElement("p",null,"Manage ladder players and settings"))))));return A?e.createElement("div",{className:"ladder-app-container"},e.createElement("div",{className:"loading-spinner"},e.createElement("div",{className:"spinner"}),e.createElement("p",null,"Loading ladder data..."))):e.createElement("div",{className:"ladder-app-container"},e.createElement(AW,null),e.createElement("div",{style:{marginTop:"10px",marginBottom:"30px",padding:"12px 16px",background:"rgba(255, 193, 7, 0.2)",border:"2px solid #ffc107",borderRadius:"8px",textAlign:"center",maxWidth:"600px",margin:"10px auto 30px auto",boxShadow:"0 3px 12px rgba(255, 193, 7, 0.3)",position:"relative",zIndex:999,display:"block",visibility:"visible",opacity:1}},e.createElement("p",{style:{margin:"0",color:"#ffc107",fontSize:"0.9rem",fontWeight:"600",lineHeight:"1.4",textShadow:"0 1px 3px rgba(0, 0, 0, 0.8)"}},e.createElement("strong",null,"⚠️ INDEPENDENT TOURNAMENT SERIES ⚠️"),e.createElement("br",null),"This ladder system is ",e.createElement("strong",null,"NOT")," affiliated with, endorsed by, or sanctioned by the Front Range Pool League,",e.createElement("br",null)," CueSports International, BCA Pool League, or USA Pool League.",e.createElement("br",null),"It is an independent tournament series operated by ",e.createElement("strong",null,"Legends Brews and Cues"),".")),e.createElement("div",{className:"ladder-header",style:{flexDirection:"column",textAlign:"center"}},e.createElement("div",{className:"ladder-title"},e.createElement("h1",null,"Ladder of Legends"),e.createElement("p",null,"Tournament Series - Challenge-based ladder system with rankings")),!m&&S!=="main"&&e.createElement("button",{onClick:()=>x("main"),style:{background:"linear-gradient(135deg, #e53e3e, #c53030)",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(229, 62, 62, 0.3)",marginTop:"1rem"},onMouseEnter:ie=>{ie.target.style.background="linear-gradient(135deg, #c53030, #a52a2a)",ie.target.style.transform="translateY(-1px)",ie.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.4)"},onMouseLeave:ie=>{ie.target.style.background="linear-gradient(135deg, #e53e3e, #c53030)",ie.target.style.transform="translateY(0)",ie.target.style.boxShadow="0 2px 8px rgba(229, 62, 62, 0.3)"}},"🏠 Back to Ladder Home")),S==="ladders"&&un(),S==="challenges"&&Kn(),S==="challenge"&&renderChallengeView(),S==="matches"&&$r(),S==="main"&&er(),e.createElement("div",{className:"ladder-footer"},e.createElement("p",null,"Challenge your way to the top! 🏆")),z&&_o(),V&&ko(),P&&e.createElement(IW,{onClose:()=>ne(!1)}),e.createElement(Kw,{isOpen:he,onClose:()=>be(!1),isMobile:!1}),lt&&Ge&&e.createElement(eS,{isOpen:lt,onClose:()=>Ve(!1),challenger:E,defender:Ge,challengeType:ze,onChallengeComplete:br}),zt&&de&&e.createElement(DW,{isOpen:zt,onClose:()=>ve(!1),challenge:de,currentUser:E,onChallengeResponse:Xn}),J&&e.createElement(MW,{isOpen:J,onClose:()=>Ae(!1),challenger:E,availableDefenders:C.filter(ie=>{var Ce,ot;return((Ce=ie.unifiedAccount)==null?void 0:Ce.hasUnifiedAccount)&&((ot=ie.unifiedAccount)==null?void 0:ot.email)!==(E==null?void 0:E.email)}),onChallengeComplete:br}),jt&&e.createElement(RW,{isOpen:jt,onClose:()=>ba(!1),selectedLadder:q}),da&&e.createElement(TW,{isOpen:da,onClose:()=>ta(!1),playerName:(E==null?void 0:E.email)||`${a} ${r}`,selectedLadder:q,onMatchReported:ie=>{Jn(),Dn()}}),wa&&e.createElement(PW,{isOpen:wa,onClose:()=>rn(!1),playerEmail:(E==null?void 0:E.email)||`${a}@example.com`}),Qt&&He&&Lp.createPortal(e.createElement("div",{className:"player-stats-modal",style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",width:"100vw",height:"100vh",background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999,backdropFilter:"blur(5px)",padding:"10px",boxSizing:"border-box",overflow:"hidden",transform:"none"}},e.createElement("div",{className:"player-stats-content",style:{background:"rgba(35, 35, 42, 0.16)",borderRadius:"18px",maxWidth:"90vw",width:window.innerWidth<=768?"280px":"400px",maxHeight:"80vh",overflowY:"auto",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 4px 32px #e53e3e22, 0 0 16px #e53e3e11",boxSizing:"border-box",position:"relative"}},e.createElement("div",{className:"player-stats-header"},e.createElement("h3",null,He.firstName," ",He.lastName),e.createElement("button",{className:"stats-close-btn",onClick:()=>on(!1)},"×")),e.createElement("div",{className:"player-stats-body"},e.createElement("div",{className:"stats-grid"},e.createElement("div",{className:"stat-item"},e.createElement("div",{className:"stat-label"},"Rank"),e.createElement("div",{className:"stat-value"},"#",He.position)),e.createElement("div",{className:"stat-item"},e.createElement("div",{className:"stat-label"},"FargoRate"),e.createElement("div",{className:"stat-value"},He.fargoRate===0?"No FargoRate":He.fargoRate)),e.createElement("div",{className:"stat-item"},e.createElement("div",{className:"stat-label"},"Wins"),e.createElement("div",{className:"stat-value wins"},He.wins||0)),e.createElement("div",{className:"stat-item"},e.createElement("div",{className:"stat-label"},"Losses"),e.createElement("div",{className:"stat-value losses"},He.losses||0)),e.createElement("div",{className:"stat-item"},e.createElement("div",{className:"stat-label"},"Status"),e.createElement("div",{className:"stat-value status"},He.isActive?He.immunityUntil&&new Date(He.immunityUntil)>new Date?e.createElement("span",{className:"immune"},"Immune"):e.createElement("span",{className:"active"},"Active"):e.createElement("span",{className:"inactive"},"Inactive"))),He.immunityUntil&&new Date(He.immunityUntil)>new Date&&e.createElement("div",{className:"stat-item"},e.createElement("div",{className:"stat-label"},"Immunity Until"),e.createElement("div",{className:"stat-value"},new Date(He.immunityUntil).toLocaleDateString())),e.createElement("div",{className:"stat-item"},e.createElement("div",{className:"stat-label"},"Last Match"),e.createElement("div",{className:"stat-value"},Tt?e.createElement("div",{className:"last-match-info"},e.createElement("div",{className:"match-opponent"},"vs ",Tt.opponentName),e.createElement("div",{className:`match-result ${Tt.result==="W"?"win":"loss"}`},Tt.result==="W"?"Won":"Lost"," ",Tt.score),e.createElement("div",{className:"match-type"},Tt.matchType==="challenge"?"Challenge Match":Tt.matchType==="ladder-jump"?"Ladder Jump":Tt.matchType==="smackdown"?"SmackDown":Tt.matchType==="smackback"?"SmackBack":Tt.matchType),e.createElement("div",{className:"player-role"},Tt.playerRole==="challenger"?"Challenger":Tt.playerRole==="defender"?"Defender":"Player"),e.createElement("div",{className:"match-date"},new Date(Tt.matchDate).toLocaleDateString())):e.createElement("span",{className:"no-match"},"No recent matches"))))))),document.body))},LW=()=>{const a=Qn(),[r,t]=b.useState("info"),[n,o]=b.useState(null),[i,c]=b.useState(!0),[u,m]=b.useState(null),[g,f]=b.useState(!1),[h,v]=b.useState(!1),[S,x]=b.useState({firstName:"",lastName:"",email:"",phone:"",experience:"beginner",fargoRate:"",currentLeague:"",currentRanking:"",message:"",payNow:!1,paymentMethod:"",availability:"",locations:""}),[E,N]=b.useState(!1),[C,I]=b.useState(null),[A,_]=b.useState(!1),[k,B]=b.useState(!1),[z,M]=b.useState(null),[O,U]=b.useState("");b.useEffect(()=>{R(),H(),Z(),new URLSearchParams(window.location.search).get("openModal")==="true"&&(console.log("Auto-opening ladder modal from URL parameter"),v(!0),window.history.replaceState({},document.title,window.location.pathname))},[]);const Z=async()=>{try{if(new URLSearchParams(window.location.search).get("paymentSuccess")==="true"){console.log("🎉 User returned from successful payment!"),alert("🎉 Welcome back! Your payment was successful and your ladder position has been claimed. You now have access to all ladder features!"),window.history.replaceState({},document.title,window.location.pathname);const he=JSON.parse(localStorage.getItem("lastClaimedPosition")||"{}");he.ladder&&he.position&&(P(he.ladder,he.position),localStorage.removeItem("lastClaimedPosition"))}}catch(q){console.error("Error checking payment status:",q)}},H=async()=>{try{const q=await fetch(`${pe}/api/payment-config`);if(q.ok){const oe=await q.json();I(oe)}}catch(q){console.error("Error loading payment config:",q)}},V=q=>{const oe=q.target.value;x(he=>({...he,paymentMethod:oe})),_(!!oe)},F=q=>{var be,nt,ye,We,Ze,lt,Ve;if(!C||!C.config)return"Loading payment instructions...";const oe=C.config.paymentMethods,he=C.config.contactInfo;switch(q){case"venmo":return(be=oe.venmo)!=null&&be.enabled?`Send $5 to: ${oe.venmo.username}
Note: "Ladder Membership - ${S.firstName} ${S.lastName}"`:"Venmo payments are currently unavailable";case"cashapp":return(nt=oe.cashapp)!=null&&nt.enabled?`Send $5 to: ${oe.cashapp.username}
Note: "Ladder Membership - ${S.firstName} ${S.lastName}"`:"CashApp payments are currently unavailable";case"creditCard":return(ye=oe.creditCard)!=null&&ye.enabled?`Credit/Debit card payments available. Contact: ${(he==null?void 0:he.adminPhone)||"frbcapl@gmail.com"}`:"Credit card payments are currently unavailable";case"applePay":return(We=oe.applePay)!=null&&We.enabled?`Apple Pay available. Contact: ${(he==null?void 0:he.adminPhone)||"frbcapl@gmail.com"}`:"Apple Pay is currently unavailable";case"googlePay":return(Ze=oe.googlePay)!=null&&Ze.enabled?`Google Pay available. Contact: ${(he==null?void 0:he.adminPhone)||"frbcapl@gmail.com"}`:"Google Pay is currently unavailable";case"cash":return(lt=oe.cash)!=null&&lt.enabled?`Cash payments accepted. Contact: ${(he==null?void 0:he.adminPhone)||"frbcapl@gmail.com"}`:"Cash payments are currently unavailable";case"check":return(Ve=oe.check)!=null&&Ve.enabled?`Check payments accepted. Contact: ${(he==null?void 0:he.adminPhone)||"frbcapl@gmail.com"}`:"Check payments are currently unavailable";default:return"Please select a payment method"}},R=async()=>{try{c(!0);const q=await fetch(`${pe}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:"guest@frontrangepool.com"})});if(q.ok){const oe=await q.json();o(oe.user),console.log("Guest user authenticated:",oe.user)}else{const oe=await q.json();console.error("Guest authentication failed:",oe),m("Failed to authenticate guest user")}}catch(q){console.error("Error authenticating guest:",q),m("Network error during authentication")}finally{c(!1)}},D=()=>{a("/")},j=()=>{console.log("Opening join modal..."),B(!1),f(!0)},X=q=>{console.log("Opening claim modal for position:",q),M(q),B(!0);const oe=Math.floor(1e3+Math.random()*9e3).toString();U(oe),x({firstName:q.firstName,lastName:q.lastName,email:"",phone:"",experience:"beginner",fargoRate:q.fargoRate||"",currentLeague:"",currentRanking:"",message:"",payNow:!1,paymentMethod:"",availability:"",locations:""}),f(!0)},W=async q=>{if(q.preventDefault(),!S.firstName||!S.lastName||!S.email){alert("Please fill in all required fields (First Name, Last Name, and Email)");return}N(!0);try{let oe="";if(k)if(S.payNow&&S.paymentMethod){console.log("🔍 Creating payment session for claim..."),console.log("Payment Method:",S.paymentMethod),console.log("🚀 About to call payment API for claim..."),console.log("🔍 Request body for claim:",{playerName:`${S.firstName} ${S.lastName}`,email:S.email,paymentMethod:S.paymentMethod,amount:5,claimData:{ladder:z.ladder,position:z.position,generatedPin:O}});const he=await fetch(`${pe}/api/monetization/create-membership-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerName:`${S.firstName} ${S.lastName}`,email:S.email,paymentMethod:S.paymentMethod,amount:5,claimData:{ladder:z.ladder,position:z.position,generatedPin:O}})});console.log("Payment Response Status:",he.status);const be=await he.json();if(console.log("Payment Response Data:",be),!he.ok)throw new Error("Failed to create payment session. Please try again.");if(console.log("Payment session created for claim:",be),be.paymentType==="square_redirect"&&be.paymentUrl){localStorage.setItem("lastClaimedPosition",JSON.stringify({ladder:z.ladder,position:z.position})),window.location.href=be.paymentUrl;return}oe=`🎯 Ladder Position Claim Submitted!

You have submitted a claim for Position #${z.position} in the ${z.ladder} ladder.

Name: ${S.firstName} ${S.lastName}
Email: ${S.email}
Generated PIN: ${O}

Please complete your payment using the instructions above. Once payment is verified, you'll have immediate access to all ladder features!`}else{const he=await fetch(`${pe}/api/ladder/submit-claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:S.firstName,lastName:S.lastName,email:S.email,phone:S.phone,ladder:z.ladder,position:z.position,generatedPin:O,fargoRate:S.fargoRate,message:S.message})});if(!he.ok)throw new Error("Failed to submit claim request. Please try again.");const be=await he.json();console.log("Claim submitted:",be),oe=`🎯 Ladder Position Claim Submitted!

You have submitted a claim for Position #${z.position} in the ${z.ladder} ladder.

Name: ${S.firstName} ${S.lastName}
Email: ${S.email}
Generated PIN: ${O}

Your claim has been sent to admin for approval. Since you did not pay the $5 monthly fee, admin approval is required before you can access ladder features.

We'll contact you at ${S.email} within 24-48 hours with the approval decision.`}else{if(S.payNow&&S.paymentMethod){console.log("🔍 Creating payment session for new player..."),console.log("Payment Method:",S.paymentMethod);const he=await fetch(`${pe}/api/monetization/create-membership-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerName:`${S.firstName} ${S.lastName}`,email:S.email,paymentMethod:S.paymentMethod,amount:5})});if(!he.ok)throw new Error("Failed to create payment session. Please try again.");const be=await he.json();if(console.log("Payment session created:",be),console.log("Payment Type:",be.paymentType),console.log("Payment URL:",be.paymentUrl),be.paymentType==="square_redirect"&&be.paymentUrl){window.location.href=be.paymentUrl;return}}oe=`📈 Thank you for your interest in joining the Ladder of Legends!

We've received your application:

Name: ${S.firstName} ${S.lastName}
Email: ${S.email}
Experience: ${S.experience}${S.fargoRate?`
FargoRate: ${S.fargoRate}`:""}${S.currentLeague?`
Current League: ${S.currentLeague}`:""}${S.currentRanking?`
Current Ranking: ${S.currentRanking}`:""}`,S.payNow&&S.paymentMethod&&(oe+=`

Payment Method: ${S.paymentMethod}
Please complete your payment using the instructions above.`),oe+=`

We'll contact you at ${S.email} within 24-48 hours to set up your ladder profile and get you started challenging players!

In the meantime, you can also reach us directly at: frbcapl@gmail.com`}alert(oe),x({firstName:"",lastName:"",email:"",phone:"",experience:"beginner",fargoRate:"",currentLeague:"",currentRanking:"",message:"",payNow:!1,paymentMethod:"",availability:"",locations:""}),f(!1),B(!1),M(null),U("")}catch{alert("There was an error submitting your application. Please try again or contact us directly at frbcapl@gmail.com")}finally{N(!1)}},[T,G]=b.useState(new Set),te=q=>T.has(`${q.ladder}-${q.position}`),P=(q,oe)=>{G(he=>new Set([...he,`${q}-${oe}`]))},ne={onLogout:()=>{a("/")}};return i?e.createElement("div",{className:"guest-app-container"},e.createElement("div",{className:"guest-app-header"},e.createElement("h1",null,"📈 Ladder of Legends - Guest Preview"),e.createElement("p",null,"Loading guest access..."),e.createElement("div",{className:"guest-badge"},"👀 Guest Mode - Limited Access")),e.createElement("div",{className:"loading-spinner"},"Authenticating guest user...")):u?e.createElement("div",{className:"guest-app-container"},e.createElement("div",{className:"guest-app-header"},e.createElement("h1",null,"📈 Ladder of Legends - Guest Preview"),e.createElement("p",null,"Error loading guest access"),e.createElement("div",{className:"guest-badge"},"👀 Guest Mode - Limited Access")),e.createElement("div",{className:"error-message"},e.createElement("p",null,"Error: ",u),e.createElement("button",{onClick:D,className:"back-btn"},"← Back to Hub"))):e.createElement("div",{className:"guest-app-container"},e.createElement("div",{className:"guest-app-header"},e.createElement("h1",null,"📈 Ladder of Legends - Guest Preview"),e.createElement("p",null,"Experience the actual Ladder of Legends interface with limited functionality"),e.createElement("div",{className:"guest-badge"},"👀 Guest Mode - Limited Access"),e.createElement("div",{className:"guest-actions"},e.createElement("button",{type:"button",onClick:D,className:"back-btn"},"← Back to Hub"),e.createElement("button",{type:"button",onClick:()=>t("info"),className:"info-btn"},"ℹ️ Ladder Info"),e.createElement("button",{type:"button",onClick:()=>t("app"),className:"app-btn"},"🎮 Try App Interface"),e.createElement("button",{type:"button",onClick:()=>v(!0),className:"view-ladder-btn"},"View Ladder"),e.createElement("button",{type:"button",onClick:j,className:"join-btn"},"Join Ladder"))),e.createElement("div",{className:"content-area"},console.log("Current view is:",r),r==="app"&&e.createElement("div",{className:"app-preview-section"},e.createElement("div",{className:"guest-notice"},e.createElement("h3",null,"🎮 Interactive App Preview"),e.createElement("p",null,"You can explore the actual Ladder of Legends interface below. Try clicking buttons and opening modals to see how it works!"),e.createElement("div",{className:"guest-limitations",style:{textAlign:"center"}},e.createElement("strong",null,"Guest Limitations:"),e.createElement("ul",{style:{textAlign:"left",display:"inline-block",margin:"0.5rem auto"}},e.createElement("li",null,"• Can view all interfaces and modals"),e.createElement("li",null,"• Cannot submit forms or save data"),e.createElement("li",null,"• Cannot send real challenges"),e.createElement("li",null,"• Cannot access admin features"),e.createElement("li",null,"• Cannot claim ladder positions")))),e.createElement("div",{className:"ladder-preview"},e.createElement(Id,{playerName:(n==null?void 0:n.firstName)||"Guest",playerLastName:(n==null?void 0:n.lastName)||"User",senderEmail:(n==null?void 0:n.email)||"guest@frontrangepool.com",userPin:(n==null?void 0:n.pin)||"GUEST",onLogout:ne.onLogout,isAdmin:!1,onClaimLadderPosition:X,claimedPositions:T,isPositionClaimed:te}))),r==="info"&&e.createElement("div",{className:"info-section"},e.createElement("h2",null,"Ladder of Legends Tournament Series Information"),e.createElement("div",{className:"info-cards"},e.createElement("div",{className:"info-card"},e.createElement("h3",null,"⚔️ Challenge Matches"),e.createElement("p",null,"Standard ladder climbing system"),e.createElement("ul",null,e.createElement("li",null,"Challenge  other players",e.createElement("br",null),"up to 4 spots above you on the ladder"),e.createElement("li",null,"Challenger wins:",e.createElement("br",null)," Players switch positions"),e.createElement("li",null,"Defender wins:",e.createElement("br",null)," Positions remain unchanged"),e.createElement("li",null,"7-day immunity for winners"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"💥 SmackDown Matches"),e.createElement("p",null,"Shuffle up the ladder system"),e.createElement("ul",null,e.createElement("li",null,"Call out players up to 5 spots below you on the ladder"),e.createElement("li",null,"Challenger pays full entry",e.createElement("br",null)," Defender pays 50%"),e.createElement("li",null,"Challenger wins: ",e.createElement("br",null),"Defender moves 3 down",e.createElement("br",null)," Challenger moves 2 up"),e.createElement("li",null,"Defender wins: Players switch positions"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"👑 SmackBack Matches"),e.createElement("p",null,"Jump to 1st place opportunity"),e.createElement("ul",null,e.createElement("li",null,"Only available after winning a SmackDown as Defender"),e.createElement("li",null,"Must call out 1st place within 7 days"),e.createElement("li",null,"Challenger wins:",e.createElement("br",null)," Challenger claims 1st place",e.createElement("br",null),"All others move down"),e.createElement("li",null,"Defender wins: Positions unchanged"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"📅 Top 5 Exception"),e.createElement("p",null,"Special rules for top-ranked players"),e.createElement("ul",null,e.createElement("li",null,"Top 5 matches:",e.createElement("br",null)," Saturdays/Sundays only"),e.createElement("li",null,"Location: Legends Brews & Cues (2pm-8pm)"),e.createElement("li",null,"Live streamed on Legends Facebook page"),e.createElement("li",null,"Admin/TD present as referee"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"🎯 Match Rules"),e.createElement("p",null,"Flexible format with minimum requirements"),e.createElement("ul",null,e.createElement("li",null,"All races are even - No handicaps"),e.createElement("li",null,"CSI rule set (8, 9, or 10 ball allowed)"),e.createElement("li",null,"7 or 9-foot tables by agreement"),e.createElement("li",null,"Winner takes all entry fees and prizes"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"💳 Payment Structure"),e.createElement("p",null,"Simple and transparent pricing"),e.createElement("ul",null,e.createElement("li",null,e.createElement("strong",null,"Ladder Membership:")," $5/month"),e.createElement("li",null,e.createElement("strong",null,"Match Fees:")," $5 per match (total)"),e.createElement("li",null,e.createElement("strong",null,"Fee Distribution:")," $3 to prize pool",e.createElement("br",null),"$2 to platform"),e.createElement("li",null,e.createElement("strong",null,"Payment Methods:")," Venmo, Cashapp, CC/Debit, Cash"),e.createElement("li",null,e.createElement("strong",null,"Billing:")," Monthly automatic renewal"))),e.createElement("div",{className:"info-card"},e.createElement("h3",{style:{fontSize:"1.2rem",lineHeight:"1.3",marginBottom:"0.5rem",wordWrap:"break-word"}},"⚠️ Independent",e.createElement("br",null),"Tournament Series ⚠️"),e.createElement("p",{style:{fontSize:"0.9rem",marginBottom:"0.75rem",fontStyle:"italic"}},"Important legal disclaimer"),e.createElement("ul",{style:{fontSize:"0.85rem",lineHeight:"1.4",paddingLeft:"1.2rem"}},e.createElement("li",null,e.createElement("strong",null,"NOT affiliated")," with Front Range Pool League"),e.createElement("li",null,e.createElement("strong",null,"NOT endorsed")," by CSI, BCAPL, or USAPL"),e.createElement("li",null,e.createElement("strong",null,"NOT sanctioned")," by any governing body"),e.createElement("li",null,"Independent tournament series operated by ",e.createElement("strong",null,"Legends Brews and Cues")),e.createElement("li",null,"Front Range Pool just assists ",e.createElement("strong",null,"Legends Brews and Cues")," with their ladder system")))),e.createElement("div",{className:"join-section"},e.createElement("h3",null,"Ready to Challenge?"),e.createElement("p",null,"Join the ladder and start climbing the rankings!"),e.createElement("button",{onClick:j,className:"join-btn-large"},"📈 Join the Ladder Today"),e.createElement("p",{className:"contact-info"},"Contact: ",e.createElement("strong",null,"frbcapl@gmail.com"))))),g&&e.createElement(Bt,{open:g,onClose:()=>f(!1),title:k?"🎯 Claim Ladder Position":"📈 Join Ladder of Legends",maxWidth:"700px",maxHeight:"85vh",style:{maxHeight:"85vh",overflowY:"auto"}},k&&z&&e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(76, 175, 80, 0.15) 0%, rgba(76, 175, 80, 0.08) 100%)",border:"1px solid rgba(76, 175, 80, 0.4)",borderRadius:"8px",padding:"0.6rem",marginBottom:"0.8rem",textAlign:"center",boxShadow:"0 2px 8px rgba(76, 175, 80, 0.2)"}},e.createElement("div",{style:{color:"#fff",fontSize:"0.8rem",lineHeight:"1.2",display:"flex",justifyContent:"space-around",alignItems:"center",flexWrap:"wrap",gap:"0.8rem"}},e.createElement("span",{style:{fontWeight:"600"}},e.createElement("strong",null,"Position:")," #",z.position),e.createElement("span",{style:{fontWeight:"600"}},e.createElement("strong",null,"Ladder:")," ",z.ladder),e.createElement("span",{style:{fontWeight:"600"}},e.createElement("strong",null,"PIN:"),e.createElement("span",{style:{background:"linear-gradient(135deg, #ffd700 0%, #ffed4e 100%)",color:"#000",padding:"0.2rem 0.4rem",borderRadius:"4px",marginLeft:"0.3rem",fontWeight:"bold",boxShadow:"0 1px 3px rgba(255, 215, 0, 0.3)"}},O))),e.createElement("p",{style:{color:"#a0a0a0",fontSize:"0.7rem",margin:"0.3rem 0 0 0",fontStyle:"italic"}},"This PIN will be used to verify your claim and can also be used to log into your account.")),e.createElement("form",{onSubmit:W,style:{maxHeight:"65vh",overflowY:"auto"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.8rem",marginBottom:"0.8rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"firstName",style:{display:"block",color:"#fff",marginBottom:"0.3rem",fontWeight:"600",fontSize:"0.8rem"}},"First Name *"),e.createElement("input",{type:"text",id:"firstName",value:S.firstName,onChange:q=>x({...S,firstName:q.target.value}),required:!0,disabled:k,placeholder:"Enter your first name",style:{width:"100%",padding:"0.4rem 0.6rem",border:"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"6px",background:k?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.08)",color:k?"#888":"#fff",fontSize:"0.8rem",boxSizing:"border-box",height:"28px",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"lastName",style:{display:"block",color:"#fff",marginBottom:"0.3rem",fontWeight:"600",fontSize:"0.8rem"}},"Last Name *"),e.createElement("input",{type:"text",id:"lastName",value:S.lastName,onChange:q=>x({...S,lastName:q.target.value}),required:!0,disabled:k,placeholder:"Enter your last name",style:{width:"100%",padding:"0.4rem 0.6rem",border:"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"6px",background:k?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.08)",color:k?"#888":"#fff",fontSize:"0.8rem",boxSizing:"border-box",height:"28px",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}}))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.3rem",marginBottom:"0.25rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"email",style:{display:"block",color:"#fff",marginBottom:"0.3rem",fontWeight:"600",fontSize:"0.8rem"}},"Email Address *"),e.createElement("input",{type:"email",id:"email",value:S.email,onChange:q=>x({...S,email:q.target.value}),required:!0,placeholder:"Enter your email address",style:{width:"100%",padding:"0.4rem 0.6rem",border:"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.08)",color:"#fff",fontSize:"0.8rem",boxSizing:"border-box",height:"28px",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"phone",style:{display:"block",color:"#fff",marginBottom:"0.3rem",fontWeight:"600",fontSize:"0.8rem"}},"Phone Number (Optional)"),e.createElement("input",{type:"tel",id:"phone",value:S.phone,onChange:q=>x({...S,phone:q.target.value}),placeholder:"Enter your phone number (optional)",style:{width:"100%",padding:"0.4rem 0.6rem",border:"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.08)",color:"#fff",fontSize:"0.8rem",boxSizing:"border-box",height:"28px",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}}))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.8rem",marginBottom:"0.8rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"fargoRate",style:{display:"block",color:"#fff",marginBottom:"0.3rem",fontWeight:"600",fontSize:"0.75rem"}},"Fargo Rate (Optional)"),e.createElement("input",{type:"number",id:"fargoRate",value:S.fargoRate,onChange:q=>x({...S,fargoRate:q.target.value}),min:"0",max:"850",placeholder:"Optional",style:{width:"60%",padding:"0.2rem 0.4rem",border:"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.08)",color:"#fff",fontSize:"0.75rem",boxSizing:"border-box",height:"18px",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"experience",style:{display:"block",color:"#fff",marginBottom:"0.3rem",fontWeight:"600",fontSize:"0.75rem"}},"Experience *"),e.createElement("select",{id:"experience",value:S.experience,onChange:q=>x({...S,experience:q.target.value}),required:!0,style:{width:"100%",padding:"0.4rem 0.6rem",border:"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.08)",color:"#fff",fontSize:"0.8rem",boxSizing:"border-box",height:"28px",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",cursor:"pointer"}},e.createElement("option",{value:"beginner",style:{color:"#000",background:"#fff"}},"Beginner"),e.createElement("option",{value:"intermediate",style:{color:"#000",background:"#fff"}},"Intermediate"),e.createElement("option",{value:"advanced",style:{color:"#000",background:"#fff"}},"Advanced"),e.createElement("option",{value:"expert",style:{color:"#000",background:"#fff"}},"Expert")))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.8rem",marginBottom:"0.8rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"currentLeague",style:{display:"block",color:"#fff",marginBottom:"0.3rem",fontWeight:"600",fontSize:"0.75rem"}},"Current League (Optional)"),e.createElement("input",{type:"text",id:"currentLeague",value:S.currentLeague,onChange:q=>x({...S,currentLeague:q.target.value}),placeholder:"Optional",style:{width:"100%",padding:"0.3rem 0.5rem",border:"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.08)",color:"#fff",fontSize:"0.75rem",boxSizing:"border-box",height:"20px",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"currentRanking",style:{display:"block",color:"#fff",marginBottom:"0.3rem",fontWeight:"600",fontSize:"0.75rem"}},"Current Ranking (Optional)"),e.createElement("input",{type:"text",id:"currentRanking",value:S.currentRanking,onChange:q=>x({...S,currentRanking:q.target.value}),placeholder:"Optional",style:{width:"100%",padding:"0.3rem 0.5rem",border:"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.08)",color:"#fff",fontSize:"0.75rem",boxSizing:"border-box",height:"20px",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}}))),e.createElement("div",{style:{marginBottom:"0.8rem"}},e.createElement("label",{htmlFor:"message",style:{display:"block",color:"#fff",marginBottom:"0.3rem",fontWeight:"600",fontSize:"0.75rem"}},"Additional Message"),e.createElement("textarea",{id:"message",value:S.message,onChange:q=>x({...S,message:q.target.value}),placeholder:"Optional - Tell us about your pool experience, goals, or questions...",style:{width:"100%",padding:"0.4rem 0.6rem",border:"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.08)",color:"#fff",fontSize:"0.75rem",minHeight:"24px",maxHeight:"32px",resize:"vertical",boxSizing:"border-box",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}})),e.createElement("div",{style:{marginBottom:"0.8rem",padding:"0.6rem",background:"linear-gradient(135deg, rgba(76, 175, 80, 0.12) 0%, rgba(76, 175, 80, 0.06) 100%)",border:"1px solid rgba(76, 175, 80, 0.35)",borderRadius:"8px",boxShadow:"0 2px 6px rgba(76, 175, 80, 0.15)"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.4rem"}},e.createElement("input",{type:"checkbox",checked:S.payNow,onChange:q=>x({...S,payNow:q.target.checked}),style:{cursor:"pointer",width:"16px",height:"16px",margin:"0",accentColor:"#4CAF50"}}),e.createElement("label",{style:{color:"#4caf50",fontWeight:"600",fontSize:"0.85rem"}},"💳 Pay $5 Monthly Fee Now (Optional)")),e.createElement("p",{style:{color:"#b0b0b0",fontSize:"0.75rem",margin:"0",fontStyle:"italic",lineHeight:"1.3"}},"If you pay now, you'll be added to the ladder immediately after approval.",e.createElement("br",null)," If not, you'll need to pay before being added to the ladder system."),S.payNow&&e.createElement("div",{style:{marginTop:"0.5rem"}},e.createElement("label",{style:{display:"block",color:"#4caf50",marginBottom:"0.3rem",fontWeight:"bold",fontSize:"0.85rem"}},"Select Payment Method: *"),e.createElement("select",{value:S.paymentMethod,onChange:V,required:S.payNow,style:{width:"100%",padding:"0.4rem",border:"2px solid rgba(76, 175, 80, 0.3)",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"0.85rem",boxSizing:"border-box"}},e.createElement("option",{value:"",style:{color:"#000",background:"#fff"}},"Choose payment method..."),e.createElement("option",{value:"venmo",style:{color:"#000",background:"#fff"}},"Venmo"),e.createElement("option",{value:"cashapp",style:{color:"#000",background:"#fff"}},"CashApp"),e.createElement("option",{value:"creditCard",style:{color:"#000",background:"#fff"}},"Credit/Debit Card"),e.createElement("option",{value:"applePay",style:{color:"#000",background:"#fff"}},"Apple Pay"),e.createElement("option",{value:"googlePay",style:{color:"#000",background:"#fff"}},"Google Pay"),e.createElement("option",{value:"cash",style:{color:"#000",background:"#fff"}},"Cash"),e.createElement("option",{value:"check",style:{color:"#000",background:"#fff"}},"Check")),A&&S.paymentMethod&&e.createElement("div",{style:{marginTop:"0.5rem",padding:"0.5rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px"}},e.createElement("h4",{style:{color:"#4CAF50",margin:"0 0 0.3rem 0",fontSize:"0.85rem",fontWeight:"bold"}},"💳 Payment Instructions"),e.createElement("div",{style:{color:"#fff",fontSize:"0.75rem",lineHeight:"1.2",whiteSpace:"pre-line"}},F(S.paymentMethod)),e.createElement("div",{style:{marginTop:"0.3rem",padding:"0.3rem",background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"3px",color:"#ffc107",fontSize:"0.75rem"}},"⚠️ Please complete your payment before submitting this form. Your application will be processed once payment is received.")))),e.createElement("div",{style:{display:"flex",gap:"0.8rem",marginTop:"0.8rem"}},e.createElement("button",{type:"button",onClick:()=>f(!1),disabled:E,style:{flex:1,padding:"0.6rem 1rem",background:"rgba(255, 255, 255, 0.08)",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.4)",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}},"Cancel"),e.createElement("button",{type:"submit",disabled:E,style:{flex:1,padding:"0.6rem 1rem",background:"linear-gradient(135deg, #4CAF50 0%, #45a049 100%)",color:"white",border:"none",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 6px rgba(76, 175, 80, 0.3)"}},E?"Submitting...":k?"🎯 Claim Position":"📈 Join Ladder of Legends"))),e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(76, 175, 80, 0.12) 0%, rgba(76, 175, 80, 0.06) 100%)",border:"1px solid rgba(76, 175, 80, 0.35)",borderRadius:"8px",padding:"0.6rem",marginTop:"0.8rem",boxShadow:"0 2px 6px rgba(76, 175, 80, 0.15)"}},e.createElement("h3",{style:{color:"#4CAF50",margin:"0 0 0.4rem 0",fontSize:"0.85rem",fontWeight:"600"}},"📋 What to Expect"),e.createElement("ul",{style:{margin:"0",paddingLeft:"1rem",color:"#b0b0b0",fontSize:"0.75rem",lineHeight:"1.3"}},e.createElement("li",null,"If you paid the monthly membership now:",e.createElement("br",null),"If claiming an account, you will be added immediatly.",e.createElement("br",null),"New users will be added to the appropriate ladder upon admin approval",e.createElement("br",null)),e.createElement("br",null),e.createElement("li",null,"If not paid now, your application will be processed after payment is received"),e.createElement("li",null,e.createElement("br",null),"Once added to the ladder, you can start challenging players and climbing the rankings",e.createElement("br",null),"Issue challenges, defend your position, and compete in the ladder system")))),h&&e.createElement(Bt,{open:h,onClose:()=>v(!1),title:"📊 Ladder Rankings - Public View",maxWidth:"1000px",maxHeight:"90vh",style:{maxHeight:"85vh",height:"85vh",overflowY:"auto"}},e.createElement("div",{className:"public-ladder-view"},e.createElement("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid rgba(229, 62, 62, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",textAlign:"center"}},e.createElement("span",{style:{color:"#e53e3e",fontWeight:"600",fontSize:"0.9rem"}},"👁️ Public View - Anyone can view the ladder rankings")),e.createElement(Id,{playerName:(n==null?void 0:n.firstName)||"Guest",playerLastName:(n==null?void 0:n.lastName)||"User",senderEmail:(n==null?void 0:n.email)||"guest@frontrangepool.com",userPin:(n==null?void 0:n.pin)||"GUEST",onLogout:ne.onLogout,isAdmin:!1,showClaimForm:!1,initialView:"ladders",isPublicView:!0,onClaimLadderPosition:X,claimedPositions:T,isPositionClaimed:te}))))},BW=({onLoginSuccess:a})=>{const[r,t]=b.useState(!1),[n,o]=b.useState(!1),[i,c]=b.useState(!1),[u,m]=b.useState(!1),[g,f]=b.useState(!1),[h,v]=b.useState(!1),[S,x]=b.useState(!1),E=Qn(),N=[{id:"league",name:"Front Range BCAPL Singles League",description:"Manage league matches, schedules, and standings",icon:"🏆",color:"#4CAF50",status:"active"},{id:"ladder",name:"Ladder of Legends Tournament Series",description:"Independently run, challenge-based ladder system",icon:"📈",color:"#2196F3",status:"active"}],C=(k,B,z,M)=>{B==="guest@frontrangepool.com"&&z==="GUEST"?t(!0):a(k,B,z,M)},I=k=>{k==="league"?E("/guest/league"):k==="ladder"&&E("/guest/ladder")},A=()=>{t(!1),E("/")},_=()=>{x(!0)};return r?e.createElement("div",{className:"logged-out-hub-container"},e.createElement("div",{className:"logged-out-hub-header"},e.createElement("div",{className:"hub-title"},e.createElement("h1",null,"Front Range Pool Hub"),e.createElement("p",null,"Guest Preview Mode"),e.createElement("div",{style:{marginTop:"10px",padding:"8px 16px",background:"rgba(229, 62, 62, 0.2)",border:"1px solid #e53e3e",borderRadius:"20px",fontSize:"0.9rem",color:"#e53e3e"}},"👀 Exploring as Guest - Limited functionality")),e.createElement("div",{className:"apps-section"},e.createElement("h2",{className:"section-title"},"Available Apps"),e.createElement("div",{className:"apps-grid active-apps"},N.filter(k=>k.status==="active").map(k=>e.createElement("div",{key:k.id,className:`app-card ${k.status} guest-mode`,style:{"--app-color":k.color},onClick:()=>I(k.id)},e.createElement("div",{className:"app-icon"},k.icon),e.createElement("div",{className:"app-info"},e.createElement("h3",null,k.name),e.createElement("p",null,k.description),e.createElement("div",{className:"app-status"},e.createElement("span",{className:"status-guest-preview"},"Try Demo"))))))),e.createElement("div",{style:{textAlign:"center",marginTop:"20px"}},e.createElement("button",{onClick:A,style:{background:"transparent",color:"#e53e3e",border:"2px solid #e53e3e",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:k=>{k.target.style.background="#e53e3e",k.target.style.color="white"},onMouseLeave:k=>{k.target.style.background="transparent",k.target.style.color="#e53e3e"}},"← Back to Login")))):e.createElement("div",{className:"logged-out-hub-container"},e.createElement("div",{className:"login-section"},e.createElement(kW,{onSuccess:C,onShowSignup:()=>o(!0)})),e.createElement("div",{style:{textAlign:"center",marginTop:"30px",marginBottom:"20px"}},e.createElement("button",{onClick:()=>c(!0),style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",border:"none",padding:"15px 30px",borderRadius:"10px",cursor:"pointer",fontSize:"1.1rem",fontWeight:"bold",boxShadow:"0 4px 15px rgba(245, 158, 11, 0.3)",transition:"all 0.3s ease"},onMouseEnter:k=>{k.target.style.transform="translateY(-2px)",k.target.style.boxShadow="0 6px 20px rgba(245, 158, 11, 0.4)"},onMouseLeave:k=>{k.target.style.transform="translateY(0)",k.target.style.boxShadow="0 4px 15px rgba(245, 158, 11, 0.3)"}},"❓ Singles League vs Ladder of Legends - What's the Difference  ❓")),e.createElement("div",{className:"logged-out-hub-header"},e.createElement("div",{className:"hub-title"},e.createElement("h1",null,"Guest Access")),e.createElement("div",{className:"apps-section"},e.createElement("div",{className:"apps-grid active-apps"},N.filter(k=>k.status==="active").map(k=>e.createElement("div",{key:k.id,className:`app-card ${k.status} logged-out`,style:{"--app-color":k.color}},e.createElement("div",{className:"app-icon"},k.icon),e.createElement("div",{className:"app-info"},e.createElement("h3",null,k.id==="ladder"?e.createElement(e.Fragment,null,"Ladder of Legends",e.createElement("br",null),"Tournament Series"):k.name),e.createElement("p",null,k.description),e.createElement("div",{className:"app-actions"},e.createElement("button",{className:"guest-access-btn",onClick:()=>I(k.id),style:{background:"transparent",color:k.id==="ladder"?"#4CAF50":k.color,border:`2px solid ${k.id==="ladder"?"#4CAF50":k.color}`,padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold",marginTop:"8px",marginBottom:"8px",transition:"all 0.3s ease"},onMouseEnter:B=>{B.target.style.background=k.id==="ladder"?"#4CAF50":k.color,B.target.style.color="white"},onMouseLeave:B=>{B.target.style.background="transparent",B.target.style.color=k.id==="ladder"?"#4CAF50":k.color}},"👀 Access as Guest"),k.id==="ladder"&&e.createElement("button",{className:"public-view-btn",onClick:_,style:{background:"#4CAF50",color:"white",border:"2px solid #4CAF50",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold",marginTop:"8px",marginLeft:"8px",transition:"all 0.3s ease"},onMouseEnter:B=>{B.target.style.background="#45a049",B.target.style.borderColor="#45a049",B.target.style.transform="translateY(-2px)"},onMouseLeave:B=>{B.target.style.background="#4CAF50",B.target.style.borderColor="#4CAF50",B.target.style.transform="translateY(0)"}},"View Ladder 👀")))))))),n&&e.createElement(NW,{onClose:()=>o(!1),onSuccess:k=>{console.log("Signup successful:",k)}}),i&&e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:window.innerWidth<=768?"flex-start":"center",zIndex:1e3,padding:window.innerWidth<=768?"120px 15px 20px 15px":"20px",overflowY:"auto",WebkitOverflowScrolling:"touch"}},e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"2px solid #f59e0b",borderRadius:"15px",width:window.innerWidth<=768?"90%":"55%",maxWidth:window.innerWidth<=768?"100%":"700px",minWidth:window.innerWidth<=768?"auto":"700px",height:window.innerWidth<=768?"auto":"90vh",maxHeight:window.innerWidth<=768?"calc(100dvh - 120px)":"800px",display:"flex",flexDirection:"column",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",color:"#ffffff",marginTop:(window.innerWidth<=768,"20px")}},e.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",padding:window.innerWidth<=768?"25px":"15px",borderBottom:"2px solid #f59e0b",flexShrink:0}},e.createElement("h2",{style:{margin:0,fontSize:window.innerWidth<=768?"1.2rem":"1.5rem",color:"#ffffff",fontWeight:"bold",textAlign:"center",lineHeight:window.innerWidth<=768?"1.3":"1.4"}},"🏆 Singles League vs Ladder of Legends ⚔️",e.createElement("br",null),"Seperate & Different Formats"),e.createElement("button",{onClick:()=>c(!1),style:{position:"absolute",right:"85px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ffffff",fontSize:"2rem",cursor:"pointer",padding:"5px",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s ease"},onMouseEnter:k=>k.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:k=>k.target.style.backgroundColor="transparent"},"×")),e.createElement("div",{style:{flex:1,overflowY:"auto",padding:window.innerWidth<=768?"80px 15px 15px 15px":"20px",fontSize:window.innerWidth<=768?"0.9rem":"0.95rem",lineHeight:"1.4"}},e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"2px solid #4CAF50",borderRadius:"10px",padding:"15px",marginBottom:"20px",textAlign:"center"}},e.createElement("p",{style:{margin:"0 0 8px 0",color:"#4CAF50",fontSize:"1.1rem",fontWeight:"bold"}},"🔑 ONE LOGIN FOR BOTH FORMATS"),e.createElement("p",{style:{margin:0,color:"#e0e0e0",fontSize:"1rem"}},"Use the Front Range Pool Hub to access both the Singles League and Ladder of Legends with a single login.",e.createElement("br",null),"Your account works across both systems, making it easy to participate in whichever format interests you most.")),e.createElement("div",{style:{background:"rgba(245, 158, 11, 0.1)",border:"2px solid #f59e0b",borderRadius:"10px",padding:"15px",marginBottom:"20px",textAlign:"center"}},e.createElement("h3",{style:{margin:"0 0 15px 0",color:"#f59e0b",fontSize:"1.2rem"}},"⚠️ IMPORTANT: These are TWO SEPARATE COMPETITION SYSTEMS"),e.createElement("p",{style:{margin:0,color:"#e0e0e0",fontSize:"1rem"}},"This detailed comparison helps explain the key differences between these completely separate formats.")),e.createElement("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"1fr 1fr",gap:window.innerWidth<=768?"15px":"20px",marginBottom:"20px"}},e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"10px",padding:window.innerWidth<=768?"15px":"18px",border:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("h3",{style:{color:"#ff4444",margin:"0 0 15px 0",fontSize:window.innerWidth<=768?"1.1rem":"1.3rem",textAlign:"center",borderBottom:"2px solid #ff4444",paddingBottom:"10px"}},"🏆 Front Range BCAPL Singles League 🏆"),e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"12px"}},e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",padding:window.innerWidth<=768?"8px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#ff4444",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"🏗️ League Structure"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Season Length:")," 10 weeks total"),e.createElement("li",null,e.createElement("strong",null,"Phase 1:")," Weeks 1-6 (6 mandatory matches)"),e.createElement("li",null,e.createElement("strong",null,"Phase 2:")," Weeks 7-10 (2-4 challenge matches)"),e.createElement("li",null,e.createElement("strong",null,"Format:")," BCAPL Singles Division - Hybrid"),e.createElement("li",null,e.createElement("strong",null,"Max Players:")," 30 players per session"))),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",padding:window.innerWidth<=768?"8px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#ff4444",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"📅 Phase 1 - Scheduled Matches"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"6 MANDATORY MATCHES")," against assigned opponents"),e.createElement("li",null,e.createElement("strong",null,"Flexible Scheduling:")," Any day, any time, any location"),e.createElement("li",null,e.createElement("strong",null,"Deadline:")," Must complete by end of Week 6"),e.createElement("li",null,e.createElement("strong",null,"Scoring:")," BCAPL scoring app required"),e.createElement("li",null,e.createElement("strong",null,"FargoRate:")," All matches integrated for ratings"))),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",padding:window.innerWidth<=768?"8px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#ff4444",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"⚔️ Phase 2 - Challenge System"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Total Required:")," 2-4 matches (minimum 2)"),e.createElement("li",null,e.createElement("strong",null,"Challenge Limit:")," Up to 4 spots higher in standings"),e.createElement("li",null,e.createElement("strong",null,"Weekly Limit:")," Only 1 match per week"),e.createElement("li",null,e.createElement("strong",null,"Defense Rules:")," Must accept until 2 defenses completed"),e.createElement("li",null,e.createElement("strong",null,"Dynamic Limits:")," Based on times challenged"))),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",padding:window.innerWidth<=768?"8px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#ff4444",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"🎱 Match Rules"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Race Length:")," Race to 5 games per match"),e.createElement("li",null,e.createElement("strong",null,"Scoring:")," 10 points per game + 10 bonus for match winner"),e.createElement("li",null,e.createElement("strong",null,"Rules:")," Official CSI rule book"),e.createElement("li",null,e.createElement("strong",null,"Payment:")," Standard league fees apply"),e.createElement("li",null,e.createElement("strong",null,"Communication:")," League Scheduling Hub required"))),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",padding:window.innerWidth<=768?"8px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#ff4444",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"🔑 Key Features"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Season-based:")," Structured competition with deadlines"),e.createElement("li",null,e.createElement("strong",null,"Standings-driven:")," Phase 1 results determine Phase 2 eligibility"),e.createElement("li",null,e.createElement("strong",null,"League Affiliation:")," Official BCAPL division"),e.createElement("li",null,e.createElement("strong",null,"Website:")," https://frusapl.com"),e.createElement("li",null,e.createElement("strong",null,"Chat System:")," League-wide communication"))))),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"10px",padding:window.innerWidth<=768?"15px":"18px",border:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("h3",{style:{color:"#a855f7",margin:"0 0 15px 0",fontSize:window.innerWidth<=768?"1.1rem":"1.3rem",textAlign:"center",borderBottom:"2px solid #a855f7",paddingBottom:"10px"}},"⚔️ Ladder of Legends Tournament Series ⚔️"),e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"12px"}},e.createElement("div",{style:{background:"rgba(168, 85, 247, 0.1)",padding:window.innerWidth<=768?"8px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#a855f7",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"🏗️ Ladder Structure"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Format:")," Independent tournament series"),e.createElement("li",null,e.createElement("strong",null,"Divisions:")," 3 skill-based ladders"),e.createElement("li",null,e.createElement("strong",null,"499 & Under:")," Beginner to intermediate"),e.createElement("li",null,e.createElement("strong",null,"500-549:")," Intermediate to advanced"),e.createElement("li",null,e.createElement("strong",null,"550+:")," Advanced to expert"))),e.createElement("div",{style:{background:"rgba(168, 85, 247, 0.1)",padding:window.innerWidth<=768?"8px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#a855f7",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"⚔️ Match Types"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Challenge Match:")," Up to 4 spots above, switch positions"),e.createElement("li",null,e.createElement("strong",null,"SmackDown:")," Call out below, special positioning rules"),e.createElement("li",null,e.createElement("strong",null,"SmackBack:")," Jump to 1st place opportunity"),e.createElement("li",null,e.createElement("strong",null,"No Minimum:")," Play as many or few as you want"),e.createElement("li",null,e.createElement("strong",null,"Flexible:")," Any time, any location by agreement"))),e.createElement("div",{style:{background:"rgba(168, 85, 247, 0.1)",padding:window.innerWidth<=768?"8px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#a855f7",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"💰 Payment Structure"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Membership:")," $5/month (required)"),e.createElement("li",null,e.createElement("strong",null,"Match Fee:")," $5 per match (total)"),e.createElement("li",null,e.createElement("strong",null,"Distribution:")," $3 to prize pool, $2 to platform"),e.createElement("li",null,e.createElement("strong",null,"Prize Periods:")," Every 2 months"),e.createElement("li",null,e.createElement("strong",null,"Winner Takes All:")," Entry fees + sponsor prizes"))),e.createElement("div",{style:{background:"rgba(168, 85, 247, 0.1)",padding:window.innerWidth<=768?"8px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#a855f7",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"🛡️ Special Rules"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Immunity:")," 7 days after winning any match"),e.createElement("li",null,e.createElement("strong",null,"Top 5 Exception:")," Saturdays/Sundays at Legends only"),e.createElement("li",null,e.createElement("strong",null,"Live Streaming:")," Top 5 matches on Facebook"),e.createElement("li",null,e.createElement("strong",null,"Referee:")," Admin present for top 5 matches"),e.createElement("li",null,e.createElement("strong",null,"No Greens Fees:")," Tables open for top 5 matches"))),e.createElement("div",{style:{background:"rgba(168, 85, 247, 0.1)",padding:window.innerWidth<=768?"8px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#a855f7",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"🔑 Key Features"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Independent:")," Not affiliated with any league"),e.createElement("li",null,e.createElement("strong",null,"Challenge-based:")," No mandatory match requirements"),e.createElement("li",null,e.createElement("strong",null,"Prize-focused:")," Bi-monthly prize distributions"),e.createElement("li",null,e.createElement("strong",null,"Facebook Group:"),' "Top Colorado Springs Pool Players"'),e.createElement("li",null,e.createElement("strong",null,"Skill-based:")," FargoRate integrated divisions")))))),e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"2px solid #4CAF50",borderRadius:"10px",padding:window.innerWidth<=768?"15px":"18px",marginBottom:"20px"}},e.createElement("h3",{style:{margin:"0 0 15px 0",color:"#4CAF50",fontSize:window.innerWidth<=768?"1.1rem":"1.2rem",textAlign:"center"}},"💡 Key Differences Summary"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"1fr 1fr",gap:window.innerWidth<=768?"15px":"20px"}},e.createElement("div",null,e.createElement("h4",{style:{color:"#4CAF50",margin:"0 0 10px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"🎯 Singles League"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Structure:")," Season-based with deadlines"),e.createElement("li",null,e.createElement("strong",null,"Requirements:")," 6+ mandatory matches per season"),e.createElement("li",null,e.createElement("strong",null,"Pressure:")," Must complete matches to advance"),e.createElement("li",null,e.createElement("strong",null,"Affiliation:")," Official BCAPL division"),e.createElement("li",null,e.createElement("strong",null,"Focus:")," League competition and standings"))),e.createElement("div",null,e.createElement("h4",{style:{color:"#a855f7",margin:"0 0 10px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"🏆 Ladder of Legends"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Structure:")," Challenge-based with no deadlines"),e.createElement("li",null,e.createElement("strong",null,"Requirements:")," No minimum matches required"),e.createElement("li",null,e.createElement("strong",null,"Pressure:")," Play at your own pace"),e.createElement("li",null,e.createElement("strong",null,"Affiliation:")," Independent tournament series"),e.createElement("li",null,e.createElement("strong",null,"Focus:")," Individual challenges and prizes"))))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"1fr 1fr 1fr",gap:window.innerWidth<=768?"10px":"15px",marginTop:"20px"}},e.createElement("button",{onClick:()=>{c(!1),m(!0)},style:{background:"linear-gradient(135deg, #ff4444 0%, #cc0000 100%)",color:"white",border:"none",padding:"12px 18px",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold",boxShadow:"0 4px 15px rgba(255, 68, 68, 0.3)",transition:"all 0.3s ease"},onMouseEnter:k=>{k.target.style.transform="translateY(-2px)",k.target.style.boxShadow="0 6px 20px rgba(255, 68, 68, 0.4)"},onMouseLeave:k=>{k.target.style.transform="translateY(0)",k.target.style.boxShadow="0 4px 15px rgba(255, 68, 68, 0.3)"}},"📖 View Singles League",e.createElement("br",null)," Phase 1 Rules"),e.createElement("button",{onClick:()=>{c(!1),f(!0)},style:{background:"linear-gradient(135deg, #ff8800 0%, #ff6600 100%)",color:"white",border:"none",padding:"12px 18px",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold",boxShadow:"0 4px 15px rgba(255, 136, 0, 0.3)",transition:"all 0.3s ease"},onMouseEnter:k=>{k.target.style.transform="translateY(-2px)",k.target.style.boxShadow="0 6px 20px rgba(255, 136, 0, 0.4)"},onMouseLeave:k=>{k.target.style.transform="translateY(0)",k.target.style.boxShadow="0 4px 15px rgba(255, 136, 0, 0.3)"}},"📖 View Single League",e.createElement("br",null),"Phase 2 Rules"),e.createElement("button",{onClick:()=>{c(!1),v(!0)},style:{background:"linear-gradient(135deg, #a855f7 0%, #9333ea 100%)",color:"white",border:"none",padding:"12px 18px",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold",boxShadow:"0 4px 15px rgba(168, 85, 247, 0.3)",transition:"all 0.3s ease"},onMouseEnter:k=>{k.target.style.transform="translateY(-2px)",k.target.style.boxShadow="0 6px 20px rgba(168, 85, 247, 0.4)"},onMouseLeave:k=>{k.target.style.transform="translateY(0)",k.target.style.boxShadow="0 4px 15px rgba(168, 85, 247, 0.3)"}},"📖 View Ladder Rules"))))),u&&e.createElement(Iw,{isOpen:u,onClose:()=>{m(!1),c(!0)}}),g&&e.createElement(Nw,{isOpen:g,onClose:()=>{f(!1),c(!0)}}),h&&e.createElement(Kw,{isOpen:h,onClose:()=>{v(!1),c(!0)},isMobile:!1}),S&&e.createElement(Bt,{open:S,onClose:()=>x(!1),title:"📊 Ladder Rankings - Public View",maxWidth:"1000px",maxHeight:"90vh",style:{maxHeight:"85vh",height:"85vh",overflowY:"auto"}},e.createElement("div",{className:"public-ladder-view"},e.createElement("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid rgba(229, 62, 62, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",textAlign:"center"}},e.createElement("span",{style:{color:"#e53e3e",fontWeight:"600",fontSize:"0.9rem"}},"👁️ Public View - Anyone can view the ladder rankings")),e.createElement(Id,{playerName:"Guest",playerLastName:"User",senderEmail:"guest@frontrangepool.com",userPin:"GUEST",onLogout:()=>x(!1),isAdmin:!1,showClaimForm:!1,initialView:"ladders",isPublicView:!0,onClaimLadderPosition:()=>{},claimedPositions:[],isPositionClaimed:()=>!1}))))},zW=({currentAppName:a,isAdmin:r,isSuperAdmin:t,onLogout:n,userFirstName:o,userLastName:i,onProfileClick:c})=>{const u=Qn(),m=ao(),g=()=>{u("/hub")},f=()=>{u("/hub")},h=()=>{u("/admin")},v=()=>{u("/admin/players")},S=()=>{u("/platform-admin")},x=()=>{n&&n(),u("/")},E=m.pathname==="/guest/ladder"||m.pathname==="/ladder"||a==="Ladder of Legends";return e.createElement("div",{className:`hub-navigation ${E?"ladder-app":""}`},e.createElement("div",{className:"nav-content"},e.createElement("div",{className:"nav-left"},e.createElement("div",{className:`hub-brand ${o?"hub-brand-clickable":""}`,onClick:o?g:void 0,style:{cursor:o?"pointer":"default"}},e.createElement("img",{src:Qw,alt:"8-ball",className:"nav-ball"}),"Front Range",e.createElement("img",{src:Yp,alt:"9-ball",className:"nav-ball"}),"Pool Hub",e.createElement("img",{src:Yi,alt:"10-ball",className:"nav-ball"}))),e.createElement("div",{className:"nav-center"},e.createElement("div",{style:{textAlign:"center"}},e.createElement("span",{className:"app-title",style:{color:"white",fontSize:"1.8rem",fontWeight:"bold",textAlign:"center",textShadow:m.pathname==="/guest/ladder"||m.pathname==="/ladder"||a==="Ladder of Legends"?"0 0 20px rgba(107, 70, 193, 0.5) !important":"0 0 20px rgba(229, 62, 62, 0.5)",margin:0,padding:0,display:"block",lineHeight:"1.2",fontFamily:"inherit"}},!o&&(m.pathname==="/"||m.pathname==="/login")?"THE HUB - Login":m.pathname==="/guest/ladder"?"Ladder of Legends":m.pathname==="/hub"?"Front Range Pool":a||"Front Range Pool"),o&&e.createElement("div",{style:{color:"white",fontSize:"2.0rem",fontWeight:"600",marginTop:"0.5rem",opacity:.9}},"Welcome to the Hub, ",o," ",i))),o?e.createElement(e.Fragment,null,r&&e.createElement(e.Fragment,null,e.createElement("button",{onClick:v,className:"admin-btn"},"👥 Players"),e.createElement("button",{onClick:h,className:"admin-btn"},"⚙️ Admin")),t&&e.createElement("button",{onClick:S,className:"super-admin-btn"},"🔧 Platform Admin"),e.createElement("button",{onClick:c,className:"profile-btn"},"👤 Profile"),e.createElement("button",{onClick:f,className:"switch-app-btn"},"🔄 Switch App"),e.createElement("button",{onClick:x,className:"logout-btn"},"🚪 Logout")):e.createElement("div",{className:"login-nav-info"},"🎯  Front Range Pool Hub")))},Dr=({appName:a,children:r})=>(b.useEffect(()=>{a&&window.dispatchEvent(new CustomEvent("appNameChange",{detail:a}))},[a]),r),OW=(a,r={})=>{const t=a.trim().split(`
`),n=t[0].split(",").map(c=>c.trim().replace(/"/g,"")),o={position:"Position",firstName:"First Name",lastName:"Last Name",name:"Name",email:"Email",fargoRate:"FargoRate",...r},i=[];for(let c=1;c<t.length;c++){const u=t[c].split(",").map(g=>g.trim().replace(/"/g,"")),m={};n.forEach((g,f)=>{const h=u[f];let v=null;for(const[S,x]of Object.entries(o))if(g.toLowerCase()===x.toLowerCase()){v=S;break}if(v)switch(v){case"position":case"fargoRate":m[v]=parseInt(h)||0;break;case"firstName":case"lastName":case"email":m[v]=h||"";break;case"name":const S=h.split(" ");m.firstName=S[0]||"",m.lastName=S.slice(1).join(" ")||"";break;default:m[v]=h}}),m.email&&i.push(m)}return i},FW=()=>`Position,Name,Email,FargoRate
1,John Doe,john@example.com,485
2,Jane Smith,jane@example.com,472
3,Bob Johnson,bob@example.com,458`,UW=a=>{const r={valid:[],errors:[]};return a.forEach((t,n)=>{const o=[];t.email||o.push("Email is required"),!t.firstName&&!t.name&&o.push("Name is required"),t.email&&!WW(t.email)&&o.push("Invalid email format"),t.fargoRate&&(t.fargoRate<0||t.fargoRate>9999)&&o.push("FargoRate must be between 0 and 9999"),o.length>0?r.errors.push({row:n+1,player:t,errors:o}):r.valid.push(t)}),r},WW=a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),jW=({userEmail:a,userPin:r})=>{var X;const t="front-range-pool-hub",[n,o]=b.useState("499-under"),[i,c]=b.useState([]),[u,m]=b.useState(""),[g,f]=b.useState("json"),[h,v]=b.useState(!1),[S,x]=b.useState(""),[E,N]=b.useState(!1),[C,I]=b.useState({player1Id:"",player1Name:"",player1Position:"",player2Id:"",player2Name:"",player2Position:"",winnerId:"",score:"",matchDate:new Date().toISOString().split("T")[0],matchFormat:"best-of-5",location:"",notes:""}),[A,_]=b.useState([]),[k,B]=b.useState(!1),z=[{name:"499-under",displayName:"499 & Under"},{name:"500-549",displayName:"500-549"},{name:"550-plus",displayName:"550+"}];b.useEffect(()=>{M()},[n]);const M=async()=>{try{v(!0);const W=await fetch(`${pe}/api/ladder/admin/${n}`);if(W.ok){const T=await W.json();c(T)}else x("Failed to load ladder data")}catch(W){console.error("Error loading ladder data:",W),x("Error loading ladder data")}finally{v(!1)}},O=async()=>{try{v(!0),x("");let W;if(g==="csv")try{const te=OW(u),P=UW(te);if(P.errors.length>0){x(`Validation errors found: ${P.errors.length} errors. Please check your data.`);return}W=P.valid}catch{x("Invalid CSV format. Please check your data.");return}else try{W=JSON.parse(u)}catch{x("Invalid JSON format. Please check your data.");return}const T=await fetch(`${pe}/api/ladder/import`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ladderData:W,ladderName:n})}),G=await T.json();T.ok?(x(`Import completed! Imported: ${G.results.imported}, Skipped: ${G.results.skipped}`),m(""),M()):x(`Import failed: ${G.error}`)}catch(W){console.error("Error importing data:",W),x("Error importing data")}finally{v(!1)}},U=async()=>{try{v(!0),x("");const W=i.map((te,P)=>({email:te.email,position:P+1})),T=await fetch(`${pe}/api/ladder/update-positions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ladderName:n,positions:W})}),G=await T.json();T.ok?(x(`Positions updated! Updated: ${G.results.updated}`),M()):x(`Update failed: ${G.error}`)}catch(W){console.error("Error updating positions:",W),x("Error updating positions")}finally{v(!1)}},Z=()=>{const W=[["Position","Name","Email","FargoRate","Status"],...i.map(P=>[P.position,`${P.firstName} ${P.lastName}`,P.email,P.fargoRate,P.isActive?"Active":"Inactive"])].map(P=>P.join(",")).join(`
`),T=new Blob([W],{type:"text/csv"}),G=window.URL.createObjectURL(T),te=document.createElement("a");te.href=G,te.download=`${n}-ladder.csv`,te.click(),window.URL.revokeObjectURL(G)},H=W=>{const{name:T,value:G}=W.target;I(te=>({...te,[T]:G}))},V=W=>{const T=W.target.value,G=i.find(te=>te._id===T);G&&I(te=>({...te,player1Id:T,player1Name:`${G.firstName} ${G.lastName}`,player1Position:G.position}))},F=W=>{const T=W.target.value,G=i.find(te=>te._id===T);G&&I(te=>({...te,player2Id:T,player2Name:`${G.firstName} ${G.lastName}`,player2Position:G.position}))},R=W=>{const T=W.target.value;I(G=>({...G,winnerId:T}))},D=async W=>{if(W.preventDefault(),!C.player1Id||!C.player2Id||!C.winnerId){x("Please select both players and a winner");return}if(C.player1Id===C.player2Id){x("Players must be different");return}try{v(!0),x("");const T=await fetch(`${pe}/api/ladder/${t}/ladders/${n}/matches`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...C,matchDate:new Date(C.matchDate).toISOString()})}),G=await T.json();T.ok?(x(`Match result recorded successfully! ${G.message}`),N(!1),I({player1Id:"",player1Name:"",player1Position:"",player2Id:"",player2Name:"",player2Position:"",winnerId:"",score:"",matchDate:new Date().toISOString().split("T")[0],matchFormat:"best-of-5",location:"",notes:""}),M()):x(`Match recording failed: ${G.message||G.error}`)}catch(T){console.error("Error recording match result:",T),x("Error recording match result")}finally{v(!1)}},j=async()=>{try{v(!0);const W=await fetch(`${pe}/api/ladder/${t}/ladders/${n}/matches`);if(W.ok){const T=await W.json();_(T.matches||[])}else x("Failed to load match history")}catch(W){console.error("Error loading match history:",W),x("Error loading match history")}finally{v(!1)}};return e.createElement("div",{className:"ladder-management"},e.createElement("div",{className:"management-header"},e.createElement("h2",null,"Ladder Management"),e.createElement("p",null,"Import and manage ladder data from Google Sheets")),e.createElement("div",{className:"ladder-selector"},e.createElement("label",null,"Select Ladder:"),e.createElement("select",{value:n,onChange:W=>o(W.target.value)},z.map(W=>e.createElement("option",{key:W.name,value:W.name},W.displayName)))),e.createElement("div",{className:"import-section"},e.createElement("h3",null,"Import Data from Google Sheets"),e.createElement("div",{className:"import-instructions"},e.createElement("p",null,e.createElement("strong",null,"Instructions:")),e.createElement("ol",null,e.createElement("li",null,"Export your Google Sheet as CSV"),e.createElement("li",null,"Choose your import format below"),e.createElement("li",null,"Paste the data and click Import")),e.createElement("div",{className:"import-mode-selector"},e.createElement("label",null,e.createElement("input",{type:"radio",value:"csv",checked:g==="csv",onChange:W=>f(W.target.value)}),"CSV Format (from Google Sheets)"),e.createElement("label",null,e.createElement("input",{type:"radio",value:"json",checked:g==="json",onChange:W=>f(W.target.value)}),"JSON Format")),g==="csv"?e.createElement("div",null,e.createElement("p",null,e.createElement("strong",null,"Expected CSV format:")),e.createElement("pre",null,FW()),e.createElement("p",null,"Supported columns: Position, Name, Email, FargoRate")):e.createElement("div",null,e.createElement("p",null,e.createElement("strong",null,"Expected JSON format:")),e.createElement("pre",null,`[
  {
    "firstName": "John",
    "lastName": "Doe", 
    "email": "john@example.com",
    "fargoRate": 485,
    "position": 1
  }
]`))),e.createElement("div",{className:"import-form"},e.createElement("textarea",{value:u,onChange:W=>m(W.target.value),placeholder:g==="csv"?"Paste your CSV data here...":"Paste your JSON data here...",rows:10}),e.createElement("button",{onClick:O,disabled:h||!u.trim(),className:"import-btn"},h?"Importing...":"Import Data"))),e.createElement("div",{className:"ladder-data-section"},e.createElement("div",{className:"section-header"},e.createElement("h3",null,"Current ",(X=z.find(W=>W.name===n))==null?void 0:X.displayName," Ladder"),e.createElement("div",{className:"action-buttons"},e.createElement("button",{onClick:Z,className:"export-btn"},"Export to CSV"),e.createElement("button",{onClick:U,disabled:h,className:"update-btn"},h?"Updating...":"Update Positions"))),S&&e.createElement("div",{className:`message ${S.includes("Error")?"error":"success"}`},S),h?e.createElement("div",{className:"loading"},"Loading ladder data..."):e.createElement("div",{className:"ladder-table"},e.createElement("table",null,e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Position"),e.createElement("th",null,"Name"),e.createElement("th",null,"Email"),e.createElement("th",null,"FargoRate"),e.createElement("th",null,"Status"),e.createElement("th",null,"Immunity"))),e.createElement("tbody",null,i.map((W,T)=>e.createElement("tr",{key:W._id||T},e.createElement("td",null,W.position),e.createElement("td",null,W.firstName," ",W.lastName),e.createElement("td",null,W.email),e.createElement("td",null,W.fargoRate),e.createElement("td",null,e.createElement("span",{className:`status ${W.isActive?"active":"inactive"}`},W.isActive?"Active":"Inactive")),e.createElement("td",null,W.immunityUntil?new Date(W.immunityUntil).toLocaleDateString():"None"))))),i.length===0&&e.createElement("div",{className:"no-data"},"No players found in this ladder. Import some data to get started!"))),e.createElement("div",{className:"match-management-section"},e.createElement("div",{className:"section-header"},e.createElement("h3",null,"Match Result Management"),e.createElement("div",{className:"action-buttons"},e.createElement("button",{onClick:()=>N(!0),className:"add-match-btn",disabled:i.length<2},"Report Match Result"),e.createElement("button",{onClick:()=>{B(!k),k||j()},className:"view-history-btn"},k?"Hide Match History":"View Match History"))),i.length<2&&e.createElement("div",{className:"message warning"},"Need at least 2 players on the ladder to report match results."),E&&e.createElement("div",{className:"match-form-overlay"},e.createElement("div",{className:"match-form"},e.createElement("h4",null,"Report Match Result"),e.createElement("form",{onSubmit:D},e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Player 1:"),e.createElement("select",{value:C.player1Id,onChange:V,required:!0},e.createElement("option",{value:""},"Select Player 1"),i.map(W=>e.createElement("option",{key:W._id,value:W._id},"#",W.position," - ",W.firstName," ",W.lastName)))),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Player 2:"),e.createElement("select",{value:C.player2Id,onChange:F,required:!0},e.createElement("option",{value:""},"Select Player 2"),i.map(W=>e.createElement("option",{key:W._id,value:W._id},"#",W.position," - ",W.firstName," ",W.lastName))))),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Winner:"),e.createElement("select",{value:C.winnerId,onChange:R,required:!0},e.createElement("option",{value:""},"Select Winner"),C.player1Id&&e.createElement("option",{value:C.player1Id},C.player1Name),C.player2Id&&e.createElement("option",{value:C.player2Id},C.player2Name))),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Score:"),e.createElement("input",{type:"text",name:"score",value:C.score,onChange:H,placeholder:"e.g., 3-1, 5-3",required:!0}))),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Match Date:"),e.createElement("input",{type:"date",name:"matchDate",value:C.matchDate,onChange:H,required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Match Format:"),e.createElement("select",{name:"matchFormat",value:C.matchFormat,onChange:H,required:!0},e.createElement("option",{value:"best-of-3"},"Best of 3"),e.createElement("option",{value:"best-of-5"},"Best of 5"),e.createElement("option",{value:"best-of-7"},"Best of 7"),e.createElement("option",{value:"best-of-9"},"Best of 9")))),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Location:"),e.createElement("input",{type:"text",name:"location",value:C.location,onChange:H,placeholder:"Pool hall or venue"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Notes:"),e.createElement("input",{type:"text",name:"notes",value:C.notes,onChange:H,placeholder:"Optional match notes"}))),e.createElement("div",{className:"form-buttons"},e.createElement("button",{type:"submit",disabled:h,className:"submit-btn"},h?"Recording...":"Record Match Result"),e.createElement("button",{type:"button",onClick:()=>N(!1),className:"cancel-btn"},"Cancel"))))),k&&e.createElement("div",{className:"match-history-section"},e.createElement("h4",null,"Match History"),A.length===0?e.createElement("div",{className:"no-data"},"No matches recorded yet."):e.createElement("div",{className:"match-history-table"},e.createElement("table",null,e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Date"),e.createElement("th",null,"Winner"),e.createElement("th",null,"Loser"),e.createElement("th",null,"Score"),e.createElement("th",null,"Format"),e.createElement("th",null,"Location"),e.createElement("th",null,"Status"))),e.createElement("tbody",null,A.map((W,T)=>e.createElement("tr",{key:W.id||T},e.createElement("td",null,new Date(W.matchDate).toLocaleDateString()),e.createElement("td",null,e.createElement("strong",null,W.winner.name)," (#",W.winner.position,")"),e.createElement("td",null,W.loser.name," (#",W.loser.position,")"),e.createElement("td",null,W.score),e.createElement("td",null,W.matchFormat||"N/A"),e.createElement("td",null,W.location||"N/A"),e.createElement("td",null,e.createElement("span",{className:`status ${W.verificationStatus}`},W.verificationStatus))))))))))},HW="_container_14t4x_1",$W="_header_14t4x_27",YW="_headerContent_14t4x_45",GW="_ladderSelector_14t4x_59",qW="_ladderSelect_14t4x_59",ZW="_headerButtons_14t4x_125",VW="_addButton_14t4x_149",QW="_createMatchButton_14t4x_181",JW="_pendingMatchesButton_14t4x_225",XW="_matchButton_14t4x_257",KW="_historyButton_14t4x_301",ej="_formOverlay_14t4x_333",tj="_form_14t4x_333",aj="_formRow_14t4x_513",nj="_formGroup_14t4x_527",rj="_checkboxes_14t4x_595",oj="_formButtons_14t4x_633",sj="_playersList_14t4x_693",lj="_laddersContainer_14t4x_703",ij="_ladderSection_14t4x_715",cj="_ladderTitle_14t4x_729",dj="_noPlayers_14t4x_749",uj="_table_14t4x_771",mj="_status_14t4x_821",pj="_active_14t4x_839",fj="_inactive_14t4x_849",gj="_pending_14t4x_225",hj="_matchType_14t4x_871",yj="_challenge_14t4x_891",bj="_smackdown_14t4x_903",vj="_smackback_14t4x_915",xj="_editButton_14t4x_927",Ej="_deleteButton_14t4x_929",wj="_reportResultButton_14t4x_995",Sj="_moreOptionsButton_14t4x_1031",Cj="_pendingMatchesSection_14t4x_1067",_j="_pendingMatchesTable_14t4x_1091",kj="_matchHistorySection_14t4x_1151",Nj="_matchHistoryTable_14t4x_1175",Ij="_noData_14t4x_1233",Ke={container:HW,header:$W,headerContent:YW,ladderSelector:GW,ladderSelect:qW,headerButtons:ZW,addButton:VW,createMatchButton:QW,pendingMatchesButton:JW,matchButton:XW,historyButton:KW,formOverlay:ej,form:tj,formRow:aj,formGroup:nj,checkboxes:rj,formButtons:oj,playersList:sj,laddersContainer:lj,ladderSection:ij,ladderTitle:cj,noPlayers:dj,table:uj,status:mj,active:pj,inactive:fj,pending:gj,matchType:hj,challenge:yj,smackdown:bj,smackback:vj,editButton:xj,deleteButton:Ej,reportResultButton:wj,moreOptionsButton:Sj,pendingMatchesSection:Cj,pendingMatchesTable:_j,matchHistorySection:kj,matchHistoryTable:Nj,noData:Ij};function Aj(){const a="front-range-pool-hub",[r,t]=b.useState([]),[n,o]=b.useState([]),[i,c]=b.useState(!0),[u,m]=b.useState(null),[g,f]=b.useState(!1),[h,v]=b.useState({firstName:"",lastName:"",email:"",phone:"",fargoRate:"",location:"",isActive:!0,ladderName:"499-under"}),[S,x]=b.useState(!1),[E,N]=b.useState({matchId:"",challengerId:"",challengerName:"",challengerPosition:"",defenderId:"",defenderName:"",defenderPosition:"",winnerId:"",score:"",matchDate:new Date().toISOString().split("T")[0],matchFormat:"race-to-5",location:"",notes:""}),[C,I]=b.useState([]),[A,_]=b.useState(!1),[k,B]=b.useState(!1),[z,M]=b.useState({matchType:"challenge",challengerId:"",defenderId:"",matchFormat:"race-to-5",proposedDate:new Date().toISOString().split("T")[0],location:"",notes:""}),[O,U]=b.useState([]),[Z,H]=b.useState(!1),[V,F]=b.useState(!1),[R,D]=b.useState("499-under"),j=J=>Lp.createPortal(J,document.body),X=async()=>{try{const Ae=await(await fetch(`${pe}/api/locations`)).json();Ae.success&&Array.isArray(Ae.locations)?(t(Ae.locations),console.log(`Loaded ${Ae.locations.length} locations from backend`)):(console.error("Invalid locations response format:",Ae),t([]))}catch(J){console.error("Error fetching locations:",J),t([])}},W=async()=>{try{const Ae=await(await fetch(`${pe}/api/ladder/players`)).json();Array.isArray(Ae)?(o(Ae),console.log(`Loaded ${Ae.length} ladder players from ladder endpoint`)):(console.error("Invalid response format:",Ae),o([]))}catch(J){console.error("Error fetching ladder players:",J),o([])}finally{c(!1)}};b.useEffect(()=>{window.scrollTo(0,0),X(),W()},[]);const T=J=>{const{name:Ae,value:Ge,type:Le,checked:de}=J.target;v(je=>({...je,[Ae]:Le==="checkbox"?de:Ge}))},G=async J=>{J.preventDefault();try{const Ge=await(await fetch(`${pe}/api/ladder/player/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).json();Ge.success?(f(!1),v({firstName:"",lastName:"",email:"",phone:"",fargoRate:"",location:"",isActive:!0,ladderName:"499-under"}),W(),alert("Ladder player added successfully!")):alert("Error adding ladder player: "+(Ge.error||Ge.message))}catch(Ae){console.error("Error adding ladder player:",Ae),alert("Error adding ladder player")}},te=async J=>{J.preventDefault();try{const Ge=await(await fetch(`${pe}/api/ladder/player/${u.email}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...h,ladderName:"General"})})).json();Ge.success?(m(null),v({name:"",email:"",phone:"",skillLevel:"",location:"",isActive:!0}),W(),alert("Ladder player updated successfully!")):alert("Error updating ladder player: "+Ge.message)}catch(Ae){console.error("Error updating ladder player:",Ae),alert("Error updating ladder player")}},P=J=>{m(J),v({firstName:J.firstName||"",lastName:J.lastName||"",email:J.email||"",phone:J.phone||"",fargoRate:J.fargoRate||"",location:J.location||"",isActive:J.isActive!==!1,ladderName:J.ladderName||"499-under"})},ne=async J=>{if(confirm("Are you sure you want to remove this player from the ladder?"))try{const Ge=await(await fetch(`${pe}/api/ladder/player/${J}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ladderName:"General"})})).json();Ge.success?(W(),alert("Player removed from ladder successfully!")):alert("Error removing player: "+Ge.message)}catch(Ae){console.error("Error removing ladder player:",Ae),alert("Error removing ladder player")}},q=J=>{const{name:Ae,value:Ge}=J.target;N(Le=>({...Le,[Ae]:Ge}))},oe=J=>{const Ae=J.target.value,Ge=n.find(Le=>Le._id===Ae);Ge&&N(Le=>({...Le,player1Id:Ae,player1Name:`${Ge.firstName} ${Ge.lastName}`,player1Position:Ge.position}))},he=J=>{const Ae=J.target.value,Ge=n.find(Le=>Le._id===Ae);Ge&&N(Le=>({...Le,player2Id:Ae,player2Name:`${Ge.firstName} ${Ge.lastName}`,player2Position:Ge.position}))},be=J=>{const Ae=J.target.value;N(Ge=>({...Ge,winnerId:Ae}))},nt=J=>{var Ae,Ge,Le,de,je,ze,gt,re,Be,Oe,Te,rt,pt,jt,ba,da,ta,wa,rn,He,ht,Qt,on,Tt,Va,ka,La,sn;N({matchId:J._id,player1Id:((Ae=J.challenger)==null?void 0:Ae._id)||((Ge=J.player1)==null?void 0:Ge._id)||"",player1Name:`${((Le=J.challenger)==null?void 0:Le.firstName)||((de=J.player1)==null?void 0:de.firstName)} ${((je=J.challenger)==null?void 0:je.lastName)||((ze=J.player1)==null?void 0:ze.lastName)}`,challengerId:((gt=J.challenger)==null?void 0:gt._id)||((re=J.player1)==null?void 0:re._id)||"",challengerName:`${((Be=J.challenger)==null?void 0:Be.firstName)||((Oe=J.player1)==null?void 0:Oe.firstName)} ${((Te=J.challenger)==null?void 0:Te.lastName)||((rt=J.player1)==null?void 0:rt.lastName)}`,challengerPosition:((pt=J.challenger)==null?void 0:pt.position)||((jt=J.player1)==null?void 0:jt.position),player2Id:((ba=J.defender)==null?void 0:ba._id)||((da=J.player2)==null?void 0:da._id)||"",player2Name:`${((ta=J.defender)==null?void 0:ta.firstName)||((wa=J.player2)==null?void 0:wa.firstName)} ${((rn=J.defender)==null?void 0:rn.lastName)||((He=J.player2)==null?void 0:He.lastName)}`,defenderId:((ht=J.defender)==null?void 0:ht._id)||((Qt=J.player2)==null?void 0:Qt._id)||"",defenderName:`${((on=J.defender)==null?void 0:on.firstName)||((Tt=J.player2)==null?void 0:Tt.firstName)} ${((Va=J.defender)==null?void 0:Va.lastName)||((ka=J.player2)==null?void 0:ka.lastName)}`,defenderPosition:((La=J.defender)==null?void 0:La.position)||((sn=J.player2)==null?void 0:sn.position),winnerId:"",score:"",matchDate:J.scheduledDate?new Date(J.scheduledDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],matchFormat:J.matchFormat||J.raceLength||"best-of-5",location:J.location||J.venue||"",notes:J.notes||""}),x(!0)},ye=async J=>{if(J.preventDefault(),!E.player1Id||!E.player2Id||!E.winnerId){alert("Please select both players and a winner");return}if(E.player1Id===E.player2Id){alert("Players must be different");return}try{c(!0);const Ae=E.matchId,Ge=Ae?`${pe}/api/ladder/${a}/ladders/${R}/matches/${E.matchId}`:`${pe}/api/ladder/${a}/ladders/${R}/matches`,Le=Ae?"PUT":"POST",de=Ae?{winner:E.winnerId,score:E.score,notes:E.notes,completedDate:new Date().toISOString(),reportedBy:E.winnerId}:{challengerId:E.player1Id,defenderId:E.player2Id,matchType:"challenge",proposedDate:new Date(E.matchDate).toISOString(),matchFormat:E.matchFormat,location:E.location,notes:E.notes},je=await fetch(Ge,{method:Le,headers:{"Content-Type":"application/json"},body:JSON.stringify(de)}),ze=await je.json();je.ok?(alert(`Match result recorded successfully! ${ze.message}`),x(!1),N({player1Id:"",player1Name:"",player1Position:"",player2Id:"",player2Name:"",player2Position:"",winnerId:"",score:"",matchDate:new Date().toISOString().split("T")[0],matchFormat:"race-to-5",location:"",notes:""}),W()):alert(`Match recording failed: ${ze.message||ze.error}`)}catch(Ae){console.error("Error recording match result:",Ae),alert("Error recording match result")}finally{c(!1)}},We=async()=>{try{c(!0);const J=await fetch(`${pe}/api/ladder/${a}/ladders/${R}/matches`);if(J.ok){const Ae=await J.json();I(Ae.matches||[])}else alert("Failed to load match history")}catch(J){console.error("Error loading match history:",J),alert("Error loading match history")}finally{c(!1)}},Ze=async()=>{try{c(!0);const J=await fetch(`${pe}/api/ladder/${a}/ladders/${R}/matches?status=scheduled`);if(J.ok){const Ae=await J.json();U(Ae.matches||[])}else alert("Failed to load pending matches")}catch(J){console.error("Error loading pending matches:",J),alert("Error loading pending matches")}finally{c(!1)}},lt=async J=>{if(J.preventDefault(),!z.challengerId||!z.defenderId){alert("Please select both challenger and defender");return}if(z.challengerId===z.defenderId){alert("Challenger and defender must be different players");return}const Ae=n.find(Le=>Le._id===z.challengerId),Ge=n.find(Le=>Le._id===z.defenderId);if(Ae&&Ge){const Le=Ae.position||0,de=Ge.position||0;switch(z.matchType){case"challenge":if(Le<=de){alert("For Challenge Matches: Challenger must have a lower position number than defender");return}break;case"defense":if(Le>=de){alert("For Defense Matches: Challenger must have a higher position number than defender");return}break;case"position":if(Le!==de){alert("For Position Matches: Both players must be at the same position");return}break;case"exhibition":break;default:alert("Please select a valid match type");return}}try{c(!0);const Le=await fetch(`${pe}/api/ladder/${a}/ladders/${R}/matches`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...z,status:"scheduled",proposedDate:new Date(z.proposedDate).toISOString()})}),de=await Le.json();Le.ok?(alert("Match created successfully! Players can now play and report the result."),B(!1),M({matchType:"challenge",challengerId:"",defenderId:"",matchFormat:"race-to-5",proposedDate:new Date().toISOString().split("T")[0],location:"",notes:""}),Ze()):alert(`Match creation failed: ${de.message||de.error}`)}catch(Le){console.error("Error creating match:",Le),alert("Error creating match")}finally{c(!1)}},Ve=J=>{const{name:Ae,value:Ge}=J.target;M(Le=>({...Le,[Ae]:Ge}))},zt=J=>{const Ae=J.target.value;M(Ge=>({...Ge,challengerId:Ae}))},ve=J=>{const Ae=J.target.value;M(Ge=>({...Ge,defenderId:Ae}))};return i?e.createElement("div",{className:Ke.container},"Loading ladder players..."):e.createElement("div",{className:Ke.container},e.createElement("div",{className:Ke.header},e.createElement("h2",null,"Ladder Player Management"),e.createElement("div",{className:Ke.headerContent},e.createElement("div",{className:Ke.ladderSelector},e.createElement("label",{htmlFor:"ladderSelect"},"Select Ladder:"),e.createElement("select",{id:"ladderSelect",value:R,onChange:J=>D(J.target.value),className:Ke.ladderSelect},e.createElement("option",{value:"499-under"},"499 & Under"),e.createElement("option",{value:"500-549"},"500-549"),e.createElement("option",{value:"550-plus"},"550+"))),e.createElement("div",{className:Ke.headerButtons},e.createElement("button",{className:Ke.addButton,onClick:()=>{window.scrollTo(0,0),f(!0)}},"Add New Ladder Player"),e.createElement("button",{className:Ke.createMatchButton,onClick:()=>{window.scrollTo(0,0),B(!0)},disabled:n.filter(J=>J.ladderName===R).length<2},"Create Match"),e.createElement("button",{className:Ke.pendingMatchesButton,onClick:()=>{H(!0),Ze()}},"View Pending Matches"),e.createElement("button",{className:Ke.matchButton,onClick:()=>{window.scrollTo(0,0),x(!0)},disabled:n.filter(J=>J.ladderName===R).length<2},"Report Match Result"),e.createElement("button",{className:Ke.historyButton,onClick:()=>{_(!A),A||We()}},A?"Hide Match History":"View Match History")))),g&&j(e.createElement(Bt,{open:g,onClose:()=>f(!1),title:"Add New Ladder Player",maxWidth:"600px",maxHeight:"90vh"},e.createElement("form",{onSubmit:G},e.createElement("input",{type:"text",name:"firstName",placeholder:"First Name",value:h.firstName,onChange:T,required:!0}),e.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name",value:h.lastName,onChange:T,required:!0}),e.createElement("input",{type:"email",name:"email",placeholder:"Email",value:h.email,onChange:T,required:!0}),e.createElement("input",{type:"text",name:"phone",placeholder:"Phone",value:h.phone,onChange:T}),e.createElement("input",{type:"number",name:"fargoRate",placeholder:"Fargo Rate",value:h.fargoRate,onChange:T,required:!0}),e.createElement("select",{name:"ladderName",value:h.ladderName,onChange:T,required:!0},e.createElement("option",{value:"499-under"},"499 & Under"),e.createElement("option",{value:"500-549"},"500-549"),e.createElement("option",{value:"550-plus"},"550+")),e.createElement("select",{name:"location",value:h.location,onChange:T,required:!0},e.createElement("option",{value:""},"Select Preferred Location"),r.length>0?r.map(J=>e.createElement("option",{key:J._id,value:J.name},J.name)):e.createElement("option",{value:"",disabled:!0},"Loading locations...")),e.createElement("div",{className:Ke.checkboxes},e.createElement("label",null,e.createElement("input",{type:"checkbox",name:"isActive",checked:h.isActive,onChange:T}),"Active on Ladder")),e.createElement("div",{className:Ke.formButtons},e.createElement("button",{type:"submit"},"Add Player"),e.createElement("button",{type:"button",onClick:()=>f(!1)},"Cancel"))))),k&&j(e.createElement(Bt,{open:k,onClose:()=>B(!1),title:"Create New Match",maxWidth:"700px",maxHeight:"90vh"},e.createElement("form",{onSubmit:lt},e.createElement("div",{className:Ke.formRow},e.createElement("div",{className:Ke.formGroup},e.createElement("label",null,"Match Type:"),e.createElement("select",{name:"matchType",value:z.matchType,onChange:Ve,required:!0},e.createElement("option",{value:"challenge"},"Challenge Match"),e.createElement("option",{value:"smackdown"},"SmackDown"),e.createElement("option",{value:"smackback"},"SmackBack"))),e.createElement("div",{className:Ke.formGroup},e.createElement("label",null,"Race to:"),e.createElement("select",{name:"matchFormat",value:z.matchFormat,onChange:Ve,required:!0},e.createElement("option",{value:"race-to-5"},"Race to 5"),e.createElement("option",{value:"race-to-7"},"Race to 7"),e.createElement("option",{value:"race-to-9"},"Race to 9"),V&&e.createElement(e.Fragment,null,e.createElement("option",{value:"race-to-6"},"Race to 6"),e.createElement("option",{value:"race-to-8"},"Race to 8"),e.createElement("option",{value:"race-to-10"},"Race to 10"),e.createElement("option",{value:"race-to-11"},"Race to 11"),e.createElement("option",{value:"race-to-12"},"Race to 12"),e.createElement("option",{value:"race-to-13"},"Race to 13"),e.createElement("option",{value:"race-to-14"},"Race to 14"),e.createElement("option",{value:"race-to-15"},"Race to 15"),e.createElement("option",{value:"race-to-16"},"Race to 16"),e.createElement("option",{value:"race-to-17"},"Race to 17"),e.createElement("option",{value:"race-to-18"},"Race to 18"),e.createElement("option",{value:"race-to-19"},"Race to 19"),e.createElement("option",{value:"race-to-20"},"Race to 20"),e.createElement("option",{value:"race-to-21"},"Race to 21"))),e.createElement("button",{type:"button",className:Ke.moreOptionsButton,onClick:()=>F(!V)},V?"Hide Options":"More Options"))),e.createElement("div",{className:Ke.formRow},e.createElement("div",{className:Ke.formGroup},e.createElement("label",null,"Challenger :"),e.createElement("select",{value:z.challengerId,onChange:zt,required:!0},e.createElement("option",{value:""},"Select Challenger"),n.filter(J=>J.ladderName===R).sort((J,Ae)=>(J.position||0)-(Ae.position||0)).map(J=>e.createElement("option",{key:J._id,value:J._id},"#",J.position," - ",J.firstName," ",J.lastName)))),e.createElement("div",{className:Ke.formGroup},e.createElement("label",null,"Defender :"),e.createElement("select",{value:z.defenderId,onChange:ve,required:!0},e.createElement("option",{value:""},"Select Defender"),n.filter(J=>J.ladderName===R).sort((J,Ae)=>(J.position||0)-(Ae.position||0)).map(J=>e.createElement("option",{key:J._id,value:J._id},"#",J.position," - ",J.firstName," ",J.lastName))))),e.createElement("div",{className:Ke.formRow},e.createElement("div",{className:Ke.formGroup},e.createElement("label",null,"Match Date:"),e.createElement("input",{type:"date",name:"proposedDate",value:z.proposedDate,onChange:Ve,required:!0})),e.createElement("div",{className:Ke.formGroup},e.createElement("label",null,"Location:"),e.createElement("select",{name:"location",value:z.location,onChange:Ve,required:!0},e.createElement("option",{value:""},"Select Location"),r.length>0?r.map(J=>e.createElement("option",{key:J._id,value:J.name},J.name)):e.createElement("option",{value:"",disabled:!0},"Loading locations..."))),e.createElement("div",{className:Ke.formGroup},e.createElement("label",null,"Notes:"),e.createElement("input",{type:"text",name:"notes",value:z.notes,onChange:Ve,placeholder:"Optional match notes"}))),e.createElement("div",{className:Ke.formButtons},e.createElement("button",{type:"submit",disabled:i},i?"Creating...":"Create Match"),e.createElement("button",{type:"button",onClick:()=>B(!1)},"Cancel"))))),u&&j(e.createElement("div",{className:Ke.formOverlay},e.createElement("div",{className:Ke.form},e.createElement("h3",null,"Edit Ladder Player: ",u.name),e.createElement("form",{onSubmit:te},e.createElement("input",{type:"text",name:"firstName",placeholder:"First Name",value:h.firstName,onChange:T,required:!0}),e.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name",value:h.lastName,onChange:T,required:!0}),e.createElement("input",{type:"email",name:"email",placeholder:"Email",value:h.email,onChange:T,required:!0}),e.createElement("input",{type:"text",name:"phone",placeholder:"Phone",value:h.phone,onChange:T}),e.createElement("input",{type:"number",name:"fargoRate",placeholder:"Fargo Rate",value:h.fargoRate,onChange:T,required:!0}),e.createElement("select",{name:"ladderName",value:h.ladderName,onChange:T,required:!0},e.createElement("option",{value:"499-under"},"499 & Under"),e.createElement("option",{value:"500-549"},"500-549"),e.createElement("option",{value:"550-plus"},"550+")),e.createElement("select",{name:"location",value:h.location,onChange:T,required:!0},e.createElement("option",{value:""},"Select Preferred Location"),r.length>0?r.map(J=>e.createElement("option",{key:J._id,value:J.name},J.name)):e.createElement("option",{value:"",disabled:!0},"Loading locations...")),e.createElement("div",{className:Ke.checkboxes},e.createElement("label",null,e.createElement("input",{type:"checkbox",name:"isActive",checked:h.isActive,onChange:T}),"Active on Ladder")),e.createElement("div",{className:Ke.formButtons},e.createElement("button",{type:"submit"},"Update Player"),e.createElement("button",{type:"button",onClick:()=>m(null)},"Cancel")))))),S&&j(e.createElement(Bt,{open:S,onClose:()=>x(!1),title:"Report Match Result",maxWidth:"700px",maxHeight:"90vh"},e.createElement("form",{onSubmit:ye},e.createElement("div",{className:Ke.formRow},e.createElement("div",{className:Ke.formGroup},e.createElement("label",null,"Player 1:"),e.createElement("select",{value:E.player1Id,onChange:oe,required:!0},e.createElement("option",{value:""},"Select Player 1"),n.filter(J=>J.ladderName===R).map(J=>e.createElement("option",{key:J._id,value:J._id},"#",J.position," - ",J.firstName," ",J.lastName)))),e.createElement("div",{className:Ke.formGroup},e.createElement("label",null,"Player 2:"),e.createElement("select",{value:E.player2Id,onChange:he,required:!0},e.createElement("option",{value:""},"Select Player 2"),n.filter(J=>J.ladderName===R).map(J=>e.createElement("option",{key:J._id,value:J._id},"#",J.position," - ",J.firstName," ",J.lastName))))),e.createElement("div",{className:Ke.formRow},e.createElement("div",{className:Ke.formGroup},e.createElement("label",null,"Winner:"),e.createElement("select",{value:E.winnerId,onChange:be,required:!0},e.createElement("option",{value:""},"Select Winner"),E.player1Id&&e.createElement("option",{value:E.player1Id},E.player1Name),E.player2Id&&e.createElement("option",{value:E.player2Id},E.player2Name))),e.createElement("div",{className:Ke.formGroup},e.createElement("label",null,"Score:"),e.createElement("input",{type:"text",name:"score",value:E.score,onChange:q,placeholder:"e.g., 3-1, 5-3",required:!0}))),e.createElement("div",{className:Ke.formRow},e.createElement("div",{className:Ke.formGroup},e.createElement("label",null,"Match Date:"),e.createElement("input",{type:"date",name:"matchDate",value:E.matchDate,onChange:q,required:!0})),e.createElement("div",{className:Ke.formGroup},e.createElement("label",null,"Race to:"),e.createElement("select",{name:"matchFormat",value:E.matchFormat,onChange:q,required:!0},e.createElement("option",{value:"race-to-5"},"Race to 5"),e.createElement("option",{value:"race-to-7"},"Race to 7"),e.createElement("option",{value:"race-to-9"},"Race to 9"),V&&e.createElement(e.Fragment,null,e.createElement("option",{value:"race-to-6"},"Race to 6"),e.createElement("option",{value:"race-to-8"},"Race to 8"),e.createElement("option",{value:"race-to-10"},"Race to 10"),e.createElement("option",{value:"race-to-11"},"Race to 11"),e.createElement("option",{value:"race-to-12"},"Race to 12"),e.createElement("option",{value:"race-to-13"},"Race to 13"),e.createElement("option",{value:"race-to-14"},"Race to 14"),e.createElement("option",{value:"race-to-15"},"Race to 15"),e.createElement("option",{value:"race-to-16"},"Race to 16"),e.createElement("option",{value:"race-to-17"},"Race to 17"),e.createElement("option",{value:"race-to-18"},"Race to 18"),e.createElement("option",{value:"race-to-19"},"Race to 19"),e.createElement("option",{value:"race-to-20"},"Race to 20"),e.createElement("option",{value:"race-to-21"},"Race to 21"))),e.createElement("button",{type:"button",className:Ke.moreOptionsButton,onClick:()=>F(!V)},V?"Hide Options":"More Options"))),e.createElement("div",{className:Ke.formRow},e.createElement("div",{className:Ke.formGroup},e.createElement("label",null,"Location:"),e.createElement("select",{name:"location",value:E.location,onChange:q,required:!0},e.createElement("option",{value:""},"Select Location"),r.length>0?r.map(J=>e.createElement("option",{key:J._id,value:J.name},J.name)):e.createElement("option",{value:"",disabled:!0},"Loading locations..."))),e.createElement("div",{className:Ke.formGroup},e.createElement("label",null,"Notes:"),e.createElement("input",{type:"text",name:"notes",value:E.notes,onChange:q,placeholder:"Optional match notes"}))),e.createElement("div",{className:Ke.formButtons},e.createElement("button",{type:"submit",disabled:i},i?"Recording...":"Record Match Result"),e.createElement("button",{type:"button",onClick:()=>x(!1)},"Cancel"))))),Z&&j(e.createElement(Bt,{open:Z,onClose:()=>H(!1),title:"Pending Matches",maxWidth:"65vw"},e.createElement("div",{className:Ke.pendingMatchesModal},O.length===0?e.createElement("div",{className:Ke.noData},"No pending matches for this ladder."):e.createElement("div",{className:Ke.pendingMatchesTable},e.createElement("table",null,e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Date"),e.createElement("th",null,"Type"),e.createElement("th",null,"Challenger"),e.createElement("th",null,"Defender"),e.createElement("th",null,"Format"),e.createElement("th",null,"Location"),e.createElement("th",null,"Notes"),e.createElement("th",null,"Status"),e.createElement("th",null,"Actions"))),e.createElement("tbody",null,O.map((J,Ae)=>{var Ge,Le,de,je,ze,gt,re,Be,Oe,Te,rt,pt,jt,ba,da,ta;return e.createElement("tr",{key:J.id||Ae},e.createElement("td",null,J.scheduledDate?new Date(J.scheduledDate).toLocaleDateString():J.proposedDate?new Date(J.proposedDate).toLocaleDateString():"TBD"),e.createElement("td",null,e.createElement("span",{className:`${Ke.matchType} ${Ke[J.matchType||"challenge"]}`},J.matchType==="challenge"?"Challenge":J.matchType==="smackdown"?"SmackDown":J.matchType==="smackback"?"SmackBack":"Challenge")),e.createElement("td",null,e.createElement("strong",null,((Ge=J.challenger)==null?void 0:Ge.firstName)||((Le=J.player1)==null?void 0:Le.firstName)," ",((de=J.challenger)==null?void 0:de.lastName)||((je=J.player1)==null?void 0:je.lastName)),(((ze=J.challenger)==null?void 0:ze.position)||((gt=J.player1)==null?void 0:gt.position))&&` (#${((re=J.challenger)==null?void 0:re.position)||((Be=J.player1)==null?void 0:Be.position)})`,e.createElement("br",null),e.createElement("small",{style:{color:"#06b6d4"}},"Challenger")),e.createElement("td",null,e.createElement("strong",null,((Oe=J.defender)==null?void 0:Oe.firstName)||((Te=J.player2)==null?void 0:Te.firstName)," ",((rt=J.defender)==null?void 0:rt.lastName)||((pt=J.player2)==null?void 0:pt.lastName)),(((jt=J.defender)==null?void 0:jt.position)||((ba=J.player2)==null?void 0:ba.position))&&` (#${((da=J.defender)==null?void 0:da.position)||((ta=J.player2)==null?void 0:ta.position)})`,e.createElement("br",null),e.createElement("small",{style:{color:"#f59e0b"}},"Defender")),e.createElement("td",null,J.matchFormat||J.raceLength||"N/A"),e.createElement("td",null,J.location||J.venue||"N/A"),e.createElement("td",null,J.notes||"N/A"),e.createElement("td",null,e.createElement("span",{className:`${Ke.status} ${Ke.pending}`},"Pending")),e.createElement("td",null,e.createElement("button",{className:Ke.reportResultButton,onClick:()=>{nt(J),H(!1)}},"Report Result")))}))))))),e.createElement("div",{className:Ke.ladderSection},e.createElement("h3",{className:Ke.ladderTitle},R==="499-under"?"499 & Under":R==="500-549"?"500-549":R==="550-plus"?"550+":R," Ladder"),e.createElement("div",{className:Ke.playersList},n.filter(J=>J.ladderName===R).length>0?e.createElement("table",{className:Ke.table},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Position"),e.createElement("th",null,"Name"),e.createElement("th",null,"Email"),e.createElement("th",null,"Phone"),e.createElement("th",null,"Fargo Rate"),e.createElement("th",null,"Location"),e.createElement("th",null,"Status"),e.createElement("th",null,"Actions"))),e.createElement("tbody",null,n.filter(J=>J.ladderName===R).sort((J,Ae)=>(J.position||0)-(Ae.position||0)).map((J,Ae)=>e.createElement("tr",{key:J._id||J.email},e.createElement("td",null,J.position||Ae+1),e.createElement("td",null,J.firstName," ",J.lastName),e.createElement("td",null,J.email),e.createElement("td",null,J.phone),e.createElement("td",null,J.fargoRate),e.createElement("td",null,J.location),e.createElement("td",null,e.createElement("span",{className:`${Ke.status} ${J.isActive?Ke.active:Ke.inactive}`},J.isActive?"Active":"Inactive")),e.createElement("td",null,e.createElement("button",{className:Ke.editButton,onClick:()=>P(J)},"Edit"),e.createElement("button",{className:Ke.deleteButton,onClick:()=>ne(J.email)},"Remove")))))):e.createElement("div",{className:Ke.noPlayers},"No players in this ladder yet"))),A&&e.createElement("div",{className:Ke.matchHistorySection},e.createElement("h3",null,"Match History"),C.length===0?e.createElement("div",{className:Ke.noData},"No matches recorded yet."):e.createElement("div",{className:Ke.matchHistoryTable},e.createElement("table",null,e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Date"),e.createElement("th",null,"Winner"),e.createElement("th",null,"Loser"),e.createElement("th",null,"Score"),e.createElement("th",null,"Format"),e.createElement("th",null,"Location"),e.createElement("th",null,"Status"))),e.createElement("tbody",null,C.map((J,Ae)=>e.createElement("tr",{key:J.id||Ae},e.createElement("td",null,new Date(J.matchDate).toLocaleDateString()),e.createElement("td",null,e.createElement("strong",null,J.winner.name)," (#",J.winner.position,")"),e.createElement("td",null,J.loser.name," (#",J.loser.position,")"),e.createElement("td",null,J.score),e.createElement("td",null,J.matchFormat||"N/A"),e.createElement("td",null,J.location||"N/A"),e.createElement("td",null,e.createElement("span",{className:`${Ke.status} ${Ke[J.verificationStatus]}`},J.verificationStatus)))))))))}const eE=()=>{const[a]=U0(),r=a.get("ladder")||"499-under",[t,n]=b.useState([]),[o,i]=b.useState(!0),[c,u]=b.useState(null);b.useEffect(()=>{m()},[r]);const m=async()=>{try{i(!0);const f=await fetch(`${pe}/api/ladder/embed/${r}`);if(f.ok){const h=await f.json();n(h.players||[])}else u("Failed to load ladder data")}catch(f){console.error("Error loading ladder data:",f),u("Error loading ladder data")}finally{i(!1)}},g=f=>{switch(f){case"499-under":return"499 & Under";case"500-549":return"500-549";case"550-plus":return"550+";default:return f}};return o?e.createElement("div",{style:{padding:"20px",textAlign:"center",color:"#666",fontFamily:"Arial, sans-serif",background:"#1a1a1a",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"}},e.createElement("div",null,e.createElement("div",{style:{fontSize:"24px",marginBottom:"10px"}},"🏆"),e.createElement("div",null,"Loading ladder data..."))):c?e.createElement("div",{style:{padding:"20px",textAlign:"center",color:"#e53e3e",fontFamily:"Arial, sans-serif",background:"#1a1a1a",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"}},e.createElement("div",null,e.createElement("div",{style:{fontSize:"24px",marginBottom:"10px"}},"❌"),e.createElement("div",null,c))):e.createElement("div",{style:{fontFamily:"Arial, sans-serif",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",color:"#fff",minHeight:"100vh",padding:"10px",boxSizing:"border-box"}},e.createElement("div",{style:{textAlign:"center",marginBottom:"20px",borderBottom:"2px solid #e53e3e",paddingBottom:"15px"}},e.createElement("h1",{style:{margin:"0 0 5px 0",fontSize:"24px",color:"#e53e3e",textShadow:"2px 2px 4px rgba(0,0,0,0.8)"}},"Ladder of Legends"),e.createElement("h2",{style:{margin:"0",fontSize:"18px",color:"#ccc",fontWeight:"normal"}},g(r)," Ladder")),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"60px 1fr 80px 50px 50px 80px",background:"linear-gradient(135deg, #e53e3e, #c53030)",color:"white",fontWeight:"bold",fontSize:"14px",padding:"12px 8px",textAlign:"center"}},e.createElement("div",null,"Rank"),e.createElement("div",null,"Player"),e.createElement("div",null,"Fargo"),e.createElement("div",null,"W"),e.createElement("div",null,"L"),e.createElement("div",null,"Status")),t.map((f,h)=>e.createElement("div",{key:f._id||h,style:{display:"grid",gridTemplateColumns:"60px 1fr 80px 50px 50px 80px",padding:"10px 8px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",fontSize:"14px",alignItems:"center",background:h%2===0?"rgba(255, 255, 255, 0.02)":"transparent",transition:"background-color 0.2s ease"},onMouseEnter:v=>{v.currentTarget.style.background="rgba(229, 62, 62, 0.1)"},onMouseLeave:v=>{v.currentTarget.style.background=h%2===0?"rgba(255, 255, 255, 0.02)":"transparent"}},e.createElement("div",{style:{textAlign:"center",fontWeight:"bold",color:"#e53e3e"}},"#",f.position),e.createElement("div",{style:{paddingLeft:"8px",fontWeight:"500"}},f.firstName," ",f.lastName),e.createElement("div",{style:{textAlign:"center",color:"#ccc"}},f.fargoRate===0?"N/A":f.fargoRate),e.createElement("div",{style:{textAlign:"center",color:"#4CAF50",fontWeight:"bold"}},f.wins||0),e.createElement("div",{style:{textAlign:"center",color:"#f44336",fontWeight:"bold"}},f.losses||0),e.createElement("div",{style:{textAlign:"center"}},f.isActive?f.immunityUntil&&new Date(f.immunityUntil)>new Date?e.createElement("span",{style:{color:"#ff9800",fontSize:"12px"}},"Immune"):e.createElement("span",{style:{color:"#4CAF50",fontSize:"12px"}},"Active"):e.createElement("span",{style:{color:"#f44336",fontSize:"12px"}},"Inactive"))))),e.createElement("div",{style:{textAlign:"center",marginTop:"20px",fontSize:"12px",color:"#888",borderTop:"1px solid rgba(255, 255, 255, 0.1)",paddingTop:"15px"}},e.createElement("p",{style:{margin:"5px 0"}},e.createElement("strong",null,"Challenge Rules:")," Standard challenges up to 4 positions above, SmackDown up to 5 positions below"),e.createElement("p",{style:{margin:"5px 0"}},e.createElement("strong",null,"Anyone can view the ladder - no account required!")),e.createElement("p",{style:{margin:"5px 0",color:"#e53e3e"}},e.createElement("strong",null,"⚠️ INDEPENDENT TOURNAMENT SERIES ⚠️")),e.createElement("p",{style:{margin:"5px 0",fontSize:"11px"}},"This ladder system is ",e.createElement("strong",null,"NOT")," affiliated with, endorsed by, or sanctioned by the Front Range Pool League,",e.createElement("br",null),"CueSports International, BCA Pool League, or USA Pool League.",e.createElement("br",null),"It is an independent tournament series operated by ",e.createElement("strong",null,"Legends Brews and Cues"),".")))},Dj=()=>e.createElement(hE,null,e.createElement(mE,null,e.createElement(Fa,{path:"/ladder-embed",element:e.createElement("div",{style:{position:"relative",minHeight:"100vh",width:"100%",background:"#000",padding:0,margin:0}},e.createElement(eE,null))}),e.createElement(Fa,{path:"*",element:e.createElement("div",{style:{position:"relative",minHeight:"100vh",width:"100%",background:"#000",padding:0,margin:0}},e.createElement(eE,null))}))),Mj="_container_1uhx5_1",Rj="_header_1uhx5_23",Tj="_addButton_1uhx5_53",Pj="_formOverlay_1uhx5_85",Lj="_form_1uhx5_85",Bj="_formRow_1uhx5_145",zj="_checkboxes_1uhx5_201",Oj="_formButtons_1uhx5_239",Fj="_playersList_1uhx5_299",Uj="_table_1uhx5_307",Wj="_status_1uhx5_357",jj="_approved_1uhx5_375",Hj="_pending_1uhx5_385",$j="_active_1uhx5_395",Yj="_inactive_1uhx5_405",Gj="_editButton_1uhx5_415",qj="_deleteButton_1uhx5_417",Ra={container:Mj,header:Rj,addButton:Tj,formOverlay:Pj,form:Lj,formRow:Bj,checkboxes:zj,formButtons:Oj,playersList:Fj,table:Uj,status:Wj,approved:jj,pending:Hj,active:$j,inactive:Yj,editButton:Gj,deleteButton:qj};function Zj(){const[a,r]=b.useState([]),[t,n]=b.useState(!0),[o,i]=b.useState(null),[c,u]=b.useState(!1),[m,g]=b.useState({firstName:"",lastName:"",email:"",phone:"",pin:"",division:"",locations:"",isApproved:!0,isActive:!0}),f=async()=>{try{const C=await(await fetch(`${pe}/api/unified-auth/all-users`)).json();C.success&&r(C.users)}catch(N){console.error("Error fetching unified players:",N)}finally{n(!1)}};b.useEffect(()=>{f()},[]);const h=N=>{const{name:C,value:I,type:A,checked:_}=N.target;g(k=>({...k,[C]:A==="checkbox"?_:I}))},v=async N=>{N.preventDefault();try{const I=await(await fetch(`${pe}/api/unified-auth/admin/add-user`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).json();I.success?(u(!1),g({firstName:"",lastName:"",email:"",phone:"",pin:"",division:"",locations:"",isApproved:!0,isActive:!0}),f(),alert("Player added successfully!")):alert("Error adding player: "+I.message)}catch(C){console.error("Error adding player:",C),alert("Error adding player")}},S=async N=>{N.preventDefault();try{const I=await(await fetch(`${pe}/api/unified-auth/admin/update-user/${o._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).json();I.success?(i(null),g({firstName:"",lastName:"",email:"",phone:"",pin:"",division:"",locations:"",isApproved:!0,isActive:!0}),f(),alert("Player updated successfully!")):alert("Error updating player: "+I.message)}catch(C){console.error("Error updating player:",C),alert("Error updating player")}},x=N=>{i(N),g({firstName:N.firstName||"",lastName:N.lastName||"",email:N.email||"",phone:N.phone||"",pin:N.pin||"",division:N.division||"",locations:N.locations||"",isApproved:N.isApproved||!1,isActive:N.isActive||!0})},E=async N=>{if(confirm("Are you sure you want to delete this player?"))try{const I=await(await fetch(`${pe}/api/unified-auth/admin/delete-user/${N}`,{method:"DELETE"})).json();I.success?(f(),alert("Player deleted successfully!")):alert("Error deleting player: "+I.message)}catch(C){console.error("Error deleting player:",C),alert("Error deleting player")}};return t?e.createElement("div",{className:Ra.container},"Loading unified players..."):e.createElement("div",{className:Ra.container},e.createElement("div",{className:Ra.header},e.createElement("h2",null,"Unified Player Management"),e.createElement("button",{className:Ra.addButton,onClick:()=>u(!0)},"Add New Player")),c&&e.createElement("div",{className:Ra.formOverlay},e.createElement("div",{className:Ra.form},e.createElement("h3",null,"Add New Unified Player"),e.createElement("form",{onSubmit:v},e.createElement("div",{className:Ra.formRow},e.createElement("input",{type:"text",name:"firstName",placeholder:"First Name",value:m.firstName,onChange:h,required:!0}),e.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name",value:m.lastName,onChange:h,required:!0})),e.createElement("input",{type:"email",name:"email",placeholder:"Email",value:m.email,onChange:h,required:!0}),e.createElement("input",{type:"text",name:"phone",placeholder:"Phone",value:m.phone,onChange:h,required:!0}),e.createElement("input",{type:"text",name:"pin",placeholder:"PIN",value:m.pin,onChange:h,required:!0}),e.createElement("input",{type:"text",name:"division",placeholder:"Division",value:m.division,onChange:h}),e.createElement("input",{type:"text",name:"locations",placeholder:"Locations",value:m.locations,onChange:h}),e.createElement("div",{className:Ra.checkboxes},e.createElement("label",null,e.createElement("input",{type:"checkbox",name:"isApproved",checked:m.isApproved,onChange:h}),"Approved"),e.createElement("label",null,e.createElement("input",{type:"checkbox",name:"isActive",checked:m.isActive,onChange:h}),"Active")),e.createElement("div",{className:Ra.formButtons},e.createElement("button",{type:"submit"},"Add Player"),e.createElement("button",{type:"button",onClick:()=>u(!1)},"Cancel"))))),o&&e.createElement("div",{className:Ra.formOverlay},e.createElement("div",{className:Ra.form},e.createElement("h3",null,"Edit Unified Player: ",o.firstName," ",o.lastName),e.createElement("form",{onSubmit:S},e.createElement("div",{className:Ra.formRow},e.createElement("input",{type:"text",name:"firstName",placeholder:"First Name",value:m.firstName,onChange:h,required:!0}),e.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name",value:m.lastName,onChange:h,required:!0})),e.createElement("input",{type:"email",name:"email",placeholder:"Email",value:m.email,onChange:h,required:!0}),e.createElement("input",{type:"text",name:"phone",placeholder:"Phone",value:m.phone,onChange:h,required:!0}),e.createElement("input",{type:"text",name:"pin",placeholder:"PIN",value:m.pin,onChange:h,required:!0}),e.createElement("input",{type:"text",name:"division",placeholder:"Division",value:m.division,onChange:h}),e.createElement("input",{type:"text",name:"locations",placeholder:"Locations",value:m.locations,onChange:h}),e.createElement("div",{className:Ra.checkboxes},e.createElement("label",null,e.createElement("input",{type:"checkbox",name:"isApproved",checked:m.isApproved,onChange:h}),"Approved"),e.createElement("label",null,e.createElement("input",{type:"checkbox",name:"isActive",checked:m.isActive,onChange:h}),"Active")),e.createElement("div",{className:Ra.formButtons},e.createElement("button",{type:"submit"},"Update Player"),e.createElement("button",{type:"button",onClick:()=>i(null)},"Cancel"))))),e.createElement("div",{className:Ra.playersList},e.createElement("table",{className:Ra.table},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Name"),e.createElement("th",null,"Email"),e.createElement("th",null,"Phone"),e.createElement("th",null,"PIN"),e.createElement("th",null,"Role"),e.createElement("th",null,"Status"),e.createElement("th",null,"Actions"))),e.createElement("tbody",null,a.map(N=>e.createElement("tr",{key:N._id},e.createElement("td",null,N.firstName," ",N.lastName),e.createElement("td",null,N.email),e.createElement("td",null,N.phone),e.createElement("td",null,N.pin?"***":"Not Set"),e.createElement("td",null,N.role||"player"),e.createElement("td",null,e.createElement("span",{className:`${Ra.status} ${N.isApproved?Ra.approved:Ra.pending}`},N.isApproved?"Approved":"Pending"),e.createElement("span",{className:`${Ra.status} ${N.isActive?Ra.active:Ra.inactive}`},N.isActive?"Active":"Inactive")),e.createElement("td",null,e.createElement("button",{className:Ra.editButton,onClick:()=>x(N)},"Edit"),e.createElement("button",{className:Ra.deleteButton,onClick:()=>E(N._id)},"Delete"))))))))}const Vj=()=>{const a=Qn(),[r,t]=b.useState("info"),[n,o]=b.useState(null),[i,c]=b.useState(!0),[u,m]=b.useState(null),[g,f]=b.useState(!1),[h,v]=b.useState({firstName:"",lastName:"",email:"",phone:"",experience:"beginner",fargoRate:"",currentLeague:"",currentRanking:"",message:""}),[S,x]=b.useState(!1);b.useEffect(()=>{E()},[]);const E=async()=>{try{c(!0);const _=await fetch(`${pe}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:"guest@frontrangepool.com"})});if(_.ok){const k=await _.json();o(k.user),console.log("Guest user authenticated:",k.user)}else{const k=await _.json();console.error("Guest authentication failed:",k),m("Failed to authenticate guest user")}}catch(_){console.error("Error authenticating guest:",_),m("Network error during authentication")}finally{c(!1)}},N=()=>{a("/")},C=()=>{console.log("Opening join modal..."),f(!0)},I=async _=>{if(_.preventDefault(),!h.firstName||!h.lastName||!h.email){alert("Please fill in all required fields (First Name, Last Name, and Email)");return}x(!0);try{await new Promise(k=>setTimeout(k,1e3)),alert(`🏆 Thank you for your interest in joining the Front Range Pool League BCAPL Singles Division!

We've received your application:

Name: ${h.firstName} ${h.lastName}
Email: ${h.email}
Experience: ${h.experience}${h.fargoRate?`
FargoRate: ${h.fargoRate}`:""}${h.currentLeague?`
Current League: ${h.currentLeague}`:""}${h.currentRanking?`
Current Ranking: ${h.currentRanking}`:""}

We'll contact you at ${h.email} within 24-48 hours to set up your player profile and get you started in the BCAPL singles division!

In the meantime, you can also reach us directly at: frbcapl@gmail.com`),v({firstName:"",lastName:"",email:"",phone:"",experience:"beginner",fargoRate:"",currentLeague:"",currentRanking:"",message:""}),f(!1)}catch{alert("There was an error submitting your application. Please try again or contact us directly at frbcapl@gmail.com")}finally{x(!1)}},A={onScheduleMatch:()=>{alert(`📅 Schedule Match

This feature is available to members only.

Contact frbcapl@gmail.com to join and start scheduling matches!`)},onOpenChat:()=>{alert(`💬 Chat System

This feature is available to members only.

Contact frbcapl@gmail.com to join and start chatting with opponents!`)},onLogout:()=>{a("/")},onGoToAdmin:()=>{alert(`🔧 Admin Access

Admin features are only available to approved administrators.

Contact frbcapl@gmail.com for admin access requests.`)},onGoToPlatformAdmin:()=>{alert(`🔧 Platform Admin

Platform admin features are only available to super administrators.

Contact frbcapl@gmail.com for platform admin access requests.`)},onOpenOpponentsModal:()=>{alert(`👥 Opponents Modal

This feature is available to members only.

Contact frbcapl@gmail.com to join and view your opponents!`)},onOpenCompletedMatchesModal:()=>{alert(`✅ Completed Matches

This feature is available to members only.

Contact frbcapl@gmail.com to join and view your completed matches!`)},onOpenStandingsModal:()=>{alert(`📊 Standings

This feature is available to members only.

Contact frbcapl@gmail.com to join and view the standings!`)},onOpenAllMatchesModal:()=>{alert(`📋 All Matches

This feature is available to members only.

Contact frbcapl@gmail.com to join and view all matches!`)},onOpenProposalListModal:()=>{alert(`📝 Proposals

This feature is available to members only.

Contact frbcapl@gmail.com to join and view your proposals!`)},onOpenSentProposalListModal:()=>{alert(`📤 Sent Proposals

This feature is available to members only.

Contact frbcapl@gmail.com to join and view your sent proposals!`)},onMatchClick:()=>{alert(`🎯 Match Details

This feature is available to members only.

Contact frbcapl@gmail.com to join and view match details!`)},onOpenMessageCenter:()=>{alert(`💬 Message Center

This feature is available to members only.

Contact frbcapl@gmail.com to join and access the message center!`)},onSmartMatchClick:()=>{alert(`🧠 Smart Match

This feature is available to members only.

Contact frbcapl@gmail.com to join and use smart matchmaking!`)},onOpenCalendar:()=>{alert(`📅 Calendar

This feature is available to members only.

Contact frbcapl@gmail.com to join and access the calendar!`)}};return i?e.createElement("div",{className:"guest-app-container"},e.createElement("div",{className:"guest-app-header"},e.createElement("h1",null,"🏆 League App - Guest Preview"),e.createElement("p",null,"Loading guest access..."),e.createElement("div",{className:"guest-badge"},"👀 Guest Mode - Limited Access")),e.createElement("div",{className:"loading-spinner"},"Authenticating guest user...")):u?e.createElement("div",{className:"guest-app-container"},e.createElement("div",{className:"guest-app-header"},e.createElement("h1",null,"🏆 League App - Guest Preview"),e.createElement("p",null,"Error loading guest access"),e.createElement("div",{className:"guest-badge"},"👀 Guest Mode - Limited Access")),e.createElement("div",{className:"error-message"},e.createElement("p",null,"Error: ",u),e.createElement("button",{onClick:N,className:"back-btn"},"← Back to Hub"))):e.createElement("div",{className:"guest-app-container"},e.createElement("div",{className:"guest-app-header"},e.createElement("h1",null,"🏆 League App - Guest Preview"),e.createElement("p",null,"Experience the actual League App interface with limited functionality"),e.createElement("div",{className:"guest-badge"},"👀 Guest Mode - Limited Access"),e.createElement("div",{className:"guest-actions"},e.createElement("button",{onClick:N,className:"back-btn"},"← Back to Hub"),e.createElement("button",{onClick:C,className:"join-btn"},"Join League"))),e.createElement("div",{className:"view-tabs"},e.createElement("button",{className:`tab-btn ${r==="info"?"active":""}`,onClick:()=>t("info")},"ℹ️ League Info"),e.createElement("button",{className:`tab-btn ${r==="app"?"active":""}`,onClick:()=>t("app")},"🎮 Try App Interface")),e.createElement("div",{className:"content-area"},r==="app"&&e.createElement("div",{className:"app-preview-section"},e.createElement("div",{className:"guest-notice"},e.createElement("h3",null,"🎮 Interactive App Preview"),e.createElement("p",null,"You can explore the actual League App interface below. Try clicking buttons and opening modals to see how it works!"),e.createElement("div",{className:"guest-limitations",style:{textAlign:"center"}},e.createElement("strong",null,"Guest Limitations:"),e.createElement("ul",{style:{textAlign:"left",display:"inline-block",margin:"0.5rem auto"}},e.createElement("li",null,"• Can view all interfaces and modals"),e.createElement("li",null,"• Cannot submit forms or save data"),e.createElement("li",null,"• Cannot access chat or messaging"),e.createElement("li",null,"• Cannot schedule real matches"),e.createElement("li",null,"• Cannot access admin features")))),e.createElement("div",{className:"dashboard-preview"},(console.log("🎮 Guest App Debug - Dashboard Props:",{effectivePhase:"scheduled",hasSeasonData:!0,completedMatches:[{_id:"guest-match-1",player1Id:"Guest User",player2Id:"John Smith",winner:"Guest User",score:"5-3",matchDate:new Date(Date.now()-7*24*60*60*1e3),status:"completed"},{_id:"guest-match-2",player1Id:"Guest User",player2Id:"Jane Doe",winner:"Jane Doe",score:"3-5",matchDate:new Date(Date.now()-14*24*60*60*1e3),status:"completed"}],totalRequiredMatches:6,pendingCount:2,sentCount:1}),null),e.createElement(Zw,{playerName:(n==null?void 0:n.firstName)||"Guest",playerLastName:(n==null?void 0:n.lastName)||"User",senderEmail:(n==null?void 0:n.email)||"guest@frontrangepool.com",onScheduleMatch:A.onScheduleMatch,onOpenChat:A.onOpenChat,onLogout:A.onLogout,userPin:(n==null?void 0:n.pin)||"GUEST",onGoToAdmin:A.onGoToAdmin,onGoToPlatformAdmin:A.onGoToPlatformAdmin,effectivePhase:"scheduled",seasonData:{_id:"guest-season-1",name:"BCAPL Singles Division - Guest Preview",division:"FRBCAPL TEST",startDate:new Date,endDate:new Date(Date.now()+60*24*60*60*1e3),phase1EndDate:new Date(Date.now()+42*24*60*60*1e3),totalWeeks:10,currentWeek:3,isActive:!0},completedMatches:[{_id:"guest-match-1",player1Id:"Guest User",player2Id:"John Smith",winner:"Guest User",score:"5-3",matchDate:new Date(Date.now()-7*24*60*60*1e3),status:"completed"},{_id:"guest-match-2",player1Id:"Guest User",player2Id:"Jane Doe",winner:"Jane Doe",score:"3-5",matchDate:new Date(Date.now()-14*24*60*60*1e3),status:"completed"}],totalRequiredMatches:6,selectedDivision:"FRBCAPL TEST",pendingCount:2,sentCount:1,upcomingMatches:[{_id:"guest-upcoming-1",player1Id:"Guest User",player2Id:"Mike Johnson",proposedDate:new Date(Date.now()+7*24*60*60*1e3),status:"pending"}],allPlayers:[{firstName:"Guest",lastName:"User",email:"guest@frontrangepool.com"},{firstName:"John",lastName:"Smith",email:"john@example.com"},{firstName:"Jane",lastName:"Doe",email:"jane@example.com"},{firstName:"Mike",lastName:"Johnson",email:"mike@example.com"}],standings:[{rank:1,playerName:"John Smith",points:120,matchesPlayed:6},{rank:2,playerName:"Jane Doe",points:110,matchesPlayed:6},{rank:3,playerName:"Guest User",points:100,matchesPlayed:6},{rank:4,playerName:"Mike Johnson",points:90,matchesPlayed:6}],onOpenOpponentsModal:A.onOpenOpponentsModal,onOpenCompletedMatchesModal:A.onOpenCompletedMatchesModal,onOpenStandingsModal:A.onOpenStandingsModal,onOpenAllMatchesModal:A.onOpenAllMatchesModal,onOpenProposalListModal:A.onOpenProposalListModal,onOpenSentProposalListModal:A.onOpenSentProposalListModal,onMatchClick:A.onMatchClick,onOpenMessageCenter:A.onOpenMessageCenter,onSmartMatchClick:A.onSmartMatchClick,onOpenCalendar:A.onOpenCalendar}))),r==="info"&&e.createElement("div",{className:"info-section"},e.createElement("h2",null,"League Information"),e.createElement("div",{className:"info-cards"},e.createElement("div",{className:"info-card"},e.createElement("h3",null,"🏆 League Structure"),e.createElement("p",null,"BCAPL Singles Division - Hybrid Format"),e.createElement("ul",null,e.createElement("li",null,"Maximum 30 players per session"),e.createElement("li",null,"10-week sessions with two phases"),e.createElement("li",null,"Phase 1 - Weeks 1-6: ",e.createElement("br",null),"Scheduled opponents (6 matches)"),e.createElement("li",null,"Phase 2 - Weeks 7-10: ",e.createElement("br",null),"Challenge matches (2-4 matches)"),e.createElement("li",null,"FargoRate integrated rankings"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"📅 Match System"),e.createElement("p",null,"Flexible scheduling with two distinct phases"),e.createElement("ul",null,e.createElement("li",null,"Phase 1: 6 assigned opponents (any time, any location)"),e.createElement("li",null,"Phase 2: Challenge matches (up to 4 spots higher)"),e.createElement("li",null,"Race to 5 games per match"),e.createElement("li",null,"10 points per game won + 10 bonus for match winner"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"💬 Communication"),e.createElement("p",null,"Official scheduling hub and coordination system"),e.createElement("ul",null,e.createElement("li",null,"League website: https://frusapl.com"),e.createElement("li",null,"Scheduling Hub for match coordination"),e.createElement("li",null,"Direct messaging between players"),e.createElement("li",null,"League chat room for announcements"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"📊 Statistics & Rankings"),e.createElement("p",null,"FargoRate integrated scoring and tracking"),e.createElement("ul",null,e.createElement("li",null,"BCAPL scoring app for all matches"),e.createElement("li",null,"FargoRate standings and statistics"),e.createElement("li",null,"Total points determine final rankings"),e.createElement("li",null,"Handicapping based on FargoRate difference"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"💰 Fee Structure"),e.createElement("p",null,"Transparent pricing for BCAPL singles division"),e.createElement("ul",null,e.createElement("li",null,"Registration: $30 per player per division"),e.createElement("li",null,"Weekly dues: $10 per week"),e.createElement("li",null,"Sessions: 10 weeks long"),e.createElement("li",null,"Maximum: 30 players per division"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"🏆 Prize Payouts"),e.createElement("p",null,"Estimated payouts for BCAPL singles division based on 30 players"),e.createElement("h4",{style:{marginTop:"0.5rem",color:"#4CAF50",fontSize:"1rem"}},"🏅 Main Payouts"),e.createElement("ul",null,e.createElement("li",null,"1st Place: $600"),e.createElement("li",null,"2nd Place: $500"),e.createElement("li",null,"3rd Place: $400"),e.createElement("li",null,"4th Place: $300")),e.createElement("h4",{style:{marginTop:"0.5rem",color:"#4CAF50",fontSize:"1rem"}},"🎁 Special Awards ($100 each)"),e.createElement("ul",null,e.createElement("li",null,"Most Challenge Positions Gained (most spots climbed during challenge phase)"),e.createElement("li",null,"Biggest FargoRate Increase (min. 200+ robustness at end)"),e.createElement("li",null,"Sportsmanship Award (by player vote)"),e.createElement("li",null,"Random Drawing for Full Participation (all 10 matches completed)"),e.createElement("li",null,"Random Drawing for Full Pre-payment (paid in full before week 2)")),e.createElement("p",{style:{marginTop:"1rem",fontSize:"0.85rem",color:"#ccc",fontStyle:"italic",borderTop:"1px solid rgba(255, 255, 255, 0.2)",paddingTop:"0.5rem"}},e.createElement("strong",null,"Note:")," Places paid, amounts, and special prizes subject to change based on number of players in division."))),e.createElement("div",{className:"join-section"},e.createElement("h3",null,"Ready to Join?"),e.createElement("p",null,"Become a member to access all features and start competing!"),e.createElement("button",{onClick:C,className:"join-btn-large"},"🏆 Join the League Today"),e.createElement("p",{className:"contact-info"},"Contact: ",e.createElement("strong",null,"frbcapl@gmail.com"))))),g&&e.createElement(Bt,{open:g,onClose:()=>f(!1),title:"🏆 Join Front Range Pool League - BCAPL Singles Division",maxWidth:"700px"},e.createElement("form",{onSubmit:I},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"0.75rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"firstName",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"First Name *"),e.createElement("input",{type:"text",id:"firstName",value:h.firstName,onChange:_=>v({...h,firstName:_.target.value}),required:!0,placeholder:"Enter your first name",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"lastName",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Last Name *"),e.createElement("input",{type:"text",id:"lastName",value:h.lastName,onChange:_=>v({...h,lastName:_.target.value}),required:!0,placeholder:"Enter your last name",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}}))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"0.75rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"email",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Email Address *"),e.createElement("input",{type:"email",id:"email",value:h.email,onChange:_=>v({...h,email:_.target.value}),required:!0,placeholder:"Enter your email address",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"phone",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Phone Number"),e.createElement("input",{type:"tel",id:"phone",value:h.phone,onChange:_=>v({...h,phone:_.target.value}),placeholder:"Enter your phone number (optional)",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}}))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"0.75rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"fargoRate",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Fargo Rate, if applicable"),e.createElement("input",{type:"number",id:"fargoRate",value:h.fargoRate,onChange:_=>v({...h,fargoRate:_.target.value}),min:"0",max:"850",placeholder:"Enter your Fargo rate (optional)",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"experience",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Experience Level"),e.createElement("select",{id:"experience",value:h.experience,onChange:_=>v({...h,experience:_.target.value}),style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}},e.createElement("option",{value:"beginner"},"Beginner"),e.createElement("option",{value:"intermediate"},"Intermediate"),e.createElement("option",{value:"advanced"},"Advanced"),e.createElement("option",{value:"expert"},"Expert")))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"0.75rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"currentLeague",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Current League (Optional)"),e.createElement("input",{type:"text",id:"currentLeague",value:h.currentLeague,onChange:_=>v({...h,currentLeague:_.target.value}),placeholder:"e.g., APA, BCA, Local League",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"currentRanking",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Current Ranking (Optional)"),e.createElement("input",{type:"text",id:"currentRanking",value:h.currentRanking,onChange:_=>v({...h,currentRanking:_.target.value}),placeholder:"e.g., 5, 6, 7, 8, 9",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}}))),e.createElement("div",{style:{marginBottom:"0.75rem"}},e.createElement("label",{htmlFor:"message",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Additional Message (Optional)"),e.createElement("textarea",{id:"message",value:h.message,onChange:_=>v({...h,message:_.target.value}),placeholder:"Tell us about your pool experience, goals, or any questions you have...",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",minHeight:"60px",maxHeight:"80px",resize:"vertical",boxSizing:"border-box"}})),e.createElement("div",{style:{display:"flex",gap:"1rem",marginTop:"0.5rem"}},e.createElement("button",{type:"button",onClick:()=>f(!1),disabled:S,style:{flex:1,padding:"0.8rem 1.2rem",background:"transparent",color:"#ccc",border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease"}},"Cancel"),e.createElement("button",{type:"submit",disabled:S,style:{flex:1,padding:"0.8rem 1.2rem",background:"linear-gradient(45deg, #4CAF50, #45a049)",color:"white",border:"2px solid #4CAF50",borderRadius:"8px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease"}},S?"Submitting...":"🏆 Join BCAPL Singles Division"))),e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"8px",padding:"0.6rem",marginTop:"0.5rem"}},e.createElement("h3",{style:{color:"#4CAF50",margin:"0 0 0.5rem 0",fontSize:"1rem",fontWeight:"bold"}},"📋 What to Expect"),e.createElement("ul",{style:{margin:"0",paddingLeft:"1rem",color:"#ccc",fontSize:"0.9rem",lineHeight:"1.3"}},e.createElement("li",null,"We'll review your application and contact you as soon as possible"),e.createElement("li",null,"After registration fee is received, you'll be placed in an appropriate BCAPL singles division based on division availability"),e.createElement("li",null,"Start competing in regular season matches and BCAPL tournaments"),e.createElement("li",null,"Track your standings and statistics throughout the BCAPL season")))))},Qj=()=>{const a=Qn(),[r]=U0(),[t,n]=b.useState(!0),[o,i]=b.useState(null),[c,u]=b.useState(null);b.useEffect(()=>{m()},[]);const m=async()=>{try{const h=r.get("email"),v=r.get("type"),S=r.get("claimData");if(!h||!v||!S){u("Missing payment information. Please contact support."),n(!1);return}const x=JSON.parse(decodeURIComponent(S));console.log("🔍 Verifying payment for:",h),console.log("📋 Claim data:",x);const E=await fetch(`${pe}/api/monetization/check-payment-status`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h,claimData:x})});if(E.ok){const N=await E.json();console.log("✅ Payment verification result:",N),N.success&&N.paymentStatus==="completed"?i({success:!0,message:`🎉 Payment successful! Your claim for Position #${x.position} in the ${x.ladder} ladder has been approved.`,claimData:N.claimData}):u("Payment verification failed. Please contact support.")}else u("Failed to verify payment. Please contact support.")}catch(h){console.error("Error verifying payment:",h),u("An error occurred while verifying payment. Please contact support.")}finally{n(!1)}},g=()=>{a("/guest/ladder?paymentSuccess=true")},f=()=>{window.location.href="mailto:frbcapl@gmail.com?subject=Payment Verification Issue"};return t?e.createElement("div",{className:"payment-success-container"},e.createElement("div",{className:"verification-section"},e.createElement("div",{className:"loading-spinner"},"⏳"),e.createElement("h2",null,"Verifying Payment..."),e.createElement("p",null,"Please wait while we verify your payment with Square."))):c?e.createElement("div",{className:"payment-success-container"},e.createElement("div",{className:"error-section"},e.createElement("div",{className:"error-icon"},"❌"),e.createElement("h2",null,"Payment Verification Failed"),e.createElement("p",{className:"error-message"},c),e.createElement("div",{className:"action-buttons"},e.createElement("button",{onClick:g,className:"return-btn"},"← Return to Ladder"),e.createElement("button",{onClick:f,className:"contact-btn"},"📧 Contact Support")))):o!=null&&o.success?e.createElement("div",{className:"payment-success-container"},e.createElement("div",{className:"success-section"},e.createElement("div",{className:"success-icon"},"🎉"),e.createElement("h2",null,"Payment Successful!"),e.createElement("div",{className:"success-message"},e.createElement("p",null,o.message),e.createElement("div",{className:"claim-details"},e.createElement("h3",null,"Claim Details:"),e.createElement("ul",null,e.createElement("li",null,e.createElement("strong",null,"Position:")," #",o.claimData.position),e.createElement("li",null,e.createElement("strong",null,"Ladder:")," ",o.claimData.ladder),e.createElement("li",null,e.createElement("strong",null,"Email:")," ",o.claimData.email),e.createElement("li",null,e.createElement("strong",null,"Player:")," ",o.claimData.playerName))),e.createElement("div",{className:"next-steps"},e.createElement("h3",null,"Next Steps:"),e.createElement("ol",null,e.createElement("li",null,"Your claim has been approved and recorded"),e.createElement("li",null,"You now have access to all ladder features"),e.createElement("li",null,"You can start challenging other players"),e.createElement("li",null,"Your membership will be automatically renewed monthly")))),e.createElement("div",{className:"action-buttons"},e.createElement("button",{onClick:g,className:"return-btn"},"🎯 Return to Ladder")))):e.createElement("div",{className:"payment-success-container"},e.createElement("div",{className:"unknown-section"},e.createElement("div",{className:"unknown-icon"},"❓"),e.createElement("h2",null,"Payment Status Unknown"),e.createElement("p",null,"We couldn't determine the status of your payment. Please contact support."),e.createElement("div",{className:"action-buttons"},e.createElement("button",{onClick:g,className:"return-btn"},"← Return to Ladder"),e.createElement("button",{onClick:f,className:"contact-btn"},"📧 Contact Support"))))};function Jj({isAuthenticated:a,userFirstName:r,userLastName:t,userEmail:n,userPin:o,userType:i,handleLoginSuccess:c,handleLogout:u}){return Qn(),e.createElement("main",{className:"main-app-content"},a?e.createElement(Xw,{isAuthenticated:a,userFirstName:r,userLastName:t,userEmail:n,userPin:o,userType:i,handleLogout:u}):e.createElement(BW,{onLoginSuccess:c}))}function Xj(){const a=ao(),[r,t]=b.useState(!1);b.useEffect(()=>{},[]);const[n,o]=b.useState(""),[i,c]=b.useState(""),[u,m]=b.useState(""),[g,f]=b.useState(""),[h,v]=b.useState("league"),[S,x]=b.useState("");b.useEffect(()=>{localStorage.getItem("isAuthenticated")==="true"&&(o(localStorage.getItem("userFirstName")||""),c(localStorage.getItem("userLastName")||""),m(localStorage.getItem("userEmail")||""),f(localStorage.getItem("userPin")||""),v(localStorage.getItem("userType")||"league"),t(!0))},[]),b.useEffect(()=>{const H=F=>{x(F.detail)},V=F=>{console.log("App.jsx received ladderLoginSuccess event:",F.detail);const{name:R,email:D,pin:j,userType:X}=F.detail;E(R,D,j,X)};return window.addEventListener("appNameChange",H),window.addEventListener("ladderLoginSuccess",V),()=>{window.removeEventListener("appNameChange",H),window.removeEventListener("ladderLoginSuccess",V)}},[]);const E=(H,V,F,R,D=null)=>{let j="",X="";if(H){const W=H.trim().split(" ");j=W[0],X=W.slice(1).join(" ")}o(j),c(X),m(V),f(F),v(R||"league"),t(!0),localStorage.setItem("userFirstName",j),localStorage.setItem("userLastName",X),localStorage.setItem("userEmail",V),localStorage.setItem("userPin",F),localStorage.setItem("userType",R||"league"),localStorage.setItem("isAuthenticated","true"),D&&localStorage.setItem("unifiedUserData",JSON.stringify(D)),console.log("🔐 Unified Login Success:",{firstName:j,lastName:X,email:V,userType:R,pin:F?"***":"none",hasUserData:!!D})},[N,C]=b.useState(!1),[I,A]=b.useState(!1),[_,k]=b.useState(!1),[B,z]=b.useState(!1),M=()=>N,O=()=>I;b.useEffect(()=>{(async()=>{if(r&&u&&g){k(!0);try{const V=await Gs.isSuperAdmin(u,g);C(V);const F=await Gs.isAdmin(u,g);A(F),console.log("🔍 Admin Status Check:",{userEmail:u,isSuperAdmin:V,isAdmin:F})}catch(V){console.log("🔍 Admin check failed:",V.message),C(!1),A(!1)}finally{k(!1)}}})()},[r,u,g]);const U=()=>{z(!0)},Z=()=>{o(""),c(""),m(""),f(""),v("league"),x(""),t(!1),A(!1),C(!1),localStorage.removeItem("userFirstName"),localStorage.removeItem("userLastName"),localStorage.removeItem("userEmail"),localStorage.removeItem("userPin"),localStorage.removeItem("userType"),localStorage.removeItem("isAuthenticated")};return e.createElement("div",{style:{position:"relative",minHeight:"100vh",width:"100%",overflowX:"hidden",background:"#000"}},(()=>{const H=a.pathname.startsWith("/ladder");return console.log("🔍 Current pathname:",a.pathname),console.log("🔍 Is ladder route:",H),console.log("🔍 Should show global FloatingLogos:",!H),!H&&e.createElement(CW,null)})(),e.createElement(zW,{currentAppName:S,isAdmin:I,isSuperAdmin:N,onLogout:Z,userFirstName:n,userLastName:i,onProfileClick:U}),e.createElement("div",{style:{position:"relative",zIndex:3,maxWidth:900,margin:"0 auto",width:"100%",background:"none",minHeight:"100vh",paddingTop:"200px"}},e.createElement(mE,null,e.createElement(Fa,{path:"/ladder-embed",element:e.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",padding:0,margin:0,zIndex:9999}},e.createElement(Id,{playerName:"Guest",playerLastName:"User",senderEmail:"guest@frontrangepool.com",userPin:"GUEST",onLogout:()=>{},isAdmin:!1,showClaimForm:!1,initialView:"ladders",isPublicView:!0,onClaimLadderPosition:()=>{},claimedPositions:[],isPositionClaimed:()=>!1}))}),e.createElement(Fa,{path:"/hub",element:r?e.createElement(Dr,{appName:"Front Range Pool Hub"},e.createElement("main",{className:"main-app-content"},e.createElement(Xw,{isAuthenticated:r,userFirstName:n,userLastName:i,userEmail:u,userPin:g,userType:h,handleLogout:Z}))):e.createElement(co,{to:"/"})}),e.createElement(Fa,{path:"/league",element:r?e.createElement(Dr,{appName:"Front Range Pool League"},e.createElement("main",{className:"main-app-content"},e.createElement(Zw,{playerName:n,playerLastName:i,senderEmail:u,onScheduleMatch:()=>{},onOpenChat:()=>window.location.hash="#/league/chat",userPin:g,onGoToAdmin:()=>{},onGoToPlatformAdmin:()=>navigate("/platform-admin"),isAdmin:I}))):e.createElement(co,{to:"/"})}),e.createElement(Fa,{path:"/league/chat",element:r?e.createElement(Dr,{appName:"Front Range Pool League - Chat"},e.createElement("main",{className:"main-app-content"},e.createElement(_w,{userName:`${n} ${i}`,userEmail:u,userPin:g}))):e.createElement(co,{to:"/"})}),e.createElement(Fa,{path:"/ladder",element:r?e.createElement(Dr,{appName:"Ladder of Legends"},e.createElement("main",{className:"main-app-content"},e.createElement(Id,{playerName:n,playerLastName:i,senderEmail:u,userPin:g,isAdmin:I,userType:h}))):e.createElement(co,{to:"/"})}),e.createElement(Fa,{path:"/guest/league",element:e.createElement(Dr,{appName:"League App - Guest Preview"},e.createElement("main",{className:"main-app-content"},e.createElement(Vj,null)))}),e.createElement(Fa,{path:"/guest/ladder",element:e.createElement(Dr,{appName:"Ladder of Legends - Guest Preview"},e.createElement("main",{className:"main-app-content"},e.createElement(LW,null)))}),e.createElement(Fa,{path:"/ladder/manage",element:r&&O()?e.createElement(Dr,{appName:"Ladder of Legends Management"},e.createElement("main",{className:"main-app-content"},e.createElement(jW,{userEmail:u,userPin:g}))):e.createElement(co,{to:"/"})}),e.createElement(Fa,{path:"/ladder/admin",element:r&&O()?e.createElement(Dr,{appName:"Ladder of Legends Player Management"},e.createElement("main",{className:"main-app-content"},e.createElement(Aj,null))):e.createElement(co,{to:"/"})}),e.createElement(Fa,{path:"/embed/*",element:e.createElement(Dj,null)}),e.createElement(Fa,{path:"/admin",element:r&&O()?e.createElement(Dr,{appName:"Admin Dashboard"},e.createElement("div",{className:"admin-app-content"},e.createElement(VF,null))):e.createElement(co,{to:"/"})}),e.createElement(Fa,{path:"/admin/players",element:r&&O()?e.createElement(Dr,{appName:"Player Management"},e.createElement("div",{className:"admin-app-content"},e.createElement(Zj,null))):e.createElement(co,{to:"/"})}),e.createElement(Fa,{path:"/platform-admin",element:r&&M()?e.createElement(Dr,{appName:"Platform Admin"},e.createElement("div",{className:"platform-admin-app-content"},e.createElement(QF,null))):e.createElement(co,{to:"/"})}),e.createElement(Fa,{path:"/confirm-match",element:e.createElement(JI,null)}),e.createElement(Fa,{path:"/payment-success",element:e.createElement(Qj,null)}),e.createElement(Fa,{path:"/simple-pool",element:e.createElement(M0,null)}),e.createElement(Fa,{path:"/tenball-tutorial",element:e.createElement(vW,null)}),e.createElement(Fa,{path:"/mobile-test",element:e.createElement(_W,null)}),e.createElement(Fa,{path:"/",element:e.createElement(Dr,{appName:r?"Front Range Pool Hub":""},e.createElement(Jj,{isAuthenticated:r,userFirstName:n,userLastName:i,userEmail:u,userPin:g,userType:h,handleLoginSuccess:E,handleLogout:Z}))}),e.createElement(Fa,{path:"*",element:e.createElement(co,{to:"/"})}))),r&&e.createElement(Gw,{isOpen:B,onClose:()=>z(!1),currentUser:{firstName:n,lastName:i,email:u,phone:"",locations:"",availability:{}},isMobile:!1,onUserUpdate:()=>{console.log("Profile updated from global modal")}}))}function Kj(){return e.createElement(hE,null,e.createElement(Xj,null))}try{MC(async()=>{const{default:a}=await import("./ResizeObserver.es-EPYnRShv.js");return{default:a}},[],import.meta.url).then(({default:a})=>{window.ResizeObserver||(window.ResizeObserver=a)}).catch(()=>{console.warn("ResizeObserver polyfill not available")})}catch(a){console.warn("ResizeObserver polyfill setup failed:",a)}if(typeof window<"u"&&window.self!==window.top){document.documentElement.setAttribute("data-iframe","true"),document.body.setAttribute("data-iframe","true");const r=document.getElementById("root");r&&r.setAttribute("data-iframe","true")}FC.createRoot(document.getElementById("root")).render(e.createElement(e.StrictMode,null,e.createElement(Kj,null)));
