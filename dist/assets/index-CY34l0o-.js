var YC=Object.defineProperty;var qC=(a,r,t)=>r in a?YC(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t;var gt=(a,r,t)=>qC(a,typeof r!="symbol"?r+"":r,t);function GC(a,r){for(var t=0;t<r.length;t++){const n=r[t];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in a)){const i=Object.getOwnPropertyDescriptor(n,o);i&&Object.defineProperty(a,o,i.get?i:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();const ZC="modulepreload",VC=function(a,r){return new URL(a,r).href},Zv={},QC=function(r,t,n){let o=Promise.resolve();if(t&&t.length>0){let c=function(f){return Promise.all(f.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};const u=document.getElementsByTagName("link"),m=document.querySelector("meta[property=csp-nonce]"),g=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));o=c(t.map(f=>{if(f=VC(f,n),f in Zv)return;Zv[f]=!0;const y=f.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(!!n)for(let x=u.length-1;x>=0;x--){const k=u[x];if(k.href===f&&(!y||k.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${v}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":ZC,y||(w.as="script"),w.crossOrigin="",w.href=f,g&&w.setAttribute("nonce",g),document.head.appendChild(w),y)return new Promise((x,k)=>{w.addEventListener("load",x),w.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return o.then(c=>{for(const u of c||[])u.status==="rejected"&&i(u.reason);return r().catch(i)})};function Up(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var ih={exports:{}},Ht={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function JC(){if(Vv)return Ht;Vv=1;var a=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),y=Symbol.iterator;function v(O){return O===null||typeof O!="object"?null:(O=y&&O[y]||O["@@iterator"],typeof O=="function"?O:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,x={};function k(O,Q,ne){this.props=O,this.context=Q,this.refs=x,this.updater=ne||S}k.prototype.isReactComponent={},k.prototype.setState=function(O,Q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Q,"setState")},k.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function E(){}E.prototype=k.prototype;function I(O,Q,ne){this.props=O,this.context=Q,this.refs=x,this.updater=ne||S}var M=I.prototype=new E;M.constructor=I,w(M,k.prototype),M.isPureReactComponent=!0;var N=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function B(O,Q,ne,T,re,G){return ne=G.ref,{$$typeof:a,type:O,key:Q,ref:ne!==void 0?ne:null,props:G}}function R(O,Q){return B(O.type,Q,void 0,void 0,void 0,O.props)}function W(O){return typeof O=="object"&&O!==null&&O.$$typeof===a}function L(O){var Q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ne){return Q[ne]})}var F=/\/+/g;function j(O,Q){return typeof O=="object"&&O!==null&&O.key!=null?L(""+O.key):Q.toString(36)}function J(){}function Y(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(J,J):(O.status="pending",O.then(function(Q){O.status==="pending"&&(O.status="fulfilled",O.value=Q)},function(Q){O.status==="pending"&&(O.status="rejected",O.reason=Q)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function D(O,Q,ne,T,re){var G=typeof O;(G==="undefined"||G==="boolean")&&(O=null);var se=!1;if(O===null)se=!0;else switch(G){case"bigint":case"string":case"number":se=!0;break;case"object":switch(O.$$typeof){case a:case r:se=!0;break;case f:return se=O._init,D(se(O._payload),Q,ne,T,re)}}if(se)return re=re(O),se=T===""?"."+j(O,0):T,N(re)?(ne="",se!=null&&(ne=se.replace(F,"$&/")+"/"),D(re,Q,ne,"",function(at){return at})):re!=null&&(W(re)&&(re=R(re,ne+(re.key==null||O&&O.key===re.key?"":(""+re.key).replace(F,"$&/")+"/")+se)),Q.push(re)),1;se=0;var pe=T===""?".":T+":";if(N(O))for(var Se=0;Se<O.length;Se++)T=O[Se],G=pe+j(T,Se),se+=D(T,Q,ne,G,re);else if(Se=v(O),typeof Se=="function")for(O=Se.call(O),Se=0;!(T=O.next()).done;)T=T.value,G=pe+j(T,Se++),se+=D(T,Q,ne,G,re);else if(G==="object"){if(typeof O.then=="function")return D(Y(O),Q,ne,T,re);throw Q=String(O),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return se}function A(O,Q,ne){if(O==null)return O;var T=[],re=0;return D(O,T,"","",function(G){return Q.call(ne,G,re++)}),T}function U(O){if(O._status===-1){var Q=O._result;Q=Q(),Q.then(function(ne){(O._status===0||O._status===-1)&&(O._status=1,O._result=ne)},function(ne){(O._status===0||O._status===-1)&&(O._status=2,O._result=ne)}),O._status===-1&&(O._status=0,O._result=Q)}if(O._status===1)return O._result.default;throw O._result}var K=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function X(){}return Ht.Children={map:A,forEach:function(O,Q,ne){A(O,function(){Q.apply(this,arguments)},ne)},count:function(O){var Q=0;return A(O,function(){Q++}),Q},toArray:function(O){return A(O,function(Q){return Q})||[]},only:function(O){if(!W(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ht.Component=k,Ht.Fragment=t,Ht.Profiler=o,Ht.PureComponent=I,Ht.StrictMode=n,Ht.Suspense=m,Ht.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,Ht.__COMPILER_RUNTIME={__proto__:null,c:function(O){return _.H.useMemoCache(O)}},Ht.cache=function(O){return function(){return O.apply(null,arguments)}},Ht.cloneElement=function(O,Q,ne){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var T=w({},O.props),re=O.key,G=void 0;if(Q!=null)for(se in Q.ref!==void 0&&(G=void 0),Q.key!==void 0&&(re=""+Q.key),Q)!P.call(Q,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&Q.ref===void 0||(T[se]=Q[se]);var se=arguments.length-2;if(se===1)T.children=ne;else if(1<se){for(var pe=Array(se),Se=0;Se<se;Se++)pe[Se]=arguments[Se+2];T.children=pe}return B(O.type,re,void 0,void 0,G,T)},Ht.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:i,_context:O},O},Ht.createElement=function(O,Q,ne){var T,re={},G=null;if(Q!=null)for(T in Q.key!==void 0&&(G=""+Q.key),Q)P.call(Q,T)&&T!=="key"&&T!=="__self"&&T!=="__source"&&(re[T]=Q[T]);var se=arguments.length-2;if(se===1)re.children=ne;else if(1<se){for(var pe=Array(se),Se=0;Se<se;Se++)pe[Se]=arguments[Se+2];re.children=pe}if(O&&O.defaultProps)for(T in se=O.defaultProps,se)re[T]===void 0&&(re[T]=se[T]);return B(O,G,void 0,void 0,null,re)},Ht.createRef=function(){return{current:null}},Ht.forwardRef=function(O){return{$$typeof:u,render:O}},Ht.isValidElement=W,Ht.lazy=function(O){return{$$typeof:f,_payload:{_status:-1,_result:O},_init:U}},Ht.memo=function(O,Q){return{$$typeof:g,type:O,compare:Q===void 0?null:Q}},Ht.startTransition=function(O){var Q=_.T,ne={};_.T=ne;try{var T=O(),re=_.S;re!==null&&re(ne,T),typeof T=="object"&&T!==null&&typeof T.then=="function"&&T.then(X,K)}catch(G){K(G)}finally{_.T=Q}},Ht.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},Ht.use=function(O){return _.H.use(O)},Ht.useActionState=function(O,Q,ne){return _.H.useActionState(O,Q,ne)},Ht.useCallback=function(O,Q){return _.H.useCallback(O,Q)},Ht.useContext=function(O){return _.H.useContext(O)},Ht.useDebugValue=function(){},Ht.useDeferredValue=function(O,Q){return _.H.useDeferredValue(O,Q)},Ht.useEffect=function(O,Q,ne){var T=_.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return T.useEffect(O,Q)},Ht.useId=function(){return _.H.useId()},Ht.useImperativeHandle=function(O,Q,ne){return _.H.useImperativeHandle(O,Q,ne)},Ht.useInsertionEffect=function(O,Q){return _.H.useInsertionEffect(O,Q)},Ht.useLayoutEffect=function(O,Q){return _.H.useLayoutEffect(O,Q)},Ht.useMemo=function(O,Q){return _.H.useMemo(O,Q)},Ht.useOptimistic=function(O,Q){return _.H.useOptimistic(O,Q)},Ht.useReducer=function(O,Q,ne){return _.H.useReducer(O,Q,ne)},Ht.useRef=function(O){return _.H.useRef(O)},Ht.useState=function(O){return _.H.useState(O)},Ht.useSyncExternalStore=function(O,Q,ne){return _.H.useSyncExternalStore(O,Q,ne)},Ht.useTransition=function(){return _.H.useTransition()},Ht.version="19.1.0",Ht}var Qv;function U0(){return Qv||(Qv=1,ih.exports=JC()),ih.exports}var h=U0();const e=Up(h),ux=GC({__proto__:null,default:e},[h]);var ch={exports:{}},Yc={},dh={exports:{}},uh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function XC(){return Jv||(Jv=1,function(a){function r(A,U){var K=A.length;A.push(U);e:for(;0<K;){var X=K-1>>>1,O=A[X];if(0<o(O,U))A[X]=U,A[K]=O,K=X;else break e}}function t(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var U=A[0],K=A.pop();if(K!==U){A[0]=K;e:for(var X=0,O=A.length,Q=O>>>1;X<Q;){var ne=2*(X+1)-1,T=A[ne],re=ne+1,G=A[re];if(0>o(T,K))re<O&&0>o(G,T)?(A[X]=G,A[re]=K,X=re):(A[X]=T,A[ne]=K,X=ne);else if(re<O&&0>o(G,K))A[X]=G,A[re]=K,X=re;else break e}}return U}function o(A,U){var K=A.sortIndex-U.sortIndex;return K!==0?K:A.id-U.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;a.unstable_now=function(){return i.now()}}else{var c=Date,u=c.now();a.unstable_now=function(){return c.now()-u}}var m=[],g=[],f=1,y=null,v=3,S=!1,w=!1,x=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function N(A){for(var U=t(g);U!==null;){if(U.callback===null)n(g);else if(U.startTime<=A)n(g),U.sortIndex=U.expirationTime,r(m,U);else break;U=t(g)}}function _(A){if(x=!1,N(A),!w)if(t(m)!==null)w=!0,P||(P=!0,j());else{var U=t(g);U!==null&&D(_,U.startTime-A)}}var P=!1,B=-1,R=5,W=-1;function L(){return k?!0:!(a.unstable_now()-W<R)}function F(){if(k=!1,P){var A=a.unstable_now();W=A;var U=!0;try{e:{w=!1,x&&(x=!1,I(B),B=-1),S=!0;var K=v;try{t:{for(N(A),y=t(m);y!==null&&!(y.expirationTime>A&&L());){var X=y.callback;if(typeof X=="function"){y.callback=null,v=y.priorityLevel;var O=X(y.expirationTime<=A);if(A=a.unstable_now(),typeof O=="function"){y.callback=O,N(A),U=!0;break t}y===t(m)&&n(m),N(A)}else n(m);y=t(m)}if(y!==null)U=!0;else{var Q=t(g);Q!==null&&D(_,Q.startTime-A),U=!1}}break e}finally{y=null,v=K,S=!1}U=void 0}}finally{U?j():P=!1}}}var j;if(typeof M=="function")j=function(){M(F)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Y=J.port2;J.port1.onmessage=F,j=function(){Y.postMessage(null)}}else j=function(){E(F,0)};function D(A,U){B=E(function(){A(a.unstable_now())},U)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(A){A.callback=null},a.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<A?Math.floor(1e3/A):5},a.unstable_getCurrentPriorityLevel=function(){return v},a.unstable_next=function(A){switch(v){case 1:case 2:case 3:var U=3;break;default:U=v}var K=v;v=U;try{return A()}finally{v=K}},a.unstable_requestPaint=function(){k=!0},a.unstable_runWithPriority=function(A,U){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var K=v;v=A;try{return U()}finally{v=K}},a.unstable_scheduleCallback=function(A,U,K){var X=a.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?X+K:X):K=X,A){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=K+O,A={id:f++,callback:U,priorityLevel:A,startTime:K,expirationTime:O,sortIndex:-1},K>X?(A.sortIndex=K,r(g,A),t(m)===null&&A===t(g)&&(x?(I(B),B=-1):x=!0,D(_,K-X))):(A.sortIndex=O,r(m,A),w||S||(w=!0,P||(P=!0,j()))),A},a.unstable_shouldYield=L,a.unstable_wrapCallback=function(A){var U=v;return function(){var K=v;v=U;try{return A.apply(this,arguments)}finally{v=K}}}}(uh)),uh}var Xv;function KC(){return Xv||(Xv=1,dh.exports=XC()),dh.exports}var mh={exports:{}},Qn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv;function e3(){if(Kv)return Qn;Kv=1;var a=U0();function r(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)g+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(r(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function i(m,g,f){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:m,containerInfo:g,implementation:f}}var c=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Qn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Qn.createPortal=function(m,g){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(r(299));return i(m,g,null,f)},Qn.flushSync=function(m){var g=c.T,f=n.p;try{if(c.T=null,n.p=2,m)return m()}finally{c.T=g,n.p=f,n.d.f()}},Qn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,n.d.C(m,g))},Qn.prefetchDNS=function(m){typeof m=="string"&&n.d.D(m)},Qn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var f=g.as,y=u(f,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;f==="style"?n.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:S}):f==="script"&&n.d.X(m,{crossOrigin:y,integrity:v,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Qn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var f=u(g.as,g.crossOrigin);n.d.M(m,{crossOrigin:f,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&n.d.M(m)},Qn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var f=g.as,y=u(f,g.crossOrigin);n.d.L(m,f,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Qn.preloadModule=function(m,g){if(typeof m=="string")if(g){var f=u(g.as,g.crossOrigin);n.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:f,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else n.d.m(m)},Qn.requestFormReset=function(m){n.d.r(m)},Qn.unstable_batchedUpdates=function(m,g){return m(g)},Qn.useFormState=function(m,g,f){return c.H.useFormState(m,g,f)},Qn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Qn.version="19.1.0",Qn}var eE;function mx(){if(eE)return mh.exports;eE=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(r){console.error(r)}}return a(),mh.exports=e3(),mh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tE;function t3(){if(tE)return Yc;tE=1;var a=KC(),r=U0(),t=mx();function n(l){var s="https://react.dev/errors/"+l;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)s+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var s=l,d=l;if(l.alternate)for(;s.return;)s=s.return;else{l=s;do s=l,(s.flags&4098)!==0&&(d=s.return),l=s.return;while(l)}return s.tag===3?d:null}function c(l){if(l.tag===13){var s=l.memoizedState;if(s===null&&(l=l.alternate,l!==null&&(s=l.memoizedState)),s!==null)return s.dehydrated}return null}function u(l){if(i(l)!==l)throw Error(n(188))}function m(l){var s=l.alternate;if(!s){if(s=i(l),s===null)throw Error(n(188));return s!==l?null:l}for(var d=l,p=s;;){var b=d.return;if(b===null)break;var C=b.alternate;if(C===null){if(p=b.return,p!==null){d=p;continue}break}if(b.child===C.child){for(C=b.child;C;){if(C===d)return u(b),l;if(C===p)return u(b),s;C=C.sibling}throw Error(n(188))}if(d.return!==p.return)d=b,p=C;else{for(var z=!1,q=b.child;q;){if(q===d){z=!0,d=b,p=C;break}if(q===p){z=!0,p=b,d=C;break}q=q.sibling}if(!z){for(q=C.child;q;){if(q===d){z=!0,d=C,p=b;break}if(q===p){z=!0,p=C,d=b;break}q=q.sibling}if(!z)throw Error(n(189))}}if(d.alternate!==p)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?l:s}function g(l){var s=l.tag;if(s===5||s===26||s===27||s===6)return l;for(l=l.child;l!==null;){if(s=g(l),s!==null)return s;l=l.sibling}return null}var f=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),M=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function j(l){return l===null||typeof l!="object"?null:(l=F&&l[F]||l["@@iterator"],typeof l=="function"?l:null)}var J=Symbol.for("react.client.reference");function Y(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===J?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case w:return"Fragment";case k:return"Profiler";case x:return"StrictMode";case _:return"Suspense";case P:return"SuspenseList";case W:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case S:return"Portal";case M:return(l.displayName||"Context")+".Provider";case I:return(l._context.displayName||"Context")+".Consumer";case N:var s=l.render;return l=l.displayName,l||(l=s.displayName||s.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case B:return s=l.displayName||null,s!==null?s:Y(l.type)||"Memo";case R:s=l._payload,l=l._init;try{return Y(l(s))}catch{}}return null}var D=Array.isArray,A=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},X=[],O=-1;function Q(l){return{current:l}}function ne(l){0>O||(l.current=X[O],X[O]=null,O--)}function T(l,s){O++,X[O]=l.current,l.current=s}var re=Q(null),G=Q(null),se=Q(null),pe=Q(null);function Se(l,s){switch(T(se,s),T(G,l),T(re,null),s.nodeType){case 9:case 11:l=(l=s.documentElement)&&(l=l.namespaceURI)?wv(l):0;break;default:if(l=s.tagName,s=s.namespaceURI)s=wv(s),l=Sv(s,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ne(re),T(re,l)}function at(){ne(re),ne(G),ne(se)}function be(l){l.memoizedState!==null&&T(pe,l);var s=re.current,d=Sv(s,l.type);s!==d&&(T(G,l),T(re,d))}function Je(l){G.current===l&&(ne(re),ne(G)),pe.current===l&&(ne(pe),Wc._currentValue=K)}var nt=Object.prototype.hasOwnProperty,Xe=a.unstable_scheduleCallback,ct=a.unstable_cancelCallback,Ot=a.unstable_shouldYield,Zt=a.unstable_requestPaint,ft=a.unstable_now,Ft=a.unstable_getCurrentPriorityLevel,ra=a.unstable_ImmediatePriority,Wt=a.unstable_UserBlockingPriority,he=a.unstable_NormalPriority,bt=a.unstable_LowPriority,$=a.unstable_IdlePriority,ye=a.log,V=a.unstable_setDisableYieldValue,ce=null,ze=null;function Re(l){if(typeof ye=="function"&&V(l),ze&&typeof ze.setStrictMode=="function")try{ze.setStrictMode(ce,l)}catch{}}var Fe=Math.clz32?Math.clz32:me,We=Math.log,tt=Math.LN2;function me(l){return l>>>=0,l===0?32:31-(We(l)/tt|0)|0}var Ce=256,_e=4194304;function Qe(l){var s=l&42;if(s!==0)return s;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function qe(l,s,d){var p=l.pendingLanes;if(p===0)return 0;var b=0,C=l.suspendedLanes,z=l.pingedLanes;l=l.warmLanes;var q=p&134217727;return q!==0?(p=q&~C,p!==0?b=Qe(p):(z&=q,z!==0?b=Qe(z):d||(d=q&~l,d!==0&&(b=Qe(d))))):(q=p&~C,q!==0?b=Qe(q):z!==0?b=Qe(z):d||(d=p&~l,d!==0&&(b=Qe(d)))),b===0?0:s!==0&&s!==b&&(s&C)===0&&(C=b&-b,d=s&-s,C>=d||C===32&&(d&4194048)!==0)?s:b}function He(l,s){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&s)===0}function st(l,s){switch(l){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mt(){var l=Ce;return Ce<<=1,(Ce&4194048)===0&&(Ce=256),l}function Jt(){var l=_e;return _e<<=1,(_e&62914560)===0&&(_e=4194304),l}function Yt(l){for(var s=[],d=0;31>d;d++)s.push(l);return s}function ua(l,s){l.pendingLanes|=s,s!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function ma(l,s,d,p,b,C){var z=l.pendingLanes;l.pendingLanes=d,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=d,l.entangledLanes&=d,l.errorRecoveryDisabledLanes&=d,l.shellSuspendCounter=0;var q=l.entanglements,oe=l.expirationTimes,Ee=l.hiddenUpdates;for(d=z&~d;0<d;){var De=31-Fe(d),Oe=1<<De;q[De]=0,oe[De]=-1;var xe=Ee[De];if(xe!==null)for(Ee[De]=null,De=0;De<xe.length;De++){var we=xe[De];we!==null&&(we.lane&=-536870913)}d&=~Oe}p!==0&&Oa(l,p,0),C!==0&&b===0&&l.tag!==0&&(l.suspendedLanes|=C&~(z&~s))}function Oa(l,s,d){l.pendingLanes|=s,l.suspendedLanes&=~s;var p=31-Fe(s);l.entangledLanes|=s,l.entanglements[p]=l.entanglements[p]|1073741824|d&4194090}function Pa(l,s){var d=l.entangledLanes|=s;for(l=l.entanglements;d;){var p=31-Fe(d),b=1<<p;b&s|l[p]&s&&(l[p]|=s),d&=~b}}function ln(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Fa(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function cr(){var l=U.p;return l!==0?l:(l=window.event,l===void 0?32:$v(l.type))}function Rr(l,s){var d=U.p;try{return U.p=l,s()}finally{U.p=d}}var hn=Math.random().toString(36).slice(2),Xt="__reactFiber$"+hn,ga="__reactProps$"+hn,Nn="__reactContainer$"+hn,dr="__reactEvents$"+hn,gr="__reactListeners$"+hn,_n="__reactHandles$"+hn,Z="__reactResources$"+hn,Pe="__reactMarker$"+hn;function Ke(l){delete l[Xt],delete l[ga],delete l[dr],delete l[gr],delete l[_n]}function mt(l){var s=l[Xt];if(s)return s;for(var d=l.parentNode;d;){if(s=d[Nn]||d[Xt]){if(d=s.alternate,s.child!==null||d!==null&&d.child!==null)for(l=kv(l);l!==null;){if(d=l[Xt])return d;l=kv(l)}return s}l=d,d=l.parentNode}return null}function Kt(l){if(l=l[Xt]||l[Nn]){var s=l.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return l}return null}function ba(l){var s=l.tag;if(s===5||s===26||s===27||s===6)return l.stateNode;throw Error(n(33))}function La(l){var s=l[Z];return s||(s=l[Z]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function sa(l){l[Pe]=!0}var tr=new Set,qn={};function Ra(l,s){En(l,s),En(l+"Capture",s)}function En(l,s){for(qn[l]=s,l=0;l<s.length;l++)tr.add(s[l])}var kn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xn={},Ln={};function Bn(l){return nt.call(Ln,l)?!0:nt.call(xn,l)?!1:kn.test(l)?Ln[l]=!0:(xn[l]=!0,!1)}function zn(l,s,d){if(Bn(s))if(d===null)l.removeAttribute(s);else{switch(typeof d){case"undefined":case"function":case"symbol":l.removeAttribute(s);return;case"boolean":var p=s.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){l.removeAttribute(s);return}}l.setAttribute(s,""+d)}}function On(l,s,d){if(d===null)l.removeAttribute(s);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(s);return}l.setAttribute(s,""+d)}}function wn(l,s,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttributeNS(s,d,""+p)}}var ue,Ge;function $e(l){if(ue===void 0)try{throw Error()}catch(d){var s=d.stack.trim().match(/\n( *(at )?)/);ue=s&&s[1]||"",Ge=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ue+l+Ge}var Me=!1;function je(l,s){if(!l||Me)return"";Me=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(s){var Oe=function(){throw Error()};if(Object.defineProperty(Oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Oe,[])}catch(we){var xe=we}Reflect.construct(l,[],Oe)}else{try{Oe.call()}catch(we){xe=we}l.call(Oe.prototype)}}else{try{throw Error()}catch(we){xe=we}(Oe=l())&&typeof Oe.catch=="function"&&Oe.catch(function(){})}}catch(we){if(we&&xe&&typeof we.stack=="string")return[we.stack,xe.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=p.DetermineComponentFrameRoot(),z=C[0],q=C[1];if(z&&q){var oe=z.split(`
`),Ee=q.split(`
`);for(b=p=0;p<oe.length&&!oe[p].includes("DetermineComponentFrameRoot");)p++;for(;b<Ee.length&&!Ee[b].includes("DetermineComponentFrameRoot");)b++;if(p===oe.length||b===Ee.length)for(p=oe.length-1,b=Ee.length-1;1<=p&&0<=b&&oe[p]!==Ee[b];)b--;for(;1<=p&&0<=b;p--,b--)if(oe[p]!==Ee[b]){if(p!==1||b!==1)do if(p--,b--,0>b||oe[p]!==Ee[b]){var De=`
`+oe[p].replace(" at new "," at ");return l.displayName&&De.includes("<anonymous>")&&(De=De.replace("<anonymous>",l.displayName)),De}while(1<=p&&0<=b);break}}}finally{Me=!1,Error.prepareStackTrace=d}return(d=l?l.displayName||l.name:"")?$e(d):""}function ge(l){switch(l.tag){case 26:case 27:case 5:return $e(l.type);case 16:return $e("Lazy");case 13:return $e("Suspense");case 19:return $e("SuspenseList");case 0:case 15:return je(l.type,!1);case 11:return je(l.type.render,!1);case 1:return je(l.type,!0);case 31:return $e("Activity");default:return""}}function rt(l){try{var s="";do s+=ge(l),l=l.return;while(l);return s}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function ht(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function _t(l){var s=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function le(l){var s=_t(l)?"checked":"value",d=Object.getOwnPropertyDescriptor(l.constructor.prototype,s),p=""+l[s];if(!l.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var b=d.get,C=d.set;return Object.defineProperty(l,s,{configurable:!0,get:function(){return b.call(this)},set:function(z){p=""+z,C.call(this,z)}}),Object.defineProperty(l,s,{enumerable:d.enumerable}),{getValue:function(){return p},setValue:function(z){p=""+z},stopTracking:function(){l._valueTracker=null,delete l[s]}}}}function H(l){l._valueTracker||(l._valueTracker=le(l))}function ke(l){if(!l)return!1;var s=l._valueTracker;if(!s)return!0;var d=s.getValue(),p="";return l&&(p=_t(l)?l.checked?"true":"false":l.value),l=p,l!==d?(s.setValue(l),!0):!1}function Ne(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Le=/[\n"\\]/g;function et(l){return l.replace(Le,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ot(l,s,d,p,b,C,z,q){l.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?l.type=z:l.removeAttribute("type"),s!=null?z==="number"?(s===0&&l.value===""||l.value!=s)&&(l.value=""+ht(s)):l.value!==""+ht(s)&&(l.value=""+ht(s)):z!=="submit"&&z!=="reset"||l.removeAttribute("value"),s!=null?Rt(l,z,ht(s)):d!=null?Rt(l,z,ht(d)):p!=null&&l.removeAttribute("value"),b==null&&C!=null&&(l.defaultChecked=!!C),b!=null&&(l.checked=b&&typeof b!="function"&&typeof b!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?l.name=""+ht(q):l.removeAttribute("name")}function pt(l,s,d,p,b,C,z,q){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(l.type=C),s!=null||d!=null){if(!(C!=="submit"&&C!=="reset"||s!=null))return;d=d!=null?""+ht(d):"",s=s!=null?""+ht(s):d,q||s===l.value||(l.value=s),l.defaultValue=s}p=p??b,p=typeof p!="function"&&typeof p!="symbol"&&!!p,l.checked=q?l.checked:!!p,l.defaultChecked=!!p,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(l.name=z)}function Rt(l,s,d){s==="number"&&Ne(l.ownerDocument)===l||l.defaultValue===""+d||(l.defaultValue=""+d)}function xt(l,s,d,p){if(l=l.options,s){s={};for(var b=0;b<d.length;b++)s["$"+d[b]]=!0;for(d=0;d<l.length;d++)b=s.hasOwnProperty("$"+l[d].value),l[d].selected!==b&&(l[d].selected=b),b&&p&&(l[d].defaultSelected=!0)}else{for(d=""+ht(d),s=null,b=0;b<l.length;b++){if(l[b].value===d){l[b].selected=!0,p&&(l[b].defaultSelected=!0);return}s!==null||l[b].disabled||(s=l[b])}s!==null&&(s.selected=!0)}}function zt(l,s,d){if(s!=null&&(s=""+ht(s),s!==l.value&&(l.value=s),d==null)){l.defaultValue!==s&&(l.defaultValue=s);return}l.defaultValue=d!=null?""+ht(d):""}function Nt(l,s,d,p){if(s==null){if(p!=null){if(d!=null)throw Error(n(92));if(D(p)){if(1<p.length)throw Error(n(93));p=p[0]}d=p}d==null&&(d=""),s=d}d=ht(s),l.defaultValue=d,p=l.textContent,p===d&&p!==""&&p!==null&&(l.value=p)}function lt(l,s){if(s){var d=l.firstChild;if(d&&d===l.lastChild&&d.nodeType===3){d.nodeValue=s;return}}l.textContent=s}var Ie=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ve(l,s,d){var p=s.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?p?l.setProperty(s,""):s==="float"?l.cssFloat="":l[s]="":p?l.setProperty(s,d):typeof d!="number"||d===0||Ie.has(s)?s==="float"?l.cssFloat=d:l[s]=(""+d).trim():l[s]=d+"px"}function ut(l,s,d){if(s!=null&&typeof s!="object")throw Error(n(62));if(l=l.style,d!=null){for(var p in d)!d.hasOwnProperty(p)||s!=null&&s.hasOwnProperty(p)||(p.indexOf("--")===0?l.setProperty(p,""):p==="float"?l.cssFloat="":l[p]="");for(var b in s)p=s[b],s.hasOwnProperty(b)&&d[b]!==p&&Ve(l,b,p)}else for(var C in s)s.hasOwnProperty(C)&&Ve(l,C,s[C])}function yt(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ta=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gn(l){return pa.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var to=null;function la(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var vt=null,Ea=null;function _a(l){var s=Kt(l);if(s&&(l=s.stateNode)){var d=l[ga]||null;e:switch(l=s.stateNode,s.type){case"input":if(ot(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),s=d.name,d.type==="radio"&&s!=null){for(d=l;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+et(""+s)+'"][type="radio"]'),s=0;s<d.length;s++){var p=d[s];if(p!==l&&p.form===l.form){var b=p[ga]||null;if(!b)throw Error(n(90));ot(p,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(s=0;s<d.length;s++)p=d[s],p.form===l.form&&ke(p)}break e;case"textarea":zt(l,d.value,d.defaultValue);break e;case"select":s=d.value,s!=null&&xt(l,!!d.multiple,s,!1)}}}var sn=!1;function Zn(l,s,d){if(sn)return l(s,d);sn=!0;try{var p=l(s);return p}finally{if(sn=!1,(vt!==null||Ea!==null)&&($u(),vt&&(s=vt,l=Ea,Ea=vt=null,_a(s),l)))for(s=0;s<l.length;s++)_a(l[s])}}function Va(l,s){var d=l.stateNode;if(d===null)return null;var p=d[ga]||null;if(p===null)return null;d=p[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(l=l.type,p=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!p;break e;default:l=!1}if(l)return null;if(d&&typeof d!="function")throw Error(n(231,s,typeof d));return d}var Wa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),In=!1;if(Wa)try{var Mn={};Object.defineProperty(Mn,"passive",{get:function(){In=!0}}),window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch{In=!1}var An=null,hr=null,cn=null;function en(){if(cn)return cn;var l,s=hr,d=s.length,p,b="value"in An?An.value:An.textContent,C=b.length;for(l=0;l<d&&s[l]===b[l];l++);var z=d-l;for(p=1;p<=z&&s[d-p]===b[C-p];p++);return cn=b.slice(l,1<p?1-p:void 0)}function ar(l){var s=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&s===13&&(l=13)):l=s,l===10&&(l=13),32<=l||l===13?l:0}function yr(){return!0}function ao(){return!1}function dn(l){function s(d,p,b,C,z){this._reactName=d,this._targetInst=b,this.type=p,this.nativeEvent=C,this.target=z,this.currentTarget=null;for(var q in l)l.hasOwnProperty(q)&&(d=l[q],this[q]=d?d(C):C[q]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?yr:ao,this.isPropagationStopped=ao,this}return f(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=yr)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=yr)},persist:function(){},isPersistent:yr}),s}var no={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pl=dn(no),Po=f({},no,{view:0,detail:0}),Us=dn(Po),ec,tc,$s,es=f({},Po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:br,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==$s&&($s&&l.type==="mousemove"?(ec=l.screenX-$s.screenX,tc=l.screenY-$s.screenY):tc=ec=0,$s=l),ec)},movementY:function(l){return"movementY"in l?l.movementY:tc}}),Jd=dn(es),Xd=f({},es,{dataTransfer:0}),uf=dn(Xd),Ly=f({},Po,{relatedTarget:0}),ro=dn(Ly),js=f({},no,{animationName:0,elapsedTime:0,pseudoElement:0}),mf=dn(js),Kd=f({},no,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),By=dn(Kd),pf=f({},no,{data:0}),ac=dn(pf),ff={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ts={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hs(l){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(l):(l=ts[l])?!!s[l]:!1}function br(){return Hs}var tu=f({},Po,{key:function(l){if(l.key){var s=ff[l.key]||l.key;if(s!=="Unidentified")return s}return l.type==="keypress"?(l=ar(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?eu[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:br,charCode:function(l){return l.type==="keypress"?ar(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?ar(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),gf=dn(tu),hf=f({},es,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nc=dn(hf),fl=f({},Po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:br}),yf=dn(fl),Lo=f({},no,{propertyName:0,elapsedTime:0,pseudoElement:0}),au=dn(Lo),nu=f({},es,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),ru=dn(nu),ou=f({},no,{newState:0,oldState:0}),lu=dn(ou),su=[9,13,27,32],ae=Wa&&"CompositionEvent"in window,Ue=null;Wa&&"documentMode"in document&&(Ue=document.documentMode);var it=Wa&&"TextEvent"in window&&!Ue,Ut=Wa&&(!ae||Ue&&8<Ue&&11>=Ue),oa=" ",$t=!1;function $a(l,s){switch(l){case"keyup":return su.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bo(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var St=!1;function nr(l,s){switch(l){case"compositionend":return Bo(s);case"keypress":return s.which!==32?null:($t=!0,oa);case"textInput":return l=s.data,l===oa&&$t?null:l;default:return null}}function zo(l,s){if(St)return l==="compositionend"||!ae&&$a(l,s)?(l=en(),cn=hr=An=null,St=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ut&&s.locale!=="ko"?null:s.data;default:return null}}var Ys={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iu(l){var s=l&&l.nodeName&&l.nodeName.toLowerCase();return s==="input"?!!Ys[l.type]:s==="textarea"}function zy(l,s,d,p){vt?Ea?Ea.push(p):Ea=[p]:vt=p,s=Zu(s,"onChange"),0<s.length&&(d=new pl("onChange","change",null,d,p),l.push({event:d,listeners:s}))}var rc=null,oc=null;function ES(l){yv(l,0)}function cu(l){var s=ba(l);if(ke(s))return l}function Oy(l,s){if(l==="change")return s}var Fy=!1;if(Wa){var bf;if(Wa){var vf="oninput"in document;if(!vf){var Wy=document.createElement("div");Wy.setAttribute("oninput","return;"),vf=typeof Wy.oninput=="function"}bf=vf}else bf=!1;Fy=bf&&(!document.documentMode||9<document.documentMode)}function Uy(){rc&&(rc.detachEvent("onpropertychange",$y),oc=rc=null)}function $y(l){if(l.propertyName==="value"&&cu(oc)){var s=[];zy(s,oc,l,la(l)),Zn(ES,s)}}function xS(l,s,d){l==="focusin"?(Uy(),rc=s,oc=d,rc.attachEvent("onpropertychange",$y)):l==="focusout"&&Uy()}function wS(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return cu(oc)}function SS(l,s){if(l==="click")return cu(s)}function CS(l,s){if(l==="input"||l==="change")return cu(s)}function NS(l,s){return l===s&&(l!==0||1/l===1/s)||l!==l&&s!==s}var vr=typeof Object.is=="function"?Object.is:NS;function lc(l,s){if(vr(l,s))return!0;if(typeof l!="object"||l===null||typeof s!="object"||s===null)return!1;var d=Object.keys(l),p=Object.keys(s);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var b=d[p];if(!nt.call(s,b)||!vr(l[b],s[b]))return!1}return!0}function jy(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Hy(l,s){var d=jy(l);l=0;for(var p;d;){if(d.nodeType===3){if(p=l+d.textContent.length,l<=s&&p>=s)return{node:d,offset:s-l};l=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=jy(d)}}function Yy(l,s){return l&&s?l===s?!0:l&&l.nodeType===3?!1:s&&s.nodeType===3?Yy(l,s.parentNode):"contains"in l?l.contains(s):l.compareDocumentPosition?!!(l.compareDocumentPosition(s)&16):!1:!1}function qy(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var s=Ne(l.document);s instanceof l.HTMLIFrameElement;){try{var d=typeof s.contentWindow.location.href=="string"}catch{d=!1}if(d)l=s.contentWindow;else break;s=Ne(l.document)}return s}function Ef(l){var s=l&&l.nodeName&&l.nodeName.toLowerCase();return s&&(s==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||s==="textarea"||l.contentEditable==="true")}var _S=Wa&&"documentMode"in document&&11>=document.documentMode,qs=null,xf=null,sc=null,wf=!1;function Gy(l,s,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;wf||qs==null||qs!==Ne(p)||(p=qs,"selectionStart"in p&&Ef(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),sc&&lc(sc,p)||(sc=p,p=Zu(xf,"onSelect"),0<p.length&&(s=new pl("onSelect","select",null,s,d),l.push({event:s,listeners:p}),s.target=qs)))}function as(l,s){var d={};return d[l.toLowerCase()]=s.toLowerCase(),d["Webkit"+l]="webkit"+s,d["Moz"+l]="moz"+s,d}var Gs={animationend:as("Animation","AnimationEnd"),animationiteration:as("Animation","AnimationIteration"),animationstart:as("Animation","AnimationStart"),transitionrun:as("Transition","TransitionRun"),transitionstart:as("Transition","TransitionStart"),transitioncancel:as("Transition","TransitionCancel"),transitionend:as("Transition","TransitionEnd")},Sf={},Zy={};Wa&&(Zy=document.createElement("div").style,"AnimationEvent"in window||(delete Gs.animationend.animation,delete Gs.animationiteration.animation,delete Gs.animationstart.animation),"TransitionEvent"in window||delete Gs.transitionend.transition);function ns(l){if(Sf[l])return Sf[l];if(!Gs[l])return l;var s=Gs[l],d;for(d in s)if(s.hasOwnProperty(d)&&d in Zy)return Sf[l]=s[d];return l}var Vy=ns("animationend"),Qy=ns("animationiteration"),Jy=ns("animationstart"),kS=ns("transitionrun"),IS=ns("transitionstart"),MS=ns("transitioncancel"),Xy=ns("transitionend"),Ky=new Map,Cf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cf.push("scrollEnd");function oo(l,s){Ky.set(l,s),Ra(s,[l])}var eb=new WeakMap;function Tr(l,s){if(typeof l=="object"&&l!==null){var d=eb.get(l);return d!==void 0?d:(s={value:l,source:s,stack:rt(s)},eb.set(l,s),s)}return{value:l,source:s,stack:rt(s)}}var Pr=[],Zs=0,Nf=0;function du(){for(var l=Zs,s=Nf=Zs=0;s<l;){var d=Pr[s];Pr[s++]=null;var p=Pr[s];Pr[s++]=null;var b=Pr[s];Pr[s++]=null;var C=Pr[s];if(Pr[s++]=null,p!==null&&b!==null){var z=p.pending;z===null?b.next=b:(b.next=z.next,z.next=b),p.pending=b}C!==0&&tb(d,b,C)}}function uu(l,s,d,p){Pr[Zs++]=l,Pr[Zs++]=s,Pr[Zs++]=d,Pr[Zs++]=p,Nf|=p,l.lanes|=p,l=l.alternate,l!==null&&(l.lanes|=p)}function _f(l,s,d,p){return uu(l,s,d,p),mu(l)}function Vs(l,s){return uu(l,null,null,s),mu(l)}function tb(l,s,d){l.lanes|=d;var p=l.alternate;p!==null&&(p.lanes|=d);for(var b=!1,C=l.return;C!==null;)C.childLanes|=d,p=C.alternate,p!==null&&(p.childLanes|=d),C.tag===22&&(l=C.stateNode,l===null||l._visibility&1||(b=!0)),l=C,C=C.return;return l.tag===3?(C=l.stateNode,b&&s!==null&&(b=31-Fe(d),l=C.hiddenUpdates,p=l[b],p===null?l[b]=[s]:p.push(s),s.lane=d|536870912),C):null}function mu(l){if(50<Rc)throw Rc=0,Rg=null,Error(n(185));for(var s=l.return;s!==null;)l=s,s=l.return;return l.tag===3?l.stateNode:null}var Qs={};function AS(l,s,d,p){this.tag=l,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(l,s,d,p){return new AS(l,s,d,p)}function kf(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Oo(l,s){var d=l.alternate;return d===null?(d=Er(l.tag,s,l.key,l.mode),d.elementType=l.elementType,d.type=l.type,d.stateNode=l.stateNode,d.alternate=l,l.alternate=d):(d.pendingProps=s,d.type=l.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=l.flags&65011712,d.childLanes=l.childLanes,d.lanes=l.lanes,d.child=l.child,d.memoizedProps=l.memoizedProps,d.memoizedState=l.memoizedState,d.updateQueue=l.updateQueue,s=l.dependencies,d.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},d.sibling=l.sibling,d.index=l.index,d.ref=l.ref,d.refCleanup=l.refCleanup,d}function ab(l,s){l.flags&=65011714;var d=l.alternate;return d===null?(l.childLanes=0,l.lanes=s,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=d.childLanes,l.lanes=d.lanes,l.child=d.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=d.memoizedProps,l.memoizedState=d.memoizedState,l.updateQueue=d.updateQueue,l.type=d.type,s=d.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),l}function pu(l,s,d,p,b,C){var z=0;if(p=l,typeof l=="function")kf(l)&&(z=1);else if(typeof l=="string")z=RC(l,d,re.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case W:return l=Er(31,d,s,b),l.elementType=W,l.lanes=C,l;case w:return rs(d.children,b,C,s);case x:z=8,b|=24;break;case k:return l=Er(12,d,s,b|2),l.elementType=k,l.lanes=C,l;case _:return l=Er(13,d,s,b),l.elementType=_,l.lanes=C,l;case P:return l=Er(19,d,s,b),l.elementType=P,l.lanes=C,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case E:case M:z=10;break e;case I:z=9;break e;case N:z=11;break e;case B:z=14;break e;case R:z=16,p=null;break e}z=29,d=Error(n(130,l===null?"null":typeof l,"")),p=null}return s=Er(z,d,s,b),s.elementType=l,s.type=p,s.lanes=C,s}function rs(l,s,d,p){return l=Er(7,l,p,s),l.lanes=d,l}function If(l,s,d){return l=Er(6,l,null,s),l.lanes=d,l}function Mf(l,s,d){return s=Er(4,l.children!==null?l.children:[],l.key,s),s.lanes=d,s.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},s}var Js=[],Xs=0,fu=null,gu=0,Lr=[],Br=0,os=null,Fo=1,Wo="";function ls(l,s){Js[Xs++]=gu,Js[Xs++]=fu,fu=l,gu=s}function nb(l,s,d){Lr[Br++]=Fo,Lr[Br++]=Wo,Lr[Br++]=os,os=l;var p=Fo;l=Wo;var b=32-Fe(p)-1;p&=~(1<<b),d+=1;var C=32-Fe(s)+b;if(30<C){var z=b-b%5;C=(p&(1<<z)-1).toString(32),p>>=z,b-=z,Fo=1<<32-Fe(s)+b|d<<b|p,Wo=C+l}else Fo=1<<C|d<<b|p,Wo=l}function Af(l){l.return!==null&&(ls(l,1),nb(l,1,0))}function Df(l){for(;l===fu;)fu=Js[--Xs],Js[Xs]=null,gu=Js[--Xs],Js[Xs]=null;for(;l===os;)os=Lr[--Br],Lr[Br]=null,Wo=Lr[--Br],Lr[Br]=null,Fo=Lr[--Br],Lr[Br]=null}var rr=null,tn=null,ha=!1,ss=null,go=!1,Rf=Error(n(519));function is(l){var s=Error(n(418,""));throw dc(Tr(s,l)),Rf}function rb(l){var s=l.stateNode,d=l.type,p=l.memoizedProps;switch(s[Xt]=l,s[ga]=p,d){case"dialog":na("cancel",s),na("close",s);break;case"iframe":case"object":case"embed":na("load",s);break;case"video":case"audio":for(d=0;d<Pc.length;d++)na(Pc[d],s);break;case"source":na("error",s);break;case"img":case"image":case"link":na("error",s),na("load",s);break;case"details":na("toggle",s);break;case"input":na("invalid",s),pt(s,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),H(s);break;case"select":na("invalid",s);break;case"textarea":na("invalid",s),Nt(s,p.value,p.defaultValue,p.children),H(s)}d=p.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||s.textContent===""+d||p.suppressHydrationWarning===!0||xv(s.textContent,d)?(p.popover!=null&&(na("beforetoggle",s),na("toggle",s)),p.onScroll!=null&&na("scroll",s),p.onScrollEnd!=null&&na("scrollend",s),p.onClick!=null&&(s.onclick=Vu),s=!0):s=!1,s||is(l)}function ob(l){for(rr=l.return;rr;)switch(rr.tag){case 5:case 13:go=!1;return;case 27:case 3:go=!0;return;default:rr=rr.return}}function ic(l){if(l!==rr)return!1;if(!ha)return ob(l),ha=!0,!1;var s=l.tag,d;if((d=s!==3&&s!==27)&&((d=s===5)&&(d=l.type,d=!(d!=="form"&&d!=="button")||Zg(l.type,l.memoizedProps)),d=!d),d&&tn&&is(l),ob(l),s===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,s=0;l;){if(l.nodeType===8)if(d=l.data,d==="/$"){if(s===0){tn=so(l.nextSibling);break e}s--}else d!=="$"&&d!=="$!"&&d!=="$?"||s++;l=l.nextSibling}tn=null}}else s===27?(s=tn,Al(l.type)?(l=Xg,Xg=null,tn=l):tn=s):tn=rr?so(l.stateNode.nextSibling):null;return!0}function cc(){tn=rr=null,ha=!1}function lb(){var l=ss;return l!==null&&(pr===null?pr=l:pr.push.apply(pr,l),ss=null),l}function dc(l){ss===null?ss=[l]:ss.push(l)}var Tf=Q(null),cs=null,Uo=null;function gl(l,s,d){T(Tf,s._currentValue),s._currentValue=d}function $o(l){l._currentValue=Tf.current,ne(Tf)}function Pf(l,s,d){for(;l!==null;){var p=l.alternate;if((l.childLanes&s)!==s?(l.childLanes|=s,p!==null&&(p.childLanes|=s)):p!==null&&(p.childLanes&s)!==s&&(p.childLanes|=s),l===d)break;l=l.return}}function Lf(l,s,d,p){var b=l.child;for(b!==null&&(b.return=l);b!==null;){var C=b.dependencies;if(C!==null){var z=b.child;C=C.firstContext;e:for(;C!==null;){var q=C;C=b;for(var oe=0;oe<s.length;oe++)if(q.context===s[oe]){C.lanes|=d,q=C.alternate,q!==null&&(q.lanes|=d),Pf(C.return,d,l),p||(z=null);break e}C=q.next}}else if(b.tag===18){if(z=b.return,z===null)throw Error(n(341));z.lanes|=d,C=z.alternate,C!==null&&(C.lanes|=d),Pf(z,d,l),z=null}else z=b.child;if(z!==null)z.return=b;else for(z=b;z!==null;){if(z===l){z=null;break}if(b=z.sibling,b!==null){b.return=z.return,z=b;break}z=z.return}b=z}}function uc(l,s,d,p){l=null;for(var b=s,C=!1;b!==null;){if(!C){if((b.flags&524288)!==0)C=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var z=b.alternate;if(z===null)throw Error(n(387));if(z=z.memoizedProps,z!==null){var q=b.type;vr(b.pendingProps.value,z.value)||(l!==null?l.push(q):l=[q])}}else if(b===pe.current){if(z=b.alternate,z===null)throw Error(n(387));z.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(l!==null?l.push(Wc):l=[Wc])}b=b.return}l!==null&&Lf(s,l,d,p),s.flags|=262144}function hu(l){for(l=l.firstContext;l!==null;){if(!vr(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function ds(l){cs=l,Uo=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Vn(l){return sb(cs,l)}function yu(l,s){return cs===null&&ds(l),sb(l,s)}function sb(l,s){var d=s._currentValue;if(s={context:s,memoizedValue:d,next:null},Uo===null){if(l===null)throw Error(n(308));Uo=s,l.dependencies={lanes:0,firstContext:s},l.flags|=524288}else Uo=Uo.next=s;return d}var DS=typeof AbortController<"u"?AbortController:function(){var l=[],s=this.signal={aborted:!1,addEventListener:function(d,p){l.push(p)}};this.abort=function(){s.aborted=!0,l.forEach(function(d){return d()})}},RS=a.unstable_scheduleCallback,TS=a.unstable_NormalPriority,Sn={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bf(){return{controller:new DS,data:new Map,refCount:0}}function mc(l){l.refCount--,l.refCount===0&&RS(TS,function(){l.controller.abort()})}var pc=null,zf=0,Ks=0,ei=null;function PS(l,s){if(pc===null){var d=pc=[];zf=0,Ks=Fg(),ei={status:"pending",value:void 0,then:function(p){d.push(p)}}}return zf++,s.then(ib,ib),s}function ib(){if(--zf===0&&pc!==null){ei!==null&&(ei.status="fulfilled");var l=pc;pc=null,Ks=0,ei=null;for(var s=0;s<l.length;s++)(0,l[s])()}}function LS(l,s){var d=[],p={status:"pending",value:null,reason:null,then:function(b){d.push(b)}};return l.then(function(){p.status="fulfilled",p.value=s;for(var b=0;b<d.length;b++)(0,d[b])(s)},function(b){for(p.status="rejected",p.reason=b,b=0;b<d.length;b++)(0,d[b])(void 0)}),p}var cb=A.S;A.S=function(l,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&PS(l,s),cb!==null&&cb(l,s)};var us=Q(null);function Of(){var l=us.current;return l!==null?l:Ba.pooledCache}function bu(l,s){s===null?T(us,us.current):T(us,s.pool)}function db(){var l=Of();return l===null?null:{parent:Sn._currentValue,pool:l}}var fc=Error(n(460)),ub=Error(n(474)),vu=Error(n(542)),Ff={then:function(){}};function mb(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Eu(){}function pb(l,s,d){switch(d=l[d],d===void 0?l.push(s):d!==s&&(s.then(Eu,Eu),s=d),s.status){case"fulfilled":return s.value;case"rejected":throw l=s.reason,gb(l),l;default:if(typeof s.status=="string")s.then(Eu,Eu);else{if(l=Ba,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=s,l.status="pending",l.then(function(p){if(s.status==="pending"){var b=s;b.status="fulfilled",b.value=p}},function(p){if(s.status==="pending"){var b=s;b.status="rejected",b.reason=p}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw l=s.reason,gb(l),l}throw gc=s,fc}}var gc=null;function fb(){if(gc===null)throw Error(n(459));var l=gc;return gc=null,l}function gb(l){if(l===fc||l===vu)throw Error(n(483))}var hl=!1;function Wf(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uf(l,s){l=l.updateQueue,s.updateQueue===l&&(s.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function yl(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function bl(l,s,d){var p=l.updateQueue;if(p===null)return null;if(p=p.shared,(xa&2)!==0){var b=p.pending;return b===null?s.next=s:(s.next=b.next,b.next=s),p.pending=s,s=mu(l),tb(l,null,d),s}return uu(l,p,s,d),mu(l)}function hc(l,s,d){if(s=s.updateQueue,s!==null&&(s=s.shared,(d&4194048)!==0)){var p=s.lanes;p&=l.pendingLanes,d|=p,s.lanes=d,Pa(l,d)}}function $f(l,s){var d=l.updateQueue,p=l.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var b=null,C=null;if(d=d.firstBaseUpdate,d!==null){do{var z={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};C===null?b=C=z:C=C.next=z,d=d.next}while(d!==null);C===null?b=C=s:C=C.next=s}else b=C=s;d={baseState:p.baseState,firstBaseUpdate:b,lastBaseUpdate:C,shared:p.shared,callbacks:p.callbacks},l.updateQueue=d;return}l=d.lastBaseUpdate,l===null?d.firstBaseUpdate=s:l.next=s,d.lastBaseUpdate=s}var jf=!1;function yc(){if(jf){var l=ei;if(l!==null)throw l}}function bc(l,s,d,p){jf=!1;var b=l.updateQueue;hl=!1;var C=b.firstBaseUpdate,z=b.lastBaseUpdate,q=b.shared.pending;if(q!==null){b.shared.pending=null;var oe=q,Ee=oe.next;oe.next=null,z===null?C=Ee:z.next=Ee,z=oe;var De=l.alternate;De!==null&&(De=De.updateQueue,q=De.lastBaseUpdate,q!==z&&(q===null?De.firstBaseUpdate=Ee:q.next=Ee,De.lastBaseUpdate=oe))}if(C!==null){var Oe=b.baseState;z=0,De=Ee=oe=null,q=C;do{var xe=q.lane&-536870913,we=xe!==q.lane;if(we?(ia&xe)===xe:(p&xe)===xe){xe!==0&&xe===Ks&&(jf=!0),De!==null&&(De=De.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var Tt=l,kt=q;xe=s;var Ma=d;switch(kt.tag){case 1:if(Tt=kt.payload,typeof Tt=="function"){Oe=Tt.call(Ma,Oe,xe);break e}Oe=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=kt.payload,xe=typeof Tt=="function"?Tt.call(Ma,Oe,xe):Tt,xe==null)break e;Oe=f({},Oe,xe);break e;case 2:hl=!0}}xe=q.callback,xe!==null&&(l.flags|=64,we&&(l.flags|=8192),we=b.callbacks,we===null?b.callbacks=[xe]:we.push(xe))}else we={lane:xe,tag:q.tag,payload:q.payload,callback:q.callback,next:null},De===null?(Ee=De=we,oe=Oe):De=De.next=we,z|=xe;if(q=q.next,q===null){if(q=b.shared.pending,q===null)break;we=q,q=we.next,we.next=null,b.lastBaseUpdate=we,b.shared.pending=null}}while(!0);De===null&&(oe=Oe),b.baseState=oe,b.firstBaseUpdate=Ee,b.lastBaseUpdate=De,C===null&&(b.shared.lanes=0),_l|=z,l.lanes=z,l.memoizedState=Oe}}function hb(l,s){if(typeof l!="function")throw Error(n(191,l));l.call(s)}function yb(l,s){var d=l.callbacks;if(d!==null)for(l.callbacks=null,l=0;l<d.length;l++)hb(d[l],s)}var ti=Q(null),xu=Q(0);function bb(l,s){l=Vo,T(xu,l),T(ti,s),Vo=l|s.baseLanes}function Hf(){T(xu,Vo),T(ti,ti.current)}function Yf(){Vo=xu.current,ne(ti),ne(xu)}var vl=0,Vt=null,ka=null,yn=null,wu=!1,ai=!1,ms=!1,Su=0,vc=0,ni=null,BS=0;function un(){throw Error(n(321))}function qf(l,s){if(s===null)return!1;for(var d=0;d<s.length&&d<l.length;d++)if(!vr(l[d],s[d]))return!1;return!0}function Gf(l,s,d,p,b,C){return vl=C,Vt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,A.H=l===null||l.memoizedState===null?t1:a1,ms=!1,C=d(p,b),ms=!1,ai&&(C=Eb(s,d,p,b)),vb(l),C}function vb(l){A.H=Mu;var s=ka!==null&&ka.next!==null;if(vl=0,yn=ka=Vt=null,wu=!1,vc=0,ni=null,s)throw Error(n(300));l===null||Dn||(l=l.dependencies,l!==null&&hu(l)&&(Dn=!0))}function Eb(l,s,d,p){Vt=l;var b=0;do{if(ai&&(ni=null),vc=0,ai=!1,25<=b)throw Error(n(301));if(b+=1,yn=ka=null,l.updateQueue!=null){var C=l.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}A.H=jS,C=s(d,p)}while(ai);return C}function zS(){var l=A.H,s=l.useState()[0];return s=typeof s.then=="function"?Ec(s):s,l=l.useState()[0],(ka!==null?ka.memoizedState:null)!==l&&(Vt.flags|=1024),s}function Zf(){var l=Su!==0;return Su=0,l}function Vf(l,s,d){s.updateQueue=l.updateQueue,s.flags&=-2053,l.lanes&=~d}function Qf(l){if(wu){for(l=l.memoizedState;l!==null;){var s=l.queue;s!==null&&(s.pending=null),l=l.next}wu=!1}vl=0,yn=ka=Vt=null,ai=!1,vc=Su=0,ni=null}function ur(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Vt.memoizedState=yn=l:yn=yn.next=l,yn}function bn(){if(ka===null){var l=Vt.alternate;l=l!==null?l.memoizedState:null}else l=ka.next;var s=yn===null?Vt.memoizedState:yn.next;if(s!==null)yn=s,ka=l;else{if(l===null)throw Vt.alternate===null?Error(n(467)):Error(n(310));ka=l,l={memoizedState:ka.memoizedState,baseState:ka.baseState,baseQueue:ka.baseQueue,queue:ka.queue,next:null},yn===null?Vt.memoizedState=yn=l:yn=yn.next=l}return yn}function Jf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ec(l){var s=vc;return vc+=1,ni===null&&(ni=[]),l=pb(ni,l,s),s=Vt,(yn===null?s.memoizedState:yn.next)===null&&(s=s.alternate,A.H=s===null||s.memoizedState===null?t1:a1),l}function Cu(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Ec(l);if(l.$$typeof===M)return Vn(l)}throw Error(n(438,String(l)))}function Xf(l){var s=null,d=Vt.updateQueue;if(d!==null&&(s=d.memoCache),s==null){var p=Vt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(s={data:p.data.map(function(b){return b.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),d===null&&(d=Jf(),Vt.updateQueue=d),d.memoCache=s,d=s.data[s.index],d===void 0)for(d=s.data[s.index]=Array(l),p=0;p<l;p++)d[p]=L;return s.index++,d}function jo(l,s){return typeof s=="function"?s(l):s}function Nu(l){var s=bn();return Kf(s,ka,l)}function Kf(l,s,d){var p=l.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=d;var b=l.baseQueue,C=p.pending;if(C!==null){if(b!==null){var z=b.next;b.next=C.next,C.next=z}s.baseQueue=b=C,p.pending=null}if(C=l.baseState,b===null)l.memoizedState=C;else{s=b.next;var q=z=null,oe=null,Ee=s,De=!1;do{var Oe=Ee.lane&-536870913;if(Oe!==Ee.lane?(ia&Oe)===Oe:(vl&Oe)===Oe){var xe=Ee.revertLane;if(xe===0)oe!==null&&(oe=oe.next={lane:0,revertLane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),Oe===Ks&&(De=!0);else if((vl&xe)===xe){Ee=Ee.next,xe===Ks&&(De=!0);continue}else Oe={lane:0,revertLane:Ee.revertLane,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},oe===null?(q=oe=Oe,z=C):oe=oe.next=Oe,Vt.lanes|=xe,_l|=xe;Oe=Ee.action,ms&&d(C,Oe),C=Ee.hasEagerState?Ee.eagerState:d(C,Oe)}else xe={lane:Oe,revertLane:Ee.revertLane,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},oe===null?(q=oe=xe,z=C):oe=oe.next=xe,Vt.lanes|=Oe,_l|=Oe;Ee=Ee.next}while(Ee!==null&&Ee!==s);if(oe===null?z=C:oe.next=q,!vr(C,l.memoizedState)&&(Dn=!0,De&&(d=ei,d!==null)))throw d;l.memoizedState=C,l.baseState=z,l.baseQueue=oe,p.lastRenderedState=C}return b===null&&(p.lanes=0),[l.memoizedState,p.dispatch]}function eg(l){var s=bn(),d=s.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=l;var p=d.dispatch,b=d.pending,C=s.memoizedState;if(b!==null){d.pending=null;var z=b=b.next;do C=l(C,z.action),z=z.next;while(z!==b);vr(C,s.memoizedState)||(Dn=!0),s.memoizedState=C,s.baseQueue===null&&(s.baseState=C),d.lastRenderedState=C}return[C,p]}function xb(l,s,d){var p=Vt,b=bn(),C=ha;if(C){if(d===void 0)throw Error(n(407));d=d()}else d=s();var z=!vr((ka||b).memoizedState,d);z&&(b.memoizedState=d,Dn=!0),b=b.queue;var q=Cb.bind(null,p,b,l);if(xc(2048,8,q,[l]),b.getSnapshot!==s||z||yn!==null&&yn.memoizedState.tag&1){if(p.flags|=2048,ri(9,_u(),Sb.bind(null,p,b,d,s),null),Ba===null)throw Error(n(349));C||(vl&124)!==0||wb(p,s,d)}return d}function wb(l,s,d){l.flags|=16384,l={getSnapshot:s,value:d},s=Vt.updateQueue,s===null?(s=Jf(),Vt.updateQueue=s,s.stores=[l]):(d=s.stores,d===null?s.stores=[l]:d.push(l))}function Sb(l,s,d,p){s.value=d,s.getSnapshot=p,Nb(s)&&_b(l)}function Cb(l,s,d){return d(function(){Nb(s)&&_b(l)})}function Nb(l){var s=l.getSnapshot;l=l.value;try{var d=s();return!vr(l,d)}catch{return!0}}function _b(l){var s=Vs(l,2);s!==null&&Nr(s,l,2)}function tg(l){var s=ur();if(typeof l=="function"){var d=l;if(l=d(),ms){Re(!0);try{d()}finally{Re(!1)}}}return s.memoizedState=s.baseState=l,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jo,lastRenderedState:l},s}function kb(l,s,d,p){return l.baseState=d,Kf(l,ka,typeof p=="function"?p:jo)}function OS(l,s,d,p,b){if(Iu(l))throw Error(n(485));if(l=s.action,l!==null){var C={payload:b,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){C.listeners.push(z)}};A.T!==null?d(!0):C.isTransition=!1,p(C),d=s.pending,d===null?(C.next=s.pending=C,Ib(s,C)):(C.next=d.next,s.pending=d.next=C)}}function Ib(l,s){var d=s.action,p=s.payload,b=l.state;if(s.isTransition){var C=A.T,z={};A.T=z;try{var q=d(b,p),oe=A.S;oe!==null&&oe(z,q),Mb(l,s,q)}catch(Ee){ag(l,s,Ee)}finally{A.T=C}}else try{C=d(b,p),Mb(l,s,C)}catch(Ee){ag(l,s,Ee)}}function Mb(l,s,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(p){Ab(l,s,p)},function(p){return ag(l,s,p)}):Ab(l,s,d)}function Ab(l,s,d){s.status="fulfilled",s.value=d,Db(s),l.state=d,s=l.pending,s!==null&&(d=s.next,d===s?l.pending=null:(d=d.next,s.next=d,Ib(l,d)))}function ag(l,s,d){var p=l.pending;if(l.pending=null,p!==null){p=p.next;do s.status="rejected",s.reason=d,Db(s),s=s.next;while(s!==p)}l.action=null}function Db(l){l=l.listeners;for(var s=0;s<l.length;s++)(0,l[s])()}function Rb(l,s){return s}function Tb(l,s){if(ha){var d=Ba.formState;if(d!==null){e:{var p=Vt;if(ha){if(tn){t:{for(var b=tn,C=go;b.nodeType!==8;){if(!C){b=null;break t}if(b=so(b.nextSibling),b===null){b=null;break t}}C=b.data,b=C==="F!"||C==="F"?b:null}if(b){tn=so(b.nextSibling),p=b.data==="F!";break e}}is(p)}p=!1}p&&(s=d[0])}}return d=ur(),d.memoizedState=d.baseState=s,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rb,lastRenderedState:s},d.queue=p,d=Xb.bind(null,Vt,p),p.dispatch=d,p=tg(!1),C=sg.bind(null,Vt,!1,p.queue),p=ur(),b={state:s,dispatch:null,action:l,pending:null},p.queue=b,d=OS.bind(null,Vt,b,C,d),b.dispatch=d,p.memoizedState=l,[s,d,!1]}function Pb(l){var s=bn();return Lb(s,ka,l)}function Lb(l,s,d){if(s=Kf(l,s,Rb)[0],l=Nu(jo)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var p=Ec(s)}catch(z){throw z===fc?vu:z}else p=s;s=bn();var b=s.queue,C=b.dispatch;return d!==s.memoizedState&&(Vt.flags|=2048,ri(9,_u(),FS.bind(null,b,d),null)),[p,C,l]}function FS(l,s){l.action=s}function Bb(l){var s=bn(),d=ka;if(d!==null)return Lb(s,d,l);bn(),s=s.memoizedState,d=bn();var p=d.queue.dispatch;return d.memoizedState=l,[s,p,!1]}function ri(l,s,d,p){return l={tag:l,create:d,deps:p,inst:s,next:null},s=Vt.updateQueue,s===null&&(s=Jf(),Vt.updateQueue=s),d=s.lastEffect,d===null?s.lastEffect=l.next=l:(p=d.next,d.next=l,l.next=p,s.lastEffect=l),l}function _u(){return{destroy:void 0,resource:void 0}}function zb(){return bn().memoizedState}function ku(l,s,d,p){var b=ur();p=p===void 0?null:p,Vt.flags|=l,b.memoizedState=ri(1|s,_u(),d,p)}function xc(l,s,d,p){var b=bn();p=p===void 0?null:p;var C=b.memoizedState.inst;ka!==null&&p!==null&&qf(p,ka.memoizedState.deps)?b.memoizedState=ri(s,C,d,p):(Vt.flags|=l,b.memoizedState=ri(1|s,C,d,p))}function Ob(l,s){ku(8390656,8,l,s)}function Fb(l,s){xc(2048,8,l,s)}function Wb(l,s){return xc(4,2,l,s)}function Ub(l,s){return xc(4,4,l,s)}function $b(l,s){if(typeof s=="function"){l=l();var d=s(l);return function(){typeof d=="function"?d():s(null)}}if(s!=null)return l=l(),s.current=l,function(){s.current=null}}function jb(l,s,d){d=d!=null?d.concat([l]):null,xc(4,4,$b.bind(null,s,l),d)}function ng(){}function Hb(l,s){var d=bn();s=s===void 0?null:s;var p=d.memoizedState;return s!==null&&qf(s,p[1])?p[0]:(d.memoizedState=[l,s],l)}function Yb(l,s){var d=bn();s=s===void 0?null:s;var p=d.memoizedState;if(s!==null&&qf(s,p[1]))return p[0];if(p=l(),ms){Re(!0);try{l()}finally{Re(!1)}}return d.memoizedState=[p,s],p}function rg(l,s,d){return d===void 0||(vl&1073741824)!==0?l.memoizedState=s:(l.memoizedState=d,l=Z1(),Vt.lanes|=l,_l|=l,d)}function qb(l,s,d,p){return vr(d,s)?d:ti.current!==null?(l=rg(l,d,p),vr(l,s)||(Dn=!0),l):(vl&42)===0?(Dn=!0,l.memoizedState=d):(l=Z1(),Vt.lanes|=l,_l|=l,s)}function Gb(l,s,d,p,b){var C=U.p;U.p=C!==0&&8>C?C:8;var z=A.T,q={};A.T=q,sg(l,!1,s,d);try{var oe=b(),Ee=A.S;if(Ee!==null&&Ee(q,oe),oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var De=LS(oe,p);wc(l,s,De,Cr(l))}else wc(l,s,p,Cr(l))}catch(Oe){wc(l,s,{then:function(){},status:"rejected",reason:Oe},Cr())}finally{U.p=C,A.T=z}}function WS(){}function og(l,s,d,p){if(l.tag!==5)throw Error(n(476));var b=Zb(l).queue;Gb(l,b,s,K,d===null?WS:function(){return Vb(l),d(p)})}function Zb(l){var s=l.memoizedState;if(s!==null)return s;s={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jo,lastRenderedState:K},next:null};var d={};return s.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jo,lastRenderedState:d},next:null},l.memoizedState=s,l=l.alternate,l!==null&&(l.memoizedState=s),s}function Vb(l){var s=Zb(l).next.queue;wc(l,s,{},Cr())}function lg(){return Vn(Wc)}function Qb(){return bn().memoizedState}function Jb(){return bn().memoizedState}function US(l){for(var s=l.return;s!==null;){switch(s.tag){case 24:case 3:var d=Cr();l=yl(d);var p=bl(s,l,d);p!==null&&(Nr(p,s,d),hc(p,s,d)),s={cache:Bf()},l.payload=s;return}s=s.return}}function $S(l,s,d){var p=Cr();d={lane:p,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Iu(l)?Kb(s,d):(d=_f(l,s,d,p),d!==null&&(Nr(d,l,p),e1(d,s,p)))}function Xb(l,s,d){var p=Cr();wc(l,s,d,p)}function wc(l,s,d,p){var b={lane:p,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Iu(l))Kb(s,b);else{var C=l.alternate;if(l.lanes===0&&(C===null||C.lanes===0)&&(C=s.lastRenderedReducer,C!==null))try{var z=s.lastRenderedState,q=C(z,d);if(b.hasEagerState=!0,b.eagerState=q,vr(q,z))return uu(l,s,b,0),Ba===null&&du(),!1}catch{}finally{}if(d=_f(l,s,b,p),d!==null)return Nr(d,l,p),e1(d,s,p),!0}return!1}function sg(l,s,d,p){if(p={lane:2,revertLane:Fg(),action:p,hasEagerState:!1,eagerState:null,next:null},Iu(l)){if(s)throw Error(n(479))}else s=_f(l,d,p,2),s!==null&&Nr(s,l,2)}function Iu(l){var s=l.alternate;return l===Vt||s!==null&&s===Vt}function Kb(l,s){ai=wu=!0;var d=l.pending;d===null?s.next=s:(s.next=d.next,d.next=s),l.pending=s}function e1(l,s,d){if((d&4194048)!==0){var p=s.lanes;p&=l.pendingLanes,d|=p,s.lanes=d,Pa(l,d)}}var Mu={readContext:Vn,use:Cu,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useLayoutEffect:un,useInsertionEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useSyncExternalStore:un,useId:un,useHostTransitionStatus:un,useFormState:un,useActionState:un,useOptimistic:un,useMemoCache:un,useCacheRefresh:un},t1={readContext:Vn,use:Cu,useCallback:function(l,s){return ur().memoizedState=[l,s===void 0?null:s],l},useContext:Vn,useEffect:Ob,useImperativeHandle:function(l,s,d){d=d!=null?d.concat([l]):null,ku(4194308,4,$b.bind(null,s,l),d)},useLayoutEffect:function(l,s){return ku(4194308,4,l,s)},useInsertionEffect:function(l,s){ku(4,2,l,s)},useMemo:function(l,s){var d=ur();s=s===void 0?null:s;var p=l();if(ms){Re(!0);try{l()}finally{Re(!1)}}return d.memoizedState=[p,s],p},useReducer:function(l,s,d){var p=ur();if(d!==void 0){var b=d(s);if(ms){Re(!0);try{d(s)}finally{Re(!1)}}}else b=s;return p.memoizedState=p.baseState=b,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:b},p.queue=l,l=l.dispatch=$S.bind(null,Vt,l),[p.memoizedState,l]},useRef:function(l){var s=ur();return l={current:l},s.memoizedState=l},useState:function(l){l=tg(l);var s=l.queue,d=Xb.bind(null,Vt,s);return s.dispatch=d,[l.memoizedState,d]},useDebugValue:ng,useDeferredValue:function(l,s){var d=ur();return rg(d,l,s)},useTransition:function(){var l=tg(!1);return l=Gb.bind(null,Vt,l.queue,!0,!1),ur().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,s,d){var p=Vt,b=ur();if(ha){if(d===void 0)throw Error(n(407));d=d()}else{if(d=s(),Ba===null)throw Error(n(349));(ia&124)!==0||wb(p,s,d)}b.memoizedState=d;var C={value:d,getSnapshot:s};return b.queue=C,Ob(Cb.bind(null,p,C,l),[l]),p.flags|=2048,ri(9,_u(),Sb.bind(null,p,C,d,s),null),d},useId:function(){var l=ur(),s=Ba.identifierPrefix;if(ha){var d=Wo,p=Fo;d=(p&~(1<<32-Fe(p)-1)).toString(32)+d,s="«"+s+"R"+d,d=Su++,0<d&&(s+="H"+d.toString(32)),s+="»"}else d=BS++,s="«"+s+"r"+d.toString(32)+"»";return l.memoizedState=s},useHostTransitionStatus:lg,useFormState:Tb,useActionState:Tb,useOptimistic:function(l){var s=ur();s.memoizedState=s.baseState=l;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=d,s=sg.bind(null,Vt,!0,d),d.dispatch=s,[l,s]},useMemoCache:Xf,useCacheRefresh:function(){return ur().memoizedState=US.bind(null,Vt)}},a1={readContext:Vn,use:Cu,useCallback:Hb,useContext:Vn,useEffect:Fb,useImperativeHandle:jb,useInsertionEffect:Wb,useLayoutEffect:Ub,useMemo:Yb,useReducer:Nu,useRef:zb,useState:function(){return Nu(jo)},useDebugValue:ng,useDeferredValue:function(l,s){var d=bn();return qb(d,ka.memoizedState,l,s)},useTransition:function(){var l=Nu(jo)[0],s=bn().memoizedState;return[typeof l=="boolean"?l:Ec(l),s]},useSyncExternalStore:xb,useId:Qb,useHostTransitionStatus:lg,useFormState:Pb,useActionState:Pb,useOptimistic:function(l,s){var d=bn();return kb(d,ka,l,s)},useMemoCache:Xf,useCacheRefresh:Jb},jS={readContext:Vn,use:Cu,useCallback:Hb,useContext:Vn,useEffect:Fb,useImperativeHandle:jb,useInsertionEffect:Wb,useLayoutEffect:Ub,useMemo:Yb,useReducer:eg,useRef:zb,useState:function(){return eg(jo)},useDebugValue:ng,useDeferredValue:function(l,s){var d=bn();return ka===null?rg(d,l,s):qb(d,ka.memoizedState,l,s)},useTransition:function(){var l=eg(jo)[0],s=bn().memoizedState;return[typeof l=="boolean"?l:Ec(l),s]},useSyncExternalStore:xb,useId:Qb,useHostTransitionStatus:lg,useFormState:Bb,useActionState:Bb,useOptimistic:function(l,s){var d=bn();return ka!==null?kb(d,ka,l,s):(d.baseState=l,[l,d.queue.dispatch])},useMemoCache:Xf,useCacheRefresh:Jb},oi=null,Sc=0;function Au(l){var s=Sc;return Sc+=1,oi===null&&(oi=[]),pb(oi,l,s)}function Cc(l,s){s=s.props.ref,l.ref=s!==void 0?s:null}function Du(l,s){throw s.$$typeof===y?Error(n(525)):(l=Object.prototype.toString.call(s),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":l)))}function n1(l){var s=l._init;return s(l._payload)}function r1(l){function s(fe,ie){if(l){var ve=fe.deletions;ve===null?(fe.deletions=[ie],fe.flags|=16):ve.push(ie)}}function d(fe,ie){if(!l)return null;for(;ie!==null;)s(fe,ie),ie=ie.sibling;return null}function p(fe){for(var ie=new Map;fe!==null;)fe.key!==null?ie.set(fe.key,fe):ie.set(fe.index,fe),fe=fe.sibling;return ie}function b(fe,ie){return fe=Oo(fe,ie),fe.index=0,fe.sibling=null,fe}function C(fe,ie,ve){return fe.index=ve,l?(ve=fe.alternate,ve!==null?(ve=ve.index,ve<ie?(fe.flags|=67108866,ie):ve):(fe.flags|=67108866,ie)):(fe.flags|=1048576,ie)}function z(fe){return l&&fe.alternate===null&&(fe.flags|=67108866),fe}function q(fe,ie,ve,Te){return ie===null||ie.tag!==6?(ie=If(ve,fe.mode,Te),ie.return=fe,ie):(ie=b(ie,ve),ie.return=fe,ie)}function oe(fe,ie,ve,Te){var Et=ve.type;return Et===w?De(fe,ie,ve.props.children,Te,ve.key):ie!==null&&(ie.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===R&&n1(Et)===ie.type)?(ie=b(ie,ve.props),Cc(ie,ve),ie.return=fe,ie):(ie=pu(ve.type,ve.key,ve.props,null,fe.mode,Te),Cc(ie,ve),ie.return=fe,ie)}function Ee(fe,ie,ve,Te){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==ve.containerInfo||ie.stateNode.implementation!==ve.implementation?(ie=Mf(ve,fe.mode,Te),ie.return=fe,ie):(ie=b(ie,ve.children||[]),ie.return=fe,ie)}function De(fe,ie,ve,Te,Et){return ie===null||ie.tag!==7?(ie=rs(ve,fe.mode,Te,Et),ie.return=fe,ie):(ie=b(ie,ve),ie.return=fe,ie)}function Oe(fe,ie,ve){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=If(""+ie,fe.mode,ve),ie.return=fe,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case v:return ve=pu(ie.type,ie.key,ie.props,null,fe.mode,ve),Cc(ve,ie),ve.return=fe,ve;case S:return ie=Mf(ie,fe.mode,ve),ie.return=fe,ie;case R:var Te=ie._init;return ie=Te(ie._payload),Oe(fe,ie,ve)}if(D(ie)||j(ie))return ie=rs(ie,fe.mode,ve,null),ie.return=fe,ie;if(typeof ie.then=="function")return Oe(fe,Au(ie),ve);if(ie.$$typeof===M)return Oe(fe,yu(fe,ie),ve);Du(fe,ie)}return null}function xe(fe,ie,ve,Te){var Et=ie!==null?ie.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return Et!==null?null:q(fe,ie,""+ve,Te);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case v:return ve.key===Et?oe(fe,ie,ve,Te):null;case S:return ve.key===Et?Ee(fe,ie,ve,Te):null;case R:return Et=ve._init,ve=Et(ve._payload),xe(fe,ie,ve,Te)}if(D(ve)||j(ve))return Et!==null?null:De(fe,ie,ve,Te,null);if(typeof ve.then=="function")return xe(fe,ie,Au(ve),Te);if(ve.$$typeof===M)return xe(fe,ie,yu(fe,ve),Te);Du(fe,ve)}return null}function we(fe,ie,ve,Te,Et){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return fe=fe.get(ve)||null,q(ie,fe,""+Te,Et);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case v:return fe=fe.get(Te.key===null?ve:Te.key)||null,oe(ie,fe,Te,Et);case S:return fe=fe.get(Te.key===null?ve:Te.key)||null,Ee(ie,fe,Te,Et);case R:var ea=Te._init;return Te=ea(Te._payload),we(fe,ie,ve,Te,Et)}if(D(Te)||j(Te))return fe=fe.get(ve)||null,De(ie,fe,Te,Et,null);if(typeof Te.then=="function")return we(fe,ie,ve,Au(Te),Et);if(Te.$$typeof===M)return we(fe,ie,ve,yu(ie,Te),Et);Du(ie,Te)}return null}function Tt(fe,ie,ve,Te){for(var Et=null,ea=null,Ct=ie,At=ie=0,Tn=null;Ct!==null&&At<ve.length;At++){Ct.index>At?(Tn=Ct,Ct=null):Tn=Ct.sibling;var fa=xe(fe,Ct,ve[At],Te);if(fa===null){Ct===null&&(Ct=Tn);break}l&&Ct&&fa.alternate===null&&s(fe,Ct),ie=C(fa,ie,At),ea===null?Et=fa:ea.sibling=fa,ea=fa,Ct=Tn}if(At===ve.length)return d(fe,Ct),ha&&ls(fe,At),Et;if(Ct===null){for(;At<ve.length;At++)Ct=Oe(fe,ve[At],Te),Ct!==null&&(ie=C(Ct,ie,At),ea===null?Et=Ct:ea.sibling=Ct,ea=Ct);return ha&&ls(fe,At),Et}for(Ct=p(Ct);At<ve.length;At++)Tn=we(Ct,fe,At,ve[At],Te),Tn!==null&&(l&&Tn.alternate!==null&&Ct.delete(Tn.key===null?At:Tn.key),ie=C(Tn,ie,At),ea===null?Et=Tn:ea.sibling=Tn,ea=Tn);return l&&Ct.forEach(function(Ll){return s(fe,Ll)}),ha&&ls(fe,At),Et}function kt(fe,ie,ve,Te){if(ve==null)throw Error(n(151));for(var Et=null,ea=null,Ct=ie,At=ie=0,Tn=null,fa=ve.next();Ct!==null&&!fa.done;At++,fa=ve.next()){Ct.index>At?(Tn=Ct,Ct=null):Tn=Ct.sibling;var Ll=xe(fe,Ct,fa.value,Te);if(Ll===null){Ct===null&&(Ct=Tn);break}l&&Ct&&Ll.alternate===null&&s(fe,Ct),ie=C(Ll,ie,At),ea===null?Et=Ll:ea.sibling=Ll,ea=Ll,Ct=Tn}if(fa.done)return d(fe,Ct),ha&&ls(fe,At),Et;if(Ct===null){for(;!fa.done;At++,fa=ve.next())fa=Oe(fe,fa.value,Te),fa!==null&&(ie=C(fa,ie,At),ea===null?Et=fa:ea.sibling=fa,ea=fa);return ha&&ls(fe,At),Et}for(Ct=p(Ct);!fa.done;At++,fa=ve.next())fa=we(Ct,fe,At,fa.value,Te),fa!==null&&(l&&fa.alternate!==null&&Ct.delete(fa.key===null?At:fa.key),ie=C(fa,ie,At),ea===null?Et=fa:ea.sibling=fa,ea=fa);return l&&Ct.forEach(function(HC){return s(fe,HC)}),ha&&ls(fe,At),Et}function Ma(fe,ie,ve,Te){if(typeof ve=="object"&&ve!==null&&ve.type===w&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case v:e:{for(var Et=ve.key;ie!==null;){if(ie.key===Et){if(Et=ve.type,Et===w){if(ie.tag===7){d(fe,ie.sibling),Te=b(ie,ve.props.children),Te.return=fe,fe=Te;break e}}else if(ie.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===R&&n1(Et)===ie.type){d(fe,ie.sibling),Te=b(ie,ve.props),Cc(Te,ve),Te.return=fe,fe=Te;break e}d(fe,ie);break}else s(fe,ie);ie=ie.sibling}ve.type===w?(Te=rs(ve.props.children,fe.mode,Te,ve.key),Te.return=fe,fe=Te):(Te=pu(ve.type,ve.key,ve.props,null,fe.mode,Te),Cc(Te,ve),Te.return=fe,fe=Te)}return z(fe);case S:e:{for(Et=ve.key;ie!==null;){if(ie.key===Et)if(ie.tag===4&&ie.stateNode.containerInfo===ve.containerInfo&&ie.stateNode.implementation===ve.implementation){d(fe,ie.sibling),Te=b(ie,ve.children||[]),Te.return=fe,fe=Te;break e}else{d(fe,ie);break}else s(fe,ie);ie=ie.sibling}Te=Mf(ve,fe.mode,Te),Te.return=fe,fe=Te}return z(fe);case R:return Et=ve._init,ve=Et(ve._payload),Ma(fe,ie,ve,Te)}if(D(ve))return Tt(fe,ie,ve,Te);if(j(ve)){if(Et=j(ve),typeof Et!="function")throw Error(n(150));return ve=Et.call(ve),kt(fe,ie,ve,Te)}if(typeof ve.then=="function")return Ma(fe,ie,Au(ve),Te);if(ve.$$typeof===M)return Ma(fe,ie,yu(fe,ve),Te);Du(fe,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint"?(ve=""+ve,ie!==null&&ie.tag===6?(d(fe,ie.sibling),Te=b(ie,ve),Te.return=fe,fe=Te):(d(fe,ie),Te=If(ve,fe.mode,Te),Te.return=fe,fe=Te),z(fe)):d(fe,ie)}return function(fe,ie,ve,Te){try{Sc=0;var Et=Ma(fe,ie,ve,Te);return oi=null,Et}catch(Ct){if(Ct===fc||Ct===vu)throw Ct;var ea=Er(29,Ct,null,fe.mode);return ea.lanes=Te,ea.return=fe,ea}finally{}}}var li=r1(!0),o1=r1(!1),zr=Q(null),ho=null;function El(l){var s=l.alternate;T(Cn,Cn.current&1),T(zr,l),ho===null&&(s===null||ti.current!==null||s.memoizedState!==null)&&(ho=l)}function l1(l){if(l.tag===22){if(T(Cn,Cn.current),T(zr,l),ho===null){var s=l.alternate;s!==null&&s.memoizedState!==null&&(ho=l)}}else xl()}function xl(){T(Cn,Cn.current),T(zr,zr.current)}function Ho(l){ne(zr),ho===l&&(ho=null),ne(Cn)}var Cn=Q(0);function Ru(l){for(var s=l;s!==null;){if(s.tag===13){var d=s.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||Jg(d)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break;for(;s.sibling===null;){if(s.return===null||s.return===l)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function ig(l,s,d,p){s=l.memoizedState,d=d(p,s),d=d==null?s:f({},s,d),l.memoizedState=d,l.lanes===0&&(l.updateQueue.baseState=d)}var cg={enqueueSetState:function(l,s,d){l=l._reactInternals;var p=Cr(),b=yl(p);b.payload=s,d!=null&&(b.callback=d),s=bl(l,b,p),s!==null&&(Nr(s,l,p),hc(s,l,p))},enqueueReplaceState:function(l,s,d){l=l._reactInternals;var p=Cr(),b=yl(p);b.tag=1,b.payload=s,d!=null&&(b.callback=d),s=bl(l,b,p),s!==null&&(Nr(s,l,p),hc(s,l,p))},enqueueForceUpdate:function(l,s){l=l._reactInternals;var d=Cr(),p=yl(d);p.tag=2,s!=null&&(p.callback=s),s=bl(l,p,d),s!==null&&(Nr(s,l,d),hc(s,l,d))}};function s1(l,s,d,p,b,C,z){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(p,C,z):s.prototype&&s.prototype.isPureReactComponent?!lc(d,p)||!lc(b,C):!0}function i1(l,s,d,p){l=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(d,p),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(d,p),s.state!==l&&cg.enqueueReplaceState(s,s.state,null)}function ps(l,s){var d=s;if("ref"in s){d={};for(var p in s)p!=="ref"&&(d[p]=s[p])}if(l=l.defaultProps){d===s&&(d=f({},d));for(var b in l)d[b]===void 0&&(d[b]=l[b])}return d}var Tu=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function c1(l){Tu(l)}function d1(l){console.error(l)}function u1(l){Tu(l)}function Pu(l,s){try{var d=l.onUncaughtError;d(s.value,{componentStack:s.stack})}catch(p){setTimeout(function(){throw p})}}function m1(l,s,d){try{var p=l.onCaughtError;p(d.value,{componentStack:d.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function dg(l,s,d){return d=yl(d),d.tag=3,d.payload={element:null},d.callback=function(){Pu(l,s)},d}function p1(l){return l=yl(l),l.tag=3,l}function f1(l,s,d,p){var b=d.type.getDerivedStateFromError;if(typeof b=="function"){var C=p.value;l.payload=function(){return b(C)},l.callback=function(){m1(s,d,p)}}var z=d.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(l.callback=function(){m1(s,d,p),typeof b!="function"&&(kl===null?kl=new Set([this]):kl.add(this));var q=p.stack;this.componentDidCatch(p.value,{componentStack:q!==null?q:""})})}function HS(l,s,d,p,b){if(d.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(s=d.alternate,s!==null&&uc(s,d,b,!0),d=zr.current,d!==null){switch(d.tag){case 13:return ho===null?Pg():d.alternate===null&&an===0&&(an=3),d.flags&=-257,d.flags|=65536,d.lanes=b,p===Ff?d.flags|=16384:(s=d.updateQueue,s===null?d.updateQueue=new Set([p]):s.add(p),Bg(l,p,b)),!1;case 22:return d.flags|=65536,p===Ff?d.flags|=16384:(s=d.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([p])},d.updateQueue=s):(d=s.retryQueue,d===null?s.retryQueue=new Set([p]):d.add(p)),Bg(l,p,b)),!1}throw Error(n(435,d.tag))}return Bg(l,p,b),Pg(),!1}if(ha)return s=zr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=b,p!==Rf&&(l=Error(n(422),{cause:p}),dc(Tr(l,d)))):(p!==Rf&&(s=Error(n(423),{cause:p}),dc(Tr(s,d))),l=l.current.alternate,l.flags|=65536,b&=-b,l.lanes|=b,p=Tr(p,d),b=dg(l.stateNode,p,b),$f(l,b),an!==4&&(an=2)),!1;var C=Error(n(520),{cause:p});if(C=Tr(C,d),Dc===null?Dc=[C]:Dc.push(C),an!==4&&(an=2),s===null)return!0;p=Tr(p,d),d=s;do{switch(d.tag){case 3:return d.flags|=65536,l=b&-b,d.lanes|=l,l=dg(d.stateNode,p,l),$f(d,l),!1;case 1:if(s=d.type,C=d.stateNode,(d.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(kl===null||!kl.has(C))))return d.flags|=65536,b&=-b,d.lanes|=b,b=p1(b),f1(b,l,d,p),$f(d,b),!1}d=d.return}while(d!==null);return!1}var g1=Error(n(461)),Dn=!1;function Fn(l,s,d,p){s.child=l===null?o1(s,null,d,p):li(s,l.child,d,p)}function h1(l,s,d,p,b){d=d.render;var C=s.ref;if("ref"in p){var z={};for(var q in p)q!=="ref"&&(z[q]=p[q])}else z=p;return ds(s),p=Gf(l,s,d,z,C,b),q=Zf(),l!==null&&!Dn?(Vf(l,s,b),Yo(l,s,b)):(ha&&q&&Af(s),s.flags|=1,Fn(l,s,p,b),s.child)}function y1(l,s,d,p,b){if(l===null){var C=d.type;return typeof C=="function"&&!kf(C)&&C.defaultProps===void 0&&d.compare===null?(s.tag=15,s.type=C,b1(l,s,C,p,b)):(l=pu(d.type,null,p,s,s.mode,b),l.ref=s.ref,l.return=s,s.child=l)}if(C=l.child,!bg(l,b)){var z=C.memoizedProps;if(d=d.compare,d=d!==null?d:lc,d(z,p)&&l.ref===s.ref)return Yo(l,s,b)}return s.flags|=1,l=Oo(C,p),l.ref=s.ref,l.return=s,s.child=l}function b1(l,s,d,p,b){if(l!==null){var C=l.memoizedProps;if(lc(C,p)&&l.ref===s.ref)if(Dn=!1,s.pendingProps=p=C,bg(l,b))(l.flags&131072)!==0&&(Dn=!0);else return s.lanes=l.lanes,Yo(l,s,b)}return ug(l,s,d,p,b)}function v1(l,s,d){var p=s.pendingProps,b=p.children,C=l!==null?l.memoizedState:null;if(p.mode==="hidden"){if((s.flags&128)!==0){if(p=C!==null?C.baseLanes|d:d,l!==null){for(b=s.child=l.child,C=0;b!==null;)C=C|b.lanes|b.childLanes,b=b.sibling;s.childLanes=C&~p}else s.childLanes=0,s.child=null;return E1(l,s,p,d)}if((d&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},l!==null&&bu(s,C!==null?C.cachePool:null),C!==null?bb(s,C):Hf(),l1(s);else return s.lanes=s.childLanes=536870912,E1(l,s,C!==null?C.baseLanes|d:d,d)}else C!==null?(bu(s,C.cachePool),bb(s,C),xl(),s.memoizedState=null):(l!==null&&bu(s,null),Hf(),xl());return Fn(l,s,b,d),s.child}function E1(l,s,d,p){var b=Of();return b=b===null?null:{parent:Sn._currentValue,pool:b},s.memoizedState={baseLanes:d,cachePool:b},l!==null&&bu(s,null),Hf(),l1(s),l!==null&&uc(l,s,p,!0),null}function Lu(l,s){var d=s.ref;if(d===null)l!==null&&l.ref!==null&&(s.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(n(284));(l===null||l.ref!==d)&&(s.flags|=4194816)}}function ug(l,s,d,p,b){return ds(s),d=Gf(l,s,d,p,void 0,b),p=Zf(),l!==null&&!Dn?(Vf(l,s,b),Yo(l,s,b)):(ha&&p&&Af(s),s.flags|=1,Fn(l,s,d,b),s.child)}function x1(l,s,d,p,b,C){return ds(s),s.updateQueue=null,d=Eb(s,p,d,b),vb(l),p=Zf(),l!==null&&!Dn?(Vf(l,s,C),Yo(l,s,C)):(ha&&p&&Af(s),s.flags|=1,Fn(l,s,d,C),s.child)}function w1(l,s,d,p,b){if(ds(s),s.stateNode===null){var C=Qs,z=d.contextType;typeof z=="object"&&z!==null&&(C=Vn(z)),C=new d(p,C),s.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=cg,s.stateNode=C,C._reactInternals=s,C=s.stateNode,C.props=p,C.state=s.memoizedState,C.refs={},Wf(s),z=d.contextType,C.context=typeof z=="object"&&z!==null?Vn(z):Qs,C.state=s.memoizedState,z=d.getDerivedStateFromProps,typeof z=="function"&&(ig(s,d,z,p),C.state=s.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(z=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),z!==C.state&&cg.enqueueReplaceState(C,C.state,null),bc(s,p,C,b),yc(),C.state=s.memoizedState),typeof C.componentDidMount=="function"&&(s.flags|=4194308),p=!0}else if(l===null){C=s.stateNode;var q=s.memoizedProps,oe=ps(d,q);C.props=oe;var Ee=C.context,De=d.contextType;z=Qs,typeof De=="object"&&De!==null&&(z=Vn(De));var Oe=d.getDerivedStateFromProps;De=typeof Oe=="function"||typeof C.getSnapshotBeforeUpdate=="function",q=s.pendingProps!==q,De||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(q||Ee!==z)&&i1(s,C,p,z),hl=!1;var xe=s.memoizedState;C.state=xe,bc(s,p,C,b),yc(),Ee=s.memoizedState,q||xe!==Ee||hl?(typeof Oe=="function"&&(ig(s,d,Oe,p),Ee=s.memoizedState),(oe=hl||s1(s,d,oe,p,xe,Ee,z))?(De||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(s.flags|=4194308)):(typeof C.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=p,s.memoizedState=Ee),C.props=p,C.state=Ee,C.context=z,p=oe):(typeof C.componentDidMount=="function"&&(s.flags|=4194308),p=!1)}else{C=s.stateNode,Uf(l,s),z=s.memoizedProps,De=ps(d,z),C.props=De,Oe=s.pendingProps,xe=C.context,Ee=d.contextType,oe=Qs,typeof Ee=="object"&&Ee!==null&&(oe=Vn(Ee)),q=d.getDerivedStateFromProps,(Ee=typeof q=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(z!==Oe||xe!==oe)&&i1(s,C,p,oe),hl=!1,xe=s.memoizedState,C.state=xe,bc(s,p,C,b),yc();var we=s.memoizedState;z!==Oe||xe!==we||hl||l!==null&&l.dependencies!==null&&hu(l.dependencies)?(typeof q=="function"&&(ig(s,d,q,p),we=s.memoizedState),(De=hl||s1(s,d,De,p,xe,we,oe)||l!==null&&l.dependencies!==null&&hu(l.dependencies))?(Ee||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,we,oe),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,we,oe)),typeof C.componentDidUpdate=="function"&&(s.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof C.componentDidUpdate!="function"||z===l.memoizedProps&&xe===l.memoizedState||(s.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||z===l.memoizedProps&&xe===l.memoizedState||(s.flags|=1024),s.memoizedProps=p,s.memoizedState=we),C.props=p,C.state=we,C.context=oe,p=De):(typeof C.componentDidUpdate!="function"||z===l.memoizedProps&&xe===l.memoizedState||(s.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||z===l.memoizedProps&&xe===l.memoizedState||(s.flags|=1024),p=!1)}return C=p,Lu(l,s),p=(s.flags&128)!==0,C||p?(C=s.stateNode,d=p&&typeof d.getDerivedStateFromError!="function"?null:C.render(),s.flags|=1,l!==null&&p?(s.child=li(s,l.child,null,b),s.child=li(s,null,d,b)):Fn(l,s,d,b),s.memoizedState=C.state,l=s.child):l=Yo(l,s,b),l}function S1(l,s,d,p){return cc(),s.flags|=256,Fn(l,s,d,p),s.child}var mg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pg(l){return{baseLanes:l,cachePool:db()}}function fg(l,s,d){return l=l!==null?l.childLanes&~d:0,s&&(l|=Or),l}function C1(l,s,d){var p=s.pendingProps,b=!1,C=(s.flags&128)!==0,z;if((z=C)||(z=l!==null&&l.memoizedState===null?!1:(Cn.current&2)!==0),z&&(b=!0,s.flags&=-129),z=(s.flags&32)!==0,s.flags&=-33,l===null){if(ha){if(b?El(s):xl(),ha){var q=tn,oe;if(oe=q){e:{for(oe=q,q=go;oe.nodeType!==8;){if(!q){q=null;break e}if(oe=so(oe.nextSibling),oe===null){q=null;break e}}q=oe}q!==null?(s.memoizedState={dehydrated:q,treeContext:os!==null?{id:Fo,overflow:Wo}:null,retryLane:536870912,hydrationErrors:null},oe=Er(18,null,null,0),oe.stateNode=q,oe.return=s,s.child=oe,rr=s,tn=null,oe=!0):oe=!1}oe||is(s)}if(q=s.memoizedState,q!==null&&(q=q.dehydrated,q!==null))return Jg(q)?s.lanes=32:s.lanes=536870912,null;Ho(s)}return q=p.children,p=p.fallback,b?(xl(),b=s.mode,q=Bu({mode:"hidden",children:q},b),p=rs(p,b,d,null),q.return=s,p.return=s,q.sibling=p,s.child=q,b=s.child,b.memoizedState=pg(d),b.childLanes=fg(l,z,d),s.memoizedState=mg,p):(El(s),gg(s,q))}if(oe=l.memoizedState,oe!==null&&(q=oe.dehydrated,q!==null)){if(C)s.flags&256?(El(s),s.flags&=-257,s=hg(l,s,d)):s.memoizedState!==null?(xl(),s.child=l.child,s.flags|=128,s=null):(xl(),b=p.fallback,q=s.mode,p=Bu({mode:"visible",children:p.children},q),b=rs(b,q,d,null),b.flags|=2,p.return=s,b.return=s,p.sibling=b,s.child=p,li(s,l.child,null,d),p=s.child,p.memoizedState=pg(d),p.childLanes=fg(l,z,d),s.memoizedState=mg,s=b);else if(El(s),Jg(q)){if(z=q.nextSibling&&q.nextSibling.dataset,z)var Ee=z.dgst;z=Ee,p=Error(n(419)),p.stack="",p.digest=z,dc({value:p,source:null,stack:null}),s=hg(l,s,d)}else if(Dn||uc(l,s,d,!1),z=(d&l.childLanes)!==0,Dn||z){if(z=Ba,z!==null&&(p=d&-d,p=(p&42)!==0?1:ln(p),p=(p&(z.suspendedLanes|d))!==0?0:p,p!==0&&p!==oe.retryLane))throw oe.retryLane=p,Vs(l,p),Nr(z,l,p),g1;q.data==="$?"||Pg(),s=hg(l,s,d)}else q.data==="$?"?(s.flags|=192,s.child=l.child,s=null):(l=oe.treeContext,tn=so(q.nextSibling),rr=s,ha=!0,ss=null,go=!1,l!==null&&(Lr[Br++]=Fo,Lr[Br++]=Wo,Lr[Br++]=os,Fo=l.id,Wo=l.overflow,os=s),s=gg(s,p.children),s.flags|=4096);return s}return b?(xl(),b=p.fallback,q=s.mode,oe=l.child,Ee=oe.sibling,p=Oo(oe,{mode:"hidden",children:p.children}),p.subtreeFlags=oe.subtreeFlags&65011712,Ee!==null?b=Oo(Ee,b):(b=rs(b,q,d,null),b.flags|=2),b.return=s,p.return=s,p.sibling=b,s.child=p,p=b,b=s.child,q=l.child.memoizedState,q===null?q=pg(d):(oe=q.cachePool,oe!==null?(Ee=Sn._currentValue,oe=oe.parent!==Ee?{parent:Ee,pool:Ee}:oe):oe=db(),q={baseLanes:q.baseLanes|d,cachePool:oe}),b.memoizedState=q,b.childLanes=fg(l,z,d),s.memoizedState=mg,p):(El(s),d=l.child,l=d.sibling,d=Oo(d,{mode:"visible",children:p.children}),d.return=s,d.sibling=null,l!==null&&(z=s.deletions,z===null?(s.deletions=[l],s.flags|=16):z.push(l)),s.child=d,s.memoizedState=null,d)}function gg(l,s){return s=Bu({mode:"visible",children:s},l.mode),s.return=l,l.child=s}function Bu(l,s){return l=Er(22,l,null,s),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function hg(l,s,d){return li(s,l.child,null,d),l=gg(s,s.pendingProps.children),l.flags|=2,s.memoizedState=null,l}function N1(l,s,d){l.lanes|=s;var p=l.alternate;p!==null&&(p.lanes|=s),Pf(l.return,s,d)}function yg(l,s,d,p,b){var C=l.memoizedState;C===null?l.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:b}:(C.isBackwards=s,C.rendering=null,C.renderingStartTime=0,C.last=p,C.tail=d,C.tailMode=b)}function _1(l,s,d){var p=s.pendingProps,b=p.revealOrder,C=p.tail;if(Fn(l,s,p.children,d),p=Cn.current,(p&2)!==0)p=p&1|2,s.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=s.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&N1(l,d,s);else if(l.tag===19)N1(l,d,s);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}p&=1}switch(T(Cn,p),b){case"forwards":for(d=s.child,b=null;d!==null;)l=d.alternate,l!==null&&Ru(l)===null&&(b=d),d=d.sibling;d=b,d===null?(b=s.child,s.child=null):(b=d.sibling,d.sibling=null),yg(s,!1,b,d,C);break;case"backwards":for(d=null,b=s.child,s.child=null;b!==null;){if(l=b.alternate,l!==null&&Ru(l)===null){s.child=b;break}l=b.sibling,b.sibling=d,d=b,b=l}yg(s,!0,d,null,C);break;case"together":yg(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Yo(l,s,d){if(l!==null&&(s.dependencies=l.dependencies),_l|=s.lanes,(d&s.childLanes)===0)if(l!==null){if(uc(l,s,d,!1),(d&s.childLanes)===0)return null}else return null;if(l!==null&&s.child!==l.child)throw Error(n(153));if(s.child!==null){for(l=s.child,d=Oo(l,l.pendingProps),s.child=d,d.return=s;l.sibling!==null;)l=l.sibling,d=d.sibling=Oo(l,l.pendingProps),d.return=s;d.sibling=null}return s.child}function bg(l,s){return(l.lanes&s)!==0?!0:(l=l.dependencies,!!(l!==null&&hu(l)))}function YS(l,s,d){switch(s.tag){case 3:Se(s,s.stateNode.containerInfo),gl(s,Sn,l.memoizedState.cache),cc();break;case 27:case 5:be(s);break;case 4:Se(s,s.stateNode.containerInfo);break;case 10:gl(s,s.type,s.memoizedProps.value);break;case 13:var p=s.memoizedState;if(p!==null)return p.dehydrated!==null?(El(s),s.flags|=128,null):(d&s.child.childLanes)!==0?C1(l,s,d):(El(s),l=Yo(l,s,d),l!==null?l.sibling:null);El(s);break;case 19:var b=(l.flags&128)!==0;if(p=(d&s.childLanes)!==0,p||(uc(l,s,d,!1),p=(d&s.childLanes)!==0),b){if(p)return _1(l,s,d);s.flags|=128}if(b=s.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),T(Cn,Cn.current),p)break;return null;case 22:case 23:return s.lanes=0,v1(l,s,d);case 24:gl(s,Sn,l.memoizedState.cache)}return Yo(l,s,d)}function k1(l,s,d){if(l!==null)if(l.memoizedProps!==s.pendingProps)Dn=!0;else{if(!bg(l,d)&&(s.flags&128)===0)return Dn=!1,YS(l,s,d);Dn=(l.flags&131072)!==0}else Dn=!1,ha&&(s.flags&1048576)!==0&&nb(s,gu,s.index);switch(s.lanes=0,s.tag){case 16:e:{l=s.pendingProps;var p=s.elementType,b=p._init;if(p=b(p._payload),s.type=p,typeof p=="function")kf(p)?(l=ps(p,l),s.tag=1,s=w1(null,s,p,l,d)):(s.tag=0,s=ug(null,s,p,l,d));else{if(p!=null){if(b=p.$$typeof,b===N){s.tag=11,s=h1(null,s,p,l,d);break e}else if(b===B){s.tag=14,s=y1(null,s,p,l,d);break e}}throw s=Y(p)||p,Error(n(306,s,""))}}return s;case 0:return ug(l,s,s.type,s.pendingProps,d);case 1:return p=s.type,b=ps(p,s.pendingProps),w1(l,s,p,b,d);case 3:e:{if(Se(s,s.stateNode.containerInfo),l===null)throw Error(n(387));p=s.pendingProps;var C=s.memoizedState;b=C.element,Uf(l,s),bc(s,p,null,d);var z=s.memoizedState;if(p=z.cache,gl(s,Sn,p),p!==C.cache&&Lf(s,[Sn],d,!0),yc(),p=z.element,C.isDehydrated)if(C={element:p,isDehydrated:!1,cache:z.cache},s.updateQueue.baseState=C,s.memoizedState=C,s.flags&256){s=S1(l,s,p,d);break e}else if(p!==b){b=Tr(Error(n(424)),s),dc(b),s=S1(l,s,p,d);break e}else{switch(l=s.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(tn=so(l.firstChild),rr=s,ha=!0,ss=null,go=!0,d=o1(s,null,p,d),s.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(cc(),p===b){s=Yo(l,s,d);break e}Fn(l,s,p,d)}s=s.child}return s;case 26:return Lu(l,s),l===null?(d=Dv(s.type,null,s.pendingProps,null))?s.memoizedState=d:ha||(d=s.type,l=s.pendingProps,p=Qu(se.current).createElement(d),p[Xt]=s,p[ga]=l,Un(p,d,l),sa(p),s.stateNode=p):s.memoizedState=Dv(s.type,l.memoizedProps,s.pendingProps,l.memoizedState),null;case 27:return be(s),l===null&&ha&&(p=s.stateNode=Iv(s.type,s.pendingProps,se.current),rr=s,go=!0,b=tn,Al(s.type)?(Xg=b,tn=so(p.firstChild)):tn=b),Fn(l,s,s.pendingProps.children,d),Lu(l,s),l===null&&(s.flags|=4194304),s.child;case 5:return l===null&&ha&&((b=p=tn)&&(p=vC(p,s.type,s.pendingProps,go),p!==null?(s.stateNode=p,rr=s,tn=so(p.firstChild),go=!1,b=!0):b=!1),b||is(s)),be(s),b=s.type,C=s.pendingProps,z=l!==null?l.memoizedProps:null,p=C.children,Zg(b,C)?p=null:z!==null&&Zg(b,z)&&(s.flags|=32),s.memoizedState!==null&&(b=Gf(l,s,zS,null,null,d),Wc._currentValue=b),Lu(l,s),Fn(l,s,p,d),s.child;case 6:return l===null&&ha&&((l=d=tn)&&(d=EC(d,s.pendingProps,go),d!==null?(s.stateNode=d,rr=s,tn=null,l=!0):l=!1),l||is(s)),null;case 13:return C1(l,s,d);case 4:return Se(s,s.stateNode.containerInfo),p=s.pendingProps,l===null?s.child=li(s,null,p,d):Fn(l,s,p,d),s.child;case 11:return h1(l,s,s.type,s.pendingProps,d);case 7:return Fn(l,s,s.pendingProps,d),s.child;case 8:return Fn(l,s,s.pendingProps.children,d),s.child;case 12:return Fn(l,s,s.pendingProps.children,d),s.child;case 10:return p=s.pendingProps,gl(s,s.type,p.value),Fn(l,s,p.children,d),s.child;case 9:return b=s.type._context,p=s.pendingProps.children,ds(s),b=Vn(b),p=p(b),s.flags|=1,Fn(l,s,p,d),s.child;case 14:return y1(l,s,s.type,s.pendingProps,d);case 15:return b1(l,s,s.type,s.pendingProps,d);case 19:return _1(l,s,d);case 31:return p=s.pendingProps,d=s.mode,p={mode:p.mode,children:p.children},l===null?(d=Bu(p,d),d.ref=s.ref,s.child=d,d.return=s,s=d):(d=Oo(l.child,p),d.ref=s.ref,s.child=d,d.return=s,s=d),s;case 22:return v1(l,s,d);case 24:return ds(s),p=Vn(Sn),l===null?(b=Of(),b===null&&(b=Ba,C=Bf(),b.pooledCache=C,C.refCount++,C!==null&&(b.pooledCacheLanes|=d),b=C),s.memoizedState={parent:p,cache:b},Wf(s),gl(s,Sn,b)):((l.lanes&d)!==0&&(Uf(l,s),bc(s,null,null,d),yc()),b=l.memoizedState,C=s.memoizedState,b.parent!==p?(b={parent:p,cache:p},s.memoizedState=b,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=b),gl(s,Sn,p)):(p=C.cache,gl(s,Sn,p),p!==b.cache&&Lf(s,[Sn],d,!0))),Fn(l,s,s.pendingProps.children,d),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function qo(l){l.flags|=4}function I1(l,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!Bv(s)){if(s=zr.current,s!==null&&((ia&4194048)===ia?ho!==null:(ia&62914560)!==ia&&(ia&536870912)===0||s!==ho))throw gc=Ff,ub;l.flags|=8192}}function zu(l,s){s!==null&&(l.flags|=4),l.flags&16384&&(s=l.tag!==22?Jt():536870912,l.lanes|=s,di|=s)}function Nc(l,s){if(!ha)switch(l.tailMode){case"hidden":s=l.tail;for(var d=null;s!==null;)s.alternate!==null&&(d=s),s=s.sibling;d===null?l.tail=null:d.sibling=null;break;case"collapsed":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?s||l.tail===null?l.tail=null:l.tail.sibling=null:p.sibling=null}}function Qa(l){var s=l.alternate!==null&&l.alternate.child===l.child,d=0,p=0;if(s)for(var b=l.child;b!==null;)d|=b.lanes|b.childLanes,p|=b.subtreeFlags&65011712,p|=b.flags&65011712,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)d|=b.lanes|b.childLanes,p|=b.subtreeFlags,p|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=p,l.childLanes=d,s}function qS(l,s,d){var p=s.pendingProps;switch(Df(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qa(s),null;case 1:return Qa(s),null;case 3:return d=s.stateNode,p=null,l!==null&&(p=l.memoizedState.cache),s.memoizedState.cache!==p&&(s.flags|=2048),$o(Sn),at(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(l===null||l.child===null)&&(ic(s)?qo(s):l===null||l.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,lb())),Qa(s),null;case 26:return d=s.memoizedState,l===null?(qo(s),d!==null?(Qa(s),I1(s,d)):(Qa(s),s.flags&=-16777217)):d?d!==l.memoizedState?(qo(s),Qa(s),I1(s,d)):(Qa(s),s.flags&=-16777217):(l.memoizedProps!==p&&qo(s),Qa(s),s.flags&=-16777217),null;case 27:Je(s),d=se.current;var b=s.type;if(l!==null&&s.stateNode!=null)l.memoizedProps!==p&&qo(s);else{if(!p){if(s.stateNode===null)throw Error(n(166));return Qa(s),null}l=re.current,ic(s)?rb(s):(l=Iv(b,p,d),s.stateNode=l,qo(s))}return Qa(s),null;case 5:if(Je(s),d=s.type,l!==null&&s.stateNode!=null)l.memoizedProps!==p&&qo(s);else{if(!p){if(s.stateNode===null)throw Error(n(166));return Qa(s),null}if(l=re.current,ic(s))rb(s);else{switch(b=Qu(se.current),l){case 1:l=b.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:l=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":l=b.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":l=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":l=b.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof p.is=="string"?b.createElement("select",{is:p.is}):b.createElement("select"),p.multiple?l.multiple=!0:p.size&&(l.size=p.size);break;default:l=typeof p.is=="string"?b.createElement(d,{is:p.is}):b.createElement(d)}}l[Xt]=s,l[ga]=p;e:for(b=s.child;b!==null;){if(b.tag===5||b.tag===6)l.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break e;for(;b.sibling===null;){if(b.return===null||b.return===s)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}s.stateNode=l;e:switch(Un(l,d,p),d){case"button":case"input":case"select":case"textarea":l=!!p.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&qo(s)}}return Qa(s),s.flags&=-16777217,null;case 6:if(l&&s.stateNode!=null)l.memoizedProps!==p&&qo(s);else{if(typeof p!="string"&&s.stateNode===null)throw Error(n(166));if(l=se.current,ic(s)){if(l=s.stateNode,d=s.memoizedProps,p=null,b=rr,b!==null)switch(b.tag){case 27:case 5:p=b.memoizedProps}l[Xt]=s,l=!!(l.nodeValue===d||p!==null&&p.suppressHydrationWarning===!0||xv(l.nodeValue,d)),l||is(s)}else l=Qu(l).createTextNode(p),l[Xt]=s,s.stateNode=l}return Qa(s),null;case 13:if(p=s.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(b=ic(s),p!==null&&p.dehydrated!==null){if(l===null){if(!b)throw Error(n(318));if(b=s.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[Xt]=s}else cc(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qa(s),b=!1}else b=lb(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=b),b=!0;if(!b)return s.flags&256?(Ho(s),s):(Ho(s),null)}if(Ho(s),(s.flags&128)!==0)return s.lanes=d,s;if(d=p!==null,l=l!==null&&l.memoizedState!==null,d){p=s.child,b=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(b=p.alternate.memoizedState.cachePool.pool);var C=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),C!==b&&(p.flags|=2048)}return d!==l&&d&&(s.child.flags|=8192),zu(s,s.updateQueue),Qa(s),null;case 4:return at(),l===null&&jg(s.stateNode.containerInfo),Qa(s),null;case 10:return $o(s.type),Qa(s),null;case 19:if(ne(Cn),b=s.memoizedState,b===null)return Qa(s),null;if(p=(s.flags&128)!==0,C=b.rendering,C===null)if(p)Nc(b,!1);else{if(an!==0||l!==null&&(l.flags&128)!==0)for(l=s.child;l!==null;){if(C=Ru(l),C!==null){for(s.flags|=128,Nc(b,!1),l=C.updateQueue,s.updateQueue=l,zu(s,l),s.subtreeFlags=0,l=d,d=s.child;d!==null;)ab(d,l),d=d.sibling;return T(Cn,Cn.current&1|2),s.child}l=l.sibling}b.tail!==null&&ft()>Wu&&(s.flags|=128,p=!0,Nc(b,!1),s.lanes=4194304)}else{if(!p)if(l=Ru(C),l!==null){if(s.flags|=128,p=!0,l=l.updateQueue,s.updateQueue=l,zu(s,l),Nc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!C.alternate&&!ha)return Qa(s),null}else 2*ft()-b.renderingStartTime>Wu&&d!==536870912&&(s.flags|=128,p=!0,Nc(b,!1),s.lanes=4194304);b.isBackwards?(C.sibling=s.child,s.child=C):(l=b.last,l!==null?l.sibling=C:s.child=C,b.last=C)}return b.tail!==null?(s=b.tail,b.rendering=s,b.tail=s.sibling,b.renderingStartTime=ft(),s.sibling=null,l=Cn.current,T(Cn,p?l&1|2:l&1),s):(Qa(s),null);case 22:case 23:return Ho(s),Yf(),p=s.memoizedState!==null,l!==null?l.memoizedState!==null!==p&&(s.flags|=8192):p&&(s.flags|=8192),p?(d&536870912)!==0&&(s.flags&128)===0&&(Qa(s),s.subtreeFlags&6&&(s.flags|=8192)):Qa(s),d=s.updateQueue,d!==null&&zu(s,d.retryQueue),d=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),p=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),p!==d&&(s.flags|=2048),l!==null&&ne(us),null;case 24:return d=null,l!==null&&(d=l.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),$o(Sn),Qa(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function GS(l,s){switch(Df(s),s.tag){case 1:return l=s.flags,l&65536?(s.flags=l&-65537|128,s):null;case 3:return $o(Sn),at(),l=s.flags,(l&65536)!==0&&(l&128)===0?(s.flags=l&-65537|128,s):null;case 26:case 27:case 5:return Je(s),null;case 13:if(Ho(s),l=s.memoizedState,l!==null&&l.dehydrated!==null){if(s.alternate===null)throw Error(n(340));cc()}return l=s.flags,l&65536?(s.flags=l&-65537|128,s):null;case 19:return ne(Cn),null;case 4:return at(),null;case 10:return $o(s.type),null;case 22:case 23:return Ho(s),Yf(),l!==null&&ne(us),l=s.flags,l&65536?(s.flags=l&-65537|128,s):null;case 24:return $o(Sn),null;case 25:return null;default:return null}}function M1(l,s){switch(Df(s),s.tag){case 3:$o(Sn),at();break;case 26:case 27:case 5:Je(s);break;case 4:at();break;case 13:Ho(s);break;case 19:ne(Cn);break;case 10:$o(s.type);break;case 22:case 23:Ho(s),Yf(),l!==null&&ne(us);break;case 24:$o(Sn)}}function _c(l,s){try{var d=s.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var b=p.next;d=b;do{if((d.tag&l)===l){p=void 0;var C=d.create,z=d.inst;p=C(),z.destroy=p}d=d.next}while(d!==b)}}catch(q){Ta(s,s.return,q)}}function wl(l,s,d){try{var p=s.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var C=b.next;p=C;do{if((p.tag&l)===l){var z=p.inst,q=z.destroy;if(q!==void 0){z.destroy=void 0,b=s;var oe=d,Ee=q;try{Ee()}catch(De){Ta(b,oe,De)}}}p=p.next}while(p!==C)}}catch(De){Ta(s,s.return,De)}}function A1(l){var s=l.updateQueue;if(s!==null){var d=l.stateNode;try{yb(s,d)}catch(p){Ta(l,l.return,p)}}}function D1(l,s,d){d.props=ps(l.type,l.memoizedProps),d.state=l.memoizedState;try{d.componentWillUnmount()}catch(p){Ta(l,s,p)}}function kc(l,s){try{var d=l.ref;if(d!==null){switch(l.tag){case 26:case 27:case 5:var p=l.stateNode;break;case 30:p=l.stateNode;break;default:p=l.stateNode}typeof d=="function"?l.refCleanup=d(p):d.current=p}}catch(b){Ta(l,s,b)}}function yo(l,s){var d=l.ref,p=l.refCleanup;if(d!==null)if(typeof p=="function")try{p()}catch(b){Ta(l,s,b)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(b){Ta(l,s,b)}else d.current=null}function R1(l){var s=l.type,d=l.memoizedProps,p=l.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":d.autoFocus&&p.focus();break e;case"img":d.src?p.src=d.src:d.srcSet&&(p.srcset=d.srcSet)}}catch(b){Ta(l,l.return,b)}}function vg(l,s,d){try{var p=l.stateNode;fC(p,l.type,d,s),p[ga]=s}catch(b){Ta(l,l.return,b)}}function T1(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Al(l.type)||l.tag===4}function Eg(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||T1(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Al(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function xg(l,s,d){var p=l.tag;if(p===5||p===6)l=l.stateNode,s?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(l,s):(s=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,s.appendChild(l),d=d._reactRootContainer,d!=null||s.onclick!==null||(s.onclick=Vu));else if(p!==4&&(p===27&&Al(l.type)&&(d=l.stateNode,s=null),l=l.child,l!==null))for(xg(l,s,d),l=l.sibling;l!==null;)xg(l,s,d),l=l.sibling}function Ou(l,s,d){var p=l.tag;if(p===5||p===6)l=l.stateNode,s?d.insertBefore(l,s):d.appendChild(l);else if(p!==4&&(p===27&&Al(l.type)&&(d=l.stateNode),l=l.child,l!==null))for(Ou(l,s,d),l=l.sibling;l!==null;)Ou(l,s,d),l=l.sibling}function P1(l){var s=l.stateNode,d=l.memoizedProps;try{for(var p=l.type,b=s.attributes;b.length;)s.removeAttributeNode(b[0]);Un(s,p,d),s[Xt]=l,s[ga]=d}catch(C){Ta(l,l.return,C)}}var Go=!1,mn=!1,wg=!1,L1=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function ZS(l,s){if(l=l.containerInfo,qg=am,l=qy(l),Ef(l)){if("selectionStart"in l)var d={start:l.selectionStart,end:l.selectionEnd};else e:{d=(d=l.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var b=p.anchorOffset,C=p.focusNode;p=p.focusOffset;try{d.nodeType,C.nodeType}catch{d=null;break e}var z=0,q=-1,oe=-1,Ee=0,De=0,Oe=l,xe=null;t:for(;;){for(var we;Oe!==d||b!==0&&Oe.nodeType!==3||(q=z+b),Oe!==C||p!==0&&Oe.nodeType!==3||(oe=z+p),Oe.nodeType===3&&(z+=Oe.nodeValue.length),(we=Oe.firstChild)!==null;)xe=Oe,Oe=we;for(;;){if(Oe===l)break t;if(xe===d&&++Ee===b&&(q=z),xe===C&&++De===p&&(oe=z),(we=Oe.nextSibling)!==null)break;Oe=xe,xe=Oe.parentNode}Oe=we}d=q===-1||oe===-1?null:{start:q,end:oe}}else d=null}d=d||{start:0,end:0}}else d=null;for(Gg={focusedElem:l,selectionRange:d},am=!1,Rn=s;Rn!==null;)if(s=Rn,l=s.child,(s.subtreeFlags&1024)!==0&&l!==null)l.return=s,Rn=l;else for(;Rn!==null;){switch(s=Rn,C=s.alternate,l=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&C!==null){l=void 0,d=s,b=C.memoizedProps,C=C.memoizedState,p=d.stateNode;try{var Tt=ps(d.type,b,d.elementType===d.type);l=p.getSnapshotBeforeUpdate(Tt,C),p.__reactInternalSnapshotBeforeUpdate=l}catch(kt){Ta(d,d.return,kt)}}break;case 3:if((l&1024)!==0){if(l=s.stateNode.containerInfo,d=l.nodeType,d===9)Qg(l);else if(d===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Qg(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=s.sibling,l!==null){l.return=s.return,Rn=l;break}Rn=s.return}}function B1(l,s,d){var p=d.flags;switch(d.tag){case 0:case 11:case 15:Sl(l,d),p&4&&_c(5,d);break;case 1:if(Sl(l,d),p&4)if(l=d.stateNode,s===null)try{l.componentDidMount()}catch(z){Ta(d,d.return,z)}else{var b=ps(d.type,s.memoizedProps);s=s.memoizedState;try{l.componentDidUpdate(b,s,l.__reactInternalSnapshotBeforeUpdate)}catch(z){Ta(d,d.return,z)}}p&64&&A1(d),p&512&&kc(d,d.return);break;case 3:if(Sl(l,d),p&64&&(l=d.updateQueue,l!==null)){if(s=null,d.child!==null)switch(d.child.tag){case 27:case 5:s=d.child.stateNode;break;case 1:s=d.child.stateNode}try{yb(l,s)}catch(z){Ta(d,d.return,z)}}break;case 27:s===null&&p&4&&P1(d);case 26:case 5:Sl(l,d),s===null&&p&4&&R1(d),p&512&&kc(d,d.return);break;case 12:Sl(l,d);break;case 13:Sl(l,d),p&4&&F1(l,d),p&64&&(l=d.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(d=nC.bind(null,d),xC(l,d))));break;case 22:if(p=d.memoizedState!==null||Go,!p){s=s!==null&&s.memoizedState!==null||mn,b=Go;var C=mn;Go=p,(mn=s)&&!C?Cl(l,d,(d.subtreeFlags&8772)!==0):Sl(l,d),Go=b,mn=C}break;case 30:break;default:Sl(l,d)}}function z1(l){var s=l.alternate;s!==null&&(l.alternate=null,z1(s)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(s=l.stateNode,s!==null&&Ke(s)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var ja=null,mr=!1;function Zo(l,s,d){for(d=d.child;d!==null;)O1(l,s,d),d=d.sibling}function O1(l,s,d){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount(ce,d)}catch{}switch(d.tag){case 26:mn||yo(d,s),Zo(l,s,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:mn||yo(d,s);var p=ja,b=mr;Al(d.type)&&(ja=d.stateNode,mr=!1),Zo(l,s,d),Bc(d.stateNode),ja=p,mr=b;break;case 5:mn||yo(d,s);case 6:if(p=ja,b=mr,ja=null,Zo(l,s,d),ja=p,mr=b,ja!==null)if(mr)try{(ja.nodeType===9?ja.body:ja.nodeName==="HTML"?ja.ownerDocument.body:ja).removeChild(d.stateNode)}catch(C){Ta(d,s,C)}else try{ja.removeChild(d.stateNode)}catch(C){Ta(d,s,C)}break;case 18:ja!==null&&(mr?(l=ja,_v(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,d.stateNode),Hc(l)):_v(ja,d.stateNode));break;case 4:p=ja,b=mr,ja=d.stateNode.containerInfo,mr=!0,Zo(l,s,d),ja=p,mr=b;break;case 0:case 11:case 14:case 15:mn||wl(2,d,s),mn||wl(4,d,s),Zo(l,s,d);break;case 1:mn||(yo(d,s),p=d.stateNode,typeof p.componentWillUnmount=="function"&&D1(d,s,p)),Zo(l,s,d);break;case 21:Zo(l,s,d);break;case 22:mn=(p=mn)||d.memoizedState!==null,Zo(l,s,d),mn=p;break;default:Zo(l,s,d)}}function F1(l,s){if(s.memoizedState===null&&(l=s.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Hc(l)}catch(d){Ta(s,s.return,d)}}function VS(l){switch(l.tag){case 13:case 19:var s=l.stateNode;return s===null&&(s=l.stateNode=new L1),s;case 22:return l=l.stateNode,s=l._retryCache,s===null&&(s=l._retryCache=new L1),s;default:throw Error(n(435,l.tag))}}function Sg(l,s){var d=VS(l);s.forEach(function(p){var b=rC.bind(null,l,p);d.has(p)||(d.add(p),p.then(b,b))})}function xr(l,s){var d=s.deletions;if(d!==null)for(var p=0;p<d.length;p++){var b=d[p],C=l,z=s,q=z;e:for(;q!==null;){switch(q.tag){case 27:if(Al(q.type)){ja=q.stateNode,mr=!1;break e}break;case 5:ja=q.stateNode,mr=!1;break e;case 3:case 4:ja=q.stateNode.containerInfo,mr=!0;break e}q=q.return}if(ja===null)throw Error(n(160));O1(C,z,b),ja=null,mr=!1,C=b.alternate,C!==null&&(C.return=null),b.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)W1(s,l),s=s.sibling}var lo=null;function W1(l,s){var d=l.alternate,p=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:xr(s,l),wr(l),p&4&&(wl(3,l,l.return),_c(3,l),wl(5,l,l.return));break;case 1:xr(s,l),wr(l),p&512&&(mn||d===null||yo(d,d.return)),p&64&&Go&&(l=l.updateQueue,l!==null&&(p=l.callbacks,p!==null&&(d=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=d===null?p:d.concat(p))));break;case 26:var b=lo;if(xr(s,l),wr(l),p&512&&(mn||d===null||yo(d,d.return)),p&4){var C=d!==null?d.memoizedState:null;if(p=l.memoizedState,d===null)if(p===null)if(l.stateNode===null){e:{p=l.type,d=l.memoizedProps,b=b.ownerDocument||b;t:switch(p){case"title":C=b.getElementsByTagName("title")[0],(!C||C[Pe]||C[Xt]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=b.createElement(p),b.head.insertBefore(C,b.querySelector("head > title"))),Un(C,p,d),C[Xt]=l,sa(C),p=C;break e;case"link":var z=Pv("link","href",b).get(p+(d.href||""));if(z){for(var q=0;q<z.length;q++)if(C=z[q],C.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&C.getAttribute("rel")===(d.rel==null?null:d.rel)&&C.getAttribute("title")===(d.title==null?null:d.title)&&C.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){z.splice(q,1);break t}}C=b.createElement(p),Un(C,p,d),b.head.appendChild(C);break;case"meta":if(z=Pv("meta","content",b).get(p+(d.content||""))){for(q=0;q<z.length;q++)if(C=z[q],C.getAttribute("content")===(d.content==null?null:""+d.content)&&C.getAttribute("name")===(d.name==null?null:d.name)&&C.getAttribute("property")===(d.property==null?null:d.property)&&C.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&C.getAttribute("charset")===(d.charSet==null?null:d.charSet)){z.splice(q,1);break t}}C=b.createElement(p),Un(C,p,d),b.head.appendChild(C);break;default:throw Error(n(468,p))}C[Xt]=l,sa(C),p=C}l.stateNode=p}else Lv(b,l.type,l.stateNode);else l.stateNode=Tv(b,p,l.memoizedProps);else C!==p?(C===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):C.count--,p===null?Lv(b,l.type,l.stateNode):Tv(b,p,l.memoizedProps)):p===null&&l.stateNode!==null&&vg(l,l.memoizedProps,d.memoizedProps)}break;case 27:xr(s,l),wr(l),p&512&&(mn||d===null||yo(d,d.return)),d!==null&&p&4&&vg(l,l.memoizedProps,d.memoizedProps);break;case 5:if(xr(s,l),wr(l),p&512&&(mn||d===null||yo(d,d.return)),l.flags&32){b=l.stateNode;try{lt(b,"")}catch(we){Ta(l,l.return,we)}}p&4&&l.stateNode!=null&&(b=l.memoizedProps,vg(l,b,d!==null?d.memoizedProps:b)),p&1024&&(wg=!0);break;case 6:if(xr(s,l),wr(l),p&4){if(l.stateNode===null)throw Error(n(162));p=l.memoizedProps,d=l.stateNode;try{d.nodeValue=p}catch(we){Ta(l,l.return,we)}}break;case 3:if(Ku=null,b=lo,lo=Ju(s.containerInfo),xr(s,l),lo=b,wr(l),p&4&&d!==null&&d.memoizedState.isDehydrated)try{Hc(s.containerInfo)}catch(we){Ta(l,l.return,we)}wg&&(wg=!1,U1(l));break;case 4:p=lo,lo=Ju(l.stateNode.containerInfo),xr(s,l),wr(l),lo=p;break;case 12:xr(s,l),wr(l);break;case 13:xr(s,l),wr(l),l.child.flags&8192&&l.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Mg=ft()),p&4&&(p=l.updateQueue,p!==null&&(l.updateQueue=null,Sg(l,p)));break;case 22:b=l.memoizedState!==null;var oe=d!==null&&d.memoizedState!==null,Ee=Go,De=mn;if(Go=Ee||b,mn=De||oe,xr(s,l),mn=De,Go=Ee,wr(l),p&8192)e:for(s=l.stateNode,s._visibility=b?s._visibility&-2:s._visibility|1,b&&(d===null||oe||Go||mn||fs(l)),d=null,s=l;;){if(s.tag===5||s.tag===26){if(d===null){oe=d=s;try{if(C=oe.stateNode,b)z=C.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{q=oe.stateNode;var Oe=oe.memoizedProps.style,xe=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null;q.style.display=xe==null||typeof xe=="boolean"?"":(""+xe).trim()}}catch(we){Ta(oe,oe.return,we)}}}else if(s.tag===6){if(d===null){oe=s;try{oe.stateNode.nodeValue=b?"":oe.memoizedProps}catch(we){Ta(oe,oe.return,we)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===l)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;d===s&&(d=null),s=s.return}d===s&&(d=null),s.sibling.return=s.return,s=s.sibling}p&4&&(p=l.updateQueue,p!==null&&(d=p.retryQueue,d!==null&&(p.retryQueue=null,Sg(l,d))));break;case 19:xr(s,l),wr(l),p&4&&(p=l.updateQueue,p!==null&&(l.updateQueue=null,Sg(l,p)));break;case 30:break;case 21:break;default:xr(s,l),wr(l)}}function wr(l){var s=l.flags;if(s&2){try{for(var d,p=l.return;p!==null;){if(T1(p)){d=p;break}p=p.return}if(d==null)throw Error(n(160));switch(d.tag){case 27:var b=d.stateNode,C=Eg(l);Ou(l,C,b);break;case 5:var z=d.stateNode;d.flags&32&&(lt(z,""),d.flags&=-33);var q=Eg(l);Ou(l,q,z);break;case 3:case 4:var oe=d.stateNode.containerInfo,Ee=Eg(l);xg(l,Ee,oe);break;default:throw Error(n(161))}}catch(De){Ta(l,l.return,De)}l.flags&=-3}s&4096&&(l.flags&=-4097)}function U1(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var s=l;U1(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),l=l.sibling}}function Sl(l,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)B1(l,s.alternate,s),s=s.sibling}function fs(l){for(l=l.child;l!==null;){var s=l;switch(s.tag){case 0:case 11:case 14:case 15:wl(4,s,s.return),fs(s);break;case 1:yo(s,s.return);var d=s.stateNode;typeof d.componentWillUnmount=="function"&&D1(s,s.return,d),fs(s);break;case 27:Bc(s.stateNode);case 26:case 5:yo(s,s.return),fs(s);break;case 22:s.memoizedState===null&&fs(s);break;case 30:fs(s);break;default:fs(s)}l=l.sibling}}function Cl(l,s,d){for(d=d&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var p=s.alternate,b=l,C=s,z=C.flags;switch(C.tag){case 0:case 11:case 15:Cl(b,C,d),_c(4,C);break;case 1:if(Cl(b,C,d),p=C,b=p.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Ee){Ta(p,p.return,Ee)}if(p=C,b=p.updateQueue,b!==null){var q=p.stateNode;try{var oe=b.shared.hiddenCallbacks;if(oe!==null)for(b.shared.hiddenCallbacks=null,b=0;b<oe.length;b++)hb(oe[b],q)}catch(Ee){Ta(p,p.return,Ee)}}d&&z&64&&A1(C),kc(C,C.return);break;case 27:P1(C);case 26:case 5:Cl(b,C,d),d&&p===null&&z&4&&R1(C),kc(C,C.return);break;case 12:Cl(b,C,d);break;case 13:Cl(b,C,d),d&&z&4&&F1(b,C);break;case 22:C.memoizedState===null&&Cl(b,C,d),kc(C,C.return);break;case 30:break;default:Cl(b,C,d)}s=s.sibling}}function Cg(l,s){var d=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==d&&(l!=null&&l.refCount++,d!=null&&mc(d))}function Ng(l,s){l=null,s.alternate!==null&&(l=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==l&&(s.refCount++,l!=null&&mc(l))}function bo(l,s,d,p){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)$1(l,s,d,p),s=s.sibling}function $1(l,s,d,p){var b=s.flags;switch(s.tag){case 0:case 11:case 15:bo(l,s,d,p),b&2048&&_c(9,s);break;case 1:bo(l,s,d,p);break;case 3:bo(l,s,d,p),b&2048&&(l=null,s.alternate!==null&&(l=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==l&&(s.refCount++,l!=null&&mc(l)));break;case 12:if(b&2048){bo(l,s,d,p),l=s.stateNode;try{var C=s.memoizedProps,z=C.id,q=C.onPostCommit;typeof q=="function"&&q(z,s.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(oe){Ta(s,s.return,oe)}}else bo(l,s,d,p);break;case 13:bo(l,s,d,p);break;case 23:break;case 22:C=s.stateNode,z=s.alternate,s.memoizedState!==null?C._visibility&2?bo(l,s,d,p):Ic(l,s):C._visibility&2?bo(l,s,d,p):(C._visibility|=2,si(l,s,d,p,(s.subtreeFlags&10256)!==0)),b&2048&&Cg(z,s);break;case 24:bo(l,s,d,p),b&2048&&Ng(s.alternate,s);break;default:bo(l,s,d,p)}}function si(l,s,d,p,b){for(b=b&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var C=l,z=s,q=d,oe=p,Ee=z.flags;switch(z.tag){case 0:case 11:case 15:si(C,z,q,oe,b),_c(8,z);break;case 23:break;case 22:var De=z.stateNode;z.memoizedState!==null?De._visibility&2?si(C,z,q,oe,b):Ic(C,z):(De._visibility|=2,si(C,z,q,oe,b)),b&&Ee&2048&&Cg(z.alternate,z);break;case 24:si(C,z,q,oe,b),b&&Ee&2048&&Ng(z.alternate,z);break;default:si(C,z,q,oe,b)}s=s.sibling}}function Ic(l,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var d=l,p=s,b=p.flags;switch(p.tag){case 22:Ic(d,p),b&2048&&Cg(p.alternate,p);break;case 24:Ic(d,p),b&2048&&Ng(p.alternate,p);break;default:Ic(d,p)}s=s.sibling}}var Mc=8192;function ii(l){if(l.subtreeFlags&Mc)for(l=l.child;l!==null;)j1(l),l=l.sibling}function j1(l){switch(l.tag){case 26:ii(l),l.flags&Mc&&l.memoizedState!==null&&PC(lo,l.memoizedState,l.memoizedProps);break;case 5:ii(l);break;case 3:case 4:var s=lo;lo=Ju(l.stateNode.containerInfo),ii(l),lo=s;break;case 22:l.memoizedState===null&&(s=l.alternate,s!==null&&s.memoizedState!==null?(s=Mc,Mc=16777216,ii(l),Mc=s):ii(l));break;default:ii(l)}}function H1(l){var s=l.alternate;if(s!==null&&(l=s.child,l!==null)){s.child=null;do s=l.sibling,l.sibling=null,l=s;while(l!==null)}}function Ac(l){var s=l.deletions;if((l.flags&16)!==0){if(s!==null)for(var d=0;d<s.length;d++){var p=s[d];Rn=p,q1(p,l)}H1(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Y1(l),l=l.sibling}function Y1(l){switch(l.tag){case 0:case 11:case 15:Ac(l),l.flags&2048&&wl(9,l,l.return);break;case 3:Ac(l);break;case 12:Ac(l);break;case 22:var s=l.stateNode;l.memoizedState!==null&&s._visibility&2&&(l.return===null||l.return.tag!==13)?(s._visibility&=-3,Fu(l)):Ac(l);break;default:Ac(l)}}function Fu(l){var s=l.deletions;if((l.flags&16)!==0){if(s!==null)for(var d=0;d<s.length;d++){var p=s[d];Rn=p,q1(p,l)}H1(l)}for(l=l.child;l!==null;){switch(s=l,s.tag){case 0:case 11:case 15:wl(8,s,s.return),Fu(s);break;case 22:d=s.stateNode,d._visibility&2&&(d._visibility&=-3,Fu(s));break;default:Fu(s)}l=l.sibling}}function q1(l,s){for(;Rn!==null;){var d=Rn;switch(d.tag){case 0:case 11:case 15:wl(8,d,s);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var p=d.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:mc(d.memoizedState.cache)}if(p=d.child,p!==null)p.return=d,Rn=p;else e:for(d=l;Rn!==null;){p=Rn;var b=p.sibling,C=p.return;if(z1(p),p===d){Rn=null;break e}if(b!==null){b.return=C,Rn=b;break e}Rn=C}}}var QS={getCacheForType:function(l){var s=Vn(Sn),d=s.data.get(l);return d===void 0&&(d=l(),s.data.set(l,d)),d}},JS=typeof WeakMap=="function"?WeakMap:Map,xa=0,Ba=null,aa=null,ia=0,wa=0,Sr=null,Nl=!1,ci=!1,_g=!1,Vo=0,an=0,_l=0,gs=0,kg=0,Or=0,di=0,Dc=null,pr=null,Ig=!1,Mg=0,Wu=1/0,Uu=null,kl=null,Wn=0,Il=null,ui=null,mi=0,Ag=0,Dg=null,G1=null,Rc=0,Rg=null;function Cr(){if((xa&2)!==0&&ia!==0)return ia&-ia;if(A.T!==null){var l=Ks;return l!==0?l:Fg()}return cr()}function Z1(){Or===0&&(Or=(ia&536870912)===0||ha?Mt():536870912);var l=zr.current;return l!==null&&(l.flags|=32),Or}function Nr(l,s,d){(l===Ba&&(wa===2||wa===9)||l.cancelPendingCommit!==null)&&(pi(l,0),Ml(l,ia,Or,!1)),ua(l,d),((xa&2)===0||l!==Ba)&&(l===Ba&&((xa&2)===0&&(gs|=d),an===4&&Ml(l,ia,Or,!1)),vo(l))}function V1(l,s,d){if((xa&6)!==0)throw Error(n(327));var p=!d&&(s&124)===0&&(s&l.expiredLanes)===0||He(l,s),b=p?eC(l,s):Lg(l,s,!0),C=p;do{if(b===0){ci&&!p&&Ml(l,s,0,!1);break}else{if(d=l.current.alternate,C&&!XS(d)){b=Lg(l,s,!1),C=!1;continue}if(b===2){if(C=s,l.errorRecoveryDisabledLanes&C)var z=0;else z=l.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){s=z;e:{var q=l;b=Dc;var oe=q.current.memoizedState.isDehydrated;if(oe&&(pi(q,z).flags|=256),z=Lg(q,z,!1),z!==2){if(_g&&!oe){q.errorRecoveryDisabledLanes|=C,gs|=C,b=4;break e}C=pr,pr=b,C!==null&&(pr===null?pr=C:pr.push.apply(pr,C))}b=z}if(C=!1,b!==2)continue}}if(b===1){pi(l,0),Ml(l,s,0,!0);break}e:{switch(p=l,C=b,C){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:Ml(p,s,Or,!Nl);break e;case 2:pr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(b=Mg+300-ft(),10<b)){if(Ml(p,s,Or,!Nl),qe(p,0,!0)!==0)break e;p.timeoutHandle=Cv(Q1.bind(null,p,d,pr,Uu,Ig,s,Or,gs,di,Nl,C,2,-0,0),b);break e}Q1(p,d,pr,Uu,Ig,s,Or,gs,di,Nl,C,0,-0,0)}}break}while(!0);vo(l)}function Q1(l,s,d,p,b,C,z,q,oe,Ee,De,Oe,xe,we){if(l.timeoutHandle=-1,Oe=s.subtreeFlags,(Oe&8192||(Oe&16785408)===16785408)&&(Fc={stylesheets:null,count:0,unsuspend:TC},j1(s),Oe=LC(),Oe!==null)){l.cancelPendingCommit=Oe(nv.bind(null,l,s,C,d,p,b,z,q,oe,De,1,xe,we)),Ml(l,C,z,!Ee);return}nv(l,s,C,d,p,b,z,q,oe)}function XS(l){for(var s=l;;){var d=s.tag;if((d===0||d===11||d===15)&&s.flags&16384&&(d=s.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var p=0;p<d.length;p++){var b=d[p],C=b.getSnapshot;b=b.value;try{if(!vr(C(),b))return!1}catch{return!1}}if(d=s.child,s.subtreeFlags&16384&&d!==null)d.return=s,s=d;else{if(s===l)break;for(;s.sibling===null;){if(s.return===null||s.return===l)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ml(l,s,d,p){s&=~kg,s&=~gs,l.suspendedLanes|=s,l.pingedLanes&=~s,p&&(l.warmLanes|=s),p=l.expirationTimes;for(var b=s;0<b;){var C=31-Fe(b),z=1<<C;p[C]=-1,b&=~z}d!==0&&Oa(l,d,s)}function $u(){return(xa&6)===0?(Tc(0),!1):!0}function Tg(){if(aa!==null){if(wa===0)var l=aa.return;else l=aa,Uo=cs=null,Qf(l),oi=null,Sc=0,l=aa;for(;l!==null;)M1(l.alternate,l),l=l.return;aa=null}}function pi(l,s){var d=l.timeoutHandle;d!==-1&&(l.timeoutHandle=-1,hC(d)),d=l.cancelPendingCommit,d!==null&&(l.cancelPendingCommit=null,d()),Tg(),Ba=l,aa=d=Oo(l.current,null),ia=s,wa=0,Sr=null,Nl=!1,ci=He(l,s),_g=!1,di=Or=kg=gs=_l=an=0,pr=Dc=null,Ig=!1,(s&8)!==0&&(s|=s&32);var p=l.entangledLanes;if(p!==0)for(l=l.entanglements,p&=s;0<p;){var b=31-Fe(p),C=1<<b;s|=l[b],p&=~C}return Vo=s,du(),d}function J1(l,s){Vt=null,A.H=Mu,s===fc||s===vu?(s=fb(),wa=3):s===ub?(s=fb(),wa=4):wa=s===g1?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Sr=s,aa===null&&(an=1,Pu(l,Tr(s,l.current)))}function X1(){var l=A.H;return A.H=Mu,l===null?Mu:l}function K1(){var l=A.A;return A.A=QS,l}function Pg(){an=4,Nl||(ia&4194048)!==ia&&zr.current!==null||(ci=!0),(_l&134217727)===0&&(gs&134217727)===0||Ba===null||Ml(Ba,ia,Or,!1)}function Lg(l,s,d){var p=xa;xa|=2;var b=X1(),C=K1();(Ba!==l||ia!==s)&&(Uu=null,pi(l,s)),s=!1;var z=an;e:do try{if(wa!==0&&aa!==null){var q=aa,oe=Sr;switch(wa){case 8:Tg(),z=6;break e;case 3:case 2:case 9:case 6:zr.current===null&&(s=!0);var Ee=wa;if(wa=0,Sr=null,fi(l,q,oe,Ee),d&&ci){z=0;break e}break;default:Ee=wa,wa=0,Sr=null,fi(l,q,oe,Ee)}}KS(),z=an;break}catch(De){J1(l,De)}while(!0);return s&&l.shellSuspendCounter++,Uo=cs=null,xa=p,A.H=b,A.A=C,aa===null&&(Ba=null,ia=0,du()),z}function KS(){for(;aa!==null;)ev(aa)}function eC(l,s){var d=xa;xa|=2;var p=X1(),b=K1();Ba!==l||ia!==s?(Uu=null,Wu=ft()+500,pi(l,s)):ci=He(l,s);e:do try{if(wa!==0&&aa!==null){s=aa;var C=Sr;t:switch(wa){case 1:wa=0,Sr=null,fi(l,s,C,1);break;case 2:case 9:if(mb(C)){wa=0,Sr=null,tv(s);break}s=function(){wa!==2&&wa!==9||Ba!==l||(wa=7),vo(l)},C.then(s,s);break e;case 3:wa=7;break e;case 4:wa=5;break e;case 7:mb(C)?(wa=0,Sr=null,tv(s)):(wa=0,Sr=null,fi(l,s,C,7));break;case 5:var z=null;switch(aa.tag){case 26:z=aa.memoizedState;case 5:case 27:var q=aa;if(!z||Bv(z)){wa=0,Sr=null;var oe=q.sibling;if(oe!==null)aa=oe;else{var Ee=q.return;Ee!==null?(aa=Ee,ju(Ee)):aa=null}break t}}wa=0,Sr=null,fi(l,s,C,5);break;case 6:wa=0,Sr=null,fi(l,s,C,6);break;case 8:Tg(),an=6;break e;default:throw Error(n(462))}}tC();break}catch(De){J1(l,De)}while(!0);return Uo=cs=null,A.H=p,A.A=b,xa=d,aa!==null?0:(Ba=null,ia=0,du(),an)}function tC(){for(;aa!==null&&!Ot();)ev(aa)}function ev(l){var s=k1(l.alternate,l,Vo);l.memoizedProps=l.pendingProps,s===null?ju(l):aa=s}function tv(l){var s=l,d=s.alternate;switch(s.tag){case 15:case 0:s=x1(d,s,s.pendingProps,s.type,void 0,ia);break;case 11:s=x1(d,s,s.pendingProps,s.type.render,s.ref,ia);break;case 5:Qf(s);default:M1(d,s),s=aa=ab(s,Vo),s=k1(d,s,Vo)}l.memoizedProps=l.pendingProps,s===null?ju(l):aa=s}function fi(l,s,d,p){Uo=cs=null,Qf(s),oi=null,Sc=0;var b=s.return;try{if(HS(l,b,s,d,ia)){an=1,Pu(l,Tr(d,l.current)),aa=null;return}}catch(C){if(b!==null)throw aa=b,C;an=1,Pu(l,Tr(d,l.current)),aa=null;return}s.flags&32768?(ha||p===1?l=!0:ci||(ia&536870912)!==0?l=!1:(Nl=l=!0,(p===2||p===9||p===3||p===6)&&(p=zr.current,p!==null&&p.tag===13&&(p.flags|=16384))),av(s,l)):ju(s)}function ju(l){var s=l;do{if((s.flags&32768)!==0){av(s,Nl);return}l=s.return;var d=qS(s.alternate,s,Vo);if(d!==null){aa=d;return}if(s=s.sibling,s!==null){aa=s;return}aa=s=l}while(s!==null);an===0&&(an=5)}function av(l,s){do{var d=GS(l.alternate,l);if(d!==null){d.flags&=32767,aa=d;return}if(d=l.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!s&&(l=l.sibling,l!==null)){aa=l;return}aa=l=d}while(l!==null);an=6,aa=null}function nv(l,s,d,p,b,C,z,q,oe){l.cancelPendingCommit=null;do Hu();while(Wn!==0);if((xa&6)!==0)throw Error(n(327));if(s!==null){if(s===l.current)throw Error(n(177));if(C=s.lanes|s.childLanes,C|=Nf,ma(l,d,C,z,q,oe),l===Ba&&(aa=Ba=null,ia=0),ui=s,Il=l,mi=d,Ag=C,Dg=b,G1=p,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,oC(he,function(){return iv(),null})):(l.callbackNode=null,l.callbackPriority=0),p=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||p){p=A.T,A.T=null,b=U.p,U.p=2,z=xa,xa|=4;try{ZS(l,s,d)}finally{xa=z,U.p=b,A.T=p}}Wn=1,rv(),ov(),lv()}}function rv(){if(Wn===1){Wn=0;var l=Il,s=ui,d=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||d){d=A.T,A.T=null;var p=U.p;U.p=2;var b=xa;xa|=4;try{W1(s,l);var C=Gg,z=qy(l.containerInfo),q=C.focusedElem,oe=C.selectionRange;if(z!==q&&q&&q.ownerDocument&&Yy(q.ownerDocument.documentElement,q)){if(oe!==null&&Ef(q)){var Ee=oe.start,De=oe.end;if(De===void 0&&(De=Ee),"selectionStart"in q)q.selectionStart=Ee,q.selectionEnd=Math.min(De,q.value.length);else{var Oe=q.ownerDocument||document,xe=Oe&&Oe.defaultView||window;if(xe.getSelection){var we=xe.getSelection(),Tt=q.textContent.length,kt=Math.min(oe.start,Tt),Ma=oe.end===void 0?kt:Math.min(oe.end,Tt);!we.extend&&kt>Ma&&(z=Ma,Ma=kt,kt=z);var fe=Hy(q,kt),ie=Hy(q,Ma);if(fe&&ie&&(we.rangeCount!==1||we.anchorNode!==fe.node||we.anchorOffset!==fe.offset||we.focusNode!==ie.node||we.focusOffset!==ie.offset)){var ve=Oe.createRange();ve.setStart(fe.node,fe.offset),we.removeAllRanges(),kt>Ma?(we.addRange(ve),we.extend(ie.node,ie.offset)):(ve.setEnd(ie.node,ie.offset),we.addRange(ve))}}}}for(Oe=[],we=q;we=we.parentNode;)we.nodeType===1&&Oe.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<Oe.length;q++){var Te=Oe[q];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}am=!!qg,Gg=qg=null}finally{xa=b,U.p=p,A.T=d}}l.current=s,Wn=2}}function ov(){if(Wn===2){Wn=0;var l=Il,s=ui,d=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||d){d=A.T,A.T=null;var p=U.p;U.p=2;var b=xa;xa|=4;try{B1(l,s.alternate,s)}finally{xa=b,U.p=p,A.T=d}}Wn=3}}function lv(){if(Wn===4||Wn===3){Wn=0,Zt();var l=Il,s=ui,d=mi,p=G1;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Wn=5:(Wn=0,ui=Il=null,sv(l,l.pendingLanes));var b=l.pendingLanes;if(b===0&&(kl=null),Fa(d),s=s.stateNode,ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot(ce,s,void 0,(s.current.flags&128)===128)}catch{}if(p!==null){s=A.T,b=U.p,U.p=2,A.T=null;try{for(var C=l.onRecoverableError,z=0;z<p.length;z++){var q=p[z];C(q.value,{componentStack:q.stack})}}finally{A.T=s,U.p=b}}(mi&3)!==0&&Hu(),vo(l),b=l.pendingLanes,(d&4194090)!==0&&(b&42)!==0?l===Rg?Rc++:(Rc=0,Rg=l):Rc=0,Tc(0)}}function sv(l,s){(l.pooledCacheLanes&=s)===0&&(s=l.pooledCache,s!=null&&(l.pooledCache=null,mc(s)))}function Hu(l){return rv(),ov(),lv(),iv()}function iv(){if(Wn!==5)return!1;var l=Il,s=Ag;Ag=0;var d=Fa(mi),p=A.T,b=U.p;try{U.p=32>d?32:d,A.T=null,d=Dg,Dg=null;var C=Il,z=mi;if(Wn=0,ui=Il=null,mi=0,(xa&6)!==0)throw Error(n(331));var q=xa;if(xa|=4,Y1(C.current),$1(C,C.current,z,d),xa=q,Tc(0,!1),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot(ce,C)}catch{}return!0}finally{U.p=b,A.T=p,sv(l,s)}}function cv(l,s,d){s=Tr(d,s),s=dg(l.stateNode,s,2),l=bl(l,s,2),l!==null&&(ua(l,2),vo(l))}function Ta(l,s,d){if(l.tag===3)cv(l,l,d);else for(;s!==null;){if(s.tag===3){cv(s,l,d);break}else if(s.tag===1){var p=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(kl===null||!kl.has(p))){l=Tr(d,l),d=p1(2),p=bl(s,d,2),p!==null&&(f1(d,p,s,l),ua(p,2),vo(p));break}}s=s.return}}function Bg(l,s,d){var p=l.pingCache;if(p===null){p=l.pingCache=new JS;var b=new Set;p.set(s,b)}else b=p.get(s),b===void 0&&(b=new Set,p.set(s,b));b.has(d)||(_g=!0,b.add(d),l=aC.bind(null,l,s,d),s.then(l,l))}function aC(l,s,d){var p=l.pingCache;p!==null&&p.delete(s),l.pingedLanes|=l.suspendedLanes&d,l.warmLanes&=~d,Ba===l&&(ia&d)===d&&(an===4||an===3&&(ia&62914560)===ia&&300>ft()-Mg?(xa&2)===0&&pi(l,0):kg|=d,di===ia&&(di=0)),vo(l)}function dv(l,s){s===0&&(s=Jt()),l=Vs(l,s),l!==null&&(ua(l,s),vo(l))}function nC(l){var s=l.memoizedState,d=0;s!==null&&(d=s.retryLane),dv(l,d)}function rC(l,s){var d=0;switch(l.tag){case 13:var p=l.stateNode,b=l.memoizedState;b!==null&&(d=b.retryLane);break;case 19:p=l.stateNode;break;case 22:p=l.stateNode._retryCache;break;default:throw Error(n(314))}p!==null&&p.delete(s),dv(l,d)}function oC(l,s){return Xe(l,s)}var Yu=null,gi=null,zg=!1,qu=!1,Og=!1,hs=0;function vo(l){l!==gi&&l.next===null&&(gi===null?Yu=gi=l:gi=gi.next=l),qu=!0,zg||(zg=!0,sC())}function Tc(l,s){if(!Og&&qu){Og=!0;do for(var d=!1,p=Yu;p!==null;){if(l!==0){var b=p.pendingLanes;if(b===0)var C=0;else{var z=p.suspendedLanes,q=p.pingedLanes;C=(1<<31-Fe(42|l)+1)-1,C&=b&~(z&~q),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(d=!0,fv(p,C))}else C=ia,C=qe(p,p===Ba?C:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(C&3)===0||He(p,C)||(d=!0,fv(p,C));p=p.next}while(d);Og=!1}}function lC(){uv()}function uv(){qu=zg=!1;var l=0;hs!==0&&(gC()&&(l=hs),hs=0);for(var s=ft(),d=null,p=Yu;p!==null;){var b=p.next,C=mv(p,s);C===0?(p.next=null,d===null?Yu=b:d.next=b,b===null&&(gi=d)):(d=p,(l!==0||(C&3)!==0)&&(qu=!0)),p=b}Tc(l)}function mv(l,s){for(var d=l.suspendedLanes,p=l.pingedLanes,b=l.expirationTimes,C=l.pendingLanes&-62914561;0<C;){var z=31-Fe(C),q=1<<z,oe=b[z];oe===-1?((q&d)===0||(q&p)!==0)&&(b[z]=st(q,s)):oe<=s&&(l.expiredLanes|=q),C&=~q}if(s=Ba,d=ia,d=qe(l,l===s?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),p=l.callbackNode,d===0||l===s&&(wa===2||wa===9)||l.cancelPendingCommit!==null)return p!==null&&p!==null&&ct(p),l.callbackNode=null,l.callbackPriority=0;if((d&3)===0||He(l,d)){if(s=d&-d,s===l.callbackPriority)return s;switch(p!==null&&ct(p),Fa(d)){case 2:case 8:d=Wt;break;case 32:d=he;break;case 268435456:d=$;break;default:d=he}return p=pv.bind(null,l),d=Xe(d,p),l.callbackPriority=s,l.callbackNode=d,s}return p!==null&&p!==null&&ct(p),l.callbackPriority=2,l.callbackNode=null,2}function pv(l,s){if(Wn!==0&&Wn!==5)return l.callbackNode=null,l.callbackPriority=0,null;var d=l.callbackNode;if(Hu()&&l.callbackNode!==d)return null;var p=ia;return p=qe(l,l===Ba?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),p===0?null:(V1(l,p,s),mv(l,ft()),l.callbackNode!=null&&l.callbackNode===d?pv.bind(null,l):null)}function fv(l,s){if(Hu())return null;V1(l,s,!0)}function sC(){yC(function(){(xa&6)!==0?Xe(ra,lC):uv()})}function Fg(){return hs===0&&(hs=Mt()),hs}function gv(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Gn(""+l)}function hv(l,s){var d=s.ownerDocument.createElement("input");return d.name=s.name,d.value=s.value,l.id&&d.setAttribute("form",l.id),s.parentNode.insertBefore(d,s),l=new FormData(l),d.parentNode.removeChild(d),l}function iC(l,s,d,p,b){if(s==="submit"&&d&&d.stateNode===b){var C=gv((b[ga]||null).action),z=p.submitter;z&&(s=(s=z[ga]||null)?gv(s.formAction):z.getAttribute("formAction"),s!==null&&(C=s,z=null));var q=new pl("action","action",null,p,b);l.push({event:q,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(hs!==0){var oe=z?hv(b,z):new FormData(b);og(d,{pending:!0,data:oe,method:b.method,action:C},null,oe)}}else typeof C=="function"&&(q.preventDefault(),oe=z?hv(b,z):new FormData(b),og(d,{pending:!0,data:oe,method:b.method,action:C},C,oe))},currentTarget:b}]})}}for(var Wg=0;Wg<Cf.length;Wg++){var Ug=Cf[Wg],cC=Ug.toLowerCase(),dC=Ug[0].toUpperCase()+Ug.slice(1);oo(cC,"on"+dC)}oo(Vy,"onAnimationEnd"),oo(Qy,"onAnimationIteration"),oo(Jy,"onAnimationStart"),oo("dblclick","onDoubleClick"),oo("focusin","onFocus"),oo("focusout","onBlur"),oo(kS,"onTransitionRun"),oo(IS,"onTransitionStart"),oo(MS,"onTransitionCancel"),oo(Xy,"onTransitionEnd"),En("onMouseEnter",["mouseout","mouseover"]),En("onMouseLeave",["mouseout","mouseover"]),En("onPointerEnter",["pointerout","pointerover"]),En("onPointerLeave",["pointerout","pointerover"]),Ra("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ra("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ra("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ra("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ra("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ra("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pc));function yv(l,s){s=(s&4)!==0;for(var d=0;d<l.length;d++){var p=l[d],b=p.event;p=p.listeners;e:{var C=void 0;if(s)for(var z=p.length-1;0<=z;z--){var q=p[z],oe=q.instance,Ee=q.currentTarget;if(q=q.listener,oe!==C&&b.isPropagationStopped())break e;C=q,b.currentTarget=Ee;try{C(b)}catch(De){Tu(De)}b.currentTarget=null,C=oe}else for(z=0;z<p.length;z++){if(q=p[z],oe=q.instance,Ee=q.currentTarget,q=q.listener,oe!==C&&b.isPropagationStopped())break e;C=q,b.currentTarget=Ee;try{C(b)}catch(De){Tu(De)}b.currentTarget=null,C=oe}}}}function na(l,s){var d=s[dr];d===void 0&&(d=s[dr]=new Set);var p=l+"__bubble";d.has(p)||(bv(s,l,2,!1),d.add(p))}function $g(l,s,d){var p=0;s&&(p|=4),bv(d,l,p,s)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function jg(l){if(!l[Gu]){l[Gu]=!0,tr.forEach(function(d){d!=="selectionchange"&&(uC.has(d)||$g(d,!1,l),$g(d,!0,l))});var s=l.nodeType===9?l:l.ownerDocument;s===null||s[Gu]||(s[Gu]=!0,$g("selectionchange",!1,s))}}function bv(l,s,d,p){switch($v(s)){case 2:var b=OC;break;case 8:b=FC;break;default:b=nh}d=b.bind(null,s,d,l),b=void 0,!In||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(b=!0),p?b!==void 0?l.addEventListener(s,d,{capture:!0,passive:b}):l.addEventListener(s,d,!0):b!==void 0?l.addEventListener(s,d,{passive:b}):l.addEventListener(s,d,!1)}function Hg(l,s,d,p,b){var C=p;if((s&1)===0&&(s&2)===0&&p!==null)e:for(;;){if(p===null)return;var z=p.tag;if(z===3||z===4){var q=p.stateNode.containerInfo;if(q===b)break;if(z===4)for(z=p.return;z!==null;){var oe=z.tag;if((oe===3||oe===4)&&z.stateNode.containerInfo===b)return;z=z.return}for(;q!==null;){if(z=mt(q),z===null)return;if(oe=z.tag,oe===5||oe===6||oe===26||oe===27){p=C=z;continue e}q=q.parentNode}}p=p.return}Zn(function(){var Ee=C,De=la(d),Oe=[];e:{var xe=Ky.get(l);if(xe!==void 0){var we=pl,Tt=l;switch(l){case"keypress":if(ar(d)===0)break e;case"keydown":case"keyup":we=gf;break;case"focusin":Tt="focus",we=ro;break;case"focusout":Tt="blur",we=ro;break;case"beforeblur":case"afterblur":we=ro;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=uf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=yf;break;case Vy:case Qy:case Jy:we=mf;break;case Xy:we=au;break;case"scroll":case"scrollend":we=Us;break;case"wheel":we=ru;break;case"copy":case"cut":case"paste":we=By;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=nc;break;case"toggle":case"beforetoggle":we=lu}var kt=(s&4)!==0,Ma=!kt&&(l==="scroll"||l==="scrollend"),fe=kt?xe!==null?xe+"Capture":null:xe;kt=[];for(var ie=Ee,ve;ie!==null;){var Te=ie;if(ve=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||ve===null||fe===null||(Te=Va(ie,fe),Te!=null&&kt.push(Lc(ie,Te,ve))),Ma)break;ie=ie.return}0<kt.length&&(xe=new we(xe,Tt,null,d,De),Oe.push({event:xe,listeners:kt}))}}if((s&7)===0){e:{if(xe=l==="mouseover"||l==="pointerover",we=l==="mouseout"||l==="pointerout",xe&&d!==to&&(Tt=d.relatedTarget||d.fromElement)&&(mt(Tt)||Tt[Nn]))break e;if((we||xe)&&(xe=De.window===De?De:(xe=De.ownerDocument)?xe.defaultView||xe.parentWindow:window,we?(Tt=d.relatedTarget||d.toElement,we=Ee,Tt=Tt?mt(Tt):null,Tt!==null&&(Ma=i(Tt),kt=Tt.tag,Tt!==Ma||kt!==5&&kt!==27&&kt!==6)&&(Tt=null)):(we=null,Tt=Ee),we!==Tt)){if(kt=Jd,Te="onMouseLeave",fe="onMouseEnter",ie="mouse",(l==="pointerout"||l==="pointerover")&&(kt=nc,Te="onPointerLeave",fe="onPointerEnter",ie="pointer"),Ma=we==null?xe:ba(we),ve=Tt==null?xe:ba(Tt),xe=new kt(Te,ie+"leave",we,d,De),xe.target=Ma,xe.relatedTarget=ve,Te=null,mt(De)===Ee&&(kt=new kt(fe,ie+"enter",Tt,d,De),kt.target=ve,kt.relatedTarget=Ma,Te=kt),Ma=Te,we&&Tt)t:{for(kt=we,fe=Tt,ie=0,ve=kt;ve;ve=hi(ve))ie++;for(ve=0,Te=fe;Te;Te=hi(Te))ve++;for(;0<ie-ve;)kt=hi(kt),ie--;for(;0<ve-ie;)fe=hi(fe),ve--;for(;ie--;){if(kt===fe||fe!==null&&kt===fe.alternate)break t;kt=hi(kt),fe=hi(fe)}kt=null}else kt=null;we!==null&&vv(Oe,xe,we,kt,!1),Tt!==null&&Ma!==null&&vv(Oe,Ma,Tt,kt,!0)}}e:{if(xe=Ee?ba(Ee):window,we=xe.nodeName&&xe.nodeName.toLowerCase(),we==="select"||we==="input"&&xe.type==="file")var Et=Oy;else if(iu(xe))if(Fy)Et=CS;else{Et=wS;var ea=xS}else we=xe.nodeName,!we||we.toLowerCase()!=="input"||xe.type!=="checkbox"&&xe.type!=="radio"?Ee&&yt(Ee.elementType)&&(Et=Oy):Et=SS;if(Et&&(Et=Et(l,Ee))){zy(Oe,Et,d,De);break e}ea&&ea(l,xe,Ee),l==="focusout"&&Ee&&xe.type==="number"&&Ee.memoizedProps.value!=null&&Rt(xe,"number",xe.value)}switch(ea=Ee?ba(Ee):window,l){case"focusin":(iu(ea)||ea.contentEditable==="true")&&(qs=ea,xf=Ee,sc=null);break;case"focusout":sc=xf=qs=null;break;case"mousedown":wf=!0;break;case"contextmenu":case"mouseup":case"dragend":wf=!1,Gy(Oe,d,De);break;case"selectionchange":if(_S)break;case"keydown":case"keyup":Gy(Oe,d,De)}var Ct;if(ae)e:{switch(l){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else St?$a(l,d)&&(At="onCompositionEnd"):l==="keydown"&&d.keyCode===229&&(At="onCompositionStart");At&&(Ut&&d.locale!=="ko"&&(St||At!=="onCompositionStart"?At==="onCompositionEnd"&&St&&(Ct=en()):(An=De,hr="value"in An?An.value:An.textContent,St=!0)),ea=Zu(Ee,At),0<ea.length&&(At=new ac(At,l,null,d,De),Oe.push({event:At,listeners:ea}),Ct?At.data=Ct:(Ct=Bo(d),Ct!==null&&(At.data=Ct)))),(Ct=it?nr(l,d):zo(l,d))&&(At=Zu(Ee,"onBeforeInput"),0<At.length&&(ea=new ac("onBeforeInput","beforeinput",null,d,De),Oe.push({event:ea,listeners:At}),ea.data=Ct)),iC(Oe,l,Ee,d,De)}yv(Oe,s)})}function Lc(l,s,d){return{instance:l,listener:s,currentTarget:d}}function Zu(l,s){for(var d=s+"Capture",p=[];l!==null;){var b=l,C=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||C===null||(b=Va(l,d),b!=null&&p.unshift(Lc(l,b,C)),b=Va(l,s),b!=null&&p.push(Lc(l,b,C))),l.tag===3)return p;l=l.return}return[]}function hi(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function vv(l,s,d,p,b){for(var C=s._reactName,z=[];d!==null&&d!==p;){var q=d,oe=q.alternate,Ee=q.stateNode;if(q=q.tag,oe!==null&&oe===p)break;q!==5&&q!==26&&q!==27||Ee===null||(oe=Ee,b?(Ee=Va(d,C),Ee!=null&&z.unshift(Lc(d,Ee,oe))):b||(Ee=Va(d,C),Ee!=null&&z.push(Lc(d,Ee,oe)))),d=d.return}z.length!==0&&l.push({event:s,listeners:z})}var mC=/\r\n?/g,pC=/\u0000|\uFFFD/g;function Ev(l){return(typeof l=="string"?l:""+l).replace(mC,`
`).replace(pC,"")}function xv(l,s){return s=Ev(s),Ev(l)===s}function Vu(){}function Ia(l,s,d,p,b,C){switch(d){case"children":typeof p=="string"?s==="body"||s==="textarea"&&p===""||lt(l,p):(typeof p=="number"||typeof p=="bigint")&&s!=="body"&&lt(l,""+p);break;case"className":On(l,"class",p);break;case"tabIndex":On(l,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":On(l,d,p);break;case"style":ut(l,p,C);break;case"data":if(s!=="object"){On(l,"data",p);break}case"src":case"href":if(p===""&&(s!=="a"||d!=="href")){l.removeAttribute(d);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){l.removeAttribute(d);break}p=Gn(""+p),l.setAttribute(d,p);break;case"action":case"formAction":if(typeof p=="function"){l.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(d==="formAction"?(s!=="input"&&Ia(l,s,"name",b.name,b,null),Ia(l,s,"formEncType",b.formEncType,b,null),Ia(l,s,"formMethod",b.formMethod,b,null),Ia(l,s,"formTarget",b.formTarget,b,null)):(Ia(l,s,"encType",b.encType,b,null),Ia(l,s,"method",b.method,b,null),Ia(l,s,"target",b.target,b,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){l.removeAttribute(d);break}p=Gn(""+p),l.setAttribute(d,p);break;case"onClick":p!=null&&(l.onclick=Vu);break;case"onScroll":p!=null&&na("scroll",l);break;case"onScrollEnd":p!=null&&na("scrollend",l);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(d=p.__html,d!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=d}}break;case"multiple":l.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":l.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){l.removeAttribute("xlink:href");break}d=Gn(""+p),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?l.setAttribute(d,""+p):l.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?l.setAttribute(d,""):l.removeAttribute(d);break;case"capture":case"download":p===!0?l.setAttribute(d,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?l.setAttribute(d,p):l.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?l.setAttribute(d,p):l.removeAttribute(d);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?l.removeAttribute(d):l.setAttribute(d,p);break;case"popover":na("beforetoggle",l),na("toggle",l),zn(l,"popover",p);break;case"xlinkActuate":wn(l,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":wn(l,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":wn(l,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":wn(l,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":wn(l,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":wn(l,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":wn(l,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":wn(l,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":wn(l,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":zn(l,"is",p);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=ta.get(d)||d,zn(l,d,p))}}function Yg(l,s,d,p,b,C){switch(d){case"style":ut(l,p,C);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(d=p.__html,d!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=d}}break;case"children":typeof p=="string"?lt(l,p):(typeof p=="number"||typeof p=="bigint")&&lt(l,""+p);break;case"onScroll":p!=null&&na("scroll",l);break;case"onScrollEnd":p!=null&&na("scrollend",l);break;case"onClick":p!=null&&(l.onclick=Vu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qn.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(b=d.endsWith("Capture"),s=d.slice(2,b?d.length-7:void 0),C=l[ga]||null,C=C!=null?C[d]:null,typeof C=="function"&&l.removeEventListener(s,C,b),typeof p=="function")){typeof C!="function"&&C!==null&&(d in l?l[d]=null:l.hasAttribute(d)&&l.removeAttribute(d)),l.addEventListener(s,p,b);break e}d in l?l[d]=p:p===!0?l.setAttribute(d,""):zn(l,d,p)}}}function Un(l,s,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":na("error",l),na("load",l);var p=!1,b=!1,C;for(C in d)if(d.hasOwnProperty(C)){var z=d[C];if(z!=null)switch(C){case"src":p=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Ia(l,s,C,z,d,null)}}b&&Ia(l,s,"srcSet",d.srcSet,d,null),p&&Ia(l,s,"src",d.src,d,null);return;case"input":na("invalid",l);var q=C=z=b=null,oe=null,Ee=null;for(p in d)if(d.hasOwnProperty(p)){var De=d[p];if(De!=null)switch(p){case"name":b=De;break;case"type":z=De;break;case"checked":oe=De;break;case"defaultChecked":Ee=De;break;case"value":C=De;break;case"defaultValue":q=De;break;case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(n(137,s));break;default:Ia(l,s,p,De,d,null)}}pt(l,C,q,oe,Ee,z,b,!1),H(l);return;case"select":na("invalid",l),p=z=C=null;for(b in d)if(d.hasOwnProperty(b)&&(q=d[b],q!=null))switch(b){case"value":C=q;break;case"defaultValue":z=q;break;case"multiple":p=q;default:Ia(l,s,b,q,d,null)}s=C,d=z,l.multiple=!!p,s!=null?xt(l,!!p,s,!1):d!=null&&xt(l,!!p,d,!0);return;case"textarea":na("invalid",l),C=b=p=null;for(z in d)if(d.hasOwnProperty(z)&&(q=d[z],q!=null))switch(z){case"value":p=q;break;case"defaultValue":b=q;break;case"children":C=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(91));break;default:Ia(l,s,z,q,d,null)}Nt(l,p,b,C),H(l);return;case"option":for(oe in d)if(d.hasOwnProperty(oe)&&(p=d[oe],p!=null))switch(oe){case"selected":l.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Ia(l,s,oe,p,d,null)}return;case"dialog":na("beforetoggle",l),na("toggle",l),na("cancel",l),na("close",l);break;case"iframe":case"object":na("load",l);break;case"video":case"audio":for(p=0;p<Pc.length;p++)na(Pc[p],l);break;case"image":na("error",l),na("load",l);break;case"details":na("toggle",l);break;case"embed":case"source":case"link":na("error",l),na("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ee in d)if(d.hasOwnProperty(Ee)&&(p=d[Ee],p!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Ia(l,s,Ee,p,d,null)}return;default:if(yt(s)){for(De in d)d.hasOwnProperty(De)&&(p=d[De],p!==void 0&&Yg(l,s,De,p,d,void 0));return}}for(q in d)d.hasOwnProperty(q)&&(p=d[q],p!=null&&Ia(l,s,q,p,d,null))}function fC(l,s,d,p){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,C=null,z=null,q=null,oe=null,Ee=null,De=null;for(we in d){var Oe=d[we];if(d.hasOwnProperty(we)&&Oe!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":oe=Oe;default:p.hasOwnProperty(we)||Ia(l,s,we,null,p,Oe)}}for(var xe in p){var we=p[xe];if(Oe=d[xe],p.hasOwnProperty(xe)&&(we!=null||Oe!=null))switch(xe){case"type":C=we;break;case"name":b=we;break;case"checked":Ee=we;break;case"defaultChecked":De=we;break;case"value":z=we;break;case"defaultValue":q=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(n(137,s));break;default:we!==Oe&&Ia(l,s,xe,we,p,Oe)}}ot(l,z,q,oe,Ee,De,C,b);return;case"select":we=z=q=xe=null;for(C in d)if(oe=d[C],d.hasOwnProperty(C)&&oe!=null)switch(C){case"value":break;case"multiple":we=oe;default:p.hasOwnProperty(C)||Ia(l,s,C,null,p,oe)}for(b in p)if(C=p[b],oe=d[b],p.hasOwnProperty(b)&&(C!=null||oe!=null))switch(b){case"value":xe=C;break;case"defaultValue":q=C;break;case"multiple":z=C;default:C!==oe&&Ia(l,s,b,C,p,oe)}s=q,d=z,p=we,xe!=null?xt(l,!!d,xe,!1):!!p!=!!d&&(s!=null?xt(l,!!d,s,!0):xt(l,!!d,d?[]:"",!1));return;case"textarea":we=xe=null;for(q in d)if(b=d[q],d.hasOwnProperty(q)&&b!=null&&!p.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:Ia(l,s,q,null,p,b)}for(z in p)if(b=p[z],C=d[z],p.hasOwnProperty(z)&&(b!=null||C!=null))switch(z){case"value":xe=b;break;case"defaultValue":we=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==C&&Ia(l,s,z,b,p,C)}zt(l,xe,we);return;case"option":for(var Tt in d)if(xe=d[Tt],d.hasOwnProperty(Tt)&&xe!=null&&!p.hasOwnProperty(Tt))switch(Tt){case"selected":l.selected=!1;break;default:Ia(l,s,Tt,null,p,xe)}for(oe in p)if(xe=p[oe],we=d[oe],p.hasOwnProperty(oe)&&xe!==we&&(xe!=null||we!=null))switch(oe){case"selected":l.selected=xe&&typeof xe!="function"&&typeof xe!="symbol";break;default:Ia(l,s,oe,xe,p,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var kt in d)xe=d[kt],d.hasOwnProperty(kt)&&xe!=null&&!p.hasOwnProperty(kt)&&Ia(l,s,kt,null,p,xe);for(Ee in p)if(xe=p[Ee],we=d[Ee],p.hasOwnProperty(Ee)&&xe!==we&&(xe!=null||we!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(n(137,s));break;default:Ia(l,s,Ee,xe,p,we)}return;default:if(yt(s)){for(var Ma in d)xe=d[Ma],d.hasOwnProperty(Ma)&&xe!==void 0&&!p.hasOwnProperty(Ma)&&Yg(l,s,Ma,void 0,p,xe);for(De in p)xe=p[De],we=d[De],!p.hasOwnProperty(De)||xe===we||xe===void 0&&we===void 0||Yg(l,s,De,xe,p,we);return}}for(var fe in d)xe=d[fe],d.hasOwnProperty(fe)&&xe!=null&&!p.hasOwnProperty(fe)&&Ia(l,s,fe,null,p,xe);for(Oe in p)xe=p[Oe],we=d[Oe],!p.hasOwnProperty(Oe)||xe===we||xe==null&&we==null||Ia(l,s,Oe,xe,p,we)}var qg=null,Gg=null;function Qu(l){return l.nodeType===9?l:l.ownerDocument}function wv(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sv(l,s){if(l===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&s==="foreignObject"?0:l}function Zg(l,s){return l==="textarea"||l==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Vg=null;function gC(){var l=window.event;return l&&l.type==="popstate"?l===Vg?!1:(Vg=l,!0):(Vg=null,!1)}var Cv=typeof setTimeout=="function"?setTimeout:void 0,hC=typeof clearTimeout=="function"?clearTimeout:void 0,Nv=typeof Promise=="function"?Promise:void 0,yC=typeof queueMicrotask=="function"?queueMicrotask:typeof Nv<"u"?function(l){return Nv.resolve(null).then(l).catch(bC)}:Cv;function bC(l){setTimeout(function(){throw l})}function Al(l){return l==="head"}function _v(l,s){var d=s,p=0,b=0;do{var C=d.nextSibling;if(l.removeChild(d),C&&C.nodeType===8)if(d=C.data,d==="/$"){if(0<p&&8>p){d=p;var z=l.ownerDocument;if(d&1&&Bc(z.documentElement),d&2&&Bc(z.body),d&4)for(d=z.head,Bc(d),z=d.firstChild;z;){var q=z.nextSibling,oe=z.nodeName;z[Pe]||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&z.rel.toLowerCase()==="stylesheet"||d.removeChild(z),z=q}}if(b===0){l.removeChild(C),Hc(s);return}b--}else d==="$"||d==="$?"||d==="$!"?b++:p=d.charCodeAt(0)-48;else p=0;d=C}while(d);Hc(s)}function Qg(l){var s=l.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var d=s;switch(s=s.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":Qg(d),Ke(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}l.removeChild(d)}}function vC(l,s,d,p){for(;l.nodeType===1;){var b=d;if(l.nodeName.toLowerCase()!==s.toLowerCase()){if(!p&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(p){if(!l[Pe])switch(s){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(C=l.getAttribute("rel"),C==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(C!==b.rel||l.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||l.getAttribute("title")!==(b.title==null?null:b.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(C=l.getAttribute("src"),(C!==(b.src==null?null:b.src)||l.getAttribute("type")!==(b.type==null?null:b.type)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&C&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(s==="input"&&l.type==="hidden"){var C=b.name==null?null:""+b.name;if(b.type==="hidden"&&l.getAttribute("name")===C)return l}else return l;if(l=so(l.nextSibling),l===null)break}return null}function EC(l,s,d){if(s==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=so(l.nextSibling),l===null))return null;return l}function Jg(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function xC(l,s){var d=l.ownerDocument;if(l.data!=="$?"||d.readyState==="complete")s();else{var p=function(){s(),d.removeEventListener("DOMContentLoaded",p)};d.addEventListener("DOMContentLoaded",p),l._reactRetry=p}}function so(l){for(;l!=null;l=l.nextSibling){var s=l.nodeType;if(s===1||s===3)break;if(s===8){if(s=l.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return l}var Xg=null;function kv(l){l=l.previousSibling;for(var s=0;l;){if(l.nodeType===8){var d=l.data;if(d==="$"||d==="$!"||d==="$?"){if(s===0)return l;s--}else d==="/$"&&s++}l=l.previousSibling}return null}function Iv(l,s,d){switch(s=Qu(d),l){case"html":if(l=s.documentElement,!l)throw Error(n(452));return l;case"head":if(l=s.head,!l)throw Error(n(453));return l;case"body":if(l=s.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function Bc(l){for(var s=l.attributes;s.length;)l.removeAttributeNode(s[0]);Ke(l)}var Fr=new Map,Mv=new Set;function Ju(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Qo=U.d;U.d={f:wC,r:SC,D:CC,C:NC,L:_C,m:kC,X:MC,S:IC,M:AC};function wC(){var l=Qo.f(),s=$u();return l||s}function SC(l){var s=Kt(l);s!==null&&s.tag===5&&s.type==="form"?Vb(s):Qo.r(l)}var yi=typeof document>"u"?null:document;function Av(l,s,d){var p=yi;if(p&&typeof s=="string"&&s){var b=et(s);b='link[rel="'+l+'"][href="'+b+'"]',typeof d=="string"&&(b+='[crossorigin="'+d+'"]'),Mv.has(b)||(Mv.add(b),l={rel:l,crossOrigin:d,href:s},p.querySelector(b)===null&&(s=p.createElement("link"),Un(s,"link",l),sa(s),p.head.appendChild(s)))}}function CC(l){Qo.D(l),Av("dns-prefetch",l,null)}function NC(l,s){Qo.C(l,s),Av("preconnect",l,s)}function _C(l,s,d){Qo.L(l,s,d);var p=yi;if(p&&l&&s){var b='link[rel="preload"][as="'+et(s)+'"]';s==="image"&&d&&d.imageSrcSet?(b+='[imagesrcset="'+et(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(b+='[imagesizes="'+et(d.imageSizes)+'"]')):b+='[href="'+et(l)+'"]';var C=b;switch(s){case"style":C=bi(l);break;case"script":C=vi(l)}Fr.has(C)||(l=f({rel:"preload",href:s==="image"&&d&&d.imageSrcSet?void 0:l,as:s},d),Fr.set(C,l),p.querySelector(b)!==null||s==="style"&&p.querySelector(zc(C))||s==="script"&&p.querySelector(Oc(C))||(s=p.createElement("link"),Un(s,"link",l),sa(s),p.head.appendChild(s)))}}function kC(l,s){Qo.m(l,s);var d=yi;if(d&&l){var p=s&&typeof s.as=="string"?s.as:"script",b='link[rel="modulepreload"][as="'+et(p)+'"][href="'+et(l)+'"]',C=b;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=vi(l)}if(!Fr.has(C)&&(l=f({rel:"modulepreload",href:l},s),Fr.set(C,l),d.querySelector(b)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Oc(C)))return}p=d.createElement("link"),Un(p,"link",l),sa(p),d.head.appendChild(p)}}}function IC(l,s,d){Qo.S(l,s,d);var p=yi;if(p&&l){var b=La(p).hoistableStyles,C=bi(l);s=s||"default";var z=b.get(C);if(!z){var q={loading:0,preload:null};if(z=p.querySelector(zc(C)))q.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":s},d),(d=Fr.get(C))&&Kg(l,d);var oe=z=p.createElement("link");sa(oe),Un(oe,"link",l),oe._p=new Promise(function(Ee,De){oe.onload=Ee,oe.onerror=De}),oe.addEventListener("load",function(){q.loading|=1}),oe.addEventListener("error",function(){q.loading|=2}),q.loading|=4,Xu(z,s,p)}z={type:"stylesheet",instance:z,count:1,state:q},b.set(C,z)}}}function MC(l,s){Qo.X(l,s);var d=yi;if(d&&l){var p=La(d).hoistableScripts,b=vi(l),C=p.get(b);C||(C=d.querySelector(Oc(b)),C||(l=f({src:l,async:!0},s),(s=Fr.get(b))&&eh(l,s),C=d.createElement("script"),sa(C),Un(C,"link",l),d.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},p.set(b,C))}}function AC(l,s){Qo.M(l,s);var d=yi;if(d&&l){var p=La(d).hoistableScripts,b=vi(l),C=p.get(b);C||(C=d.querySelector(Oc(b)),C||(l=f({src:l,async:!0,type:"module"},s),(s=Fr.get(b))&&eh(l,s),C=d.createElement("script"),sa(C),Un(C,"link",l),d.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},p.set(b,C))}}function Dv(l,s,d,p){var b=(b=se.current)?Ju(b):null;if(!b)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(s=bi(d.href),d=La(b).hoistableStyles,p=d.get(s),p||(p={type:"style",instance:null,count:0,state:null},d.set(s,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){l=bi(d.href);var C=La(b).hoistableStyles,z=C.get(l);if(z||(b=b.ownerDocument||b,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(l,z),(C=b.querySelector(zc(l)))&&!C._p&&(z.instance=C,z.state.loading=5),Fr.has(l)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Fr.set(l,d),C||DC(b,l,d,z.state))),s&&p===null)throw Error(n(528,""));return z}if(s&&p!==null)throw Error(n(529,""));return null;case"script":return s=d.async,d=d.src,typeof d=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=vi(d),d=La(b).hoistableScripts,p=d.get(s),p||(p={type:"script",instance:null,count:0,state:null},d.set(s,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function bi(l){return'href="'+et(l)+'"'}function zc(l){return'link[rel="stylesheet"]['+l+"]"}function Rv(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function DC(l,s,d,p){l.querySelector('link[rel="preload"][as="style"]['+s+"]")?p.loading=1:(s=l.createElement("link"),p.preload=s,s.addEventListener("load",function(){return p.loading|=1}),s.addEventListener("error",function(){return p.loading|=2}),Un(s,"link",d),sa(s),l.head.appendChild(s))}function vi(l){return'[src="'+et(l)+'"]'}function Oc(l){return"script[async]"+l}function Tv(l,s,d){if(s.count++,s.instance===null)switch(s.type){case"style":var p=l.querySelector('style[data-href~="'+et(d.href)+'"]');if(p)return s.instance=p,sa(p),p;var b=f({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return p=(l.ownerDocument||l).createElement("style"),sa(p),Un(p,"style",b),Xu(p,d.precedence,l),s.instance=p;case"stylesheet":b=bi(d.href);var C=l.querySelector(zc(b));if(C)return s.state.loading|=4,s.instance=C,sa(C),C;p=Rv(d),(b=Fr.get(b))&&Kg(p,b),C=(l.ownerDocument||l).createElement("link"),sa(C);var z=C;return z._p=new Promise(function(q,oe){z.onload=q,z.onerror=oe}),Un(C,"link",p),s.state.loading|=4,Xu(C,d.precedence,l),s.instance=C;case"script":return C=vi(d.src),(b=l.querySelector(Oc(C)))?(s.instance=b,sa(b),b):(p=d,(b=Fr.get(C))&&(p=f({},d),eh(p,b)),l=l.ownerDocument||l,b=l.createElement("script"),sa(b),Un(b,"link",p),l.head.appendChild(b),s.instance=b);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(p=s.instance,s.state.loading|=4,Xu(p,d.precedence,l));return s.instance}function Xu(l,s,d){for(var p=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=p.length?p[p.length-1]:null,C=b,z=0;z<p.length;z++){var q=p[z];if(q.dataset.precedence===s)C=q;else if(C!==b)break}C?C.parentNode.insertBefore(l,C.nextSibling):(s=d.nodeType===9?d.head:d,s.insertBefore(l,s.firstChild))}function Kg(l,s){l.crossOrigin==null&&(l.crossOrigin=s.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=s.referrerPolicy),l.title==null&&(l.title=s.title)}function eh(l,s){l.crossOrigin==null&&(l.crossOrigin=s.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=s.referrerPolicy),l.integrity==null&&(l.integrity=s.integrity)}var Ku=null;function Pv(l,s,d){if(Ku===null){var p=new Map,b=Ku=new Map;b.set(d,p)}else b=Ku,p=b.get(d),p||(p=new Map,b.set(d,p));if(p.has(l))return p;for(p.set(l,null),d=d.getElementsByTagName(l),b=0;b<d.length;b++){var C=d[b];if(!(C[Pe]||C[Xt]||l==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var z=C.getAttribute(s)||"";z=l+z;var q=p.get(z);q?q.push(C):p.set(z,[C])}}return p}function Lv(l,s,d){l=l.ownerDocument||l,l.head.insertBefore(d,s==="title"?l.querySelector("head > title"):null)}function RC(l,s,d){if(d===1||s.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return l=s.disabled,typeof s.precedence=="string"&&l==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Bv(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Fc=null;function TC(){}function PC(l,s,d){if(Fc===null)throw Error(n(475));var p=Fc;if(s.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var b=bi(d.href),C=l.querySelector(zc(b));if(C){l=C._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(p.count++,p=em.bind(p),l.then(p,p)),s.state.loading|=4,s.instance=C,sa(C);return}C=l.ownerDocument||l,d=Rv(d),(b=Fr.get(b))&&Kg(d,b),C=C.createElement("link"),sa(C);var z=C;z._p=new Promise(function(q,oe){z.onload=q,z.onerror=oe}),Un(C,"link",d),s.instance=C}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(s,l),(l=s.state.preload)&&(s.state.loading&3)===0&&(p.count++,s=em.bind(p),l.addEventListener("load",s),l.addEventListener("error",s))}}function LC(){if(Fc===null)throw Error(n(475));var l=Fc;return l.stylesheets&&l.count===0&&th(l,l.stylesheets),0<l.count?function(s){var d=setTimeout(function(){if(l.stylesheets&&th(l,l.stylesheets),l.unsuspend){var p=l.unsuspend;l.unsuspend=null,p()}},6e4);return l.unsuspend=s,function(){l.unsuspend=null,clearTimeout(d)}}:null}function em(){if(this.count--,this.count===0){if(this.stylesheets)th(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var tm=null;function th(l,s){l.stylesheets=null,l.unsuspend!==null&&(l.count++,tm=new Map,s.forEach(BC,l),tm=null,em.call(l))}function BC(l,s){if(!(s.state.loading&4)){var d=tm.get(l);if(d)var p=d.get(null);else{d=new Map,tm.set(l,d);for(var b=l.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<b.length;C++){var z=b[C];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(d.set(z.dataset.precedence,z),p=z)}p&&d.set(null,p)}b=s.instance,z=b.getAttribute("data-precedence"),C=d.get(z)||p,C===p&&d.set(null,b),d.set(z,b),this.count++,p=em.bind(this),b.addEventListener("load",p),b.addEventListener("error",p),C?C.parentNode.insertBefore(b,C.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(b,l.firstChild)),s.state.loading|=4}}var Wc={$$typeof:M,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function zC(l,s,d,p,b,C,z,q){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yt(0),this.hiddenUpdates=Yt(null),this.identifierPrefix=p,this.onUncaughtError=b,this.onCaughtError=C,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function zv(l,s,d,p,b,C,z,q,oe,Ee,De,Oe){return l=new zC(l,s,d,z,q,oe,Ee,Oe),s=1,C===!0&&(s|=24),C=Er(3,null,null,s),l.current=C,C.stateNode=l,s=Bf(),s.refCount++,l.pooledCache=s,s.refCount++,C.memoizedState={element:p,isDehydrated:d,cache:s},Wf(C),l}function Ov(l){return l?(l=Qs,l):Qs}function Fv(l,s,d,p,b,C){b=Ov(b),p.context===null?p.context=b:p.pendingContext=b,p=yl(s),p.payload={element:d},C=C===void 0?null:C,C!==null&&(p.callback=C),d=bl(l,p,s),d!==null&&(Nr(d,l,s),hc(d,l,s))}function Wv(l,s){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var d=l.retryLane;l.retryLane=d!==0&&d<s?d:s}}function ah(l,s){Wv(l,s),(l=l.alternate)&&Wv(l,s)}function Uv(l){if(l.tag===13){var s=Vs(l,67108864);s!==null&&Nr(s,l,67108864),ah(l,67108864)}}var am=!0;function OC(l,s,d,p){var b=A.T;A.T=null;var C=U.p;try{U.p=2,nh(l,s,d,p)}finally{U.p=C,A.T=b}}function FC(l,s,d,p){var b=A.T;A.T=null;var C=U.p;try{U.p=8,nh(l,s,d,p)}finally{U.p=C,A.T=b}}function nh(l,s,d,p){if(am){var b=rh(p);if(b===null)Hg(l,s,p,nm,d),jv(l,p);else if(UC(b,l,s,d,p))p.stopPropagation();else if(jv(l,p),s&4&&-1<WC.indexOf(l)){for(;b!==null;){var C=Kt(b);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var z=Qe(C.pendingLanes);if(z!==0){var q=C;for(q.pendingLanes|=2,q.entangledLanes|=2;z;){var oe=1<<31-Fe(z);q.entanglements[1]|=oe,z&=~oe}vo(C),(xa&6)===0&&(Wu=ft()+500,Tc(0))}}break;case 13:q=Vs(C,2),q!==null&&Nr(q,C,2),$u(),ah(C,2)}if(C=rh(p),C===null&&Hg(l,s,p,nm,d),C===b)break;b=C}b!==null&&p.stopPropagation()}else Hg(l,s,p,null,d)}}function rh(l){return l=la(l),oh(l)}var nm=null;function oh(l){if(nm=null,l=mt(l),l!==null){var s=i(l);if(s===null)l=null;else{var d=s.tag;if(d===13){if(l=c(s),l!==null)return l;l=null}else if(d===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;l=null}else s!==l&&(l=null)}}return nm=l,null}function $v(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ft()){case ra:return 2;case Wt:return 8;case he:case bt:return 32;case $:return 268435456;default:return 32}default:return 32}}var lh=!1,Dl=null,Rl=null,Tl=null,Uc=new Map,$c=new Map,Pl=[],WC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jv(l,s){switch(l){case"focusin":case"focusout":Dl=null;break;case"dragenter":case"dragleave":Rl=null;break;case"mouseover":case"mouseout":Tl=null;break;case"pointerover":case"pointerout":Uc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":$c.delete(s.pointerId)}}function jc(l,s,d,p,b,C){return l===null||l.nativeEvent!==C?(l={blockedOn:s,domEventName:d,eventSystemFlags:p,nativeEvent:C,targetContainers:[b]},s!==null&&(s=Kt(s),s!==null&&Uv(s)),l):(l.eventSystemFlags|=p,s=l.targetContainers,b!==null&&s.indexOf(b)===-1&&s.push(b),l)}function UC(l,s,d,p,b){switch(s){case"focusin":return Dl=jc(Dl,l,s,d,p,b),!0;case"dragenter":return Rl=jc(Rl,l,s,d,p,b),!0;case"mouseover":return Tl=jc(Tl,l,s,d,p,b),!0;case"pointerover":var C=b.pointerId;return Uc.set(C,jc(Uc.get(C)||null,l,s,d,p,b)),!0;case"gotpointercapture":return C=b.pointerId,$c.set(C,jc($c.get(C)||null,l,s,d,p,b)),!0}return!1}function Hv(l){var s=mt(l.target);if(s!==null){var d=i(s);if(d!==null){if(s=d.tag,s===13){if(s=c(d),s!==null){l.blockedOn=s,Rr(l.priority,function(){if(d.tag===13){var p=Cr();p=ln(p);var b=Vs(d,p);b!==null&&Nr(b,d,p),ah(d,p)}});return}}else if(s===3&&d.stateNode.current.memoizedState.isDehydrated){l.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}l.blockedOn=null}function rm(l){if(l.blockedOn!==null)return!1;for(var s=l.targetContainers;0<s.length;){var d=rh(l.nativeEvent);if(d===null){d=l.nativeEvent;var p=new d.constructor(d.type,d);to=p,d.target.dispatchEvent(p),to=null}else return s=Kt(d),s!==null&&Uv(s),l.blockedOn=d,!1;s.shift()}return!0}function Yv(l,s,d){rm(l)&&d.delete(s)}function $C(){lh=!1,Dl!==null&&rm(Dl)&&(Dl=null),Rl!==null&&rm(Rl)&&(Rl=null),Tl!==null&&rm(Tl)&&(Tl=null),Uc.forEach(Yv),$c.forEach(Yv)}function om(l,s){l.blockedOn===s&&(l.blockedOn=null,lh||(lh=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,$C)))}var lm=null;function qv(l){lm!==l&&(lm=l,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){lm===l&&(lm=null);for(var s=0;s<l.length;s+=3){var d=l[s],p=l[s+1],b=l[s+2];if(typeof p!="function"){if(oh(p||d)===null)continue;break}var C=Kt(d);C!==null&&(l.splice(s,3),s-=3,og(C,{pending:!0,data:b,method:d.method,action:p},p,b))}}))}function Hc(l){function s(oe){return om(oe,l)}Dl!==null&&om(Dl,l),Rl!==null&&om(Rl,l),Tl!==null&&om(Tl,l),Uc.forEach(s),$c.forEach(s);for(var d=0;d<Pl.length;d++){var p=Pl[d];p.blockedOn===l&&(p.blockedOn=null)}for(;0<Pl.length&&(d=Pl[0],d.blockedOn===null);)Hv(d),d.blockedOn===null&&Pl.shift();if(d=(l.ownerDocument||l).$$reactFormReplay,d!=null)for(p=0;p<d.length;p+=3){var b=d[p],C=d[p+1],z=b[ga]||null;if(typeof C=="function")z||qv(d);else if(z){var q=null;if(C&&C.hasAttribute("formAction")){if(b=C,z=C[ga]||null)q=z.formAction;else if(oh(b)!==null)continue}else q=z.action;typeof q=="function"?d[p+1]=q:(d.splice(p,3),p-=3),qv(d)}}}function sh(l){this._internalRoot=l}sm.prototype.render=sh.prototype.render=function(l){var s=this._internalRoot;if(s===null)throw Error(n(409));var d=s.current,p=Cr();Fv(d,p,l,s,null,null)},sm.prototype.unmount=sh.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var s=l.containerInfo;Fv(l.current,2,null,l,null,null),$u(),s[Nn]=null}};function sm(l){this._internalRoot=l}sm.prototype.unstable_scheduleHydration=function(l){if(l){var s=cr();l={blockedOn:null,target:l,priority:s};for(var d=0;d<Pl.length&&s!==0&&s<Pl[d].priority;d++);Pl.splice(d,0,l),d===0&&Hv(l)}};var Gv=r.version;if(Gv!=="19.1.0")throw Error(n(527,Gv,"19.1.0"));U.findDOMNode=function(l){var s=l._reactInternals;if(s===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=m(s),l=l!==null?g(l):null,l=l===null?null:l.stateNode,l};var jC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var im=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!im.isDisabled&&im.supportsFiber)try{ce=im.inject(jC),ze=im}catch{}}return Yc.createRoot=function(l,s){if(!o(l))throw Error(n(299));var d=!1,p="",b=c1,C=d1,z=u1,q=null;return s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onUncaughtError!==void 0&&(b=s.onUncaughtError),s.onCaughtError!==void 0&&(C=s.onCaughtError),s.onRecoverableError!==void 0&&(z=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(q=s.unstable_transitionCallbacks)),s=zv(l,1,!1,null,null,d,p,b,C,z,q,null),l[Nn]=s.current,jg(l),new sh(s)},Yc.hydrateRoot=function(l,s,d){if(!o(l))throw Error(n(299));var p=!1,b="",C=c1,z=d1,q=u1,oe=null,Ee=null;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(C=d.onUncaughtError),d.onCaughtError!==void 0&&(z=d.onCaughtError),d.onRecoverableError!==void 0&&(q=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(oe=d.unstable_transitionCallbacks),d.formState!==void 0&&(Ee=d.formState)),s=zv(l,1,!0,s,d??null,p,b,C,z,q,oe,Ee),s.context=Ov(null),d=s.current,p=Cr(),p=ln(p),b=yl(p),b.callback=null,bl(d,b,p),d=p,s.current.lanes=d,ua(s,d),vo(s),l[Nn]=s.current,jg(l),new sm(s)},Yc.version="19.1.0",Yc}var aE;function a3(){if(aE)return ch.exports;aE=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(r){console.error(r)}}return a(),ch.exports=t3(),ch.exports}var n3=a3();const r3=Up(n3);var qc={},nE;function o3(){if(nE)return qc;nE=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.parse=c,qc.serialize=g;const a=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,i=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function c(v,S){const w=new i,x=v.length;if(x<2)return w;const k=(S==null?void 0:S.decode)||f;let E=0;do{const I=v.indexOf("=",E);if(I===-1)break;const M=v.indexOf(";",E),N=M===-1?x:M;if(I>N){E=v.lastIndexOf(";",I-1)+1;continue}const _=u(v,E,I),P=m(v,I,_),B=v.slice(_,P);if(w[B]===void 0){let R=u(v,I+1,N),W=m(v,N,R);const L=k(v.slice(R,W));w[B]=L}E=N+1}while(E<x);return w}function u(v,S,w){do{const x=v.charCodeAt(S);if(x!==32&&x!==9)return S}while(++S<w);return w}function m(v,S,w){for(;S>w;){const x=v.charCodeAt(--S);if(x!==32&&x!==9)return S+1}return w}function g(v,S,w){const x=(w==null?void 0:w.encode)||encodeURIComponent;if(!a.test(v))throw new TypeError(`argument name is invalid: ${v}`);const k=x(S);if(!r.test(k))throw new TypeError(`argument val is invalid: ${S}`);let E=v+"="+k;if(!w)return E;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);E+="; Max-Age="+w.maxAge}if(w.domain){if(!t.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);E+="; Domain="+w.domain}if(w.path){if(!n.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);E+="; Path="+w.path}if(w.expires){if(!y(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);E+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(E+="; HttpOnly"),w.secure&&(E+="; Secure"),w.partitioned&&(E+="; Partitioned"),w.priority)switch(typeof w.priority=="string"?w.priority.toLowerCase():void 0){case"low":E+="; Priority=Low";break;case"medium":E+="; Priority=Medium";break;case"high":E+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":E+="; SameSite=Strict";break;case"lax":E+="; SameSite=Lax";break;case"none":E+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return E}function f(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function y(v){return o.call(v)==="[object Date]"}return qc}o3();var rE="popstate";function l3(a={}){function r(o,i){let{pathname:c="/",search:u="",hash:m=""}=Os(o.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),n0("",{pathname:c,search:u,hash:m},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(o,i){let c=o.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let m=o.location.href,g=m.indexOf("#");u=g===-1?m:m.slice(0,g)}return u+"#"+(typeof i=="string"?i:_d(i))}function n(o,i){Dr(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return i3(r,t,n,a)}function Za(a,r){if(a===!1||a===null||typeof a>"u")throw new Error(r)}function Dr(a,r){if(!a){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function s3(){return Math.random().toString(36).substring(2,10)}function oE(a,r){return{usr:a.state,key:a.key,idx:r}}function n0(a,r,t=null,n){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof r=="string"?Os(r):r,state:t,key:r&&r.key||n||s3()}}function _d({pathname:a="/",search:r="",hash:t=""}){return r&&r!=="?"&&(a+=r.charAt(0)==="?"?r:"?"+r),t&&t!=="#"&&(a+=t.charAt(0)==="#"?t:"#"+t),a}function Os(a){let r={};if(a){let t=a.indexOf("#");t>=0&&(r.hash=a.substring(t),a=a.substring(0,t));let n=a.indexOf("?");n>=0&&(r.search=a.substring(n),a=a.substring(0,n)),a&&(r.pathname=a)}return r}function i3(a,r,t,n={}){let{window:o=document.defaultView,v5Compat:i=!1}=n,c=o.history,u="POP",m=null,g=f();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function f(){return(c.state||{idx:null}).idx}function y(){u="POP";let k=f(),E=k==null?null:k-g;g=k,m&&m({action:u,location:x.location,delta:E})}function v(k,E){u="PUSH";let I=n0(x.location,k,E);t&&t(I,k),g=f()+1;let M=oE(I,g),N=x.createHref(I);try{c.pushState(M,"",N)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;o.location.assign(N)}i&&m&&m({action:u,location:x.location,delta:1})}function S(k,E){u="REPLACE";let I=n0(x.location,k,E);t&&t(I,k),g=f();let M=oE(I,g),N=x.createHref(I);c.replaceState(M,"",N),i&&m&&m({action:u,location:x.location,delta:0})}function w(k){return c3(k)}let x={get action(){return u},get location(){return a(o,c)},listen(k){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(rE,y),m=k,()=>{o.removeEventListener(rE,y),m=null}},createHref(k){return r(o,k)},createURL:w,encodeLocation(k){let E=w(k);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:S,go(k){return c.go(k)}};return x}function c3(a,r=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Za(t,"No window.location.(origin|href) available to create URL");let n=typeof a=="string"?a:_d(a);return n=n.replace(/ $/,"%20"),!r&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function px(a,r,t="/"){return d3(a,r,t,!1)}function d3(a,r,t,n){let o=typeof r=="string"?Os(r):r,i=cl(o.pathname||"/",t);if(i==null)return null;let c=fx(a);u3(c);let u=null;for(let m=0;u==null&&m<c.length;++m){let g=w3(i);u=E3(c[m],g,n)}return u}function fx(a,r=[],t=[],n=""){let o=(i,c,u)=>{let m={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:c,route:i};m.relativePath.startsWith("/")&&(Za(m.relativePath.startsWith(n),`Absolute route path "${m.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(n.length));let g=al([n,m.relativePath]),f=t.concat(m);i.children&&i.children.length>0&&(Za(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),fx(i.children,r,f,g)),!(i.path==null&&!i.index)&&r.push({path:g,score:b3(g,i.index),routesMeta:f})};return a.forEach((i,c)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))o(i,c);else for(let m of gx(i.path))o(i,c,m)}),r}function gx(a){let r=a.split("/");if(r.length===0)return[];let[t,...n]=r,o=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return o?[i,""]:[i];let c=gx(n.join("/")),u=[];return u.push(...c.map(m=>m===""?i:[i,m].join("/"))),o&&u.push(...c),u.map(m=>a.startsWith("/")&&m===""?"/":m)}function u3(a){a.sort((r,t)=>r.score!==t.score?t.score-r.score:v3(r.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var m3=/^:[\w-]+$/,p3=3,f3=2,g3=1,h3=10,y3=-2,lE=a=>a==="*";function b3(a,r){let t=a.split("/"),n=t.length;return t.some(lE)&&(n+=y3),r&&(n+=f3),t.filter(o=>!lE(o)).reduce((o,i)=>o+(m3.test(i)?p3:i===""?g3:h3),n)}function v3(a,r){return a.length===r.length&&a.slice(0,-1).every((n,o)=>n===r[o])?a[a.length-1]-r[r.length-1]:0}function E3(a,r,t=!1){let{routesMeta:n}=a,o={},i="/",c=[];for(let u=0;u<n.length;++u){let m=n[u],g=u===n.length-1,f=i==="/"?r:r.slice(i.length)||"/",y=Hm({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},f),v=m.route;if(!y&&g&&t&&!n[n.length-1].route.index&&(y=Hm({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},f)),!y)return null;Object.assign(o,y.params),c.push({params:o,pathname:al([i,y.pathname]),pathnameBase:_3(al([i,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(i=al([i,y.pathnameBase]))}return c}function Hm(a,r){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[t,n]=x3(a.path,a.caseSensitive,a.end),o=r.match(t);if(!o)return null;let i=o[0],c=i.replace(/(.)\/+$/,"$1"),u=o.slice(1);return{params:n.reduce((g,{paramName:f,isOptional:y},v)=>{if(f==="*"){let w=u[v]||"";c=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const S=u[v];return y&&!S?g[f]=void 0:g[f]=(S||"").replace(/%2F/g,"/"),g},{}),pathname:i,pathnameBase:c,pattern:a}}function x3(a,r=!1,t=!0){Dr(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let n=[],o="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,m)=>(n.push({paramName:u,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(n.push({paramName:"*"}),o+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":a!==""&&a!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,r?void 0:"i"),n]}function w3(a){try{return a.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Dr(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),a}}function cl(a,r){if(r==="/")return a;if(!a.toLowerCase().startsWith(r.toLowerCase()))return null;let t=r.endsWith("/")?r.length-1:r.length,n=a.charAt(t);return n&&n!=="/"?null:a.slice(t)||"/"}function S3(a,r="/"){let{pathname:t,search:n="",hash:o=""}=typeof a=="string"?Os(a):a;return{pathname:t?t.startsWith("/")?t:C3(t,r):r,search:k3(n),hash:I3(o)}}function C3(a,r){let t=r.replace(/\/+$/,"").split("/");return a.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function ph(a,r,t,n){return`Cannot include a '${a}' character in a manually specified \`to.${r}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function N3(a){return a.filter((r,t)=>t===0||r.route.path&&r.route.path.length>0)}function $0(a){let r=N3(a);return r.map((t,n)=>n===r.length-1?t.pathname:t.pathnameBase)}function j0(a,r,t,n=!1){let o;typeof a=="string"?o=Os(a):(o={...a},Za(!o.pathname||!o.pathname.includes("?"),ph("?","pathname","search",o)),Za(!o.pathname||!o.pathname.includes("#"),ph("#","pathname","hash",o)),Za(!o.search||!o.search.includes("#"),ph("#","search","hash",o)));let i=a===""||o.pathname==="",c=i?"/":o.pathname,u;if(c==null)u=t;else{let y=r.length-1;if(!n&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;o.pathname=v.join("/")}u=y>=0?r[y]:"/"}let m=S3(o,u),g=c&&c!=="/"&&c.endsWith("/"),f=(i||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||f)&&(m.pathname+="/"),m}var al=a=>a.join("/").replace(/\/\/+/g,"/"),_3=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),k3=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,I3=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function M3(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}var hx=["POST","PUT","PATCH","DELETE"];new Set(hx);var A3=["GET",...hx];new Set(A3);var Vi=h.createContext(null);Vi.displayName="DataRouter";var $p=h.createContext(null);$p.displayName="DataRouterState";var yx=h.createContext({isTransitioning:!1});yx.displayName="ViewTransition";var D3=h.createContext(new Map);D3.displayName="Fetchers";var R3=h.createContext(null);R3.displayName="Await";var po=h.createContext(null);po.displayName="Navigation";var zd=h.createContext(null);zd.displayName="Location";var Ao=h.createContext({outlet:null,matches:[],isDataRoute:!1});Ao.displayName="Route";var H0=h.createContext(null);H0.displayName="RouteError";function T3(a,{relative:r}={}){Za(Qi(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=h.useContext(po),{hash:o,pathname:i,search:c}=Od(a,{relative:r}),u=i;return t!=="/"&&(u=i==="/"?t:al([t,i])),n.createHref({pathname:u,search:c,hash:o})}function Qi(){return h.useContext(zd)!=null}function fo(){return Za(Qi(),"useLocation() may be used only in the context of a <Router> component."),h.useContext(zd).location}var bx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vx(a){h.useContext(po).static||h.useLayoutEffect(a)}function er(){let{isDataRoute:a}=h.useContext(Ao);return a?q3():P3()}function P3(){Za(Qi(),"useNavigate() may be used only in the context of a <Router> component.");let a=h.useContext(Vi),{basename:r,navigator:t}=h.useContext(po),{matches:n}=h.useContext(Ao),{pathname:o}=fo(),i=JSON.stringify($0(n)),c=h.useRef(!1);return vx(()=>{c.current=!0}),h.useCallback((m,g={})=>{if(Dr(c.current,bx),!c.current)return;if(typeof m=="number"){t.go(m);return}let f=j0(m,JSON.parse(i),o,g.relative==="path");a==null&&r!=="/"&&(f.pathname=f.pathname==="/"?r:al([r,f.pathname])),(g.replace?t.replace:t.push)(f,g.state,g)},[r,t,i,o,a])}h.createContext(null);function Od(a,{relative:r}={}){let{matches:t}=h.useContext(Ao),{pathname:n}=fo(),o=JSON.stringify($0(t));return h.useMemo(()=>j0(a,JSON.parse(o),n,r==="path"),[a,o,n,r])}function L3(a,r){return Ex(a,r)}function Ex(a,r,t,n){var E;Za(Qi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=h.useContext(po),{matches:i}=h.useContext(Ao),c=i[i.length-1],u=c?c.params:{},m=c?c.pathname:"/",g=c?c.pathnameBase:"/",f=c&&c.route;{let I=f&&f.path||"";xx(m,!f||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let y=fo(),v;if(r){let I=typeof r=="string"?Os(r):r;Za(g==="/"||((E=I.pathname)==null?void 0:E.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${I.pathname}" was given in the \`location\` prop.`),v=I}else v=y;let S=v.pathname||"/",w=S;if(g!=="/"){let I=g.replace(/^\//,"").split("/");w="/"+S.replace(/^\//,"").split("/").slice(I.length).join("/")}let x=px(a,{pathname:w});Dr(f||x!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Dr(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=W3(x&&x.map(I=>Object.assign({},I,{params:Object.assign({},u,I.params),pathname:al([g,o.encodeLocation?o.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?g:al([g,o.encodeLocation?o.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),i,t,n);return r&&k?h.createElement(zd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},k):k}function B3(){let a=Y3(),r=M3(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),t=a instanceof Error?a.stack:null,n="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",a),c=h.createElement(h.Fragment,null,h.createElement("p",null,"💿 Hey developer 👋"),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",h.createElement("code",{style:i},"ErrorBoundary")," or"," ",h.createElement("code",{style:i},"errorElement")," prop on your route.")),h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},r),t?h.createElement("pre",{style:o},t):null,c)}var z3=h.createElement(B3,null),O3=class extends h.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,r){return r.location!==a.location||r.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:r.error,location:r.location,revalidation:a.revalidation||r.revalidation}}componentDidCatch(a,r){console.error("React Router caught the following error during render",a,r)}render(){return this.state.error!==void 0?h.createElement(Ao.Provider,{value:this.props.routeContext},h.createElement(H0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function F3({routeContext:a,match:r,children:t}){let n=h.useContext(Vi);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),h.createElement(Ao.Provider,{value:a},t)}function W3(a,r=[],t=null,n=null){if(a==null){if(!t)return null;if(t.errors)a=t.matches;else if(r.length===0&&!t.initialized&&t.matches.length>0)a=t.matches;else return null}let o=a,i=t==null?void 0:t.errors;if(i!=null){let m=o.findIndex(g=>g.route.id&&(i==null?void 0:i[g.route.id])!==void 0);Za(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,u=-1;if(t)for(let m=0;m<o.length;m++){let g=o[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=m),g.route.id){let{loaderData:f,errors:y}=t,v=g.route.loader&&!f.hasOwnProperty(g.route.id)&&(!y||y[g.route.id]===void 0);if(g.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((m,g,f)=>{let y,v=!1,S=null,w=null;t&&(y=i&&g.route.id?i[g.route.id]:void 0,S=g.route.errorElement||z3,c&&(u<0&&f===0?(xx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,w=null):u===f&&(v=!0,w=g.route.hydrateFallbackElement||null)));let x=r.concat(o.slice(0,f+1)),k=()=>{let E;return y?E=S:v?E=w:g.route.Component?E=h.createElement(g.route.Component,null):g.route.element?E=g.route.element:E=m,h.createElement(F3,{match:g,routeContext:{outlet:m,matches:x,isDataRoute:t!=null},children:E})};return t&&(g.route.ErrorBoundary||g.route.errorElement||f===0)?h.createElement(O3,{location:t.location,revalidation:t.revalidation,component:S,error:y,children:k(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):k()},null)}function Y0(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function U3(a){let r=h.useContext(Vi);return Za(r,Y0(a)),r}function $3(a){let r=h.useContext($p);return Za(r,Y0(a)),r}function j3(a){let r=h.useContext(Ao);return Za(r,Y0(a)),r}function q0(a){let r=j3(a),t=r.matches[r.matches.length-1];return Za(t.route.id,`${a} can only be used on routes that contain a unique "id"`),t.route.id}function H3(){return q0("useRouteId")}function Y3(){var n;let a=h.useContext(H0),r=$3("useRouteError"),t=q0("useRouteError");return a!==void 0?a:(n=r.errors)==null?void 0:n[t]}function q3(){let{router:a}=U3("useNavigate"),r=q0("useNavigate"),t=h.useRef(!1);return vx(()=>{t.current=!0}),h.useCallback(async(o,i={})=>{Dr(t.current,bx),t.current&&(typeof o=="number"?a.navigate(o):await a.navigate(o,{fromRouteId:r,...i}))},[a,r])}var sE={};function xx(a,r,t){!r&&!sE[a]&&(sE[a]=!0,Dr(!1,t))}h.memo(G3);function G3({routes:a,future:r,state:t}){return Ex(a,void 0,t,r)}function io({to:a,replace:r,state:t,relative:n}){Za(Qi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=h.useContext(po);Dr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=h.useContext(Ao),{pathname:c}=fo(),u=er(),m=j0(a,$0(i),c,n==="path"),g=JSON.stringify(m);return h.useEffect(()=>{u(JSON.parse(g),{replace:r,state:t,relative:n})},[u,g,n,r,t]),null}function Xa(a){Za(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Z3({basename:a="/",children:r=null,location:t,navigationType:n="POP",navigator:o,static:i=!1}){Za(!Qi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=a.replace(/^\/*/,"/"),u=h.useMemo(()=>({basename:c,navigator:o,static:i,future:{}}),[c,o,i]);typeof t=="string"&&(t=Os(t));let{pathname:m="/",search:g="",hash:f="",state:y=null,key:v="default"}=t,S=h.useMemo(()=>{let w=cl(m,c);return w==null?null:{location:{pathname:w,search:g,hash:f,state:y,key:v},navigationType:n}},[c,m,g,f,y,v,n]);return Dr(S!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${f}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:h.createElement(po.Provider,{value:u},h.createElement(zd.Provider,{children:r,value:S}))}function wx({children:a,location:r}){return L3(r0(a),r)}function r0(a,r=[]){let t=[];return h.Children.forEach(a,(n,o)=>{if(!h.isValidElement(n))return;let i=[...r,o];if(n.type===h.Fragment){t.push.apply(t,r0(n.props.children,i));return}Za(n.type===Xa,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Za(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=r0(n.props.children,i)),t.push(c)}),t}var Mm="get",Am="application/x-www-form-urlencoded";function jp(a){return a!=null&&typeof a.tagName=="string"}function V3(a){return jp(a)&&a.tagName.toLowerCase()==="button"}function Q3(a){return jp(a)&&a.tagName.toLowerCase()==="form"}function J3(a){return jp(a)&&a.tagName.toLowerCase()==="input"}function X3(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function K3(a,r){return a.button===0&&(!r||r==="_self")&&!X3(a)}function o0(a=""){return new URLSearchParams(typeof a=="string"||Array.isArray(a)||a instanceof URLSearchParams?a:Object.keys(a).reduce((r,t)=>{let n=a[t];return r.concat(Array.isArray(n)?n.map(o=>[t,o]):[[t,n]])},[]))}function e4(a,r){let t=o0(a);return r&&r.forEach((n,o)=>{t.has(o)||r.getAll(o).forEach(i=>{t.append(o,i)})}),t}var cm=null;function t4(){if(cm===null)try{new FormData(document.createElement("form"),0),cm=!1}catch{cm=!0}return cm}var a4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fh(a){return a!=null&&!a4.has(a)?(Dr(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Am}"`),null):a}function n4(a,r){let t,n,o,i,c;if(Q3(a)){let u=a.getAttribute("action");n=u?cl(u,r):null,t=a.getAttribute("method")||Mm,o=fh(a.getAttribute("enctype"))||Am,i=new FormData(a)}else if(V3(a)||J3(a)&&(a.type==="submit"||a.type==="image")){let u=a.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=a.getAttribute("formaction")||u.getAttribute("action");if(n=m?cl(m,r):null,t=a.getAttribute("formmethod")||u.getAttribute("method")||Mm,o=fh(a.getAttribute("formenctype"))||fh(u.getAttribute("enctype"))||Am,i=new FormData(u,a),!t4()){let{name:g,type:f,value:y}=a;if(f==="image"){let v=g?`${g}.`:"";i.append(`${v}x`,"0"),i.append(`${v}y`,"0")}else g&&i.append(g,y)}}else{if(jp(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Mm,n=null,o=Am,c=a}return i&&o==="text/plain"&&(c=i,i=void 0),{action:n,method:t.toLowerCase(),encType:o,formData:i,body:c}}function G0(a,r){if(a===!1||a===null||typeof a>"u")throw new Error(r)}async function r4(a,r){if(a.id in r)return r[a.id];try{let t=await import(a.module);return r[a.id]=t,t}catch(t){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function o4(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function l4(a,r,t){let n=await Promise.all(a.map(async o=>{let i=r.routes[o.route.id];if(i){let c=await r4(i,t);return c.links?c.links():[]}return[]}));return d4(n.flat(1).filter(o4).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function iE(a,r,t,n,o,i){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,u=(m,g)=>{var f;return t[g].pathname!==m.pathname||((f=t[g].route.path)==null?void 0:f.endsWith("*"))&&t[g].params["*"]!==m.params["*"]};return i==="assets"?r.filter((m,g)=>c(m,g)||u(m,g)):i==="data"?r.filter((m,g)=>{var y;let f=n.routes[m.route.id];if(!f||!f.hasLoader)return!1;if(c(m,g)||u(m,g))return!0;if(m.route.shouldRevalidate){let v=m.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(a,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function s4(a,r,{includeHydrateFallback:t}={}){return i4(a.map(n=>{let o=r.routes[n.route.id];if(!o)return[];let i=[o.module];return o.clientActionModule&&(i=i.concat(o.clientActionModule)),o.clientLoaderModule&&(i=i.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(i=i.concat(o.hydrateFallbackModule)),o.imports&&(i=i.concat(o.imports)),i}).flat(1))}function i4(a){return[...new Set(a)]}function c4(a){let r={},t=Object.keys(a).sort();for(let n of t)r[n]=a[n];return r}function d4(a,r){let t=new Set;return new Set(r),a.reduce((n,o)=>{let i=JSON.stringify(c4(o));return t.has(i)||(t.add(i),n.push({key:i,link:o})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var u4=new Set([100,101,204,205]);function m4(a,r){let t=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return t.pathname==="/"?t.pathname="_root.data":r&&cl(t.pathname,r)==="/"?t.pathname=`${r.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Sx(){let a=h.useContext(Vi);return G0(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function p4(){let a=h.useContext($p);return G0(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var Z0=h.createContext(void 0);Z0.displayName="FrameworkContext";function Cx(){let a=h.useContext(Z0);return G0(a,"You must render this element inside a <HydratedRouter> element"),a}function f4(a,r){let t=h.useContext(Z0),[n,o]=h.useState(!1),[i,c]=h.useState(!1),{onFocus:u,onBlur:m,onMouseEnter:g,onMouseLeave:f,onTouchStart:y}=r,v=h.useRef(null);h.useEffect(()=>{if(a==="render"&&c(!0),a==="viewport"){let x=E=>{E.forEach(I=>{c(I.isIntersecting)})},k=new IntersectionObserver(x,{threshold:.5});return v.current&&k.observe(v.current),()=>{k.disconnect()}}},[a]),h.useEffect(()=>{if(n){let x=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(x)}}},[n]);let S=()=>{o(!0)},w=()=>{o(!1),c(!1)};return t?a!=="intent"?[i,v,{}]:[i,v,{onFocus:Gc(u,S),onBlur:Gc(m,w),onMouseEnter:Gc(g,S),onMouseLeave:Gc(f,w),onTouchStart:Gc(y,S)}]:[!1,v,{}]}function Gc(a,r){return t=>{a&&a(t),t.defaultPrevented||r(t)}}function g4({page:a,...r}){let{router:t}=Sx(),n=h.useMemo(()=>px(t.routes,a,t.basename),[t.routes,a,t.basename]);return n?h.createElement(y4,{page:a,matches:n,...r}):null}function h4(a){let{manifest:r,routeModules:t}=Cx(),[n,o]=h.useState([]);return h.useEffect(()=>{let i=!1;return l4(a,r,t).then(c=>{i||o(c)}),()=>{i=!0}},[a,r,t]),n}function y4({page:a,matches:r,...t}){let n=fo(),{manifest:o,routeModules:i}=Cx(),{basename:c}=Sx(),{loaderData:u,matches:m}=p4(),g=h.useMemo(()=>iE(a,r,m,o,n,"data"),[a,r,m,o,n]),f=h.useMemo(()=>iE(a,r,m,o,n,"assets"),[a,r,m,o,n]),y=h.useMemo(()=>{if(a===n.pathname+n.search+n.hash)return[];let w=new Set,x=!1;if(r.forEach(E=>{var M;let I=o.routes[E.route.id];!I||!I.hasLoader||(!g.some(N=>N.route.id===E.route.id)&&E.route.id in u&&((M=i[E.route.id])!=null&&M.shouldRevalidate)||I.hasClientLoader?x=!0:w.add(E.route.id))}),w.size===0)return[];let k=m4(a,c);return x&&w.size>0&&k.searchParams.set("_routes",r.filter(E=>w.has(E.route.id)).map(E=>E.route.id).join(",")),[k.pathname+k.search]},[c,u,n,o,g,r,a,i]),v=h.useMemo(()=>s4(f,o),[f,o]),S=h4(f);return h.createElement(h.Fragment,null,y.map(w=>h.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),v.map(w=>h.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),S.map(({key:w,link:x})=>h.createElement("link",{key:w,...x})))}function b4(...a){return r=>{a.forEach(t=>{typeof t=="function"?t(r):t!=null&&(t.current=r)})}}var Nx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Nx&&(window.__reactRouterVersion="7.6.1")}catch{}function _x({basename:a,children:r,window:t}){let n=h.useRef();n.current==null&&(n.current=l3({window:t,v5Compat:!0}));let o=n.current,[i,c]=h.useState({action:o.action,location:o.location}),u=h.useCallback(m=>{h.startTransition(()=>c(m))},[c]);return h.useLayoutEffect(()=>o.listen(u),[o,u]),h.createElement(Z3,{basename:a,children:r,location:i.location,navigationType:i.action,navigator:o})}var kx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ix=h.forwardRef(function({onClick:r,discover:t="render",prefetch:n="none",relative:o,reloadDocument:i,replace:c,state:u,target:m,to:g,preventScrollReset:f,viewTransition:y,...v},S){let{basename:w}=h.useContext(po),x=typeof g=="string"&&kx.test(g),k,E=!1;if(typeof g=="string"&&x&&(k=g,Nx))try{let W=new URL(window.location.href),L=g.startsWith("//")?new URL(W.protocol+g):new URL(g),F=cl(L.pathname,w);L.origin===W.origin&&F!=null?g=F+L.search+L.hash:E=!0}catch{Dr(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let I=T3(g,{relative:o}),[M,N,_]=f4(n,v),P=w4(g,{replace:c,state:u,target:m,preventScrollReset:f,relative:o,viewTransition:y});function B(W){r&&r(W),W.defaultPrevented||P(W)}let R=h.createElement("a",{...v,..._,href:k||I,onClick:E||i?r:B,ref:b4(S,N),target:m,"data-discover":!x&&t==="render"?"true":void 0});return M&&!x?h.createElement(h.Fragment,null,R,h.createElement(g4,{page:I})):R});Ix.displayName="Link";var v4=h.forwardRef(function({"aria-current":r="page",caseSensitive:t=!1,className:n="",end:o=!1,style:i,to:c,viewTransition:u,children:m,...g},f){let y=Od(c,{relative:g.relative}),v=fo(),S=h.useContext($p),{navigator:w,basename:x}=h.useContext(po),k=S!=null&&k4(y)&&u===!0,E=w.encodeLocation?w.encodeLocation(y).pathname:y.pathname,I=v.pathname,M=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(I=I.toLowerCase(),M=M?M.toLowerCase():null,E=E.toLowerCase()),M&&x&&(M=cl(M,x)||M);const N=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let _=I===E||!o&&I.startsWith(E)&&I.charAt(N)==="/",P=M!=null&&(M===E||!o&&M.startsWith(E)&&M.charAt(E.length)==="/"),B={isActive:_,isPending:P,isTransitioning:k},R=_?r:void 0,W;typeof n=="function"?W=n(B):W=[n,_?"active":null,P?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let L=typeof i=="function"?i(B):i;return h.createElement(Ix,{...g,"aria-current":R,className:W,ref:f,style:L,to:c,viewTransition:u},typeof m=="function"?m(B):m)});v4.displayName="NavLink";var E4=h.forwardRef(({discover:a="render",fetcherKey:r,navigate:t,reloadDocument:n,replace:o,state:i,method:c=Mm,action:u,onSubmit:m,relative:g,preventScrollReset:f,viewTransition:y,...v},S)=>{let w=N4(),x=_4(u,{relative:g}),k=c.toLowerCase()==="get"?"get":"post",E=typeof u=="string"&&kx.test(u),I=M=>{if(m&&m(M),M.defaultPrevented)return;M.preventDefault();let N=M.nativeEvent.submitter,_=(N==null?void 0:N.getAttribute("formmethod"))||c;w(N||M.currentTarget,{fetcherKey:r,method:_,navigate:t,replace:o,state:i,relative:g,preventScrollReset:f,viewTransition:y})};return h.createElement("form",{ref:S,method:k,action:x,onSubmit:n?m:I,...v,"data-discover":!E&&a==="render"?"true":void 0})});E4.displayName="Form";function x4(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Mx(a){let r=h.useContext(Vi);return Za(r,x4(a)),r}function w4(a,{target:r,replace:t,state:n,preventScrollReset:o,relative:i,viewTransition:c}={}){let u=er(),m=fo(),g=Od(a,{relative:i});return h.useCallback(f=>{if(K3(f,r)){f.preventDefault();let y=t!==void 0?t:_d(m)===_d(g);u(a,{replace:y,state:n,preventScrollReset:o,relative:i,viewTransition:c})}},[m,u,g,t,n,r,a,o,i,c])}function V0(a){Dr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=h.useRef(o0(a)),t=h.useRef(!1),n=fo(),o=h.useMemo(()=>e4(n.search,t.current?null:r.current),[n.search]),i=er(),c=h.useCallback((u,m)=>{const g=o0(typeof u=="function"?u(o):u);t.current=!0,i("?"+g,m)},[i,o]);return[o,c]}var S4=0,C4=()=>`__${String(++S4)}__`;function N4(){let{router:a}=Mx("useSubmit"),{basename:r}=h.useContext(po),t=H3();return h.useCallback(async(n,o={})=>{let{action:i,method:c,encType:u,formData:m,body:g}=n4(n,r);if(o.navigate===!1){let f=o.fetcherKey||C4();await a.fetch(f,t,o.action||i,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||c,formEncType:o.encType||u,flushSync:o.flushSync})}else await a.navigate(o.action||i,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||c,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[a,r,t])}function _4(a,{relative:r}={}){let{basename:t}=h.useContext(po),n=h.useContext(Ao);Za(n,"useFormAction must be used inside a RouteContext");let[o]=n.matches.slice(-1),i={...Od(a||".",{relative:r})},c=fo();if(a==null){i.search=c.search;let u=new URLSearchParams(i.search),m=u.getAll("index");if(m.some(f=>f==="")){u.delete("index"),m.filter(y=>y).forEach(y=>u.append("index",y));let f=u.toString();i.search=f?`?${f}`:""}}return(!a||a===".")&&o.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:al([t,i.pathname])),_d(i)}function k4(a,r={}){let t=h.useContext(yx);Za(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Mx("useViewTransitionState"),o=Od(a,{relative:r.relative});if(!t.isTransitioning)return!1;let i=cl(t.currentLocation.pathname,n)||t.currentLocation.pathname,c=cl(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Hm(o.pathname,c)!=null||Hm(o.pathname,i)!=null}[...u4];var Jr=mx();const Fd=Up(Jr);function Hp({gameType:a,size:r=22}){const t={"8 Ball":{emoji:"🎱"},"9 Ball":{color:"#FFD700",number:9},"10 Ball":{color:"#2196F3",number:10}};if(a==="8 Ball")return e.createElement("span",{role:"img","aria-label":"8-ball",style:{fontSize:r,verticalAlign:"middle",marginRight:4}},t["8 Ball"].emoji);const{color:n,number:o}=t[a]||{};return!n||!o?null:e.createElement("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:r,height:r,borderRadius:"50%",background:n,color:"#222",fontWeight:"bold",fontSize:r*.65,border:"2px solid #fff",boxShadow:"0 1px 2px #0003",marginRight:4,verticalAlign:"middle"},"aria-label":`${o}-ball`},o)}function Bt({open:a,onClose:r,children:t,title:n="Modal",maxWidth:o="500px",maxHeight:i=null,className:c="",borderColor:u="#e53e3e",textColor:m="#fff",glowColor:g="#e53e3e"}){const[f,y]=h.useState({x:0,y:0}),[v,S]=h.useState(!1),[w,x]=h.useState(window.innerWidth<=768),k=h.useRef({x:0,y:0});h.useEffect(()=>{a&&(console.log("🎯 Modal opening - resetting drag position to center"),y({x:0,y:0}))},[a]),h.useEffect(()=>{const N=()=>{x(window.innerWidth<=768)};return window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[]);const E=N=>{S(!0),k.current={x:N.clientX-f.x,y:N.clientY-f.y},document.body.style.userSelect="none"},I=N=>{v&&y({x:N.clientX-k.current.x,y:N.clientY-k.current.y})},M=()=>{S(!1),document.body.style.userSelect=""};return h.useEffect(()=>(v?(window.addEventListener("mousemove",I),window.addEventListener("mouseup",M)):(window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",M)),()=>{window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",M)}),[v]),a?e.createElement("div",{className:"modal-overlay",onClick:r,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",padding:w?"0":"40px",zIndex:1e5,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)"}},e.createElement("div",{className:`draggable-modal ${c}`,style:{transform:window.innerWidth<=768?"translate(-50%, -50%)":`translate(${f.x}px, ${f.y}px)`,cursor:v?"grabbing":"default",background:"linear-gradient(120deg, #232323 80%, #2a0909 100%)",color:"#fff",border:`2px solid ${u}`,borderRadius:window.innerWidth<=768?"0.5rem":"1.2rem",boxShadow:`0 0 32px ${g}, 0 0 40px rgba(0,0,0,0.85)`,width:window.innerWidth<=768?"95vw":o,maxWidth:window.innerWidth<=768?"95vw":o,minWidth:window.innerWidth<=768?"320px":"400px",margin:window.innerWidth<=768?"0":"0 auto",left:window.innerWidth<=768?"50%":"auto",top:window.innerWidth<=768?"50%":"auto",position:window.innerWidth<=768?"fixed":"relative",animation:"modalBounceIn 0.5s cubic-bezier(.21,1.02,.73,1.01)",padding:0,fontFamily:"inherit",boxSizing:"border-box",height:i||(window.innerWidth<=768,"auto"),maxHeight:i||"400px",display:"flex",flexDirection:"column"},onClick:N=>N.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":n,tabIndex:-1},e.createElement("div",{className:"modal-header",onMouseDown:E,style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",background:u,padding:window.innerWidth<=768?"0.3rem 0.5rem":"0.4rem 0.6rem",borderTopLeftRadius:window.innerWidth<=768?"0.5rem":"1.2rem",borderTopRightRadius:window.innerWidth<=768?"0.5rem":"1.2rem",position:"relative",cursor:"grab",userSelect:"none",gap:window.innerWidth<=768?"0.3rem":"0.4rem"}},e.createElement("span",{className:"modal-accent-bar",style:{position:"absolute",left:0,top:0,width:"100%",height:"5px",background:`linear-gradient(90deg, #fff0 0%, ${u} 60%, #fff0 100%)`,borderTopLeftRadius:window.innerWidth<=768?"0.5rem":"1.2rem",borderTopRightRadius:window.innerWidth<=768?"0.5rem":"1.2rem",pointerEvents:"none"}}),e.createElement("h2",{className:"modal-title",style:{margin:0,fontSize:window.innerWidth<=768?"1.1rem":"1.3rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.02em",textShadow:"0 1px 12px #000a",zIndex:2,flex:1,wordBreak:"break-word",minWidth:0,color:m}},n),e.createElement("button",{className:"modal-close-btn",onClick:r,"aria-label":"Close",style:{background:"none",border:"none",color:"#fff",fontSize:window.innerWidth<=768?"1.2em":"1.5em",fontWeight:"bold",cursor:"pointer",zIndex:10,alignSelf:"flex-start",marginTop:"0",lineHeight:1,transition:"color 0.2s, transform 0.2s",padding:0,marginLeft:"1rem"},onMouseEnter:N=>{N.target.style.color="#ffd6d6",N.target.style.transform="scale(1.2) rotate(10deg)"},onMouseLeave:N=>{N.target.style.color="#fff",N.target.style.transform="scale(1) rotate(0deg)"}},"×")),e.createElement("div",{className:"modal-content",style:{flex:"1 1 auto",minHeight:0,overflowY:"auto",padding:window.innerWidth<=768?"0.8rem 0.8rem 0.6rem 0.8rem":"1rem 1.2rem 0.8rem 1.2rem",background:"none"}},t)),e.createElement("style",null,`
        @keyframes modalBounceIn {
          0% { opacity: 0; transform: scale(0.95) translateY(-40px);}
          70% { opacity: 1; transform: scale(1.02) translateY(8px);}
          100% { opacity: 1; transform: scale(1) translateY(0);}
        }
        
        @media (max-width: 768px) {
          .modal-overlay {
            padding: 20px !important;
            align-items: center !important;
            justify-content: center !important;
          }
          .draggable-modal {
            max-width: 95vw !important;
            border-radius: 0.5rem !important;
            height: auto !important;
            max-height: 90vh !important;
            margin: 0 !important;
            left: 50% !important;
            top: 50% !important;
            transform: translate(-50%, -50%) !important;
            position: fixed !important;
          }
          .modal-header {
            padding: 0.5rem 0.5rem 0.3rem 0.5rem !important;
          }
          .modal-content {
            padding: 0.8rem 0.6rem 0.6rem 0.6rem !important;
            flex: 1 1 auto !important;
            min-height: 0 !important;
            overflow-y: auto !important;
            max-height: calc(90vh - 60px) !important;
          }
        }
        
        @media (max-width: 480px) {
          .modal-overlay {
            padding: 15px !important;
            align-items: center !important;
            justify-content: center !important;
          }
          .draggable-modal {
            max-width: 98vw !important;
            border-radius: 0.3rem !important;
            height: auto !important;
            max-height: 95vh !important;
            margin: 0 !important;
            left: 50% !important;
            top: 50% !important;
            transform: translate(-50%, -50%) !important;
            position: fixed !important;
          }
          .modal-content {
            max-height: calc(95vh - 50px) !important;
          }
          .modal-header {
            padding: 0.4rem 0.4rem 0.2rem 0.4rem !important;
          }
          .modal-content {
            padding: 0.6rem 0.5rem 0.5rem 0.5rem !important;
          }
        }
        /* Custom scrollbar for modal-content */
        .modal-content::-webkit-scrollbar {
          width: 10px;
        }
        .modal-content::-webkit-scrollbar-thumb {
          background: ${u};
          border-radius: 6px;
        }
        .modal-content::-webkit-scrollbar-track {
          background: #232323;
          border-radius: 6px;
        }
        .modal-content {
          scrollbar-width: thin;
          scrollbar-color: ${u} #232323;
        }
      `)):null}function I4(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-"),m=new Date(parseInt(i),parseInt(c)-1,parseInt(u)),g=String(m.getMonth()+1).padStart(2,"0"),f=String(m.getDate()).padStart(2,"0"),y=m.getFullYear();return`${g}-${f}-${y}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}function Ax({open:a,message:r,gameType:t,raceLength:n,day:o,date:i,time:c,location:u,proposalNote:m,confirmationNote:g,phase:f,onClose:y}){if(!a)return null;const v=typeof window<"u"&&window.innerWidth<=500,S=v?"100%":"240px",w=v?"90vw":"240px",x=v?"100%":"220px";return e.createElement(Bt,{open:a,onClose:y,title:"Proposal Sent!",maxWidth:w,width:S},e.createElement("div",{style:{textAlign:"center"}},e.createElement("div",{style:{background:"#222",color:"#fff",borderRadius:6,padding:"0.6rem 0.7rem 0.6rem 0.7rem",margin:"0 auto 0.7rem auto",fontWeight:600,fontSize:"0.97rem",textAlign:"center",maxWidth:"220px",width:"100%",wordBreak:"break-word",whiteSpace:"pre-line"}},r),e.createElement("div",{style:{background:"#f8f8f8",color:"#222",borderRadius:8,padding:v?"0.4rem 0.2rem":"0.5rem 0.5rem",margin:"0.7rem auto 0.7rem auto",textAlign:"center",fontSize:v?"0.92rem":"0.95rem",border:"1px solid #ff0000",maxWidth:x,width:"100%"}},e.createElement("div",{style:{marginBottom:6}},e.createElement("strong",null,"Phase:")," ",f==="scheduled"?"Phase 1 (Scheduled)":f==="challenge"?"Phase 2 (challenge)":f),e.createElement("div",{style:{marginBottom:6}},e.createElement("strong",null,"Game Type:")," ",e.createElement(Hp,{gameType:t,size:16})," ",t),e.createElement("div",{style:{marginBottom:6}},e.createElement("strong",null,"Race to:")," ",n),e.createElement("div",{style:{marginBottom:6}},e.createElement("strong",null,"Day:")," ",o),e.createElement("div",{style:{marginBottom:6}},e.createElement("strong",null,"Date:")," ",I4(i)),e.createElement("div",{style:{marginBottom:6}},e.createElement("strong",null,"Time:")," ",c),e.createElement("div",{style:{marginBottom:6}},e.createElement("strong",null,"Location:")," ",u),m&&e.createElement("div",{style:{marginTop:12,padding:"0.5rem 0.7rem",background:"#fffbe6",borderLeft:"3px solid #ffb300",borderRadius:4,color:"#a36c00",fontSize:"0.97rem"}},e.createElement("strong",null,"Opponent's note:")," ",m),g&&e.createElement("div",{style:{marginTop:10,padding:"0.5rem 0.7rem",background:"#e6fff0",borderLeft:"3px solid #00b36b",borderRadius:4,color:"#006b3c",fontSize:"0.97rem"}},e.createElement("strong",null,"Your note:")," ",g)),e.createElement("button",{style:{marginTop:"1.8rem",background:"#ff0000",color:"#fff",border:"none",borderRadius:"8px",padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer"},onClick:y},"Close")))}function Dx(a){var r,t,n="";if(typeof a=="string"||typeof a=="number")n+=a;else if(typeof a=="object")if(Array.isArray(a)){var o=a.length;for(r=0;r<o;r++)a[r]&&(t=Dx(a[r]))&&(n&&(n+=" "),n+=t)}else for(t in a)a[t]&&(n&&(n+=" "),n+=t);return n}function Yn(){for(var a,r,t=0,n="",o=arguments.length;t<o;t++)(a=arguments[t])&&(r=Dx(a))&&(n&&(n+=" "),n+=r);return n}const Rx=6048e5,M4=864e5,Yp=6e4,Wd=36e5,A4=1e3,cE=Symbol.for("constructDateFrom");function Na(a,r){return typeof a=="function"?a(r):a&&typeof a=="object"&&cE in a?a[cE](r):a instanceof Date?new a.constructor(r):new Date(r)}function wt(a,r){return Na(r||a,a)}function uo(a,r,t){const n=wt(a,t==null?void 0:t.in);return isNaN(r)?Na((t==null?void 0:t.in)||a,NaN):(r&&n.setDate(n.getDate()+r),n)}function mo(a,r,t){const n=wt(a,t==null?void 0:t.in);if(isNaN(r))return Na(a,NaN);if(!r)return n;const o=n.getDate(),i=Na(a,n.getTime());i.setMonth(n.getMonth()+r+1,0);const c=i.getDate();return o>=c?i:(n.setFullYear(i.getFullYear(),i.getMonth(),o),n)}function Tx(a,r,t){return Na(a,+wt(a)+r)}function D4(a,r,t){return Tx(a,r*Wd)}let R4={};function Fs(){return R4}function dl(a,r){var u,m,g,f;const t=Fs(),n=(r==null?void 0:r.weekStartsOn)??((m=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:m.weekStartsOn)??t.weekStartsOn??((f=(g=t.locale)==null?void 0:g.options)==null?void 0:f.weekStartsOn)??0,o=wt(a,r==null?void 0:r.in),i=o.getDay(),c=(i<n?7:0)+i-n;return o.setDate(o.getDate()-c),o.setHours(0,0,0,0),o}function zi(a,r){return dl(a,{...r,weekStartsOn:1})}function Px(a,r){const t=wt(a,r==null?void 0:r.in),n=t.getFullYear(),o=Na(t,0);o.setFullYear(n+1,0,4),o.setHours(0,0,0,0);const i=zi(o),c=Na(t,0);c.setFullYear(n,0,4),c.setHours(0,0,0,0);const u=zi(c);return t.getTime()>=i.getTime()?n+1:t.getTime()>=u.getTime()?n:n-1}function Ym(a){const r=wt(a),t=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return t.setUTCFullYear(r.getFullYear()),+a-+t}function Do(a,...r){const t=Na.bind(null,r.find(n=>typeof n=="object"));return r.map(t)}function Rs(a,r){const t=wt(a,r==null?void 0:r.in);return t.setHours(0,0,0,0),t}function Oi(a,r,t){const[n,o]=Do(t==null?void 0:t.in,a,r),i=Rs(n),c=Rs(o),u=+i-Ym(i),m=+c-Ym(c);return Math.round((u-m)/M4)}function T4(a,r){const t=Px(a,r),n=Na(a,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),zi(n)}function l0(a,r,t){const n=wt(a,t==null?void 0:t.in);return n.setTime(n.getTime()+r*Yp),n}function Q0(a,r,t){return mo(a,r*3,t)}function P4(a,r,t){return Tx(a,r*1e3)}function qm(a,r,t){return uo(a,r*7,t)}function nl(a,r,t){return mo(a,r*12,t)}function dE(a,r){let t,n=r==null?void 0:r.in;return a.forEach(o=>{!n&&typeof o=="object"&&(n=Na.bind(null,o));const i=wt(o,n);(!t||t<i||isNaN(+i))&&(t=i)}),Na(n,t||NaN)}function uE(a,r){let t,n=r==null?void 0:r.in;return a.forEach(o=>{!n&&typeof o=="object"&&(n=Na.bind(null,o));const i=wt(o,n);(!t||t>i||isNaN(+i))&&(t=i)}),Na(n,t||NaN)}function L4(a,r,t){const[n,o]=Do(t==null?void 0:t.in,a,r);return+Rs(n)==+Rs(o)}function rl(a){return a instanceof Date||typeof a=="object"&&Object.prototype.toString.call(a)==="[object Date]"}function Gm(a){return!(!rl(a)&&typeof a!="number"||isNaN(+wt(a)))}function Zm(a,r,t){const[n,o]=Do(t==null?void 0:t.in,a,r),i=n.getFullYear()-o.getFullYear(),c=n.getMonth()-o.getMonth();return i*12+c}function Is(a,r){const t=wt(a,r==null?void 0:r.in);return Math.trunc(t.getMonth()/3)+1}function Vm(a,r,t){const[n,o]=Do(t==null?void 0:t.in,a,r),i=n.getFullYear()-o.getFullYear(),c=Is(n)-Is(o);return i*4+c}function Qm(a,r,t){const[n,o]=Do(t==null?void 0:t.in,a,r);return n.getFullYear()-o.getFullYear()}function Lx(a,r,t){const[n,o]=Do(t==null?void 0:t.in,a,r),i=mE(n,o),c=Math.abs(Oi(n,o));n.setDate(n.getDate()-i*c);const u=+(mE(n,o)===-i),m=i*(c-u);return m===0?0:m}function mE(a,r){const t=a.getFullYear()-r.getFullYear()||a.getMonth()-r.getMonth()||a.getDate()-r.getDate()||a.getHours()-r.getHours()||a.getMinutes()-r.getMinutes()||a.getSeconds()-r.getSeconds()||a.getMilliseconds()-r.getMilliseconds();return t<0?-1:t>0?1:t}function B4(a){return r=>{const t=Math.trunc,n=t(r);return n===0?0:n}}function z4(a,r,t){const[n,o]=Do(t==null?void 0:t.in,a,r),i=(+n-+o)/Wd;return B4()(i)}function Bx(a,r){const t=wt(a,r==null?void 0:r.in);return t.setHours(23,59,59,999),t}function zx(a,r){const t=wt(a,r==null?void 0:r.in),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function s0(a,r){const t=wt(a,r==null?void 0:r.in),n=t.getMonth(),o=n-n%3;return t.setMonth(o,1),t.setHours(0,0,0,0),t}function Ox(a,r){const t=wt(a,r==null?void 0:r.in);return t.setDate(1),t.setHours(0,0,0,0),t}function Fx(a,r){const t=wt(a,r==null?void 0:r.in),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function qp(a,r){const t=wt(a,r==null?void 0:r.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function O4(a,r){var u,m;const t=Fs(),n=t.weekStartsOn??((m=(u=t.locale)==null?void 0:u.options)==null?void 0:m.weekStartsOn)??0,o=wt(a,r==null?void 0:r.in),i=o.getDay(),c=(i<n?-7:0)+6-(i-n);return o.setDate(o.getDate()+c),o.setHours(23,59,59,999),o}const F4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},W4=(a,r,t)=>{let n;const o=F4[a];return typeof o=="string"?n=o:r===1?n=o.one:n=o.other.replace("{{count}}",r.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function gh(a){return(r={})=>{const t=r.width?String(r.width):a.defaultWidth;return a.formats[t]||a.formats[a.defaultWidth]}}const U4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},j4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},H4={date:gh({formats:U4,defaultWidth:"full"}),time:gh({formats:$4,defaultWidth:"full"}),dateTime:gh({formats:j4,defaultWidth:"full"})},Y4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},q4=(a,r,t,n)=>Y4[a];function Zc(a){return(r,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let o;if(n==="formatting"&&a.formattingValues){const c=a.defaultFormattingWidth||a.defaultWidth,u=t!=null&&t.width?String(t.width):c;o=a.formattingValues[u]||a.formattingValues[c]}else{const c=a.defaultWidth,u=t!=null&&t.width?String(t.width):a.defaultWidth;o=a.values[u]||a.values[c]}const i=a.argumentCallback?a.argumentCallback(r):r;return o[i]}}const G4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Z4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},V4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Q4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},J4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},X4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},K4=(a,r)=>{const t=Number(a),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},eN={ordinalNumber:K4,era:Zc({values:G4,defaultWidth:"wide"}),quarter:Zc({values:Z4,defaultWidth:"wide",argumentCallback:a=>a-1}),month:Zc({values:V4,defaultWidth:"wide"}),day:Zc({values:Q4,defaultWidth:"wide"}),dayPeriod:Zc({values:J4,defaultWidth:"wide",formattingValues:X4,defaultFormattingWidth:"wide"})};function Vc(a){return(r,t={})=>{const n=t.width,o=n&&a.matchPatterns[n]||a.matchPatterns[a.defaultMatchWidth],i=r.match(o);if(!i)return null;const c=i[0],u=n&&a.parsePatterns[n]||a.parsePatterns[a.defaultParseWidth],m=Array.isArray(u)?aN(u,y=>y.test(c)):tN(u,y=>y.test(c));let g;g=a.valueCallback?a.valueCallback(m):m,g=t.valueCallback?t.valueCallback(g):g;const f=r.slice(c.length);return{value:g,rest:f}}}function tN(a,r){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t)&&r(a[t]))return t}function aN(a,r){for(let t=0;t<a.length;t++)if(r(a[t]))return t}function nN(a){return(r,t={})=>{const n=r.match(a.matchPattern);if(!n)return null;const o=n[0],i=r.match(a.parsePattern);if(!i)return null;let c=a.valueCallback?a.valueCallback(i[0]):i[0];c=t.valueCallback?t.valueCallback(c):c;const u=r.slice(o.length);return{value:c,rest:u}}}const rN=/^(\d+)(th|st|nd|rd)?/i,oN=/\d+/i,lN={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sN={any:[/^b/i,/^(a|c)/i]},iN={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},cN={any:[/1/i,/2/i,/3/i,/4/i]},dN={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},uN={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},mN={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pN={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fN={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},gN={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},hN={ordinalNumber:nN({matchPattern:rN,parsePattern:oN,valueCallback:a=>parseInt(a,10)}),era:Vc({matchPatterns:lN,defaultMatchWidth:"wide",parsePatterns:sN,defaultParseWidth:"any"}),quarter:Vc({matchPatterns:iN,defaultMatchWidth:"wide",parsePatterns:cN,defaultParseWidth:"any",valueCallback:a=>a+1}),month:Vc({matchPatterns:dN,defaultMatchWidth:"wide",parsePatterns:uN,defaultParseWidth:"any"}),day:Vc({matchPatterns:mN,defaultMatchWidth:"wide",parsePatterns:pN,defaultParseWidth:"any"}),dayPeriod:Vc({matchPatterns:fN,defaultMatchWidth:"any",parsePatterns:gN,defaultParseWidth:"any"})},Wx={code:"en-US",formatDistance:W4,formatLong:H4,formatRelative:q4,localize:eN,match:hN,options:{weekStartsOn:0,firstWeekContainsDate:1}};function yN(a,r){const t=wt(a,r==null?void 0:r.in);return Oi(t,qp(t))+1}function J0(a,r){const t=wt(a,r==null?void 0:r.in),n=+zi(t)-+T4(t);return Math.round(n/Rx)+1}function X0(a,r){var f,y,v,S;const t=wt(a,r==null?void 0:r.in),n=t.getFullYear(),o=Fs(),i=(r==null?void 0:r.firstWeekContainsDate)??((y=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:y.firstWeekContainsDate)??o.firstWeekContainsDate??((S=(v=o.locale)==null?void 0:v.options)==null?void 0:S.firstWeekContainsDate)??1,c=Na((r==null?void 0:r.in)||a,0);c.setFullYear(n+1,0,i),c.setHours(0,0,0,0);const u=dl(c,r),m=Na((r==null?void 0:r.in)||a,0);m.setFullYear(n,0,i),m.setHours(0,0,0,0);const g=dl(m,r);return+t>=+u?n+1:+t>=+g?n:n-1}function bN(a,r){var u,m,g,f;const t=Fs(),n=(r==null?void 0:r.firstWeekContainsDate)??((m=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??t.firstWeekContainsDate??((f=(g=t.locale)==null?void 0:g.options)==null?void 0:f.firstWeekContainsDate)??1,o=X0(a,r),i=Na((r==null?void 0:r.in)||a,0);return i.setFullYear(o,0,n),i.setHours(0,0,0,0),dl(i,r)}function Ux(a,r){const t=wt(a,r==null?void 0:r.in),n=+dl(t,r)-+bN(t,r);return Math.round(n/Rx)+1}function Sa(a,r){const t=a<0?"-":"",n=Math.abs(a).toString().padStart(r,"0");return t+n}const Bl={y(a,r){const t=a.getFullYear(),n=t>0?t:1-t;return Sa(r==="yy"?n%100:n,r.length)},M(a,r){const t=a.getMonth();return r==="M"?String(t+1):Sa(t+1,2)},d(a,r){return Sa(a.getDate(),r.length)},a(a,r){const t=a.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(a,r){return Sa(a.getHours()%12||12,r.length)},H(a,r){return Sa(a.getHours(),r.length)},m(a,r){return Sa(a.getMinutes(),r.length)},s(a,r){return Sa(a.getSeconds(),r.length)},S(a,r){const t=r.length,n=a.getMilliseconds(),o=Math.trunc(n*Math.pow(10,t-3));return Sa(o,r.length)}},Ei={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},pE={G:function(a,r,t){const n=a.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(a,r,t){if(r==="yo"){const n=a.getFullYear(),o=n>0?n:1-n;return t.ordinalNumber(o,{unit:"year"})}return Bl.y(a,r)},Y:function(a,r,t,n){const o=X0(a,n),i=o>0?o:1-o;if(r==="YY"){const c=i%100;return Sa(c,2)}return r==="Yo"?t.ordinalNumber(i,{unit:"year"}):Sa(i,r.length)},R:function(a,r){const t=Px(a);return Sa(t,r.length)},u:function(a,r){const t=a.getFullYear();return Sa(t,r.length)},Q:function(a,r,t){const n=Math.ceil((a.getMonth()+1)/3);switch(r){case"Q":return String(n);case"QQ":return Sa(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(a,r,t){const n=Math.ceil((a.getMonth()+1)/3);switch(r){case"q":return String(n);case"qq":return Sa(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(a,r,t){const n=a.getMonth();switch(r){case"M":case"MM":return Bl.M(a,r);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(a,r,t){const n=a.getMonth();switch(r){case"L":return String(n+1);case"LL":return Sa(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(a,r,t,n){const o=Ux(a,n);return r==="wo"?t.ordinalNumber(o,{unit:"week"}):Sa(o,r.length)},I:function(a,r,t){const n=J0(a);return r==="Io"?t.ordinalNumber(n,{unit:"week"}):Sa(n,r.length)},d:function(a,r,t){return r==="do"?t.ordinalNumber(a.getDate(),{unit:"date"}):Bl.d(a,r)},D:function(a,r,t){const n=yN(a);return r==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):Sa(n,r.length)},E:function(a,r,t){const n=a.getDay();switch(r){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(a,r,t,n){const o=a.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(r){case"e":return String(i);case"ee":return Sa(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(o,{width:"short",context:"formatting"});case"eeee":default:return t.day(o,{width:"wide",context:"formatting"})}},c:function(a,r,t,n){const o=a.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(r){case"c":return String(i);case"cc":return Sa(i,r.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(o,{width:"narrow",context:"standalone"});case"cccccc":return t.day(o,{width:"short",context:"standalone"});case"cccc":default:return t.day(o,{width:"wide",context:"standalone"})}},i:function(a,r,t){const n=a.getDay(),o=n===0?7:n;switch(r){case"i":return String(o);case"ii":return Sa(o,r.length);case"io":return t.ordinalNumber(o,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(a,r,t){const o=a.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(a,r,t){const n=a.getHours();let o;switch(n===12?o=Ei.noon:n===0?o=Ei.midnight:o=n/12>=1?"pm":"am",r){case"b":case"bb":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(a,r,t){const n=a.getHours();let o;switch(n>=17?o=Ei.evening:n>=12?o=Ei.afternoon:n>=4?o=Ei.morning:o=Ei.night,r){case"B":case"BB":case"BBB":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(a,r,t){if(r==="ho"){let n=a.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return Bl.h(a,r)},H:function(a,r,t){return r==="Ho"?t.ordinalNumber(a.getHours(),{unit:"hour"}):Bl.H(a,r)},K:function(a,r,t){const n=a.getHours()%12;return r==="Ko"?t.ordinalNumber(n,{unit:"hour"}):Sa(n,r.length)},k:function(a,r,t){let n=a.getHours();return n===0&&(n=24),r==="ko"?t.ordinalNumber(n,{unit:"hour"}):Sa(n,r.length)},m:function(a,r,t){return r==="mo"?t.ordinalNumber(a.getMinutes(),{unit:"minute"}):Bl.m(a,r)},s:function(a,r,t){return r==="so"?t.ordinalNumber(a.getSeconds(),{unit:"second"}):Bl.s(a,r)},S:function(a,r){return Bl.S(a,r)},X:function(a,r,t){const n=a.getTimezoneOffset();if(n===0)return"Z";switch(r){case"X":return gE(n);case"XXXX":case"XX":return Es(n);case"XXXXX":case"XXX":default:return Es(n,":")}},x:function(a,r,t){const n=a.getTimezoneOffset();switch(r){case"x":return gE(n);case"xxxx":case"xx":return Es(n);case"xxxxx":case"xxx":default:return Es(n,":")}},O:function(a,r,t){const n=a.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+fE(n,":");case"OOOO":default:return"GMT"+Es(n,":")}},z:function(a,r,t){const n=a.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+fE(n,":");case"zzzz":default:return"GMT"+Es(n,":")}},t:function(a,r,t){const n=Math.trunc(+a/1e3);return Sa(n,r.length)},T:function(a,r,t){return Sa(+a,r.length)}};function fE(a,r=""){const t=a>0?"-":"+",n=Math.abs(a),o=Math.trunc(n/60),i=n%60;return i===0?t+String(o):t+String(o)+r+Sa(i,2)}function gE(a,r){return a%60===0?(a>0?"-":"+")+Sa(Math.abs(a)/60,2):Es(a,r)}function Es(a,r=""){const t=a>0?"-":"+",n=Math.abs(a),o=Sa(Math.trunc(n/60),2),i=Sa(n%60,2);return t+o+r+i}const hE=(a,r)=>{switch(a){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},$x=(a,r)=>{switch(a){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},vN=(a,r)=>{const t=a.match(/(P+)(p+)?/)||[],n=t[1],o=t[2];if(!o)return hE(a,r);let i;switch(n){case"P":i=r.dateTime({width:"short"});break;case"PP":i=r.dateTime({width:"medium"});break;case"PPP":i=r.dateTime({width:"long"});break;case"PPPP":default:i=r.dateTime({width:"full"});break}return i.replace("{{date}}",hE(n,r)).replace("{{time}}",$x(o,r))},i0={p:$x,P:vN},EN=/^D+$/,xN=/^Y+$/,wN=["D","DD","YY","YYYY"];function SN(a){return EN.test(a)}function CN(a){return xN.test(a)}function NN(a,r,t){const n=_N(a,r,t);if(console.warn(n),wN.includes(a))throw new RangeError(n)}function _N(a,r,t){const n=a[0]==="Y"?"years":"days of the month";return`Use \`${a.toLowerCase()}\` instead of \`${a}\` (in \`${r}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const kN=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,IN=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,MN=/^'([^]*?)'?$/,AN=/''/g,DN=/[a-zA-Z]/;function lr(a,r,t){var f,y,v,S,w,x,k,E;const n=Fs(),o=(t==null?void 0:t.locale)??n.locale??Wx,i=(t==null?void 0:t.firstWeekContainsDate)??((y=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:y.firstWeekContainsDate)??n.firstWeekContainsDate??((S=(v=n.locale)==null?void 0:v.options)==null?void 0:S.firstWeekContainsDate)??1,c=(t==null?void 0:t.weekStartsOn)??((x=(w=t==null?void 0:t.locale)==null?void 0:w.options)==null?void 0:x.weekStartsOn)??n.weekStartsOn??((E=(k=n.locale)==null?void 0:k.options)==null?void 0:E.weekStartsOn)??0,u=wt(a,t==null?void 0:t.in);if(!Gm(u))throw new RangeError("Invalid time value");let m=r.match(IN).map(I=>{const M=I[0];if(M==="p"||M==="P"){const N=i0[M];return N(I,o.formatLong)}return I}).join("").match(kN).map(I=>{if(I==="''")return{isToken:!1,value:"'"};const M=I[0];if(M==="'")return{isToken:!1,value:RN(I)};if(pE[M])return{isToken:!0,value:I};if(M.match(DN))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");return{isToken:!1,value:I}});o.localize.preprocessor&&(m=o.localize.preprocessor(u,m));const g={firstWeekContainsDate:i,weekStartsOn:c,locale:o};return m.map(I=>{if(!I.isToken)return I.value;const M=I.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&CN(M)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&SN(M))&&NN(M,r,String(a));const N=pE[M[0]];return N(u,M,o.localize,g)}).join("")}function RN(a){const r=a.match(MN);return r?r[1].replace(AN,"'"):a}function yE(a,r){return wt(a,r==null?void 0:r.in).getDate()}function TN(a,r){return wt(a,r==null?void 0:r.in).getDay()}function PN(a,r){const t=wt(a,r==null?void 0:r.in),n=t.getFullYear(),o=t.getMonth(),i=Na(t,0);return i.setFullYear(n,o+1,0),i.setHours(0,0,0,0),i.getDate()}function LN(){return Object.assign({},Fs())}function ol(a,r){return wt(a,r==null?void 0:r.in).getHours()}function BN(a,r){const t=wt(a,r==null?void 0:r.in).getDay();return t===0?7:t}function ll(a,r){return wt(a,r==null?void 0:r.in).getMinutes()}function Kn(a,r){return wt(a,r==null?void 0:r.in).getMonth()}function Zl(a){return wt(a).getSeconds()}function c0(a){return+wt(a)}function Qt(a,r){return wt(a,r==null?void 0:r.in).getFullYear()}function ul(a,r){return+wt(a)>+wt(r)}function Ts(a,r){return+wt(a)<+wt(r)}function zN(a,r){return+wt(a)==+wt(r)}function ON(a,r){const t=FN(r)?new r(0):Na(r,0);return t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),t.setHours(a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()),t}function FN(a){var r;return typeof a=="function"&&((r=a.prototype)==null?void 0:r.constructor)===a}const WN=10;class jx{constructor(){gt(this,"subPriority",0)}validate(r,t){return!0}}class UN extends jx{constructor(r,t,n,o,i){super(),this.value=r,this.validateValue=t,this.setValue=n,this.priority=o,i&&(this.subPriority=i)}validate(r,t){return this.validateValue(r,this.value,t)}set(r,t,n){return this.setValue(r,t,this.value,n)}}class $N extends jx{constructor(t,n){super();gt(this,"priority",WN);gt(this,"subPriority",-1);this.context=t||(o=>Na(n,o))}set(t,n){return n.timestampIsSet?t:Na(t,ON(t,this.context))}}class ya{run(r,t,n,o){const i=this.parse(r,t,n,o);return i?{setter:new UN(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(r,t,n){return!0}}class jN extends ya{constructor(){super(...arguments);gt(this,"priority",140);gt(this,"incompatibleTokens",["R","u","t","T"])}parse(t,n,o){switch(n){case"G":case"GG":case"GGG":return o.era(t,{width:"abbreviated"})||o.era(t,{width:"narrow"});case"GGGGG":return o.era(t,{width:"narrow"});case"GGGG":default:return o.era(t,{width:"wide"})||o.era(t,{width:"abbreviated"})||o.era(t,{width:"narrow"})}}set(t,n,o){return n.era=o,t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}}const fn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Co={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function gn(a,r){return a&&{value:r(a.value),rest:a.rest}}function Ka(a,r){const t=r.match(a);return t?{value:parseInt(t[0],10),rest:r.slice(t[0].length)}:null}function No(a,r){const t=r.match(a);if(!t)return null;if(t[0]==="Z")return{value:0,rest:r.slice(1)};const n=t[1]==="+"?1:-1,o=t[2]?parseInt(t[2],10):0,i=t[3]?parseInt(t[3],10):0,c=t[5]?parseInt(t[5],10):0;return{value:n*(o*Wd+i*Yp+c*A4),rest:r.slice(t[0].length)}}function Hx(a){return Ka(fn.anyDigitsSigned,a)}function on(a,r){switch(a){case 1:return Ka(fn.singleDigit,r);case 2:return Ka(fn.twoDigits,r);case 3:return Ka(fn.threeDigits,r);case 4:return Ka(fn.fourDigits,r);default:return Ka(new RegExp("^\\d{1,"+a+"}"),r)}}function Jm(a,r){switch(a){case 1:return Ka(fn.singleDigitSigned,r);case 2:return Ka(fn.twoDigitsSigned,r);case 3:return Ka(fn.threeDigitsSigned,r);case 4:return Ka(fn.fourDigitsSigned,r);default:return Ka(new RegExp("^-?\\d{1,"+a+"}"),r)}}function K0(a){switch(a){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Yx(a,r){const t=r>0,n=t?r:1-r;let o;if(n<=50)o=a||100;else{const i=n+50,c=Math.trunc(i/100)*100,u=a>=i%100;o=a+c-(u?100:0)}return t?o:1-o}function qx(a){return a%400===0||a%4===0&&a%100!==0}class HN extends ya{constructor(){super(...arguments);gt(this,"priority",130);gt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,n,o){const i=c=>({year:c,isTwoDigitYear:n==="yy"});switch(n){case"y":return gn(on(4,t),i);case"yo":return gn(o.ordinalNumber(t,{unit:"year"}),i);default:return gn(on(n.length,t),i)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,o){const i=t.getFullYear();if(o.isTwoDigitYear){const u=Yx(o.year,i);return t.setFullYear(u,0,1),t.setHours(0,0,0,0),t}const c=!("era"in n)||n.era===1?o.year:1-o.year;return t.setFullYear(c,0,1),t.setHours(0,0,0,0),t}}class YN extends ya{constructor(){super(...arguments);gt(this,"priority",130);gt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,n,o){const i=c=>({year:c,isTwoDigitYear:n==="YY"});switch(n){case"Y":return gn(on(4,t),i);case"Yo":return gn(o.ordinalNumber(t,{unit:"year"}),i);default:return gn(on(n.length,t),i)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,o,i){const c=X0(t,i);if(o.isTwoDigitYear){const m=Yx(o.year,c);return t.setFullYear(m,0,i.firstWeekContainsDate),t.setHours(0,0,0,0),dl(t,i)}const u=!("era"in n)||n.era===1?o.year:1-o.year;return t.setFullYear(u,0,i.firstWeekContainsDate),t.setHours(0,0,0,0),dl(t,i)}}class qN extends ya{constructor(){super(...arguments);gt(this,"priority",130);gt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,n){return Jm(n==="R"?4:n.length,t)}set(t,n,o){const i=Na(t,0);return i.setFullYear(o,0,4),i.setHours(0,0,0,0),zi(i)}}class GN extends ya{constructor(){super(...arguments);gt(this,"priority",130);gt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,n){return Jm(n==="u"?4:n.length,t)}set(t,n,o){return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}}class ZN extends ya{constructor(){super(...arguments);gt(this,"priority",120);gt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,n,o){switch(n){case"Q":case"QQ":return on(n.length,t);case"Qo":return o.ordinalNumber(t,{unit:"quarter"});case"QQQ":return o.quarter(t,{width:"abbreviated",context:"formatting"})||o.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(t,{width:"wide",context:"formatting"})||o.quarter(t,{width:"abbreviated",context:"formatting"})||o.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=1&&n<=4}set(t,n,o){return t.setMonth((o-1)*3,1),t.setHours(0,0,0,0),t}}class VN extends ya{constructor(){super(...arguments);gt(this,"priority",120);gt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,n,o){switch(n){case"q":case"qq":return on(n.length,t);case"qo":return o.ordinalNumber(t,{unit:"quarter"});case"qqq":return o.quarter(t,{width:"abbreviated",context:"standalone"})||o.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(t,{width:"wide",context:"standalone"})||o.quarter(t,{width:"abbreviated",context:"standalone"})||o.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=1&&n<=4}set(t,n,o){return t.setMonth((o-1)*3,1),t.setHours(0,0,0,0),t}}class QN extends ya{constructor(){super(...arguments);gt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);gt(this,"priority",110)}parse(t,n,o){const i=c=>c-1;switch(n){case"M":return gn(Ka(fn.month,t),i);case"MM":return gn(on(2,t),i);case"Mo":return gn(o.ordinalNumber(t,{unit:"month"}),i);case"MMM":return o.month(t,{width:"abbreviated",context:"formatting"})||o.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(t,{width:"wide",context:"formatting"})||o.month(t,{width:"abbreviated",context:"formatting"})||o.month(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=11}set(t,n,o){return t.setMonth(o,1),t.setHours(0,0,0,0),t}}class JN extends ya{constructor(){super(...arguments);gt(this,"priority",110);gt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,n,o){const i=c=>c-1;switch(n){case"L":return gn(Ka(fn.month,t),i);case"LL":return gn(on(2,t),i);case"Lo":return gn(o.ordinalNumber(t,{unit:"month"}),i);case"LLL":return o.month(t,{width:"abbreviated",context:"standalone"})||o.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(t,{width:"wide",context:"standalone"})||o.month(t,{width:"abbreviated",context:"standalone"})||o.month(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=11}set(t,n,o){return t.setMonth(o,1),t.setHours(0,0,0,0),t}}function XN(a,r,t){const n=wt(a,t==null?void 0:t.in),o=Ux(n,t)-r;return n.setDate(n.getDate()-o*7),wt(n,t==null?void 0:t.in)}class KN extends ya{constructor(){super(...arguments);gt(this,"priority",100);gt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,n,o){switch(n){case"w":return Ka(fn.week,t);case"wo":return o.ordinalNumber(t,{unit:"week"});default:return on(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,o,i){return dl(XN(t,o,i),i)}}function e_(a,r,t){const n=wt(a,t==null?void 0:t.in),o=J0(n,t)-r;return n.setDate(n.getDate()-o*7),n}class t_ extends ya{constructor(){super(...arguments);gt(this,"priority",100);gt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,n,o){switch(n){case"I":return Ka(fn.week,t);case"Io":return o.ordinalNumber(t,{unit:"week"});default:return on(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,o){return zi(e_(t,o))}}const a_=[31,28,31,30,31,30,31,31,30,31,30,31],n_=[31,29,31,30,31,30,31,31,30,31,30,31];class r_ extends ya{constructor(){super(...arguments);gt(this,"priority",90);gt(this,"subPriority",1);gt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,n,o){switch(n){case"d":return Ka(fn.date,t);case"do":return o.ordinalNumber(t,{unit:"date"});default:return on(n.length,t)}}validate(t,n){const o=t.getFullYear(),i=qx(o),c=t.getMonth();return i?n>=1&&n<=n_[c]:n>=1&&n<=a_[c]}set(t,n,o){return t.setDate(o),t.setHours(0,0,0,0),t}}class o_ extends ya{constructor(){super(...arguments);gt(this,"priority",90);gt(this,"subpriority",1);gt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,n,o){switch(n){case"D":case"DD":return Ka(fn.dayOfYear,t);case"Do":return o.ordinalNumber(t,{unit:"date"});default:return on(n.length,t)}}validate(t,n){const o=t.getFullYear();return qx(o)?n>=1&&n<=366:n>=1&&n<=365}set(t,n,o){return t.setMonth(0,o),t.setHours(0,0,0,0),t}}function ey(a,r,t){var y,v,S,w;const n=Fs(),o=(t==null?void 0:t.weekStartsOn)??((v=(y=t==null?void 0:t.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??n.weekStartsOn??((w=(S=n.locale)==null?void 0:S.options)==null?void 0:w.weekStartsOn)??0,i=wt(a,t==null?void 0:t.in),c=i.getDay(),m=(r%7+7)%7,g=7-o,f=r<0||r>6?r-(c+g)%7:(m+g)%7-(c+g)%7;return uo(i,f,t)}class l_ extends ya{constructor(){super(...arguments);gt(this,"priority",90);gt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,n,o){switch(n){case"E":case"EE":case"EEE":return o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(t,{width:"wide",context:"formatting"})||o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,o,i){return t=ey(t,o,i),t.setHours(0,0,0,0),t}}class s_ extends ya{constructor(){super(...arguments);gt(this,"priority",90);gt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,n,o,i){const c=u=>{const m=Math.floor((u-1)/7)*7;return(u+i.weekStartsOn+6)%7+m};switch(n){case"e":case"ee":return gn(on(n.length,t),c);case"eo":return gn(o.ordinalNumber(t,{unit:"day"}),c);case"eee":return o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"});case"eeeee":return o.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(t,{width:"wide",context:"formatting"})||o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,o,i){return t=ey(t,o,i),t.setHours(0,0,0,0),t}}class i_ extends ya{constructor(){super(...arguments);gt(this,"priority",90);gt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,n,o,i){const c=u=>{const m=Math.floor((u-1)/7)*7;return(u+i.weekStartsOn+6)%7+m};switch(n){case"c":case"cc":return gn(on(n.length,t),c);case"co":return gn(o.ordinalNumber(t,{unit:"day"}),c);case"ccc":return o.day(t,{width:"abbreviated",context:"standalone"})||o.day(t,{width:"short",context:"standalone"})||o.day(t,{width:"narrow",context:"standalone"});case"ccccc":return o.day(t,{width:"narrow",context:"standalone"});case"cccccc":return o.day(t,{width:"short",context:"standalone"})||o.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(t,{width:"wide",context:"standalone"})||o.day(t,{width:"abbreviated",context:"standalone"})||o.day(t,{width:"short",context:"standalone"})||o.day(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=6}set(t,n,o,i){return t=ey(t,o,i),t.setHours(0,0,0,0),t}}function c_(a,r,t){const n=wt(a,t==null?void 0:t.in),o=BN(n,t),i=r-o;return uo(n,i,t)}class d_ extends ya{constructor(){super(...arguments);gt(this,"priority",90);gt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,n,o){const i=c=>c===0?7:c;switch(n){case"i":case"ii":return on(n.length,t);case"io":return o.ordinalNumber(t,{unit:"day"});case"iii":return gn(o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"}),i);case"iiiii":return gn(o.day(t,{width:"narrow",context:"formatting"}),i);case"iiiiii":return gn(o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"}),i);case"iiii":default:return gn(o.day(t,{width:"wide",context:"formatting"})||o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"}),i)}}validate(t,n){return n>=1&&n<=7}set(t,n,o){return t=c_(t,o),t.setHours(0,0,0,0),t}}class u_ extends ya{constructor(){super(...arguments);gt(this,"priority",80);gt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,n,o){switch(n){case"a":case"aa":case"aaa":return o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(t,{width:"wide",context:"formatting"})||o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,o){return t.setHours(K0(o),0,0,0),t}}class m_ extends ya{constructor(){super(...arguments);gt(this,"priority",80);gt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,n,o){switch(n){case"b":case"bb":case"bbb":return o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(t,{width:"wide",context:"formatting"})||o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,o){return t.setHours(K0(o),0,0,0),t}}class p_ extends ya{constructor(){super(...arguments);gt(this,"priority",80);gt(this,"incompatibleTokens",["a","b","t","T"])}parse(t,n,o){switch(n){case"B":case"BB":case"BBB":return o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(t,{width:"wide",context:"formatting"})||o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,o){return t.setHours(K0(o),0,0,0),t}}class f_ extends ya{constructor(){super(...arguments);gt(this,"priority",70);gt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,n,o){switch(n){case"h":return Ka(fn.hour12h,t);case"ho":return o.ordinalNumber(t,{unit:"hour"});default:return on(n.length,t)}}validate(t,n){return n>=1&&n<=12}set(t,n,o){const i=t.getHours()>=12;return i&&o<12?t.setHours(o+12,0,0,0):!i&&o===12?t.setHours(0,0,0,0):t.setHours(o,0,0,0),t}}class g_ extends ya{constructor(){super(...arguments);gt(this,"priority",70);gt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,n,o){switch(n){case"H":return Ka(fn.hour23h,t);case"Ho":return o.ordinalNumber(t,{unit:"hour"});default:return on(n.length,t)}}validate(t,n){return n>=0&&n<=23}set(t,n,o){return t.setHours(o,0,0,0),t}}class h_ extends ya{constructor(){super(...arguments);gt(this,"priority",70);gt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,n,o){switch(n){case"K":return Ka(fn.hour11h,t);case"Ko":return o.ordinalNumber(t,{unit:"hour"});default:return on(n.length,t)}}validate(t,n){return n>=0&&n<=11}set(t,n,o){return t.getHours()>=12&&o<12?t.setHours(o+12,0,0,0):t.setHours(o,0,0,0),t}}class y_ extends ya{constructor(){super(...arguments);gt(this,"priority",70);gt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,n,o){switch(n){case"k":return Ka(fn.hour24h,t);case"ko":return o.ordinalNumber(t,{unit:"hour"});default:return on(n.length,t)}}validate(t,n){return n>=1&&n<=24}set(t,n,o){const i=o<=24?o%24:o;return t.setHours(i,0,0,0),t}}class b_ extends ya{constructor(){super(...arguments);gt(this,"priority",60);gt(this,"incompatibleTokens",["t","T"])}parse(t,n,o){switch(n){case"m":return Ka(fn.minute,t);case"mo":return o.ordinalNumber(t,{unit:"minute"});default:return on(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,o){return t.setMinutes(o,0,0),t}}class v_ extends ya{constructor(){super(...arguments);gt(this,"priority",50);gt(this,"incompatibleTokens",["t","T"])}parse(t,n,o){switch(n){case"s":return Ka(fn.second,t);case"so":return o.ordinalNumber(t,{unit:"second"});default:return on(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,o){return t.setSeconds(o,0),t}}class E_ extends ya{constructor(){super(...arguments);gt(this,"priority",30);gt(this,"incompatibleTokens",["t","T"])}parse(t,n){const o=i=>Math.trunc(i*Math.pow(10,-n.length+3));return gn(on(n.length,t),o)}set(t,n,o){return t.setMilliseconds(o),t}}class x_ extends ya{constructor(){super(...arguments);gt(this,"priority",10);gt(this,"incompatibleTokens",["t","T","x"])}parse(t,n){switch(n){case"X":return No(Co.basicOptionalMinutes,t);case"XX":return No(Co.basic,t);case"XXXX":return No(Co.basicOptionalSeconds,t);case"XXXXX":return No(Co.extendedOptionalSeconds,t);case"XXX":default:return No(Co.extended,t)}}set(t,n,o){return n.timestampIsSet?t:Na(t,t.getTime()-Ym(t)-o)}}class w_ extends ya{constructor(){super(...arguments);gt(this,"priority",10);gt(this,"incompatibleTokens",["t","T","X"])}parse(t,n){switch(n){case"x":return No(Co.basicOptionalMinutes,t);case"xx":return No(Co.basic,t);case"xxxx":return No(Co.basicOptionalSeconds,t);case"xxxxx":return No(Co.extendedOptionalSeconds,t);case"xxx":default:return No(Co.extended,t)}}set(t,n,o){return n.timestampIsSet?t:Na(t,t.getTime()-Ym(t)-o)}}class S_ extends ya{constructor(){super(...arguments);gt(this,"priority",40);gt(this,"incompatibleTokens","*")}parse(t){return Hx(t)}set(t,n,o){return[Na(t,o*1e3),{timestampIsSet:!0}]}}class C_ extends ya{constructor(){super(...arguments);gt(this,"priority",20);gt(this,"incompatibleTokens","*")}parse(t){return Hx(t)}set(t,n,o){return[Na(t,o),{timestampIsSet:!0}]}}const N_={G:new jN,y:new HN,Y:new YN,R:new qN,u:new GN,Q:new ZN,q:new VN,M:new QN,L:new JN,w:new KN,I:new t_,d:new r_,D:new o_,E:new l_,e:new s_,c:new i_,i:new d_,a:new u_,b:new m_,B:new p_,h:new f_,H:new g_,K:new h_,k:new y_,m:new b_,s:new v_,S:new E_,X:new x_,x:new w_,t:new S_,T:new C_},__=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,k_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,I_=/^'([^]*?)'?$/,M_=/''/g,A_=/\S/,D_=/[a-zA-Z]/;function R_(a,r,t,n){var k,E,I,M,N,_,P,B;const o=()=>Na((n==null?void 0:n.in)||t,NaN),i=LN(),c=(n==null?void 0:n.locale)??i.locale??Wx,u=(n==null?void 0:n.firstWeekContainsDate)??((E=(k=n==null?void 0:n.locale)==null?void 0:k.options)==null?void 0:E.firstWeekContainsDate)??i.firstWeekContainsDate??((M=(I=i.locale)==null?void 0:I.options)==null?void 0:M.firstWeekContainsDate)??1,m=(n==null?void 0:n.weekStartsOn)??((_=(N=n==null?void 0:n.locale)==null?void 0:N.options)==null?void 0:_.weekStartsOn)??i.weekStartsOn??((B=(P=i.locale)==null?void 0:P.options)==null?void 0:B.weekStartsOn)??0;if(!r)return a?o():wt(t,n==null?void 0:n.in);const g={firstWeekContainsDate:u,weekStartsOn:m,locale:c},f=[new $N(n==null?void 0:n.in,t)],y=r.match(k_).map(R=>{const W=R[0];if(W in i0){const L=i0[W];return L(R,c.formatLong)}return R}).join("").match(__),v=[];for(let R of y){const W=R[0],L=N_[W];if(L){const{incompatibleTokens:F}=L;if(Array.isArray(F)){const J=v.find(Y=>F.includes(Y.token)||Y.token===W);if(J)throw new RangeError(`The format string mustn't contain \`${J.fullToken}\` and \`${R}\` at the same time`)}else if(L.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${R}\` and any other token at the same time`);v.push({token:W,fullToken:R});const j=L.run(a,R,c.match,g);if(!j)return o();f.push(j.setter),a=j.rest}else{if(W.match(D_))throw new RangeError("Format string contains an unescaped latin alphabet character `"+W+"`");if(R==="''"?R="'":W==="'"&&(R=T_(R)),a.indexOf(R)===0)a=a.slice(R.length);else return o()}}if(a.length>0&&A_.test(a))return o();const S=f.map(R=>R.priority).sort((R,W)=>W-R).filter((R,W,L)=>L.indexOf(R)===W).map(R=>f.filter(W=>W.priority===R).sort((W,L)=>L.subPriority-W.subPriority)).map(R=>R[0]);let w=wt(t,n==null?void 0:n.in);if(isNaN(+w))return o();const x={};for(const R of S){if(!R.validate(w,g))return o();const W=R.set(w,x,g);Array.isArray(W)?(w=W[0],Object.assign(x,W[1])):w=W}return w}function T_(a){return a.match(I_)[1].replace(M_,"'")}function P_(a,r,t){const[n,o]=Do(t==null?void 0:t.in,a,r);return n.getFullYear()===o.getFullYear()&&n.getMonth()===o.getMonth()}function L_(a,r,t){const[n,o]=Do(t==null?void 0:t.in,a,r);return+s0(n)==+s0(o)}function B_(a,r,t){const[n,o]=Do(t==null?void 0:t.in,a,r);return n.getFullYear()===o.getFullYear()}function kd(a,r,t){const n=+wt(a,t==null?void 0:t.in),[o,i]=[+wt(r.start,t==null?void 0:t.in),+wt(r.end,t==null?void 0:t.in)].sort((c,u)=>c-u);return n>=o&&n<=i}function z_(a,r,t){return uo(a,-1,t)}function Gx(a,r){const t=()=>Na(r==null?void 0:r.in,NaN),o=U_(a);let i;if(o.date){const g=$_(o.date,2);i=j_(g.restDateString,g.year)}if(!i||isNaN(+i))return t();const c=+i;let u=0,m;if(o.time&&(u=H_(o.time),isNaN(u)))return t();if(o.timezone){if(m=Y_(o.timezone),isNaN(m))return t()}else{const g=new Date(c+u),f=wt(0,r==null?void 0:r.in);return f.setFullYear(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()),f.setHours(g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds()),f}return wt(c+u+m,r==null?void 0:r.in)}const dm={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},O_=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,F_=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,W_=/^([+-])(\d{2})(?::?(\d{2}))?$/;function U_(a){const r={},t=a.split(dm.dateTimeDelimiter);let n;if(t.length>2)return r;if(/:/.test(t[0])?n=t[0]:(r.date=t[0],n=t[1],dm.timeZoneDelimiter.test(r.date)&&(r.date=a.split(dm.timeZoneDelimiter)[0],n=a.substr(r.date.length,a.length))),n){const o=dm.timezone.exec(n);o?(r.time=n.replace(o[1],""),r.timezone=o[1]):r.time=n}return r}function $_(a,r){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+r)+"})|(\\d{2}|[+-]\\d{"+(2+r)+"})$)"),n=a.match(t);if(!n)return{year:NaN,restDateString:""};const o=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?o:i*100,restDateString:a.slice((n[1]||n[2]).length)}}function j_(a,r){if(r===null)return new Date(NaN);const t=a.match(O_);if(!t)return new Date(NaN);const n=!!t[4],o=Qc(t[1]),i=Qc(t[2])-1,c=Qc(t[3]),u=Qc(t[4]),m=Qc(t[5])-1;if(n)return Q_(r,u,m)?q_(r,u,m):new Date(NaN);{const g=new Date(0);return!Z_(r,i,c)||!V_(r,o)?new Date(NaN):(g.setUTCFullYear(r,i,Math.max(o,c)),g)}}function Qc(a){return a?parseInt(a):1}function H_(a){const r=a.match(F_);if(!r)return NaN;const t=hh(r[1]),n=hh(r[2]),o=hh(r[3]);return J_(t,n,o)?t*Wd+n*Yp+o*1e3:NaN}function hh(a){return a&&parseFloat(a.replace(",","."))||0}function Y_(a){if(a==="Z")return 0;const r=a.match(W_);if(!r)return 0;const t=r[1]==="+"?-1:1,n=parseInt(r[2]),o=r[3]&&parseInt(r[3])||0;return X_(n,o)?t*(n*Wd+o*Yp):NaN}function q_(a,r,t){const n=new Date(0);n.setUTCFullYear(a,0,4);const o=n.getUTCDay()||7,i=(r-1)*7+t+1-o;return n.setUTCDate(n.getUTCDate()+i),n}const G_=[31,null,31,30,31,30,31,31,30,31,30,31];function Zx(a){return a%400===0||a%4===0&&a%100!==0}function Z_(a,r,t){return r>=0&&r<=11&&t>=1&&t<=(G_[r]||(Zx(a)?29:28))}function V_(a,r){return r>=1&&r<=(Zx(a)?366:365)}function Q_(a,r,t){return r>=1&&r<=53&&t>=0&&t<=6}function J_(a,r,t){return a===24?r===0&&t===0:t>=0&&t<60&&r>=0&&r<60&&a>=0&&a<25}function X_(a,r){return r>=0&&r<=59}function Gr(a,r,t){const n=wt(a,t==null?void 0:t.in),o=n.getFullYear(),i=n.getDate(),c=Na(a,0);c.setFullYear(o,r,15),c.setHours(0,0,0,0);const u=PN(c);return n.setMonth(r,Math.min(i,u)),n}function Dm(a,r,t){const n=wt(a,t==null?void 0:t.in);return n.setHours(r),n}function Rm(a,r,t){const n=wt(a,t==null?void 0:t.in);return n.setMinutes(r),n}function Si(a,r,t){const n=wt(a,t==null?void 0:t.in),o=Math.trunc(n.getMonth()/3)+1,i=r-o;return Gr(n,n.getMonth()+i*3)}function Tm(a,r,t){const n=wt(a,t==null?void 0:t.in);return n.setSeconds(r),n}function wo(a,r,t){const n=wt(a,t==null?void 0:t.in);return isNaN(+n)?Na(a,NaN):(n.setFullYear(r),n)}function Ms(a,r,t){return mo(a,-r,t)}function Vx(a,r,t){return Q0(a,-1,t)}function bE(a,r,t){return qm(a,-1,t)}function Fi(a,r,t){return nl(a,-r,t)}function Gp(){return typeof window<"u"}function Ji(a){return Qx(a)?(a.nodeName||"").toLowerCase():"#document"}function Ar(a){var r;return(a==null||(r=a.ownerDocument)==null?void 0:r.defaultView)||window}function Ro(a){var r;return(r=(Qx(a)?a.ownerDocument:a.document)||window.document)==null?void 0:r.documentElement}function Qx(a){return Gp()?a instanceof Node||a instanceof Ar(a).Node:!1}function sr(a){return Gp()?a instanceof Element||a instanceof Ar(a).Element:!1}function Mo(a){return Gp()?a instanceof HTMLElement||a instanceof Ar(a).HTMLElement:!1}function vE(a){return!Gp()||typeof ShadowRoot>"u"?!1:a instanceof ShadowRoot||a instanceof Ar(a).ShadowRoot}function Ud(a){const{overflow:r,overflowX:t,overflowY:n,display:o}=Kr(a);return/auto|scroll|overlay|hidden|clip/.test(r+n+t)&&!["inline","contents"].includes(o)}function K_(a){return["table","td","th"].includes(Ji(a))}function Zp(a){return[":popover-open",":modal"].some(r=>{try{return a.matches(r)}catch{return!1}})}function ty(a){const r=ay(),t=sr(a)?Kr(a):a;return["transform","translate","scale","rotate","perspective"].some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!r&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!r&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function ek(a){let r=Xl(a);for(;Mo(r)&&!Wi(r);){if(ty(r))return r;if(Zp(r))return null;r=Xl(r)}return null}function ay(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Wi(a){return["html","body","#document"].includes(Ji(a))}function Kr(a){return Ar(a).getComputedStyle(a)}function Vp(a){return sr(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.scrollX,scrollTop:a.scrollY}}function Xl(a){if(Ji(a)==="html")return a;const r=a.assignedSlot||a.parentNode||vE(a)&&a.host||Ro(a);return vE(r)?r.host:r}function Jx(a){const r=Xl(a);return Wi(r)?a.ownerDocument?a.ownerDocument.body:a.body:Mo(r)&&Ud(r)?r:Jx(r)}function Id(a,r,t){var n;r===void 0&&(r=[]),t===void 0&&(t=!0);const o=Jx(a),i=o===((n=a.ownerDocument)==null?void 0:n.body),c=Ar(o);if(i){const u=d0(c);return r.concat(c,c.visualViewport||[],Ud(o)?o:[],u&&t?Id(u):[])}return r.concat(o,Id(o,[],t))}function d0(a){return a.parent&&Object.getPrototypeOf(a.parent)?a.frameElement:null}const Ui=Math.min,As=Math.max,Xm=Math.round,um=Math.floor,Io=a=>({x:a,y:a}),tk={left:"right",right:"left",bottom:"top",top:"bottom"},ak={start:"end",end:"start"};function nk(a,r,t){return As(a,Ui(r,t))}function Qp(a,r){return typeof a=="function"?a(r):a}function $i(a){return a.split("-")[0]}function $d(a){return a.split("-")[1]}function rk(a){return a==="x"?"y":"x"}function ny(a){return a==="y"?"height":"width"}function Ii(a){return["top","bottom"].includes($i(a))?"y":"x"}function ry(a){return rk(Ii(a))}function ok(a,r,t){t===void 0&&(t=!1);const n=$d(a),o=ry(a),i=ny(o);let c=o==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return r.reference[i]>r.floating[i]&&(c=Km(c)),[c,Km(c)]}function lk(a){const r=Km(a);return[u0(a),r,u0(r)]}function u0(a){return a.replace(/start|end/g,r=>ak[r])}function sk(a,r,t){const n=["left","right"],o=["right","left"],i=["top","bottom"],c=["bottom","top"];switch(a){case"top":case"bottom":return t?r?o:n:r?n:o;case"left":case"right":return r?i:c;default:return[]}}function ik(a,r,t,n){const o=$d(a);let i=sk($i(a),t==="start",n);return o&&(i=i.map(c=>c+"-"+o),r&&(i=i.concat(i.map(u0)))),i}function Km(a){return a.replace(/left|right|bottom|top/g,r=>tk[r])}function ck(a){return{top:0,right:0,bottom:0,left:0,...a}}function Xx(a){return typeof a!="number"?ck(a):{top:a,right:a,bottom:a,left:a}}function ep(a){const{x:r,y:t,width:n,height:o}=a;return{width:n,height:o,top:t,left:r,right:r+n,bottom:t+o,x:r,y:t}}var tp=typeof document<"u"?h.useLayoutEffect:h.useEffect;const dk={...ux},uk=dk.useInsertionEffect,mk=uk||(a=>a());function pk(a){const r=h.useRef(()=>{});return mk(()=>{r.current=a}),h.useCallback(function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return r.current==null?void 0:r.current(...n)},[])}var yh={exports:{}},Jc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EE;function fk(){if(EE)return Jc;EE=1;var a=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function t(n,o,i){var c=null;if(i!==void 0&&(c=""+i),o.key!==void 0&&(c=""+o.key),"key"in o){i={};for(var u in o)u!=="key"&&(i[u]=o[u])}else i=o;return o=i.ref,{$$typeof:a,type:n,key:c,ref:o!==void 0?o:null,props:i}}return Jc.Fragment=r,Jc.jsx=t,Jc.jsxs=t,Jc}var xE;function gk(){return xE||(xE=1,yh.exports=fk()),yh.exports}var Xc=gk();function wE(a,r,t){let{reference:n,floating:o}=a;const i=Ii(r),c=ry(r),u=ny(c),m=$i(r),g=i==="y",f=n.x+n.width/2-o.width/2,y=n.y+n.height/2-o.height/2,v=n[u]/2-o[u]/2;let S;switch(m){case"top":S={x:f,y:n.y-o.height};break;case"bottom":S={x:f,y:n.y+n.height};break;case"right":S={x:n.x+n.width,y};break;case"left":S={x:n.x-o.width,y};break;default:S={x:n.x,y:n.y}}switch($d(r)){case"start":S[c]-=v*(t&&g?-1:1);break;case"end":S[c]+=v*(t&&g?-1:1);break}return S}const hk=async(a,r,t)=>{const{placement:n="bottom",strategy:o="absolute",middleware:i=[],platform:c}=t,u=i.filter(Boolean),m=await(c.isRTL==null?void 0:c.isRTL(r));let g=await c.getElementRects({reference:a,floating:r,strategy:o}),{x:f,y}=wE(g,n,m),v=n,S={},w=0;for(let x=0;x<u.length;x++){const{name:k,fn:E}=u[x],{x:I,y:M,data:N,reset:_}=await E({x:f,y,initialPlacement:n,placement:v,strategy:o,middlewareData:S,rects:g,platform:c,elements:{reference:a,floating:r}});f=I??f,y=M??y,S={...S,[k]:{...S[k],...N}},_&&w<=50&&(w++,typeof _=="object"&&(_.placement&&(v=_.placement),_.rects&&(g=_.rects===!0?await c.getElementRects({reference:a,floating:r,strategy:o}):_.rects),{x:f,y}=wE(g,v,m)),x=-1)}return{x:f,y,placement:v,strategy:o,middlewareData:S}};async function yk(a,r){var t;r===void 0&&(r={});const{x:n,y:o,platform:i,rects:c,elements:u,strategy:m}=a,{boundary:g="clippingAncestors",rootBoundary:f="viewport",elementContext:y="floating",altBoundary:v=!1,padding:S=0}=Qp(r,a),w=Xx(S),k=u[v?y==="floating"?"reference":"floating":y],E=ep(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(k)))==null||t?k:k.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(u.floating)),boundary:g,rootBoundary:f,strategy:m})),I=y==="floating"?{x:n,y:o,width:c.floating.width,height:c.floating.height}:c.reference,M=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u.floating)),N=await(i.isElement==null?void 0:i.isElement(M))?await(i.getScale==null?void 0:i.getScale(M))||{x:1,y:1}:{x:1,y:1},_=ep(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:I,offsetParent:M,strategy:m}):I);return{top:(E.top-_.top+w.top)/N.y,bottom:(_.bottom-E.bottom+w.bottom)/N.y,left:(E.left-_.left+w.left)/N.x,right:(_.right-E.right+w.right)/N.x}}const bk=a=>({name:"arrow",options:a,async fn(r){const{x:t,y:n,placement:o,rects:i,platform:c,elements:u,middlewareData:m}=r,{element:g,padding:f=0}=Qp(a,r)||{};if(g==null)return{};const y=Xx(f),v={x:t,y:n},S=ry(o),w=ny(S),x=await c.getDimensions(g),k=S==="y",E=k?"top":"left",I=k?"bottom":"right",M=k?"clientHeight":"clientWidth",N=i.reference[w]+i.reference[S]-v[S]-i.floating[w],_=v[S]-i.reference[S],P=await(c.getOffsetParent==null?void 0:c.getOffsetParent(g));let B=P?P[M]:0;(!B||!await(c.isElement==null?void 0:c.isElement(P)))&&(B=u.floating[M]||i.floating[w]);const R=N/2-_/2,W=B/2-x[w]/2-1,L=Ui(y[E],W),F=Ui(y[I],W),j=L,J=B-x[w]-F,Y=B/2-x[w]/2+R,D=nk(j,Y,J),A=!m.arrow&&$d(o)!=null&&Y!==D&&i.reference[w]/2-(Y<j?L:F)-x[w]/2<0,U=A?Y<j?Y-j:Y-J:0;return{[S]:v[S]+U,data:{[S]:D,centerOffset:Y-D-U,...A&&{alignmentOffset:U}},reset:A}}}),vk=function(a){return a===void 0&&(a={}),{name:"flip",options:a,async fn(r){var t,n;const{placement:o,middlewareData:i,rects:c,initialPlacement:u,platform:m,elements:g}=r,{mainAxis:f=!0,crossAxis:y=!0,fallbackPlacements:v,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:x=!0,...k}=Qp(a,r);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const E=$i(o),I=Ii(u),M=$i(u)===u,N=await(m.isRTL==null?void 0:m.isRTL(g.floating)),_=v||(M||!x?[Km(u)]:lk(u)),P=w!=="none";!v&&P&&_.push(...ik(u,x,w,N));const B=[u,..._],R=await yk(r,k),W=[];let L=((n=i.flip)==null?void 0:n.overflows)||[];if(f&&W.push(R[E]),y){const D=ok(o,c,N);W.push(R[D[0]],R[D[1]])}if(L=[...L,{placement:o,overflows:W}],!W.every(D=>D<=0)){var F,j;const D=(((F=i.flip)==null?void 0:F.index)||0)+1,A=B[D];if(A){var J;const K=y==="alignment"?I!==Ii(A):!1,X=((J=L[0])==null?void 0:J.overflows[0])>0;if(!K||X)return{data:{index:D,overflows:L},reset:{placement:A}}}let U=(j=L.filter(K=>K.overflows[0]<=0).sort((K,X)=>K.overflows[1]-X.overflows[1])[0])==null?void 0:j.placement;if(!U)switch(S){case"bestFit":{var Y;const K=(Y=L.filter(X=>{if(P){const O=Ii(X.placement);return O===I||O==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(O=>O>0).reduce((O,Q)=>O+Q,0)]).sort((X,O)=>X[1]-O[1])[0])==null?void 0:Y[0];K&&(U=K);break}case"initialPlacement":U=u;break}if(o!==U)return{reset:{placement:U}}}return{}}}};async function Ek(a,r){const{placement:t,platform:n,elements:o}=a,i=await(n.isRTL==null?void 0:n.isRTL(o.floating)),c=$i(t),u=$d(t),m=Ii(t)==="y",g=["left","top"].includes(c)?-1:1,f=i&&m?-1:1,y=Qp(r,a);let{mainAxis:v,crossAxis:S,alignmentAxis:w}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return u&&typeof w=="number"&&(S=u==="end"?w*-1:w),m?{x:S*f,y:v*g}:{x:v*g,y:S*f}}const xk=function(a){return a===void 0&&(a=0),{name:"offset",options:a,async fn(r){var t,n;const{x:o,y:i,placement:c,middlewareData:u}=r,m=await Ek(r,a);return c===((t=u.offset)==null?void 0:t.placement)&&(n=u.arrow)!=null&&n.alignmentOffset?{}:{x:o+m.x,y:i+m.y,data:{...m,placement:c}}}}};function Kx(a){const r=Kr(a);let t=parseFloat(r.width)||0,n=parseFloat(r.height)||0;const o=Mo(a),i=o?a.offsetWidth:t,c=o?a.offsetHeight:n,u=Xm(t)!==i||Xm(n)!==c;return u&&(t=i,n=c),{width:t,height:n,$:u}}function oy(a){return sr(a)?a:a.contextElement}function Mi(a){const r=oy(a);if(!Mo(r))return Io(1);const t=r.getBoundingClientRect(),{width:n,height:o,$:i}=Kx(r);let c=(i?Xm(t.width):t.width)/n,u=(i?Xm(t.height):t.height)/o;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const wk=Io(0);function e5(a){const r=Ar(a);return!ay()||!r.visualViewport?wk:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function Sk(a,r,t){return r===void 0&&(r=!1),!t||r&&t!==Ar(a)?!1:r}function Ps(a,r,t,n){r===void 0&&(r=!1),t===void 0&&(t=!1);const o=a.getBoundingClientRect(),i=oy(a);let c=Io(1);r&&(n?sr(n)&&(c=Mi(n)):c=Mi(a));const u=Sk(i,t,n)?e5(i):Io(0);let m=(o.left+u.x)/c.x,g=(o.top+u.y)/c.y,f=o.width/c.x,y=o.height/c.y;if(i){const v=Ar(i),S=n&&sr(n)?Ar(n):n;let w=v,x=d0(w);for(;x&&n&&S!==w;){const k=Mi(x),E=x.getBoundingClientRect(),I=Kr(x),M=E.left+(x.clientLeft+parseFloat(I.paddingLeft))*k.x,N=E.top+(x.clientTop+parseFloat(I.paddingTop))*k.y;m*=k.x,g*=k.y,f*=k.x,y*=k.y,m+=M,g+=N,w=Ar(x),x=d0(w)}}return ep({width:f,height:y,x:m,y:g})}function ly(a,r){const t=Vp(a).scrollLeft;return r?r.left+t:Ps(Ro(a)).left+t}function t5(a,r,t){t===void 0&&(t=!1);const n=a.getBoundingClientRect(),o=n.left+r.scrollLeft-(t?0:ly(a,n)),i=n.top+r.scrollTop;return{x:o,y:i}}function Ck(a){let{elements:r,rect:t,offsetParent:n,strategy:o}=a;const i=o==="fixed",c=Ro(n),u=r?Zp(r.floating):!1;if(n===c||u&&i)return t;let m={scrollLeft:0,scrollTop:0},g=Io(1);const f=Io(0),y=Mo(n);if((y||!y&&!i)&&((Ji(n)!=="body"||Ud(c))&&(m=Vp(n)),Mo(n))){const S=Ps(n);g=Mi(n),f.x=S.x+n.clientLeft,f.y=S.y+n.clientTop}const v=c&&!y&&!i?t5(c,m,!0):Io(0);return{width:t.width*g.x,height:t.height*g.y,x:t.x*g.x-m.scrollLeft*g.x+f.x+v.x,y:t.y*g.y-m.scrollTop*g.y+f.y+v.y}}function Nk(a){return Array.from(a.getClientRects())}function _k(a){const r=Ro(a),t=Vp(a),n=a.ownerDocument.body,o=As(r.scrollWidth,r.clientWidth,n.scrollWidth,n.clientWidth),i=As(r.scrollHeight,r.clientHeight,n.scrollHeight,n.clientHeight);let c=-t.scrollLeft+ly(a);const u=-t.scrollTop;return Kr(n).direction==="rtl"&&(c+=As(r.clientWidth,n.clientWidth)-o),{width:o,height:i,x:c,y:u}}function kk(a,r){const t=Ar(a),n=Ro(a),o=t.visualViewport;let i=n.clientWidth,c=n.clientHeight,u=0,m=0;if(o){i=o.width,c=o.height;const g=ay();(!g||g&&r==="fixed")&&(u=o.offsetLeft,m=o.offsetTop)}return{width:i,height:c,x:u,y:m}}function Ik(a,r){const t=Ps(a,!0,r==="fixed"),n=t.top+a.clientTop,o=t.left+a.clientLeft,i=Mo(a)?Mi(a):Io(1),c=a.clientWidth*i.x,u=a.clientHeight*i.y,m=o*i.x,g=n*i.y;return{width:c,height:u,x:m,y:g}}function SE(a,r,t){let n;if(r==="viewport")n=kk(a,t);else if(r==="document")n=_k(Ro(a));else if(sr(r))n=Ik(r,t);else{const o=e5(a);n={x:r.x-o.x,y:r.y-o.y,width:r.width,height:r.height}}return ep(n)}function a5(a,r){const t=Xl(a);return t===r||!sr(t)||Wi(t)?!1:Kr(t).position==="fixed"||a5(t,r)}function Mk(a,r){const t=r.get(a);if(t)return t;let n=Id(a,[],!1).filter(u=>sr(u)&&Ji(u)!=="body"),o=null;const i=Kr(a).position==="fixed";let c=i?Xl(a):a;for(;sr(c)&&!Wi(c);){const u=Kr(c),m=ty(c);!m&&u.position==="fixed"&&(o=null),(i?!m&&!o:!m&&u.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Ud(c)&&!m&&a5(a,c))?n=n.filter(f=>f!==c):o=u,c=Xl(c)}return r.set(a,n),n}function Ak(a){let{element:r,boundary:t,rootBoundary:n,strategy:o}=a;const c=[...t==="clippingAncestors"?Zp(r)?[]:Mk(r,this._c):[].concat(t),n],u=c[0],m=c.reduce((g,f)=>{const y=SE(r,f,o);return g.top=As(y.top,g.top),g.right=Ui(y.right,g.right),g.bottom=Ui(y.bottom,g.bottom),g.left=As(y.left,g.left),g},SE(r,u,o));return{width:m.right-m.left,height:m.bottom-m.top,x:m.left,y:m.top}}function Dk(a){const{width:r,height:t}=Kx(a);return{width:r,height:t}}function Rk(a,r,t){const n=Mo(r),o=Ro(r),i=t==="fixed",c=Ps(a,!0,i,r);let u={scrollLeft:0,scrollTop:0};const m=Io(0);function g(){m.x=ly(o)}if(n||!n&&!i)if((Ji(r)!=="body"||Ud(o))&&(u=Vp(r)),n){const S=Ps(r,!0,i,r);m.x=S.x+r.clientLeft,m.y=S.y+r.clientTop}else o&&g();i&&!n&&o&&g();const f=o&&!n&&!i?t5(o,u):Io(0),y=c.left+u.scrollLeft-m.x-f.x,v=c.top+u.scrollTop-m.y-f.y;return{x:y,y:v,width:c.width,height:c.height}}function bh(a){return Kr(a).position==="static"}function CE(a,r){if(!Mo(a)||Kr(a).position==="fixed")return null;if(r)return r(a);let t=a.offsetParent;return Ro(a)===t&&(t=t.ownerDocument.body),t}function n5(a,r){const t=Ar(a);if(Zp(a))return t;if(!Mo(a)){let o=Xl(a);for(;o&&!Wi(o);){if(sr(o)&&!bh(o))return o;o=Xl(o)}return t}let n=CE(a,r);for(;n&&K_(n)&&bh(n);)n=CE(n,r);return n&&Wi(n)&&bh(n)&&!ty(n)?t:n||ek(a)||t}const Tk=async function(a){const r=this.getOffsetParent||n5,t=this.getDimensions,n=await t(a.floating);return{reference:Rk(a.reference,await r(a.floating),a.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Pk(a){return Kr(a).direction==="rtl"}const Lk={convertOffsetParentRelativeRectToViewportRelativeRect:Ck,getDocumentElement:Ro,getClippingRect:Ak,getOffsetParent:n5,getElementRects:Tk,getClientRects:Nk,getDimensions:Dk,getScale:Mi,isElement:sr,isRTL:Pk};function r5(a,r){return a.x===r.x&&a.y===r.y&&a.width===r.width&&a.height===r.height}function Bk(a,r){let t=null,n;const o=Ro(a);function i(){var u;clearTimeout(n),(u=t)==null||u.disconnect(),t=null}function c(u,m){u===void 0&&(u=!1),m===void 0&&(m=1),i();const g=a.getBoundingClientRect(),{left:f,top:y,width:v,height:S}=g;if(u||r(),!v||!S)return;const w=um(y),x=um(o.clientWidth-(f+v)),k=um(o.clientHeight-(y+S)),E=um(f),M={rootMargin:-w+"px "+-x+"px "+-k+"px "+-E+"px",threshold:As(0,Ui(1,m))||1};let N=!0;function _(P){const B=P[0].intersectionRatio;if(B!==m){if(!N)return c();B?c(!1,B):n=setTimeout(()=>{c(!1,1e-7)},1e3)}B===1&&!r5(g,a.getBoundingClientRect())&&c(),N=!1}try{t=new IntersectionObserver(_,{...M,root:o.ownerDocument})}catch{t=new IntersectionObserver(_,M)}t.observe(a)}return c(!0),i}function zk(a,r,t,n){n===void 0&&(n={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:m=!1}=n,g=oy(a),f=o||i?[...g?Id(g):[],...Id(r)]:[];f.forEach(E=>{o&&E.addEventListener("scroll",t,{passive:!0}),i&&E.addEventListener("resize",t)});const y=g&&u?Bk(g,t):null;let v=-1,S=null;c&&(S=new ResizeObserver(E=>{let[I]=E;I&&I.target===g&&S&&(S.unobserve(r),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var M;(M=S)==null||M.observe(r)})),t()}),g&&!m&&S.observe(g),S.observe(r));let w,x=m?Ps(a):null;m&&k();function k(){const E=Ps(a);x&&!r5(x,E)&&t(),x=E,w=requestAnimationFrame(k)}return t(),()=>{var E;f.forEach(I=>{o&&I.removeEventListener("scroll",t),i&&I.removeEventListener("resize",t)}),y==null||y(),(E=S)==null||E.disconnect(),S=null,m&&cancelAnimationFrame(w)}}const Ok=xk,Fk=vk,NE=bk,Wk=(a,r,t)=>{const n=new Map,o={platform:Lk,...t},i={...o.platform,_c:n};return hk(a,r,{...o,platform:i})};var Pm=typeof document<"u"?h.useLayoutEffect:h.useEffect;function ap(a,r){if(a===r)return!0;if(typeof a!=typeof r)return!1;if(typeof a=="function"&&a.toString()===r.toString())return!0;let t,n,o;if(a&&r&&typeof a=="object"){if(Array.isArray(a)){if(t=a.length,t!==r.length)return!1;for(n=t;n--!==0;)if(!ap(a[n],r[n]))return!1;return!0}if(o=Object.keys(a),t=o.length,t!==Object.keys(r).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(r,o[n]))return!1;for(n=t;n--!==0;){const i=o[n];if(!(i==="_owner"&&a.$$typeof)&&!ap(a[i],r[i]))return!1}return!0}return a!==a&&r!==r}function o5(a){return typeof window>"u"?1:(a.ownerDocument.defaultView||window).devicePixelRatio||1}function _E(a,r){const t=o5(a);return Math.round(r*t)/t}function vh(a){const r=h.useRef(a);return Pm(()=>{r.current=a}),r}function Uk(a){a===void 0&&(a={});const{placement:r="bottom",strategy:t="absolute",middleware:n=[],platform:o,elements:{reference:i,floating:c}={},transform:u=!0,whileElementsMounted:m,open:g}=a,[f,y]=h.useState({x:0,y:0,strategy:t,placement:r,middlewareData:{},isPositioned:!1}),[v,S]=h.useState(n);ap(v,n)||S(n);const[w,x]=h.useState(null),[k,E]=h.useState(null),I=h.useCallback(K=>{K!==P.current&&(P.current=K,x(K))},[]),M=h.useCallback(K=>{K!==B.current&&(B.current=K,E(K))},[]),N=i||w,_=c||k,P=h.useRef(null),B=h.useRef(null),R=h.useRef(f),W=m!=null,L=vh(m),F=vh(o),j=vh(g),J=h.useCallback(()=>{if(!P.current||!B.current)return;const K={placement:r,strategy:t,middleware:v};F.current&&(K.platform=F.current),Wk(P.current,B.current,K).then(X=>{const O={...X,isPositioned:j.current!==!1};Y.current&&!ap(R.current,O)&&(R.current=O,Jr.flushSync(()=>{y(O)}))})},[v,r,t,F,j]);Pm(()=>{g===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,y(K=>({...K,isPositioned:!1})))},[g]);const Y=h.useRef(!1);Pm(()=>(Y.current=!0,()=>{Y.current=!1}),[]),Pm(()=>{if(N&&(P.current=N),_&&(B.current=_),N&&_){if(L.current)return L.current(N,_,J);J()}},[N,_,J,L,W]);const D=h.useMemo(()=>({reference:P,floating:B,setReference:I,setFloating:M}),[I,M]),A=h.useMemo(()=>({reference:N,floating:_}),[N,_]),U=h.useMemo(()=>{const K={position:t,left:0,top:0};if(!A.floating)return K;const X=_E(A.floating,f.x),O=_E(A.floating,f.y);return u?{...K,transform:"translate("+X+"px, "+O+"px)",...o5(A.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:X,top:O}},[t,u,A.floating,f.x,f.y]);return h.useMemo(()=>({...f,update:J,refs:D,elements:A,floatingStyles:U}),[f,J,D,A,U])}const $k=a=>{function r(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:a,fn(t){const{element:n,padding:o}=typeof a=="function"?a(t):a;return n&&r(n)?n.current!=null?NE({element:n.current,padding:o}).fn(t):{}:n?NE({element:n,padding:o}).fn(t):{}}}},jk=(a,r)=>({...Ok(a),options:[a,r]}),Hk=(a,r)=>({...Fk(a),options:[a,r]}),Yk=(a,r)=>({...$k(a),options:[a,r]}),qk={...ux};let kE=!1,Gk=0;const IE=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Gk++;function Zk(){const[a,r]=h.useState(()=>kE?IE():void 0);return tp(()=>{a==null&&r(IE())},[]),h.useEffect(()=>{kE=!0},[]),a}const Vk=qk.useId,l5=Vk||Zk,Qk=h.forwardRef(function(r,t){const{context:{placement:n,elements:{floating:o},middlewareData:{arrow:i,shift:c}},width:u=14,height:m=7,tipRadius:g=0,strokeWidth:f=0,staticOffset:y,stroke:v,d:S,style:{transform:w,...x}={},...k}=r,E=l5(),[I,M]=h.useState(!1);if(tp(()=>{if(!o)return;Kr(o).direction==="rtl"&&M(!0)},[o]),!o)return null;const[N,_]=n.split("-"),P=N==="top"||N==="bottom";let B=y;(P&&c!=null&&c.x||!P&&c!=null&&c.y)&&(B=null);const R=f*2,W=R/2,L=u/2*(g/-8+1),F=m/2*g/4,j=!!S,J=B&&_==="end"?"bottom":"top";let Y=B&&_==="end"?"right":"left";B&&I&&(Y=_==="end"?"left":"right");const D=(i==null?void 0:i.x)!=null?B||i.x:"",A=(i==null?void 0:i.y)!=null?B||i.y:"",U=S||"M0,0"+(" H"+u)+(" L"+(u-L)+","+(m-F))+(" Q"+u/2+","+m+" "+L+","+(m-F))+" Z",K={top:j?"rotate(180deg)":"",left:j?"rotate(90deg)":"rotate(-90deg)",bottom:j?"":"rotate(180deg)",right:j?"rotate(-90deg)":"rotate(90deg)"}[N];return Xc.jsxs("svg",{...k,"aria-hidden":!0,ref:t,width:j?u:u+R,height:u,viewBox:"0 0 "+u+" "+(m>u?m:u),style:{position:"absolute",pointerEvents:"none",[Y]:D,[J]:A,[N]:P||j?"100%":"calc(100% - "+R/2+"px)",transform:[K,w].filter(X=>!!X).join(" "),...x},children:[R>0&&Xc.jsx("path",{clipPath:"url(#"+E+")",fill:"none",stroke:v,strokeWidth:R+(S?0:1),d:U}),Xc.jsx("path",{stroke:R&&!S?k.fill:"none",d:U}),Xc.jsx("clipPath",{id:E,children:Xc.jsx("rect",{x:-W,y:W*(j?-1:1),width:u+R,height:u})})]})});function Jk(){const a=new Map;return{emit(r,t){var n;(n=a.get(r))==null||n.forEach(o=>o(t))},on(r,t){a.has(r)||a.set(r,new Set),a.get(r).add(t)},off(r,t){var n;(n=a.get(r))==null||n.delete(t)}}}const Xk=h.createContext(null),Kk=h.createContext(null),e8=()=>{var a;return((a=h.useContext(Xk))==null?void 0:a.id)||null},t8=()=>h.useContext(Kk);function a8(a){const{open:r=!1,onOpenChange:t,elements:n}=a,o=l5(),i=h.useRef({}),[c]=h.useState(()=>Jk()),u=e8()!=null,[m,g]=h.useState(n.reference),f=pk((S,w,x)=>{i.current.openEvent=S?w:void 0,c.emit("openchange",{open:S,event:w,reason:x,nested:u}),t==null||t(S,w,x)}),y=h.useMemo(()=>({setPositionReference:g}),[]),v=h.useMemo(()=>({reference:m||n.reference||null,floating:n.floating||null,domReference:n.reference}),[m,n.reference,n.floating]);return h.useMemo(()=>({dataRef:i,open:r,onOpenChange:f,elements:v,events:c,floatingId:o,refs:y}),[r,f,v,c,o,y])}function n8(a){a===void 0&&(a={});const{nodeId:r}=a,t=a8({...a,elements:{reference:null,floating:null,...a.elements}}),n=a.rootContext||t,o=n.elements,[i,c]=h.useState(null),[u,m]=h.useState(null),f=(o==null?void 0:o.domReference)||i,y=h.useRef(null),v=t8();tp(()=>{f&&(y.current=f)},[f]);const S=Uk({...a,elements:{...o,...u&&{reference:u}}}),w=h.useCallback(M=>{const N=sr(M)?{getBoundingClientRect:()=>M.getBoundingClientRect(),getClientRects:()=>M.getClientRects(),contextElement:M}:M;m(N),S.refs.setReference(N)},[S.refs]),x=h.useCallback(M=>{(sr(M)||M===null)&&(y.current=M,c(M)),(sr(S.refs.reference.current)||S.refs.reference.current===null||M!==null&&!sr(M))&&S.refs.setReference(M)},[S.refs]),k=h.useMemo(()=>({...S.refs,setReference:x,setPositionReference:w,domReference:y}),[S.refs,x,w]),E=h.useMemo(()=>({...S.elements,domReference:f}),[S.elements,f]),I=h.useMemo(()=>({...S,...n,refs:k,elements:E,nodeId:r}),[S,k,E,r,n]);return tp(()=>{n.dataRef.current.floatingContext=I;const M=v==null?void 0:v.nodesRef.current.find(N=>N.id===r);M&&(M.context=I)}),h.useMemo(()=>({...S,context:I,refs:k,elements:E}),[S,k,E,I])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var m0=function(r,t){return m0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},m0(r,t)};function Pn(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");m0(a,r);function t(){this.constructor=a}a.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var da=function(){return da=Object.assign||function(t){for(var n,o=1,i=arguments.length;o<i;o++){n=arguments[o];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t},da.apply(this,arguments)};function _o(a,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return a.concat(i||Array.prototype.slice.call(r))}var r8=function(a){var r=a.showTimeSelectOnly,t=r===void 0?!1:r,n=a.showTime,o=n===void 0?!1:n,i=a.className,c=a.children,u=t?"Choose Time":"Choose Date".concat(o?" and Time":"");return e.createElement("div",{className:i,role:"dialog","aria-label":u,"aria-modal":"true"},c)},o8=function(a,r){var t=h.useRef(null),n=h.useRef(a);n.current=a;var o=h.useCallback(function(i){var c,u=i.composed&&i.composedPath&&i.composedPath().find(function(m){return m instanceof Node})||i.target;t.current&&!t.current.contains(u)&&(r&&u instanceof HTMLElement&&u.classList.contains(r)||(c=n.current)===null||c===void 0||c.call(n,i))},[r]);return h.useEffect(function(){return document.addEventListener("mousedown",o),function(){document.removeEventListener("mousedown",o)}},[o]),t},Jp=function(a){var r=a.children,t=a.onClickOutside,n=a.className,o=a.containerRef,i=a.style,c=a.ignoreClass,u=o8(t,c);return e.createElement("div",{className:n,style:i,ref:function(m){u.current=m,o&&(o.current=m)}},r)},dt;(function(a){a.ArrowUp="ArrowUp",a.ArrowDown="ArrowDown",a.ArrowLeft="ArrowLeft",a.ArrowRight="ArrowRight",a.PageUp="PageUp",a.PageDown="PageDown",a.Home="Home",a.End="End",a.Enter="Enter",a.Space=" ",a.Tab="Tab",a.Escape="Escape",a.Backspace="Backspace",a.X="x"})(dt||(dt={}));function s5(){var a=typeof window<"u"?window:globalThis;return a}var jd=12;function va(a){if(a==null)return new Date;var r=typeof a=="string"?Gx(a):wt(a);return Xp(r)?r:new Date}function Eh(a,r,t,n,o){o===void 0&&(o=va());for(var i=ji(t)||ji(sy()),c=Array.isArray(r)?r:[r],u=0,m=c;u<m.length;u++){var g=m[u],f=R_(a,g,o,{locale:i});if(Xp(f)&&(!n||a===Ga(f,g,t)))return f}return null}function Xp(a,r){return Gm(a)&&!Ts(a,new Date("1/1/1800"))}function Ga(a,r,t){if(t==="en")return lr(a,r,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=t?ji(t):void 0;return t&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(t,'"].')),n=n||ji(sy()),lr(a,r,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function qr(a,r){var t=r.dateFormat,n=r.locale,o=Array.isArray(t)&&t.length>0?t[0]:t;return a&&Ga(a,o,n)||""}var i5=" - ";function l8(a,r,t){if(!a)return"";var n=qr(a,t),o=r?qr(r,t):"";return"".concat(n).concat(i5).concat(o)}function s8(a,r){if(!(a!=null&&a.length))return"";var t=a[0]?qr(a[0],r):"";if(a.length===1)return t;if(a.length===2&&a[1]){var n=qr(a[1],r);return"".concat(t,", ").concat(n)}var o=a.length-1;return"".concat(t," (+").concat(o,")")}function xh(a,r){var t=r.hour,n=t===void 0?0:t,o=r.minute,i=o===void 0?0:o,c=r.second,u=c===void 0?0:c;return Dm(Rm(Tm(a,u),i),n)}function i8(a){return J0(a)}function c8(a,r){return Ga(a,"ddd",r)}function Lm(a){return Rs(a)}function Vl(a,r,t){var n=ji(r||sy());return dl(a,{locale:n,weekStartsOn:t})}function sl(a){return Ox(a)}function dd(a){return qp(a)}function ME(a){return s0(a)}function AE(){return Rs(va())}function DE(a){return Bx(a)}function d8(a){return O4(a)}function u8(a){return zx(a)}function So(a,r){return a&&r?B_(a,r):!a&&!r}function or(a,r){return a&&r?P_(a,r):!a&&!r}function np(a,r){return a&&r?L_(a,r):!a&&!r}function ca(a,r){return a&&r?L4(a,r):!a&&!r}function Ns(a,r){return a&&r?zN(a,r):!a&&!r}function ud(a,r,t){var n,o=Rs(r),i=Bx(t);try{n=kd(a,{start:o,end:i})}catch{n=!1}return n}function sy(){var a=s5();return a.__localeId__}function ji(a){if(typeof a=="string"){var r=s5();return r.__localeData__?r.__localeData__[a]:void 0}else return a}function m8(a,r,t){return r(Ga(a,"EEEE",t))}function p8(a,r){return Ga(a,"EEEEEE",r)}function f8(a,r){return Ga(a,"EEE",r)}function iy(a,r){return Ga(Gr(va(),a),"LLLL",r)}function c5(a,r){return Ga(Gr(va(),a),"LLL",r)}function g8(a,r){return Ga(Si(va(),a),"QQQ",r)}function Vr(a,r){var t=r===void 0?{}:r,n=t.minDate,o=t.maxDate,i=t.excludeDates,c=t.excludeDateIntervals,u=t.includeDates,m=t.includeDateIntervals,g=t.filterDate;return Hd(a,{minDate:n,maxDate:o})||i&&i.some(function(f){return f instanceof Date?ca(a,f):ca(a,f.date)})||c&&c.some(function(f){var y=f.start,v=f.end;return kd(a,{start:y,end:v})})||u&&!u.some(function(f){return ca(a,f)})||m&&!m.some(function(f){var y=f.start,v=f.end;return kd(a,{start:y,end:v})})||g&&!g(va(a))||!1}function cy(a,r){var t=r===void 0?{}:r,n=t.excludeDates,o=t.excludeDateIntervals;return o&&o.length>0?o.some(function(i){var c=i.start,u=i.end;return kd(a,{start:c,end:u})}):n&&n.some(function(i){var c;return i instanceof Date?ca(a,i):ca(a,(c=i.date)!==null&&c!==void 0?c:new Date)})||!1}function d5(a,r){var t=r===void 0?{}:r,n=t.minDate,o=t.maxDate,i=t.excludeDates,c=t.includeDates,u=t.filterDate;return Hd(a,{minDate:n?Ox(n):void 0,maxDate:o?zx(o):void 0})||(i==null?void 0:i.some(function(m){return or(a,m instanceof Date?m:m.date)}))||c&&!c.some(function(m){return or(a,m)})||u&&!u(va(a))||!1}function mm(a,r,t,n){var o=Qt(a),i=Kn(a),c=Qt(r),u=Kn(r),m=Qt(n);return o===c&&o===m?i<=t&&t<=u:o<c?m===o&&i<=t||m===c&&u>=t||m<c&&m>o:!1}function h8(a,r){var t=r===void 0?{}:r,n=t.minDate,o=t.maxDate,i=t.excludeDates,c=t.includeDates;return Hd(a,{minDate:n,maxDate:o})||i&&i.some(function(u){return or(u instanceof Date?u:u.date,a)})||c&&!c.some(function(u){return or(u,a)})||!1}function pm(a,r){var t=r===void 0?{}:r,n=t.minDate,o=t.maxDate,i=t.excludeDates,c=t.includeDates,u=t.filterDate;return Hd(a,{minDate:n,maxDate:o})||(i==null?void 0:i.some(function(m){return np(a,m instanceof Date?m:m.date)}))||c&&!c.some(function(m){return np(a,m)})||u&&!u(va(a))||!1}function fm(a,r,t){if(!r||!t||!Gm(r)||!Gm(t))return!1;var n=Qt(r),o=Qt(t);return n<=a&&o>=a}function Bm(a,r){var t=r===void 0?{}:r,n=t.minDate,o=t.maxDate,i=t.excludeDates,c=t.includeDates,u=t.filterDate,m=new Date(a,0,1);return Hd(m,{minDate:n?qp(n):void 0,maxDate:o?Fx(o):void 0})||(i==null?void 0:i.some(function(g){return So(m,g instanceof Date?g:g.date)}))||c&&!c.some(function(g){return So(m,g)})||u&&!u(va(m))||!1}function gm(a,r,t,n){var o=Qt(a),i=Is(a),c=Qt(r),u=Is(r),m=Qt(n);return o===c&&o===m?i<=t&&t<=u:o<c?m===o&&i<=t||m===c&&u>=t||m<c&&m>o:!1}function Hd(a,r){var t,n=r===void 0?{}:r,o=n.minDate,i=n.maxDate;return(t=o&&Oi(a,o)<0||i&&Oi(a,i)>0)!==null&&t!==void 0?t:!1}function RE(a,r){return r.some(function(t){return ol(t)===ol(a)&&ll(t)===ll(a)&&Zl(t)===Zl(a)})}function TE(a,r){var t=r===void 0?{}:r,n=t.excludeTimes,o=t.includeTimes,i=t.filterTime;return n&&RE(a,n)||o&&!RE(a,o)||i&&!i(a)||!1}function PE(a,r){var t=r.minTime,n=r.maxTime;if(!t||!n)throw new Error("Both minTime and maxTime props required");var o=va();o=Dm(o,ol(a)),o=Rm(o,ll(a)),o=Tm(o,Zl(a));var i=va();i=Dm(i,ol(t)),i=Rm(i,ll(t)),i=Tm(i,Zl(t));var c=va();c=Dm(c,ol(n)),c=Rm(c,ll(n)),c=Tm(c,Zl(n));var u;try{u=!kd(o,{start:i,end:c})}catch{u=!1}return u}function LE(a,r){var t=r===void 0?{}:r,n=t.minDate,o=t.includeDates,i=Ms(a,1);return n&&Zm(n,i)>0||o&&o.every(function(c){return Zm(c,i)>0})||!1}function BE(a,r){var t=r===void 0?{}:r,n=t.maxDate,o=t.includeDates,i=mo(a,1);return n&&Zm(i,n)>0||o&&o.every(function(c){return Zm(i,c)>0})||!1}function y8(a,r){var t=r===void 0?{}:r,n=t.minDate,o=t.includeDates,i=qp(a),c=Vx(i);return n&&Vm(n,c)>0||o&&o.every(function(u){return Vm(u,c)>0})||!1}function b8(a,r){var t=r===void 0?{}:r,n=t.maxDate,o=t.includeDates,i=Fx(a),c=Q0(i,1);return n&&Vm(c,n)>0||o&&o.every(function(u){return Vm(c,u)>0})||!1}function zE(a,r){var t=r===void 0?{}:r,n=t.minDate,o=t.includeDates,i=Fi(a,1);return n&&Qm(n,i)>0||o&&o.every(function(c){return Qm(c,i)>0})||!1}function v8(a,r){var t=r===void 0?{}:r,n=t.minDate,o=t.yearItemNumber,i=o===void 0?jd:o,c=dd(Fi(a,i)),u=Gl(c,i).endPeriod,m=n&&Qt(n);return m&&m>u||!1}function OE(a,r){var t=r===void 0?{}:r,n=t.maxDate,o=t.includeDates,i=nl(a,1);return n&&Qm(i,n)>0||o&&o.every(function(c){return Qm(i,c)>0})||!1}function E8(a,r){var t=r===void 0?{}:r,n=t.maxDate,o=t.yearItemNumber,i=o===void 0?jd:o,c=nl(a,i),u=Gl(c,i).startPeriod,m=n&&Qt(n);return m&&m<u||!1}function u5(a){var r=a.minDate,t=a.includeDates;if(t&&r){var n=t.filter(function(o){return Oi(o,r)>=0});return uE(n)}else return t?uE(t):r}function m5(a){var r=a.maxDate,t=a.includeDates;if(t&&r){var n=t.filter(function(o){return Oi(o,r)<=0});return dE(n)}else return t?dE(t):r}function FE(a,r){var t;a===void 0&&(a=[]),r===void 0&&(r="react-datepicker__day--highlighted");for(var n=new Map,o=0,i=a.length;o<i;o++){var c=a[o];if(rl(c)){var u=Ga(c,"MM.dd.yyyy"),m=n.get(u)||[];m.includes(r)||(m.push(r),n.set(u,m))}else if(typeof c=="object"){var g=Object.keys(c),f=(t=g[0])!==null&&t!==void 0?t:"",y=c[f];if(typeof f=="string"&&Array.isArray(y))for(var v=0,S=y.length;v<S;v++){var w=y[v];if(w){var u=Ga(w,"MM.dd.yyyy"),m=n.get(u)||[];m.includes(f)||(m.push(f),n.set(u,m))}}}}return n}function x8(a,r){return a.length!==r.length?!1:a.every(function(t,n){return t===r[n]})}function w8(a,r){a===void 0&&(a=[]),r===void 0&&(r="react-datepicker__day--holidays");var t=new Map;return a.forEach(function(n){var o=n.date,i=n.holidayName;if(rl(o)){var c=Ga(o,"MM.dd.yyyy"),u=t.get(c)||{className:"",holidayNames:[]};if(!("className"in u&&u.className===r&&x8(u.holidayNames,[i]))){u.className=r;var m=u.holidayNames;u.holidayNames=m?_o(_o([],m,!0),[i],!1):[i],t.set(c,u)}}}),t}function S8(a,r,t,n,o){for(var i=o.length,c=[],u=0;u<i;u++){var m=a,g=o[u];g&&(m=D4(m,ol(g)),m=l0(m,ll(g)),m=P4(m,Zl(g)));var f=l0(a,(t+1)*n);ul(m,r)&&Ts(m,f)&&g!=null&&c.push(g)}return c}function WE(a){return a<10?"0".concat(a):"".concat(a)}function Gl(a,r){r===void 0&&(r=jd);var t=Math.ceil(Qt(a)/r)*r,n=t-(r-1);return{startPeriod:n,endPeriod:t}}function C8(a){var r=new Date(a.getFullYear(),a.getMonth(),a.getDate()),t=new Date(a.getFullYear(),a.getMonth(),a.getDate(),24);return Math.round((+t-+r)/36e5)}function UE(a){var r=a.getSeconds(),t=a.getMilliseconds();return wt(a.getTime()-r*1e3-t)}function N8(a,r){return UE(a).getTime()===UE(r).getTime()}function $E(a){if(!rl(a))throw new Error("Invalid date");var r=new Date(a);return r.setHours(0,0,0,0),r}function jE(a,r){if(!rl(a)||!rl(r))throw new Error("Invalid date received");var t=$E(a),n=$E(r);return Ts(t,n)}function p5(a){return a.key===dt.Space}var _8=function(a){Pn(r,a);function r(t){var n=a.call(this,t)||this;return n.inputRef=e.createRef(),n.onTimeChange=function(o){var i,c;n.setState({time:o});var u=n.props.date,m=u instanceof Date&&!isNaN(+u),g=m?u:new Date;if(o!=null&&o.includes(":")){var f=o.split(":"),y=f[0],v=f[1];g.setHours(Number(y)),g.setMinutes(Number(v))}(c=(i=n.props).onChange)===null||c===void 0||c.call(i,g)},n.renderTimeInput=function(){var o=n.state.time,i=n.props,c=i.date,u=i.timeString,m=i.customTimeInput;return m?h.cloneElement(m,{date:c,value:o,onChange:n.onTimeChange}):e.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var g;(g=n.inputRef.current)===null||g===void 0||g.focus()},required:!0,value:o,onChange:function(g){n.onTimeChange(g.target.value||u)}})},n.state={time:n.props.timeString},n}return r.getDerivedStateFromProps=function(t,n){return t.timeString!==n.time?{time:t.timeString}:null},r.prototype.render=function(){return e.createElement("div",{className:"react-datepicker__input-time-container"},e.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),e.createElement("div",{className:"react-datepicker-time__input-container"},e.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},r}(h.Component),k8=function(a){Pn(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.dayEl=h.createRef(),t.handleClick=function(n){!t.isDisabled()&&t.props.onClick&&t.props.onClick(n)},t.handleMouseEnter=function(n){!t.isDisabled()&&t.props.onMouseEnter&&t.props.onMouseEnter(n)},t.handleOnKeyDown=function(n){var o,i,c=n.key;c===dt.Space&&(n.preventDefault(),n.key=dt.Enter),(i=(o=t.props).handleOnKeyDown)===null||i===void 0||i.call(o,n)},t.isSameDay=function(n){return ca(t.props.day,n)},t.isKeyboardSelected=function(){var n;if(t.props.disabledKeyboardNavigation)return!1;var o=t.props.selectsMultiple?(n=t.props.selectedDates)===null||n===void 0?void 0:n.some(function(c){return t.isSameDayOrWeek(c)}):t.isSameDayOrWeek(t.props.selected),i=t.props.preSelection&&t.isDisabled(t.props.preSelection);return!o&&t.isSameDayOrWeek(t.props.preSelection)&&!i},t.isDisabled=function(n){return n===void 0&&(n=t.props.day),Vr(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(){return cy(t.props.day,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.isStartOfWeek=function(){return ca(t.props.day,Vl(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameWeek=function(n){return t.props.showWeekPicker&&ca(n,Vl(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameDayOrWeek=function(n){return t.isSameDay(n)||t.isSameWeek(n)},t.getHighLightedClass=function(){var n=t.props,o=n.day,i=n.highlightDates;if(!i)return!1;var c=Ga(o,"MM.dd.yyyy");return i.get(c)},t.getHolidaysClass=function(){var n,o=t.props,i=o.day,c=o.holidays;if(!c)return[void 0];var u=Ga(i,"MM.dd.yyyy");return c.has(u)?[(n=c.get(u))===null||n===void 0?void 0:n.className]:[void 0]},t.isInRange=function(){var n=t.props,o=n.day,i=n.startDate,c=n.endDate;return!i||!c?!1:ud(o,i,c)},t.isInSelectingRange=function(){var n,o=t.props,i=o.day,c=o.selectsStart,u=o.selectsEnd,m=o.selectsRange,g=o.selectsDisabledDaysInRange,f=o.startDate,y=o.endDate,v=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;return!(c||u||m)||!v||!g&&t.isDisabled()?!1:c&&y&&(Ts(v,y)||Ns(v,y))?ud(i,v,y):u&&f&&(ul(v,f)||Ns(v,f))||m&&f&&!y&&(ul(v,f)||Ns(v,f))?ud(i,f,v):!1},t.isSelectingRangeStart=function(){var n;if(!t.isInSelectingRange())return!1;var o=t.props,i=o.day,c=o.startDate,u=o.selectsStart,m=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;return u?ca(i,m):ca(i,c)},t.isSelectingRangeEnd=function(){var n;if(!t.isInSelectingRange())return!1;var o=t.props,i=o.day,c=o.endDate,u=o.selectsEnd,m=o.selectsRange,g=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;return u||m?ca(i,g):ca(i,c)},t.isRangeStart=function(){var n=t.props,o=n.day,i=n.startDate,c=n.endDate;return!i||!c?!1:ca(i,o)},t.isRangeEnd=function(){var n=t.props,o=n.day,i=n.startDate,c=n.endDate;return!i||!c?!1:ca(c,o)},t.isWeekend=function(){var n=TN(t.props.day);return n===0||n===6},t.isAfterMonth=function(){return t.props.month!==void 0&&(t.props.month+1)%12===Kn(t.props.day)},t.isBeforeMonth=function(){return t.props.month!==void 0&&(Kn(t.props.day)+1)%12===t.props.month},t.isCurrentDay=function(){return t.isSameDay(va())},t.isSelected=function(){var n;return t.props.selectsMultiple?(n=t.props.selectedDates)===null||n===void 0?void 0:n.some(function(o){return t.isSameDayOrWeek(o)}):t.isSameDayOrWeek(t.props.selected)},t.getClassNames=function(n){var o=t.props.dayClassName?t.props.dayClassName(n):void 0;return Yn("react-datepicker__day",o,"react-datepicker__day--"+c8(t.props.day),{"react-datepicker__day--disabled":t.isDisabled(),"react-datepicker__day--excluded":t.isExcluded(),"react-datepicker__day--selected":t.isSelected(),"react-datepicker__day--keyboard-selected":t.isKeyboardSelected(),"react-datepicker__day--range-start":t.isRangeStart(),"react-datepicker__day--range-end":t.isRangeEnd(),"react-datepicker__day--in-range":t.isInRange(),"react-datepicker__day--in-selecting-range":t.isInSelectingRange(),"react-datepicker__day--selecting-range-start":t.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":t.isSelectingRangeEnd(),"react-datepicker__day--today":t.isCurrentDay(),"react-datepicker__day--weekend":t.isWeekend(),"react-datepicker__day--outside-month":t.isAfterMonth()||t.isBeforeMonth()},t.getHighLightedClass(),t.getHolidaysClass())},t.getAriaLabel=function(){var n=t.props,o=n.day,i=n.ariaLabelPrefixWhenEnabled,c=i===void 0?"Choose":i,u=n.ariaLabelPrefixWhenDisabled,m=u===void 0?"Not available":u,g=t.isDisabled()||t.isExcluded()?m:c;return"".concat(g," ").concat(Ga(o,"PPPP",t.props.locale))},t.getTitle=function(){var n=t.props,o=n.day,i=n.holidays,c=i===void 0?new Map:i,u=n.excludeDates,m=Ga(o,"MM.dd.yyyy"),g=[];return c.has(m)&&g.push.apply(g,c.get(m).holidayNames),t.isExcluded()&&g.push(u==null?void 0:u.filter(function(f){return f instanceof Date?ca(f,o):ca(f==null?void 0:f.date,o)}).map(function(f){if(!(f instanceof Date))return f==null?void 0:f.message})),g.join(", ")},t.getTabIndex=function(){var n=t.props.selected,o=t.props.preSelection,i=!(t.props.showWeekPicker&&(t.props.showWeekNumber||!t.isStartOfWeek()))&&(t.isKeyboardSelected()||t.isSameDay(n)&&ca(o,n))?0:-1;return i},t.handleFocusDay=function(){var n;t.shouldFocusDay()&&((n=t.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},t.renderDayContents=function(){return t.props.monthShowsDuplicateDaysEnd&&t.isAfterMonth()||t.props.monthShowsDuplicateDaysStart&&t.isBeforeMonth()?null:t.props.renderDayContents?t.props.renderDayContents(yE(t.props.day),t.props.day):yE(t.props.day)},t.render=function(){return e.createElement("div",{ref:t.dayEl,className:t.getClassNames(t.props.day),onKeyDown:t.handleOnKeyDown,onClick:t.handleClick,onMouseEnter:t.props.usePointerEvent?void 0:t.handleMouseEnter,onPointerEnter:t.props.usePointerEvent?t.handleMouseEnter:void 0,tabIndex:t.getTabIndex(),"aria-label":t.getAriaLabel(),role:"option",title:t.getTitle(),"aria-disabled":t.isDisabled(),"aria-current":t.isCurrentDay()?"date":void 0,"aria-selected":t.isSelected()||t.isInRange()},t.renderDayContents(),t.getTitle()!==""&&e.createElement("span",{className:"overlay"},t.getTitle()))},t}return r.prototype.componentDidMount=function(){this.handleFocusDay()},r.prototype.componentDidUpdate=function(){this.handleFocusDay()},r.prototype.shouldFocusDay=function(){var t=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(t=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(t=!1),this.isDayActiveElement()&&(t=!0),this.isDuplicateDay()&&(t=!1)),t},r.prototype.isDayActiveElement=function(){var t,n,o;return((n=(t=this.props.containerRef)===null||t===void 0?void 0:t.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((o=document.activeElement)===null||o===void 0?void 0:o.classList.contains("react-datepicker__day"))},r.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},r}(h.Component),I8=function(a){Pn(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.weekNumberEl=h.createRef(),t.handleClick=function(n){t.props.onClick&&t.props.onClick(n)},t.handleOnKeyDown=function(n){var o,i,c=n.key;c===dt.Space&&(n.preventDefault(),n.key=dt.Enter),(i=(o=t.props).handleOnKeyDown)===null||i===void 0||i.call(o,n)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!ca(t.props.date,t.props.selected)&&ca(t.props.date,t.props.preSelection)},t.getTabIndex=function(){return t.props.showWeekPicker&&t.props.showWeekNumber&&(t.isKeyboardSelected()||ca(t.props.date,t.props.selected)&&ca(t.props.preSelection,t.props.selected))?0:-1},t.handleFocusWeekNumber=function(n){var o=!1;t.getTabIndex()===0&&!(n!=null&&n.isInputFocused)&&ca(t.props.date,t.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(o=!0),t.props.inline&&!t.props.shouldFocusDayInline&&(o=!1),t.props.containerRef&&t.props.containerRef.current&&t.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(o=!0)),o&&t.weekNumberEl.current&&t.weekNumberEl.current.focus({preventScroll:!0})},t}return Object.defineProperty(r,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),r.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},r.prototype.componentDidUpdate=function(t){this.handleFocusWeekNumber(t)},r.prototype.render=function(){var t=this.props,n=t.weekNumber,o=t.isWeekDisabled,i=t.ariaLabelPrefix,c=i===void 0?r.defaultProps.ariaLabelPrefix:i,u=t.onClick,m={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!u&&!o,"react-datepicker__week-number--selected":!!u&&ca(this.props.date,this.props.selected)};return e.createElement("div",{ref:this.weekNumberEl,className:Yn(m),"aria-label":"".concat(c," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},n)},r}(h.Component),M8=function(a){Pn(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.isDisabled=function(n){return Vr(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.handleDayClick=function(n,o){t.props.onDayClick&&t.props.onDayClick(n,o)},t.handleDayMouseEnter=function(n){t.props.onDayMouseEnter&&t.props.onDayMouseEnter(n)},t.handleWeekClick=function(n,o,i){for(var c,u,m,g=new Date(n),f=0;f<7;f++){var y=new Date(n);y.setDate(y.getDate()+f);var v=!t.isDisabled(y);if(v){g=y;break}}typeof t.props.onWeekSelect=="function"&&t.props.onWeekSelect(g,o,i),t.props.showWeekPicker&&t.handleDayClick(g,i),((c=t.props.shouldCloseOnSelect)!==null&&c!==void 0?c:r.defaultProps.shouldCloseOnSelect)&&((m=(u=t.props).setOpen)===null||m===void 0||m.call(u,!1))},t.formatWeekNumber=function(n){return t.props.formatWeekNumber?t.props.formatWeekNumber(n):i8(n)},t.isWeekDisabled=function(){for(var n=t.startOfWeek(),o=uo(n,6),i=new Date(n);i<=o;){if(!t.isDisabled(i))return!1;i=uo(i,1)}return!0},t.renderDays=function(){var n=t.startOfWeek(),o=[],i=t.formatWeekNumber(n);if(t.props.showWeekNumber){var c=t.props.onWeekSelect||t.props.showWeekPicker?t.handleWeekClick.bind(t,n,i):void 0;o.push(e.createElement(I8,da({key:"W"},r.defaultProps,t.props,{weekNumber:i,isWeekDisabled:t.isWeekDisabled(),date:n,onClick:c})))}return o.concat([0,1,2,3,4,5,6].map(function(u){var m=uo(n,u);return e.createElement(k8,da({},r.defaultProps,t.props,{ariaLabelPrefixWhenEnabled:t.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:t.props.disabledDayAriaLabelPrefix,key:m.valueOf(),day:m,onClick:t.handleDayClick.bind(t,m),onMouseEnter:t.handleDayMouseEnter.bind(t,m)}))}))},t.startOfWeek=function(){return Vl(t.props.day,t.props.locale,t.props.calendarStartDay)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!ca(t.startOfWeek(),t.props.selected)&&ca(t.startOfWeek(),t.props.preSelection)},t}return Object.defineProperty(r,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),r.prototype.render=function(){var t={"react-datepicker__week":!0,"react-datepicker__week--selected":ca(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return e.createElement("div",{className:Yn(t)},this.renderDays())},r}(h.Component),Kc,A8=6,Ai={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},wh=(Kc={},Kc[Ai.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},Kc[Ai.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},Kc[Ai.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},Kc),hm=1;function HE(a,r){return a?Ai.FOUR_COLUMNS:r?Ai.TWO_COLUMNS:Ai.THREE_COLUMNS}var D8=function(a){Pn(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.MONTH_REFS=_o([],Array(12),!0).map(function(){return h.createRef()}),t.QUARTER_REFS=_o([],Array(4),!0).map(function(){return h.createRef()}),t.isDisabled=function(n){return Vr(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(n){return cy(n,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.handleDayClick=function(n,o){var i,c;(c=(i=t.props).onDayClick)===null||c===void 0||c.call(i,n,o,t.props.orderInDisplay)},t.handleDayMouseEnter=function(n){var o,i;(i=(o=t.props).onDayMouseEnter)===null||i===void 0||i.call(o,n)},t.handleMouseLeave=function(){var n,o;(o=(n=t.props).onMouseLeave)===null||o===void 0||o.call(n)},t.isRangeStartMonth=function(n){var o=t.props,i=o.day,c=o.startDate,u=o.endDate;return!c||!u?!1:or(Gr(i,n),c)},t.isRangeStartQuarter=function(n){var o=t.props,i=o.day,c=o.startDate,u=o.endDate;return!c||!u?!1:np(Si(i,n),c)},t.isRangeEndMonth=function(n){var o=t.props,i=o.day,c=o.startDate,u=o.endDate;return!c||!u?!1:or(Gr(i,n),u)},t.isRangeEndQuarter=function(n){var o=t.props,i=o.day,c=o.startDate,u=o.endDate;return!c||!u?!1:np(Si(i,n),u)},t.isInSelectingRangeMonth=function(n){var o,i=t.props,c=i.day,u=i.selectsStart,m=i.selectsEnd,g=i.selectsRange,f=i.startDate,y=i.endDate,v=(o=t.props.selectingDate)!==null&&o!==void 0?o:t.props.preSelection;return!(u||m||g)||!v?!1:u&&y?mm(v,y,n,c):m&&f||g&&f&&!y?mm(f,v,n,c):!1},t.isSelectingMonthRangeStart=function(n){var o;if(!t.isInSelectingRangeMonth(n))return!1;var i=t.props,c=i.day,u=i.startDate,m=i.selectsStart,g=Gr(c,n),f=(o=t.props.selectingDate)!==null&&o!==void 0?o:t.props.preSelection;return m?or(g,f):or(g,u)},t.isSelectingMonthRangeEnd=function(n){var o;if(!t.isInSelectingRangeMonth(n))return!1;var i=t.props,c=i.day,u=i.endDate,m=i.selectsEnd,g=i.selectsRange,f=Gr(c,n),y=(o=t.props.selectingDate)!==null&&o!==void 0?o:t.props.preSelection;return m||g?or(f,y):or(f,u)},t.isInSelectingRangeQuarter=function(n){var o,i=t.props,c=i.day,u=i.selectsStart,m=i.selectsEnd,g=i.selectsRange,f=i.startDate,y=i.endDate,v=(o=t.props.selectingDate)!==null&&o!==void 0?o:t.props.preSelection;return!(u||m||g)||!v?!1:u&&y?gm(v,y,n,c):m&&f||g&&f&&!y?gm(f,v,n,c):!1},t.isWeekInMonth=function(n){var o=t.props.day,i=uo(n,6);return or(n,o)||or(i,o)},t.isCurrentMonth=function(n,o){return Qt(n)===Qt(va())&&o===Kn(va())},t.isCurrentQuarter=function(n,o){return Qt(n)===Qt(va())&&o===Is(va())},t.isSelectedMonth=function(n,o,i){return Kn(i)===o&&Qt(n)===Qt(i)},t.isSelectMonthInList=function(n,o,i){return i.some(function(c){return t.isSelectedMonth(n,o,c)})},t.isSelectedQuarter=function(n,o,i){return Is(n)===o&&Qt(n)===Qt(i)},t.isMonthSelected=function(){var n=t.props,o=n.day,i=n.selected,c=n.selectedDates,u=n.selectsMultiple,m=Kn(o);return u?c==null?void 0:c.some(function(g){return t.isSelectedMonth(o,m,g)}):!!i&&t.isSelectedMonth(o,m,i)},t.renderWeeks=function(){for(var n=[],o=t.props.fixedHeight,i=0,c=!1,u=Vl(sl(t.props.day),t.props.locale,t.props.calendarStartDay),m=function(w){return t.props.showWeekPicker?Vl(w,t.props.locale,t.props.calendarStartDay):t.props.preSelection},g=function(w){return t.props.showWeekPicker?Vl(w,t.props.locale,t.props.calendarStartDay):t.props.selected},f=t.props.selected?g(t.props.selected):void 0,y=t.props.preSelection?m(t.props.preSelection):void 0;n.push(e.createElement(M8,da({},t.props,{ariaLabelPrefix:t.props.weekAriaLabelPrefix,key:i,day:u,month:Kn(t.props.day),onDayClick:t.handleDayClick,onDayMouseEnter:t.handleDayMouseEnter,selected:f,preSelection:y,showWeekNumber:t.props.showWeekNumbers}))),!c;){i++,u=qm(u,1);var v=o&&i>=A8,S=!o&&!t.isWeekInMonth(u);if(v||S)if(t.props.peekNextMonth)c=!0;else break}return n},t.onMonthClick=function(n,o){var i=t.isMonthDisabledForLabelDate(o),c=i.isDisabled,u=i.labelDate;c||t.handleDayClick(sl(u),n)},t.onMonthMouseEnter=function(n){var o=t.isMonthDisabledForLabelDate(n),i=o.isDisabled,c=o.labelDate;i||t.handleDayMouseEnter(sl(c))},t.handleMonthNavigation=function(n,o){var i,c,u,m;(c=(i=t.props).setPreSelection)===null||c===void 0||c.call(i,o),(m=(u=t.MONTH_REFS[n])===null||u===void 0?void 0:u.current)===null||m===void 0||m.focus()},t.handleKeyboardNavigation=function(n,o,i){var c,u=t.props,m=u.selected,g=u.preSelection,f=u.setPreSelection,y=u.minDate,v=u.maxDate,S=u.showFourColumnMonthYearPicker,w=u.showTwoColumnMonthYearPicker;if(g){var x=HE(S,w),k=t.getVerticalOffset(x),E=(c=wh[x])===null||c===void 0?void 0:c.grid,I=function(B,R,W){var L,F,j=R,J=W;switch(B){case dt.ArrowRight:j=mo(R,hm),J=W===11?0:W+hm;break;case dt.ArrowLeft:j=Ms(R,hm),J=W===0?11:W-hm;break;case dt.ArrowUp:j=Ms(R,k),J=!((L=E==null?void 0:E[0])===null||L===void 0)&&L.includes(W)?W+12-k:W-k;break;case dt.ArrowDown:j=mo(R,k),J=!((F=E==null?void 0:E[E.length-1])===null||F===void 0)&&F.includes(W)?W-12+k:W+k;break}return{newCalculatedDate:j,newCalculatedMonth:J}},M=function(B,R,W){for(var L=40,F=B,j=!1,J=0,Y=I(F,R,W),D=Y.newCalculatedDate,A=Y.newCalculatedMonth;!j;){if(J>=L){D=R,A=W;break}if(y&&D<y){F=dt.ArrowRight;var U=I(F,D,A);D=U.newCalculatedDate,A=U.newCalculatedMonth}if(v&&D>v){F=dt.ArrowLeft;var U=I(F,D,A);D=U.newCalculatedDate,A=U.newCalculatedMonth}if(h8(D,t.props)){var U=I(F,D,A);D=U.newCalculatedDate,A=U.newCalculatedMonth}else j=!0;J++}return{newCalculatedDate:D,newCalculatedMonth:A}};if(o===dt.Enter){t.isMonthDisabled(i)||(t.onMonthClick(n,i),f==null||f(m));return}var N=M(o,g,i),_=N.newCalculatedDate,P=N.newCalculatedMonth;switch(o){case dt.ArrowRight:case dt.ArrowLeft:case dt.ArrowUp:case dt.ArrowDown:t.handleMonthNavigation(P,_);break}}},t.getVerticalOffset=function(n){var o,i;return(i=(o=wh[n])===null||o===void 0?void 0:o.verticalNavigationOffset)!==null&&i!==void 0?i:0},t.onMonthKeyDown=function(n,o){var i=t.props,c=i.disabledKeyboardNavigation,u=i.handleOnMonthKeyDown,m=n.key;m!==dt.Tab&&n.preventDefault(),c||t.handleKeyboardNavigation(n,m,o),u&&u(n)},t.onQuarterClick=function(n,o){var i=Si(t.props.day,o);pm(i,t.props)||t.handleDayClick(ME(i),n)},t.onQuarterMouseEnter=function(n){var o=Si(t.props.day,n);pm(o,t.props)||t.handleDayMouseEnter(ME(o))},t.handleQuarterNavigation=function(n,o){var i,c,u,m;t.isDisabled(o)||t.isExcluded(o)||((c=(i=t.props).setPreSelection)===null||c===void 0||c.call(i,o),(m=(u=t.QUARTER_REFS[n-1])===null||u===void 0?void 0:u.current)===null||m===void 0||m.focus())},t.onQuarterKeyDown=function(n,o){var i,c,u=n.key;if(!t.props.disabledKeyboardNavigation)switch(u){case dt.Enter:t.onQuarterClick(n,o),(c=(i=t.props).setPreSelection)===null||c===void 0||c.call(i,t.props.selected);break;case dt.ArrowRight:if(!t.props.preSelection)break;t.handleQuarterNavigation(o===4?1:o+1,Q0(t.props.preSelection,1));break;case dt.ArrowLeft:if(!t.props.preSelection)break;t.handleQuarterNavigation(o===1?4:o-1,Vx(t.props.preSelection));break}},t.isMonthDisabledForLabelDate=function(n){var o,i=t.props,c=i.day,u=i.minDate,m=i.maxDate,g=i.excludeDates,f=i.includeDates,y=Gr(c,n);return{isDisabled:(o=(u||m||g||f)&&d5(y,t.props))!==null&&o!==void 0?o:!1,labelDate:y}},t.isMonthDisabled=function(n){var o=t.isMonthDisabledForLabelDate(n).isDisabled;return o},t.getMonthClassNames=function(n){var o=t.props,i=o.day,c=o.startDate,u=o.endDate,m=o.preSelection,g=o.monthClassName,f=g?g(Gr(i,n)):void 0,y=t.getSelection();return Yn("react-datepicker__month-text","react-datepicker__month-".concat(n),f,{"react-datepicker__month-text--disabled":t.isMonthDisabled(n),"react-datepicker__month-text--selected":y?t.isSelectMonthInList(i,n,y):void 0,"react-datepicker__month-text--keyboard-selected":!t.props.disabledKeyboardNavigation&&m&&t.isSelectedMonth(i,n,m)&&!t.isMonthSelected()&&!t.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":t.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":c&&u?mm(c,u,n,i):void 0,"react-datepicker__month-text--range-start":t.isRangeStartMonth(n),"react-datepicker__month-text--range-end":t.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":t.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":t.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":t.isCurrentMonth(i,n)})},t.getTabIndex=function(n){if(t.props.preSelection==null)return"-1";var o=Kn(t.props.preSelection),i=t.isMonthDisabledForLabelDate(o).isDisabled,c=n===o&&!(i||t.props.disabledKeyboardNavigation)?"0":"-1";return c},t.getQuarterTabIndex=function(n){if(t.props.preSelection==null)return"-1";var o=Is(t.props.preSelection),i=pm(t.props.day,t.props),c=n===o&&!(i||t.props.disabledKeyboardNavigation)?"0":"-1";return c},t.getAriaLabel=function(n){var o=t.props,i=o.chooseDayAriaLabelPrefix,c=i===void 0?"Choose":i,u=o.disabledDayAriaLabelPrefix,m=u===void 0?"Not available":u,g=o.day,f=o.locale,y=Gr(g,n),v=t.isDisabled(y)||t.isExcluded(y)?m:c;return"".concat(v," ").concat(Ga(y,"MMMM yyyy",f))},t.getQuarterClassNames=function(n){var o=t.props,i=o.day,c=o.startDate,u=o.endDate,m=o.selected,g=o.minDate,f=o.maxDate,y=o.excludeDates,v=o.includeDates,S=o.filterDate,w=o.preSelection,x=o.disabledKeyboardNavigation,k=(g||f||y||v||S)&&pm(Si(i,n),t.props);return Yn("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":k,"react-datepicker__quarter-text--selected":m?t.isSelectedQuarter(i,n,m):void 0,"react-datepicker__quarter-text--keyboard-selected":!x&&w&&t.isSelectedQuarter(i,n,w)&&!k,"react-datepicker__quarter-text--in-selecting-range":t.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":c&&u?gm(c,u,n,i):void 0,"react-datepicker__quarter-text--range-start":t.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":t.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":t.isCurrentQuarter(i,n)})},t.getMonthContent=function(n){var o=t.props,i=o.showFullMonthYearPicker,c=o.renderMonthContent,u=o.locale,m=o.day,g=c5(n,u),f=iy(n,u);return c?c(n,g,f,m):i?f:g},t.getQuarterContent=function(n){var o,i=t.props,c=i.renderQuarterContent,u=i.locale,m=g8(n,u);return(o=c==null?void 0:c(n,m))!==null&&o!==void 0?o:m},t.renderMonths=function(){var n,o=t.props,i=o.showTwoColumnMonthYearPicker,c=o.showFourColumnMonthYearPicker,u=o.day,m=o.selected,g=(n=wh[HE(c,i)])===null||n===void 0?void 0:n.grid;return g==null?void 0:g.map(function(f,y){return e.createElement("div",{className:"react-datepicker__month-wrapper",key:y},f.map(function(v,S){return e.createElement("div",{ref:t.MONTH_REFS[v],key:S,onClick:function(w){t.onMonthClick(w,v)},onKeyDown:function(w){p5(w)&&(w.preventDefault(),w.key=dt.Enter),t.onMonthKeyDown(w,v)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onMonthMouseEnter(v)},onPointerEnter:t.props.usePointerEvent?function(){return t.onMonthMouseEnter(v)}:void 0,tabIndex:Number(t.getTabIndex(v)),className:t.getMonthClassNames(v),"aria-disabled":t.isMonthDisabled(v),role:"option","aria-label":t.getAriaLabel(v),"aria-current":t.isCurrentMonth(u,v)?"date":void 0,"aria-selected":m?t.isSelectedMonth(u,v,m):void 0},t.getMonthContent(v))}))})},t.renderQuarters=function(){var n=t.props,o=n.day,i=n.selected,c=[1,2,3,4];return e.createElement("div",{className:"react-datepicker__quarter-wrapper"},c.map(function(u,m){return e.createElement("div",{key:m,ref:t.QUARTER_REFS[m],role:"option",onClick:function(g){t.onQuarterClick(g,u)},onKeyDown:function(g){t.onQuarterKeyDown(g,u)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onQuarterMouseEnter(u)},onPointerEnter:t.props.usePointerEvent?function(){return t.onQuarterMouseEnter(u)}:void 0,className:t.getQuarterClassNames(u),"aria-selected":i?t.isSelectedQuarter(o,u,i):void 0,tabIndex:Number(t.getQuarterTabIndex(u)),"aria-current":t.isCurrentQuarter(o,u)?"date":void 0},t.getQuarterContent(u))}))},t.getClassNames=function(){var n=t.props,o=n.selectingDate,i=n.selectsStart,c=n.selectsEnd,u=n.showMonthYearPicker,m=n.showQuarterYearPicker,g=n.showWeekPicker;return Yn("react-datepicker__month",{"react-datepicker__month--selecting-range":o&&(i||c)},{"react-datepicker__monthPicker":u},{"react-datepicker__quarterPicker":m},{"react-datepicker__weekPicker":g})},t}return r.prototype.getSelection=function(){var t=this.props,n=t.selected,o=t.selectedDates,i=t.selectsMultiple;if(i)return o;if(n)return[n]},r.prototype.render=function(){var t=this.props,n=t.showMonthYearPicker,o=t.showQuarterYearPicker,i=t.day,c=t.ariaLabelPrefix,u=c===void 0?"Month ":c,m=u?u.trim()+" ":"";return e.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(m).concat(Ga(i,"MMMM, yyyy",this.props.locale)),role:"listbox"},n?this.renderMonths():o?this.renderQuarters():this.renderWeeks())},r}(h.Component),R8=function(a){Pn(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.isSelectedMonth=function(n){return t.props.month===n},t.renderOptions=function(){return t.props.monthNames.map(function(n,o){return e.createElement("div",{className:t.isSelectedMonth(o)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:t.onChange.bind(t,o),"aria-selected":t.isSelectedMonth(o)?"true":void 0},t.isSelectedMonth(o)?e.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",n)})},t.onChange=function(n){return t.props.onChange(n)},t.handleClickOutside=function(){return t.props.onCancel()},t}return r.prototype.render=function(){return e.createElement(Jp,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},r}(h.Component),T8=function(a){Pn(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(n){return n.map(function(o,i){return e.createElement("option",{key:o,value:i},o)})},t.renderSelectMode=function(n){return e.createElement("select",{value:t.props.month,className:"react-datepicker__month-select",onChange:function(o){return t.onChange(parseInt(o.target.value))}},t.renderSelectOptions(n))},t.renderReadView=function(n,o){return e.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:t.toggleDropdown},e.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),e.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},o[t.props.month]))},t.renderDropdown=function(n){return e.createElement(R8,da({key:"dropdown"},t.props,{monthNames:n,onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(n){var o=t.state.dropdownVisible,i=[t.renderReadView(!o,n)];return o&&i.unshift(t.renderDropdown(n)),i},t.onChange=function(n){t.toggleDropdown(),n!==t.props.month&&t.props.onChange(n)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return r.prototype.render=function(){var t=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(i){return c5(i,t.props.locale)}:function(i){return iy(i,t.props.locale)}),o;switch(this.props.dropdownMode){case"scroll":o=this.renderScrollMode(n);break;case"select":o=this.renderSelectMode(n);break}return e.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},o)},r}(h.Component);function P8(a,r){for(var t=[],n=sl(a),o=sl(r);!ul(n,o);)t.push(va(n)),n=mo(n,1);return t}var L8=function(a){Pn(r,a);function r(t){var n=a.call(this,t)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(o){var i=c0(o),c=So(n.props.date,o)&&or(n.props.date,o);return e.createElement("div",{className:c?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:i,onClick:n.onChange.bind(n,i),"aria-selected":c?"true":void 0},c?e.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",Ga(o,n.props.dateFormat,n.props.locale))})},n.onChange=function(o){return n.props.onChange(o)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:P8(n.props.minDate,n.props.maxDate)},n}return r.prototype.render=function(){var t=Yn({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return e.createElement(Jp,{className:t,onClickOutside:this.handleClickOutside},this.renderOptions())},r}(h.Component),B8=function(a){Pn(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var n=sl(t.props.minDate),o=sl(t.props.maxDate),i=[];!ul(n,o);){var c=c0(n);i.push(e.createElement("option",{key:c,value:c},Ga(n,t.props.dateFormat,t.props.locale))),n=mo(n,1)}return i},t.onSelectChange=function(n){t.onChange(parseInt(n.target.value))},t.renderSelectMode=function(){return e.createElement("select",{value:c0(sl(t.props.date)),className:"react-datepicker__month-year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(n){var o=Ga(t.props.date,t.props.dateFormat,t.props.locale);return e.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:t.toggleDropdown},e.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),e.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},o))},t.renderDropdown=function(){return e.createElement(L8,da({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var n=t.state.dropdownVisible,o=[t.renderReadView(!n)];return n&&o.unshift(t.renderDropdown()),o},t.onChange=function(n){t.toggleDropdown();var o=va(n);So(t.props.date,o)&&or(t.props.date,o)||t.props.onChange(o)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return r.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return e.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},t)},r}(h.Component),z8=function(a){Pn(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.state={height:null},t.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,o,i;t.list&&(t.list.scrollTop=(i=t.centerLi&&r.calcCenterPosition(t.props.monthRef?t.props.monthRef.clientHeight-((o=(n=t.header)===null||n===void 0?void 0:n.clientHeight)!==null&&o!==void 0?o:0):t.list.clientHeight,t.centerLi))!==null&&i!==void 0?i:0)})},t.handleClick=function(n){var o,i;(t.props.minTime||t.props.maxTime)&&PE(n,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&TE(n,t.props)||(i=(o=t.props).onChange)===null||i===void 0||i.call(o,n)},t.isSelectedTime=function(n){return t.props.selected&&N8(t.props.selected,n)},t.isDisabledTime=function(n){return(t.props.minTime||t.props.maxTime)&&PE(n,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&TE(n,t.props)},t.liClasses=function(n){var o,i=["react-datepicker__time-list-item",t.props.timeClassName?t.props.timeClassName(n):void 0];return t.isSelectedTime(n)&&i.push("react-datepicker__time-list-item--selected"),t.isDisabledTime(n)&&i.push("react-datepicker__time-list-item--disabled"),t.props.injectTimes&&(ol(n)*3600+ll(n)*60+Zl(n))%(((o=t.props.intervals)!==null&&o!==void 0?o:r.defaultProps.intervals)*60)!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},t.handleOnKeyDown=function(n,o){var i,c;n.key===dt.Space&&(n.preventDefault(),n.key=dt.Enter),(n.key===dt.ArrowUp||n.key===dt.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===dt.ArrowDown||n.key===dt.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===dt.Enter&&t.handleClick(o),(c=(i=t.props).handleOnKeyDown)===null||c===void 0||c.call(i,n)},t.renderTimes=function(){for(var n,o=[],i=typeof t.props.format=="string"?t.props.format:"p",c=(n=t.props.intervals)!==null&&n!==void 0?n:r.defaultProps.intervals,u=t.props.selected||t.props.openToDate||va(),m=Lm(u),g=t.props.injectTimes&&t.props.injectTimes.sort(function(k,E){return k.getTime()-E.getTime()}),f=60*C8(u),y=f/c,v=0;v<y;v++){var S=l0(m,v*c);if(o.push(S),g){var w=S8(m,S,v,c,g);o=o.concat(w)}}var x=o.reduce(function(k,E){return E.getTime()<=u.getTime()?E:k},o[0]);return o.map(function(k){return e.createElement("li",{key:k.valueOf(),onClick:t.handleClick.bind(t,k),className:t.liClasses(k),ref:function(E){k===x&&(t.centerLi=E)},onKeyDown:function(E){t.handleOnKeyDown(E,k)},tabIndex:k===x?0:-1,role:"option","aria-selected":t.isSelectedTime(k)?"true":void 0,"aria-disabled":t.isDisabledTime(k)?"true":void 0},Ga(k,i,t.props.locale))})},t.renderTimeCaption=function(){return t.props.showTimeCaption===!1?e.createElement(e.Fragment,null):e.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(t.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){t.header=n}},e.createElement("div",{className:"react-datepicker-time__header"},t.props.timeCaption))},t}return Object.defineProperty(r,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),r.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},r.prototype.componentWillUnmount=function(){var t;(t=this.resizeObserver)===null||t===void 0||t.disconnect()},r.prototype.observeDatePickerHeightChanges=function(){var t=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){t.updateContainerHeight()}),this.resizeObserver.observe(n))},r.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},r.prototype.render=function(){var t=this,n,o=this.state.height;return e.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:r.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),e.createElement("div",{className:"react-datepicker__time"},e.createElement("div",{className:"react-datepicker__time-box"},e.createElement("ul",{className:"react-datepicker__time-list",ref:function(i){t.list=i},style:o?{height:o}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},r.calcCenterPosition=function(t,n){return n.offsetTop-(t/2-n.clientHeight/2)},r}(h.Component),YE=3,O8=function(a){Pn(r,a);function r(t){var n=a.call(this,t)||this;return n.YEAR_REFS=_o([],Array(n.props.yearItemNumber),!0).map(function(){return h.createRef()}),n.isDisabled=function(o){return Vr(o,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(o){return cy(o,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var o;return(o=n.props.selectingDate)!==null&&o!==void 0?o:n.props.preSelection},n.updateFocusOnPaginate=function(o){var i=function(){var c,u;(u=(c=n.YEAR_REFS[o])===null||c===void 0?void 0:c.current)===null||u===void 0||u.focus()};window.requestAnimationFrame(i)},n.handleYearClick=function(o,i){n.props.onDayClick&&n.props.onDayClick(o,i)},n.handleYearNavigation=function(o,i){var c,u,m,g,f=n.props,y=f.date,v=f.yearItemNumber;if(!(y===void 0||v===void 0)){var S=Gl(y,v).startPeriod;n.isDisabled(i)||n.isExcluded(i)||((u=(c=n.props).setPreSelection)===null||u===void 0||u.call(c,i),o-S<0?n.updateFocusOnPaginate(v-(S-o)):o-S>=v?n.updateFocusOnPaginate(Math.abs(v-(o-S))):(g=(m=n.YEAR_REFS[o-S])===null||m===void 0?void 0:m.current)===null||g===void 0||g.focus())}},n.isSameDay=function(o,i){return ca(o,i)},n.isCurrentYear=function(o){return o===Qt(va())},n.isRangeStart=function(o){return n.props.startDate&&n.props.endDate&&So(wo(va(),o),n.props.startDate)},n.isRangeEnd=function(o){return n.props.startDate&&n.props.endDate&&So(wo(va(),o),n.props.endDate)},n.isInRange=function(o){return fm(o,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(o){var i=n.props,c=i.selectsStart,u=i.selectsEnd,m=i.selectsRange,g=i.startDate,f=i.endDate;return!(c||u||m)||!n.selectingDate()?!1:c&&f?fm(o,n.selectingDate(),f):u&&g||m&&g&&!f?fm(o,g,n.selectingDate()):!1},n.isSelectingRangeStart=function(o){var i;if(!n.isInSelectingRange(o))return!1;var c=n.props,u=c.startDate,m=c.selectsStart,g=wo(va(),o);return m?So(g,(i=n.selectingDate())!==null&&i!==void 0?i:null):So(g,u??null)},n.isSelectingRangeEnd=function(o){var i;if(!n.isInSelectingRange(o))return!1;var c=n.props,u=c.endDate,m=c.selectsEnd,g=c.selectsRange,f=wo(va(),o);return m||g?So(f,(i=n.selectingDate())!==null&&i!==void 0?i:null):So(f,u??null)},n.isKeyboardSelected=function(o){if(!(n.props.date===void 0||n.props.selected==null||n.props.preSelection==null)){var i=n.props,c=i.minDate,u=i.maxDate,m=i.excludeDates,g=i.includeDates,f=i.filterDate,y=dd(wo(n.props.date,o)),v=(c||u||m||g||f)&&Bm(o,n.props);return!n.props.disabledKeyboardNavigation&&!n.props.inline&&!ca(y,dd(n.props.selected))&&ca(y,dd(n.props.preSelection))&&!v}},n.isSelectedYear=function(o){var i=n.props,c=i.selectsMultiple,u=i.selected,m=i.selectedDates;return c?m==null?void 0:m.some(function(g){return o===Qt(g)}):!!u&&o===Qt(u)},n.onYearClick=function(o,i){var c=n.props.date;c!==void 0&&n.handleYearClick(dd(wo(c,i)),o)},n.onYearKeyDown=function(o,i){var c,u,m=o.key,g=n.props,f=g.date,y=g.yearItemNumber,v=g.handleOnKeyDown;if(m!==dt.Tab&&o.preventDefault(),!n.props.disabledKeyboardNavigation)switch(m){case dt.Enter:if(n.props.selected==null)break;n.onYearClick(o,i),(u=(c=n.props).setPreSelection)===null||u===void 0||u.call(c,n.props.selected);break;case dt.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(i+1,nl(n.props.preSelection,1));break;case dt.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(i-1,Fi(n.props.preSelection,1));break;case dt.ArrowUp:{if(f===void 0||y===void 0||n.props.preSelection==null)break;var S=Gl(f,y).startPeriod,w=YE,x=i-w;if(x<S){var k=y%w;i>=S&&i<S+k?w=k:w+=k,x=i-w}n.handleYearNavigation(x,Fi(n.props.preSelection,w));break}case dt.ArrowDown:{if(f===void 0||y===void 0||n.props.preSelection==null)break;var E=Gl(f,y).endPeriod,w=YE,x=i+w;if(x>E){var k=y%w;i<=E&&i>E-k?w=k:w+=k,x=i+w}n.handleYearNavigation(x,nl(n.props.preSelection,w));break}}v&&v(o)},n.getYearClassNames=function(o){var i=n.props,c=i.date,u=i.minDate,m=i.maxDate,g=i.excludeDates,f=i.includeDates,y=i.filterDate,v=i.yearClassName;return Yn("react-datepicker__year-text","react-datepicker__year-".concat(o),c?v==null?void 0:v(wo(c,o)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(o),"react-datepicker__year-text--disabled":(u||m||g||f||y)&&Bm(o,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(o),"react-datepicker__year-text--range-start":n.isRangeStart(o),"react-datepicker__year-text--range-end":n.isRangeEnd(o),"react-datepicker__year-text--in-range":n.isInRange(o),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(o),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(o),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(o),"react-datepicker__year-text--today":n.isCurrentYear(o)})},n.getYearTabIndex=function(o){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var i=Qt(n.props.preSelection),c=Bm(o,n.props);return o===i&&!c?"0":"-1"},n.getYearContent=function(o){return n.props.renderYearContent?n.props.renderYearContent(o):o},n}return r.prototype.render=function(){var t=this,n=[],o=this.props,i=o.date,c=o.yearItemNumber,u=o.onYearMouseEnter,m=o.onYearMouseLeave;if(i===void 0)return null;for(var g=Gl(i,c),f=g.startPeriod,y=g.endPeriod,v=function(x){n.push(e.createElement("div",{ref:S.YEAR_REFS[x-f],onClick:function(k){t.onYearClick(k,x)},onKeyDown:function(k){p5(k)&&(k.preventDefault(),k.key=dt.Enter),t.onYearKeyDown(k,x)},tabIndex:Number(S.getYearTabIndex(x)),className:S.getYearClassNames(x),onMouseEnter:S.props.usePointerEvent?void 0:function(k){return u(k,x)},onPointerEnter:S.props.usePointerEvent?function(k){return u(k,x)}:void 0,onMouseLeave:S.props.usePointerEvent?void 0:function(k){return m(k,x)},onPointerLeave:S.props.usePointerEvent?function(k){return m(k,x)}:void 0,key:x,"aria-current":S.isCurrentYear(x)?"date":void 0},S.getYearContent(x)))},S=this,w=f;w<=y;w++)v(w);return e.createElement("div",{className:"react-datepicker__year"},e.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},r}(h.Component);function F8(a,r,t,n){for(var o=[],i=0;i<2*r+1;i++){var c=a+r-i,u=!0;t&&(u=Qt(t)<=c),n&&u&&(u=Qt(n)>=c),u&&o.push(c)}return o}var W8=function(a){Pn(r,a);function r(t){var n=a.call(this,t)||this;n.renderOptions=function(){var u=n.props.year,m=n.state.yearsList.map(function(y){return e.createElement("div",{className:u===y?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:y,onClick:n.onChange.bind(n,y),"aria-selected":u===y?"true":void 0},u===y?e.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",y)}),g=n.props.minDate?Qt(n.props.minDate):null,f=n.props.maxDate?Qt(n.props.maxDate):null;return(!f||!n.state.yearsList.find(function(y){return y===f}))&&m.unshift(e.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},e.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!g||!n.state.yearsList.find(function(y){return y===g}))&&m.push(e.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},e.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),m},n.onChange=function(u){n.props.onChange(u)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(u){var m=n.state.yearsList.map(function(g){return g+u});n.setState({yearsList:m})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var o=t.yearDropdownItemNumber,i=t.scrollableYearDropdown,c=o||(i?10:5);return n.state={yearsList:F8(n.props.year,c,n.props.minDate,n.props.maxDate)},n.dropdownRef=h.createRef(),n}return r.prototype.componentDidMount=function(){var t=this.dropdownRef.current;if(t){var n=t.children?Array.from(t.children):null,o=n?n.find(function(i){return i.ariaSelected}):null;t.scrollTop=o&&o instanceof HTMLElement?o.offsetTop+(o.clientHeight-t.clientHeight)/2:(t.scrollHeight-t.clientHeight)/2}},r.prototype.render=function(){var t=Yn({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return e.createElement(Jp,{className:t,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},r}(h.Component),U8=function(a){Pn(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var n=t.props.minDate?Qt(t.props.minDate):1900,o=t.props.maxDate?Qt(t.props.maxDate):2100,i=[],c=n;c<=o;c++)i.push(e.createElement("option",{key:c,value:c},c));return i},t.onSelectChange=function(n){t.onChange(parseInt(n.target.value))},t.renderSelectMode=function(){return e.createElement("select",{value:t.props.year,className:"react-datepicker__year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(n){return e.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(o){return t.toggleDropdown(o)}},e.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),e.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},t.props.year))},t.renderDropdown=function(){return e.createElement(W8,da({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var n=t.state.dropdownVisible,o=[t.renderReadView(!n)];return n&&o.unshift(t.renderDropdown()),o},t.onChange=function(n){t.toggleDropdown(),n!==t.props.year&&t.props.onChange(n)},t.toggleDropdown=function(n){t.setState({dropdownVisible:!t.state.dropdownVisible},function(){t.props.adjustDateOnChange&&t.handleYearChange(t.props.date,n)})},t.handleYearChange=function(n,o){var i;(i=t.onSelect)===null||i===void 0||i.call(t,n,o),t.setOpen()},t.onSelect=function(n,o){var i,c;(c=(i=t.props).onSelect)===null||c===void 0||c.call(i,n,o)},t.setOpen=function(){var n,o;(o=(n=t.props).setOpen)===null||o===void 0||o.call(n,!0)},t}return r.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return e.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},t)},r}(h.Component),$8=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],j8=function(a){var r=(a.className||"").split(/\s+/);return $8.some(function(t){return r.indexOf(t)>=0})},H8=function(a){Pn(r,a);function r(t){var n=a.call(this,t)||this;return n.monthContainer=void 0,n.handleClickOutside=function(o){n.props.onClickOutside(o)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(o){var i,c;j8(o.target)&&((c=(i=n.props).onDropdownFocus)===null||c===void 0||c.call(i,o))},n.getDateInView=function(){var o=n.props,i=o.preSelection,c=o.selected,u=o.openToDate,m=u5(n.props),g=m5(n.props),f=va(),y=u||c||i;return y||(m&&Ts(f,m)?m:g&&ul(f,g)?g:f)},n.increaseMonth=function(){n.setState(function(o){var i=o.date;return{date:mo(i,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(o){var i=o.date;return{date:Ms(i,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(o,i,c){n.props.onSelect(o,i,c),n.props.setPreSelection&&n.props.setPreSelection(o)},n.handleDayMouseEnter=function(o){n.setState({selectingDate:o}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(o)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(o,i){n.setState({selectingDate:wo(va(),i)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(o,i)},n.handleYearMouseLeave=function(o,i){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(o,i)},n.handleYearChange=function(o){var i,c,u,m;(c=(i=n.props).onYearChange)===null||c===void 0||c.call(i,o),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(o),(m=(u=n.props).setOpen)===null||m===void 0||m.call(u,!0)),n.props.setPreSelection&&n.props.setPreSelection(o)},n.getEnabledPreSelectionDateForMonth=function(o){if(!Vr(o,n.props))return o;for(var i=sl(o),c=u8(o),u=Lx(c,i),m=null,g=0;g<=u;g++){var f=uo(i,g);if(!Vr(f,n.props)){m=f;break}}return m},n.handleMonthChange=function(o){var i,c,u,m=(i=n.getEnabledPreSelectionDateForMonth(o))!==null&&i!==void 0?i:o;n.handleCustomMonthChange(m),n.props.adjustDateOnChange&&(n.props.onSelect(m),(u=(c=n.props).setOpen)===null||u===void 0||u.call(c,!0)),n.props.setPreSelection&&n.props.setPreSelection(m)},n.handleCustomMonthChange=function(o){var i,c;(c=(i=n.props).onMonthChange)===null||c===void 0||c.call(i,o),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(o){n.handleYearChange(o),n.handleMonthChange(o)},n.changeYear=function(o){n.setState(function(i){var c=i.date;return{date:wo(c,Number(o))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(o){n.setState(function(i){var c=i.date;return{date:Gr(c,Number(o))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(o){n.setState(function(i){var c=i.date;return{date:wo(Gr(c,Kn(o)),Qt(o))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(o){o===void 0&&(o=n.state.date);var i=Vl(o,n.props.locale,n.props.calendarStartDay),c=[];return n.props.showWeekNumbers&&c.push(e.createElement("div",{key:"W",className:"react-datepicker__day-name"},n.props.weekLabel||"#")),c.concat([0,1,2,3,4,5,6].map(function(u){var m=uo(i,u),g=n.formatWeekday(m,n.props.locale),f=n.props.weekDayClassName?n.props.weekDayClassName(m):void 0;return e.createElement("div",{key:u,"aria-label":Ga(m,"EEEE",n.props.locale),className:Yn("react-datepicker__day-name",f)},g)}))},n.formatWeekday=function(o,i){return n.props.formatWeekDay?m8(o,n.props.formatWeekDay,i):n.props.useWeekdaysShort?f8(o,i):p8(o,i)},n.decreaseYear=function(){n.setState(function(o){var i,c=o.date;return{date:Fi(c,n.props.showYearPicker?(i=n.props.yearItemNumber)!==null&&i!==void 0?i:r.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var o,i,c;if(!n.props.renderCustomHeader){var u=(o=n.props.monthsShown)!==null&&o!==void 0?o:r.defaultProps.monthsShown,m=n.props.showPreviousMonths?u-1:0,g=(i=n.props.monthSelectedIn)!==null&&i!==void 0?i:m,f=Ms(n.state.date,g),y;switch(!0){case n.props.showMonthYearPicker:y=zE(n.state.date,n.props);break;case n.props.showYearPicker:y=v8(n.state.date,n.props);break;case n.props.showQuarterYearPicker:y=y8(n.state.date,n.props);break;default:y=LE(f,n.props);break}if(!(!((c=n.props.forceShowMonthNavigation)!==null&&c!==void 0?c:r.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&y||n.props.showTimeSelectOnly)){var v=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],S=["react-datepicker__navigation","react-datepicker__navigation--previous"],w=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(w=n.decreaseYear),y&&n.props.showDisabledMonthNavigation&&(S.push("react-datepicker__navigation--previous--disabled"),w=void 0);var x=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,k=n.props,E=k.previousMonthButtonLabel,I=E===void 0?r.defaultProps.previousMonthButtonLabel:E,M=k.previousYearButtonLabel,N=M===void 0?r.defaultProps.previousYearButtonLabel:M,_=n.props,P=_.previousMonthAriaLabel,B=P===void 0?typeof I=="string"?I:"Previous Month":P,R=_.previousYearAriaLabel,W=R===void 0?typeof N=="string"?N:"Previous Year":R;return e.createElement("button",{type:"button",className:S.join(" "),onClick:w,onKeyDown:n.props.handleOnKeyDown,"aria-label":x?W:B},e.createElement("span",{className:v.join(" ")},x?N:I))}}},n.increaseYear=function(){n.setState(function(o){var i,c=o.date;return{date:nl(c,n.props.showYearPicker?(i=n.props.yearItemNumber)!==null&&i!==void 0?i:r.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var o;if(!n.props.renderCustomHeader){var i;switch(!0){case n.props.showMonthYearPicker:i=OE(n.state.date,n.props);break;case n.props.showYearPicker:i=E8(n.state.date,n.props);break;case n.props.showQuarterYearPicker:i=b8(n.state.date,n.props);break;default:i=BE(n.state.date,n.props);break}if(!(!((o=n.props.forceShowMonthNavigation)!==null&&o!==void 0?o:r.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&i||n.props.showTimeSelectOnly)){var c=["react-datepicker__navigation","react-datepicker__navigation--next"],u=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&c.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&c.push("react-datepicker__navigation--next--with-today-button");var m=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(m=n.increaseYear),i&&n.props.showDisabledMonthNavigation&&(c.push("react-datepicker__navigation--next--disabled"),m=void 0);var g=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,f=n.props,y=f.nextMonthButtonLabel,v=y===void 0?r.defaultProps.nextMonthButtonLabel:y,S=f.nextYearButtonLabel,w=S===void 0?r.defaultProps.nextYearButtonLabel:S,x=n.props,k=x.nextMonthAriaLabel,E=k===void 0?typeof v=="string"?v:"Next Month":k,I=x.nextYearAriaLabel,M=I===void 0?typeof w=="string"?w:"Next Year":I;return e.createElement("button",{type:"button",className:c.join(" "),onClick:m,onKeyDown:n.props.handleOnKeyDown,"aria-label":g?M:E},e.createElement("span",{className:u.join(" ")},g?w:v))}}},n.renderCurrentMonth=function(o){o===void 0&&(o=n.state.date);var i=["react-datepicker__current-month"];return n.props.showYearDropdown&&i.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&i.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&i.push("react-datepicker__current-month--hasMonthYearDropdown"),e.createElement("h2",{className:i.join(" ")},Ga(o,n.props.dateFormat,n.props.locale))},n.renderYearDropdown=function(o){if(o===void 0&&(o=!1),!(!n.props.showYearDropdown||o))return e.createElement(U8,da({},r.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:Qt(n.state.date)}))},n.renderMonthDropdown=function(o){if(o===void 0&&(o=!1),!(!n.props.showMonthDropdown||o))return e.createElement(T8,da({},r.defaultProps,n.props,{month:Kn(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(o){if(o===void 0&&(o=!1),!(!n.props.showMonthYearDropdown||o))return e.createElement(B8,da({},r.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(o){n.props.onSelect(AE(),o),n.props.setPreSelection&&n.props.setPreSelection(AE())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return e.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDefaultHeader=function(o){var i=o.monthDate,c=o.i;return e.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(i),e.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(c!==0),n.renderMonthYearDropdown(c!==0),n.renderYearDropdown(c!==0)),e.createElement("div",{className:"react-datepicker__day-names"},n.header(i)))},n.renderCustomHeader=function(o){var i,c,u=o.monthDate,m=o.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var g=LE(n.state.date,n.props),f=BE(n.state.date,n.props),y=zE(n.state.date,n.props),v=OE(n.state.date,n.props),S=!n.props.showMonthYearPicker&&!n.props.showQuarterYearPicker&&!n.props.showYearPicker;return e.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(c=(i=n.props).renderCustomHeader)===null||c===void 0?void 0:c.call(i,da(da({},n.state),{customHeaderCount:m,monthDate:u,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:g,nextMonthButtonDisabled:f,prevYearButtonDisabled:y,nextYearButtonDisabled:v})),S&&e.createElement("div",{className:"react-datepicker__day-names"},n.header(u)))},n.renderYearHeader=function(o){var i=o.monthDate,c=n.props,u=c.showYearPicker,m=c.yearItemNumber,g=m===void 0?r.defaultProps.yearItemNumber:m,f=Gl(i,g),y=f.startPeriod,v=f.endPeriod;return e.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},u?"".concat(y," - ").concat(v):Qt(i))},n.renderHeader=function(o){var i=o.monthDate,c=o.i,u=c===void 0?0:c,m={monthDate:i,i:u};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(m);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(m);default:return n.renderDefaultHeader(m)}},n.renderMonths=function(){var o,i;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var c=[],u=(o=n.props.monthsShown)!==null&&o!==void 0?o:r.defaultProps.monthsShown,m=n.props.showPreviousMonths?u-1:0,g=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?nl(n.state.date,m):Ms(n.state.date,m),f=(i=n.props.monthSelectedIn)!==null&&i!==void 0?i:m,y=0;y<u;++y){var v=y-f+m,S=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?nl(g,v):mo(g,v),w="month-".concat(y),x=y<u-1,k=y>0;c.push(e.createElement("div",{key:w,ref:function(E){n.monthContainer=E??void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:S,i:y}),e.createElement(D8,da({},r.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:S,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:y,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:x,monthShowsDuplicateDaysStart:k}))))}return c}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return e.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),e.createElement(O8,da({},r.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return e.createElement(z8,da({},r.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var o=n.props.selected?new Date(n.props.selected):void 0,i=o&&Xp(o)&&!!n.props.selected,c=i?"".concat(WE(o.getHours()),":").concat(WE(o.getMinutes())):"";if(n.props.showTimeInput)return e.createElement(_8,da({},r.defaultProps,n.props,{date:o,timeString:c,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var o,i=Gl(n.state.date,(o=n.props.yearItemNumber)!==null&&o!==void 0?o:r.defaultProps.yearItemNumber),c=i.startPeriod,u=i.endPeriod,m;return n.props.showYearPicker?m="".concat(c," - ").concat(u):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?m=Qt(n.state.date):m="".concat(iy(Kn(n.state.date),n.props.locale)," ").concat(Qt(n.state.date)),e.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&m)},n.renderChildren=function(){if(n.props.children)return e.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=h.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(r,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:jd}},enumerable:!1,configurable:!0}),r.prototype.componentDidMount=function(){var t=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){t.setState({monthContainer:t.monthContainer})}())},r.prototype.componentDidUpdate=function(t){var n=this;if(this.props.preSelection&&(!ca(this.props.preSelection,t.preSelection)||this.props.monthSelectedIn!==t.monthSelectedIn)){var o=!or(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return o&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!ca(this.props.openToDate,t.openToDate)&&this.setState({date:this.props.openToDate})},r.prototype.render=function(){var t=this.props.container||r8;return e.createElement(Jp,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},e.createElement("div",{style:{display:"contents"},ref:this.containerRef},e.createElement(t,{className:Yn("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},r}(h.Component),Y8=function(a){var r=a.icon,t=a.className,n=t===void 0?"":t,o=a.onClick,i="react-datepicker__calendar-icon";if(typeof r=="string")return e.createElement("i",{className:"".concat(i," ").concat(r," ").concat(n),"aria-hidden":"true",onClick:o});if(e.isValidElement(r)){var c=r;return e.cloneElement(c,{className:"".concat(c.props.className||""," ").concat(i," ").concat(n),onClick:function(u){typeof c.props.onClick=="function"&&c.props.onClick(u),typeof o=="function"&&o(u)}})}return e.createElement("svg",{className:"".concat(i," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:o},e.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},f5=function(a){Pn(r,a);function r(t){var n=a.call(this,t)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return r.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},r.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},r.prototype.render=function(){return Fd.createPortal(this.props.children,this.el)},r}(h.Component),q8="[tabindex], a, button, input, select, textarea",G8=function(a){return(a instanceof HTMLAnchorElement||!a.disabled)&&a.tabIndex!==-1},g5=function(a){Pn(r,a);function r(t){var n=a.call(this,t)||this;return n.getTabChildren=function(){var o;return Array.prototype.slice.call((o=n.tabLoopRef.current)===null||o===void 0?void 0:o.querySelectorAll(q8),1,-1).filter(G8)},n.handleFocusStart=function(){var o=n.getTabChildren();o&&o.length>1&&o[o.length-1].focus()},n.handleFocusEnd=function(){var o=n.getTabChildren();o&&o.length>1&&o[0].focus()},n.tabLoopRef=h.createRef(),n}return r.prototype.render=function(){var t;return((t=this.props.enableTabLoop)!==null&&t!==void 0?t:r.defaultProps.enableTabLoop)?e.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},e.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,e.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},r.defaultProps={enableTabLoop:!0},r}(h.Component);function Z8(a){var r=function(t){var n,o=typeof t.hidePopper=="boolean"?t.hidePopper:!0,i=h.useRef(null),c=n8(da({open:!o,whileElementsMounted:zk,placement:t.popperPlacement,middleware:_o([Hk({padding:15}),jk(10),Yk({element:i})],(n=t.popperModifiers)!==null&&n!==void 0?n:[],!0)},t.popperProps)),u=da(da({},t),{hidePopper:o,popperProps:da(da({},c),{arrowRef:i})});return e.createElement(a,da({},u))};return r}var V8=function(a){Pn(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(r,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),r.prototype.render=function(){var t=this.props,n=t.className,o=t.wrapperClassName,i=t.hidePopper,c=i===void 0?r.defaultProps.hidePopper:i,u=t.popperComponent,m=t.targetComponent,g=t.enableTabLoop,f=t.popperOnKeyDown,y=t.portalId,v=t.portalHost,S=t.popperProps,w=t.showArrow,x=void 0;if(!c){var k=Yn("react-datepicker-popper",n);x=e.createElement(g5,{enableTabLoop:g},e.createElement("div",{ref:S.refs.setFloating,style:S.floatingStyles,className:k,"data-placement":S.placement,onKeyDown:f},u,w&&e.createElement(Qk,{ref:S.arrowRef,context:S.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(x=h.createElement(this.props.popperContainer,{},x)),y&&!c&&(x=e.createElement(f5,{portalId:y,portalHost:v},x));var E=Yn("react-datepicker-wrapper",o);return e.createElement(e.Fragment,null,e.createElement("div",{ref:S.refs.setReference,className:E},m),x)},r}(h.Component),Q8=Z8(V8),qE="react-datepicker-ignore-onclickoutside";function J8(a,r){return a&&r?Kn(a)!==Kn(r)||Qt(a)!==Qt(r):a!==r}var Sh="Date input not valid.",h5=function(a){Pn(r,a);function r(t){var n=a.call(this,t)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:va()},n.modifyHolidays=function(){var o;return(o=n.props.holidays)===null||o===void 0?void 0:o.reduce(function(i,c){var u=new Date(c.date);return Xp(u)?_o(_o([],i,!0),[da(da({},c),{date:u})],!1):i},[])},n.calcInitialState=function(){var o,i=n.getPreSelection(),c=u5(n.props),u=m5(n.props),m=c&&Ts(i,Lm(c))?c:u&&ul(i,DE(u))?u:i;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(o=n.props.selectsRange?n.props.startDate:n.props.selected)!==null&&o!==void 0?o:m,highlightDates:FE(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.resetHiddenStatus=function(){n.setState(da(da({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(da(da({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var o,i;(i=(o=n.input)===null||o===void 0?void 0:o.focus)===null||i===void 0||i.call(o,{preventScroll:!0})},n.setBlur=function(){var o,i;(i=(o=n.input)===null||o===void 0?void 0:o.blur)===null||i===void 0||i.call(o),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(o,i){i===void 0&&(i=!1),n.setState({open:o,preSelection:o&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:Ch},function(){o||n.setState(function(c){return{focused:i?c.focused:!1}},function(){!i&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return rl(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(o){var i,c,u=n.state.wasHidden,m=u?n.state.open:!0;u&&n.resetHiddenStatus(),n.state.preventFocus||((c=(i=n.props).onFocus)===null||c===void 0||c.call(i,o),m&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.handleBlur=function(o){var i,c;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((c=(i=n.props).onBlur)===null||c===void 0||c.call(i,o)),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(o){var i,c;n.props.inline||n.setOpen(!1),(c=(i=n.props).onClickOutside)===null||c===void 0||c.call(i,o),n.props.withPortal&&o.preventDefault()},n.handleChange=function(){for(var o,i,c,u,m,g=[],f=0;f<arguments.length;f++)g[f]=arguments[f];var y=g[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,g),!y||typeof y.isDefaultPrevented!="function"||y.isDefaultPrevented()))){n.setState({inputValue:(y==null?void 0:y.target)instanceof HTMLInputElement?y.target.value:null,lastPreSelectChange:X8});var v=n.props,S=v.selectsRange,w=v.startDate,x=v.endDate,k=(o=n.props.dateFormat)!==null&&o!==void 0?o:r.defaultProps.dateFormat,E=(i=n.props.strictParsing)!==null&&i!==void 0?i:r.defaultProps.strictParsing,I=(y==null?void 0:y.target)instanceof HTMLInputElement?y.target.value:"";if(S){var M=I.split(k.includes("-")?i5:"-",2).map(function(F){return F.trim()}),N=M[0],_=M[1],P=Eh(N??"",k,n.props.locale,E),B=Eh(_??"",k,n.props.locale,E),R=(w==null?void 0:w.getTime())!==(P==null?void 0:P.getTime()),W=(x==null?void 0:x.getTime())!==(B==null?void 0:B.getTime());if(!R&&!W||P&&Vr(P,n.props)||B&&Vr(B,n.props))return;(u=(c=n.props).onChange)===null||u===void 0||u.call(c,[P,B],y)}else{var L=Eh(I,k,n.props.locale,E,(m=n.props.selected)!==null&&m!==void 0?m:void 0);(L||!I)&&n.setSelected(L,y,!0)}}},n.handleSelect=function(o,i,c){if(!n.props.readOnly){if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&n.sendFocusBackToInput(),n.props.onChangeRaw&&n.props.onChangeRaw(i),n.setSelected(o,i,!1,c),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect)n.setPreSelection(o);else if(!n.props.inline){n.props.selectsRange||n.setOpen(!1);var u=n.props,m=u.startDate,g=u.endDate;m&&!g&&(n.props.swapRange||!jE(o,m))&&n.setOpen(!1)}}},n.setSelected=function(o,i,c,u){var m,g,f=o;if(n.props.showYearPicker){if(f!==null&&Bm(Qt(f),n.props))return}else if(n.props.showMonthYearPicker){if(f!==null&&d5(f,n.props))return}else if(f!==null&&Vr(f,n.props))return;var y=n.props,v=y.onChange,S=y.selectsRange,w=y.startDate,x=y.endDate,k=y.selectsMultiple,E=y.selectedDates,I=y.minTime,M=y.swapRange;if(!Ns(n.props.selected,f)||n.props.allowSameDay||S||k)if(f!==null&&(n.props.selected&&(!c||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(f=xh(f,{hour:ol(n.props.selected),minute:ll(n.props.selected),second:Zl(n.props.selected)})),!c&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&I&&(f=xh(f,{hour:I.getHours(),minute:I.getMinutes(),second:I.getSeconds()})),n.props.inline||n.setState({preSelection:f}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:u})),S){var N=!w&&!x,_=w&&!x,P=w&&x;N?v==null||v([f,null],i):_&&(f===null?v==null||v([null,null],i):jE(f,w)?M?v==null||v([f,w],i):v==null||v([f,null],i):v==null||v([w,f],i)),P&&(v==null||v([f,null],i))}else if(k){if(f!==null)if(!(E!=null&&E.length))v==null||v([f],i);else{var B=E.some(function(W){return ca(W,f)});if(B){var R=E.filter(function(W){return!ca(W,f)});v==null||v(R,i)}else v==null||v(_o(_o([],E,!0),[f],!1),i)}}else v==null||v(f,i);c||((g=(m=n.props).onSelect)===null||g===void 0||g.call(m,f,i),n.setState({inputValue:null}))},n.setPreSelection=function(o){if(!n.props.readOnly){var i=rl(n.props.minDate),c=rl(n.props.maxDate),u=!0;if(o){var m=Lm(o);if(i&&c)u=ud(o,n.props.minDate,n.props.maxDate);else if(i){var g=Lm(n.props.minDate);u=ul(o,g)||Ns(m,g)}else if(c){var f=DE(n.props.maxDate);u=Ts(o,f)||Ns(m,f)}}u&&n.setState({preSelection:o})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(o){var i,c;if(!(n.props.selectsRange||n.props.selectsMultiple)){var u=n.props.selected?n.props.selected:n.getPreSelection(),m=n.props.selected?o:xh(u,{hour:ol(o),minute:ll(o)});n.setState({preSelection:m}),(c=(i=n.props).onChange)===null||c===void 0||c.call(i,m),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var o,i;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(i=(o=n.props).onInputClick)===null||i===void 0||i.call(o)},n.onInputKeyDown=function(o){var i,c,u,m,g,f;(c=(i=n.props).onKeyDown)===null||c===void 0||c.call(i,o);var y=o.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(y===dt.ArrowDown||y===dt.ArrowUp||y===dt.Enter)&&((u=n.onInputClick)===null||u===void 0||u.call(n));return}if(n.state.open){if(y===dt.ArrowDown||y===dt.ArrowUp){o.preventDefault();var v=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',S=((m=n.calendar)===null||m===void 0?void 0:m.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(v);S instanceof HTMLElement&&S.focus({preventScroll:!0});return}var w=va(n.state.preSelection);y===dt.Enter?(o.preventDefault(),o.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===Ch?(n.handleSelect(w,o),!n.props.shouldCloseOnSelect&&n.setPreSelection(w)):n.setOpen(!1)):y===dt.Escape?(o.preventDefault(),o.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):y===dt.Tab&&n.setOpen(!1),n.inputOk()||(f=(g=n.props).onInputError)===null||f===void 0||f.call(g,{code:1,msg:Sh})}},n.onPortalKeyDown=function(o){var i=o.key;i===dt.Escape&&(o.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(o){var i,c,u,m,g,f,y=n.props,v=y.minDate,S=y.maxDate,w=y.disabledKeyboardNavigation,x=y.showWeekPicker,k=y.shouldCloseOnSelect,E=y.locale,I=y.calendarStartDay,M=y.adjustDateOnChange,N=y.inline;if((c=(i=n.props).onKeyDown)===null||c===void 0||c.call(i,o),!w){var _=o.key,P=o.shiftKey,B=va(n.state.preSelection),R=function(D,A){var U=A;switch(D){case dt.ArrowRight:U=x?qm(A,1):uo(A,1);break;case dt.ArrowLeft:U=x?bE(A):z_(A);break;case dt.ArrowUp:U=bE(A);break;case dt.ArrowDown:U=qm(A,1);break;case dt.PageUp:U=P?Fi(A,1):Ms(A,1);break;case dt.PageDown:U=P?nl(A,1):mo(A,1);break;case dt.Home:U=Vl(A,E,I);break;case dt.End:U=d8(A);break}return U},W=function(D,A){for(var U=40,K=D,X=!1,O=0,Q=R(D,A);!X;){if(O>=U){Q=A;break}v&&Q<v&&(K=dt.ArrowRight,Q=Vr(v,n.props)?R(K,Q):v),S&&Q>S&&(K=dt.ArrowLeft,Q=Vr(S,n.props)?R(K,Q):S),Vr(Q,n.props)?((K===dt.PageUp||K===dt.Home)&&(K=dt.ArrowRight),(K===dt.PageDown||K===dt.End)&&(K=dt.ArrowLeft),Q=R(K,Q)):X=!0,O++}return Q};if(_===dt.Enter){o.preventDefault(),n.handleSelect(B,o),!k&&n.setPreSelection(B);return}else if(_===dt.Escape){o.preventDefault(),n.setOpen(!1),n.inputOk()||(m=(u=n.props).onInputError)===null||m===void 0||m.call(u,{code:1,msg:Sh});return}var L=null;switch(_){case dt.ArrowLeft:case dt.ArrowRight:case dt.ArrowUp:case dt.ArrowDown:case dt.PageUp:case dt.PageDown:case dt.Home:case dt.End:L=W(_,B);break}if(!L){(f=(g=n.props).onInputError)===null||f===void 0||f.call(g,{code:1,msg:Sh});return}if(o.preventDefault(),n.setState({lastPreSelectChange:Ch}),M&&n.setSelected(L),n.setPreSelection(L),N){var F=Kn(B),j=Kn(L),J=Qt(B),Y=Qt(L);F!==j||J!==Y?n.setState({shouldFocusDayInline:!0}):n.setState({shouldFocusDayInline:!1})}}},n.onPopperKeyDown=function(o){var i=o.key;i===dt.Escape&&(o.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(o){o&&o.preventDefault&&o.preventDefault(),n.sendFocusBackToInput();var i=n.props,c=i.selectsRange,u=i.onChange;c?u==null||u([null,null],o):u==null||u(null,o),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(o){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(o.target===document||o.target===document.documentElement||o.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(o)&&n.setOpen(!1)},n.renderCalendar=function(){var o,i;return!n.props.inline&&!n.isCalendarOpen()?null:e.createElement(H8,da({showMonthYearDropdown:void 0,ref:function(c){n.calendar=c}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(o=n.props.dateFormatCalendar)!==null&&o!==void 0?o:r.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:w8(n.modifyHolidays()),outsideClickIgnoreClass:qE,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(i=n.props.dropdownMode)!==null&&i!==void 0?i:r.defaultProps.dropdownMode}),n.props.children)},n.renderAriaLiveRegion=function(){var o=n.props,i=o.dateFormat,c=i===void 0?r.defaultProps.dateFormat:i,u=o.locale,m=n.props.showTimeInput||n.props.showTimeSelect,g=m?"PPPPp":"PPPP",f;return n.props.selectsRange?f="Selected start date: ".concat(qr(n.props.startDate,{dateFormat:g,locale:u}),". ").concat(n.props.endDate?"End date: "+qr(n.props.endDate,{dateFormat:g,locale:u}):""):n.props.showTimeSelectOnly?f="Selected time: ".concat(qr(n.props.selected,{dateFormat:c,locale:u})):n.props.showYearPicker?f="Selected year: ".concat(qr(n.props.selected,{dateFormat:"yyyy",locale:u})):n.props.showMonthYearPicker?f="Selected month: ".concat(qr(n.props.selected,{dateFormat:"MMMM yyyy",locale:u})):n.props.showQuarterYearPicker?f="Selected quarter: ".concat(qr(n.props.selected,{dateFormat:"yyyy, QQQ",locale:u})):f="Selected date: ".concat(qr(n.props.selected,{dateFormat:g,locale:u})),e.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},f)},n.renderDateInput=function(){var o,i,c,u=Yn(n.props.className,(o={},o[qE]=n.state.open,o)),m=n.props.customInput||e.createElement("input",{type:"text"}),g=n.props.customInputRef||"ref",f=n.props,y=f.dateFormat,v=y===void 0?r.defaultProps.dateFormat:y,S=f.locale,w=typeof n.props.value=="string"?n.props.value:typeof n.state.inputValue=="string"?n.state.inputValue:n.props.selectsRange?l8(n.props.startDate,n.props.endDate,{dateFormat:v,locale:S}):n.props.selectsMultiple?s8((c=n.props.selectedDates)!==null&&c!==void 0?c:[],{dateFormat:v,locale:S}):qr(n.props.selected,{dateFormat:v,locale:S});return h.cloneElement(m,(i={},i[g]=function(x){n.input=x},i.value=w,i.onBlur=n.handleBlur,i.onChange=n.handleChange,i.onClick=n.onInputClick,i.onFocus=n.handleFocus,i.onKeyDown=n.onInputKeyDown,i.id=n.props.id,i.name=n.props.name,i.form=n.props.form,i.autoFocus=n.props.autoFocus,i.placeholder=n.props.placeholderText,i.disabled=n.props.disabled,i.autoComplete=n.props.autoComplete,i.className=Yn(m.props.className,u),i.title=n.props.title,i.readOnly=n.props.readOnly,i.required=n.props.required,i.tabIndex=n.props.tabIndex,i["aria-describedby"]=n.props.ariaDescribedBy,i["aria-invalid"]=n.props.ariaInvalid,i["aria-labelledby"]=n.props.ariaLabelledBy,i["aria-required"]=n.props.ariaRequired,i))},n.renderClearButton=function(){var o=n.props,i=o.isClearable,c=o.disabled,u=o.selected,m=o.startDate,g=o.endDate,f=o.clearButtonTitle,y=o.clearButtonClassName,v=y===void 0?"":y,S=o.ariaLabelClose,w=S===void 0?"Close":S,x=o.selectedDates,k=o.readOnly;return i&&!k&&(u!=null||m!=null||g!=null||x!=null&&x.length)?e.createElement("button",{type:"button",className:Yn("react-datepicker__close-icon",v,{"react-datepicker__close-icon--disabled":c}),disabled:c,"aria-label":w,onClick:n.onClearClick,title:f,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(r,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:jd,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),r.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},r.prototype.componentDidUpdate=function(t,n){var o,i,c,u;t.inline&&J8(t.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&t.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),t.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:FE(this.props.highlightDates)}),!n.focused&&!Ns(t.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((i=(o=this.props).onCalendarOpen)===null||i===void 0||i.call(o)),n.open===!0&&this.state.open===!1&&((u=(c=this.props).onCalendarClose)===null||u===void 0||u.call(c)))},r.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},r.prototype.renderInputContainer=function(){var t=this.props,n=t.showIcon,o=t.icon,i=t.calendarIconClassname,c=t.calendarIconClassName,u=t.toggleCalendarOnIconClick,m=this.state.open;return i&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),e.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&e.createElement(Y8,da({icon:o,className:Yn(c,!c&&i,m&&"react-datepicker-ignore-onclickoutside")},u?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},r.prototype.render=function(){var t=this.renderCalendar();if(this.props.inline)return t;if(this.props.withPortal){var n=this.state.open?e.createElement(g5,{enableTabLoop:this.props.enableTabLoop},e.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},t)):null;return this.state.open&&this.props.portalId&&(n=e.createElement(f5,da({portalId:this.props.portalId},this.props),n)),e.createElement("div",null,this.renderInputContainer(),n)}return e.createElement(Q8,da({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:t,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},r}(h.Component),X8="input",Ch="navigate";function GE(a){if(!a||typeof a!="string"||!a.match(/\d/))return{h:0,m:0};const[r,t]=a.trim().split(/\s+/);let[n,o]=r.split(":").map(Number);return t&&t.toLowerCase()==="pm"&&n!==12&&(n+=12),t&&t.toLowerCase()==="am"&&n===12&&(n=0),{h:n,m:o}}function dy(a,r,t=30){const n=GE(a),o=GE(r),i=[];let c=new Date(0,0,0,n.h,n.m);const u=new Date(0,0,0,o.h,o.m);for(;c<=u;){const m=c.getHours(),g=c.getMinutes();let f=(m%12||12)+":"+(g<10?"0":"")+g+(m<12?" AM":" PM");i.push(f),c=new Date(c.getTime()+t*6e4)}return i}function K8(a){const r={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6},t=new Date,n=t.getDay();let i=(r[a]-n+7)%7;i===0&&(i=7);const c=new Date(t);return c.setDate(t.getDate()+i),c}function y5({proposal:a,open:r,onClose:t,onSubmit:n,senderPlayer:o,phase:i,selectedDivision:c}){var K;const[u,m]=h.useState(new Date),[g,f]=h.useState(""),[y,v]=h.useState(""),[S,w]=h.useState(""),[x,k]=h.useState(""),[E,I]=h.useState(""),[M,N]=h.useState(""),[_,P]=h.useState("");h.useEffect(()=>{if(a&&r){if(a.date){const[X,O,Q]=a.date.split("-");m(new Date(parseInt(X),parseInt(O)-1,parseInt(Q)))}f(""),v(""),w(a.location||""),k(a.gameType||"8 Ball"),I(a.raceLength||(i==="scheduled"||i==="challenge"?5:7)),N("")}},[a,r,i]),["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][u.getDay()];const W=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][u.getDay()],L=((K=o==null?void 0:o.availability)==null?void 0:K[W])||[],F=["6:00 PM - 8:00 PM","8:00 PM - 10:00 PM","10:00 PM - 12:00 AM"],j=L.length>0?L:F,J=o!=null&&o.locations?o.locations.split(/\r?\n/).map(X=>X.trim()).filter(Boolean):[],Y=h.useMemo(()=>{if(!g)return[];const X=g.replace(/[–—−]/g,"-").replace(/\s*-\s*/g," - ").trim();if(!X.includes(" - "))return[];let[O,Q]=X.split(" - ").map(ne=>D(ne.trim()));return!O||!Q?[]:dy(O,Q,30)},[g]);function D(X){let O=X.trim();O=O.replace(/(\d{1,2}):(\d{2})\s*(am|pm)/i,(ne,T,re,G)=>`${parseInt(T,10)}:${re} ${G.toUpperCase()}`),O=O.replace(/^(\d{1,2})(\d{2})(am|pm)$/i,(ne,T,re,G)=>`${parseInt(T,10)}:${re} ${G.toUpperCase()}`),O=O.replace(/^(\d{1,2})(am|pm)$/i,(ne,T,re)=>`${parseInt(T,10)}:00 ${re.toUpperCase()}`),O=O.replace(/(am|pm)$/i," $1"),O=O.replace(/(am|pm)$/i,ne=>ne.toUpperCase());const Q=O.match(/^(\d{1,2}):(\d{2}) (AM|PM)$/i);if(Q){const ne=Q[1],T=Q[2],re=Q[3].toUpperCase();return`${ne}:${T} ${re}`}return O}function A(X){if(!X)return"";const O=new Date(X),Q=String(O.getMonth()+1).padStart(2,"0"),ne=String(O.getDate()).padStart(2,"0"),T=O.getFullYear();return`${Q}-${ne}-${T}`}const U=X=>{if(X.preventDefault(),!u||!y||!S){P("Please fill in all required fields.");return}P(""),n({date:A(u),time:y,location:S,gameType:x,raceLength:E,note:M})};return!r||!a?null:e.createElement(Bt,{open:r,onClose:t,title:"🔄 Counter Proposal",maxWidth:"500px"},e.createElement("form",{onSubmit:U,style:{textAlign:"left"}},e.createElement("div",{style:{fontWeight:"bold",fontSize:"1.15rem",margin:"0 0 1rem 0",color:"#fff",textAlign:"center"}},"To: ",a.senderName||"Opponent"),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Date:"),e.createElement(h5,{selected:u,onChange:X=>m(X),dateFormat:"MM-dd-yyyy",className:"counter-proposal-date-input",required:!0})),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Time Block:"),e.createElement("select",{value:g,onChange:X=>{f(X.target.value),v("")},required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},e.createElement("option",{value:""},"Select time block"),j.map((X,O)=>e.createElement("option",{key:O,value:X},X)))),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Start Time:"),e.createElement("select",{value:y,onChange:X=>v(X.target.value),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},e.createElement("option",{value:""},"Select..."),Y.map((X,O)=>e.createElement("option",{key:O,value:X},X)))),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Location:"),e.createElement("select",{value:S,onChange:X=>w(X.target.value),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},e.createElement("option",{value:""},"Select location"),J.map((X,O)=>e.createElement("option",{key:O,value:X},X)))),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Game Type:"),e.createElement("select",{value:x,onChange:X=>k(X.target.value),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},e.createElement("option",{value:"8 Ball"},"8 Ball"),e.createElement("option",{value:"9 Ball"},"9 Ball"),e.createElement("option",{value:"10 Ball"},"10 Ball"),e.createElement("option",{value:"Mixed"},"Mixed"))),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Race Length:"),e.createElement("select",{value:E,onChange:X=>I(Number(X.target.value)),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},i==="scheduled"||i==="challenge"?e.createElement("option",{value:5},"5"):[...Array(13)].map((X,O)=>{const Q=O+3;return e.createElement("option",{key:Q,value:Q},Q)}))),e.createElement("div",{style:{marginBottom:"1.5rem"}},e.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Note (optional):"),e.createElement("textarea",{value:M,onChange:X=>N(X.target.value),placeholder:"Add a note explaining your counter proposal...",rows:3,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",resize:"vertical"}})),_&&e.createElement("div",{style:{color:"#e53e3e",marginBottom:"1rem"}},_),e.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"center"}},e.createElement("button",{type:"submit",style:{background:"#e53e3e",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px"}},"Submit Counter"),e.createElement("button",{type:"button",onClick:t,style:{background:"#6c757d",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px"}},"Cancel"))))}const Md={_origin:"https://api.emailjs.com"},eI=(a,r="https://api.emailjs.com")=>{Md._userID=a,Md._origin=r},b5=(a,r,t)=>{if(!a)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!r)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class ZE{constructor(r){this.status=r.status,this.text=r.responseText}}const v5=(a,r,t={})=>new Promise((n,o)=>{const i=new XMLHttpRequest;i.addEventListener("load",({target:c})=>{const u=new ZE(c);u.status===200||u.text==="OK"?n(u):o(u)}),i.addEventListener("error",({target:c})=>{o(new ZE(c))}),i.open("POST",Md._origin+a,!0),Object.keys(t).forEach(c=>{i.setRequestHeader(c,t[c])}),i.send(r)}),tI=(a,r,t,n)=>{const o=n||Md._userID;return b5(o,a,r),v5("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:o,service_id:a,template_id:r,template_params:t}),{"Content-type":"application/json"})},aI=a=>{let r;if(typeof a=="string"?r=document.querySelector(a):r=a,!r||r.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return r},nI=(a,r,t,n)=>{const o=n||Md._userID,i=aI(t);b5(o,a,r);const c=new FormData(i);return c.append("lib_version","3.2.0"),c.append("service_id",a),c.append("template_id",r),c.append("user_id",o),v5("/api/v1.0/email/send-form",c)},Yd={init:eI,send:tI,sendForm:nI};function rI({to_email:a,to_name:r,from_name:t,from_email:n,day:o,date:i,time:c,location:u,note:m,gameType:g,raceLength:f,proposalId:y}){if(!a||a==="undefined")return alert("Recipient email is missing. Cannot send proposal."),Promise.reject(new Error("Recipient email is missing."));if(!n||n==="undefined")return alert("Your email is missing. Cannot send proposal."),Promise.reject(new Error("Sender email is missing."));const v=lr(Gx(i),"MM-dd-yyyy"),w=Object.entries({from:t,to:r,day:o,date:v,time:c,location:u,note:m,proposerEmail:n,gameType:g,raceLength:f,proposalId:y}).map(([I,M])=>`${I}=${encodeURIComponent(M)}`).join("&"),x="https://newapp-1-ic1v.onrender.com",k=`${x}/#/confirm-match?${w}`,E=`${x}/#/confirm-match?${w}`;return Yd.send("service_l5q2047","template_xu0tl3i",{to_email:a,to_name:r,from_name:t,day:o,date:v,time:c,location:u,note:m,gameType:g,raceLength:f,confirm_link:k,counter_propose_link:E},"g6vqrOs_Jb6LL1VCZ")}function oI({to_email:a,to_name:r,day:t,date:n,time:o,location:i,proposal_note:c,confirmation_note:u,confirmed_by:m,gameType:g,raceLength:f}){return Yd.send("service_l5q2047","template_dtc43h8",{to_email:a,to_name:r,day:t,date:n,time:o,location:i,proposal_note:c,confirmation_note:u,confirmed_by:m,gameType:g,raceLength:f},"g6vqrOs_Jb6LL1VCZ")}function lI({to_email:a,to_name:r,division:t,daysUntilDeadline:n,completedMatches:o,totalRequiredMatches:i,deadlineDate:c,remainingMatches:u}){if(!a||a==="undefined")return console.error("Recipient email is missing. Cannot send deadline reminder."),Promise.reject(new Error("Recipient email is missing."));const m=Math.round(o/i*100),g=n<=1?"CRITICAL":n<=3?"URGENT":n<=7?"WARNING":"REMINDER";return Yd.send("service_l5q2047","template_xbpnbge",{to_email:a,to_name:r,division:t,days_until_deadline:n,completed_matches:o,total_required_matches:i,progress_percentage:m,deadline_date:c,remaining_matches:u,urgency_level:g,app_url:"https://newapp-1-ic1v.onrender.com"},"g6vqrOs_Jb6LL1VCZ")}function sI({to_email:a,to_name:r,registrationId:t,registrationDate:n,registrationFee:o,paymentMethods:i=[],additionalInstructions:c="",contactInfo:u={}}){if(!a||a==="undefined")return console.error("Recipient email is missing. Cannot send payment instructions."),Promise.reject(new Error("Recipient email is missing."));const m=i.length>0?i.map((f,y)=>{let v=f.instructions;return f.key==="venmo"&&f.username?v=`Send payment to @${f.username}`:f.key==="cashapp"&&f.username?v=`Send payment to $${f.username}`:f.key==="paypal"&&f.email?v=`Send payment to ${f.email}`:f.key==="creditCard"&&f.paymentLink?v=`Pay securely online: ${f.paymentLink}`:f.key==="applePay"&&f.paymentLink?v=`Pay with Apple Pay: ${f.paymentLink}`:f.key==="googlePay"&&f.paymentLink?v=`Pay with Google Pay: ${f.paymentLink}`:f.key==="check"&&f.payeeName&&(v=`Make check payable to ${f.payeeName}`),`${y+1}. **${f.displayName}:** ${v}`}).join(`
`):"1. **Cash:** Pay in person to league administrator",g=u&&(u.email||u.phone||u.name)?`

**For payment questions, contact:**
${u.name?`Name: ${u.name}
`:""}${u.email?`Email: ${u.email}
`:""}${u.phone?`Phone: ${u.phone}`:""}`:"";return Yd.send("service_l5q2047","template_payment_instructions",{to_email:a,to_name:r,registration_id:t,registration_date:n,registration_fee:o,payment_instructions:`
        **League Registration Payment Instructions**
        
        Registration Fee: $${o}
        Registration ID: ${t}
        
        **Payment Methods:**
${m}
        
        ${c?`
**Additional Instructions:**
${c}
`:""}
        
        **Important Notes:**
        • Include your Registration ID (${t}) in payment notes
        • Payment must be completed within 7 days
        • Your PIN will be sent once payment is confirmed
        • Contact league admin if you have payment issues${g}
        
        **Next Steps:**
        1. Complete payment using one of the methods above
        2. Wait for payment confirmation email
        3. You'll receive your unique PIN and full access
      `,app_url:"https://newapp-1-ic1v.onrender.com"},"g6vqrOs_Jb6LL1VCZ")}const iI="_confirmMatchCard_7heot_7",cI="_confirmMatchTitle_7heot_31",dI="_redTitle_7heot_45",uI="_confirmMatchDetails_7heot_55",mI="_detailRow_7heot_65",pI="_confirmBtn_7heot_173",Ha={confirmMatchCard:iI,confirmMatchTitle:cI,redTitle:dI,confirmMatchDetails:uI,detailRow:mI,confirmBtn:pI};function fI({text:a,query:r}){return r?a.split(new RegExp(`(${r})`,"gi")).map((n,o)=>n.toLowerCase()===r.toLowerCase()?e.createElement("mark",{key:o},n):n):e.createElement(e.Fragment,null,a)}const de="https://atlasbackend-bnng.onrender.com";function gI(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-"),m=new Date(parseInt(i),parseInt(c)-1,parseInt(u)),g=String(m.getMonth()+1).padStart(2,"0"),f=String(m.getDate()).padStart(2,"0"),y=m.getFullYear();return`${g}-${f}-${y}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}function hI(){const[a]=V0(),[r,t]=h.useState(!1),[n,o]=h.useState(""),[i,c]=h.useState(!1),m=a.get("action")==="counter",g=a.get("from"),f=a.get("to"),y=a.get("day"),v=a.get("date"),S=a.get("time"),w=a.get("location"),x=a.get("proposerEmail"),k=a.get("note"),E=a.get("gameType"),I=a.get("raceLength"),M=a.get("proposalId");h.useEffect(()=>{m&&c(!0)},[m]);const N=()=>{console.log("CONFIRM BUTTON CLICKED"),oI({to_email:x,to_name:g,day:y,date:v,time:S,location:w,confirmed_by:f,proposal_note:k||"",confirmation_note:n||"",gameType:E||"",raceLength:I||""}),M?fetch(`${de}/api/proposals/${M}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"confirmed",note:n})}).then(P=>{if(!P.ok)throw new Error("Failed to confirm proposal");console.log("Proposal confirmed successfully"),t(!0)}).catch(P=>{console.error("Error confirming proposal:",P),alert("Failed to confirm proposal: "+P.message)}):(console.log("No proposalId provided - showing confirmation modal"),t(!0))};return e.createElement("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)"}},e.createElement("div",{className:"draggable-modal",style:{background:"linear-gradient(120deg, #232323 80%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:window.innerWidth<=400?"0":"1.2rem",boxShadow:"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",width:window.innerWidth<=400?"100vw":"auto",maxWidth:window.innerWidth<=400?"100vw":"480px",minWidth:0,margin:window.innerWidth<=400?"0":"0 auto",left:0,right:0,animation:"modalBounceIn 0.5s cubic-bezier(.21,1.02,.73,1.01)",padding:"1.5rem 2rem 1rem 2rem",position:"relative",fontFamily:"inherit",boxSizing:"border-box",textAlign:"center",marginTop:"100px",maxHeight:"85vh",overflowY:"auto"}},e.createElement("div",{style:{position:"relative"}},e.createElement("button",{onClick:()=>window.location.href="/#/dashboard",style:{position:"absolute",top:"-0.5rem",right:"-0.5rem",background:"#333",color:"#fff",border:"1px solid #666",borderRadius:"50%",width:"2rem",height:"2rem",fontSize:"1.2rem",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s, border-color 0.2s",zIndex:10},onMouseEnter:_=>{_.target.style.background="#e53e3e",_.target.style.borderColor="#fff"},onMouseLeave:_=>{_.target.style.background="#333",_.target.style.borderColor="#666"}},"×"),e.createElement("h1",{style:{marginBottom:"1rem",fontSize:"1.4rem",fontWeight:"bold",letterSpacing:"0.01em",color:"#ff0000"}},"🎱 Front Range Pool League",e.createElement("br",null),"Confirm Match")),e.createElement("p",{style:{marginBottom:"1rem",fontSize:"0.95rem",color:"#faf6f6",textAlign:"center"}},"You are about to confirm this match. Your opponent will be notified by email and the match will be added to your app calendar!"),e.createElement("div",{style:{textAlign:"center",marginBottom:"0.8rem",background:"#1a1a1a",color:"#faf6f6",borderRadius:8,padding:"0.4rem 0.5rem",border:"1px solid #ff0000"}},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},e.createElement("span",{role:"img","aria-label":"you"},"🧑")," ",e.createElement("strong",null,"You:")," ",f||"N/A"),e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},e.createElement("span",{role:"img","aria-label":"opponent"},"🤝")," ",e.createElement("strong",null,"Opponent:")," ",g||"N/A"),e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},e.createElement("span",{role:"img","aria-label":"calendar"},"📅")," ",e.createElement("strong",null,"Day:")," ",y||"N/A"),e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},e.createElement("span",{role:"img","aria-label":"date"},"🗓️")," ",e.createElement("strong",null,"Date:")," ",gI(v)),e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},e.createElement("span",{role:"img","aria-label":"clock"},"⏰")," ",e.createElement("strong",null,"Time:")," ",S||"N/A"),E&&e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},e.createElement(Hp,{gameType:E,size:16})," ",e.createElement("strong",null,"Game Type:")," ",E),I&&e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},e.createElement("span",{role:"img","aria-label":"race"},"🏁")," ",e.createElement("strong",null,"Race to:")," ",I),e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},e.createElement("span",{role:"img","aria-label":"location"},"📍")," ",e.createElement("strong",null,"Location:")," ",w||"N/A")),k&&e.createElement("div",{style:{margin:"12px 0 0 0",padding:"0.6rem 0.8rem",background:"#2a2a2a",borderLeft:"3px solid #ffb300",borderRadius:4,color:"#ffb300",fontSize:"0.98rem",textAlign:"left"}},e.createElement("span",{role:"img","aria-label":"note"},"📝")," ",e.createElement("strong",null,"Note from opponent:"),e.createElement("br",null),k),e.createElement("div",{style:{margin:"1rem 0 0.2rem 0",textAlign:"left"}},e.createElement("label",{htmlFor:"note",style:{fontWeight:500,color:"#faf6f6",marginBottom:"0.2rem",display:"block"}},"📝 Add a note (optional):"),e.createElement("textarea",{id:"note",value:n,onChange:_=>o(_.target.value),rows:2,placeholder:"Write a message to your opponent…",style:{width:"100%",minHeight:"54px",borderRadius:7,border:"1px solid #666",padding:"0.6em 0.8em",fontSize:"1rem",marginTop:"0.2rem",resize:"vertical",background:"#1a1a1a",color:"#faf6f6",boxSizing:"border-box",transition:"border 0.2s"},onFocus:_=>_.target.style.border="1.5px solid #ff0000",onBlur:_=>_.target.style.border="1px solid #666"})),e.createElement("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"1rem",flexWrap:"wrap"}},e.createElement("button",{style:{background:"#ff0000",color:"#fff",border:"none",borderRadius:8,padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px",transition:"background 0.18s, color 0.18s, border 0.18s, box-shadow 0.18s",boxShadow:"0 2px 6px #0001"},onMouseEnter:_=>_.target.style.background="#c90000",onMouseLeave:_=>_.target.style.background="#ff0000",onClick:N},"✅ Confirm Match"),e.createElement("button",{style:{background:"#fff",color:"#ff0000",border:"2px solid #ff0000",borderRadius:8,padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px",transition:"background 0.18s, color 0.18s, border 0.18s, box-shadow 0.18s",boxShadow:"0 2px 6px #0001"},onMouseEnter:_=>{_.target.style.background="#ff0000",_.target.style.color="#fff"},onMouseLeave:_=>{_.target.style.background="#fff",_.target.style.color="#ff0000"},onClick:()=>c(!0)},"🔄 Counter Propose")),e.createElement("div",{style:{textAlign:"center",marginTop:"1rem"}},e.createElement("button",{onClick:()=>window.location.href="/#/dashboard",style:{background:"#333",color:"#fff",border:"1px solid #666",borderRadius:6,padding:"0.5rem 1rem",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"background 0.2s, border-color 0.2s"},onMouseEnter:_=>{_.target.style.background="#444",_.target.style.borderColor="#888"},onMouseLeave:_=>{_.target.style.background="#333",_.target.style.borderColor="#666"}},"📊 Go to Dashboard")),e.createElement(Ax,{open:r,message:"Match confirmed! The opponent has been notified and the match has been added to your app calendar.",proposalNote:k,confirmationNote:n,gameType:E,raceLength:I,day:y,date:v,time:S,location:w,onClose:()=>t(!1)}),e.createElement(y5,{open:i,onClose:()=>c(!1),proposal:{senderName:g,receiverName:f,senderEmail:x,receiverEmail:"",date:v,time:S,location:w,message:k,gameType:E,raceLength:I,_id:M},onSubmit:_=>{console.log("Counter proposal submitted:",_),c(!1)},senderPlayer:{firstName:(f==null?void 0:f.split(" ")[0])||"",lastName:(f==null?void 0:f.split(" ").slice(1).join(" "))||"",email:""},phase:"scheduled",selectedDivision:""})))}const yI="_dashboardBg_1ubfn_35",bI="_floatingLogo_1ubfn_55",vI="_dashboardFrame_1ubfn_71",EI="_dashboardCard_1ubfn_103",xI="_fadeInUp_1ubfn_1",wI="_dashboardTitle_1ubfn_163",SI="_dashboardUserName_1ubfn_179",CI="_dashboardSection_1ubfn_199",NI="_newsUpdatesSection_1ubfn_223",_I="_dashboardSectionBox_1ubfn_231",kI="_dashboardSectionTitle_1ubfn_255",II="_dashboardHelperText_1ubfn_273",MI="_matchesSection_1ubfn_289",AI="_dashboardList_1ubfn_313",DI="_matchCard_1ubfn_335",RI="_matchCardButton_1ubfn_381",TI="_matchCardOpponentLabel_1ubfn_433",PI="_matchCardOpponentName_1ubfn_435",LI="_matchCardDetail_1ubfn_437",BI="_dashboardActions_1ubfn_519",zI="_dashboardBtn_1ubfn_541",OI="_dashboardBtnPrimary_1ubfn_663",FI="_dashboardBtnSecondary_1ubfn_671",WI="_dashboardBtnSuccess_1ubfn_691",UI="_dashboardBtnWarning_1ubfn_711",$I="_dashboardBtnDanger_1ubfn_731",jI="_dashboardBtnSmall_1ubfn_753",HI="_dashboardBtnLarge_1ubfn_767",YI="_buttonRow_1ubfn_803",qI="_errorBox_1ubfn_815",GI="_dashboardAdminBtn_1ubfn_835",ZI="_dashboardLogoutBtn_1ubfn_871",VI="_dashboardNoteItem_1ubfn_909",QI="_simulationOuterWrapper_1ubfn_931",JI="_simulationContainer_1ubfn_947",XI="_modalOverlay_1ubfn_989",KI="_dashboardModalContent_1ubfn_1041",e6="_modalBounceIn_1ubfn_1",t6="_modalHeader_1ubfn_1097",a6="_modalTitle_1ubfn_1123",n6="_closeBtn_1ubfn_1141",r6="_modalFooter_1ubfn_1177",o6="_footerCloseBtn_1ubfn_1219",l6="_dashboardHighlight_1ubfn_1289",s6="_pulseGlow_1ubfn_1",i6="_dashboardSimulationBox_1ubfn_1381",c6="_proposalAlertButton_1ubfn_1465",d6="_proposalAlertRow_1ubfn_1479",u6="_newsUpdatesHeader_1ubfn_1705",m6="_poolTableContainer_1ubfn_1827",p6="_modalDetailsSnazzy_1ubfn_1949",f6="_modalDetailRowSnazzy_1ubfn_1957",g6="_gameTypeIcon_1ubfn_1967",h6="_iframeWrapper_1ubfn_1985",y6="_modalIframe_1ubfn_2007",b6="_proposalModalContent_1ubfn_2031",v6="_proposalModalTitle_1ubfn_2069",E6="_proposalModalCloseBtn_1ubfn_2091",x6="_proposalCardButton_1ubfn_2133",w6="_proposalCardLabel_1ubfn_2171",S6="_proposalCardMessage_1ubfn_2183",C6="_smallShowMoreBtn_1ubfn_2193",N6="_counterProposalOverlay_1ubfn_2229",_6="_proposalList_1ubfn_2279",k6="_proposalCard_1ubfn_2133",I6="_proposalCardBtn_1ubfn_2293",M6="_proposalCardName_1ubfn_2329",A6="_emptyMsg_1ubfn_2337",D6="_matchCardContentWrapper_1ubfn_2429",R6="_matchCardDoneBtn_1ubfn_2443",T6="_standingsModalContent_1ubfn_2495",P6="_standingsTableWrapper_1ubfn_2571",L6="_standingsTable_1ubfn_2571",B6="_inputField_1ubfn_2647",z6="_proposalModalHeaderBar_1ubfn_2695",O6="_phasePill_1ubfn_2713",F6="_divisionPill_1ubfn_2733",W6="_proposalModalToRow_1ubfn_2749",U6="_toOpponentLabel_1ubfn_2763",$6="_toOpponentName_1ubfn_2775",j6="_proposalModalDayRow_1ubfn_2785",H6="_dayLabel_1ubfn_2799",Y6="_dayValue_1ubfn_2811",q6="_proposalModalFieldRow_1ubfn_2821",G6="_fieldLabel_1ubfn_2831",Z6="_datePill_1ubfn_2849",V6="_proposalModalButtonRow_1ubfn_2875",Q6="_root_1ubfn_1",J6="_challengeStatsContainer_1ubfn_3207",X6="_challengeStatsHeader_1ubfn_3223",K6="_challengeStatsGrid_1ubfn_3231",eM="_challengeStatCard_1ubfn_3245",tM="_challengeStatHeader_1ubfn_3269",aM="_challengeProgressBar_1ubfn_3287",nM="_challengeProgressFill_1ubfn_3305",rM="_challengeStatDetails_1ubfn_3315",oM="_challengeStatusSummary_1ubfn_3335",lM="_mobileMatchesOverlay_1ubfn_3579",sM="_countersRow_1ubfn_3587",iM="_counterBox_1ubfn_3599",cM="_scheduleMatchBtn_1ubfn_3607",dM="_noMatchesText_1ubfn_3753",uM="_dashboardButton_1ubfn_3955",mM="_dashboardButtonSmall_1ubfn_3969",pM="_dashboardButtonLarge_1ubfn_3981",fM="_dashboardGrid_1ubfn_3993",gM="_dashboardFlexRow_1ubfn_4003",hM="_dashboardStats_1ubfn_4025",yM="_dashboardStat_1ubfn_4025",bM="_dashboardStatValue_1ubfn_4045",vM="_dashboardStatLabel_1ubfn_4053",EM="_dashboardText_1ubfn_4225",xM="_dashboardTextSmall_1ubfn_4235",wM="_dashboardSpacing_1ubfn_4247",SM="_dashboardSpacingLarge_1ubfn_4255",CM="_matchManager_1ubfn_4573",NM="_matchStats_1ubfn_4587",_M="_statsGrid_1ubfn_4617",kM="_statItem_1ubfn_4629",IM="_statNumber_1ubfn_4645",MM="_statLabel_1ubfn_4661",AM="_matchSection_1ubfn_4675",DM="_noMatches_1ubfn_3753",RM="_matchList_1ubfn_4719",TM="_completedMatch_1ubfn_4759",PM="_matchHeader_1ubfn_4777",LM="_matchStatus_1ubfn_4791",BM="_matchDate_1ubfn_4809",zM="_matchPlayers_1ubfn_4819",OM="_player1_1ubfn_4837",FM="_player2_1ubfn_4837",WM="_winner_1ubfn_4851",UM="_vs_1ubfn_4863",$M="_matchDetails_1ubfn_4873",jM="_location_1ubfn_4891",HM="_type_1ubfn_4891",YM="_matchResult_1ubfn_4903",qM="_score_1ubfn_4921",GM="_matchNotes_1ubfn_4931",ZM="_notesLabel_1ubfn_4943",VM="_notesText_1ubfn_4957",QM="_matchActions_1ubfn_4969",JM="_actionButton_1ubfn_4985",XM="_cancelButton_1ubfn_5021",KM="_modal_1ubfn_989",eA="_formGroup_1ubfn_5105",tA="_modalActions_1ubfn_5177",aA="_loading_1ubfn_5257",nA="_mobileCard_1ubfn_5373",rA="_mobileCardElevated_1ubfn_5403",oA="_mobileCardOutlined_1ubfn_5413",lA="_mobileButton_1ubfn_5425",sA="_mobileButtonSecondary_1ubfn_5503",iA="_mobileButtonSuccess_1ubfn_5523",cA="_mobileButtonWarning_1ubfn_5543",dA="_mobileButtonDanger_1ubfn_5563",uA="_mobileButtonSmall_1ubfn_5583",mA="_mobileButtonLarge_1ubfn_5595",pA="_mobileButtonFullWidth_1ubfn_5607",fA="_mobileList_1ubfn_5617",gA="_mobileListItem_1ubfn_5629",hA="_mobileNavigation_1ubfn_5671",yA="_mobileActionSheetOverlay_1ubfn_5693",bA="_fadeIn_1ubfn_1",vA="_mobileActionSheet_1ubfn_5693",EA="_slideUp_1ubfn_1",xA="_mobileSwipeableCard_1ubfn_5747",wA="_mobilePullToRefresh_1ubfn_5803",SA="_mobileDashboard_1ubfn_5815",CA="_mobileLoadingOverlay_1ubfn_6039",NA="_mobileErrorContainer_1ubfn_6069",_A="_mobileErrorIcon_1ubfn_6091",kA="_mobileErrorMessage_1ubfn_6103",IA="_mobileSuccessContainer_1ubfn_6119",MA="_mobileSuccessIcon_1ubfn_6141",AA="_mobileSuccessMessage_1ubfn_6153",DA="_mobileInfoContainer_1ubfn_6169",RA="_mobileInfoIcon_1ubfn_6191",TA="_mobileInfoMessage_1ubfn_6203",PA="_loadingOverlay_1ubfn_6349",LA="_loadingSpinner_1ubfn_6377",BA="_spin_1ubfn_1",zA="_loadingText_1ubfn_6405",OA="_skeletonLoader_1ubfn_6423",FA="_skeletonLine_1ubfn_6437",WA="_shimmer_1ubfn_1",UA="_errorContainer_1ubfn_6477",$A="_errorIcon_1ubfn_6499",jA="_errorMessage_1ubfn_6511",HA="_errorAction_1ubfn_6525",YA="_successContainer_1ubfn_6561",qA="_successIcon_1ubfn_6583",GA="_successMessage_1ubfn_6595",ZA="_infoContainer_1ubfn_6615",VA="_infoIcon_1ubfn_6637",QA="_infoMessage_1ubfn_6649",JA="_srOnly_1ubfn_6705",XA="_slideInLeft_1ubfn_1",KA="_slideInRight_1ubfn_1",Ae={dashboardBg:yI,floatingLogo:bI,dashboardFrame:vI,dashboardCard:EI,fadeInUp:xI,dashboardTitle:wI,dashboardUserName:SI,dashboardSection:CI,newsUpdatesSection:NI,dashboardSectionBox:_I,dashboardSectionTitle:kI,dashboardHelperText:II,matchesSection:MI,dashboardList:AI,matchCard:DI,matchCardButton:RI,matchCardOpponentLabel:TI,matchCardOpponentName:PI,matchCardDetail:LI,dashboardActions:BI,dashboardBtn:zI,dashboardBtnPrimary:OI,dashboardBtnSecondary:FI,dashboardBtnSuccess:WI,dashboardBtnWarning:UI,dashboardBtnDanger:$I,dashboardBtnSmall:jI,dashboardBtnLarge:HI,buttonRow:YI,errorBox:qI,dashboardAdminBtn:GI,dashboardLogoutBtn:ZI,dashboardNoteItem:VI,simulationOuterWrapper:QI,simulationContainer:JI,modalOverlay:XI,dashboardModalContent:KI,modalBounceIn:e6,modalHeader:t6,modalTitle:a6,closeBtn:n6,modalFooter:r6,footerCloseBtn:o6,dashboardHighlight:l6,pulseGlow:s6,dashboardSimulationBox:i6,proposalAlertButton:c6,proposalAlertRow:d6,newsUpdatesHeader:u6,poolTableContainer:m6,modalDetailsSnazzy:p6,modalDetailRowSnazzy:f6,gameTypeIcon:g6,iframeWrapper:h6,modalIframe:y6,proposalModalContent:b6,proposalModalTitle:v6,proposalModalCloseBtn:E6,proposalCardButton:x6,proposalCardLabel:w6,proposalCardMessage:S6,smallShowMoreBtn:C6,counterProposalOverlay:N6,proposalList:_6,proposalCard:k6,proposalCardBtn:I6,proposalCardName:M6,emptyMsg:A6,matchCardContentWrapper:D6,matchCardDoneBtn:R6,standingsModalContent:T6,standingsTableWrapper:P6,standingsTable:L6,inputField:B6,proposalModalHeaderBar:z6,phasePill:O6,divisionPill:F6,proposalModalToRow:W6,toOpponentLabel:U6,toOpponentName:$6,proposalModalDayRow:j6,dayLabel:H6,dayValue:Y6,proposalModalFieldRow:q6,fieldLabel:G6,datePill:Z6,proposalModalButtonRow:V6,root:Q6,challengeStatsContainer:J6,challengeStatsHeader:X6,challengeStatsGrid:K6,challengeStatCard:eM,challengeStatHeader:tM,challengeProgressBar:aM,challengeProgressFill:nM,challengeStatDetails:rM,challengeStatusSummary:oM,mobileMatchesOverlay:lM,countersRow:sM,counterBox:iM,scheduleMatchBtn:cM,noMatchesText:dM,dashboardButton:uM,dashboardButtonSmall:mM,dashboardButtonLarge:pM,dashboardGrid:fM,dashboardFlexRow:gM,dashboardStats:hM,dashboardStat:yM,dashboardStatValue:bM,dashboardStatLabel:vM,dashboardText:EM,dashboardTextSmall:xM,dashboardSpacing:wM,dashboardSpacingLarge:SM,matchManager:CM,matchStats:NM,statsGrid:_M,statItem:kM,statNumber:IM,statLabel:MM,matchSection:AM,noMatches:DM,matchList:RM,completedMatch:TM,matchHeader:PM,matchStatus:LM,matchDate:BM,matchPlayers:zM,player1:OM,player2:FM,winner:WM,vs:UM,matchDetails:$M,location:jM,type:HM,matchResult:YM,score:qM,matchNotes:GM,notesLabel:ZM,notesText:VM,matchActions:QM,actionButton:JM,cancelButton:XM,modal:KM,formGroup:eA,modalActions:tA,loading:aA,mobileCard:nA,mobileCardElevated:rA,mobileCardOutlined:oA,mobileButton:lA,mobileButtonSecondary:sA,mobileButtonSuccess:iA,mobileButtonWarning:cA,mobileButtonDanger:dA,mobileButtonSmall:uA,mobileButtonLarge:mA,mobileButtonFullWidth:pA,mobileList:fA,mobileListItem:gA,mobileNavigation:hA,mobileActionSheetOverlay:yA,fadeIn:bA,mobileActionSheet:vA,slideUp:EA,mobileSwipeableCard:xA,mobilePullToRefresh:wA,mobileDashboard:SA,mobileLoadingOverlay:CA,mobileErrorContainer:NA,mobileErrorIcon:_A,mobileErrorMessage:kA,mobileSuccessContainer:IA,mobileSuccessIcon:MA,mobileSuccessMessage:AA,mobileInfoContainer:DA,mobileInfoIcon:RA,mobileInfoMessage:TA,loadingOverlay:PA,loadingSpinner:LA,spin:BA,loadingText:zA,skeletonLoader:OA,skeletonLine:FA,shimmer:WA,errorContainer:UA,errorIcon:$A,errorMessage:jA,errorAction:HA,successContainer:YA,successIcon:qA,successMessage:GA,infoContainer:ZA,infoIcon:VA,infoMessage:QA,srOnly:JA,slideInLeft:XA,slideInRight:KA},Xi=""+new URL("tenball-I4UPjCSs.svg",import.meta.url).href,E5=""+new URL("PredatorTable-CE1I7Bce.png",import.meta.url).href,Kp=""+new URL("nineball-5ZBjRXm5.svg",import.meta.url).href,Ad=""+new URL("8ball-COe24mO4.svg",import.meta.url).href,x5="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3c!--%20Main%20ball%20gradient%20with%20realistic%20lighting%20--%3e%3cradialGradient%20id='cueMain'%20cx='25%25'%20cy='25%25'%20r='75%25'%3e%3cstop%20offset='0%25'%20stop-color='%23ffffff'/%3e%3cstop%20offset='30%25'%20stop-color='%23f5f5f5'/%3e%3cstop%20offset='60%25'%20stop-color='%23e8e8e8'/%3e%3cstop%20offset='100%25'%20stop-color='%23d0d0d0'/%3e%3c/radialGradient%3e%3c!--%20Secondary%20highlight%20for%20depth%20--%3e%3cradialGradient%20id='cueHighlight'%20cx='20%25'%20cy='20%25'%20r='40%25'%3e%3cstop%20offset='0%25'%20stop-color='%23ffffff'%20stop-opacity='0.9'/%3e%3cstop%20offset='60%25'%20stop-color='%23ffffff'%20stop-opacity='0.3'/%3e%3cstop%20offset='100%25'%20stop-color='%23ffffff'%20stop-opacity='0'/%3e%3c/radialGradient%3e%3c!--%20Specular%20highlight%20--%3e%3cradialGradient%20id='cueSpecular'%20cx='35%25'%20cy='35%25'%20r='15%25'%3e%3cstop%20offset='0%25'%20stop-color='%23ffffff'/%3e%3cstop%20offset='100%25'%20stop-color='%23ffffff'%20stop-opacity='0'/%3e%3c/radialGradient%3e%3c!--%20Shadow%20gradient%20--%3e%3cradialGradient%20id='cueShadow'%20cx='75%25'%20cy='75%25'%20r='25%25'%3e%3cstop%20offset='0%25'%20stop-color='%23000000'%20stop-opacity='0.2'/%3e%3cstop%20offset='100%25'%20stop-color='%23000000'%20stop-opacity='0'/%3e%3c/radialGradient%3e%3c/defs%3e%3c!--%20Main%20ball%20--%3e%3ccircle%20cx='8'%20cy='8'%20r='7.5'%20fill='url(%23cueMain)'%20stroke='%23c0c0c0'%20stroke-width='0.3'/%3e%3c!--%20Primary%20highlight%20--%3e%3ccircle%20cx='6'%20cy='6'%20r='2.5'%20fill='url(%23cueHighlight)'/%3e%3c!--%20Specular%20highlight%20--%3e%3ccircle%20cx='7'%20cy='7'%20r='1.2'%20fill='url(%23cueSpecular)'/%3e%3c!--%20Subtle%20shadow%20for%20depth%20--%3e%3ccircle%20cx='9'%20cy='9'%20r='7.5'%20fill='url(%23cueShadow)'/%3e%3c/svg%3e",eD="_pinBallImg_1hrzk_212",tD={pinBallImg:eD},uy=""+new URL("logo-CyezyYO7.png",import.meta.url).href,aD=[{key:"cue",src:x5,alt:"Cue Ball"},{key:"8",src:Ad,alt:"8 Ball"},{key:"9",src:Kp,alt:"9 Ball"},{key:"10",src:Xi,alt:"10 Ball"}],w5=600,S5=300,za=15,Wr=za/2;function nD(a,r,t,n=1){const o=t*n,i=r.x-a.x,c=r.y-a.y,u=Math.sqrt(i*i+c*c);if(u===0||u>=o)return;const m=o-u+.01,g=i/u,f=c/u;a.x-=g*(m/2),a.y-=f*(m/2),r.x+=g*(m/2),r.y+=f*(m/2);const y=a.vx-r.vx,v=a.vy-r.vy,w=-(y*g+v*f)||.01;a.vx+=w*g,a.vy+=w*f,r.vx-=w*g,r.vy-=w*f,a.isMoving=!0,r.isMoving=!0}function rD(a=w5,r=S5,t=1){const n=a/t,o=r/t;return[{x:0,y:0},{x:n,y:0},{x:0,y:o},{x:n,y:o},{x:n/2,y:0},{x:n/2,y:o}]}function Dd({isRotated:a=!1}){console.log("PoolSimulation isRotated:",a);const r=h.useRef(null),t=h.useRef(null),n=h.useRef({cue:e.createRef(),8:e.createRef(),9:e.createRef(),10:e.createRef()}),o=h.useRef({}),i=h.useRef({}),c=h.useRef(null),u=h.useRef(null),m=h.useRef(0),g=h.useRef(1),[f,y]=h.useState(!1);function v(){Object.keys(o.current).forEach(I=>{i.current[I]={x:o.current[I].x,y:o.current[I].y}})}function S(){const I=r.current;if(!I)return;const M=I.offsetWidth,N=I.offsetHeight,_=M/g.current,P=N/g.current,B=_*.25,R=P/2,W=za*.87,L=za*.5;function F(){return(Math.random()-.5)*1}o.current={8:{ref:n.current[8],x:B+F(),y:R+F(),vx:0,vy:0,isMoving:!1,visible:!0},9:{ref:n.current[9],x:B-W+F(),y:R-L+F(),vx:0,vy:0,isMoving:!1,visible:!0},10:{ref:n.current[10],x:B-W+F(),y:R+L+F(),vx:0,vy:0,isMoving:!1,visible:!0},cue:{ref:n.current.cue,x:_*.85,y:P/2,vx:0,vy:0,isMoving:!1,visible:!0}},Object.values(o.current).forEach(j=>{j.ref.current&&(j.ref.current.style.opacity=1)}),v()}function w(){S(),m.current=0,setTimeout(()=>{x()},1e3)}h.useEffect(()=>{if(r.current&&!f){const I=r.current,M=I.offsetWidth,N=I.offsetHeight;if(M<400||N<200)g.current=.55;else{const _=M/w5,P=N/S5;g.current=Math.min(_,P)}S(),setTimeout(()=>{x()},1e3),y(!0)}return()=>{cancelAnimationFrame(c.current),clearTimeout(u.current)}},[f]);function x(){if(!o.current.cue||o.current.cue.isMoving)return;const I=o.current.cue;if(m.current+=1,m.current===1){o.current[8];const M=o.current[9],N=r.current;if(!N)return;const _=N.offsetWidth,P=N.offsetHeight,B=_/g.current,R=P/g.current,W=B*.85,L=R*.5;I.x=W,I.y=L;const F=M.x+(Math.random()-.5)*za*.3,j=M.y+(Math.random()-.5)*za*.3,J=F-I.x,Y=j-I.y,D=Math.atan2(Y,J)+(Math.random()-.5)*(Math.PI/45),A=18+Math.random()*3;I.vx=Math.cos(D)*A,I.vy=Math.sin(D)*A,I.isMoving=!0,E();return}k()}function k(){var A;const I=["8","9","10"],M=I.find(U=>{var K;return(K=o.current[U])==null?void 0:K.visible});if(!M)return;const N=o.current.cue,_=o.current[M],P=r.current;if(!P)return;const B=P.offsetWidth,R=P.offsetHeight;B/g.current,R/g.current;const W=rD(B,R,g.current);let L=null,F=1/0;for(const U of W){U.x-_.x,U.y-_.y;let K=U.x,X=U.y;const O=K-_.x,Q=X-_.y,ne=Math.hypot(O,Q),T=_.x-O/ne*za,re=_.y-Q/ne*za;let G=!0;for(const be of I)if(be!==M&&(A=o.current[be])!=null&&A.visible){const Je=o.current[be];if(Math.abs((re-N.y)*Je.x-(T-N.x)*Je.y+T*N.y-re*N.x)/Math.hypot(T-N.x,re-N.y)<za*.6){G=!1;break}}if(!G)continue;const se=Math.hypot(N.x-T,N.y-re),pe=Math.hypot(_.x-U.x,_.y-U.y);let Se=se*.05;Se+=pe*.02,se<za*3?Se*=.01:se<za*6?Se*=.1:se<za*10&&(Se*=.3);const at=I.find(be=>{var Je;return be!==M&&((Je=o.current[be])==null?void 0:Je.visible)});if(at){const be=o.current[at],Je=T+(T-N.x)*.3,nt=re+(re-N.y)*.3;Math.hypot(Je-be.x,nt-be.y)<za*8&&(Se*=.5)}Se+=Math.random()*.2,Se<F&&(F=Se,L={ghostX:T,ghostY:re,targetToPocket:pe,cueToGhost:se,pocket:U})}if(!L){const U=Math.atan2(_.y-N.y,_.x-N.x),K=Math.hypot(_.x-N.x,_.y-N.y);L={ghostX:N.x+Math.cos(U)*K*.7,ghostY:N.y+Math.sin(U)*K*.7,targetToPocket:1e3,cueToGhost:K}}const j=L.ghostX-N.x,J=L.ghostY-N.y,Y=Math.hypot(j,J);let D;Y<za*2?D=3:Y<za*4?D=4:Y<za*8?D=5:Y<za*12?D=6:D=7,L.targetToPocket>za*6&&(D+=1),D+=(Math.random()-.5)*.3,D=Math.max(2,Math.min(8,D)),N.vx=j/Y*D,N.vy=J/Y*D,N.isMoving=!0,E()}function E(){const N=r.current;if(!N)return;const _=N.offsetWidth,P=N.offsetHeight,B=Wr*3.5,R=Wr*4.5,W=B,L=_/g.current-R,F=B,j=P/g.current-B;function J(){for(let Y=0;Y<16;Y++){Object.entries(o.current).forEach(([A,U])=>{if(!U.visible)return;let K=U.x+U.vx/16,X=U.y+U.vy/16;const O=r.current;if(O){const Q=O.offsetWidth,ne=O.offsetHeight,T=Q/g.current,re=ne/g.current;[{x:0,y:0},{x:T,y:0},{x:0,y:re},{x:T,y:re},{x:T/2,y:0},{x:T/2,y:re}].some(pe=>Math.hypot(K-pe.x,X-pe.y)<za*4)?(console.log(`Ball ${A} pocketed! Position: (${K.toFixed(1)}, ${X.toFixed(1)})`),U.isMoving=!1,U.visible=!1,U.ref.current&&(U.ref.current.style.opacity=0)):(K<W+Wr?(U.x=W+Wr,U.vx=Math.abs(U.vx)*.75):K>L-Wr?(U.x=L-Wr,U.vx=-Math.abs(U.vx)*.75):U.x=K,X<F+Wr?(U.y=F+Wr,U.vy=Math.abs(U.vy)*.75):X>j-Wr?(U.y=j-Wr,U.vy=-Math.abs(U.vy)*.75):U.y=X,U.vx*=Math.pow(.99,1/16),U.vy*=Math.pow(.99,1/16))}U.isMoving&&Math.abs(U.vx)<.03&&Math.abs(U.vy)<.03&&(U.vx=0,U.vy=0,U.isMoving=!1)});const D=Object.keys(o.current);for(let A=0;A<D.length;A++)for(let U=A+1;U<D.length;U++){const K=o.current[D[A]],X=o.current[D[U]];!K.visible||!X.visible||nD(K,X,za,g.current)}}if(Object.entries(o.current).forEach(([Y,D])=>{if(D.ref.current&&D.visible){const A=D.x*g.current-Wr*g.current,U=D.y*g.current-Wr*g.current,K=za*g.current,X=_-K,O=P-K;D.ref.current.style.left=Math.max(0,Math.min(A,X))+"px",D.ref.current.style.top=Math.max(0,Math.min(U,O))+"px",D.ref.current.style.width=K+"px",D.ref.current.style.height=K+"px",D.ref.current.style.opacity=1}}),!o.current.cue.visible){if(Object.values(o.current).some(O=>O.isMoving)){c.current=requestAnimationFrame(J);return}const Y=r.current;if(!Y)return;const D=Y.offsetWidth,A=Y.offsetHeight,U=D/g.current,K=A/g.current,X=["8","9","10"].filter(O=>{var Q;return(Q=o.current[O])==null?void 0:Q.visible});if(X.length>0){const O=X[0],Q=o.current[O],ne=(Math.random()-.5)*za*2,T=(Math.random()-.5)*za*2;o.current.cue.x=Q.x+ne,o.current.cue.y=Q.y+T}else o.current.cue.x=U*.5,o.current.cue.y=K*.5;o.current.cue.vx=0,o.current.cue.vy=0,o.current.cue.isMoving=!1,o.current.cue.visible=!0,o.current.cue.ref.current&&(o.current.cue.ref.current.style.opacity=1),setTimeout(()=>{k()},1500);return}if(!o.current[10].visible){setTimeout(()=>{w()},1200);return}Object.values(o.current).some(Y=>Y.isMoving)?c.current=requestAnimationFrame(J):u.current||(u.current=setTimeout(()=>{u.current=null,k()},2e3))}c.current=requestAnimationFrame(J)}return e.createElement("div",{ref:r,"data-pool-container":!0,style:{width:"100%",height:"100%",position:"relative",background:"linear-gradient(180deg, #1a1a1a 0%, #000000 100%)",zIndex:0,boxShadow:"inset 0 0 50px rgba(0,0,0,0.8)",pointerEvents:"none"}},e.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(ellipse 1200px 800px at center 60px, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0.04) 20%, rgba(255,255,255,0.02) 40%, rgba(255,255,255,0.01) 60%, transparent 80%)",zIndex:3,pointerEvents:"none"}}),e.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(circle 800px at center 40px, rgba(255,255,255,0.02) 0%, transparent 70%)",zIndex:3,pointerEvents:"none"}}),e.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(circle 800px at center 40px, rgba(255,255,255,0.02) 0%, transparent 70%)",zIndex:3,pointerEvents:"none"}}),e.createElement("img",{ref:t,src:E5,alt:"Pool Table",style:{width:"100%",height:"100%",display:"block",objectFit:"fill",position:"absolute",top:1,left:0,zIndex:1,pointerEvents:"none",opacity:1,filter:"opacity(1) contrast(1.3) brightness(1.25) saturate(1.1)",boxShadow:"inset 0 0 30px rgba(0,0,0,0.3)",transform:a?"rotate(90deg)":"none",transformOrigin:"center center"},onLoad:()=>{console.log("Table image loaded, isRotated:",a,"transform:",a?"rotate(90deg)":"none")}}),e.createElement("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",userSelect:"none",zIndex:2}},e.createElement("img",{src:uy,alt:"League Logo",style:{position:"absolute",left:"50%",top:"50%",width:"30.5%",height:"auto",transform:a?"translate(-50%, -50%) rotate(-90deg)":"translate(-50%, -50%)",objectFit:"contain",zIndex:2,opacity:.25,filter:"drop-shadow(0 1px 4px rgba(0,0,0,0.3))",pointerEvents:"none",userSelect:"none"}})),aD.map(I=>{var M,N;return e.createElement(e.Fragment,{key:I.key},e.createElement("img",{src:I.src,alt:I.alt,ref:n.current[I.key],className:tD.pinBallImg,style:{position:"absolute",left:0,top:0,width:za,height:za,zIndex:10,opacity:((M=o.current[I.key])==null?void 0:M.visible)===!1?0:1,transition:"none",pointerEvents:"none",filter:"opacity(1) contrast(1.3) brightness(1.2) saturate(1.1) drop-shadow(0 2px 4px rgba(0,0,0,0.3))",borderRadius:"50%",transform:a?"rotate(-90deg)":"none",transformOrigin:"center center"}}),e.createElement("div",{style:{position:"absolute",left:3,top:3,width:za-6,height:za-6,borderRadius:"50%",background:"radial-gradient(ellipse 8px 4px at 30% 30%, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.1) 50%, transparent 100%)",zIndex:11,opacity:((N=o.current[I.key])==null?void 0:N.visible)===!1?0:.8,pointerEvents:"none"}}))}))}function my({aspectWidth:a,aspectHeight:r,children:t}){const n=h.useRef(null),[o,i]=h.useState(.6);return h.useEffect(()=>{if(n.current){const{width:c,height:u}=n.current.getBoundingClientRect(),m=Math.min(c/a,u/r);i(m)}},[a,r]),e.createElement("div",{ref:n,style:{width:"100%",height:"100%",position:"relative",overflow:"visible",contain:"layout style paint"}},e.createElement("div",{style:{width:a,height:r,transform:`translate(-50%, -50%) scale(${o})`,transformOrigin:"center center",position:"absolute",top:"50%",left:"50%",pointerEvents:"none"}},t))}function oD({open:a,onClose:r,standingsUrl:t}){const[n,o]=h.useState(!0);return a?e.createElement(Bt,{open:a,onClose:r,title:"📊 League Standings",maxWidth:"90vw",className:"standings-modal"},e.createElement("div",{style:{height:"70vh",width:"100%",position:"relative"}},n&&e.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,color:"#e53e3e",fontSize:"1.2rem",fontWeight:"bold"}},"Loading standings..."),e.createElement("iframe",{src:t,style:{width:"100%",height:"100%",border:"none",borderRadius:"8px",background:"#fff"},title:"League Standings",onLoad:()=>o(!1)})),e.createElement("div",{style:{marginTop:"1rem",textAlign:"center",color:"#888",fontSize:"0.9rem"}},"Front Range Pool League")):null}function lD({open:a,onClose:r,playerName:t,playerLastName:n,selectedDivision:o}){const[i,c]=h.useState([]),[u,m]=h.useState(!0),[g,f]=h.useState(null),[y,v]=h.useState(null),[S,w]=h.useState([]),x=`${t} ${n}`;return h.useEffect(()=>{if(!a||!o)return;async function k(){try{m(!0),f(null);const E=o.replace(/[^A-Za-z0-9]/g,"_"),I=`${de}/static/standings_${E}.json`,M=await fetch(I);if(!M.ok)throw new Error(`Failed to fetch standings: ${M.status}`);const N=await M.json(),_=N.findIndex(P=>P.name&&P.name.toLowerCase().includes(x.toLowerCase()));if(_!==-1){v(_+1);const P=N.slice(_+1,_+5);w(P)}else f("Could not find user in standings")}catch(E){console.error("Error fetching standings:",E),f("Failed to load standings data")}finally{m(!1)}}k()},[a,o,x]),a?e.createElement("div",{className:Ae.modalOverlay,onClick:r},e.createElement("div",{className:Ae.dashboardModalContent,onClick:k=>k.stopPropagation()},e.createElement("div",{className:Ae.modalHeader},e.createElement("h2",{className:Ae.modalTitle},"🛡️ Potential Challengers"),e.createElement("button",{className:Ae.closeBtn,onClick:r},"×")),e.createElement("div",{style:{padding:"20px",flex:1,overflowY:"auto",display:"flex",flexDirection:"column"}},e.createElement("p",{style:{margin:"0 0 20px 0",color:"#e0e0e0",fontSize:"0.9rem",fontStyle:"italic",textAlign:"center"}},"Players ranked below you who could challenge you in Phase 2"),u&&e.createElement("div",{style:{textAlign:"center",padding:"40px 20px",color:"#888",flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},e.createElement("div",{style:{fontSize:"1.2rem",marginBottom:"10px"}},"🔄"),"Loading potential challengers..."),g&&e.createElement("div",{style:{textAlign:"center",padding:"40px 20px",color:"#e53e3e",flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},e.createElement("div",{style:{fontSize:"1.2rem",marginBottom:"10px"}},"⚠️"),g),!u&&!g&&e.createElement(e.Fragment,null,e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"8px",padding:"15px",marginBottom:"20px",border:"1px solid rgba(255,255,255,0.1)",textAlign:"center"}},e.createElement("div",{style:{color:"#ffffff",fontSize:"1.1rem",fontWeight:"bold",marginBottom:"5px"}},"Your Position: #",y),e.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.9rem"}},x)),e.createElement("div",{style:{marginBottom:"20px",flex:1}},e.createElement("h3",{style:{color:"#ffffff",fontSize:"1.2rem",marginBottom:"15px",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"Potential Challengers (",S.length,")"),S.length===0?e.createElement("div",{style:{textAlign:"center",padding:"20px",color:"#888",fontStyle:"italic"}},"No players ranked below you found in standings"):e.createElement("div",{style:{display:"grid",gap:"10px"}},S.map((k,E)=>e.createElement("div",{key:E,style:{background:"rgba(255,255,255,0.05)",borderRadius:"8px",padding:"15px",border:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"background-color 0.2s ease"},onMouseEnter:I=>I.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:I=>I.target.style.backgroundColor="rgba(255,255,255,0.05)"},e.createElement("div",{style:{flex:1}},e.createElement("div",{style:{color:"#ffffff",fontSize:"1rem",fontWeight:"bold",marginBottom:"5px"}},"#",y+E+1," - ",k.name||"Unknown Player"),k.record&&e.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.85rem"}},"Record: ",k.record),k.points&&e.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.85rem"}},"Points: ",k.points)),e.createElement("div",{style:{color:"#ff4444",fontSize:"1.5rem",marginLeft:"15px"}},"⚔️"))))),e.createElement("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"15px",border:"1px solid rgba(255,255,255,0.1)",marginBottom:"20px"}},e.createElement("div",{style:{color:"#ffffff",fontSize:"0.9rem",textAlign:"center",lineHeight:"1.4"}},e.createElement("strong",null,"Phase 2 Defense Rules:"),e.createElement("br",null),"• Players ranked below you can challenge you",e.createElement("br",null),"• You must accept at least 2 defense challenges",e.createElement("br",null),"• These are the players who could challenge you")))))):null}const sD="_modalOverlay_8evb8_7",iD="_modalContentSnazzy_8evb8_33",cD="_modalHeaderSnazzy_8evb8_69",dD="_modalAccentBar_8evb8_89",uD="_modalTitleSnazzy_8evb8_107",mD="_modalCloseBtnSnazzy_8evb8_131",pD="_modalDetailsSnazzy_8evb8_173",fD="_modalDetailRowSnazzy_8evb8_189",gD="_modalDetailIcon_8evb8_217",hD="_modalDetailLabelSnazzy_8evb8_229",yD="_modalDetailValueSnazzy_8evb8_243",bD="_modalOpponentName_8evb8_263",vD="_modalVs_8evb8_277",ED="_gameTypeIcon_8evb8_293",xD="_modalActionBtn_8evb8_397",jt={modalOverlay:sD,modalContentSnazzy:iD,modalHeaderSnazzy:cD,modalAccentBar:dD,modalTitleSnazzy:uD,modalCloseBtnSnazzy:mD,modalDetailsSnazzy:pD,modalDetailRowSnazzy:fD,modalDetailIcon:gD,modalDetailLabelSnazzy:hD,modalDetailValueSnazzy:yD,modalOpponentName:bD,modalVs:vD,gameTypeIcon:ED,modalActionBtn:xD};class wD{constructor(){this.backendUrl=de,this.currentAdmin=null,this.isAuthenticated=!1}async authenticateAdmin(r,t){try{console.log("🔐 Authenticating admin:",r);const n=await fetch(`${this.backendUrl}/api/platform/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,pin:t})});if(!n.ok){const i=await n.json();throw new Error(i.message||"Authentication failed")}const o=await n.json();if(o.success&&o.admin)return this.currentAdmin=o.admin,this.isAuthenticated=!0,localStorage.setItem("adminData",JSON.stringify(o.admin)),localStorage.setItem("isAdminAuthenticated","true"),console.log("✅ Admin authenticated:",o.admin.email,"Role:",o.admin.role),o.admin;throw new Error("Invalid response from server")}catch(n){throw console.error("❌ Admin authentication failed:",n),this.currentAdmin=null,this.isAuthenticated=!1,n}}async isSuperAdmin(r,t){try{const n=await this.authenticateAdmin(r,t);return n&&n.role==="super_admin"}catch(n){return console.log("🔍 User is not a super admin:",n.message),!1}}async isAdmin(r,t){try{const n=await this.authenticateAdmin(r,t);return n&&(n.role==="admin"||n.role==="super_admin"||n.role==="support")}catch(n){return console.log("🔍 User is not an admin:",n.message),!1}}getCurrentAdmin(){if(this.currentAdmin)return this.currentAdmin;const r=localStorage.getItem("adminData"),t=localStorage.getItem("isAdminAuthenticated")==="true";if(r&&t)try{return this.currentAdmin=JSON.parse(r),this.isAuthenticated=!0,this.currentAdmin}catch(n){console.error("Error parsing stored admin data:",n),this.logout()}return null}hasPermission(r){const t=this.getCurrentAdmin();return!t||!t.permissions?!1:t.permissions[r]===!0}isSuperAdminRole(){const r=this.getCurrentAdmin();return r&&r.role==="super_admin"}logout(){this.currentAdmin=null,this.isAuthenticated=!1,localStorage.removeItem("adminData"),localStorage.removeItem("isAdminAuthenticated"),console.log("🔓 Admin logged out")}isAuthenticated(){return this.isAuthenticated&&this.getCurrentAdmin()!==null}}const Kl=new wD,VE=""+new URL("ball9-U9rUK9VA.jpg",import.meta.url).href,QE=""+new URL("ball10-pPX9kWaM.jpg",import.meta.url).href;function py({open:a,onClose:r,player1:t,player2:n,onSelect:o}){return a?e.createElement(Bt,{open:a,onClose:r,title:"Who won?",maxWidth:"340px"},e.createElement("div",{style:{textAlign:"center",marginBottom:18,color:"#fff",fontSize:"1.1em"}},"Please select the winner:"),e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:16,alignItems:"center"}},e.createElement("button",{style:{background:"#23232a",color:"#28a745",border:"2px solid #28a745",borderRadius:8,padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",minWidth:"160px"},onClick:()=>o(t)},t),e.createElement("button",{style:{background:"#23232a",color:"#e53e3e",border:"2px solid #e53e3e",borderRadius:8,padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",minWidth:"160px"},onClick:()=>o(n)},n)),e.createElement("button",{style:{marginTop:24,background:"#6c757d",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px",display:"block",marginLeft:"auto",marginRight:"auto"},onClick:r},"Cancel")):null}const SD=de;class pn{static async request(r,t={}){const n=`${SD}${r}`,o={headers:{"Content-Type":"application/json",Accept:"application/json",...t.headers},signal:AbortSignal.timeout(3e4),credentials:"include",mode:"cors",...t},i=3;let c;for(let u=1;u<=i;u++)try{console.log(`API Request (attempt ${u}): ${n}`);const m=await fetch(n,o);if(!m.ok)throw new Error(`API Error: ${m.status} - ${m.statusText}`);const g=await m.json();return console.log(`API Success: ${n}`),g}catch(m){if(c=m,console.warn(`API Request failed (attempt ${u}/${i}): ${n}`,m),m.message.includes("400")||m.message.includes("401")||m.message.includes("403")||m.message.includes("404"))break;if(u<i){const g=Math.min(1e3*Math.pow(2,u-1),5e3);await new Promise(f=>setTimeout(f,g))}}throw console.error(`API Request failed after ${i} attempts: ${n}`,c),c}static get(r){return this.request(r)}static post(r,t){return this.request(r,{method:"POST",body:JSON.stringify(t)})}static patch(r,t){return this.request(r,{method:"PATCH",body:JSON.stringify(t)})}static delete(r){return this.request(r,{method:"DELETE"})}static async testConnection(){try{const r=await this.get("/health");return console.log("Backend connection test successful:",r),!0}catch(r){return console.error("Backend connection test failed:",r),!1}}}const kr={async getPendingProposals(a,r){return pn.get(`/api/proposals/by-name?receiverName=${encodeURIComponent(a)}&division=${encodeURIComponent(r)}`)},async getSentProposals(a,r){return pn.get(`/api/proposals/by-sender?senderName=${encodeURIComponent(a)}&division=${encodeURIComponent(r)}`)},async updateProposalStatus(a,r,t){return pn.patch(`/api/proposals/${a}/status`,{status:r,note:t})},async createProposal(a){return pn.post("/api/proposals",a)},async counterProposal(a,r){return pn.patch(`/api/proposals/${a}/counter`,r)},async markCompleted(a,r,t,n){return pn.patch(`/api/matches/completed/${a}`,{winner:r,markedByName:t,markedByEmail:n})},async cancelProposal(a){return pn.post(`/api/proposals/${a}/cancel`)},async getAllProposals(a){const r=a?`?division=${encodeURIComponent(a)}`:"";return pn.get(`/api/proposals/debug-list${r}`)}};function CD(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-"),m=new Date(parseInt(i),parseInt(c)-1,parseInt(u)),g=String(m.getMonth()+1).padStart(2,"0"),f=String(m.getDate()).padStart(2,"0"),y=m.getFullYear();return`${g}-${f}-${y}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}function ND({open:a,onClose:r,match:t,onCompleted:n,userPin:o,onMatchUpdated:i,senderName:c,senderEmail:u}){const[m,g]=h.useState({x:0,y:0}),[f,y]=h.useState(!1),v=h.useRef({x:0,y:0}),S=J=>{y(!0),v.current={x:J.clientX-m.x,y:J.clientY-m.y},document.body.style.userSelect="none"},w=J=>{f&&g({x:J.clientX-v.current.x,y:J.clientY-v.current.y})},x=()=>{y(!1),document.body.style.userSelect=""};h.useEffect(()=>(f?(window.addEventListener("mousemove",w),window.addEventListener("mouseup",x)):(window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",x)),()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",x)}),[f]);const[k,E]=h.useState(!1),[I,M]=h.useState(!1),[N,_]=h.useState({player1:"",player2:""}),[P,B]=h.useState(t);h.useEffect(()=>{B(t)},[t]);const R=()=>{let J=t.player||t.senderName,Y=t.opponent||t.receiverName;_({player1:J,player2:Y}),M(!0)},W=async J=>{M(!1),E(!0);const Y=c&&c.trim()?c:P.player||P.senderName||"Unknown",D=u&&u.trim()?u:P.senderEmail||"unknown@example.com";console.log("Marking winner with:",{winner:J,markedByName:Y,markedByEmail:D});try{const A=await kr.markCompleted(P._id,J,Y,D);A&&A.proposal?(B(A.proposal),i&&i(A.proposal)):(B({...P,winner:J}),i&&i({...P,winner:J})),n&&n(P._id)}catch{alert("Failed to mark as completed.")}E(!1)};if(!a||!P)return null;let L=new Date,F="",j="";if(P.date&&P.time){const[J,Y,D]=P.date.split("-"),A=`${J}-${Y.padStart(2,"0")}-${D.padStart(2,"0")}`;let U=P.time.trim().toUpperCase(),[K,X]=U.split(" "),[O,Q]=K.split(":").map(Number);X==="PM"&&O<12&&(O+=12),X==="AM"&&O===12&&(O=0);const ne=O.toString().padStart(2,"0"),T=(Q||0).toString().padStart(2,"0"),re=`${ne}:${T}`;L=new Date(`${A}T${re}:00`),F=CD(P.date),j=L.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})}return e.createElement("div",{className:jt.modalOverlay,onClick:r},e.createElement("div",{className:jt.modalContentSnazzy,style:{transform:`translate(${m.x}px, ${m.y}px)`,cursor:f?"grabbing":"default"},onClick:J=>J.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Match Details",tabIndex:-1},e.createElement("button",{className:jt.modalCloseBtnSnazzy,onClick:r,"aria-label":"Close"},"×"),e.createElement("div",{className:jt.modalHeaderSnazzy,onMouseDown:S,style:{cursor:"grab",userSelect:"none"}},e.createElement("span",{className:jt.modalAccentBar}),e.createElement("h2",{className:jt.modalTitleSnazzy},"🎱 Match Details")),e.createElement("div",{className:jt.modalDetailsSnazzy},e.createElement("div",{className:jt.modalDetailRowSnazzy},e.createElement("span",{className:jt.modalDetailIcon},"🤝"),e.createElement("span",{className:jt.modalDetailLabelSnazzy},"Players:"),e.createElement("span",{className:jt.modalDetailValueSnazzy},e.createElement("span",{className:jt.modalOpponentName},P.player||P.senderName),e.createElement("span",{className:jt.modalVs},"vs"),e.createElement("span",{className:jt.modalOpponentName},P.opponent||P.receiverName))),e.createElement("div",{className:jt.modalDetailRowSnazzy},e.createElement("span",{className:jt.modalDetailIcon},"📅"),e.createElement("span",{className:jt.modalDetailLabelSnazzy},"Date:"),e.createElement("span",{className:jt.modalDetailValueSnazzy},F)),e.createElement("div",{className:jt.modalDetailRowSnazzy},e.createElement("span",{className:jt.modalDetailIcon},"⏰"),e.createElement("span",{className:jt.modalDetailLabelSnazzy},"Time:"),e.createElement("span",{className:jt.modalDetailValueSnazzy},j)),e.createElement("div",{className:jt.modalDetailRowSnazzy},e.createElement("span",{className:jt.modalDetailIcon},"��"),e.createElement("span",{className:jt.modalDetailLabelSnazzy},"Location:"),e.createElement("span",{className:jt.modalDetailValueSnazzy},P.location)),P.gameType&&e.createElement("div",{className:jt.modalDetailRowSnazzy},_D(P.gameType),e.createElement("span",{className:jt.modalDetailLabelSnazzy},"Game Type:"),e.createElement("span",{className:jt.modalDetailValueSnazzy},P.gameType)),P.raceLength&&e.createElement("div",{className:jt.modalDetailRowSnazzy},e.createElement("span",{className:jt.modalDetailIcon},"🏁"),e.createElement("span",{className:jt.modalDetailLabelSnazzy},"Race to:"),e.createElement("span",{className:jt.modalDetailValueSnazzy},P.raceLength)),P.winner&&e.createElement("div",{style:{color:"#ffd700",fontWeight:700,marginTop:6,fontSize:"1em"}},"🏆 Winner: ",P.winner,Kl.getCurrentAdmin()&&P.winnerChangedByName&&e.createElement("span",{style:{color:"#aaa",fontWeight:400,fontSize:"0.95em",marginLeft:8}},"(marked by ",P.winnerChangedByName,P.winnerChangedAt?` on ${new Date(P.winnerChangedAt).toLocaleString()}`:"",")"))),!P.completed&&e.createElement(e.Fragment,null,e.createElement("button",{className:jt.modalActionBtn,onClick:R,disabled:k,style:{marginTop:16,minWidth:180},type:"button"},k?"Marking...":"Mark as Completed"),e.createElement(py,{open:I,onClose:()=>M(!1),player1:N.player1,player2:N.player2,onSelect:W}))))}function _D(a){if(!a)return e.createElement("span",{className:jt.modalDetailIcon},"🎯");const r=a.trim().toLowerCase();return r==="8 ball"||r==="8-ball"||r==="8ball"?e.createElement("img",{src:Ad,alt:"8 Ball",className:jt.gameTypeIcon}):r==="9 ball"||r==="9-ball"||r==="9ball"?e.createElement("img",{src:VE,alt:"9 Ball",className:jt.gameTypeIcon}):r==="10 ball"||r==="10-ball"||r==="10ball"?e.createElement("img",{src:QE,alt:"10 Ball",className:jt.gameTypeIcon}):r==="mixed"||r==="mixed games"?e.createElement(e.Fragment,null,e.createElement("img",{src:Ad,alt:"8 Ball",className:jt.gameTypeIcon}),e.createElement("img",{src:VE,alt:"9 Ball",className:jt.gameTypeIcon}),e.createElement("img",{src:QE,alt:"10 Ball",className:jt.gameTypeIcon})):e.createElement("span",{className:jt.modalDetailIcon},"🎯")}const kD="_proposalList_1gl2k_39",ID="_proposalCardButton_1gl2k_169",MD="_proposalCardLabel_1gl2k_211",AD="_proposalCardMessage_1gl2k_223",DD="_modalContent_1gl2k_277",RD="_confirmDialogBox_1gl2k_345",$n={proposalList:kD,proposalCardButton:ID,proposalCardLabel:MD,proposalCardMessage:AD,modalContent:DD,confirmDialogBox:RD};function JE(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-"),m=new Date(parseInt(i),parseInt(c)-1,parseInt(u)),g=String(m.getMonth()+1).padStart(2,"0"),f=String(m.getDate()).padStart(2,"0"),y=m.getFullYear();return`${g}-${f}-${y}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}function TD(a){if(!a)return"N/A";if(a.includes(":")&&a.length===5){const[r,t]=a.split(":"),n=parseInt(r),o=n>=12?"PM":"AM";return`${n===0?12:n>12?n-12:n}:${t} ${o}`}return a}function XE({proposals:a,onSelect:r,onClose:t,type:n="received",isAdmin:o=!1,senderEmail:i,senderName:c,onProposalUpdated:u}){console.log("Proposals:",a);const[m,g]=h.useState(null),[f,y]=h.useState(!1),[v,S]=h.useState(""),[w,x]=h.useState(a),[k,E]=h.useState("all"),I=a.filter(D=>D.isCounter),M=a.filter(D=>!D.isCounter),N=k==="counter"?I:M,[_,P]=h.useState(!1),[B,R]=h.useState(null),[W,L]=h.useState({player1:"",player2:""}),[F,j]=h.useState(!1),J=async D=>{y(!0),S("");try{await kr.cancelProposal(D),x(A=>A.filter(U=>U._id!==D)),g(null)}catch{S("Failed to cancel proposal. Please try again.")}finally{y(!1)}},Y=n==="completed"?w:a;return e.createElement(Bt,{open:!0,onClose:t,title:n==="completed"?"Completed Matches":n==="sent"?"Matches You Proposed":"Pending Match Proposals",maxWidth:"600px"},e.createElement("div",{className:$n.modalContent,style:{position:"relative",maxHeight:"none",overflowY:"visible"}},n!=="completed"&&e.createElement("div",{style:{display:"flex",gap:8,marginBottom:16}},e.createElement("button",{onClick:()=>E("all"),style:{background:k==="all"?"#e53e3e":"#333",color:"#fff",border:"none",borderRadius:"6px",padding:"0.5rem 1.2rem",fontWeight:"bold",cursor:"pointer",boxShadow:k==="all"?"0 2px 8px #e53e3e44":"none",position:"relative"}},"All Proposals (",M.length,")",M.length>0&&e.createElement("span",{style:{background:"#fff",color:"#e53e3e",borderRadius:"50%",padding:"2px 8px",fontSize:"0.85em",fontWeight:"bold",marginLeft:8,position:"absolute",top:"-8px",right:"-12px",minWidth:24,textAlign:"center",boxShadow:"0 1px 4px #0002"}},M.length)),e.createElement("button",{onClick:()=>E("counter"),style:{background:k==="counter"?"#ff9800":"#333",color:"#fff",border:"none",borderRadius:"6px",padding:"0.5rem 1.2rem",fontWeight:"bold",cursor:"pointer",boxShadow:k==="counter"?"0 2px 8px #ff980044":"none",position:"relative"}},"Counter Proposals (",I.length,")",I.length>0&&e.createElement("span",{style:{background:"#fff",color:"#ff9800",borderRadius:"50%",padding:"2px 8px",fontSize:"0.85em",fontWeight:"bold",marginLeft:8,position:"absolute",top:"-8px",right:"-12px",minWidth:24,textAlign:"center",boxShadow:"0 1px 4px #0002"}},I.length))),e.createElement("ul",{className:$n.proposalList,style:{listStyle:"none",padding:0,margin:0}},n==="completed"?Y.map(D=>e.createElement("li",{key:D._id,style:{position:"relative",marginBottom:12}},e.createElement("div",{className:$n.proposalCardButton,style:{cursor:"default",background:"#23232a",color:"#28a745",border:"2px solid #28a745",borderRadius:8,padding:"1rem",fontWeight:600}},e.createElement("div",null,e.createElement("span",{className:$n.proposalCardLabel},"Opponent:")," ",D.opponent||D.receiverName||D.senderName),e.createElement("div",null,e.createElement("span",{className:$n.proposalCardLabel},"Date:")," ",JE(D.date),"  ",e.createElement("span",{className:$n.proposalCardLabel},"Time:")," ",D.time),e.createElement("div",null,e.createElement("span",{className:$n.proposalCardLabel},"Location:")," ",D.location),e.createElement("div",null,e.createElement("span",{className:$n.proposalCardLabel},"Game Type:")," ",D.gameType),D.winner&&e.createElement("div",{style:{color:"#ffd700",fontWeight:700,marginTop:6,fontSize:"1em"}},"🏆 Winner: ",D.winner,o&&D.winnerChangedByName&&e.createElement("span",{style:{color:"#aaa",fontWeight:400,fontSize:"0.95em",marginLeft:8}},"(marked by ",D.winnerChangedByName,D.winnerChangedAt?` on ${new Date(D.winnerChangedAt).toLocaleString()}`:"",")")),o&&e.createElement("button",{style:{marginTop:10,background:"#444",color:"#fff",border:"1px solid #ffd700",borderRadius:6,padding:"4px 12px",fontWeight:600,cursor:"pointer",fontSize:"0.95em",display:"inline-block"},disabled:F,onClick:()=>{const A=D.player||D.senderName,U=D.opponent||D.receiverName;R(D),L({player1:A,player2:U}),P(!0)},type:"button"},F?"Saving...":D.winner?"Edit Winner":"Set Winner")))):N.map(D=>e.createElement("li",{key:D._id,style:{position:"relative"}},e.createElement("button",{onClick:()=>r(D),className:$n.proposalCardButton},e.createElement("div",null,e.createElement("span",{className:$n.proposalCardLabel},n==="sent"?"To:":"From:"),n==="sent"?D.receiverName:D.senderName,D.isCounter&&e.createElement("span",{style:{background:"#ff9800",color:"#fff",borderRadius:"6px",padding:"2px 8px",fontSize:"0.85em",marginLeft:"8px",fontWeight:"bold",display:"inline-block"}},"Counter Proposal")),e.createElement("div",null,e.createElement("span",{className:$n.proposalCardLabel},"Date:")," ",JE(D.date),"  ",e.createElement("span",{className:$n.proposalCardLabel},"Time:")," ",TD(D.time)),e.createElement("div",null,e.createElement("span",{className:$n.proposalCardLabel},"Location:")," ",D.location),e.createElement("div",{className:$n.proposalCardMessage},D.message),e.createElement("div",null,e.createElement("span",{className:$n.proposalCardLabel},"Status:"),e.createElement("span",{style:{color:D.status==="pending"?"#d32f2f":D.status==="countered"?"#fbc02d":"#388e3c"}},D.status))),n==="sent"&&D.status==="pending"&&e.createElement("button",{className:$n.cancelProposalBtn,style:{position:"absolute",top:10,right:10},onClick:A=>{A.stopPropagation(),g(D._id)},disabled:f},"Cancel")))),N.length===0&&e.createElement("div",{style:{color:"#ffecb3",textAlign:"center",marginTop:16}},"Nothing to see here."),m&&e.createElement("div",{className:$n.confirmDialogBox,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1001,background:"#222",color:"#fff",borderRadius:"10px",padding:"2rem 2.5rem",boxShadow:"0 4px 32px #000a",maxWidth:"90vw",minWidth:"260px",textAlign:"center",border:"2px solid #e53e3e"}},e.createElement("p",null,"Are you sure you want to cancel this proposal?"),e.createElement("button",{onClick:()=>J(m),disabled:f,style:{marginRight:12}},f?"Cancelling...":"Yes, Cancel"),e.createElement("button",{onClick:()=>g(null),disabled:f},"No, Go Back"),v&&e.createElement("div",{style:{color:"red",marginTop:8}},v))),e.createElement(py,{open:_,onClose:()=>P(!1),player1:W.player1,player2:W.player2,onSelect:async D=>{if(B){j(!0);try{const A=await kr.markCompleted(B._id,D,c,i),U=A&&A.proposal?A.proposal:{...B,winner:D,winnerChangedByName:c,winnerChangedByEmail:i,winnerChangedAt:new Date().toISOString()};x(K=>K.map(X=>X._id===B._id?U:X)),u&&u(U),P(!1)}catch{alert("Failed to update winner.")}j(!1)}}}))}function PD(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-"),m=new Date(parseInt(i),parseInt(c)-1,parseInt(u)),g=String(m.getMonth()+1).padStart(2,"0"),f=String(m.getDate()).padStart(2,"0"),y=m.getFullYear();return`${g}-${f}-${y}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}function LD({proposal:a,phase:r,userNote:t,setUserNote:n,onConfirm:o,onClose:i,onCounterPropose:c,showNote:u=!0,confirmLabel:m="✅ Confirm Match",currentUserName:g,currentUserEmail:f}){if(!a)return null;const{senderName:y,receiverName:v,senderEmail:S,receiverEmail:w,day:x,date:k,time:E,location:I,gameType:M,raceLength:N,message:_,proposalNote:P}=a,B=f&&S&&f.toLowerCase()===S.toLowerCase()||g&&y&&g.toLowerCase()===y.toLowerCase();return e.createElement("div",{className:Ha.confirmMatchCard},e.createElement("h1",{className:Ha.confirmMatchTitle},e.createElement("span",{className:Ha.redTitle},"🎱 Confirm Match")),e.createElement("div",{className:Ha.confirmMatchDetails},e.createElement("div",{className:Ha.detailRow},e.createElement("strong",{className:Ha.redTitle},"You:")," ",v||a.to||"N/A"),e.createElement("div",{className:Ha.detailRow},e.createElement("strong",{className:Ha.redTitle},"Opponent:")," ",y||a.from||"N/A"),x&&e.createElement("div",{className:Ha.detailRow},e.createElement("strong",{className:Ha.redTitle},"Day:")," ",x),e.createElement("div",{className:Ha.detailRow},e.createElement("strong",{className:Ha.redTitle},"Date:")," ",PD(k)),e.createElement("div",{className:Ha.detailRow},e.createElement("strong",{className:Ha.redTitle},"Time:")," ",E||"N/A"),e.createElement("div",{className:Ha.detailRow},e.createElement("strong",{className:Ha.redTitle},"Location:")," ",I||"N/A"),M&&e.createElement("div",{className:Ha.detailRow},e.createElement(Hp,{gameType:M,size:16}),e.createElement("strong",{className:Ha.redTitle},"Game Type:")," ",M),N&&e.createElement("div",{className:Ha.detailRow},e.createElement("strong",{className:Ha.redTitle},"Race to:")," ",N),e.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:12,marginTop:18,justifyContent:"center",paddingBottom:8,width:"100%",boxSizing:"border-box"}},B?e.createElement(e.Fragment,null,e.createElement("span",{style:{color:"#888",fontWeight:500,fontSize:"1.1em"}},"You proposed this match. You can edit or message, but only your opponent can confirm/counter/cancel."),e.createElement("button",{className:Ha.confirmBtn,style:{background:"#aaa",minWidth:120,marginLeft:16},onClick:i},"OK")):e.createElement(e.Fragment,null,e.createElement("button",{className:Ha.confirmBtn,style:{minWidth:120},onClick:o},m),c&&e.createElement("button",{className:Ha.confirmBtn,style:{background:"#fff",color:"#d32f2f",border:"1.5px solid #d32f2f",minWidth:120},onClick:c,type:"button"},"Counter-Propose"),e.createElement("button",{className:Ha.confirmBtn,style:{background:"#aaa",minWidth:120},onClick:i},"Close")))))}function p0(a){const r={Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat",Sunday:"Sun"},t={Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]};return a&&a.split(/\r?\n/).forEach(n=>{const o=n.match(/Day:\s*(\w+),\s*Available From:\s*([\w:]+),\s*Available Until:\s*([\w: ]+)/i);if(o){const[i,c,u,m]=o,g=r[c];g&&t[g].push(`${u} - ${m}`)}}),t}function C5({open:a,onClose:r,opponents:t,onOpponentClick:n,phase:o,selectedCalendarDate:i,smartMatchMode:c=!1,allPlayers:u=[]}){if(!a)return null;const m=i?t.filter(g=>{if(!g.player||!g.player.availability)return!1;const y=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][i.getDay()],v=g.player.availability;return v[y]&&v[y].length>0}):t;return e.createElement(Bt,{open:a,onClose:r,title:c?`🧠 Smart Match - Select Opponent${i?` (${i.toLocaleDateString()})`:""}`:`🎱 Select Opponent - ${o==="scheduled"||o==="offseason"?"Phase 1":"Phase 2"}${i?` (${i.toLocaleDateString()})`:""}`,maxWidth:"500px"},e.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},m.length===0?e.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},i?`No opponents available for ${i.toLocaleDateString()} (${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][i.getDay()]}).`:"No opponents available for scheduling at this time."):e.createElement("div",{style:{display:"grid",gap:"8px"}},m.map((g,f)=>e.createElement("button",{key:g.player&&g.player.email||`${g.opponentName}-${f}`||`opponent-${f}`,onClick:()=>n(g.player&&g.player.name?g.player.name:g.opponentName),style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:y=>{y.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",y.target.style.transform="translateY(-2px)",y.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:y=>{y.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",y.target.style.transform="translateY(0)",y.target.style.boxShadow="none"}},g.player&&g.player.name?g.player.name:g.opponentName)))))}function ef({player:a,onClose:r,senderEmail:t,onProposeMatch:n,selectedDivision:o,phase:i}){if(!a)return null;const[c,u]=h.useState(!1),[m,g]=h.useState(10);return h.useEffect(()=>{let f;return c&&(g(10),f=setInterval(()=>{g(y=>y<=1?(clearInterval(f),u(!1),10):y-1)},1e3)),()=>clearInterval(f)},[c]),e.createElement(Bt,{open:!0,onClose:r,title:`👤 ${a.name||`${a.firstName} ${a.lastName}`}`,maxWidth:"600px"},e.createElement("div",{style:{textAlign:"left"}},e.createElement("div",{style:{fontSize:"0.9rem",color:"#888",marginBottom:"1.5rem",textAlign:"center"}},i==="scheduled"?"Phase 1 (Scheduled)":i==="challenge"?"Phase 2 (Challenge)":i),e.createElement("div",{style:{marginBottom:"1.5rem"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"0.5rem",fontSize:"1.1rem",textAlign:"center"}},"Preferred Locations:"),e.createElement("div",{style:{color:"#fff",textAlign:"center",maxWidth:"100%",overflow:"hidden"}},a.locations?(()=>{const f=a.locations.split(/\r?\n/).filter(Boolean);return e.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"8px",padding:"8px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",maxWidth:"100%"}},f.map((y,v)=>e.createElement("span",{key:y+v,style:{background:"rgba(229, 62, 62, 0.2)",color:"#fff",padding:"4px 8px",borderRadius:"12px",fontSize:"0.85rem",border:"1px solid rgba(229, 62, 62, 0.3)",whiteSpace:"nowrap",maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block"},title:y},"📍 ",y)))})():"No locations specified")),e.createElement("div",{style:{marginBottom:"1.5rem"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"0.5rem",fontSize:"1.1rem",textAlign:"center"}},"Availability:"),e.createElement("div",{style:{color:"#fff",fontSize:"0.9rem",marginBottom:"1rem",textAlign:"center",fontStyle:"italic"}},"Pick a timeblock within a day to schedule a match with this opponent."),e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"8px"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"}},["Mon","Tue","Wed"].map(f=>e.createElement("div",{key:f,style:{textAlign:"center"}},e.createElement("div",{style:{color:"#e53e3e",fontWeight:"bold",marginBottom:"0.5rem",fontSize:"0.9rem"}},f),!a.availability||!a.availability[f]||a.availability[f].length===0?e.createElement("div",{style:{color:"#666",fontSize:"0.8rem",padding:"0.5rem",background:"#222",borderRadius:"4px"}},"—"):(a.availability[f]||[]).map((y,v)=>e.createElement("div",{key:v,onClick:()=>{n&&n(f,y,i,o)},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"1px solid #e53e3e",borderRadius:"6px",padding:"0.5rem",fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"0.5rem"},onMouseEnter:S=>{S.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",S.target.style.transform="translateY(-1px)",S.target.style.boxShadow="0 2px 8px rgba(229, 62, 62, 0.3)"},onMouseLeave:S=>{S.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",S.target.style.transform="translateY(0)",S.target.style.boxShadow="none"},tabIndex:0,role:"button","aria-label":`Propose match on ${f} at ${y}`,onKeyPress:S=>{(S.key==="Enter"||S.key===" ")&&n&&n(f,y,i,o)}},y))))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"}},["Thu","Fri","Sat"].map(f=>e.createElement("div",{key:f,style:{textAlign:"center"}},e.createElement("div",{style:{color:"#e53e3e",fontWeight:"bold",marginBottom:"0.5rem",fontSize:"0.9rem"}},f),!a.availability||!a.availability[f]||a.availability[f].length===0?e.createElement("div",{style:{color:"#666",fontSize:"0.8rem",padding:"0.5rem",background:"#222",borderRadius:"4px"}},"—"):(a.availability[f]||[]).map((y,v)=>e.createElement("div",{key:v,onClick:()=>{n&&n(f,y,i,o)},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"1px solid #e53e3e",borderRadius:"6px",padding:"0.5rem",fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"0.5rem"},onMouseEnter:S=>{S.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",S.target.style.transform="translateY(-1px)",S.target.style.boxShadow="0 2px 8px rgba(229, 62, 62, 0.3)"},onMouseLeave:S=>{S.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",S.target.style.transform="translateY(0)",S.target.style.boxShadow="none"},tabIndex:0,role:"button","aria-label":`Propose match on ${f} at ${y}`,onKeyPress:S=>{(S.key==="Enter"||S.key===" ")&&n&&n(f,y,i,o)}},y))))))),e.createElement("div",{style:{marginBottom:"1.5rem",textAlign:"center"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"0.5rem",fontSize:"1.1rem",textAlign:"center"}},"Contact Information:"),e.createElement("div",{style:{color:"#fff",textAlign:"center"}},c?e.createElement("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid #e53e3e",borderRadius:"6px",padding:"1rem"}},e.createElement("div",{style:{marginBottom:"0.5rem"}},e.createElement("strong",null,"Email:")," ",a.email||"Not provided"),a.phone&&e.createElement("div",{style:{marginBottom:"0.5rem"}},e.createElement("strong",null,"Phone:")," ",a.phone),a.text&&e.createElement("div",{style:{marginBottom:"0.5rem"}},e.createElement("strong",null,"Text:")," ",a.text),a.preferredContacts&&a.preferredContacts.length>0&&e.createElement("div",null,e.createElement("strong",null,"Preferred Contact:")," ",a.preferredContacts.join(", ")),e.createElement("div",{style:{color:"#ffc107",fontSize:"0.9rem",marginTop:"0.5rem"}},"Auto-hiding in ",m," seconds...")):e.createElement("button",{onClick:()=>u(!0),style:{background:"#e53e3e",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer"}},"Show Contact Info")))))}const BD="_opponentName_1wgqu_479",Ya={"match-proposal-content":"_match-proposal-content_1wgqu_49","match-proposal-title":"_match-proposal-title_1wgqu_135","match-proposal-row":"_match-proposal-row_1wgqu_155","match-proposal-select":"_match-proposal-select_1wgqu_177","match-proposal-location-select":"_match-proposal-location-select_1wgqu_179","match-proposal-textarea":"_match-proposal-textarea_1wgqu_225","match-proposal-date-input":"_match-proposal-date-input_1wgqu_339","match-proposal-send-btn":"_match-proposal-send-btn_1wgqu_365","match-proposal-day-value":"_match-proposal-day-value_1wgqu_449",opponentName:BD,"match-proposal-division":"_match-proposal-division_1wgqu_493","match-proposal-phase":"_match-proposal-phase_1wgqu_493","match-proposal-label-red":"_match-proposal-label-red_1wgqu_501"};var Nh={},zD=Object.create,N5=Object.defineProperty,OD=Object.getOwnPropertyDescriptor,_5=Object.getOwnPropertyNames,FD=Object.getPrototypeOf,WD=Object.prototype.hasOwnProperty,qd=(a,r)=>function(){return r||(0,a[_5(a)[0]])((r={exports:{}}).exports,r),r.exports},UD=(a,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of _5(r))!WD.call(a,o)&&o!==t&&N5(a,o,{get:()=>r[o],enumerable:!(n=OD(r,o))||n.enumerable});return a},Gd=(a,r,t)=>(t=a!=null?zD(FD(a)):{},UD(!a||!a.__esModule?N5(t,"default",{value:a,enumerable:!0}):t,a)),$D=qd({"node_modules/base64-js/index.js"(a){a.byteLength=m,a.toByteArray=f,a.fromByteArray=S;var r=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0,c=o.length;i<c;++i)r[i]=o[i],t[o.charCodeAt(i)]=i;var i,c;t[45]=62,t[95]=63;function u(w){var x=w.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=w.indexOf("=");k===-1&&(k=x);var E=k===x?0:4-k%4;return[k,E]}function m(w){var x=u(w),k=x[0],E=x[1];return(k+E)*3/4-E}function g(w,x,k){return(x+k)*3/4-k}function f(w){var x,k=u(w),E=k[0],I=k[1],M=new n(g(w,E,I)),N=0,_=I>0?E-4:E,P;for(P=0;P<_;P+=4)x=t[w.charCodeAt(P)]<<18|t[w.charCodeAt(P+1)]<<12|t[w.charCodeAt(P+2)]<<6|t[w.charCodeAt(P+3)],M[N++]=x>>16&255,M[N++]=x>>8&255,M[N++]=x&255;return I===2&&(x=t[w.charCodeAt(P)]<<2|t[w.charCodeAt(P+1)]>>4,M[N++]=x&255),I===1&&(x=t[w.charCodeAt(P)]<<10|t[w.charCodeAt(P+1)]<<4|t[w.charCodeAt(P+2)]>>2,M[N++]=x>>8&255,M[N++]=x&255),M}function y(w){return r[w>>18&63]+r[w>>12&63]+r[w>>6&63]+r[w&63]}function v(w,x,k){for(var E,I=[],M=x;M<k;M+=3)E=(w[M]<<16&16711680)+(w[M+1]<<8&65280)+(w[M+2]&255),I.push(y(E));return I.join("")}function S(w){for(var x,k=w.length,E=k%3,I=[],M=16383,N=0,_=k-E;N<_;N+=M)I.push(v(w,N,N+M>_?_:N+M));return E===1?(x=w[k-1],I.push(r[x>>2]+r[x<<4&63]+"==")):E===2&&(x=(w[k-2]<<8)+w[k-1],I.push(r[x>>10]+r[x>>4&63]+r[x<<2&63]+"=")),I.join("")}}}),jD=qd({"(disabled):https"(){}}),HD=qd({"node_modules/form-data/lib/browser.js"(a,r){r.exports=typeof self=="object"?self.FormData:window.FormData}}),YD=qd({"(disabled):node_modules/jsonwebtoken/index.js"(){}}),qD=qd({"(disabled):crypto"(){}}),GD=Gd($D());function f0(a){return typeof a=="string"}function KE(a,r){return!!r&&f0(a)}function ZD(a,r){const t=[];if(f0(a)&&KE(a,r)){for(let n=0,o=a.length;n<o;n++)if(a.charAt(n)){const i=a.charAt(n),c=r(i,n,a);t[n]=c}}else if(!f0(a)&&!KE(a,r)){for(let n=0,o=a.length;n<o;n++)if(n in a){const i=a[n],c=r(i,n,a);t[n]=c}}return t}var VD=a=>(0,GD.fromByteArray)(new Uint8Array(ZD(a,r=>r.charCodeAt(0)))),QD=a=>{const r={},t=String.fromCharCode,n=a.length;let o,i=0,c,u,m=0,g,f="";const y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(o=0;o<64;o++)r[y.charAt(o)]=o;for(u=0;u<n;u++)for(c=r[a.charAt(u)],i=(i<<6)+c,m+=6;m>=8;)((g=i>>>(m-=8)&255)||u<n-2)&&(f+=t(g));return f},e2=class{constructor(a,r,t){this.client=a,this.id=r,this.data=t}async create(){var t,n,o,i,c,u,m,g,f,y,v,S;const a={id:this.id,message_template:(t=this.data)==null?void 0:t.message_template,segment_ids:(n=this.data)==null?void 0:n.segment_ids,sender_id:(o=this.data)==null?void 0:o.sender_id,sender_mode:(i=this.data)==null?void 0:i.sender_mode,channel_template:(c=this.data)==null?void 0:c.channel_template,create_channels:(u=this.data)==null?void 0:u.create_channels,show_channels:(m=this.data)==null?void 0:m.show_channels,description:(g=this.data)==null?void 0:g.description,name:(f=this.data)==null?void 0:f.name,skip_push:(y=this.data)==null?void 0:y.skip_push,skip_webhook:(v=this.data)==null?void 0:v.skip_webhook,user_ids:(S=this.data)==null?void 0:S.user_ids},r=await this.client.createCampaign(a);return this.id=r.campaign.id,this.data=r.campaign,r}verifyCampaignId(){if(!this.id)throw new Error("Campaign id is missing. Either create the campaign using campaign.create() or set the id during instantiation - const campaign = client.campaign(id)")}async start(a){return this.verifyCampaignId(),await this.client.startCampaign(this.id,a)}update(a){return this.verifyCampaignId(),this.client.updateCampaign(this.id,a)}async delete(){return this.verifyCampaignId(),await this.client.deleteCampaign(this.id)}stop(){return this.verifyCampaignId(),this.client.stopCampaign(this.id)}get(a){return this.verifyCampaignId(),this.client.getCampaign(this.id,a)}};function k5(a,r){return function(){return a.apply(r,arguments)}}var{toString:JD}=Object.prototype,{getPrototypeOf:fy}=Object,tf=(a=>r=>{const t=JD.call(r);return a[t]||(a[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),To=a=>(a=a.toLowerCase(),r=>tf(r)===a),af=a=>r=>typeof r===a,{isArray:Ki}=Array,Rd=af("undefined");function XD(a){return a!==null&&!Rd(a)&&a.constructor!==null&&!Rd(a.constructor)&&Xr(a.constructor.isBuffer)&&a.constructor.isBuffer(a)}var I5=To("ArrayBuffer");function KD(a){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(a):r=a&&a.buffer&&I5(a.buffer),r}var eR=af("string"),Xr=af("function"),M5=af("number"),nf=a=>a!==null&&typeof a=="object",tR=a=>a===!0||a===!1,zm=a=>{if(tf(a)!=="object")return!1;const r=fy(a);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},aR=To("Date"),nR=To("File"),rR=To("Blob"),oR=To("FileList"),lR=a=>nf(a)&&Xr(a.pipe),sR=a=>{let r;return a&&(typeof FormData=="function"&&a instanceof FormData||Xr(a.append)&&((r=tf(a))==="formdata"||r==="object"&&Xr(a.toString)&&a.toString()==="[object FormData]"))},iR=To("URLSearchParams"),cR=a=>a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Zd(a,r,{allOwnKeys:t=!1}={}){if(a===null||typeof a>"u")return;let n,o;if(typeof a!="object"&&(a=[a]),Ki(a))for(n=0,o=a.length;n<o;n++)r.call(null,a[n],n,a);else{const i=t?Object.getOwnPropertyNames(a):Object.keys(a),c=i.length;let u;for(n=0;n<c;n++)u=i[n],r.call(null,a[u],u,a)}}function A5(a,r){r=r.toLowerCase();const t=Object.keys(a);let n=t.length,o;for(;n-- >0;)if(o=t[n],r===o.toLowerCase())return o;return null}var D5=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,R5=a=>!Rd(a)&&a!==D5;function g0(){const{caseless:a}=R5(this)&&this||{},r={},t=(n,o)=>{const i=a&&A5(r,o)||o;zm(r[i])&&zm(n)?r[i]=g0(r[i],n):zm(n)?r[i]=g0({},n):Ki(n)?r[i]=n.slice():r[i]=n};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&Zd(arguments[n],t);return r}var dR=(a,r,t,{allOwnKeys:n}={})=>(Zd(r,(o,i)=>{t&&Xr(o)?a[i]=k5(o,t):a[i]=o},{allOwnKeys:n}),a),uR=a=>(a.charCodeAt(0)===65279&&(a=a.slice(1)),a),mR=(a,r,t,n)=>{a.prototype=Object.create(r.prototype,n),a.prototype.constructor=a,Object.defineProperty(a,"super",{value:r.prototype}),t&&Object.assign(a.prototype,t)},pR=(a,r,t,n)=>{let o,i,c;const u={};if(r=r||{},a==null)return r;do{for(o=Object.getOwnPropertyNames(a),i=o.length;i-- >0;)c=o[i],(!n||n(c,a,r))&&!u[c]&&(r[c]=a[c],u[c]=!0);a=t!==!1&&fy(a)}while(a&&(!t||t(a,r))&&a!==Object.prototype);return r},fR=(a,r,t)=>{a=String(a),(t===void 0||t>a.length)&&(t=a.length),t-=r.length;const n=a.indexOf(r,t);return n!==-1&&n===t},gR=a=>{if(!a)return null;if(Ki(a))return a;let r=a.length;if(!M5(r))return null;const t=new Array(r);for(;r-- >0;)t[r]=a[r];return t},hR=(a=>r=>a&&r instanceof a)(typeof Uint8Array<"u"&&fy(Uint8Array)),yR=(a,r)=>{const n=(a&&a[Symbol.iterator]).call(a);let o;for(;(o=n.next())&&!o.done;){const i=o.value;r.call(a,i[0],i[1])}},bR=(a,r)=>{let t;const n=[];for(;(t=a.exec(r))!==null;)n.push(t);return n},vR=To("HTMLFormElement"),ER=a=>a.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,o){return n.toUpperCase()+o}),t2=(({hasOwnProperty:a})=>(r,t)=>a.call(r,t))(Object.prototype),xR=To("RegExp"),T5=(a,r)=>{const t=Object.getOwnPropertyDescriptors(a),n={};Zd(t,(o,i)=>{let c;(c=r(o,i,a))!==!1&&(n[i]=c||o)}),Object.defineProperties(a,n)},wR=a=>{T5(a,(r,t)=>{if(Xr(a)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=a[t];if(Xr(n)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},SR=(a,r)=>{const t={},n=o=>{o.forEach(i=>{t[i]=!0})};return Ki(a)?n(a):n(String(a).split(r)),t},CR=()=>{},NR=(a,r)=>(a=+a,Number.isFinite(a)?a:r),_h="abcdefghijklmnopqrstuvwxyz",a2="0123456789",P5={DIGIT:a2,ALPHA:_h,ALPHA_DIGIT:_h+_h.toUpperCase()+a2},_R=(a=16,r=P5.ALPHA_DIGIT)=>{let t="";const{length:n}=r;for(;a--;)t+=r[Math.random()*n|0];return t};function kR(a){return!!(a&&Xr(a.append)&&a[Symbol.toStringTag]==="FormData"&&a[Symbol.iterator])}var IR=a=>{const r=new Array(10),t=(n,o)=>{if(nf(n)){if(r.indexOf(n)>=0)return;if(!("toJSON"in n)){r[o]=n;const i=Ki(n)?[]:{};return Zd(n,(c,u)=>{const m=t(c,o+1);!Rd(m)&&(i[u]=m)}),r[o]=void 0,i}}return n};return t(a,0)},MR=To("AsyncFunction"),AR=a=>a&&(nf(a)||Xr(a))&&Xr(a.then)&&Xr(a.catch),Be={isArray:Ki,isArrayBuffer:I5,isBuffer:XD,isFormData:sR,isArrayBufferView:KD,isString:eR,isNumber:M5,isBoolean:tR,isObject:nf,isPlainObject:zm,isUndefined:Rd,isDate:aR,isFile:nR,isBlob:rR,isRegExp:xR,isFunction:Xr,isStream:lR,isURLSearchParams:iR,isTypedArray:hR,isFileList:oR,forEach:Zd,merge:g0,extend:dR,trim:cR,stripBOM:uR,inherits:mR,toFlatObject:pR,kindOf:tf,kindOfTest:To,endsWith:fR,toArray:gR,forEachEntry:yR,matchAll:bR,isHTMLForm:vR,hasOwnProperty:t2,hasOwnProp:t2,reduceDescriptors:T5,freezeMethods:wR,toObjectSet:SR,toCamelCase:ER,noop:CR,toFiniteNumber:NR,findKey:A5,global:D5,isContextDefined:R5,ALPHABET:P5,generateString:_R,isSpecCompliantForm:kR,toJSONObject:IR,isAsyncFn:MR,isThenable:AR};function Hi(a,r,t,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=a,this.name="AxiosError",r&&(this.code=r),t&&(this.config=t),n&&(this.request=n),o&&(this.response=o)}Be.inherits(Hi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Be.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var L5=Hi.prototype,B5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(a=>{B5[a]={value:a}});Object.defineProperties(Hi,B5);Object.defineProperty(L5,"isAxiosError",{value:!0});Hi.from=(a,r,t,n,o,i)=>{const c=Object.create(L5);return Be.toFlatObject(a,c,function(m){return m!==Error.prototype},u=>u!=="isAxiosError"),Hi.call(c,a.message,r,t,n,o),c.cause=a,c.name=a.name,i&&Object.assign(c,i),c};var Ca=Hi,DR=null;function h0(a){return Be.isPlainObject(a)||Be.isArray(a)}function z5(a){return Be.endsWith(a,"[]")?a.slice(0,-2):a}function n2(a,r,t){return a?a.concat(r).map(function(o,i){return o=z5(o),!t&&i?"["+o+"]":o}).join(t?".":""):r}function RR(a){return Be.isArray(a)&&!a.some(h0)}var TR=Be.toFlatObject(Be,{},null,function(r){return/^is[A-Z]/.test(r)});function PR(a,r,t){if(!Be.isObject(a))throw new TypeError("target must be an object");r=r||new FormData,t=Be.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,k){return!Be.isUndefined(k[x])});const n=t.metaTokens,o=t.visitor||f,i=t.dots,c=t.indexes,m=(t.Blob||typeof Blob<"u"&&Blob)&&Be.isSpecCompliantForm(r);if(!Be.isFunction(o))throw new TypeError("visitor must be a function");function g(w){if(w===null)return"";if(Be.isDate(w))return w.toISOString();if(!m&&Be.isBlob(w))throw new Ca("Blob is not supported. Use a Buffer instead.");return Be.isArrayBuffer(w)||Be.isTypedArray(w)?m&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function f(w,x,k){let E=w;if(w&&!k&&typeof w=="object"){if(Be.endsWith(x,"{}"))x=n?x:x.slice(0,-2),w=JSON.stringify(w);else if(Be.isArray(w)&&RR(w)||(Be.isFileList(w)||Be.endsWith(x,"[]"))&&(E=Be.toArray(w)))return x=z5(x),E.forEach(function(M,N){!(Be.isUndefined(M)||M===null)&&r.append(c===!0?n2([x],N,i):c===null?x:x+"[]",g(M))}),!1}return h0(w)?!0:(r.append(n2(k,x,i),g(w)),!1)}const y=[],v=Object.assign(TR,{defaultVisitor:f,convertValue:g,isVisitable:h0});function S(w,x){if(!Be.isUndefined(w)){if(y.indexOf(w)!==-1)throw Error("Circular reference detected in "+x.join("."));y.push(w),Be.forEach(w,function(E,I){(!(Be.isUndefined(E)||E===null)&&o.call(r,E,Be.isString(I)?I.trim():I,x,v))===!0&&S(E,x?x.concat(I):[I])}),y.pop()}}if(!Be.isObject(a))throw new TypeError("data must be an object");return S(a),r}var rf=PR;function r2(a){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(a).replace(/[!'()~]|%20|%00/g,function(n){return r[n]})}function O5(a,r){this._pairs=[],a&&rf(a,this,r)}var F5=O5.prototype;F5.append=function(r,t){this._pairs.push([r,t])};F5.toString=function(r){const t=r?function(n){return r.call(this,n,r2)}:r2;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};var W5=O5;function LR(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function U5(a,r,t){if(!r)return a;const n=t&&t.encode||LR,o=t&&t.serialize;let i;if(o?i=o(r,t):i=Be.isURLSearchParams(r)?r.toString():new W5(r,t).toString(n),i){const c=a.indexOf("#");c!==-1&&(a=a.slice(0,c)),a+=(a.indexOf("?")===-1?"?":"&")+i}return a}var BR=class{constructor(){this.handlers=[]}use(a,r,t){return this.handlers.push({fulfilled:a,rejected:r,synchronous:t?t.synchronous:!1,runWhen:t?t.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){Be.forEach(this.handlers,function(t){t!==null&&a(t)})}},o2=BR,$5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zR=typeof URLSearchParams<"u"?URLSearchParams:W5,OR=typeof FormData<"u"?FormData:null,FR=typeof Blob<"u"?Blob:null,WR=(()=>{let a;return typeof navigator<"u"&&((a=navigator.product)==="ReactNative"||a==="NativeScript"||a==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),UR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ko={classes:{URLSearchParams:zR,FormData:OR,Blob:FR},isStandardBrowserEnv:WR,isStandardBrowserWebWorkerEnv:UR,protocols:["http","https","file","blob","url","data"]};function $R(a,r){return rf(a,new ko.classes.URLSearchParams,Object.assign({visitor:function(t,n,o,i){return ko.isNode&&Be.isBuffer(t)?(this.append(n,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},r))}function jR(a){return Be.matchAll(/\w+|\[(\w*)]/g,a).map(r=>r[0]==="[]"?"":r[1]||r[0])}function HR(a){const r={},t=Object.keys(a);let n;const o=t.length;let i;for(n=0;n<o;n++)i=t[n],r[i]=a[i];return r}function YR(a){function r(t,n,o,i){let c=t[i++];const u=Number.isFinite(+c),m=i>=t.length;return c=!c&&Be.isArray(o)?o.length:c,m?(Be.hasOwnProp(o,c)?o[c]=[o[c],n]:o[c]=n,!u):((!o[c]||!Be.isObject(o[c]))&&(o[c]=[]),r(t,n,o[c],i)&&Be.isArray(o[c])&&(o[c]=HR(o[c])),!u)}if(Be.isFormData(a)&&Be.isFunction(a.entries)){const t={};return Be.forEachEntry(a,(n,o)=>{r(jR(n),o,t,0)}),t}return null}var j5=YR;function qR(a,r,t){if(Be.isString(a))try{return(r||JSON.parse)(a),Be.trim(a)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(a)}var gy={transitional:$5,adapter:["xhr","http"],transformRequest:[function(r,t){const n=t.getContentType()||"",o=n.indexOf("application/json")>-1,i=Be.isObject(r);if(i&&Be.isHTMLForm(r)&&(r=new FormData(r)),Be.isFormData(r))return o&&o?JSON.stringify(j5(r)):r;if(Be.isArrayBuffer(r)||Be.isBuffer(r)||Be.isStream(r)||Be.isFile(r)||Be.isBlob(r))return r;if(Be.isArrayBufferView(r))return r.buffer;if(Be.isURLSearchParams(r))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let u;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return $R(r,this.formSerializer).toString();if((u=Be.isFileList(r))||n.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return rf(u?{"files[]":r}:r,m&&new m,this.formSerializer)}}return i||o?(t.setContentType("application/json",!1),qR(r)):r}],transformResponse:[function(r){const t=this.transitional||gy.transitional,n=t&&t.forcedJSONParsing,o=this.responseType==="json";if(r&&Be.isString(r)&&(n&&!this.responseType||o)){const c=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(r)}catch(u){if(c)throw u.name==="SyntaxError"?Ca.from(u,Ca.ERR_BAD_RESPONSE,this,null,this.response):u}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ko.classes.FormData,Blob:ko.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Be.forEach(["delete","get","head","post","put","patch"],a=>{gy.headers[a]={}});var hy=gy,GR=Be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ZR=a=>{const r={};let t,n,o;return a&&a.split(`
`).forEach(function(c){o=c.indexOf(":"),t=c.substring(0,o).trim().toLowerCase(),n=c.substring(o+1).trim(),!(!t||r[t]&&GR[t])&&(t==="set-cookie"?r[t]?r[t].push(n):r[t]=[n]:r[t]=r[t]?r[t]+", "+n:n)}),r},l2=Symbol("internals");function ed(a){return a&&String(a).trim().toLowerCase()}function Om(a){return a===!1||a==null?a:Be.isArray(a)?a.map(Om):String(a)}function VR(a){const r=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(a);)r[n[1]]=n[2];return r}var QR=a=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(a.trim());function kh(a,r,t,n,o){if(Be.isFunction(n))return n.call(this,r,t);if(o&&(r=t),!!Be.isString(r)){if(Be.isString(n))return r.indexOf(n)!==-1;if(Be.isRegExp(n))return n.test(r)}}function JR(a){return a.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,t,n)=>t.toUpperCase()+n)}function XR(a,r){const t=Be.toCamelCase(" "+r);["get","set","has"].forEach(n=>{Object.defineProperty(a,n+t,{value:function(o,i,c){return this[n].call(this,r,o,i,c)},configurable:!0})})}var of=class{constructor(a){a&&this.set(a)}set(a,r,t){const n=this;function o(c,u,m){const g=ed(u);if(!g)throw new Error("header name must be a non-empty string");const f=Be.findKey(n,g);(!f||n[f]===void 0||m===!0||m===void 0&&n[f]!==!1)&&(n[f||u]=Om(c))}const i=(c,u)=>Be.forEach(c,(m,g)=>o(m,g,u));return Be.isPlainObject(a)||a instanceof this.constructor?i(a,r):Be.isString(a)&&(a=a.trim())&&!QR(a)?i(ZR(a),r):a!=null&&o(r,a,t),this}get(a,r){if(a=ed(a),a){const t=Be.findKey(this,a);if(t){const n=this[t];if(!r)return n;if(r===!0)return VR(n);if(Be.isFunction(r))return r.call(this,n,t);if(Be.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,r){if(a=ed(a),a){const t=Be.findKey(this,a);return!!(t&&this[t]!==void 0&&(!r||kh(this,this[t],t,r)))}return!1}delete(a,r){const t=this;let n=!1;function o(i){if(i=ed(i),i){const c=Be.findKey(t,i);c&&(!r||kh(t,t[c],c,r))&&(delete t[c],n=!0)}}return Be.isArray(a)?a.forEach(o):o(a),n}clear(a){const r=Object.keys(this);let t=r.length,n=!1;for(;t--;){const o=r[t];(!a||kh(this,this[o],o,a,!0))&&(delete this[o],n=!0)}return n}normalize(a){const r=this,t={};return Be.forEach(this,(n,o)=>{const i=Be.findKey(t,o);if(i){r[i]=Om(n),delete r[o];return}const c=a?JR(o):String(o).trim();c!==o&&delete r[o],r[c]=Om(n),t[c]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const r=Object.create(null);return Be.forEach(this,(t,n)=>{t!=null&&t!==!1&&(r[n]=a&&Be.isArray(t)?t.join(", "):t)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,r])=>a+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...r){const t=new this(a);return r.forEach(n=>t.set(n)),t}static accessor(a){const t=(this[l2]=this[l2]={accessors:{}}).accessors,n=this.prototype;function o(i){const c=ed(i);t[c]||(XR(n,i),t[c]=!0)}return Be.isArray(a)?a.forEach(o):o(a),this}};of.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Be.reduceDescriptors(of.prototype,({value:a},r)=>{let t=r[0].toUpperCase()+r.slice(1);return{get:()=>a,set(n){this[t]=n}}});Be.freezeMethods(of);var il=of;function Ih(a,r){const t=this||hy,n=r||t,o=il.from(n.headers);let i=n.data;return Be.forEach(a,function(u){i=u.call(t,i,o.normalize(),r?r.status:void 0)}),o.normalize(),i}function H5(a){return!!(a&&a.__CANCEL__)}function Y5(a,r,t){Ca.call(this,a??"canceled",Ca.ERR_CANCELED,r,t),this.name="CanceledError"}Be.inherits(Y5,Ca,{__CANCEL__:!0});var lf=Y5;function KR(a,r,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?a(t):r(new Ca("Request failed with status code "+t.status,[Ca.ERR_BAD_REQUEST,Ca.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}var eT=ko.isStandardBrowserEnv?function(){return{write:function(t,n,o,i,c,u){const m=[];m.push(t+"="+encodeURIComponent(n)),Be.isNumber(o)&&m.push("expires="+new Date(o).toGMTString()),Be.isString(i)&&m.push("path="+i),Be.isString(c)&&m.push("domain="+c),u===!0&&m.push("secure"),document.cookie=m.join("; ")},read:function(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function tT(a){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(a)}function aT(a,r){return r?a.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):a}function q5(a,r){return a&&!tT(r)?aT(a,r):r}var nT=ko.isStandardBrowserEnv?function(){const r=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function o(i){let c=i;return r&&(t.setAttribute("href",c),c=t.href),t.setAttribute("href",c),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=o(window.location.href),function(c){const u=Be.isString(c)?o(c):c;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}();function rT(a){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(a);return r&&r[1]||""}function oT(a,r){a=a||10;const t=new Array(a),n=new Array(a);let o=0,i=0,c;return r=r!==void 0?r:1e3,function(m){const g=Date.now(),f=n[i];c||(c=g),t[o]=m,n[o]=g;let y=i,v=0;for(;y!==o;)v+=t[y++],y=y%a;if(o=(o+1)%a,o===i&&(i=(i+1)%a),g-c<r)return;const S=f&&g-f;return S?Math.round(v*1e3/S):void 0}}var lT=oT;function s2(a,r){let t=0;const n=lT(50,250);return o=>{const i=o.loaded,c=o.lengthComputable?o.total:void 0,u=i-t,m=n(u),g=i<=c;t=i;const f={loaded:i,total:c,progress:c?i/c:void 0,bytes:u,rate:m||void 0,estimated:m&&c&&g?(c-i)/m:void 0,event:o};f[r?"download":"upload"]=!0,a(f)}}var sT=typeof XMLHttpRequest<"u",iT=sT&&function(a){return new Promise(function(t,n){let o=a.data;const i=il.from(a.headers).normalize(),c=a.responseType;let u;function m(){a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let g;Be.isFormData(o)&&(ko.isStandardBrowserEnv||ko.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?Be.isString(g=i.getContentType())&&i.setContentType(g.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let f=new XMLHttpRequest;if(a.auth){const w=a.auth.username||"",x=a.auth.password?unescape(encodeURIComponent(a.auth.password)):"";i.set("Authorization","Basic "+btoa(w+":"+x))}const y=q5(a.baseURL,a.url);f.open(a.method.toUpperCase(),U5(y,a.params,a.paramsSerializer),!0),f.timeout=a.timeout;function v(){if(!f)return;const w=il.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),k={data:!c||c==="text"||c==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:w,config:a,request:f};KR(function(I){t(I),m()},function(I){n(I),m()},k),f=null}if("onloadend"in f?f.onloadend=v:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(v)},f.onabort=function(){f&&(n(new Ca("Request aborted",Ca.ECONNABORTED,a,f)),f=null)},f.onerror=function(){n(new Ca("Network Error",Ca.ERR_NETWORK,a,f)),f=null},f.ontimeout=function(){let x=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const k=a.transitional||$5;a.timeoutErrorMessage&&(x=a.timeoutErrorMessage),n(new Ca(x,k.clarifyTimeoutError?Ca.ETIMEDOUT:Ca.ECONNABORTED,a,f)),f=null},ko.isStandardBrowserEnv){const w=nT(y)&&a.xsrfCookieName&&eT.read(a.xsrfCookieName);w&&i.set(a.xsrfHeaderName,w)}o===void 0&&i.setContentType(null),"setRequestHeader"in f&&Be.forEach(i.toJSON(),function(x,k){f.setRequestHeader(k,x)}),Be.isUndefined(a.withCredentials)||(f.withCredentials=!!a.withCredentials),c&&c!=="json"&&(f.responseType=a.responseType),typeof a.onDownloadProgress=="function"&&f.addEventListener("progress",s2(a.onDownloadProgress,!0)),typeof a.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",s2(a.onUploadProgress)),(a.cancelToken||a.signal)&&(u=w=>{f&&(n(!w||w.type?new lf(null,a,f):w),f.abort(),f=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const S=rT(y);if(S&&ko.protocols.indexOf(S)===-1){n(new Ca("Unsupported protocol "+S+":",Ca.ERR_BAD_REQUEST,a));return}f.send(o||null)})},y0={http:DR,xhr:iT};Be.forEach(y0,(a,r)=>{if(a){try{Object.defineProperty(a,"name",{value:r})}catch{}Object.defineProperty(a,"adapterName",{value:r})}});var i2=a=>`- ${a}`,cT=a=>Be.isFunction(a)||a===null||a===!1,G5={getAdapter:a=>{a=Be.isArray(a)?a:[a];const{length:r}=a;let t,n;const o={};for(let i=0;i<r;i++){t=a[i];let c;if(n=t,!cT(t)&&(n=y0[(c=String(t)).toLowerCase()],n===void 0))throw new Ca(`Unknown adapter '${c}'`);if(n)break;o[c||"#"+i]=n}if(!n){const i=Object.entries(o).map(([u,m])=>`adapter ${u} `+(m===!1?"is not supported by the environment":"is not available in the build"));let c=r?i.length>1?`since :
`+i.map(i2).join(`
`):" "+i2(i[0]):"as no adapter specified";throw new Ca("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n},adapters:y0};function Mh(a){if(a.cancelToken&&a.cancelToken.throwIfRequested(),a.signal&&a.signal.aborted)throw new lf(null,a)}function c2(a){return Mh(a),a.headers=il.from(a.headers),a.data=Ih.call(a,a.transformRequest),["post","put","patch"].indexOf(a.method)!==-1&&a.headers.setContentType("application/x-www-form-urlencoded",!1),G5.getAdapter(a.adapter||hy.adapter)(a).then(function(n){return Mh(a),n.data=Ih.call(a,a.transformResponse,n),n.headers=il.from(n.headers),n},function(n){return H5(n)||(Mh(a),n&&n.response&&(n.response.data=Ih.call(a,a.transformResponse,n.response),n.response.headers=il.from(n.response.headers))),Promise.reject(n)})}var d2=a=>a instanceof il?a.toJSON():a;function Yi(a,r){r=r||{};const t={};function n(g,f,y){return Be.isPlainObject(g)&&Be.isPlainObject(f)?Be.merge.call({caseless:y},g,f):Be.isPlainObject(f)?Be.merge({},f):Be.isArray(f)?f.slice():f}function o(g,f,y){if(Be.isUndefined(f)){if(!Be.isUndefined(g))return n(void 0,g,y)}else return n(g,f,y)}function i(g,f){if(!Be.isUndefined(f))return n(void 0,f)}function c(g,f){if(Be.isUndefined(f)){if(!Be.isUndefined(g))return n(void 0,g)}else return n(void 0,f)}function u(g,f,y){if(y in r)return n(g,f);if(y in a)return n(void 0,g)}const m={url:i,method:i,data:i,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(g,f)=>o(d2(g),d2(f),!0)};return Be.forEach(Object.keys(Object.assign({},a,r)),function(f){const y=m[f]||o,v=y(a[f],r[f],f);Be.isUndefined(v)&&y!==u||(t[f]=v)}),t}var Z5="1.6.0",yy={};["object","boolean","number","function","string","symbol"].forEach((a,r)=>{yy[a]=function(n){return typeof n===a||"a"+(r<1?"n ":" ")+a}});var u2={};yy.transitional=function(r,t,n){function o(i,c){return"[Axios v"+Z5+"] Transitional option '"+i+"'"+c+(n?". "+n:"")}return(i,c,u)=>{if(r===!1)throw new Ca(o(c," has been removed"+(t?" in "+t:"")),Ca.ERR_DEPRECATED);return t&&!u2[c]&&(u2[c]=!0,console.warn(o(c," has been deprecated since v"+t+" and will be removed in the near future"))),r?r(i,c,u):!0}};function dT(a,r,t){if(typeof a!="object")throw new Ca("options must be an object",Ca.ERR_BAD_OPTION_VALUE);const n=Object.keys(a);let o=n.length;for(;o-- >0;){const i=n[o],c=r[i];if(c){const u=a[i],m=u===void 0||c(u,i,a);if(m!==!0)throw new Ca("option "+i+" must be "+m,Ca.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ca("Unknown option "+i,Ca.ERR_BAD_OPTION)}}var b0={assertOptions:dT,validators:yy},zl=b0.validators,rp=class{constructor(a){this.defaults=a,this.interceptors={request:new o2,response:new o2}}request(a,r){typeof a=="string"?(r=r||{},r.url=a):r=a||{},r=Yi(this.defaults,r);const{transitional:t,paramsSerializer:n,headers:o}=r;t!==void 0&&b0.assertOptions(t,{silentJSONParsing:zl.transitional(zl.boolean),forcedJSONParsing:zl.transitional(zl.boolean),clarifyTimeoutError:zl.transitional(zl.boolean)},!1),n!=null&&(Be.isFunction(n)?r.paramsSerializer={serialize:n}:b0.assertOptions(n,{encode:zl.function,serialize:zl.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=o&&Be.merge(o.common,o[r.method]);o&&Be.forEach(["delete","get","head","post","put","patch","common"],S=>{delete o[S]}),r.headers=il.concat(i,o);const c=[];let u=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(r)===!1||(u=u&&w.synchronous,c.unshift(w.fulfilled,w.rejected))});const m=[];this.interceptors.response.forEach(function(w){m.push(w.fulfilled,w.rejected)});let g,f=0,y;if(!u){const S=[c2.bind(this),void 0];for(S.unshift.apply(S,c),S.push.apply(S,m),y=S.length,g=Promise.resolve(r);f<y;)g=g.then(S[f++],S[f++]);return g}y=c.length;let v=r;for(f=0;f<y;){const S=c[f++],w=c[f++];try{v=S(v)}catch(x){w.call(this,x);break}}try{g=c2.call(this,v)}catch(S){return Promise.reject(S)}for(f=0,y=m.length;f<y;)g=g.then(m[f++],m[f++]);return g}getUri(a){a=Yi(this.defaults,a);const r=q5(a.baseURL,a.url);return U5(r,a.params,a.paramsSerializer)}};Be.forEach(["delete","get","head","options"],function(r){rp.prototype[r]=function(t,n){return this.request(Yi(n||{},{method:r,url:t,data:(n||{}).data}))}});Be.forEach(["post","put","patch"],function(r){function t(n){return function(i,c,u){return this.request(Yi(u||{},{method:r,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:c}))}}rp.prototype[r]=t(),rp.prototype[r+"Form"]=t(!0)});var Fm=rp,uT=class V5{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const n=this;this.promise.then(o=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](o);n._listeners=null}),this.promise.then=o=>{let i;const c=new Promise(u=>{n.subscribe(u),i=u}).then(o);return c.cancel=function(){n.unsubscribe(i)},c},r(function(i,c,u){n.reason||(n.reason=new lf(i,c,u),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const t=this._listeners.indexOf(r);t!==-1&&this._listeners.splice(t,1)}static source(){let r;return{token:new V5(function(o){r=o}),cancel:r}}},mT=uT;function pT(a){return function(t){return a.apply(null,t)}}function fT(a){return Be.isObject(a)&&a.isAxiosError===!0}var v0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(v0).forEach(([a,r])=>{v0[r]=a});var gT=v0;function Q5(a){const r=new Fm(a),t=k5(Fm.prototype.request,r);return Be.extend(t,Fm.prototype,r,{allOwnKeys:!0}),Be.extend(t,r,null,{allOwnKeys:!0}),t.create=function(o){return Q5(Yi(a,o))},t}var vn=Q5(hy);vn.Axios=Fm;vn.CanceledError=lf;vn.CancelToken=mT;vn.isCancel=H5;vn.VERSION=Z5;vn.toFormData=rf;vn.AxiosError=Ca;vn.Cancel=vn.CanceledError;vn.all=function(r){return Promise.all(r)};vn.spread=pT;vn.isAxiosError=fT;vn.mergeConfig=Yi;vn.AxiosHeaders=il;vn.formToJSON=a=>j5(Be.isHTMLForm(a)?new FormData(a):a);vn.getAdapter=G5.getAdapter;vn.HttpStatusCode=gT;vn.default=vn;var Td=vn,{Axios:Uj,AxiosError:$j,CanceledError:jj,isCancel:Hj,CancelToken:Yj,VERSION:qj,all:Gj,Cancel:Zj,isAxiosError:Vj,spread:Qj,toFormData:Jj,AxiosHeaders:Xj,HttpStatusCode:Kj,formToJSON:eH,getAdapter:tH,mergeConfig:aH}=Td,hT=Gd(jD()),yT=Gd(HD()),bT=25,vT=100,Ah={hasNext:!1,hasPrev:!1},ET=100*1024*1024,xT=10,wT=100,ST={created_at:!0,deleted_at:!0,pinned_at:!0,updated_at:!0,command:!0,mentioned_users:!0,quoted_message:!0,latest_reactions:!0,own_reactions:!0,reaction_counts:!0,reply_count:!0,i18n:!0,type:!0,html:!0,__html:!0,user:!0},CT={error:!0},NT=3,_T=1e3;function J5(a,r){a.then().catch(t=>{console.warn(`failed to do ${r}, ran into error: `,t)})}var Ql=a=>new Promise(r=>setTimeout(r,a));function E0(a){return typeof a=="function"||a instanceof Function||Object.prototype.toString.call(a)==="[object Function]"}var md={TOKEN_EXPIRED:40,WS_CLOSED_SUCCESS:1e3};function kT(a){return a!==null&&typeof a=="object"&&(a.readable||typeof a._read=="function")}function IT(a){return a!=null&&a.constructor!=null&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function MT(a){return typeof window<"u"&&"File"in window&&a instanceof File}function AT(a){return typeof window<"u"&&"Blob"in window&&a instanceof Blob}function DT(a){return{channel_mutes:!0,devices:!0,mutes:!0,total_unread_count:!0,unread_channels:!0,unread_count:!0,unread_threads:!0,invisible:!0,privacy_settings:!0,roles:!0,push_preferences:!0}[a]}function RT(a,r,t){const n=new yT.default;return kT(a)||IT(a)||MT(a)||AT(a)?r?n.append("file",a,r):n.append("file",a):n.append("file",{uri:a,name:r||a.split("/").reverse()[0],contentType:t,type:t}),n}function Xn(a){const r=[],t=Array.isArray(a)?a:[a];for(const n of t){const o=Object.entries(n);o.length>1&&console.warn("client._buildSort() - multiple fields in a single sort object detected. Object's field order is not guaranteed");for(const[i,c]of o)r.push({field:i,direction:c})}return r}function op(a){const r=Math.min(500+a*2e3,25e3),t=Math.min(Math.max(250,(a-1)*2e3),25e3);return Math.floor(Math.random()*(r-t)+t)}function _i(){return eo()}function td(a){let r="";for(let t=0;t<a.length;t++)r+=a[t].toString(16).padStart(2,"0");return r}function eo(){const a=LT(16);return a[6]=a[6]&15|64,a[8]=a[8]&191|128,td(a.subarray(0,4))+"-"+td(a.subarray(4,6))+"-"+td(a.subarray(6,8))+"-"+td(a.subarray(8,10))+"-"+td(a.subarray(10,16))}function TT(a){const r=Math.pow(2,8*a.byteLength/a.length);for(let t=0;t<a.length;t++)a[t]=Math.random()*r}var PT=typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)<"u"?crypto.getRandomValues.bind(crypto):typeof msCrypto<"u"?msCrypto.getRandomValues.bind(msCrypto):TT;function LT(a){const r=new Uint8Array(a);return PT(r),r}function BT(a){const r={};if(!a)return r;try{Object.getOwnPropertyNames(a).forEach(t=>{r[t]=Object.getOwnPropertyDescriptor(a,t)})}catch{return{error:"failed to serialize the error"}}return r}function zT(){const a=typeof navigator<"u"?navigator:typeof window<"u"&&window.navigator?window.navigator:void 0;return a?typeof a.onLine!="boolean"?!0:a.onLine:(console.warn("isOnline failed to access window.navigator and assume browser is online"),!0)}function X5(a){typeof window<"u"&&window.addEventListener&&(window.addEventListener("offline",a),window.addEventListener("online",a))}function K5(a){typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("offline",a),window.removeEventListener("online",a))}var OT=a=>{const r=[];for(const t in a)a[t]!==void 0&&(Array.isArray(a[t])||typeof a[t]=="object"?r.push(`${t}=${encodeURIComponent(JSON.stringify(a[t]))}`):r.push(`${t}=${encodeURIComponent(a[t])}`));return r.join("&")};function Ir(a){const r=t=>t?{...t,created_at:a.created_at?new Date(a.created_at):new Date,deleted_at:a.deleted_at?new Date(a.deleted_at):null,pinned_at:a.pinned_at?new Date(a.pinned_at):null,reaction_groups:FT(a.reaction_groups,a.reaction_counts,a.reaction_scores),status:a.status||"received",updated_at:a.updated_at?new Date(a.updated_at):new Date}:null;return{...r(a),error:a.error??null,quoted_message:r(a.quoted_message)}}var ew=a=>{var n;const r={...ST,...CT};return{...Object.fromEntries(Object.entries(a).filter(([o])=>!r[o])),pinned:!!a.pinned_at,mentioned_users:(n=a.mentioned_users)==null?void 0:n.map(o=>typeof o=="string"?o:o.id)}},tw=({needle:a,sortedArray:r,selectKey:t,selectValueToCompare:n=i=>i,sortDirection:o="ascending"})=>{if(!r.length)return 0;let i=0,c=r.length-1,u=0;const m=()=>{u=Math.round((i+c)/2)},g=n(a);for(;i<=c;){m();const f=n(r[u]);o==="ascending"&&g<f||o==="descending"&&g>=f?c=u-1:i=u+1}if(t){const f=t(a),y=o==="ascending"?-1:1;for(let v=i+y;0<=v&&v<r.length&&n(r[v])===g;v+=y)if(t(r[v])===f)return v}return i};function aw(a,r,t=!1,n="created_at",o=!0){const i=o||t;let c=[...a];if(t&&(c=c.filter(f=>!(f.id&&r.id===f.id))),c.length===0&&i)return c.concat(r);if(c.length===0)return c;const u=r[n].getTime(),m=c.at(-1)[n].getTime()<u;if(m&&i)return c.concat(r);if(m)return c;const g=tw({needle:r,sortedArray:c,sortDirection:"ascending",selectValueToCompare:f=>f[n].getTime(),selectKey:f=>f.id});return!t&&r.id&&c[g]&&r.id===c[g].id?(c[g]=r,c):(i&&c.splice(g,0,r),c)}function FT(a,r,t){if(a)return a;if(r&&t){const n={};for(const o of Object.keys(r))n[o]={count:r[o],sum_scores:t[o]};return n}return null}var x0=(a,r=0,{leading:t=!1,trailing:n=!0}={})=>{let o=null,i=null,c;const u=(...m)=>(o?clearTimeout(o):t&&(c=a(...m)),n&&(i=m),o=setTimeout(()=>{i&&(c=a(...i),i=null),o=null},r),c);return u.cancel=()=>{o&&clearTimeout(o)},u.flush=()=>(o&&(clearTimeout(o),o=null,i&&(c=a(...i))),c),u},nw=(a,r=200,{leading:t=!0,trailing:n=!1}={})=>{let o=null,i=null;return(...c)=>{if(o){n&&(i=c);return}t&&a(...c);const u=()=>{if(i){a(...i),i=null,o=setTimeout(u,r);return}o=null};o=setTimeout(u,r)}},WT=(a,r)=>r.split(".").reduce((t,n)=>{if(t&&typeof t=="object"&&n in t)return t[n]},a),UT=(a,r)=>{if(!Array.isArray(a))return[];const t=new Set;return a.filter(n=>{const o=WT(n,r);return t.has(o)?!1:(t.add(o),!0)})};function $T(a,r){let t=0,n=a.length-1;for(;t<=n;){const o=Math.floor((t+n)/2),i=a[o].created_at;if(!i){t+=1;continue}const c=new Date(i);if(c.getTime()===r.getTime())return o;c.getTime()<r.getTime()?t=o+1:n=o-1}return t}var jT=({parentSet:a,requestedPageSize:r,returnedPage:t,messagePaginationOptions:n})=>{var k,E;const o={...a.pagination};if(!(n!=null&&n.created_at_around))return o;let i,c,u,m;const g=new Date(n.created_at_around),[f,y]=[t[0],t.slice(-1)[0]],v=!!(f!=null&&f.created_at)&&new Date(f.created_at)>g,S=!!(y!=null&&y.created_at)&&new Date(y.created_at)<g,w=r>a.messages.length&&r>t.length,x=(r>a.messages.length||a.messages.length>=t.length)&&r>t.length;if(v)i=!1,u=!0,w&&(c=!1,m=!0);else if(S)c=!1,m=!0,w&&(i=!1,u=!0);else if(x)c=i=!1,u=m=!0;else{const[I,M]=[(f==null?void 0:f.id)&&f.id===((k=a.messages[0])==null?void 0:k.id),(y==null?void 0:y.id)&&y.id===((E=a.messages.slice(-1)[0])==null?void 0:E.id)];u=I,m=M;const N=Math.floor(t.length/2),_=$T(t,g);_!==-1&&(i=N<=_,c=N>=_)}return u&&typeof i<"u"&&(o.hasPrev=i),m&&typeof c<"u"&&(o.hasNext=c),o},HT=({parentSet:a,requestedPageSize:r,returnedPage:t,messagePaginationOptions:n})=>{var k,E;const o={...a.pagination},{id_around:i}=n||{};if(!i)return o;let c,u;const[m,g]=[t[0],t.slice(-1)[0]],[f,y]=[(m==null?void 0:m.id)===((k=a.messages[0])==null?void 0:k.id),(g==null?void 0:g.id)===((E=a.messages.slice(-1)[0])==null?void 0:E.id)];let v=f,S=y;const w=Math.floor(t.length/2);if((r>a.messages.length||a.messages.length>=t.length)&&r>t.length)u=c=!1,v=S=!0;else if(t[w])if(t[w].id===i)c=u=!0;else{let I;const M=[t.slice(0,w),t.slice(w)];c=u=!0;for(let N=0;N<M.length;N++)I=M[N].find(_=>_.id===i),I&&N===0&&(c=!1),I&&N===1&&(u=!1)}else return o;return v&&typeof c<"u"&&(o.hasPrev=c),S&&typeof u<"u"&&(o.hasNext=u),o},YT=({parentSet:a,requestedPageSize:r,returnedPage:t,messagePaginationOptions:n})=>{var k,E;const o={...a.pagination};let i,c;const[u,m]=[t[0],t.slice(-1)[0]],[g,f]=[(u==null?void 0:u.id)&&u.id===((k=a.messages[0])==null?void 0:k.id),(m==null?void 0:m.id)&&m.id===((E=a.messages.slice(-1)[0])==null?void 0:E.id)],y=n&&(n.created_at_after_or_equal||n.created_at_after||n.id_gt||n.id_gte),v=typeof n>"u"?!0:n.created_at_before_or_equal||n.created_at_before||n.id_lt||n.id_lte||n.offset,S=!y&&!v&&!(n!=null&&n.id_around)&&!(n!=null&&n.created_at_around),w=t.length>=r;(typeof v<"u"||S)&&(i=w),typeof y<"u"&&(c=w);const x=t.length===0;return(g||x)&&typeof i<"u"&&(o.hasPrev=i),(f||x)&&typeof c<"u"&&(o.hasNext=c),o},rw=a=>{var r,t,n;return a.parentSet.messages.length<a.returnedPage.length?((r=a.logger)==null||r.call(a,"error","Corrupted message set state: parent set size < returned page size"),a.parentSet.pagination):(t=a.messagePaginationOptions)!=null&&t.created_at_around?jT(a):(n=a.messagePaginationOptions)!=null&&n.id_around?HT(a):YT(a)},ym={},Dh=async({channel:a,client:r,id:t,members:n,options:o,type:i})=>{if(!a&&!i)throw new Error("Channel or channel type have to be provided to query a channel.");const c=a||r.channel(i,t,{members:n}),u=c.id?c.cid:n&&n.length?by(c.type,n):void 0;if(!u)throw new Error("Channel ID or channel members array have to be provided to query a channel.");const m=ym[u];if(m)await m;else try{ym[u]=c.watch(o),await ym[u]}finally{delete ym[u]}return c},by=(a,r)=>{if(!r)return;const t=[...r].sort().join(",");if(t)return`${a}:!members-${t}`},lp=a=>{if(!a)return!1;const r=a.state.membership;return!!(r!=null&&r.pinned_at)},bm=a=>{if(!a)return!1;const r=a.state.membership;return!!(r!=null&&r.archived_at)},vm=a=>a?typeof a.archived=="boolean":!1,ow=({atIndex:a,sort:r,targetKey:t})=>{if(!r)return null;let n=null;if(Array.isArray(r))n=r[a]??null;else for(const o in r){if(o!==t)return null;n=r;break}return(n==null?void 0:n[t])??null},w0=a=>{const r=qT({sort:a});return typeof r!="number"?!1:Math.abs(r)===1},qT=({sort:a})=>ow({atIndex:0,sort:a,targetKey:"pinned_at"}),lw=({channels:a})=>{let r=null;for(const t of a){if(!lp(t))break;typeof r=="number"?r++:r=0}return r},Em=({channels:a,channelToMove:r,channelToMoveIndexWithinChannels:t,sort:n})=>{const o=t??a.findIndex(y=>y.cid===r.cid),i=o>=0,c=o===0,u=w0(n),m=lp(r);if(c||u&&m)return a;const g=[...a];i&&g.splice(o,1);let f=null;return u&&(f=lw({channels:g})),g.splice(typeof f=="number"?f+1:0,0,r),g},GT=a=>!!a.getTime,sw=a=>GT(a.created_at),ZT=class{constructor(a){var r;this.messageSets=[],this.formatMessage=t=>Ir(t),this.setIsUpToDate=t=>{this.isUpToDate=t},this.removeMessageFromArray=(t,n)=>{const o=t.filter(i=>!(i.id&&n.id&&i.id===n.id));return{removed:o.length<t.length,result:o}},this.updateUserMessages=t=>{const n=(o,i)=>{var c;for(let u=0;u<o.length;u++){const m=o[u];((c=m.user)==null?void 0:c.id)===i.id&&(o[u]={...m,user:i})}};this.messageSets.forEach(o=>n(o.messages,t));for(const o in this.threads)n(this.threads[o],t);n(this.pinnedMessages,t)},this.deleteUserMessages=(t,n=!1)=>{const o=(i,c,u=!1)=>{var m;for(let g=0;g<i.length;g++){const f=i[g];((m=f.user)==null?void 0:m.id)===c.id&&(u?i[g]={cid:f.cid,created_at:f.created_at,deleted_at:c.deleted_at,id:f.id,latest_reactions:[],mentioned_users:[],own_reactions:[],parent_id:f.parent_id,reply_count:f.reply_count,status:f.status,thread_participants:f.thread_participants,type:"deleted",updated_at:f.updated_at,user:f.user}:i[g]={...f,type:"deleted",deleted_at:c.deleted_at?new Date(c.deleted_at):null})}};this.messageSets.forEach(i=>o(i.messages,t,n));for(const i in this.threads)o(this.threads[i],t,n);o(this.pinnedMessages,t,n)},this._channel=a,this.watcher_count=0,this.typing={},this.read={},this.initMessages(),this.pinnedMessages=[],this.pending_messages=[],this.threads={},this.mutedUsers=[],this.watchers={},this.members={},this.membership={},this.unreadCount=0,this.isUpToDate=!0,this.last_message_at=((r=a==null?void 0:a.state)==null?void 0:r.last_message_at)!=null?new Date(a.state.last_message_at):null}get messages(){var a;return((a=this.messageSets.find(r=>r.isCurrent))==null?void 0:a.messages)||[]}set messages(a){const r=this.messageSets.findIndex(t=>t.isCurrent);this.messageSets[r].messages=a}get latestMessages(){var a;return((a=this.messageSets.find(r=>r.isLatest))==null?void 0:a.messages)||[]}set latestMessages(a){const r=this.messageSets.findIndex(t=>t.isLatest);this.messageSets[r].messages=a}get messagePagination(){var a;return((a=this.messageSets.find(r=>r.isCurrent))==null?void 0:a.pagination)||Ah}addMessageSorted(a,r=!1,t=!0,n="latest"){return this.addMessagesSorted([a],r,!1,t,n)}addMessagesSorted(a,r=!1,t=!1,n=!0,o="current"){var u;const{messagesToAdd:i,targetMessageSetIndex:c}=this.findTargetMessageSet(a,n,o);for(let m=0;m<i.length;m+=1){if(i[m].shadowed)continue;const f=i[m].created_at instanceof Date;let y;f?y=i[m]:(y=this.formatMessage(i[m]),y.user&&((u=this._channel)!=null&&u.cid)&&this._channel.getClient().state.updateUserReference(y.user,this._channel.cid),t&&y.id&&this.threads[y.id]&&delete this.threads[y.id],this.last_message_at||(this.last_message_at=new Date(y.created_at.getTime())),y.created_at.getTime()>this.last_message_at.getTime()&&(this.last_message_at=new Date(y.created_at.getTime())));const v=y.parent_id;if((!v||y.show_in_channel)&&c!==-1&&(this.messageSets[c].messages=this._addToMessageList(this.messageSets[c].messages,y,r,"created_at",n)),v&&!t){const S=this.threads[v]||[];this.threads[v]=this._addToMessageList(S,y,r,"created_at",n)}}return{messageSet:this.messageSets[c]}}addPinnedMessages(a){for(let r=0;r<a.length;r+=1)this.addPinnedMessage(a[r])}addPinnedMessage(a){this.pinnedMessages=this._addToMessageList(this.pinnedMessages,this.formatMessage(a),!1,"pinned_at")}removePinnedMessage(a){const{result:r}=this.removeMessageFromArray(this.pinnedMessages,a);this.pinnedMessages=r}addReaction(a,r,t){const n=r;let o;if(n||(o=this.findMessage(a.message_id)),!n&&!o)return;const i=n??o,c={id:i==null?void 0:i.id,parent_id:i==null?void 0:i.parent_id,pinned:i==null?void 0:i.pinned,show_in_channel:i==null?void 0:i.show_in_channel};return this._updateMessage(c,u=>{if(n){const m={...n};return n.own_reactions=this._addOwnReactionToMessage(u.own_reactions,a,t),m.own_reactions=this._channel.getClient().userID===a.user_id?n.own_reactions:u.own_reactions,this.formatMessage(m)}return o?this._addReactionToState(o,a,t):u}),n??o}_addReactionToState(a,r,t){if(a.reaction_groups||(a.reaction_groups={}),t)for(const u of a.own_reactions??[]){const m=a.reaction_groups[u.type];a.reaction_groups[u.type]={...m,count:m.count-1,sum_scores:m.sum_scores-(u.score??1)},a.reaction_groups[u.type].count<1&&delete a.reaction_groups[u.type]}const o=a.reaction_groups[r.type],i=r.score??1;a.reaction_groups[r.type]=o?{...o,count:o.count+1,sum_scores:o.sum_scores+i,last_reaction_at:r.created_at}:{count:1,first_reaction_at:r.created_at,last_reaction_at:r.created_at,sum_scores:i},a.own_reactions=this._addOwnReactionToMessage(a.own_reactions,r,t);const c=this._channel.getClient().userID;return a.latest_reactions=t?[...(a.latest_reactions||[]).filter(u=>u.user_id!==c),r]:[...a.latest_reactions||[],r],a}_addOwnReactionToMessage(a,r,t){return t?a=[]:a=this._removeOwnReactionFromMessage(a,r),a=a||[],this._channel.getClient().userID===r.user_id&&a.push(r),a}_removeOwnReactionFromMessage(a,r){return a&&a.filter(t=>t.user_id!==r.user_id||t.type!==r.type)}removeReaction(a,r){const t=r;let n;if(t||(n=this.findMessage(a.message_id)),!t&&!n)return;const o=t??n,i={id:o==null?void 0:o.id,parent_id:o==null?void 0:o.parent_id,pinned:o==null?void 0:o.pinned,show_in_channel:o==null?void 0:o.show_in_channel};return this._updateMessage(i,c=>t?(t.own_reactions=this._removeOwnReactionFromMessage(c.own_reactions,a),this.formatMessage(t)):n?this._removeReactionFromState(n,a):c),t}_removeReactionFromState(a,r){var o,i,c,u;const t=(o=a.own_reactions)==null?void 0:o.find(m=>m.type===r.type);if(t&&((i=a.reaction_groups)!=null&&i[t.type])){const m=a.reaction_groups[t.type];a.reaction_groups[t.type]={...m,count:m.count-1,sum_scores:m.sum_scores-(t.score??1)},a.reaction_groups[t.type].count<1&&delete a.reaction_groups[t.type]}a.own_reactions=(c=a.own_reactions)==null?void 0:c.filter(m=>m.type!==r.type);const n=this._channel.getClient().userID;return a.latest_reactions=(u=a.latest_reactions)==null?void 0:u.filter(m=>!(m.user_id===n&&m.type===r.type)),a}_updateQuotedMessageReferences({message:a,remove:r}){const t=o=>{var i,c;return{...o,created_at:o.created_at.toISOString(),pinned_at:(i=o.pinned_at)==null?void 0:i.toISOString(),updated_at:(c=o.updated_at)==null?void 0:c.toISOString()}},n=o=>{const i=o.reduce((c,u)=>(u.quoted_message_id===a.id&&c.push({...t(u),quoted_message:r?{...a,attachments:[]}:a}),c),[]);this.addMessagesSorted(i,!0)};a.parent_id?a.parent_id&&this.threads[a.parent_id]&&n(this.threads[a.parent_id]):this.messageSets.forEach(o=>n(o.messages))}removeQuotedMessageReferences(a){this._updateQuotedMessageReferences({message:a,remove:!0})}_updateMessage(a,r){const{parent_id:t,show_in_channel:n,pinned:o}=a;if(t&&this.threads[t]){const i=this.threads[t],c=i.findIndex(u=>u.id===a.id);c!==-1&&(i[c]=r(i[c]),this.threads[t]=i)}if(!n&&!t||n){const i=this.findMessageSetIndex(a);if(i!==-1){const c=this.messageSets[i].messages.findIndex(u=>u.id===a.id);if(c!==-1){const u=r(this.messageSets[i].messages[c]);this.messageSets[i].messages[c]=u}}}if(o){const i=this.pinnedMessages.findIndex(c=>c.id===a.id);i!==-1&&(this.pinnedMessages[i]=r(this.pinnedMessages[i]))}}_addToMessageList(a,r,t=!1,n="created_at",o=!0){return aw(a,r,t,n,o)}removeMessage(a){let r=!1;if(a.parent_id&&this.threads[a.parent_id]){const{removed:t,result:n}=this.removeMessageFromArray(this.threads[a.parent_id],a);this.threads[a.parent_id]=n,r=t}else{const t=a.messageSetIndex??this.findMessageSetIndex(a);if(t!==-1){const{removed:n,result:o}=this.removeMessageFromArray(this.messageSets[t].messages,a);this.messageSets[t].messages=o,r=n}}return r}filterErrorMessages(){const a=this.latestMessages.filter(r=>r.type!=="error");this.latestMessages=a}clean(){const a=new Date;for(const[r,t]of Object.entries(this.typing)){const n=typeof t.received_at=="string"?new Date(t.received_at):t.received_at||new Date;a.getTime()-n.getTime()>7e3&&(delete this.typing[r],this._channel.getClient().dispatchEvent({cid:this._channel.cid,type:"typing.stop",user:{id:r}}))}}clearMessages(){this.initMessages(),this.pinnedMessages=[]}initMessages(){this.messageSets=[{messages:[],isLatest:!0,isCurrent:!0,pagination:Ah}]}async loadMessageIntoState(a,r,t=25){var u;let n,o=!1,i=!1;const c=r||a;if(a==="latest"){if(this.messages===this.latestMessages)return;n=this.messageSets.findIndex(m=>m.isLatest)}else n=this.findMessageSetIndex({id:c});n!==-1&&(this.switchToMessageSet(n),o=!0),i=!r||!!((u=this.threads[r])!=null&&u.find(m=>m.id===a)),!(o&&i)&&(o||await this._channel.query({messages:{id_around:c,limit:t}},"new"),!i&&r&&await this._channel.getReplies(r,{id_around:a,limit:t}),n=this.findMessageSetIndex({id:c}),n!==-1&&this.switchToMessageSet(n))}findMessage(a,r){if(r){const n=this.threads[r];return n?n.find(o=>o.id===a):void 0}const t=this.findMessageSetIndex({id:a});if(t!==-1)return this.messageSets[t].messages.find(n=>n.id===a)}switchToMessageSet(a){const r=this.messageSets.find(t=>t.isCurrent);r&&(r.isCurrent=!1,this.messageSets[a].isCurrent=!0)}areMessageSetsOverlap(a,r){return a.some(t=>r.find(n=>t.id===n.id))}findMessageSetIndex(a){return this.messageSets.findIndex(r=>!!r.messages.find(t=>t.id===a.id))}findTargetMessageSet(a,r=!0,t="current"){let n=a,o;if(r){const i=this.messageSets.map((m,g)=>g).filter(m=>this.areMessageSetsOverlap(this.messageSets[m].messages,a));switch(t){case"new":i.length>0?o=i[0]:a.some(m=>!m.parent_id)&&(this.messageSets.push({messages:[],isCurrent:!1,isLatest:!1,pagination:Ah}),o=this.messageSets.length-1);break;case"current":o=this.messageSets.findIndex(m=>m.isCurrent);break;case"latest":o=this.messageSets.findIndex(m=>m.isLatest);break;default:o=-1}const c=i.splice(0,1)[0],u=[...i];if(c!==void 0&&c!==o&&u.push(o),u.length>0){const m=this.messageSets[c],g=this.messageSets.filter((y,v)=>u.indexOf(v)!==-1);g.forEach(y=>{m.isLatest=m.isLatest||y.isLatest,m.isCurrent=m.isCurrent||y.isCurrent,m.pagination.hasPrev=y.messages[0].created_at<m.messages[0].created_at?y.pagination.hasPrev:m.pagination.hasPrev,m.pagination.hasNext=m.messages.slice(-1)[0].created_at<y.messages.slice(-1)[0].created_at?y.pagination.hasNext:m.pagination.hasNext,n=[...n,...y.messages]}),g.forEach(y=>this.messageSets.splice(this.messageSets.indexOf(y),1)),o=this.messageSets.findIndex(y=>this.areMessageSetsOverlap(y.messages,a))}}else o=this.findMessageSetIndex(a[0]);return{targetMessageSetIndex:o,messagesToAdd:n}}},VT=a=>!!(a!=null&&a.og_scrape_url)||!!(a!=null&&a.title_link),iw=a=>{var r;return!!((r=a==null?void 0:a.localMetadata)!=null&&r.id)},QT=(a,r=[])=>a.type==="file"||!!(a.mime_type&&r.indexOf(a.mime_type)===-1&&a.type!=="video"),cw=a=>a.type==="image"&&!VT(a),JT=a=>cw(a)&&iw(a),XT=a=>a.type==="audio",KT=a=>a.type==="voiceRecording",eP=(a,r=[])=>a.type==="video"||!!(a.mime_type&&r.indexOf(a.mime_type)!==-1),tP=a=>XT(a)||QT(a)||cw(a)||eP(a)||KT(a),Wm=a=>!!a.lastModified&&!("uri"in a),aP=a=>a==null||typeof a!="object"?!1:typeof FileList<"u"&&a instanceof FileList||"item"in a&&"length"in a&&!Array.isArray(a),nP=a=>a instanceof Blob&&!(a instanceof File),xi=a=>a!==null&&typeof a=="object"&&!Wm(a)&&!nP(a)&&typeof a.name=="string"&&typeof a.uri=="string"&&typeof a.size=="number"&&typeof a.type=="string",m2=({blobsArray:a,fileName:r,mimeType:t})=>{const n=new Blob(a,{type:t});return new File([n],r,{type:n.type})},rP=a=>{const r=a.match(/\/([^/;]+)/);return r==null?void 0:r[1]},p2=a=>{const r=rP(a);return`file_${new Date().toISOString()}${r?"."+r:""}`},ad=a=>{const r=a.type;return r.startsWith("image/")&&!r.endsWith(".photoshop")},oP=a=>a.startsWith("image/")&&!a.endsWith(".photoshop")?"image":a.includes("video/")?"video":a.includes("audio/")?"audio":"file",f2=a=>{if(!a)return null;if(iw(a))return a;const{localMetadata:r,...t}=a;return{localMetadata:{...r??{},id:(r==null?void 0:r.id)||eo()},...t}},dw=a=>typeof a=="function",ir=class{constructor(a){this.value=a,this.handlerSet=new Set,this.next=r=>{const t=dw(r)?r(this.value):r;if(t===this.value)return;const n=this.value;this.value=t,this.handlerSet.forEach(o=>o(this.value,n))},this.partialNext=r=>this.next(t=>({...t,...r})),this.getLatestValue=()=>this.value,this.subscribe=r=>(r(this.value,void 0),this.handlerSet.add(r),()=>{this.handlerSet.delete(r)}),this.subscribeWithSelector=(r,t)=>{let n;const o=i=>{const c=r(i);let u=typeof n>"u";for(const g in n)if(n[g]!==c[g]){u=!0;break}if(!u)return;const m=n;n=c,t(c,m)};return this.subscribe(o)}}},Ds=a=>{if(!a||typeof a!="object"||Array.isArray(a))return!1;const r=Object.getPrototypeOf(a);return r===null||r===Object.prototype?!1:a.constructor&&a.constructor!==Object},S0=(a,r,t=new Set,n=new WeakSet,o=new WeakSet)=>{if(a===r)return!0;if(a==null||r==null)return!1;const i=typeof a;if(i!==typeof r)return!1;if(i!=="object")return a!==a&&r!==r?!0:a===r;const u=a,m=r;if(n.has(u)||o.has(m))return n.has(u)&&o.has(m);if(n.add(u),o.add(m),a instanceof Date&&r instanceof Date)return n.delete(u),o.delete(m),a.getTime()===r.getTime();if(a instanceof RegExp&&r instanceof RegExp)return n.delete(u),o.delete(m),a.toString()===r.toString();if(Ds(a)||Ds(r))return n.delete(u),o.delete(m),!1;const g=Array.isArray(a),f=Array.isArray(r);if(g!==f)return n.delete(u),o.delete(m),!1;if(g&&f){const k=a,E=r;if(k.length!==E.length)return n.delete(u),o.delete(m),!1;const I=[a,r];if(t.has(I))return n.delete(u),o.delete(m),!0;t.add(I);for(let M=0;M<k.length;M++)if(!S0(k[M],E[M],t,n,o))return t.delete(I),n.delete(u),o.delete(m),!1;return t.delete(I),n.delete(u),o.delete(m),!0}const y=a,v=r,S=Object.keys(y),w=Object.keys(v);if(S.length!==w.length)return n.delete(u),o.delete(m),!1;for(const k of w)if(!Object.prototype.hasOwnProperty.call(y,k))return n.delete(u),o.delete(m),!1;const x=[a,r];if(t.has(x))return n.delete(u),o.delete(m),!0;t.add(x);for(const k of S)if(!S0(y[k],v[k],t,n,o))return t.delete(x),n.delete(u),o.delete(m),!1;return t.delete(x),n.delete(u),o.delete(m),!0};function lP(a,r){const t={children:{}};return uw(a,r,t),vy(t)}function uw(a,r,t,n,o=new Set,i=new Set){if(S0(a,r,new Set(o)))return;if(a==null){n!==void 0&&(t.children[String(n)]={type:"added",value:r,children:{}});return}if(typeof a=="object"&&a!==null){if(i.has(a)){n!==void 0&&(t.children[String(n)]={type:"circular",value:r,oldValue:a,children:{}});return}i.add(a)}if(typeof a!="object"||typeof r!="object"||a===null||r===null||Array.isArray(a)!==Array.isArray(r)||Ds(a)||Ds(r)){n!==void 0&&(t.children[String(n)]={type:"updated",value:r,oldValue:a,children:{}}),typeof a=="object"&&a!==null&&i.delete(a);return}const u=a,m=r,g=n!==void 0?{type:"updated",children:{},oldValue:a,value:r}:t;n!==void 0&&(t.children[String(n)]=g);const f=[a,r];if(o.has(f)){typeof a=="object"&&a!==null&&i.delete(a);return}o.add(f);const y=new Set([...Object.keys(u),...Object.getOwnPropertySymbols(u),...Object.keys(m),...Object.getOwnPropertySymbols(m)]);for(const v of y){const S=u[v],w=m[v];if(v in m){if(!(v in u)){g.children[String(v)]={type:"added",value:w,children:{}};continue}uw(S,w,g,v,o,i)}}o.delete(f),typeof a=="object"&&a!==null&&i.delete(a)}function mw(a={}){const{trackDiff:r=!1}=a;return function({target:n,source:o,customizer:i}){const c=Array.isArray(o)?o:[o],u=r?structuredClone(n):void 0;function m(k,E,I,M,N,_){const P=i==null?void 0:i(k,E,I,M,N,_);return P!==void 0?(Object.defineProperty(M,I,{value:P,enumerable:!0,writable:!0,configurable:!0}),!0):!1}function g(k,E){if(k&&typeof k=="object"){const I=Ds(k),M=Ds(E);return I||M?M?E:k:Array.isArray(k)?[...k]:{...k}}return Array.isArray(E)?[]:{}}function f(k,E,I,M,N){const _=E[I],P=k[I];if(!m(P,_,I,k,E,M))if(_&&typeof _=="object"){if(!M.has(_)){const B=g(P,_);if(Object.defineProperty(k,I,{value:B,enumerable:!0,writable:!0,configurable:!0}),Ds(B))return;N.push({target:B,source:_,sourceKey:I,parentTarget:k})}}else _!==void 0&&(k[I]=_)}function y(k,E,I,M){const N=[...Object.keys(E),...Object.getOwnPropertySymbols(E)];for(const _ of N)f(k,E,_,I,M)}function v({target:k,source:E,sourceKey:I,parentTarget:M},N,_){if(N.has(E)){r&&I&&M&&Object.defineProperty(M,I,{value:k,enumerable:!0,writable:!0,configurable:!0});return}!N.has(k)&&!N.has(E)&&(N.add(k),N.add(E),y(k,E,N,_),N.delete(E),N.delete(k))}function S(k,E,I=new Set){if(I.has(k)||I.has(E))return{...k};const M={...k},N=[];for(I.add(M),I.add(E),y(M,E,I,N);N.length;)v(N.pop(),I,N);return I.delete(E),I.delete(M),M}const w=c.reduce((k,E)=>S(k,E),{...n}),x=r&&u?lP(u,w):null;return{result:w,diff:x}}}function vy(a){const r={};let t=!1;for(const n in a.children){const o=vy(a.children[n]);o&&(r[n]=o,t=!0)}return a.type||t?{...a,children:r}:null}function sp(a,r,t){return mw()({target:a,source:r,customizer:t}).result}function pw(a,r,t){const n=mw({trackDiff:!0}),{result:o,diff:i}=n({target:a,source:r,customizer:t});return{result:o,diff:vy(i??{children:{}})||{children:{}}}}var g2=({message:a})=>{var r;return{attachments:(r=(a==null?void 0:a.attachments)??[])==null?void 0:r.filter(({og_scrape_url:t})=>!t).map(t=>{const n=tP(t)?{id:eo(),uploadState:"finished"}:{id:eo()};return{...t,localMetadata:n}})}},sP=class{constructor({composer:a,message:r}){this.setCustomUploadFn=t=>{this.composer.updateConfig({attachments:{doUploadRequest:t}})},this.initState=({message:t}={})=>{this.state.next(g2({message:t}))},this.getAttachmentIndex=t=>{const n=this.attachmentsById;return this.attachments.indexOf(n[t])},this.prepareAttachmentUpdate=t=>{const n=this.attachments,o=[...this.attachments],i=this.getAttachmentIndex(t.localMetadata.id);if(i===-1)return null;const c=pw(n[i],t);if(c.diff&&Object.keys(c.diff.children).length){const m=f2(c.result);if(m)return o.splice(i,1,m),o}return null},this.updateAttachment=t=>{const n=this.prepareAttachmentUpdate(t);n&&this.state.partialNext({attachments:n})},this.upsertAttachments=t=>{if(!t.length)return;let n=[...this.attachments],o=!1;t.forEach(i=>{const c=this.prepareAttachmentUpdate(i);if(c)n=c,o=!0;else{const u=f2(i);u&&(n.push(u),o=!0)}}),o&&this.state.partialNext({attachments:n})},this.removeAttachments=t=>{this.state.partialNext({attachments:this.attachments.filter(n=>{var o;return!t.includes((o=n.localMetadata)==null?void 0:o.id)})})},this.getUploadConfigCheck=async t=>{var S,w;const n=this.channel.getClient();let o;n.appSettingsPromise?o=await n.appSettingsPromise:o=await n.getAppSettings();const i=ad(t)?(S=o==null?void 0:o.app)==null?void 0:S.image_upload_config:(w=o==null?void 0:o.app)==null?void 0:w.file_upload_config;if(!i)return{uploadBlocked:!1};const{allowed_file_extensions:c,allowed_mime_types:u,blocked_file_extensions:m,blocked_mime_types:g,size_limit:f}=i,y=f||ET,v=t.type;if(Wm(t)||xi(t)){if(c!=null&&c.length&&!c.some(x=>t.name.toLowerCase().endsWith(x.toLowerCase())))return{uploadBlocked:!0,reason:"allowed_file_extensions"};if(m!=null&&m.length&&m.some(x=>t.name.toLowerCase().endsWith(x.toLowerCase())))return{uploadBlocked:!0,reason:"blocked_file_extensions"}}return u!=null&&u.length&&!u.some(x=>x.toLowerCase()===(v==null?void 0:v.toLowerCase()))?{uploadBlocked:!0,reason:"allowed_mime_types"}:g!=null&&g.length&&g.some(x=>x.toLowerCase()===(v==null?void 0:v.toLowerCase()))?{uploadBlocked:!0,reason:"blocked_mime_types"}:t.size&&t.size>y?{uploadBlocked:!0,reason:"size_limit"}:{uploadBlocked:!1}},this.fileToLocalUploadAttachment=async t=>{var c;const n=xi(t)||Wm(t)?t:m2({blobsArray:[t],fileName:p2(t.type),mimeType:t.type}),o=await this.getUploadConfigCheck(n),i={file_size:n.size,mime_type:n.type,localMetadata:{file:n,id:eo(),uploadPermissionCheck:o,uploadState:o.uploadBlocked?"blocked":"pending"},type:oP(n.type)};return i[ad(n)?"fallback":"title"]=n.name,ad(n)&&(i.localMetadata.previewUri=xi(t)?t.uri:(c=URL.createObjectURL)==null?void 0:c.call(URL,t),xi(t)&&t.height&&t.width&&(i.original_height=t.height,i.original_width=t.width)),xi(t)&&t.thumb_url&&(i.thumb_url=t.thumb_url),i},this.ensureLocalUploadAttachment=async t=>{var o;if(!((o=t.localMetadata)!=null&&o.file)||!t.localMetadata.id){this.client.notifications.addError({message:"File is required for upload attachment",origin:{emitter:"AttachmentManager",context:{attachment:t}}});return}if(!this.fileUploadFilter(t))return;const n=await this.fileToLocalUploadAttachment(t.localMetadata.file);return t.localMetadata.id&&(n.localMetadata.id=t.localMetadata.id),n},this.doDefaultUploadRequest=async t=>{if(xi(t))return this.channel[ad(t)?"sendImage":"sendFile"](t.uri,t.name,t.type);const n=Wm(t)?t:m2({blobsArray:[t],fileName:p2(t.type),mimeType:t.type}),{duration:o,...i}=await this.channel[ad(t)?"sendImage":"sendFile"](n);return i},this.doUploadRequest=async t=>{const n=this.config.doUploadRequest;return n?await n(t):this.doDefaultUploadRequest(t)},this.uploadAttachment=async t=>{if(!this.isUploadEnabled)return;const n=await this.ensureLocalUploadAttachment(t);if(typeof n>"u")return;if(n.localMetadata.uploadState==="blocked")return this.upsertAttachments([n]),this.client.notifications.addError({message:"Error uploading attachment",origin:{emitter:"AttachmentManager",context:{attachment:t}}}),n;this.upsertAttachments([{...t,localMetadata:{...t.localMetadata,uploadState:"uploading"}}]);let o;try{o=await this.doUploadRequest(n.localMetadata.file)}catch(c){let u={message:"Error uploading attachment",name:"Error"};typeof c.message=="string"?u=c:typeof c=="object"&&(u=Object.assign(u,c)),this.client.notifications.addError({message:u.message,origin:{emitter:"AttachmentManager",context:{attachment:t}}});const m={...t,localMetadata:{...t.localMetadata,uploadState:"failed"}};return this.updateAttachment(m),m}if(!o){this.removeAttachments([t.localMetadata.id]);return}const i={...t,localMetadata:{...t.localMetadata,uploadState:"finished"}};return JT(i)?(i.localMetadata.previewUri&&(URL.revokeObjectURL(i.localMetadata.previewUri),delete i.localMetadata.previewUri),i.image_url=o.file):i.asset_url=o.file,o.thumb_url&&(i.thumb_url=o.thumb_url),this.updateAttachment(i),i},this.uploadFiles=async t=>{if(!this.isUploadEnabled)return;const n=aP(t)?Array.from(t):t,o=await Promise.all(n.map(this.fileToLocalUploadAttachment));return Promise.all(o.filter(this.fileUploadFilter).slice(0,this.availableUploadSlots).map(this.uploadAttachment))},this.composer=a,this.state=new ir(g2({message:r})),this.attachmentsByIdGetterCache={attachmentsById:{},attachments:[]}}get attachmentsById(){const{attachments:a}=this.state.getLatestValue();return a!==this.attachmentsByIdGetterCache.attachments&&(this.attachmentsByIdGetterCache.attachments=a,this.attachmentsByIdGetterCache.attachmentsById=a.reduce((r,t)=>{var n;return t.localMetadata.id&&(r[n=t.localMetadata.id]??(r[n]=t)),r},{})),this.attachmentsByIdGetterCache.attachmentsById}get client(){return this.composer.client}get channel(){return this.composer.channel}get config(){return this.composer.config.attachments}get acceptedFiles(){return this.config.acceptedFiles}set acceptedFiles(a){this.composer.updateConfig({attachments:{acceptedFiles:a}})}get fileUploadFilter(){return this.config.fileUploadFilter}set fileUploadFilter(a){this.composer.updateConfig({attachments:{fileUploadFilter:a}})}get maxNumberOfFilesPerMessage(){return this.config.maxNumberOfFilesPerMessage}set maxNumberOfFilesPerMessage(a){a!==this.maxNumberOfFilesPerMessage&&this.composer.updateConfig({attachments:{maxNumberOfFilesPerMessage:a}})}get attachments(){return this.state.getLatestValue().attachments}get hasUploadPermission(){var a,r;return!!((r=(a=this.channel.data)==null?void 0:a.own_capabilities)!=null&&r.includes("upload-file"))}get isUploadEnabled(){return this.hasUploadPermission&&this.availableUploadSlots>0}get successfulUploads(){return this.getUploadsByState("finished")}get successfulUploadsCount(){return this.successfulUploads.length}get uploadsInProgressCount(){return this.getUploadsByState("uploading").length}get failedUploadsCount(){return this.getUploadsByState("failed").length}get blockedUploadsCount(){return this.getUploadsByState("blocked").length}get pendingUploadsCount(){return this.getUploadsByState("pending").length}get availableUploadSlots(){return this.config.maxNumberOfFilesPerMessage-this.successfulUploadsCount-this.uploadsInProgressCount}getUploadsByState(a){return Object.values(this.attachments).filter(({localMetadata:r})=>r.uploadState===a)}},iP="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",cP="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",qi=(a,r)=>{for(const t in r)a[t]=r[t];return a},C0="numeric",N0="ascii",_0="alpha",hd="asciinumeric",pd="alphanumeric",k0="domain",fw="emoji",dP="scheme",uP="slashscheme",Rh="whitespace";function mP(a,r){return a in r||(r[a]=[]),r[a]}function _s(a,r,t){r[C0]&&(r[hd]=!0,r[pd]=!0),r[N0]&&(r[hd]=!0,r[_0]=!0),r[hd]&&(r[pd]=!0),r[_0]&&(r[pd]=!0),r[pd]&&(r[k0]=!0),r[fw]&&(r[k0]=!0);for(const n in r){const o=mP(n,t);o.indexOf(a)<0&&o.push(a)}}function pP(a,r){const t={};for(const n in r)r[n].indexOf(a)>=0&&(t[n]=!0);return t}function Mr(a=null){this.j={},this.jr=[],this.jd=null,this.t=a}Mr.groups={};Mr.prototype={accepts(){return!!this.t},go(a){const r=this,t=r.j[a];if(t)return t;for(let n=0;n<r.jr.length;n++){const o=r.jr[n][0],i=r.jr[n][1];if(i&&o.test(a))return i}return r.jd},has(a,r=!1){return r?a in this.j:!!this.go(a)},ta(a,r,t,n){for(let o=0;o<a.length;o++)this.tt(a[o],r,t,n)},tr(a,r,t,n){n=n||Mr.groups;let o;return r&&r.j?o=r:(o=new Mr(r),t&&n&&_s(r,t,n)),this.jr.push([a,o]),o},ts(a,r,t,n){let o=this;const i=a.length;if(!i)return o;for(let c=0;c<i-1;c++)o=o.tt(a[c]);return o.tt(a[i-1],r,t,n)},tt(a,r,t,n){n=n||Mr.groups;const o=this;if(r&&r.j)return o.j[a]=r,r;const i=r;let c,u=o.go(a);if(u?(c=new Mr,qi(c.j,u.j),c.jr.push.apply(c.jr,u.jr),c.jd=u.jd,c.t=u.t):c=new Mr,i){if(n)if(c.t&&typeof c.t=="string"){const m=qi(pP(c.t,n),t);_s(i,m,n)}else t&&_s(i,t,n);c.t=i}return o.j[a]=c,c}};var qt=(a,r,t,n,o)=>a.ta(r,t,n,o),nn=(a,r,t,n,o)=>a.tr(r,t,n,o),h2=(a,r,t,n,o)=>a.ts(r,t,n,o),Ye=(a,r,t,n,o)=>a.tt(r,t,n,o),el="WORD",I0="UWORD",gw="ASCIINUMERICAL",hw="ALPHANUMERICAL",Pd="LOCALHOST",M0="TLD",A0="UTLD",Um="SCHEME",Ci="SLASH_SCHEME",Ey="NUM",D0="WS",xy="NL",yd="OPENBRACE",bd="CLOSEBRACE",ip="OPENBRACKET",cp="CLOSEBRACKET",dp="OPENPAREN",up="CLOSEPAREN",mp="OPENANGLEBRACKET",pp="CLOSEANGLEBRACKET",fp="FULLWIDTHLEFTPAREN",gp="FULLWIDTHRIGHTPAREN",hp="LEFTCORNERBRACKET",yp="RIGHTCORNERBRACKET",bp="LEFTWHITECORNERBRACKET",vp="RIGHTWHITECORNERBRACKET",Ep="FULLWIDTHLESSTHAN",xp="FULLWIDTHGREATERTHAN",wp="AMPERSAND",wy="APOSTROPHE",Sp="ASTERISK",Yl="AT",Cp="BACKSLASH",Np="BACKTICK",_p="CARET",ql="COLON",Sy="COMMA",kp="DOLLAR",Eo="DOT",Ip="EQUALS",Cy="EXCLAMATION",Hr="HYPHEN",vd="PERCENT",Mp="PIPE",Ap="PLUS",Dp="POUND",Ed="QUERY",Ny="QUOTE",yw="FULLWIDTHMIDDLEDOT",_y="SEMI",xo="SLASH",xd="TILDE",Rp="UNDERSCORE",bw="EMOJI",Tp="SYM",vw=Object.freeze({__proto__:null,WORD:el,UWORD:I0,ASCIINUMERICAL:gw,ALPHANUMERICAL:hw,LOCALHOST:Pd,TLD:M0,UTLD:A0,SCHEME:Um,SLASH_SCHEME:Ci,NUM:Ey,WS:D0,NL:xy,OPENBRACE:yd,CLOSEBRACE:bd,OPENBRACKET:ip,CLOSEBRACKET:cp,OPENPAREN:dp,CLOSEPAREN:up,OPENANGLEBRACKET:mp,CLOSEANGLEBRACKET:pp,FULLWIDTHLEFTPAREN:fp,FULLWIDTHRIGHTPAREN:gp,LEFTCORNERBRACKET:hp,RIGHTCORNERBRACKET:yp,LEFTWHITECORNERBRACKET:bp,RIGHTWHITECORNERBRACKET:vp,FULLWIDTHLESSTHAN:Ep,FULLWIDTHGREATERTHAN:xp,AMPERSAND:wp,APOSTROPHE:wy,ASTERISK:Sp,AT:Yl,BACKSLASH:Cp,BACKTICK:Np,CARET:_p,COLON:ql,COMMA:Sy,DOLLAR:kp,DOT:Eo,EQUALS:Ip,EXCLAMATION:Cy,HYPHEN:Hr,PERCENT:vd,PIPE:Mp,PLUS:Ap,POUND:Dp,QUERY:Ed,QUOTE:Ny,FULLWIDTHMIDDLEDOT:yw,SEMI:_y,SLASH:xo,TILDE:xd,UNDERSCORE:Rp,EMOJI:bw,SYM:Tp}),Jo=/[a-z]/,nd=new RegExp("\\p{L}","u"),Th=new RegExp("\\p{Emoji}","u"),Xo=/\d/,Ph=/\s/,y2="\r",Lh=`
`,fP="️",gP="‍",Bh="￼",xm=null,wm=null;function hP(a=[]){const r={};Mr.groups=r;const t=new Mr;xm==null&&(xm=b2(iP)),wm==null&&(wm=b2(cP)),Ye(t,"'",wy),Ye(t,"{",yd),Ye(t,"}",bd),Ye(t,"[",ip),Ye(t,"]",cp),Ye(t,"(",dp),Ye(t,")",up),Ye(t,"<",mp),Ye(t,">",pp),Ye(t,"（",fp),Ye(t,"）",gp),Ye(t,"「",hp),Ye(t,"」",yp),Ye(t,"『",bp),Ye(t,"』",vp),Ye(t,"＜",Ep),Ye(t,"＞",xp),Ye(t,"&",wp),Ye(t,"*",Sp),Ye(t,"@",Yl),Ye(t,"`",Np),Ye(t,"^",_p),Ye(t,":",ql),Ye(t,",",Sy),Ye(t,"$",kp),Ye(t,".",Eo),Ye(t,"=",Ip),Ye(t,"!",Cy),Ye(t,"-",Hr),Ye(t,"%",vd),Ye(t,"|",Mp),Ye(t,"+",Ap),Ye(t,"#",Dp),Ye(t,"?",Ed),Ye(t,'"',Ny),Ye(t,"/",xo),Ye(t,";",_y),Ye(t,"~",xd),Ye(t,"_",Rp),Ye(t,"\\",Cp),Ye(t,"・",yw);const n=nn(t,Xo,Ey,{[C0]:!0});nn(n,Xo,n);const o=nn(n,Jo,gw,{[hd]:!0}),i=nn(n,nd,hw,{[pd]:!0}),c=nn(t,Jo,el,{[N0]:!0});nn(c,Xo,o),nn(c,Jo,c),nn(o,Xo,o),nn(o,Jo,o);const u=nn(t,nd,I0,{[_0]:!0});nn(u,Jo),nn(u,Xo,i),nn(u,nd,u),nn(i,Xo,i),nn(i,Jo),nn(i,nd,i);const m=Ye(t,Lh,xy,{[Rh]:!0}),g=Ye(t,y2,D0,{[Rh]:!0}),f=nn(t,Ph,D0,{[Rh]:!0});Ye(t,Bh,f),Ye(g,Lh,m),Ye(g,Bh,f),nn(g,Ph,f),Ye(f,y2),Ye(f,Lh),nn(f,Ph,f),Ye(f,Bh,f);const y=nn(t,Th,bw,{[fw]:!0});Ye(y,"#"),nn(y,Th,y),Ye(y,fP,y);const v=Ye(y,gP);Ye(v,"#"),nn(v,Th,y);const S=[[Jo,c],[Xo,o]],w=[[Jo,null],[nd,u],[Xo,i]];for(let x=0;x<xm.length;x++)Ol(t,xm[x],M0,el,S);for(let x=0;x<wm.length;x++)Ol(t,wm[x],A0,I0,w);_s(M0,{tld:!0,ascii:!0},r),_s(A0,{utld:!0,alpha:!0},r),Ol(t,"file",Um,el,S),Ol(t,"mailto",Um,el,S),Ol(t,"http",Ci,el,S),Ol(t,"https",Ci,el,S),Ol(t,"ftp",Ci,el,S),Ol(t,"ftps",Ci,el,S),_s(Um,{scheme:!0,ascii:!0},r),_s(Ci,{slashscheme:!0,ascii:!0},r),a=a.sort((x,k)=>x[0]>k[0]?1:-1);for(let x=0;x<a.length;x++){const k=a[x][0],I=a[x][1]?{[dP]:!0}:{[uP]:!0};k.indexOf("-")>=0?I[k0]=!0:Jo.test(k)?Xo.test(k)?I[hd]=!0:I[N0]=!0:I[C0]=!0,h2(t,k,k,I)}return h2(t,"localhost",Pd,{ascii:!0}),t.jd=new Mr(Tp),{start:t,tokens:qi({groups:r},vw)}}function Ew(a,r){const t=yP(r.replace(/[A-Z]/g,u=>u.toLowerCase())),n=t.length,o=[];let i=0,c=0;for(;c<n;){let u=a,m=null,g=0,f=null,y=-1,v=-1;for(;c<n&&(m=u.go(t[c]));)u=m,u.accepts()?(y=0,v=0,f=u):y>=0&&(y+=t[c].length,v++),g+=t[c].length,i+=t[c].length,c++;i-=y,c-=v,g-=y,o.push({t:f.t,v:r.slice(i-g,i),s:i-g,e:i})}return o}function yP(a){const r=[],t=a.length;let n=0;for(;n<t;){let o=a.charCodeAt(n),i,c=o<55296||o>56319||n+1===t||(i=a.charCodeAt(n+1))<56320||i>57343?a[n]:a.slice(n,n+2);r.push(c),n+=c.length}return r}function Ol(a,r,t,n,o){let i;const c=r.length;for(let u=0;u<c-1;u++){const m=r[u];a.j[m]?i=a.j[m]:(i=new Mr(n),i.jr=o.slice(),a.j[m]=i),a=i}return i=new Mr(t),i.jr=o.slice(),a.j[r[c-1]]=i,i}function b2(a){const r=[],t=[];let n=0,o="0123456789";for(;n<a.length;){let i=0;for(;o.indexOf(a[n+i])>=0;)i++;if(i>0){r.push(t.join(""));for(let c=parseInt(a.substring(n,n+i),10);c>0;c--)t.pop();n+=i}else t.push(a[n]),n++}return r}var Ld={defaultProtocol:"http",events:null,format:v2,formatHref:v2,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function ky(a,r=null){let t=qi({},Ld);a&&(t=qi(t,a instanceof ky?a.o:a));const n=t.ignoreTags,o=[];for(let i=0;i<n.length;i++)o.push(n[i].toUpperCase());this.o=t,r&&(this.defaultRender=r),this.ignoreTags=o}ky.prototype={o:Ld,ignoreTags:[],defaultRender(a){return a},check(a){return this.get("validate",a.toString(),a)},get(a,r,t){const n=r!=null;let o=this.o[a];return o&&(typeof o=="object"?(o=t.t in o?o[t.t]:Ld[a],typeof o=="function"&&n&&(o=o(r,t))):typeof o=="function"&&n&&(o=o(r,t.t,t)),o)},getObj(a,r,t){let n=this.o[a];return typeof n=="function"&&r!=null&&(n=n(r,t.t,t)),n},render(a){const r=a.render(this);return(this.get("render",null,a)||this.defaultRender)(r,a.t,a)}};function v2(a){return a}function xw(a,r){this.t="token",this.v=a,this.tk=r}xw.prototype={isLink:!1,toString(){return this.v},toHref(a){return this.toString()},toFormattedString(a){const r=this.toString(),t=a.get("truncate",r,this),n=a.get("format",r,this);return t&&n.length>t?n.substring(0,t)+"…":n},toFormattedHref(a){return a.get("formatHref",this.toHref(a.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(a=Ld.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(a),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(a){return{type:this.t,value:this.toFormattedString(a),isLink:this.isLink,href:this.toFormattedHref(a),start:this.startIndex(),end:this.endIndex()}},validate(a){return a.get("validate",this.toString(),this)},render(a){const r=this,t=this.toHref(a.get("defaultProtocol")),n=a.get("formatHref",t,this),o=a.get("tagName",t,r),i=this.toFormattedString(a),c={},u=a.get("className",t,r),m=a.get("target",t,r),g=a.get("rel",t,r),f=a.getObj("attributes",t,r),y=a.getObj("events",t,r);return c.href=n,u&&(c.class=u),m&&(c.target=m),g&&(c.rel=g),f&&qi(c,f),{tagName:o,attributes:c,content:i,eventListeners:y}}};function sf(a,r){class t extends xw{constructor(o,i){super(o,i),this.t=a}}for(const n in r)t.prototype[n]=r[n];return t.t=a,t}var E2=sf("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),x2=sf("text"),bP=sf("nl"),Sm=sf("url",{isLink:!0,toHref(a=Ld.defaultProtocol){return this.hasProtocol()?this.v:`${a}://${this.v}`},hasProtocol(){const a=this.tk;return a.length>=2&&a[0].t!==Pd&&a[1].t===ql}}),Ur=a=>new Mr(a);function vP({groups:a}){const r=a.domain.concat([wp,Sp,Yl,Cp,Np,_p,kp,Ip,Hr,Ey,vd,Mp,Ap,Dp,xo,Tp,xd,Rp]),t=[ql,Sy,Eo,Cy,vd,Ed,Ny,_y,mp,pp,yd,bd,cp,ip,dp,up,fp,gp,hp,yp,bp,vp,Ep,xp],n=[wp,wy,Sp,Cp,Np,_p,kp,Ip,Hr,yd,bd,vd,Mp,Ap,Dp,Ed,xo,Tp,xd,Rp],o=Ur(),i=Ye(o,xd);qt(i,n,i),qt(i,a.domain,i);const c=Ur(),u=Ur(),m=Ur();qt(o,a.domain,c),qt(o,a.scheme,u),qt(o,a.slashscheme,m),qt(c,n,i),qt(c,a.domain,c);const g=Ye(c,Yl);Ye(i,Yl,g),Ye(u,Yl,g),Ye(m,Yl,g);const f=Ye(i,Eo);qt(f,n,i),qt(f,a.domain,i);const y=Ur();qt(g,a.domain,y),qt(y,a.domain,y);const v=Ye(y,Eo);qt(v,a.domain,y);const S=Ur(E2);qt(v,a.tld,S),qt(v,a.utld,S),Ye(g,Pd,S);const w=Ye(y,Hr);Ye(w,Hr,w),qt(w,a.domain,y),qt(S,a.domain,y),Ye(S,Eo,v),Ye(S,Hr,w);const x=Ye(S,ql);qt(x,a.numeric,E2);const k=Ye(c,Hr),E=Ye(c,Eo);Ye(k,Hr,k),qt(k,a.domain,c),qt(E,n,i),qt(E,a.domain,c);const I=Ur(Sm);qt(E,a.tld,I),qt(E,a.utld,I),qt(I,a.domain,c),qt(I,n,i),Ye(I,Eo,E),Ye(I,Hr,k),Ye(I,Yl,g);const M=Ye(I,ql),N=Ur(Sm);qt(M,a.numeric,N);const _=Ur(Sm),P=Ur();qt(_,r,_),qt(_,t,P),qt(P,r,_),qt(P,t,P),Ye(I,xo,_),Ye(N,xo,_);const B=Ye(u,ql),R=Ye(m,ql),W=Ye(R,xo),L=Ye(W,xo);qt(u,a.domain,c),Ye(u,Eo,E),Ye(u,Hr,k),qt(m,a.domain,c),Ye(m,Eo,E),Ye(m,Hr,k),qt(B,a.domain,_),Ye(B,xo,_),Ye(B,Ed,_),qt(L,a.domain,_),qt(L,r,_),Ye(L,xo,_);const F=[[yd,bd],[ip,cp],[dp,up],[mp,pp],[fp,gp],[hp,yp],[bp,vp],[Ep,xp]];for(let j=0;j<F.length;j++){const[J,Y]=F[j],D=Ye(_,J);Ye(P,J,D),Ye(D,Y,_);const A=Ur(Sm);qt(D,r,A);const U=Ur();qt(D,t),qt(A,r,A),qt(A,t,U),qt(U,r,A),qt(U,t,U),Ye(A,Y,_),Ye(U,Y,_)}return Ye(o,Pd,I),Ye(o,xy,bP),{start:o,tokens:vw}}function EP(a,r,t){let n=t.length,o=0,i=[],c=[];for(;o<n;){let u=a,m=null,g=null,f=0,y=null,v=-1;for(;o<n&&!(m=u.go(t[o].t));)c.push(t[o++]);for(;o<n&&(g=m||u.go(t[o].t));)m=null,u=g,u.accepts()?(v=0,y=u):v>=0&&v++,o++,f++;if(v<0)o-=f,o<n&&(c.push(t[o]),o++);else{c.length>0&&(i.push(zh(x2,r,c)),c=[]),o-=v,f-=v;const S=y.t,w=t.slice(o-f,o);i.push(zh(S,r,w))}}return c.length>0&&i.push(zh(x2,r,c)),i}function zh(a,r,t){const n=t[0].s,o=t[t.length-1].e,i=r.slice(n,o);return new a(i,t)}var Jn={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function xP(){Jn.scanner=hP(Jn.customSchemes);for(let a=0;a<Jn.tokenQueue.length;a++)Jn.tokenQueue[a][1]({scanner:Jn.scanner});Jn.parser=vP(Jn.scanner.tokens);for(let a=0;a<Jn.pluginQueue.length;a++)Jn.pluginQueue[a][1]({scanner:Jn.scanner,parser:Jn.parser});return Jn.initialized=!0,Jn}function ww(a){return Jn.initialized||xP(),EP(Jn.parser.start,a,Ew(Jn.scanner.start,a))}ww.scan=Ew;function wP(a,r=null,t=null){if(r&&typeof r=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${r}; must be a string`);t=r,r=null}const n=new ky(t),o=ww(a),i=[];for(let c=0;c<o.length;c++){const u=o[c];u.isLink&&(!r||u.t===r)&&n.check(u)&&i.push(u.toFormattedObject(n))}return i}var SP={debounceURLEnrichmentMs:1500,enabled:!1,findURLFn:a=>wP(a,"url",{defaultProtocol:"https"}).reduce((r,t)=>{try{const n=new URL(t.href);t.isLink&&/^[a-zA-Z0-9-.]+\.[a-zA-Z]{2,}$/.test(n.hostname)&&r.push(t.href)}catch{}return r},[])},CP={acceptedFiles:[],fileUploadFilter:()=>!0,maxNumberOfFilesPerMessage:xT},NP={enabled:!0,publishTypingEvents:!0},_P={attachments:CP,drafts:{enabled:!1},linkPreviews:SP,text:NP},w2=a=>a?{message:{},custom:{}}:{message:{},custom:{}},kP=class{constructor({composer:a,message:r}){this.isMessageDataEqual=(t,n)=>JSON.stringify(t.message)===JSON.stringify(n==null?void 0:n.message),this.initState=({message:t}={})=>{this.state.next(w2({composer:this.composer}))},this.composer=a,this.state=new ir(w2({}))}get customMessageData(){return this.state.getLatestValue().message}get customComposerData(){return this.state.getLatestValue().custom}setMessageData(a){this.state.partialNext({message:{...this.state.getLatestValue().message,...a}})}setCustomData(a){this.state.partialNext({custom:{...this.state.getLatestValue().custom,...a}})}},IP=a=>new Map(a.map(r=>[r.og_scrape_url,r])),S2=({message:a})=>{var r;return a?{previews:((r=a.attachments)==null?void 0:r.reduce((t,n)=>(n.og_scrape_url&&t.set(n.og_scrape_url,{...n,status:"loaded"}),t),new Map))??new Map}:{previews:new Map}},Ws=class xs{constructor({composer:r,message:t}){this.shouldDiscardEnrichQueries=!1,this.initState=({message:n}={})=>{this.state.next(S2({message:this.enabled?n:void 0}))},this._findAndEnrichUrls=async n=>{if(!this.enabled)return;const o=this.config.findURLFn(n);if(this.shouldDiscardEnrichQueries=!o.length,this.shouldDiscardEnrichQueries){this.state.next({previews:new Map});return}const i=new Map(Array.from(this.previews).filter(([u])=>o.includes(u)||o.includes(u+"/"))),c=o.filter(u=>{const m=this.previews;return!(m.get(u)||m.get(u+"/"))}).map(u=>({og_scrape_url:u.trim(),status:"loading"}));c.length&&(this.state.partialNext({previews:new Map([...i,...IP(c)])}),await Promise.all(c.map(async u=>{try{const{duration:m,...g}=await this.client.enrichURL(u.og_scrape_url);if(this.shouldDiscardEnrichQueries)return;this.previews.has(u.og_scrape_url)&&this.updatePreview(u.og_scrape_url,{status:"loaded",...g})}catch{this.previews.has(u.og_scrape_url)&&this.updatePreview(u.og_scrape_url,{status:"failed"})}return u})))},this.cancelURLEnrichment=()=>{this.findAndEnrichUrls.cancel(),this.findAndEnrichUrls.flush()},this.clearPreviews=()=>{const n=this.previews,o=new Map;n.forEach((i,c)=>{xs.previewIsDismissed(i)&&o.set(c,i)}),this.state.partialNext({previews:o})},this.updatePreview=(n,o)=>{var m;if(!n)return;const i=this.previews.get(n),c=o.status??((m=this.previews.get(n))==null?void 0:m.status)??"pending";let u=o;if(i){const g=pw(i,o);if(!g.diff||Object.keys(g.diff).length===0)return;u=g.result}this.state.partialNext({previews:new Map(this.previews).set(n,{...u,og_scrape_url:n,status:c})})},this.dismissPreview=n=>{var i;const o=this.previews.get(n);o&&((i=this.onLinkPreviewDismissed)==null||i.call(this,o),this.updatePreview(n,{status:"dismissed"}))},this.composer=r,this.state=new ir(S2({message:this.enabled?t:void 0})),this.findAndEnrichUrls=x0(this._findAndEnrichUrls.bind(this),this.config.debounceURLEnrichmentMs)}get client(){return this.composer.client}get channel(){return this.composer.channel}get previews(){return this.state.getLatestValue().previews}get loadingPreviews(){return Array.from(this.previews.values()).filter(r=>xs.previewIsLoading(r))}get loadedPreviews(){return Array.from(this.previews.values()).filter(r=>xs.previewIsLoaded(r))}get dismissedPreviews(){return Array.from(this.previews.values()).filter(r=>xs.previewIsDismissed(r))}get failedPreviews(){return Array.from(this.previews.values()).filter(r=>xs.previewIsFailed(r))}get pendingPreviews(){return Array.from(this.previews.values()).filter(r=>xs.previewIsPending(r))}get config(){return this.composer.config.linkPreviews}get debounceURLEnrichmentMs(){return this.config.debounceURLEnrichmentMs}set debounceURLEnrichmentMs(r){this.cancelURLEnrichment(),this.findAndEnrichUrls=x0(this._findAndEnrichUrls.bind(this),this.config.debounceURLEnrichmentMs),this.composer.updateConfig({linkPreviews:{debounceURLEnrichmentMs:r}})}get enabled(){var r;return!!((r=this.channel.getConfig())!=null&&r.url_enrichment)&&this.composer.config.linkPreviews.enabled}set enabled(r){r!==this.enabled&&this.composer.updateConfig({linkPreviews:{enabled:r}})}get findURLFn(){return this.config.findURLFn}set findURLFn(r){this.composer.updateConfig({linkPreviews:{findURLFn:r}})}get onLinkPreviewDismissed(){return this.config.onLinkPreviewDismissed}set onLinkPreviewDismissed(r){this.composer.updateConfig({linkPreviews:{onLinkPreviewDismissed:r}})}};Ws.previewIsLoading=a=>a.status==="loading";Ws.previewIsLoaded=a=>a.status==="loaded";Ws.previewIsDismissed=a=>a.status==="dismissed";Ws.previewIsFailed=a=>a.status==="failed";Ws.previewIsPending=a=>a.status==="pending";Ws.getPreviewData=a=>{const{status:r,...t}=a;return t};var Iy=Ws,MP=AP(DP),R0=new Map;function AP(a){return function(t,n){const{cb:o,onContinued:i}=a(t,n),c=R0.get(t);c==null||c.onContinued();const u=c?c.promise.then(o,o):o();return R0.set(t,{promise:u,onContinued:i}),u}}function DP(a,r){const t=new AbortController;return{cb:()=>t.signal.aborted?Promise.resolve("canceled"):r(t.signal).finally(()=>{t.signal.aborted||R0.delete(a)}),onContinued:()=>t.abort()}}var Vd=class{constructor(){this.middleware=[],this.id=eo()}use(a){return this.middleware=this.middleware.concat(a),this}replace(a){const r=[...this.middleware];return a.forEach(t=>{const n=this.middleware.findIndex(o=>o.id===t.id);n>=0?r.splice(n,1,t):r.push(t)}),this.middleware=r,this}insert({middleware:a,position:r,unique:t}){t&&a.forEach(c=>{const u=this.middleware.findIndex(m=>m.id===c.id);u>=0&&this.middleware.splice(u,1)});const n=r.after||r.before,o=this.middleware.findIndex(c=>c.id===n),i=r.after?o+1:o;return this.middleware.splice(i,0,...a),this}setOrder(a){this.middleware=a.map(r=>this.middleware.find(t=>t.id===r)).filter(Boolean)}async executeMiddlewareChain({eventName:a,initialValue:r}){let t=-1;const n=async(i,c,u)=>{if(i<=t)throw new Error("next() called multiple times");if(t=i,i===this.middleware.length||u&&["complete","discard"].includes(u))return{state:c,status:u};const f=this.middleware[i].handlers[a];return f?await f({state:c,next:x=>n(i+1,x),complete:x=>n(i+1,x,"complete"),discard:()=>n(i+1,c,"discard"),forward:()=>n(i+1,c)}):n(i+1,c,u)},o=await MP(`middleware-execution-${this.id}-${a}`,async i=>{const c=await n(0,r);return i.aborted?"canceled":c});return o==="canceled"?{state:r,status:"discard"}:o}async execute({eventName:a,initialValue:r}){return await this.executeMiddlewareChain({eventName:a,initialValue:r})}},My=/^([2-9]|10)$/,RP=100,C2=a=>!a.trim(),wd={enforce_unique_vote:()=>({max_votes_allowed:void 0}),max_votes_allowed:({data:a,value:r})=>a.enforce_unique_vote&&r?{max_votes_allowed:"Enforce unique vote is enabled"}:!r.match(/^[0-9]+$/)&&r?{max_votes_allowed:"Only numbers are allowed"}:(r==null?void 0:r.length)>1&&!r.match(My)?{max_votes_allowed:"Type a number from 2 to 10"}:{max_votes_allowed:void 0},options:({value:a})=>{const r={},t=new Set;return a.forEach(n=>{const o=n.text.trim();t.has(o)?r[n.id]="Option already exists":t.add(o)}),Object.keys(r).length>0?{options:r}:{options:void 0}}},TP={name:({currentError:a,value:r})=>r&&a?{name:void 0}:{name:typeof a=="string"?a:void 0}},PP={max_votes_allowed:({value:a})=>a&&!a.match(My)?{max_votes_allowed:"Type a number from 2 to 10"}:{max_votes_allowed:void 0},name:({value:a})=>C2(a)?{name:"Question is required"}:{name:void 0},options:a=>{var n;const r=(n=wd.options)==null?void 0:n.call(wd,a),t=(r==null?void 0:r.options)??{};return a.value.forEach((o,i)=>{const c=i===a.value.length-1;C2(o.text)&&!c&&(t[o.id]="Option is empty")}),Object.keys(t).length>0?{options:t}:{options:void 0}}},LP=a=>!Array.isArray(a)&&typeof(a==null?void 0:a.index)=="number"&&typeof(a==null?void 0:a.text)=="string",BP={enforce_unique_vote:({value:a})=>({enforce_unique_vote:a,max_votes_allowed:""}),options:({value:a,data:r})=>{if(Array.isArray(a))return{options:a.map(f=>({id:f.id,text:f.text.trim()}))};const{index:t,text:n}=a,o=r.options||[],i=o&&o.slice(t+1).length>0&&!n,c=o.slice(0,t),u=o.slice(t+1),m=[...c,...i?[]:[{...o[t],text:n}],...u];return o.length<RP&&!m.some(f=>!f.text.trim())&&m.push({id:eo(),text:""}),{options:m}}},zP=({processors:a,validators:r}={})=>{const t=({state:n,validators:o,processors:i})=>{const{previousState:c,targetFields:u}=n;let m;if(!i&&LP(u.options)){const f=[...c.data.options],y=c.data.options[u.options.index];y&&(y.text=u.options.text,f.splice(u.options.index,1,y)),m={...u,options:f}}else i?m=Object.entries(u).reduce((f,[y,v])=>{const S=i[y];return f={...f,...S?S({data:c.data,value:v}):{[y]:v}},f},{}):m=u;const g=Object.keys(u).reduce((f,y)=>{const v=o[y];if(v){const S=v({currentError:c.errors[y],data:c.data,value:m[y]});f={...f,...S}}return f},{});return{newData:m,newErrors:g}};return{id:"stream-io/poll-composer-state-processing",handlers:{handleFieldChange:({state:n,next:o,forward:i})=>{if(!n.targetFields)return i();const{previousState:c,injectedFieldErrors:u}=n,{newData:m,newErrors:g}=t({processors:{...BP,...a==null?void 0:a.handleFieldChange},state:n,validators:{...wd,...TP,...r==null?void 0:r.handleFieldChange}});return o({...n,nextState:{...c,data:{...c.data,...m},errors:{...c.errors,...g,...u}}})},handleFieldBlur:({state:n,next:o,forward:i})=>{if(!n.targetFields)return i();const{previousState:c}=n,{newData:u,newErrors:m}=t({processors:a==null?void 0:a.handleFieldBlur,state:n,validators:{...wd,...PP,...r==null?void 0:r.handleFieldBlur}});return o({...n,nextState:{...c,data:{...c.data,...u},errors:{...c.errors,...m,...n.injectedFieldErrors}}})}}}},OP=a=>({id:"stream-io/poll-composer-composition",handlers:{compose:({discard:r,forward:t})=>a.pollComposer.canCreatePoll?t():r()}}),FP=class extends Vd{constructor({composer:a}){super(),this.use([OP(a)])}},WP=class extends Vd{constructor(){super(),this.use([zP()])}},UP=class extends Error{constructor(a,{code:r,status:t,response:n}){super(a),this.name="ErrorFromResponse",this.code=r,this.response=n,this.status=t}toJSON(){const a=[["status",this.status],["code",this.code]],r=[];for(const[t,n]of a)typeof n<"u"&&n!==null&&r.push(`${t}: ${n}`);return{message:`(${r.join(", ")}) - ${this.message}`,stack:this.stack,name:this.name}}},$P=class{constructor({composer:a}){this.initState=()=>{this.state.next(this.initialState)},this.updateFields=async(r,t)=>{const{state:n,status:o}=await this.stateMiddlewareExecutor.execute({eventName:"handleFieldChange",initialValue:{nextState:{...this.state.getLatestValue()},previousState:{...this.state.getLatestValue()},targetFields:r,injectedFieldErrors:t}});o!=="discard"&&this.state.next(n.nextState)},this.handleFieldBlur=async r=>{const t=await this.stateMiddlewareExecutor.execute({eventName:"handleFieldBlur",initialValue:{nextState:{...this.state.getLatestValue()},previousState:{...this.state.getLatestValue()},targetFields:{[r]:this.state.getLatestValue().data[r]}}});t.status!=="discard"&&this.state.next(t.state.nextState)},this.compose=async()=>{var o;const{data:r,errors:t}=this.state.getLatestValue(),n=await this.compositionMiddlewareExecutor.execute({eventName:"compose",initialValue:{data:{...r,max_votes_allowed:r.max_votes_allowed?parseInt(r.max_votes_allowed):void 0,options:(o=r.options)==null?void 0:o.filter(i=>i.text.trim()).map(i=>({text:i.text}))},errors:t}});if(n.status!=="discard")return n.state},this.composer=a,this.state=new ir(this.initialState),this.compositionMiddlewareExecutor=new FP({composer:a}),this.stateMiddlewareExecutor=new WP}get initialState(){var a;return{data:{allow_answers:!1,allow_user_suggested_options:!1,description:"",enforce_unique_vote:!0,id:eo(),max_votes_allowed:"",name:"",options:[{id:eo(),text:""}],user_id:(a=this.composer.client.user)==null?void 0:a.id,voting_visibility:"public"},errors:{}}}get allow_answers(){return this.state.getLatestValue().data.allow_answers}get allow_user_suggested_options(){return this.state.getLatestValue().data.allow_user_suggested_options}get description(){return this.state.getLatestValue().data.description}get enforce_unique_vote(){return this.state.getLatestValue().data.enforce_unique_vote}get id(){return this.state.getLatestValue().data.id}get max_votes_allowed(){return this.state.getLatestValue().data.max_votes_allowed}get name(){return this.state.getLatestValue().data.name}get options(){return this.state.getLatestValue().data.options}get user_id(){return this.state.getLatestValue().data.user_id}get voting_visibility(){return this.state.getLatestValue().data.voting_visibility}get canCreatePoll(){var c,u;const{data:a,errors:r}=this.state.getLatestValue(),t=a.options.filter(m=>!!m.text).length>0,n=!!a.name,o=parseInt(((u=(c=a.max_votes_allowed)==null?void 0:c.match(My))==null?void 0:u[0])||""),i=a.max_votes_allowed===""||!!o&&(2<=o||o<=10);return t&&n&&i&&Object.values(r).filter(m=>!!m).length===0}},Sw=a=>{const{localMetadata:r,...t}=a;return t},jP=a=>({id:"stream-io/message-composer-middleware/attachments",handlers:{compose:({state:r,next:t,discard:n,forward:o})=>{const{attachmentManager:i}=a;if(!i)return o();if(i.uploadsInProgressCount>0)return a.client.notifications.addWarning({message:"Wait until all attachments have uploaded",origin:{emitter:"MessageComposer",context:{composer:a}}}),n();const c=(r.message.attachments??[]).concat(i.successfulUploads.map(Sw));return c.length?t({...r,localMessage:{...r.localMessage,attachments:c},message:{...r.message,attachments:c}}):o()}}}),HP=a=>({id:"stream-io/message-composer-middleware/draft-attachments",handlers:{compose:({state:r,next:t,forward:n})=>{const{attachmentManager:o}=a;if(!o)return n();const i=o.successfulUploads,c=i.length?(r.draft.attachments??[]).concat(i.map(Sw)):void 0;return t({...r,draft:{...r.draft,attachments:c}})}}}),YP=a=>({id:"stream-io/message-composer-middleware/data-cleanup",handlers:{compose:({state:r,next:t})=>{var i,c,u;const n={type:((i=a.editedMessage)==null?void 0:i.type)??"regular"},o=a.editedMessage?ew(a.editedMessage):void 0;return t({...r,localMessage:Ir({...a.editedMessage,...r.localMessage,...n,user:a.client.user}),message:{...o,...r.message,...n},sendOptions:a.editedMessage&&((c=r.sendOptions)!=null&&c.skip_enrich_url)?{skip_enrich_url:(u=r.sendOptions)==null?void 0:u.skip_enrich_url}:r.sendOptions})}}}),qP=a=>({id:"stream-io/message-composer-middleware/custom-data",handlers:{compose:({state:r,next:t,forward:n})=>{const o=a.customDataManager.customMessageData;return o?t({...r,localMessage:{...r.localMessage,...o},message:{...r.message,...o}}):n()}}}),GP=a=>({id:"stream-io/message-composer-middleware/draft-custom-data",handlers:{compose:({state:r,next:t,forward:n})=>{const o=a.customDataManager.customMessageData;return o?t({...r,draft:{...r.draft,...o}}):n()}}}),ZP=a=>({id:"stream-io/message-composer-middleware/data-validation",handlers:{compose:async({state:r,discard:t,forward:n})=>{var g;const{maxLengthOnSend:o}=a.config.text??{},i=r.message.text??"",c=Ay(i)&&!((g=r.message.attachments)!=null&&g.length)&&!r.message.poll_id,u=typeof o=="number"&&i.length>o,m=a.editedMessage&&!a.lastChangeOriginIsLocal;return c||m||u?await t():await n()}}}),VP=a=>({id:"stream-io/message-composer-middleware/draft-data-validation",handlers:{compose:async({state:r,discard:t,forward:n})=>{var c;const o=!Ay(r.draft.text??"")||((c=r.draft.attachments)==null?void 0:c.length)||r.draft.poll_id||r.draft.quoted_message_id;return a.lastChangeOriginIsLocal&&o?await n():await t()}}}),QP=a=>({id:"stream-io/message-composer-middleware/link-previews",handlers:{compose:({state:r,next:t,forward:n})=>{const{linkPreviewsManager:o}=a;if(!o)return n();o.cancelURLEnrichment();const i=o.loadingPreviews.length>0,c=o.dismissedPreviews.length>0,u=o.loadingPreviews.length>0?[]:o.loadedPreviews.map(y=>Iy.getPreviewData(y)),m=(r.message.attachments??[]).concat(u);if(!m.length)return n();const g={...r.sendOptions};return(!i&&u.length>0||c)&&(g.skip_enrich_url=!0),t({...r,message:{...r.message,attachments:m},localMessage:{...r.localMessage,attachments:m},sendOptions:g})}}}),JP=a=>({id:"stream-io/message-composer-middleware/draft-link-previews",handlers:{compose:({state:r,next:t,forward:n})=>{const{linkPreviewsManager:o}=a;if(!o)return n();o.cancelURLEnrichment();const i=o.loadedPreviews.map(c=>Iy.getPreviewData(c));return i.length?t({...r,draft:{...r.draft,attachments:(r.draft.attachments??[]).concat(i)}}):n()}}}),XP=a=>({id:"stream-io/message-composer-middleware/text-composition",handlers:{compose:({state:r,next:t,forward:n})=>{if(!a.textComposer)return n();const{mentionedUsers:o,text:i}=a.textComposer,c=Array.from(new Set(o.filter(({id:u,name:m})=>i.includes(`@${u}`)||i.includes(`@${m}`))));return!i&&c.length===0?n():t({...r,localMessage:{...r.localMessage,mentioned_users:c,text:i},message:{...r.message,mentioned_users:c.map(u=>u.id),text:i}})}}}),KP=a=>({id:"stream-io/message-composer-middleware/draft-text-composition",handlers:{compose:({state:r,next:t,forward:n})=>{if(!a.textComposer)return n();const{maxLengthOnSend:o}=a.config.text??{},{mentionedUsers:i,text:c}=a.textComposer,u=i.length?Array.from(new Set(i.filter(({id:g,name:f})=>c.includes(`@${g}`)||c.includes(`@${f}`)))):void 0,m=typeof o=="number"&&c.length>o?c.slice(0,o):c;return t({...r,draft:{...r.draft,mentioned_users:u==null?void 0:u.map(g=>g.id),text:m}})}}}),eL=a=>({id:"stream-io/message-composer-middleware/own-state",handlers:{compose:({state:r,next:t})=>{const n={};return a.quotedMessage&&(n.quoted_message_id=a.quotedMessage.id),a.pollId&&(n.poll_id=a.pollId),t({...r,localMessage:{...r.localMessage,...n,quoted_message:a.quotedMessage??void 0},message:{...r.message,...n}})}}}),tL=a=>({id:"stream-io/message-composer-middleware/draft-own-state",handlers:{compose:({state:r,next:t})=>{const n={};return a.quotedMessage&&(n.quoted_message_id=a.quotedMessage.id),a.pollId&&(n.poll_id=a.pollId),t({...r,draft:{...r.draft,...n}})}}}),aL={attachments:[],mentioned_users:[],parent_id:void 0,quoted_message:void 0,text:""},nL=a=>({id:"stream-io/message-composer-middleware/poll-only",handlers:{compose:({state:r,complete:t,forward:n})=>{const o=a.pollId,i=!!a.editedMessage,c=!!a.threadId;return!o||c||i?n():t({...r,localMessage:{...r.localMessage,...aL,poll_id:o},message:{id:r.localMessage.id,poll_id:o}})}}}),rL=class extends Vd{constructor({composer:a}){super(),this.use([nL(a),XP(a),jP(a),QP(a),eL(a),qP(a),ZP(a),YP(a)])}},oL=class extends Vd{constructor({composer:a}){super(),this.use([KP(a),HP(a),JP(a),tL(a),GP(a),VP(a)])}},lL={debounceMs:300,pageSize:10},Cw=class{constructor(a){this.setDebounceOptions=({debounceMs:n})=>{this.searchDebounced=x0(this.executeQuery.bind(this),n)},this.activate=()=>{this.isActive||this.state.partialNext({isActive:!0})},this.deactivate=()=>{this.isActive&&this.state.partialNext({isActive:!1})},this.canExecuteQuery=n=>{const o=typeof n<"u",i=n??this.searchQuery;return!!(this.isActive&&!this.isLoading&&(this.hasNext||o)&&i)},this.search=n=>this.searchDebounced(n);const{debounceMs:r,pageSize:t}={...lL,...a};this.pageSize=t,this.state=new ir(this.initialState),this.setDebounceOptions({debounceMs:r})}get lastQueryError(){return this.state.getLatestValue().lastQueryError}get hasNext(){return this.state.getLatestValue().hasNext}get hasResults(){return Array.isArray(this.state.getLatestValue().items)}get isActive(){return this.state.getLatestValue().isActive}get isLoading(){return this.state.getLatestValue().isLoading}get initialState(){return{hasNext:!0,isActive:!1,isLoading:!1,items:void 0,lastQueryError:void 0,next:void 0,offset:0,searchQuery:""}}get items(){return this.state.getLatestValue().items}get next(){return this.state.getLatestValue().next}get offset(){return this.state.getLatestValue().offset}get searchQuery(){return this.state.getLatestValue().searchQuery}getStateBeforeFirstQuery(a){return{...this.initialState,isActive:this.isActive,isLoading:!0,searchQuery:a}}getStateAfterQuery(a,r){return{...this.state.getLatestValue(),lastQueryError:void 0,...a,isLoading:!1,items:r?a.items:[...this.items??[],...a.items||[]]}}async executeQuery(a){if(!this.canExecuteQuery(a))return;const r=typeof a<"u",t=a??this.searchQuery;r?this.state.next(this.getStateBeforeFirstQuery(a??"")):this.state.partialNext({isLoading:!0});const n={};try{const o=await this.query(t);if(!o)return;const{items:i,next:c}=o;c||c===null?(n.next=c,n.hasNext=!!c):(n.offset=(this.offset??0)+i.length,n.hasNext=i.length===this.pageSize),n.items=await this.filterQueryResults(i)}catch(o){n.lastQueryError=o}finally{this.state.next(this.getStateAfterQuery(n,r))}}cancelScheduledQuery(){this.searchDebounced.cancel()}resetState(){this.state.next(this.initialState)}resetStateAndActivate(){this.resetState(),this.activate()}},Nw=({trigger:a,text:r,isCommand:t=!1,acceptTrailingSpaces:n=!0})=>{const o=`[^\\s${a}]*`,i=r.match(new RegExp(t?`^[${a}]${o}$`:n?`(?!^|\\W)?[${a}]${o}\\s?${o}$`:`(?!^|\\W)?[${a}]${o}$`,"g"));return i&&i[i.length-1].trim()},_w=({insertText:a,selection:r,text:t,trigger:n})=>{const o=t.slice(0,r.end),i=t.slice(r.end),c=o.lastIndexOf(n);return{text:o.slice(0,c)+a+i,selection:{start:c+a.length,end:c+a.length}}};function sL(a){return a.replace(/[-[\]{}()*+?.,/\\^$|#]/g,"\\$&")}var iL=({displayName:a,searchToken:r})=>({tokenizedDisplayName:{token:r,parts:r?a.split(new RegExp(`(${sL(r)})`,"gi")).filter(Boolean):[a]}}),cL=class extends Cw{constructor(a,r){super(r),this.type="commands",this.canExecuteQuery=t=>{const n=typeof t<"u";return this.isActive&&!this.isLoading&&(this.hasNext||n)},this.channel=a}getStateBeforeFirstQuery(a){const r=super.getStateBeforeFirstQuery(a),{items:t}=this.state.getLatestValue();return{...r,items:t}}query(a){const r=this.channel.getConfig(),n=((r==null?void 0:r.commands)||[]).filter(o=>!!(o.name&&o.name.toLowerCase().indexOf(a.toLowerCase())!==-1));return n.sort((o,i)=>{var m,g;let c=(m=o.name)==null?void 0:m.toLowerCase(),u=(g=i.name)==null?void 0:g.toLowerCase();if((c==null?void 0:c.indexOf(a))===0&&(c=`0${c}`),(u==null?void 0:u.indexOf(a))===0&&(u=`0${u}`),c!=null&&u!=null){if(c<u)return-1;if(c>u)return 1}return 0}),Promise.resolve({items:n.map(o=>({...o,id:o.name})),next:null})}filterQueryResults(a){return a}},dL={minChars:1,trigger:"/"},uL=(a,r)=>{const t=sp(dL,{});let n=new cL(a);return n.activate(),{id:"stream-io/text-composer/commands-middleware",handlers:{onChange:({state:o,next:i,complete:c,forward:u})=>{var y;if(!o.selection)return u();const m=Nw({trigger:t.trigger,text:o.text.slice(0,o.selection.end),acceptTrailingSpaces:!1,isCommand:!0});if(m&&m.length===t.minChars&&n.resetStateAndActivate(),!m||m.length<t.minChars){const v=((y=o.suggestions)==null?void 0:y.trigger)===t.trigger,S={...o};return v&&delete S.suggestions,i(S)}return c({...o,suggestions:{query:m.slice(1),searchSource:n,trigger:t.trigger}})},onSuggestionItemSelect:({state:o,complete:i,forward:c})=>{var m;const{selectedSuggestion:u}=o.change??{};return!u||((m=o.suggestions)==null?void 0:m.trigger)!==t.trigger?c():(n.resetStateAndActivate(),i({...o,..._w({insertText:`/${u.name} `,selection:o.selection,text:o.text,trigger:t.trigger}),suggestions:void 0}))}}}},N2={a:"á|à|ã|â|À|Á|Ã|Â",c:"ç|Ç",e:"é|è|ê|É|È|Ê",i:"í|ì|î|Í|Ì|Î",n:"ñ|Ñ",o:"ó|ò|ô|ő|õ|Ó|Ò|Ô|Õ",u:"ú|ù|û|ü|Ú|Ù|Û|Ü"},Oh=a=>a?Object.keys(N2).reduce((r,t)=>r.replace(new RegExp(N2[t],"g"),t),a):"",_2=(a,r)=>{if(a.length===0)return r.length;if(r.length===0)return a.length;const t=[];let n;for(n=0;n<=r.length;n++)t[n]=[n];let o;for(o=0;o<=a.length;o++)t[0][o]=o;for(n=1;n<=r.length;n++)for(o=1;o<=a.length;o++)r.charAt(n-1)===a.charAt(o-1)?t[n][o]=t[n-1][o-1]:t[n][o]=Math.min(t[n-1][o-1]+1,Math.min(t[n][o-1]+1,t[n-1][o]+1));return t[r.length][a.length]},mL=class extends Cw{constructor(a,r){const{mentionAllAppUsers:t,textComposerText:n,transliterate:o,...i}=r||{};super(i),this.type="mentions",this.canExecuteQuery=c=>{const u=typeof c<"u";return this.isActive&&!this.isLoading&&(u||this.hasNext)},this.transliterate=c=>c,this.getMembersAndWatchers=()=>{const c=Object.values(this.channel.state.members??{}).map(({user:f})=>f),u=Object.values(this.channel.state.watchers??{}),m=[...c,...u],g={};return m.forEach(f=>{f&&!g[f.id]&&(g[f.id]=f)}),Object.values(g)},this.searchMembersLocally=c=>{const{textComposerText:u}=this.config;return u?this.getMembersAndWatchers().filter(m=>{if(m.id===this.client.userID)return!1;if(!c)return!0;const g=this.transliterate(Oh(m.id)).toLowerCase(),f=this.transliterate(Oh(m.name)).toLowerCase(),y=this.transliterate(Oh(c)).toLowerCase(),v=3,S=u.slice(-4).includes("@");if(f){const x=_2(y,f);if(f.includes(y)||x<=v&&S)return!0}const w=_2(y,g);return g.includes(y)||w<=v&&S}).sort((m,g)=>{if(!this.memberSort)return(m.name||"").localeCompare(g.name||"");for(const[f,y]of Object.entries(this.memberSort)){const v=m[f],S=g[f];if(v!==S)return y===1?String(v||"").localeCompare(String(S||"")):String(S||"").localeCompare(String(v||""))}return 0}):[]},this.prepareQueryUsersParams=c=>({filters:{$or:[{id:{$autocomplete:c}},{name:{$autocomplete:c}}],...this.userFilters},sort:this.userSort??[{name:1},{id:1}],options:{...this.searchOptions,limit:this.pageSize,offset:this.offset}}),this.prepareQueryMembersParams=c=>{let m=[{user_id:1}];return this.memberSort?Array.isArray(this.memberSort)?m=this.memberSort[0]:Object.keys(this.memberSort).length===1&&(m=this.memberSort):m=[{user_id:1}],{filters:this.memberFilters??{name:{$autocomplete:c}},sort:m,options:{...this.searchOptions,limit:this.pageSize,offset:this.offset}}},this.queryUsers=async c=>{const{filters:u,sort:m,options:g}=this.prepareQueryUsersParams(c),{users:f}=await this.client.queryUsers(u,m,g);return f},this.queryMembers=async c=>{const{filters:u,sort:m,options:g}=this.prepareQueryMembersParams(c);return(await this.channel.queryMembers(u,m,g)).members.map(y=>y.user)},this.filterMutes=c=>{const{textComposerText:u}=this.config;if(!u)return[];const{mutedUsers:m}=this.client;return u.includes("/unmute")&&!m.length?[]:m.length?u.includes("/unmute")?c.filter(g=>m.some(f=>f.target.id===g.id)):c.filter(g=>m.every(f=>f.target.id!==g.id)):c},this.client=a.getClient(),this.channel=a,this.config={mentionAllAppUsers:t,textComposerText:n},o&&(this.transliterate=o)}get allMembersLoadedWithInitialChannelQuery(){return Object.keys(this.channel.state.members||{}).length<wT}getStateBeforeFirstQuery(a){const r=super.getStateBeforeFirstQuery(a),{items:t}=this.state.getLatestValue();return{...r,items:t}}async query(a){let r;const t=this.allMembersLoadedWithInitialChannelQuery||!a;return this.config.mentionAllAppUsers?r=await this.queryUsers(a):t?r=this.searchMembersLocally(a):r=await this.queryMembers(a),{items:r.map(n=>({...n,...iL({displayName:n.name||n.id,searchToken:this.searchQuery})}))}}filterQueryResults(a){return this.filterMutes(a)}},pL={minChars:1,trigger:"@"},fL=a=>{const{tokenizedDisplayName:r,...t}=a;return t},gL=(a,r)=>{const t=sp(pL,{});let n;return n=new mL(a),n.activate(),{id:"stream-io/text-composer/mentions-middleware",handlers:{onChange:({state:o,next:i,complete:c,forward:u})=>{var y;if(!o.selection)return u();const m=Nw({trigger:t.trigger,text:o.text.slice(0,o.selection.end)});if(m&&m.length===t.minChars&&n.resetStateAndActivate(),!m||m.length<t.minChars){const v=((y=o.suggestions)==null?void 0:y.trigger)===t.trigger,S={...o};return v&&delete S.suggestions,i(S)}return n.config.textComposerText=o.text,c({...o,suggestions:{query:m.slice(1),searchSource:n,trigger:t.trigger}})},onSuggestionItemSelect:({state:o,complete:i,forward:c})=>{var m;const{selectedSuggestion:u}=o.change??{};return!u||((m=o.suggestions)==null?void 0:m.trigger)!==t.trigger?c():(n.resetStateAndActivate(),i({...o,..._w({insertText:`@${u.name||u.id} `,selection:o.selection,text:o.text,trigger:t.trigger}),mentionedUsers:o.mentionedUsers.concat(fL(u)),suggestions:void 0}))}}}},hL=a=>({id:"stream-io/text-composer/pre-validation-middleware",handlers:{onChange:({state:r,next:t,forward:n})=>{const{maxLengthOnEdit:o}=a.config.text??{};return typeof o=="number"&&r.text.length>o?(r.text=r.text.slice(0,o),t({...r,text:r.text})):n()},onSuggestionItemSelect:({forward:r})=>r()}}),yL=class extends Vd{constructor({composer:a}){super(),this.use([hL(a),gL(a.channel),uL(a.channel)])}async execute({eventName:a,initialValue:r}){var i;const t=await this.executeMiddlewareChain({eventName:a,initialValue:r}),{query:n,searchSource:o}=t.state.suggestions??{};return(i=o==null?void 0:o.search(n))==null||i.catch(console.error),t}},Ay=a=>{const r=a.trim();return r===""||r===">"||r==="``````"||r==="``"||r==="**"||r==="____"||r==="__"||r==="****"},k2=({composer:a,message:r})=>{if(!r){const n=a.config.text.defaultValue??"";return{mentionedUsers:[],text:n,selection:{start:n.length,end:n.length}}}const t=r.text??"";return{mentionedUsers:(r.mentioned_users??[]).map(n=>typeof n=="string"?{id:n}:n),text:t,selection:{start:t.length,end:t.length}}},bL=class{constructor({composer:a,message:r}){this.initState=({message:t}={})=>{this.state.next(k2({composer:this.composer,message:t}))},this.upsertMentionedUser=t=>{const n=[...this.mentionedUsers],o=n.findIndex(i=>i.id===t.id);o>=0?(n.splice(o,1,t),this.state.partialNext({mentionedUsers:n})):(n.push(t),this.state.partialNext({mentionedUsers:n}))},this.getMentionedUser=t=>this.state.getLatestValue().mentionedUsers.find(n=>n.id===t),this.removeMentionedUser=t=>{const n=this.mentionedUsers.findIndex(i=>i.id===t);if(n===-1)return;const o=[...this.mentionedUsers];o.splice(n,1),this.state.partialNext({mentionedUsers:o})},this.setText=t=>{!this.enabled||t===this.text||this.state.partialNext({text:t})},this.setSelection=t=>{const n=t.start!==this.selection.start||t.end!==this.selection.end;!this.enabled||!n||this.state.partialNext({selection:t})},this.insertText=({text:t,selection:n})=>{if(!this.enabled)return;const o=n??this.selection,{maxLengthOnEdit:i}=this.composer.config.text??{},c=this.text,u=[c.slice(0,o.start),t,c.slice(o.end)].join(""),m=u.slice(0,typeof i=="number"?i:u.length),g=c.slice(0,o.start).length+t.length,f=g>=m.length?m.length:c.slice(0,g).length;this.state.partialNext({text:m,selection:{start:f,end:f}})},this.wrapSelection=({head:t="",selection:n,tail:o=""})=>{if(!this.enabled)return;const i=n??this.selection,c=this.text.slice(0,i.start),u=this.text.slice(i.start,i.end),m=this.text.slice(i.end),g={start:c.length+t.length,end:c.length+t.length+u.length};this.state.partialNext({text:[c,t,u,o,m].join(""),selection:g})},this.setSuggestions=t=>{this.state.partialNext({suggestions:t})},this.closeSuggestions=()=>{const{suggestions:t}=this.state.getLatestValue();t&&this.state.partialNext({suggestions:void 0})},this.handleChange=async({text:t,selection:n})=>{if(!this.enabled)return;const o=await this.middlewareExecutor.execute({eventName:"onChange",initialValue:{...this.state.getLatestValue(),text:t,selection:n}});o.status!=="discard"&&(this.state.next(o.state),this.config.publishTypingEvents&&t&&J5(this.channel.keystroke(this.composer.threadId??void 0),"start typing event"))},this.handleSelect=async t=>{if(!this.enabled)return;const n=await this.middlewareExecutor.execute({eventName:"onSuggestionItemSelect",initialValue:{...this.state.getLatestValue(),change:{selectedSuggestion:t}}});(n==null?void 0:n.status)!=="discard"&&this.state.next(n.state)},this.composer=a,this.state=new ir(k2({composer:a,message:r})),this.middlewareExecutor=new yL({composer:a})}get channel(){return this.composer.channel}get config(){return this.composer.config.text}get enabled(){return this.composer.config.text.enabled}set enabled(a){a!==this.enabled&&this.composer.updateConfig({text:{enabled:a}})}get defaultValue(){return this.composer.config.text.defaultValue}set defaultValue(a){a!==this.defaultValue&&this.composer.updateConfig({text:{defaultValue:a}})}get maxLengthOnEdit(){return this.composer.config.text.maxLengthOnEdit}set maxLengthOnEdit(a){a!==this.maxLengthOnEdit&&this.composer.updateConfig({text:{maxLengthOnEdit:a}})}get maxLengthOnSend(){return this.composer.config.text.maxLengthOnSend}set maxLengthOnSend(a){a!==this.maxLengthOnSend&&this.composer.updateConfig({text:{maxLengthOnSend:a}})}get publishTypingEvents(){return this.composer.config.text.publishTypingEvents}set publishTypingEvents(a){a!==this.publishTypingEvents&&this.composer.updateConfig({text:{publishTypingEvents:a}})}get mentionedUsers(){return this.state.getLatestValue().mentionedUsers}get selection(){return this.state.getLatestValue().selection}get suggestions(){return this.state.getLatestValue().suggestions}get text(){return this.state.getLatestValue().text}get textIsEmpty(){return Ay(this.text)}setMentionedUsers(a){this.state.partialNext({mentionedUsers:a})}},T0=class kw{constructor(){this.unsubscribeFunctions=new Set}get hasSubscriptions(){return this.unsubscribeFunctions.size>0}addUnsubscribeFunction(r){this.unsubscribeFunctions.add(r)}unregisterSubscriptions(){return this.unsubscribeFunctions.forEach(r=>r()),this.unsubscribeFunctions.clear(),kw.symbol}};T0.symbol=Symbol(T0.name);var Qd=T0,Fh=50,vL=[{created_at:-1}],EL=1e3,xL={active_participant_count:!0,channel:!0,channel_cid:!0,created_at:!0,created_by:!0,created_by_user_id:!0,deleted_at:!0,draft:!0,last_message_at:!0,latest_replies:!0,parent_message:!0,parent_message_id:!0,participant_count:!0,read:!0,reply_count:!0,thread_participants:!0,title:!0,updated_at:!0},I2=a=>{const r={};for(const t in a){if(xL[t])continue;const n=t;r[n]=a[n]}return r},Sd=class extends Qd{constructor({client:a,threadData:r}){super(),this.failedRepliesMap=new Map,this.activate=()=>{this.state.partialNext({active:!0})},this.deactivate=()=>{this.state.partialNext({active:!1})},this.reload=async()=>{if(!this.state.getLatestValue().isLoading){this.state.partialNext({isLoading:!0});try{const o=await this.client.getThread(this.id,{watch:!0});this.hydrateState(o)}finally{this.state.partialNext({isLoading:!1})}}},this.hydrateState=o=>{if(o===this)return;if(o.id!==this.id)throw new Error("Cannot hydrate thread's state using thread with different threadId");const{createdAt:i,custom:c,title:u,deletedAt:m,parentMessage:g,participants:f,read:y,replyCount:v,replies:S,updatedAt:w}=o.state.getLatestValue(),x=Array.from(this.failedRepliesMap.values());this.state.partialNext({title:u,createdAt:i,custom:c,deletedAt:m,parentMessage:g,participants:f,read:y,replyCount:v,replies:x.length?S.concat(x):S,updatedAt:w,isStateStale:!1})},this.registerSubscriptions=()=>{this.hasSubscriptions||(this.addUnsubscribeFunction(this.subscribeThreadUpdated()),this.addUnsubscribeFunction(this.subscribeMarkActiveThreadRead()),this.addUnsubscribeFunction(this.subscribeReloadActiveStaleThread()),this.addUnsubscribeFunction(this.subscribeMarkThreadStale()),this.addUnsubscribeFunction(this.subscribeNewReplies()),this.addUnsubscribeFunction(this.subscribeRepliesRead()),this.addUnsubscribeFunction(this.subscribeMessageDeleted()),this.addUnsubscribeFunction(this.subscribeMessageUpdated()))},this.subscribeThreadUpdated=()=>this.client.on("thread.updated",o=>{if(!o.thread||o.thread.parent_message_id!==this.id)return;const i=o.thread;this.state.partialNext({title:i.title,updatedAt:new Date(i.updated_at),deletedAt:i.deleted_at?new Date(i.deleted_at):null,custom:I2(i)})}).unsubscribe,this.subscribeMarkActiveThreadRead=()=>this.state.subscribeWithSelector(o=>({active:o.active,unreadMessageCount:M2(this.client.userID)(o)}),({active:o,unreadMessageCount:i})=>{!o||!i||this.throttledMarkAsRead()}),this.subscribeReloadActiveStaleThread=()=>this.state.subscribeWithSelector(o=>({active:o.active,isStateStale:o.isStateStale}),({active:o,isStateStale:i})=>{o&&i&&this.reload()}),this.subscribeMarkThreadStale=()=>this.client.on("user.watching.stop",o=>{var c,u;const{channel:i}=this.state.getLatestValue();!this.client.userID||this.client.userID!==((c=o.user)==null?void 0:c.id)||((u=o.channel)==null?void 0:u.cid)!==i.cid||this.state.partialNext({isStateStale:!0})}).unsubscribe,this.subscribeNewReplies=()=>this.client.on("message.new",o=>{var g,f,y;if(!this.client.userID||((g=o.message)==null?void 0:g.parent_id)!==this.id)return;const i=((f=o.message.user)==null?void 0:f.id)===this.client.userID,{active:c,read:u}=this.state.getLatestValue();this.upsertReplyLocally({message:o.message,timestampChanged:i}),c&&this.throttledMarkAsRead();const m={};for(const v of Object.keys(u)){const S=u[v];if(S){let w=S;v===((y=o.user)==null?void 0:y.id)?w={...w,lastReadAt:o.created_at?new Date(o.created_at):new Date,user:o.user,unreadMessageCount:0}:c&&v===this.client.userID||(w={...w,unreadMessageCount:S.unreadMessageCount+1}),m[v]=w}}this.state.partialNext({read:m})}).unsubscribe,this.subscribeRepliesRead=()=>this.client.on("message.read",o=>{if(!o.user||!o.created_at||!o.thread||o.thread.parent_message_id!==this.id)return;const i=o.user.id,c=o.created_at,u=o.user;this.state.next(m=>({...m,read:{...m.read,[i]:{lastReadAt:new Date(c),user:u,lastReadMessageId:o.last_read_message_id,unreadMessageCount:0}}}))}).unsubscribe,this.subscribeMessageDeleted=()=>this.client.on("message.deleted",o=>{o.message&&(o.message.parent_id===this.id&&(o.hard_delete?this.deleteReplyLocally({message:o.message}):this.upsertReplyLocally({message:o.message})),o.message.id===this.id&&this.updateParentMessageLocally({message:o.message}))}).unsubscribe,this.subscribeMessageUpdated=()=>{const i=["message.updated","reaction.new","reaction.deleted","reaction.updated"].map(c=>this.client.on(c,u=>{u.message&&this.updateParentMessageOrReplyLocally(u.message)}).unsubscribe);return()=>i.forEach(c=>c())},this.unregisterSubscriptions=()=>{const o=super.unregisterSubscriptions();return this.state.partialNext({isStateStale:!0}),o},this.deleteReplyLocally=({message:o})=>{var m;const{replies:i}=this.state.getLatestValue(),c=tw({needle:Ir(o),sortedArray:i,sortDirection:"ascending",selectValueToCompare:g=>g.created_at.getTime(),selectKey:g=>g.id});if(((m=i[c])==null?void 0:m.id)!==o.id)return;const u=[...i];u.splice(c,1),this.state.partialNext({replies:u})},this.upsertReplyLocally=({message:o,timestampChanged:i=!1})=>{if(o.parent_id!==this.id)throw new Error("Reply does not belong to this thread");const c=Ir(o);o.status==="failed"?this.failedRepliesMap.set(c.id,c):this.failedRepliesMap.has(o.id)&&this.failedRepliesMap.delete(o.id),this.state.next(u=>({...u,replies:aw(u.replies,c,i)}))},this.updateParentMessageLocally=({message:o})=>{if(o.id!==this.id)throw new Error("Message does not belong to this thread");this.state.next(i=>{const c=Ir(o);return{...i,deletedAt:c.deleted_at,parentMessage:c,replyCount:o.reply_count??i.replyCount}})},this.updateParentMessageOrReplyLocally=o=>{o.parent_id===this.id&&this.upsertReplyLocally({message:o}),!o.parent_id&&o.id===this.id&&this.updateParentMessageLocally({message:o})},this.markAsRead=async({force:o=!1}={})=>this.ownUnreadCount===0&&!o?null:await this.channel.markRead({thread_id:this.id}),this.throttledMarkAsRead=nw(()=>this.markAsRead(),EL,{trailing:!0}),this.queryReplies=({limit:o=Fh,sort:i=vL,...c}={})=>this.channel.getReplies(this.id,{limit:o,...c},i),this.loadNextPage=({limit:o=Fh}={})=>this.loadPage(o),this.loadPrevPage=({limit:o=Fh}={})=>this.loadPage(-o),this.loadPage=async o=>{var y;const{pagination:i}=this.state.getLatestValue(),[c,u,m]=o>0?["isLoadingNext","nextCursor","push"]:["isLoadingPrev","prevCursor","unshift"];if(i[c]||i[u]===null)return;const g={[o>0?"id_gt":"id_lt"]:i[u]},f=Math.abs(o);this.state.partialNext({pagination:{...i,[c]:!0}});try{const v=await this.queryReplies({...g,limit:f}),S=v.messages.map(Ir),w=((y=S.at(o>0?-1:0))==null?void 0:y.id)??null;this.state.next(x=>{let k=x.replies;return S.length>0&&(k=[...x.replies],k[m](...S)),{...x,replies:k,pagination:{...x.pagination,[u]:v.messages.length<f?null:w,[c]:!1}}})}catch(v){this.client.logger("error",v.message),this.state.next(S=>({...S,pagination:{...S.pagination,[c]:!1}}))}};const t=a.channel(r.channel.type,r.channel.id,{name:r.channel.name});t._hydrateMembers({members:r.channel.members??[],overrideCurrentState:!1});const n=a.userID?[{user:{id:a.userID},unread_messages:0,last_read:new Date().toISOString()}]:[];this.state=new ir({active:!1,isLoading:!1,isStateStale:!1,channel:t,createdAt:new Date(r.created_at),deletedAt:r.deleted_at?new Date(r.deleted_at):null,pagination:SL(r),parentMessage:Ir(r.parent_message),participants:r.thread_participants,read:wL(!r.read||r.read.length===0?n:r.read),replies:r.latest_replies.map(Ir),replyCount:r.reply_count??0,updatedAt:r.updated_at?new Date(r.updated_at):null,title:r.title,custom:I2(r)}),this.id=r.parent_message_id,this.client=a,this.messageComposer=new Pp({client:a,composition:r.draft,compositionContext:this})}get channel(){return this.state.getLatestValue().channel}get hasStaleState(){return this.state.getLatestValue().isStateStale}get ownUnreadCount(){return M2(this.client.userID)(this.state.getLatestValue())}},wL=a=>a.reduce((r,t)=>(r[t.user.id]={user:t.user,lastReadMessageId:t.last_read_message_id,unreadMessageCount:t.unread_messages??0,lastReadAt:new Date(t.last_read)},r),{}),SL=a=>{var t;return{nextCursor:null,prevCursor:a.latest_replies.length===a.reply_count?null:((t=a.latest_replies.at(0))==null?void 0:t.id)??null,isLoadingNext:!1,isLoadingPrev:!1}},M2=a=>r=>{var t;return a&&((t=r.read[a])==null?void 0:t.unreadMessageCount)||0},Cd=a=>!!(a!=null&&a.message),CL=a=>{let r=null,t=new Date().getTime();return Cd(a)?t=r=new Date(a.created_at).getTime():a&&sw(a)&&(t=new Date(a.updated_at).getTime()),{lastChange:{draftUpdate:r,stateUpdate:t}}},A2=a=>{if(!a)return{id:Pp.generateId(),quotedMessage:null,pollId:null,draftId:null};const r=a.quoted_message;let t,n=null,o=Pp.generateId();return Cd(a)?(t=a.message,n=a.message.id):(t=a,o=a.id),{draftId:n,id:o,quotedMessage:r?Ir(r):null,pollId:t.poll_id??null}},NL=()=>{},Iw=class P0 extends Qd{constructor({composition:r,config:t,compositionContext:n,client:o}){if(super(),this.initState=({composition:c}={})=>{this.editingAuditState.partialNext(this.initEditingAuditState(c));const u=typeof c>"u"?c:Cd(c)?c.message:Ir(c);this.attachmentManager.initState({message:u}),this.linkPreviewsManager.initState({message:u}),this.textComposer.initState({message:u}),this.pollComposer.initState(),this.customDataManager.initState({message:u}),this.state.next(A2(c)),c&&!Cd(c)&&u&&sw(u)&&(this.editedMessage=u)},this.initEditingAuditState=c=>CL(c),this.registerSubscriptions=()=>this.hasSubscriptions?NL:(this.addUnsubscribeFunction(this.subscribeMessageComposerSetupStateChange()),this.addUnsubscribeFunction(this.subscribeMessageUpdated()),this.addUnsubscribeFunction(this.subscribeMessageDeleted()),this.addUnsubscribeFunction(this.subscribeTextComposerStateChanged()),this.addUnsubscribeFunction(this.subscribeAttachmentManagerStateChanged()),this.addUnsubscribeFunction(this.subscribeLinkPreviewsManagerStateChanged()),this.addUnsubscribeFunction(this.subscribePollComposerStateChanged()),this.addUnsubscribeFunction(this.subscribeCustomDataManagerStateChanged()),this.addUnsubscribeFunction(this.subscribeMessageComposerStateChanged()),this.addUnsubscribeFunction(this.subscribeMessageComposerConfigStateChanged()),this.unregisterSubscriptions.bind(this)),this.subscribeMessageUpdated=()=>{const u=["message.updated","reaction.new","reaction.deleted","reaction.updated"].map(m=>this.client.on(m,g=>{var f;g.message&&(g.message.id===this.id&&this.initState({composition:g.message}),(f=this.quotedMessage)!=null&&f.id&&g.message.id===this.quotedMessage.id&&this.setQuotedMessage(Ir(g.message)))}).unsubscribe);return()=>u.forEach(m=>m())},this.subscribeMessageComposerSetupStateChange=()=>{let c=null;const u=this.client._messageComposerSetupState.subscribeWithSelector(({setupFunction:m})=>({setup:m}),({setup:m})=>{c==null||c(),c=(m==null?void 0:m({composer:this}))??null});return()=>{c==null||c(),u()}},this.subscribeMessageDeleted=()=>this.client.on("message.deleted",c=>{c.message&&(c.message.id===this.id?this.clear():this.quotedMessage&&c.message.id===this.quotedMessage.id&&this.setQuotedMessage(null))}).unsubscribe,this.subscribeDraftUpdated=()=>this.client.on("draft.updated",c=>{const u=c.draft;!u||!!u.parent_id!=!!this.threadId||u.channel_cid!==this.channel.cid||this.initState({composition:u})}).unsubscribe,this.subscribeDraftDeleted=()=>this.client.on("draft.deleted",c=>{const u=c.draft;!u||!!u.parent_id!=!!this.threadId||u.channel_cid!==this.channel.cid||(this.logDraftUpdateTimestamp(),!this.compositionIsEmpty&&this.clear())}).unsubscribe,this.subscribeTextComposerStateChanged=()=>this.textComposer.state.subscribeWithSelector(({text:c})=>[c],([c],u)=>{if(!(typeof u>"u")){if(this.logStateUpdateTimestamp(),this.compositionIsEmpty){this.deleteDraft();return}this.linkPreviewsManager.enabled&&(c?this.linkPreviewsManager.findAndEnrichUrls(c):this.linkPreviewsManager.clearPreviews())}}),this.subscribeAttachmentManagerStateChanged=()=>this.attachmentManager.state.subscribe((c,u)=>{if(!(typeof u>"u")&&(this.logStateUpdateTimestamp(),this.compositionIsEmpty)){this.deleteDraft();return}}),this.subscribeLinkPreviewsManagerStateChanged=()=>this.linkPreviewsManager.state.subscribe((c,u)=>{if(!(typeof u>"u")&&(this.logStateUpdateTimestamp(),this.compositionIsEmpty)){this.deleteDraft();return}}),this.subscribePollComposerStateChanged=()=>this.pollComposer.state.subscribe((c,u)=>{if(!(typeof u>"u")&&(this.logStateUpdateTimestamp(),this.compositionIsEmpty)){this.deleteDraft();return}}),this.subscribeCustomDataManagerStateChanged=()=>this.customDataManager.state.subscribe((c,u)=>{typeof u<"u"&&!this.customDataManager.isMessageDataEqual(c,u)&&this.logStateUpdateTimestamp()}),this.subscribeMessageComposerStateChanged=()=>this.state.subscribe((c,u)=>{typeof u>"u"||(this.logStateUpdateTimestamp(),this.compositionIsEmpty&&this.deleteDraft())}),this.subscribeMessageComposerConfigStateChanged=()=>{let c;const u=this.configState.subscribeWithSelector(m=>({textDefaultValue:m.text.defaultValue,draftsEnabled:m.drafts.enabled}),({textDefaultValue:m,draftsEnabled:g})=>{this.textComposer.text===""&&m&&this.textComposer.insertText({text:m,selection:{start:0,end:0}}),g&&!c?c=[this.subscribeDraftUpdated(),this.subscribeDraftDeleted()]:!g&&c&&(c.forEach(f=>f()),c=null)});return()=>{c==null||c.forEach(m=>m()),u()}},this.setQuotedMessage=c=>{this.state.partialNext({quotedMessage:c})},this.clear=()=>{this.initState()},this.restore=()=>{const{editedMessage:c}=this;if(c){this.initState({composition:c});return}this.clear()},this.compose=async()=>{var g;const c=((g=this.editedMessage)==null?void 0:g.created_at)??new Date,m=await this.compositionMiddlewareExecutor.execute({eventName:"compose",initialValue:{message:{id:this.id,parent_id:this.threadId??void 0,type:"regular"},localMessage:{attachments:[],created_at:c,deleted_at:null,error:void 0,id:this.id,mentioned_users:[],parent_id:this.threadId??void 0,pinned_at:null,reaction_groups:null,status:this.editedMessage?this.editedMessage.status:"sending",text:"",type:"regular",updated_at:c},sendOptions:{}}});if(m.status!=="discard")return m.state},this.composeDraft=async()=>{const{state:c,status:u}=await this.draftCompositionMiddlewareExecutor.execute({eventName:"compose",initialValue:{draft:{id:this.id,parent_id:this.threadId??void 0,text:""}}});if(u!=="discard")return c},this.createDraft=async()=>{if(this.editedMessage||!this.config.drafts.enabled)return;const c=await this.composeDraft();if(!c)return;const{draft:u}=c;this.state.partialNext({draftId:u.id}),this.logDraftUpdateTimestamp(),await this.channel.createDraft(u)},this.deleteDraft=async()=>{this.editedMessage||!this.config.drafts.enabled||!this.draftId||(this.state.partialNext({draftId:null}),this.logDraftUpdateTimestamp(),await this.channel.deleteDraft({parent_id:this.threadId??void 0}))},this.createPoll=async()=>{const c=await this.pollComposer.compose();if(!(!c||!c.data.id))try{const{poll:u}=await this.client.createPoll(c.data);this.state.partialNext({pollId:u.id}),this.pollComposer.initState()}catch(u){throw this.client.notifications.add({message:"Failed to create the poll",origin:{emitter:"MessageComposer",context:{composer:this}}}),u}},this.compositionContext=n,this.configState=new ir(sp(_P,t??{})),n instanceof Di)this.channel=n;else if(n instanceof Sd)this.channel=n.channel;else if(n.cid){const[c,u]=n.cid.split(":");this.channel=o.channel(c,u)}else throw new Error("MessageComposer requires composition context pointing to channel (channel or context.cid)");let i;Cd(r)?i=r.message:r&&(i=Ir(r),this.editedMessage=i),this.attachmentManager=new sP({composer:this,message:i}),this.linkPreviewsManager=new Iy({composer:this,message:i}),this.textComposer=new bL({composer:this,message:i}),this.pollComposer=new $P({composer:this}),this.customDataManager=new kP({composer:this,message:i}),this.editingAuditState=new ir(this.initEditingAuditState(r)),this.state=new ir(A2(r)),this.compositionMiddlewareExecutor=new rL({composer:this}),this.draftCompositionMiddlewareExecutor=new oL({composer:this})}static evaluateContextType(r){return r instanceof Di?"channel":r instanceof Sd?"thread":typeof r.legacyThreadId=="string"?"legacy_thread":"message"}static constructTag(r){return`${this.evaluateContextType(r)}_${r.id}`}get config(){return this.configState.getLatestValue()}updateConfig(r){this.configState.partialNext(sp(this.config,r))}get contextType(){return P0.evaluateContextType(this.compositionContext)}get tag(){return P0.constructTag(this.compositionContext)}get threadId(){return this.compositionContext instanceof Di?null:this.compositionContext instanceof Sd?this.compositionContext.id:typeof this.compositionContext.legacyThreadId=="string"?this.compositionContext.legacyThreadId:typeof this.compositionContext.parent_id=="string"?this.compositionContext.parent_id:null}get client(){return this.channel.getClient()}get id(){return this.state.getLatestValue().id}get draftId(){return this.state.getLatestValue().draftId}get lastChange(){return this.editingAuditState.getLatestValue().lastChange}get quotedMessage(){return this.state.getLatestValue().quotedMessage}get pollId(){return this.state.getLatestValue().pollId}get hasSendableData(){return!!(!this.attachmentManager.uploadsInProgressCount&&(!this.textComposer.textIsEmpty||this.attachmentManager.successfulUploadsCount>0)||this.pollId)}get compositionIsEmpty(){return!this.quotedMessage&&this.textComposer.textIsEmpty&&!this.attachmentManager.attachments.length&&!this.pollId}get lastChangeOriginIsLocal(){var i;const t=this.lastChange.draftUpdate===null&&!this.editedMessage,n=!!((i=this.editedMessage)!=null&&i.updated_at)&&new Date(this.editedMessage.updated_at).getTime()<this.lastChange.stateUpdate,o=!!this.lastChange.draftUpdate&&this.lastChange.draftUpdate<this.lastChange.stateUpdate;return n||o||t}logStateUpdateTimestamp(){this.editingAuditState.partialNext({lastChange:{...this.lastChange,stateUpdate:new Date().getTime()}})}logDraftUpdateTimestamp(){if(!this.config.drafts.enabled)return;const r=new Date().getTime();this.editingAuditState.partialNext({lastChange:{draftUpdate:r,stateUpdate:r}})}};Iw.generateId=eo;var Pp=Iw,Di=class{constructor(a,r,t,n){this.create=async c=>{const u={...c,watch:!1,state:!1,presence:!1};return await this.query(u,"latest")},this._callChannelListeners=c=>{const u=this,m=[];u.listeners.all&&m.push(...u.listeners.all),u.listeners[c.type]&&m.push(...u.listeners[c.type]);for(const g of m)typeof g!="string"&&g(c)},this._channelURL=()=>{if(!this.id)throw new Error("channel id is not defined");return`${this.getClient().baseURL}/channels/${encodeURIComponent(this.type)}/${encodeURIComponent(this.id)}`};const o=/^[\w_-]+$/,i=/^[\w!_-]+$/;if(!o.test(r))throw new Error(`Invalid chat type ${r}, letters, numbers and "_-" are allowed`);if(typeof t=="string"&&!i.test(t))throw new Error(`Invalid chat id ${t}, letters, numbers and "!-_" are allowed`);this._client=a,this.type=r,this.id=t,this.data=n,this._data={...n},this.cid=`${r}:${t}`,this.listeners={},this.state=new ZT(this),this.initialized=!1,this.offlineMode=!1,this.lastTypingEvent=null,this.isTyping=!1,this.disconnected=!1,this.messageComposer=new Pp({client:this._client,compositionContext:this})}getClient(){if(this.disconnected===!0)throw Error("You can't use a channel after client.disconnect() was called");return this._client}getConfig(){return this.getClient().configs[this.cid]}async _sendMessage(a,r){return await this.getClient().post(this._channelURL()+"/message",{message:a,...r})}async sendMessage(a,r){try{const t=this.getClient().offlineDb;if(t){const n=a.id;if(n)return await t.queueTask({task:{channelId:this.id,channelType:this.type,messageId:n,payload:[a,r],type:"send-message"}})}}catch(t){this._client.logger("error","offlineDb:send-message",{tags:["channel","offlineDb"],error:t})}return await this._sendMessage(a,r)}sendFile(a,r,t,n){return this.getClient().sendFile(`${this._channelURL()}/file`,a,r,t,n)}sendImage(a,r,t,n){return this.getClient().sendFile(`${this._channelURL()}/image`,a,r,t,n)}deleteFile(a){return this.getClient().delete(`${this._channelURL()}/file`,{url:a})}deleteImage(a){return this.getClient().delete(`${this._channelURL()}/image`,{url:a})}async sendEvent(a){return this._checkInitialized(),await this.getClient().post(this._channelURL()+"/event",{event:a})}async search(a,r={}){if(r.offset&&r.next)throw Error("Cannot specify offset with next");const t={filter_conditions:{cid:this.cid},...r,sort:r.sort?Xn(r.sort):void 0};if(typeof a=="string")t.query=a;else if(typeof a=="object")t.message_filter_conditions=a;else throw Error(`Invalid type ${typeof a} for query parameter`);return await this.getClient().wsPromise,await this.getClient().get(this.getClient().baseURL+"/search",{payload:t})}async queryMembers(a,r=[],t={}){var c;let n;const o=this.type;let i;return this.id?n=this.id:(c=this.data)!=null&&c.members&&Array.isArray(this.data.members)&&(i=this.data.members),await this.getClient().get(this.getClient().baseURL+"/members",{payload:{type:o,id:n,members:i,sort:Xn(r),filter_conditions:a,...t}})}async updateMemberPartial(a,r){const t=new URL(`${this._channelURL()}/member`);return r!=null&&r.userId&&t.searchParams.append("user_id",r.userId),await this.getClient().patch(t.toString(),a)}async partialUpdateMember(a,r){if(!a)throw Error("Please specify the user id");return await this.getClient().patch(this._channelURL()+`/member/${encodeURIComponent(a)}`,r)}async sendReaction(a,r,t){if(!a)throw Error("Message id is missing");if(!r||Object.keys(r).length===0)throw Error("Reaction object is missing");try{const n=this.getClient().offlineDb;if(n)return await n.queueTask({task:{channelId:this.id,channelType:this.type,messageId:a,payload:[a,r,t],type:"send-reaction"}})}catch(n){this._client.logger("error","offlineDb:send-reaction",{tags:["channel","offlineDb"],error:n})}return this._sendReaction(a,r,t)}async _sendReaction(a,r,t){if(!a)throw Error("Message id is missing");if(!r||Object.keys(r).length===0)throw Error("Reaction object is missing");return await this.getClient().post(this.getClient().baseURL+`/messages/${encodeURIComponent(a)}/reaction`,{reaction:r,...t})}async deleteReaction(a,r,t){if(this._checkInitialized(),!r||!a)throw Error("Deleting a reaction requires specifying both the message and reaction type");try{const n=this.getClient().offlineDb;if(n){const o=this.state.messages.find(({id:c})=>c===a),i={created_at:"",updated_at:"",message_id:a,type:r,user_id:this.getClient().userID??t};return o&&await n.deleteReaction({message:o,reaction:i}),await n.queueTask({task:{channelId:this.id,channelType:this.type,messageId:a,payload:[a,r],type:"delete-reaction"}})}}catch(n){this._client.logger("error","offlineDb:delete-reaction",{tags:["channel","offlineDb"],error:n})}return await this._deleteReaction(a,r,t)}async _deleteReaction(a,r,t){if(this._checkInitialized(),!r||!a)throw Error("Deleting a reaction requires specifying both the message and reaction type");const n=this.getClient().baseURL+`/messages/${encodeURIComponent(a)}/reaction/${encodeURIComponent(r)}`;return t?await this.getClient().delete(n,{user_id:t}):await this.getClient().delete(n,{})}async update(a={},r,t){return["config","cid","created_by","id","member_count","type","created_at","updated_at","last_message_at","own_capabilities"].forEach(o=>{delete a[o]}),await this._update({message:r,data:a,...t})}async updatePartial(a){var n,o;const r=await this.getClient().patch(this._channelURL(),a),t=[...r.channel.own_capabilities||[]].sort().join()!==[...Array.isArray((n=this.data)==null?void 0:n.own_capabilities)?(o=this.data)==null?void 0:o.own_capabilities:[]].sort().join();return this.data=r.channel,t&&this.getClient().dispatchEvent({type:"capabilities.changed",cid:this.cid,own_capabilities:r.channel.own_capabilities}),r}async enableSlowMode(a){const r=await this.getClient().post(this._channelURL(),{cooldown:a});return this.data=r.channel,r}async disableSlowMode(){const a=await this.getClient().post(this._channelURL(),{cooldown:0});return this.data=a.channel,a}async delete(a={}){return await this.getClient().delete(this._channelURL(),{...a})}async truncate(a={}){return await this.getClient().post(this._channelURL()+"/truncate",a)}async acceptInvite(a={}){return await this._update({accept_invite:!0,...a})}async rejectInvite(a={}){return await this._update({reject_invite:!0,...a})}async addMembers(a,r,t={}){return await this._update({add_members:a,message:r,...t})}async addModerators(a,r,t={}){return await this._update({add_moderators:a,message:r,...t})}async assignRoles(a,r,t={}){return await this._update({assign_roles:a,message:r,...t})}async inviteMembers(a,r,t={}){return await this._update({invites:a,message:r,...t})}async removeMembers(a,r,t={}){return await this._update({remove_members:a,message:r,...t})}async demoteModerators(a,r,t={}){return await this._update({demote_moderators:a,message:r,...t})}async _update(a){const r=await this.getClient().post(this._channelURL(),a);return this.data=r.channel,r}async mute(a={}){return await this.getClient().post(this.getClient().baseURL+"/moderation/mute/channel",{channel_cid:this.cid,...a})}async unmute(a={}){return await this.getClient().post(this.getClient().baseURL+"/moderation/unmute/channel",{channel_cid:this.cid,...a})}async archive(a={}){const r=this.getClient(),t=a.user_id||r.userID;if(!t)throw Error("A user_id is required for archiving a channel");return(await this.partialUpdateMember(t,{set:{archived:!0}})).channel_member}async unarchive(a={}){const r=this.getClient(),t=a.user_id||r.userID;if(!t)throw Error("A user_id is required for unarchiving a channel");return(await this.partialUpdateMember(t,{set:{archived:!1}})).channel_member}async pin(a={}){const r=this.getClient(),t=a.user_id||r.userID;if(!t)throw new Error("A user_id is required for pinning a channel");return(await this.partialUpdateMember(t,{set:{pinned:!0}})).channel_member}async unpin(a={}){const r=this.getClient(),t=a.user_id||r.userID;if(!t)throw new Error("A user_id is required for unpinning a channel");return(await this.partialUpdateMember(t,{set:{pinned:!1}})).channel_member}muteStatus(){return this._checkInitialized(),this.getClient()._muteStatus(this.cid)}sendAction(a,r){if(this._checkInitialized(),!a)throw Error("Message id is missing");return this.getClient().post(this.getClient().baseURL+`/messages/${encodeURIComponent(a)}/action`,{message_id:a,form_data:r,id:this.id,type:this.type})}async keystroke(a,r){if(!this._isTypingIndicatorsEnabled())return;const t=new Date,n=this.lastTypingEvent&&t.getTime()-this.lastTypingEvent.getTime();this.lastKeyStroke=t,this.isTyping=!0,(n===null||n>2e3)&&(this.lastTypingEvent=new Date,await this.sendEvent({type:"typing.start",parent_id:a,...r||{}}))}async updateAIState(a,r,t={}){await this.sendEvent({...t,type:"ai_indicator.update",message_id:a,ai_state:r})}async clearAIIndicator(){await this.sendEvent({type:"ai_indicator.clear"})}async stopAIResponse(){await this.sendEvent({type:"ai_indicator.stop"})}async stopTyping(a,r){this._isTypingIndicatorsEnabled()&&(this.lastTypingEvent=null,this.isTyping=!1,await this.sendEvent({type:"typing.stop",parent_id:a,...r||{}}))}_isTypingIndicatorsEnabled(){var a,r,t,n,o;return!((a=this.getConfig())!=null&&a.typing_events)||!((r=this.getClient().wsConnection)!=null&&r.isHealthy)?!1:((o=(n=(t=this.getClient().user)==null?void 0:t.privacy_settings)==null?void 0:n.typing_indicators)==null?void 0:o.enabled)??!0}lastMessage(){let a=this.state.latestMessages.length-5;a<0&&(a=0);const r=this.state.latestMessages.length+1,t=this.state.latestMessages.slice(a,r);return t.sort((n,o)=>o.created_at.getTime()-n.created_at.getTime()),t[0]}async markRead(a={}){var r;return this._checkInitialized(),!((r=this.getConfig())!=null&&r.read_events)&&!this.getClient()._isUsingServerAuth()?Promise.resolve(null):await this.getClient().post(this._channelURL()+"/read",{...a})}async markUnread(a){var r;return this._checkInitialized(),!((r=this.getConfig())!=null&&r.read_events)&&!this.getClient()._isUsingServerAuth()?Promise.resolve(null):await this.getClient().post(this._channelURL()+"/unread",{...a})}clean(){this.lastKeyStroke&&new Date().getTime()-this.lastKeyStroke.getTime()>1e3&&this.isTyping&&J5(this.stopTyping(),"stop typing event"),this.state.clean()}async watch(a){const r={state:!0,watch:!0,presence:!1};await this.getClient().wsPromise,this.getClient()._hasConnectionID()||(r.watch=!1);const t={...r,...a},n=await this.query(t,"latest");return this.initialized=!0,this.data=n.channel,this._client.logger("info",`channel:watch() - started watching channel ${this.cid}`,{tags:["channel"],channel:this}),n}async stopWatching(){const a=await this.getClient().post(this._channelURL()+"/stop-watching",{});return this._client.logger("info",`channel:watch() - stopped watching channel ${this.cid}`,{tags:["channel"],channel:this}),a}async getReplies(a,r,t){const n=t?Xn(t):void 0,o=await this.getClient().get(this.getClient().baseURL+`/messages/${encodeURIComponent(a)}/replies`,{sort:n,...r});return o.messages&&this.state.addMessagesSorted(o.messages),o}async getPinnedMessages(a,r=[]){return await this.getClient().get(this._channelURL()+"/pinned_messages",{payload:{...a,sort:Xn(r)}})}getReactions(a,r){return this.getClient().get(this.getClient().baseURL+`/messages/${encodeURIComponent(a)}/reactions`,{...r})}getMessagesById(a){return this.getClient().get(this._channelURL()+"/messages",{ids:a.join(",")})}lastRead(){const{userID:a}=this.getClient();if(a)return this.state.read[a]?this.state.read[a].last_read:null}_countMessageAsUnread(a){var r,t,n,o;return!(a.shadowed||a.silent||a.parent_id&&!a.show_in_channel||((r=a.user)==null?void 0:r.id)===this.getClient().userID||(t=a.user)!=null&&t.id&&this.getClient().userMuteStatus(a.user.id)||Array.isArray((n=this.data)==null?void 0:n.own_capabilities)&&!((o=this.data)!=null&&o.own_capabilities.includes("read-events"))||this.muteStatus().muted)}countUnread(a){if(!a)return this.state.unreadCount;let r=0;for(let t=0;t<this.state.latestMessages.length;t+=1){const n=this.state.latestMessages[t];n.created_at>a&&this._countMessageAsUnread(n)&&r++}return r}countUnreadMentions(){var n;const a=this.lastRead(),r=this.getClient().userID;let t=0;for(let o=0;o<this.state.latestMessages.length;o+=1){const i=this.state.latestMessages[o];this._countMessageAsUnread(i)&&(!a||i.created_at>a)&&((n=i.mentioned_users)!=null&&n.some(c=>c.id===r))&&t++}return t}async query(a={},r="current"){var u,m,g,f,y,v,S;await this.getClient().wsPromise;const t=((u=a.created_by)==null?void 0:u.id)??a.created_by_id??((g=(m=this._data)==null?void 0:m.created_by)==null?void 0:g.id)??((f=this._data)==null?void 0:f.created_by_id);this.getClient()._isUsingServerAuth()&&typeof t!="string"&&this.getClient().logger("warn","Either `created_by` (with `id` property) or `created_by_id` are missing from both `Channel._data` and `options` parameter");let n=`${this.getClient().baseURL}/channels/${encodeURIComponent(this.type)}`;this.id&&(n+=`/${encodeURIComponent(this.id)}`);const o=await this.getClient().post(n+"/query",{data:this._data,state:!0,...a});if(!this.id){this.id=o.channel.id,this.cid=o.channel.cid;const w=by(this.type,o.members.map(x=>{var k;return x.user_id||((k=x.user)==null?void 0:k.id)||""}));w&&w in this.getClient().activeChannels&&delete this.getClient().activeChannels[w],!(this.cid in this.getClient().activeChannels)&&this.getClient()._cacheEnabled()&&(this.getClient().activeChannels[this.cid]=this)}this.getClient()._addChannelConfig(o.channel);const{messageSet:i}=this._initializeState(o,r);i.pagination={...i.pagination,...rw({parentSet:i,messagePaginationOptions:a==null?void 0:a.messages,requestedPageSize:((y=a==null?void 0:a.messages)==null?void 0:y.limit)??vT,returnedPage:o.messages,logger:this.getClient().logger})},this.getClient().polls.hydratePollCache(o.messages,!0),o.draft&&this.messageComposer.initState({composition:o.draft});const c=[...o.channel.own_capabilities||[]].sort().join()!==[...this.data&&Array.isArray((v=this.data)==null?void 0:v.own_capabilities)?this.data.own_capabilities:[]].sort().join();return this.data=o.channel,this.offlineMode=!1,c&&this.getClient().dispatchEvent({type:"capabilities.changed",cid:this.cid,own_capabilities:o.channel.own_capabilities}),this.getClient().dispatchEvent({type:"channels.queried",queriedChannels:{channels:[o],isLatestMessageSet:i.isLatest}}),(S=this.getClient().offlineDb)==null||S.executeQuerySafely(w=>{var x;return(x=w.upsertChannels)==null?void 0:x.call(w,{channels:[o],isLatestMessagesSet:i.isLatest})},{method:"upsertChannels"}),o}async banUser(a,r){return this._checkInitialized(),await this.getClient().banUser(a,{...r,type:this.type,id:this.id})}async hide(a=null,r=!1){return this._checkInitialized(),await this.getClient().post(`${this._channelURL()}/hide`,{user_id:a,clear_history:r})}async show(a=null){return this._checkInitialized(),await this.getClient().post(`${this._channelURL()}/show`,{user_id:a})}async unbanUser(a){return this._checkInitialized(),await this.getClient().unbanUser(a,{type:this.type,id:this.id})}async shadowBan(a,r){return this._checkInitialized(),await this.getClient().shadowBan(a,{...r,type:this.type,id:this.id})}async removeShadowBan(a){return this._checkInitialized(),await this.getClient().removeShadowBan(a,{type:this.type,id:this.id})}async vote(a,r,t){return await this.getClient().castPollVote(a,r,t)}async removeVote(a,r,t){return await this.getClient().removePollVote(a,r,t)}async createDraft(a){return await this.getClient().post(this._channelURL()+"/draft",{message:a})}async deleteDraft({parent_id:a}={}){return await this.getClient().delete(this._channelURL()+"/draft",{parent_id:a})}async getDraft({parent_id:a}={}){return await this.getClient().get(this._channelURL()+"/draft",{parent_id:a})}on(a,r){const t=r?a:"all",n=r||a;return t in this.listeners||(this.listeners[t]=[]),this._client.logger("info",`Attaching listener for ${t} event on channel ${this.cid}`,{tags:["event","channel"],channel:this}),this.listeners[t].push(n),{unsubscribe:()=>{this._client.logger("info",`Removing listener for ${t} event from channel ${this.cid}`,{tags:["event","channel"],channel:this}),this.listeners[t]=this.listeners[t].filter(o=>o!==n)}}}off(a,r){const t=r?a:"all",n=r||a;t in this.listeners||(this.listeners[t]=[]),this._client.logger("info",`Removing listener for ${t} event from channel ${this.cid}`,{tags:["event","channel"],channel:this}),this.listeners[t]=this.listeners[t].filter(o=>o!==n)}_handleChannelEvent(a){var n,o,i,c,u,m,g,f,y,v,S,w,x,k,E,I,M,N,_,P,B,R,W,L,F,j,J,Y;const r=this;this._client.logger("info",`channel:_handleChannelEvent - Received event of type { ${a.type} } on ${this.cid}`,{tags:["event","channel"],channel:this});const t=r.state;switch(a.type){case"typing.start":(n=a.user)!=null&&n.id&&(t.typing[a.user.id]=a);break;case"typing.stop":(o=a.user)!=null&&o.id&&delete t.typing[a.user.id];break;case"message.read":(i=a.user)!=null&&i.id&&a.created_at&&(t.read[a.user.id]={last_read:new Date(a.created_at),last_read_message_id:a.last_read_message_id,user:a.user,unread_messages:0},((c=a.user)==null?void 0:c.id)===((u=this.getClient().user)==null?void 0:u.id)&&(t.unreadCount=0));break;case"user.watching.start":case"user.updated":(m=a.user)!=null&&m.id&&(t.watchers[a.user.id]=a.user);break;case"user.watching.stop":(g=a.user)!=null&&g.id&&delete t.watchers[a.user.id];break;case"message.deleted":a.message&&(this._extendEventWithOwnReactions(a),a.hard_delete?t.removeMessage(a.message):t.addMessageSorted(a.message,!1,!1),t.removeQuotedMessageReferences(a.message),a.message.pinned&&t.removePinnedMessage(a.message));break;case"message.new":if(a.message){const D=((f=a.user)==null?void 0:f.id)===((y=this.getClient().user)==null?void 0:y.id),A=a.message.parent_id&&!a.message.show_in_channel;if((this.state.isUpToDate||A)&&t.addMessageSorted(a.message,D),a.message.pinned&&t.addPinnedMessage(a.message),D||A)break;if((v=a.user)!=null&&v.id)for(const K in t.read)K===a.user.id?t.read[a.user.id]={last_read:new Date(a.created_at),user:a.user,unread_messages:0}:t.read[K].unread_messages+=1;this._countMessageAsUnread(a.message)&&(t.unreadCount=t.unreadCount+1)}break;case"message.updated":case"message.undeleted":a.message&&(this._extendEventWithOwnReactions(a),t.addMessageSorted(a.message,!1,!1),t._updateQuotedMessageReferences({message:a.message}),a.message.pinned?t.addPinnedMessage(a.message):t.removePinnedMessage(a.message));break;case"channel.truncated":if((S=a.channel)!=null&&S.truncated_at){const D=+new Date(a.channel.truncated_at);t.messageSets.forEach((A,U)=>{A.messages.forEach(({created_at:K,id:X})=>{D>+K&&t.removeMessage({id:X,messageSetIndex:U})})}),t.pinnedMessages.forEach(({id:A,created_at:U})=>{D>+U&&t.removePinnedMessage({id:A})}),t.unreadCount=this.countUnread(new Date(a.channel.truncated_at))}else t.clearMessages(),t.unreadCount=0;a.message&&(t.addMessageSorted(a.message),a.message.pinned&&t.addPinnedMessage(a.message));break;case"member.added":case"member.updated":{const D={...a.member};D.pinned_at===null&&delete D.pinned_at,D.archived_at===null&&delete D.archived_at,D!=null&&D.user&&(t.members={...t.members,[D.user.id]:D},(w=r.data)!=null&&w.member_count&&a.type==="member.added"&&(r.data.member_count+=1));const A=this.getClient().userID;typeof A=="string"&&typeof((x=D==null?void 0:D.user)==null?void 0:x.id)=="string"&&D.user.id===A&&(t.membership=D);break}case"member.removed":if((k=a.user)!=null&&k.id){const D={...t.members};delete D[a.user.id],t.members=D,(E=r.data)!=null&&E.member_count&&(r.data.member_count=Math.max(r.data.member_count-1,0))}break;case"notification.mark_unread":{if(!(((I=a.user)==null?void 0:I.id)===((M=this.getClient().user)==null?void 0:M.id)&&a.user))break;const A=a.unread_messages??0;t.read[a.user.id]={first_unread_message_id:a.first_unread_message_id,last_read:new Date(a.last_read_at),last_read_message_id:a.last_read_message_id,user:a.user,unread_messages:A},t.unreadCount=A;break}case"channel.updated":if(a.channel){((N=a.channel)==null?void 0:N.frozen)!==void 0&&a.channel.frozen!==((_=r.data)==null?void 0:_.frozen)&&this.query({state:!1,messages:{limit:0},watchers:{limit:0}});const A={...a.channel,hidden:((P=a.channel)==null?void 0:P.hidden)??((B=r.data)==null?void 0:B.hidden),own_capabilities:((R=a.channel)==null?void 0:R.own_capabilities)??((W=r.data)==null?void 0:W.own_capabilities)};r.data=A}break;case"reaction.new":if(a.message&&a.reaction){const{message:D,reaction:A}=a;a.message=t.addReaction(A,D)}break;case"reaction.deleted":if(a.message&&a.reaction){const{message:D,reaction:A}=a;a.message=t.removeReaction(A,D)}break;case"reaction.updated":if(a.message&&a.reaction){const{message:D,reaction:A}=a;a.message=t.addReaction(A,D,!0)}break;case"channel.hidden":r.data={...r.data,hidden:!0},a.clear_history&&t.clearMessages();break;case"channel.visible":r.data={...r.data,hidden:!1},(L=this.getClient().offlineDb)==null||L.handleChannelVisibilityEvent({event:a});break;case"user.banned":if(!((F=a.user)!=null&&F.id))break;t.members[a.user.id]={...t.members[a.user.id]||{},shadow_banned:!!a.shadow,banned:!a.shadow,user:{...((j=t.members[a.user.id])==null?void 0:j.user)||{},...a.user}};break;case"user.unbanned":if(!((J=a.user)!=null&&J.id))break;t.members[a.user.id]={...t.members[a.user.id]||{},shadow_banned:!1,banned:!1,user:{...((Y=t.members[a.user.id])==null?void 0:Y.user)||{},...a.user}};break}a.watcher_count!==void 0&&(r.state.watcher_count=a.watcher_count)}_checkInitialized(){if(!this.initialized&&!this.offlineMode&&!this.getClient()._isUsingServerAuth())throw Error(`Channel ${this.cid} hasn't been initialized yet. Make sure to call .watch() and wait for it to resolve`)}_initializeState(a,r="latest"){const{state:t,user:n,userID:o}=this.getClient();if(a.members){this._hydrateMembers({members:a.members});for(const u of a.members)u.user&&t.updateUserReference(u.user,this.cid)}this.state.membership=a.membership||{};const i=a.messages||[];this.state.messages||this.state.initMessages();const{messageSet:c}=this.state.addMessagesSorted(i,!1,!0,!0,r);if(this.state.pinnedMessages||(this.state.pinnedMessages=[]),this.state.addPinnedMessages(a.pinned_messages||[]),a.pending_messages&&(this.state.pending_messages=a.pending_messages),a.watcher_count!==void 0&&(this.state.watcher_count=a.watcher_count),a.watchers)for(const u of a.watchers)u&&(t.updateUserReference(u,this.cid),this.state.watchers[u.id]=u);if(o!=null){const u=this.state.last_message_at||new Date;n&&(this.state.read[n.id]={user:n,last_read:u,unread_messages:0})}if(a.read)for(const u of a.read)this.state.read[u.user.id]={last_read:new Date(u.last_read),last_read_message_id:u.last_read_message_id,unread_messages:u.unread_messages??0,user:u.user},u.user.id===(n==null?void 0:n.id)&&(this.state.unreadCount=this.state.read[u.user.id].unread_messages);return{messageSet:c}}_extendEventWithOwnReactions(a){if(!a.message)return;const r=this.state.findMessage(a.message.id,a.message.parent_id);r&&(a.message.own_reactions=r.own_reactions)}_hydrateMembers({members:a,overrideCurrentState:r=!0}){const t=a.reduce((n,o)=>(o.user&&(n[o.user.id]=o),n),{});r?this.state.members=t:!r&&a.length&&(this.state.members={...this.state.members,...t})}_disconnect(){this._client.logger("info",`channel:disconnect() - Disconnecting the channel ${this.cid}`,{tags:["connection","channel"],channel:this}),this.disconnected=!0,this.state.setIsUpToDate(!1)}},D2=class{constructor({client:a}){this.client=a,this.users={},this.userChannelReferences={}}updateUsers(a){for(const r of a)this.updateUser(r)}updateUser(a){a!=null&&this.client._cacheEnabled()&&(this.users[a.id]=a)}updateUserReference(a,r){a==null||!this.client._cacheEnabled()||(this.updateUser(a),this.userChannelReferences[a.id]||(this.userChannelReferences[a.id]={}),this.userChannelReferences[a.id][r]=!0)}deleteAllChannelReference(a){for(const r in this.userChannelReferences)delete this.userChannelReferences[r][a]}},Ni=null;typeof WebSocket<"u"?Ni=WebSocket:typeof MozWebSocket<"u"?Ni=MozWebSocket:typeof global<"u"?Ni=global.WebSocket||global.MozWebSocket:typeof window<"u"?Ni=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Ni=self.WebSocket||self.MozWebSocket);var _L=Ni,kL=class{constructor(){this.connectionStartTimestamp=null,this.wsTotalFailures=0,this.wsConsecutiveFailures=0,this.instanceClientId=_i()}},fd=async(a,r)=>{for(let n=0;n<3;n++){try{await Td.post(`https://chat-insights.getstream.io/insights/${a}`,r)}catch{await Ql((n+1)*3e3);continue}break}};function IL(a,r){return{...r,...Mw(a)}}function Mw(a){var t;const{client:r}=a;return{ready_state:(t=a.ws)==null?void 0:t.readyState,url:a._buildUrl(),api_key:r.key,start_ts:r.insightMetrics.connectionStartTimestamp,end_ts:new Date().getTime(),auth_type:r.getAuthType(),token:r.tokenManager.token,user_id:r.userID,user_details:r._user,device:r.options.device,client_id:a.connectionID,ws_details:a.ws,ws_consecutive_failures:r.insightMetrics.wsConsecutiveFailures,ws_total_failures:r.insightMetrics.wsTotalFailures,request_id:a.requestID,online:typeof navigator<"u"?navigator==null?void 0:navigator.onLine:null,user_agent:typeof navigator<"u"?navigator==null?void 0:navigator.userAgent:null,instance_client_id:r.insightMetrics.instanceClientId}}function ML(a){return Mw(a)}var AL=a=>a.code!==void 0,DL=a=>a.error!==void 0,RL=class{constructor({client:a}){this._buildUrl=()=>{const r=this.client._buildWSPayload(this.requestID),t=this.client.tokenManager.getToken(),n=this.client.options.wsUrlParams,o=new URLSearchParams(n);return o.set("json",r),o.set("api_key",this.client.key),o.set("authorization",`${t}`),o.set("stream-auth-type",this.client.getAuthType()),o.set("X-Stream-Client",this.client.getUserAgent()),`${this.client.wsBaseURL}/connect?${o.toString()}`},this.onlineStatusChanged=r=>{r.type==="offline"?(this._log("onlineStatusChanged() - Status changing to offline"),this._setHealth(!1)):r.type==="online"&&(this._log(`onlineStatusChanged() - Status changing to online. isHealthy: ${this.isHealthy}`),this.isHealthy||this._reconnect({interval:10}))},this.onopen=r=>{this.wsID===r&&this._log("onopen() - onopen callback",{wsID:r})},this.onmessage=(r,t)=>{var o,i;if(this.wsID!==r)return;this._log("onmessage() - onmessage callback",{event:t,wsID:r});const n=typeof t.data=="string"?JSON.parse(t.data):null;if(!this.isResolved&&n){if(this.isResolved=!0,n.error){(o=this.rejectPromise)==null||o.call(this,this._errorFromWSEvent(n,!1));return}(i=this.resolvePromise)==null||i.call(this,n),this._setHealth(!0)}this.lastEvent=new Date,n&&n.type==="health.check"&&this.scheduleNextPing(),this.client.handleEvent(t),this.scheduleConnectionCheck()},this.onclose=(r,t)=>{var n,o;if(this.wsID===r)if(this._log("onclose() - onclose callback - "+t.code,{event:t,wsID:r}),t.code===md.WS_CLOSED_SUCCESS){const i=new Error(`WS connection reject with error ${t.reason}`);i.reason=t.reason,i.code=t.code,i.wasClean=t.wasClean,i.target=t.target,(n=this.rejectPromise)==null||n.call(this,i),this._log(`onclose() - WS connection reject with error ${t.reason}`,{event:t})}else this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,(o=this.rejectPromise)==null||o.call(this,this._errorFromWSEvent(t)),this._log("onclose() - WS connection closed. Calling reconnect ...",{event:t}),this._reconnect()},this.onerror=(r,t)=>{var n;this.wsID===r&&(this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,(n=this.rejectPromise)==null||n.call(this,this._errorFromWSEvent(t)),this._log("onerror() - WS connection resulted into error",{event:t}),this._reconnect())},this._setHealth=r=>{if(r!==this.isHealthy){if(this.isHealthy=r,this.isHealthy){this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy});return}setTimeout(()=>{this.isHealthy||this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy})},5e3)}},this._errorFromWSEvent=(r,t=!0)=>{let n,o,i;AL(r)&&(n=r.code,o="unknown",i=r.reason),DL(r)&&(n=r.error.code,o=r.error.StatusCode,i=r.error.message),this._log(`_errorFromWSEvent() - WS failed with code ${n}`,{event:r},"warn");const c=new Error(`WS failed with code ${n} and reason - ${i}`);return c.code=n,c.StatusCode=o,c.isWSFailure=t,c},this._setupConnectionPromise=()=>{this.isResolved=!1,this.connectionOpen=new Promise((r,t)=>{this.resolvePromise=r,this.rejectPromise=t})},this.scheduleNextPing=()=>{this.healthCheckTimeoutRef&&clearTimeout(this.healthCheckTimeoutRef),this.healthCheckTimeoutRef=setTimeout(()=>{var t;const r=[{type:"health.check",client_id:this.client.clientID}];try{(t=this.ws)==null||t.send(JSON.stringify(r))}catch{}},this.pingInterval)},this.scheduleConnectionCheck=()=>{this.connectionCheckTimeoutRef&&clearTimeout(this.connectionCheckTimeoutRef),this.connectionCheckTimeoutRef=setTimeout(()=>{const r=new Date;this.lastEvent&&r.getTime()-this.lastEvent.getTime()>this.connectionCheckTimeout&&(this._log("scheduleConnectionCheck - going to reconnect"),this._setHealth(!1),this._reconnect())},this.connectionCheckTimeout)},this.client=a,this.consecutiveFailures=0,this.totalFailures=0,this.isConnecting=!1,this.isDisconnected=!1,this.isResolved=!1,this.isHealthy=!1,this.wsID=1,this.lastEvent=null,this.pingInterval=25*1e3,this.connectionCheckTimeout=this.pingInterval+10*1e3,X5(this.onlineStatusChanged)}_log(a,r={},t="info"){this.client.logger(t,"connection:"+a,{tags:["connection"],...r})}setClient(a){this.client=a}async connect(a=15e3){if(this.isConnecting)throw Error("You've called connect twice, can only attempt 1 connection at the time");this.isDisconnected=!1;try{const r=await this._connect();this.consecutiveFailures=0,this._log(`connect() - Established ws connection with healthcheck: ${r}`)}catch(r){this.isHealthy=!1,this.consecutiveFailures+=1;const t=r;if(t.code===md.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});else if(!t.isWSFailure)throw new Error(JSON.stringify({code:t.code,StatusCode:t.StatusCode,message:t.message,isWSFailure:t.isWSFailure}))}return await this._waitForHealthy(a)}_waitForHealthy(a=15e3){return Promise.race([(async()=>{for(let t=0;t<=a;t+=50)try{return await this.connectionOpen}catch(n){if(t===a)throw new Error(JSON.stringify({code:n.code,StatusCode:n.StatusCode,message:n.message,isWSFailure:n.isWSFailure}));await Ql(50)}})(),(async()=>{throw await Ql(a),this.isConnecting=!1,new Error(JSON.stringify({code:"",StatusCode:"",message:"initial WS connection could not be established",isWSFailure:!0}))})()])}disconnect(a){this._log(`disconnect() - Closing the websocket connection for wsID ${this.wsID}`),this.wsID+=1,this.isConnecting=!1,this.isDisconnected=!0,this.healthCheckTimeoutRef&&clearInterval(this.healthCheckTimeoutRef),this.connectionCheckTimeoutRef&&clearInterval(this.connectionCheckTimeoutRef),K5(this.onlineStatusChanged),this.isHealthy=!1,this.ws&&this.ws.removeAllListeners&&this.ws.removeAllListeners();let r;const{ws:t}=this;return t&&t.close&&t.readyState===t.OPEN?(r=new Promise(n=>{const o=i=>{this._log(`disconnect() - resolving isClosedPromise ${i?"with":"without"} close frame`,{event:i}),n()};t.onclose=o,setTimeout(o,a??1e3)}),this._log("disconnect() - Manually closed connection by calling client.disconnect()"),t.close(md.WS_CLOSED_SUCCESS,"Manually closed connection by calling client.disconnect()")):(this._log("disconnect() - ws connection doesn't exist or it is already closed."),r=Promise.resolve()),delete this.ws,r}async _connect(){if(this.isConnecting||this.isDisconnected&&this.client.options.enableWSFallback)return;this.isConnecting=!0,this.requestID=_i(),this.client.insightMetrics.connectionStartTimestamp=new Date().getTime();let a=!1;try{this._log("_connect() - waiting for token"),await this.client.tokenManager.tokenReady(),a=!0}catch{}try{a||(this._log("_connect() - tokenProvider failed before, so going to retry"),await this.client.tokenManager.loadToken()),this._setupConnectionPromise();const r=this._buildUrl();this._log(`_connect() - Connecting to ${r}`,{wsURL:r,requestID:this.requestID}),this.ws=new _L(r),this.ws.onopen=this.onopen.bind(this,this.wsID),this.ws.onclose=this.onclose.bind(this,this.wsID),this.ws.onerror=this.onerror.bind(this,this.wsID),this.ws.onmessage=this.onmessage.bind(this,this.wsID);const t=await this.connectionOpen;if(this.isConnecting=!1,t)return this.connectionID=t.connection_id,this.client.insightMetrics.wsConsecutiveFailures>0&&this.client.options.enableInsights&&(fd("ws_success_after_failure",ML(this)),this.client.insightMetrics.wsConsecutiveFailures=0),t}catch(r){if(this.isConnecting=!1,this._log("_connect() - Error - ",r),this.client.options.enableInsights){this.client.insightMetrics.wsConsecutiveFailures++,this.client.insightMetrics.wsTotalFailures++;const t=IL(this,BT(r));fd==null||fd("ws_fatal",t)}throw r}}async _reconnect(a={}){if(this._log("_reconnect() - Initiating the reconnect"),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (1) since already connecting or healthy");return}let r=a.interval;if(r||(r=op(this.consecutiveFailures)),await Ql(r),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (2) since already connecting or healthy");return}if(this.isDisconnected&&this.client.options.enableWSFallback){this._log("_reconnect() - Abort (3) since disconnect() is called");return}this._log("_reconnect() - Destroying current WS connection"),this._destroyCurrentWSConnection(),a.refreshToken&&await this.client.tokenManager.loadToken();try{await this._connect(),this._log("_reconnect() - Waiting for recoverCallBack"),await this.client.recoverState(),this._log("_reconnect() - Finished recoverCallBack"),this.consecutiveFailures=0}catch(t){if(this.isHealthy=!1,this.consecutiveFailures+=1,t.code===md.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())return this._log("_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});t.isWSFailure&&(this._log("_reconnect() - WS failure, so going to try to reconnect"),this._reconnect())}this._log("_reconnect() - == END ==")}_destroyCurrentWSConnection(){var a,r;this.wsID+=1;try{(a=this==null?void 0:this.ws)==null||a.removeAllListeners(),(r=this==null?void 0:this.ws)==null||r.close()}catch{}}},$m=Gd(YD()),R2=Gd(qD());function Aw(a,r,t={},n={}){if(typeof r!="string")throw new TypeError("userId should be a string");const o={user_id:r,...t};if($m.default==null||$m.default.sign==null)throw Error("Unable to find jwt crypto, if you are getting this error is probably because you are trying to generate tokens on browser or React Native (or other environment where crypto functions are not available). Please Note: token should only be generated server-side.");const i=Object.assign({algorithm:"HS256",noTimestamp:!0},n);return o.iat&&(i.noTimestamp=!1),$m.default.sign(o,a,i)}function T2(a,r={}){const t={server:!0},n=Object.assign({algorithm:"HS256",noTimestamp:!0},r);return $m.default.sign(t,a,n)}function TL(a){const r=a.split(".");if(r.length!==3)return"";const t=r[1],n=QD(t);return JSON.parse(n).user_id}function PL(a){return["eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",VD(JSON.stringify({user_id:a})),"devtoken"].join(".")}function LL(a,r,t){const n=Buffer.from(r,"utf8"),o=R2.default.createHmac("sha256",n).update(a).digest("hex");try{return R2.default.timingSafeEqual(Buffer.from(o),Buffer.from(t))}catch{return!1}}var BL=class{constructor(a){this.setTokenOrProvider=async(r,t)=>{this.validateToken(r,t),this.user=t,E0(r)&&(this.tokenProvider=r,this.type="provider"),typeof r=="string"&&(this.token=r,this.type="static"),!r&&this.user&&this.secret&&(this.token=Aw(this.secret,t.id,{},{}),this.type="static"),await this.loadToken()},this.reset=()=>{this.token=void 0,this.tokenProvider=void 0,this.type="static",this.user=void 0,this.loadTokenPromise=null},this.validateToken=(r,t)=>{if(!(t&&t.anon&&!r)){if(!this.secret&&!r)throw new Error("User token can not be empty");if(r&&typeof r!="string"&&!E0(r))throw new Error("user token should either be a string or a function");if(typeof r=="string"){if(t.anon&&r==="")return;const n=TL(r);if(r!=null&&(n==null||n===""||n!==t.id))throw new Error("userToken does not have a user_id or is not matching with user.id")}}},this.tokenReady=()=>this.loadTokenPromise,this.loadToken=()=>(this.loadTokenPromise=new Promise(async(r,t)=>{if(this.type==="static")return r(this.token);if(this.tokenProvider&&typeof this.tokenProvider!="string"){try{this.token=await this.tokenProvider()}catch(n){return t(new Error(`Call to tokenProvider failed with message: ${n}`))}r(this.token)}}),this.loadTokenPromise),this.getToken=()=>{if(this.token)return this.token;if(this.user&&this.user.anon&&!this.token)return this.token;if(this.secret)return T2(this.secret);throw new Error("Both secret and user tokens are not set. Either client.connectUser wasn't called or client.disconnect was called")},this.isStatic=()=>this.type==="static",this.loadTokenPromise=null,a&&(this.secret=a),this.type="static",this.secret&&(this.token=T2(this.secret))}},zL={"-1":{name:"InternalSystemError",retryable:!0},2:{name:"AccessKeyError",retryable:!1},3:{name:"AuthenticationFailedError",retryable:!0},4:{name:"InputError",retryable:!1},6:{name:"DuplicateUsernameError",retryable:!1},9:{name:"RateLimitError",retryable:!0},16:{name:"DoesNotExistError",retryable:!1},17:{name:"NotAllowedError",retryable:!1},18:{name:"EventNotSupportedError",retryable:!1},19:{name:"ChannelFeatureNotSupportedError",retryable:!1},20:{name:"MessageTooLongError",retryable:!1},21:{name:"MultipleNestingLevelError",retryable:!1},22:{name:"PayloadTooBigError",retryable:!1},23:{name:"RequestTimeoutError",retryable:!0},24:{name:"MaxHeaderSizeExceededError",retryable:!1},40:{name:"AuthErrorTokenExpired",retryable:!1},41:{name:"AuthErrorTokenNotValidYet",retryable:!1},42:{name:"AuthErrorTokenUsedBeforeIssuedAt",retryable:!1},43:{name:"AuthErrorTokenSignatureInvalid",retryable:!1},44:{name:"CustomCommandEndpointMissingError",retryable:!1},45:{name:"CustomCommandEndpointCallError",retryable:!0},46:{name:"ConnectionIDNotFoundError",retryable:!1},60:{name:"CoolDownError",retryable:!0},69:{name:"ErrWrongRegion",retryable:!1},70:{name:"ErrQueryChannelPermissions",retryable:!1},71:{name:"ErrTooManyConnections",retryable:!0},99:{name:"AppSuspendedError",retryable:!1}};function OL(a){return a.code!==void 0}function P2(a){if(!a.code)return!1;const r=zL[`${a.code}`];return r?r.retryable:!1}function FL(a){return a.code===46}function WL(a){if(typeof a.isWSFailure=="boolean")return a.isWSFailure;try{return JSON.parse(a.message).isWSFailure}catch{return!1}}function UL(a){return!a.status||a.status<200||300<=a.status}var $L=class{constructor({client:a}){this._onlineStatusChanged=r=>{var t;if(this._log(`_onlineStatusChanged() - ${r.type}`),r.type==="offline"){this._setState("CLOSED"),(t=this.cancelToken)==null||t.cancel("disconnect() is called"),this.cancelToken=void 0;return}r.type==="online"&&this.state==="CLOSED"&&this.connect(!0)},this._req=async(r,t,n)=>{var o;!this.cancelToken&&!r.close&&(this.cancelToken=Td.CancelToken.source());try{const i=await this.client.doAxiosRequest("get",this.client.baseURL.replace(":3030",":8900")+"/longpoll",void 0,{config:{...t,cancelToken:(o=this.cancelToken)==null?void 0:o.token},params:r});return this.consecutiveFailures=0,i}catch(i){if(this.consecutiveFailures+=1,n&&P2(i))return this._log("_req() - Retryable error, retrying request"),await Ql(op(this.consecutiveFailures)),this._req(r,t,n);throw i}},this._poll=async()=>{var r;for(;this.state==="CONNECTED";)try{const t=await this._req({},{timeout:3e4},!0);if((r=t.events)!=null&&r.length)for(let n=0;n<t.events.length;n++)this.client.dispatchEvent(t.events[n])}catch(t){if(Td.isCancel(t)){this._log("_poll() - axios canceled request");return}if(FL(t)){this._log("_poll() - ConnectionID error, connecting without ID..."),this._setState("DISCONNECTED"),this.connect(!0);return}if(OL(t)&&!P2(t)){this._setState("CLOSED");return}await Ql(op(this.consecutiveFailures))}},this.connect=async(r=!1)=>{if(this.state==="CONNECTING"){this._log("connect() - connecting already in progress",{reconnect:r},"warn");return}if(this.state==="CONNECTED"){this._log("connect() - already connected and polling",{reconnect:r},"warn");return}this._setState("CONNECTING"),this.connectionID=void 0;try{const{event:t}=await this._req({json:this.client._buildWSPayload()},{timeout:8e3},r);return this._setState("CONNECTED"),this.connectionID=t.connection_id,this.client.dispatchEvent(t),this._poll(),r&&this.client.recoverState(),t}catch(t){throw this._setState("CLOSED"),t}},this.isHealthy=()=>!!this.connectionID&&this.state==="CONNECTED",this.disconnect=async(r=2e3)=>{var n;K5(this._onlineStatusChanged),this._setState("DISCONNECTED"),(n=this.cancelToken)==null||n.cancel("disconnect() is called"),this.cancelToken=void 0;const t=this.connectionID;this.connectionID=void 0;try{await this._req({close:!0,connection_id:t},{timeout:r},!1),this._log("disconnect() - Closed connectionID")}catch(o){this._log("disconnect() - Failed",{err:o},"error")}},this.client=a,this.state="INIT",this.consecutiveFailures=0,X5(this._onlineStatusChanged)}_log(a,r={},t="info"){this.client.logger(t,"WSConnectionFallback:"+a,{tags:["connection_fallback","connection"],...r})}_setState(a){this._log(`_setState() - ${a}`),this.state==="CONNECTING"&&a==="CONNECTED"&&this.client.dispatchEvent({type:"connection.changed",online:!0}),(a==="CLOSED"||a==="DISCONNECTED")&&this.client.dispatchEvent({type:"connection.changed",online:!1}),this.state=a}},L2=class{constructor(a,r,t,n){this.client=a,this.type=r,this.id=t,this.data=n}create(){var r,t,n,o,i;const a={name:(r=this.data)==null?void 0:r.name,filter:(t=this.data)==null?void 0:t.filter,description:(n=this.data)==null?void 0:n.description,all_sender_channels:(o=this.data)==null?void 0:o.all_sender_channels,all_users:(i=this.data)==null?void 0:i.all_users};return this.client.createSegment(this.type,this.id,a)}verifySegmentId(){if(!this.id)throw new Error("Segment id is missing. Either create the segment using segment.create() or set the id during instantiation - const segment = client.segment(id)")}get(){return this.verifySegmentId(),this.client.getSegment(this.id)}update(a){return this.verifySegmentId(),this.client.updateSegment(this.id,a)}addTargets(a){return this.verifySegmentId(),this.client.addSegmentTargets(this.id,a)}removeTargets(a){return this.verifySegmentId(),this.client.removeSegmentTargets(this.id,a)}delete(){return this.verifySegmentId(),this.client.deleteSegment(this.id)}targetExists(a){return this.verifySegmentId(),this.client.segmentTargetExists(this.id,a)}queryTargets(a={},r=[],t={}){return this.verifySegmentId(),this.client.querySegmentTargets(this.id,a,r,t)}},Cm={user:"stream:user",message:"stream:chat:v1:message",userprofile:"stream:v1:user_profile"},jL=class{constructor(a){this.client=a}flagUser(a,r,t={}){return this.flag(Cm.user,a,"",r,t)}flagMessage(a,r,t={}){return this.flag(Cm.message,a,"",r,t)}async flag(a,r,t,n,o={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/flag",{entity_type:a,entity_id:r,entity_creator_id:t,reason:n,...o})}async muteUser(a,r={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/mute",{target_ids:[a],...r})}async unmuteUser(a,r){return await this.client.post(this.client.baseURL+"/api/v2/moderation/unmute",{target_ids:[a],...r})}async getUserModerationReport(a,r={}){return await this.client.get(this.client.baseURL+"/api/v2/moderation/user_report",{user_id:a,...r})}async queryReviewQueue(a={},r=[],t={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/review_queue",{filter:a,sort:Xn(r),...t})}async upsertConfig(a){return await this.client.post(this.client.baseURL+"/api/v2/moderation/config",a)}async getConfig(a,r){return await this.client.get(this.client.baseURL+"/api/v2/moderation/config/"+a,r)}async deleteConfig(a,r){return await this.client.delete(this.client.baseURL+"/api/v2/moderation/config/"+a,r)}async queryConfigs(a,r,t={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/configs",{filter:a,sort:r,...t})}async submitAction(a,r,t={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/submit_action",{action_type:a,item_id:r,...t})}async check(a,r,t,n,o,i){return await this.client.post(this.client.baseURL+"/api/v2/moderation/check",{entity_type:a,entity_id:r,entity_creator_id:t,moderation_payload:n,config_key:o,options:i})}async checkUserProfile(a,r){if(!r.username&&!r.image)throw new Error("Either username or image must be provided");const t={};return r.username&&(t.texts=[r.username]),r.image&&(t.images=[r.image]),await this.check(Cm.userprofile,a,a,t,"user_profile:default",{force_sync:!0,test_mode:!0})}async addCustomFlags(a,r,t,n,o){return await this.client.post(this.client.baseURL+"/api/v2/moderation/custom_check",{entity_type:a,entity_id:r,entity_creator_id:t,moderation_payload:n,flags:o})}async addCustomMessageFlags(a,r){return await this.addCustomFlags(Cm.message,a,"",{},r)}},HL=1e3,B2=25,z2={active:!1,isThreadOrderStale:!1,threads:[],unreadThreadCount:0,unseenThreadIds:[],lastConnectionDropAt:null,pagination:{isLoading:!1,isLoadingNext:!1,nextCursor:null},ready:!1},YL=class extends Qd{constructor({client:a}){super(),this.resetState=()=>{this.state.next(z2)},this.activate=()=>{this.state.partialNext({active:!0})},this.deactivate=()=>{this.state.partialNext({active:!1})},this.registerSubscriptions=()=>{this.hasSubscriptions||(this.addUnsubscribeFunction(this.subscribeUnreadThreadsCountChange()),this.addUnsubscribeFunction(this.subscribeManageThreadSubscriptions()),this.addUnsubscribeFunction(this.subscribeReloadOnActivation()),this.addUnsubscribeFunction(this.subscribeNewReplies()),this.addUnsubscribeFunction(this.subscribeRecoverAfterConnectionDrop()),this.addUnsubscribeFunction(this.subscribeChannelDeleted()))},this.subscribeUnreadThreadsCountChange=()=>{const{unread_threads:r=0}=this.client.user??{};this.state.partialNext({unreadThreadCount:r});const t=["health.check","notification.mark_read","notification.thread_message_new","notification.channel_deleted"].map(n=>this.client.on(n,o=>{const{unread_threads:i}=o.me??o;typeof i=="number"&&this.state.partialNext({unreadThreadCount:i})}).unsubscribe);return()=>t.forEach(n=>n())},this.subscribeChannelDeleted=()=>this.client.on("notification.channel_deleted",r=>{const{cid:t}=r,{threads:n}=this.state.getLatestValue(),o=n.filter(i=>i.channel.cid!==t);this.state.partialNext({threads:o})}).unsubscribe,this.subscribeManageThreadSubscriptions=()=>this.state.subscribeWithSelector(r=>({threads:r.threads}),({threads:r},t)=>{const{threads:n=[]}=t??{},o=n.filter(i=>i!==this.threadsById[i.id]);r.forEach(i=>i.registerSubscriptions()),o.forEach(i=>i.unregisterSubscriptions())}),this.subscribeReloadOnActivation=()=>this.state.subscribeWithSelector(r=>({active:r.active}),({active:r})=>{r&&this.reload()}),this.subscribeNewReplies=()=>this.client.on("notification.thread_message_new",r=>{var i;const t=(i=r.message)==null?void 0:i.parent_id;if(!t)return;const{unseenThreadIds:n,ready:o}=this.state.getLatestValue();o&&(this.threadsById[t]?this.state.partialNext({isThreadOrderStale:!0}):n.includes(t)||this.state.partialNext({unseenThreadIds:n.concat(t)}))}).unsubscribe,this.subscribeRecoverAfterConnectionDrop=()=>{const r=this.client.on("connection.changed",o=>{o.online===!1&&this.state.next(i=>i.lastConnectionDropAt?i:{...i,lastConnectionDropAt:new Date})}).unsubscribe,t=nw(()=>{const{lastConnectionDropAt:o}=this.state.getLatestValue();o&&this.reload({force:!0})},HL,{trailing:!0}),n=this.client.on("connection.recovered",t).unsubscribe;return()=>{r(),n()}},this.unregisterSubscriptions=()=>(this.state.getLatestValue().threads.forEach(r=>r.unregisterSubscriptions()),super.unregisterSubscriptions()),this.reload=async({force:r=!1}={})=>{const{threads:t,unseenThreadIds:n,isThreadOrderStale:o,pagination:i,ready:c}=this.state.getLatestValue();if(i.isLoading||!r&&c&&!n.length&&!o)return;const u=t.length+n.length;try{this.state.next(f=>({...f,pagination:{...f.pagination,isLoading:!0}}));const m=await this.queryThreads({limit:Math.min(u,B2)||B2}),g=[];for(const f of m.threads){const y=this.threadsById[f.id];y?(g.push(y),y.hasStaleState&&y.hydrateState(f)):g.push(f)}this.state.next(f=>({...f,threads:g,unseenThreadIds:[],isThreadOrderStale:!1,pagination:{...f.pagination,isLoading:!1,nextCursor:m.next??null},ready:!0}))}catch(m){this.client.logger("error",m.message),this.state.next(g=>({...g,pagination:{...g.pagination,isLoading:!1}}))}},this.queryThreads=(r={})=>this.client.queryThreads({limit:25,participant_limit:10,reply_limit:10,watch:!0,...r}),this.loadNextPage=async(r={})=>{const{pagination:t}=this.state.getLatestValue();if(!(t.isLoadingNext||!t.nextCursor))try{this.state.partialNext({pagination:{...t,isLoadingNext:!0}});const n=await this.queryThreads({...r,next:t.nextCursor});this.state.next(o=>({...o,threads:n.threads.length?o.threads.concat(n.threads):o.threads,pagination:{...o.pagination,nextCursor:n.next??null,isLoadingNext:!1}}))}catch(n){this.client.logger("error",n.message),this.state.next(o=>({...o,pagination:{...o.pagination,isLoadingNext:!1}}))}},this.client=a,this.state=new ir(z2),this.threadsByIdGetterCache={threads:[],threadsById:{}}}get threadsById(){const{threads:a}=this.state.getLatestValue();if(a===this.threadsByIdGetterCache.threads)return this.threadsByIdGetterCache.threadsById;const r=a.reduce((t,n)=>(t[n.id]=n,t),{});return this.threadsByIdGetterCache.threads=a,this.threadsByIdGetterCache.threadsById=r,r}},qL=a=>a.type==="poll.updated",GL=a=>a.type==="poll.closed",ZL=a=>a.type==="poll.vote_casted",VL=a=>a.type==="poll.vote_changed",QL=a=>a.type==="poll.vote_removed",ws=a=>!!(a!=null&&a.answer_text),O2=class{constructor({client:a,poll:r}){this.getInitialStateFromPollResponse=t=>{const{own_votes:n,id:o,...i}=t,{ownAnswer:c,ownVotes:u}=(n==null?void 0:n.reduce((m,g)=>(ws(g)?m.ownAnswer=g:m.ownVotes.push(g),m),{ownVotes:[]}))??{ownVotes:[]};return{...i,lastActivityAt:new Date,maxVotedOptionIds:rd(i.vote_counts_by_option),ownAnswer:c,ownVotesByOptionId:JL(u)}},this.upsertOfflineDb=()=>{var t;(t=this.client.offlineDb)==null||t.executeQuerySafely(n=>n.upsertPoll({poll:KL(this)}),{method:"upsertPoll"})},this.reinitializeState=t=>{this.state.partialNext(this.getInitialStateFromPollResponse(t))},this.handlePollUpdated=t=>{var i;if((i=t.poll)!=null&&i.id&&t.poll.id!==this.id||!qL(t))return;const{id:n,...o}=XL(t.poll);this.state.partialNext({...o,lastActivityAt:new Date(t.created_at)}),this.upsertOfflineDb()},this.handlePollClosed=t=>{var n;(n=t.poll)!=null&&n.id&&t.poll.id!==this.id||GL(t)&&(this.state.partialNext({is_closed:!0,lastActivityAt:new Date(t.created_at)}),this.upsertOfflineDb())},this.handleVoteCasted=t=>{var f;if((f=t.poll)!=null&&f.id&&t.poll.id!==this.id||!ZL(t))return;const n=this.data,o=t.poll_vote.user_id===this.client.userID;let i=[...n.latest_answers],c=n.ownAnswer;const u=n.ownVotesByOptionId;let m=n.maxVotedOptionIds;o&&(ws(t.poll_vote)?c=t.poll_vote:t.poll_vote.option_id&&(u[t.poll_vote.option_id]=t.poll_vote)),ws(t.poll_vote)?i=[t.poll_vote,...i]:m=rd(t.poll.vote_counts_by_option);const g=Wh(t.poll);this.state.partialNext({...g,latest_answers:i,lastActivityAt:new Date(t.created_at),ownAnswer:c,ownVotesByOptionId:u,maxVotedOptionIds:m}),this.upsertOfflineDb()},this.handleVoteChanged=t=>{var f;if((f=t.poll)!=null&&f.id&&t.poll.id!==this.id||!VL(t))return;const n=this.data,o=t.poll_vote.user_id===this.client.userID;let i=[...n.latest_answers],c=n.ownAnswer,u=n.ownVotesByOptionId,m=n.maxVotedOptionIds;o?ws(t.poll_vote)?(i=[t.poll_vote,...i.filter(y=>y.id!==t.poll_vote.id)],c=t.poll_vote):t.poll_vote.option_id&&(t.poll.enforce_unique_vote?u={[t.poll_vote.option_id]:t.poll_vote}:(u=Object.entries(u).reduce((y,[v,S])=>(v!==t.poll_vote.option_id&&S.id===t.poll_vote.id||(y[v]=S),y),{}),u[t.poll_vote.option_id]=t.poll_vote),(c==null?void 0:c.id)===t.poll_vote.id&&(c=void 0),m=rd(t.poll.vote_counts_by_option)):ws(t.poll_vote)?i=[t.poll_vote,...i]:m=rd(t.poll.vote_counts_by_option);const g=Wh(t.poll);this.state.partialNext({...g,latest_answers:i,lastActivityAt:new Date(t.created_at),ownAnswer:c,ownVotesByOptionId:u,maxVotedOptionIds:m}),this.upsertOfflineDb()},this.handleVoteRemoved=t=>{var f;if((f=t.poll)!=null&&f.id&&t.poll.id!==this.id||!QL(t))return;const n=this.data,o=t.poll_vote.user_id===this.client.userID;let i=[...n.latest_answers],c=n.ownAnswer;const u={...n.ownVotesByOptionId};let m=n.maxVotedOptionIds;ws(t.poll_vote)?(i=i.filter(y=>y.id!==t.poll_vote.id),o&&(c=void 0)):(m=rd(t.poll.vote_counts_by_option),o&&t.poll_vote.option_id&&delete u[t.poll_vote.option_id]);const g=Wh(t.poll);this.state.partialNext({...g,latest_answers:i,lastActivityAt:new Date(t.created_at),ownAnswer:c,ownVotesByOptionId:u,maxVotedOptionIds:m}),this.upsertOfflineDb()},this.query=async t=>{const{poll:n}=await this.client.getPoll(t);return this.state.partialNext({...n,lastActivityAt:new Date}),n},this.update=async t=>await this.client.updatePoll({...t,id:this.id}),this.partialUpdate=async t=>await this.client.partialUpdatePoll(this.id,t),this.close=async()=>await this.client.closePoll(this.id),this.delete=async()=>await this.client.deletePoll(this.id),this.createOption=async t=>await this.client.createPollOption(this.id,t),this.updateOption=async t=>await this.client.updatePollOption(this.id,t),this.deleteOption=async t=>await this.client.deletePollOption(this.id,t),this.castVote=async(t,n)=>{const{max_votes_allowed:o,ownVotesByOptionId:i}=this.data;if(o&&o===Object.keys(i).length){let u=Object.values(i)[0];Object.values(i).slice(1).forEach(m=>{(!(u!=null&&u.created_at)||new Date(m.created_at)<new Date(u.created_at))&&(u=m)}),u!=null&&u.id&&await this.removeVote(u.id,n)}return await this.client.castPollVote(n,this.id,{option_id:t})},this.removeVote=async(t,n)=>await this.client.removePollVote(n,this.id,t),this.addAnswer=async(t,n)=>await this.client.addPollAnswer(n,this.id,t),this.removeAnswer=async(t,n)=>await this.client.removePollVote(n,this.id,t),this.queryAnswers=async t=>await this.client.queryPollAnswers(this.id,t.filter,t.sort,t.options),this.queryOptionVotes=async t=>await this.client.queryPollVotes(this.id,t.filter,t.sort,t.options),this.client=a,this.id=r.id,this.state=new ir(this.getInitialStateFromPollResponse(r))}get data(){return this.state.getLatestValue()}};function rd(a){let r=0,t=[];for(const[n,o]of Object.entries(a??{}))o>r?(t=[n],r=o):o===r&&t.push(n);return t}function JL(a){return a?a.reduce((r,t)=>(ws(t)||!t.option_id||(r[t.option_id]=t),r),{}):{}}function XL(a){return{allow_answers:a.allow_answers,allow_user_suggested_options:a.allow_user_suggested_options,description:a.description,enforce_unique_vote:a.enforce_unique_vote,id:a.id,is_closed:a.is_closed,max_votes_allowed:a.max_votes_allowed,name:a.name,options:a.options,voting_visibility:a.voting_visibility}}function KL(a){const{lastActivityAt:r,maxVotedOptionIds:t,ownVotesByOptionId:n,ownAnswer:o,...i}=a.data,c=[...Object.values(n),...o?[o]:[]].sort((u,m)=>Date.parse(u.created_at)-Date.parse(m.created_at));return{...i,own_votes:c,id:a.id}}function Wh(a){return{answers_count:a.answers_count,latest_votes_by_option:a.latest_votes_by_option,vote_count:a.vote_count,vote_counts_by_option:a.vote_counts_by_option}}var e9=class extends Qd{constructor({client:a}){super(),this.pollCache=new Map,this.fromState=r=>this.pollCache.get(r),this.registerSubscriptions=()=>{this.hasSubscriptions||(this.addUnsubscribeFunction(this.subscribeMessageNew()),this.addUnsubscribeFunction(this.subscribePollUpdated()),this.addUnsubscribeFunction(this.subscribePollClosed()),this.addUnsubscribeFunction(this.subscribeVoteCasted()),this.addUnsubscribeFunction(this.subscribeVoteChanged()),this.addUnsubscribeFunction(this.subscribeVoteRemoved()))},this.createPoll=async r=>{const{poll:t}=await this.client.createPoll(r);return new O2({client:this.client,poll:t})},this.getPoll=async r=>{const t=this.fromState(r);if(t)return this.client.getPoll(r).then(({poll:o})=>this.setOrOverwriteInCache(o,!0)),t;const{poll:n}=await this.client.getPoll(r);return this.setOrOverwriteInCache(n),this.fromState(r)},this.queryPolls=async(r,t=[],n={})=>{const{polls:o,next:i}=await this.client.queryPolls(r,t,n);return{polls:o.map(u=>(this.setOrOverwriteInCache(u,!0),this.fromState(u.id))),next:i}},this.hydratePollCache=(r,t)=>{for(const n of r){if(!n.poll)continue;const o=n.poll;this.setOrOverwriteInCache(o,t)}},this.setOrOverwriteInCache=(r,t)=>{if(!this.client._cacheEnabled())return;const n=this.fromState(r.id);if(n)t&&n.reinitializeState(r);else{const o=new O2({client:this.client,poll:r});this.pollCache.set(o.id,o)}},this.subscribePollUpdated=()=>this.client.on("poll.updated",r=>{var t,n;(t=r.poll)!=null&&t.id&&((n=this.fromState(r.poll.id))==null||n.handlePollUpdated(r))}).unsubscribe,this.subscribePollClosed=()=>this.client.on("poll.closed",r=>{var t,n;(t=r.poll)!=null&&t.id&&((n=this.fromState(r.poll.id))==null||n.handlePollClosed(r))}).unsubscribe,this.subscribeVoteCasted=()=>this.client.on("poll.vote_casted",r=>{var t,n;(t=r.poll)!=null&&t.id&&((n=this.fromState(r.poll.id))==null||n.handleVoteCasted(r))}).unsubscribe,this.subscribeVoteChanged=()=>this.client.on("poll.vote_changed",r=>{var t,n;(t=r.poll)!=null&&t.id&&((n=this.fromState(r.poll.id))==null||n.handleVoteChanged(r))}).unsubscribe,this.subscribeVoteRemoved=()=>this.client.on("poll.vote_removed",r=>{var t,n;(t=r.poll)!=null&&t.id&&((n=this.fromState(r.poll.id))==null||n.handleVoteRemoved(r))}).unsubscribe,this.subscribeMessageNew=()=>this.client.on("message.new",r=>{const{message:t}=r;if(t){const n=Ir(t);this.hydratePollCache([n])}}).unsubscribe,this.client=a}get data(){return this.pollCache}},F2={"channel.deleted":"channelDeletedHandler","channel.hidden":"channelHiddenHandler","channel.truncated":"channelTruncatedHandler","channel.updated":"channelUpdatedHandler","channel.visible":"channelVisibleHandler","message.new":"newMessageHandler","member.updated":"memberUpdatedHandler","notification.added_to_channel":"notificationAddedToChannelHandler","notification.message_new":"notificationNewMessageHandler","notification.removed_from_channel":"notificationRemovedFromChannelHandler"},t9={abortInFlightQuery:!1,allowNotLoadedChannelPromotionForEvent:{"channel.visible":!0,"message.new":!0,"notification.added_to_channel":!0,"notification.message_new":!0},lockChannelOrder:!1},Uh={limit:10,offset:0},a9=class extends Qd{constructor({client:a,eventHandlerOverrides:r={},options:t={}}){super(),this.eventHandlers=new Map,this.eventHandlerOverrides=new Map,this.options={},this.stateOptions={},this.setChannels=n=>{var u;this.state.next(m=>{const{channels:g}=m,f=dw(n)?n(g):n;return g===f?m:{...m,channels:f}});const{channels:o,pagination:{filters:i,sort:c}}=this.state.getLatestValue();(u=this.client.offlineDb)==null||u.executeQuerySafely(m=>m.upsertCidsForQuery({cids:o.map(g=>g.cid),filters:i,sort:c}),{method:"upsertCidsForQuery"})},this.setEventHandlerOverrides=(n={})=>{const o=Object.entries(n).reduce((i,[c,u])=>(u&&(i[c]=u),i),{});this.eventHandlerOverrides=new Map(Object.entries(o))},this.setOptions=(n={})=>{this.options={...t9,...n}},this.executeChannelsQuery=async(n,o=0)=>{var y;const{filters:i,sort:c,options:u,stateOptions:m}=n,{offset:g,limit:f}={...Uh,...u};try{const v=await this.client.queryChannels(i,c,u,m),S=g+((v==null?void 0:v.length)??0),w={...u,offset:S},{pagination:x}=this.state.getLatestValue();this.state.partialNext({channels:v,pagination:{...x,hasNext:((v==null?void 0:v.length)??0)>=f,isLoading:!1,options:w},initialized:!0,error:void 0}),(y=this.client.offlineDb)==null||y.executeQuerySafely(k=>k.upsertCidsForQuery({cids:v.map(E=>E.cid),filters:x.filters,sort:x.sort}),{method:"upsertCidsForQuery"})}catch(v){if(o>=NT){console.warn(v);const S=new Error(`Maximum number of retries reached in queryChannels. Last error message is: ${v}`);this.state.partialNext({error:S});return}return await Ql(_T),this.executeChannelsQuery(n,o+1)}},this.queryChannels=async(n,o=[],i={},c={})=>{var y,v;const{pagination:{isLoading:u,filters:m},initialized:g}=this.state.getLatestValue();if(u&&!this.options.abortInFlightQuery&&JSON.stringify(m)===JSON.stringify(n))return;const f={filters:n,sort:o,options:i,stateOptions:c};try{if(this.stateOptions=c,this.state.next(S=>({...S,pagination:{...S.pagination,isLoading:!0,isLoadingNext:!1,filters:n,sort:o,options:i},error:void 0})),(y=this.client.offlineDb)!=null&&y.getChannelsForQuery&&((v=this.client.user)!=null&&v.id)){if(!g){const S=await this.client.offlineDb.getChannelsForQuery({userId:this.client.user.id,filters:n,sort:o});if(S){const w=this.client.hydrateActiveChannels(S,{offlineMode:!0,skipInitialization:[]});this.state.partialNext({channels:w})}}if(!this.client.offlineDb.syncManager.syncStatus){this.client.offlineDb.syncManager.scheduleSyncStatusChangeCallback(this.id,async()=>{await this.executeChannelsQuery(f)});return}}await this.executeChannelsQuery(f)}catch(S){throw this.client.logger("error",S.message),this.state.next(w=>({...w,pagination:{...w.pagination,isLoading:!1}})),S}},this.loadNext=async()=>{const{pagination:n,initialized:o}=this.state.getLatestValue(),{filters:i,sort:c,options:u,isLoadingNext:m,hasNext:g}=n;if(!(!o||m||!g))try{const{offset:f,limit:y}={...Uh,...u};this.state.partialNext({pagination:{...n,isLoading:!1,isLoadingNext:!0}});const v=await this.client.queryChannels(i,c,u,this.stateOptions),{channels:S}=this.state.getLatestValue(),w=f+((v==null?void 0:v.length)??0),x={...u,offset:w};this.state.partialNext({channels:UT([...S||[],...v],"cid"),pagination:{...n,hasNext:((v==null?void 0:v.length)??0)>=y,isLoading:!1,isLoadingNext:!1,options:x}})}catch(f){throw this.client.logger("error",f.message),this.state.next(y=>({...y,pagination:{...y.pagination,isLoadingNext:!1}})),f}},this.notificationAddedToChannelHandler=async n=>{var y;const{id:o,type:i,members:c}=(n==null?void 0:n.channel)??{};if(!i||!((y=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&y["notification.added_to_channel"]))return;const u=await Dh({client:this.client,id:o,members:c==null?void 0:c.reduce((v,{user:S,user_id:w})=>{const x=w||(S==null?void 0:S.id);return x&&v.push(x),v},[]),type:i}),{pagination:m,channels:g}=this.state.getLatestValue();if(!g)return;const{sort:f}=m??{};this.setChannels(Em({channels:g,channelToMove:u,sort:f}))},this.channelDeletedHandler=n=>{const{channels:o}=this.state.getLatestValue();if(!o)return;const i=[...o],c=i.findIndex(u=>{var m;return u.cid===(n.cid||((m=n.channel)==null?void 0:m.cid))});c<0||(i.splice(c,1),this.setChannels(i))},this.channelHiddenHandler=this.channelDeletedHandler,this.newMessageHandler=n=>{var E;const{pagination:o,channels:i}=this.state.getLatestValue();if(!i)return;const{filters:c,sort:u}=o??{},m=n.channel_type,g=n.channel_id;if(!m||!g)return;const f=this.client.channel(m,g),y=i.indexOf(f),v=y>=0,S=lp(f),w=bm(f),x=vm(c),k=w0(u);x&&w&&!c.archived||x&&!w&&c.archived||k&&S||this.options.lockChannelOrder||!v&&!((E=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&E["message.new"])||this.setChannels(Em({channels:i,channelToMove:f,channelToMoveIndexWithinChannels:y,sort:u}))},this.notificationNewMessageHandler=async n=>{var S;const{id:o,type:i}=(n==null?void 0:n.channel)??{};if(!o||!i)return;const c=await Dh({client:this.client,id:o,type:i}),{channels:u,pagination:m}=this.state.getLatestValue(),{filters:g,sort:f}=m??{},y=vm(g),v=bm(c);!u||y&&v&&!g.archived||y&&!v&&g.archived||!((S=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&S["notification.message_new"])||this.setChannels(Em({channels:u,channelToMove:c,sort:f}))},this.channelVisibleHandler=async n=>{var S;const{channel_type:o,channel_id:i}=n;if(!o||!i)return;const c=await Dh({client:this.client,id:n.channel_id,type:n.channel_type}),{channels:u,pagination:m}=this.state.getLatestValue(),{sort:g,filters:f}=m??{},y=vm(f),v=bm(c);!u||y&&v&&!f.archived||y&&!v&&f.archived||!((S=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&S["channel.visible"])||this.setChannels(Em({channels:u,channelToMove:c,sort:g}))},this.notificationRemovedFromChannelHandler=this.channelDeletedHandler,this.memberUpdatedHandler=n=>{var _;const{pagination:o,channels:i}=this.state.getLatestValue(),{filters:c,sort:u}=o;if(!((_=n.member)!=null&&_.user)||n.member.user.id!==this.client.userID||!n.channel_type||!n.channel_id)return;const m=n.channel_type,g=n.channel_id,f=w0(u),y=vm(c),v=ow({atIndex:0,sort:u,targetKey:"pinned_at"});if(!i||!f&&!y||this.options.lockChannelOrder)return;const S=this.client.channel(m,g),w=i.indexOf(S),x=w>=0,k=lp(S),E=bm(S),I=[...i];if(x&&I.splice(w,1),y&&!E&&(c!=null&&c.archived)||y&&E&&!(c!=null&&c.archived)){this.setChannels(I);return}let M=null;(v===1||v===-1&&!k)&&(M=lw({channels:I}));const N=typeof M=="number"?M+1:0;i[N]!==S&&(I.splice(N,0,S),this.setChannels(I))},this.subscriptionOrOverride=n=>{const o=F2[n.type],i=this.eventHandlers.get(o),c=this.eventHandlerOverrides.get(o);if(c&&typeof c=="function"){c(this.setChannels,n);return}i&&typeof i=="function"&&i(n)},this.registerSubscriptions=()=>{if(!this.hasSubscriptions)for(const n of Object.keys(F2))this.addUnsubscribeFunction(this.client.on(n,this.subscriptionOrOverride).unsubscribe)},this.id=`channel-manager-${eo()}`,this.client=a,this.state=new ir({channels:[],pagination:{isLoading:!1,isLoadingNext:!1,hasNext:!1,filters:{},sort:{},options:Uh},initialized:!1,error:void 0}),this.setEventHandlerOverrides(r),this.setOptions(t),this.eventHandlers=new Map(Object.entries({channelDeletedHandler:this.channelDeletedHandler,channelHiddenHandler:this.channelHiddenHandler,channelVisibleHandler:this.channelVisibleHandler,memberUpdatedHandler:this.memberUpdatedHandler,newMessageHandler:this.newMessageHandler,notificationAddedToChannelHandler:this.notificationAddedToChannelHandler,notificationNewMessageHandler:this.notificationNewMessageHandler,notificationRemovedFromChannelHandler:this.notificationRemovedFromChannelHandler}))}},n9={error:1e4,warning:5e3,info:3e3,success:3e3},r9=class{constructor(a={}){this.timeouts=new Map,this.store=new ir({notifications:[]}),this.config={...a,durations:a.durations||n9}}get notifications(){return this.store.getLatestValue().notifications}get warning(){return this.notifications.filter(a=>a.severity==="warning")}get error(){return this.notifications.filter(a=>a.severity==="error")}get info(){return this.notifications.filter(a=>a.severity==="info")}get success(){return this.notifications.filter(a=>a.severity==="success")}add({message:a,origin:r,options:t={}}){const n=eo(),o=Date.now(),i={id:n,message:a,origin:r,severity:t.severity||"info",createdAt:o,expiresAt:t.duration?o+t.duration:void 0,autoClose:t.autoClose??!0,actions:t.actions,metadata:t.metadata};if(this.store.partialNext({notifications:[...this.store.getLatestValue().notifications,i]}),i.autoClose&&i.expiresAt){const c=setTimeout(()=>{this.remove(n)},t.duration||this.config.durations[i.severity]);this.timeouts.set(n,c)}return n}addError({message:a,origin:r,options:t}){return this.add({message:a,origin:r,options:{...t,severity:"error"}})}addWarning({message:a,origin:r,options:t}){return this.add({message:a,origin:r,options:{...t,severity:"warning"}})}addInfo({message:a,origin:r,options:t}){return this.add({message:a,origin:r,options:{...t,severity:"info"}})}addSuccess({message:a,origin:r,options:t}){return this.add({message:a,origin:r,options:{...t,severity:"success"}})}remove(a){const r=this.timeouts.get(a);r&&(clearTimeout(r),this.timeouts.delete(a)),this.store.partialNext({notifications:this.store.getLatestValue().notifications.filter(t=>t.id!==a)})}clear(){this.timeouts.forEach(a=>clearTimeout(a)),this.timeouts.clear(),this.store.partialNext({notifications:[]})}};function $h(a){return typeof a=="string"||a instanceof String}var Dy=class Ss{constructor(r,t,n){var i;this.nextRequestAbortController=null,this._messageComposerSetupState=new ir({setupFunction:null}),this._getConnectionID=()=>{var c,u;return((c=this.wsConnection)==null?void 0:c.connectionID)||((u=this.wsFallback)==null?void 0:u.connectionID)},this._hasConnectionID=()=>!!this._getConnectionID(),this.connectUser=async(c,u)=>{if(!c.id)throw new Error('The "id" field on the user is missing');if(this.userID===c.id&&this.setUserPromise)return console.warn("Consecutive calls to connectUser is detected, ideally you should only call this function once in your app."),this.setUserPromise;if(this.userID)throw new Error("Use client.disconnect() before trying to connect as a different user. connectUser was called twice.");(this._isUsingServerAuth()||this.node)&&!this.options.allowServerSideConnect&&console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),this.userID=c.id,this.anonymous=!1;const m=this._setToken(c,u);this._setUser(c);const g=this.openConnection();this.setUserPromise=Promise.all([m,g]).then(f=>f[1]);try{return await this.setUserPromise}catch(f){throw this.persistUserOnConnectionFailure?this.closeConnection():this.disconnectUser(),f}},this.setUser=this.connectUser,this._setToken=(c,u)=>this.tokenManager.setTokenOrProvider(u,c),this.closeConnection=async c=>{var u,m,g;return this.cleaningIntervalRef!=null&&(clearInterval(this.cleaningIntervalRef),this.cleaningIntervalRef=void 0),await Promise.all([(u=this.wsConnection)==null?void 0:u.disconnect(c),(m=this.wsFallback)==null?void 0:m.disconnect(c)]),(g=this.offlineDb)==null||g.executeQuerySafely(async f=>{this.userID&&await f.upsertUserSyncStatus({userId:this.userID,lastSyncedAt:new Date().toString()})},{method:"upsertUserSyncStatus"}),Promise.resolve()},this.createChannelManager=({eventHandlerOverrides:c={},options:u={}})=>new a9({client:this,eventHandlerOverrides:c,options:u}),this.openConnection=()=>{var c,u,m;if(!this.userID)throw Error("User is not set on client, use client.connectUser or client.connectAnonymousUser instead");if((c=this.wsConnection)!=null&&c.isConnecting&&this.wsPromise)return this.logger("info","client:openConnection() - connection already in progress",{tags:["connection","client"]}),this.wsPromise;if(((u=this.wsConnection)!=null&&u.isHealthy||(m=this.wsFallback)!=null&&m.isHealthy())&&this._hasConnectionID()){this.logger("info","client:openConnection() - openConnection called twice, healthy connection already exists",{tags:["connection","client"]});return}return this.clientID=`${this.userID}--${_i()}`,this.wsPromise=this.connect(),this._startCleaning(),this.wsPromise},this._setupConnection=this.openConnection,this._normalizeDate=c=>{if(c instanceof Date&&(c=c.toISOString()),c==="")throw new Error("Don't pass blank string for since, use null instead if resetting the token revoke");return c},this.disconnectUser=c=>{this.logger("info","client:disconnect() - Disconnecting the client",{tags:["connection","client"]}),delete this.user,delete this._user,delete this.userID,this.anonymous=!1;const u=this.closeConnection(c);for(const m of Object.values(this.activeChannels))m._disconnect();return this.activeChannels={},this.state=new D2({client:this}),this.threads.resetState(),setTimeout(this.tokenManager.reset),u},this.disconnect=this.disconnectUser,this.connectAnonymousUser=()=>{(this._isUsingServerAuth()||this.node)&&!this.options.allowServerSideConnect&&console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),this.anonymous=!0,this.userID=_i();const c={id:this.userID,anon:!0};return this._setToken(c,""),this._setUser(c),this._setupConnection()},this.setAnonymousUser=this.connectAnonymousUser,this.doAxiosRequest=async(c,u,m,g={})=>{var y;await this.tokenManager.tokenReady();const f=this._enrichAxiosOptions(g);try{let v;switch(this._logApiRequest(c,u,m,f),c){case"get":v=await this.axiosInstance.get(u,f);break;case"delete":v=await this.axiosInstance.delete(u,f);break;case"post":v=await this.axiosInstance.post(u,m,f);break;case"postForm":v=await this.axiosInstance.postForm(u,m,f);break;case"put":v=await this.axiosInstance.put(u,m,f);break;case"patch":v=await this.axiosInstance.patch(u,m,f);break;case"options":v=await this.axiosInstance.options(u,f);break;default:throw new Error("Invalid request type")}return this._logApiResponse(c,u,v),this.consecutiveFailures=0,this.handleResponse(v)}catch(v){if(v.client_request_id=(y=f.headers)==null?void 0:y["x-client-request-id"],this._logApiError(c,u,v),this.consecutiveFailures+=1,v.response)return v.response.data.code===md.TOKEN_EXPIRED&&!this.tokenManager.isStatic()?(this.consecutiveFailures>1&&await Ql(op(this.consecutiveFailures)),this.tokenManager.loadToken(),await this.doAxiosRequest(c,u,m,g)):this.handleResponse(v.response);throw v}},this.dispatchEvent=c=>{var f;c.received_at||(c.received_at=new Date);const u=this._handleClientEvent(c),m=c.cid,g=m?this.activeChannels[m]:void 0;g&&g._handleChannelEvent(c),this._callClientListeners(c),g&&g._callChannelListeners(c),u.forEach(y=>y()),(f=this.offlineDb)==null||f.executeQuerySafely(y=>y.handleEvent({event:c}),{method:`handleEvent;${c.type}`})},this.handleEvent=c=>{const u=c.data,m=JSON.parse(u);this.dispatchEvent(m)},this._updateMemberWatcherReferences=c=>{const u=this.state.userChannelReferences[c.id]||{};for(const m in u){const g=this.activeChannels[m];g!=null&&g.state&&(g.state.members[c.id]&&(g.state.members[c.id].user=c),g.state.watchers[c.id]&&(g.state.watchers[c.id]=c),g.state.read[c.id]&&(g.state.read[c.id].user=c))}},this._updateUserReferences=this._updateMemberWatcherReferences,this._updateUserMessageReferences=c=>{const u=this.state.userChannelReferences[c.id]||{};for(const m in u){const g=this.activeChannels[m];if(!g)continue;const f=g.state;f==null||f.updateUserMessages(c)}},this._deleteUserMessageReference=(c,u=!1)=>{const m=this.state.userChannelReferences[c.id]||{};for(const g in m){const f=this.activeChannels[g];if(f){const y=f.state;y==null||y.deleteUserMessages(c,u)}}},this._handleUserEvent=c=>{if(c.user){if(c.type==="user.presence.changed"||c.type==="user.updated"){if(c.user.id===this.userID){const u={...this.user},m={...this._user};for(const g in this.user){if(g in c.user||DT(g))continue;const f=g;delete u[f],delete m[f]}for(const g in m){const f=g;f in c.user&&(m[f]=c.user[f])}this._user=m,this.user={...u,...c.user}}this.state.updateUser(c.user),this._updateMemberWatcherReferences(c.user)}c.type==="user.updated"&&this._updateUserMessageReferences(c.user),c.type==="user.deleted"&&c.user.deleted_at&&(c.mark_messages_deleted||c.hard_delete)&&this._deleteUserMessageReference(c.user,c.hard_delete)}},this._callClientListeners=c=>{const u=this,m=[];u.listeners.all&&m.push(...u.listeners.all),u.listeners[c.type]&&m.push(...u.listeners[c.type]);for(const g of m)g(c)},this.recoverState=async()=>{this.logger("info",`client:recoverState() - Start of recoverState with connectionID ${this._getConnectionID()}`,{tags:["connection"]});const c=Object.keys(this.activeChannels);c.length&&this.recoverStateOnReconnect?(this.logger("info",`client:recoverState() - Start the querying of ${c.length} channels`,{tags:["connection","client"]}),await this.queryChannels({cid:{$in:c}},{last_message_at:-1},{limit:30}),this.logger("info","client:recoverState() - Querying channels finished",{tags:["connection","client"]}),this.dispatchEvent({type:"connection.recovered"})):this.dispatchEvent({type:"connection.recovered"}),this.wsPromise=Promise.resolve(),this.setUserPromise=Promise.resolve()},this.getChannelByMembers=(c,u)=>{const m=(u.members??[]).map(v=>typeof v=="string"?v:v.user_id??""),g=m.sort().join(","),f=by(c,m);if(!f)throw Error("Please specify atleast one member when creating unique conversation");for(const v in this.activeChannels){const S=this.activeChannels[v];if(!S.disconnected&&(v===f||v.indexOf(`${c}:!members-`)===0&&Object.keys(S.state.members).sort().join(",")===g))return S}const y=new Di(this,c,void 0,u);return this._cacheEnabled()&&(this.activeChannels[f]=y),y},this.getChannelById=(c,u,m)=>{if(typeof u=="string"&&~u.indexOf(":"))throw Error(`Invalid channel id ${u}, can't contain the : character`);const g=`${c}:${u}`;if(g in this.activeChannels&&this.activeChannels[g]&&!this.activeChannels[g].disconnected){const y=this.activeChannels[g];return Object.keys(m).length>0&&(y.data={...y.data,...m},y._data={...y._data,...m}),y}const f=new Di(this,c,u,m);return this._cacheEnabled()&&(this.activeChannels[f.cid]=f),f},this.updateUsers=this.upsertUsers,this.updateUser=this.upsertUser,this._unblockMessage=this.unblockMessage,this.markAllRead=this.markChannelsRead,this._isUsingServerAuth=()=>!!this.secret,this._cacheEnabled=()=>!this._isUsingServerAuth()||!this.options.disableCache,this._buildWSPayload=c=>JSON.stringify({user_id:this.userID,user_details:this._user,device:this.options.device,client_request_id:c}),this.setMessageComposerSetupFunction=c=>{this._messageComposerSetupState.partialNext({setupFunction:c})},this.key=r,this.listeners={},this.state=new D2({client:this}),this.mutedChannels=[],this.mutedUsers=[],this.moderation=new jL(this),this.notifications=(n==null?void 0:n.notifications)??new r9,t&&$h(t)&&(this.secret=t);const o=n||(t&&!$h(t)?t:{});this.browser=typeof o.browser<"u"?o.browser:typeof window<"u",this.node=!this.browser,this.options={timeout:3e3,withCredentials:!1,warmUp:!1,recoverStateOnReconnect:!0,disableCache:!1,wsUrlParams:new URLSearchParams({}),...o},this.node&&!this.options.httpsAgent&&(this.options.httpsAgent=new hT.default.Agent({keepAlive:!0,keepAliveMsecs:3e3})),this.axiosInstance=Td.create(this.options),this.setBaseURL(this.options.baseURL||"https://chat.stream-io-api.com"),typeof process<"u"&&"env"in process&&Nh.STREAM_LOCAL_TEST_RUN&&this.setBaseURL("http://localhost:3030"),typeof process<"u"&&"env"in process&&Nh.STREAM_LOCAL_TEST_HOST&&this.setBaseURL("http://"+Nh.STREAM_LOCAL_TEST_HOST),this.wsConnection=null,this.wsPromise=null,this.setUserPromise=null,this.activeChannels={},this.configs={},this.anonymous=!1,this.persistUserOnConnectionFailure=(i=this.options)==null?void 0:i.persistUserOnConnectionFailure,this.tokenManager=new BL(this.secret),this.consecutiveFailures=0,this.insightMetrics=new kL,this.defaultWSTimeoutWithFallback=6*1e3,this.defaultWSTimeout=15*1e3,this.axiosInstance.defaults.paramsSerializer=OT,this.logger=E0(o.logger)?o.logger:()=>null,this.recoverStateOnReconnect=this.options.recoverStateOnReconnect,this.threads=new YL({client:this}),this.polls=new e9({client:this})}static getInstance(r,t,n){return Ss._instance||(typeof t=="string"?Ss._instance=new Ss(r,t,n):Ss._instance=new Ss(r,t)),Ss._instance}setOfflineDBApi(r){this.offlineDb||(this.offlineDb=r)}devToken(r){return PL(r)}getAuthType(){return this.anonymous?"anonymous":"jwt"}setBaseURL(r){this.baseURL=r,this.wsBaseURL=this.baseURL.replace("http","ws").replace(":3030",":8800")}_setUser(r){this.user=r,this.userID=r.id,this._user={...r}}async updateAppSettings(r){const t=r.apn_config;return t!=null&&t.p12_cert&&(r={...r,apn_config:{...t,p12_cert:Buffer.from(t.p12_cert).toString("base64")}}),await this.patch(this.baseURL+"/app",r)}async revokeTokens(r){return await this.updateAppSettings({revoke_tokens_issued_before:this._normalizeDate(r)})}async revokeUserToken(r,t){return await this.revokeUsersToken([r],t)}async revokeUsersToken(r,t){t===void 0?t=new Date().toISOString():t=this._normalizeDate(t);const n=[];for(const o of r)n.push({id:o,set:{revoke_tokens_issued_before:t}});return await this.partialUpdateUsers(n)}async getAppSettings(){return this.appSettingsPromise=this.get(this.baseURL+"/app"),await this.appSettingsPromise}async testPushSettings(r,t={}){return await this.post(this.baseURL+"/check_push",{user_id:r,...t.messageID?{message_id:t.messageID}:{},...t.apnTemplate?{apn_template:t.apnTemplate}:{},...t.firebaseTemplate?{firebase_template:t.firebaseTemplate}:{},...t.firebaseDataTemplate?{firebase_data_template:t.firebaseDataTemplate}:{},...t.skipDevices?{skip_devices:!0}:{},...t.pushProviderName?{push_provider_name:t.pushProviderName}:{},...t.pushProviderType?{push_provider_type:t.pushProviderType}:{}})}async testSQSSettings(r={}){return await this.post(this.baseURL+"/check_sqs",r)}async testSNSSettings(r={}){return await this.post(this.baseURL+"/check_sns",r)}async setGuestUser(r){let t;this.anonymous=!0;try{t=await this.post(this.baseURL+"/guest",{user:r})}catch(m){throw this.anonymous=!1,m}this.anonymous=!1;const{created_at:n,updated_at:o,last_active:i,online:c,...u}=t.user;return await this.connectUser(u,t.access_token)}createToken(r,t,n){if(this.secret==null)throw Error("tokens can only be created server-side using the API Secret");const o={};return t&&(o.exp=t),n&&(o.iat=n),Aw(this.secret,r,o,{})}on(r,t){const n=t?r:"all",o=t||r;return n in this.listeners||(this.listeners[n]=[]),this.logger("info",`Attaching listener for ${n} event`,{tags:["event","client"]}),this.listeners[n].push(o),{unsubscribe:()=>{this.logger("info",`Removing listener for ${n} event`,{tags:["event","client"]}),this.listeners[n]=this.listeners[n].filter(i=>i!==o)}}}off(r,t){const n=t?r:"all",o=t||r;n in this.listeners||(this.listeners[n]=[]),this.logger("info",`Removing listener for ${n} event`,{tags:["event","client"]}),this.listeners[n]=this.listeners[n].filter(i=>i!==o)}_logApiRequest(r,t,n,o){this.logger("info",`client: ${r} - Request - ${t}`,{tags:["api","api_request","client"],url:t,payload:n,config:o})}_logApiResponse(r,t,n){this.logger("info",`client:${r} - Response - url: ${t} > status ${n.status}`,{tags:["api","api_response","client"],url:t,response:n})}_logApiError(r,t,n){this.logger("error",`client:${r} - Error - url: ${t}`,{tags:["api","api_response","client"],url:t,error:n})}get(r,t){return this.doAxiosRequest("get",r,null,{params:t})}put(r,t){return this.doAxiosRequest("put",r,t)}post(r,t){return this.doAxiosRequest("post",r,t)}patch(r,t){return this.doAxiosRequest("patch",r,t)}delete(r,t){return this.doAxiosRequest("delete",r,null,{params:t})}sendFile(r,t,n,o,i){const c=RT(t,n,o||"multipart/form-data");return i!=null&&c.append("user",JSON.stringify(i)),this.doAxiosRequest("postForm",r,c,{headers:c.getHeaders?c.getHeaders():{},config:{timeout:0,maxContentLength:1/0,maxBodyLength:1/0}})}errorFromResponse(r){const t=typeof r.data.code<"u"?`StreamChat error code ${r.data.code}: ${r.data.message}`:`StreamChat error HTTP code: ${r.status}`;return new UP(t,{code:r.data.code??null,response:r,status:r.status})}handleResponse(r){const t=r.data;if(UL(r))throw this.errorFromResponse(r);return t}_handleClientEvent(r){var o,i,c;const t=this,n=[];if(this.logger("info",`client:_handleClientEvent - Received event of type { ${r.type} }`,{tags:["event","client"],event:r}),(r.type==="user.presence.changed"||r.type==="user.updated"||r.type==="user.deleted")&&this._handleUserEvent(r),r.type==="health.check"&&r.me&&(t.user=r.me,t.state.updateUser(r.me),t.mutedChannels=r.me.channel_mutes,t.mutedUsers=r.me.mutes),r.channel&&r.type==="notification.message_new"){const{channel:u}=r;this._addChannelConfig(u)}if(r.type==="notification.channel_mutes_updated"&&((o=r.me)!=null&&o.channel_mutes)&&(this.mutedChannels=r.me.channel_mutes),r.type==="notification.mutes_updated"&&((i=r.me)!=null&&i.mutes)&&(this.mutedUsers=r.me.mutes),r.type==="notification.mark_read"&&r.unread_channels===0&&Object.keys(this.activeChannels).forEach(m=>this.activeChannels[m].state.unreadCount=0),(r.type==="channel.deleted"||r.type==="notification.channel_deleted")&&r.cid){const{cid:u}=r;t.state.deleteAllChannelReference(u),(c=this.activeChannels[r.cid])==null||c._disconnect(),n.push(()=>{u&&delete this.activeChannels[u]})}return n}_muteStatus(r){var n;let t;for(let o=0;o<this.mutedChannels.length;o++){const i=this.mutedChannels[o];if(((n=i.channel)==null?void 0:n.cid)===r){t={muted:i.expires?new Date(i.expires).getTime()>new Date().getTime():!0,createdAt:i.created_at?new Date(i.created_at):new Date,expiresAt:i.expires?new Date(i.expires):null};break}}return t||{muted:!1,createdAt:null,expiresAt:null}}async connect(){if(!this.userID||!this._user)throw Error("Call connectUser or connectAnonymousUser before starting the connection");if(!this.wsBaseURL)throw Error("Websocket base url not set");if(!this.clientID)throw Error("clientID is not set");!this.wsConnection&&(this.options.warmUp||this.options.enableInsights)&&this._sayHi(),this.options.wsConnection&&this.node?(this.options.wsConnection.setClient(this),this.wsConnection=this.options.wsConnection):this.wsConnection=new RL({client:this});try{return this.wsFallback?await this.wsFallback.connect():await this.wsConnection.connect(this.options.enableWSFallback?this.defaultWSTimeoutWithFallback:this.defaultWSTimeout)}catch(r){if(this.options.enableWSFallback&&WL(r)&&zT())return this.logger("info","client:connect() - WS failed, fallback to longpoll",{tags:["connection","client"]}),this.dispatchEvent({type:"transport.changed",mode:"longpoll"}),this.wsConnection._destroyCurrentWSConnection(),this.wsConnection.disconnect().then(),this.wsFallback=new $L({client:this}),await this.wsFallback.connect();throw r}}_sayHi(){const r=_i(),t={headers:{"x-client-request-id":r}};this.doAxiosRequest("get",this.baseURL+"/hi",null,t).catch(n=>{this.options.enableInsights&&fd("http_hi_failed",{api_key:this.key,err:n,client_request_id:r})})}async queryUsers(r,t=[],n={}){const o={presence:!1};await this.wsPromise,this._hasConnectionID()||(o.presence=!1);const i=await this.get(this.baseURL+"/users",{payload:{filter_conditions:r,sort:Xn(t),...o,...n}});return this.state.updateUsers(i.users),i}async queryBannedUsers(r={},t=[],n={}){return await this.get(this.baseURL+"/query_banned_users",{payload:{filter_conditions:r,sort:Xn(t),...n}})}async queryMessageFlags(r={},t={}){return await this.get(this.baseURL+"/moderation/flags/message",{payload:{filter_conditions:r,...t}})}async queryChannelsRequest(r,t=[],n={}){const o={state:!0,watch:!0,presence:!1};await this.wsPromise,this._hasConnectionID()||(o.watch=!1);const i={filter_conditions:r,sort:Xn(t),...o,...n};return(await this.post(this.baseURL+"/channels",i)).channels}async queryChannels(r,t=[],n={},o={}){var c;const i=await this.queryChannelsRequest(r,t,n);return this.dispatchEvent({type:"channels.queried",queriedChannels:{channels:i,isLatestMessageSet:!0}}),i!=null&&i.length&&((c=this.offlineDb)!=null&&c.upsertChannels)&&await this.offlineDb.upsertChannels({channels:i,isLatestMessagesSet:!0}),this.hydrateActiveChannels(i,o,n)}async queryReactions(r,t,n=[],o={}){var c;const i={filter:t,sort:Xn(n),...o};if((c=this.offlineDb)!=null&&c.getReactions&&!o.next)try{const u=await this.offlineDb.getReactions({messageId:r,filters:t,sort:n,limit:o.limit});u&&this.dispatchEvent({type:"offline_reactions.queried",offlineReactions:u})}catch(u){this.logger("warn","An error has occurred while querying offline reactions",{error:u})}return await this.wsPromise,await this.post(this.baseURL+"/messages/"+encodeURIComponent(r)+"/reactions",i)}hydrateActiveChannels(r=[],t={},n){const{skipInitialization:o,offlineMode:i=!1}=t,c=[];for(const u of r){this._addChannelConfig(u.channel);const m=this.channel(u.channel.type,u.channel.id);m.data=u.channel,m.offlineMode=i,m.initialized=!i,m.push_preferences=u.push_preferences;let g;if(o===void 0){const{messageSet:f}=m._initializeState(u,"latest");g=f}else if(!o.includes(u.channel.id)){m.state.clearMessages();const{messageSet:f}=m._initializeState(u,"latest");g=f}g&&(g.pagination={...g.pagination,...rw({parentSet:g,requestedPageSize:(n==null?void 0:n.message_limit)||bT,returnedPage:u.messages,logger:this.logger})},this.polls.hydratePollCache(u.messages,!0)),u.draft&&m.messageComposer.initState({composition:u.draft}),c.push(m)}return c}async search(r,t,n={}){if(n.offset&&n.next)throw Error("Cannot specify offset with next");const o={filter_conditions:r,...n,sort:n.sort?Xn(n.sort):void 0};if(typeof t=="string")o.query=t;else if(typeof t=="object")o.message_filter_conditions=t;else throw Error(`Invalid type ${typeof t} for query parameter`);return await this.wsPromise,await this.get(this.baseURL+"/search",{payload:o})}setLocalDevice(r){var t,n,o;if((t=this.wsConnection)!=null&&t.isConnecting&&this.wsPromise||((n=this.wsConnection)!=null&&n.isHealthy||(o=this.wsFallback)!=null&&o.isHealthy())&&this._hasConnectionID())throw new Error("you can only set device before opening a websocket connection");this.options.device=r}async addDevice(r,t,n,o){return await this.post(this.baseURL+"/devices",{id:r,push_provider:t,...n!=null?{user_id:n}:{},...o!=null?{push_provider_name:o}:{}})}async getDevices(r){return await this.get(this.baseURL+"/devices",r?{user_id:r}:{})}async getUnreadCount(r){return await this.get(this.baseURL+"/unread",r?{user_id:r}:{})}async getUnreadCountBatch(r){return await this.post(this.baseURL+"/unread_batch",{user_ids:r})}async setPushPreferences(r){return await this.post(this.baseURL+"/push_preferences",{preferences:r})}async removeDevice(r,t){return await this.delete(this.baseURL+"/devices",{id:r,...t?{user_id:t}:{}})}getRateLimits(r){const{serverSide:t,web:n,android:o,ios:i,endpoints:c}=r||{};return this.get(this.baseURL+"/rate_limits",{server_side:t,web:n,android:o,ios:i,endpoints:c?c.join(","):void 0})}_addChannelConfig({cid:r,config:t}){this._cacheEnabled()&&(this.configs[r]=t)}channel(r,t,n={}){var o;if(!this.userID&&!this._isUsingServerAuth())throw Error("Call connectUser or connectAnonymousUser before creating a channel");if(~r.indexOf(":"))throw new Error(`Invalid channel group ${r}, can't contain the : character`);return t&&typeof t=="object"?this.getChannelByMembers(r,t):!t&&typeof n=="object"&&((o=n.members)!=null&&o.length)?this.getChannelByMembers(r,n):t?this.getChannelById(r,t,n):new Di(this,r,void 0,n)}async partialUpdateUser(r){return await this.partialUpdateUsers([r])}async upsertUsers(r){const t={};for(const n of r){if(!n.id)throw Error("User ID is required when updating a user");t[n.id]=n}return await this.post(this.baseURL+"/users",{users:t})}upsertUser(r){return this.upsertUsers([r])}async partialUpdateUsers(r){for(const t of r)if(!t.id)throw Error("User ID is required when updating a user");return await this.patch(this.baseURL+"/users",{users:r})}async deleteUser(r,t){return await this.delete(this.baseURL+`/users/${encodeURIComponent(r)}`,t)}async restoreUsers(r){return await this.post(this.baseURL+"/users/restore",{user_ids:r})}async reactivateUser(r,t){return await this.post(this.baseURL+`/users/${encodeURIComponent(r)}/reactivate`,{...t})}async reactivateUsers(r,t){return await this.post(this.baseURL+"/users/reactivate",{user_ids:r,...t})}async deactivateUser(r,t){return await this.post(this.baseURL+`/users/${encodeURIComponent(r)}/deactivate`,{...t})}async deactivateUsers(r,t){return await this.post(this.baseURL+"/users/deactivate",{user_ids:r,...t})}async exportUser(r,t){return await this.get(this.baseURL+`/users/${encodeURIComponent(r)}/export`,{...t})}async banUser(r,t){return await this.post(this.baseURL+"/moderation/ban",{target_user_id:r,...t})}async unbanUser(r,t){return await this.delete(this.baseURL+"/moderation/ban",{target_user_id:r,...t})}async shadowBan(r,t){return await this.banUser(r,{shadow:!0,...t})}async removeShadowBan(r,t){return await this.unbanUser(r,{shadow:!0,...t})}async blockUser(r,t){return await this.post(this.baseURL+"/users/block",{blocked_user_id:r,...t?{user_id:t}:{}})}async getBlockedUsers(r){return await this.get(this.baseURL+"/users/block",{...r?{user_id:r}:{}})}async unBlockUser(r,t){return await this.post(this.baseURL+"/users/unblock",{blocked_user_id:r,...t?{user_id:t}:{}})}async muteUser(r,t,n={}){return await this.post(this.baseURL+"/moderation/mute",{target_id:r,...t?{user_id:t}:{},...n})}async unmuteUser(r,t){return await this.post(this.baseURL+"/moderation/unmute",{target_id:r,...t?{user_id:t}:{}})}userMuteStatus(r){if(!this.user||!this.wsPromise)throw new Error("Make sure to await connectUser() first.");for(let t=0;t<this.mutedUsers.length;t+=1)if(this.mutedUsers[t].target.id===r)return!0;return!1}async flagMessage(r,t={}){return await this.post(this.baseURL+"/moderation/flag",{target_message_id:r,...t})}async flagUser(r,t={}){return await this.post(this.baseURL+"/moderation/flag",{target_user_id:r,...t})}async unflagMessage(r,t={}){return await this.post(this.baseURL+"/moderation/unflag",{target_message_id:r,...t})}async unflagUser(r,t={}){return await this.post(this.baseURL+"/moderation/unflag",{target_user_id:r,...t})}async _queryFlags(r={},t={}){return await this.post(this.baseURL+"/moderation/flags",{filter_conditions:r,...t})}async _queryFlagReports(r={},t={}){return await this.post(this.baseURL+"/moderation/reports",{filter_conditions:r,...t})}async _reviewFlagReport(r,t,n={}){return await this.patch(this.baseURL+`/moderation/reports/${encodeURIComponent(r)}`,{review_result:t,...n})}async unblockMessage(r,t={}){return await this.post(this.baseURL+"/moderation/unblock_message",{target_message_id:r,...t})}async markChannelsRead(r={}){await this.post(this.baseURL+"/channels/read",{...r})}createCommand(r){return this.post(this.baseURL+"/commands",r)}getCommand(r){return this.get(this.baseURL+`/commands/${encodeURIComponent(r)}`)}updateCommand(r,t){return this.put(this.baseURL+`/commands/${encodeURIComponent(r)}`,t)}deleteCommand(r){return this.delete(this.baseURL+`/commands/${encodeURIComponent(r)}`)}listCommands(){return this.get(this.baseURL+"/commands")}createChannelType(r){const t=Object.assign({},{commands:["all"]},r);return this.post(this.baseURL+"/channeltypes",t)}getChannelType(r){return this.get(this.baseURL+`/channeltypes/${encodeURIComponent(r)}`)}updateChannelType(r,t){return this.put(this.baseURL+`/channeltypes/${encodeURIComponent(r)}`,t)}DBDeleteChannelType(r){return this.delete(this.baseURL+`/channeltypes/${encodeURIComponent(r)}`)}listChannelTypes(){return this.get(this.baseURL+"/channeltypes")}async translateMessage(r,t){return await this.post(this.baseURL+`/messages/${encodeURIComponent(r)}/translate`,{language:t})}async translate(r,t,n){return await this.post(this.baseURL+"/translate",{text:r,source_language:n,destination_language:t})}_normalizeExpiration(r){let t=null;if(typeof r=="number"){const n=new Date;n.setSeconds(n.getSeconds()+r),t=n.toISOString()}else $h(r)?t=r:r instanceof Date&&(t=r.toISOString());return t}_validateAndGetMessageId(r,t){let n;if(typeof r=="string")n=r;else{if(!r.id)throw Error(t);n=r.id}return n}pinMessage(r,t,n,o){const i=this._validateAndGetMessageId(r,"Please specify the message id when calling unpinMessage");return this.partialUpdateMessage(i,{set:{pinned:!0,pin_expires:this._normalizeExpiration(t),pinned_at:this._normalizeExpiration(o)}},n)}unpinMessage(r,t){const n=this._validateAndGetMessageId(r,"Please specify the message id when calling unpinMessage");return this.partialUpdateMessage(n,{set:{pinned:!1}},t)}async updateMessage(r,t,n){if(!r.id)throw Error("Please specify the message.id when calling updateMessage");const o=ew(r);return typeof t=="string"?o.user_id=t:typeof(t==null?void 0:t.id)=="string"&&(o.user_id=t.id),await this.post(this.baseURL+`/messages/${encodeURIComponent(r.id)}`,{message:o,...n})}async partialUpdateMessage(r,t,n,o){if(!r)throw Error("Please specify the message.id when calling partialUpdateMessage");let i;return typeof n=="string"?i={id:n}:typeof(n==null?void 0:n.id)=="string"&&(i={id:n.id}),await this.put(this.baseURL+`/messages/${encodeURIComponent(r)}`,{...t,...o,user:i})}async deleteMessage(r,t){try{if(this.offlineDb)return t?await this.offlineDb.hardDeleteMessage({id:r}):await this.offlineDb.softDeleteMessage({id:r}),await this.offlineDb.queueTask({task:{messageId:r,payload:[r,t],type:"delete-message"}})}catch(n){this.logger("error","offlineDb:deleteMessage",{tags:["channel","offlineDb"],error:n})}return this._deleteMessage(r,t)}async _deleteMessage(r,t){let n={};return t&&(n={hard:!0}),await this.delete(this.baseURL+`/messages/${encodeURIComponent(r)}`,n)}async undeleteMessage(r,t){return await this.post(this.baseURL+`/messages/${encodeURIComponent(r)}/undelete`,{undeleted_by:t})}async getMessage(r,t){return await this.get(this.baseURL+`/messages/${encodeURIComponent(r)}`,{...t})}async queryThreads(r={}){const t={limit:10,participant_limit:10,reply_limit:3,watch:!0,...r},n={...t};t.filter&&Object.keys(t.filter).length>0&&(n.filter=t.filter),t.sort&&(Array.isArray(t.sort)?t.sort.length>0:Object.keys(t.sort).length>0)&&(n.sort=Xn(t.sort));const o=await this.post(`${this.baseURL}/threads`,n);return{threads:o.threads.map(i=>new Sd({client:this,threadData:i})),next:o.next}}async getThread(r,t={}){if(!r)throw new Error("Please specify the messageId when calling getThread");const n={participant_limit:100,reply_limit:3,watch:!0,...t},o=await this.get(`${this.baseURL}/threads/${encodeURIComponent(r)}`,n);return new Sd({client:this,threadData:o.thread})}async partialUpdateThread(r,t){if(!r)throw Error("Please specify the message id when calling partialUpdateThread");const n=["created_at","id","last_message_at","type","updated_at","user","reply_count","participants","channel","custom"];for(const o in{...t.set,...t.unset})if(n.includes(o))throw Error(`You cannot set ${o} field on Thread object. ${o} is reserved for server-side use. Please omit ${o} from your set object.`);return await this.patch(`${this.baseURL}/threads/${encodeURIComponent(r)}`,t)}getUserAgent(){if(this.userAgent)return this.userAgent;const r="9.2.0",t="browser-esm";let n="";this.sdkIdentifier?n=`stream-chat-${this.sdkIdentifier.name}-v${this.sdkIdentifier.version}-llc-v${r}`:n=`stream-chat-js-v${r}-${this.node?"node":"browser"}`;const{os:o,model:i}=this.deviceIdentifier??{};return[["os",o],["device_model",i],["client_bundle",t]].reduce((c,[u,m])=>m&&m.length>0?c.concat(`|${u}=${m}`):c,n)}setUserAgent(r){this.userAgent=r}_enrichAxiosOptions(r={params:{},headers:{},config:{}}){var m;const t=this._getToken(),n=t?{Authorization:t}:void 0;let o=null;this.nextRequestAbortController!==null&&(o=this.nextRequestAbortController.signal,this.nextRequestAbortController=null),(m=r.headers)!=null&&m["x-client-request-id"]||(r.headers={...r.headers,"x-client-request-id":_i()});const{params:i,headers:c,...u}=this.options.axiosRequestConfig||{};return{params:{user_id:this.userID,connection_id:this._getConnectionID(),api_key:this.key,...r.params,...i||{}},headers:{...n,"stream-auth-type":this.getAuthType(),"X-Stream-Client":this.getUserAgent(),...r.headers,...c||{}},...o?{signal:o}:{},...r.config,...u||{}}}_getToken(){return!this.tokenManager||this.anonymous?null:this.tokenManager.getToken()}_startCleaning(){const r=this;this.cleaningIntervalRef==null&&(this.cleaningIntervalRef=setInterval(()=>{for(const t of Object.values(r.activeChannels))t.clean()},500))}verifyWebhook(r,t){return!!this.secret&&LL(r,this.secret,t)}getPermission(r){return this.get(`${this.baseURL}/permissions/${encodeURIComponent(r)}`)}createPermission(r){return this.post(`${this.baseURL}/permissions`,{...r})}updatePermission(r,t){return this.put(`${this.baseURL}/permissions/${encodeURIComponent(r)}`,{...t})}deletePermission(r){return this.delete(`${this.baseURL}/permissions/${encodeURIComponent(r)}`)}listPermissions(){return this.get(`${this.baseURL}/permissions`)}createRole(r){return this.post(`${this.baseURL}/roles`,{name:r})}listRoles(){return this.get(`${this.baseURL}/roles`)}deleteRole(r){return this.delete(`${this.baseURL}/roles/${encodeURIComponent(r)}`)}sync(r,t,n={}){return this.post(`${this.baseURL}/sync`,{channel_cids:r,last_sync_at:t,...n})}async sendUserCustomEvent(r,t){return await this.post(`${this.baseURL}/users/${encodeURIComponent(r)}/event`,{event:t})}createBlockList(r){return this.post(`${this.baseURL}/blocklists`,r)}listBlockLists(r){return this.get(`${this.baseURL}/blocklists`,r)}getBlockList(r,t){return this.get(`${this.baseURL}/blocklists/${encodeURIComponent(r)}`,t)}updateBlockList(r,t){return this.put(`${this.baseURL}/blocklists/${encodeURIComponent(r)}`,t)}deleteBlockList(r,t){return this.delete(`${this.baseURL}/blocklists/${encodeURIComponent(r)}`,t)}exportChannels(r,t={}){const n={channels:r,...t};return this.post(`${this.baseURL}/export_channels`,n)}exportUsers(r){return this.post(`${this.baseURL}/export/users`,r)}exportChannel(r,t){return this.exportChannels([r],t)}getExportChannelStatus(r){return this.get(`${this.baseURL}/export_channels/${encodeURIComponent(r)}`)}campaign(r,t){return r&&typeof r=="object"?new e2(this,null,r):new e2(this,r,t)}segment(r,t,n){return typeof t=="string"?new L2(this,r,t,n):new L2(this,r,null,t)}validateServerSideAuth(){if(!this.secret)throw new Error("Campaigns is a server-side only feature. Please initialize the client with a secret to use this feature.")}createSegment(r,t,n){this.validateServerSideAuth();const o={id:t,type:r,...n};return this.post(this.baseURL+"/segments",o)}createUserSegment(r,t){return this.validateServerSideAuth(),this.createSegment("user",r,t)}createChannelSegment(r,t){return this.validateServerSideAuth(),this.createSegment("channel",r,t)}getSegment(r){return this.validateServerSideAuth(),this.get(this.baseURL+`/segments/${encodeURIComponent(r)}`)}updateSegment(r,t){return this.validateServerSideAuth(),this.put(this.baseURL+`/segments/${encodeURIComponent(r)}`,t)}addSegmentTargets(r,t){this.validateServerSideAuth();const n={target_ids:t};return this.post(this.baseURL+`/segments/${encodeURIComponent(r)}/addtargets`,n)}querySegmentTargets(r,t={},n=[],o={}){return this.validateServerSideAuth(),this.post(this.baseURL+`/segments/${encodeURIComponent(r)}/targets/query`,{filter:t||{},sort:n||[],...o})}removeSegmentTargets(r,t){this.validateServerSideAuth();const n={target_ids:t};return this.post(this.baseURL+`/segments/${encodeURIComponent(r)}/deletetargets`,n)}querySegments(r,t,n={}){return this.validateServerSideAuth(),this.post(this.baseURL+"/segments/query",{filter:r,sort:t,...n})}deleteSegment(r){return this.validateServerSideAuth(),this.delete(this.baseURL+`/segments/${encodeURIComponent(r)}`)}segmentTargetExists(r,t){return this.validateServerSideAuth(),this.get(this.baseURL+`/segments/${encodeURIComponent(r)}/target/${encodeURIComponent(t)}`)}createCampaign(r){return this.validateServerSideAuth(),this.post(this.baseURL+"/campaigns",{...r})}getCampaign(r,t){return this.validateServerSideAuth(),this.get(this.baseURL+`/campaigns/${encodeURIComponent(r)}`,{...t==null?void 0:t.users})}startCampaign(r,t){return this.validateServerSideAuth(),this.post(this.baseURL+`/campaigns/${encodeURIComponent(r)}/start`,{scheduled_for:t==null?void 0:t.scheduledFor,stop_at:t==null?void 0:t.stopAt})}async queryCampaigns(r,t,n){return this.validateServerSideAuth(),await this.post(this.baseURL+"/campaigns/query",{filter:r,sort:t,...n||{}})}updateCampaign(r,t){return this.validateServerSideAuth(),this.put(this.baseURL+`/campaigns/${encodeURIComponent(r)}`,t)}deleteCampaign(r){return this.validateServerSideAuth(),this.delete(this.baseURL+`/campaigns/${encodeURIComponent(r)}`)}stopCampaign(r){return this.validateServerSideAuth(),this.post(this.baseURL+`/campaigns/${encodeURIComponent(r)}/stop`)}enrichURL(r){return this.get(this.baseURL+"/og",{url:r})}getTask(r){return this.get(`${this.baseURL}/tasks/${encodeURIComponent(r)}`)}async deleteChannels(r,t={}){return await this.post(this.baseURL+"/channels/delete",{cids:r,...t})}async deleteUsers(r,t={}){if(typeof t.user<"u"&&!["soft","hard","pruning"].includes(t.user))throw new Error("Invalid delete user options. user must be one of [soft hard pruning]");if(typeof t.conversations<"u"&&!["soft","hard"].includes(t.conversations))throw new Error("Invalid delete user options. conversations must be one of [soft hard]");if(typeof t.messages<"u"&&!["soft","hard","pruning"].includes(t.messages))throw new Error("Invalid delete user options. messages must be one of [soft hard pruning]");return await this.post(this.baseURL+"/users/delete",{user_ids:r,...t})}async _createImportURL(r){return await this.post(this.baseURL+"/import_urls",{filename:r})}async _createImport(r,t={mode:"upsert"}){return await this.post(this.baseURL+"/imports",{path:r,...t})}async _getImport(r){return await this.get(this.baseURL+`/imports/${encodeURIComponent(r)}`)}async _listImports(r){return await this.get(this.baseURL+"/imports",r)}async upsertPushProvider(r){return await this.post(this.baseURL+"/push_providers",{push_provider:r})}async deletePushProvider({type:r,name:t}){return await this.delete(this.baseURL+`/push_providers/${encodeURIComponent(r)}/${encodeURIComponent(t)}`)}async listPushProviders(){return await this.get(this.baseURL+"/push_providers")}createAbortControllerForNextRequest(){return this.nextRequestAbortController=new AbortController}async commitMessage(r){return await this.post(this.baseURL+`/messages/${encodeURIComponent(r)}/commit`)}async createPoll(r,t){return await this.post(this.baseURL+"/polls",{...r,...t?{user_id:t}:{}})}async getPoll(r,t){return await this.get(this.baseURL+`/polls/${encodeURIComponent(r)}`,t?{user_id:t}:{})}async updatePoll(r,t){return await this.put(this.baseURL+"/polls",{...r,...t?{user_id:t}:{}})}async partialUpdatePoll(r,t,n){return await this.patch(this.baseURL+`/polls/${encodeURIComponent(r)}`,{...t,...n?{user_id:n}:{}})}async deletePoll(r,t){return await this.delete(this.baseURL+`/polls/${encodeURIComponent(r)}`,{...t?{user_id:t}:{}})}closePoll(r,t){return this.partialUpdatePoll(r,{set:{is_closed:!0}},t)}async createPollOption(r,t,n){return await this.post(this.baseURL+`/polls/${encodeURIComponent(r)}/options`,{...t,...n?{user_id:n}:{}})}async getPollOption(r,t,n){return await this.get(this.baseURL+`/polls/${encodeURIComponent(r)}/options/${encodeURIComponent(t)}`,n?{user_id:n}:{})}async updatePollOption(r,t,n){return await this.put(this.baseURL+`/polls/${encodeURIComponent(r)}/options`,{...t,...n?{user_id:n}:{}})}async deletePollOption(r,t,n){return await this.delete(this.baseURL+`/polls/${encodeURIComponent(r)}/options/${encodeURIComponent(t)}`,n?{user_id:n}:{})}async castPollVote(r,t,n,o){return await this.post(this.baseURL+`/messages/${encodeURIComponent(r)}/polls/${encodeURIComponent(t)}/vote`,{vote:n,...o?{user_id:o}:{}})}addPollAnswer(r,t,n,o){return this.castPollVote(r,t,{answer_text:n},o)}async removePollVote(r,t,n,o){return await this.delete(this.baseURL+`/messages/${encodeURIComponent(r)}/polls/${encodeURIComponent(t)}/vote/${encodeURIComponent(n)}`,{...o?{user_id:o}:{}})}async queryPolls(r={},t=[],n={},o){const i=o?`?user_id=${o}`:"";return await this.post(this.baseURL+`/polls/query${i}`,{filter:r,sort:Xn(t),...n})}async queryPollVotes(r,t={},n=[],o={},i){const c=i?`?user_id=${i}`:"";return await this.post(this.baseURL+`/polls/${encodeURIComponent(r)}/votes${c}`,{filter:t,sort:Xn(n),...o})}async queryPollAnswers(r,t={},n=[],o={},i){const c=i?`?user_id=${i}`:"";return await this.post(this.baseURL+`/polls/${encodeURIComponent(r)}/votes${c}`,{filter:{...t,is_answer:!0},sort:Xn(n),...o})}async queryMessageHistory(r={},t=[],n={}){return await this.post(this.baseURL+"/messages/history",{filter:r,sort:Xn(t),...n})}async updateFlags(r,t,n={}){return await this.post(this.baseURL+"/automod/v1/moderation/update_flags",{message_ids:r,reviewed_by:t,...n})}async queryDrafts(r={}){const t={...r,sort:r.sort?Xn(r.sort):void 0};return await this.post(this.baseURL+"/drafts/query",t)}};const Dw=(a,r)=>{const[t,n]=h.useState([]),[o,i]=h.useState([]),[c,u]=h.useState(!0),[m,g]=h.useState(null),[f,y]=h.useState(null),v=h.useRef(null),S=h.useRef(null),w=h.useCallback(async(E=!1)=>{S.current&&S.current.abort(),S.current=new AbortController;try{E||u(!0);const[I,M]=await Promise.all([kr.getPendingProposals(a,r),kr.getSentProposals(a,r)]);S.current.signal.aborted||(n(I.filter(N=>N.status==="pending")),i(M.filter(N=>["pending","countered"].includes(N.status))),g(null),y(new Date))}catch(I){if(I.name==="AbortError")return;g(I.message),E||(n([]),i([]))}finally{S.current.signal.aborted||u(!1)}},[a,r]);h.useEffect(()=>{if(a&&r)return w(),v.current=setInterval(()=>{w(!0)},3e4),()=>{v.current&&clearInterval(v.current),S.current&&S.current.abort()}},[a,r,w]);const x=h.useCallback(()=>{w()},[w]),k=h.useCallback((E,I="add")=>{I==="add"?i(M=>[E,...M]):I==="update"?(n(M=>M.map(N=>N._id===E._id?E:N)),i(M=>M.map(N=>N._id===E._id?E:N))):I==="remove"&&(n(M=>M.filter(N=>N._id!==E._id)),i(M=>M.filter(N=>N._id!==E._id))),y(new Date)},[]);return{pendingProposals:t,sentProposals:o,loading:c,error:m,lastUpdate:f,refetch:x,updateProposalLocally:k}},o9=void 0,l9="frbcaplgmailcom";function s9(a){if(!a)return"";const r=new Date(a),t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}function od(a){if(!a)return"";const r=new Date(a),t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0");return`${r.getFullYear()}-${t}-${n}`}function i9(a){let r=a.trim();r=r.replace(/(\d{1,2}):(\d{2})\s*(am|pm)/i,(n,o,i,c)=>`${parseInt(o,10)}:${i} ${c.toUpperCase()}`),r=r.replace(/^(\d{1,2})(\d{2})(am|pm)$/i,(n,o,i,c)=>`${parseInt(o,10)}:${i} ${c.toUpperCase()}`),r=r.replace(/^(\d{1,2})(am|pm)$/i,(n,o,i)=>`${parseInt(o,10)}:00 ${i.toUpperCase()}`),r=r.replace(/(am|pm)$/i," $1"),r=r.replace(/(am|pm)$/i,n=>n.toUpperCase());const t=r.match(/^(\d{1,2}):(\d{2}) (AM|PM)$/i);if(t){const n=t[1],o=t[2],i=t[3].toUpperCase(),c=`${n}:${o} ${i}`;return console.log("normalizeTimeString final:",c),c}return console.log("normalizeTimeString fallback:",r),r}function Nm(a){return a.replace(/[^a-zA-Z0-9]/g,"")}async function c9({senderEmail:a,senderName:r,receiverEmail:t,receiverName:n,matchName:o}){try{const i=Dy.getInstance(o9),c=await fetch(`${de}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:Nm(a)})}),{token:u}=await c.json();if(!u)throw new Error("Could not get chat token");i.userID||await i.connectUser({id:Nm(a),name:r},u);const m=Array.from(new Set([Nm(a),Nm(t),l9])),g=i.channel("messaging",{members:m,name:o});await g.create(),await g.sendMessage({text:"Chat created for your match proposal!"})}catch(i){console.error("Failed to create chat channel:",i),alert("Failed to create chat channel: "+i.message)}}const jh=`This is a BETA test match. Matches that are created, scheduled, and confirmed will NOT be played.

`,d9=a=>a.replace(/[–—−]/g,"-").replace(/\s*-\s*/g," - ").trim();function cf({player:a,day:r,slot:t,onClose:n,senderName:o,senderEmail:i,onProposalComplete:c,selectedDivision:u,phase:m}){console.log("MatchProposalModal player prop:",a),console.log("MatchProposalModal phase prop:",m),console.log("MatchProposalModal slot prop:",t,JSON.stringify(t));const[g,f]=h.useState(t),[y,v]=h.useState(""),[S,w]=h.useState(""),[x,k]=h.useState(""),[E,I]=h.useState(!1),[M,N]=h.useState("8 Ball"),[_,P]=h.useState(m==="scheduled"||m==="challenge"?5:7),B=a.locations?a.locations.split(/\r?\n/).map(X=>X.trim()).filter(Boolean):[],R=K8(r),[W,L]=h.useState(R),F=a.availability[r]||[],J=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][W.getDay()],Y=h.useMemo(()=>{if(!t)return[];const X=d9(t);if(console.log("DEBUG: normalized slot:",X),!X.includes(" - "))return[];let[O,Q]=X.split(" - ").map(T=>i9(T.trim()));if(console.log("DEBUG: blockStart:",O,"blockEnd:",Q),!O||!Q)return[];const ne=dy(O,Q,30);return console.log("DEBUG: generated times:",ne),ne},[t]);h.useEffect(()=>{v("")},[t]);const{sentProposals:D}=Dw(o,u);function A(X){return D.some(O=>O.receiverName===(X.player?`${X.player.firstName} ${X.player.lastName}`:X.opponentName)&&O.date===od(W)&&O.time===y&&O.location===S&&O.phase===m&&O.divisions&&O.divisions.includes(u)&&["pending","countered"].includes(O.status))}a.opponents&&a.opponents.filter(X=>!A(X));const U=()=>{if(!i||!a.email||!y||!S||!W){alert("Please fill in all required fields.");return}if(m==="scheduled"){const O=new Date,Q=new Date(W),ne=Math.ceil((Q-O)/(1e3*60*60*24));if(ne<0){alert("⚠️ You cannot schedule a match in the past.");return}if(ne<=2&&!window.confirm(`⚠️ WARNING: This match is scheduled for ${ne} day(s) from now.

Phase 1 matches must be completed by the end of week 6. Scheduling this close to the deadline may not give enough time to complete the match.

Do you want to continue with this schedule?`))return}const X={senderEmail:i,senderName:o,receiverEmail:a.email,receiverName:a.firstName?`${a.firstName} ${a.lastName}`:a.name,date:od(W),time:y,location:S,message:x,gameType:M,raceLength:_,phase:m,divisions:[u]};console.log("Proposal data to send:",X),fetch(`${de}/api/proposals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)}).then(O=>O.json()).then(O=>{if(console.log("Backend response:",O),O.error)throw new Error(O.error);if(c9({senderEmail:i,senderName:o,receiverEmail:a.email,receiverName:a.firstName?`${a.firstName} ${a.lastName}`:a.name,matchName:`${o} vs ${a.firstName?`${a.firstName} ${a.lastName}`:a.name} - ${s9(W)}`}),rI({to_email:a.email,to_name:a.firstName?`${a.firstName} ${a.lastName}`:a.name,from_name:o,from_email:i,day:J,date:od(W),time:y,location:S,note:x,gameType:M,raceLength:_,proposalId:O.proposalId}),I(!0),c){const Q={_id:O.proposalId,senderEmail:i,senderName:o,receiverEmail:a.email,receiverName:a.firstName?`${a.firstName} ${a.lastName}`:a.name,date:od(W),time:y,location:S,message:x,gameType:M,raceLength:_,phase:m,divisions:[u],status:"pending",createdAt:new Date};c(Q)}}).catch(O=>{console.error("Failed to send proposal:",O),alert("Failed to send proposal: "+O.message)})},K=()=>{I(!1),n(),c&&c()};return e.createElement(e.Fragment,null,e.createElement(Bt,{open:!0,onClose:n,title:e.createElement("span",{className:Ya["match-proposal-title"]},"Propose a Match - BETA"),maxWidth:"500px",className:"proposal-modal"},e.createElement("div",{className:Ya["match-proposal-content"]},e.createElement("div",{style:{display:"flex",justifyContent:"center",gap:12,marginBottom:12}},e.createElement("div",{className:Ya["match-proposal-phase"]},e.createElement("b",null,e.createElement("span",{style:{color:"#fff"}},m==="scheduled"?"Phase 1:":m==="challenge"?"Phase 2:":""),e.createElement("span",{className:Ya["match-proposal-label-red"],style:{marginLeft:4}},m==="scheduled"?"Scheduled Match Phase":m==="challenge"?"Challenge Phase":""))),e.createElement("div",{className:Ya["match-proposal-division"]},e.createElement("b",null,e.createElement("span",{style:{color:"#fff"}},"Division:"))," ",e.createElement("span",{className:Ya["match-proposal-label-red"]},u))),e.createElement("div",{className:Ya["match-proposal-row"],style:{marginBottom:10}},e.createElement("b",null,"To Opponent:"),e.createElement("div",{className:Ya.opponentName,style:{fontWeight:"bold",fontSize:"1.25rem",margin:"2px 0"}},a.firstName?`${a.firstName} ${a.lastName}`:a.name),e.createElement("span",{style:{color:"#fff",fontSize:"1rem"}},"Day: "),e.createElement("span",{className:Ya["match-proposal-day-value"],style:{color:"#e53e3e",fontWeight:600}},J)),e.createElement("div",{className:Ya["match-proposal-row"],style:{marginBottom:10}},e.createElement("b",null,"Date:"),e.createElement(h5,{selected:W,onChange:X=>L(X),dateFormat:"MM-dd-yyyy",className:Ya["match-proposal-date-input"],required:!0})),e.createElement("div",{className:Ya["match-proposal-row"],style:{marginBottom:10}},e.createElement("b",null,"Time Block:"),e.createElement("select",{className:Ya["match-proposal-select"],value:g,onChange:X=>f(X.target.value)},e.createElement("option",{value:""},"Select time block"),F.map((X,O)=>e.createElement("option",{key:O,value:X},X)))),e.createElement("div",{className:Ya["match-proposal-row"],style:{marginBottom:10}},e.createElement("b",null,"Start Time:"),e.createElement("select",{className:Ya["match-proposal-select"],value:y,onChange:X=>v(X.target.value)},e.createElement("option",{value:""},"Select..."),Y.map((X,O)=>e.createElement("option",{key:O,value:X},X)))),e.createElement("div",{className:Ya["match-proposal-row"],style:{marginBottom:10}},e.createElement("b",null,"Game Type:"),e.createElement("select",{className:Ya["match-proposal-select"],value:M,onChange:X=>N(X.target.value)},e.createElement("option",{value:"8 Ball"},"8 Ball"),e.createElement("option",{value:"9 Ball"},"9 Ball"),e.createElement("option",{value:"10 Ball"},"10 Ball"),e.createElement("option",{value:"Mixed"},"Mixed"))),e.createElement("div",{className:Ya["match-proposal-row"],style:{marginBottom:10}},e.createElement("b",null,"Race Length:"),e.createElement("select",{className:Ya["match-proposal-select"],value:_,onChange:X=>P(Number(X.target.value))},m==="scheduled"||m==="challenge"?e.createElement("option",{value:5},"5"):[...Array(13)].map((X,O)=>{const Q=O+3;return e.createElement("option",{key:Q,value:Q},Q)}))),e.createElement("div",{className:Ya["match-proposal-row"],style:{marginBottom:10}},e.createElement("b",null,"Location:"),e.createElement("select",{className:Ya["match-proposal-location-select"],value:S,onChange:X=>w(X.target.value)},e.createElement("option",{value:""},"Select..."),B.map((X,O)=>e.createElement("option",{key:O,value:X},X)))),e.createElement("div",{className:Ya["match-proposal-row"],style:{marginBottom:10}},e.createElement("b",null,"Message to Opponent:"),e.createElement("textarea",{className:Ya["match-proposal-textarea"],value:jh+x,onChange:X=>{const O=X.target.value;O.startsWith(jh)?k(O.slice(jh.length)):k("")},placeholder:"Add a comment to your opponent...",rows:5})),e.createElement("button",{className:Ya["match-proposal-send-btn"],onClick:U,disabled:!y||!S},"Send Proposal"))),E&&e.createElement(Ax,{open:E,onClose:K,message:`Your match proposal has been sent to ${a.firstName?`${a.firstName} ${a.lastName}`:a.name}.
          They will receive an email notification and can respond through the app.`,phase:m,gameType:M,raceLength:_,day:J,date:od(W),time:y,location:S,proposalNote:x}))}async function u9(a){try{if(!a)return console.warn("No division selected for standings"),[];const r=a.replace(/[^A-Za-z0-9]/g,"_"),t=`${de}/static/standings_${r}.json`,n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch standings: ${n.status}`);const o=await n.json();if(!Array.isArray(o))return console.error("Standings data is not an array:",o),[];const i=o.filter(c=>{if(!c||typeof c!="object")return console.warn("Invalid standings entry:",c),!1;if(!c.name||!c.rank)return console.warn("Standings entry missing name or rank:",c),!1;const u=parseInt(c.rank);return isNaN(u)||u<=0?(console.warn("Invalid rank in standings entry:",c),!1):!0});return console.log(`Loaded ${i.length} valid standings entries for division: ${a}`),i}catch(r){return console.error("Failed to load standings:",r),[]}}function Gi(a,r){if(!r||typeof r!="string")return console.warn("getPlayerPosition: playerName is undefined or not a string:",r),null;const t=r.toLowerCase().trim(),n=a.find(o=>o.name&&o.name.toLowerCase().trim()===t);return n?parseInt(n.rank):null}function m9(a,r){return a.sort((t,n)=>{const o=t&&t.firstName&&t.lastName?`${t.firstName} ${t.lastName}`:"",i=n&&n.firstName&&n.lastName?`${n.firstName} ${n.lastName}`:"",c=Gi(r,o),u=Gi(r,i);return c!==null&&u!==null?c-u:c!==null&&u===null?-1:c===null&&u!==null?1:o.localeCompare(i)})}function p9(a,r,t){if(!r||r.length===0)return console.warn("No standings data available for Phase 2 filtering"),a;console.log("=== PHASE 2 FILTERING DEBUG ==="),console.log("Current player name:",t),console.log("Standings data:",r),console.log("All players from sheet:",a.map(i=>`${i.firstName} ${i.lastName}`));const n=Gi(r,t);if(n===null)return console.warn(`Player ${t} not found in standings`),console.log("Available standings names:",r.map(i=>i.name)),a;console.log(`Phase 2 filtering: ${t} is at position ${n}`);const o=a.filter(i=>{if(!i||!i.firstName||!i.lastName)return console.warn("Player data incomplete, excluding from Phase 2 filtering:",i),!1;const c=`${i.firstName} ${i.lastName}`,u=Gi(r,c);if(u===null)return console.warn(`Opponent ${c} not found in standings - excluding from Phase 2`),!1;const m=u-n,g=m<0&&m>=-4;return console.log(`${c} (${u}) - difference: ${m}, eligible: ${g}`),g});return console.log(`Phase 2 filtering complete: ${o.length} eligible opponents out of ${a.length} total players`),console.log("Eligible players:",o.map(i=>`${i.firstName} ${i.lastName}`)),console.log("=== END PHASE 2 DEBUG ==="),o}function L0({onClose:a,excludeName:r,senderName:t,senderEmail:n,onProposalComplete:o,selectedDivision:i,phase:c}){const[u,m]=h.useState([]),[g,f]=h.useState(""),[y,v]=h.useState(!0),[S,w]=h.useState([]),[x,k]=h.useState("search"),[E,I]=h.useState(null),[M,N]=h.useState(null);h.useEffect(()=>{},[u]),h.useEffect(()=>{let R=!0;async function W(){try{const L=await u9(i);R&&w(L);const F=await fetch(`${de}/api/users/search?approved=true`);if(!F.ok)throw new Error("Failed to fetch players from database");const j=await F.json();if(!j.users||j.users.length===0){R&&m([]),v(!1);return}let J=j.users.map(Y=>({firstName:Y.firstName||"",lastName:Y.lastName||"",email:Y.email||"",phone:Y.phone||"",locations:Y.locations||"",availability:Y.availability||{Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},pin:Y.pin||"",preferredContacts:Y.preferredContacts||[],division:Y.division||"",divisions:Y.divisions||[]})).filter(Y=>Y.email&&Y.firstName&&Y.lastName&&Y.isApproved&&`${Y.firstName} ${Y.lastName}`.toLowerCase()!==(r==null?void 0:r.toLowerCase()));c==="challenge"&&L.length>0?(console.log("🔄 Phase value:",c),console.log("🔄 Standings data length:",L.length),console.log("🔄 Sender name:",t),J=p9(J,L,t),J=m9(J,L)):(console.log("🔄   - phase === 'challenge':",c==="challenge"),console.log("🔄   - standingsData.length > 0:",L.length>0),console.log("🔄   - phase value:",c),console.log("🔄   - standingsData length:",L.length)),R&&(m(J),setTimeout(()=>{},2e3))}catch(L){console.error("Error loading data:",L),R&&m([])}finally{R&&v(!1)}}return W(),()=>{R=!1}},[r,c,t,i]);const _=g.length>=3?u.filter(R=>`${R.firstName} ${R.lastName}`.toLowerCase().includes(g.toLowerCase())&&`${R.firstName} ${R.lastName}`.toLowerCase()!==(r==null?void 0:r.toLowerCase())):[],P=Gi(S,t),B=e.createElement(e.Fragment,null,x==="search"&&e.createElement(Bt,{open:!0,onClose:a,title:"🔍 Player Search",maxWidth:"500px"},c==="challenge"?e.createElement(e.Fragment,null,e.createElement("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid #e53e3e",borderRadius:"6px",padding:"1rem",marginBottom:"1.5rem",color:"#fff"}},e.createElement("strong",null,"Phase 2 (Challenge):")," You can only challenge players ranked 4 spots above in the standings.",e.createElement("br",null),e.createElement("span",{style:{fontSize:"1rem",color:"#fff",marginTop:8,display:"block"}},e.createElement("b",null,"Your Position:")," #",P??"N/A"),u.length>0&&e.createElement("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",opacity:.9}},u.length," eligible opponent",u.length!==1?"s":""," available")),y?e.createElement("p",{style:{color:"#fff",textAlign:"center"}},"Loading players..."):e.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},u.length===0?e.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},"No eligible opponents found within 4 spots above you in the standings."):e.createElement("div",{style:{display:"grid",gap:"8px"}},u.map((R,W)=>{const L=`${R.firstName} ${R.lastName}`,F=Gi(S,L);return e.createElement("button",{key:W,onClick:()=>{I(R),k("availability")},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:j=>{j.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",j.target.style.transform="translateY(-2px)",j.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:j=>{j.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",j.target.style.transform="translateY(0)",j.target.style.boxShadow="none"}},e.createElement("span",{style:{fontWeight:"bold",color:"#fff"}},"#",F??"N/A"," ",L))})))):e.createElement(e.Fragment,null,g.length>=3&&_.length>0&&e.createElement("div",{style:{color:"#e53e3e",fontSize:"0.9rem",marginBottom:"1rem",textAlign:"center"}},"Click opponent's name to see availability."),e.createElement("input",{type:"text",placeholder:"Type at least 3 letters to search...",value:g,onChange:R=>f(R.target.value),autoFocus:!0,"aria-label":"Search for player",style:{width:"100%",padding:"0.75rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"6px",fontSize:"1rem",marginBottom:"1rem"}}),y?e.createElement("p",{style:{color:"#fff",textAlign:"center"}},"Loading players..."):e.createElement(e.Fragment,null,g.length<3?e.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},"Please enter at least 3 letters to search for a player."):e.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},_.length===0?e.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},"No players found."):e.createElement("div",{style:{display:"grid",gap:"8px"}},_.map((R,W)=>e.createElement("button",{key:W,onClick:()=>{I(R),k("availability")},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:L=>{L.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",L.target.style.transform="translateY(-2px)",L.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:L=>{L.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",L.target.style.transform="translateY(0)",L.target.style.boxShadow="none"}},e.createElement(fI,{text:`${R.firstName} ${R.lastName}`,query:g})))))))),x==="availability"&&E&&e.createElement(ef,{player:E,onClose:a,onProposeMatch:(R,W,L,F)=>{N({player:E,day:R,slot:W,phase:L,selectedDivision:F||i}),k("proposal")},phase:c,selectedDivision:i}),x==="proposal"&&M&&e.createElement(e.Fragment,null,e.createElement(cf,{player:M.player,day:M.day,slot:M.slot,onClose:a,senderName:t,senderEmail:n,onProposalComplete:()=>{k("search"),N(null),I(null),o&&o(),a()},phase:M.phase,selectedDivision:M.selectedDivision||i})));return Fd.createPortal(B,document.body)}function Rw({size:a="medium",color:r="#e53e3e",text:t="Loading...",showText:n=!0,variant:o="default"}){const i={small:"16px",medium:"24px",large:"32px",xlarge:"48px"},c=i[a]||i.medium,u=()=>{switch(o){case"pulse":return e.createElement("div",{style:{width:c,height:c,borderRadius:"50%",background:r,animation:"pulse 1.5s ease-in-out infinite"}});case"dots":return e.createElement("div",{style:{display:"flex",gap:"4px"}},[0,1,2].map(m=>e.createElement("div",{key:m,style:{width:"8px",height:"8px",borderRadius:"50%",background:r,animation:"bounce 1.4s ease-in-out infinite both",animationDelay:`${m*.16}s`}})));case"bars":return e.createElement("div",{style:{display:"flex",gap:"2px"}},[0,1,2,3,4].map(m=>e.createElement("div",{key:m,style:{width:"4px",height:"20px",background:r,animation:"bars 1.2s ease-in-out infinite",animationDelay:`${m*.1}s`}})));default:return e.createElement("div",{style:{width:c,height:c,border:"3px solid rgba(229, 62, 62, 0.2)",borderTop:`3px solid ${r}`,borderRadius:"50%",animation:"spin 1s linear infinite"}})}};return e.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"12px",padding:"20px"}},u(),n&&t&&e.createElement("div",{style:{color:r,fontSize:"0.9rem",fontWeight:"500",textAlign:"center",maxWidth:"200px"}},t),e.createElement("style",null,`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
          0%, 100% { 
            transform: scale(0.8);
            opacity: 0.5;
          }
          50% { 
            transform: scale(1);
            opacity: 1;
          }
        }
        
        @keyframes bounce {
          0%, 80%, 100% { 
            transform: scale(0);
          }
          40% { 
            transform: scale(1);
          }
        }
        
        @keyframes bars {
          0%, 40%, 100% { 
            transform: scaleY(0.4);
          }
          20% { 
            transform: scaleY(1);
          }
        }
      `))}function Tw({loading:a,children:r,loadingText:t="Loading...",disabled:n=!1,variant:o="default",size:i="medium",...c}){const u={small:{padding:"8px 16px",fontSize:"0.875rem",minHeight:"36px"},medium:{padding:"12px 20px",fontSize:"1rem",minHeight:"48px"},large:{padding:"16px 24px",fontSize:"1.125rem",minHeight:"56px"}},m=u[i]||u.medium;return e.createElement("button",{...c,disabled:a||n,style:{...c.style,...m,position:"relative",opacity:a?.8:1,cursor:a?"not-allowed":"pointer",transition:"all 0.3s ease"}},a?e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}},e.createElement(Rw,{size:"small",variant:o,showText:!1,color:"#fff"}),t):r)}function f9({lines:a=3,height:r="20px",width:t="100%",gap:n="8px",variant:o="default"}){const i=c=>{const m=c===a-1?"60%":t;switch(o){case"pulse":return e.createElement("div",{key:c,style:{height:r,width:m,background:"#444",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}});case"shimmer":return e.createElement("div",{key:c,style:{height:r,width:m,background:"linear-gradient(90deg, #333 25%, #444 50%, #333 75%)",backgroundSize:"200% 100%",borderRadius:"4px",animation:"shimmer 1.5s infinite"}});default:return e.createElement("div",{key:c,style:{height:r,width:m,background:"#333",borderRadius:"4px",opacity:.7}})}};return e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:n,padding:"16px"}},Array.from({length:a}).map((c,u)=>i(u)),e.createElement("style",null,`
        @keyframes pulse {
          0%, 100% { 
            opacity: 0.7;
          }
          50% { 
            opacity: 1;
          }
        }
        
        @keyframes shimmer {
          0% { background-position: -200% 0; }
          100% { background-position: 200% 0; }
        }
      `))}function g9(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-"),m=new Date(parseInt(i),parseInt(c)-1,parseInt(u)),g=String(m.getMonth()+1).padStart(2,"0"),f=String(m.getDate()).padStart(2,"0"),y=m.getFullYear();return`${g}-${f}-${y}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}function h9({proposal:a,open:r,onClose:t,onEdit:n,onMessage:o}){if(h.useEffect(()=>{r&&setTimeout(()=>{window.dispatchEvent(new Event("resize"))},50)},[r]),!r||!a)return null;const{senderName:i,receiverName:c,day:u,date:m,time:g,location:f,gameType:y,raceLength:v,message:S,proposalNote:w}=a,x=window.innerWidth<=500,[k,E]=h.useState(!1),[I,M]=h.useState("");async function N(){E(!0),M("");try{if(!(await fetch(`${de}/api/proposals/${a._id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"confirmed"})})).ok)throw new Error("Failed to confirm proposal");t&&t()}catch(P){M(P.message||"Failed to confirm proposal")}finally{E(!1)}}const _=e.createElement(Bt,{open:r,onClose:t,title:"🎱 Proposal Details",maxWidth:x?"99vw":"480px"},a.isCounter&&e.createElement("div",{style:{color:"#ff9800",fontWeight:"bold",marginBottom:8,fontSize:"1.05em",textAlign:"center"}},"This is a counter proposal from ",a.counteredBy||"your opponent"),e.createElement("div",{style:{textAlign:"left",marginBottom:x?"0.7rem":"1.5rem",fontSize:x?"0.95rem":"1.05rem",padding:x?"0.2rem 0.2rem":void 0}},e.createElement("div",{className:Ae.modalDetailRowSnazzy,style:{padding:x?"0.2em 0.3em":void 0}},e.createElement("strong",{style:{color:"#e53e3e",minWidth:x?"80px":"120px",fontSize:x?"0.95em":void 0}},"You:"),e.createElement("span",{style:{color:"#fff",marginLeft:x?"4px":"8px"}},i||"N/A")),e.createElement("div",{className:Ae.modalDetailRowSnazzy,style:{padding:x?"0.2em 0.3em":void 0}},e.createElement("strong",{style:{color:"#e53e3e",minWidth:x?"80px":"120px",fontSize:x?"0.95em":void 0}},"Opponent:"),e.createElement("span",{style:{color:"#fff",marginLeft:x?"4px":"8px"}},c||"N/A")),u&&e.createElement("div",{className:Ae.modalDetailRowSnazzy,style:{padding:x?"0.2em 0.3em":void 0}},e.createElement("strong",{style:{color:"#e53e3e",minWidth:x?"80px":"120px",fontSize:x?"0.95em":void 0}},"Day:"),e.createElement("span",{style:{color:"#fff",marginLeft:x?"4px":"8px"}},u)),e.createElement("div",{className:Ae.modalDetailRowSnazzy,style:{padding:x?"0.2em 0.3em":void 0}},e.createElement("strong",{style:{color:"#e53e3e",minWidth:x?"80px":"120px",fontSize:x?"0.95em":void 0}},"Date:"),e.createElement("span",{style:{color:"#fff",marginLeft:x?"4px":"8px"}},g9(m))),e.createElement("div",{className:Ae.modalDetailRowSnazzy,style:{padding:x?"0.2em 0.3em":void 0}},e.createElement("strong",{style:{color:"#e53e3e",minWidth:x?"80px":"120px",fontSize:x?"0.95em":void 0}},"Time:"),e.createElement("span",{style:{color:"#fff",marginLeft:x?"4px":"8px"}},g||"N/A")),e.createElement("div",{className:Ae.modalDetailRowSnazzy,style:{padding:x?"0.2em 0.3em":void 0}},e.createElement("strong",{style:{color:"#e53e3e",minWidth:x?"80px":"120px",fontSize:x?"0.95em":void 0}},"Location:"),e.createElement("span",{style:{color:"#fff",marginLeft:x?"4px":"8px"}},f||"N/A")),y&&e.createElement("div",{className:Ae.modalDetailRowSnazzy,style:{padding:x?"0.2em 0.3em":void 0}},e.createElement(Hp,{gameType:y,size:x?12:16}),e.createElement("strong",{style:{color:"#e53e3e",minWidth:x?"80px":"120px",fontSize:x?"0.95em":void 0}},"Game:"),e.createElement("span",{style:{color:"#fff",marginLeft:x?"4px":"8px"}},y)),v&&e.createElement("div",{className:Ae.modalDetailRowSnazzy,style:{padding:x?"0.2em 0.3em":void 0}},e.createElement("strong",{style:{color:"#e53e3e",minWidth:x?"80px":"120px",fontSize:x?"0.95em":void 0}},"Race:"),e.createElement("span",{style:{color:"#fff",marginLeft:x?"4px":"8px"}},v)),w&&e.createElement("div",{style:{margin:x?"8px 0 0 0":"16px 0 0 0",padding:x?"0.4rem 0.5rem":"0.8rem 1rem",background:"rgba(255, 193, 7, 0.1)",borderLeft:"3px solid #ffc107",borderRadius:"6px",color:"#ffc107",fontSize:x?"0.9rem":"0.95rem",textAlign:"left"}},e.createElement("span",{role:"img","aria-label":"note"},"📝")," ",e.createElement("strong",null,"Note:"),e.createElement("br",null),w)),e.createElement("div",{style:{display:"flex",gap:x?6:12,justifyContent:"center",marginTop:x?10:24,flexDirection:x?"column":"row",alignItems:x?"stretch":"center"}},n&&e.createElement("button",{className:Ae.dashboardBtn,onClick:n,style:{background:"#e53e3e",color:"#fff",minWidth:x?"90px":"120px",fontSize:x?"0.95em":void 0,padding:x?"0.5em 0.7em":void 0}},"Edit"),o&&e.createElement("button",{className:Ae.dashboardBtn,onClick:o,style:{background:"#007bff",color:"#fff",minWidth:x?"90px":"120px",fontSize:x?"0.95em":void 0,padding:x?"0.5em 0.7em":void 0}},"Msg"),a.isCounter&&a.status==="countered"&&e.createElement(Tw,{className:Ae.dashboardBtn,onClick:N,loading:k,loadingText:"Confirming...",disabled:k,style:{background:"#43a047",color:"#fff",minWidth:x?"90px":"120px",fontSize:x?"0.95em":void 0,padding:x?"0.5em 0.7em":void 0}},"Confirm"),e.createElement("button",{className:Ae.dashboardBtn,onClick:t,style:{background:"#6c757d",color:"#fff",minWidth:x?"90px":"120px",fontSize:x?"0.95em":void 0,padding:x?"0.5em 0.7em":void 0}},"Close")),I&&e.createElement("div",{style:{color:"red",marginTop:8}},I));return Fd.createPortal(_,document.body)}function Hh(a){const r=a.getFullYear(),t=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0");return`${r}-${t}-${n}`}function y9(a){const t=a.trim().replace(/\s+/g,"").toLowerCase().match(/^(\d{1,2})(:\d{2})?(am|pm)$/);if(t){const o=t[1],i=t[2]?t[2]:":00",c=t[3].toUpperCase();return`${o}${i} ${c}`}const n=a.trim().match(/^(\d{1,2})(:\d{2})?\s?(am|pm)$/i);if(n){const o=n[1],i=n[2]?n[2]:":00",c=n[3].toUpperCase();return`${o}${i} ${c}`}return a.trim()}const b9=a=>a.replace(/[–—−]/g,"-").replace(/\s*-\s*/g," - ").trim();function v9({proposal:a,open:r,onClose:t,onSave:n,selectedDivision:o,phase:i,receiverPlayer:c}){var O;const[u,m]=h.useState(new Date),[g,f]=h.useState(""),[y,v]=h.useState(""),[S,w]=h.useState(""),[x,k]=h.useState(""),[E,I]=h.useState(""),[M,N]=h.useState(""),[_,P]=h.useState(""),[B,R]=h.useState(!1);h.useEffect(()=>{if(a&&r){if(a.date){const[Q,ne,T]=a.date.split("-");m(new Date(parseInt(Q),parseInt(ne)-1,parseInt(T)))}f(a.time||""),w(a.location||""),k(a.message||""),I(a.gameType||""),N(a.raceLength||"")}},[a,r]);const L=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][u.getDay()],j=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][u.getDay()],J=((O=c==null?void 0:c.availability)==null?void 0:O[j])||[];console.log("EditProposalModal - Receiver player:",c),console.log("EditProposalModal - Selected day short:",j),console.log("EditProposalModal - Opponent time blocks:",J);const Y=["6:00 PM - 8:00 PM","8:00 PM - 10:00 PM","10:00 PM - 12:00 AM"],D=J.length>0?J:Y;console.log("EditProposalModal - Available time blocks:",D);const A=!c&&r,U=e.useMemo(()=>{if(!g)return console.log("EditProposalModal - No time selected:",g),[];console.log("EditProposalModal - Selected time block:",g);const Q=b9(g);if(console.log("EditProposalModal - Normalized slot:",Q),!Q.includes(" - "))return console.log("EditProposalModal - No dash found in normalized slot"),[];let[ne,T]=Q.split(" - ").map(G=>y9(G.trim()));if(console.log("EditProposalModal - Normalized times:",{blockStart:ne,blockEnd:T}),!ne||!T)return console.log("EditProposalModal - Failed to normalize times"),[];const re=dy(ne,T,30);return console.log("EditProposalModal - Generated start times:",re),console.log("EditProposalModal - Times array length:",re.length),re},[g]);h.useEffect(()=>{v("")},[g]);const K=async()=>{if(!y||!S){P("Please fill in all required fields.");return}R(!0),P("");try{const Q=await fetch(`${de}/api/proposals/${a._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:Hh(u),time:y,location:S,message:x,gameType:E,raceLength:M,phase:i,divisions:[o]})}),ne=await Q.json();if(!Q.ok)throw new Error(ne.error||"Failed to update proposal");n&&n({...a,date:Hh(u),time:y,location:S,message:x,gameType:E,raceLength:M}),t()}catch(Q){P(Q.message||"Failed to update proposal")}finally{R(!1)}};if(!r||!a)return null;const X=e.createElement(Bt,{open:r,onClose:t,title:"✏️ Edit Proposal",maxWidth:"400px"},e.createElement("div",{className:Ae.proposalModalContent,style:{width:"100%",maxWidth:400,margin:"0 auto"}},e.createElement("div",{className:Ae.proposalModalHeaderBar},e.createElement("span",{className:Ae.phasePill},"Phase 1: Scheduled Match Phase"),e.createElement("span",{className:Ae.divisionPill},"Division: ",o||"N/A")),e.createElement("div",{className:Ae.proposalModalToRow},e.createElement("span",{className:Ae.toOpponentLabel},"To Opponent:"),e.createElement("span",{className:Ae.toOpponentName},a.receiverName)),e.createElement("div",{className:Ae.proposalModalDayRow},e.createElement("span",{className:Ae.dayLabel},"Day:"),e.createElement("span",{className:Ae.dayValue},L)),e.createElement("div",{className:Ae.formGroup,style:{display:"flex",flexDirection:"column",alignItems:"center"}},e.createElement("label",{htmlFor:"proposal-date",style:{marginBottom:4,textAlign:"center"}},"Date"),e.createElement("input",{id:"proposal-date",type:"date",value:Hh(u),onChange:Q=>{const[ne,T,re]=Q.target.value.split("-");m(new Date(parseInt(ne),parseInt(T)-1,parseInt(re)))},className:Ae.input,required:!0,style:{textAlign:"center"}})),e.createElement("div",{className:Ae.proposalModalFieldRow},e.createElement("span",{className:Ae.fieldLabel},"Time Block:"),A&&e.createElement("div",{style:{color:"#ff6b6b",fontSize:"0.9rem",marginBottom:"0.5rem"}},"⚠️ Opponent availability data not available. Using default time blocks."),c&&J.length===0&&e.createElement("div",{style:{color:"#ffa500",fontSize:"0.9rem",marginBottom:"0.5rem"}},"ℹ️ No availability for ",L,". Using default time blocks."),e.createElement("select",{value:g,onChange:Q=>f(Q.target.value),className:Ae.inputField},e.createElement("option",{value:""},"Select time block"),D.map(Q=>e.createElement("option",{key:Q,value:Q},Q)))),e.createElement("div",{className:Ae.proposalModalFieldRow},e.createElement("span",{className:Ae.fieldLabel},"Start Time:"),e.createElement("select",{value:y,onChange:Q=>v(Q.target.value),className:Ae.inputField},e.createElement("option",{value:""},"Select start time"),U.map(Q=>e.createElement("option",{key:Q,value:Q},Q)))),e.createElement("div",{className:Ae.proposalModalFieldRow},e.createElement("span",{className:Ae.fieldLabel},"Game Type:"),e.createElement("select",{value:E,onChange:Q=>I(Q.target.value),className:Ae.inputField},e.createElement("option",{value:""},"Select game type"),e.createElement("option",{value:"8 Ball"},"8 Ball"),e.createElement("option",{value:"9 Ball"},"9 Ball"),e.createElement("option",{value:"10 Ball"},"10 Ball"),e.createElement("option",{value:"Mixed"},"Mixed"))),e.createElement("div",{className:Ae.proposalModalFieldRow},e.createElement("span",{className:Ae.fieldLabel},"Race Length:"),e.createElement("select",{value:M,onChange:Q=>N(Q.target.value),className:Ae.inputField},e.createElement("option",{value:""},"Select race length"),e.createElement("option",{value:"3"},"3"),e.createElement("option",{value:"5"},"5"),e.createElement("option",{value:"7"},"7"),e.createElement("option",{value:"9"},"9"))),e.createElement("div",{className:Ae.proposalModalFieldRow},e.createElement("span",{className:Ae.fieldLabel},"Location:"),e.createElement("input",{type:"text",value:S,onChange:Q=>w(Q.target.value),placeholder:"Enter location",className:Ae.inputField})),e.createElement("div",{className:Ae.proposalModalFieldRow},e.createElement("span",{className:Ae.fieldLabel},"Message to Opponent:"),e.createElement("textarea",{value:x,onChange:Q=>k(Q.target.value),placeholder:"Message to opponent",rows:3,className:Ae.inputField})),_&&e.createElement("div",{className:Ae.errorBox},_),e.createElement("div",{className:Ae.proposalModalButtonRow},e.createElement("button",{className:Ae.dashboardBtn,onClick:K,disabled:B,style:{width:"48%"}},B?"Saving...":"Save Changes"),e.createElement("button",{className:Ae.dashboardBtn,onClick:t,disabled:B,style:{width:"48%"}},"Cancel"))));return Fd.createPortal(X,document.body)}const E9="_container_qqpwh_3",x9="_header_qqpwh_23",w9="_headerButtons_qqpwh_57",S9="_newChatButton_qqpwh_69",C9="_closeButton_qqpwh_101",N9="_content_qqpwh_133",_9="_conversationsList_qqpwh_147",k9="_loading_qqpwh_181",I9="_emptyState_qqpwh_193",M9="_startChatButton_qqpwh_215",A9="_conversationItems_qqpwh_245",D9="_conversationItem_qqpwh_245",R9="_active_qqpwh_283",T9="_conversationInfo_qqpwh_293",P9="_conversationName_qqpwh_303",L9="_lastMessage_qqpwh_321",B9="_conversationMeta_qqpwh_345",z9="_timestamp_qqpwh_361",O9="_unreadBadge_qqpwh_379",F9="_messagesArea_qqpwh_407",W9="_messagesHeader_qqpwh_421",U9="_messagesList_qqpwh_447",$9="_messageItem_qqpwh_465",j9="_myMessage_qqpwh_475",H9="_theirMessage_qqpwh_483",Y9="_messageBubble_qqpwh_491",q9="_messageContent_qqpwh_527",G9="_messageTime_qqpwh_539",Z9="_readStatus_qqpwh_563",V9="_noConversation_qqpwh_571",Q9="_messageInput_qqpwh_591",J9="_sendButton_qqpwh_647",X9="_playerList_qqpwh_769",K9="_playerItem_qqpwh_781",eB="_selected_qqpwh_807",tB="_playerName_qqpwh_817",aB="_modalActions_qqpwh_847",nB="_cancelButton_qqpwh_861",rB="_startButton_qqpwh_893",oB="_error_qqpwh_939",Gt={container:E9,header:x9,headerButtons:w9,newChatButton:S9,closeButton:C9,content:N9,conversationsList:_9,loading:k9,emptyState:I9,startChatButton:M9,conversationItems:A9,conversationItem:D9,active:R9,conversationInfo:T9,conversationName:P9,lastMessage:L9,conversationMeta:B9,timestamp:z9,unreadBadge:O9,messagesArea:F9,messagesHeader:W9,messagesList:U9,messageItem:$9,myMessage:j9,theirMessage:H9,messageBubble:Y9,messageContent:q9,messageTime:G9,readStatus:Z9,noConversation:V9,messageInput:Q9,sendButton:J9,playerList:X9,playerItem:K9,selected:eB,playerName:tB,modalActions:aB,cancelButton:nB,startButton:rB,error:oB};console.log("DirectMessagingModal BACKEND_URL in use:",de);function lB({userName:a,userEmail:r,userPin:t,selectedDivision:n,opponentEmails:o=[],onClose:i}){console.log("Opponent Emails:",o);const[c,u]=h.useState([]),[m,g]=h.useState(null),[f,y]=h.useState([]),[v,S]=h.useState(""),[w,x]=h.useState(!1),[k,E]=h.useState(!1),[I,M]=h.useState(""),[N,_]=h.useState([]),[P,B]=h.useState(!1),[R,W]=h.useState(null),L=h.useRef(null);h.useEffect(()=>{async function A(){try{const K=await(await fetch(`${de}/api/users`)).json();Array.isArray(K)&&_(K.filter(X=>X.email!==r))}catch(U){console.error("Failed to load players:",U)}}A()},[r]),h.useEffect(()=>{async function A(){x(!0);try{const K=await(await fetch(`${de}/api/messages/conversations?user=${encodeURIComponent(r)}`)).json();console.log("Conversations fetch data:",K),Array.isArray(K)&&u(K)}catch(U){console.error("Failed to load conversations:",U),M("Failed to load conversations")}finally{x(!1)}}A()},[r]),h.useEffect(()=>{if(!m){y([]);return}async function A(){try{const K=await(await fetch(`${de}/api/messages?user1=${encodeURIComponent(r)}&user2=${encodeURIComponent(m.email)}`)).json();Array.isArray(K)&&(y(K),K.forEach(X=>{X.receiverEmail===r&&!X.read&&fetch(`${de}/api/messages/${X._id}/read`,{method:"PUT"})}))}catch(U){console.error("Failed to load messages:",U),M("Failed to load messages")}}A()},[m,r]),h.useEffect(()=>{L.current&&L.current.scrollIntoView({behavior:"smooth"})},[f]);const F=async()=>{if(!v.trim()||!m)return;E(!0),M("");let A=m.email;if(!A){const U=N.find(K=>K.name===m.name&&K.email);U&&(A=U.email)}if(console.log("Sending message to:",A),!A){M("No email found for selected opponent."),E(!1);return}try{const U=await fetch(`${de}/api/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderEmail:r,receiverEmail:A,content:v})});if(console.log("Send response:",U),!U.ok)throw new Error("Failed to send message");S("");const X=await(await fetch(`${de}/api/messages?user1=${encodeURIComponent(r)}&user2=${encodeURIComponent(A)}`)).json();Array.isArray(X)&&y(X)}catch(U){M(U.message||"Failed to send message")}finally{E(!1)}},j=async()=>{R&&(g(R),B(!1),W(null))},J=A=>A.unreadCount||0,Y=A=>{const U=new Date(A),X=(new Date-U)/(1e3*60*60);return X<24?U.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):X<48?"Yesterday":U.toLocaleDateString()},D=N.filter(A=>o.length>0?o.includes(A.name):n?Array.isArray(A.divisions)?A.divisions.includes(n):typeof A.divisions=="string"?A.divisions.split(",").map(U=>U.trim()).includes(n):!1:!0).sort((A,U)=>{const K=`${A.name||""}`.trim().toLowerCase(),X=`${U.name||""}`.trim().toLowerCase();return K.localeCompare(X)});return e.createElement("div",{className:Gt.container},e.createElement("div",{className:Gt.header},e.createElement("h2",null,"Direct Messages"),e.createElement("div",{className:Gt.headerButtons},e.createElement("button",{className:Gt.newChatButton,onClick:()=>B(!0),type:"button"},"💬 New Chat"),e.createElement("button",{className:Gt.closeButton,onClick:i,type:"button"},"×"))),e.createElement("div",{className:Gt.content},e.createElement("div",{className:Gt.conversationsList},e.createElement("h3",null,"Conversations"),w?e.createElement("div",{className:Gt.loading},"Loading conversations..."):c.length===0?e.createElement("div",{className:Gt.emptyState},e.createElement("p",null,"No conversations yet"),e.createElement("button",{className:Gt.startChatButton,onClick:()=>B(!0),type:"button"},"Start a conversation")):e.createElement("div",{className:Gt.conversationItems},c.map(A=>e.createElement("div",{key:A.email,className:`${Gt.conversationItem} ${(m==null?void 0:m.email)===A.email?Gt.active:""}`,onClick:()=>g(A)},e.createElement("div",{className:Gt.conversationInfo},e.createElement("div",{className:Gt.conversationName},A.name||A.email),e.createElement("div",{className:Gt.lastMessage},A.lastMessage||"No messages yet")),e.createElement("div",{className:Gt.conversationMeta},e.createElement("div",{className:Gt.timestamp},A.lastMessageTime?Y(A.lastMessageTime):""),J(A)>0&&e.createElement("div",{className:Gt.unreadBadge},J(A))))))),e.createElement("div",{className:Gt.messagesArea},m?e.createElement(e.Fragment,null,e.createElement("div",{className:Gt.messagesHeader},e.createElement("h3",null,"Chat with ",m.name||m.email)),e.createElement("div",{className:Gt.messagesList},f.map(A=>e.createElement("div",{key:A._id,className:`${Gt.messageItem} ${A.senderEmail===r?Gt.myMessage:Gt.theirMessage}`},e.createElement("div",{className:Gt.messageBubble},e.createElement("div",{className:Gt.messageContent},A.content),e.createElement("div",{className:Gt.messageTime},Y(A.timestamp),A.senderEmail===r&&e.createElement("span",{className:Gt.readStatus},A.read?"✓✓":"✓"))))),e.createElement("div",{ref:L})),e.createElement("div",{className:Gt.messageInput},e.createElement("input",{type:"text",value:v,onChange:A=>S(A.target.value),onKeyDown:A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),F())},placeholder:"Type a message...",disabled:k}),e.createElement("button",{onClick:F,disabled:k||!v.trim(),className:Gt.sendButton,type:"button"},"Send"))):e.createElement("div",{className:Gt.noConversation},e.createElement("p",null,"Select a conversation to start messaging")))),P&&e.createElement(Bt,{open:P,onClose:()=>{B(!1),W(null)},title:"Start New Conversation",maxWidth:"400px"},e.createElement("button",{style:{position:"absolute",top:10,right:10,background:"none",border:"none",color:"#fff",fontSize:24,cursor:"pointer",zIndex:10001},onClick:()=>{B(!1),W(null)},"aria-label":"Close",type:"button"},"×"),e.createElement("div",{className:Gt.playerList},D.map(A=>e.createElement("div",{key:A._id||A.email,className:`${Gt.playerItem} ${(R==null?void 0:R.email)===A.email?Gt.selected:""}`,onClick:()=>W(A)},e.createElement("div",{className:Gt.playerName},A.name?A.name:A.email)))),e.createElement("div",{className:Gt.modalActions},e.createElement("button",{onClick:()=>{B(!1),W(null)},className:Gt.cancelButton,type:"button"},"Cancel"),e.createElement("button",{onClick:j,disabled:!R,className:Gt.startButton,type:"button"},"Start Chat"))),I&&e.createElement("div",{className:Gt.error},I))}const sB="_customChannelHeader_1kvzt_1",iB="_customChannelHeaderIcon_1kvzt_51",cB="_customChannelHeaderTitle_1kvzt_61",dB="_customChannelHeaderDate_1kvzt_71",uB="_customChannelHeaderOnline_1kvzt_83",mB="_customChannelHeaderOnlineLabel_1kvzt_97",pB="_customChannelHeaderNone_1kvzt_109",fB="_customChannelHeaderAvatar_1kvzt_119",Fl={customChannelHeader:sB,customChannelHeaderIcon:iB,customChannelHeaderTitle:cB,customChannelHeaderDate:dB,customChannelHeaderOnline:uB,customChannelHeaderOnlineLabel:mB,customChannelHeaderNone:pB,customChannelHeaderAvatar:fB};function gB(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-"),m=new Date(parseInt(i),parseInt(c)-1,parseInt(u)),g=String(m.getMonth()+1).padStart(2,"0"),f=String(m.getDate()).padStart(2,"0"),y=m.getFullYear();return`${g}-${f}-${y}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}function hB(a){if(!a)return"";const r=a.trim().split(" ");if(r.length===1){const t=r[0].split(/[^a-zA-Z0-9]/).filter(Boolean);return t.length>1?(t[0][0]+t[1][0]).toUpperCase():r[0].slice(0,2).toUpperCase()}return(r[0][0]+r[r.length-1][0]).toUpperCase()}function yB({channel:a,currentUser:r}){var c,u,m;const t=((c=a==null?void 0:a.data)==null?void 0:c.name)||(a==null?void 0:a.id)||"General Chat",n=(u=a==null?void 0:a.data)==null?void 0:u.matchDate,o=r==null?void 0:r.id,i=(m=a==null?void 0:a.state)!=null&&m.members?Object.values(a.state.members).filter(g=>{var f,y;return((f=g.user)==null?void 0:f.online)||((y=g.user)==null?void 0:y.id)===o}).map(g=>{var f,y;return((f=g.user)==null?void 0:f.name)||((y=g.user)==null?void 0:y.id)}).filter(Boolean):[(r==null?void 0:r.name)||(r==null?void 0:r.id)].filter(Boolean);return e.createElement("div",{className:Fl.customChannelHeader,style:{width:"100%",margin:"0",borderRadius:"0",marginTop:"0",marginBottom:"0"}},e.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",width:"100%"}},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.8em",fontSize:"1.1em",textAlign:"center",width:"100%"}},e.createElement("span",{className:Fl.customChannelHeaderIcon},"💬"),e.createElement("span",{style:{textAlign:"center"}},"You're in the"," ",e.createElement("span",{className:Fl.customChannelHeaderTitle},'"',t,'"')," ","channel."),n&&e.createElement("span",{className:Fl.customChannelHeaderDate},"Match Date: ",gB(n))),e.createElement("div",{className:Fl.customChannelHeaderOnline},e.createElement("span",{className:Fl.customChannelHeaderOnlineLabel},"Online:"),i.length===0&&e.createElement("span",{className:Fl.customChannelHeaderNone},"No one online"),i.map(g=>e.createElement("span",{key:g,className:Fl.customChannelHeaderAvatar,title:g},hB(g))))))}var Yh={exports:{}},qh,W2;function bB(){if(W2)return qh;W2=1;var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return qh=a,qh}var Gh,U2;function vB(){if(U2)return Gh;U2=1;var a=bB();function r(){}function t(){}return t.resetWarningCache=r,Gh=function(){function n(c,u,m,g,f,y){if(y!==a){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}n.isRequired=n;function o(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:o,element:n,elementType:n,instanceOf:o,node:n,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:r};return i.PropTypes=i,i},Gh}var $2;function EB(){return $2||($2=1,Yh.exports=vB()()),Yh.exports}var xB=EB();const ee=Up(xB),Pw={async getUser(a){return pn.get(`/api/users/${encodeURIComponent(a)}`)},async syncUsers(){return pn.post("/admin/sync-users")}};class wB{async getCurrentSeason(r){try{const t=await fetch(`${de}/api/seasons/current/${encodeURIComponent(r)}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.error("Error fetching current season:",t),null}}async getCurrentPhaseAndWeek(r){try{const t=await fetch(`${de}/api/seasons/phase/${encodeURIComponent(r)}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.error("Error fetching current phase and week:",t),{currentWeek:null,phase:"offseason",isActive:!1,season:null}}}async getAllSeasons(r){try{const t=await fetch(`${de}/api/seasons/${encodeURIComponent(r)}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.error("Error fetching all seasons:",t),[]}}isMatchWithinPhase1Deadline(r,t){if(!t||!t.phase1End)return!0;const n=new Date(r),o=new Date(t.phase1End);return n<=o}getDaysUntilPhase1Deadline(r){if(!r||!r.phase1End)return null;const t=new Date,o=new Date(r.phase1End)-t;return Math.ceil(o/(1e3*60*60*24))}hasPhase1DeadlinePassed(r){if(!r||!r.phase1End)return!1;const t=new Date,n=new Date(r.phase1End);return t>n}hasPhase2Started(r){if(!r||!r.phase2Start)return!1;const t=new Date,n=new Date(r.phase2Start);return t>=n}getDaysUntilPhase2Deadline(r){if(!r||!r.phase2End)return null;const t=new Date,o=new Date(r.phase2End)-t;return Math.ceil(o/(1e3*60*60*24))}hasPhase2DeadlinePassed(r){if(!r||!r.phase2End)return!1;const t=new Date,n=new Date(r.phase2End);return t>n}getCurrentPhaseFromDates(r){if(!r)return"offseason";const t=new Date,n=new Date(r.phase1Start),o=new Date(r.phase1End),i=new Date(r.phase2Start),c=new Date(r.phase2End);return t<n?"offseason":t>=n&&t<=o?"scheduled":t>=i&&t<=c?"challenge":t>c?"completed":"transition"}}const tl=new wB;function SB({userName:a,userEmail:r,userPin:t,onClose:n,fromChat:o=!1}){const[i,c]=h.useState([]),[u,m]=h.useState(!0),[g,f]=h.useState(""),[y,v]=h.useState("scheduled"),[S,w]=h.useState(!1),[x,k]=h.useState(!1),[E,I]=h.useState(!1),[M,N]=h.useState(!1),[_,P]=h.useState(null),[B,R]=h.useState(null),[W,L]=h.useState([]),[F,j]=h.useState([]),[J,Y]=h.useState(!1);h.useEffect(()=>{r&&Pw.getUser(r).then(Q=>{let ne=[];Array.isArray(Q.divisions)?ne=Q.divisions.map(T=>T.trim()).filter(Boolean):typeof Q.divisions=="string"?ne=Q.divisions.split(",").map(T=>T.trim()).filter(Boolean):ne=[],c(ne),m(!1)}).catch(()=>{c([]),m(!1)})},[r]);const D=async Q=>{Y(!0);try{const ne=`schedule_${Q.replace(/[^A-Za-z0-9]/g,"_")}.json`,T=Date.now(),re=`${de}/static/${ne}?t=${T}`,G=await fetch(re,{method:"GET",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!G.ok)throw new Error("Schedule not found");const se=await G.json();L(se);const pe=await fetch(`${de}/api/users/search?approved=true&division=${encodeURIComponent(Q)}`,{method:"GET",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!pe.ok)throw new Error("Players not found");const Se=await pe.json();j(Se.users||[])}catch(ne){console.error("Failed to load schedule data:",ne),L([]),j([])}finally{Y(!1)}},A=async Q=>{f(Q);try{const ne=await tl.getCurrentPhaseAndWeek(Q),T=(ne==null?void 0:ne.phase)||"scheduled";v(T),T==="scheduled"||T==="offseason"?(await D(Q),w(!0)):k(!0)}catch(ne){console.error("Error fetching phase data:",ne),k(!0)}},U=()=>{if(!W.length||!F.length||!g)return[];const Q=`${a}`,ne=[];for(const G of W)if(G.player1&&G.player2&&!G.scheduled){const se=G.player1.trim(),pe=G.player2.trim();(se.toLowerCase()===Q.toLowerCase()||pe.toLowerCase()===Q.toLowerCase())&&ne.push(G)}const T=F.filter(G=>G.divisions&&G.divisions.includes(g));return ne.map(G=>{var Se,at;const se=G.player1&&G.player1.trim().toLowerCase()===Q.toLowerCase()?(Se=G.player2)==null?void 0:Se.trim():(at=G.player1)==null?void 0:at.trim();if(!se)return null;const pe=T.find(be=>be.name&&be.name.trim().toLowerCase()===se.toLowerCase());return{match:G,player:pe,opponentName:se}}).filter(Boolean)},K=async Q=>{const T=F.filter(re=>re.divisions&&re.divisions.includes(g)).find(re=>re.name&&re.name.trim().toLowerCase()===Q.trim().toLowerCase());if(!T){alert("Player data not found for: "+Q);return}if(!T.email){alert("This opponent does not have an email on file and cannot be proposed a match.");return}if(o){try{const re=await fetch(`${de}/api/users/search?approved=true`);if(!re.ok)throw new Error("Failed to fetch players from database");const se=(await re.json()).users.find(pe=>`${pe.firstName} ${pe.lastName}`.trim().toLowerCase()===Q.trim().toLowerCase());if(se){const pe=typeof se.availability=="string"?p0(se.availability):se.availability,Se={...se,availability:pe};P(Se)}else P(T)}catch(re){console.error("Error fetching detailed player data:",re),P(T)}w(!1),I(!0)}else w(!1),k(!0)},X=(Q,ne,T,re)=>{R({day:Q,slot:ne,phase:T,division:re,opponent:_}),I(!1),N(!0)},O=()=>{w(!1),k(!1),I(!1),N(!1),P(null),R(null),f(""),n()};return u?e.createElement(Bt,{open:!0,onClose:n,title:"Loading Divisions...",maxWidth:"500px"},e.createElement("div",{style:{textAlign:"center",padding:"2rem"}},e.createElement("p",null,"Please wait while we load your divisions..."))):i.length===0?e.createElement(Bt,{open:!0,onClose:n,title:"No Divisions Found",maxWidth:"500px"},e.createElement("div",{style:{textAlign:"center",padding:"2rem"}},e.createElement("p",null,"You are not registered for any divisions. Please contact an administrator."),e.createElement("button",{onClick:n,style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"0.8rem 1.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",marginTop:"1rem"},onMouseEnter:Q=>{Q.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",Q.target.style.transform="translateY(-2px)",Q.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:Q=>{Q.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",Q.target.style.transform="translateY(0)",Q.target.style.boxShadow="none"}},"Close"))):e.createElement(e.Fragment,null,!S&&!x&&e.createElement(Bt,{open:!0,onClose:n,title:"Select Division",maxWidth:"500px"},e.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},e.createElement("p",{style:{color:"#fff",textAlign:"center",marginBottom:"1.5rem",fontSize:"1rem"}},"Choose a division to schedule a match:"),e.createElement("div",{style:{display:"grid",gap:"12px"}},i.map(Q=>e.createElement("button",{key:Q,onClick:()=>A(Q),style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem 1.5rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:ne=>{ne.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",ne.target.style.transform="translateY(-2px)",ne.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:ne=>{ne.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",ne.target.style.transform="translateY(0)",ne.target.style.boxShadow="none"}},"🏆 ",Q))))),S&&(J?e.createElement(Bt,{open:!0,onClose:O,title:"Loading Opponents...",maxWidth:"500px"},e.createElement("div",{style:{textAlign:"center",padding:"2rem"}},e.createElement("p",null,"Please wait while we load your scheduled opponents..."))):e.createElement(C5,{open:S,onClose:O,opponents:U(),onOpponentClick:K,phase:y})),x&&e.createElement(L0,{onClose:O,excludeName:a,senderName:a,senderEmail:r,onProposalComplete:()=>{O()},selectedDivision:g,phase:y}),E&&_&&e.createElement(ef,{open:E,onClose:O,player:_,senderName:a,senderEmail:r,selectedDivision:g,onProposeMatch:X,phase:y}),M&&B&&e.createElement(cf,{open:M,onClose:O,player:B.opponent,day:B.day,slot:B.slot,senderName:a,senderEmail:r,selectedDivision:B.division,phase:B.phase,onProposalComplete:()=>{O()}}))}const CB="_outerChatBg_whq3p_29",NB="_chatContainer_whq3p_85",_B="_topNavBar_whq3p_125",kB="_chatGreeting_whq3p_169",IB="_buttonRow_whq3p_193",MB="_topChatButton_whq3p_207",AB="_logoutWithTimer_whq3p_297",DB="_timerBox_whq3p_311",RB="_sectionHeader_whq3p_339",TB="_collapsed_whq3p_421",PB="_sectionContent_whq3p_455",LB="_expanded_whq3p_485",BB="_channelListRow_whq3p_499",zB="_announcements_whq3p_499",OB="_divisions_whq3p_509",FB="_gameButton_whq3p_561",WB="_mainChatArea_whq3p_597",UB="_mainChatWindow_whq3p_615",$B="_poolBackground_whq3p_675",jB="_chatContent_whq3p_749",HB="_sidebar_whq3p_763",YB="_hamburgerButton_whq3p_817",qB="_hamburgerIcon_whq3p_865",GB="_sidebarBackdrop_whq3p_875",ZB="_closeSidebarButton_whq3p_901",VB="_mobileNavButtons_whq3p_949",QB="_mobileNavButton_whq3p_949",JB="_mobileTimerBox_whq3p_1011",XB="_generalChannelRow_whq3p_1037",KB="_active_whq3p_1129",e7="_pulse_whq3p_1",t7="_channelListName_whq3p_1183",a7="_pinIcon_whq3p_1225",n7="_channelIcon_whq3p_1247",r7="_pinned_whq3p_1273",o7="_noPinnedChannels_whq3p_1283",l7="_noChannelsFound_whq3p_1285",s7="_sidebarSearch_whq3p_1307",i7="_channelListWrapper_whq3p_1387",c7="_customMessageUi_whq3p_1431",d7="_onlineDot_whq3p_1469",u7="_online_whq3p_1469",m7="_messageContent_whq3p_1525",p7="_messageUsername_whq3p_1543",f7="_messageText_whq3p_1563",g7="_loadingContainer_whq3p_1583",h7="_spinner_whq3p_1597",y7="_spin_whq3p_1597",b7="_open_whq3p_1739",v7="_messagesArea_whq3p_1981",E7="_messageInputContainer_whq3p_1989",x7="_messageInput_whq3p_1989",w7="_sendButton_whq3p_2011",S7="_messageItem_whq3p_2151",C7="_messageItemLeft_whq3p_2797",N7="_messageItemRight_whq3p_2807",_7="_messageListBackground_whq3p_2821",k7="_poolTableImg_whq3p_2851",I7="_poolTableSvg_whq3p_2853",M7="_channelNamePreview_whq3p_2881",A7="_messageHeader_whq3p_3825",D7="_messageAuthor_whq3p_3839",R7="_messageTime_whq3p_3853",T7="_chatHeader_whq3p_4091",P7="_chatMessages_whq3p_4101",L7="_message_whq3p_1525",B7="_sent_whq3p_4207",z7="_received_whq3p_4219",O7="_messageSender_whq3p_4273",F7="_sending_whq3p_4797",W7="_error_whq3p_4813",U7="_typingIndicator_whq3p_4825",$7="_messageGroup_whq3p_4847",j7="_scrollToBottom_whq3p_4925",Lt={outerChatBg:CB,chatContainer:NB,topNavBar:_B,chatGreeting:kB,buttonRow:IB,topChatButton:MB,logoutWithTimer:AB,timerBox:DB,sectionHeader:RB,collapsed:TB,sectionContent:PB,expanded:LB,channelListRow:BB,announcements:zB,divisions:OB,"game-rooms":"_game-rooms_whq3p_519",gameButton:FB,mainChatArea:WB,mainChatWindow:UB,poolBackground:$B,chatContent:jB,sidebar:HB,hamburgerButton:YB,hamburgerIcon:qB,sidebarBackdrop:GB,closeSidebarButton:ZB,mobileNavButtons:VB,mobileNavButton:QB,mobileTimerBox:JB,generalChannelRow:XB,active:KB,pulse:e7,channelListName:t7,pinIcon:a7,channelIcon:n7,pinned:r7,noPinnedChannels:o7,noChannelsFound:l7,sidebarSearch:s7,channelListWrapper:i7,customMessageUi:c7,onlineDot:d7,online:u7,messageContent:m7,messageUsername:p7,messageText:f7,loadingContainer:g7,spinner:h7,spin:y7,"str-chat__send-button":"_str-chat__send-button_whq3p_1629",open:b7,messagesArea:v7,messageInputContainer:E7,messageInput:x7,sendButton:w7,messageItem:S7,messageItemLeft:C7,messageItemRight:N7,messageListBackground:_7,poolTableImg:k7,poolTableSvg:I7,"str-chat__main-panel":"_str-chat__main-panel_whq3p_2869",channelNamePreview:M7,"str-chat":"_str-chat_whq3p_1629","str-chat__container":"_str-chat__container_whq3p_2933","str-chat__messenger":"_str-chat__messenger_whq3p_2943","str-chat__messenger--main":"_str-chat__messenger--main_whq3p_2953","str-chat__messenger--main-panel":"_str-chat__messenger--main-panel_whq3p_2963","str-chat__messenger--main-panel-inner":"_str-chat__messenger--main-panel-inner_whq3p_2973","str-chat__messenger--main-panel-inner-content":"_str-chat__messenger--main-panel-inner-content_whq3p_2983","str-chat__messenger--main-panel-inner-content-inner":"_str-chat__messenger--main-panel-inner-content-inner_whq3p_2993","str-chat__messenger--main-panel-inner-content-inner-inner":"_str-chat__messenger--main-panel-inner-content-inner-inner_whq3p_3003","str-chat__message-list":"_str-chat__message-list_whq3p_3015","str-chat__input-flat--wrapper":"_str-chat__input-flat--wrapper_whq3p_3025","str-chat__input-flat":"_str-chat__input-flat_whq3p_3025","str-chat__channel-header":"_str-chat__channel-header_whq3p_3047","str-chat__thread":"_str-chat__thread_whq3p_3059","str-chat__window":"_str-chat__window_whq3p_3071","str-chat__channel":"_str-chat__channel_whq3p_3047","str-chat__message":"_str-chat__message_whq3p_3015","str-chat__message-text":"_str-chat__message-text_whq3p_3145","str-chat__message-author":"_str-chat__message-author_whq3p_3159","str-chat__message-timestamp":"_str-chat__message-timestamp_whq3p_3175","str-chat__channel-header-title":"_str-chat__channel-header-title_whq3p_3323","str-chat__channel-header-info":"_str-chat__channel-header-info_whq3p_3345","str-chat__thread-header":"_str-chat__thread-header_whq3p_3365","str-chat__thread-start":"_str-chat__thread-start_whq3p_3377","str-chat__typing-indicator":"_str-chat__typing-indicator_whq3p_3397","str-chat__avatar":"_str-chat__avatar_whq3p_3415","str-chat__avatar-fallback":"_str-chat__avatar-fallback_whq3p_3425","str-chat__channel-list":"_str-chat__channel-list_whq3p_3459","str-chat__channel-list-messenger":"_str-chat__channel-list-messenger_whq3p_3469","str-chat__channel-preview-messenger":"_str-chat__channel-preview-messenger_whq3p_3477","str-chat__channel-preview-messenger--active":"_str-chat__channel-preview-messenger--active_whq3p_3505","str-chat__channel-preview-messenger--title":"_str-chat__channel-preview-messenger--title_whq3p_3517","str-chat__channel-preview-messenger--subtitle":"_str-chat__channel-preview-messenger--subtitle_whq3p_3529",messageHeader:A7,messageAuthor:D7,messageTime:R7,chatHeader:T7,chatMessages:P7,message:L7,sent:B7,received:z7,messageSender:O7,sending:F7,error:W7,typingIndicator:U7,messageGroup:$7,scrollToBottom:j7},H7={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Lp="nbvut8j4y6se";console.log("🔑 Stream Chat API Key:",Lp);console.log("🔑 Environment variables:",H7);console.log("✅ VITE_STREAM_API_KEY is set:",Lp);const Y7=de,j2="general",q7="announcements";let _m=!1;const G7=["FRBCAPL TEST","Singles Test"],H2={GENERAL:"general",DIVISIONS:"divisions",ANNOUNCEMENTS:"announcements",GAME_ROOMS:"game-rooms"};function Y2(a){return a.toLowerCase().replace(/[^a-z0-9_-]/g,"")}const Z7=({channel:a})=>{var r;return e.createElement("div",{className:Lt.channelNamePreview},((r=a.data)==null?void 0:r.name)||a.id)};function V7(){return JSON.parse(localStorage.getItem("pinnedChannels")||"[]")}function Q7(a){localStorage.setItem("pinnedChannels",JSON.stringify(a))}const J7=({pinned:a,onClick:r})=>e.createElement("span",{onClick:r,className:`${Lt.pinIcon}${a?" "+Lt.pinned:""}`,title:a?"Unpin channel":"Pin channel"},a?"📌":"📍"),Zh=({children:a,icon:r,sectionKey:t,isCollapsed:n,onToggle:o})=>e.createElement("div",{className:`${Lt.sectionHeader} ${n?Lt.collapsed:""}`,onClick:()=>o(t)},r&&e.createElement("span",{style:{marginRight:"8px"}},r),a);function Lw({userName:a,userEmail:r,userPin:t,channelId:n,onClose:o}){var at;const i=er(),[c,u]=h.useState(!1),[m,g]=h.useState(null),[f,y]=h.useState(null),[v,S]=h.useState(null),[w,x]=h.useState({}),[k,E]=h.useState([]),[I,M]=h.useState(null),[N,_]=h.useState(V7()),[P,B]=h.useState(!1),[R,W]=h.useState(!1),[L,F]=h.useState(1800),[j,J]=h.useState(""),[Y,D]=h.useState([]),[A,U]=h.useState(""),[K,X]=h.useState(!0),[O,Q]=h.useState({announcements:!1,divisions:!1,gameRooms:!1});h.useEffect(()=>{if(L<=0){ne();return}const be=setInterval(()=>{F(Je=>Je-1)},1e3);return()=>clearInterval(be)},[L]),h.useEffect(()=>{if(_m)return;_m=!0;let be=Dy.getInstance(Lp);console.log("🔑 Using API key for Stream Chat client:",Lp);let Je=!1,nt=!0;async function Xe(){var ct,Ot,Zt,ft;try{if(be.userID)try{await be.disconnectUser()}catch{}await new Promise(Re=>setTimeout(Re,300));const Ft=Y2(r),ra=await fetch(`${Y7}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:Ft})}),{token:Wt,userId:he}=await ra.json();if(await be.connectUser({id:he,name:a,email:r},Wt),Je=!0,!nt)return;g(be);const bt=be.channel("messaging",j2,{name:"General Chat",description:"General discussion for all players"});let $=0,ye=!1;for(;$<3&&!ye;)try{await bt.watch({limit:100}),ye=!0,console.log("Successfully loaded general channel with",((ct=bt.state.messages)==null?void 0:ct.length)||0,"messages")}catch(Re){$++,console.log(`Retry ${$} for general channel:`,Re.message),$>=3?(console.error("Failed to load general channel after 3 retries, but continuing..."),ye=!0):await new Promise(Fe=>setTimeout(Fe,1e3))}const V=be.channel("messaging",q7,{name:"📢 Announcements",description:"Important announcements and updates"});try{await V.watch({limit:100}),console.log("Successfully loaded announcements channel with",((Ot=V.state.messages)==null?void 0:Ot.length)||0,"messages")}catch(Re){console.error("Error loading announcements channel:",Re)}const ce={};for(const Re of G7){const Fe=Y2(Re),We=be.channel("messaging",`division-${Fe}`,{name:`🏆 ${Re}`,description:`Discussion for ${Re} players`,category:H2.DIVISIONS});try{await We.watch({limit:100}),ce[Re]=We,console.log(`Successfully loaded division channel ${Re} with`,((Zt=We.state.messages)==null?void 0:Zt.length)||0,"messages")}catch(tt){console.error(`Error loading division channel ${Re}:`,tt),ce[Re]=We}}const ze=[];for(let Re=1;Re<=5;Re++){const Fe=`game-room-${Re}`,We=be.channel("messaging",Fe,{name:`🎮 Game Room ${Re}`,description:`Multiplayer game room ${Re} - for future online play`,category:H2.GAME_ROOMS});try{await We.watch({limit:100}),ze.push(We),console.log(`Successfully loaded game room ${Re} with`,((ft=We.state.messages)==null?void 0:ft.length)||0,"messages")}catch(tt){console.error(`Error loading game room ${Re}:`,tt),ze.push(We)}}nt&&(console.log("Setting channels:",{general:bt,announcements:V,divisions:Object.keys(ce),gameRooms:ze.length}),y(bt),S(V),x(ce),E(ze),setTimeout(()=>{nt&&(console.log("Setting general channel as active"),M(bt),X(!1))},100))}catch(Ft){console.error("Error initializing chat:",Ft),nt&&X(!1)}finally{_m=!1}}return Xe(),()=>{if(nt=!1,be&&Je)try{be.disconnectUser()}catch{}_m=!1}},[r,a]),h.useEffect(()=>{Q7(N)},[N]),h.useEffect(()=>{var be;if(I){console.log("Channel changed to:",I.id,((be=I.state.messages)==null?void 0:be.length)||0,"messages");const Je=I.state.messages||[];D(Je);const nt=ct=>{console.log("New message received in channel:",I.id);const Ot=I.state.messages||[];D([...Ot])},Xe=()=>{console.log("Channel state updated:",I.id);const ct=I.state.messages||[];D([...ct])};return I.on("message.new",nt),I.on("message.updated",Xe),I.on("message.deleted",Xe),()=>{I.off("message.new",nt),I.off("message.updated",Xe),I.off("message.deleted",Xe)}}else f&&!I?(console.log("Fallback: setting general channel"),M(f)):D([])},[I,f]);function ne(){m&&m.disconnectUser(),localStorage.clear(),o?o():(i("/"),window.location.reload())}function T(){W(!0)}const re=async()=>{if(A.trim()&&I)try{const be=await I.sendMessage({text:A});U("")}catch(be){console.error("Error sending message:",be)}},G=be=>{be.key==="Enter"&&!be.shiftKey&&(be.preventDefault(),re())};if(K)return e.createElement("div",{className:Lt.loadingContainer},e.createElement("div",{className:Lt.spinner}),e.createElement("div",null,"Loading chat...Please wait"));(at=m==null?void 0:m.user)==null||at.id;const se=Math.floor(L/60),pe=L%60,Se=(be,Je=null)=>!be||!be.cid?null:e.createElement("div",{key:be.cid,className:`${Lt.channelListRow} ${Je?Lt[Je]:""} ${(I==null?void 0:I.id)===be.id?Lt.active:""}`,onClick:()=>{M(be),u(!1)}},e.createElement("div",{className:Lt.channelListName},e.createElement(Z7,{channel:be})),e.createElement(J7,{pinned:N.includes(be.id),onClick:nt=>{nt.stopPropagation();let Xe;N.includes(be.id)?Xe=N.filter(ct=>ct!==be.id):Xe=[...N,be.id],_(Xe)}}));return e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3}},e.createElement("div",{style:{background:"linear-gradient(120deg, #232323 80%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"1rem",boxShadow:"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",width:"90vw",maxWidth:"1000px",height:"80vh",maxHeight:"600px",display:"flex",flexDirection:"column",position:"relative"}},e.createElement("button",{className:Lt.hamburgerButton,onClick:()=>u(!0),"aria-label":"Open channel list"},e.createElement("span",{className:Lt.hamburgerIcon},"☰")),c&&e.createElement("div",{className:Lt.sidebarBackdrop,onClick:()=>u(!1)}),e.createElement("div",{style:{padding:"1rem",borderBottom:"2px solid #e53e3e",display:"flex",justifyContent:"center",alignItems:"center",position:"relative"}},e.createElement("h2",{style:{margin:0,color:"#fff",fontSize:"1.5rem",fontWeight:"bold"}},"League Chat - ",a),e.createElement("button",{onClick:o||(()=>i("/")),style:{position:"absolute",right:"1rem",background:"none",border:"none",color:"#fff",fontSize:"2rem",cursor:"pointer",padding:"0.5rem"}},"×")),e.createElement("div",{style:{flex:1,display:"flex",minHeight:0}},e.createElement("div",{style:{width:"250px",backgroundColor:"linear-gradient(180deg, #1a1a1a 0%, #2a2a2a 100%)",borderRight:"2px solid #e53e3e",overflowY:"auto",padding:"1rem",boxShadow:"inset -2px 0 8px rgba(0,0,0,0.3)"}},e.createElement("button",{className:Lt.closeSidebarButton,onClick:()=>u(!1),"aria-label":"Close channel list"},"×"),e.createElement("div",{className:Lt.mobileNavButtons},e.createElement("button",{className:Lt.mobileNavButton,onClick:()=>{o?o():(i("/"),window.location.reload()),u(!1)}},"🏠 Dashboard"),e.createElement("button",{className:Lt.mobileNavButton,onClick:()=>{T(),u(!1)}},"📅 Schedule a Match"),e.createElement("button",{className:Lt.mobileNavButton,onClick:()=>{ne(),u(!1)}},"🚪 Logout"),e.createElement("div",{className:Lt.mobileTimerBox},"Auto Logout: ",se,":",pe.toString().padStart(2,"0"))),e.createElement("div",{className:`${Lt.generalChannelRow}${(I==null?void 0:I.id)===j2||I===f?" "+Lt.active:""}`,onClick:()=>{M(f),u(!1)}},e.createElement("span",{style:{marginRight:8}},"#")," General Chat"),e.createElement("div",{className:Lt.sidebarSearch},e.createElement("input",{type:"text",placeholder:"Search channels...",value:j,onChange:be=>J(be.target.value)})),e.createElement("div",{className:Lt.channelListWrapper},e.createElement(Zh,{icon:"📢",sectionKey:"announcements",isCollapsed:O.announcements,onToggle:be=>Q(Je=>({...Je,[be]:!Je[be]}))},"Announcements"),e.createElement("div",{className:`${Lt.sectionContent} ${O.announcements?Lt.collapsed:Lt.expanded}`},v?Se(v,"announcements"):e.createElement("div",{style:{padding:"8px",color:"#888",fontStyle:"italic"}},"No announcements channel available")),e.createElement(Zh,{icon:"🏆",sectionKey:"divisions",isCollapsed:O.divisions,onToggle:be=>Q(Je=>({...Je,[be]:!Je[be]}))},"Division Channels"),e.createElement("div",{className:`${Lt.sectionContent} ${O.divisions?Lt.collapsed:Lt.expanded}`},Object.values(w).length>0?Object.values(w).map(be=>Se(be,"divisions")):e.createElement("div",{style:{padding:"8px",color:"#888",fontStyle:"italic"}},"No division channels available")),e.createElement(Zh,{icon:"🎮",sectionKey:"gameRooms",isCollapsed:O.gameRooms,onToggle:be=>Q(Je=>({...Je,[be]:!Je[be]}))},"Game Rooms"),e.createElement("div",{className:`${Lt.sectionContent} ${O.gameRooms?Lt.collapsed:Lt.expanded}`},k.length>0?k.map(be=>Se(be,"game-rooms")):e.createElement("div",{style:{padding:"8px",color:"#888",fontStyle:"italic"}},"No game room channels available")),e.createElement("div",{className:`${Lt.channelListRow} ${Lt.gameButton}`,onClick:()=>{i("/tenball"),u(!1)}},e.createElement("span",{style:{marginRight:8}},"🎯"),"Play Pool Game"))),e.createElement("div",{className:Lt.mainChatWindow,style:{flex:1,display:"flex",flexDirection:"column",position:"relative"}},e.createElement("div",{className:Lt.poolBackground},e.createElement(Dd,null)),e.createElement(yB,{channel:I,currentUser:m==null?void 0:m.user}),e.createElement("div",{className:Lt.messagesArea,style:{flex:1,overflowY:"auto",paddingBottom:"80px"}},Y.map(be=>{var ct,Ot,Zt,ft;const Je=(ct=be.user)==null?void 0:ct.id,nt=(Ot=m==null?void 0:m.user)==null?void 0:Ot.id;let Xe=Je===nt;if(!Xe&&Je&&nt){const Ft=Je.split("_")[0];Xe=nt.startsWith(Ft)}return e.createElement("div",{key:be.id,className:`${Lt.messageItem} ${Xe?Lt.messageItemRight:Lt.messageItemLeft}`},e.createElement("div",{className:Lt.messageHeader},e.createElement("span",{className:Lt.messageAuthor},((Zt=be.user)==null?void 0:Zt.name)||((ft=be.user)==null?void 0:ft.id)),e.createElement("span",{className:Lt.messageTime},new Date(be.created_at).toLocaleTimeString())),e.createElement("div",{className:Lt.messageText},be.text))})),e.createElement("div",{className:Lt.messageInputContainer,style:{position:"absolute",bottom:0,left:0,right:0,zIndex:10}},e.createElement("input",{type:"text",value:A,onChange:be=>U(be.target.value),onKeyPress:G,placeholder:"Type your message...",className:Lt.messageInput}),e.createElement("button",{onClick:re,className:Lt.sendButton,disabled:!A.trim()},"🚀 Send"))))),R&&e.createElement(SB,{userName:a,userEmail:r,userPin:t,onClose:()=>W(!1),fromChat:!0}))}const X7=({isMobile:a})=>e.createElement("div",{style:{background:"rgba(0, 0, 0, 0.75)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:a?"12px":"16px",padding:a?"8px":"16px",margin:a?"-15px 0 0 0":"13px auto",width:a?"100%":"90%",maxWidth:a?"none":"1200px",boxShadow:"0 4px 16px rgba(0,0,0,0.3)",backdropFilter:"blur(4px)",height:a?"350px":"400px",position:"relative",overflow:"hidden"}},e.createElement("div",{style:{position:"relative",textAlign:"center",marginBottom:a?"0px":"4px",padding:a?"2px":"4px",borderRadius:"8px",background:"rgba(0, 0, 0, 0.6)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",minHeight:a?"2.5rem":"3rem"}},e.createElement("div",{style:{display:"inline-block",width:a?"80px":"100px",height:a?"24px":"32px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"6px",animation:"shimmer 1.5s infinite",margin:"8px"}}),e.createElement("div",{style:{display:"inline-block",width:a?"60px":"80px",height:a?"20px":"28px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"6px",animation:"shimmer 1.5s infinite",margin:"8px"}})),e.createElement("div",{style:{width:a?"200px":"300px",height:a?"16px":"20px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"4px",animation:"shimmer 1.5s infinite",margin:"8px auto"}}),e.createElement("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",marginTop:a?"20px":"30px",gap:a?"10px":"20px"}},e.createElement("div",{style:{width:a?"100px":"140px",height:a?"80px":"120px",background:"linear-gradient(90deg, rgba(0,255,0,0.1) 25%, rgba(0,255,0,0.2) 50%, rgba(0,255,0,0.1) 75%)",borderRadius:"12px",animation:"shimmer 1.5s infinite",border:"2px solid rgba(0,255,0,0.3)"}}),e.createElement("div",{style:{width:a?"80px":"140px",height:a?"60px":"100px",background:"linear-gradient(90deg, rgba(52,152,219,0.1) 25%, rgba(52,152,219,0.2) 50%, rgba(52,152,219,0.1) 75%)",borderRadius:"12px",animation:"shimmer 1.5s infinite",border:"2px solid rgba(52,152,219,0.3)"}})),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"stretch",marginTop:a?"20px":"30px",gap:a?"6px":"12px",padding:a?"6px":"8px",borderRadius:"8px",background:"rgba(0, 0, 0, 0.5)",border:"1px solid rgba(255,255,255,0.15)"}},e.createElement("div",{style:{flex:1,height:a?"70px":"80px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}}),e.createElement("div",{style:{flex:1,height:a?"70px":"80px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}}),e.createElement("div",{style:{flex:1,height:a?"70px":"80px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}})),e.createElement("div",{style:{display:"flex",gap:a?"8px":"12px",marginTop:a?"10px":"15px"}},e.createElement("div",{style:{flex:a?"0 0 140px":"0 0 200px",height:a?"80px":"100px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}}),e.createElement("div",{style:{flex:1,height:a?"80px":"100px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}})),e.createElement("style",null,`
        @keyframes shimmer {
          0% {
            background-position: -200px 0;
          }
          100% {
            background-position: calc(200px + 100%) 0;
          }
        }
      `));function Vh(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-");return`${c}-${u}-${i}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}const Bw=({currentPhase:a,seasonData:r,completedMatches:t,totalRequiredMatches:n,playerName:o,playerLastName:i,selectedDivision:c,onOpenOpponentsModal:u,onOpenCompletedMatchesModal:m,onOpenStandingsModal:g,onOpenAllMatchesModal:f,pendingCount:y,sentCount:v,onOpenProposalListModal:S,onOpenSentProposalListModal:w,upcomingMatches:x,onMatchClick:k,isMobile:E,onOpenMessageCenter:I,currentUser:M,allPlayers:N,onSmartMatchClick:_,showPhase1Rules:P,setShowPhase1Rules:B,showPhase1Overview:R,setShowPhase1Overview:W,setPlayerStats:L,setTimeLeft:F,setDeadlineStatus:j,setPhase1EndDate:J,onOpenCalendar:Y})=>{const D=()=>!o||!i?(console.warn("Phase1Tracker: Missing player name information"),!1):c?!t||!Array.isArray(t)?(console.warn("Phase1Tracker: Invalid completedMatches prop"),!1):typeof n!="number"||n<=0?(console.warn("Phase1Tracker: Invalid totalRequiredMatches prop"),!1):!0:(console.warn("Phase1Tracker: Missing selected division"),!1);h.useEffect(()=>{D()},[o,i,c,t,n]);const[A,U]=h.useState(null),[K,X]=h.useState([]),[O,Q]=h.useState(!1),[ne,T]=h.useState(!0),[re,G]=h.useState(new Date),[se,pe]=h.useState(null),[Se,at]=h.useState(null),[be,Je]=h.useState("normal"),[nt,Xe]=h.useState(null),[ct,Ot]=h.useState(null);h.useEffect(()=>{if(!c||a!=="scheduled"){at(null),F(null);return}const V=async()=>{try{const ze=c.replace(/[^A-Za-z0-9]/g,"_"),Re=Date.now(),Fe=`${de}/static/schedule_${ze}.json?t=${Re}`,We=await fetch(Fe,{method:"GET",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!We.ok){console.warn(`Failed to fetch schedule: ${We.status} - ${We.statusText}`);return}const tt=await We.json();if(!Array.isArray(tt)||tt.length===0){console.warn("No schedule data available");return}const me=tt.filter(He=>He.date).sort((He,st)=>new Date(He.date)-new Date(st.date));if(me.length===0){console.warn("No valid matches found in schedule");return}const Ce=Math.min(47,me.length-1),_e=me[Ce];if(!_e||!_e.date){console.warn("Could not determine Phase 1 end date from schedule");return}const Qe=new Date(_e.date);Qe.setHours(23,59,59,999),Xe(Qe),J(Qe);const qe=new Date;if(ul(qe,Qe)){const He={days:0,hours:0,passed:!0};at(He),F(He),Je("passed"),j("passed")}else{const He=Lx(Qe,qe),st=z4(Qe,qe)%24,Mt={days:He,hours:st,passed:!1};at(Mt),F(Mt),He<=0&&st<=24?(Je("critical"),j("critical")):He<=2?(Je("urgent"),j("urgent")):He<=7?(Je("warning"),j("warning")):(Je("normal"),j("normal"))}}catch(ze){console.error("Error calculating Phase 1 deadline from schedule:",ze)}};V();const ce=setInterval(V,6e4);return()=>clearInterval(ce)},[c,a]),h.useEffect(()=>{a==="scheduled"&&c&&t&&(Ft(),ra())},[a,c,t,n,K]),h.useEffect(()=>{c&&a==="scheduled"&&Zt()},[c,a]);const Zt=async()=>{try{if(Q(!0),!c){console.warn("No division selected for standings");return}const V=c.replace(/[^A-Za-z0-9]/g,"_"),ce=`${de}/static/standings_${V}.json`,ze=await fetch(ce);if(!ze.ok){console.warn(`Failed to fetch standings: ${ze.status} - ${ze.statusText}`);return}const Re=await ze.json();if(!Array.isArray(Re)){console.error("Standings data is not an array:",Re);return}const Fe=Re.filter(We=>{if(!We||typeof We!="object")return console.warn("Invalid standings entry:",We),!1;if(!We.name||!We.rank)return console.warn("Standings entry missing name or rank:",We),!1;const tt=parseInt(We.rank);return isNaN(tt)||tt<=0?(console.warn("Invalid rank in standings entry:",We),!1):!0});X(Fe)}catch(V){console.error("Failed to load standings:",V)}finally{Q(!1)}},ft=(V,ce)=>{if(!V||V.length===0)return null;const ze=ce.toLowerCase().trim(),Re=V.find(Fe=>Fe.name.toLowerCase().trim()===ze);return Re?parseInt(Re.rank):null},Ft=()=>{const V=t.length,ce=n-V,ze={completedCount:V,remainingCount:ce,deadlinePassed:tl.hasPhase1DeadlinePassed(r)};U(ze)},ra=()=>{let V=0,ce=0;const ze=`${o} ${i}`;t&&t.length>0&&t.forEach(me=>{me.winner===ze?V++:ce++});const Re=t&&t.length>0?Math.round(V/(V+ce)*100):0,Fe=ft(K,ze);let We="N/A";Fe!==null?We=`${Fe}${Wt(Fe)}`:t&&t.length>=1&&(Re>=80?We="1st-3rd":Re>=60?We="4th-6th":Re>=40?We="7th-9th":We="10th+");const tt={wins:V,losses:ce,winRate:Re,position:We,actualPosition:Fe};Ot(tt),L(tt)},Wt=V=>{const ce=V%10,ze=V%100;return ce===1&&ze!==11?"st":ce===2&&ze!==12?"nd":ce===3&&ze!==13?"rd":"th"};if(O||!Se||!A||a!=="scheduled")return e.createElement(X7,{isMobile:E});const he=()=>be==="passed"?"#e74c3c":be==="critical"?"#ff6b6b":be==="urgent"?"#ff8800":be==="warning"?"#ffaa00":"#4CAF50",bt=()=>{if(be==="passed")return"⚠️ DEADLINE PASSED!";if(be==="critical"){const V=nt?lr(nt,E?"MMM d":"MMM d, yyyy"):"";return`🚨 CRITICAL: ENDS in ${Se.hours} hours! (${V})`}else if(be==="urgent"){const V=nt?lr(nt,E?"MMM d":"MMM d, yyyy"):"";return`⚠️ URGENT: ENDS in ${Se.days} days! (${V})`}else if(be==="warning"){const V=nt?lr(nt,E?"MMM d":"MMM d, yyyy"):"";return`⚠️ WARNING: ENDS in ${Se.days} days. (${V})`}else{const V=nt?lr(nt,E?"MMM d":"MMM d, yyyy"):"";return`ENDS in ${Se.days} days. (${V})`}},$=()=>Math.round(t.length/n*100),ye=he();return e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(0, 0, 0, 0.85), rgba(20, 20, 20, 0.9), rgba(0, 0, 0, 0.85))",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:E?"16px":"20px",padding:E?"6px 10px 10px 10px":"10px 16px 16px 16px",margin:E?"-15px 0 0 0":"13px auto",width:E?"100%":"98%",maxWidth:E?"none":"1600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4), 0 4px 16px rgba(255,255,255,0.1), inset 0 1px 0 rgba(255,255,255,0.1)",display:"flex",flexDirection:"column",justifyContent:"flex-start",backdropFilter:"blur(8px)",overflow:E?"auto":"hidden",maxHeight:E?"none":"35vh",height:E?ne?"350px":"60px":ne?"408px":"160px",transition:"height 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",transform:"none",touchAction:"none"},role:"presentation",tabIndex:"-1"},e.createElement("div",{style:{position:"relative",textAlign:"center",marginBottom:E?"0px":"3px",padding:E?"2px":"3px",borderRadius:"12px",background:"linear-gradient(135deg, rgba(0, 0, 0, 0.7), rgba(20, 20, 20, 0.8))",border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 4px 16px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)"}},e.createElement("h3",{style:{margin:0,color:"#ffffff",fontSize:E?"0.6rem":"0.9rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:E?"3px":"5px",flexWrap:"wrap",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",letterSpacing:"0.5px",minHeight:E?"2rem":"2.5rem"}},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:E?"2px":"6px"}},be==="critical"&&"🚨",be==="urgent"&&"⚠️",be==="warning"&&"⚠️",be==="passed"&&"⏰",be==="normal"&&""),e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:E?"3px":"6px"}},e.createElement("button",{onClick:V=>{V.stopPropagation(),console.log("Smart match button clicked in Phase1Tracker"),console.log("onSmartMatchClick function:",_),_?(console.log("Calling onSmartMatchClick"),_()):console.log("onSmartMatchClick is not defined")},"aria-label":"Open smart match making",role:"button",tabIndex:"0",style:{background:"linear-gradient(135deg, rgba(255, 193, 7, 0.3), rgba(255, 193, 7, 0.2), rgba(255, 193, 7, 0.1))",border:"1px solid rgba(255, 193, 7, 0.4)",color:"#ffffff",fontSize:E?"0.4rem":"0.7rem",fontWeight:"bold",padding:E?"6px 10px":"8px 14px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",boxShadow:"0 2px 8px rgba(255, 193, 7, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)",zIndex:10},onMouseEnter:V=>{V.target.style.background="linear-gradient(135deg, rgba(255, 193, 7, 0.4), rgba(255, 193, 7, 0.3), rgba(255, 193, 7, 0.2))",V.target.style.transform="scale(1.02) translateY(-1px)",V.target.style.boxShadow="0 4px 12px rgba(255, 193, 7, 0.3), inset 0 1px 0 rgba(255,255,255,0.2)"},onMouseLeave:V=>{V.target.style.background="linear-gradient(135deg, rgba(255, 193, 7, 0.3), rgba(255, 193, 7, 0.2), rgba(255, 193, 7, 0.1))",V.target.style.transform="scale(1) translateY(0)",V.target.style.boxShadow="0 2px 8px rgba(255, 193, 7, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)"}},"🧠 SMART MATCH"),e.createElement("span",{onClick:V=>{V.stopPropagation(),W(!0)},style:{fontSize:E?"0.4rem":"0.7rem",background:`linear-gradient(135deg, ${ye}, ${ye}dd, ${ye})`,padding:E?"6px 10px":"8px 14px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2), 0 0 10px rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.3)",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:V=>{V.target.style.transform="scale(1.02) translateY(-1px)",V.target.style.boxShadow="0 6px 16px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.3), 0 0 15px rgba(255,255,255,0.2)"},onMouseLeave:V=>{V.target.style.transform="scale(1) translateY(0)",V.target.style.boxShadow="0 4px 12px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2), 0 0 10px rgba(255,255,255,0.1)"},title:"Click to view Phase 1 overview",role:"button",tabIndex:"0","aria-label":"Open Phase 1 overview"},"PHASE 1"),e.createElement("button",{onClick:V=>{V.stopPropagation(),B(!0)},"aria-label":"Open Phase 1 rules and information",role:"button",tabIndex:"0",style:{background:"linear-gradient(135deg, rgba(255, 68, 68, 0.3), rgba(255, 68, 68, 0.2), rgba(255, 68, 68, 0.1))",border:"1px solid rgba(255, 68, 68, 0.4)",color:"#ffffff",fontSize:E?"0.4rem":"0.7rem",fontWeight:"bold",padding:E?"6px 10px":"8px 14px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",boxShadow:"0 2px 8px rgba(255, 68, 68, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)",zIndex:10},onMouseEnter:V=>{V.target.style.background="linear-gradient(135deg, rgba(255, 68, 68, 0.4), rgba(255, 68, 68, 0.3), rgba(255, 68, 68, 0.2))",V.target.style.transform="scale(1.02) translateY(-1px)",V.target.style.boxShadow="0 4px 12px rgba(255, 68, 68, 0.3), inset 0 1px 0 rgba(255,255,255,0.2)"},onMouseLeave:V=>{V.target.style.background="linear-gradient(135deg, rgba(255, 68, 68, 0.3), rgba(255, 68, 68, 0.2), rgba(255, 68, 68, 0.1))",V.target.style.transform="scale(1) translateY(0)",V.target.style.boxShadow="0 2px 8px rgba(255, 68, 68, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)"}},"⚔️ RULES"))),e.createElement("div",{style:{color:"#ffffff",fontSize:E?"0.6rem":"0.8rem",lineHeight:"1.1",marginTop:"1px",marginBottom:E?"1px":"3px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center"}},bt()),e.createElement("div",{style:{position:E?"relative":"absolute",left:E?"auto":"15%",top:E?"auto":"50%",transform:E?"none":"translate(-50%, -50%)",cursor:"pointer",fontSize:E?"2rem":"2.8rem",transition:"all 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",minHeight:E?"80px":"120px",lineHeight:1,background:"linear-gradient(135deg, rgba(76, 175, 80, 0.35), rgba(76, 175, 80, 0.3), rgba(76, 175, 80, 0.25))",border:"1px solid rgba(76, 175, 80, 0.7)",padding:E?"3px":"5px",borderRadius:E?"10px":"16px",zIndex:1,boxShadow:"0 2px 8px rgba(76, 175, 80, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)",minWidth:E?"60px":"90px",minHeight:E?"80px":"120px",backdropFilter:"blur(8px)",margin:E?"8px auto":"0"},onClick:()=>{T(!0),Y&&Y()},"aria-label":"Open calendar to schedule matches by date",role:"button",tabIndex:"0"},e.createElement("div",{style:{fontSize:E?"0.4rem":"0.6rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:E?"8px":"12px",textAlign:"center"}},"Today's Date"),e.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1}},e.createElement("div",{style:{fontSize:E?"0.7rem":"1rem"}},["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date().getDay()]),e.createElement("div",{style:{fontSize:E?"1rem":"1.8rem"}},(()=>{const V=new Date,ce=String(V.getMonth()+1).padStart(2,"0"),ze=String(V.getDate()).padStart(2,"0"),Re=String(V.getFullYear()).slice(-2);return`${ce}/${ze}/${Re}`})())),e.createElement("div",{style:{fontSize:E?"0.25rem":"0.6rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginTop:"auto",textAlign:"center",whiteSpace:"nowrap",background:"rgba(0, 0, 0, 0.7)",padding:E?"1px 2px":"2px 3px",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.3)"}},E?"Schedule":"Click to Schedule Match by Date")),e.createElement("div",{style:{position:E?"relative":"absolute",right:E?"auto":"15%",top:E?"auto":"50%",transform:E?"none":"translate(50%, -50%)",transition:"all 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",lineHeight:1,background:"linear-gradient(135deg, rgba(52, 152, 219, 0.15), rgba(52, 152, 219, 0.1), rgba(52, 152, 219, 0.05))",border:"1px solid rgba(52, 152, 219, 0.3)",padding:E?"3px":"5px",borderRadius:E?"10px":"16px",zIndex:1,boxShadow:"0 2px 8px rgba(52, 152, 219, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)",minWidth:E?"60px":"90px",minHeight:E?"80px":"120px",backdropFilter:"blur(8px)",margin:E?"8px auto":"0"},title:"Proposal management - view pending and sent proposals",onMouseEnter:V=>{V.currentTarget.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.25), rgba(52, 152, 219, 0.2), rgba(52, 152, 219, 0.15))",V.currentTarget.style.boxShadow="0 4px 12px rgba(52, 152, 219, 0.3), inset 0 1px 0 rgba(255,255,255,0.2)",V.currentTarget.style.border="1px solid rgba(52, 152, 219, 0.5)",V.currentTarget.style.transform="translate(50%, -50%) scale(1.02)"},onMouseLeave:V=>{V.currentTarget.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.15), rgba(52, 152, 219, 0.1), rgba(52, 152, 219, 0.05))",V.currentTarget.style.boxShadow="0 2px 8px rgba(52, 152, 219, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)",V.currentTarget.style.border="1px solid rgba(52, 152, 219, 0.3)",V.currentTarget.style.transform="translate(50%, -50%) scale(1)"}},e.createElement("div",{style:{fontSize:E?"0.5rem":"0.75rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginBottom:E?"3px":"6px",textAlign:"center",whiteSpace:"nowrap"}},"📋 Proposals"),e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:E?"2px":"4px",justifyContent:"center",width:"100%"}},e.createElement("button",{onClick:V=>{V.stopPropagation(),S&&S()},style:{background:"rgba(255, 255, 255, 0.1)",color:"#ffffff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",padding:E?"2px 3px":"5px 7px",fontSize:E?"0.4rem":"0.65rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:V=>{V.target.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.3), rgba(52, 152, 219, 0.25), rgba(52, 152, 219, 0.2))",V.target.style.transform="translateY(-1px) scale(1.01)",V.target.style.boxShadow="0 4px 12px rgba(52, 152, 219, 0.4), inset 0 1px 0 rgba(255,255,255,0.2)"},onMouseLeave:V=>{V.target.style.background="rgba(255, 255, 255, 0.1)",V.target.style.transform="translateY(0) scale(1)",V.target.style.boxShadow="0 2px 6px rgba(0,0,0,0.3)"}},"📥 ",y," waiting for you"),e.createElement("button",{onClick:V=>{V.stopPropagation(),w&&w()},style:{background:"rgba(255, 255, 255, 0.1)",color:"#ffffff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",padding:E?"2px 3px":"5px 7px",fontSize:E?"0.4rem":"0.65rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:V=>{V.target.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.3), rgba(52, 152, 219, 0.25), rgba(52, 152, 219, 0.2))",V.target.style.transform="translateY(-1px) scale(1.01)",V.target.style.boxShadow="0 4px 12px rgba(52, 152, 219, 0.4), inset 0 1px 0 rgba(255,255,255,0.2)"},onMouseLeave:V=>{V.target.style.background="rgba(255, 255, 255, 0.1)",V.target.style.transform="translateY(0) scale(1)",V.target.style.boxShadow="0 2px 6px rgba(0,0,0,0.3)"}},"📤 ",v," waiting for opponents"))),e.createElement("div",{style:{color:"#ffffff",fontSize:E?"0.65rem":"0.8rem",fontWeight:"bold",marginTop:E?"3px":"1px",marginBottom:E?"1px":"3px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",lineHeight:"1.1",textAlign:"center"}},t.length,"/",n," Matches Complete"),e.createElement("div",{style:{color:"#ffffff",fontSize:E?"0.65rem":"0.8rem",fontWeight:"bold",marginTop:"1px",marginBottom:E?"3px":"1px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",lineHeight:"1.1",textAlign:"center"}},n-t.length," to Schedule"),e.createElement("div",{style:{textAlign:"center",marginTop:E?"2px":"4px"}},e.createElement("button",{onClick:V=>{V.stopPropagation(),T(!ne)},style:{fontSize:E?"0.4rem":"0.8rem",color:"#ffffff",fontWeight:"bold",cursor:"pointer",padding:E?"1px 2px":"3px 6px",borderRadius:"6px",display:"inline-block",transition:"background-color 0.2s ease",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",background:"transparent",border:"none"}},ne?"Hide Stats ▲":"Show Stats ▼"))),ne&&e.createElement(e.Fragment,null,e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"stretch",marginBottom:E?"6px":"3px",gap:E?"4px":"8px",padding:E?"4px":"6px",borderRadius:"8px",background:"rgba(0, 0, 0, 0.5)",border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"}},e.createElement("div",{onClick:V=>{V.stopPropagation(),u&&u()},style:{background:"rgba(0, 0, 0, 0.4)",padding:E?"4px":"6px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",flex:1,textAlign:"center",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:E?"60px":"70px"},onMouseEnter:V=>{V.currentTarget.style.background="linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(76, 175, 80, 0.3))",V.currentTarget.style.transform="translateY(-2px) scale(1.02)",V.currentTarget.style.boxShadow="0 4px 16px rgba(76, 175, 80, 0.3), 0 2px 8px rgba(0,0,0,0.2)",V.currentTarget.style.border="1px solid rgba(76, 175, 80, 0.5)"},onMouseLeave:V=>{V.currentTarget.style.background="rgba(255,255,255,0.08)",V.currentTarget.style.transform="translateY(0) scale(1)",V.currentTarget.style.boxShadow="none",V.currentTarget.style.border="1px solid rgba(255,255,255,0.15)"}},e.createElement("div",{style:{fontSize:E?"0.5rem":"0.7rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:E?"3px":"1px"}},"Progress"),e.createElement("div",{style:{fontSize:E?"0.6rem":"0.8rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:E?"2px":"1px"}},t.length,"/",n),e.createElement("div",{style:{width:"100%",height:E?"2px":"5px",background:"rgba(255,255,255,0.15)",borderRadius:"3px",overflow:"hidden",marginBottom:"1px",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.3)"}},e.createElement("div",{style:{width:`${$()}%`,height:"100%",background:"linear-gradient(90deg, #4CAF50, #45a049, #4CAF50)",borderRadius:"3px",transition:"width 0.4s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 0 8px rgba(76, 175, 80, 0.5)",position:"relative"}},e.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent)",animation:"shimmer 2s infinite"}}))),e.createElement("div",{style:{fontSize:E?"0.45rem":"0.65rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click to see opponents")),e.createElement("div",{onClick:V=>{V.stopPropagation(),m&&m()},style:{background:"rgba(0, 0, 0, 0.4)",padding:E?"3px":"6px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",flex:1,textAlign:"center",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"70px"},onMouseEnter:V=>{V.currentTarget.style.background="linear-gradient(135deg, rgba(33, 150, 243, 0.2), rgba(33, 150, 243, 0.3))",V.currentTarget.style.transform="translateY(-2px) scale(1.02)",V.currentTarget.style.boxShadow="0 4px 16px rgba(33, 150, 243, 0.3), 0 2px 8px rgba(0,0,0,0.2)",V.currentTarget.style.border="1px solid rgba(33, 150, 243, 0.5)"},onMouseLeave:V=>{V.currentTarget.style.background="rgba(255,255,255,0.08)",V.currentTarget.style.transform="translateY(0) scale(1)",V.currentTarget.style.boxShadow="none",V.currentTarget.style.border="1px solid rgba(255,255,255,0.15)"}},e.createElement("div",{style:{fontSize:E?"0.3rem":"0.7rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:"1px"}},"Record"),e.createElement("div",{style:{fontSize:E?"0.4rem":"0.8rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:"1px"}},(ct==null?void 0:ct.wins)||0,"-",(ct==null?void 0:ct.losses)||0," (",(ct==null?void 0:ct.winRate)||0,"%)"),e.createElement("div",{style:{fontSize:E?"0.35rem":"0.65rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click to see results")),e.createElement("div",{onClick:V=>{V.stopPropagation(),g&&g()},style:{background:"rgba(0, 0, 0, 0.4)",padding:E?"4px":"8px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",flex:1,textAlign:"center",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"80px"},onMouseEnter:V=>{V.currentTarget.style.background="linear-gradient(135deg, rgba(156, 39, 176, 0.2), rgba(156, 39, 176, 0.3))",V.currentTarget.style.transform="translateY(-2px) scale(1.02)",V.currentTarget.style.boxShadow="0 4px 16px rgba(156, 39, 176, 0.3), 0 2px 8px rgba(0,0,0,0.2)",V.currentTarget.style.border="1px solid rgba(156, 39, 176, 0.5)"},onMouseLeave:V=>{V.currentTarget.style.background="rgba(0, 0, 0, 0.4)",V.currentTarget.style.transform="translateY(0) scale(1)",V.currentTarget.style.boxShadow="none",V.currentTarget.style.border="1px solid rgba(255,255,255,0.15)"}},e.createElement("div",{style:{fontSize:E?"0.35rem":"0.8rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:"1px"}},"Position"),e.createElement("div",{style:{fontSize:E?"0.4rem":"0.9rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:"1px"}},O?"...":(ct==null?void 0:ct.position)||"N/A"),e.createElement("div",{style:{fontSize:E?"0.35rem":"0.65rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click to view standings"))),e.createElement("div",{style:{display:"flex",gap:E?"6px":"10px",marginBottom:"3px"}},e.createElement("div",{style:{flex:E?"0 0 120px":"0 0 180px",background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",padding:"3px",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",display:"flex",flexDirection:"column",gap:"3px"}},e.createElement("div",{style:{fontSize:E?"0.4rem":"0.8rem",color:"#ffffff",fontWeight:"bold",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:"1px"}},"📨 ",E?"Messages":"Message Center"),e.createElement("button",{onClick:V=>{V.stopPropagation(),I&&I("direct")},style:{background:"linear-gradient(135deg, #ff4444 0%, #cc3333 50%, #aa2222 100%)",color:"#ffffff",border:"none",borderRadius:"6px",padding:"3px 5px",fontSize:E?"0.5rem":"0.6rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(255, 68, 68, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:V=>{V.target.style.background="linear-gradient(135deg, #cc3333 0%, #aa2222 50%, #881111 100%)",V.target.style.transform="translateY(-2px) scale(1.02)",V.target.style.boxShadow="0 4px 12px rgba(255, 68, 68, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.6), inset 0 -1px 0 rgba(0, 0, 0, 0.3)"},onMouseLeave:V=>{V.target.style.background="linear-gradient(135deg, #ff4444 0%, #cc3333 50%, #aa2222 100%)",V.target.style.transform="translateY(0) scale(1)",V.target.style.boxShadow="0 2px 6px rgba(255, 68, 68, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)"}},"💬 ",E?"DM":"Direct Messages"),e.createElement("button",{onClick:V=>{V.stopPropagation(),I&&I("league")},style:{background:"linear-gradient(135deg, #00bcd4 0%, #0097a7 50%, #00695c 100%)",color:"#ffffff",border:"none",borderRadius:"6px",padding:"3px 5px",fontSize:E?"0.5rem":"0.6rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(0, 188, 212, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:V=>{V.target.style.background="linear-gradient(135deg, #0097a7 0%, #00695c 50%, #004d40 100%)",V.target.style.transform="translateY(-2px) scale(1.02)",V.target.style.boxShadow="0 4px 12px rgba(0, 188, 212, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.6), inset 0 -1px 0 rgba(0, 0, 0, 0.3)"},onMouseLeave:V=>{V.target.style.background="linear-gradient(135deg, #00bcd4 0%, #0097a7 50%, #00695c 100%)",V.target.style.transform="translateY(0) scale(1)",V.target.style.boxShadow="0 2px 6px rgba(0, 188, 212, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)"}},"🚀 ",E?"Chat":"League Chat")),e.createElement("div",{onClick:V=>{V.stopPropagation(),f&&f()},style:{flex:"1",background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",padding:"3px",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:V=>{V.currentTarget.style.background="linear-gradient(135deg, rgba(255, 68, 68, 0.15), rgba(255, 68, 68, 0.1), rgba(255, 68, 68, 0.05))",V.currentTarget.style.border="1px solid rgba(255, 68, 68, 0.4)",V.currentTarget.style.transform="translateY(-1px) scale(1.01)",V.currentTarget.style.boxShadow="0 4px 12px rgba(255, 68, 68, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)"},onMouseLeave:V=>{V.currentTarget.style.background="rgba(0, 0, 0, 0.4)",V.currentTarget.style.border="1px solid rgba(255,255,255,0.15)",V.currentTarget.style.transform="translateY(0) scale(1)",V.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)"}},e.createElement("div",{style:{fontSize:E?"0.5rem":"0.9rem",color:"#ff4444",fontWeight:"bold",marginBottom:"0px",textAlign:"center",cursor:"pointer",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",letterSpacing:"0.5px"}},"🎯 Upcoming Matches"),e.createElement("div",{style:{fontSize:E?"0.35rem":"0.65rem",color:"#e0e0e0",textAlign:"center",fontStyle:"italic",fontWeight:"500",marginTop:"0px",marginBottom:"0px",padding:"0px"}},"click for match details"),(()=>{const V=x;return V&&V.length>0?e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"1px",marginTop:"1px"}},V.slice(0,3).map((ce,ze)=>e.createElement("div",{key:ze,onClick:Re=>{Re.stopPropagation(),k&&ce&&k(ce)},style:{fontSize:E?"0.4rem":"0.7rem",color:"#ccc",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"pointer",padding:E?"1px 2px":"2px 3px",borderRadius:"2px",transition:"all 0.2s ease"},onMouseEnter:Re=>{Re.target.style.color="#ffffff",Re.target.style.background="rgba(255,255,255,0.1)"},onMouseLeave:Re=>{Re.target.style.color="#ccc",Re.target.style.background="transparent"}},(()=>{let Re="",Fe="";if(ce.type==="proposal"||ce.status==="confirmed")ce.senderName&&ce.receiverName&&(Re=ce.senderName.trim().toLowerCase()===`${o} ${i}`.trim().toLowerCase()?ce.receiverName:ce.senderName),ce.date&&(Fe=Vh(ce.date));else if(ce.player1Id&&ce.player2Id&&(Re=ce.player1Id.trim().toLowerCase()===`${o} ${i}`.trim().toLowerCase()?ce.player2Id:ce.player1Id),ce.scheduledDate){const We=new Date(ce.scheduledDate);isNaN(We.getTime())||(Fe=Vh(We.toISOString().split("T")[0]))}else ce.date&&(Fe=Vh(ce.date));return Re?Fe?`vs ${Re} (${Fe})`:`vs ${Re}`:"No matches"})())),V.length>3&&e.createElement("div",{style:{fontSize:E?"0.2rem":"0.5rem",color:"#888",textAlign:"center",fontStyle:"italic",padding:E?"0px":"1px"}},"+",V.length-3," more")):e.createElement("div",{style:{fontSize:E?"0.35rem":"0.6rem",color:"#999",textAlign:"center"}},"No matches")})()))))},q2={async validateChallenge(a,r,t,n=!1,o=null){return pn.post("/api/challenges/validate",{senderName:a,receiverName:r,division:t,isRematch:n,originalChallengeId:o})},async validateDefenseAcceptance(a,r,t){return pn.post("/api/challenges/validate-defense",{defenderName:a,challengerName:r,division:t})},async getChallengeStats(a,r){return pn.get(`/api/challenges/stats/${encodeURIComponent(a)}/${encodeURIComponent(r)}`)},async getChallengeLimits(a,r){return pn.get(`/api/challenges/limits/${encodeURIComponent(a)}/${encodeURIComponent(r)}`)},async getEligibleOpponents(a,r){return pn.get(`/api/challenges/eligible-opponents/${encodeURIComponent(a)}/${encodeURIComponent(r)}`)},async getDivisionChallengeStats(a){return pn.get(`/api/challenges/division-stats/${encodeURIComponent(a)}`)},async updateChallengeStats(a,r,t){return pn.put(`/api/challenges/stats/${encodeURIComponent(a)}/${encodeURIComponent(r)}`,t)},async resetDivisionChallengeStats(a){return pn.delete(`/api/challenges/division-stats/${encodeURIComponent(a)}`)}};function zw({isOpen:a,onClose:r,isMobile:t}){return a?e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"10px"}},e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"2px solid #ff4444",borderRadius:"12px",width:t?"98%":"50%",maxWidth:"500px",height:t?"98%":"90vh",maxHeight:"800px",display:"flex",flexDirection:"column",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",color:"#ffffff"}},e.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderBottom:"2px solid #ff4444",flexShrink:0}},e.createElement("h2",{style:{margin:0,fontSize:t?"1.2rem":"1.5rem",color:"#ffffff",fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px",textAlign:"center"}},"⚔️ Phase 2 Challenge Rules"),e.createElement("button",{onClick:r,style:{position:"absolute",right:"20px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ffffff",fontSize:"2rem",cursor:"pointer",padding:"5px",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s ease"},onMouseEnter:n=>n.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:n=>n.target.style.backgroundColor="transparent"},"×")),e.createElement("div",{style:{flex:1,overflowY:"auto",padding:"25px",fontSize:t?"1rem":"1.1rem",lineHeight:"1.6"}},e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#ff4444",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"🎯 Overview"),e.createElement("p",{style:{margin:"0 0 15px 0",color:"#e0e0e0"}},"Phase 2 is the challenge phase where players compete against each other based on standings from Phase 1."),e.createElement("p",null,"You must complete 2-4 total matches during this phase, as either a challenger or defender.")),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#ff4444",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"📊 Match Requirements"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Total Matches:")," 2-4 matches (minimum 2, maximum 4)"),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("p",null,e.createElement("strong",null,"Defenses:")," If challenged, at least 2 defensive matches are required(you may accept more voluntarily). "),e.createElement("li",null,e.createElement("p",null,"If not challenged no defensive matches are required."))),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Weekly Limit:")," Only 1 match per week (as challenger or defender)"))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#ff4444",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"⚔️ Dynamic Challenge Limits"),e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",padding:"15px",marginBottom:"15px"}},e.createElement("p",{style:{margin:"0 0 10px 0",color:"#ffc107",fontWeight:"bold"}},"Your challenge limit depends on how many times you've been challenged:"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},e.createElement("li",{style:{marginBottom:"5px"}},e.createElement("strong",null,"0 times challenged:")," You can issue 4 challenges"),e.createElement("li",{style:{marginBottom:"5px"}},e.createElement("strong",null,"1 time challenged:")," You can issue 3 challenges"),e.createElement("li",{style:{marginBottom:"5px"}},e.createElement("strong",null,"2 times challenged:")," You can issue 2 challenges")))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#ff4444",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"🎯 Challenge Rules"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Standings Limit:")," You can challenge players ranked up to 4 spots higher than you."),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"One Challenge:")," You may challenge the same opponent only once."),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Rematch Rule:")," If you lose a challenge as a defender, you may issue a rematch (if both remain eligible). Opponent is not required to accept the rematch if they have played the required 2 defensive matches."),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Defense Priority:")," If you receive multiple challenges in the same week, the lowest-ranked challenger has priority."))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#ff4444",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"🛡️ Defense Rules"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Required Defenses:")," You must accept challenges until you've played at least 2 matches as a defender."),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Defense Limit:")," No player may be required to defend more than 2 times."),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Voluntary Defenses:")," You may accept additional defenses beyond the required 2."),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Declining Challenges:")," After 2 defenses, declining further challenges is not a forfeit"))),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"8px",padding:"15px",marginTop:"20px"}},e.createElement("h4",{style:{color:"#ff4444",fontSize:t?"1rem":"1.1rem",margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"8px"}},"⚠️ Important Notes"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0",fontSize:t?"0.85rem":"0.9rem"}},e.createElement("li",{style:{marginBottom:"5px"}},"All challenges and responses must be recorded in the League Scheduling Hub"),e.createElement("li",{style:{marginBottom:"5px"}},"Any attempt to exploit rules or collude will be treated as a sportsmanship violation"),e.createElement("li",{style:{marginBottom:"5px"}},"Once you complete 4 matches, you may not accept or issue further challenges")))),e.createElement("div",{style:{textAlign:"center",padding:"20px",borderTop:"1px solid rgba(255,255,255,0.2)",flexShrink:0}},e.createElement("button",{onClick:r,style:{background:"linear-gradient(135deg, #ff4444, #cc3333)",border:"none",color:"#ffffff",fontSize:t?"0.9rem":"1rem",fontWeight:"bold",padding:t?"10px 20px":"12px 25px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"},onMouseEnter:n=>{n.target.style.transform="translateY(-2px)",n.target.style.boxShadow="0 6px 12px rgba(0,0,0,0.4)"},onMouseLeave:n=>{n.target.style.transform="translateY(0)",n.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"}},"Got It! ✓")))):null}function K7({isOpen:a,onClose:r,phase1Stats:t,playerName:n,playerLastName:o,isMobile:i}){if(!a||!t)return null;const c=`${n} ${o}`;return e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"flex-start",justifyContent:"center",zIndex:1e3,padding:i?"10px":"20px",overflowY:"auto"},onClick:r},e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"3px solid #ff4444",borderRadius:i?"12px":"16px",padding:i?"20px":"30px",maxWidth:i?"90vw":"500px",width:"100%",maxHeight:i?"80vh":"70vh",overflowY:"auto",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",backdropFilter:"blur(5px)",position:"relative",marginTop:i?"20px":"40px",marginBottom:i?"20px":"40px"},onClick:u=>u.stopPropagation()},e.createElement("button",{onClick:r,style:{position:"absolute",top:i?"10px":"15px",right:i?"10px":"15px",background:"linear-gradient(135deg, #ff4444, #cc3333)",border:"3px solid #ffffff",color:"#ffffff",fontSize:i?"1.2rem":"1.5rem",fontWeight:"bold",width:i?"35px":"40px",height:i?"35px":"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease",zIndex:1e3,boxShadow:"0 4px 8px rgba(0,0,0,0.5)",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},onMouseEnter:u=>{u.target.style.background="linear-gradient(135deg, #ff6666, #dd4444)",u.target.style.transform="scale(1.1)",u.target.style.boxShadow="0 6px 12px rgba(0,0,0,0.7)"},onMouseLeave:u=>{u.target.style.background="linear-gradient(135deg, #ff4444, #cc3333)",u.target.style.transform="scale(1)",u.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.5)"}},"✕"),e.createElement("div",{style:{textAlign:"center",marginBottom:i?"20px":"25px"}},e.createElement("h2",{style:{color:"#ffffff",fontSize:i?"1.2rem":"1.5rem",fontWeight:"bold",margin:"0 0 5px 0",textShadow:"2px 2px 4px rgba(0,0,0,0.8)"}},"📊 Phase 1 Results"),e.createElement("div",{style:{color:"#e0e0e0",fontSize:i?"0.9rem":"1rem",fontStyle:"italic"}},c)),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:i?"12px":"16px",marginBottom:i?"20px":"25px"}},e.createElement("div",{style:{padding:i?"15px":"20px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",border:"2px solid rgba(255,255,255,0.2)",textAlign:"center"}},e.createElement("div",{style:{fontSize:i?"0.8rem":"1rem",color:"#e0e0e0",marginBottom:"8px",fontWeight:"bold"}},"Record"),e.createElement("div",{style:{fontSize:i?"1.5rem":"2rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",marginBottom:"5px"}},t.wins,"-",t.losses),e.createElement("div",{style:{fontSize:i?"0.9rem":"1.1rem",color:"#e0e0e0",fontStyle:"italic"}},t.winRate,"% Win Rate")),e.createElement("div",{style:{padding:i?"15px":"20px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",border:"2px solid rgba(255,255,255,0.2)",textAlign:"center"}},e.createElement("div",{style:{fontSize:i?"0.8rem":"1rem",color:"#e0e0e0",marginBottom:"8px",fontWeight:"bold"}},"Final Position"),e.createElement("div",{style:{fontSize:i?"1.5rem":"2rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",marginBottom:"5px"}},t.position),e.createElement("div",{style:{fontSize:i?"0.9rem":"1.1rem",color:"#e0e0e0",fontStyle:"italic"}},"in Division")),e.createElement("div",{style:{padding:i?"15px":"20px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",border:"2px solid rgba(255,255,255,0.2)",textAlign:"center"}},e.createElement("div",{style:{fontSize:i?"0.8rem":"1rem",color:"#e0e0e0",marginBottom:"8px",fontWeight:"bold"}},"Matches Played"),e.createElement("div",{style:{fontSize:i?"1.5rem":"2rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",marginBottom:"5px"}},t.totalMatches),e.createElement("div",{style:{fontSize:i?"0.9rem":"1.1rem",color:"#e0e0e0",fontStyle:"italic"}},"Total Games"))),e.createElement("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:i?"15px":"20px",border:"1px solid rgba(255,255,255,0.1)",marginBottom:i?"15px":"20px"}},e.createElement("h3",{style:{color:"#ffffff",fontSize:i?"1rem":"1.2rem",margin:"0 0 10px 0",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"Performance Summary"),e.createElement("div",{style:{color:"#e0e0e0",fontSize:i?"0.85rem":"1rem",lineHeight:"1.5",textAlign:"center"}},t.totalMatches===0?e.createElement("div",null,"No matches completed in Phase 1"):e.createElement("div",null,e.createElement("div",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Win Rate:")," ",t.winRate,"% (",t.wins," wins, ",t.losses," losses)"),e.createElement("div",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Final Standing:")," ",t.position," place"),e.createElement("div",null,e.createElement("strong",null,"Total Matches:")," ",t.totalMatches," games played")))),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",borderRadius:"8px",padding:i?"15px":"20px",border:"2px solid rgba(255, 68, 68, 0.3)",textAlign:"center"}},e.createElement("div",{style:{color:"#ff4444",fontSize:i?"0.9rem":"1rem",fontWeight:"bold",marginBottom:"5px"}},"🏆 Phase 2 Qualified"),e.createElement("div",{style:{color:"#e0e0e0",fontSize:i?"0.8rem":"0.9rem"}},"Ready for challenge matches and defenses"))))}function ez({playerName:a,playerLastName:r,selectedDivision:t,phase:n,isMobile:o,onOpenOpponentsModal:i,onOpenCompletedMatchesModal:c,onOpenStandingsModal:u,onOpenDefenseChallengersModal:m,onOpenAllMatchesModal:g,onOpenProposalListModal:f,onOpenSentProposalListModal:y,onOpenPlayerSearch:v,pendingCount:S=0,sentCount:w=0,upcomingMatches:x=[],onMatchClick:k,seasonData:E,completedMatches:I=[],standings:M=[]}){var ra,Wt;const[N,_]=h.useState(null),[P,B]=h.useState(null),[R,W]=h.useState(!0),[L,F]=h.useState(null),[j,J]=h.useState(!0),[Y,D]=h.useState(!1),[A,U]=h.useState(!1),[K,X]=h.useState(null),O=`${a} ${r}`,Q=()=>{let he=0,bt=0;I&&I.length>0&&I.forEach(Fe=>{Fe.winner===O?he++:bt++});const $=I&&I.length>0?Math.round(he/(he+bt)*100):0,ye=(Fe,We)=>{if(!Fe||Fe.length===0)return null;const tt=We.toLowerCase().trim(),me=Fe.find(Ce=>Ce.name.toLowerCase().trim()===tt);return me?parseInt(me.rank):null},V=Fe=>{const We=Fe%10,tt=Fe%100;return We===1&&tt!==11?"st":We===2&&tt!==12?"nd":We===3&&tt!==13?"rd":"th"},ce=ye(M,O);let ze="N/A";ce!==null?ze=`${ce}${V(ce)}`:I&&I.length>=1&&($>=80?ze="1st-3rd":$>=60?ze="4th-6th":$>=40?ze="7th-9th":ze="10th+");const Re={wins:he,losses:bt,winRate:$,position:ze,totalMatches:I?I.length:0};console.log("Phase2Tracker - Calculated Phase 1 stats:",Re),X(Re)};h.useEffect(()=>{console.log("Phase2Tracker - Calculating Phase 1 stats:"),console.log("  completedMatches:",I),console.log("  standings:",M),console.log("  fullPlayerName:",O),Q()},[I,M,O]);const T=(()=>{if(console.log("Phase2Tracker - Received seasonData:",E),console.log("Phase2Tracker - seasonData.phase1End:",E==null?void 0:E.phase1End),!E||!E.phase1End)return console.log("Phase2Tracker - No seasonData or phase1End found"),{days:null,status:"no_deadline"};const he=new Date,bt=new Date(E.phase1End);if(console.log("Phase2Tracker - Date comparison:"),console.log("  now:",he.toISOString()),console.log("  phase1End:",bt.toISOString()),console.log("  nowTime:",he.getTime()),console.log("  phase1EndTime:",bt.getTime()),console.log("  isPhase1Active:",he<=bt),console.log("  currentDate:",he.toLocaleDateString()),console.log("  phase1EndDate:",bt.toLocaleDateString()),he<=bt)return console.log("Phase2Tracker - Phase 1 is still active, returning phase1_active status"),{days:null,status:"phase1_active"};const $=new Date(bt);$.setDate($.getDate()+28);const ye=$-he,V=Math.ceil(ye/(1e3*60*60*24));return console.log("Phase2Tracker - Phase 2 calculation:"),console.log("  phase2End:",$.toISOString()),console.log("  diffTime:",ye),console.log("  diffDays:",V),console.log("  status:",V<0?"passed":V<=1?"critical":V<=3?"urgent":V<=7?"warning":"normal"),V<0?{days:Math.abs(V),status:"passed"}:V<=1?{days:V,status:"critical"}:V<=3?{days:V,status:"urgent"}:V<=7?{days:V,status:"warning"}:{days:V,status:"normal"}})();if(console.log("Phase2Tracker - Final deadlineStatus:",T),console.log("Phase2Tracker - Final deadlineStatus.status:",T==null?void 0:T.status),console.log("Phase2Tracker - Final deadlineStatus.days:",T==null?void 0:T.days),h.useEffect(()=>{if(!a||!r||!t||n!=="challenge"){W(!1);return}async function he(){try{W(!0),F(null);const[bt,$]=await Promise.all([q2.getChallengeStats(O,t),q2.getChallengeLimits(O,t)]);_(bt),B($)}catch(bt){console.error("Error loading challenge data:",bt),F("Failed to load challenge statistics")}finally{W(!1)}}he()},[a,r,t,n,O]),n!=="challenge")return null;if(R)return e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.7), rgba(26, 26, 26, 0.8))",border:"2px solid #ff4444",borderRadius:o?"8px":"12px",padding:o?"1px":"18px",margin:o?"-15px 0 0 0":"16px 0",boxShadow:"0 6px 20px rgba(0,0,0,0.3), 0 2px 8px rgba(0,0,0,0.2)",backdropFilter:"blur(2px)",textAlign:"center",color:"#888"}},"Loading Phase 2 challenge statistics...");if(L)return e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.7), rgba(26, 26, 26, 0.8))",border:"2px solid #e53e3e",borderRadius:o?"8px":"12px",padding:o?"1px":"18px",margin:o?"-15px 0 0 0":"16px 0",boxShadow:"0 6px 20px rgba(0,0,0,0.3), 0 2px 8px rgba(0,0,0,0.2)",backdropFilter:"blur(2px)",textAlign:"center",color:"#e53e3e"}},L);if(!N||!P)return null;const re=N.matchesAsChallenger+N.requiredDefenses,G=2,se=4,pe=re>=G,Se=re>=se,be=(()=>{var bt;const he=((bt=P.dynamicLimits)==null?void 0:bt.timesChallenged)||0;return he===0?4:he===1?3:he===2?2:0})(),Je=((ra=P.dynamicLimits)==null?void 0:ra.challengesIssued)||0,nt=be-Je,Xe=N.requiredDefenses||0,ct=()=>Se?"completed":pe?"active":re>=1?"progressing":"ready",Ot=(he,bt)=>{const $=he/bt*100;return $>=90?"#e53e3e":$>=75?"#ffc107":"#28a745"},Zt=()=>{if(T.status==="phase1_active")return"#ffaa00";switch(ct()){case"completed":return"#00aa00";case"active":return"#ff4444";case"progressing":return"#ff4444";case"ready":return"#ff4444";default:return"#ff4444"}},ft=()=>{const he=ct();if(T.status==="phase1_active")return`⏳ Phase 1 still active until ${E&&E.phase1End?lr(new Date(E.phase1End),o?"MMM d":"MMM d, yyyy"):""}`;if(T.status==="passed")return"⚠️ DEADLINE PASSED!";if(T.status==="critical"){const bt=new Date(E.phase1End),$=new Date(bt);$.setDate($.getDate()+28);const ye=lr($,o?"MMM d":"MMM d, yyyy");return`🚨 CRITICAL: ENDS in ${T.days} hours! (${ye})`}else if(T.status==="urgent"){const bt=new Date(E.phase1End),$=new Date(bt);$.setDate($.getDate()+28);const ye=lr($,o?"MMM d":"MMM d, yyyy");return`⚠️ URGENT: ENDS in ${T.days} days! (${ye})`}else if(T.status==="warning"){const bt=new Date(E.phase1End),$=new Date(bt);$.setDate($.getDate()+28);const ye=lr($,o?"MMM d":"MMM d, yyyy");return`⚠️ WARNING: ENDS in ${T.days} days. (${ye})`}else if(T.status==="normal"){const bt=new Date(E.phase1End),$=new Date(bt);$.setDate($.getDate()+28);const ye=lr($,o?"MMM d":"MMM d, yyyy");return`ENDS in ${T.days} days. (${ye})`}switch(he){case"completed":return"🎉 Phase 2 Complete! (4/4 matches)";case"active":return`🏆 Active in Phase 2! ${re}/4 matches (min met)`;case"progressing":return`📈 Phase 2 in progress! ${re}/4 matches (need ${G-re} more)`;case"ready":return"⚔️ Ready for Phase 2! Need 2-4 challenge matches.";default:return"Phase 2 Challenge Status"}},Ft=Zt();return e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(0, 0, 0, 0.85), rgba(20, 20, 20, 0.9), rgba(0, 0, 0, 0.85))",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:o?"16px":"20px",padding:o?"6px":"12px",margin:o?"-15px 0 0 0":"13px auto",width:o?"100%":"98%",maxWidth:o?"none":"1600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4), 0 4px 16px rgba(255,255,255,0.1), inset 0 1px 0 rgba(255,255,255,0.1)",cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"flex-start",backdropFilter:"blur(8px)",overflow:"auto",maxHeight:"none",height:o?j?"auto":"60px":j?"380px":"160px",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"},onClick:()=>J(!j),onKeyDown:he=>{(he.key==="Enter"||he.key===" ")&&(he.preventDefault(),J(!j))},role:"button",tabIndex:"0","aria-label":j?"Collapse Phase 2 tracker":"Expand Phase 2 tracker"},e.createElement("div",{style:{position:"relative",textAlign:"center",marginBottom:o?"0px":"4px",padding:o?"6px":"8px",borderRadius:"12px",background:"linear-gradient(135deg, rgba(0, 0, 0, 0.7), rgba(20, 20, 20, 0.8))",border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 4px 16px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)"}},e.createElement("h3",{style:{margin:0,color:"#ffffff",fontSize:o?"0.8rem":"1.1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:o?"4px":"6px",flexWrap:"wrap",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",letterSpacing:"0.5px",minHeight:o?"2.5rem":"3rem"}},e.createElement("button",{onClick:he=>{he.stopPropagation(),U(!0)},"aria-label":"View Phase 1 results",role:"button",tabIndex:"0",style:{background:"linear-gradient(135deg, #22c55e, #16a34a, #15803d)",border:"2px solid rgba(255,255,255,0.8)",color:"#ffffff",fontSize:o?"0.5rem":"0.8rem",fontWeight:"bold",padding:o?"6px 10px":"8px 14px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",boxShadow:"0 4px 12px rgba(34, 197, 94, 0.4), inset 0 1px 0 rgba(255,255,255,0.3), 0 0 10px rgba(34, 197, 94, 0.2)",zIndex:10},onMouseEnter:he=>{he.target.style.background="linear-gradient(135deg, #4ade80, #22c55e, #16a34a)",he.target.style.transform="scale(1.05) translateY(-2px)",he.target.style.boxShadow="0 6px 16px rgba(34, 197, 94, 0.6), inset 0 1px 0 rgba(255,255,255,0.4), 0 0 15px rgba(34, 197, 94, 0.3)"},onMouseLeave:he=>{he.target.style.background="linear-gradient(135deg, #22c55e, #16a34a, #15803d)",he.target.style.transform="scale(1) translateY(0)",he.target.style.boxShadow="0 4px 12px rgba(34, 197, 94, 0.4), inset 0 1px 0 rgba(255,255,255,0.3), 0 0 10px rgba(34, 197, 94, 0.2)"}},"📊 PHASE 1 RESULTS"),e.createElement("span",{style:{fontSize:o?"0.9rem":"1.1rem",background:`linear-gradient(135deg, ${Ft}, ${Ft}dd, ${Ft})`,padding:o?"4px 8px":"6px 12px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2), 0 0 10px rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.3)",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontWeight:"bold"}},"Phase 2"),e.createElement("button",{onClick:he=>{he.stopPropagation(),D(!0)},"aria-label":"Open Phase 2 rules and information",role:"button",tabIndex:"0",style:{background:"linear-gradient(135deg, #ff4444, #cc3333, #aa2222)",border:"2px solid rgba(255,255,255,0.8)",color:"#ffffff",fontSize:o?"0.5rem":"0.8rem",fontWeight:"bold",padding:o?"6px 10px":"8px 14px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",boxShadow:"0 4px 12px rgba(255, 68, 68, 0.4), inset 0 1px 0 rgba(255,255,255,0.3), 0 0 10px rgba(255, 68, 68, 0.2)",zIndex:10},onMouseEnter:he=>{he.target.style.background="linear-gradient(135deg, #ff6666, #dd4444, #cc3333)",he.target.style.transform="scale(1.05) translateY(-2px)",he.target.style.boxShadow="0 6px 16px rgba(255, 68, 68, 0.6), inset 0 1px 0 rgba(255,255,255,0.4), 0 0 15px rgba(255, 68, 68, 0.3)"},onMouseLeave:he=>{he.target.style.background="linear-gradient(135deg, #ff4444, #cc3333, #aa2222)",he.target.style.transform="scale(1) translateY(0)",he.target.style.boxShadow="0 4px 12px rgba(255, 68, 68, 0.4), inset 0 1px 0 rgba(255,255,255,0.3), 0 0 10px rgba(255, 68, 68, 0.2)"}},"⚔️ RULES")),e.createElement("div",{style:{color:"#ffffff",fontSize:o?"0.7rem":"0.95rem",lineHeight:"1.1",marginTop:"2px",marginBottom:o?"2px":"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center"}},ft()),e.createElement("div",{style:{position:o?"relative":"absolute",left:o?"auto":"8%",top:o?"auto":"50%",transform:o?"none":"translate(-50%, -50%)",cursor:"pointer",fontSize:o?"2.5rem":"3.2rem",transition:"all 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:o?"90px":"120px",lineHeight:1,background:"linear-gradient(135deg, rgba(255, 68, 68, 0.25), rgba(220, 53, 69, 0.2), rgba(200, 35, 51, 0.15))",border:"2px solid rgba(255, 68, 68, 0.6)",padding:o?"4px":"6px",borderRadius:o?"12px":"18px",zIndex:1,boxShadow:"0 6px 20px rgba(255, 68, 68, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 0 20px rgba(255, 68, 68, 0.2)",minWidth:o?"60px":"80px",minHeight:o?"75px":"90px",backdropFilter:"blur(8px)",margin:o?"8px auto":"0"},onClick:he=>{he.stopPropagation(),J(!0),v&&v()},"aria-label":"Open player search to schedule Phase 2 matches",role:"button",tabIndex:"0",onMouseEnter:he=>{he.currentTarget.style.transform="translate(-50%, -50%) scale(1.1)",he.currentTarget.style.background="rgba(255, 68, 68, 0.25)",he.currentTarget.style.boxShadow="0 4px 16px rgba(255, 68, 68, 0.5)",he.currentTarget.style.border="2px solid rgba(255, 68, 68, 0.6)"},onMouseLeave:he=>{he.currentTarget.style.transform="translate(-50%, -50%) scale(1)",he.currentTarget.style.background="rgba(255, 68, 68, 0.15)",he.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)",he.currentTarget.style.border="1px solid rgba(255, 68, 68, 0.4)"}},e.createElement("div",{style:{fontSize:o?"0.35rem":"0.5rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:o?"6px":"8px",textAlign:"center"}},"Today's Date"),e.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1}},e.createElement("div",{style:{fontSize:o?"0.6rem":"0.85rem"}},["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date().getDay()]),e.createElement("div",{style:{fontSize:o?"0.85rem":"1.4rem"}},(()=>{const he=new Date,bt=String(he.getMonth()+1).padStart(2,"0"),$=String(he.getDate()).padStart(2,"0"),ye=String(he.getFullYear()).slice(-2);return`${bt}/${$}/${ye}`})())),e.createElement("div",{style:{fontSize:o?"0.2rem":"0.45rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginTop:"auto",textAlign:"center",whiteSpace:"nowrap",background:"rgba(0, 0, 0, 0.7)",padding:o?"1px 2px":"2px 3px",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.3)"}},o?"Schedule":"Click to Schedule Match by Date")),e.createElement("div",{style:{position:o?"relative":"absolute",right:o?"auto":"8%",top:o?"auto":"50%",transform:o?"none":"translate(50%, -50%)",transition:"all 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",lineHeight:1,background:"linear-gradient(135deg, rgba(52, 152, 219, 0.25), rgba(41, 128, 185, 0.2), rgba(30, 100, 150, 0.15))",border:"2px solid rgba(52, 152, 219, 0.6)",padding:o?"3px":"5px",borderRadius:o?"10px":"16px",zIndex:1,boxShadow:"0 6px 20px rgba(52, 152, 219, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 0 20px rgba(52, 152, 219, 0.2)",minWidth:o?"60px":"80px",minHeight:o?"75px":"90px",backdropFilter:"blur(8px)",margin:o?"8px auto":"0"},title:"Proposal management - view pending and sent proposals",onMouseEnter:he=>{he.currentTarget.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.3), rgba(41, 128, 185, 0.25))",he.currentTarget.style.boxShadow="0 6px 20px rgba(52, 152, 219, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.2)",he.currentTarget.style.border="2px solid rgba(52, 152, 219, 0.7)",he.currentTarget.style.transform="translate(50%, -50%) scale(1.02)"},onMouseLeave:he=>{he.currentTarget.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.2), rgba(41, 128, 185, 0.15))",he.currentTarget.style.boxShadow="0 4px 16px rgba(52, 152, 219, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1)",he.currentTarget.style.border="2px solid rgba(52, 152, 219, 0.5)",he.currentTarget.style.transform="translate(50%, -50%) scale(1)"}},e.createElement("div",{style:{fontSize:o?"0.45rem":"0.65rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginBottom:o?"2px":"4px",textAlign:"center",whiteSpace:"nowrap"}},"📋 Proposals"),e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:o?"2px":"4px",justifyContent:"center",width:"100%"}},e.createElement("button",{onClick:he=>{he.stopPropagation(),f&&f()},style:{background:"linear-gradient(135deg, #d35400 0%, #e67e22 50%, #f39c12 100%)",color:"#ffffff",border:"none",borderRadius:"6px",padding:o?"1px 2px":"3px 4px",fontSize:o?"0.35rem":"0.55rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(211, 84, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:he=>{he.target.style.background="linear-gradient(135deg, #e67e22 0%, #f39c12 50%, #f1c40f 100%)",he.target.style.transform="translateY(-2px) scale(1.02)",he.target.style.boxShadow="0 4px 12px rgba(211, 84, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.6), inset 0 -1px 0 rgba(0, 0, 0, 0.3)"},onMouseLeave:he=>{he.target.style.background="linear-gradient(135deg, #d35400 0%, #e67e22 50%, #f39c12 100%)",he.target.style.transform="translateY(0) scale(1)",he.target.style.boxShadow="0 2px 6px rgba(211, 84, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)"}},"📥 ",S," waiting for you"),e.createElement("button",{onClick:he=>{he.stopPropagation(),y&&y()},style:{background:"linear-gradient(135deg, #1e8449 0%, #27ae60 50%, #2ecc71 100%)",color:"#ffffff",border:"none",borderRadius:"6px",padding:o?"1px 2px":"3px 4px",fontSize:o?"0.35rem":"0.55rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(30, 132, 73, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:he=>{he.target.style.background="linear-gradient(135deg, #27ae60 0%, #2ecc71 50%, #58d68d 100%)",he.target.style.transform="translateY(-2px) scale(1.02)",he.target.style.boxShadow="0 4px 12px rgba(30, 132, 73, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.6), inset 0 -1px 0 rgba(0, 0, 0, 0.3)"},onMouseLeave:he=>{he.target.style.background="linear-gradient(135deg, #1e8449 0%, #27ae60 50%, #2ecc71 100%)",he.target.style.transform="translateY(0) scale(1)",he.target.style.boxShadow="0 2px 6px rgba(30, 132, 73, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)"}},"📤 ",w," waiting for opponents"))),e.createElement("div",{style:{color:"#ffffff",fontSize:o?"0.7rem":"0.9rem",fontWeight:"bold",marginTop:o?"4px":"2px",marginBottom:o?"2px":"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",lineHeight:"1.1",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",gap:o?"8px":"12px",flexWrap:"wrap"}},e.createElement("span",null,"⚔️ ",re,"/4 Matches"),e.createElement("span",null,"•"),e.createElement("span",{style:{color:nt>0?"#4ade80":"#ef4444"}},nt," Challenges Left"),e.createElement("span",null,"•"),e.createElement("span",{style:{color:pe?"#4ade80":"#fbbf24"}},pe?"Min ✅":`${G-re} to min`))),e.createElement("div",{style:{textAlign:"center",marginBottom:o?"0px":"4px"}},e.createElement("div",{style:{fontSize:o?"0.5rem":"0.9rem",color:"#ffffff",fontWeight:"bold",cursor:"pointer",padding:o?"1px 3px":"4px 8px",borderRadius:"6px",display:"inline-block",transition:"background-color 0.2s ease",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},onMouseEnter:he=>he.target.style.backgroundColor=`${Ft}20`,onMouseLeave:he=>he.target.style.backgroundColor="transparent"},j?"Hide Stats ▲":"Show Stats ▼")),j&&e.createElement(e.Fragment,null,e.createElement("div",{style:{marginBottom:o?"0.3rem":"0.5rem"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:o?"0.4rem":"0.6rem",marginBottom:o?"0.3rem":"0.5rem"}},e.createElement("div",{onClick:he=>{he.stopPropagation(),v&&v()},style:{padding:o?"0.4rem":"0.6rem",background:"linear-gradient(135deg, rgba(255, 68, 68, 0.15), rgba(59, 130, 246, 0.1))",borderRadius:"8px",border:"1px solid rgba(255, 68, 68, 0.3)",textAlign:"center",cursor:"pointer",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},onMouseEnter:he=>{he.target.style.background="linear-gradient(135deg, rgba(255, 68, 68, 0.25), rgba(59, 130, 246, 0.2))",he.target.style.transform="translateY(-2px)",he.target.style.boxShadow="0 4px 12px rgba(255, 68, 68, 0.3)"},onMouseLeave:he=>{he.target.style.background="linear-gradient(135deg, rgba(255, 68, 68, 0.15), rgba(59, 130, 246, 0.1))",he.target.style.transform="translateY(0)",he.target.style.boxShadow="none"}},e.createElement("div",{style:{fontSize:o?"0.5rem":"0.85rem",fontWeight:"bold",color:"#ff4444",marginBottom:o?"3px":"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"⚔️ Phase 2 Progress"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:o?"4px":"6px",fontSize:o?"0.4rem":"0.7rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginBottom:o?"3px":"4px"}},e.createElement("div",null,e.createElement("div",{style:{color:"#ff4444",fontSize:o?"0.35rem":"0.6rem"}},"Challenges"),e.createElement("div",null,re,"/4")),e.createElement("div",null,e.createElement("div",{style:{color:"#3b82f6",fontSize:o?"0.35rem":"0.6rem"}},"Defenses"),e.createElement("div",null,Xe,"/2"))),e.createElement("div",{style:{width:"100%",height:o?"3px":"4px",background:"rgba(255,255,255,0.2)",borderRadius:"3px",overflow:"hidden",marginBottom:o?"2px":"3px",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.3)"}},e.createElement("div",{style:{width:`${re/se*100}%`,height:"100%",background:`linear-gradient(90deg, ${Ot(re,se)}, ${Ot(re,se)}dd)`,borderRadius:"3px",transition:"width 0.4s ease",boxShadow:"0 0 4px rgba(255,255,255,0.3)"}})),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.7rem",color:pe?"#4ade80":"#fbbf24",fontWeight:"bold",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},pe?"✅ Min met":`${G-re} to min`)),e.createElement("div",{style:{padding:o?"0.4rem":"0.6rem",background:"linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(255, 193, 7, 0.1))",borderRadius:"8px",border:"1px solid rgba(168, 85, 247, 0.3)",textAlign:"center",position:"relative",overflow:"hidden"}},e.createElement("div",{style:{fontSize:o?"0.5rem":"0.85rem",fontWeight:"bold",color:"#a855f7",marginBottom:o?"3px":"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"🎯 Challenge Limits"),e.createElement("div",{style:{fontSize:o?"0.45rem":"1rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginBottom:o?"3px":"4px"}},nt," remaining"),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.6rem",color:"#fbbf24",marginBottom:o?"2px":"3px"}},((Wt=P.dynamicLimits)==null?void 0:Wt.timesChallenged)||0," times challenged"),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.7rem",color:nt>0?"#4ade80":"#ef4444",fontWeight:"bold",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},Je," issued")))),e.createElement("div",{style:{padding:o?"0.5rem":"0.8rem",background:"linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(22, 163, 74, 0.1))",border:"1px solid rgba(34, 197, 94, 0.4)",borderRadius:"8px",marginBottom:o?"0.4rem":"0.6rem",color:"#ffffff",boxShadow:"0 2px 8px rgba(34, 197, 94, 0.2)"}},e.createElement("div",{style:{fontSize:o?"0.45rem":"0.8rem",fontWeight:"bold",color:"#22c55e",marginBottom:o?"0.3rem":"0.5rem",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"📊 Current Record & Standings"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:o?"0.4rem":"0.6rem",fontSize:o?"0.4rem":"0.7rem",color:"#ffffff",textAlign:"center",lineHeight:o?"1.3":"1.4"}},e.createElement("div",{style:{background:"rgba(255,255,255,0.1)",padding:o?"0.2rem":"0.3rem",borderRadius:"4px",border:"1px solid rgba(255,255,255,0.2)"}},e.createElement("div",{style:{fontWeight:"bold",color:"#22c55e",marginBottom:"2px"}},"Wins"),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.6rem",fontWeight:"bold"}},(K==null?void 0:K.wins)||0)),e.createElement("div",{style:{background:"rgba(255,255,255,0.1)",padding:o?"0.2rem":"0.3rem",borderRadius:"4px",border:"1px solid rgba(255,255,255,0.2)"}},e.createElement("div",{style:{fontWeight:"bold",color:"#ef4444",marginBottom:"2px"}},"Losses"),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.6rem",fontWeight:"bold"}},(K==null?void 0:K.losses)||0)),e.createElement("div",{style:{background:"rgba(255,255,255,0.1)",padding:o?"0.2rem":"0.3rem",borderRadius:"4px",border:"1px solid rgba(255,255,255,0.2)"}},e.createElement("div",{style:{fontWeight:"bold",color:"#3b82f6",marginBottom:"2px"}},"Win Rate"),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.6rem",fontWeight:"bold"}},(K==null?void 0:K.winRate)||0,"%"))),e.createElement("div",{style:{marginTop:o?"0.3rem":"0.5rem",padding:o?"0.2rem":"0.3rem",background:"rgba(168, 85, 247, 0.2)",borderRadius:"4px",border:"1px solid rgba(168, 85, 247, 0.4)",textAlign:"center"}},e.createElement("div",{style:{fontWeight:"bold",color:"#a855f7",marginBottom:"2px",fontSize:o?"0.35rem":"0.6rem"}},"Current Standings Position"),e.createElement("div",{style:{fontSize:o?"0.4rem":"0.7rem",fontWeight:"bold"}},(K==null?void 0:K.position)||"N/A"))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:o?"0.4rem":"0.6rem",marginBottom:o?"0.3rem":"0.5rem"}},e.createElement("div",{style:{padding:o?"0.4rem":"0.6rem",background:"rgba(255,255,255,0.1)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)",textAlign:"center",cursor:"pointer",transition:"background-color 0.2s ease"},onClick:he=>{he.stopPropagation(),v&&v()},onMouseEnter:he=>he.target.style.backgroundColor="rgba(255,255,255,0.15)",onMouseLeave:he=>he.target.style.backgroundColor="rgba(255,255,255,0.1)"},e.createElement("div",{style:{fontSize:o?"0.4rem":"0.7rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:o?"1px":"2px"}},"📅 Schedule Match"),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.8rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:o?"1px":"2px"}},N.eligibleOpponentsCount," available"),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.65rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click to schedule")),e.createElement("div",{style:{padding:o?"0.4rem":"0.6rem",background:"rgba(255,255,255,0.1)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)",textAlign:"center",cursor:"pointer",transition:"background-color 0.2s ease"},onClick:he=>{he.stopPropagation(),g&&g()},onMouseEnter:he=>he.target.style.backgroundColor="rgba(255,255,255,0.15)",onMouseLeave:he=>he.target.style.backgroundColor="rgba(255,255,255,0.1)"},e.createElement("div",{style:{fontSize:o?"0.4rem":"0.7rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:o?"1px":"2px"}},"🏆 View Matches"),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.8rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:o?"1px":"2px"}},x.length," upcoming"),e.createElement("div",{style:{fontSize:o?"0.35rem":"0.65rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click for details"))),x.length>0&&e.createElement("div",{style:{marginBottom:o?"0.3rem":"0.5rem"}},e.createElement("div",{style:{fontSize:o?"0.4rem":"0.7rem",fontWeight:"bold",color:"#ffffff",marginBottom:o?"0.2rem":"0.4rem",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"Upcoming Matches"),e.createElement("div",{style:{maxHeight:o?"50px":"60px",overflowY:"auto",background:"rgba(0,0,0,0.3)",borderRadius:"4px",padding:o?"0.2rem":"0.4rem"}},x.slice(0,2).map((he,bt)=>{let $="";return he.senderName&&he.receiverName&&($=he.senderName.trim().toLowerCase()===O.toLowerCase()?he.receiverName:he.senderName),e.createElement("div",{key:he._id||bt,style:{fontSize:o?"0.3rem":"0.6rem",color:"#ffffff",padding:o?"0.15rem 0.25rem":"0.25rem 0.4rem",marginBottom:o?"0.1rem":"0.15rem",background:"rgba(255,255,255,0.1)",borderRadius:"3px",cursor:"pointer",transition:"background-color 0.2s ease",textAlign:"center"},onClick:ye=>{ye.stopPropagation(),k&&k(he)},onMouseEnter:ye=>ye.target.style.backgroundColor="rgba(255,255,255,0.2)",onMouseLeave:ye=>ye.target.style.backgroundColor="rgba(255,255,255,0.1)"},"VS ",$||"Unknown"," - ",he.date||"No Date")}),x.length>2&&e.createElement("div",{style:{fontSize:o?"0.3rem":"0.6rem",color:"#e0e0e0",textAlign:"center",fontStyle:"italic",padding:o?"0.15rem":"0.25rem"}},"+",x.length-2," more..."))),e.createElement("div",{style:{padding:o?"0.4rem":"0.6rem",background:"linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(0,0,0,0.2))",borderRadius:"6px",border:"1px solid rgba(255, 193, 7, 0.3)",fontSize:o?"0.35rem":"0.65rem",color:"#ffffff",textAlign:"center",marginBottom:o?"0.3rem":"0.5rem"}},e.createElement("div",{style:{fontWeight:"bold",color:"#ffc107",marginBottom:"3px"}},"💡 Phase 2 Status"),e.createElement("div",{style:{fontSize:o?"0.3rem":"0.55rem",lineHeight:"1.3"}},pe?e.createElement("span",{style:{color:"#4ade80"}},"✅ Minimum met (",re,"/4 matches)"):e.createElement("span",{style:{color:"#fbbf24"}},"📈 Need ",G-re," more to minimum"),nt>0&&e.createElement("span",{style:{color:"#3b82f6"}}," • Can challenge ",nt," more (max 4 spots higher)")))),e.createElement(zw,{isOpen:Y,onClose:()=>D(!1),isMobile:o}),e.createElement(K7,{isOpen:A,onClose:()=>U(!1),phase1Stats:K,playerName:a,playerLastName:r,isMobile:o}))}const tz=({phase1EndDate:a,isMobile:r,currentMonth:t,onMonthChange:n,onOpenOpponentsModal:o,upcomingMatches:i,playerName:c,playerLastName:u,onDateSelect:m,onMatchClick:g})=>{const f=new Date,y=t.getMonth(),v=t.getFullYear(),S=new Date(v,y,1),x=new Date(v,y+1,0).getDate(),k=S.getDay(),E=[];for(let Y=0;Y<k;Y++)E.push(null);for(let Y=1;Y<=x;Y++)E.push(Y);const I=E.length,M=7-I%7;for(let Y=0;Y<M;Y++)E.push(null);const N=M>=3;console.log(`Calendar debug: totalCells=${I}, emptyCellsInLastRow=${M}, needsMoreMargin=${N}`);const _=Y=>!a||!Y?!1:Y===a.getDate()&&y===a.getMonth()&&v===a.getFullYear(),P=Y=>Y===f.getDate()&&y===f.getMonth()&&v===f.getFullYear(),B=Y=>Y&&Y<f.getDate()&&y===f.getMonth()&&v===f.getFullYear(),R=["January","February","March","April","May","June","July","August","September","October","November","December"],W=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],L=()=>{const Y=new Date(v,y-1,1);n(Y)},F=()=>{const Y=new Date(v,y+1,1);n(Y)},j=Y=>{if(!Y||!i)return[];const A=new Date(v,y,Y).toISOString().split("T")[0];return i.filter(U=>{let K=null;if(U.scheduledDate){const X=new Date(U.scheduledDate);isNaN(X.getTime())||(K=X.toISOString().split("T")[0])}else if(U.date){const X=U.date.split("-");if(X.length===3){const[O,Q,ne]=X;K=`${ne}-${O.padStart(2,"0")}-${Q.padStart(2,"0")}`}}return K===A})},J=Y=>j(Y).length>0;return e.createElement("div",{style:{color:"#ffffff"}},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:r?"2px":"4px"}},e.createElement("button",{onClick:L,style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"#ffffff",fontSize:r?"0.9rem":"1rem",cursor:"pointer",padding:r?"4px 6px":"6px 8px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:Y=>Y.target.style.background="rgba(255, 255, 255, 0.2)",onMouseLeave:Y=>Y.target.style.background="rgba(255, 255, 255, 0.1)"},"←"),e.createElement("div",{style:{textAlign:"center",fontSize:r?"1rem":"1.2rem",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",width:"100%"}},R[y]," ",v),e.createElement("button",{onClick:F,style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"#ffffff",fontSize:r?"0.9rem":"1rem",cursor:"pointer",padding:r?"4px 6px":"6px 8px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:Y=>Y.target.style.background="rgba(255, 255, 255, 0.2)",onMouseLeave:Y=>Y.target.style.background="rgba(255, 255, 255, 0.1)"},"→")),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0px",marginBottom:r?"2px":"3px"}},W.map(Y=>e.createElement("div",{key:Y,style:{textAlign:"center",fontSize:r?"0.8rem":"0.9rem",fontWeight:"bold",color:"#cccccc",padding:r?"2px 1px":"3px 1px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},Y))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0px",width:r?"450px":"800px",height:r?"280px":"400px",margin:"0 auto"}},E.map((Y,D)=>e.createElement("div",{key:D,onClick:()=>{if(Y&&!J(Y)&&m){const A=new Date(v,y,Y);m(A)}},title:J(Y)?j(Y).map(A=>{let U="";return A.player1Id&&A.player2Id?U=A.player1Id.trim().toLowerCase()===`${c} ${u}`.trim().toLowerCase()?A.player2Id:A.player1Id:A.senderName&&A.receiverName&&(U=A.senderName.trim().toLowerCase()===`${c} ${u}`.trim().toLowerCase()?A.receiverName:A.senderName),`Click to view match details vs ${U}`}).join(", "):"Click to schedule match",style:{aspectRatio:"1.2",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",fontSize:r?"0.9rem":"1rem",fontWeight:"bold",borderRadius:"2px",cursor:Y?"pointer":"default",background:Y?_(Y)?"#e74c3c":B(Y)?"rgba(255,255,255,0.1)":"transparent":"transparent",border:Y?_(Y)?"1px solid #c0392b":P(Y)?"2px solid #4CAF50":"1px solid rgba(255,255,255,0.1)":"none",color:Y?_(Y)||P(Y)?"#ffffff":B(Y)?"#888888":"#ffffff":"transparent",transition:"all 0.2s ease",padding:"2px"},onMouseEnter:A=>{Y&&(A.target.style.transform="scale(1.05)",A.target.style.boxShadow="0 2px 8px rgba(255,255,255,0.2)")},onMouseLeave:A=>{Y&&(A.target.style.transform="scale(1)",A.target.style.boxShadow="none")}},e.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-between",width:"100%",height:"100%"}},e.createElement("span",{style:{fontSize:r?"0.8rem":"0.9rem",fontWeight:"bold",color:"inherit",textAlign:"right",padding:"1px"}},Y||""),J(Y)&&e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"1px",padding:"1px",flex:1,justifyContent:"flex-end"}},j(Y).slice(0,r?2:3).map((U,K)=>{let X="";U.player1Id&&U.player2Id?X=U.player1Id.trim().toLowerCase()===`${c} ${u}`.trim().toLowerCase()?U.player2Id:U.player1Id:U.senderName&&U.receiverName&&(X=U.senderName.trim().toLowerCase()===`${c} ${u}`.trim().toLowerCase()?U.receiverName:U.senderName);const O=X.length>(r?8:10)?X.substring(0,r?8:10)+"...":X;return e.createElement("div",{key:U._id||K,style:{fontSize:r?"0.5rem":"0.6rem",color:"#4CAF50",fontWeight:"bold",textAlign:"center",cursor:"pointer",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",padding:"1px",borderRadius:"1px",background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",transition:"all 0.2s ease",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},onMouseEnter:Q=>{Q.target.style.background="rgba(76, 175, 80, 0.3)",Q.target.style.transform="scale(1.05)"},onMouseLeave:Q=>{Q.target.style.background="rgba(76, 175, 80, 0.1)",Q.target.style.transform="scale(1)"},onClick:Q=>{Q.stopPropagation(),g&&g(U)},title:`Click to view match details vs ${X}`},O)}),(()=>{const A=j(Y);return A.length>(r?2:3)?e.createElement("div",{style:{fontSize:r?"0.4rem":"0.5rem",color:"#4CAF50",textAlign:"center",padding:"1px",fontStyle:"italic"}},"+",A.length-(r?2:3)," more"):null})()))))),e.createElement("div",{style:{marginTop:(()=>{const Y=N?r?"60px":"80px":r?"20px":"24px";return console.log(`Legend margin: needsMoreMargin=${N}, isMobile=${r}, margin=${Y}`),Y})(),fontSize:r?"0.7rem":"0.8rem",display:"flex",flexDirection:"column",gap:"6px",padding:r?"12px":"16px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:r?"3px":"4px"}},e.createElement("div",{style:{width:r?"6px":"8px",height:r?"6px":"8px",background:"transparent",border:"1px solid #4CAF50",borderRadius:"1px"}}),e.createElement("span",null,"Today (outline)")),a&&e.createElement("div",{style:{display:"flex",alignItems:"center",gap:r?"3px":"4px"}},e.createElement("div",{style:{width:r?"6px":"8px",height:r?"6px":"8px",background:"#e74c3c",border:"1px solid #c0392b",borderRadius:"1px"}}),e.createElement("span",null,"Phase 1 Deadline (",lr(a,"MMM d, yyyy"),")")),e.createElement("div",{style:{display:"flex",alignItems:"center",gap:r?"3px":"4px"}},e.createElement("div",{style:{width:r?"6px":"8px",height:r?"6px":"8px",background:"transparent",border:"1px solid #4CAF50",borderRadius:"50%",position:"relative"}},e.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"2px",height:"2px",background:"#4CAF50",borderRadius:"50%"}})),e.createElement("span",null,"Click scheduled opponent for match details"))))},az=({isOpen:a,onClose:r,isMobile:t,phase1EndDate:n,upcomingMatches:o,playerName:i,playerLastName:c,onOpenOpponentsModal:u,onMatchClick:m,onSmartMatchClick:g})=>{const[f,y]=h.useState(new Date);return a?e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)",padding:"60px"},onClick:r},e.createElement("div",{style:{background:t?"rgba(0, 0, 0, 0.9)":"linear-gradient(120deg, #232323 80%, #2a0909 100%)",border:t?"2px solid rgba(255, 255, 255, 0.3)":"2px solid #e53e3e",borderRadius:t?"16px":"1.2rem",padding:t?"12px":"0",width:t?"95%":"auto",maxWidth:t?"none":"700px",minWidth:t?"auto":"400px",boxShadow:t?"0 8px 32px rgba(0,0,0,0.6)":"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",backdropFilter:t?"blur(12px)":"none",maxHeight:t?"80%":"65vh",overflow:"auto",margin:t?"0":"0 auto",animation:"modalBounceIn 0.5s cubic-bezier(.21,1.02,.73,1.01)",display:"flex",flexDirection:"column"},onClick:v=>v.stopPropagation()},e.createElement("div",{style:{position:"relative",textAlign:"center",marginBottom:t?"12px":"0",padding:t?"8px":"1.1rem 1.5rem 0.7rem 1.5rem",borderRadius:t?"12px":"1.2rem 1.2rem 0 0",background:t?"rgba(0, 0, 0, 0.6)":"#e53e3e",border:t?"1px solid rgba(255,255,255,0.2)":"none",boxShadow:t?"0 4px 16px rgba(0,0,0,0.3)":"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:t?"default":"grab",userSelect:"none"}},!t&&e.createElement("span",{style:{position:"absolute",left:0,top:0,width:"100%",height:"5px",background:"linear-gradient(90deg, #fff0 0%, #e53e3e 60%, #fff0 100%)",borderTopLeftRadius:"1.2rem",borderTopRightRadius:"1.2rem",pointerEvents:"none"}}),e.createElement("h3",{style:{margin:0,color:"#ffffff",fontSize:t?"1.2rem":"1.3rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",textShadow:t?"2px 2px 4px rgba(0,0,0,0.8)":"0 1px 12px #000a",letterSpacing:t?"0.5px":"0.02em",wordBreak:"break-word",minWidth:0}},e.createElement("span",{style:{fontSize:t?"1rem":"1.3rem",background:t?"linear-gradient(45deg, #4CAF50, #4CAF50dd)":"none",padding:t?"8px 16px":"0",borderRadius:t?"8px":"0",boxShadow:t?"0 4px 16px rgba(0,0,0,0.4)":"none"}},"📅 Phase 1 Calendar")),e.createElement("button",{onClick:r,style:{position:"absolute",right:t?"8px":"1.5rem",top:"50%",transform:"translateY(-50%)",background:t?"rgba(255, 255, 255, 0.1)":"none",border:t?"1px solid rgba(255, 255, 255, 0.3)":"none",color:"#ffffff",fontSize:t?"1.2rem":"2em",cursor:"pointer",padding:"0",width:t?"32px":"auto",height:t?"32px":"auto",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:t?"50%":"0",transition:"all 0.2s ease",fontWeight:"bold",lineHeight:1,zIndex:10},onMouseEnter:v=>{t?(v.target.style.background="rgba(255, 255, 255, 0.2)",v.target.style.transform="scale(1.1)"):v.target.style.color="#ffd6d6"},onMouseLeave:v=>{t?(v.target.style.background="rgba(255, 255, 255, 0.1)",v.target.style.transform="scale(1)"):v.target.style.color="#ffffff"}},"×")),e.createElement("div",{style:{padding:t?"0":"0.8rem",flex:1,overflow:"auto",maxHeight:"calc(100vh - 200px)"}},e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.15)",border:"1px solid rgba(76, 175, 80, 0.4)",borderRadius:"12px",padding:t?"6px":"10px",marginBottom:t?"6px":"10px",textAlign:"center"}},e.createElement("div",{style:{fontSize:t?"0.8rem":"1rem",color:"#ffffff",fontWeight:"bold",marginBottom:t?"3px":"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"📅 Click any date to see opponents available for that day"),e.createElement("div",{style:{fontSize:t?"0.7rem":"0.9rem",color:"#cccccc",fontStyle:"italic",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"💡 Or click the Progress meter on the home screen to see all available opponents"),e.createElement("div",{style:{fontSize:t?"0.7rem":"0.9rem",color:"#cccccc",fontStyle:"italic",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginTop:t?"2px":"3px",marginBottom:t?"4px":"6px"}},"🤖 Smart Match pairs you with assigned opponents based on matching availability"),e.createElement("button",{onClick:()=>{console.log("🎯 Calendar Modal: Smart Match button clicked"),g?(console.log("🎯 Calendar Modal: Calling onSmartMatchClick"),g()):(console.log("❌ Calendar Modal: onSmartMatchClick is not defined"),alert("Smart Match functionality is not available. Please try again."))},style:{background:"linear-gradient(135deg, rgba(255, 193, 7, 0.3), rgba(255, 193, 7, 0.2), rgba(255, 193, 7, 0.1))",border:"1px solid rgba(255, 193, 7, 0.4)",color:"#ffffff",fontSize:t?"0.7rem":"0.8rem",fontWeight:"bold",cursor:"pointer",padding:t?"8px 12px":"10px 16px",borderRadius:"8px",transition:"all 0.3s ease",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",boxShadow:"0 2px 8px rgba(255, 193, 7, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",margin:"0 auto",zIndex:10},onMouseEnter:v=>{v.target.style.background="linear-gradient(135deg, rgba(255, 193, 7, 0.4), rgba(255, 193, 7, 0.3), rgba(255, 193, 7, 0.2))",v.target.style.transform="scale(1.02) translateY(-1px)",v.target.style.boxShadow="0 4px 12px rgba(255, 193, 7, 0.3), inset 0 1px 0 rgba(255,255,255,0.2)"},onMouseLeave:v=>{v.target.style.background="linear-gradient(135deg, rgba(255, 193, 7, 0.3), rgba(255, 193, 7, 0.2), rgba(255, 193, 7, 0.1))",v.target.style.transform="scale(1)",v.target.style.boxShadow="0 2px 8px rgba(255, 193, 7, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)"}},"🤖 Smart Match")),e.createElement(tz,{phase1EndDate:n,isMobile:t,currentMonth:f,onMonthChange:y,onOpenOpponentsModal:u,upcomingMatches:o,playerName:i,playerLastName:c,onMatchClick:m,onDateSelect:v=>{console.log("🎯 Calendar Modal: Date selected:",v),u?(console.log("🎯 Calendar Modal: Calling onOpenOpponentsModal"),u(v)):console.log("❌ Calendar Modal: onOpenOpponentsModal is not defined")}})))):null},nz=({isOpen:a,onClose:r,match:t,onValidate:n,onReject:o})=>{const[i,c]=h.useState({actualDate:"",actualTime:"",actualLocation:"",winner:"",score:"",notes:"",witnesses:"",photos:null}),[u,m]=h.useState(!1);if(!a||!t)return null;const g=async y=>{y.preventDefault(),m(!0);try{if(!i.actualDate||!i.winner||!i.score){alert("Please fill in all required fields: Date, Winner, and Score");return}await n({matchId:t._id,...i}),r()}catch(v){console.error("Error validating match:",v),alert("Error validating match. Please try again.")}finally{m(!1)}},f=async()=>{if(window.confirm("Are you sure you want to reject this match completion? This will require the match to be replayed.")){m(!0);try{await o(t._id),r()}catch(y){console.error("Error rejecting match:",y),alert("Error rejecting match. Please try again.")}finally{m(!1)}}};return e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3}},e.createElement("div",{style:{background:"#222",border:"2px solid #444",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"}},e.createElement("h2",{style:{margin:0,color:"#fff"}},"🎯 Match Validation"),e.createElement("button",{onClick:r,style:{background:"none",border:"none",color:"#aaa",fontSize:"24px",cursor:"pointer"}},"×")),e.createElement("div",{style:{background:"#333",padding:"16px",borderRadius:"8px",marginBottom:"20px"}},e.createElement("h3",{style:{margin:"0 0 12px 0",color:"#fff"}},"Match Details"),e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},e.createElement("div",null,e.createElement("strong",null,"Players:")," ",t.player1," vs ",t.player2),e.createElement("div",null,e.createElement("strong",null,"Scheduled Date:")," ",t.date),e.createElement("div",null,e.createElement("strong",null,"Location:")," ",t.location))),e.createElement("form",{onSubmit:g},e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Actual Date Played * ",e.createElement("span",{style:{color:"#ff4444"}},"Required")),e.createElement("input",{type:"date",value:i.actualDate,onChange:y=>c({...i,actualDate:y.target.value}),style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"},required:!0})),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Actual Time Played"),e.createElement("input",{type:"time",value:i.actualTime,onChange:y=>c({...i,actualTime:y.target.value}),style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"}})),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Actual Location"),e.createElement("input",{type:"text",value:i.actualLocation,onChange:y=>c({...i,actualLocation:y.target.value}),placeholder:"Where was the match actually played?",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"}})),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Winner * ",e.createElement("span",{style:{color:"#ff4444"}},"Required")),e.createElement("select",{value:i.winner,onChange:y=>c({...i,winner:y.target.value}),style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"},required:!0},e.createElement("option",{value:""},"Select winner..."),e.createElement("option",{value:t.player1},t.player1),e.createElement("option",{value:t.player2},t.player2))),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Final Score * ",e.createElement("span",{style:{color:"#ff4444"}},"Required")),e.createElement("input",{type:"text",value:i.score,onChange:y=>c({...i,score:y.target.value}),placeholder:"e.g., 7-3, 8-2, etc.",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"},required:!0})),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Witnesses (optional)"),e.createElement("input",{type:"text",value:i.witnesses,onChange:y=>c({...i,witnesses:y.target.value}),placeholder:"Names of people who witnessed the match",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"}})),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Additional Notes"),e.createElement("textarea",{value:i.notes,onChange:y=>c({...i,notes:y.target.value}),placeholder:"Any additional details about the match...",rows:"3",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff",resize:"vertical"}})),e.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"}},e.createElement("button",{type:"button",onClick:f,disabled:u,style:{padding:"10px 16px",background:"#ff4444",border:"none",borderRadius:"6px",color:"#fff",cursor:u?"not-allowed":"pointer",opacity:u?.6:1}},u?"Rejecting...":"Reject Match"),e.createElement("button",{type:"submit",disabled:u,style:{padding:"10px 16px",background:"#00aa00",border:"none",borderRadius:"6px",color:"#fff",cursor:u?"not-allowed":"pointer",opacity:u?.6:1}},u?"Validating...":"Validate Match")))))};class rz extends e.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,t){this.setState({error:r,errorInfo:t}),console.error("ErrorBoundary caught an error:",r,t)}render(){return this.state.hasError?e.createElement("div",{style:{padding:"20px",margin:"10px",border:"1px solid #ff6b6b",borderRadius:"8px",backgroundColor:"#fff5f5",color:"#d63031"}},e.createElement("h3",null,"Something went wrong."),e.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),e.createElement("br",null),this.state.errorInfo&&this.state.errorInfo.componentStack),e.createElement("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),style:{marginTop:"10px",padding:"8px 16px",backgroundColor:"#ff6b6b",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}},"Try again")):this.props.children}}function Ow({isOpen:a,onClose:r,isMobile:t}){return a?e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"10px"}},e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"2px solid #4CAF50",borderRadius:"12px",width:t?"98%":"50%",maxWidth:"500px",height:t?"98%":"90vh",maxHeight:"800px",display:"flex",flexDirection:"column",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",color:"#ffffff"}},e.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderBottom:"2px solid #4CAF50",flexShrink:0}},e.createElement("h2",{style:{margin:0,fontSize:t?"1.2rem":"1.5rem",color:"#ffffff",fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px",textAlign:"center"}},"🎯 Phase 1 Scheduled Opponents Rules"),e.createElement("button",{onClick:r,style:{position:"absolute",right:"20px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ffffff",fontSize:"2rem",cursor:"pointer",padding:"5px",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s ease"},onMouseEnter:n=>n.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:n=>n.target.style.backgroundColor="transparent"},"×")),e.createElement("div",{style:{flex:1,overflowY:"auto",padding:"25px",fontSize:t?"1rem":"1.1rem",lineHeight:"1.6"}},e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#4CAF50",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"📅 Overview"),e.createElement("p",{style:{margin:"0 0 15px 0",color:"#e0e0e0"}},"Phase 1 covers Weeks 1-6 where each player is assigned specific opponents to schedule and complete matches with."),e.createElement("p",{style:{margin:"0 0 15px 0",color:"#e0e0e0"}},"This phase focuses on completing your assigned matches with maximum scheduling flexibility.")),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#4CAF50",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"👥 Opponent Assignment"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Assigned Opponents:")," Each player is assigned 6 opponents at the start of the session"),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Match Requirements:")," You must complete 1 match against each of your 6 assigned opponents"),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Total Matches:")," 6 matches total during Phase 1"))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#4CAF50",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"⏰ Scheduling Flexibility"),e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"8px",padding:"15px",marginBottom:"15px"}},e.createElement("p",{style:{margin:"0 0 10px 0",color:"#4CAF50",fontWeight:"bold"}},"Maximum scheduling flexibility for your convenience:"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},e.createElement("li",{style:{marginBottom:"5px"}},e.createElement("strong",null,"Any Day:")," Matches may be played on any day of the week"),e.createElement("li",{style:{marginBottom:"5px"}},e.createElement("strong",null,"Any Time:")," Matches may be played at any time that works for both players"),e.createElement("li",{style:{marginBottom:"5px"}},e.createElement("strong",null,"Any Location:")," Matches may be played at any safe, mutually agreed location")))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#4CAF50",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"⏳ Completion Deadline"),e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",padding:"15px",marginBottom:"15px"}},e.createElement("p",{style:{margin:"0 0 10px 0",color:"#ffc107",fontWeight:"bold"}},"All Phase 1 matches must be completed by the end of Week 6"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},e.createElement("li",{style:{marginBottom:"5px"}},e.createElement("strong",null,"Deadline:")," End of Week 6 (Sunday at 11:59 PM)"),e.createElement("li",{style:{marginBottom:"5px"}},e.createElement("strong",null,"No Extensions:")," Phase 1 deadline is firm and cannot be extended"),e.createElement("li",{style:{marginBottom:"5px"}},e.createElement("strong",null,"Impact:")," Incomplete matches may affect your standings and Phase 2 eligibility")))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#4CAF50",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"🎱 Match Rules"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Standard Rules:")," All matches use the official CSI rule book"),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Scoring:")," All scoring must be done with the BCAPL scoring app"),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Payment:")," Standard match payment and fees apply"),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"FargoRate:")," All matches are integrated with FargoRate for ratings"))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("h3",{style:{color:"#4CAF50",fontSize:t?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"📋 Scheduling Process"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Contact Opponents:")," Reach out to your assigned opponents to schedule matches"),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Mutual Agreement:")," Both players must agree on date, time, and location"),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Record Matches:")," All scheduled matches must be recorded in the League Scheduling Hub"),e.createElement("li",{style:{marginBottom:"8px"}},e.createElement("strong",null,"Communication:")," Use the message center to coordinate with opponents"))),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"8px",padding:"15px",marginTop:"20px"}},e.createElement("h4",{style:{color:"#ff4444",fontSize:t?"1rem":"1.1rem",margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"8px"}},"⚠️ Important Notes"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0",fontSize:t?"0.85rem":"0.9rem"}},e.createElement("li",{style:{marginBottom:"5px"}},"Phase 1 results determine your standings position for Phase 2 challenges"),e.createElement("li",{style:{marginBottom:"5px"}},"Incomplete matches may result in forfeits and affect your overall standings"),e.createElement("li",{style:{marginBottom:"5px"}},"All matches must be completed and recorded before Phase 2 begins"),e.createElement("li",{style:{marginBottom:"5px"}},"Use the calendar feature to track your scheduled matches and deadlines")))),e.createElement("div",{style:{textAlign:"center",padding:"20px",borderTop:"1px solid rgba(255,255,255,0.2)",flexShrink:0}},e.createElement("button",{onClick:r,style:{background:"linear-gradient(135deg, #4CAF50, #45a049)",border:"none",color:"#ffffff",fontSize:t?"0.9rem":"1rem",fontWeight:"bold",padding:t?"10px 20px":"12px 25px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"},onMouseEnter:n=>{n.target.style.transform="translateY(-2px)",n.target.style.boxShadow="0 6px 12px rgba(0,0,0,0.4)"},onMouseLeave:n=>{n.target.style.transform="translateY(0)",n.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"}},"Got It! ✓")))):null}const oz=({isOpen:a,onClose:r,isMobile:t,playerName:n,playerLastName:o,completedMatches:i,totalRequiredMatches:c,playerStats:u,standings:m,timeLeft:g,deadlineStatus:f,phase1EndDate:y,allPlayers:v,selectedDivision:S})=>{const[w,x]=h.useState(null);h.useEffect(()=>{a&&v&&m&&k()},[a,v,m]);const k=()=>{if(!v||!m)return;const M=v.length,N=m.filter(L=>L.matchesCompleted&&L.matchesCompleted>0).length,_=m.reduce((L,F)=>L+(F.matchesCompleted||0),0),P=M*c,B=Math.round(_/P*100),R=Math.round(_/M/c*100),W=m.filter(L=>L.matchesCompleted>0).sort((L,F)=>{const j=(L.matchesCompleted||0)/c;return(F.matchesCompleted||0)/c-j}).slice(0,5);x({totalPlayers:M,playersWithMatches:N,totalMatchesCompleted:_,totalMatchesRequired:P,leagueProgress:B,avgCompletion:R,topPerformers:W})},E=()=>f==="passed"?"#e74c3c":f==="critical"?"#ff6b6b":f==="urgent"?"#ff8800":f==="warning"?"#ffaa00":"#4CAF50",I=()=>f==="passed"?"⏰":f==="critical"?"🚨":f==="urgent"||f==="warning"?"⚠️":"✅";return a?e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(8px)"},onClick:r},e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(20, 20, 20, 0.95))",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:t?"8px":"12px",padding:t?"8px":"12px",width:t?"88%":"75%",maxWidth:t?"none":"800px",maxHeight:t?"75vh":"70vh",overflow:"auto",boxShadow:"0 8px 32px rgba(0,0,0,0.5), 0 4px 16px rgba(255,255,255,0.1)",backdropFilter:"blur(12px)"},onClick:M=>M.stopPropagation()},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:t?"8px":"12px",paddingBottom:t?"6px":"8px",borderBottom:"1px solid rgba(255,255,255,0.2)"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:t?"4px":"8px"}},e.createElement("div",{style:{fontSize:t?"1rem":"1.2rem",color:E()}},I()),e.createElement("h2",{style:{margin:0,color:"#ffffff",fontSize:t?"0.8rem":"1.1rem",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.8)"}},"Phase 1 Overview")),e.createElement("button",{onClick:r,style:{background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.3)",color:"#ffffff",fontSize:t?"0.9rem":"1.1rem",cursor:"pointer",padding:t?"4px 8px":"6px 10px",borderRadius:"4px",transition:"all 0.2s ease",fontWeight:"bold"},onMouseEnter:M=>M.target.style.background="rgba(255,255,255,0.2)",onMouseLeave:M=>M.target.style.background="rgba(255,255,255,0.1)"},"Close")),e.createElement("div",{style:{display:"grid",gridTemplateColumns:t?"1fr":"1fr 1fr",gap:t?"8px":"12px"}},e.createElement("div",{style:{background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",padding:t?"8px":"12px",border:"1px solid rgba(255,255,255,0.15)"}},e.createElement("h3",{style:{margin:"0 0 8px 0",color:"#ffffff",fontSize:t?"0.7rem":"0.9rem",fontWeight:"bold",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"Your Status"),e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"4px",padding:t?"6px":"8px",marginBottom:t?"6px":"8px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"}},e.createElement("span",{style:{color:"#ffffff",fontSize:t?"0.7rem":"0.9rem",fontWeight:"600"}},"Progress"),e.createElement("span",{style:{color:"#4CAF50",fontSize:t?"0.7rem":"0.9rem",fontWeight:"bold"}},i.length,"/",c)),e.createElement("div",{style:{width:"100%",height:t?"6px":"8px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",overflow:"hidden"}},e.createElement("div",{style:{width:`${Math.round(i.length/c*100)}%`,height:"100%",background:`linear-gradient(90deg, ${E()}, ${E()}dd)`,borderRadius:"4px",transition:"width 0.4s ease"}}))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:t?"6px":"8px"}},e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"6px",padding:t?"6px":"8px",textAlign:"center"}},e.createElement("div",{style:{color:"#cccccc",fontSize:t?"0.6rem":"0.8rem",marginBottom:"3px"}},"Record"),e.createElement("div",{style:{color:"#ffffff",fontSize:t?"0.8rem":"1rem",fontWeight:"bold"}},(u==null?void 0:u.wins)||0,"-",(u==null?void 0:u.losses)||0),e.createElement("div",{style:{color:"#4CAF50",fontSize:t?"0.6rem":"0.8rem",fontWeight:"600"}},(u==null?void 0:u.winRate)||0,"%")),e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"6px",padding:t?"6px":"8px",textAlign:"center"}},e.createElement("div",{style:{color:"#cccccc",fontSize:t?"0.6rem":"0.8rem",marginBottom:"3px"}},"Position"),e.createElement("div",{style:{color:"#ffffff",fontSize:t?"0.8rem":"1rem",fontWeight:"bold"}},(u==null?void 0:u.position)||"N/A"))),e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"4px",padding:t?"6px":"8px",marginTop:t?"6px":"8px",textAlign:"center"}},e.createElement("div",{style:{color:"#cccccc",fontSize:t?"0.6rem":"0.8rem",marginBottom:"4px"}},"Time Remaining"),e.createElement("div",{style:{color:E(),fontSize:t?"0.8rem":"1rem",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},g!=null&&g.passed?"DEADLINE PASSED":(g==null?void 0:g.days)>0?`${g.days} days`:(g==null?void 0:g.hours)>0?`${g.hours} hours`:"Less than 1 hour"),y&&e.createElement("div",{style:{color:"#cccccc",fontSize:t?"0.5rem":"0.7rem",marginTop:"2px"}},"Ends: ",lr(y,"MMM d, yyyy")))),e.createElement("div",{style:{background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",padding:t?"8px":"12px",border:"1px solid rgba(255,255,255,0.15)"}},e.createElement("h3",{style:{margin:"0 0 8px 0",color:"#ffffff",fontSize:t?"0.7rem":"0.9rem",fontWeight:"bold",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"League Status"),w?e.createElement(e.Fragment,null,e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"4px",padding:t?"6px":"8px",marginBottom:t?"6px":"8px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"}},e.createElement("span",{style:{color:"#ffffff",fontSize:t?"0.7rem":"0.9rem",fontWeight:"600"}},"League Progress"),e.createElement("span",{style:{color:"#4CAF50",fontSize:t?"0.7rem":"0.9rem",fontWeight:"bold"}},w.leagueProgress,"%")),e.createElement("div",{style:{width:"100%",height:t?"6px":"8px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",overflow:"hidden"}},e.createElement("div",{style:{width:`${w.leagueProgress}%`,height:"100%",background:"linear-gradient(90deg, #4CAF50, #45a049)",borderRadius:"4px",transition:"width 0.4s ease"}}))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:t?"4px":"6px",marginBottom:t?"6px":"8px"}},e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"4px",padding:t?"4px":"6px",textAlign:"center"}},e.createElement("div",{style:{color:"#cccccc",fontSize:t?"0.5rem":"0.7rem",marginBottom:"2px"}},"Active Players"),e.createElement("div",{style:{color:"#ffffff",fontSize:t?"0.7rem":"0.9rem",fontWeight:"bold"}},w.playersWithMatches,"/",w.totalPlayers)),e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"4px",padding:t?"4px":"6px",textAlign:"center"}},e.createElement("div",{style:{color:"#cccccc",fontSize:t?"0.5rem":"0.7rem",marginBottom:"2px"}},"Avg Completion"),e.createElement("div",{style:{color:"#ffffff",fontSize:t?"0.7rem":"0.9rem",fontWeight:"bold"}},w.avgCompletion,"%"))),e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"4px",padding:t?"6px":"8px"}},e.createElement("div",{style:{color:"#ffffff",fontSize:t?"0.7rem":"0.9rem",fontWeight:"600",marginBottom:"4px",textAlign:"center"}},"Top Performers"),e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"4px"}},w.topPerformers.map((M,N)=>e.createElement("div",{key:N,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 8px",background:"rgba(255,255,255,0.03)",borderRadius:"4px"}},e.createElement("span",{style:{color:"#ffffff",fontSize:t?"0.5rem":"0.7rem",fontWeight:N===0?"bold":"normal"}},N+1,". ",M.name),e.createElement("span",{style:{color:"#4CAF50",fontSize:t?"0.5rem":"0.7rem",fontWeight:"600"}},Math.round(M.matchesCompleted/c*100),"%")))))):e.createElement("div",{style:{color:"#cccccc",textAlign:"center",fontSize:t?"0.9rem":"1.1rem",padding:"20px"}},"Loading league statistics..."))),e.createElement("div",{style:{marginTop:t?"8px":"12px",paddingTop:t?"6px":"8px",borderTop:"1px solid rgba(255,255,255,0.2)",textAlign:"center"}},e.createElement("div",{style:{color:"#cccccc",fontSize:t?"0.5rem":"0.7rem",fontStyle:"italic",marginBottom:t?"8px":"12px"}},"Phase 1 ends when all players complete ",c," matches or the deadline passes"),e.createElement("button",{onClick:r,style:{background:"linear-gradient(135deg, #4CAF50, #45a049)",border:"none",color:"#ffffff",fontSize:t?"0.8rem":"1rem",cursor:"pointer",padding:t?"8px 16px":"10px 20px",borderRadius:"6px",transition:"all 0.2s ease",fontWeight:"bold",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",minWidth:t?"100px":"120px"},onMouseEnter:M=>M.target.style.transform="translateY(-2px)",onMouseLeave:M=>M.target.style.transform="translateY(0)"},"Close Overview")))):null},G2={findOverlappingAvailability(a,r){try{console.log("Smart Match Debug - Parsing P1 availability:",a);let t;typeof a=="string"?t=p0(a):typeof a=="object"&&a!==null?t=a:t={Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},console.log("Smart Match Debug - Parsed P1 availability:",t),console.log("Smart Match Debug - Parsing P2 availability:",r);let n;typeof r=="string"?n=p0(r):typeof r=="object"&&r!==null?n=r:n={Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},console.log("Smart Match Debug - Parsed P2 availability:",n);const o={};return["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].forEach(i=>{o[i]=[],t[i]&&n[i]&&(console.log(`Smart Match Debug - Checking ${i}: P1 slots:`,t[i],"P2 slots:",n[i]),t[i].forEach(c=>{n[i].forEach(u=>{const m=this.findTimeOverlap(c,u);m&&(o[i].push(m),console.log(`Smart Match Debug - Found overlap on ${i}:`,m))})}))}),console.log("Smart Match Debug - Final overlapping slots:",o),o}catch(t){return console.error("Error parsing availability:",t),{Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]}}},findTimeOverlap(a,r){console.log("Smart Match Debug - Finding overlap between:",a,"and",r);const[t,n]=a.split(" - "),[o,i]=r.split(" - ");console.log("Smart Match Debug - Parsed times:",{start1:t,end1:n,start2:o,end2:i});const c=this.parseTime(t),u=this.parseTime(n),m=this.parseTime(o),g=this.parseTime(i);console.log("Smart Match Debug - Parsed minutes:",{start1Time:c,end1Time:u,start2Time:m,end2Time:g});const f=Math.max(c,m),y=Math.min(u,g);if(console.log("Smart Match Debug - Overlap calculation:",{overlapStart:f,overlapEnd:y}),f<y){const v=`${this.formatTime(f)} - ${this.formatTime(y)}`;return console.log("Smart Match Debug - Found overlap:",v),v}return console.log("Smart Match Debug - No overlap found"),null},parseTime(a){console.log("Smart Match Debug - Parsing time:",a);let r=a.trim().toLowerCase(),t="am";r.includes("pm")?(t="pm",r=r.replace("pm","")):r.includes("am")&&(t="am",r=r.replace("am",""));let n,o=0;r.includes(":")?[n,o]=r.split(":").map(Number):r.length<=2?(n=parseInt(r),o=0):(n=parseInt(r.slice(0,-2)),o=parseInt(r.slice(-2)));let i=n;t==="pm"&&n!==12&&(i+=12),t==="am"&&n===12&&(i=0);const c=i*60+o;return console.log("Smart Match Debug - Parsed time result:",{timeStr:a,hours:n,minutes:o,period:t,hour24:i,result:c}),c},formatTime(a){const r=Math.floor(a/60),t=a%60;let n="AM",o=r;return r>=12&&(n="PM",r>12&&(o=r-12)),o===0&&(o=12),`${o}:${t.toString().padStart(2,"0")} ${n}`},calculateConfidenceScore(a,r,t){let n=0;const o=Object.values(t).flat().length;n+=o*10;const i=Object.keys(t).filter(c=>t[c].length>0).length;if(n+=i*5,Object.values(t).flat().forEach(c=>{const[u,m]=c.split(" - "),g=this.parseTime(m)-this.parseTime(u);g>=120&&(n+=5),g>=180&&(n+=5)}),a.locations&&r.locations){const c=typeof a.locations=="string"?a.locations.split(`
`).map(g=>g.trim()).filter(Boolean):Array.isArray(a.locations)?a.locations:[],u=typeof r.locations=="string"?r.locations.split(`
`).map(g=>g.trim()).filter(Boolean):Array.isArray(r.locations)?r.locations:[],m=c.filter(g=>u.includes(g));n+=m.length*10}return Math.min(n,100)},findOptimalLocation(a,r){if(!a.locations||!r.locations)return null;const t=typeof a.locations=="string"?a.locations.split(`
`).map(i=>i.trim()).filter(Boolean):Array.isArray(a.locations)?a.locations:[],n=typeof r.locations=="string"?r.locations.split(`
`).map(i=>i.trim()).filter(Boolean):Array.isArray(r.locations)?r.locations:[],o=t.filter(i=>n.includes(i));return o.length>0?o[0]:null},checkForConflicts(a,r,t){const n=[];return t.forEach(o=>{(o.player1===a.firstName||o.player2===a.firstName||o.player1===r.firstName||o.player2===r.firstName)&&n.push(o)}),n},generateSuggestions(a,r,t=[]){console.log("Smart Match Debug - Player 1:",a),console.log("Smart Match Debug - Player 2:",r);const n=`Day: Monday, Available From: 6:00 PM, Available Until: 10:00 PM
Day: Tuesday, Available From: 6:00 PM, Available Until: 10:00 PM
Day: Wednesday, Available From: 6:00 PM, Available Until: 10:00 PM
Day: Thursday, Available From: 6:00 PM, Available Until: 10:00 PM
Day: Friday, Available From: 6:00 PM, Available Until: 10:00 PM
Day: Saturday, Available From: 2:00 PM, Available Until: 8:00 PM`,o=a.availability||n,i=r.availability||n;console.log("Smart Match Debug - P1 Availability:",o),console.log("Smart Match Debug - P2 Availability:",i);const c=this.findOverlappingAvailability(o,i);console.log("Smart Match Debug - Overlapping Slots:",c);const u=this.calculateConfidenceScore(a,r,c),m=this.findOptimalLocation(a,r),g=this.checkForConflicts(a,r,t),f=[];Object.entries(c).forEach(([S,w])=>{w.forEach(x=>{f.push({day:S,timeSlot:x,location:m,confidence:Math.min(u+w.length*2,100),player1:a.firstName,player2:r.firstName})})}),f.sort((S,w)=>w.confidence-S.confidence);const y=f.slice(0,3),v=!a.availability||!r.availability;return{suggestions:y,confidence:u,conflicts:g,message:y.length>0?`Found ${f.length} potential match times, showing top ${y.length}${v?" (using default availability)":""}`:"No overlapping availability found"}},generateQuickProposal(a,r,t){const n={Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday",Sun:"Sunday"};return{player1:r.firstName,player2:t.firstName,proposedDate:n[a.day],proposedTime:a.timeSlot,proposedLocation:a.location||"TBD",confidence:a.confidence,message:`Smart Match Suggestion: ${n[a.day]} at ${a.timeSlot}${a.location?` at ${a.location}`:""}`}}},lz=({isOpen:a,onClose:r,player1:t,player2:n,upcomingMatches:o=[],isMobile:i=!1,selectedDivision:c,phase:u,senderName:m,senderEmail:g,onProposalComplete:f})=>{const[y,v]=h.useState([]),[S,w]=h.useState(!1),[x,k]=h.useState(null),[E,I]=h.useState(!1),[M,N]=h.useState(!1),[_,P]=h.useState(null);h.useEffect(()=>{a&&t&&n&&B()},[a,t,n]);const B=async()=>{w(!0),v([]),k(null);try{await new Promise(J=>setTimeout(J,1e3));const j=G2.generateSuggestions(t,n,o);v(j.suggestions),w(!1)}catch(j){console.error("Error generating suggestions:",j),w(!1)}},R=j=>{k(j);const J=G2.generateQuickProposal(j,t,n);P({player:n,day:{Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat",Sunday:"Sun"}[J.proposedDate]||J.proposedDate,slot:J.proposedTime,selectedDivision:c,phase:u,prefilledData:J}),N(!0)},W=()=>{v([]),k(null),r()},L=j=>j>=80?"#dc2626":j>=60?"#f59e0b":"#6b7280",F=j=>j>=80?"High":j>=60?"Medium":"Low";return a?e.createElement(Bt,{open:a,onClose:W,title:`Smart Match: ${t==null?void 0:t.firstName} vs ${n==null?void 0:n.firstName}`,isMobile:i},e.createElement("div",{style:{padding:"20px",maxHeight:"70vh",overflowY:"auto",backgroundColor:"#1f2937",color:"#f9fafb"}},S&&e.createElement("div",{style:{textAlign:"center",padding:"40px"}},e.createElement(Rw,null),e.createElement("p",{style:{marginTop:"16px",color:"#9ca3af"}},"Analyzing availability and generating suggestions...")),!S&&y.length===0&&e.createElement("div",{style:{textAlign:"center",padding:"40px",color:"#9ca3af"}},e.createElement("h3",{style:{color:"#f9fafb"}},"No Match Suggestions Found"),e.createElement("p",null,"No overlapping availability was found between the two players."),e.createElement("p",{style:{fontSize:"14px",marginTop:"8px"}},"Make sure both players have availability data in the system."),e.createElement("button",{onClick:()=>I(!0),style:{marginTop:"16px",padding:"10px 20px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"6px",fontWeight:"500",cursor:"pointer",fontSize:"14px",transition:"all 0.3s ease"},onMouseEnter:j=>j.target.style.backgroundColor="#b91c1c",onMouseLeave:j=>j.target.style.backgroundColor="#dc2626"},"📅 View ",n==null?void 0:n.firstName,"'s Availability & Send Proposal")),!S&&y.length>0&&e.createElement(e.Fragment,null,e.createElement("div",{style:{marginBottom:"20px",textAlign:"center"}},e.createElement("h3",{style:{margin:"0 0 8px 0",color:"#f9fafb"}},"Found ",y.length," potential match times"),e.createElement("p",{style:{margin:0,color:"#9ca3af",fontSize:"14px"}},"Select a suggestion below to create a match proposal")),e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"12px"}},y.map((j,J)=>e.createElement("div",{key:J,style:{border:`2px solid ${x===j?"#dc2626":"#374151"}`,borderRadius:"8px",padding:"16px",cursor:"pointer",backgroundColor:"#374151",transition:"all 0.3s ease",boxShadow:x===j?"0 4px 12px rgba(220, 38, 38, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},onClick:()=>R(j)},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}},e.createElement("div",{style:{flex:1}},e.createElement("h4",{style:{margin:"0 0 8px 0",color:"#f9fafb",fontWeight:"600"}},j.day==="Mon"?"Monday":j.day==="Tue"?"Tuesday":j.day==="Wed"?"Wednesday":j.day==="Thu"?"Thursday":j.day==="Fri"?"Friday":"Saturday"),e.createElement("p",{style:{margin:"0 0 4px 0",fontSize:"16px",fontWeight:"500",color:"#e5e7eb"}},j.timeSlot),j.location&&e.createElement("p",{style:{margin:0,color:"#9ca3af",fontSize:"14px"}},"📍 ",j.location)),e.createElement("div",{style:{padding:"6px 12px",borderRadius:"6px",backgroundColor:L(j.confidence),color:"white",fontSize:"12px",fontWeight:"600",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}},F(j.confidence)," (",j.confidence,"%)")))))),e.createElement("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid #374151",display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("button",{onClick:()=>I(!0),style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"6px",fontWeight:"500",cursor:"pointer",fontSize:"14px",transition:"all 0.3s ease"},onMouseEnter:j=>j.target.style.backgroundColor="#b91c1c",onMouseLeave:j=>j.target.style.backgroundColor="#dc2626"},"📅 View ",n==null?void 0:n.firstName,"'s Availability & Send Proposal"),e.createElement("button",{onClick:W,style:{padding:"10px 20px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"6px",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:j=>j.target.style.backgroundColor="#4b5563",onMouseLeave:j=>j.target.style.backgroundColor="#6b7280"},"Close")),E&&n&&e.createElement(ef,{onClose:()=>{I(!1)},player:n,onProposeMatch:(j,J)=>{P({player:n,day:j,slot:J,selectedDivision:c,phase:u}),N(!0),I(!1)},selectedDivision:c,phase:u}),M&&_&&e.createElement(cf,{player:_.player,day:_.day,slot:_.slot,selectedDivision:_.selectedDivision,phase:_.phase||u,onClose:()=>N(!1),senderName:m,senderEmail:g,onProposalComplete:()=>{N(!1),P(null),f&&f()}}))):null};function sz({isOpen:a,onClose:r,onSuccess:t,isMobile:n=!1,existingPlayer:o=null,isAdmin:i=!1}){const[c,u]=h.useState({firstName:"",lastName:"",email:"",phone:"",textNumber:"",preferredContacts:[],emergencyContactName:"",emergencyContactPhone:"",availability:{Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},locations:"",pin:"",paymentStatus:"pending",division:""}),[m,g]=h.useState(1),[f,y]=h.useState(!1),[v,S]=h.useState(""),[w,x]=h.useState(""),[k,E]=h.useState({}),[I,M]=h.useState([]),[N,_]=h.useState([]),[P,B]=h.useState(""),R=["10:00 AM - 12:00 PM","12:00 PM - 2:00 PM","2:00 PM - 4:00 PM","4:00 PM - 6:00 PM","6:00 PM - 8:00 PM","8:00 PM - 10:00 PM","10:00 PM - 12:00 AM","Other (specify)"],W=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],L=[{value:"email",label:"Email"},{value:"phone",label:"Phone Call"},{value:"text",label:"Text Message"}],F=async()=>{let G=0;const se=100;for(;G<se;){const pe=Math.floor(1e3+Math.random()*9e3).toString();try{const Se=await fetch(`${de}/api/users/check-pin/${pe}`);if(Se.ok&&!(await Se.json()).exists)return pe}catch(Se){return console.error("Error checking PIN uniqueness:",Se),pe}G++}return Math.floor(1e3+Math.random()*9e3).toString()+Date.now().toString().slice(-1)};h.useEffect(()=>{j()},[]),h.useEffect(()=>{if(o&&(u({firstName:o.firstName||"",lastName:o.lastName||"",email:o.email||"",phone:o.phone||"",textNumber:o.textNumber||"",preferredContacts:o.preferredContacts||[],emergencyContactName:o.emergencyContactName||"",emergencyContactPhone:o.emergencyContactPhone||"",availability:o.availability||{Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},locations:o.locations||"",pin:o.pin||"",confirmPin:o.pin||"",division:o.division||""}),o.locations)){const G=o.locations.split(`
`).map(Se=>Se.trim()).filter(Se=>Se),se=[],pe=[];G.forEach(Se=>{I.some(be=>be.name===Se)?se.push(Se):pe.push(Se)}),_(se),B(pe.join(`
`))}},[o,I]);const j=async()=>{try{const G=await fetch(`${de}/api/locations`);if(G.ok){const se=await G.json();M(se.locations||[])}}catch(G){console.error("Failed to load locations:",G)}},J=(G,se)=>{u(pe=>({...pe,[G]:se})),S("")},Y=(G,se,pe)=>{u(Se=>({...Se,availability:{...Se.availability,[G]:pe?[...Se.availability[G],se]:Se.availability[G].filter(at=>at!==se)}}))},D=(G,se,pe)=>{u(Se=>{const at=Se.availability[G];if(at.includes("Other (specify)")&&se&&pe){const Je=`${se} - ${pe}`,nt=at.map(Xe=>Xe==="Other (specify)"?Je:Xe);return{...Se,availability:{...Se.availability,[G]:nt}}}return Se})},A=(G,se)=>{u(pe=>({...pe,preferredContacts:se?[...pe.preferredContacts,G]:pe.preferredContacts.filter(Se=>Se!==G)}))},U=(G,se)=>{_(pe=>se?[...pe,G]:pe.filter(Se=>Se!==G))},K=G=>{B(G)},X=()=>{const G=[...N];if(P.trim()){const se=P.split(`
`).map(pe=>pe.trim()).filter(pe=>pe.length>0);G.push(...se)}return G.join(`
`)},O=G=>{if(i)return null;switch(G){case 1:return c.firstName.trim()?c.lastName.trim()?c.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email)?c.phone.trim()?null:"Phone number is required":"Valid email is required":"Email is required":"Last name is required":"First name is required";case 2:return Object.values(c.availability).some(Se=>Se.length>0)?null:"Please select at least one time slot";case 3:return X().trim()?null:"At least one location is required";case 4:return c.preferredContacts.length===0?"Please select at least one contact preference":null;case 5:return null;default:return null}},Q=()=>{const G=O(m);if(G){S(G);return}S(""),m<5?g(m+1):T()},ne=()=>{S(""),m>1&&g(m-1)},T=async()=>{var se;const G=O(m);if(G){S(G);return}y(!0),S("");try{const pe=await F(),at={...i?{firstName:c.firstName.trim()||"Test",lastName:c.lastName.trim()||"Player",email:c.email.trim()||`test${Date.now()}@example.com`,phone:c.phone.trim()||"555-1234",textNumber:c.textNumber||"",emergencyContactName:c.emergencyContactName||"",emergencyContactPhone:c.emergencyContactPhone||"",preferredContacts:c.preferredContacts.length>0?c.preferredContacts:["email"],availability:c.availability,locations:X()||"Test Location",pin:pe,paymentStatus:"pending",division:"",notes:c.notes||"Created by admin for testing"}:{...c,pin:pe,paymentStatus:"pending",division:""},confirmPin:void 0},be=o?`${de}/api/users/${o.id}/profile`:`${de}/api/users/register`,nt=await fetch(be,{method:o?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(at)});if(!nt.ok){const ct=await nt.json();throw new Error(ct.message||"Registration failed")}const Xe=await nt.json();if(!o&&!i)try{const ct=await fetch(`${de}/api/payment-config/enabled-methods`);let Ot={enabledMethods:[],registrationFee:30,additionalInstructions:"",contactInfo:{}};ct.ok&&(Ot=await ct.json()),await sI({to_email:c.email,to_name:`${c.firstName} ${c.lastName}`,registrationId:((se=Xe.user)==null?void 0:se.id)||Xe.id||`REG-${Date.now()}`,registrationDate:new Date().toLocaleDateString(),registrationFee:Ot.registrationFee||30,paymentMethods:Ot.enabledMethods||[],additionalInstructions:Ot.additionalInstructions||"",contactInfo:Ot.contactInfo||{}}),console.log("Payment instructions email sent successfully")}catch(ct){console.error("Failed to send payment instructions email:",ct)}x(o?"Profile updated successfully!":i?"Test player created successfully!":"Registration submitted successfully! Payment instructions have been sent to your email."),setTimeout(()=>{t&&t(Xe),r()},1500)}catch(pe){S(pe.message||"An error occurred during registration")}finally{y(!1)}},re=()=>{switch(m){case 1:return e.createElement("div",{style:{padding:"10px"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"20px",textAlign:"center",fontSize:"20px"}},"Personal Information"),e.createElement("div",{style:{display:"grid",gap:"15px"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"1fr 1fr",gap:"15px"}},e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold",fontSize:"16px"}},"First Name *"),e.createElement("input",{type:"text",value:c.firstName,onChange:G=>J("firstName",G.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"18px"},placeholder:"Enter first name"})),e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold",fontSize:"16px"}},"Last Name *"),e.createElement("input",{type:"text",value:c.lastName,onChange:G=>J("lastName",G.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"18px"},placeholder:"Enter last name"}))),e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold",fontSize:"16px"}},"Email Address *"),e.createElement("input",{type:"email",value:c.email,onChange:G=>J("email",G.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"18px"},placeholder:"Enter email address"})),e.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"1fr 1fr",gap:"15px"}},e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold",fontSize:"16px"}},"Phone Number *"),e.createElement("input",{type:"tel",value:c.phone,onChange:G=>J("phone",G.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"18px"},placeholder:"Enter phone number"})),e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold",fontSize:"16px"}},"Text Number (if different)"),e.createElement("input",{type:"tel",value:c.textNumber,onChange:G=>J("textNumber",G.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"18px"},placeholder:"Optional text number"}))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"1fr 1fr",gap:"15px"}},e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Emergency Contact Name"),e.createElement("input",{type:"text",value:c.emergencyContactName,onChange:G=>J("emergencyContactName",G.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"16px"},placeholder:"Emergency contact name"})),e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Emergency Contact Phone"),e.createElement("input",{type:"tel",value:c.emergencyContactPhone,onChange:G=>J("emergencyContactPhone",G.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"16px"},placeholder:"Emergency contact phone"})))));case 2:return e.createElement("div",{style:{padding:"10px"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"15px",textAlign:"center",fontSize:"18px"}},"Availability Schedule"),e.createElement("p",{style:{color:"#ccc",textAlign:"center",marginBottom:"15px",fontSize:"14px"}},"Select the time slots when you're available to play matches"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"repeat(2, 1fr)",gap:"10px",maxHeight:"50vh",overflowY:"auto"}},W.map(G=>e.createElement("div",{key:G,style:{background:"rgba(255,255,255,0.05)",padding:"8px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}},e.createElement("h4",{style:{color:"#e53e3e",marginBottom:"6px",textAlign:"center",fontSize:"16px",fontWeight:"bold"}},G==="Mon"?"Monday":G==="Tue"?"Tuesday":G==="Wed"?"Wednesday":G==="Thu"?"Thursday":G==="Fri"?"Friday":G==="Sat"?"Saturday":"Sunday"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"repeat(2, 1fr)",gap:"6px",justifyContent:"center",alignItems:"center",padding:"0 6px"}},R.map(se=>{var pe,Se,at,be;return e.createElement("div",{key:se},e.createElement("label",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"4px 8px",borderRadius:"6px",background:c.availability[G].includes(se)?"rgba(229, 62, 62, 0.2)":"rgba(255,255,255,0.05)",border:c.availability[G].includes(se)?"1px solid #e53e3e":"1px solid rgba(255,255,255,0.1)",cursor:"pointer",transition:"all 0.2s ease",fontSize:"12px",width:"100%",minWidth:"110px",margin:"0 auto",boxShadow:c.availability[G].includes(se)?"0 2px 4px rgba(229, 62, 62, 0.3)":"0 1px 2px rgba(0,0,0,0.1)"}},e.createElement("input",{type:"checkbox",checked:c.availability[G].includes(se),onChange:Je=>Y(G,se,Je.target.checked),style:{marginRight:"4px",transform:"scale(1)"}}),e.createElement("span",{style:{color:"#fff",fontSize:"12px"}},se)),se==="Other (specify)"&&c.availability[G].includes(se)&&e.createElement("div",{style:{marginTop:"6px",padding:"8px",background:"rgba(229, 62, 62, 0.1)",borderRadius:"4px",border:"1px solid rgba(229, 62, 62, 0.3)"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"6px",alignItems:"center",marginBottom:"4px"}},e.createElement("select",{value:((pe=k[G])==null?void 0:pe.start)||"",onChange:Je=>{var Xe;const nt=Je.target.value;E(ct=>({...ct,[G]:{...ct[G],start:nt}})),D(G,nt,(Xe=k[G])==null?void 0:Xe.end)},style:{padding:"4px 6px",borderRadius:"3px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(0,0,0,0.3)",color:"#fff",fontSize:"14px",textAlign:"center"}},e.createElement("option",{value:""},"Start"),e.createElement("option",{value:"6:00 AM"},"6:00 AM"),e.createElement("option",{value:"7:00 AM"},"7:00 AM"),e.createElement("option",{value:"8:00 AM"},"8:00 AM"),e.createElement("option",{value:"9:00 AM"},"9:00 AM"),e.createElement("option",{value:"10:00 AM"},"10:00 AM"),e.createElement("option",{value:"11:00 AM"},"11:00 AM"),e.createElement("option",{value:"12:00 PM"},"12:00 PM"),e.createElement("option",{value:"1:00 PM"},"1:00 PM"),e.createElement("option",{value:"2:00 PM"},"2:00 PM"),e.createElement("option",{value:"3:00 PM"},"3:00 PM"),e.createElement("option",{value:"4:00 PM"},"4:00 PM"),e.createElement("option",{value:"5:00 PM"},"5:00 PM"),e.createElement("option",{value:"6:00 PM"},"6:00 PM"),e.createElement("option",{value:"7:00 PM"},"7:00 PM"),e.createElement("option",{value:"8:00 PM"},"8:00 PM"),e.createElement("option",{value:"9:00 PM"},"9:00 PM"),e.createElement("option",{value:"10:00 PM"},"10:00 PM"),e.createElement("option",{value:"11:00 PM"},"11:00 PM"),e.createElement("option",{value:"12:00 AM"},"12:00 AM")),e.createElement("span",{style:{color:"#fff",fontSize:"11px"}},"to"),e.createElement("select",{value:((Se=k[G])==null?void 0:Se.end)||"",onChange:Je=>{var Xe;const nt=Je.target.value;E(ct=>({...ct,[G]:{...ct[G],end:nt}})),D(G,(Xe=k[G])==null?void 0:Xe.start,nt)},style:{padding:"4px 6px",borderRadius:"3px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(0,0,0,0.3)",color:"#fff",fontSize:"14px",textAlign:"center"}},e.createElement("option",{value:""},"End"),e.createElement("option",{value:"6:00 AM"},"6:00 AM"),e.createElement("option",{value:"7:00 AM"},"7:00 AM"),e.createElement("option",{value:"8:00 AM"},"8:00 AM"),e.createElement("option",{value:"9:00 AM"},"9:00 AM"),e.createElement("option",{value:"10:00 AM"},"10:00 AM"),e.createElement("option",{value:"11:00 AM"},"11:00 AM"),e.createElement("option",{value:"12:00 PM"},"12:00 PM"),e.createElement("option",{value:"1:00 PM"},"1:00 PM"),e.createElement("option",{value:"2:00 PM"},"2:00 PM"),e.createElement("option",{value:"3:00 PM"},"3:00 PM"),e.createElement("option",{value:"4:00 PM"},"4:00 PM"),e.createElement("option",{value:"5:00 PM"},"5:00 PM"),e.createElement("option",{value:"6:00 PM"},"6:00 PM"),e.createElement("option",{value:"7:00 PM"},"7:00 PM"),e.createElement("option",{value:"8:00 PM"},"8:00 PM"),e.createElement("option",{value:"9:00 PM"},"9:00 PM"),e.createElement("option",{value:"10:00 PM"},"10:00 PM"),e.createElement("option",{value:"11:00 PM"},"11:00 PM"),e.createElement("option",{value:"12:00 AM"},"12:00 AM"))),((at=k[G])==null?void 0:at.start)&&((be=k[G])==null?void 0:be.end)&&e.createElement("div",{style:{fontSize:"10px",color:"#4CAF50",textAlign:"center",fontWeight:"bold"}},"✓ Custom time set: ",k[G].start," - ",k[G].end)))}))))));case 3:return e.createElement("div",{style:{padding:"10px"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"15px",textAlign:"center"}},"Playing Locations"),e.createElement("p",{style:{color:"#ccc",textAlign:"center",marginBottom:"15px",fontSize:"13px"}},"Select from predefined locations and/or add your own custom locations"),I.length>0&&e.createElement("div",{style:{marginBottom:"15px"}},e.createElement("label",{style:{display:"block",marginBottom:"10px",color:"#fff",fontWeight:"bold",fontSize:"16px",textAlign:"center",width:"100%"}},"Select from Available Locations:"),e.createElement("div",{style:{display:"grid",gap:"3px",maxHeight:"180px",overflowY:"auto",padding:"6px",background:"rgba(0,0,0,0.3)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)"}},I.map(G=>e.createElement("label",{key:G._id,style:{display:"flex",alignItems:"center",padding:"4px 6px",borderRadius:"4px",background:N.includes(G.name)?"rgba(76, 175, 80, 0.2)":"rgba(255,255,255,0.05)",border:N.includes(G.name)?"1px solid #4CAF50":"1px solid rgba(255,255,255,0.1)",cursor:"pointer",transition:"all 0.2s ease"}},e.createElement("input",{type:"checkbox",checked:N.includes(G.name),onChange:se=>U(G.name,se.target.checked),style:{marginRight:"6px",transform:"scale(1)"}}),e.createElement("div",{style:{flex:1,textAlign:"center"}},e.createElement("div",{style:{color:"#fff",fontWeight:"bold",fontSize:"15px",textAlign:"center"}},G.name),G.address&&e.createElement("div",{style:{color:"#ccc",fontSize:"13px",marginTop:"1px",textAlign:"center"}},"📍 ",G.address),G.notes&&e.createElement("div",{style:{color:"#999",fontSize:"12px",marginTop:"1px",textAlign:"center"}},"📝 ",G.notes)))))),e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"10px",color:"#fff",fontWeight:"bold",fontSize:"16px",textAlign:"center"}},"Add Custom Locations (Optional):"),e.createElement("textarea",{value:P,onChange:G=>K(G.target.value),style:{width:"100%",minHeight:"60px",padding:"8px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"16px",resize:"vertical"},placeholder:`Enter additional locations, one per line:
My Home Table
Friend's House
Local Bar`})),(N.length>0||P.trim())&&e.createElement("div",{style:{marginTop:"10px",padding:"10px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"6px",border:"1px solid rgba(76, 175, 80, 0.3)"}},e.createElement("h4",{style:{color:"#4CAF50",margin:"0 0 10px 0",fontSize:"14px",fontWeight:"bold"}},"📍 Your Selected Locations:"),e.createElement("div",{style:{color:"#ccc",fontSize:"13px"}},X().split(`
`).map((G,se)=>e.createElement("div",{key:se,style:{marginBottom:"2px"}},"• ",G)))),e.createElement("div",{style:{marginTop:"10px",padding:"8px",background:"rgba(229, 62, 62, 0.1)",borderRadius:"6px"}},e.createElement("p",{style:{color:"#ccc",fontSize:"14px",margin:0}},e.createElement("strong",null,"Tip:")," Select from the predefined locations above, or add your own custom locations. These will be used to help match you with other players in your area.")));case 4:return e.createElement("div",{style:{padding:"10px"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"20px",textAlign:"center"}},"Contact Preferences"),e.createElement("p",{style:{color:"#ccc",textAlign:"center",marginBottom:"20px",fontSize:"14px"}},"How would you prefer other players to contact you for match scheduling?"),e.createElement("div",{style:{display:"grid",gap:"15px"}},L.map(G=>e.createElement("label",{key:G.value,style:{display:"flex",alignItems:"center",padding:"15px",borderRadius:"8px",background:c.preferredContacts.includes(G.value)?"rgba(229, 62, 62, 0.2)":"rgba(255,255,255,0.05)",border:c.preferredContacts.includes(G.value)?"1px solid #e53e3e":"1px solid rgba(255,255,255,0.1)",cursor:"pointer",transition:"all 0.2s ease"}},e.createElement("input",{type:"checkbox",checked:c.preferredContacts.includes(G.value),onChange:se=>A(G.value,se.target.checked),style:{marginRight:"12px",transform:"scale(1.2)"}}),e.createElement("span",{style:{color:"#fff",fontSize:"16px",fontWeight:"bold"}},G.label)))),e.createElement("div",{style:{marginTop:"20px",padding:"15px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"8px",border:"1px solid rgba(76, 175, 80, 0.3)"}},e.createElement("p",{style:{color:"#ccc",fontSize:"14px",margin:0}},e.createElement("strong",null,"Note:")," Your contact information will only be shared with players who are scheduling matches with you. You can change these preferences later in your profile settings.")));case 5:return e.createElement("div",{style:{padding:"10px"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"20px",textAlign:"center"}},"Registration & Payment"),e.createElement("div",{style:{display:"grid",gap:"20px"}},e.createElement("div",{style:{padding:"15px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"8px",border:"1px solid rgba(76, 175, 80, 0.3)",textAlign:"center"}},e.createElement("h4",{style:{color:"#4CAF50",margin:"0 0 10px 0",fontSize:"16px",fontWeight:"bold"}},"🔐 Your PIN will be auto-generated"),e.createElement("p",{style:{color:"#ccc",fontSize:"14px",margin:0}},"A unique 4-digit PIN will be automatically generated for you. You'll receive it after payment is confirmed.")),e.createElement("div",{style:{padding:"15px",background:"rgba(255, 193, 7, 0.1)",borderRadius:"8px",border:"1px solid rgba(255, 193, 7, 0.3)",textAlign:"center"}},e.createElement("h4",{style:{color:"#ffc107",margin:"0 0 10px 0",fontSize:"16px",fontWeight:"bold"}},"🏆 Division Assignment"),e.createElement("p",{style:{color:"#ccc",fontSize:"14px",margin:0}},"Your division will be assigned by league administrators based on your skill level and availability. You'll be notified once assigned.")),e.createElement("div",{style:{padding:"15px",background:"rgba(229, 62, 62, 0.1)",borderRadius:"8px",border:"1px solid rgba(229, 62, 62, 0.3)",textAlign:"center"}},e.createElement("h4",{style:{color:"#e53e3e",margin:"0 0 10px 0",fontSize:"16px",fontWeight:"bold"}},"💳 Payment Required"),e.createElement("p",{style:{color:"#ccc",fontSize:"14px",margin:0}},"Registration fee: ",e.createElement("strong",null,"$30")," must be paid before you receive your PIN and can access the league system. Payment instructions will be sent to your email immediately after registration."))),e.createElement("div",{style:{marginTop:"20px",padding:"15px",background:"rgba(0, 123, 255, 0.1)",borderRadius:"8px",border:"1px solid rgba(0, 123, 255, 0.3)"}},e.createElement("p",{style:{color:"#ccc",fontSize:"14px",margin:0}},e.createElement("strong",null,"Next Steps:")," After registration, you'll receive payment instructions. Once payment is confirmed, you'll get your PIN and full access to the league system.")));default:return null}};return a?e.createElement(e.Fragment,null,e.createElement(Bt,{open:a,onClose:r,title:o?"Edit Player Profile":i?"Admin: Test Player Registration":"Player Registration",maxWidth:n?"95vw":"800px",className:"player-registration-modal"},e.createElement("div",{style:{background:"rgba(255,255,255,0.1)",height:"4px",position:"relative",marginBottom:"15px"}},e.createElement("div",{style:{background:"linear-gradient(90deg, #e53e3e, #ff6b6b)",height:"100%",width:`${m/5*100}%`,transition:"width 0.3s ease"}})),e.createElement("div",{style:{padding:"10px 15px",background:"rgba(0,0,0,0.8)",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:"15px",borderRadius:"6px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("span",{style:{color:"#fff",fontSize:"14px"}},"Step ",m," of 5"),e.createElement("span",{style:{color:"#e53e3e",fontSize:"14px",fontWeight:"bold"}},m===1&&"Personal Info",m===2&&"Availability",m===3&&"Locations",m===4&&"Contact Preferences",m===5&&"Registration & Payment")),i&&e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.2)",border:"1px solid rgba(255, 193, 7, 0.5)",borderRadius:"4px",padding:"6px 10px",marginTop:"8px",textAlign:"center"}},e.createElement("span",{style:{color:"#ffc107",fontSize:"12px",fontWeight:"bold"}},"🔧 ADMIN MODE: Validation bypassed for testing"))),e.createElement("div",{style:{marginBottom:"25px",maxHeight:"60vh",overflowY:"auto",paddingRight:"10px"}},re()),v&&e.createElement("div",{style:{padding:"10px 15px",background:"rgba(229, 62, 62, 0.2)",border:"1px solid #e53e3e",color:"#ff6b6b",textAlign:"center",fontSize:"14px",borderRadius:"6px",marginBottom:"15px"}},v),w&&e.createElement("div",{style:{padding:"10px 15px",background:"rgba(76, 175, 80, 0.2)",border:"1px solid #4CAF50",color:"#4CAF50",textAlign:"center",fontSize:"14px",borderRadius:"6px",marginBottom:"15px"}},w),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",gap:"10px"}},e.createElement("button",{onClick:m===1?r:ne,style:{padding:"12px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#fff",cursor:"pointer",fontSize:"16px",transition:"all 0.2s ease",flex:1},onMouseEnter:G=>{G.target.style.background="rgba(255,255,255,0.1)"},onMouseLeave:G=>{G.target.style.background="transparent"}},m===1?"Cancel":"Previous"),e.createElement("button",{onClick:Q,disabled:f,style:{padding:"12px 20px",borderRadius:"6px",border:"none",background:f?"#666":"#e53e3e",color:"#fff",cursor:f?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",transition:"all 0.2s ease",flex:1},onMouseEnter:G=>{f||(G.target.style.background="#ff6b6b")},onMouseLeave:G=>{f||(G.target.style.background="#e53e3e")}},f?"Processing...":m===5?o?"Update Profile":"Complete Registration":"Next"))),e.createElement("style",{jsx:!0},`
               .player-registration-modal {
          max-height: 95vh !important;
          height: auto !important;
        }
        
        .player-registration-modal .draggable-modal {
          max-height: 95vh !important;
          height: auto !important;
        }
        
        .player-registration-modal .modal-content {
          max-height: 70vh !important;
          overflow-y: auto !important;
        }
       
       /* Custom scrollbar */
       .player-registration-modal .modal-content::-webkit-scrollbar {
         width: 6px;
       }
       
       .player-registration-modal .modal-content::-webkit-scrollbar-thumb {
         background: #e53e3e;
         border-radius: 3px;
       }
       
               .player-registration-modal .modal-content::-webkit-scrollbar-track {
          background: rgba(255,255,255,0.1);
          border-radius: 3px;
        }
        
                 /* Custom dropdown styling for dark theme */
         .player-registration-modal select option {
           background: #222 !important;
           color: #fff !important;
           border: none !important;
           font-size: 14px !important;
           padding: 4px 8px !important;
         }
        
        .player-registration-modal select:focus {
          outline: none !important;
          border-color: #e53e3e !important;
          box-shadow: 0 0 0 2px rgba(229, 62, 62, 0.2) !important;
        }
     `)):null}var Fw={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Z2=e.createContext&&e.createContext(Fw),iz=["attr","size","title"];function cz(a,r){if(a==null)return{};var t=dz(a,r),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(o=0;o<i.length;o++)n=i[o],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(a,n)&&(t[n]=a[n])}return t}function dz(a,r){if(a==null)return{};var t={};for(var n in a)if(Object.prototype.hasOwnProperty.call(a,n)){if(r.indexOf(n)>=0)continue;t[n]=a[n]}return t}function Bp(){return Bp=Object.assign?Object.assign.bind():function(a){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},Bp.apply(this,arguments)}function V2(a,r){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),t.push.apply(t,n)}return t}function zp(a){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?V2(Object(t),!0).forEach(function(n){uz(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):V2(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function uz(a,r,t){return r=mz(r),r in a?Object.defineProperty(a,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[r]=t,a}function mz(a){var r=pz(a,"string");return typeof r=="symbol"?r:r+""}function pz(a,r){if(typeof a!="object"||!a)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var n=t.call(a,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}function Ww(a){return a&&a.map((r,t)=>e.createElement(r.tag,zp({key:t},r.attr),Ww(r.child)))}function It(a){return r=>e.createElement(fz,Bp({attr:zp({},a.attr)},r),Ww(a.child))}function fz(a){var r=t=>{var{attr:n,size:o,title:i}=a,c=cz(a,iz),u=o||t.size||"1em",m;return t.className&&(m=t.className),a.className&&(m=(m?m+" ":"")+a.className),e.createElement("svg",Bp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,c,{className:m,style:zp(zp({color:a.color||t.color},t.style),a.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&e.createElement("title",null,i),a.children)};return Z2!==void 0?e.createElement(Z2.Consumer,null,t=>r(t)):r(Fw)}function gz(a){return It({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z"},child:[]}]})(a)}function Op(a){return It({attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(a)}function hz(a){return It({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M111.4 295.9c-3.5 19.2-17.4 108.7-21.5 134-.3 1.8-1 2.5-3 2.5H12.3c-7.6 0-13.1-6.6-12.1-13.9L58.8 46.6c1.5-9.6 10.1-16.9 20-16.9 152.3 0 165.1-3.7 204 11.4 60.1 23.3 65.6 79.5 44 140.3-21.5 62.6-72.5 89.5-140.1 90.3-43.4.7-69.5-7-75.3 24.2zM357.1 152c-1.8-1.3-2.5-1.8-3 1.3-2 11.4-5.1 22.5-8.8 33.6-39.9 113.8-150.5 103.9-204.5 103.9-6.1 0-10.1 3.3-10.9 9.4-22.6 140.4-27.1 169.7-27.1 169.7-1 7.1 3.5 12.9 10.6 12.9h63.5c8.6 0 15.7-6.3 17.4-14.9.7-5.4-1.1 6.1 14.4-91.3 4.6-22 14.3-19.7 29.3-19.7 71 0 126.4-28.8 142.9-112.3 6.5-34.8 4.6-71.4-23.8-92.6z"},child:[]}]})(a)}function Qh(a){return It({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(a)}function ks(a){return It({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(a)}function Ls(a){return It({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(a)}function B0(a){return It({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(a)}function Qr(a){return It({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(a)}function Uw(a){return It({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(a)}function yz(a){return It({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(a)}function $w(a){return It({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(a)}function bz(a){return It({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(a)}function vz(a){return It({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(a)}function jw(a){return It({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(a)}function z0(a){return It({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(a)}function Hw(a){return It({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(a)}function Q2(a){return It({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(a)}function Ez(a){return It({attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"},child:[]}]})(a)}function xz(a){return It({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(a)}function Ri(a){return It({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(a)}function df(a){return It({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(a)}function Fp(a){return It({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(a)}function J2(a){return It({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"},child:[]}]})(a)}function wz(a){return It({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(a)}function Ti(a){return It({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(a)}function Sz(a){return It({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"},child:[]}]})(a)}function Cz(a){return It({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(a)}function Ry(a){return It({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(a)}function Nz(a){return It({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 176.001C512 273.203 433.202 352 336 352c-11.22 0-22.19-1.062-32.827-3.069l-24.012 27.014A23.999 23.999 0 0 1 261.223 384H224v40c0 13.255-10.745 24-24 24h-40v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-78.059c0-6.365 2.529-12.47 7.029-16.971l161.802-161.802C163.108 213.814 160 195.271 160 176 160 78.798 238.797.001 335.999 0 433.488-.001 512 78.511 512 176.001zM336 128c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z"},child:[]}]})(a)}function _z(a){return It({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"},child:[]}]})(a)}function Pi(a){return It({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(a)}function kz(a){return It({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M272 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h224c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(a)}function Iz(a){return It({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(a)}function Mz(a){return It({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(a)}function fr(a){return It({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(a)}function Az(a){return It({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"},child:[]}]})(a)}function Cs(a){return It({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(a)}function Yw(a){return It({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(a)}function Dz(a){return It({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M480 160H32c-17.673 0-32-14.327-32-32V64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24z"},child:[]}]})(a)}function X2(a){return It({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(a)}function Zr(a){return It({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(a)}function O0(a){return It({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"},child:[]}]})(a)}function ld(a){return It({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"},child:[]}]})(a)}function Rz(a){return It({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(a)}function Bs(a){return It({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(a)}function Zi(a){return It({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 35.7 22.5 72.4 61.9 100.7 31.5 22.7 69.8 37.1 110 41.7C203.3 338.5 240 360 240 360v72h-48c-35.3 0-64 20.7-64 56v12c0 6.6 5.4 12 12 12h296c6.6 0 12-5.4 12-12v-12c0-35.3-28.7-56-64-56h-48v-72s36.7-21.5 68.1-73.6c40.3-4.6 78.6-19 110-41.7 39.3-28.3 61.9-65 61.9-100.7V88c0-13.3-10.7-24-24-24zM99.3 192.8C74.9 175.2 64 155.6 64 144v-16h64.2c1 32.6 5.8 61.2 12.8 86.2-15.1-5.2-29.2-12.4-41.7-21.4zM512 144c0 16.1-17.7 36.1-35.3 48.8-12.5 9-26.7 16.2-41.8 21.4 7-25 11.8-53.6 12.8-86.2H512v16z"},child:[]}]})(a)}function F0(a){return It({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"},child:[]}]})(a)}function Tz(a){return It({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208H432c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h192c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(a)}function Li(a){return It({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(a)}function qw(a){return It({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(a)}function ml(a){return It({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(a)}function Gw({activeTab:a,onTabChange:r,onQuickAction:t,pendingCount:n=0,sentCount:o=0,matchesCount:i=0}){const c=[{id:"overview",label:"Home",icon:e.createElement(Cz,null),badge:null},{id:"matches",label:"Matches",icon:e.createElement(Ls,null),badge:i>0?i:null},{id:"proposals",label:"Proposals",icon:e.createElement(ml,null),badge:n>0?n:null},{id:"standings",label:"Standings",icon:e.createElement(Zi,null),badge:null},{id:"chat",label:"Chat",icon:e.createElement(Hw,null),badge:null}];return e.createElement("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"rgba(24, 24, 27, 0.95)",backdropFilter:"blur(20px)",borderTop:"1px solid rgba(255, 255, 255, 0.1)",padding:"8px 0",zIndex:1e3,display:"flex",justifyContent:"space-around",alignItems:"center"}},c.map(u=>e.createElement("button",{key:u.id,onClick:()=>r(u.id),style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"transparent",border:"none",color:a===u.id?"#e53e3e":"#888",padding:"8px 4px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",minHeight:"60px",minWidth:"60px",position:"relative"},onTouchStart:m=>{m.target.style.transform="scale(0.95)"},onTouchEnd:m=>{m.target.style.transform="scale(1)"}},e.createElement("div",{style:{fontSize:"1.2rem",marginBottom:"2px",display:"flex",alignItems:"center",justifyContent:"center"}},u.icon),e.createElement("span",{style:{fontSize:"0.7rem",fontWeight:a===u.id?"600":"400",textAlign:"center"}},u.label),u.badge&&e.createElement("div",{style:{position:"absolute",top:"4px",right:"4px",background:"#e53e3e",color:"#fff",borderRadius:"50%",width:"18px",height:"18px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.6rem",fontWeight:"600",border:"2px solid rgba(24, 24, 27, 0.95)"}},u.badge>99?"99+":u.badge))),e.createElement("button",{onClick:t,style:{position:"absolute",top:"-20px",left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg, #e53e3e, #c53030)",color:"#fff",border:"none",borderRadius:"50%",width:"56px",height:"56px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",cursor:"pointer",boxShadow:"0 4px 16px rgba(229, 62, 62, 0.4)",transition:"all 0.2s ease",zIndex:1001},onTouchStart:u=>{u.target.style.transform="translateX(-50%) scale(0.95)"},onTouchEnd:u=>{u.target.style.transform="translateX(-50%) scale(1)"}},e.createElement(fr,null)))}function Nd({children:a,title:r,subtitle:t,onTap:n,onSwipeLeft:o,onSwipeRight:i,swipeThreshold:c=80,showSwipeActions:u=!0,className:m="",style:g={},...f}){const[y,v]=h.useState(!1),[S,w]=h.useState(0),[x,k]=h.useState(0),[E,I]=h.useState(null),M=h.useRef(null),N=R=>{w(R.touches[0].clientX),k(R.touches[0].clientX),v(!0),I(null)},_=R=>{if(!y)return;const W=R.touches[0].clientX;k(W);const L=W-S;Math.abs(L)>20&&I(L>0?"right":"left")},P=()=>{if(!y)return;const R=x-S;Math.abs(R)>c&&(R>0&&i?i():R<0&&o&&o()),v(!1),w(0),k(0),I(null)},B=()=>{!y&&n&&n()};return e.createElement("div",{ref:M,className:`mobile-optimized-card ${m}`,onTouchStart:N,onTouchMove:_,onTouchEnd:P,onClick:B,style:{position:"relative",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.04) 100%)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.15)",padding:"16px",marginBottom:"12px",cursor:n?"pointer":"default",transition:y?"none":"all 0.3s ease",transform:y?`translateX(${x-S}px)`:"translateX(0)",touchAction:"pan-y",userSelect:"none",WebkitTapHighlightColor:"transparent",...g},...f},u&&e.createElement(e.Fragment,null,e.createElement("div",{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",opacity:E==="right"?.8:0,transition:"opacity 0.2s ease",color:"#10b981",fontSize:"1.2rem"}},e.createElement(Ti,null)),e.createElement("div",{style:{position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)",opacity:E==="left"?.8:0,transition:"opacity 0.2s ease",color:"#ef4444",fontSize:"1.2rem"}},e.createElement(Bs,null))),(r||t)&&e.createElement("div",{style:{marginBottom:"12px"}},r&&e.createElement("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600",color:"#fff",lineHeight:"1.3"}},r),t&&e.createElement("p",{style:{margin:"4px 0 0 0",fontSize:"0.85rem",color:"#ccc",opacity:.8,lineHeight:"1.4"}},t)),e.createElement("div",{style:{position:"relative"}},a),n&&e.createElement("div",{style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",color:"#888",fontSize:"0.8rem",opacity:.6}},e.createElement($w,null)),e.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"12px",background:E==="right"?"linear-gradient(90deg, rgba(16, 185, 129, 0.1) 0%, transparent 50%)":E==="left"?"linear-gradient(90deg, transparent 50%, rgba(239, 68, 68, 0.1) 100%)":"transparent",opacity:Math.abs(x-S)/c,transition:"opacity 0.2s ease",pointerEvents:"none"}}))}function Jh({children:a,variant:r="primary",size:t="medium",fullWidth:n=!1,icon:o,onClick:i,disabled:c=!1,loading:u=!1,className:m="",style:g={},...f}){const y=()=>{switch(r){case"primary":return{background:"linear-gradient(135deg, #e53e3e, #c53030)",color:"#fff",border:"none"};case"secondary":return{background:"rgba(255, 255, 255, 0.1)",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.2)"};case"danger":return{background:"linear-gradient(135deg, #ef4444, #dc2626)",color:"#fff",border:"none"};default:return{background:"linear-gradient(135deg, #e53e3e, #c53030)",color:"#fff",border:"none"}}},v=()=>{switch(t){case"small":return{padding:"8px 12px",fontSize:"0.8rem",minHeight:"36px"};case"medium":return{padding:"12px 16px",fontSize:"0.9rem",minHeight:"44px"};case"large":return{padding:"16px 20px",fontSize:"1rem",minHeight:"52px"};default:return{padding:"12px 16px",fontSize:"0.9rem",minHeight:"44px"}}};return e.createElement("button",{onClick:i,disabled:c||u,className:`mobile-action-button ${m}`,style:{...y(),...v(),width:n?"100%":"auto",borderRadius:"8px",cursor:c||u?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",opacity:c||u?.6:1,...g},onTouchStart:S=>{!c&&!u&&(S.target.style.transform="scale(0.98)")},onTouchEnd:S=>{!c&&!u&&(S.target.style.transform="scale(1)")},...f},u?e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}},e.createElement("div",{style:{width:"16px",height:"16px",border:"2px solid transparent",borderTop:"2px solid currentColor",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Loading..."):e.createElement(e.Fragment,null,o&&e.createElement("span",null,o),a))}function Yr({title:a,subtitle:r,children:t,collapsible:n=!1,defaultCollapsed:o=!1,onToggle:i,className:c="",style:u={},...m}){const[g,f]=e.useState(o),y=()=>{n&&(f(!g),i&&i(!g))};return e.createElement("div",{className:`mobile-section ${c}`,style:{background:"rgba(255, 255, 255, 0.02)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.08)",padding:"16px",marginBottom:"16px",...u},...m},(a||r)&&e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:n&&!g?"12px":"0",cursor:n?"pointer":"default"},onClick:y},e.createElement("div",{style:{flex:1}},a&&e.createElement("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600",color:"#fff",lineHeight:"1.3"}},a),r&&e.createElement("p",{style:{margin:"4px 0 0 0",fontSize:"0.85rem",color:"#ccc",opacity:.8,lineHeight:"1.4"}},r)),n&&e.createElement("div",{style:{color:"#888",fontSize:"0.8rem",transition:"transform 0.2s ease",transform:g?"rotate(0deg)":"rotate(180deg)"}},e.createElement(bz,null))),e.createElement("div",{style:{display:n&&g?"none":"block",transition:"all 0.3s ease"}},t))}function Zw({children:a,columns:r=2,className:t="",style:n={}}){return e.createElement("div",{className:`mobile-stats-grid ${t}`,style:{display:"grid",gridTemplateColumns:`repeat(${r}, 1fr)`,gap:"12px",...n}},a)}function ki({title:a,value:r,subtitle:t,icon:n,color:o="#e53e3e",onClick:i,className:c="",style:u={},...m}){return e.createElement("div",{className:`mobile-stat-card ${c}`,onClick:i,style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",padding:"12px",textAlign:"center",cursor:i?"pointer":"default",transition:"all 0.2s ease",...u},onTouchStart:g=>{i&&(g.target.style.transform="scale(0.98)")},onTouchEnd:g=>{i&&(g.target.style.transform="scale(1)")},...m},n&&e.createElement("div",{style:{fontSize:"1.5rem",color:o,marginBottom:"8px",display:"flex",justifyContent:"center"}},n),e.createElement("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#fff",marginBottom:"4px",lineHeight:"1.2"}},r),e.createElement("div",{style:{fontSize:"0.8rem",color:"#ccc",fontWeight:"500",marginBottom:t?"2px":"0"}},a),t&&e.createElement("div",{style:{fontSize:"0.7rem",color:"#888",lineHeight:"1.3"}},t))}function sd({children:a,emptyMessage:r="No items to display",loading:t=!1,className:n="",style:o={},...i}){return e.createElement("div",{className:`mobile-list ${n}`,style:{display:"flex",flexDirection:"column",gap:"8px",...o},...i},t?e.createElement("div",{style:{textAlign:"center",padding:"20px",color:"#888",fontSize:"0.9rem"}},"Loading..."):a&&a.length>0?a:e.createElement("div",{style:{textAlign:"center",padding:"20px",color:"#888",fontSize:"0.9rem"}},r))}function K2({children:a,onTap:r,onSwipeLeft:t,onSwipeRight:n,swipeThreshold:o=80,className:i="",style:c={},...u}){const[m,g]=e.useState(!1),[f,y]=e.useState(0),[v,S]=e.useState(0),w=I=>{y(I.touches[0].clientX),S(I.touches[0].clientX),g(!0)},x=I=>{m&&S(I.touches[0].clientX)},k=()=>{if(!m)return;const I=v-f;Math.abs(I)>o&&(I>0&&n?n():I<0&&t&&t()),g(!1),y(0),S(0)},E=()=>{!m&&r&&r()};return e.createElement("div",{className:`mobile-list-item ${i}`,onClick:E,onTouchStart:w,onTouchMove:x,onTouchEnd:k,style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",padding:"12px",cursor:r?"pointer":"default",transition:m?"none":"all 0.2s ease",transform:m?`translateX(${v-f}px)`:"translateX(0)",touchAction:"pan-y",userSelect:"none",WebkitTapHighlightColor:"transparent",...c},...u},a)}function Ty(){const[a,r]=h.useState(!1),[t,n]=h.useState(!1),[o,i]=h.useState(!1),[c,u]=h.useState({width:0,height:0}),[m,g]=h.useState(!1),[f,y]=h.useState("portrait"),v=h.useCallback(()=>{if(typeof window>"u")return!1;const I=window.innerWidth,M=window.innerHeight;u({width:I,height:M});const N=I>M;i(N),y(N?"landscape":"portrait");const _=(()=>{if(I<=768)return!0;if(typeof navigator<"u"){const P=navigator.userAgent.toLowerCase();if(["android","webos","iphone","ipad","ipod","blackberry","iemobile","opera mini","mobile"].some(R=>P.includes(R)))return!0}return"ontouchstart"in window||navigator.maxTouchPoints>0?I<=1024:!1})();r(_),n(I>768&&I<=1024),g("ontouchstart"in window||navigator.maxTouchPoints>0)},[]),S={xs:480,sm:640,md:768,lg:1024,xl:1280,"2xl":1536},w=h.useCallback(()=>{const I=c.width;return I<S.xs?"xs":I<S.sm?"sm":I<S.md?"md":I<S.lg?"lg":I<S.xl?"xl":"2xl"},[c.width]),x={spacing:{xs:a?"4px":"8px",sm:a?"8px":"12px",md:a?"12px":"16px",lg:a?"16px":"24px",xl:a?"24px":"32px"},sizes:{buttonHeight:a?"44px":"36px",inputHeight:a?"44px":"36px",iconSize:a?"1.2rem":"1rem",fontSize:{xs:a?"0.7rem":"0.75rem",sm:a?"0.8rem":"0.875rem",md:a?"0.9rem":"1rem",lg:a?"1rem":"1.125rem",xl:a?"1.1rem":"1.25rem"}},animations:{duration:a?"0.2s":"0.3s",easing:"ease-out",scale:a?.98:.95},styles:{card:{padding:a?"12px":"16px",borderRadius:a?"8px":"12px",marginBottom:a?"8px":"12px"},button:{padding:a?"12px 16px":"10px 20px",fontSize:a?"0.9rem":"1rem",minHeight:a?"44px":"36px"},input:{padding:a?"12px":"10px",fontSize:a?"16px":"14px",minHeight:a?"44px":"36px"}}},k={threshold:80,velocity:.3,calculateSwipe:(I,M,N,_)=>{const P=N-I,B=_-M,R=Math.sqrt(P*P+B*B),W=R/300;return{deltaX:P,deltaY:B,distance:R,velocity:W,direction:Math.abs(P)>Math.abs(B)?P>0?"right":"left":B>0?"down":"up",isHorizontal:Math.abs(P)>Math.abs(B),isValid:R>50&&W>k.velocity}},createSwipeHandler:(I,M,N,_)=>{let P=0,B=0;return{onTouchStart:R=>{P=R.touches[0].clientX,B=R.touches[0].clientY},onTouchEnd:R=>{const W=R.changedTouches[0].clientX,L=R.changedTouches[0].clientY,F=k.calculateSwipe(P,B,W,L);if(F.isValid)switch(F.direction){case"left":I&&I(F);break;case"right":M&&M(F);break;case"up":N&&N(F);break;case"down":_&&_(F);break}}}}},E={threshold:80,createPullToRefreshHandler:I=>{let M=0,N=0,_=!1;return{onTouchStart:P=>{window.scrollY===0&&(M=P.touches[0].clientY,_=!0)},onTouchMove:P=>{_&&window.scrollY===0&&(N=P.touches[0].clientY,N-M>0&&P.preventDefault())},onTouchEnd:async()=>{_&&(N-M>E.threshold&&await I(),_=!1,M=0,N=0)}}}};return h.useEffect(()=>{v();const I=()=>{v()},M=()=>{setTimeout(v,100)};return window.addEventListener("resize",I),window.addEventListener("orientationchange",M),()=>{window.removeEventListener("resize",I),window.removeEventListener("orientationchange",M)}},[v]),{isMobile:a,isTablet:t,isLandscape:o,screenSize:c,touchCapable:m,orientation:f,breakpoints:S,getBreakpoint:w,mobileUtils:x,swipeUtils:k,pullToRefreshUtils:E,isSmallScreen:c.width<S.md,isMediumScreen:c.width>=S.md&&c.width<S.lg,isLargeScreen:c.width>=S.lg,isIOS:typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent),isAndroid:typeof navigator<"u"&&/Android/.test(navigator.userAgent),isSafari:typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),redetect:v}}function Pz({playerName:a,playerLastName:r,pendingProposals:t=[],sentProposals:n=[],matches:o=[],notes:i=[],standings:c=[],schedule:u=[],proposalsLoading:m=!1,matchesLoading:g=!1,notesLoading:f=!1,seasonLoading:y=!1,standingsLoading:v=!1,scheduleLoading:S=!1,onTabChange:w,onQuickAction:x,onViewMatch:k,onViewProposal:E,onViewStandings:I,onViewSchedule:M,onViewProfile:N,onViewSettings:_,setShowMatchProposalModal:P,setShowUserProfileModal:B,setShowSettingsModal:R,className:W="",style:L={},...F}){const[j,J]=h.useState("overview"),{pullToRefreshUtils:Y}=Ty(),D=T=>{J(T),w&&w(T)},A=()=>{x?x():P(!0)},U=Y.createPullToRefreshHandler(async()=>{window.location.reload()}),K=()=>e.createElement("div",{style:{paddingBottom:"80px"}},e.createElement(Yr,{title:`Hello, ${a} ${r}`,subtitle:"Your pool league dashboard"},e.createElement(Zw,{columns:2},e.createElement(ki,{title:"Pending",value:t.length,icon:e.createElement(ml,null),color:"#f59e0b",onClick:()=>D("proposals")}),e.createElement(ki,{title:"Matches",value:o.length,icon:e.createElement(Ls,null),color:"#10b981",onClick:()=>D("matches")}),e.createElement(ki,{title:"Position",value:c.length>0?`#${c.findIndex(T=>T.playerName===`${a} ${r}`)+1}`:"N/A",subtitle:"in standings",icon:e.createElement(Zi,null),color:"#e53e3e",onClick:()=>D("standings")}),e.createElement(ki,{title:"Next Match",value:u.length>0?"Scheduled":"None",subtitle:u.length>0?u[0].date:"No upcoming matches",icon:e.createElement(jw,null),color:"#8b5cf6",onClick:()=>D("schedule")}))),e.createElement(Yr,{title:"Quick Actions"},e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"12px"}},e.createElement(Jh,{variant:"primary",icon:e.createElement(fr,null),onClick:()=>P(!0),fullWidth:!0},"Create Match Proposal"),e.createElement(Jh,{variant:"secondary",icon:e.createElement(qw,null),onClick:()=>B(!0),fullWidth:!0},"View Profile"),e.createElement(Jh,{variant:"secondary",icon:e.createElement(z0,null),onClick:()=>R(!0),fullWidth:!0},"Settings"))),e.createElement(Yr,{title:"Recent Activity",collapsible:!0,defaultCollapsed:!1},e.createElement(sd,{emptyMessage:"No recent activity"},i.slice(0,3).map((T,re)=>e.createElement(K2,{key:re,onTap:()=>{}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"12px"}},e.createElement("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#e53e3e",flexShrink:0}}),e.createElement("div",{style:{flex:1}},e.createElement("div",{style:{fontSize:"0.9rem",color:"#fff",fontWeight:"500",marginBottom:"2px"}},T.title||"News Update"),e.createElement("div",{style:{fontSize:"0.8rem",color:"#ccc",lineHeight:"1.3"}},T.content||T.message)))))))),X=()=>e.createElement("div",{style:{paddingBottom:"80px"}},e.createElement(Yr,{title:"Your Matches",subtitle:`${o.length} total matches`},e.createElement(sd,{emptyMessage:"No matches found",loading:g},o.map((T,re)=>e.createElement(Nd,{key:T._id||re,title:`${T.playerName} vs ${T.opponent||"TBD"}`,subtitle:`${T.date} • ${T.location||"Location TBD"}`,onTap:()=>k&&k(T),onSwipeLeft:()=>{},onSwipeRight:()=>{}},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},e.createElement("div",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"600",background:T.status==="completed"?"#10b981":T.status==="pending"?"#f59e0b":"#6b7280",color:"#fff"}},T.status),T.location&&e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#ccc",fontSize:"0.8rem"}},e.createElement(Pi,null),T.location)),e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},e.createElement("div",{style:{color:"#ccc",fontSize:"0.8rem"}},T.time||"Time TBD")))))))),O=()=>e.createElement("div",{style:{paddingBottom:"80px"}},e.createElement(Yr,{title:"Match Proposals",subtitle:`${t.length} pending, ${n.length} sent`},e.createElement(Yr,{title:"Pending Proposals",subtitle:`${t.length} waiting for response`,collapsible:!0,defaultCollapsed:!1},e.createElement(sd,{emptyMessage:"No pending proposals",loading:m},t.map((T,re)=>e.createElement(Nd,{key:T._id||re,title:`Proposal to ${T.recipientName}`,subtitle:`${T.date} • ${T.location||"Location TBD"}`,onTap:()=>E&&E(T),onSwipeLeft:()=>{},onSwipeRight:()=>{}},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},e.createElement("div",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"600",background:"#f59e0b",color:"#fff"}},"Pending"),T.location&&e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#ccc",fontSize:"0.8rem"}},e.createElement(Pi,null),T.location)),e.createElement("div",{style:{color:"#ccc",fontSize:"0.8rem"}},T.time||"Time TBD")))))),e.createElement(Yr,{title:"Sent Proposals",subtitle:`${n.length} proposals sent`,collapsible:!0,defaultCollapsed:!0},e.createElement(sd,{emptyMessage:"No sent proposals",loading:m},n.map((T,re)=>e.createElement(Nd,{key:T._id||re,title:`Proposal to ${T.recipientName}`,subtitle:`${T.date} • ${T.location||"Location TBD"}`,onTap:()=>E&&E(T)},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},e.createElement("div",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"600",background:T.status==="accepted"?"#10b981":T.status==="rejected"?"#ef4444":"#6b7280",color:"#fff"}},T.status),T.location&&e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#ccc",fontSize:"0.8rem"}},e.createElement(Pi,null),T.location)),e.createElement("div",{style:{color:"#ccc",fontSize:"0.8rem"}},T.time||"Time TBD")))))))),Q=()=>e.createElement("div",{style:{paddingBottom:"80px"}},e.createElement(Yr,{title:"League Standings",subtitle:"Current season rankings"},e.createElement(sd,{emptyMessage:"No standings available",loading:v},c.map((T,re)=>e.createElement(K2,{key:T._id||re,onTap:()=>I&&I()},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"12px"}},e.createElement("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:re<3?"#fbbf24":"#6b7280",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:"600",flexShrink:0}},re+1),e.createElement("div",{style:{flex:1}},e.createElement("div",{style:{fontSize:"0.9rem",color:"#fff",fontWeight:"500",marginBottom:"2px"}},T.playerName),e.createElement("div",{style:{fontSize:"0.8rem",color:"#ccc"}},T.wins,"W - ",T.losses,"L • ",T.points," pts")),e.createElement("div",{style:{fontSize:"0.8rem",color:"#888",fontWeight:"600"}},"#",re+1))))))),ne=()=>e.createElement("div",{style:{paddingBottom:"80px"}},e.createElement(Yr,{title:"League Chat",subtitle:"Communicate with other players"},e.createElement("div",{style:{textAlign:"center",padding:"40px 20px"}},e.createElement("div",{style:{fontSize:"3rem",color:"#888",marginBottom:"16px"}},e.createElement(Hw,null)),e.createElement("div",{style:{fontSize:"1.1rem",color:"#fff",marginBottom:"8px"}},"Chat Coming Soon"),e.createElement("div",{style:{fontSize:"0.9rem",color:"#ccc"}},"Direct messaging and league chat will be available soon"))));return e.createElement("div",{className:`mobile-dashboard ${W}`,style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a1a 0%, #2d1b69 100%)",overflowX:"hidden",...L},...U,...F},e.createElement("div",{style:{padding:"16px"}},j==="overview"&&K(),j==="matches"&&X(),j==="proposals"&&O(),j==="standings"&&Q(),j==="chat"&&ne()),e.createElement(Gw,{activeTab:j,onTabChange:D,onQuickAction:A,pendingCount:t.length,sentCount:n.length,matchesCount:o.length}))}const Wp=async(a,r)=>{const t=await fetch(`${de}/api/matches/status/${encodeURIComponent(a)}/${r}`);if(!t.ok)throw new Error("Failed to fetch matches by status");return t.json()},Lz=async(a,r,t,n="")=>{const o=await fetch(`${de}/api/matches/${a}/complete`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({winner:r,score:t,notes:n})});if(!o.ok){const i=await o.json();throw new Error(i.error||"Failed to complete match")}return o.json()},Bz=async(a,r="")=>{const t=await fetch(`${de}/api/matches/${a}/cancel`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:r})});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to cancel match")}return t.json()},zz=async a=>{const r=await fetch(`${de}/api/matches/stats/${encodeURIComponent(a)}`);if(!r.ok)throw new Error("Failed to fetch match statistics");return r.json()},Oz=(a,r,t)=>{const[n,o]=h.useState([]),[i,c]=h.useState([]),[u,m]=h.useState(!0),[g,f]=h.useState(null),[y,v]=h.useState(null),S=h.useRef(null),w=h.useRef(null),x=h.useCallback(async(I=!1)=>{w.current&&w.current.abort(),w.current=new AbortController;try{I||m(!0);const[M,N]=await Promise.all([Wp(r,"scheduled"),Wp(r,"completed")]),_=M.filter(R=>R.player1Id===a||R.player2Id===a).map(R=>{const W=R.player1Id===a,L=W?R.player1Id:R.player2Id,F=W?R.player2Id:R.player1Id,j=new Date(R.scheduledDate),J=j.toISOString().split("T")[0],Y=j.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return{...R,player:L,opponent:F,senderName:R.player1Id,receiverName:R.player2Id,date:J,time:Y,gameType:R.gameType||"8 ball",raceLength:R.raceLength||5,type:"scheduled"}}),P=N.filter(R=>R.player1Id===a||R.player2Id===a).map(R=>{const W=R.player1Id===a,L=W?R.player1Id:R.player2Id,F=W?R.player2Id:R.player1Id,j=new Date(R.scheduledDate),J=j.toISOString().split("T")[0],Y=j.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return{...R,player:L,opponent:F,senderName:R.player1Id,receiverName:R.player2Id,date:J,time:Y,gameType:R.gameType||"8 ball",raceLength:R.raceLength||5,type:"completed"}});let B=[];try{const R=await kr.getPendingProposals(a,r),W=await kr.getSentProposals(a,r);B=[...R,...W].filter(J=>J.status==="confirmed"&&(J.senderName===a||J.receiverName===a));const F=B.map(J=>{const Y=J.senderName===a,D=Y?J.senderName:J.receiverName,A=Y?J.receiverName:J.senderName;return{_id:J._id,type:"proposal",status:"confirmed",player1Id:J.senderName,player2Id:J.receiverName,player:D,opponent:A,senderName:J.senderName,receiverName:J.receiverName,scheduledDate:J.date?new Date(J.date):new Date,date:J.date,time:J.time,location:J.location,message:J.message,gameType:J.gameType,raceLength:J.raceLength,completed:J.completed||!1,winner:J.winner||null}}),j=[..._,...F];j.sort((J,Y)=>new Date(J.scheduledDate)-new Date(Y.scheduledDate)),P.sort((J,Y)=>new Date(Y.completedDate)-new Date(J.completedDate)),w.current.signal.aborted||(o(j),c(P),f(null),v(new Date))}catch(R){console.warn("Error fetching confirmed proposals:",R),w.current.signal.aborted||(_.sort((W,L)=>new Date(W.scheduledDate)-new Date(L.scheduledDate)),P.sort((W,L)=>new Date(L.completedDate)-new Date(W.completedDate)),o(_),c(P),v(new Date))}}catch(M){if(M.name==="AbortError")return;console.error("Error fetching matches:",M),f(M.message),I||(o([]),c([]))}finally{w.current.signal.aborted||m(!1)}},[a,r,t]);h.useEffect(()=>{if(a&&r)return x(),S.current=setInterval(()=>{x(!0)},3e4),()=>{S.current&&clearInterval(S.current),w.current&&w.current.abort()}},[a,r,t,x]);const k=h.useCallback(()=>{x()},[x]),E=h.useCallback((I,M="add")=>{M==="add"?o(N=>[I,...N]):M==="update"?(o(N=>N.map(_=>_._id===I._id?I:_)),c(N=>N.map(_=>_._id===I._id?I:_))):M==="remove"&&(o(N=>N.filter(_=>_._id!==I._id)),c(N=>N.filter(_=>_._id!==I._id))),v(new Date)},[]);return{matches:n,completedMatches:i,scheduledConfirmedMatches:n,loading:u,error:g,lastUpdate:y,refetch:k,updateMatchLocally:E,markMatchCompleted:I=>{o(M=>M.filter(N=>N._id!==I._id)),c(M=>{const N={...I,completed:!0};return[...M,N]}),v(new Date)},updateCompletedMatch:I=>{c(M=>M.map(N=>N._id===I._id?I:N)),v(new Date)}}},Fz=a=>{const[r,t]=h.useState(null),[n,o]=h.useState(null),[i,c]=h.useState(!0),[u,m]=h.useState(null),[g,f]=h.useState(null),y=h.useRef(null),v=h.useRef(null),S=h.useCallback(async(x=!1)=>{if(a){v.current&&v.current.abort(),v.current=new AbortController;try{x||c(!0),console.log("useSeasonData - Fetching season data for division:",a);const[k,E]=await Promise.all([tl.getCurrentSeason(a),tl.getCurrentPhaseAndWeek(a)]);console.log("useSeasonData - Season result:",k),console.log("useSeasonData - Phase result:",E),v.current.signal.aborted||(t((k==null?void 0:k.season)||null),o(E),m(null),f(new Date))}catch(k){if(k.name==="AbortError")return;console.error("Error fetching season data:",k),m(k.message),x||(t(null),o(null))}finally{v.current.signal.aborted||c(!1)}}},[a]);h.useEffect(()=>{if(a)return S(),y.current=setInterval(()=>{S(!0)},5*60*1e3),()=>{y.current&&clearInterval(y.current),v.current&&v.current.abort()}},[a,S]);const w=h.useCallback(()=>{S()},[S]);return{seasonData:r,currentPhaseInfo:n,loading:i,error:u,lastUpdate:g,refetch:w}},Wz=a=>{const[r,t]=h.useState([]),[n,o]=h.useState(!0),[i,c]=h.useState(null),[u,m]=h.useState(null),g=h.useRef(null),f=h.useRef(null),y=h.useCallback(async(S=!1)=>{if(a){f.current&&f.current.abort(),f.current=new AbortController;try{S||o(!0);const w=a.replace(/[^A-Za-z0-9]/g,"_"),x=`${de}/static/standings_${w}.json`,k=await fetch(x,{signal:f.current.signal});if(!k.ok){console.warn(`Failed to fetch standings: ${k.status} - ${k.statusText}`),S||c(`Failed to fetch standings: ${k.status}`);return}const E=await k.json();if(!Array.isArray(E)){console.error("Standings data is not an array:",E),S||c("Invalid standings data format");return}const I=E.filter(M=>{if(!M||typeof M!="object")return console.warn("Invalid standings entry:",M),!1;if(!M.name||!M.rank)return console.warn("Standings entry missing name or rank:",M),!1;const N=parseInt(M.rank);return isNaN(N)||N<=0?(console.warn("Invalid rank in standings entry:",M),!1):!0});f.current.signal.aborted||(t(I),c(null),m(new Date))}catch(w){if(w.name==="AbortError")return;console.error("Failed to load standings:",w),c(w.message),S||t([])}finally{f.current.signal.aborted||o(!1)}}},[a]);h.useEffect(()=>{if(a)return y(),g.current=setInterval(()=>{y(!0)},10*60*1e3),()=>{g.current&&clearInterval(g.current),f.current&&f.current.abort()}},[a,y]);const v=h.useCallback(()=>{y()},[y]);return{standings:r,loading:n,error:i,lastUpdate:u,refetch:v}},jm={async getAllNotes(){return pn.get("/api/notes")},async createNote(a){return pn.post("/api/notes",{text:a})},async deleteNote(a){return pn.delete(`/api/notes/${a}`)}},Uz=()=>{const[a,r]=h.useState([]),[t,n]=h.useState(!0),[o,i]=h.useState(null),[c,u]=h.useState(null),m=h.useRef(null),g=h.useRef(null),f=h.useCallback(async(S=!1)=>{g.current&&g.current.abort(),g.current=new AbortController;try{S||n(!0);const w=await jm.getAllNotes();g.current.signal.aborted||(r(w),i(null),u(new Date))}catch(w){if(w.name==="AbortError")return;console.error("Error fetching notes:",w),i(w.message),S||r([])}finally{g.current.signal.aborted||n(!1)}},[]);h.useEffect(()=>(f(),m.current=setInterval(()=>{f(!0)},2*60*1e3),()=>{m.current&&clearInterval(m.current),g.current&&g.current.abort()}),[f]);const y=h.useCallback(()=>{f()},[f]),v=h.useCallback((S,w="add")=>{w==="add"?r(x=>[S,...x]):w==="update"?r(x=>x.map(k=>k._id===S._id?S:k)):w==="remove"&&r(x=>x.filter(k=>k._id!==S._id)),u(new Date)},[]);return{notes:a,loading:t,error:o,lastUpdate:c,refetch:y,updateNoteLocally:v}},$z=a=>{const[r,t]=h.useState([]),[n,o]=h.useState(!0),[i,c]=h.useState(null),[u,m]=h.useState(null),g=h.useRef(null),f=h.useRef(null),y=h.useCallback(async(S=!1)=>{if(!a){t([]);return}f.current&&f.current.abort(),f.current=new AbortController;try{S||o(!0);let w;a==="FRBCAPL TEST"?w="schedule_FRBCAPL_TEST.json":a==="Singles Test"?w="schedule_Singles_Test.json":w=`schedule_${a.replace(/[^A-Za-z0-9]/g,"_")}.json`;const x=`${de}/static/${w}`,k=await fetch(x,{signal:f.current.signal});if(!k.ok)throw new Error("Schedule not found");const E=await k.json();f.current.signal.aborted||(console.log("Schedule loaded for",a,":",E.length,"matches"),t(E),c(null),m(new Date))}catch(w){if(w.name==="AbortError")return;console.error("Failed to load schedule for",a,":",w),c(w.message),S||t([])}finally{f.current.signal.aborted||o(!1)}},[a]);h.useEffect(()=>{if(a)return y(),g.current=setInterval(()=>{y(!0)},15*60*1e3),()=>{g.current&&clearInterval(g.current),f.current&&f.current.abort()}},[a,y]);const v=h.useCallback(()=>{y()},[y]);return{scheduledMatches:r,loading:n,error:i,lastUpdate:u,refetch:v}};class jz{async checkAndSendDeadlineReminder(r,t,n){try{const o=await tl.getCurrentSeason(n);if(!(o!=null&&o.season)){console.log("No current season found for division:",n);return}const i=o.season,c=new Date,u=new Date(i.phase1End);if(c>u){console.log("Phase 1 deadline has passed, no reminder needed");return}const m=Math.ceil((u-c)/(1e3*60*60*24));if(!this.shouldSendReminder(m))return;const f=await this.getUserMatchStatus(t,n);await lI({to_email:r,to_name:t,division:n,daysUntilDeadline:m,completedMatches:f.completedCount,totalRequiredMatches:f.totalRequired,deadlineDate:lr(u,"EEEE, MMMM d, yyyy"),remainingMatches:f.remainingCount}),console.log(`Deadline reminder sent to ${t} for ${n}`)}catch(o){console.error("Error sending deadline reminder:",o)}}shouldSendReminder(r){return[7,3,1,0].includes(r)}async getUserMatchStatus(r,t){try{return{completedCount:1,totalRequired:6,remainingCount:5}}catch(n){return console.error("Error getting user match status:",n),{completedCount:0,totalRequired:6,remainingCount:6}}}async sendBulkDeadlineReminders(r){try{console.log(`Sending bulk deadline reminders for ${r}`)}catch(t){console.error("Error sending bulk deadline reminders:",t)}}}const Hz=new jz,Yz={"FRBCAPL TEST":"https://lms.fargorate.com/PublicReport/LeagueReports?leagueId=e05896bb-b0f4-4a80-bf99-b2ca012ceaaa&divisionId=b345a437-3415-4765-b19a-b2f7014f2cfa","Singles Test":"https://lms.fargorate.com/PublicReport/LeagueReports?leagueId=e05896bb-b0f4-4a80-bf99-b2ca012ceaaa&divisionId=9058a0cc-3231-4118-bd91-b305006fe578"};ee.shape({name:ee.string.isRequired,description:ee.string,playerCount:ee.number,currentPhase:ee.string,totalMatches:ee.number,completedMatches:ee.number,startDate:ee.string,endDate:ee.string,status:ee.oneOf(["active","completed","pending","inactive"]),logo:ee.string,primaryColor:ee.string,secondaryColor:ee.string}).isRequired,ee.func,ee.bool,ee.bool,ee.bool,ee.node,ee.string,ee.object;ee.shape({name:ee.string.isRequired,email:ee.string,phone:ee.string,rank:ee.number,wins:ee.number,losses:ee.number,totalMatches:ee.number,winPercentage:ee.number,currentStreak:ee.number,bestStreak:ee.number,lastPlayed:ee.string,availability:ee.string,status:ee.oneOf(["active","inactive","suspended","pending"]),avatar:ee.string,primaryColor:ee.string,secondaryColor:ee.string,isOnline:ee.bool}).isRequired,ee.func,ee.bool,ee.bool,ee.bool,ee.node,ee.bool,ee.bool,ee.string,ee.object;ee.shape({id:ee.string.isRequired,player1:ee.string.isRequired,player2:ee.string.isRequired,player1Score:ee.number,player2Score:ee.number,status:ee.oneOf(["scheduled","in_progress","completed","cancelled"]),date:ee.string,time:ee.string,location:ee.string,division:ee.string,phase:ee.string,winner:ee.string,notes:ee.string,primaryColor:ee.string,secondaryColor:ee.string}).isRequired,ee.func,ee.bool,ee.bool,ee.node,ee.bool,ee.bool,ee.string,ee.object;const Vw=({playerName:a,playerLastName:r,isMobile:t,userPin:n,playerEmail:o,proposalsLoading:i,matchesLoading:c,notesLoading:u,seasonLoading:m,standingsLoading:g,scheduleLoading:f,styles:y})=>{const v=i||c||u||m||g||f;return e.createElement(e.Fragment,null,e.createElement("div",{style:{textAlign:"center",marginBottom:t?"8px":"16px"}},e.createElement("h1",{className:y.dashboardTitle,style:{fontSize:t?"1.6rem":"2rem",textAlign:"center",margin:0,transition:"all 0.2s ease"}},"Hello,",e.createElement("span",{className:y.dashboardUserName,style:{fontSize:t?"1.4rem":"1.8rem"}},a," ",r)),e.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",marginTop:t?"4px":"8px",fontSize:t?"0.7rem":"0.8rem",color:"#888"}},e.createElement("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:v?"#f59e0b":"#10b981",animation:v?"pulse 2s infinite":"none"}}),e.createElement("span",null,v?"Updating...":"Live"))),e.createElement("div",{className:y.announcement,style:{fontSize:t?"0.75rem":"1rem",marginBottom:t?"8px":"16px"}},e.createElement("p",null,"This is the BETA version. "),"Matches that are created, scheduled, and confirmed will NOT be played.",e.createElement("br",null),"This is for testing purposes only."),Kl.getCurrentAdmin()&&o!=="guest@frontrangepool.com"&&e.createElement("div",{style:{marginBottom:t?12:16,textAlign:"center"}},e.createElement("button",{onClick:()=>window.location.hash="#/tenball-tutorial",style:{background:"linear-gradient(45deg, #4CAF50, #8BC34A)",border:"none",color:"white",padding:t?"10px 16px":"12px 20px",borderRadius:"25px",cursor:"pointer",fontSize:t?"0.9rem":"1rem",fontWeight:"bold",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(76, 175, 80, 0.3)"}},e.createElement("img",{src:Xi,alt:"10-Ball",style:{width:"20px",height:"20px",marginRight:"8px",display:"inline-block",verticalAlign:"text-bottom"}}),"Play 10-Ball Tutorial & Learn Official CSI Rules")),!t&&e.createElement("br",null))};Vw.propTypes={playerName:ee.string.isRequired,playerLastName:ee.string.isRequired,isMobile:ee.bool.isRequired,userPin:ee.string,playerEmail:ee.string,proposalsLoading:ee.bool,matchesLoading:ee.bool,notesLoading:ee.bool,seasonLoading:ee.bool,standingsLoading:ee.bool,scheduleLoading:ee.bool,onProfileClick:ee.func.isRequired,styles:ee.object.isRequired};const Qw=({divisions:a,selectedDivision:r,onDivisionChange:t,isMobile:n})=>a.length===0?null:e.createElement("div",{style:{marginBottom:n?8:16,display:"flex",flexDirection:"column",alignItems:n?"flex-start":"center",gap:n?"8px":"12px"}},e.createElement("div",{style:{display:"flex",flexDirection:n?"column":"row",alignItems:n?"flex-start":"center",gap:n?"4px":"12px",width:"100%"}},e.createElement("label",{style:{fontSize:n?"0.9rem":"1rem"}},"Division: ",a.length>1?e.createElement("select",{value:r,onChange:t,style:{fontSize:n?"0.9em":"1em",padding:n?6:4,borderRadius:4}},a.map(o=>e.createElement("option",{key:o,value:o},o))):e.createElement("span",{style:{fontWeight:600}},a[0]))));Qw.propTypes={divisions:ee.arrayOf(ee.string).isRequired,selectedDivision:ee.string.isRequired,onDivisionChange:ee.func.isRequired,isMobile:ee.bool.isRequired};const Jw=({isMobile:a,styles:r,effectivePhase:t,seasonData:n,completedMatches:o,totalRequiredMatches:i,playerName:c,playerLastName:u,selectedDivision:m,pendingCount:g,sentCount:f,filteredUpcomingMatches:y,currentUser:v,allPlayers:S,showPhase1Rules:w,setShowPhase1Rules:x,setShowPhase1Overview:k,setPlayerStats:E,setTimeLeft:I,setDeadlineStatus:M,setPhase1EndDate:N,onOpenOpponentsModal:_,onOpenCompletedMatchesModal:P,onOpenStandingsModal:B,onOpenDefenseChallengersModal:R,onOpenAllMatchesModal:W,onOpenProposalListModal:L,onOpenSentProposalListModal:F,onOpenPlayerSearch:j,onMatchClick:J,onSmartMatchClick:Y,onOpenMessageCenter:D,onOpenCalendar:A,simulationRef:U,opponentsModalPortal:K})=>e.createElement("section",{className:`${r.dashboardSection} ${r.dashboardSectionBox} ${r.matchesSection}`,style:{position:"relative",overflow:"visible",backgroundColor:"rgba(0, 0, 0, .5)",minHeight:a?"650px":"570px",marginBottom:a?"16px":"36px",paddingBottom:"20px"}},e.createElement("div",{style:{display:"flex",justifyContent:"center",width:"100%"}},e.createElement("div",{className:r.poolTableContainer,style:{marginBottom:a?"12px":"24px",position:"relative",width:"100%",maxWidth:a?"98%":"600px",height:a?"400px":"auto",display:"flex",justifyContent:"center",alignItems:"center"}},t==="scheduled"&&n&&e.createElement("div",{style:{position:"absolute",top:a?"50px":"35px",left:"0",right:"0",margin:"0 auto",zIndex:100,width:a?"95%":"90%",maxWidth:a?"500px":"1200px",height:a?"150px":"200px",pointerEvents:"auto"}},e.createElement(rz,null,e.createElement(Bw,{currentPhase:t,seasonData:n,completedMatches:o,totalRequiredMatches:i,playerName:c,playerLastName:u,selectedDivision:m,onOpenOpponentsModal:_,onOpenCompletedMatchesModal:P,onOpenStandingsModal:B,onOpenAllMatchesModal:W,pendingCount:g,sentCount:f,onOpenProposalListModal:L,onOpenSentProposalListModal:F,upcomingMatches:y,onMatchClick:J,isMobile:a,onOpenMessageCenter:D,currentUser:v,allPlayers:S,onSmartMatchClick:Y,showPhase1Rules:w,setShowPhase1Rules:x,showPhase1Overview:!1,setShowPhase1Overview:k,setPlayerStats:E,setTimeLeft:I,setDeadlineStatus:M,setPhase1EndDate:N,onOpenCalendar:A}))),t==="challenge"&&e.createElement("div",{style:{position:"absolute",top:a?"50px":"35px",left:"0",right:"0",margin:"0 auto",zIndex:10,width:a?"95%":"90%",maxWidth:a?"500px":"1200px",height:a?"150px":"200px"}},e.createElement(ez,{playerName:c,playerLastName:u,selectedDivision:m,phase:t,isMobile:a,onOpenOpponentsModal:_,onOpenCompletedMatchesModal:P,onOpenStandingsModal:B,onOpenDefenseChallengersModal:R,onOpenAllMatchesModal:W,pendingCount:g,sentCount:f,onOpenProposalListModal:L,onOpenSentProposalListModal:F,onOpenPlayerSearch:j,upcomingMatches:y,onMatchClick:J,seasonData:n,completedMatches:o,standings:[]})),a?e.createElement("div",{className:r.simulationContainer,ref:U,style:{width:"100% !important",height:"400px !important",position:"relative",minWidth:"0 !important",maxWidth:"100% !important",minHeight:"400px !important",maxHeight:"400px !important",pointerEvents:t==="scheduled"?"none":"auto"}},e.createElement(Dd,{isRotated:!0})):e.createElement(my,{aspectWidth:600,aspectHeight:300},e.createElement("div",{className:r.simulationContainer,ref:U,style:{width:"100%",height:"100%",position:"relative",pointerEvents:t==="scheduled"?"none":"auto"}},e.createElement(Dd,null))),K)));Jw.propTypes={isMobile:ee.bool.isRequired,styles:ee.object.isRequired,effectivePhase:ee.string.isRequired,seasonData:ee.object,completedMatches:ee.array,totalRequiredMatches:ee.number,playerName:ee.string.isRequired,playerLastName:ee.string.isRequired,selectedDivision:ee.string.isRequired,pendingCount:ee.number,sentCount:ee.number,filteredUpcomingMatches:ee.array,currentUser:ee.object,allPlayers:ee.array,showPhase1Rules:ee.bool,setShowPhase1Rules:ee.func,setShowPhase1Overview:ee.func,setPlayerStats:ee.func,setTimeLeft:ee.func,setDeadlineStatus:ee.func,setPhase1EndDate:ee.func,onOpenOpponentsModal:ee.func.isRequired,onOpenCompletedMatchesModal:ee.func.isRequired,onOpenStandingsModal:ee.func.isRequired,onOpenDefenseChallengersModal:ee.func.isRequired,onOpenAllMatchesModal:ee.func.isRequired,onOpenProposalListModal:ee.func.isRequired,onOpenSentProposalListModal:ee.func.isRequired,onOpenPlayerSearch:ee.func.isRequired,onMatchClick:ee.func.isRequired,onSmartMatchClick:ee.func.isRequired,onOpenMessageCenter:ee.func.isRequired,onOpenCalendar:ee.func.isRequired,simulationRef:ee.object,opponentsModalPortal:ee.node};const Xw=({notes:a,notesLoading:r,noteError:t,userPin:n,onDeleteNote:o,onClearNotes:i,styles:c})=>e.createElement("section",{className:`${c.dashboardSection} ${c.dashboardSectionBox} ${c.newsUpdatesSection}`},e.createElement("h2",{className:c.dashboardSectionTitle},"News & Updates"),r?e.createElement(f9,{lines:3,height:"16px"}):e.createElement("ul",{className:c.dashboardList},a.length===0?e.createElement("li",{className:c.dashboardNoteItem},"No news yet."):a.map((u,m)=>e.createElement("li",{key:u._id||m,className:c.dashboardNoteItem},e.createElement("span",{style:{flex:1}},u.text),Kl.getCurrentAdmin()&&e.createElement("button",{onClick:()=>o(u._id),style:{background:"#e53935",color:"#fff",border:"none",borderRadius:4,padding:"2px 8px",cursor:"pointer",fontSize:"0.95em"},"aria-label":"Delete note",title:"Delete note",type:"button"},"Delete")))),Kl.getCurrentAdmin()&&a.length>0&&e.createElement("button",{style:{marginTop:10,background:"#444",color:"#fff",border:"none",borderRadius:5,padding:"4px 14px",cursor:"pointer",fontSize:"0.98em"},onClick:i,type:"button"},"Clear All Notes"),t&&e.createElement("div",{style:{marginTop:10,padding:"10px",background:"#ffebee",color:"#c62828",border:"1px solid #ffcdd2",borderRadius:"4px",fontSize:"0.9em"}},"Error: ",t));Xw.propTypes={notes:ee.array.isRequired,notesLoading:ee.bool.isRequired,noteError:ee.string,userPin:ee.string,onDeleteNote:ee.func.isRequired,onClearNotes:ee.func.isRequired,styles:ee.object.isRequired};const Kw=({userPin:a,loadingPendingRegistrations:r,phaseOverride:t,selectedDivision:n,BACKEND_URL:o,styles:i,onShowRegistrationModal:c,onLoadPendingRegistrations:u,onSetPendingRegistrations:m,onShowPendingRegistrationsModal:g,onCreateTestRegistration:f,onShowNoteModal:y,onGoToAdmin:v,onGoToPlatformAdmin:S,isSuperAdmin:w,onActivatePhase2:x,onSetPhaseOverride:k,onRefreshSeasonData:E,onShowPendingClaimsModal:I})=>Kl.getCurrentAdmin()?e.createElement(e.Fragment,null,e.createElement("button",{className:i.dashboardAdminBtn,onClick:c,type:"button",style:{background:"#4CAF50"}},"Register Player"),e.createElement("button",{className:i.dashboardAdminBtn,onClick:async()=>{u(!0);try{const N=await fetch(`${o}/api/users/pending-registrations`);if(N.ok){const _=await N.json();m(_),g(!0)}else alert("Failed to load pending registrations")}catch{alert("Error loading pending registrations")}finally{u(!1)}},type:"button",style:{background:"#FF9800"},disabled:r},r?"Loading...":"Pending Registrations"),e.createElement("button",{className:i.dashboardAdminBtn,onClick:f,type:"button",style:{background:"#9C27B0"}},"Create Test Registration"),e.createElement("button",{className:i.dashboardAdminBtn,onClick:y,type:"button"},"Add Note"),e.createElement("button",{className:i.dashboardAdminBtn,onClick:I,type:"button",style:{background:"#2196F3"}},"🔑 Pending Claims"),e.createElement("button",{className:i.dashboardAdminBtn,onClick:v,type:"button"},"Admin"),w()&&S&&e.createElement("button",{className:i.dashboardAdminBtn,onClick:S,type:"button",style:{background:"#8B4513"}},"Platform Admin"),e.createElement("button",{className:i.dashboardAdminBtn,onClick:async()=>{if(t==="challenge")k("scheduled");else try{const _=await(await fetch(`${o}/api/seasons/activate-phase2/${encodeURIComponent(n)}`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();_.success?(k("challenge"),alert("✅ Phase 2 activated successfully! The system will now allow Phase 2 challenges."),n&&E()):alert("Failed to activate Phase 2: "+_.error)}catch(N){alert("Error activating Phase 2: "+N.message)}},type:"button"},t==="challenge"?"Switch to Phase 1 (Scheduled)":"Activate Phase 2 (Challenge)"),t&&e.createElement("button",{className:i.dashboardAdminBtn,onClick:()=>k(null),type:"button",style:{background:"#888"}},"Clear Phase Override")):null;Kw.propTypes={userPin:ee.string,loadingPendingRegistrations:ee.bool,phaseOverride:ee.string,selectedDivision:ee.string,BACKEND_URL:ee.string.isRequired,styles:ee.object.isRequired,onShowRegistrationModal:ee.func.isRequired,onLoadPendingRegistrations:ee.func.isRequired,onSetPendingRegistrations:ee.func.isRequired,onShowPendingRegistrationsModal:ee.func.isRequired,onCreateTestRegistration:ee.func.isRequired,onShowNoteModal:ee.func.isRequired,onGoToAdmin:ee.func.isRequired,onGoToPlatformAdmin:ee.func,isSuperAdmin:ee.func.isRequired,onActivatePhase2:ee.func.isRequired,onSetPhaseOverride:ee.func.isRequired,onRefreshSeasonData:ee.func.isRequired,onShowPendingClaimsModal:ee.func.isRequired};const qz=({onClose:a})=>{const[r,t]=h.useState([]),[n,o]=h.useState(!0),[i,c]=h.useState(""),[u,m]=h.useState(null),[g,f]=h.useState(""),[y,v]=h.useState(!1);h.useEffect(()=>{S()},[]);const S=async()=>{try{const E=await fetch(`${de}/api/auth/pending-claims`),I=await E.json();E.ok&&I.success?t(I.claims):c(I.message||"Error fetching pending claims")}catch(E){console.error("Fetch claims error:",E),c("Error fetching pending claims")}finally{o(!1)}},w=async E=>{if(!g.trim()){c("Please enter a PIN for the user");return}if(g.length<4){c("PIN must be at least 4 characters");return}v(!0),c("");try{const I=await fetch(`${de}/api/auth/approve-account-claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({claimId:E,pin:g})}),M=await I.json();I.ok&&M.success?(t(N=>N.filter(_=>_.id!==E)),m(null),f(""),alert("Account claim approved successfully!")):c(M.message||"Error approving claim")}catch(I){console.error("Approve error:",I),c("Error approving claim")}finally{v(!1)}},x=async E=>{if(confirm("Are you sure you want to reject this account claim? This action cannot be undone.")){v(!0),c("");try{const I=await fetch(`${de}/api/auth/reject-account-claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({claimId:E})}),M=await I.json();I.ok&&M.success?(t(N=>N.filter(_=>_.id!==E)),m(null),alert("Account claim rejected successfully!")):c(M.message||"Error rejecting claim")}catch(I){console.error("Reject error:",I),c("Error rejecting claim")}finally{v(!1)}}},k=E=>new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return n?e.createElement("div",{className:"pending-claims-overlay"},e.createElement("div",{className:"pending-claims-modal"},e.createElement("div",{className:"loading"},"Loading pending claims..."))):e.createElement("div",{className:"pending-claims-overlay"},e.createElement("div",{className:"pending-claims-modal"},e.createElement("div",{className:"pending-claims-header"},e.createElement("h2",null,"Pending Account Claims"),e.createElement("button",{className:"close-btn",onClick:a},"×")),e.createElement("div",{className:"pending-claims-content"},i&&e.createElement("div",{className:"error-message"},i),r.length===0?e.createElement("div",{className:"no-claims"},e.createElement("p",null,"No pending account claims")):e.createElement("div",{className:"claims-list"},r.map(E=>e.createElement("div",{key:E.id,className:"claim-item"},e.createElement("div",{className:"claim-header"},e.createElement("h3",null,E.firstName," ",E.lastName),e.createElement("span",{className:"claim-date"},k(E.submittedAt))),e.createElement("div",{className:"claim-details"},e.createElement("div",{className:"contact-info"},e.createElement("p",null,e.createElement("strong",null,"Email:")," ",E.email),E.phone&&e.createElement("p",null,e.createElement("strong",null,"Phone:")," ",E.phone)),E.ladderInfo&&e.createElement("div",{className:"ladder-info"},e.createElement("p",null,e.createElement("strong",null,"Ladder Position:")," #",E.ladderInfo.position),e.createElement("p",null,e.createElement("strong",null,"Fargo Rate:")," ",E.ladderInfo.fargoRate),e.createElement("p",null,e.createElement("strong",null,"Record:")," ",E.ladderInfo.wins,"W - ",E.ladderInfo.losses,"L")),E.claimMessage&&e.createElement("div",{className:"claim-message"},e.createElement("p",null,e.createElement("strong",null,"Message:")),e.createElement("p",null,E.claimMessage))),e.createElement("div",{className:"claim-actions"},e.createElement("button",{className:"approve-btn",onClick:()=>m(E),disabled:y},"Approve"),e.createElement("button",{className:"reject-btn",onClick:()=>x(E.id),disabled:y},"Reject")))))),u&&e.createElement("div",{className:"approval-modal-overlay"},e.createElement("div",{className:"approval-modal"},e.createElement("div",{className:"approval-modal-header"},e.createElement("h3",null,"Approve Account for ",u.firstName," ",u.lastName),e.createElement("button",{className:"close-btn",onClick:()=>m(null)},"×")),e.createElement("div",{className:"approval-modal-content"},e.createElement("p",null,"Set a PIN for this user:"),e.createElement("div",{className:"form-group"},e.createElement("input",{type:"text",value:g,onChange:E=>f(E.target.value),placeholder:"Enter 4-digit PIN",maxLength:"4",pattern:"[0-9]*"})),e.createElement("div",{className:"approval-modal-actions"},e.createElement("button",{className:"cancel-btn",onClick:()=>{m(null),f("")}},"Cancel"),e.createElement("button",{className:"confirm-approve-btn",onClick:()=>w(u.id),disabled:y||g.length<4},y?"Approving...":"Approve Account")))))))},eS=({showPlayerSearch:a,showAdminPlayerSearch:r,showPlayerAvailability:t,showProposalModal:n,selectedOpponent:o,proposalData:i,fullName:c,senderEmail:u,selectedDivision:m,effectivePhase:g,playerName:f,playerLastName:y,onClosePlayerSearch:v,onCloseAdminPlayerSearch:S,onClosePlayerAvailability:w,onCloseProposalModal:x,onProposeMatch:k,onProposalComplete:E,onUpdateProposalLocally:I,onRefetchMatches:M,onRefetchProposals:N})=>e.createElement(e.Fragment,null,a&&e.createElement(L0,{onClose:v,excludeName:c,senderName:c,senderEmail:u,selectedDivision:m,phase:g,onProposalComplete:v}),r&&e.createElement(L0,{onClose:S,excludeName:null,senderName:c,senderEmail:u,phase:g,onProposalComplete:S}),t&&o&&e.createElement(ef,{onClose:w,player:o,onProposeMatch:k,selectedDivision:m,phase:g}),n&&i&&e.createElement(cf,{player:i.player,day:i.day,slot:i.slot,selectedDivision:i.selectedDivision,phase:i.phase||g,onClose:x,senderName:`${f} ${y}`,senderEmail:u,onProposalComplete:_=>{x(),_&&I(_,"add"),M(),N()}}));eS.propTypes={showPlayerSearch:ee.bool,showAdminPlayerSearch:ee.bool,showPlayerAvailability:ee.bool,showProposalModal:ee.bool,selectedOpponent:ee.object,proposalData:ee.object,fullName:ee.string.isRequired,senderEmail:ee.string.isRequired,selectedDivision:ee.string.isRequired,effectivePhase:ee.string.isRequired,playerName:ee.string.isRequired,playerLastName:ee.string.isRequired,onClosePlayerSearch:ee.func.isRequired,onCloseAdminPlayerSearch:ee.func.isRequired,onClosePlayerAvailability:ee.func.isRequired,onCloseProposalModal:ee.func.isRequired,onProposeMatch:ee.func.isRequired,onProposalComplete:ee.func.isRequired,onUpdateProposalLocally:ee.func.isRequired,onRefetchMatches:ee.func.isRequired,onRefetchProposals:ee.func.isRequired};const tS=({showStandings:a,showDefenseChallengers:r,modalOpen:t,showNoteModal:n,showProposalListModal:o,showSentProposalListModal:i,showCounterModal:c,showProposalDetailsModal:u,selectedMatch:m,selectedProposal:g,counterProposal:f,newNote:y,noteError:v,proposalNote:S,pendingProposals:w,sentProposals:x,players:k,STANDINGS_URLS:E,onCloseStandings:I,onCloseDefenseChallengers:M,onCloseModal:N,onCloseNoteModal:_,onCloseProposalListModal:P,onCloseSentProposalListModal:B,onCloseCounterModal:R,onCloseProposalDetailsModal:W,onAddNote:L,onUpdateNewNote:F,onSelectProposal:j,onSelectSentProposal:J,onConfirmProposal:Y,onCounterPropose:D,onSubmitCounterProposal:A,onEditProposal:U,onDeleteProposal:K,onUpdateProposalLocally:X,onRefetchMatches:O,onRefetchProposals:Q,selectedDivision:ne,effectivePhase:T,userPin:re,playerName:G,playerLastName:se,senderEmail:pe,styles:Se,proposalService:at})=>e.createElement(e.Fragment,null,e.createElement(oD,{open:a,onClose:I,standingsUrl:E[ne]}),e.createElement(lD,{open:r,onClose:M,playerName:G,playerLastName:se,selectedDivision:ne}),e.createElement(ND,{open:t,onClose:N,match:m,onCompleted:be=>X(be,"remove"),userPin:re,onMatchUpdated:be=>X(be,"update"),senderName:`${G} ${se}`,senderEmail:pe}),n&&e.createElement("div",{className:Se.modalOverlay,style:{zIndex:99999}},e.createElement("div",{className:Se.modalContent,style:{maxWidth:400,margin:"auto"}},e.createElement("h2",null,"Add News/Note"),e.createElement("textarea",{value:y,onChange:F,rows:4,style:{width:"100%",marginBottom:12,borderRadius:6,padding:8},placeholder:"Enter your note..."}),v&&e.createElement("div",{style:{color:"red",marginBottom:8}},v),e.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:8}},e.createElement("button",{className:Se.dashboardBtn,onClick:_,type:"button"},"Cancel"),e.createElement("button",{className:Se.dashboardBtn,disabled:!y.trim(),onClick:L,type:"button"},"Add Note")))),o&&e.createElement(XE,{proposals:w,onSelect:j,onClose:P,type:"received"}),i&&e.createElement(XE,{proposals:x,onSelect:J,onClose:B,type:"sent"}),g&&!u&&e.createElement("div",{className:Se.modalOverlay},e.createElement("div",{className:Se.modalContent,style:{maxWidth:420,margin:"auto"}},e.createElement(LD,{proposal:g,userNote:S,setUserNote:F,onConfirm:Y,onClose:W,onCounterPropose:D,phase:T,currentUserName:`${G} ${se}`,currentUserEmail:pe}))),e.createElement(y5,{proposal:f,open:c,onClose:R,onSubmit:A,senderPlayer:k.find(be=>{var Je,nt;return`${be.firstName} ${be.lastName}`.trim().toLowerCase()===((f==null?void 0:f.senderName)||"").trim().toLowerCase()||((Je=be.email)==null?void 0:Je.toLowerCase())===((nt=f==null?void 0:f.senderEmail)==null?void 0:nt.toLowerCase())}),phase:T,selectedDivision:ne}),g&&u&&e.createElement(h9,{proposal:g,open:u,onClose:W,onEdit:U,onDelete:K,phase:T,currentUserName:`${G} ${se}`,currentUserEmail:pe}));tS.propTypes={showStandings:ee.bool,showDefenseChallengers:ee.bool,modalOpen:ee.bool,showNoteModal:ee.bool,showProposalListModal:ee.bool,showSentProposalListModal:ee.bool,showCounterModal:ee.bool,showProposalDetailsModal:ee.bool,selectedMatch:ee.object,selectedProposal:ee.object,counterProposal:ee.object,newNote:ee.string,noteError:ee.string,proposalNote:ee.string,pendingProposals:ee.array,sentProposals:ee.array,players:ee.array,STANDINGS_URLS:ee.object.isRequired,onCloseStandings:ee.func.isRequired,onCloseDefenseChallengers:ee.func.isRequired,onCloseModal:ee.func.isRequired,onCloseNoteModal:ee.func.isRequired,onCloseProposalListModal:ee.func.isRequired,onCloseSentProposalListModal:ee.func.isRequired,onCloseCounterModal:ee.func.isRequired,onCloseProposalDetailsModal:ee.func.isRequired,onAddNote:ee.func.isRequired,onUpdateNewNote:ee.func.isRequired,onSelectProposal:ee.func.isRequired,onSelectSentProposal:ee.func.isRequired,onConfirmProposal:ee.func.isRequired,onCounterPropose:ee.func.isRequired,onSubmitCounterProposal:ee.func.isRequired,onEditProposal:ee.func.isRequired,onDeleteProposal:ee.func.isRequired,onUpdateProposalLocally:ee.func.isRequired,onRefetchMatches:ee.func.isRequired,onRefetchProposals:ee.func.isRequired,selectedDivision:ee.string.isRequired,effectivePhase:ee.string.isRequired,userPin:ee.string,playerName:ee.string.isRequired,playerLastName:ee.string.isRequired,senderEmail:ee.string.isRequired,styles:ee.object.isRequired,proposalService:ee.object.isRequired};const Gz=({isOpen:a,onClose:r,currentLocations:t="",availableLocations:n=[],onSave:o})=>{const[i,c]=h.useState([]),[u,m]=h.useState(""),[g,f]=h.useState("");h.useEffect(()=>{if(a&&t){const _=t.split(`
`).filter(Boolean);console.log("📍 LocationSelectionModal: Initializing with currentLocations:",t),console.log("📍 Parsed locations array:",_),c(_)}else console.log("📍 LocationSelectionModal: No currentLocations, setting empty array"),c([]);m(""),f("")},[a,t]);const y=()=>{try{return i&&Array.isArray(i)?i.map(_=>String(_).trim()).filter(Boolean):!t||typeof t!="string"?[]:t.split(`
`).filter(Boolean).map(_=>String(_).trim())}catch(_){return console.error("Error parsing user locations:",_),[]}},v=()=>{try{if(!n||!Array.isArray(n))return[];const _=i.length>0?i:y();return n.filter(P=>typeof P!="string"?!1:!_.some(B=>typeof B!="string"?!1:B.trim().toLowerCase()===P.trim().toLowerCase()))}catch(_){return console.error("Error getting unselected locations:",_),[]}},S=_=>g.trim()?_.filter(P=>String(P).toLowerCase().includes(g.toLowerCase())):_,w=_=>{const P=String(_);console.log("📍 LocationSelectionModal: Toggling location:",P),c(B=>{const R=B.includes(P)?B.filter(W=>W!==P):[...B,P];return console.log("📍 LocationSelectionModal: Updated selectedLocations:",R),R})},x=()=>{if(u.trim()){const _=u.trim();i.includes(_)||c(P=>[...P,_]),m("")}},k=()=>{const _=i.join(`
`);console.log("📍 LocationSelectionModal: Saving locations..."),console.log("📍 selectedLocations state:",i),console.log("📍 locationsString being sent:",_),o(_),r()},E=_=>{_.key==="Enter"&&x()};if(!a)return null;const I=y(),M=v();S(I);const N=S(M);return e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)",padding:"20px"},onClick:r},e.createElement("div",{style:{transform:"translate(0px, 0px)",cursor:"default",background:"linear-gradient(120deg, #232323 80%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"1rem",boxShadow:"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",width:"auto",maxWidth:"850px",minWidth:"700px",margin:"0 auto",left:0,right:0,animation:"modalBounceIn 0.5s cubic-bezier(.21,1.02,.73,1.01)",padding:0,position:"relative",fontFamily:"inherit",boxSizing:"border-box",textAlign:"center",maxHeight:"85vh",overflowY:"auto"},onClick:_=>_.stopPropagation()},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#e53e3e",padding:"0.8rem 1rem 0.6rem 1rem",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",position:"relative",cursor:"grab",userSelect:"none",gap:"0.8rem"}},e.createElement("span",{style:{position:"absolute",left:0,top:0,width:"100%",height:"4px",background:"linear-gradient(90deg, #fff0 0%, #e53e3e 60%, #fff0 100%)",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",pointerEvents:"none"}}),e.createElement("h2",{style:{margin:0,fontSize:"1rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.02em",color:"#fff",textShadow:"0 1px 12px #000a",zIndex:2,flex:1,wordBreak:"break-word",minWidth:0}},"📍 Select Your Locations"),e.createElement("button",{onClick:r,style:{background:"none",border:"none",color:"#fff",fontSize:"1.5rem",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",minWidth:"24px",zIndex:3},onMouseEnter:_=>_.target.style.backgroundColor="rgba(255, 255, 255, 0.1)",onMouseLeave:_=>_.target.style.backgroundColor="transparent"},"×")),e.createElement("div",{style:{padding:"0.5rem",overflowY:"auto",maxHeight:"calc(75vh - 80px)"}},e.createElement("div",{style:{marginBottom:"8px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"}},e.createElement("input",{type:"text",placeholder:"🔍 Search locations...",value:g,onChange:_=>f(_.target.value),style:{flex:1,padding:"8px 10px",borderRadius:"6px",border:"1px solid #333",backgroundColor:"#2a2a2a",color:"#fff",fontSize:"14px"}}),e.createElement("span",{style:{color:"#888",fontSize:"0.8rem",whiteSpace:"nowrap"}},g?`${N.length} of ${M.length}`:`${M.length} total`),g&&e.createElement("button",{onClick:()=>f(""),style:{padding:"4px 8px",borderRadius:"4px",border:"1px solid #555",backgroundColor:"transparent",color:"#888",cursor:"pointer",fontSize:"0.75rem"}},"Clear"))),e.createElement("div",{style:{marginBottom:"8px"}},e.createElement("div",{style:{color:"#ffc107",fontSize:"0.9rem",fontWeight:"bold",marginBottom:"6px",textAlign:"left"}},"➕ Add Custom Location:"),e.createElement("div",{style:{display:"flex",gap:"8px"}},e.createElement("input",{type:"text",placeholder:"Type a custom location name...",value:u,onChange:_=>m(_.target.value),onKeyPress:E,style:{flex:1,padding:"6px 8px",borderRadius:"6px",border:"1px solid #333",backgroundColor:"#2a2a2a",color:"#fff",fontSize:"14px"}}),e.createElement("button",{onClick:x,disabled:!u.trim(),style:{padding:"6px 10px",borderRadius:"6px",border:"none",backgroundColor:u.trim()?"#dc3545":"#555",color:"#fff",cursor:u.trim()?"pointer":"not-allowed",fontSize:"14px",fontWeight:"bold",whiteSpace:"nowrap"}},"Add"))),e.createElement("div",{style:{marginBottom:"12px"}},e.createElement("div",{style:{color:"#4CAF50",fontSize:"0.9rem",fontWeight:"bold",marginBottom:"6px",textAlign:"left"}},"✅ Selected (",i.length,")"),e.createElement("div",{style:{maxHeight:"120px",overflowY:"auto",padding:"6px",backgroundColor:"rgba(76, 175, 80, 0.05)",borderRadius:"6px",border:"1px solid rgba(76, 175, 80, 0.2)"}},i.length>0?e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"4px"}},i.map((_,P)=>e.createElement("div",{key:P,onClick:()=>w(_),style:{cursor:"pointer",padding:"4px 8px",borderRadius:"4px",background:"rgba(76, 175, 80, 0.2)",border:"1px solid rgba(76, 175, 80, 0.4)",color:"#4CAF50",fontSize:"0.75rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center",transition:"all 0.2s ease"},onMouseEnter:B=>{B.target.style.background="rgba(76, 175, 80, 0.3)",B.target.style.transform="scale(1.02)"},onMouseLeave:B=>{B.target.style.background="rgba(76, 175, 80, 0.2)",B.target.style.transform="scale(1)"}},"✓ ",String(_)))):e.createElement("div",{style:{color:"#888",fontSize:"0.8rem",textAlign:"center",fontStyle:"italic",padding:"8px"}},"No locations selected"))),e.createElement("div",{style:{marginBottom:"12px"}},e.createElement("div",{style:{color:"#ffc107",fontSize:"0.9rem",fontWeight:"bold",marginBottom:"6px",textAlign:"left"}},"➕ Available (",N.length,")"),e.createElement("div",{style:{maxHeight:"300px",overflowY:"auto",padding:"6px",backgroundColor:"rgba(255, 193, 7, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 193, 7, 0.2)"}},N.length>0?e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"4px"}},N.map((_,P)=>e.createElement("div",{key:P,onClick:()=>w(_),style:{cursor:"pointer",padding:"4px 8px",borderRadius:"4px",background:i.includes(_)?"rgba(255, 193, 7, 0.3)":"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.4)",color:"#ffc107",fontSize:"0.75rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center",transition:"all 0.2s ease"},onMouseEnter:B=>{i.includes(_)||(B.target.style.background="rgba(255, 193, 7, 0.2)",B.target.style.transform="scale(1.02)")},onMouseLeave:B=>{i.includes(_)||(B.target.style.background="rgba(255, 193, 7, 0.1)",B.target.style.transform="scale(1)")}},i.includes(_)?"✓ ":"",String(_)))):e.createElement("div",{style:{color:"#888",fontSize:"0.8rem",textAlign:"center",fontStyle:"italic",padding:"8px"}},g?"No locations match your search":"No available locations to add"))),e.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",paddingTop:"8px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("button",{onClick:r,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid #555",backgroundColor:"transparent",color:"#888",cursor:"pointer",fontSize:"14px"}},"Cancel"),e.createElement("button",{onClick:k,style:{padding:"8px 16px",borderRadius:"6px",border:"none",backgroundColor:"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"bold"}},"Save Locations")))))};class Zz{constructor(){this.isSupported="Notification"in window,this.permission=this.isSupported?Notification.permission:"denied",this.isEnabled=!1}async requestPermission(){if(!this.isSupported)return console.warn("Browser notifications are not supported"),!1;if(this.permission==="granted")return this.isEnabled=!0,!0;if(this.permission==="denied")return console.warn("Notification permission was denied"),!1;try{const r=await Notification.requestPermission();return this.permission=r,this.isEnabled=r==="granted",this.isEnabled?(console.log("✅ Notification permission granted"),localStorage.setItem("notificationsEnabled","true")):(console.log("❌ Notification permission denied"),localStorage.setItem("notificationsEnabled","false")),this.isEnabled}catch(r){return console.error("Error requesting notification permission:",r),!1}}isNotificationEnabled(){return this.isSupported?localStorage.getItem("notificationsEnabled")==="true"&&this.permission==="granted"?(this.isEnabled=!0,!0):this.isEnabled:!1}showNotification(r,t,n={}){if(!this.isNotificationEnabled())return console.log("Notifications not enabled, skipping:",r),null;try{const o=new Notification(r,{body:t,icon:n.icon||"/favicon.ico",badge:n.badge||"/favicon.ico",tag:n.tag||"ladder-notification",requireInteraction:n.requireInteraction||!1,silent:n.silent||!1,data:n.data||{}});return n.requireInteraction||setTimeout(()=>{o.close()},5e3),o.onclick=()=>{window.focus(),o.close(),n.data&&n.data.route&&n.onClick&&n.onClick(n.data)},o}catch(o){return console.error("Error showing notification:",o),null}}showChallengeNotification(r){const{challenger:t,challengeType:n,matchDetails:o}=r,i="🎯 New Challenge!",c=`${t.firstName} ${t.lastName} challenged you to a ${n} match!`;return this.showNotification(i,c,{tag:`challenge-${r._id}`,requireInteraction:!0,data:{type:"challenge",challengeId:r._id,route:"/ladder"}})}showChallengeAcceptedNotification(r){const{defender:t,challengeType:n}=r,o="✅ Challenge Accepted!",i=`${t.firstName} ${t.lastName} accepted your ${n} challenge!`;return this.showNotification(o,i,{tag:`challenge-accepted-${r._id}`,data:{type:"challenge-accepted",challengeId:r._id,route:"/ladder"}})}showChallengeDeclinedNotification(r){const{defender:t,challengeType:n}=r,o="❌ Challenge Declined",i=`${t.firstName} ${t.lastName} declined your ${n} challenge.`;return this.showNotification(o,i,{tag:`challenge-declined-${r._id}`,data:{type:"challenge-declined",challengeId:r._id,route:"/ladder"}})}showCounterProposalNotification(r){const{defender:t,challengeType:n}=r,o="🔄 Counter-Proposal!",i=`${t.firstName} ${t.lastName} submitted a counter-proposal to your ${n} challenge!`;return this.showNotification(o,i,{tag:`counter-proposal-${r._id}`,requireInteraction:!0,data:{type:"counter-proposal",challengeId:r._id,route:"/ladder"}})}showMatchReminderNotification(r){const{player1:t,player2:n,matchDate:o,location:i}=r,c="📅 Match Reminder",u=`Your match between ${t.firstName} ${t.lastName} and ${n.firstName} ${n.lastName} is coming up!`;return this.showNotification(c,u,{tag:`match-reminder-${r._id}`,data:{type:"match-reminder",matchId:r._id,route:"/ladder"}})}showLadderUpdateNotification(r){const{oldPosition:t,newPosition:n,ladderName:o}=r,i="📈 Ladder Update!",c=`You moved from position ${t} to position ${n} on the ${o} ladder!`;return this.showNotification(i,c,{tag:`ladder-update-${Date.now()}`,data:{type:"ladder-update",route:"/ladder"}})}disableNotifications(){this.isEnabled=!1,localStorage.setItem("notificationsEnabled","false"),console.log("Notifications disabled")}async enableNotifications(){return this.permission==="granted"?(this.isEnabled=!0,localStorage.setItem("notificationsEnabled","true"),console.log("Notifications enabled"),!0):await this.requestPermission()}getStatus(){return{isSupported:this.isSupported,permission:this.permission,isEnabled:this.isEnabled,canRequest:this.permission==="default"}}}const Hn=new Zz,aS=({isOpen:a,onClose:r,currentUser:t,isMobile:n,onUserUpdate:o})=>{const[i,c]=h.useState(null),[u,m]=h.useState({}),[g,f]=h.useState(t),[y,v]=h.useState([]),[S,w]=h.useState(!1),[x,k]=h.useState(0);h.useEffect(()=>{f(t)},[t]),h.useEffect(()=>{console.log("🔄 localUser state updated:",g)},[g]),h.useEffect(()=>{console.log("🔄 refreshTrigger changed to:",x)},[x]),h.useEffect(()=>{(async()=>{var W,L,F;if(a&&(t!=null&&t.email))try{console.log("🔄 Loading profile data for:",t.email);const J=`http://localhost:8080/api/unified-auth/profile-data?email=${encodeURIComponent(t.email)}&appType=league&t=${Date.now()}`;console.log("📡 Fetching from URL:",J);const Y=await fetch(J);if(console.log("📥 Response status:",Y.status),console.log("📥 Response ok:",Y.ok),Y.ok){const D=await Y.json();console.log("✅ Loaded profile data:",D),console.log("📍 Locations from API:",(W=D.profile)==null?void 0:W.locations),console.log("⏰ Availability from API:",(L=D.profile)==null?void 0:L.availability),console.log("📞 Phone from API:",(F=D.profile)==null?void 0:F.phone),f(A=>{var K,X,O,Q,ne;const U={...A,locations:((K=D.profile)==null?void 0:K.locations)||"",availability:((X=D.profile)==null?void 0:X.availability)||{},phone:((O=D.profile)==null?void 0:O.phone)||"",divisions:((Q=D.profile)==null?void 0:Q.divisions)||[],ladderInfo:((ne=D.profile)==null?void 0:ne.ladderInfo)||null};return console.log("🔄 Updated localUser:",U),U})}else{const D=await Y.text();console.error("❌ Failed to load profile data. Status:",Y.status),console.error("❌ Error response:",D)}}catch(j){console.error("💥 Error loading profile data:",j)}else console.log("⚠️ Modal not open or no email:",{isOpen:a,email:t==null?void 0:t.email})})()},[a,t==null?void 0:t.email]),h.useEffect(()=>{(async()=>{if(a)try{console.log("🔄 Loading available locations...");const L=await fetch("http://localhost:8080/api/locations");if(console.log("📡 Locations API response status:",L.status),L.ok){const F=await L.json();console.log("📥 Locations API data:",F);const j=F.locations||[];console.log("🔍 Raw locations structure:",j);const J=j.map(Y=>{if(typeof Y=="string")return console.log(`  ✅ String location: "${Y}"`),Y;if(Y&&typeof Y=="object"){console.log("  🔍 Object location:",Y);const D=Y.name||Y.locationName||Y.title||Y.location||Y.value||JSON.stringify(Y);return console.log(`  📍 Extracted name: "${D}"`),D}else return console.log("  ⚠️ Other type location:",Y),String(Y)}).filter(Boolean);console.log("📍 Final processed locations:",J),console.log("📍 Setting availableLocations to:",J),v(J)}else console.error("❌ Failed to load locations. Status:",L.status)}catch(W){console.error("💥 Error loading locations:",W)}})()},[a]);const E=(R,W)=>{c(R),m(W)},I=()=>{c(null),m({})},M=async R=>{var W;try{console.log("Saving section:",R),console.log("Edit data:",u),console.log("Current user:",t),console.log("User ID:",t==null?void 0:t._id),console.log("User email:",t==null?void 0:t.email),console.log("All user fields:",Object.keys(t||{})),console.log("Environment VITE_BACKEND_URL:",void 0);const L=t==null?void 0:t.email;if(!L){console.error("No valid user email found"),alert("Error: No valid user email found. Please refresh the page and try again.");return}console.log("Using user email:",L);const F="http://localhost:8080";console.log("Using backend URL:",F);const j=await fetch(`${F}/api/users/${encodeURIComponent(L)}`);if(!j.ok){console.error("Failed to fetch user by email"),alert("Error: Failed to fetch user data. Please refresh the page and try again.");return}const J=await j.json(),Y=((W=J.user)==null?void 0:W._id)||J._id;if(!Y){console.error("No user ID found in response"),alert("Error: No user ID found. Please refresh the page and try again.");return}console.log("Found user ID:",Y);let D=R,A;R==="basic"?A={firstName:u.firstName,lastName:u.lastName,email:u.email,phone:u.phone}:R==="locations"?A=u.locations:R==="availability"?A=u.availability:A=u[R],console.log("Sending unified profile update:",{fieldName:D,fieldValue:A});const U=await fetch(`${F}/api/unified-auth/update-profile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:Y,email:L,appType:"league",updates:{[D]:A}})});if(!U.ok){const X=await U.json();throw new Error(X.error||"Failed to update profile")}const K=await U.json();console.log("Unified profile update successful:",K);try{const X=await fetch(`${F}/api/unified-auth/profile-data?email=${encodeURIComponent(L)}&appType=league&t=${Date.now()}`);if(X.ok){const O=await X.json();console.log("Refreshed league profile data:",O),f(Q=>({...Q,locations:O.profile.locations||"",availability:O.profile.availability||{}})),o&&o()}}catch(X){console.error("Error refreshing profile data:",X)}c(null),m({}),alert("✅ League profile updated successfully!")}catch(L){console.error("Error updating profile:",L),alert("Error updating profile. Please try again.")}},N=(R,W)=>{m(L=>({...L,[R]:W}))},_=async R=>{var W;try{console.log("🔄 Starting location save process..."),console.log("📍 New locations string:",R),f(A=>{const U={...A,locations:R};return console.log("🔄 Updated localUser immediately:",U),U}),k(A=>A+1),console.log("🔄 Triggered refresh for immediate update");const L=t==null?void 0:t.email;if(!L){console.error("No valid user email found"),alert("Error: No valid user email found. Please refresh the page and try again.");return}const F="http://localhost:8080",j=await fetch(`${F}/api/users/${encodeURIComponent(L)}`);if(!j.ok){console.error("Failed to fetch user by email"),alert("Error: Failed to fetch user data. Please refresh the page and try again.");return}const J=await j.json(),Y=((W=J.user)==null?void 0:W._id)||J._id;if(!Y){console.error("No user ID found in response"),alert("Error: No user ID found. Please refresh the page and try again.");return}const D=await fetch(`${F}/api/unified-auth/update-profile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:Y,email:L,appType:"league",updates:{locations:R}})});if(!D.ok){const A=await D.json();throw new Error(A.error||"Failed to update locations")}console.log("✅ Locations updated successfully in backend"),c(null),k(A=>A+1),console.log("🔄 Final refresh triggered after backend save"),o&&o()}catch(L){console.error("Error saving locations:",L),alert("Error saving locations. Please try again.")}},P=()=>{try{const R=g.locations||"";if(console.log("🔍 getUserLocations called with refreshTrigger:",x),console.log("🔍 Current locations data:",R),console.log("🔍 localUser.locations:",g.locations),!R)return[];if(typeof R=="string")if(R.includes(`
`)){const W=R.split(`
`).filter(Boolean).map(L=>String(L).trim());return console.log("🔍 Parsed newline locations:",W),W}else if(R.includes(",")){const W=R.split(",").map(L=>String(L).trim()).filter(Boolean);return console.log("🔍 Parsed comma locations:",W),W}else{const W=R.trim()?[String(R).trim()]:[];return console.log("🔍 Parsed single location:",W),W}if(Array.isArray(R)){const W=R.map(L=>String(L).trim()).filter(Boolean);return console.log("🔍 Parsed array locations:",W),W}return console.log("🔍 No valid locations found, returning empty array"),[]}catch(R){return console.error("❌ Error in getUserLocations:",R),[]}};if(!a||!g)return null;const B=g.divisions||[];return console.log("🎯 Modal rendering with localUser:",g),console.log("📍 Current locations:",g.locations),console.log("⏰ Current availability:",g.availability),console.log("📞 Current phone:",g.phone),Jr.createPortal(e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)",padding:n?"10px":"20px"},onClick:r},e.createElement("div",{style:{transform:"translate(0px, 0px)",cursor:"default",background:"linear-gradient(120deg, #232323 80%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:n?"0":"1rem",boxShadow:"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",width:n?"95vw":"auto",maxWidth:n?"95vw":"750px",minWidth:n?"auto":"500px",margin:n?"0":"0 auto",left:0,right:0,animation:"modalBounceIn 0.5s cubic-bezier(.21,1.02,.73,1.01)",padding:0,position:"relative",fontFamily:"inherit",boxSizing:"border-box",textAlign:"center",maxHeight:n?"70vh":"75vh",overflowY:"auto"},onClick:R=>R.stopPropagation()},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#e53e3e",padding:"0.8rem 1rem 0.6rem 1rem",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",position:"relative",cursor:"grab",userSelect:"none",gap:"0.8rem"}},e.createElement("span",{style:{position:"absolute",left:0,top:0,width:"100%",height:"4px",background:"linear-gradient(90deg, #fff0 0%, #e53e3e 60%, #fff0 100%)",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",pointerEvents:"none"}}),e.createElement("h2",{style:{margin:0,fontSize:n?"0.9rem":"1rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.02em",color:"#fff",textShadow:"0 1px 12px #000a",zIndex:2,flex:1,wordBreak:"break-word",minWidth:0}},"👤 Profile Information"),e.createElement("button",{onClick:r,style:{background:"none",border:"none",color:"#fff",fontSize:"1.5rem",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",minWidth:"24px",zIndex:3},onMouseEnter:R=>R.target.style.backgroundColor="rgba(255, 255, 255, 0.1)",onMouseLeave:R=>R.target.style.backgroundColor="transparent"},"×")),e.createElement("div",{style:{padding:n?"0.8rem":"1rem",overflowY:"auto",maxHeight:n?"calc(60vh - 80px)":"calc(65vh - 80px)"}},e.createElement("div",{style:{display:"grid",gap:n?"8px":"10px"}},e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:n?"6px":"8px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"}},e.createElement("div",{style:{fontWeight:"bold",color:"#ffffff",fontSize:n?"0.9rem":"1rem"}},"👤 Basic Information"),i!=="basic"&&e.createElement("button",{onClick:()=>E("basic",{firstName:g.firstName||"",lastName:g.lastName||"",email:g.email||"",phone:g.phone||""}),style:{background:"rgba(76, 175, 80, 0.2)",border:"1px solid rgba(76, 175, 80, 0.4)",color:"#4CAF50",padding:"4px 8px",borderRadius:"4px",fontSize:n?"0.7rem":"0.8rem",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:R=>R.target.style.background="rgba(76, 175, 80, 0.3)",onMouseLeave:R=>R.target.style.background="rgba(76, 175, 80, 0.2)"},"✏️ Edit")),i==="basic"?e.createElement("div",{style:{display:"grid",gap:"8px"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"}},e.createElement("input",{type:"text",value:u.firstName||"",onChange:R=>N("firstName",R.target.value),placeholder:"First Name",style:{padding:"8px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(0, 0, 0, 0.3)",color:"#ffffff",fontSize:"0.9rem"}}),e.createElement("input",{type:"text",value:u.lastName||"",onChange:R=>N("lastName",R.target.value),placeholder:"Last Name",style:{padding:"8px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(0, 0, 0, 0.3)",color:"#ffffff",fontSize:"0.9rem"}})),e.createElement("input",{type:"email",value:u.email||"",onChange:R=>N("email",R.target.value),placeholder:"Email",style:{padding:"8px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(0, 0, 0, 0.3)",color:"#ffffff",fontSize:"0.9rem"}}),e.createElement("input",{type:"tel",value:u.phone||"",onChange:R=>N("phone",R.target.value),placeholder:"Phone",style:{padding:"8px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(0, 0, 0, 0.3)",color:"#ffffff",fontSize:"0.9rem"}}),e.createElement("div",{style:{display:"flex",gap:"8px",justifyContent:"center"}},e.createElement("button",{onClick:()=>M("basic"),style:{background:"#4CAF50",color:"#fff",border:"none",padding:"6px 12px",borderRadius:"4px",fontSize:"0.8rem",cursor:"pointer"}},"💾 Save"),e.createElement("button",{onClick:I,style:{background:"#6c757d",color:"#fff",border:"none",padding:"6px 12px",borderRadius:"4px",fontSize:"0.8rem",cursor:"pointer"}},"❌ Cancel"))):e.createElement("div",{style:{color:"#cccccc",lineHeight:"1.4",fontSize:n?"0.85rem":"0.9rem"}},e.createElement("div",null,e.createElement("strong",null,"Name:")," ",g.firstName," ",g.lastName),e.createElement("div",null,e.createElement("strong",null,"Email:")," ",g.email),e.createElement("div",null,e.createElement("strong",null,"Phone:")," ",g.phone||"Not provided"))),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:n?"6px":"8px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"}},e.createElement("div",{style:{fontWeight:"bold",color:"#ffffff",fontSize:n?"0.9rem":"1rem"}},"⏰ Availability"),i!=="availability"&&e.createElement("button",{onClick:()=>E("availability",{availability:g.availability||{}}),style:{background:"rgba(76, 175, 80, 0.2)",border:"1px solid rgba(76, 175, 80, 0.4)",color:"#4CAF50",padding:"4px 8px",borderRadius:"4px",fontSize:n?"0.7rem":"0.8rem",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:R=>R.target.style.background="rgba(76, 175, 80, 0.3)",onMouseLeave:R=>R.target.style.background="rgba(76, 175, 80, 0.2)"},"✏️ Edit")),i==="availability"?e.createElement("div",{style:{display:"grid",gap:"6px"}},e.createElement("div",{style:{color:"#ffc107",fontSize:"0.85rem",fontWeight:"bold",marginBottom:"4px"}},"Quick Time Slot Editor:"),e.createElement("div",{style:{padding:"4px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"3px",border:"1px solid rgba(255, 255, 255, 0.08)"}},e.createElement("div",{style:{color:"#4CAF50",fontSize:"0.8rem",fontWeight:"bold",marginBottom:"3px"}},"➕ Quick Add:"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr auto",gap:"3px",alignItems:"end"}},e.createElement("select",{id:"quick-day",style:{padding:"3px 4px",borderRadius:"3px",border:"1px solid rgba(255, 255, 255, 0.15)",background:"rgba(0, 0, 0, 0.4)",color:"#ffffff",fontSize:"0.8rem",minHeight:"24px"}},e.createElement("option",{value:""},"Day"),e.createElement("option",{value:"Mon"},"Mon"),e.createElement("option",{value:"Tue"},"Tue"),e.createElement("option",{value:"Wed"},"Wed"),e.createElement("option",{value:"Thu"},"Thu"),e.createElement("option",{value:"Fri"},"Fri"),e.createElement("option",{value:"Sat"},"Sat"),e.createElement("option",{value:"Sun"},"Sun")),e.createElement("input",{type:"time",id:"quick-start",style:{padding:"3px 4px",borderRadius:"3px",border:"1px solid rgba(255, 255, 255, 0.15)",background:"rgba(0, 0, 0, 0.4)",color:"#ffffff",fontSize:"0.8rem",minHeight:"24px"}}),e.createElement("input",{type:"time",id:"quick-end",style:{padding:"3px 4px",borderRadius:"3px",border:"1px solid rgba(255, 255, 255, 0.15)",background:"rgba(0, 0, 0, 0.4)",color:"#ffffff",fontSize:"0.8rem",minHeight:"24px"}}),e.createElement("button",{type:"button",onClick:()=>{var K,X;const R=document.getElementById("quick-day"),W=document.getElementById("quick-start"),L=document.getElementById("quick-end"),F=R.value,j=W.value,J=L.value;if(!F||!j||!J){alert("Please select day, start, and end times.");return}if(j>=J){alert("End time must be after start time.");return}const Y=O=>{const[Q,ne]=O.split(":"),T=parseInt(Q),re=T>=12?"PM":"AM";return`${T%12||12}:${ne} ${re}`},D=`${Y(j)} - ${Y(J)}`,A=((K=u.availability)==null?void 0:K[F])||((X=g.availability)==null?void 0:X[F])||[];if(A.includes(D)){alert("This time slot already exists.");return}const U=[...A,D];m(O=>({...O,availability:{...O.availability,[F]:U}})),R.value="",W.value="",L.value=""},style:{background:"rgba(76, 175, 80, 0.3)",border:"1px solid rgba(76, 175, 80, 0.5)",color:"#4CAF50",padding:"3px 6px",borderRadius:"3px",fontSize:"0.75rem",cursor:"pointer",fontWeight:"bold",minHeight:"24px"}},"Add"))),e.createElement("div",{style:{padding:"4px",background:"rgba(255, 255, 255, 0.02)",borderRadius:"3px",border:"1px solid rgba(255, 255, 255, 0.05)"}},e.createElement("div",{style:{color:"#4CAF50",fontSize:"0.8rem",fontWeight:"bold",marginBottom:"3px"}},"📅 Current Slots:"),e.createElement("div",{style:{display:"grid",gap:"2px",maxHeight:"120px",overflowY:"auto"}},Object.entries(u.availability||g.availability||{}).map(([R,W])=>W&&W.length>0?W.map((L,F)=>e.createElement("div",{key:`${R}-${F}`,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"2px 4px",background:"rgba(76, 175, 80, 0.08)",borderRadius:"2px",border:"1px solid rgba(76, 175, 80, 0.2)"}},e.createElement("span",{style:{color:"#4CAF50",fontSize:"0.75rem",fontWeight:"500"}},e.createElement("strong",null,R,":")," ",L),e.createElement("button",{type:"button",onClick:()=>{const j=W.filter((J,Y)=>Y!==F);m(J=>({...J,availability:{...J.availability,[R]:j}}))},style:{background:"rgba(220, 53, 69, 0.2)",border:"1px solid rgba(220, 53, 69, 0.3)",color:"#dc3545",padding:"2px 4px",borderRadius:"2px",fontSize:"0.7rem",cursor:"pointer",fontWeight:"bold"}},"✕"))):null).flat().filter(Boolean))),e.createElement("div",{style:{display:"flex",gap:"6px",justifyContent:"center"}},e.createElement("button",{onClick:()=>M("availability"),style:{background:"#4CAF50",color:"#fff",border:"none",padding:"4px 8px",borderRadius:"3px",fontSize:"0.7rem",cursor:"pointer"}},"💾 Save"),e.createElement("button",{onClick:I,style:{background:"#6c757d",color:"#fff",border:"none",padding:"4px 8px",borderRadius:"3px",fontSize:"0.7rem",cursor:"pointer"}},"❌ Cancel"))):e.createElement("div",{style:{color:"#cccccc",lineHeight:"1.4",fontSize:n?"0.85rem":"0.9rem"}},g.availability&&Object.keys(g.availability).length>0?(()=>{const R=Object.entries(g.availability).filter(([L,F])=>F&&F.length>0);if(R.length===0)return"No availability set";const W={Mon:"Mon",Tue:"Tue",Wed:"Wed",Thu:"Thu",Fri:"Fri",Sat:"Sat",Sun:"Sun"};return e.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"repeat(2, 1fr)",gap:"6px"}},R.map(([L,F])=>e.createElement("div",{key:L,style:{padding:"4px 6px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)",fontSize:"0.85rem"}},e.createElement("span",{style:{fontWeight:"bold",color:"#ffc107"}},W[L],":")," ",F.join(", "))))})():"No availability set")),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:n?"6px":"8px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"}},e.createElement("div",{style:{fontWeight:"bold",color:"#ffffff",fontSize:n?"0.9rem":"1rem"}},"📍 Preferred Locations"),i!=="locations"&&e.createElement("button",{onClick:()=>w(!0),style:{background:"rgba(76, 175, 80, 0.2)",border:"1px solid rgba(76, 175, 80, 0.4)",color:"#4CAF50",padding:"4px 8px",borderRadius:"4px",fontSize:n?"0.7rem":"0.8rem",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:R=>R.target.style.background="rgba(76, 175, 80, 0.3)",onMouseLeave:R=>R.target.style.background="rgba(76, 175, 80, 0.2)"},"✏️ Edit")),e.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"repeat(2, 1fr)":"repeat(3, 1fr)",gap:"6px"},key:x},(()=>{try{const R=P();return!R||R.length===0?e.createElement("span",{style:{color:"#888",fontSize:"0.8rem",fontStyle:"italic",gridColumn:"1 / -1",textAlign:"center",padding:"10px"}},"No locations selected"):R.map((W,L)=>e.createElement("span",{key:`${W}-${L}-${x}`,style:{background:"rgba(255, 255, 255, 0.1)",color:"#ffffff",padding:"5px 8px",borderRadius:"8px",fontSize:n?"0.75rem":"0.8rem",display:"flex",justifyContent:"center",alignItems:"center",gap:"3px",width:"100%",minHeight:"24px",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:String(W)},"📍 ",String(W)))}catch(R){return console.error("❌ Error rendering locations display:",R),e.createElement("span",{style:{color:"#ff6b6b",fontSize:"0.8rem",fontStyle:"italic",gridColumn:"1 / -1",textAlign:"center",padding:"10px"}},"Error loading locations")}})())),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:n?"6px":"8px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("div",{style:{fontWeight:"bold",color:"#ffffff",marginBottom:"4px",fontSize:n?"0.9rem":"1rem"}},"🏆 League & Ladder Status"),e.createElement("div",{style:{display:"flex",gap:"16px",flexDirection:n?"column":"row"}},e.createElement("div",{style:{flex:1,minWidth:n?"auto":"200px"}},e.createElement("div",{style:{color:"#4CAF50",fontWeight:"bold",fontSize:n?"0.8rem":"0.9rem",marginBottom:"2px"}},"🏆 League Divisions:"),e.createElement("div",{style:{color:"#cccccc",lineHeight:"1.5",fontSize:n?"0.8rem":"0.9rem",paddingLeft:"8px"}},B.length>0?B.join(", "):"No divisions assigned")),e.createElement("div",{style:{flex:1,minWidth:n?"auto":"200px"}},e.createElement("div",{style:{color:"#FF9800",fontWeight:"bold",fontSize:n?"0.8rem":"0.9rem",marginBottom:"2px"}},"🏅 Ladder Status:"),e.createElement("div",{style:{color:"#cccccc",lineHeight:"1.5",fontSize:n?"0.8rem":"0.9rem",paddingLeft:"8px"}},g.ladderInfo?e.createElement("div",null,e.createElement("div",null,"📊 Ladder: ",g.ladderInfo.ladderName),e.createElement("div",null,"🏆 Position: ",g.ladderInfo.position)):"Not on any ladder")))),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:n?"6px":"8px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("div",{style:{fontWeight:"bold",color:"#ffffff",marginBottom:"4px",fontSize:n?"0.9rem":"1rem"}},"🔔 Notification Preferences"),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0"}},e.createElement("div",{style:{color:"#cccccc",fontSize:n?"0.85rem":"0.9rem",display:"flex",alignItems:"center",gap:"8px"}},e.createElement("span",null,"🔔 Browser Notifications:"),e.createElement("span",{style:{color:Hn.isNotificationEnabled()?"#4CAF50":"#f44336",fontWeight:"bold"}},Hn.isNotificationEnabled()?"Enabled":"Disabled")),e.createElement("div",{style:{display:"flex",gap:"6px"}},Hn.isNotificationEnabled()?e.createElement("button",{onClick:async()=>{Hn.disableNotifications(),k(R=>R+1)},style:{background:"rgba(244, 67, 54, 0.2)",border:"1px solid rgba(244, 67, 54, 0.4)",color:"#f44336",padding:"4px 8px",borderRadius:"4px",fontSize:n?"0.7rem":"0.8rem",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:R=>R.target.style.background="rgba(244, 67, 54, 0.3)",onMouseLeave:R=>R.target.style.background="rgba(244, 67, 54, 0.2)"},"🔕 Disable"):e.createElement("button",{onClick:async()=>{await Hn.enableNotifications()&&k(W=>W+1)},style:{background:"rgba(76, 175, 80, 0.2)",border:"1px solid rgba(76, 175, 80, 0.4)",color:"#4CAF50",padding:"4px 8px",borderRadius:"4px",fontSize:n?"0.7rem":"0.8rem",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:R=>R.target.style.background="rgba(76, 175, 80, 0.3)",onMouseLeave:R=>R.target.style.background="rgba(76, 175, 80, 0.2)"},"🔔 Enable"))),e.createElement("div",{style:{color:"#9ca3af",fontSize:n?"0.75rem":"0.8rem",fontStyle:"italic",marginTop:"4px"}},Hn.getStatus().permission==="denied"?"⚠️ Notifications are blocked by your browser. Check your browser settings to enable them.":Hn.getStatus().permission==="default"?'💡 Click "Enable" to allow browser notifications for match updates and challenges.':"✅ You'll receive instant alerts for challenges, match updates, and ladder changes."))),e.createElement("div",{style:{marginTop:"20px",textAlign:"center"}},e.createElement("button",{style:{background:"linear-gradient(135deg, #6c757d, #5a6268)",color:"#fff",border:"none",borderRadius:"8px",padding:n?"10px 20px":"12px 24px",fontSize:n?"0.9rem":"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(108, 117, 125, 0.3)",minWidth:n?"100px":"120px"},onMouseEnter:R=>{R.target.style.background="linear-gradient(135deg, #5a6268, #495057)",R.target.style.transform="translateY(-1px)",R.target.style.boxShadow="0 4px 12px rgba(108, 117, 125, 0.4)"},onMouseLeave:R=>{R.target.style.background="linear-gradient(135deg, #6c757d, #5a6268)",R.target.style.transform="translateY(0)",R.target.style.boxShadow="0 2px 8px rgba(108, 117, 125, 0.3)"},onClick:r},"❌ Close")))),e.createElement(Gz,{isOpen:S,onClose:()=>w(!1),currentLocations:g.locations||"",availableLocations:y,onSave:_})),document.body)},nS=({showEditProposalModal:a,showChatModal:r,showCompletedModal:t,winnerModalOpen:n,validationModalOpen:o,showSmartMatchmakingModal:i,showUserProfileModal:c,showPhase1Rules:u,showPhase1Overview:m,showRegistrationModal:g,showPendingRegistrationsModal:f,showCalendarModal:y,selectedProposal:v,chatType:S,opponentEmails:w,completedMatches:x,winnerModalPlayers:k,winnerModalMatch:E,matchToValidate:I,selectedOpponentForSmartMatch:M,pendingRegistrations:N,onCloseEditProposalModal:_,onCloseChatModal:P,onCloseCompletedModal:B,onCloseWinnerModal:R,onCloseValidationModal:W,onCloseSmartMatchmakingModal:L,onCloseUserProfileModal:F,onClosePhase1Rules:j,onClosePhase1Overview:J,onCloseRegistrationModal:Y,onClosePendingRegistrationsModal:D,onCloseCalendarModal:A,onSaveEditProposal:U,onProposalUpdated:K,onSelectWinner:X,onValidateMatch:O,onRejectMatch:Q,onSmartMatchProposalComplete:ne,onUserUpdate:T,onRegistrationSuccess:re,onApproveRegistration:G,onRejectRegistration:se,onOpenOpponentsModal:pe,onMatchClick:Se,onSmartMatchClick:at,selectedDivision:be,effectivePhase:Je,userPin:nt,playerName:Xe,playerLastName:ct,senderEmail:Ot,isMobile:Zt,currentUser:ft,players:Ft,filteredUpcomingMatches:ra,phase1EndDate:Wt,playerStats:he,standings:bt,timeLeft:$,deadlineStatus:ye,allPlayers:V,styles:ce,proposalService:ze,seasonService:Re,seasonData:Fe,currentPhaseInfo:We,BACKEND_URL:tt,markMatchCompleted:me,setCompletingMatchId:Ce,updateCompletedMatch:_e,refetchMatches:Qe,refetchProposals:qe,setPendingRegistrations:He})=>e.createElement(e.Fragment,null,v&&a&&e.createElement(v9,{proposal:v,open:a,onClose:_,onSave:U,selectedDivision:be,phase:Je,receiverPlayer:Ft.find(st=>{var Mt,Jt;return`${st.firstName} ${st.lastName}`.trim().toLowerCase()===(v.receiverName||"").trim().toLowerCase()||((Mt=st.email)==null?void 0:Mt.toLowerCase())===((Jt=v.receiverEmail)==null?void 0:Jt.toLowerCase())})}),r&&e.createElement("div",{className:ce.modalOverlay,style:{zIndex:99999}},e.createElement("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"95vw",height:"95vh",maxWidth:"1400px",maxHeight:"900px",background:"#181818",borderRadius:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",overflow:"hidden"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:"1px solid #333",background:"#222",borderRadius:"12px 12px 0 0"}},e.createElement("h2",{style:{margin:0,color:"#ffffff",fontSize:"1.2em"}},S==="league"?"League Chat":"Direct Messages"),e.createElement("button",{onClick:P,style:{background:"none",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"background-color 0.2s"},onMouseOver:st=>st.target.style.background="#444",onMouseOut:st=>st.target.style.background="none",type:"button"},"×")),e.createElement("div",{style:{flex:1,overflow:"hidden",position:"relative"}},S==="league"?e.createElement(Lw,{userName:`${Xe} ${ct}`,userEmail:Ot,userPin:nt,onClose:P}):e.createElement(lB,{userName:`${Xe} ${ct}`,userEmail:Ot,userPin:nt,selectedDivision:be,opponentEmails:w,onClose:P})))),t&&e.createElement("div",{className:ce.modalOverlay},e.createElement("div",{className:ce.modalContent,style:{maxWidth:800,margin:"auto"}},e.createElement("h2",null,"Completed Matches"),e.createElement("div",{style:{maxHeight:"70vh",overflowY:"auto"}},x.length===0?e.createElement("p",null,"No completed matches yet."):e.createElement("div",{style:{display:"grid",gap:"10px"}},x.map((st,Mt)=>e.createElement("div",{key:st._id||Mt,style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",padding:"15px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("div",null,e.createElement("strong",null,st.senderName)," vs ",e.createElement("strong",null,st.receiverName)),e.createElement("div",{style:{color:"#4CAF50"}},"Winner: ",e.createElement("strong",null,st.winner))),st.notes&&e.createElement("p",{style:{margin:"5px 0 0 0",color:"#ccc",fontSize:"0.9em"}},"Notes: ",st.notes))))),e.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:15}},e.createElement("button",{className:ce.dashboardBtn,onClick:B,type:"button"},"Close")))),e.createElement(py,{open:n,onClose:R,player1:k.player1,player2:k.player2,onSelect:X}),e.createElement(nz,{isOpen:o,onClose:W,match:I,onValidate:O,onReject:Q}),e.createElement(lz,{isOpen:i,onClose:L,player1:ft,player2:M,upcomingMatches:ra,isMobile:Zt,selectedDivision:be,phase:Je,senderName:`${Xe} ${ct}`,senderEmail:Ot,onProposalComplete:ne}),e.createElement(aS,{isOpen:c,onClose:F,currentUser:ft,isMobile:Zt,onUserUpdate:T,availableLocations:["Legends Brews & Cues","Antiques","Rac m","Westside Billiards","Bijou Billiards","Crooked Cue","Back on the Boulevard","Main Street Tavern","Murray Street Darts","My House"]}),e.createElement(Ow,{isOpen:u,onClose:j,isMobile:Zt}),e.createElement(oz,{isOpen:m,onClose:J,isMobile:Zt,playerName:Xe,playerLastName:ct,completedMatches:x,totalRequiredMatches:0,playerStats:he,standings:bt,timeLeft:$,deadlineStatus:ye,phase1EndDate:Wt,allPlayers:V,selectedDivision:be}),e.createElement(sz,{isOpen:g,onClose:Y,onSuccess:re,isMobile:Zt,isAdmin:!0}),f&&e.createElement("div",{className:ce.modalOverlay,style:{zIndex:99999}},e.createElement("div",{className:ce.modalContent,style:{maxWidth:800,margin:"auto"}},e.createElement("h2",null,"Pending Registrations"),e.createElement("div",{style:{padding:"20px",maxHeight:"70vh",overflowY:"auto"}},N.length===0?e.createElement("div",{style:{textAlign:"center",color:"#ccc",padding:"40px"}},e.createElement("h3",null,"No Pending Registrations"),e.createElement("p",null,"All registrations have been processed.")):e.createElement("div",{style:{display:"grid",gap:"15px"}},N.sort((st,Mt)=>new Date(st.registrationDate)-new Date(Mt.registrationDate)).map((st,Mt)=>e.createElement("div",{key:st._id,style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",padding:"15px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"}},e.createElement("div",null,e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"5px"}},e.createElement("span",{style:{background:"#e53e3e",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold",minWidth:"20px",textAlign:"center"}},"#",Mt+1),e.createElement("h4",{style:{color:"#e53e3e",margin:"0"}},st.firstName," ",st.lastName)),e.createElement("p",{style:{color:"#ccc",margin:"0 0 5px 0"}},st.email," • ",st.phone),e.createElement("p",{style:{color:"#999",margin:"0 0 5px 0",fontSize:"12px"}},"Registered: ",new Date(st.registrationDate).toLocaleDateString()),e.createElement("p",{style:{color:"#999",margin:"0",fontSize:"12px"}},"Division: ",st.division||"Not assigned")),e.createElement("div",{style:{display:"flex",gap:"8px",flexDirection:"column",alignItems:"flex-end"}},e.createElement("div",{style:{marginBottom:"10px",textAlign:"right"}},e.createElement("label",{style:{color:"#ccc",fontSize:"12px",display:"block",marginBottom:"2px"}},"Assign Division:"),e.createElement("select",{id:`division-${st._id}`,defaultValue:st.division||"",style:{padding:"4px 8px",borderRadius:"4px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"12px",minWidth:"120px"}},e.createElement("option",{value:""},"Select Division"),e.createElement("option",{value:"FRBCAPL TEST"},"FRBCAPL TEST"),e.createElement("option",{value:"Singles Test"},"Singles Test"),e.createElement("option",{value:"Waiting List"},"Waiting List"))),e.createElement("div",{style:{display:"flex",gap:"8px"}},e.createElement("button",{onClick:()=>G(st),style:{background:"#4CAF50",color:"white",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"Approve"),e.createElement("button",{onClick:()=>se(st),style:{background:"#f44336",color:"white",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"Reject")))),e.createElement("div",{style:{marginTop:"10px"}},e.createElement("h5",{style:{color:"#e53e3e",margin:"0 0 5px 0",fontSize:"14px"}},"Availability:"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"5px",fontSize:"12px"}},Object.entries(st.availability).map(([Jt,Yt])=>e.createElement("div",{key:Jt,style:{color:"#ccc"}},e.createElement("strong",null,Jt,":")," ",Yt.length>0?Yt.join(", "):"None")))),e.createElement("div",{style:{marginTop:"10px"}},e.createElement("h5",{style:{color:"#e53e3e",margin:"0 0 5px 0",fontSize:"14px"}},"Locations:"),e.createElement("p",{style:{color:"#ccc",margin:"0",fontSize:"12px"}},st.locations)))))),e.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:15}},e.createElement("button",{className:ce.dashboardBtn,onClick:D,type:"button"},"Close")))),e.createElement(az,{isOpen:y,onClose:A,isMobile:Zt,phase1EndDate:Wt,upcomingMatches:ra,playerName:Xe,playerLastName:ct,onOpenOpponentsModal:pe,onMatchClick:Se,onSmartMatchClick:at}));nS.propTypes={showEditProposalModal:ee.bool,showChatModal:ee.bool,showCompletedModal:ee.bool,winnerModalOpen:ee.bool,validationModalOpen:ee.bool,showSmartMatchmakingModal:ee.bool,showUserProfileModal:ee.bool,showPhase1Rules:ee.bool,showPhase1Overview:ee.bool,showRegistrationModal:ee.bool,showPendingRegistrationsModal:ee.bool,showCalendarModal:ee.bool,selectedProposal:ee.object,chatType:ee.string,opponentEmails:ee.array,completedMatches:ee.array,winnerModalPlayers:ee.object,winnerModalMatch:ee.object,matchToValidate:ee.object,selectedOpponentForSmartMatch:ee.object,pendingRegistrations:ee.array,onCloseEditProposalModal:ee.func.isRequired,onCloseChatModal:ee.func.isRequired,onCloseCompletedModal:ee.func.isRequired,onCloseWinnerModal:ee.func.isRequired,onCloseValidationModal:ee.func.isRequired,onCloseSmartMatchmakingModal:ee.func.isRequired,onCloseUserProfileModal:ee.func.isRequired,onClosePhase1Rules:ee.func.isRequired,onClosePhase1Overview:ee.func.isRequired,onCloseRegistrationModal:ee.func.isRequired,onClosePendingRegistrationsModal:ee.func.isRequired,onCloseCalendarModal:ee.func.isRequired,onSaveEditProposal:ee.func.isRequired,onProposalUpdated:ee.func.isRequired,onSelectWinner:ee.func.isRequired,onValidateMatch:ee.func.isRequired,onRejectMatch:ee.func.isRequired,onSmartMatchProposalComplete:ee.func.isRequired,onUserUpdate:ee.func.isRequired,onRegistrationSuccess:ee.func.isRequired,onApproveRegistration:ee.func.isRequired,onRejectRegistration:ee.func.isRequired,onOpenOpponentsModal:ee.func.isRequired,onMatchClick:ee.func.isRequired,onSmartMatchClick:ee.func.isRequired,selectedDivision:ee.string.isRequired,effectivePhase:ee.string.isRequired,userPin:ee.string,playerName:ee.string.isRequired,playerLastName:ee.string.isRequired,senderEmail:ee.string.isRequired,isMobile:ee.bool.isRequired,currentUser:ee.object,players:ee.array,filteredUpcomingMatches:ee.array,phase1EndDate:ee.string,playerStats:ee.object,standings:ee.array,timeLeft:ee.string,deadlineStatus:ee.string,allPlayers:ee.array,styles:ee.object.isRequired,proposalService:ee.object.isRequired,seasonService:ee.object.isRequired,seasonData:ee.object,currentPhaseInfo:ee.object,BACKEND_URL:ee.string.isRequired,markMatchCompleted:ee.func.isRequired,setCompletingMatchId:ee.func.isRequired,updateCompletedMatch:ee.func.isRequired,refetchMatches:ee.func.isRequired,refetchProposals:ee.func.isRequired,setPendingRegistrations:ee.func.isRequired};function ex(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-");return`${c}-${u}-${i}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}function rS({playerName:a,playerLastName:r,onOpenChat:t,userPin:n,onGoToAdmin:o,onScheduleMatch:i,senderEmail:c,onGoToPlatformAdmin:u,isAdmin:m}){const[g,f]=h.useState([]),[y,v]=h.useState(""),[S,w]=h.useState(!1),[x,k]=h.useState(!1),[E,I]=h.useState(!1),[M,N]=h.useState(null),[_,P]=h.useState(""),[B,R]=h.useState(!1),[W,L]=h.useState(!1),[F,j]=h.useState(null),[J,Y]=h.useState(!1),[D,A]=h.useState(""),[U,K]=h.useState(""),[X,O]=h.useState(null),[Q,ne]=h.useState(!1),[T,re]=h.useState(!1),[G,se]=h.useState(!1),[pe,Se]=h.useState("scheduled"),[at,be]=h.useState(!1),[Je,nt]=h.useState(null),[Xe,ct]=h.useState(!1),[Ot,Zt]=h.useState(!1),[ft,Ft]=h.useState(null),[ra,Wt]=h.useState(!1),[he,bt]=h.useState(null),[$,ye]=h.useState(!1),[V,ce]=h.useState(null),[ze,Re]=h.useState([]),[Fe,We]=h.useState(!1),[tt,me]=h.useState(0),[Ce,_e]=h.useState(0),[Qe,qe]=h.useState(0),He=`${a} ${r}`.trim(),{pendingProposals:st,sentProposals:Mt,loading:Jt,refetch:Yt,updateProposalLocally:ua}=Dw(He,y),ma=ft||pe,{matches:Oa,completedMatches:Pa,loading:ln,refetch:Fa,markMatchCompleted:cr,updateCompletedMatch:Rr}=Oz(He,y,ma),hn=()=>["frbcapl@gmail.com","sslampro@gmail.com"].includes(c.toLowerCase())&&n==="777777",{seasonData:Xt,currentPhaseInfo:ga,loading:Nn}=Fz(y),{standings:dr,loading:gr}=Wz(y),{notes:_n,loading:Z,refetch:Pe,updateNoteLocally:Ke}=Uz(),{scheduledMatches:mt,loading:Kt}=$z(y),[ba,La]=h.useState(0),[sa,tr]=h.useState(0),[qn,Ra]=h.useState(!1),[En,kn]=h.useState(!1),[xn,Ln]=h.useState(""),[Bn,zn]=h.useState("all"),[On,wn]=h.useState("date"),[ue,Ge]=h.useState(null),[$e,Me]=h.useState(!1),[je,ge]=h.useState("direct"),[rt,ht]=h.useState(0),[_t,le]=h.useState(!1),[H,ke]=h.useState(null),[Ne,Le]=h.useState({player1:"",player2:""}),[et,ot]=h.useState(!1),[pt,Rt]=h.useState(null),[xt,zt]=h.useState(!1),[Nt,lt]=h.useState(!1),[Ie,Ve]=h.useState(!1),[ut,yt]=h.useState([]),[ta,pa]=h.useState(!1),[Gn,to]=h.useState(!1),[la,vt]=h.useState(!1),[Ea,_a]=h.useState(!1),[sn,Zn]=h.useState(null),[Va,Wa]=h.useState(null),[In,Mn]=h.useState("normal"),[An,hr]=h.useState(null),cn=h.useRef(null);er();const{isMobile:en}=Ty();h.useEffect(()=>{(async()=>{try{const Ue=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);console.log("Device Info:",{userAgent:navigator.userAgent,isMobile:Ue,backendUrl:de,protocol:window.location.protocol,hostname:window.location.hostname}),console.log("Testing backend connection...");const it=await fetch(`${de}/health`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors",credentials:"include"});it.ok?console.log("✅ Backend connection successful"):console.error("❌ Backend connection failed:",it.status,it.statusText)}catch(Ue){console.error("❌ Backend connection error:",Ue),console.error("Error details:",{name:Ue.name,message:Ue.message,stack:Ue.stack})}})()},[]),h.useEffect(()=>{La(st.length)},[st]),h.useEffect(()=>{tr(Mt.length)},[Mt]),h.useEffect(()=>{async function ae(){try{const it=await(await fetch(`${de}/api/messages/unread?user=${encodeURIComponent(c)}`)).json();Array.isArray(it)&&ht(it.length)}catch(Ue){console.error("Failed to fetch unread messages:",Ue)}}if(c){ae();const Ue=setInterval(ae,3e4);return()=>clearInterval(Ue)}},[c]),h.useEffect(()=>{if(!a||!r||!y||ln||Jt)return;const ae=ma==="challenge"?2:1,it=mt.filter($a=>$a.division===y&&$a.phase===ae&&($a.player1&&$a.player1.trim().toLowerCase()===He.toLowerCase()||$a.player2&&$a.player2.trim().toLowerCase()===He.toLowerCase())).length;_e(Pa.length);const oa=Oa.filter($a=>$a.status==="confirmed"&&($a.completed===!1||$a.completed===void 0)).length+Pa.length,$t=Math.max(0,it-oa);me($t),qe(it)},[a,r,y,mt,Pa,Oa,ln,Jt]);const ar=(()=>{if(!a||!r||!y)return 0;const Ue=mt.filter(it=>it.division===y&&(it.player1&&it.player1.trim().toLowerCase()===He.toLowerCase()||it.player2&&it.player2.trim().toLowerCase()===He.toLowerCase())).length;return Ue===0&&ma==="scheduled"?(console.log("No schedule matches found, using fallback of 6 matches for Phase 1"),6):Ue})();h.useEffect(()=>{let ae=!0;async function Ue(){try{const it=await fetch(`${de}/api/users/search?approved=true`);if(!it.ok)throw new Error("Failed to fetch players from database");const Ut=await it.json();if(!Ut.users||Ut.users.length===0){ae&&Re([]);return}const oa=Ut.users.map($t=>({firstName:$t.firstName||"",lastName:$t.lastName||"",email:$t.email||"",phone:$t.phone||"",locations:$t.locations||"",availability:$t.availability||{Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},pin:$t.pin||"",preferredContacts:$t.preferredContacts||[],division:$t.division||"",divisions:$t.divisions||[]})).filter($t=>$t.email&&$t.firstName&&$t.lastName);if(ae){Re(oa),tu(oa);const $t=oa.find($a=>$a.firstName===a&&$a.lastName===r);$t&&Hs($t)}}catch(it){console.error("Error loading players:",it),ae&&(Re([]),tu([]),Hs(null))}}return Ue(),()=>{ae=!1}},[]),h.useEffect(()=>{c&&Pw.getUser(c).then(ae=>{let Ue=[];Array.isArray(ae.divisions)?Ue=ae.divisions.map(it=>it.trim()).filter(Boolean):typeof ae.divisions=="string"?Ue=ae.divisions.split(",").map(it=>it.trim()).filter(Boolean):Ue=[],f(Ue)}).catch(()=>{f([])})},[c]),h.useEffect(()=>{g.length>0?v(g[0]):v("")},[g]),h.useEffect(()=>{if(!c)return;(async()=>{try{const Ue=await fetch(`${de}/api/unified-auth/profile-data?email=${encodeURIComponent(c)}&appType=league&t=${Date.now()}`);if(Ue.ok){const it=await Ue.json();console.log("Loaded league profile data:",it),it.success&&it.profile&&Hs(Ut=>({...Ut,locations:it.profile.locations||"",availability:it.profile.availability||{}}))}}catch(Ue){console.error("Error loading profile data:",Ue)}})()},[c]);const yr=async()=>{K("");try{const ae=await jm.createNote(D.trim());Ke(ae,"add"),A(""),Y(!1)}catch{K("Failed to add note")}},ao=async ae=>{if(window.confirm("Delete this note?"))try{await jm.deleteNote(ae),Ke({_id:ae},"remove")}catch(Ue){console.error("Failed to delete note:",Ue)}},dn=async()=>{if(window.confirm("Are you sure you want to clear all notes?"))try{for(const ae of _n)await jm.deleteNote(ae._id);setNotes([]),Pe()}catch(ae){console.error("Failed to clear notes:",ae)}};async function no(ae){if(F)try{await kr.counterProposal(F._id,ae),L(!1),j(null),Fa(),Yt()}catch(Ue){console.error("Failed to counter proposal:",Ue)}}function pl(){ne(!1),O(null)}const Po=ma==="challenge"?2:1,Us=mt.filter(ae=>ae.division===y&&(!ae.phase||ae.phase===Po)&&(ae.player1&&ae.player1.trim().toLowerCase()===He.toLowerCase()||ae.player2&&ae.player2.trim().toLowerCase()===He.toLowerCase())),ec=Array.from(new Set(Us.map(ae=>ae.player1&&ae.player1.trim().toLowerCase()===He.toLowerCase()?ae.player2Email||ae.player2EmailAddress||ae.player2Email||ae.player2||null:ae.player2&&ae.player2.trim().toLowerCase()===He.toLowerCase()&&(ae.player1Email||ae.player1EmailAddress||ae.player1Email||ae.player1)||null).filter(Boolean)));function tc(){var it,Ut;const ae=new Set,Ue=[];for(const oa of Us){const $t=oa.player1&&oa.player1.trim().toLowerCase()===He.toLowerCase()?oa.player2:oa.player1;if(Pa.some(St=>{var zo,Ys;const nr=[(zo=St.player1Id)==null?void 0:zo.trim().toLowerCase(),(Ys=St.player2Id)==null?void 0:Ys.trim().toLowerCase()];return St.division===y&&nr.includes(He.toLowerCase())&&nr.includes($t==null?void 0:$t.trim().toLowerCase())}))continue;let Bo=!1;for(let St=0;St<Oa.length;St++){if(ae.has(St))continue;const nr=Oa[St],zo=[(it=nr.player1Id)==null?void 0:it.trim().toLowerCase(),(Ut=nr.player2Id)==null?void 0:Ut.trim().toLowerCase()];if(nr.division===y&&zo.includes(He.toLowerCase())&&zo.includes($t==null?void 0:$t.trim().toLowerCase())){ae.add(St),Bo=!0;break}}Bo||Ue.push(oa)}return Ue}const es=tc().map(ae=>{var Ut,oa;const Ue=ae.player1&&ae.player1.trim().toLowerCase()===He.toLowerCase()?(Ut=ae.player2)==null?void 0:Ut.trim():(oa=ae.player1)==null?void 0:oa.trim();if(!Ue)return null;const it=ze.find($t=>`${$t.firstName} ${$t.lastName}`.trim().toLowerCase()===Ue.toLowerCase());return{match:ae,player:it,opponentName:Ue}}).filter(Boolean);function Jd(ae){const Ue=es.find(Ut=>Ut.opponentName&&Ut.opponentName.trim().toLowerCase()===ae.trim().toLowerCase()),it=(Ue==null?void 0:Ue.player)||ze.find(Ut=>`${Ut.firstName} ${Ut.lastName}`.trim().toLowerCase()===ae.trim().toLowerCase());if(!it){alert("Player data not found for: "+ae);return}if(nc){uf(it);return}if(!it.email){alert("This opponent does not have an email on file and cannot be proposed a match.");return}bt(it),Wt(!0),be(!1)}function Xd(){if(console.log("Smart match button clicked!"),console.log("currentUser:",ts),console.log("allPlayers:",br),console.log("allPlayers length:",br==null?void 0:br.length),!ts||!br||br.length===0){console.log("Player data not available, showing alert"),alert("Player data not available for smart match. Please try again.");return}be(!0),fl(!0)}function uf(ae){hf(ae),be(!1),fl(!1),eu(!0)}h.useEffect(()=>{if(!c||!a||!y||!Xt||ma!=="scheduled")return;const ae=async()=>{try{await Hz.checkAndSendDeadlineReminder(c,`${a} ${r}`,y)}catch(it){console.error("Error checking deadline reminders:",it)}};ae();const Ue=setInterval(ae,60*60*1e3);return()=>clearInterval(Ue)},[c,a,r,y,Xt,ma]);const ro=Oa.filter(ae=>ae.division===y).filter(ae=>{if(xn){let Ue="";if(ae.player1Id&&ae.player2Id?ae.player1Id.trim().toLowerCase()===He.trim().toLowerCase()?Ue=ae.player2Id:Ue=ae.player1Id:ae.senderName&&ae.receiverName&&(ae.senderName.trim().toLowerCase()===He.trim().toLowerCase()?Ue=ae.receiverName:Ue=ae.senderName),!Ue.toLowerCase().includes(xn.toLowerCase()))return!1}return!(Bn!=="all"&&(Bn==="completed"&&ae.status!=="completed"||Bn==="pending"&&ae.status!=="pending"||Bn==="upcoming"&&ae.status==="completed"))}).sort((ae,Ue)=>{switch(On){case"date":const it=ae.scheduledDate?new Date(ae.scheduledDate):new Date(ae.date||0),Ut=Ue.scheduledDate?new Date(Ue.scheduledDate):new Date(Ue.date||0);return it-Ut;case"opponent":let oa="",$t="";return ae.player1Id&&ae.player2Id?oa=ae.player1Id.trim().toLowerCase()===He.trim().toLowerCase()?ae.player2Id:ae.player1Id:ae.senderName&&ae.receiverName&&(oa=ae.senderName.trim().toLowerCase()===He.trim().toLowerCase()?ae.receiverName:ae.senderName),Ue.player1Id&&Ue.player2Id?$t=Ue.player1Id.trim().toLowerCase()===He.trim().toLowerCase()?Ue.player2Id:Ue.player1Id:Ue.senderName&&Ue.receiverName&&($t=Ue.senderName.trim().toLowerCase()===He.trim().toLowerCase()?Ue.receiverName:Ue.senderName),oa.localeCompare($t);case"status":const $a={pending:1,confirmed:2,completed:3},Bo=$a[ae.status]||0,St=$a[Ue.status]||0;return Bo-St;default:return 0}});function js(ae){O(ae),ne(!0)}const mf=G&&e.createElement(Bt,{open:G,onClose:()=>{se(!1),Ln(""),zn("all"),wn("date")},title:`🎯 All Upcoming Matches (${ro.length})`,maxWidth:"900px",className:"all-matches-modal"},e.createElement("div",{style:{display:"flex",gap:"8px",flexWrap:en?"wrap":"nowrap",alignItems:"center",marginBottom:"8px"}},e.createElement("div",{style:{flex:1,minWidth:en?"100%":"200px",position:"relative"}},e.createElement("input",{type:"text",placeholder:"Search by opponent name...",value:xn,onChange:ae=>Ln(ae.target.value),style:{width:"100%",padding:"8px 12px 8px 36px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff",fontSize:"0.9rem",outline:"none",transition:"all 0.2s ease"},onFocus:ae=>{ae.target.style.border="1px solid rgba(255, 255, 255, 0.4)",ae.target.style.background="rgba(0, 0, 0, 0.5)"},onBlur:ae=>{ae.target.style.border="1px solid rgba(255, 255, 255, 0.2)",ae.target.style.background="rgba(0, 0, 0, 0.3)"}}),e.createElement("span",{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#888",fontSize:"0.9rem"}},"🔍")),e.createElement("select",{value:Bn,onChange:ae=>zn(ae.target.value),style:{padding:"8px 12px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff",fontSize:"0.9rem",outline:"none",cursor:"pointer",minWidth:en?"100%":"120px"},onFocus:ae=>{ae.target.style.border="1px solid rgba(255, 255, 255, 0.4)"},onBlur:ae=>{ae.target.style.border="1px solid rgba(255, 255, 255, 0.2)"}},e.createElement("option",{value:"all"},"All Matches"),e.createElement("option",{value:"upcoming"},"Upcoming"),e.createElement("option",{value:"completed"},"Completed"),e.createElement("option",{value:"pending"},"Pending")),e.createElement("select",{value:On,onChange:ae=>wn(ae.target.value),style:{padding:"8px 12px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff",fontSize:"0.9rem",outline:"none",cursor:"pointer",minWidth:en?"100%":"100px"},onFocus:ae=>{ae.target.style.border="1px solid rgba(255, 255, 255, 0.4)"},onBlur:ae=>{ae.target.style.border="1px solid rgba(255, 255, 255, 0.2)"}},e.createElement("option",{value:"date"},"Sort by Date"),e.createElement("option",{value:"opponent"},"Sort by Opponent"),e.createElement("option",{value:"status"},"Sort by Status"))),e.createElement("div",{style:{flex:1,overflowY:"auto",height:"450px",minHeight:"200px"}},ro.length===0?e.createElement("div",{style:{textAlign:"center",padding:"40px 20px",color:"#888",fontSize:"1.1rem"}},e.createElement("div",{style:{fontSize:"3rem",marginBottom:"16px"}},"📅"),e.createElement("div",{style:{marginBottom:"8px",fontWeight:"bold"}},"No matches found"),e.createElement("div",{style:{fontSize:"0.9rem"}},"You don't have any upcoming matches scheduled.")):e.createElement("div",{style:{display:"grid",gap:"12px",gridTemplateColumns:en?"1fr":"repeat(auto-fit, minmax(300px, 1fr))",maxWidth:"100%"}},ro.map((ae,Ue)=>{let it="",Ut="",oa="upcoming";if(ae.player1Id&&ae.player2Id)if(ae.player1Id.trim().toLowerCase()===He.trim().toLowerCase()?it=ae.player2Id:it=ae.player1Id,ae.scheduledDate){const St=new Date(ae.scheduledDate);isNaN(St.getTime())?Ut="[Invalid Date]":Ut=ex(St.toISOString().split("T")[0])}else Ut="[No Date]";else if(ae.senderName&&ae.receiverName&&(ae.senderName.trim().toLowerCase()===He.trim().toLowerCase()?it=ae.receiverName:it=ae.senderName),ae.date){const St=ae.date.split("-");if(St.length===3){const[nr,zo,Ys]=St,iu=new Date(`${nr}-${zo}-${Ys}`);isNaN(iu.getTime())?Ut="[Invalid Date]":Ut=ex(ae.date)}else Ut="[Invalid Date]"}else Ut="[No Date]";ae.status;const $t=ae.status==="completed";$t?oa="completed":ae.status==="pending"&&(oa="pending");const $a=St=>{switch(St){case"completed":return"#10b981";case"pending":return"#f59e0b";default:return"var(--accent-red)"}},Bo=St=>{switch(St){case"completed":return"✅";case"pending":return"⏳";default:return"📅"}};return e.createElement("div",{key:ae._id||Ue,style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.04) 100%)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.15)",padding:"12px",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},onMouseEnter:St=>{St.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.06) 100%)",St.currentTarget.style.border="1px solid rgba(229, 62, 62, 0.3)",St.currentTarget.style.transform="translateY(-2px)",St.currentTarget.style.boxShadow="0 8px 24px rgba(229, 62, 62, 0.2)"},onMouseLeave:St=>{St.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.04) 100%)",St.currentTarget.style.border="1px solid rgba(255, 255, 255, 0.15)",St.currentTarget.style.transform="translateY(0)",St.currentTarget.style.boxShadow="none"}},e.createElement("div",{style:{position:"absolute",top:"16px",right:"16px",background:$a(oa),color:"#fff",padding:"6px 12px",borderRadius:"16px",fontSize:"0.8rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"}},Bo(oa)," ",oa),e.createElement("div",{style:{textAlign:"center",marginBottom:"8px",paddingRight:"100px"}},e.createElement("div",{style:{fontSize:"1.2rem",fontWeight:"700",color:"#fff",textShadow:"0 2px 4px rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",flexWrap:"wrap"}},e.createElement("span",null,a," ",r),e.createElement("span",{style:{color:"var(--accent-red)",fontSize:"1rem",fontWeight:"600"}},"VS"),e.createElement("span",null,it||"[Unknown Opponent]"))),e.createElement("div",{style:{display:"flex",justifyContent:"center",gap:"16px",marginBottom:"12px",fontSize:"0.9rem",color:"#ccc"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:"rgba(255, 255, 255, 0.1)",padding:"8px 12px",borderRadius:"8px"}},"📅 ",Ut),ae.location&&e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:"rgba(255, 255, 255, 0.1)",padding:"8px 12px",borderRadius:"8px"}},"📍 ",ae.location)),e.createElement("div",{style:{display:"flex",gap:"8px",justifyContent:"center"}},e.createElement("button",{onClick:()=>js(ae),style:{padding:"8px 16px",background:"linear-gradient(135deg, var(--accent-red), var(--accent-red-dark))",border:"none",borderRadius:"8px",color:"#fff",fontSize:"0.85rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(229, 62, 62, 0.3)",minWidth:"100px"},onMouseEnter:St=>{St.target.style.transform="translateY(-1px)",St.target.style.boxShadow="0 4px 16px rgba(229, 62, 62, 0.5)"},onMouseLeave:St=>{St.target.style.transform="translateY(0)",St.target.style.boxShadow="0 2px 8px rgba(229, 62, 62, 0.3)"}},"📋 View Details"),!$t&&e.createElement(Tw,{className:Ae.dashboardBtn+" "+Ae.matchCardDoneBtn,loading:ue===ae._id,loadingText:"Completing...",style:{padding:"8px 16px",fontSize:"0.85rem",fontWeight:"600",background:"linear-gradient(135deg, #6c757d, #5a6268)",border:"none",borderRadius:"8px",color:"#fff",cursor:"pointer",transition:"all 0.2s ease",minWidth:"100px",boxShadow:"0 2px 8px rgba(108, 117, 125, 0.3)"},onMouseEnter:St=>{ue!==ae._id&&(St.target.style.background="linear-gradient(135deg, #10b981, #059669)",St.target.style.transform="translateY(-1px)",St.target.style.boxShadow="0 4px 16px rgba(16, 185, 129, 0.5)")},onMouseLeave:St=>{ue!==ae._id&&(St.target.style.background="linear-gradient(135deg, #6c757d, #5a6268)",St.target.style.transform="translateY(0)",St.target.style.boxShadow="0 2px 8px rgba(108, 117, 125, 0.3)")},onClick:()=>{let St="",nr="";ae.player1Id&&ae.player2Id?(St=ae.player1Id,nr=ae.player2Id):ae.type==="scheduled"?(St=ae.player1,nr=ae.player2):(St=ae.senderName,nr=ae.receiverName),ke(ae),Le({player1:St,player2:nr}),le(!0)},type:"button"},"✅ Mark as Complete")))}))),e.createElement("div",{style:{padding:"8px 0 0",borderTop:"1px solid rgba(255, 255, 255, 0.1)",marginTop:"8px",textAlign:"center"}},e.createElement("div",{style:{fontSize:"0.9rem",color:"#888"}},"Showing ",ro.length," match",ro.length!==1?"es":""))),Kd=[...Oa.filter(ae=>{var Ue,it;return ae.division===y&&[(Ue=ae.player1Id)==null?void 0:Ue.trim().toLowerCase(),(it=ae.player2Id)==null?void 0:it.trim().toLowerCase()].includes(He.toLowerCase())}),...Pa.filter(ae=>{var Ue,it;return ae.division===y&&[(Ue=ae.player1Id)==null?void 0:Ue.trim().toLowerCase(),(it=ae.player2Id)==null?void 0:it.trim().toLowerCase()].includes(He.toLowerCase())})];Array.from(new Set(Kd.map(ae=>ae._id))).map(ae=>Kd.find(Ue=>Ue._id===ae)).length;const[pf,ac]=h.useState(!1),[ff,eu]=h.useState(!1),[ts,Hs]=h.useState(null),[br,tu]=h.useState([]),[gf,hf]=h.useState(null),[nc,fl]=h.useState(!1);[...st.filter(ae=>ae.status==="pending"&&ae.receiverName===He),...Mt.filter(ae=>ae.status==="countered"&&ae.senderName===He)],[...Mt.filter(ae=>ae.status==="pending"&&ae.senderName===He),...st.filter(ae=>ae.status==="countered"&&ae.receiverName===He)],console.log("🎯 Dashboard: showOpponents state:",at),console.log("🎯 Dashboard: simulationRef.current:",!!cn.current);const yf=at&&cn.current?Fd.createPortal(e.createElement("div",{style:{position:"absolute",top:cn.current.getBoundingClientRect().top+window.scrollY,left:cn.current.getBoundingClientRect().left+window.scrollX,width:cn.current.offsetWidth,height:cn.current.offsetHeight,zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.6)",pointerEvents:"auto"}},e.createElement(C5,{open:at,onClose:()=>be(!1),opponents:es,onOpponentClick:Jd,phase:ma,selectedCalendarDate:Je,smartMatchMode:nc,allPlayers:br})),document.body):null,Lo=c==="guest@frontrangepool.com",au=Lo?!1:Jt,nu=Lo?!1:ln,ru=Lo?!1:Z,ou=Lo?!1:Nn,lu=Lo?!1:gr,su=Lo?!1:Kt;return e.createElement("div",{className:Ae.dashboardBg,style:{position:"relative"}},e.createElement("style",null,`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
          }
        `),en?e.createElement(Pz,{playerName:a,playerLastName:r,pendingProposals:st,sentProposals:Mt,matches:Pa,notes:_n,standings:dr,schedule,proposalsLoading:au,matchesLoading:nu,notesLoading:ru,seasonLoading:ou,standingsLoading:lu,scheduleLoading:su,setShowMatchProposalModal:()=>setShowMatchProposalModal(!0),onViewMatch:js,onViewProposal:ae=>{N(ae),Ra(!0)},onViewStandings:()=>w(!0),onViewSchedule:()=>_a(!0),onQuickAction:()=>setShowMatchProposalModal(!0)}):e.createElement("div",{className:Ae.dashboardFrame,style:{position:"relative",zIndex:1}},e.createElement("div",{className:Ae.dashboardCard,style:{position:"relative",zIndex:1,padding:"20px",margin:"16px"}},e.createElement(Vw,{playerName:a,playerLastName:r,isMobile:en,userPin:n,playerEmail:c,proposalsLoading:au,matchesLoading:nu,notesLoading:ru,seasonLoading:ou,standingsLoading:lu,scheduleLoading:su,styles:Ae}),e.createElement(Qw,{divisions:g,selectedDivision:y,onDivisionChange:ae=>v(ae.target.value),isMobile:en}),e.createElement(Jw,{isMobile:en,styles:Ae,effectivePhase:ma,seasonData:Xt,completedMatches:Pa,totalRequiredMatches:ar,playerName:a,playerLastName:r,selectedDivision:y,pendingCount:ba,sentCount:sa,filteredUpcomingMatches:ro,currentUser:ts,allPlayers:br,showPhase1Rules:Gn,setShowPhase1Rules:to,setShowPhase1Overview:vt,setPlayerStats:Zn,setTimeLeft:Wa,setDeadlineStatus:Mn,setPhase1EndDate:hr,onOpenOpponentsModal:ae=>{console.log("🎯 Dashboard: onOpenOpponentsModal called with date:",ae),nt(ae),ae?(console.log("🎯 Dashboard: Setting smart match mode to false"),fl(!1)):(console.log("🎯 Dashboard: Setting smart match mode to true"),fl(!0)),console.log("🎯 Dashboard: Setting showOpponents to true"),be(!0)},onOpenCompletedMatchesModal:()=>ac(!0),onOpenStandingsModal:()=>w(!0),onOpenDefenseChallengersModal:()=>k(!0),onOpenAllMatchesModal:()=>se(!0),onOpenProposalListModal:()=>I(!0),onOpenSentProposalListModal:()=>R(!0),onOpenPlayerSearch:()=>ct(!0),onMatchClick:js,onSmartMatchClick:Xd,onOpenMessageCenter:ae=>{ge(ae),We(!0)},onOpenCalendar:()=>_a(!0),simulationRef:cn,opponentsModalPortal:yf}),e.createElement(Xw,{notes:_n,notesLoading:Z,noteError:U,userPin:n,onDeleteNote:ao,onClearNotes:dn,styles:Ae}),!Lo&&m&&e.createElement(Kw,{userPin:n,loadingPendingRegistrations:ta,phaseOverride:ft,selectedDivision:y,BACKEND_URL:de,styles:Ae,onShowRegistrationModal:()=>zt(!0),onLoadPendingRegistrations:pa,onSetPendingRegistrations:yt,onShowPendingRegistrationsModal:()=>lt(!0),onCreateTestRegistration:async()=>{try{const ae={firstName:"Test",lastName:"Player",email:`testplayer${Date.now()}@example.com`,phone:"555-1234",textNumber:"555-5678",emergencyContactName:"Emergency Contact",emergencyContactPhone:"555-9999",preferredContacts:["email","text"],availability:{Mon:["6:00 PM - 8:00 PM"],Tue:["8:00 PM - 10:00 PM"],Wed:[],Thu:["4:00 PM - 6:00 PM"],Fri:[],Sat:["2:00 PM - 4:00 PM"],Sun:["10:00 AM - 12:00 PM"]},locations:`Test Pool Hall
Community Center
Sports Bar`,pin:"1234",division:"FRBCAPL TEST",notes:"Test registration created by admin"},Ue=await fetch(`${de}/api/users/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});if(Ue.ok){const it=await Ue.json();alert(`✅ Test registration created successfully!

Player: Test Player
Email: `+ae.email+`

You can now approve this registration.`);const Ut=await fetch(`${de}/api/users/pending-registrations`);if(Ut.ok){const oa=await Ut.json();yt(oa)}}else{const it=await Ue.json();alert("Failed to create test registration: "+it.error)}}catch(ae){console.error("Error creating test registration:",ae),alert("Error creating test registration: "+ae.message)}},onShowNoteModal:()=>Y(!0),onShowPendingClaimsModal:()=>Ve(!0),onGoToAdmin:o,onGoToPlatformAdmin:u,isSuperAdmin:hn,onActivatePhase2:()=>{},onSetPhaseOverride:Ft,onRefreshSeasonData:async()=>{try{const[ae,Ue]=await Promise.all([tl.getCurrentSeason(y),tl.getCurrentPhaseAndWeek(y)]);setSeasonData((ae==null?void 0:ae.season)||null),setCurrentPhaseInfo(Ue)}catch(ae){console.error("Error refreshing season data:",ae)}}}))),e.createElement(eS,{showPlayerSearch:Xe,showAdminPlayerSearch:Ot,showPlayerAvailability:ra,showProposalModal:$,selectedOpponent:he,proposalData:V,fullName:He,senderEmail:c,selectedDivision:y,effectivePhase:ma,playerName:a,playerLastName:r,onClosePlayerSearch:()=>ct(!1),onCloseAdminPlayerSearch:()=>Zt(!1),onClosePlayerAvailability:()=>{Wt(!1),bt(null)},onCloseProposalModal:()=>ye(!1),onProposeMatch:(ae,Ue)=>{ce({player:he,day:ae,slot:Ue,selectedDivision:y,phase:ma}),ye(!0),Wt(!1),bt(null)},onProposalComplete:()=>{},onUpdateProposalLocally:ua,onRefetchMatches:Fa,onRefetchProposals:Yt}),e.createElement(tS,{showStandings:S,showDefenseChallengers:x,modalOpen:Q,showNoteModal:J,showProposalListModal:E,showSentProposalListModal:B,showCounterModal:W,showProposalDetailsModal:qn,selectedMatch:X,selectedProposal:M,counterProposal:F,newNote:D,noteError:U,proposalNote:_,pendingProposals:st,sentProposals:Mt,players:ze,STANDINGS_URLS:Yz,onCloseStandings:()=>w(!1),onCloseDefenseChallengers:()=>k(!1),onCloseModal:pl,onCloseNoteModal:()=>Y(!1),onCloseProposalListModal:()=>I(!1),onCloseSentProposalListModal:()=>R(!1),onCloseCounterModal:()=>{L(!1),j(null)},onCloseProposalDetailsModal:()=>{Ra(!1),N(null)},onAddNote:yr,onUpdateNewNote:ae=>A(ae.target.value),onSelectProposal:ae=>{const Ue=c&&ae.senderEmail&&c.toLowerCase()===ae.senderEmail.toLowerCase()||`${a} ${r}`.toLowerCase()===(ae.senderName||"").toLowerCase();N(ae),P(""),I(!1),Ra(Ue)},onSelectSentProposal:ae=>{const Ue=c&&ae.senderEmail&&c.toLowerCase()===ae.senderEmail.toLowerCase()||`${a} ${r}`.toLowerCase()===(ae.senderName||"").toLowerCase();N(ae),P(""),R(!1),Ra(Ue)},onConfirmProposal:async()=>{await kr.updateProposalStatus(M._id,"confirmed",_),N(null),P(""),Fa(),Yt()},onCounterPropose:()=>{j(M),L(!0),N(null)},onSubmitCounterProposal:no,onEditProposal:()=>{M.isCounter?(Ra(!1),setTimeout(()=>{N(null),j(M),L(!0)},100)):(Ra(!1),setTimeout(()=>{N(null),kn(!0)},100))},onDeleteProposal:async()=>{if(window.confirm("Are you sure you want to delete this proposal?"))try{await kr.deleteProposal(M._id),Ra(!1),N(null),Yt()}catch(ae){console.error("Error deleting proposal:",ae),alert("Failed to delete proposal")}},onUpdateProposalLocally:ua,onRefetchMatches:Fa,onRefetchProposals:Yt,selectedDivision:y,effectivePhase:ma,userPin:n,playerName:a,playerLastName:r,senderEmail:c,styles:Ae,proposalService:kr}),e.createElement(nS,{showEditProposalModal:En,showChatModal:Fe,showCompletedModal:pf,winnerModalOpen:_t,validationModalOpen:et,showSmartMatchmakingModal:ff,showPhase1Rules:Gn,showPhase1Overview:la,showRegistrationModal:xt,showPendingRegistrationsModal:Nt,showCalendarModal:Ea,selectedProposal:M,chatType:je,opponentEmails:ec,completedMatches:Pa,winnerModalPlayers:Ne,winnerModalMatch:H,matchToValidate:pt,selectedOpponentForSmartMatch:gf,pendingRegistrations:ut,onCloseEditProposalModal:()=>kn(!1),onCloseChatModal:()=>We(!1),onCloseCompletedModal:()=>ac(!1),onCloseWinnerModal:()=>le(!1),onCloseValidationModal:()=>{ot(!1),Rt(null)},onCloseSmartMatchmakingModal:()=>eu(!1),onClosePhase1Rules:()=>to(!1),onClosePhase1Overview:()=>vt(!1),onCloseRegistrationModal:()=>zt(!1),onClosePendingRegistrationsModal:()=>lt(!1),onCloseCalendarModal:()=>_a(!1),onSaveEditProposal:ae=>{N(ae),Yt(),kn(!1)},onProposalUpdated:ae=>{Rr(ae),Yt()},onSelectWinner:async ae=>{if(H){if((ga==null?void 0:ga.phase)==="scheduled"&&Xt&&tl.hasPhase1DeadlinePassed(Xt)&&!window.confirm(`⚠️ PHASE 1 DEADLINE HAS PASSED!

You are attempting to complete a match after the Phase 1 deadline. This may affect your standings or eligibility for Phase 2.

Do you want to continue marking this match as completed?`)){le(!1);return}le(!1),Ge(H._id);try{const it=await(await fetch(`${de}/api/matches?proposalId=${H._id}`)).json();if(it.length>0){const Ut=it[0]._id;await fetch(`${de}/api/matches/${Ut}/complete`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({winner:ae,score:"TBD",notes:`Completed by ${a} ${r}`})})}else await kr.markCompleted(H._id,ae);cr({...H,winner:ae}),Fa(),Yt()}catch(Ue){console.error("Error completing match:",Ue),alert("Failed to mark as completed.")}Ge(null)}},onValidateMatch:async ae=>{console.log("Validating match:",ae),Fa()},onRejectMatch:async ae=>{console.log("Rejecting match:",ae),Fa()},onSmartMatchProposalComplete:()=>{Fa(),Yt()},onUserUpdate:ae=>{Hs(ae)},onRegistrationSuccess:ae=>{console.log("New player registered by admin:",ae),zt(!1),window.location.reload()},onApproveRegistration:async ae=>{const it=document.getElementById(`division-${ae._id}`).value;if(!it){alert("Please select a division before approving.");return}const Ut={hasPaid:!0,paymentDate:new Date,paymentMethod:"Cash",paymentNotes:"Approved by admin"};try{const oa=await fetch(`${de}/api/users/admin/approve-registration/${ae._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approvedBy:`${a} ${r}`,paymentInfo:Ut,division:it})});if(oa.ok)alert(`Registration approved successfully!

Player: ${ae.firstName} ${ae.lastName}
Division: ${it}`),yt($t=>$t.filter($a=>$a._id!==ae._id));else{const $t=await oa.json();alert("Failed to approve: "+$t.error)}}catch(oa){console.error("Error approving registration:",oa),alert("Error approving registration")}},onRejectRegistration:async ae=>{const Ue=prompt("Enter rejection reason (optional):");if(Ue!==null)try{const it=await fetch(`${de}/api/users/admin/reject-registration/${ae._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rejectedBy:`${a} ${r}`,notes:Ue})});if(it.ok)alert("Registration rejected successfully!"),yt(Ut=>Ut.filter(oa=>oa._id!==ae._id));else{const Ut=await it.json();alert("Failed to reject: "+Ut.error)}}catch(it){console.error("Error rejecting registration:",it),alert("Error rejecting registration")}},onOpenOpponentsModal:ae=>{console.log("🎯 Dashboard: Calendar modal calling onOpenOpponentsModal with date:",ae),nt(ae),ae?(console.log("🎯 Dashboard: Setting smart match mode to false"),fl(!1)):(console.log("🎯 Dashboard: Setting smart match mode to true"),fl(!0)),console.log("🎯 Dashboard: Setting showOpponents to true"),be(!0),_a(!1)},onMatchClick:js,onSmartMatchClick:Xd,selectedDivision:y,effectivePhase:ma,userPin:n,playerName:a,playerLastName:r,senderEmail:c,isMobile:en,currentUser:ts,players:ze,filteredUpcomingMatches:ro,phase1EndDate:An,playerStats:sn,standings:dr,timeLeft:Va,deadlineStatus:In,allPlayers:br,styles:Ae,proposalService:kr,seasonService:tl,seasonData:Xt,currentPhaseInfo:ga,BACKEND_URL:de,markMatchCompleted:cr,setCompletingMatchId:Ge,updateCompletedMatch:Rr,refetchMatches:Fa,refetchProposals:Yt,setPendingRegistrations:yt}),mf,Ie&&e.createElement(qz,{onClose:()=>Ve(!1)}),c==="guest@frontrangepool.com"&&e.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:9999,width:"85%",maxWidth:"1000px",height:"500px",pointerEvents:"auto"}},e.createElement("div",{style:{background:"transparent",borderRadius:"12px",padding:"20px",width:"100%",height:"100%",overflow:"auto"}},e.createElement(Bw,{currentPhase:"scheduled",seasonData:{_id:"guest-season-1",name:"BCAPL Singles Division - Guest Preview",division:"FRBCAPL TEST",startDate:new Date,endDate:new Date(Date.now()+60*24*60*60*1e3),phase1EndDate:new Date(Date.now()+42*24*60*60*1e3),totalWeeks:10,currentWeek:3,isActive:!0},completedMatches:[{_id:"guest-match-1",player1Id:"Guest User",player2Id:"John Smith",winner:"Guest User",score:"5-3",matchDate:new Date(Date.now()-7*24*60*60*1e3),status:"completed"},{_id:"guest-match-2",player1Id:"Guest User",player2Id:"Jane Doe",winner:"Jane Doe",score:"3-5",matchDate:new Date(Date.now()-14*24*60*60*1e3),status:"completed"}],totalRequiredMatches:6,playerName:a,playerLastName:r,selectedDivision:"FRBCAPL TEST",onOpenOpponentsModal:()=>alert("👥 Opponents Modal - Members only!"),onOpenCompletedMatchesModal:()=>alert("✅ Completed Matches - Members only!"),onOpenStandingsModal:()=>alert("📊 Standings - Members only!"),onOpenAllMatchesModal:()=>alert("📋 All Matches - Members only!"),pendingCount:2,sentCount:1,onOpenProposalListModal:()=>alert("📝 Proposals - Members only!"),onOpenSentProposalListModal:()=>alert("📤 Sent Proposals - Members only!"),upcomingMatches:[{_id:"guest-upcoming-1",player1Id:"Guest User",player2Id:"Mike Johnson",proposedDate:new Date(Date.now()+7*24*60*60*1e3),status:"pending"}],onMatchClick:()=>alert("🎯 Match Details - Members only!"),isMobile:en,onOpenMessageCenter:()=>alert("💬 Message Center - Members only!"),currentUser:ts,allPlayers:[{firstName:"Guest",lastName:"User",email:"guest@frontrangepool.com"},{firstName:"John",lastName:"Smith",email:"john@example.com"},{firstName:"Jane",lastName:"Doe",email:"jane@example.com"},{firstName:"Mike",lastName:"Johnson",email:"mike@example.com"}],onSmartMatchClick:()=>alert("🧠 Smart Match - Members only!"),showPhase1Rules:Gn,setShowPhase1Rules:to,showPhase1Overview:la,setShowPhase1Overview:vt,setPlayerStats:Zn,setTimeLeft:Wa,setDeadlineStatus:Mn,setPhase1EndDate:hr,onOpenCalendar:()=>alert("📅 Calendar - Members only!")}))))}const Vz="_adminDashboardRoot_1xwqk_9",Qz="_adminDashboardNav_1xwqk_25",Jz="_navLeft_1xwqk_45",Xz="_navRight_1xwqk_45",Kz="_adminDashboardMainColumn_1xwqk_89",eO="_banner_1xwqk_103",tO="_slideIn_1xwqk_1",aO="_success_1xwqk_125",nO="_error_1xwqk_137",rO="_sectionNavigation_1xwqk_173",oO="_sectionButton_1xwqk_193",lO="_active_1xwqk_231",sO="_sectionContent_1xwqk_245",iO="_overviewSection_1xwqk_263",cO="_quickActions_1xwqk_301",dO="_quickActionButton_1xwqk_317",uO="_workflowContainer_1xwqk_383",mO="_workflowHeader_1xwqk_393",pO="_workflowProgress_1xwqk_427",fO="_workflowSteps_1xwqk_445",gO="_workflowStepIndicator_1xwqk_461",hO="_pending_1xwqk_483",yO="_completed_1xwqk_505",bO="_stepNumber_1xwqk_517",vO="_stepInfo_1xwqk_569",EO="_stepTitle_1xwqk_577",xO="_stepDescription_1xwqk_587",wO="_workflowContent_1xwqk_597",SO="_workflowStep_1xwqk_445",CO="_stepInstructions_1xwqk_621",NO="_instructionItem_1xwqk_637",_O="_stepActions_1xwqk_675",kO="_workflowButton_1xwqk_689",IO="_divisionForm_1xwqk_743",MO="_workflowInput_1xwqk_757",AO="_workflowNote_1xwqk_799",DO="_workflowResult_1xwqk_823",RO="_dataSyncTools_1xwqk_847",TO="_syncButton_1xwqk_863",PO="_syncResult_1xwqk_913",LO="_playerManagementContainer_1xwqk_941",BO="_tabHeader_1xwqk_951",zO="_tabButton_1xwqk_969",OO="_tabContent_1xwqk_1015",FO="_approvalSection_1xwqk_1029",WO="_loadingMessage_1xwqk_1039",UO="_emptyState_1xwqk_1053",$O="_registrationList_1xwqk_1075",jO="_registrationCard_1xwqk_1087",HO="_registrationHeader_1xwqk_1115",YO="_registrationNumber_1xwqk_1129",qO="_registrationDetails_1xwqk_1159",GO="_registrationActions_1xwqk_1185",ZO="_divisionSelect_1xwqk_1199",VO="_approveButton_1xwqk_1243",QO="_rejectButton_1xwqk_1283",JO="_userSearchContainer_1xwqk_1325",XO="_searchForm_1xwqk_1335",KO="_searchInput_1xwqk_1347",eF="_searchButton_1xwqk_1387",tF="_searchResults_1xwqk_1425",aF="_userCard_1xwqk_1437",nF="_userInfo_1xwqk_1463",rF="_userHeader_1xwqk_1475",oF="_userName_1xwqk_1491",lF="_systemBadges_1xwqk_1509",sF="_leagueBadge_1xwqk_1525",iF="_ladderBadge_1xwqk_1549",cF="_bothBadges_1xwqk_1573",dF="_ladderInfo_1xwqk_1583",uF="_resultsSummary_1xwqk_1619",mF="_summaryCard_1xwqk_1627",pF="_summaryStats_1xwqk_1657",fF="_summaryStat_1xwqk_1657",gF="_statNumber_1xwqk_1685",hF="_statLabel_1xwqk_1701",yF="_userEmail_1xwqk_1713",bF="_userContactInfo_1xwqk_1725",vF="_userPhone_1xwqk_1741",EF="_userTextNumber_1xwqk_1741",xF="_userDetails_1xwqk_1753",wF="_userAvailability_1xwqk_1783",SF="_availabilityGrid_1xwqk_1791",CF="_availabilityDay_1xwqk_1805",NF="_dayLabel_1xwqk_1819",_F="_timeSlots_1xwqk_1831",kF="_userActions_1xwqk_1851",IF="_addButton_1xwqk_1867",MF="_removeButton_1xwqk_1917",AF="_matchManagementContainer_1xwqk_1965",DF="_sectionHeader_1xwqk_1975",RF="_systemStatusContainer_1xwqk_2019",TF="_statsGrid_1xwqk_2029",PF="_statCard_1xwqk_2043",LF="_systemActions_1xwqk_2099",BF="_systemButton_1xwqk_2113",zF="_editButton_1xwqk_2317",OF="_modalOverlay_1xwqk_2357",FF="_modal_1xwqk_2357",WF="_modalHeader_1xwqk_2403",UF="_closeButton_1xwqk_2433",$F="_modalForm_1xwqk_2475",jF="_formRow_1xwqk_2487",HF="_formField_1xwqk_2499",YF="_modalActions_1xwqk_2569",qF="_cancelButton_1xwqk_2583",GF="_saveButton_1xwqk_2613",te={adminDashboardRoot:Vz,adminDashboardNav:Qz,navLeft:Jz,navRight:Xz,adminDashboardMainColumn:Kz,banner:eO,slideIn:tO,success:aO,error:nO,sectionNavigation:rO,sectionButton:oO,active:lO,sectionContent:sO,overviewSection:iO,quickActions:cO,quickActionButton:dO,workflowContainer:uO,workflowHeader:mO,workflowProgress:pO,workflowSteps:fO,workflowStepIndicator:gO,pending:hO,completed:yO,stepNumber:bO,stepInfo:vO,stepTitle:EO,stepDescription:xO,workflowContent:wO,workflowStep:SO,stepInstructions:CO,instructionItem:NO,stepActions:_O,workflowButton:kO,divisionForm:IO,workflowInput:MO,workflowNote:AO,workflowResult:DO,dataSyncTools:RO,syncButton:TO,syncResult:PO,playerManagementContainer:LO,tabHeader:BO,tabButton:zO,tabContent:OO,approvalSection:FO,loadingMessage:WO,emptyState:UO,registrationList:$O,registrationCard:jO,registrationHeader:HO,registrationNumber:YO,registrationDetails:qO,registrationActions:GO,divisionSelect:ZO,approveButton:VO,rejectButton:QO,userSearchContainer:JO,searchForm:XO,searchInput:KO,searchButton:eF,searchResults:tF,userCard:aF,userInfo:nF,userHeader:rF,userName:oF,systemBadges:lF,leagueBadge:sF,ladderBadge:iF,bothBadges:cF,ladderInfo:dF,resultsSummary:uF,summaryCard:mF,summaryStats:pF,summaryStat:fF,statNumber:gF,statLabel:hF,userEmail:yF,userContactInfo:bF,userPhone:vF,userTextNumber:EF,userDetails:xF,userAvailability:wF,availabilityGrid:SF,availabilityDay:CF,dayLabel:NF,timeSlots:_F,userActions:kF,addButton:IF,removeButton:MF,matchManagementContainer:AF,sectionHeader:DF,systemStatusContainer:RF,statsGrid:TF,statCard:PF,systemActions:LF,systemButton:BF,editButton:zF,modalOverlay:OF,modal:FF,modalHeader:WF,closeButton:UF,modalForm:$F,formRow:jF,formField:HF,modalActions:YF,cancelButton:qF,saveButton:GF};function ZF(a){if(!a)return"N/A";if(a.includes("-")&&a.length===10){const[i,c,u]=a.split("-"),m=new Date(parseInt(i),parseInt(c)-1,parseInt(u)),g=String(m.getMonth()+1).padStart(2,"0"),f=String(m.getDate()).padStart(2,"0"),y=m.getFullYear();return`${g}-${f}-${y}`}let r;if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const i=a.split("/");if(i.length===3){const[c,u,m]=i;r=new Date(m,c-1,u)}else return a}else return a;if(isNaN(r.getTime()))return a;const t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),o=r.getFullYear();return`${t}-${n}-${o}`}const tx=de;function VF({open:a,onClose:r}){const[t,n]=h.useState([]),[o,i]=h.useState(!0);h.useEffect(()=>{a&&(i(!0),fetch(`${tx}/admin/unentered-matches`).then(u=>u.json()).then(u=>{n(u),i(!1)}))},[a]);const c=u=>{fetch(`${tx}/admin/mark-lms-entered/${u}`,{method:"PATCH"}).then(m=>m.json()).then(()=>n(t.filter(m=>m._id!==u)))};return a?e.createElement(Bt,{open:a,onClose:r,title:"Confirmed Challenge Matches Needing LMS Entry",maxWidth:"520px"},o?e.createElement("div",{style:{color:"#fff",textAlign:"center",padding:"2rem"}},"Loading unentered matches..."):t.length===0?e.createElement("div",{style:{color:"#fff",textAlign:"center",padding:"2rem"}},"All matches are entered!"):e.createElement("ul",{style:{padding:0,listStyle:"none"}},t.map(u=>e.createElement("li",{key:u._id,style:{marginBottom:12,background:"#222",borderRadius:8,padding:"12px 14px",display:"flex",alignItems:"center",justifyContent:"space-between",borderLeft:"4px solid #c00"}},e.createElement("span",null,e.createElement("span",{style:{color:"#fff"}},e.createElement("b",null,ZF(u.date))," — ",e.createElement("span",{style:{color:"#c00"}},u.senderName)," vs ",e.createElement("span",{style:{color:"#c00"}},u.receiverName),u.location&&e.createElement("span",{style:{color:"#fff"}}," @ ",u.location))),e.createElement("button",{style:{marginLeft:16,background:"#c00",color:"#fff",border:"none",borderRadius:5,padding:"7px 14px",fontWeight:"bold",cursor:"pointer",fontSize:"1em",transition:"background 0.2s"},onClick:()=>c(u._id)},"Mark as Entered"))))):null}const QF=({division:a,isAdmin:r=!1})=>{const[t,n]=h.useState([]),[o,i]=h.useState([]),[c,u]=h.useState(!0),[m,g]=h.useState(null),[f,y]=h.useState(null),[v,S]=h.useState(!1),[w,x]=h.useState(!1),[k,E]=h.useState(""),[I,M]=h.useState(""),[N,_]=h.useState(""),[P,B]=h.useState("");h.useEffect(()=>{a&&(R(),W())},[a]);const R=async()=>{try{u(!0);const[Y,D]=await Promise.all([Wp(a,"scheduled"),Wp(a,"completed")]);n(Y),i(D)}catch(Y){console.error("Error loading matches:",Y)}finally{u(!1)}},W=async()=>{try{const Y=await zz(a);g(Y)}catch(Y){console.error("Error loading match stats:",Y)}},L=async()=>{if(!(!f||!k||!I))try{await Lz(f._id,k,I,N),S(!1),y(null),E(""),M(""),_(""),R(),W()}catch(Y){console.error("Error completing match:",Y),alert("Failed to complete match: "+Y.message)}},F=async()=>{if(f)try{await Bz(f._id,P),x(!1),y(null),B(""),R(),W()}catch(Y){console.error("Error cancelling match:",Y),alert("Failed to cancel match: "+Y.message)}},j=Y=>new Date(Y).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),J=Y=>Y.status==="completed"?"✅ Completed":Y.status==="cancelled"?"❌ Cancelled":"⏳ Scheduled";return c?e.createElement("div",{className:Ae.loading},"Loading matches..."):e.createElement("div",{className:Ae.matchManager},m&&e.createElement("div",{className:Ae.matchStats},e.createElement("h3",null,"Match Statistics"),e.createElement("div",{className:Ae.statsGrid},e.createElement("div",{className:Ae.statItem},e.createElement("span",{className:Ae.statNumber},m.total),e.createElement("span",{className:Ae.statLabel},"Total Matches")),e.createElement("div",{className:Ae.statItem},e.createElement("span",{className:Ae.statNumber},m.scheduled),e.createElement("span",{className:Ae.statLabel},"Scheduled")),e.createElement("div",{className:Ae.statItem},e.createElement("span",{className:Ae.statNumber},m.completed),e.createElement("span",{className:Ae.statLabel},"Completed")))),e.createElement("div",{className:Ae.matchSection},e.createElement("h3",null,"Scheduled Matches (",t.length,")"),t.length===0?e.createElement("p",{className:Ae.noMatches},"No scheduled matches"):e.createElement("div",{className:Ae.matchList},t.map(Y=>e.createElement("div",{key:Y._id,className:Ae.matchCard},e.createElement("div",{className:Ae.matchHeader},e.createElement("span",{className:Ae.matchStatus},J(Y)),e.createElement("span",{className:Ae.matchDate},j(Y.scheduledDate))),e.createElement("div",{className:Ae.matchPlayers},e.createElement("span",{className:Ae.player1},Y.player1Id),e.createElement("span",{className:Ae.vs},"vs"),e.createElement("span",{className:Ae.player2},Y.player2Id)),e.createElement("div",{className:Ae.matchDetails},e.createElement("span",{className:Ae.location},"📍 ",Y.location),e.createElement("span",{className:Ae.type},"🎯 ",Y.type)),r&&e.createElement("div",{className:Ae.matchActions},e.createElement("button",{className:Ae.actionButton,onClick:()=>{y(Y),S(!0)}},"Complete"),e.createElement("button",{className:`${Ae.actionButton} ${Ae.cancelButton}`,onClick:()=>{y(Y),x(!0)}},"Cancel")))))),e.createElement("div",{className:Ae.matchSection},e.createElement("h3",null,"Completed Matches (",o.length,")"),o.length===0?e.createElement("p",{className:Ae.noMatches},"No completed matches"):e.createElement("div",{className:Ae.matchList},o.map(Y=>e.createElement("div",{key:Y._id,className:`${Ae.matchCard} ${Ae.completedMatch}`},e.createElement("div",{className:Ae.matchHeader},e.createElement("span",{className:Ae.matchStatus},J(Y)),e.createElement("span",{className:Ae.matchDate},j(Y.completedDate))),e.createElement("div",{className:Ae.matchPlayers},e.createElement("span",{className:`${Ae.player1} ${Y.winner===Y.player1Id?Ae.winner:""}`},Y.player1Id),e.createElement("span",{className:Ae.vs},"vs"),e.createElement("span",{className:`${Ae.player2} ${Y.winner===Y.player2Id?Ae.winner:""}`},Y.player2Id)),e.createElement("div",{className:Ae.matchResult},e.createElement("span",{className:Ae.winner},"🏆 Winner: ",Y.winner),e.createElement("span",{className:Ae.score},"Score: ",Y.score)),Y.notes&&e.createElement("div",{className:Ae.matchNotes},e.createElement("span",{className:Ae.notesLabel},"Notes:"),e.createElement("span",{className:Ae.notesText},Y.notes)))))),v&&f&&e.createElement("div",{className:Ae.modalOverlay},e.createElement("div",{className:Ae.modal},e.createElement("h3",null,"Complete Match"),e.createElement("p",null,f.player1Id," vs ",f.player2Id),e.createElement("div",{className:Ae.formGroup},e.createElement("label",null,"Winner:"),e.createElement("select",{value:k,onChange:Y=>E(Y.target.value)},e.createElement("option",{value:""},"Select winner"),e.createElement("option",{value:f.player1Id},f.player1Id),e.createElement("option",{value:f.player2Id},f.player2Id))),e.createElement("div",{className:Ae.formGroup},e.createElement("label",null,"Score:"),e.createElement("input",{type:"text",value:I,onChange:Y=>M(Y.target.value),placeholder:"e.g., 7-5"})),e.createElement("div",{className:Ae.formGroup},e.createElement("label",null,"Notes (optional):"),e.createElement("textarea",{value:N,onChange:Y=>_(Y.target.value),placeholder:"Any additional notes..."})),e.createElement("div",{className:Ae.modalActions},e.createElement("button",{onClick:L,disabled:!k||!I},"Complete Match"),e.createElement("button",{onClick:()=>S(!1)},"Cancel")))),w&&f&&e.createElement("div",{className:Ae.modalOverlay},e.createElement("div",{className:Ae.modal},e.createElement("h3",null,"Cancel Match"),e.createElement("p",null,f.player1Id," vs ",f.player2Id),e.createElement("div",{className:Ae.formGroup},e.createElement("label",null,"Reason for cancellation:"),e.createElement("textarea",{value:P,onChange:Y=>B(Y.target.value),placeholder:"Why is this match being cancelled?"})),e.createElement("div",{className:Ae.modalActions},e.createElement("button",{onClick:F},"Cancel Match"),e.createElement("button",{onClick:()=>x(!1)},"Keep Match")))))};function JF({backendUrl:a}){const[r,t]=h.useState({enabled:!1,sheetId:"",sheetName:"Player Backup",apiKey:"",backupFrequency:"weekly",autoBackup:!0}),[n,o]=h.useState(!1),[i,c]=h.useState(""),[u,m]=h.useState(""),[g,f]=h.useState(null),[y,v]=h.useState(null),[S,w]=h.useState(1),[x,k]=h.useState(!1);h.useEffect(()=>{E(),I()},[]);const E=async()=>{try{const D=await fetch(`${a}/api/league-config`);if(!D.ok)throw new Error(`HTTP error! status: ${D.status}`);const A=await D.json();if(A.success&&A.config){const U=A.config.googleSheetsBackup||{};t({enabled:U.enabled||!1,sheetId:U.sheetId||"",sheetName:U.sheetName||"Player Backup",apiKey:U.apiKey==="***CONFIGURED***"?"":U.apiKey||"",backupFrequency:U.backupFrequency||"weekly",autoBackup:U.autoBackup!==void 0?U.autoBackup:!0}),U.sheetId&&U.apiKey==="***CONFIGURED***"&&f(K=>({...K,enabled:U.enabled,sheetId:U.sheetId,sheetName:U.sheetName,configured:!0,frequency:U.backupFrequency,autoBackup:U.autoBackup,lastBackup:U.lastBackupDate}))}}catch(D){console.error("Error loading config:",D)}},I=async()=>{try{const D=await fetch(`${a}/api/league-config/backup/status`);if(D.ok){const A=await D.json();A.success&&f(A.backup)}}catch(D){console.error("Error loading backup status:",D)}},M=(D,A)=>{m(D),c(A),setTimeout(()=>c(""),5e3)},N=(D,A)=>{t(U=>({...U,[D]:A})),(D==="sheetId"||D==="apiKey")&&v(null)},_=async()=>{if(!r.sheetId||!r.apiKey){M("error","Please fill in both fields first");return}o(!0),v(null);try{const A=await(await fetch(`${a}/api/league-config/backup/test-connection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetId:r.sheetId,apiKey:r.apiKey})})).json();A.success?(v({success:!0,message:"✅ Great! Connection successful!"}),M("success","Connection successful!")):(v({success:!1,message:`❌ Connection failed: ${A.error}`}),M("error",`Connection failed: ${A.error}`))}catch{v({success:!1,message:"Connection test failed - please check your internet"}),M("error","Connection test failed")}o(!1)},P=async()=>{if(!r.sheetId||!r.apiKey){M("error","Please fill in both fields");return}if(!(y!=null&&y.success)){M("error","Please test the connection first");return}o(!0);try{const A=await(await fetch(`${a}/api/league-config/backup/configure`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();A.success?(M("success","✅ Backup setup complete!"),I(),w(4)):M("error",`Setup failed: ${A.error}`)}catch{M("error","Failed to save configuration")}o(!1)},B=async()=>{o(!0);try{const A=await(await fetch(`${a}/api/league-config/backup/run`,{method:"POST"})).json();A.success?(M("success",`✅ Backup completed! ${A.count} players backed up.`),I()):M("error",`Backup failed: ${A.error}`)}catch{M("error","Backup failed")}o(!1)},R=D=>`https://docs.google.com/spreadsheets/d/${D}`,W=()=>e.createElement("div",{style:{textAlign:"center",padding:"40px 20px"}},e.createElement("div",{style:{fontSize:"64px",marginBottom:"20px"}},"📊"),e.createElement("h2",{style:{color:"white",marginBottom:"20px"}},"Backup Your League Data"),e.createElement("p",{style:{fontSize:"18px",color:"white",marginBottom:"30px",lineHeight:"1.6",opacity:.9}},"Keep a safe copy of all your player information in Google Sheets.",e.createElement("br",null),"It's free, secure, and takes just a few minutes to set up."),e.createElement("div",{style:{background:"#ffffff",padding:"20px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},e.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"15px"}},"What You'll Get:"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"}},e.createElement("div",{style:{textAlign:"center",padding:"15px"}},e.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"🛡️"),e.createElement("strong",{style:{color:"#1a1a1a"}},"Data Safety"),e.createElement("br",null),e.createElement("small",{style:{color:"#2c2c2c"}},"Backup copy of all player info")),e.createElement("div",{style:{textAlign:"center",padding:"15px"}},e.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"📱"),e.createElement("strong",{style:{color:"#1a1a1a"}},"Easy Viewing"),e.createElement("br",null),e.createElement("small",{style:{color:"#2c2c2c"}},"View data in Google Sheets")),e.createElement("div",{style:{textAlign:"center",padding:"15px"}},e.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"🔄"),e.createElement("strong",{style:{color:"#1a1a1a"}},"Auto Backup"),e.createElement("br",null),e.createElement("small",{style:{color:"#2c2c2c"}},"Keeps data up to date")))),e.createElement("div",{style:{background:"#f8f9fa",padding:"25px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},e.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"}},e.createElement(Az,null)," Frequently Asked Questions"),e.createElement("div",{style:{display:"grid",gap:"15px"}},e.createElement("div",{style:{padding:"15px",background:"#ffffff",borderRadius:"8px",border:"1px solid #e0e0e0"}},e.createElement("strong",{style:{color:"#1a1a1a",display:"block",marginBottom:"8px"}},"Q: Is this free to use?"),e.createElement("span",{style:{color:"#2c2c2c"}},"A: Yes! Google Sheets is completely free. You only need a Google account.")),e.createElement("div",{style:{padding:"15px",background:"#ffffff",borderRadius:"8px",border:"1px solid #e0e0e0"}},e.createElement("strong",{style:{color:"#1a1a1a",display:"block",marginBottom:"8px"}},"Q: How often does it backup?"),e.createElement("span",{style:{color:"#2c2c2c"}},"A: By default, it backs up weekly, but you can run manual backups anytime.")),e.createElement("div",{style:{padding:"15px",background:"#ffffff",borderRadius:"8px",border:"1px solid #e0e0e0"}},e.createElement("strong",{style:{color:"#1a1a1a",display:"block",marginBottom:"8px"}},"Q: Is my data secure?"),e.createElement("span",{style:{color:"#2c2c2c"}},"A: Yes! Your API key only works with your specific Google Sheet and is stored securely.")),e.createElement("div",{style:{padding:"15px",background:"#ffffff",borderRadius:"8px",border:"1px solid #e0e0e0"}},e.createElement("strong",{style:{color:"#1a1a1a",display:"block",marginBottom:"8px"}},"Q: What if I change my mind?"),e.createElement("span",{style:{color:"#2c2c2c"}},"A: You can disable backup anytime, and your Google Sheet will remain as a backup copy.")))),e.createElement("button",{onClick:()=>w(2),style:{padding:"15px 30px",background:"#007bff",color:"white",border:"none",borderRadius:"8px",fontSize:"18px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",margin:"0 auto"}},"Get Started ",e.createElement(ks,null))),L=()=>e.createElement("div",{style:{padding:"30px 20px"}},e.createElement("div",{style:{textAlign:"center",marginBottom:"30px"}},e.createElement("h2",{style:{color:"white",marginBottom:"10px"}},"Step 1: Create a Google Sheet"),e.createElement("p",{style:{color:"white",fontSize:"16px",opacity:.9}},"First, let's create a place to store your backup data")),e.createElement("div",{style:{background:"#ffffff",padding:"25px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},e.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"}},e.createElement(Op,null)," Create Your Google Sheet"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"20px",alignItems:"center"}},e.createElement("div",null,e.createElement("p",{style:{marginBottom:"15px",color:"#1a1a1a"}},e.createElement("strong",null,"1.")," Go to ",e.createElement("a",{href:"https://sheets.google.com",target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",textDecoration:"underline"}},"Google Sheets")),e.createElement("p",{style:{marginBottom:"15px",color:"#1a1a1a"}},e.createElement("strong",null,"2."),' Click "Blank" to create a new sheet'),e.createElement("p",{style:{marginBottom:"15px",color:"#1a1a1a"}},e.createElement("strong",null,"3."),' Give it a name like "League Backup" or "Player Data"'),e.createElement("p",{style:{color:"#1a1a1a"}},e.createElement("strong",null,"4.")," Copy the Sheet ID from the URL (we'll show you how)")),e.createElement("div",{style:{textAlign:"center"}},e.createElement("div",{style:{fontSize:"48px",marginBottom:"10px"}},"📋"),e.createElement("button",{onClick:()=>window.open("https://sheets.google.com","_blank"),style:{padding:"10px 20px",background:"#28a745",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"}},"Open Google Sheets")))),e.createElement("div",{style:{background:"#fff8dc",padding:"20px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #ffd700"}},e.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"15px"}},"How to Find Your Sheet ID:"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",alignItems:"center"}},e.createElement("div",null,e.createElement("p",{style:{marginBottom:"10px",color:"#1a1a1a"}},e.createElement("strong",null,"Look at your Google Sheet URL:")),e.createElement("div",{style:{background:"#f8f9fa",padding:"15px",borderRadius:"6px",border:"1px solid #dee2e6",fontFamily:"monospace",fontSize:"14px",wordBreak:"break-all",color:"#1a1a1a"}},"https://docs.google.com/spreadsheets/d/",e.createElement("span",{style:{background:"#ffeb3b",padding:"2px 4px",borderRadius:"3px"}},"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"),"/edit"),e.createElement("p",{style:{marginTop:"10px",color:"#2c2c2c",fontSize:"14px"}},"Copy the highlighted part (the long string of letters and numbers)")),e.createElement("div",{style:{textAlign:"center"}},e.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"🔍"),e.createElement("p",{style:{color:"#2c2c2c",fontSize:"14px"}},"It's the part between ",e.createElement("code",{style:{background:"#f0f0f0",padding:"2px 4px",borderRadius:"3px"}},"/d/")," and ",e.createElement("code",{style:{background:"#f0f0f0",padding:"2px 4px",borderRadius:"3px"}},"/edit"))))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("label",{style:{display:"block",marginBottom:"10px",fontWeight:"bold",color:"#1a1a1a"}},"Paste Your Sheet ID Here:"),e.createElement("input",{type:"text",value:r.sheetId,onChange:D=>N("sheetId",D.target.value),placeholder:"Example: 1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",style:{width:"100%",padding:"15px",border:"2px solid #ddd",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",color:"#1a1a1a",backgroundColor:"#ffffff"}}),r.sheetId&&e.createElement("div",{style:{marginTop:"10px",fontSize:"14px",color:"#2c2c2c"}},e.createElement("a",{href:R(r.sheetId),target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",textDecoration:"underline"}},"🔗 Open this sheet to verify"))),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("button",{onClick:()=>w(1),style:{padding:"12px 24px",background:"#6c757d",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(Qh,null)," Back"),e.createElement("button",{onClick:()=>w(3),disabled:!r.sheetId,style:{padding:"12px 24px",background:r.sheetId?"#007bff":"#ccc",color:"white",border:"none",borderRadius:"6px",cursor:r.sheetId?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"8px"}},"Next ",e.createElement(ks,null)))),F=()=>e.createElement("div",{style:{padding:"30px 20px"}},e.createElement("div",{style:{textAlign:"center",marginBottom:"30px"}},e.createElement("h2",{style:{color:"white",marginBottom:"10px"}},"Step 2: Get Your API Key"),e.createElement("p",{style:{color:"white",fontSize:"16px",opacity:.9}},"This allows the app to write to your Google Sheet (it's free and secure)")),e.createElement("div",{style:{background:"#ffffff",padding:"25px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},e.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"20px"}},"Getting Your API Key (Takes 2 Minutes):"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"20px",alignItems:"center"}},e.createElement("div",null,e.createElement("ol",{style:{margin:0,paddingLeft:"20px",lineHeight:"2"}},e.createElement("li",{style:{marginBottom:"10px",color:"#1a1a1a"}},e.createElement("strong",null,"Go to")," ",e.createElement("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",textDecoration:"underline"}},"Google Cloud Console")),e.createElement("li",{style:{marginBottom:"10px",color:"#1a1a1a"}},e.createElement("strong",null,'Click "Create Project"')," (or select an existing one)"),e.createElement("li",{style:{marginBottom:"10px",color:"#1a1a1a"}},e.createElement("strong",null,'Search for "Google Sheets API"'),' and click "Enable"'),e.createElement("li",{style:{marginBottom:"10px",color:"#1a1a1a"}},e.createElement("strong",null,'Go to "Credentials"'),' → "Create Credentials" → "API Key"'),e.createElement("li",{style:{color:"#1a1a1a"}},e.createElement("strong",null,"Copy the API key")," (it looks like: AIzaSyC...)"))),e.createElement("div",{style:{textAlign:"center"}},e.createElement("div",{style:{fontSize:"48px",marginBottom:"10px"}},"🔑"),e.createElement("button",{onClick:()=>window.open("https://console.cloud.google.com/apis/credentials","_blank"),style:{padding:"10px 20px",background:"#28a745",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"}},"Open Google Cloud Console")))),e.createElement("div",{style:{background:"#e8f5e8",padding:"20px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #28a745"}},e.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"15px"}},"🔒 Don't Worry About Security:"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#1a1a1a"}},e.createElement("li",null,"Your API key only works with your specific Google Sheet"),e.createElement("li",null,"It can't access any other files or data"),e.createElement("li",null,"It's stored securely and encrypted"),e.createElement("li",null,"You can delete it anytime from Google Cloud Console"))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("label",{style:{display:"block",marginBottom:"10px",fontWeight:"bold",color:"#1a1a1a"}},"Paste Your API Key Here:"),e.createElement("div",{style:{position:"relative"}},e.createElement("input",{type:x?"text":"password",value:r.apiKey,onChange:D=>N("apiKey",D.target.value),placeholder:"Example: AIzaSyC...",style:{width:"100%",padding:"15px",paddingRight:"50px",border:"2px solid #ddd",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",color:"#1a1a1a",backgroundColor:"#ffffff"}}),e.createElement("button",{onClick:()=>k(!x),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666"}},x?e.createElement(wz,null):e.createElement(Ti,null)))),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("button",{onClick:()=>w(2),style:{padding:"12px 24px",background:"#6c757d",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(Qh,null)," Back"),e.createElement("button",{onClick:()=>w(4),disabled:!r.sheetId||!r.apiKey,style:{padding:"12px 24px",background:r.sheetId&&r.apiKey?"#007bff":"#ccc",color:"white",border:"none",borderRadius:"6px",cursor:r.sheetId&&r.apiKey?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"8px"}},"Test & Save ",e.createElement(ks,null)))),j=()=>e.createElement("div",{style:{padding:"30px 20px"}},e.createElement("div",{style:{textAlign:"center",marginBottom:"30px"}},e.createElement("h2",{style:{color:"white",marginBottom:"10px"}},"Step 3: Test & Save"),e.createElement("p",{style:{color:"white",fontSize:"16px",opacity:.9}},"Let's make sure everything works before saving")),e.createElement("div",{style:{background:"#ffffff",padding:"25px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},e.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"20px"}},"Your Setup Summary:"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"}},e.createElement("div",null,e.createElement("strong",{style:{color:"#1a1a1a"}},"Sheet ID:"),e.createElement("br",null),e.createElement("code",{style:{background:"#f8f9fa",padding:"5px 8px",borderRadius:"4px",fontSize:"14px",wordBreak:"break-all",color:"#1a1a1a",border:"1px solid #dee2e6"}},r.sheetId||"Not set")),e.createElement("div",null,e.createElement("strong",{style:{color:"#1a1a1a"}},"API Key:"),e.createElement("br",null),e.createElement("code",{style:{background:"#f8f9fa",padding:"5px 8px",borderRadius:"4px",fontSize:"14px",color:"#1a1a1a",border:"1px solid #dee2e6"}},r.apiKey?`${r.apiKey.substring(0,10)}...`:"Not set")))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("button",{onClick:_,disabled:n||!r.sheetId||!r.apiKey,style:{width:"100%",padding:"15px",background:"#17a2b8",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",opacity:n||!r.sheetId||!r.apiKey?.6:1}},n?e.createElement(ld,{style:{animation:"spin 1s linear infinite"}}):e.createElement(ld,null),n?"Testing Connection...":"Test Connection"),y&&e.createElement("div",{style:{marginTop:"15px",padding:"15px",borderRadius:"8px",background:y.success?"#d4edda":"#f8d7da",color:y.success?"#155724":"#721c24",border:`1px solid ${y.success?"#c3e6cb":"#f5c6cb"}`,display:"flex",alignItems:"center",gap:"10px"}},y.success?e.createElement(Qr,null):e.createElement(Fp,null),y.message)),(y==null?void 0:y.success)&&e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("button",{onClick:P,disabled:n,style:{width:"100%",padding:"15px",background:"#28a745",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",opacity:n?.6:1}},n?e.createElement(ld,{style:{animation:"spin 1s linear infinite"}}):e.createElement(Qr,null),n?"Saving...":"Save Configuration")),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("button",{onClick:()=>w(3),style:{padding:"12px 24px",background:"#6c757d",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(Qh,null)," Back"),(g==null?void 0:g.configured)&&e.createElement("button",{onClick:()=>w(5),style:{padding:"12px 24px",background:"#007bff",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"}},"Next ",e.createElement(ks,null)))),J=()=>e.createElement("div",{style:{padding:"30px 20px",textAlign:"center"}},e.createElement("div",{style:{fontSize:"64px",marginBottom:"20px"}},"🎉"),e.createElement("h2",{style:{color:"#1a1a1a",marginBottom:"20px"}},"Setup Complete!"),e.createElement("p",{style:{fontSize:"18px",color:"#2c2c2c",marginBottom:"30px",lineHeight:"1.6"}},"Your Google Sheets backup is now configured and ready to use."),e.createElement("div",{style:{background:"#e8f5e8",padding:"25px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #28a745"}},e.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"20px"}},"✅ What's Working Now:"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"}},e.createElement("div",null,e.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"🔄"),e.createElement("strong",{style:{color:"#1a1a1a"}},"Auto Backup"),e.createElement("br",null),e.createElement("small",{style:{color:"#2c2c2c"}},"Your data will be backed up automatically")),e.createElement("div",null,e.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"📊"),e.createElement("strong",{style:{color:"#1a1a1a"}},"Easy Viewing"),e.createElement("br",null),e.createElement("small",{style:{color:"#2c2c2c"}},"View your data in Google Sheets anytime")),e.createElement("div",null,e.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"🛡️"),e.createElement("strong",{style:{color:"#1a1a1a"}},"Data Safety"),e.createElement("br",null),e.createElement("small",{style:{color:"#2c2c2c"}},"Your data is now safely backed up")))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("button",{onClick:B,disabled:n,style:{padding:"15px 30px",background:"#007bff",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",margin:"0 auto"}},n?e.createElement(ld,{style:{animation:"spin 1s linear infinite"}}):e.createElement(ld,null),n?"Running Backup...":"Run Your First Backup"),e.createElement("p",{style:{marginTop:"10px",color:"#2c2c2c",fontSize:"14px"}},"This will copy all your current player data to your Google Sheet")),(g==null?void 0:g.sheetId)&&e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("a",{href:R(g.sheetId),target:"_blank",rel:"noopener noreferrer",style:{padding:"12px 24px",background:"#28a745",color:"white",textDecoration:"none",borderRadius:"6px",display:"inline-flex",alignItems:"center",gap:"8px",fontSize:"16px"}},e.createElement(J2,null)," View Your Backup Sheet")),e.createElement("div",{style:{background:"#fff8dc",padding:"20px",borderRadius:"12px",border:"2px solid #ffd700",textAlign:"left"}},e.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"15px"}},"💡 What Happens Next:"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#1a1a1a",lineHeight:"1.6"}},e.createElement("li",null,"Your data will be backed up automatically"),e.createElement("li",null,"You can view your data anytime in Google Sheets"),e.createElement("li",null,"You can run manual backups whenever you want"),e.createElement("li",null,"Your data is safe and secure")))),Y=()=>e.createElement("div",{style:{background:"#ffffff",padding:"16px",borderRadius:"8px",marginBottom:"20px",border:"2px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},e.createElement("h4",{style:{margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"8px",color:"#1a1a1a"}},e.createElement(Ry,null)," Current Status"),g?e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"14px",color:"#1a1a1a"}},e.createElement("div",null,e.createElement("strong",null,"Status:")," ",g.enabled?"✅ Enabled":"❌ Disabled"),e.createElement("div",null,e.createElement("strong",null,"Last Backup:")," ",g.lastBackup?new Date(g.lastBackup).toLocaleString():"Never"),g.sheetId&&e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement("strong",null,"Sheet:")," ",g.sheetName||"Player Backup"),e.createElement("div",null,e.createElement("strong",null,"Sheet ID:")," ",g.sheetId.substring(0,20),"..."))):e.createElement("div",{style:{color:"#2c2c2c",fontStyle:"italic"}},"No backup configured"),e.createElement("div",{style:{marginTop:"15px",display:"flex",gap:"10px",flexWrap:"wrap",justifyContent:"center"}},(g==null?void 0:g.sheetId)&&e.createElement("a",{href:R(g.sheetId),target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"5px",padding:"8px 12px",border:"1px solid #007bff",borderRadius:"4px",fontSize:"14px"}},e.createElement(J2,null)," View Backup Sheet"),e.createElement("button",{onClick:()=>w(5),disabled:!(g!=null&&g.configured),style:{padding:"8px 12px",background:g!=null&&g.configured?"#007bff":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:g!=null&&g.configured?"pointer":"not-allowed",fontSize:"14px",opacity:g!=null&&g.configured?1:.6}},"Manage Backup Settings")));return e.createElement("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"20px"}},e.createElement("style",null,`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `),e.createElement("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"20px",borderRadius:"12px",marginBottom:"20px"}},e.createElement("h2",{style:{margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"10px",color:"white"}},e.createElement(Op,null)," Google Sheets Backup"),e.createElement("p",{style:{margin:0,opacity:.9,color:"white"}},"Keep your league data safe with automatic Google Sheets backup")),i&&e.createElement("div",{style:{padding:"12px 16px",borderRadius:"8px",marginBottom:"20px",background:u==="success"?"#d4edda":"#f8d7da",color:u==="success"?"#155724":"#721c24",border:`1px solid ${u==="success"?"#c3e6cb":"#f5c6cb"}`}},i),(g==null?void 0:g.configured)&&Y(),S===1&&W(),S===2&&L(),S===3&&F(),S===4&&j(),S===5&&J())}function XF({backendUrl:a}){const[r,t]=h.useState([]),[n,o]=h.useState(!0),[i,c]=h.useState(null),[u,m]=h.useState({name:"",address:"",notes:""}),[g,f]=h.useState(""),[y,v]=h.useState("");h.useEffect(()=>{S()},[]);const S=async()=>{try{o(!0);const M=await fetch(`${a}/api/locations`);if(!M.ok)throw new Error("Failed to load locations");const N=await M.json();t(N.locations||[])}catch(M){f("Failed to load locations: "+M.message)}finally{o(!1)}},w=async()=>{if(!u.name.trim()){f("Location name is required");return}try{const M=await fetch(`${a}/api/locations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!M.ok)throw new Error("Failed to add location");const N=await M.json();t([...r,N.location]),m({name:"",address:"",notes:""}),v("Location added successfully!"),setTimeout(()=>v(""),3e3)}catch(M){f("Failed to add location: "+M.message)}},x=async(M,N)=>{try{const _=await fetch(`${a}/api/locations/${M}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!_.ok)throw new Error("Failed to update location");const P=await _.json();t(r.map(B=>B._id===M?P.location:B)),c(null),v("Location updated successfully!"),setTimeout(()=>v(""),3e3)}catch(_){f("Failed to update location: "+_.message)}},k=async M=>{if(window.confirm("Are you sure you want to delete this location? This will affect any players who have selected this location."))try{if(!(await fetch(`${a}/api/locations/${M}`,{method:"DELETE"})).ok)throw new Error("Failed to delete location");t(r.filter(_=>_._id!==M)),v("Location deleted successfully!"),setTimeout(()=>v(""),3e3)}catch(N){f("Failed to delete location: "+N.message)}},E=M=>{c(M._id)},I=()=>{c(null)};return n?e.createElement("div",{style:{textAlign:"center",padding:"20px"}},e.createElement("div",{style:{fontSize:"18px",color:"#ccc"}},"Loading locations...")):e.createElement("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"}},e.createElement("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px",borderRadius:"12px",marginBottom:"20px",color:"white"}},e.createElement("h2",{style:{margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"10px"}},e.createElement(Pi,null)," Location Management"),e.createElement("p",{style:{margin:0,opacity:.9}},"Manage predefined locations that players can select during registration. Players can also add custom locations if needed.")),y&&e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.2)",border:"1px solid #4CAF50",color:"#4CAF50",padding:"12px",borderRadius:"6px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(Uw,null)," ",y),g&&e.createElement("div",{style:{background:"rgba(244, 67, 54, 0.2)",border:"1px solid #f44336",color:"#f44336",padding:"12px",borderRadius:"6px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(Fp,null)," ",g),e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",padding:"20px",borderRadius:"8px",marginBottom:"20px",border:"1px solid rgba(255,255,255,0.1)"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(fr,null)," Add New Location"),e.createElement("div",{style:{display:"grid",gap:"15px"}},e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Location Name *"),e.createElement("input",{type:"text",value:u.name,onChange:M=>m({...u,name:M.target.value}),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"16px"},placeholder:"e.g., Pool Hall A, Community Center"})),e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Address (Optional)"),e.createElement("input",{type:"text",value:u.address,onChange:M=>m({...u,address:M.target.value}),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"16px"},placeholder:"e.g., 123 Main St, City, State"})),e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Notes (Optional)"),e.createElement("textarea",{value:u.notes,onChange:M=>m({...u,notes:M.target.value}),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"16px",minHeight:"80px",resize:"vertical"},placeholder:"Additional information about this location..."})),e.createElement("button",{onClick:w,style:{padding:"12px 20px",borderRadius:"6px",border:"none",background:"#e53e3e",color:"#fff",cursor:"pointer",fontSize:"16px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center"}},e.createElement(fr,null)," Add Location"))),e.createElement("div",{style:{background:"rgba(255,255,255,0.05)",padding:"20px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)"}},e.createElement("h3",{style:{color:"#e53e3e",marginBottom:"15px"}},"Existing Locations (",r.length,")"),r.length===0?e.createElement("div",{style:{textAlign:"center",padding:"40px",color:"#ccc"}},e.createElement(Pi,{style:{fontSize:"48px",marginBottom:"15px",opacity:.5}}),e.createElement("p",null,"No locations added yet. Add your first location above!")):e.createElement("div",{style:{display:"grid",gap:"15px"}},r.map(M=>e.createElement("div",{key:M._id,style:{background:"rgba(0,0,0,0.3)",padding:"15px",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)"}},i===M._id?e.createElement(eW,{location:M,onSave:N=>x(M._id,N),onCancel:I}):e.createElement(KF,{location:M,onEdit:()=>E(M),onDelete:()=>k(M._id)}))))))}function KF({location:a,onEdit:r,onDelete:t}){return e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("div",{style:{flex:1}},e.createElement("h4",{style:{color:"#fff",margin:"0 0 5px 0",fontSize:"18px"}},a.name),a.address&&e.createElement("p",{style:{color:"#ccc",margin:"0 0 5px 0",fontSize:"14px"}},"📍 ",a.address),a.notes&&e.createElement("p",{style:{color:"#999",margin:0,fontSize:"13px"}},"📝 ",a.notes)),e.createElement("div",{style:{display:"flex",gap:"8px"}},e.createElement("button",{onClick:r,style:{padding:"8px 12px",borderRadius:"4px",border:"1px solid #666",background:"transparent",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"}},e.createElement(Ri,null)," Edit"),e.createElement("button",{onClick:t,style:{padding:"8px 12px",borderRadius:"4px",border:"1px solid #f44336",background:"transparent",color:"#f44336",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"}},e.createElement(Bs,null)," Delete")))}function eW({location:a,onSave:r,onCancel:t}){const[n,o]=h.useState({name:a.name,address:a.address||"",notes:a.notes||""}),i=()=>{if(!n.name.trim()){alert("Location name is required");return}r(n)};return e.createElement("div",{style:{display:"grid",gap:"10px"}},e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Location Name *"),e.createElement("input",{type:"text",value:n.name,onChange:c=>o({...n,name:c.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"14px"}})),e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Address"),e.createElement("input",{type:"text",value:n.address,onChange:c=>o({...n,address:c.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"14px"}})),e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Notes"),e.createElement("textarea",{value:n.notes,onChange:c=>o({...n,notes:c.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"14px",minHeight:"60px",resize:"vertical"}})),e.createElement("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"}},e.createElement("button",{onClick:t,style:{padding:"8px 12px",borderRadius:"4px",border:"1px solid #666",background:"transparent",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"}},e.createElement(Rz,null)," Cancel"),e.createElement("button",{onClick:i,style:{padding:"8px 12px",borderRadius:"4px",border:"none",background:"#4CAF50",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"}},e.createElement(Cs,null)," Save")))}function tW(){const[a,r]=h.useState({registrationFee:30,weeklyDues:10,totalWeeks:10,participationFee:100,phase1Weeks:6,penaltyStructure:{strike1:5,strike2:10,strike3:0},paymentMethods:{venmo:{enabled:!0,username:"",displayName:"Venmo",instructions:"Send payment to @username"},cashapp:{enabled:!0,username:"",displayName:"Cash App",instructions:"Send payment to $username"},creditCard:{enabled:!1,processor:"square",displayName:"Credit/Debit Card",instructions:"Pay online using the link below",paymentLink:"",squareAppId:"",squareLocationId:""},applePay:{enabled:!1,displayName:"Apple Pay",instructions:"Pay using Apple Pay",paymentLink:""},googlePay:{enabled:!1,displayName:"Google Pay",instructions:"Pay using Google Pay",paymentLink:""},cash:{enabled:!0,displayName:"Cash",instructions:"Pay in person to league administrator"},check:{enabled:!1,displayName:"Check",instructions:"Make check payable to [Payee Name]",payeeName:"",mailingAddress:""}},additionalInstructions:"",contactInfo:{adminName:"",adminEmail:"",adminPhone:""},currentSession:{name:"Current Session",startDate:"",endDate:"",isActive:!0}}),[t,n]=h.useState(!0),[o,i]=h.useState(!1),[c,u]=h.useState(""),[m,g]=h.useState({type:"",text:""}),[f,y]=h.useState({feeStructure:!1,penaltyStructure:!1,paymentMethods:!1,additionalInstructions:!1,contactInfo:!1});h.useEffect(()=>{v()},[]);const v=async()=>{try{const N=await fetch(`${de}/api/payment-config`);if(N.ok){const _=await N.json();if(_.config){const P={..._.config,penaltyStructure:{strike1:5,strike2:10,strike3:0,..._.config.penaltyStructure},currentSession:{name:"Current Session",startDate:"",endDate:"",isActive:!0,..._.config.currentSession}};r(P)}}}catch(N){console.error("Error loading payment config:",N),g({type:"error",text:"Failed to load payment configuration"})}finally{n(!1)}},S=async()=>{i(!0),g({type:"",text:""});try{(await fetch(`${de}/api/payment-config`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok?g({type:"success",text:"Payment configuration saved successfully!"}):g({type:"error",text:"Failed to save payment configuration"})}catch(N){console.error("Error saving payment config:",N),g({type:"error",text:"Error saving payment configuration"})}finally{i(!1)}},w=async(N,_)=>{u(N),g({type:"",text:""});try{if((await fetch(`${de}/api/payment-config`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,..._})})).ok){g({type:"success",text:`${N} saved successfully!`});let B=null;N==="Fee Structure"?B="feeStructure":N==="Penalty Structure"?B="penaltyStructure":N==="Payment Methods"?B="paymentMethods":N==="Additional Instructions"?B="additionalInstructions":N==="Contact Information"&&(B="contactInfo"),B&&y(R=>({...R,[B]:!1}))}else g({type:"error",text:`Failed to save ${N}`})}catch(P){console.error(`Error saving ${N}:`,P),g({type:"error",text:`Error saving ${N}`})}finally{u("")}},x=(N,_,P)=>{r(B=>({...B,paymentMethods:{...B.paymentMethods,[N]:{...B.paymentMethods[N],[_]:P}}}))},k=(N,_)=>{r(P=>({...P,contactInfo:{...P.contactInfo,[N]:_}}))},E=N=>{switch(N){case"venmo":return e.createElement(kz,null);case"cashapp":return e.createElement(Ez,null);case"paypal":return e.createElement(hz,null);case"creditCard":return e.createElement(Q2,null);case"applePay":return e.createElement(gz,null);case"googlePay":return e.createElement(Op,null);case"cash":return e.createElement(Iz,null);case"check":return e.createElement(Uw,null);default:return e.createElement(Q2,null)}},I=N=>{y(_=>({..._,[N]:!_[N]}))},M=N=>{y(_=>({..._,[N]:!1})),v()};return t?e.createElement("div",{style:{textAlign:"center",padding:"20px"}},e.createElement(Zr,{style:{animation:"spin 1s linear infinite"}}),e.createElement("p",null,"Loading payment configuration...")):e.createElement("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"}},e.createElement("h2",{style:{color:"#e53e3e",marginBottom:"20px",textAlign:"center"}},"💳 Payment Configuration"),m.text&&e.createElement("div",{style:{padding:"10px 15px",borderRadius:"6px",marginBottom:"20px",background:m.type==="success"?"rgba(76, 175, 80, 0.2)":"rgba(229, 62, 62, 0.2)",border:`1px solid ${m.type==="success"?"#4CAF50":"#e53e3e"}`,color:m.type==="success"?"#4CAF50":"#e53e3e",display:"flex",alignItems:"center",gap:"10px"}},m.type==="success"?e.createElement(Qr,null):e.createElement(df,null),m.text),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},e.createElement("h3",{style:{color:"#fff",margin:0}},"League Fee Structure"),e.createElement("button",{onClick:()=>I("feeStructure"),style:{padding:"6px 12px",borderRadius:"4px",border:"none",background:f.feeStructure?"#ff9800":"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},f.feeStructure?"🔒 Cancel Edit":"✏️ Edit")),e.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:f.feeStructure?"rgba(76, 175, 80, 0.05)":"rgba(255,255,255,0.02)",opacity:f.feeStructure?1:.8}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"}},e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Registration Fee ($)"),e.createElement("input",{type:"number",value:a.registrationFee,onChange:N=>r(_=>({..._,registrationFee:Number(N.target.value)})),disabled:!f.feeStructure,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.feeStructure?"#222":"#333",color:f.feeStructure?"#fff":"#888",cursor:f.feeStructure?"text":"not-allowed"},min:"0",step:"0.01"})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Weekly Dues ($)"),e.createElement("input",{type:"number",value:a.weeklyDues,onChange:N=>r(_=>({..._,weeklyDues:Number(N.target.value)})),disabled:!f.feeStructure,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.feeStructure?"#222":"#333",color:f.feeStructure?"#fff":"#888",cursor:f.feeStructure?"text":"not-allowed"},min:"0",step:"0.01"})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Total Weeks"),e.createElement("input",{type:"number",value:a.totalWeeks,onChange:N=>r(_=>({..._,totalWeeks:Number(N.target.value)})),disabled:!f.feeStructure,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.feeStructure?"#222":"#333",color:f.feeStructure?"#fff":"#888",cursor:f.feeStructure?"text":"not-allowed"},min:"1"})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Participation Fee ($)"),e.createElement("div",{style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#333",color:"#4CAF50",fontWeight:"bold",textAlign:"center"}},"$",a.registrationFee+a.weeklyDues*a.totalWeeks,e.createElement("div",{style:{fontSize:"12px",color:"#888",marginTop:"2px"}},"Auto-calculated: $",a.registrationFee," + ($",a.weeklyDues," × ",a.totalWeeks,")"))))),e.createElement("div",{style:{marginTop:"10px",padding:"10px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"6px",border:"1px solid #4CAF50"}},e.createElement("div",{style:{color:"#4CAF50",fontSize:"14px"}},e.createElement("strong",null,"Total Session Cost:")," $",a.registrationFee+a.weeklyDues*a.totalWeeks,"(",a.registrationFee," + ",a.weeklyDues," × ",a.totalWeeks," weeks)")),f.feeStructure&&e.createElement("div",{style:{marginTop:"15px",textAlign:"center",display:"flex",gap:"10px",justifyContent:"center"}},e.createElement("button",{onClick:()=>w("Fee Structure",{registrationFee:a.registrationFee,weeklyDues:a.weeklyDues,totalWeeks:a.totalWeeks,participationFee:a.registrationFee+a.weeklyDues*a.totalWeeks}),disabled:c==="Fee Structure",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:c==="Fee Structure"?"#666":"#4CAF50",color:"#fff",cursor:c==="Fee Structure"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},c==="Fee Structure"?e.createElement(Zr,{style:{animation:"spin 1s linear infinite"}}):e.createElement(Cs,null),c==="Fee Structure"?"Saving...":"Save Fee Structure"),e.createElement("button",{onClick:()=>M("feeStructure"),disabled:c==="Fee Structure",style:{padding:"8px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#ccc",cursor:c==="Fee Structure"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"}},"Cancel"))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},e.createElement("h3",{style:{color:"#fff",margin:0}},"Penalty Structure"),e.createElement("button",{onClick:()=>I("penaltyStructure"),style:{padding:"6px 12px",borderRadius:"4px",border:"none",background:f.penaltyStructure?"#ff9800":"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},f.penaltyStructure?"🔒 Cancel Edit":"✏️ Edit")),e.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:f.penaltyStructure?"rgba(76, 175, 80, 0.05)":"rgba(255,255,255,0.02)",opacity:f.penaltyStructure?1:.8}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"}},e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"1st Strike Fine ($)"),e.createElement("input",{type:"number",value:a.penaltyStructure.strike1,onChange:N=>r(_=>({..._,penaltyStructure:{..._.penaltyStructure,strike1:Number(N.target.value)}})),disabled:!f.penaltyStructure,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.penaltyStructure?"#222":"#333",color:f.penaltyStructure?"#fff":"#888",cursor:f.penaltyStructure?"text":"not-allowed"},min:"0",step:"0.01"})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"2nd Strike Fine ($)"),e.createElement("input",{type:"number",value:a.penaltyStructure.strike2,onChange:N=>r(_=>({..._,penaltyStructure:{..._.penaltyStructure,strike2:Number(N.target.value)}})),disabled:!f.penaltyStructure,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.penaltyStructure?"#222":"#333",color:f.penaltyStructure?"#fff":"#888",cursor:f.penaltyStructure?"text":"not-allowed"},min:"0",step:"0.01"})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"3rd Strike Fine ($)"),e.createElement("input",{type:"number",value:a.penaltyStructure.strike3,onChange:N=>r(_=>({..._,penaltyStructure:{..._.penaltyStructure,strike3:Number(N.target.value)}})),disabled:!f.penaltyStructure,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.penaltyStructure?"#222":"#333",color:f.penaltyStructure?"#fff":"#888",cursor:f.penaltyStructure?"text":"not-allowed"},min:"0",step:"0.01"})))),f.penaltyStructure&&e.createElement("div",{style:{marginTop:"15px",textAlign:"center",display:"flex",gap:"10px",justifyContent:"center"}},e.createElement("button",{onClick:()=>w("Penalty Structure",{penaltyStructure:a.penaltyStructure}),disabled:c==="Penalty Structure",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:c==="Penalty Structure"?"#666":"#4CAF50",color:"#fff",cursor:c==="Penalty Structure"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},c==="Penalty Structure"?e.createElement(Zr,{style:{animation:"spin 1s linear infinite"}}):e.createElement(Cs,null),c==="Penalty Structure"?"Saving...":"Save Penalty Structure"),e.createElement("button",{onClick:()=>M("penaltyStructure"),disabled:c==="Penalty Structure",style:{padding:"8px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#ccc",cursor:c==="Penalty Structure"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"}},"Cancel"))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},e.createElement("h3",{style:{color:"#fff",margin:0}},"Payment Methods"),e.createElement("button",{onClick:()=>I("paymentMethods"),style:{padding:"6px 12px",borderRadius:"4px",border:"none",background:f.paymentMethods?"#ff9800":"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},f.paymentMethods?"🔒 Cancel Edit":"✏️ Edit")),e.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:f.paymentMethods?"rgba(76, 175, 80, 0.05)":"rgba(255,255,255,0.02)",opacity:f.paymentMethods?1:.8}},Object.entries(a.paymentMethods).map(([N,_])=>e.createElement("div",{key:N,style:{marginBottom:"20px",padding:"15px",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",background:"rgba(255,255,255,0.02)"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"}},E(N),e.createElement("h4",{style:{color:"#fff",margin:0,flex:1}},_.displayName),e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"5px"}},e.createElement("input",{type:"checkbox",checked:_.enabled,onChange:P=>x(N,"enabled",P.target.checked),disabled:!f.paymentMethods,style:{cursor:f.paymentMethods?"pointer":"not-allowed"}}),e.createElement("span",{style:{color:"#fff",fontSize:"14px"}},"Enabled"))),_.enabled&&e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"10px"}},N==="venmo"&&e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Venmo Username"),e.createElement("input",{type:"text",value:_.username,onChange:P=>x(N,"username",P.target.value),disabled:!f.paymentMethods,placeholder:"@username",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.paymentMethods?"#222":"#333",color:f.paymentMethods?"#fff":"#888",cursor:f.paymentMethods?"text":"not-allowed"}})),N==="cashapp"&&e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Cash App Username"),e.createElement("input",{type:"text",value:_.username,onChange:P=>x(N,"username",P.target.value),disabled:!f.paymentMethods,placeholder:"$username",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.paymentMethods?"#222":"#333",color:f.paymentMethods?"#fff":"#888",cursor:f.paymentMethods?"text":"not-allowed"}})),(N==="creditCard"||N==="applePay"||N==="googlePay")&&e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Payment Link"),e.createElement("input",{type:"url",value:_.paymentLink,onChange:P=>x(N,"paymentLink",P.target.value),disabled:!f.paymentMethods,placeholder:"https://...",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.paymentMethods?"#222":"#333",color:f.paymentMethods?"#fff":"#888",cursor:f.paymentMethods?"text":"not-allowed"}})),N==="check"&&e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Payee Name"),e.createElement("input",{type:"text",value:_.payeeName,onChange:P=>x(N,"payeeName",P.target.value),disabled:!f.paymentMethods,placeholder:"Pay to the order of...",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.paymentMethods?"#222":"#333",color:f.paymentMethods?"#fff":"#888",cursor:f.paymentMethods?"text":"not-allowed"}})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Mailing Address"),e.createElement("textarea",{value:_.mailingAddress,onChange:P=>x(N,"mailingAddress",P.target.value),disabled:!f.paymentMethods,placeholder:"Mailing address for checks...",rows:"3",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.paymentMethods?"#222":"#333",color:f.paymentMethods?"#fff":"#888",cursor:f.paymentMethods?"text":"not-allowed",resize:"vertical"}}))),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Instructions"),e.createElement("textarea",{value:_.instructions,onChange:P=>x(N,"instructions",P.target.value),disabled:!f.paymentMethods,placeholder:"Payment instructions...",rows:"2",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.paymentMethods?"#222":"#333",color:f.paymentMethods?"#fff":"#888",cursor:f.paymentMethods?"text":"not-allowed",resize:"vertical"}})))))),f.paymentMethods&&e.createElement("div",{style:{marginTop:"15px",textAlign:"center",display:"flex",gap:"10px",justifyContent:"center"}},e.createElement("button",{onClick:()=>w("Payment Methods",{paymentMethods:a.paymentMethods}),disabled:c==="Payment Methods",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:c==="Payment Methods"?"#666":"#4CAF50",color:"#fff",cursor:c==="Payment Methods"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},c==="Payment Methods"?e.createElement(Zr,{style:{animation:"spin 1s linear infinite"}}):e.createElement(Cs,null),c==="Payment Methods"?"Saving...":"Save Payment Methods"),e.createElement("button",{onClick:()=>M("paymentMethods"),disabled:c==="Payment Methods",style:{padding:"8px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#ccc",cursor:c==="Payment Methods"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"}},"Cancel"))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},e.createElement("h3",{style:{color:"#fff",margin:0}},"Additional Instructions"),e.createElement("button",{onClick:()=>I("additionalInstructions"),style:{padding:"6px 12px",borderRadius:"4px",border:"none",background:f.additionalInstructions?"#ff9800":"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},f.additionalInstructions?"🔒 Cancel Edit":"✏️ Edit")),e.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:f.additionalInstructions?"rgba(76, 175, 80, 0.05)":"rgba(255,255,255,0.02)",opacity:f.additionalInstructions?1:.8}},e.createElement("textarea",{value:a.additionalInstructions,onChange:N=>r(_=>({..._,additionalInstructions:N.target.value})),disabled:!f.additionalInstructions,placeholder:"Enter any additional payment instructions or notes for players...",rows:"4",style:{width:"100%",padding:"12px",borderRadius:"6px",border:"1px solid #444",background:f.additionalInstructions?"#222":"#333",color:f.additionalInstructions?"#fff":"#888",cursor:f.additionalInstructions?"text":"not-allowed",resize:"vertical",fontFamily:"inherit"}})),f.additionalInstructions&&e.createElement("div",{style:{marginTop:"15px",textAlign:"center",display:"flex",gap:"10px",justifyContent:"center"}},e.createElement("button",{onClick:()=>w("Additional Instructions",{additionalInstructions:a.additionalInstructions}),disabled:c==="Additional Instructions",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:c==="Additional Instructions"?"#666":"#4CAF50",color:"#fff",cursor:c==="Additional Instructions"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},c==="Additional Instructions"?e.createElement(Zr,{style:{animation:"spin 1s linear infinite"}}):e.createElement(Cs,null),c==="Additional Instructions"?"Saving...":"Save Additional Instructions"),e.createElement("button",{onClick:()=>M("additionalInstructions"),disabled:c==="Additional Instructions",style:{padding:"8px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#ccc",cursor:c==="Additional Instructions"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"}},"Cancel"))),e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},e.createElement("h3",{style:{color:"#fff",margin:0}},"Contact Information"),e.createElement("button",{onClick:()=>I("contactInfo"),style:{padding:"6px 12px",borderRadius:"4px",border:"none",background:f.contactInfo?"#ff9800":"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},f.contactInfo?"🔒 Cancel Edit":"✏️ Edit")),e.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:f.contactInfo?"rgba(76, 175, 80, 0.05)":"rgba(255,255,255,0.02)",opacity:f.contactInfo?1:.8}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"15px"}},e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Admin Name"),e.createElement("input",{type:"text",value:a.contactInfo.adminName,onChange:N=>k("adminName",N.target.value),disabled:!f.contactInfo,placeholder:"League Administrator Name",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.contactInfo?"#222":"#333",color:f.contactInfo?"#fff":"#888",cursor:f.contactInfo?"text":"not-allowed"}})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Admin Email"),e.createElement("input",{type:"email",value:a.contactInfo.adminEmail,onChange:N=>k("adminEmail",N.target.value),disabled:!f.contactInfo,placeholder:"admin@example.com",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.contactInfo?"#222":"#333",color:f.contactInfo?"#fff":"#888",cursor:f.contactInfo?"text":"not-allowed"}})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Admin Phone"),e.createElement("input",{type:"tel",value:a.contactInfo.adminPhone,onChange:N=>k("adminPhone",N.target.value),disabled:!f.contactInfo,placeholder:"(555) 123-4567",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:f.contactInfo?"#222":"#333",color:f.contactInfo?"#fff":"#888",cursor:f.contactInfo?"text":"not-allowed"}})))),f.contactInfo&&e.createElement("div",{style:{marginTop:"15px",textAlign:"center",display:"flex",gap:"10px",justifyContent:"center"}},e.createElement("button",{onClick:()=>w("Contact Information",{contactInfo:a.contactInfo}),disabled:c==="Contact Information",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:c==="Contact Information"?"#666":"#4CAF50",color:"#fff",cursor:c==="Contact Information"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},c==="Contact Information"?e.createElement(Zr,{style:{animation:"spin 1s linear infinite"}}):e.createElement(Cs,null),c==="Contact Information"?"Saving...":"Save Contact Information"),e.createElement("button",{onClick:()=>M("contactInfo"),disabled:c==="Contact Information",style:{padding:"8px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#ccc",cursor:c==="Contact Information"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"}},"Cancel"))),e.createElement("div",{style:{marginTop:"40px",padding:"20px",border:"2px solid rgba(76, 175, 80, 0.3)",borderRadius:"12px",background:"rgba(76, 175, 80, 0.05)",textAlign:"center"}},e.createElement("h3",{style:{color:"#4CAF50",marginBottom:"15px"}},"💾 Save All Changes"),e.createElement("p",{style:{color:"#ccc",marginBottom:"20px",fontSize:"14px"}},"Use this button to save all configuration changes at once, or use the individual save buttons for each section above."),e.createElement("button",{onClick:S,disabled:o,style:{padding:"12px 30px",borderRadius:"8px",border:"none",background:o?"#666":"linear-gradient(135deg, #4CAF50, #45a049)",color:"#fff",cursor:o?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px",margin:"0 auto",boxShadow:o?"none":"0 4px 15px rgba(76, 175, 80, 0.3)",transition:"all 0.2s ease"},onMouseEnter:N=>{o||(N.target.style.transform="translateY(-2px)",N.target.style.boxShadow="0 6px 20px rgba(76, 175, 80, 0.4)")},onMouseLeave:N=>{o||(N.target.style.transform="translateY(0)",N.target.style.boxShadow="0 4px 15px rgba(76, 175, 80, 0.3)")}},o?e.createElement(Zr,{style:{animation:"spin 1s linear infinite"}}):e.createElement(Cs,null),o?"Saving All Changes...":"Save All Configuration")))}function aW(){const[a,r]=h.useState([]),[t,n]=h.useState(!0),[o,i]=h.useState(""),[c,u]=h.useState("all"),[m,g]=h.useState(null),[f,y]=h.useState(!1),[v,S]=h.useState(!1),[w,x]=h.useState(!1),[k,E]=h.useState({amount:"",paymentType:"weekly_dues",paymentMethod:"cash",notes:"",date:new Date().toISOString().split("T")[0]}),[I,M]=h.useState({amount:"",reason:"",strikeLevel:"1",notes:"",date:new Date().toISOString().split("T")[0]}),[N,_]=h.useState({registrationFee:30,weeklyDues:10,totalWeeks:10,penaltyStructure:{strike1:5,strike2:10,strike3:0}});h.useEffect(()=>{P(),B()},[]);const P=async()=>{n(!0);try{console.log("🔄 Loading players..."),console.log("🔍 API URL:",`${de}/api/users/search?approved=true`);const D=await fetch(`${de}/api/users/search?approved=true&t=${Date.now()}`);if(D.ok){const A=await D.json();console.log("📊 Loaded players data:",A.users.length,"players");const U=A.users.find(ne=>ne.firstName==="Beta"&&ne.lastName==="Test User");if(U)console.log("🔍 Raw Beta Test User data from API:",{id:U._id,firstName:U.firstName,lastName:U.lastName,paymentHistory:U.paymentHistory,paymentHistoryLength:U.paymentHistory?U.paymentHistory.length:"undefined"});else{console.log("❌ Beta Test User not found in raw data"),console.log("Available users:",A.users.map(T=>`${T.firstName} ${T.lastName}`)),console.log("🔍 All users with IDs:",A.users.map(T=>({id:T._id,name:`${T.firstName} ${T.lastName}`,email:T.email})));const ne=A.users.filter(T=>!T.firstName||!T.lastName||T.firstName.trim()===""||T.lastName.trim()==="");ne.length>0&&(console.log("⚠️ Users with empty names found:",ne.length),ne.forEach((T,re)=>{console.log(`   ${re+1}. ID: ${T._id}`),console.log(`      Email: ${T.email||"No email"}`),console.log(`      First Name: "${T.firstName||"EMPTY"}"`),console.log(`      Last Name: "${T.lastName||"EMPTY"}"`)}))}const K=A.users.filter(ne=>ne.paymentHistory&&ne.paymentHistory.length>0);console.log("🔍 Users with payment history:",K.length),K.length>0&&console.log("🔍 First user with payments:",{name:`${K[0].firstName} ${K[0].lastName}`,paymentHistory:K[0].paymentHistory});const X=A.users.find(ne=>ne.email==="frbcapl@gmail.com");X?(console.log("🔍 Found frbcapl@gmail.com user:",{id:X._id,name:`${X.firstName} ${X.lastName}`,email:X.email,paymentHistory:X.paymentHistory,paymentHistoryLength:X.paymentHistory?X.paymentHistory.length:0}),console.log("🔍 Full frbcapl user object:",X),console.log("🔍 frbcapl user keys:",Object.keys(X)),console.log("🔍 frbcapl paymentHistory field:",X.paymentHistory),console.log("🔍 frbcapl paymentHistory type:",typeof X.paymentHistory)):console.log("❌ frbcapl@gmail.com user not found");const O=A.users.filter(ne=>ne.firstName&&ne.lastName&&ne.firstName.trim()&&ne.lastName.trim()).map(ne=>{const T={...ne,paymentHistory:ne.paymentHistory||[],penalties:ne.penalties||[]};return T.currentBalance=R(T),T.paymentStatus=W(T),T}),Q=O.find(ne=>ne.firstName==="Beta"&&ne.lastName==="Test User");Q&&(console.log("🔍 Beta Test User found in loaded data:"),console.log("Payment history length:",Q.paymentHistory.length),console.log("Payment history:",Q.paymentHistory),console.log("Calculated balance:",Q.currentBalance),console.log("Payment status:",Q.paymentStatus)),r(O),console.log("✅ Players loaded and processed")}else console.error("❌ Failed to load players:",D.status)}catch(D){console.error("Error loading players:",D)}finally{n(!1)}},B=async()=>{try{const D=await fetch(`${de}/api/payment-config`);if(D.ok){const A=await D.json();A.config&&_({registrationFee:A.config.registrationFee||30,weeklyDues:A.config.weeklyDues||10,totalWeeks:A.config.totalWeeks||10,penaltyStructure:A.config.penaltyStructure||{strike1:5,strike2:10,strike3:0}})}}catch(D){console.error("Error loading fee config:",D)}},R=D=>{if(!N)return console.warn("feeConfig not loaded yet for balance calculation."),0;const A=(N.registrationFee||0)+(N.weeklyDues||0)*(N.totalWeeks||0),U=(D.paymentHistory||[]).reduce((O,Q)=>Q.paymentType==="registration_fee"||Q.paymentType==="weekly_dues"||Q.paymentType==="participation_fee"||Q.paymentType==="penalty"?O+(Q.amount||0):O,0),K=(D.penalties||[]).reduce((O,Q)=>O+(Q.amount||0),0),X=A-U+K;return console.log(`Balance for ${D.firstName} ${D.lastName}: Expected=${A}, Paid=${U}, Penalties=${K}, Balance=${X}`),X},W=D=>{const A=R(D);return A<=0?"paid":A<=20?"partial":"overdue"},L=a.filter(D=>{var K,X,O;const A=((K=D.firstName)==null?void 0:K.toLowerCase().includes(o.toLowerCase()))||((X=D.lastName)==null?void 0:X.toLowerCase().includes(o.toLowerCase()))||((O=D.email)==null?void 0:O.toLowerCase().includes(o.toLowerCase())),U=c==="all"||D.paymentStatus===c;return A&&U}),F=async()=>{if(!(!m||!k.amount))try{console.log("Adding payment for player:",m._id),console.log("Payment data:",k);const D=await fetch(`${de}/api/users/${m._id}/add-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(console.log("Response status:",D.status),D.ok){const A=await D.json();console.log("Payment added successfully:",A),console.log("🔍 Payment result details:",{success:A.success,message:A.message,payment:A.payment,user:A.user}),y(!1),E({amount:"",paymentType:"weekly_dues",paymentMethod:"cash",notes:"",date:new Date().toISOString().split("T")[0]}),console.log("🔄 Reloading players after payment..."),await P(),console.log("✅ Players reloaded after payment"),alert("Payment added successfully!")}else{const A=await D.json();console.error("Payment failed:",A);const U=A.message||A.error||"Unknown error";alert(`Error adding payment: ${U}`)}}catch(D){console.error("Error adding payment:",D),alert(`Error adding payment: ${D.message}`)}},j=async()=>{if(!(!m||!I.amount))try{(await fetch(`${de}/api/users/${m._id}/add-penalty`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).ok&&(S(!1),M({amount:"",reason:"",strikeLevel:"1",notes:"",date:new Date().toISOString().split("T")[0]}),P())}catch(D){console.error("Error adding penalty:",D)}},J=D=>{switch(D){case"paid":return"#4CAF50";case"partial":return"#FF9800";case"overdue":return"#f44336";default:return"#666"}},Y=D=>{switch(D){case"paid":return e.createElement(Qr,null);case"partial":return e.createElement(jw,null);case"overdue":return e.createElement(Fp,null);default:return e.createElement(qw,null)}};return t?e.createElement("div",{style:{textAlign:"center",padding:"20px"}},e.createElement("div",{style:{animation:"spin 1s linear infinite"}},"🔄"),e.createElement("p",null,"Loading payment data...")):e.createElement("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"}},e.createElement("h2",{style:{color:"#e53e3e",marginBottom:"20px",textAlign:"center"}},"💰 Payment Tracker"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginBottom:"30px"}},e.createElement("div",{style:{padding:"15px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"8px",border:"1px solid #4CAF50",textAlign:"center"}},e.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#4CAF50"}},a.filter(D=>D.paymentStatus==="paid").length),e.createElement("div",{style:{color:"#fff"}},"Fully Paid")),e.createElement("div",{style:{padding:"15px",background:"rgba(255, 152, 0, 0.1)",borderRadius:"8px",border:"1px solid #FF9800",textAlign:"center"}},e.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#FF9800"}},a.filter(D=>D.paymentStatus==="partial").length),e.createElement("div",{style:{color:"#fff"}},"Partial Payment")),e.createElement("div",{style:{padding:"15px",background:"rgba(244, 67, 54, 0.1)",borderRadius:"8px",border:"1px solid #f44336",textAlign:"center"}},e.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#f44336"}},a.filter(D=>D.paymentStatus==="overdue").length),e.createElement("div",{style:{color:"#fff"}},"Overdue")),e.createElement("div",{style:{padding:"15px",background:"rgba(102, 102, 102, 0.1)",borderRadius:"8px",border:"1px solid #666",textAlign:"center"}},e.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#666"}},"$",a.reduce((D,A)=>D+Math.max(0,A.currentBalance),0).toFixed(2)),e.createElement("div",{style:{color:"#fff"}},"Total Outstanding"))),e.createElement("div",{style:{display:"flex",gap:"15px",marginBottom:"20px",flexWrap:"wrap"}},e.createElement("div",{style:{flex:"1",minWidth:"200px"}},e.createElement("input",{type:"text",placeholder:"Search players...",value:o,onChange:D=>i(D.target.value),style:{width:"100%",padding:"10px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}})),e.createElement("select",{value:c,onChange:D=>u(D.target.value),style:{padding:"10px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",minWidth:"150px"}},e.createElement("option",{value:"all"},"All Status"),e.createElement("option",{value:"paid"},"Fully Paid"),e.createElement("option",{value:"partial"},"Partial Payment"),e.createElement("option",{value:"overdue"},"Overdue")),e.createElement("button",{onClick:()=>{},style:{padding:"10px 15px",borderRadius:"6px",border:"none",background:"#4CAF50",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(xz,null)," Export")),e.createElement("div",{style:{display:"grid",gap:"15px"}},L.map(D=>e.createElement("div",{key:D._id,style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"10px"}},e.createElement("div",{style:{flex:"1",minWidth:"200px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"5px"}},e.createElement("span",{style:{color:J(D.paymentStatus),fontSize:"18px"}},Y(D.paymentStatus)),e.createElement("h4",{style:{color:"#fff",margin:0}},D.firstName," ",D.lastName)),e.createElement("div",{style:{color:"#ccc",fontSize:"14px"}},D.email," • ",D.phone||"No phone")),e.createElement("div",{style:{textAlign:"center",minWidth:"120px"}},e.createElement("div",{style:{fontSize:"18px",fontWeight:"bold",color:D.currentBalance>0?"#f44336":"#4CAF50"}},"$",D.currentBalance.toFixed(2)),e.createElement("div",{style:{color:"#ccc",fontSize:"12px"}},D.currentBalance>0?"Owed":"Paid")),e.createElement("div",{style:{display:"flex",gap:"8px"}},e.createElement("button",{onClick:()=>{g(D),y(!0)},style:{padding:"8px 12px",borderRadius:"4px",border:"none",background:"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"5px"}},e.createElement(fr,null)," Payment"),e.createElement("button",{onClick:()=>{g(D),S(!0)},style:{padding:"8px 12px",borderRadius:"4px",border:"none",background:"#f44336",color:"#fff",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"5px"}},e.createElement(Fp,null)," Penalty"),e.createElement("button",{onClick:()=>{g(D),x(!0)},style:{padding:"8px 12px",borderRadius:"4px",border:"1px solid #666",background:"transparent",color:"#fff",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"5px"}},e.createElement(Ti,null)," Details"))))),f&&m&&e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"flex-start",justifyContent:"center",zIndex:9999,padding:"20px",overflowY:"auto"}},e.createElement("div",{style:{background:"#333",padding:"20px",borderRadius:"8px",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflow:"auto",margin:"auto"}},e.createElement("h3",{style:{color:"#fff",marginBottom:"20px"}},"Add Payment - ",m.firstName," ",m.lastName),e.createElement("div",{style:{display:"grid",gap:"15px"}},e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Payment Type"),e.createElement("select",{value:k.paymentType,onChange:D=>{const A=D.target.value;let U=0;A==="registration_fee"?U=N.registrationFee:A==="weekly_dues"?U=N.weeklyDues:A==="participation_fee"&&(U=N.registrationFee+N.weeklyDues*N.totalWeeks),E(K=>({...K,paymentType:A,amount:U}))},style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}},e.createElement("option",{value:"registration_fee"},"Registration Fee ($",N.registrationFee,")"),e.createElement("option",{value:"weekly_dues"},"Weekly Dues ($",N.weeklyDues,")"),e.createElement("option",{value:"participation_fee"},"Participation Fee ($",N.registrationFee+N.weeklyDues*N.totalWeeks,")"),e.createElement("option",{value:"penalty"},"Penalty Payment"),e.createElement("option",{value:"other"},"Other"))),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Amount ($)"),e.createElement("input",{type:"number",value:k.amount,onChange:D=>E(A=>({...A,amount:D.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"},step:"0.01"})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Payment Method"),e.createElement("select",{value:k.paymentMethod,onChange:D=>E(A=>({...A,paymentMethod:D.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}},e.createElement("option",{value:"cash"},"Cash"),e.createElement("option",{value:"venmo"},"Venmo"),e.createElement("option",{value:"credit_card"},"Credit/Debit Card"),e.createElement("option",{value:"check"},"Check"))),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Date"),e.createElement("input",{type:"date",value:k.date,onChange:D=>E(A=>({...A,date:D.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Notes"),e.createElement("textarea",{value:k.notes,onChange:D=>E(A=>({...A,notes:D.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",minHeight:"60px",resize:"vertical"},placeholder:"Optional notes about this payment..."}))),e.createElement("div",{style:{display:"flex",gap:"10px",marginTop:"20px"}},e.createElement("button",{onClick:F,style:{padding:"10px 20px",borderRadius:"6px",border:"none",background:"#4CAF50",color:"#fff",cursor:"pointer",flex:"1"}},"Add Payment"),e.createElement("button",{onClick:()=>y(!1),style:{padding:"10px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#fff",cursor:"pointer",flex:"1"}},"Cancel")))),v&&m&&e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"flex-start",justifyContent:"center",zIndex:9999,padding:"20px",overflowY:"auto"}},e.createElement("div",{style:{background:"#333",padding:"20px",borderRadius:"8px",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflow:"auto",margin:"auto"}},e.createElement("h3",{style:{color:"#fff",marginBottom:"20px"}},"Add Penalty - ",m.firstName," ",m.lastName),e.createElement("div",{style:{display:"grid",gap:"15px"}},e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Strike Level"),e.createElement("select",{value:I.strikeLevel,onChange:D=>{const A=D.target.value;M(U=>({...U,strikeLevel:A,amount:A==="1"?N.penaltyStructure.strike1:A==="2"?N.penaltyStructure.strike2:A==="3"?N.penaltyStructure.strike3:0}))},style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}},e.createElement("option",{value:"1"},"Strike 1 - $",N.penaltyStructure.strike1," fine"),e.createElement("option",{value:"2"},"Strike 2 - $",N.penaltyStructure.strike2," fine"),e.createElement("option",{value:"3"},"Strike 3 - ",N.penaltyStructure.strike3>0?`$${N.penaltyStructure.strike3} fine`:"Removal"))),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Fine Amount ($)"),e.createElement("input",{type:"number",value:I.amount,onChange:D=>M(A=>({...A,amount:D.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"},step:"0.01"})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Reason"),e.createElement("input",{type:"text",value:I.reason,onChange:D=>M(A=>({...A,reason:D.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"},placeholder:"Reason for penalty..."})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Date"),e.createElement("input",{type:"date",value:I.date,onChange:D=>M(A=>({...A,date:D.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Notes"),e.createElement("textarea",{value:I.notes,onChange:D=>M(A=>({...A,notes:D.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",minHeight:"60px",resize:"vertical"},placeholder:"Additional details about the penalty..."}))),e.createElement("div",{style:{display:"flex",gap:"10px",marginTop:"20px"}},e.createElement("button",{onClick:j,style:{padding:"10px 20px",borderRadius:"6px",border:"none",background:"#f44336",color:"#fff",cursor:"pointer",flex:"1"}},"Add Penalty"),e.createElement("button",{onClick:()=>S(!1),style:{padding:"10px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#fff",cursor:"pointer",flex:"1"}},"Cancel")))),w&&m&&e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"flex-start",justifyContent:"center",zIndex:9999,padding:"20px",overflowY:"auto"}},e.createElement("div",{style:{background:"#333",padding:"20px",borderRadius:"8px",maxWidth:"800px",width:"90%",maxHeight:"80vh",overflow:"auto",margin:"auto"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"}},e.createElement("h3",{style:{color:"#fff",margin:0}},"Payment Details - ",m.firstName," ",m.lastName),e.createElement("button",{onClick:()=>x(!1),style:{background:"none",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer"}},"×")),e.createElement("div",{style:{marginBottom:"20px",padding:"15px",background:"#222",borderRadius:"6px"}},e.createElement("h4",{style:{color:"#fff",marginBottom:"10px"}},"Player Information"),e.createElement("div",{style:{color:"#ccc",fontSize:"14px"}},e.createElement("div",null,"Email: ",m.email),e.createElement("div",null,"Phone: ",m.phone||"Not provided"),e.createElement("div",null,"Current Balance: ",e.createElement("span",{style:{color:m.currentBalance>0?"#f44336":"#4CAF50",fontWeight:"bold"}},"$",m.currentBalance.toFixed(2))),e.createElement("div",null,"Payment Status: ",e.createElement("span",{style:{color:J(m.paymentStatus)}},m.paymentStatus.toUpperCase())))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h4",{style:{color:"#fff",marginBottom:"10px"}},"Payment History"),console.log("🔍 Details Modal - selectedPlayer:",m),console.log("🔍 Details Modal - paymentHistory:",m.paymentHistory),m.paymentHistory&&m.paymentHistory.length>0?e.createElement("div",{style:{maxHeight:"300px",overflowY:"auto"}},m.paymentHistory.map((D,A)=>e.createElement("div",{key:A,style:{padding:"10px",marginBottom:"8px",background:"#222",borderRadius:"4px",border:"1px solid #444"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("div",{style:{color:"#fff",fontWeight:"bold"}},"$",D.amount," - ",D.paymentType.replace("_"," ").toUpperCase()),e.createElement("div",{style:{color:"#ccc",fontSize:"12px"}},new Date(D.date||D.timestamp).toLocaleDateString())),e.createElement("div",{style:{color:"#ccc",fontSize:"12px",marginTop:"5px"}},"Method: ",D.paymentMethod," • ",D.notes&&`Notes: ${D.notes}`)))):e.createElement("div",{style:{color:"#ccc",fontStyle:"italic"}},"No payment history found.")),e.createElement("div",null,e.createElement("h4",{style:{color:"#fff",marginBottom:"10px"}},"Penalties"),m.penalties&&m.penalties.length>0?e.createElement("div",{style:{maxHeight:"200px",overflowY:"auto"}},m.penalties.map((D,A)=>e.createElement("div",{key:A,style:{padding:"10px",marginBottom:"8px",background:"#222",borderRadius:"4px",border:"1px solid #f44336"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("div",{style:{color:"#f44336",fontWeight:"bold"}},"$",D.amount," - ",D.reason),e.createElement("div",{style:{color:"#ccc",fontSize:"12px"}},new Date(D.date||D.timestamp).toLocaleDateString())),e.createElement("div",{style:{color:"#ccc",fontSize:"12px",marginTop:"5px"}},"Strike Level: ",D.strikeLevel," • ",D.notes&&`Notes: ${D.notes}`)))):e.createElement("div",{style:{color:"#ccc",fontStyle:"italic"}},"No penalties found.")))))}function nW(){const[a,r]=h.useState({phase1Weeks:6,currentSession:{name:"Current Session",startDate:"",endDate:"",isActive:!0}}),[t,n]=h.useState(!0),[o,i]=h.useState(!1),[c,u]=h.useState({type:"",text:""}),[m,g]=h.useState("phases"),[f,y]=h.useState([]),[v,S]=h.useState(""),[w,x]=h.useState([]),[k,E]=h.useState([]),[I,M]=h.useState({}),[N,_]=h.useState("");h.useEffect(()=>{P(),B(),R()},[]);const P=async()=>{try{const j=await fetch(`${de}/api/payment-config`);if(j.ok){const J=await j.json();J.config&&r({phase1Weeks:J.config.phase1Weeks||6,currentSession:{name:"Current Session",startDate:"",endDate:"",isActive:!0,...J.config.currentSession}})}}catch(j){console.error("Error loading league config:",j),u({type:"error",text:"Failed to load league configuration"})}finally{n(!1)}},B=async()=>{try{const j=await fetch(`${de}/admin/divisions`);if(j.ok){const J=await j.json();y(J),J.length>0&&S(J[0].name)}}catch(j){console.error("Error loading divisions:",j)}},R=async()=>{try{const j=await fetch(`${de}/api/users`);if(j.ok){const J=await j.json();x(J.filter(Y=>Y.isApproved)),E(J.filter(Y=>Y.isApproved&&(!Y.divisions||Y.divisions.length===0)))}}catch(j){console.error("Error loading players:",j)}},W=async(j,J)=>{try{(await fetch(`${de}/admin/user/${j}/add-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:J})})).ok?(u({type:"success",text:"Player added to division successfully!"}),R()):u({type:"error",text:"Failed to add player to division"})}catch(Y){console.error("Error adding player to division:",Y),u({type:"error",text:"Error adding player to division"})}},L=async(j,J)=>{try{(await fetch(`${de}/admin/user/${j}/remove-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:J})})).ok?(u({type:"success",text:"Player removed from division successfully!"}),R()):u({type:"error",text:"Failed to remove player from division"})}catch(Y){console.error("Error removing player from division:",Y),u({type:"error",text:"Error removing player from division"})}};if(t)return e.createElement("div",{style:{textAlign:"center",padding:"20px"}},e.createElement(Zr,{style:{animation:"spin 1s linear infinite"}}),e.createElement("p",null,"Loading league configuration..."));const F=()=>{switch(m){case"phases":return e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px"}},e.createElement(Ls,{style:{color:"#4CAF50"}}),e.createElement("h3",{style:{color:"#fff",margin:0}},"Phase Configuration")),e.createElement("div",{style:{padding:"20px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"8px",border:"1px solid #4CAF50",textAlign:"center"}},e.createElement(Ry,{style:{fontSize:"48px",color:"#4CAF50",marginBottom:"15px"}}),e.createElement("p",{style:{color:"#4CAF50",margin:0,fontSize:"16px"}},"Phase configuration is now part of the division creation process.",e.createElement("br",null),'Use the "Divisions" tab to create new divisions with phase settings.')));case"rosters":return e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px"}},e.createElement(Li,{style:{color:"#4CAF50"}}),e.createElement("h3",{style:{color:"#fff",margin:0}},"Player Rosters")),e.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(255,255,255,0.02)"}},e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Select Division"),e.createElement("select",{value:v,onChange:j=>S(j.target.value),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}},e.createElement("option",{value:""},"Choose a division..."),f.map(j=>e.createElement("option",{key:j._id,value:j.name},j.name)))),v&&e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"}},e.createElement("div",null,e.createElement("h4",{style:{color:"#fff",marginBottom:"15px"}},"Players in ",v),e.createElement("div",{style:{maxHeight:"400px",overflowY:"auto"}},w.filter(j=>j.divisions&&j.divisions.includes(v)).length===0?e.createElement("p",{style:{color:"#888",textAlign:"center"}},"No players in this division"):w.filter(j=>j.divisions&&j.divisions.includes(v)).map(j=>e.createElement("div",{key:j._id,style:{padding:"10px",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",background:"rgba(255,255,255,0.02)",marginBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("div",null,e.createElement("p",{style:{color:"#fff",margin:"0 0 5px 0"}},j.firstName," ",j.lastName),e.createElement("p",{style:{color:"#888",margin:0,fontSize:"12px"}},j.email)),e.createElement("button",{onClick:()=>L(j._id,v),style:{padding:"4px 8px",borderRadius:"4px",border:"none",background:"#e53e3e",color:"#fff",cursor:"pointer",fontSize:"12px"}},e.createElement(Tz,null)))))),e.createElement("div",null,e.createElement("h4",{style:{color:"#fff",marginBottom:"15px"}},"Available Players"),e.createElement("div",{style:{maxHeight:"400px",overflowY:"auto"}},k.length===0?e.createElement("p",{style:{color:"#888",textAlign:"center"}},"No available players"):k.map(j=>e.createElement("div",{key:j._id,style:{padding:"10px",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",background:"rgba(255,255,255,0.02)",marginBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("div",null,e.createElement("p",{style:{color:"#fff",margin:"0 0 5px 0"}},j.firstName," ",j.lastName),e.createElement("p",{style:{color:"#888",margin:0,fontSize:"12px"}},j.email)),e.createElement("button",{onClick:()=>W(j._id,v),style:{padding:"4px 8px",borderRadius:"4px",border:"none",background:"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px"}},e.createElement(Li,null)))))))));case"standings":return e.createElement("div",{style:{marginBottom:"30px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px"}},e.createElement(Zi,{style:{color:"#4CAF50"}}),e.createElement("h3",{style:{color:"#fff",margin:0}},"Standings Tracking")),e.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(255,255,255,0.02)"}},e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Select Division"),e.createElement("select",{value:N,onChange:j=>_(j.target.value),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}},e.createElement("option",{value:""},"Choose a division..."),f.map(j=>e.createElement("option",{key:j._id,value:j.name},j.name)))),N&&e.createElement("div",null,e.createElement("h4",{style:{color:"#fff",marginBottom:"15px"}},"Standings for ",N),e.createElement("div",{style:{padding:"15px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"6px",border:"1px solid #4CAF50",textAlign:"center"}},e.createElement(B0,{style:{fontSize:"48px",color:"#4CAF50",marginBottom:"10px"}}),e.createElement("p",{style:{color:"#4CAF50",margin:0}},"Standings tracking will be integrated with CSI LMS data.",e.createElement("br",null),'Use the "Divisions" tab to sync standings from CSI LMS.')))));default:return null}};return e.createElement("div",{style:{padding:"20px",maxWidth:"1000px",margin:"0 auto"}},e.createElement("h2",{style:{color:"#e53e3e",marginBottom:"20px",textAlign:"center"}},"📅 League Management"),c.text&&e.createElement("div",{style:{padding:"10px 15px",borderRadius:"6px",marginBottom:"20px",background:c.type==="success"?"rgba(76, 175, 80, 0.2)":"rgba(229, 62, 62, 0.2)",border:`1px solid ${c.type==="success"?"#4CAF50":"#e53e3e"}`,color:c.type==="success"?"#4CAF50":"#e53e3e",display:"flex",alignItems:"center",gap:"10px"}},c.type==="success"?e.createElement(Qr,null):e.createElement(df,null),c.text),e.createElement("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap"}},e.createElement("button",{onClick:()=>g("phases"),style:{padding:"10px 20px",borderRadius:"6px",border:"none",background:m==="phases"?"#4CAF50":"#333",color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(Ls,null)," Phase Configuration"),e.createElement("button",{onClick:()=>g("rosters"),style:{padding:"10px 20px",borderRadius:"6px",border:"none",background:m==="rosters"?"#4CAF50":"#333",color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(Li,null)," Player Rosters"),e.createElement("button",{onClick:()=>g("standings"),style:{padding:"10px 20px",borderRadius:"6px",border:"none",background:m==="standings"?"#4CAF50":"#333",color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},e.createElement(Zi,null)," Standings Tracking")),F())}const Py=({onClose:a})=>{const[r,t]=h.useState([]),[n,o]=h.useState(!0),[i,c]=h.useState(""),[u,m]=h.useState(null),[g,f]=h.useState(!1),[y,v]=h.useState(!1);h.useEffect(()=>{S()},[]);const S=async()=>{try{o(!0);const W=await fetch(`${de}/api/ladder/admin/signup-applications/pending`),L=await W.json();W.ok?t(L):c(L.message||"Failed to fetch applications")}catch(W){console.error("Error fetching applications:",W),c("Network error. Please check your connection.")}finally{o(!1)}},w=W=>{m(W),f(!0)},[x,k]=h.useState(!1),[E,I]=h.useState(null),[M,N]=h.useState(null),_=async W=>{try{v(!0);const L=await fetch(`${de}/api/ladder/admin/signup-applications/${W}/approve`,{method:"POST",headers:{"Content-Type":"application/json"}}),F=await L.json();if(L.ok){try{const j=await Yd.send("service_l5q2047","template_ladder_approval",{to_email:F.playerCreated.email,to_name:`${F.playerCreated.firstName} ${F.playerCreated.lastName}`,email:F.playerCreated.email,pin:F.playerCreated.pin,ladder_name:F.playerCreated.ladderName,position:F.playerCreated.position,login_url:"https://newapp-1-ic1v.onrender.com"},"g6vqrOs_Jb6LL1VCZ");console.log("📧 Email sent successfully!",j),N("sent")}catch(j){console.error("📧 Email sending failed:",j),N("failed")}I(F.playerCreated),k(!0),await S(),f(!1),m(null)}else c(F.message||"Failed to approve application")}catch(L){console.error("Error approving application:",L),c("Network error. Please try again.")}finally{v(!1)}},P=async(W,L)=>{try{v(!0);const F=await fetch(`${de}/api/ladder/admin/signup-applications/${W}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:L})}),j=await F.json();F.ok?(await S(),f(!1),m(null)):c(j.message||"Failed to reject application")}catch(F){console.error("Error rejecting application:",F),c("Network error. Please try again.")}finally{v(!1)}},B=W=>{switch(W){case"pending":return"#ffa726";case"approved":return"#4caf50";case"rejected":return"#f44336";default:return"#757575"}},R=W=>{switch(W){case"pending":return"⏳ Pending";case"approved":return"✅ Approved";case"rejected":return"❌ Rejected";default:return"Unknown"}};return e.createElement(Bt,{open:!0,onClose:a,title:"📋 Pending Ladder Applications",maxWidth:"900px"},e.createElement("div",{style:{padding:"1rem"}},i&&e.createElement("div",{style:{background:"rgba(244, 67, 54, 0.2)",border:"1px solid rgba(244, 67, 54, 0.5)",color:"#ff6b6b",padding:"0.8rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"1rem"}},i),n?e.createElement("div",{style:{textAlign:"center",padding:"2rem",color:"#ccc",fontSize:"1.1rem"}},"Loading applications..."):r.length===0?e.createElement("div",{style:{textAlign:"center",padding:"2rem",color:"#ccc",fontSize:"1.1rem"}},"No pending ladder applications found."):e.createElement("div",null,e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr 1fr auto",gap:"1rem",padding:"0.8rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",marginBottom:"1rem",fontWeight:"bold",fontSize:"0.9rem",color:"#fff"}},e.createElement("div",null,"Name"),e.createElement("div",null,"Email"),e.createElement("div",null,"Experience"),e.createElement("div",null,"League"),e.createElement("div",null,"Payment"),e.createElement("div",null,"Status"),e.createElement("div",null,"Actions")),r.map(W=>e.createElement("div",{key:W._id,style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr 1fr auto",gap:"1rem",padding:"0.8rem",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",marginBottom:"0.5rem",alignItems:"center",background:"rgba(255, 255, 255, 0.02)"}},e.createElement("div",{style:{color:"#fff",fontWeight:"bold"}},W.firstName," ",W.lastName),e.createElement("div",{style:{color:"#ccc"}},W.email),e.createElement("div",{style:{color:"#ccc",textTransform:"capitalize"}},W.experience),e.createElement("div",{style:{color:W.currentLeague&&W.currentLeague!=="Not provided"?"#4CAF50":"#ff9800",fontWeight:"bold",fontSize:"0.85rem"}},W.currentLeague&&W.currentLeague!=="Not provided"?e.createElement("div",{style:{fontSize:"0.8rem"}},"🏆 ",W.currentLeague):e.createElement("div",null,"❌ No League")),e.createElement("div",{style:{color:W.payNow?"#4CAF50":(W.payNow===void 0,"#ff9800"),fontWeight:"bold",fontSize:"0.85rem"}},W.payNow===void 0?e.createElement("div",{style:{color:"#ff9800"}},e.createElement("div",null,"⚠️ Unknown"),e.createElement("div",{style:{fontSize:"0.7rem"}},"Older App")):W.payNow?e.createElement("div",null,e.createElement("div",null,"✅ $5/month"),W.paymentMethod&&e.createElement("div",{style:{fontSize:"0.75rem",color:"#ccc"}},W.paymentMethod==="venmo"&&"💜 Venmo",W.paymentMethod==="cashapp"&&"💚 Cash App",W.paymentMethod==="creditCard"&&"💳 Card",W.paymentMethod==="applePay"&&"🍎 Apple Pay",W.paymentMethod==="googlePay"&&"📱 Google Pay",W.paymentMethod==="cash"&&"💵 Cash",W.paymentMethod==="check"&&"📝 Check",!["venmo","cashapp","creditCard","applePay","googlePay","cash","check"].includes(W.paymentMethod)&&W.paymentMethod)):"❌ Free"),e.createElement("div",{style:{color:B(W.status),fontWeight:"bold"}},R(W.status)),e.createElement("div",null,e.createElement("button",{onClick:()=>w(W),disabled:y,style:{padding:"0.5rem 1rem",background:"rgba(33, 150, 243, 0.2)",color:"#2196F3",border:"1px solid #2196F3",borderRadius:"6px",fontSize:"0.85rem",cursor:"pointer",transition:"all 0.3s ease"}},"View Details")))))),g&&u&&e.createElement(Bt,{open:g,onClose:()=>f(!1),title:`📄 Application Details - ${u.firstName} ${u.lastName}`,maxWidth:"600px"},e.createElement("div",{style:{padding:"1rem"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"}},e.createElement("div",null,e.createElement("strong",{style:{color:"#2196F3"}},"Personal Information:"),e.createElement("div",{style:{marginTop:"0.5rem",color:"#ccc"}},e.createElement("div",null,e.createElement("strong",null,"Name:")," ",u.firstName," ",u.lastName),e.createElement("div",null,e.createElement("strong",null,"Email:")," ",u.email),e.createElement("div",null,e.createElement("strong",null,"Phone:")," ",u.phone||"Not provided"))),e.createElement("div",null,e.createElement("strong",{style:{color:"#2196F3"}},"Skill Information:"),e.createElement("div",{style:{marginTop:"0.5rem",color:"#ccc"}},e.createElement("div",null,e.createElement("strong",null,"Experience:")," ",u.experience),e.createElement("div",null,e.createElement("strong",null,"Fargo Rate:")," ",u.fargoRate||"Not provided"),e.createElement("div",null,e.createElement("strong",null,"League Divisions:"),u.currentLeague&&u.currentLeague!=="Not provided"?e.createElement("span",{style:{color:"#4CAF50",fontWeight:"bold"}},u.currentLeague):e.createElement("span",{style:{color:"#ff9800"}},"Not provided")),e.createElement("div",null,e.createElement("strong",null,"Current Ranking:")," ",u.currentRanking||"Not provided")))),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"}},e.createElement("strong",{style:{color:"#2196F3"}},"Payment Information:"),e.createElement("div",{style:{marginTop:"0.5rem",color:"#ccc"}},e.createElement("div",null,e.createElement("strong",null,"Payment Required:"),e.createElement("span",{style:{color:u.payNow?"#4CAF50":"#ff9800",fontWeight:"bold",marginLeft:"0.5rem"}},u.payNow?"✅ Yes - $5/month":"❌ No - Free Access")),u.payNow&&u.paymentMethod&&e.createElement("div",null,e.createElement("strong",null,"Payment Method:"),e.createElement("span",{style:{color:"#4CAF50",fontWeight:"bold",marginLeft:"0.5rem"}},u.paymentMethod==="venmo"&&"💜 Venmo",u.paymentMethod==="cashapp"&&"💚 Cash App",u.paymentMethod==="creditCard"&&"💳 Credit/Debit Card",u.paymentMethod==="applePay"&&"🍎 Apple Pay",u.paymentMethod==="googlePay"&&"📱 Google Pay",u.paymentMethod==="cash"&&"💵 Cash",u.paymentMethod==="check"&&"📝 Check",!["venmo","cashapp","creditCard","applePay","googlePay","cash","check"].includes(u.paymentMethod)&&u.paymentMethod)),u.payNow&&!u.paymentMethod&&e.createElement("div",{style:{color:"#ff6b6b"}},e.createElement("strong",null,"⚠️ Payment method not specified")),u.payNow===void 0&&u.paymentMethod===void 0&&e.createElement("div",{style:{color:"#ff9800"}},e.createElement("strong",null,"⚠️ Payment information not available (older application)")))),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"}},e.createElement("strong",{style:{color:"#2196F3"}},"Application Status:"),e.createElement("div",{style:{color:B(u.status),fontWeight:"bold",marginTop:"0.5rem"}},R(u.status)),u.status==="rejected"&&u.rejectionReason&&e.createElement("div",{style:{color:"#ff6b6b",marginTop:"0.5rem"}},e.createElement("strong",null,"Reason:")," ",u.rejectionReason)),u.status==="pending"&&e.createElement("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"}},e.createElement("button",{onClick:()=>P(u._id,"Application rejected by admin"),disabled:y,style:{padding:"0.8rem 1.5rem",background:"rgba(244, 67, 54, 0.2)",color:"#ff6b6b",border:"2px solid #ff6b6b",borderRadius:"8px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease"}},y?"Processing...":"Reject"),e.createElement("button",{onClick:()=>_(u._id),disabled:y,style:{padding:"0.8rem 1.5rem",background:"linear-gradient(45deg, #4CAF50, #45a049)",color:"white",border:"2px solid #4CAF50",borderRadius:"8px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease"}},y?"Processing...":"Approve")))),x&&E&&e.createElement(Bt,{open:x,onClose:()=>k(!1),title:"✅ Application Approved - Login Credentials",maxWidth:"500px"},e.createElement("div",{style:{padding:"1rem"}},e.createElement("div",{style:{background:"linear-gradient(45deg, #4CAF50, #45a049)",color:"white",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",textAlign:"center"}},e.createElement("h3",{style:{margin:"0 0 0.5rem 0"}},"🎉 Application Approved!"),e.createElement("p",{style:{margin:0,fontSize:"1rem"}},"Player has been added to the ladder and can now log in.")),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"}},e.createElement("h4",{style:{color:"#2196F3",margin:"0 0 1rem 0"}},"📧 Login Credentials:"),e.createElement("div",{style:{color:"#ccc"}},e.createElement("div",{style:{marginBottom:"0.5rem"}},e.createElement("strong",null,"Email:")," ",E.email),e.createElement("div",{style:{marginBottom:"0.5rem"}},e.createElement("strong",null,"PIN:")," ",e.createElement("span",{style:{background:"rgba(255, 255, 255, 0.1)",padding:"0.25rem 0.5rem",borderRadius:"4px",fontFamily:"monospace",fontSize:"1.1rem"}},E.pin)),e.createElement("div",{style:{marginBottom:"0.5rem"}},e.createElement("strong",null,"Ladder:")," ",E.ladderName),e.createElement("div",null,e.createElement("strong",null,"Position:")," #",E.position))),M==="sent"&&e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"}},e.createElement("h4",{style:{color:"#4CAF50",margin:"0 0 0.5rem 0"}},"✅ Email Sent Successfully!"),e.createElement("p",{style:{color:"#ccc",margin:0}},"An approval email with login credentials has been automatically sent to ",E.email)),M==="failed"&&e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"}},e.createElement("h4",{style:{color:"#FFC107",margin:"0 0 0.5rem 0"}},"⚠️ Email Not Sent:"),e.createElement("p",{style:{color:"#ccc",margin:0}},"Please manually send these credentials to ",E.email," via email")),e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"}},e.createElement("h4",{style:{color:"#FFC107",margin:"0 0 0.5rem 0"}},"⚠️ Important:"),e.createElement("ul",{style:{color:"#ccc",margin:0,paddingLeft:"1.5rem"}},e.createElement("li",null,"Player can log in using the unified login system"),e.createElement("li",null,"League app will recognize their ladder account"),e.createElement("li",null,"They can access both league and ladder features"),e.createElement("li",null,"Keep these credentials secure"))),e.createElement("div",{style:{textAlign:"center"}},e.createElement("button",{onClick:()=>k(!1),style:{padding:"0.8rem 2rem",background:"linear-gradient(45deg, #2196F3, #1976D2)",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease"}},"Got it!")))))},rW=()=>{const[a,r]=h.useState("pending"),[t,n]=h.useState([]),[o,i]=h.useState([]),[c,u]=h.useState(!1),[m,g]=h.useState(""),[f,y]=h.useState(null),[v,S]=h.useState(!1);h.useEffect(()=>{w(),x()},[]);const w=async()=>{u(!0);try{const P=await(await fetch(`${de}/api/unified-auth/all-users`)).json();if(P.success){const B=P.users.filter(R=>R.isPendingApproval||!R.isApproved&&!R.isActive);n(B)}}catch(_){console.error("Error fetching pending users:",_)}finally{u(!1)}},x=async()=>{try{const P=await(await fetch(`${de}/api/unified-auth/all-users`)).json();P.success&&i(P.users)}catch(_){console.error("Error fetching all users:",_)}},k=async(_,P)=>{try{if(!(await fetch(`${de}/api/unified-auth/admin/update-user/${_}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!0,isApproved:!0,isPendingApproval:!1})})).ok)throw new Error("Failed to approve user");(await fetch(`${de}/api/ladder/player/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:P.firstName,lastName:P.lastName,email:P.email,pin:P.pin,fargoRate:400})})).ok?(alert("✅ User approved and added to ladder successfully!"),w(),x()):(alert("⚠️ User approved but failed to add to ladder. You may need to add them manually."),w(),x())}catch(B){console.error("Error approving user:",B),alert("❌ Error approving user: "+B.message)}},E=async _=>{if(confirm("Are you sure you want to reject this user?"))try{if((await fetch(`${de}/api/unified-auth/admin/delete-user/${_}`,{method:"DELETE"})).ok)alert("✅ User rejected and removed from system"),w(),x();else throw new Error("Failed to reject user")}catch(P){console.error("Error rejecting user:",P),alert("❌ Error rejecting user: "+P.message)}},I=async _=>{if(confirm("Are you sure you want to reactivate this user account?"))try{if((await fetch(`${de}/api/unified-auth/admin/update-user/${_}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!0})})).ok)alert("✅ User account reactivated successfully!"),w(),x();else throw new Error("Failed to reactivate user")}catch(P){console.error("Error reactivating user:",P),alert("❌ Error reactivating user: "+P.message)}},M=async(_,P)=>{if(confirm(`Are you sure you want to remove "${P}"? They will be moved to a deleted users collection and can be recovered later.`))try{if((await fetch(`${de}/api/unified-auth/admin/soft-delete-user/${_}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({deletedAt:new Date().toISOString(),deletedBy:"admin"})})).ok)alert(`✅ "${P}" has been moved to deleted users collection. They can be recovered later if needed.`),w(),x();else throw new Error("Failed to soft delete user")}catch(B){console.error("Error soft deleting user:",B),alert("❌ Error removing user: "+B.message)}},N=o.filter(_=>_.firstName.toLowerCase().includes(m.toLowerCase())||_.lastName.toLowerCase().includes(m.toLowerCase())||_.email.toLowerCase().includes(m.toLowerCase()));return e.createElement("div",{className:"simplified-admin-dashboard"},e.createElement("div",{className:"dashboard-header"},e.createElement("h2",null,"🎯 Simplified Admin Dashboard"),e.createElement("div",{className:"tab-buttons"},e.createElement("button",{className:`tab-button ${a==="pending"?"active":""}`,onClick:()=>r("pending")},"⏳ Pending Approvals (",t.length,")"),e.createElement("button",{className:`tab-button ${a==="all"?"active":""}`,onClick:()=>r("all")},"👥 All Users (",o.length,")"))),e.createElement("div",{className:"dashboard-content"},a==="pending"&&e.createElement("div",{className:"pending-section"},e.createElement("h3",null,"⏳ Users Pending Approval"),c?e.createElement("div",{className:"loading"},"Loading pending users..."):t.length===0?e.createElement("div",{className:"empty-state"},"🎉 No pending approvals! All caught up."):e.createElement("div",{className:"user-cards"},t.map(_=>e.createElement("div",{key:_._id,className:"user-card pending"},e.createElement("div",{className:"user-header"},e.createElement("h4",null,_.firstName," ",_.lastName),e.createElement("span",{className:"status-badge pending"},"PENDING")),e.createElement("div",{className:"user-details"},e.createElement("p",null,e.createElement("strong",null,"📧 Email:")," ",_.email),e.createElement("p",null,e.createElement("strong",null,"📱 Phone:")," ",_.phone||"Not provided"),e.createElement("p",null,e.createElement("strong",null,"📅 Registered:")," ",new Date(_.createdAt).toLocaleDateString()),e.createElement("p",null,e.createElement("strong",null,"🔑 PIN:")," ",_.pin)),e.createElement("div",{className:"user-actions"},e.createElement("button",{className:"approve-btn",onClick:()=>k(_._id,_)},"✅ Approve & Add to Ladder"),e.createElement("button",{className:"reject-btn",onClick:()=>E(_._id)},"❌ Reject"),e.createElement("button",{className:"soft-delete-btn",onClick:()=>M(_._id,`${_.firstName} ${_.lastName}`)},"🗑️ Remove"),e.createElement("button",{className:"details-btn",onClick:()=>{y(_),S(!0)}},"👁️ View Details")))))),a==="all"&&e.createElement("div",{className:"all-users-section"},e.createElement("div",{className:"search-bar"},e.createElement("input",{type:"text",placeholder:"🔍 Search users by name or email...",value:m,onChange:_=>g(_.target.value),className:"search-input"})),e.createElement("div",{className:"user-cards"},N.map(_=>e.createElement("div",{key:_._id,className:`user-card ${_.isActive?"active":"inactive"}`},e.createElement("div",{className:"user-header"},e.createElement("h4",null,_.firstName," ",_.lastName),e.createElement("span",{className:`status-badge ${_.isActive?"active":"inactive"}`},_.isActive?"ACTIVE":"INACTIVE")),e.createElement("div",{className:"user-details"},e.createElement("p",null,e.createElement("strong",null,"📧 Email:")," ",_.email),e.createElement("p",null,e.createElement("strong",null,"📱 Phone:")," ",_.phone||"Not provided"),e.createElement("p",null,e.createElement("strong",null,"📅 Registered:")," ",new Date(_.createdAt).toLocaleDateString()),e.createElement("p",null,e.createElement("strong",null,"🔑 PIN:")," ",_.pin),e.createElement("p",null,e.createElement("strong",null,"✅ Approved:")," ",_.isApproved?"Yes":"No")),e.createElement("div",{className:"user-actions"},e.createElement("button",{className:"details-btn",onClick:()=>{y(_),S(!0)}},"👁️ View Details"),!_.isActive&&e.createElement("button",{className:"reactivate-btn",onClick:()=>I(_._id)},"🔄 Reactivate Account"),e.createElement("button",{className:"soft-delete-btn",onClick:()=>M(_._id,`${_.firstName} ${_.lastName}`)},"🗑️ Remove"))))))),v&&f&&Jr.createPortal(e.createElement("div",{className:"modal-overlay",onClick:()=>S(!1)},e.createElement("div",{className:"modal-content",onClick:_=>_.stopPropagation()},e.createElement("div",{className:"modal-header"},e.createElement("h3",null,"👤 User Details"),e.createElement("button",{className:"close-btn",onClick:()=>S(!1)},"✕")),e.createElement("div",{className:"modal-body"},e.createElement("div",{className:"detail-grid"},e.createElement("div",{className:"detail-item"},e.createElement("strong",null,"Name:")," ",f.firstName," ",f.lastName),e.createElement("div",{className:"detail-item"},e.createElement("strong",null,"Email:")," ",f.email),e.createElement("div",{className:"detail-item"},e.createElement("strong",null,"Phone:")," ",f.phone||"Not provided"),e.createElement("div",{className:"detail-item"},e.createElement("strong",null,"PIN:")," ",f.pin),e.createElement("div",{className:"detail-item"},e.createElement("strong",null,"Status:")," ",f.isActive?"Active":"Inactive"),e.createElement("div",{className:"detail-item"},e.createElement("strong",null,"Approved:")," ",f.isApproved?"Yes":"No"),e.createElement("div",{className:"detail-item"},e.createElement("strong",null,"Registered:")," ",new Date(f.createdAt).toLocaleString()),e.createElement("div",{className:"detail-item"},e.createElement("strong",null,"Last Updated:")," ",new Date(f.updatedAt).toLocaleString()))))),document.body))};class oW{async login(r){try{const t=await fetch(`${de}/api/unified-auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:r})}),n=await t.json();return t.ok&&n.success?{success:!0,user:n.user,userType:n.userType,profileStatus:n.profileStatus,message:"Login successful"}:{success:!1,message:n.message||"Login failed"}}catch(t){return console.error("Unified login error:",t),{success:!1,message:"Network error. Please check your connection."}}}async getUserStatus(r){try{const t=await fetch(`${de}/api/unified-auth/user-status/${r}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();return t.ok&&n.success?{success:!0,user:n.user,isLeaguePlayer:n.isLeaguePlayer,isLadderPlayer:n.isLadderPlayer,leagueData:n.leagueData,ladderData:n.ladderData}:{success:!1,message:n.message||"Failed to get user status"}}catch(t){return console.error("Get user status error:",t),{success:!1,message:"Network error. Please check your connection."}}}async claimAccount(r,t,n){try{const o=await fetch(`${de}/api/unified-auth/claim-account`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,firstName:t,lastName:n})}),i=await o.json();return o.ok&&i.success?{success:!0,user:i.user,message:i.message||"Account claimed successfully"}:{success:!1,message:i.message||"Failed to claim account"}}catch(o){return console.error("Claim account error:",o),{success:!1,message:"Network error. Please check your connection."}}}async updateProfile(r,t,n){try{const o=await fetch(`${de}/api/unified-auth/update-profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r,profile:t,preferences:n})}),i=await o.json();return o.ok&&i.success?{success:!0,user:i.user,message:i.message||"Profile updated successfully"}:{success:!1,message:i.message||"Failed to update profile"}}catch(o){return console.error("Update profile error:",o),{success:!1,message:"Network error. Please check your connection."}}}async changePin(r,t,n){try{const o=await fetch(`${de}/api/unified-auth/change-pin`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r,currentPin:t,newPin:n})}),i=await o.json();return o.ok&&i.success?{success:!0,message:i.message||"PIN changed successfully"}:{success:!1,message:i.message||"Failed to change PIN"}}catch(o){return console.error("Change PIN error:",o),{success:!1,message:"Network error. Please check your connection."}}}async checkUserExists(r){try{const t=await fetch(`${de}/api/unified-auth/user-status/${r}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();return t.ok&&n.success}catch(t){return console.error("Check user exists error:",t),!1}}async copyProfileData(r,t,n){try{const o=await fetch(`${de}/api/unified-auth/copy-profile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r,fromApp:t,toApp:n})}),i=await o.json();return o.ok&&i.success?{success:!0,targetProfile:i.targetProfile,message:i.message||"Profile data copied successfully"}:{success:!1,message:i.message||"Failed to copy profile data"}}catch(o){return console.error("Copy profile data error:",o),{success:!1,message:"Network error. Please check your connection."}}}async getUserProfile(r){try{const t=await fetch(`${de}/api/unified-auth/user-profile/${r}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();return t.ok&&n.success?{success:!0,user:n.user,leagueProfile:n.leagueProfile,ladderProfile:n.ladderProfile}:{success:!1,message:n.message||"Failed to get user profile"}}catch(t){return console.error("Get user profile error:",t),{success:!1,message:"Network error. Please check your connection."}}}}const lW=new oW;class sW{constructor(){this.backendUrl=de}async getAllUsers(){try{const r=await fetch(`${this.backendUrl}/api/unified-auth/all-users`,{method:"GET",headers:{"Content-Type":"application/json"}}),t=await r.json();if(r.ok&&t.success)return t.users||[];throw new Error(t.message||"Failed to get users")}catch(r){throw console.error("Get all unified users error:",r),r}}async searchUsers(r){try{const t=await fetch(`${this.backendUrl}/api/unified-auth/search-users?q=${encodeURIComponent(r)}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();if(t.ok&&n.success)return n.users||[];throw new Error(n.message||"Failed to search users")}catch(t){throw console.error("Search unified users error:",t),t}}async getUserData(r){try{const t=await fetch(`${this.backendUrl}/api/unified-auth/user-profile/${r}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();if(t.ok&&n.success)return{user:n.user,leagueProfile:n.leagueProfile,ladderProfile:n.ladderProfile};throw new Error(n.message||"Failed to get user data")}catch(t){throw console.error("Get unified user data error:",t),t}}async addUser(r){try{const t=await fetch(`${this.backendUrl}/api/unified-auth/admin/add-user`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),n=await t.json();if(t.ok&&n.success)return n.user;throw new Error(n.message||"Failed to add user")}catch(t){throw console.error("Add unified user error:",t),t}}async updateUser(r,t){try{const n=await fetch(`${this.backendUrl}/api/unified-auth/admin/update-user/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),o=await n.json();if(n.ok&&o.success)return o.user;throw new Error(o.message||"Failed to update user")}catch(n){throw console.error("Update unified user error:",n),n}}async deleteUser(r){try{const t=await fetch(`${this.backendUrl}/api/unified-auth/admin/delete-user/${r}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),n=await t.json();if(t.ok&&n.success)return!0;throw new Error(n.message||"Failed to delete user")}catch(t){throw console.error("Delete unified user error:",t),t}}async addUserDivision(r,t){try{const n=await fetch(`${this.backendUrl}/api/unified-auth/admin/add-division/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:t})}),o=await n.json();if(n.ok&&o.success)return!0;throw new Error(o.message||"Failed to add division")}catch(n){throw console.error("Add user division error:",n),n}}async removeUserDivision(r,t){try{const n=await fetch(`${this.backendUrl}/api/unified-auth/admin/remove-division/${r}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:t})}),o=await n.json();if(n.ok&&o.success)return!0;throw new Error(o.message||"Failed to remove division")}catch(n){throw console.error("Remove user division error:",n),n}}async approveUser(r,t){try{const n=await fetch(`${this.backendUrl}/api/unified-auth/admin/approve-user/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),o=await n.json();if(n.ok&&o.success)return o.user;throw new Error(o.message||"Failed to approve user")}catch(n){throw console.error("Approve unified user error:",n),n}}async deactivateUser(r,t){try{const n=await fetch(`${this.backendUrl}/api/unified-auth/admin/deactivate-user/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:t})}),o=await n.json();if(n.ok&&o.success)return o.user;throw new Error(o.message||"Failed to deactivate user")}catch(n){throw console.error("Deactivate unified user error:",n),n}}async getSystemStats(){try{const r=await fetch(`${this.backendUrl}/api/unified-auth/admin/system-stats`,{method:"GET",headers:{"Content-Type":"application/json"}}),t=await r.json();if(r.ok&&t.success)return t.stats;throw new Error(t.message||"Failed to get system stats")}catch(r){throw console.error("Get unified system stats error:",r),r}}async getPendingApprovals(){try{const r=await fetch(`${this.backendUrl}/api/unified-auth/admin/pending-approvals`,{method:"GET",headers:{"Content-Type":"application/json"}}),t=await r.json();if(r.ok&&t.success)return t.approvals||[];throw new Error(t.message||"Failed to get pending approvals")}catch(r){throw console.error("Get pending unified approvals error:",r),r}}async linkUserProfiles(r,t){try{const n=await fetch(`${this.backendUrl}/api/unified-auth/admin/link-profiles/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),o=await n.json();if(n.ok&&o.success)return o.user;throw new Error(o.message||"Failed to link profiles")}catch(n){throw console.error("Link user profiles error:",n),n}}async getUserActivityLog(r){try{const t=await fetch(`${this.backendUrl}/api/unified-auth/admin/user-activity/${r}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();if(t.ok&&n.success)return n.activity||[];throw new Error(n.message||"Failed to get user activity")}catch(t){throw console.error("Get user activity log error:",t),t}}}const ys=new sW,iW=void 0,ax="frbcaplgmailcom";function cW({backendUrl:a,onComplete:r}){const[t,n]=h.useState(1),[o,i]=h.useState({name:"",description:"",scheduleUrl:"",standingsUrl:"",seasonStart:"",phase1Weeks:6,phase2Weeks:4,totalWeeks:10}),[c,u]=h.useState(!1),[m,g]=h.useState(""),f=[{id:1,title:"Create Division in CSI LMS",description:"First, create the division in the CSI LMS software",instructions:["1. Log into CSI LMS at https://lms.fargorate.com","2. Navigate to League Management","3. Create a new division with your desired name","4. Set up the division settings and rules","5. Make sure the division is active and ready for players"],completed:!1},{id:2,title:"Get Division URLs",description:"Copy the schedule and standings URLs from CSI LMS",instructions:["1. In CSI LMS, go to the division you just created","2. Click on the 'Reports' link in the navigation","3. Click the 'Schedule' button","4. Copy the URL from the schedule report page","5. Click the 'Teams' button","6. Copy the URL from the teams report page","7. Both URLs should look like: https://lms.fargorate.com/PublicReport/LeagueReports?..."],completed:!1},{id:3,title:"Configure Phase Settings",description:"Set up the division's phase structure and session dates",instructions:["1. Set the total number of weeks for the session","2. Configure how many weeks Phase 1 should last","3. Phase 2 weeks will be calculated automatically","4. Set the session start date","5. Review the calculated phase dates"],completed:!1},{id:4,title:"Add Division to App",description:"Create the division in your app with the URLs",instructions:["1. Enter the division name (exactly as in CSI LMS)","2. Add a description (optional)","3. Paste the schedule URL from CSI LMS","4. Paste the standings URL from CSI LMS","5. Click 'Create Division'"],completed:!1},{id:5,title:"Test Data Sync",description:"Verify the division is working correctly",instructions:["1. Click 'Update Schedule' to sync match data","2. Click 'Update Standings' to sync player rankings","3. Verify data appears correctly in the app","4. Test the division in the main dashboard"],completed:!1}],y=(w,x)=>{i(k=>({...k,[w]:x}))},v=async()=>{u(!0),g("");try{const w=await fetch(`${a}/api/seasons`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.name,division:o.name,description:o.description,scheduleUrl:o.scheduleUrl,standingsUrl:o.standingsUrl,seasonStart:o.seasonStart})}),x=await w.json();if(w.ok){try{const k=await fetch(`${a}/admin/divisions`);if(k.ok){const I=(await k.json()).find(M=>M.name===o.name);I&&await fetch(`${a}/api/division-config/${I._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({phase1Weeks:o.phase1Weeks,phase2Weeks:o.phase2Weeks,totalWeeks:o.totalWeeks,currentSession:{name:`${o.name} Session`,startDate:o.seasonStart,endDate:null,isActive:!0}})})}}catch(k){console.error("Error saving phase configuration:",k)}g("✅ Division created successfully with phase configuration!"),n(5),r&&r()}else g("❌ "+(x.error||"Failed to create division."))}catch(w){g("❌ Failed to create division: "+w.message)}u(!1)},S=()=>{switch(t){case 1:return e.createElement("div",{className:te.workflowStep},e.createElement("div",{className:te.stepInstructions},f[0].instructions.map((w,x)=>e.createElement("div",{key:x,className:te.instructionItem},w))),e.createElement("div",{className:te.stepActions},e.createElement("button",{className:te.workflowButton,onClick:()=>n(2)},e.createElement(ks,null)," I've Created the Division in CSI LMS")));case 2:return e.createElement("div",{className:te.workflowStep},e.createElement("div",{className:te.stepInstructions},f[1].instructions.map((w,x)=>e.createElement("div",{key:x,className:te.instructionItem},w))),e.createElement("div",{className:te.stepActions},e.createElement("button",{className:te.workflowButton,onClick:()=>n(3)},e.createElement(ks,null)," I Have the URLs Ready")));case 3:return e.createElement("div",{className:te.workflowStep},e.createElement("div",{className:te.stepInstructions},f[2].instructions.map((w,x)=>e.createElement("div",{key:x,className:te.instructionItem},w))),e.createElement("div",{className:te.divisionForm},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"15px"}},e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px",fontSize:"14px"}},"Total Weeks"),e.createElement("input",{type:"number",value:o.totalWeeks,onChange:w=>{const x=Number(w.target.value),k=o.phase1Weeks,E=Math.max(1,x-k);y("totalWeeks",x),y("phase2Weeks",E)},className:te.workflowInput,min:"2",max:"40"})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px",fontSize:"14px"}},"Phase 1 Weeks"),e.createElement("input",{type:"number",value:o.phase1Weeks,onChange:w=>{const x=Number(w.target.value);if(y("phase1Weeks",x),o.totalWeeks){const k=Math.max(1,o.totalWeeks-x);y("phase2Weeks",k)}},className:te.workflowInput,min:"1",max:"20"}))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"15px"}},e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px",fontSize:"14px"}},"Phase 2 Weeks"),e.createElement("input",{type:"number",value:o.phase2Weeks,onChange:w=>{const x=Number(w.target.value);y("phase2Weeks",x);const k=o.phase1Weeks+x;y("totalWeeks",k)},className:te.workflowInput,min:"1",max:"20"})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px",fontSize:"14px"}},"Session Start Date"),e.createElement("input",{type:"date",value:o.seasonStart,onChange:w=>y("seasonStart",w.target.value),className:te.workflowInput}))),o.seasonStart&&e.createElement("div",{style:{marginTop:"15px",padding:"15px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"6px",border:"1px solid #4CAF50"}},e.createElement("div",{style:{color:"#4CAF50",fontSize:"14px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"10px"}},e.createElement(Ry,null),e.createElement("strong",null,"Calculated Session Dates:")),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"10px"}},e.createElement("div",null,e.createElement("strong",null,"Phase 1:"),e.createElement("br",null),new Date(o.seasonStart).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})," to ",(()=>{const w=new Date(o.seasonStart),x=new Date(w);return x.setDate(w.getDate()+o.phase1Weeks*6-1),x.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})()),e.createElement("div",null,e.createElement("strong",null,"Phase 2:"),e.createElement("br",null),(()=>{const w=new Date(o.seasonStart),x=new Date(w);return x.setDate(w.getDate()+o.phase1Weeks*6),x.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})()," to ",(()=>{const w=new Date(o.seasonStart),x=new Date(w);return x.setDate(w.getDate()+o.phase1Weeks*6+o.phase2Weeks*6-1),x.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})())),e.createElement("div",{style:{marginTop:"10px",fontSize:"12px",opacity:.8}},"Total Session Length: ",o.totalWeeks," weeks (",o.phase1Weeks," weeks Phase 1 + ",o.phase2Weeks," weeks Phase 2)"))),e.createElement("button",{className:te.workflowButton,onClick:()=>n(4),disabled:!o.seasonStart},e.createElement(ks,null)," Continue to Division Setup")));case 4:return e.createElement("div",{className:te.workflowStep},e.createElement("div",{className:te.stepInstructions},f[3].instructions.map((w,x)=>e.createElement("div",{key:x,className:te.instructionItem},w))),e.createElement("div",{className:te.divisionForm},e.createElement("input",{type:"text",placeholder:"Division Name (exactly as in CSI LMS)",value:o.name,onChange:w=>y("name",w.target.value),className:te.workflowInput}),e.createElement("input",{type:"text",placeholder:"Description (optional)",value:o.description,onChange:w=>y("description",w.target.value),className:te.workflowInput}),e.createElement("input",{type:"url",placeholder:"Schedule URL from CSI LMS",value:o.scheduleUrl,onChange:w=>y("scheduleUrl",w.target.value),className:te.workflowInput}),e.createElement("input",{type:"url",placeholder:"Standings URL from CSI LMS",value:o.standingsUrl,onChange:w=>y("standingsUrl",w.target.value),className:te.workflowInput}),e.createElement("button",{className:te.workflowButton,onClick:v,disabled:c||!o.name||!o.scheduleUrl||!o.standingsUrl},c?"Creating...":"Create Division")),m&&e.createElement("div",{className:te.workflowResult},m));case 5:return e.createElement("div",{className:te.workflowStep},e.createElement("div",{className:te.stepInstructions},f[4].instructions.map((w,x)=>e.createElement("div",{key:x,className:te.instructionItem},w))),e.createElement("div",{className:te.stepActions},e.createElement(dW,{backendUrl:a,divisionName:o.name}),e.createElement("button",{className:te.workflowButton,onClick:()=>{n(1),i({name:"",description:"",scheduleUrl:"",standingsUrl:"",seasonStart:"",phase1Weeks:6,phase2Weeks:4,totalWeeks:10}),g("")}},e.createElement(fr,null)," Create Another Division")));default:return null}};return e.createElement("div",{className:te.workflowContainer},e.createElement("div",{className:te.workflowHeader},e.createElement("h3",null,e.createElement(fr,null)," Create New Division"),e.createElement("div",{className:te.workflowProgress},"Step ",t," of ",f.length)),e.createElement("div",{className:te.workflowSteps},f.map((w,x)=>e.createElement("div",{key:w.id,className:`${te.workflowStepIndicator} ${t>w.id?te.completed:t===w.id?te.active:te.pending}`},e.createElement("div",{className:te.stepNumber},w.id),e.createElement("div",{className:te.stepInfo},e.createElement("div",{className:te.stepTitle},w.title),e.createElement("div",{className:te.stepDescription},w.description))))),e.createElement("div",{className:te.workflowContent},S()))}function dW({backendUrl:a,divisionName:r}){const[t,n]=h.useState(!1),[o,i]=h.useState(""),c=async u=>{n(!0),i("");try{const g=await fetch(`${a}${u==="schedule"?"/admin/update-schedule":"/admin/update-standings"}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:r})}),f=await g.json();g.ok?i(`✅ ${u==="schedule"?"Schedule":"Standings"} updated successfully!`):i(`❌ Failed to update ${u}: ${f.error||"Unknown error"}`)}catch(m){i(`❌ Failed to update ${u}: ${m.message}`)}n(!1)};return e.createElement("div",{className:te.dataSyncTools},e.createElement("button",{className:te.syncButton,onClick:()=>c("schedule"),disabled:t},e.createElement(O0,null)," Update Schedule"),e.createElement("button",{className:te.syncButton,onClick:()=>c("standings"),disabled:t},e.createElement(O0,null)," Update Standings"),o&&e.createElement("div",{className:te.syncResult},o))}function uW({backendUrl:a}){const[r,t]=h.useState("approve"),[n,o]=h.useState([]),[i,c]=h.useState([]),[u,m]=h.useState(!1);h.useEffect(()=>{g(),f()},[]);const g=async()=>{m(!0);try{const w=await fetch(`${a}/api/users/pending-registrations`);if(w.ok){const x=await w.json();o(x.sort((k,E)=>new Date(k.registrationDate)-new Date(E.registrationDate)))}}catch(w){console.error("Error fetching pending registrations:",w)}m(!1)},f=async()=>{try{const w=await fetch(`${a}/api/users/pending-payment`);if(w.ok){const x=await w.json();c(x.users||[])}}catch(w){console.error("Error fetching pending payments:",w)}},y=async(w,x,k)=>{try{const E=await fetch(`${a}/api/users/${w}/confirm-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentMethod:x||"Admin Confirmed",paymentNotes:k||""})});if(E.ok){const I=await E.json();alert(`Payment confirmed! PIN: ${I.user.pin}`),f()}else alert("Failed to confirm payment")}catch(E){console.error("Error confirming payment:",E),alert("Error confirming payment")}},v=async(w,x)=>{try{(await fetch(`${a}/api/users/admin/approve-registration/${w}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approvedBy:"Admin",paymentInfo:{hasPaid:!0,paymentDate:new Date,paymentMethod:"Cash",paymentNotes:"Approved by admin"},division:x})})).ok?g():alert("Failed to approve registration")}catch(k){console.error("Error approving registration:",k),alert("Error approving registration")}},S=async(w,x)=>{try{(await fetch(`${a}/api/users/admin/reject-registration/${w}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rejectedBy:"Admin",notes:x})})).ok?g():alert("Failed to reject registration")}catch(k){console.error("Error rejecting registration:",k),alert("Error rejecting registration")}};return e.createElement("div",{className:te.playerManagementContainer},e.createElement("div",{className:te.tabHeader},e.createElement("button",{className:`${te.tabButton} ${r==="approve"?te.active:""}`,onClick:()=>t("approve")},e.createElement(Li,null)," Approve New Players (",n.length,")"),e.createElement("button",{className:`${te.tabButton} ${r==="payments"?te.active:""}`,onClick:()=>t("payments")},e.createElement(Qr,null)," Pending Payments (",i.length,")"),e.createElement("button",{className:`${te.tabButton} ${r==="manage"?te.active:""}`,onClick:()=>t("manage")},e.createElement(ml,null)," Manage Existing Players")),e.createElement("div",{className:te.tabContent},r==="approve"&&e.createElement("div",{className:te.approvalSection},u?e.createElement("div",{className:te.loadingMessage},"Loading pending registrations..."):n.length===0?e.createElement("div",{className:te.emptyState},e.createElement(Qr,null)," No pending registrations"):e.createElement("div",{className:te.registrationList},n.map((w,x)=>e.createElement("div",{key:w._id,className:te.registrationCard},e.createElement("div",{className:te.registrationHeader},e.createElement("span",{className:te.registrationNumber},"#",x+1),e.createElement("h4",null,w.firstName," ",w.lastName)),e.createElement("div",{className:te.registrationDetails},e.createElement("p",null,e.createElement("strong",null,"Email:")," ",w.email),e.createElement("p",null,e.createElement("strong",null,"Phone:")," ",w.phone),e.createElement("p",null,e.createElement("strong",null,"Registered:")," ",new Date(w.registrationDate).toLocaleDateString())),e.createElement("div",{className:te.registrationActions},e.createElement("select",{id:`division-${w._id}`,className:te.divisionSelect},e.createElement("option",{value:""},"Select Division"),e.createElement("option",{value:"FRBCAPL TEST"},"FRBCAPL TEST"),e.createElement("option",{value:"Singles Test"},"Singles Test"),e.createElement("option",{value:"Waiting List"},"Waiting List")),e.createElement("button",{className:te.approveButton,onClick:()=>{const k=document.getElementById(`division-${w._id}`).value;if(!k){alert("Please select a division before approving.");return}v(w._id,k)}},e.createElement(Qr,null)," Approve"),e.createElement("button",{className:te.rejectButton,onClick:()=>{const k=prompt("Enter rejection reason (optional):");k!==null&&S(w._id,k)}},e.createElement(Bs,null)," Reject")))))),r==="payments"&&e.createElement("div",{className:te.paymentSection},i.length===0?e.createElement("div",{className:te.emptyState},e.createElement(Qr,null)," No pending payments"):e.createElement("div",{className:te.paymentList},i.map((w,x)=>e.createElement("div",{key:w._id,className:te.paymentCard},e.createElement("div",{className:te.paymentHeader},e.createElement("span",{className:te.paymentNumber},"#",x+1),e.createElement("h4",null,w.firstName," ",w.lastName)),e.createElement("div",{className:te.paymentDetails},e.createElement("p",null,e.createElement("strong",null,"Email:")," ",w.email),e.createElement("p",null,e.createElement("strong",null,"Registered:")," ",new Date(w.registrationDate).toLocaleDateString()),e.createElement("p",null,e.createElement("strong",null,"Status:")," ",e.createElement("span",{className:te.pendingStatus},"Payment Pending"))),e.createElement("div",{className:te.paymentActions},e.createElement("select",{id:`payment-method-${w._id}`,className:te.paymentMethodSelect},e.createElement("option",{value:"Cash"},"Cash"),e.createElement("option",{value:"Venmo"},"Venmo"),e.createElement("option",{value:"Cash App"},"Cash App"),e.createElement("option",{value:"PayPal"},"PayPal"),e.createElement("option",{value:"Credit Card"},"Credit Card"),e.createElement("option",{value:"Apple Pay"},"Apple Pay"),e.createElement("option",{value:"Google Pay"},"Google Pay"),e.createElement("option",{value:"Check"},"Check"),e.createElement("option",{value:"Admin Confirmed"},"Admin Confirmed")),e.createElement("button",{className:te.confirmPaymentButton,onClick:()=>{const k=document.getElementById(`payment-method-${w._id}`).value,E=prompt("Payment notes (optional):");E!==null&&y(w._id,k,E)}},e.createElement(Qr,null)," Confirm Payment")))))),r==="manage"&&e.createElement("div",{className:te.manageSection},e.createElement(mW,{backendUrl:a}))))}function oS({player:a,onSave:r,onClose:t}){const[n,o]=h.useState({firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",phone:a.phone||"",textNumber:a.textNumber||"",emergencyContactName:a.emergencyContactName||"",emergencyContactPhone:a.emergencyContactPhone||"",locations:a.locations||"",notes:a.notes||""}),i=(u,m)=>{let g=m;if(u==="phone"||u==="textNumber"||u==="emergencyContactPhone"){const f=m.replace(/\D/g,"");f.length<=3?g=`(${f}`:f.length<=6?g=`(${f.slice(0,3)}) ${f.slice(3)}`:f.length<=10?g=`(${f.slice(0,3)}) ${f.slice(3,6)}-${f.slice(6)}`:g=`(${f.slice(0,3)}) ${f.slice(3,6)}-${f.slice(6,10)}`}o(f=>({...f,[u]:g}))},c=u=>{u.preventDefault(),r({...a,...n})};return e.createElement("div",{className:te.modalOverlay},e.createElement("div",{className:te.modal},e.createElement("div",{className:te.modalHeader},e.createElement("h3",null,"Edit Player: ",a.firstName," ",a.lastName),e.createElement("button",{onClick:t,className:te.closeButton},"×")),e.createElement("form",{onSubmit:c,className:te.modalForm},e.createElement("div",{className:te.formRow},e.createElement("div",{className:te.formField},e.createElement("label",null,"First Name:"),e.createElement("input",{type:"text",value:n.firstName,onChange:u=>i("firstName",u.target.value),required:!0})),e.createElement("div",{className:te.formField},e.createElement("label",null,"Last Name:"),e.createElement("input",{type:"text",value:n.lastName,onChange:u=>i("lastName",u.target.value),required:!0}))),e.createElement("div",{className:te.formRow},e.createElement("div",{className:te.formField},e.createElement("label",null,"Email:"),e.createElement("input",{type:"email",value:n.email,onChange:u=>i("email",u.target.value),required:!0})),e.createElement("div",{className:te.formField},e.createElement("label",null,"Phone:"),e.createElement("input",{type:"tel",value:n.phone,onChange:u=>i("phone",u.target.value),placeholder:"(555) 123-4567"}))),e.createElement("div",{className:te.formRow},e.createElement("div",{className:te.formField},e.createElement("label",null,"Text Number:"),e.createElement("input",{type:"tel",value:n.textNumber,onChange:u=>i("textNumber",u.target.value),placeholder:"(555) 123-4567"})),e.createElement("div",{className:te.formField},e.createElement("label",null,"Emergency Contact Name:"),e.createElement("input",{type:"text",value:n.emergencyContactName,onChange:u=>i("emergencyContactName",u.target.value)}))),e.createElement("div",{className:te.formRow},e.createElement("div",{className:te.formField},e.createElement("label",null,"Emergency Contact Phone:"),e.createElement("input",{type:"tel",value:n.emergencyContactPhone,onChange:u=>i("emergencyContactPhone",u.target.value),placeholder:"(555) 123-4567"})),e.createElement("div",{className:te.formField},e.createElement("label",null,"Playing Locations:"),e.createElement("input",{type:"text",value:n.locations,onChange:u=>i("locations",u.target.value)}))),e.createElement("div",{className:te.formField},e.createElement("label",null,"Notes:"),e.createElement("textarea",{value:n.notes,onChange:u=>i("notes",u.target.value),rows:"3"})),e.createElement("div",{className:te.modalActions},e.createElement("button",{type:"button",onClick:t,className:te.cancelButton},"Cancel"),e.createElement("button",{type:"submit",className:te.saveButton},"Save Changes")))))}function mW({backendUrl:a}){const[r,t]=h.useState(""),[n,o]=h.useState([]),[i,c]=h.useState([]),[u,m]=h.useState({}),[g,f]=h.useState(null),[y,v]=h.useState(!1);h.useEffect(()=>{fetch(`${a}/admin/divisions`).then(N=>N.json()).then(N=>c(N.map(_=>_.name))).catch(()=>c([]))},[a]);const S=async N=>{if(N.preventDefault(),!!r.trim())try{const P=await(await fetch(`${a}/admin/search-users?query=${encodeURIComponent(r)}`)).json();o(P),m({})}catch{o([]),alert("Search failed")}},w=async(N,_)=>{try{await fetch(`${a}/admin/user/${N}/add-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:_})}),S({preventDefault:()=>{}})}catch{alert("Failed to add user to division")}},x=async(N,_)=>{try{await fetch(`${a}/admin/user/${N}/remove-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:_})}),S({preventDefault:()=>{}})}catch{alert("Failed to remove user from division")}},k=(N,_)=>{m(P=>({...P,[N]:_}))},E=async()=>{try{const _=await(await fetch(`${a}/api/users`)).json();o(_),t("")}catch{o([]),alert("Failed to load all players")}},I=N=>{f(N),v(!0)},M=async N=>{try{const _=await fetch(`${a}/api/users/${N._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(_.ok){const P=await _.json();r.trim()?S({preventDefault:()=>{}}):E(),v(!1),f(null),alert("✅ Player updated successfully!")}else{const P=await _.json();alert(`Failed to update player: ${P.message||P.error||"Unknown error"}`)}}catch(_){alert(`Failed to update unified player: ${_.message}`)}};return e.createElement("div",{className:te.userSearchContainer},e.createElement("form",{onSubmit:S,className:te.searchForm},e.createElement("input",{type:"text",placeholder:"Search by name or email...",value:r,onChange:N=>t(N.target.value),className:te.searchInput}),e.createElement("button",{type:"submit",className:te.searchButton},e.createElement(Yw,null)," Search")),e.createElement("button",{onClick:E,className:te.searchButton,style:{marginLeft:"10px"}},e.createElement(ml,null)," Show All Players"),n.length>0&&e.createElement("div",{className:te.resultsSummary},e.createElement("div",{className:te.summaryCard},e.createElement("h4",null,"📊 Player Summary"),e.createElement("div",{className:te.summaryStats},e.createElement("div",{className:te.summaryStat},e.createElement("span",{className:te.statNumber},n.length),e.createElement("span",{className:te.statLabel},"Total Players")),e.createElement("div",{className:te.summaryStat},e.createElement("span",{className:te.statNumber},n.filter(N=>N.isLeaguePlayer).length),e.createElement("span",{className:te.statLabel},"League Players")),e.createElement("div",{className:te.summaryStat},e.createElement("span",{className:te.statNumber},n.filter(N=>N.isLadderPlayer).length),e.createElement("span",{className:te.statLabel},"Ladder Players")),e.createElement("div",{className:te.summaryStat},e.createElement("span",{className:te.statNumber},n.filter(N=>N.system==="both").length),e.createElement("span",{className:te.statLabel},"Both Systems"))))),n.length>0&&e.createElement("div",{className:te.searchResults},n.map(N=>{var _,P;return e.createElement("div",{key:N._id,className:te.userCard},e.createElement("div",{className:te.userInfo},e.createElement("div",{className:te.userHeader},e.createElement("h4",{className:te.userName},N.firstName&&N.lastName?`${N.firstName} ${N.lastName}`:N.name||N.email||"Unknown User"),e.createElement("div",{className:te.systemBadges},N.system==="league"&&e.createElement("span",{className:te.leagueBadge},"🏆 League"),N.system==="ladder"&&e.createElement("span",{className:te.ladderBadge},"🏁 Ladder"),N.system==="both"&&e.createElement("div",{className:te.bothBadges},e.createElement("span",{className:te.leagueBadge},"🏆 League"),e.createElement("span",{className:te.ladderBadge},"🏁 Ladder")))),e.createElement("div",{className:te.userContactInfo},e.createElement("p",{className:te.userEmail},e.createElement("strong",null,"Email:")," ",N.email),e.createElement("p",{className:te.userPhone},e.createElement("strong",null,"Phone:")," ",N.phone||"Not provided"),N.textNumber&&e.createElement("p",{className:te.userTextNumber},e.createElement("strong",null,"Text:")," ",N.textNumber)),e.createElement("div",{className:te.userDetails},e.createElement("p",null,e.createElement("strong",null,"Current Divisions:")," ",((_=N.divisions)==null?void 0:_.join(", "))||"None"),N.locations&&e.createElement("p",null,e.createElement("strong",null,"Playing Locations:")," ",N.locations),N.availability&&e.createElement("div",{className:te.userAvailability},e.createElement("p",null,e.createElement("strong",null,"Availability:")),e.createElement("div",{className:te.availabilityGrid},Object.entries(N.availability).map(([B,R])=>R&&R.length>0&&e.createElement("div",{key:B,className:te.availabilityDay},e.createElement("span",{className:te.dayLabel},B,":"),e.createElement("span",{className:te.timeSlots},R.join(", ")))))),N.emergencyContactName&&e.createElement("p",null,e.createElement("strong",null,"Emergency Contact:")," ",N.emergencyContactName," (",N.emergencyContactPhone,")"),N.notes&&e.createElement("p",null,e.createElement("strong",null,"Notes:")," ",N.notes),N.system==="ladder"&&e.createElement("div",{className:te.ladderInfo},e.createElement("p",null,e.createElement("strong",null,"Ladder:")," ",N.ladderName),e.createElement("p",null,e.createElement("strong",null,"Position:")," #",N.position),e.createElement("p",null,e.createElement("strong",null,"Fargo Rate:")," ",N.fargoRate),e.createElement("p",null,e.createElement("strong",null,"Status:")," ",N.isActive?"Active":"Inactive")),N.system==="both"&&N.ladderInfo&&e.createElement("div",{className:te.ladderInfo},e.createElement("p",null,e.createElement("strong",null,"Ladder:")," ",N.ladderInfo.ladderName),e.createElement("p",null,e.createElement("strong",null,"Position:")," #",N.ladderInfo.position),e.createElement("p",null,e.createElement("strong",null,"Fargo Rate:")," ",N.ladderInfo.fargoRate),e.createElement("p",null,e.createElement("strong",null,"Status:")," ",N.ladderInfo.isActive?"Active":"Inactive")))),e.createElement("div",{className:te.userActions},e.createElement("button",{onClick:()=>I(N),className:te.editButton},e.createElement(Ri,null)," Edit Player"),e.createElement("select",{value:u[N._id]||"",onChange:B=>k(N._id,B.target.value),className:te.divisionSelect},e.createElement("option",{value:""},"Select Division"),i.map(B=>e.createElement("option",{key:B,value:B},B))),e.createElement("button",{onClick:()=>w(N._id,u[N._id]),disabled:!u[N._id],className:te.addButton},e.createElement(fr,null)," Add to Division"),(P=N.divisions)==null?void 0:P.map(B=>e.createElement("button",{key:B,onClick:()=>x(N._id,B),className:te.removeButton},e.createElement(Bs,null)," Remove from ",B))))})),y&&g&&e.createElement(oS,{player:g,onSave:M,onClose:()=>{v(!1),f(null)}}))}function pW({backendUrl:a}){const[r,t]=h.useState([]),[n,o]=h.useState("");return h.useEffect(()=>{fetch(`${a}/admin/divisions`).then(i=>i.json()).then(i=>{const c=i.map(u=>u.name);t(c),o(c[0]||"")}).catch(()=>t([]))},[a]),e.createElement("div",{className:te.matchManagementContainer},e.createElement("div",{className:te.sectionHeader},e.createElement("h3",null,e.createElement(Ls,null)," Match Management"),e.createElement("select",{value:n,onChange:i=>o(i.target.value),className:te.divisionSelect},r.map(i=>e.createElement("option",{key:i,value:i},i)))),n&&e.createElement(QF,{division:n,isAdmin:!0}))}function fW({backendUrl:a}){const[r,t]=h.useState(!1),[n,o]=h.useState({});h.useEffect(()=>{i()},[]);const i=async()=>{try{const[c,u]=await Promise.all([fetch(`${a}/api/users`),fetch(`${a}/admin/divisions`)]),m=await c.json(),g=await u.json();o({totalUsers:m.length,activeUsers:m.filter(f=>f.isActive).length,pendingRegistrations:m.filter(f=>!f.isApproved).length,totalDivisions:g.length})}catch(c){console.error("Error fetching system stats:",c)}};return e.createElement("div",{className:te.systemStatusContainer},e.createElement("div",{className:te.statsGrid},e.createElement("div",{className:te.statCard},e.createElement("div",{className:te.statNumber},n.totalUsers||0),e.createElement("div",{className:te.statLabel},"Total Users")),e.createElement("div",{className:te.statCard},e.createElement("div",{className:te.statNumber},n.activeUsers||0),e.createElement("div",{className:te.statLabel},"Active Users")),e.createElement("div",{className:te.statCard},e.createElement("div",{className:te.statNumber},n.pendingRegistrations||0),e.createElement("div",{className:te.statLabel},"Pending Approvals")),e.createElement("div",{className:te.statCard},e.createElement("div",{className:te.statNumber},n.totalDivisions||0),e.createElement("div",{className:te.statLabel},"Divisions"))),e.createElement("div",{className:te.systemActions},e.createElement("button",{className:te.systemButton,onClick:()=>t(!0)},e.createElement(vz,null)," View Unentered LMS Matches"),e.createElement("button",{className:te.systemButton,onClick:i},e.createElement(O0,null)," Refresh Stats")),e.createElement(VF,{open:r,onClose:()=>t(!1)}))}function gW({backendUrl:a}){const[r,t]=h.useState("view"),[n,o]=h.useState([]),[i,c]=h.useState(!1),[u,m]=h.useState(null),[g,f]=h.useState(""),[y,v]=h.useState(null),[S,w]=h.useState(!1);h.useEffect(()=>{x()},[a]);const x=async()=>{c(!0);try{const B=await ys.getAllUsers();o(B)}catch(B){m("Failed to fetch users: "+B.message)}finally{c(!1)}},k=async B=>{if(B.preventDefault(),!!g.trim()){c(!0);try{const R=await ys.searchUsers(g);o(R)}catch(R){m("Search failed: "+R.message)}finally{c(!1)}}},E=async B=>{c(!0);try{const R=await ys.addUser(B);o(W=>[...W,R]),alert("User added successfully!"),t("view")}catch(R){m("Failed to add user: "+R.message)}finally{c(!1)}},I=B=>{v(B),w(!0)},M=async B=>{c(!0);try{const R=await ys.updateUser(B._id,B);o(W=>W.map(L=>L._id===B._id?R:L)),alert("User updated successfully!"),w(!1),v(null)}catch(R){m("Failed to update user: "+R.message)}finally{c(!1)}},N=async B=>{if(window.confirm("Are you sure you want to delete this user?")){c(!0);try{await ys.deleteUser(B),o(R=>R.filter(W=>W._id!==B)),alert("User deleted successfully!")}catch(R){m("Failed to delete user: "+R.message)}finally{c(!1)}}},_=async(B,R)=>{c(!0);try{await ys.addUserDivision(B,R),o(W=>W.map(L=>L._id===B?{...L,divisions:[...L.divisions,R]}:L)),alert("Division added to user successfully!")}catch(W){m("Failed to add division to user: "+W.message)}finally{c(!1)}},P=async(B,R)=>{c(!0);try{await ys.removeUserDivision(B,R),o(W=>W.map(L=>L._id===B?{...L,divisions:L.divisions.filter(F=>F!==R)}:L)),alert("Division removed from user successfully!")}catch(W){m("Failed to remove division from user: "+W.message)}finally{c(!1)}};return e.createElement("div",{className:te.unifiedUsersContainer},e.createElement("div",{className:te.tabHeader},e.createElement("button",{className:`${te.tabButton} ${r==="view"?te.active:""}`,onClick:()=>t("view")},e.createElement(ml,null)," View All Users (",n.length,")"),e.createElement("button",{className:`${te.tabButton} ${r==="add"?te.active:""}`,onClick:()=>t("add")},e.createElement(Li,null)," Add New User"),e.createElement("button",{className:`${te.tabButton} ${r==="edit"?te.active:""}`,onClick:()=>t("edit")},e.createElement(F0,null)," Edit User")),e.createElement("div",{className:te.tabContent},r==="view"&&e.createElement("div",{className:te.viewUsersSection},e.createElement("form",{onSubmit:k,className:te.searchForm},e.createElement("input",{type:"text",placeholder:"Search users by name, email, or ID...",value:g,onChange:B=>f(B.target.value),className:te.searchInput}),e.createElement("button",{type:"submit",className:te.searchButton},e.createElement(Yw,null)," Search")),i?e.createElement("div",{className:te.loadingMessage},"Loading users..."):u?e.createElement("div",{className:te.errorMessage},u):n.length===0?e.createElement("div",{className:te.emptyState},e.createElement(ml,null)," No users found. Add one to get started!"):e.createElement("div",{className:te.userList},n.map(B=>{var R;return e.createElement("div",{key:B._id,className:te.userCard},e.createElement("div",{className:te.userHeader},e.createElement("h4",{className:te.userName},B.firstName&&B.lastName?`${B.firstName} ${B.lastName}`:B.name||B.email||"Unknown User"),e.createElement("div",{className:te.systemBadges},B.system==="league"&&e.createElement("span",{className:te.leagueBadge},"🏆 League"),B.system==="ladder"&&e.createElement("span",{className:te.ladderBadge},"🏁 Ladder"),B.system==="both"&&e.createElement("div",{className:te.bothBadges},e.createElement("span",{className:te.leagueBadge},"🏆 League"),e.createElement("span",{className:te.ladderBadge},"🏁 Ladder")))),e.createElement("div",{className:te.userContactInfo},e.createElement("p",{className:te.userEmail},e.createElement("strong",null,"Email:")," ",B.email),e.createElement("p",{className:te.userPhone},e.createElement("strong",null,"Phone:")," ",B.phone||"Not provided"),B.textNumber&&e.createElement("p",{className:te.userTextNumber},e.createElement("strong",null,"Text:")," ",B.textNumber)),e.createElement("div",{className:te.userDetails},e.createElement("p",null,e.createElement("strong",null,"Current Divisions:")," ",((R=B.divisions)==null?void 0:R.join(", "))||"None"),B.locations&&e.createElement("p",null,e.createElement("strong",null,"Playing Locations:")," ",B.locations),B.availability&&e.createElement("div",{className:te.userAvailability},e.createElement("p",null,e.createElement("strong",null,"Availability:")),e.createElement("div",{className:te.availabilityGrid},Object.entries(B.availability).map(([W,L])=>L&&L.length>0&&e.createElement("div",{key:W,className:te.availabilityDay},e.createElement("span",{className:te.dayLabel},W,":"),e.createElement("span",{className:te.timeSlots},L.join(", ")))))),B.emergencyContactName&&e.createElement("p",null,e.createElement("strong",null,"Emergency Contact:")," ",B.emergencyContactName," (",B.emergencyContactPhone,")"),B.notes&&e.createElement("p",null,e.createElement("strong",null,"Notes:")," ",B.notes),B.system==="ladder"&&e.createElement("div",{className:te.ladderInfo},e.createElement("p",null,e.createElement("strong",null,"Ladder:")," ",B.ladderName),e.createElement("p",null,e.createElement("strong",null,"Position:")," #",B.position),e.createElement("p",null,e.createElement("strong",null,"Fargo Rate:")," ",B.fargoRate),e.createElement("p",null,e.createElement("strong",null,"Status:")," ",B.isActive?"Active":"Inactive")),B.system==="both"&&B.ladderInfo&&e.createElement("div",{className:te.ladderInfo},e.createElement("p",null,e.createElement("strong",null,"Ladder:")," ",B.ladderInfo.ladderName),e.createElement("p",null,e.createElement("strong",null,"Position:")," #",B.ladderInfo.position),e.createElement("p",null,e.createElement("strong",null,"Fargo Rate:")," ",B.ladderInfo.fargoRate),e.createElement("p",null,e.createElement("strong",null,"Status:")," ",B.ladderInfo.isActive?"Active":"Inactive"))),e.createElement("div",{className:te.userActions},e.createElement("button",{onClick:()=>I(B),className:te.editButton},e.createElement(Ri,null)," Edit User"),e.createElement("select",{value:B.system||"",onChange:W=>{const L=W.target.value;L==="league"?(P(B._id,"ladder"),P(B._id,"both")):L==="ladder"?(P(B._id,"league"),P(B._id,"both")):(P(B._id,"league"),P(B._id,"ladder")),_(B._id,L)},className:te.systemSelect},e.createElement("option",{value:""},"Select System"),e.createElement("option",{value:"league"},"League Only"),e.createElement("option",{value:"ladder"},"Ladder Only"),e.createElement("option",{value:"both"},"Both Systems")),e.createElement("button",{onClick:()=>N(B._id),className:te.deleteButton},e.createElement(Bs,null)," Delete User")))}))),r==="add"&&e.createElement("div",{className:te.addUserSection},e.createElement("h3",null,"Add New User"),e.createElement("form",{onSubmit:B=>{B.preventDefault();const R={firstName:document.getElementById("add-firstName").value,lastName:document.getElementById("add-lastName").value,email:document.getElementById("add-email").value,phone:document.getElementById("add-phone").value,textNumber:document.getElementById("add-textNumber").value,emergencyContactName:document.getElementById("add-emergencyContactName").value,emergencyContactPhone:document.getElementById("add-emergencyContactPhone").value,locations:document.getElementById("add-locations").value,notes:document.getElementById("add-notes").value,system:document.getElementById("add-system").value,isActive:!0,isApproved:!0,isLeaguePlayer:!1,isLadderPlayer:!1,ladderName:"",position:"",fargoRate:"",availability:{},divisions:[],paymentInfo:{hasPaid:!1,paymentDate:null,paymentMethod:"",paymentNotes:""}};E(R)},className:te.addUserForm},e.createElement("div",{className:te.formRow},e.createElement("div",{className:te.formField},e.createElement("label",null,"First Name:"),e.createElement("input",{type:"text",id:"add-firstName",required:!0})),e.createElement("div",{className:te.formField},e.createElement("label",null,"Last Name:"),e.createElement("input",{type:"text",id:"add-lastName",required:!0}))),e.createElement("div",{className:te.formRow},e.createElement("div",{className:te.formField},e.createElement("label",null,"Email:"),e.createElement("input",{type:"email",id:"add-email",required:!0})),e.createElement("div",{className:te.formField},e.createElement("label",null,"Phone:"),e.createElement("input",{type:"tel",id:"add-phone",placeholder:"(555) 123-4567"}))),e.createElement("div",{className:te.formRow},e.createElement("div",{className:te.formField},e.createElement("label",null,"Text Number:"),e.createElement("input",{type:"tel",id:"add-textNumber",placeholder:"(555) 123-4567"})),e.createElement("div",{className:te.formField},e.createElement("label",null,"Emergency Contact Name:"),e.createElement("input",{type:"text",id:"add-emergencyContactName"}))),e.createElement("div",{className:te.formRow},e.createElement("div",{className:te.formField},e.createElement("label",null,"Emergency Contact Phone:"),e.createElement("input",{type:"tel",id:"add-emergencyContactPhone",placeholder:"(555) 123-4567"})),e.createElement("div",{className:te.formField},e.createElement("label",null,"Playing Locations:"),e.createElement("input",{type:"text",id:"add-locations"}))),e.createElement("div",{className:te.formField},e.createElement("label",null,"Notes:"),e.createElement("textarea",{id:"add-notes",rows:"3"})),e.createElement("div",{className:te.formRow},e.createElement("div",{className:te.formField},e.createElement("label",null,"System:"),e.createElement("select",{id:"add-system",required:!0},e.createElement("option",{value:""},"Select System"),e.createElement("option",{value:"league"},"League Only"),e.createElement("option",{value:"ladder"},"Ladder Only"),e.createElement("option",{value:"both"},"Both Systems")))),e.createElement("button",{type:"submit",className:te.addUserButton},i?"Adding...":"Add User"),u&&e.createElement("div",{className:te.errorMessage},u))),r==="edit"&&y&&e.createElement(oS,{player:y,onSave:M,onClose:()=>{w(!1),v(null)}})))}function hW(){const[a,r]=h.useState(null),[t,n]=h.useState([]),[o,i]=h.useState(null),[c,u]=h.useState([]),[m,g]=h.useState(!1),[f,y]=h.useState(null),[v,S]=h.useState("overview"),w=er();h.useEffect(()=>{const E=new Dy(iW);return E.connectUser({id:ax,name:"Admin"},E.devToken(ax)),r(E),()=>E.disconnectUser()},[]),h.useEffect(()=>{if(!a)return;(async()=>{try{const I=await a.queryChannels({});n(I)}catch(I){console.error("Error fetching channels:",I)}})()},[a]),h.useEffect(()=>{if(!o)return;(async()=>{g(!0);try{const I=await o.getMessages();u(I.messages)}catch(I){console.error("Error fetching messages:",I)}g(!1)})()},[o]);const x=(E,I)=>{y({type:E,message:I}),setTimeout(()=>y(null),5e3)};if(!a)return e.createElement("div",null,"Loading admin dashboard...");const k=()=>{switch(v){case"overview":return e.createElement("div",{className:te.overviewSection},e.createElement("h2",null,"Welcome to Admin Dashboard"),e.createElement("p",null,"Select a section below to manage your league:"),e.createElement("div",{className:te.quickActions},e.createElement("button",{className:te.quickActionButton,onClick:()=>S("divisions")},e.createElement(fr,null)," Create New Division"),e.createElement("button",{className:te.quickActionButton,onClick:()=>S("players")},e.createElement(Li,null)," Manage Players"),e.createElement("button",{className:te.quickActionButton,onClick:()=>S("matches")},e.createElement(Ls,null)," Match Management"),e.createElement("button",{className:te.quickActionButton,onClick:()=>S("system")},e.createElement(z0,null)," System Status"),e.createElement("button",{className:te.quickActionButton,onClick:()=>S("ladder-applications")},"🏆 Pending Applications"),e.createElement("button",{className:te.quickActionButton,onClick:()=>S("simplified-admin"),style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"}},"🎯 Simplified Admin Dashboard")));case"divisions":return e.createElement(cW,{backendUrl:de,onComplete:()=>x("success","Division created successfully!")});case"players":return e.createElement(uW,{backendUrl:de});case"matches":return e.createElement(pW,{backendUrl:de});case"system":return e.createElement(fW,{backendUrl:de});case"backup":return e.createElement(JF,{backendUrl:de});case"locations":return e.createElement(XF,{backendUrl:de});case"payments":return e.createElement(tW,null);case"payment-tracker":return e.createElement(aW,null);case"league-management":return e.createElement(nW,null);case"unified-users":return e.createElement(gW,{backendUrl:de});case"ladder-applications":return e.createElement(Py,{onClose:()=>S("overview")});case"simplified-admin":return e.createElement(rW,null);default:return null}};return e.createElement("div",{className:te.adminDashboardRoot},e.createElement("div",{className:te.adminDashboardNav},e.createElement("div",{className:te.navLeft},e.createElement("button",{onClick:()=>{w("/"),window.location.reload()}},"🏠 User Dashboard"),e.createElement("button",{onClick:()=>w("/chat")},"💬 Back to Chat")),e.createElement("div",{className:te.navRight},e.createElement("button",{onClick:()=>{localStorage.clear(),w("/"),window.location.reload()}},"🚪 Logout"))),e.createElement("div",{className:te.adminDashboardMainColumn},f&&e.createElement("div",{className:`${te.banner} ${te[f.type]}`},f.type==="success"?e.createElement(Qr,null):e.createElement(df,null),f.message),e.createElement("div",{className:te.sectionNavigation},e.createElement("button",{className:`${te.sectionButton} ${v==="overview"?te.active:""}`,onClick:()=>S("overview")},"📊 Overview"),e.createElement("button",{className:`${te.sectionButton} ${v==="divisions"?te.active:""}`,onClick:()=>S("divisions")},e.createElement(fr,null)," Divisions"),e.createElement("button",{className:`${te.sectionButton} ${v==="players"?te.active:""}`,onClick:()=>S("players")},e.createElement(ml,null)," Players"),e.createElement("button",{className:`${te.sectionButton} ${v==="matches"?te.active:""}`,onClick:()=>S("matches")},e.createElement(Ls,null)," Matches"),e.createElement("button",{className:`${te.sectionButton} ${v==="system"?te.active:""}`,onClick:()=>S("system")},e.createElement(z0,null)," System"),e.createElement("button",{className:`${te.sectionButton} ${v==="backup"?te.active:""}`,onClick:()=>S("backup")},e.createElement(Op,null)," Backup"),e.createElement("button",{className:`${te.sectionButton} ${v==="locations"?te.active:""}`,onClick:()=>S("locations")},e.createElement(Pi,null)," Locations"),e.createElement("button",{className:`${te.sectionButton} ${v==="payments"?te.active:""}`,onClick:()=>S("payments")},"💳 Payments"),e.createElement("button",{className:`${te.sectionButton} ${v==="payment-tracker"?te.active:""}`,onClick:()=>S("payment-tracker")},"💰 Payment Tracker"),e.createElement("button",{className:`${te.sectionButton} ${v==="league-management"?te.active:""}`,onClick:()=>S("league-management")},"📅 League Management"),e.createElement("button",{className:`${te.sectionButton} ${v==="unified-users"?te.active:""}`,onClick:()=>S("unified-users")},"👥 Unified Users"),e.createElement("button",{className:`${te.sectionButton} ${v==="ladder-applications"?te.active:""}`,onClick:()=>S("ladder-applications")},"🏆 Pending Applications")),e.createElement("div",{className:te.sectionContent},k())))}function yW(){const[a,r]=h.useState("overview"),[t,n]=h.useState(!1),[o,i]=h.useState(""),[c,u]=h.useState(""),[m,g]=h.useState(null),[f,y]=h.useState([]),[v,S]=h.useState([]),[w,x]=h.useState([]),k=()=>{const T=Kl.getCurrentAdmin();if(!T)throw new Error("No authenticated admin found");return{email:T.email,pin:T.pin}},[E,I]=h.useState(!1),[M,N]=h.useState(!1),[_,P]=h.useState(!1),[B,R]=h.useState(!1),[W,L]=h.useState({leagueId:"",name:"",description:"",adminEmail:"",adminName:"",operatorEmail:""}),[F,j]=h.useState({email:"",firstName:"",lastName:"",phone:"",password:""}),[J,Y]=h.useState({email:"",firstName:"",lastName:"",phone:"",password:"",role:"admin",permissions:{canCreateLeagues:!1,canDeleteLeagues:!1,canManageLeagueOperators:!1,canViewAllLeagueData:!1,canManageBilling:!1,canViewSystemLogs:!1}});h.useEffect(()=>{D()},[]);const D=async()=>{n(!0);try{const{email:T,pin:re}=k(),G={"Content-Type":"application/json","x-admin-email":T,"x-admin-pin":re},[se,pe,Se,at]=await Promise.all([fetch(`${de}/api/platform/stats`,{headers:G}),fetch(`${de}/api/platform/leagues`,{headers:G}),fetch(`${de}/api/platform/operators`,{headers:G}),fetch(`${de}/api/platform/admins`,{headers:G})]);if(se.ok){const be=await se.json();g(be)}else console.error("Stats response error:",se.status,await se.text());if(pe.ok){const be=await pe.json();y(be.leagues||[])}else console.error("Leagues response error:",pe.status,await pe.text());if(Se.ok){const be=await Se.json();S(be.operators||[])}else console.error("Operators response error:",Se.status,await Se.text());if(at.ok){const be=await at.json();x(be.admins||[])}else console.error("Admins response error:",at.status,await at.text())}catch{i("Failed to load dashboard data")}finally{n(!1)}},A=async T=>{T.preventDefault(),n(!0),i("");try{const{email:re,pin:G}=k(),se=await fetch(`${de}/api/platform/leagues`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...W,adminEmail:re,adminPin:G})}),pe=await se.json();se.ok?(u("League created successfully!"),I(!1),L({leagueId:"",name:"",description:"",adminEmail:"",adminName:"",operatorEmail:""}),D()):i(pe.message||"Failed to create league")}catch{i("Network error. Please try again.")}finally{n(!1)}},U=async T=>{T.preventDefault(),n(!0),i("");try{const{email:re,pin:G}=k(),se=await fetch(`${de}/api/platform/operators`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...F,adminEmail:re,adminPin:G})}),pe=await se.json();se.ok?(u("Operator created successfully!"),N(!1),j({email:"",firstName:"",lastName:"",phone:"",password:""}),D()):i(pe.message||"Failed to create operator")}catch{i("Network error. Please try again.")}finally{n(!1)}},K=async T=>{T.preventDefault(),n(!0),i("");try{const{email:re,pin:G}=k(),se=await fetch(`${de}/api/platform/admins`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...J,adminEmail:re,adminPin:G})}),pe=await se.json();se.ok?(u("Admin created successfully!"),P(!1),Y({email:"",firstName:"",lastName:"",phone:"",password:"",role:"admin",permissions:{canCreateLeagues:!1,canDeleteLeagues:!1,canManageLeagueOperators:!1,canViewAllLeagueData:!1,canManageBilling:!1,canViewSystemLogs:!1}}),D()):i(pe.message||"Failed to create admin")}catch{i("Network error. Please try again.")}finally{n(!1)}},X=()=>e.createElement("div",{className:"overview-section"},e.createElement("h2",null,"Platform Overview"),m&&e.createElement("div",{className:"stats-grid"},e.createElement("div",{className:"stat-card"},e.createElement(Zi,{className:"stat-icon"}),e.createElement("div",{className:"stat-content"},e.createElement("h3",null,m.stats.leagues.total),e.createElement("p",null,"Total Leagues"))),e.createElement("div",{className:"stat-card"},e.createElement(ml,{className:"stat-icon"}),e.createElement("div",{className:"stat-content"},e.createElement("h3",null,m.stats.operators),e.createElement("p",null,"League Operators"))),e.createElement("div",{className:"stat-card"},e.createElement(F0,{className:"stat-icon"}),e.createElement("div",{className:"stat-content"},e.createElement("h3",null,m.stats.admins),e.createElement("p",null,"Platform Admins"))),e.createElement("div",{className:"stat-card"},e.createElement(B0,{className:"stat-icon"}),e.createElement("div",{className:"stat-content"},e.createElement("h3",null,m.stats.leagues.active),e.createElement("p",null,"Active Leagues")))),e.createElement("div",{className:"quick-actions"},e.createElement("h3",null,"Quick Actions"),e.createElement("div",{className:"action-buttons"},e.createElement("button",{onClick:()=>I(!0),className:"btn-primary"},e.createElement(fr,null)," Create New League"),e.createElement("button",{onClick:()=>N(!0),className:"btn-secondary"},e.createElement(F0,null)," Add League Operator"),e.createElement("button",{onClick:()=>P(!0),className:"btn-secondary"},e.createElement(X2,null)," Add Platform Admin")))),O=()=>e.createElement("div",{className:"leagues-section"},e.createElement("div",{className:"section-header"},e.createElement("h2",null,"League Management"),e.createElement("button",{onClick:()=>I(!0),className:"btn-primary"},e.createElement(fr,null)," Create League")),e.createElement("div",{className:"leagues-grid"},f.map(T=>e.createElement("div",{key:T.leagueId,className:"league-card"},e.createElement("div",{className:"league-header"},e.createElement("h3",null,T.name),e.createElement("span",{className:`status-badge ${T.subscription.status}`},T.subscription.status)),e.createElement("div",{className:"league-details"},e.createElement("p",null,e.createElement("strong",null,"ID:")," ",T.leagueId),e.createElement("p",null,e.createElement("strong",null,"Admin:")," ",T.adminEmail),e.createElement("p",null,e.createElement("strong",null,"Plan:")," ",T.subscription.plan),e.createElement("p",null,e.createElement("strong",null,"Created:")," ",new Date(T.createdAt).toLocaleDateString())),e.createElement("div",{className:"league-actions"},e.createElement("button",{className:"btn-small"},e.createElement(Ti,null)," View Details"),e.createElement("button",{className:"btn-small"},e.createElement(Ri,null)," Edit"),e.createElement("button",{className:"btn-small btn-danger"},e.createElement(Bs,null)," Delete")))))),Q=()=>e.createElement("div",{className:"operators-section"},e.createElement("div",{className:"section-header"},e.createElement("h2",null,"League Operators"),e.createElement("button",{onClick:()=>N(!0),className:"btn-primary"},e.createElement(fr,null)," Add Operator")),e.createElement("div",{className:"operators-grid"},v.map(T=>e.createElement("div",{key:T._id,className:"operator-card"},e.createElement("div",{className:"operator-header"},e.createElement("h3",null,T.firstName," ",T.lastName),e.createElement("span",{className:"status-badge active"},"Active")),e.createElement("div",{className:"operator-details"},e.createElement("p",null,e.createElement("strong",null,"Email:")," ",T.email),e.createElement("p",null,e.createElement("strong",null,"Leagues:")," ",T.assignedLeagues.length),e.createElement("p",null,e.createElement("strong",null,"Last Login:")," ",T.lastLoginAt?new Date(T.lastLoginAt).toLocaleDateString():"Never")),e.createElement("div",{className:"operator-actions"},e.createElement("button",{className:"btn-small"},e.createElement(Ti,null)," View Details"),e.createElement("button",{className:"btn-small"},e.createElement(Ri,null)," Edit"),e.createElement("button",{onClick:()=>R(!0),className:"btn-small"},e.createElement(Nz,null)," Assign League")))))),ne=()=>e.createElement("div",{className:"admins-section"},e.createElement("div",{className:"section-header"},e.createElement("h2",null,"Platform Admins"),e.createElement("button",{onClick:()=>P(!0),className:"btn-primary"},e.createElement(fr,null)," Add Admin")),e.createElement("div",{className:"admins-grid"},w.map(T=>e.createElement("div",{key:T._id,className:"admin-card"},e.createElement("div",{className:"admin-header"},e.createElement("h3",null,T.firstName," ",T.lastName),e.createElement("span",{className:`role-badge ${T.role}`},T.role)),e.createElement("div",{className:"admin-details"},e.createElement("p",null,e.createElement("strong",null,"Email:")," ",T.email),e.createElement("p",null,e.createElement("strong",null,"Role:")," ",T.role),e.createElement("p",null,e.createElement("strong",null,"Last Login:")," ",T.lastLoginAt?new Date(T.lastLoginAt).toLocaleDateString():"Never")),e.createElement("div",{className:"admin-actions"},e.createElement("button",{className:"btn-small"},e.createElement(Ti,null)," View Details"),e.createElement("button",{className:"btn-small"},e.createElement(Ri,null)," Edit"),e.createElement("button",{className:"btn-small btn-danger"},e.createElement(Bs,null)," Delete"))))));return e.createElement("div",{className:"platform-admin-dashboard"},o&&e.createElement("div",{className:"error-message"},e.createElement(df,null)," ",o),c&&e.createElement("div",{className:"success-message"},e.createElement(Qr,null)," ",c),e.createElement("div",{className:"dashboard-header"},e.createElement("h1",null,"Platform Administration"),e.createElement("div",{className:"header-actions"},e.createElement("button",{onClick:D,className:"btn-secondary",disabled:t},t?e.createElement(Zr,{className:"spinner"}):e.createElement(Dz,null)," Refresh"))),e.createElement("div",{className:"dashboard-tabs"},e.createElement("button",{className:`tab ${a==="overview"?"active":""}`,onClick:()=>r("overview")},e.createElement(B0,null)," Overview"),e.createElement("button",{className:`tab ${a==="leagues"?"active":""}`,onClick:()=>r("leagues")},e.createElement(Zi,null)," Leagues"),e.createElement("button",{className:`tab ${a==="operators"?"active":""}`,onClick:()=>r("operators")},e.createElement(ml,null)," Operators"),e.createElement("button",{className:`tab ${a==="admins"?"active":""}`,onClick:()=>r("admins")},e.createElement(X2,null)," Admins")),e.createElement("div",{className:"dashboard-content"},a==="overview"&&X(),a==="leagues"&&O(),a==="operators"&&Q(),a==="admins"&&ne()),e.createElement(Bt,{isOpen:E,onClose:()=>I(!1),title:"Create New League",maxWidth:"600px"},e.createElement("form",{onSubmit:A},e.createElement("div",{className:"form-group"},e.createElement("label",null,"League ID *"),e.createElement("input",{type:"text",value:W.leagueId,onChange:T=>L({...W,leagueId:T.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"-")}),placeholder:"e.g., front-range-pool",required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"League Name *"),e.createElement("input",{type:"text",value:W.name,onChange:T=>L({...W,name:T.target.value}),placeholder:"e.g., Front Range Pool League",required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Description"),e.createElement("textarea",{value:W.description,onChange:T=>L({...W,description:T.target.value}),placeholder:"Brief description of the league"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Admin Email *"),e.createElement("input",{type:"email",value:W.adminEmail,onChange:T=>L({...W,adminEmail:T.target.value}),placeholder:"admin@league.com",required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Admin Name *"),e.createElement("input",{type:"text",value:W.adminName,onChange:T=>L({...W,adminName:T.target.value}),placeholder:"John Doe",required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Assign Operator (Optional)"),e.createElement("input",{type:"email",value:W.operatorEmail,onChange:T=>L({...W,operatorEmail:T.target.value}),placeholder:"operator@league.com"})),e.createElement("div",{className:"form-actions"},e.createElement("button",{type:"button",onClick:()=>I(!1),className:"btn-secondary"},"Cancel"),e.createElement("button",{type:"submit",className:"btn-primary",disabled:t},t?e.createElement(Zr,{className:"spinner"}):"Create League")))),e.createElement(Bt,{isOpen:M,onClose:()=>N(!1),title:"Create League Operator",maxWidth:"500px"},e.createElement("form",{onSubmit:U},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Email *"),e.createElement("input",{type:"email",value:F.email,onChange:T=>j({...F,email:T.target.value}),placeholder:"operator@example.com",required:!0})),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"First Name *"),e.createElement("input",{type:"text",value:F.firstName,onChange:T=>j({...F,firstName:T.target.value}),placeholder:"John",required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Last Name *"),e.createElement("input",{type:"text",value:F.lastName,onChange:T=>j({...F,lastName:T.target.value}),placeholder:"Doe",required:!0}))),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Phone"),e.createElement("input",{type:"tel",value:F.phone,onChange:T=>j({...F,phone:T.target.value}),placeholder:"(555) 123-4567"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Password *"),e.createElement("input",{type:"password",value:F.password,onChange:T=>j({...F,password:T.target.value}),placeholder:"Enter password",required:!0})),e.createElement("div",{className:"form-actions"},e.createElement("button",{type:"button",onClick:()=>N(!1),className:"btn-secondary"},"Cancel"),e.createElement("button",{type:"submit",className:"btn-primary",disabled:t},t?e.createElement(Zr,{className:"spinner"}):"Create Operator")))),e.createElement(Bt,{isOpen:_,onClose:()=>P(!1),title:"Create Platform Admin",maxWidth:"600px"},e.createElement("form",{onSubmit:K},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Email *"),e.createElement("input",{type:"email",value:J.email,onChange:T=>Y({...J,email:T.target.value}),placeholder:"admin@platform.com",required:!0})),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"First Name *"),e.createElement("input",{type:"text",value:J.firstName,onChange:T=>Y({...J,firstName:T.target.value}),placeholder:"Admin",required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Last Name *"),e.createElement("input",{type:"text",value:J.lastName,onChange:T=>Y({...J,lastName:T.target.value}),placeholder:"User",required:!0}))),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Phone"),e.createElement("input",{type:"tel",value:J.phone,onChange:T=>Y({...J,phone:T.target.value}),placeholder:"(555) 123-4567"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Password *"),e.createElement("input",{type:"password",value:J.password,onChange:T=>Y({...J,password:T.target.value}),placeholder:"Enter password",required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Role *"),e.createElement("select",{value:J.role,onChange:T=>Y({...J,role:T.target.value}),required:!0},e.createElement("option",{value:"admin"},"Admin"),e.createElement("option",{value:"support"},"Support"))),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Permissions"),e.createElement("div",{className:"permissions-grid"},Object.entries(J.permissions).map(([T,re])=>e.createElement("label",{key:T,className:"permission-checkbox"},e.createElement("input",{type:"checkbox",checked:re,onChange:G=>Y({...J,permissions:{...J.permissions,[T]:G.target.checked}})}),T.replace(/([A-Z])/g," $1").replace(/^./,G=>G.toUpperCase()))))),e.createElement("div",{className:"form-actions"},e.createElement("button",{type:"button",onClick:()=>P(!1),className:"btn-secondary"},"Cancel"),e.createElement("button",{type:"submit",className:"btn-primary",disabled:t},t?e.createElement(Zr,{className:"spinner"}):"Create Admin")))),e.createElement("style",{jsx:!0},`
        .platform-admin-dashboard {
          padding: 20px;
          max-width: 1200px;
          margin: 0 auto;
        }

        .dashboard-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 30px;
          padding-bottom: 20px;
          border-bottom: 2px solid #e0e0e0;
        }

        .dashboard-tabs {
          display: flex;
          gap: 10px;
          margin-bottom: 30px;
          border-bottom: 1px solid #e0e0e0;
        }

        .tab {
          padding: 12px 24px;
          border: none;
          background: none;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 8px;
          border-bottom: 3px solid transparent;
          transition: all 0.3s ease;
        }

        .tab.active {
          border-bottom-color: #007bff;
          color: #007bff;
        }

        .tab:hover {
          background: #f8f9fa;
        }

        .stats-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 20px;
          margin-bottom: 30px;
        }

        .stat-card {
          background: white;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.1);
          display: flex;
          align-items: center;
          gap: 15px;
        }

        .stat-icon {
          font-size: 2rem;
          color: #007bff;
        }

        .stat-content h3 {
          margin: 0;
          font-size: 2rem;
          color: #333;
        }

        .stat-content p {
          margin: 5px 0 0 0;
          color: #666;
        }

        .quick-actions {
          background: white;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .action-buttons {
          display: flex;
          gap: 15px;
          flex-wrap: wrap;
        }

        .section-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 20px;
        }

        .leagues-grid,
        .operators-grid,
        .admins-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
          gap: 20px;
        }

        .league-card,
        .operator-card,
        .admin-card {
          background: white;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .league-header,
        .operator-header,
        .admin-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 15px;
        }

        .status-badge,
        .role-badge {
          padding: 4px 8px;
          border-radius: 4px;
          font-size: 0.8rem;
          font-weight: 500;
        }

        .status-badge.active { background: #d4edda; color: #155724; }
        .status-badge.trial { background: #fff3cd; color: #856404; }
        .status-badge.expired { background: #f8d7da; color: #721c24; }

        .role-badge.admin { background: #cce5ff; color: #004085; }
        .role-badge.support { background: #d1ecf1; color: #0c5460; }

        .league-details,
        .operator-details,
        .admin-details {
          margin-bottom: 15px;
        }

        .league-details p,
        .operator-details p,
        .admin-details p {
          margin: 5px 0;
          font-size: 0.9rem;
        }

        .league-actions,
        .operator-actions,
        .admin-actions {
          display: flex;
          gap: 10px;
          flex-wrap: wrap;
        }

        .btn-primary,
        .btn-secondary,
        .btn-small {
          padding: 10px 20px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 8px;
          font-size: 0.9rem;
          transition: all 0.3s ease;
        }

        .btn-primary {
          background: #007bff;
          color: white;
        }

        .btn-primary:hover:not(:disabled) {
          background: #0056b3;
        }

        .btn-secondary {
          background: #6c757d;
          color: white;
        }

        .btn-secondary:hover:not(:disabled) {
          background: #545b62;
        }

        .btn-small {
          padding: 6px 12px;
          font-size: 0.8rem;
        }

        .btn-danger {
          background: #dc3545;
          color: white;
        }

        .btn-danger:hover {
          background: #c82333;
        }

        .btn-primary:disabled,
        .btn-secondary:disabled {
          background: #ccc;
          cursor: not-allowed;
        }

        .form-group {
          margin-bottom: 15px;
        }

        .form-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 15px;
        }

        .form-group label {
          display: block;
          margin-bottom: 5px;
          font-weight: 500;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
          width: 100%;
          padding: 10px;
          border: 1px solid #ddd;
          border-radius: 4px;
          font-size: 14px;
        }

        .permissions-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 10px;
        }

        .permission-checkbox {
          display: flex;
          align-items: center;
          gap: 8px;
          font-size: 0.9rem;
        }

        .form-actions {
          display: flex;
          gap: 15px;
          justify-content: flex-end;
          margin-top: 20px;
          padding-top: 20px;
          border-top: 1px solid #e0e0e0;
        }

        .error-message,
        .success-message {
          padding: 10px;
          margin-bottom: 20px;
          border-radius: 4px;
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .error-message {
          background: #fee;
          color: #c33;
          border: 1px solid #fcc;
        }

        .success-message {
          background: #efe;
          color: #363;
          border: 1px solid #cfc;
        }

        .spinner {
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
          .dashboard-header {
            flex-direction: column;
            gap: 15px;
            align-items: stretch;
          }

          .dashboard-tabs {
            flex-wrap: wrap;
          }

          .tab {
            flex: 1;
            min-width: 120px;
          }

          .stats-grid {
            grid-template-columns: 1fr;
          }

          .leagues-grid,
          .operators-grid,
          .admins-grid {
            grid-template-columns: 1fr;
          }

          .action-buttons {
            flex-direction: column;
          }

          .form-row {
            grid-template-columns: 1fr;
          }

          .permissions-grid {
            grid-template-columns: 1fr;
          }
        }
      `))}const bW="_simplePoolGame_1kwr6_1",vW="_tableContainer_1kwr6_11",EW="_tableCanvas_1kwr6_22",xW="_aimingInstructions_1kwr6_35",wW="_instructions_1kwr6_47",SW="_controls_1kwr6_52",CW="_shootButton_1kwr6_70",NW="_buttonRow_1kwr6_105",_W="_resetAimButton_1kwr6_111",kW="_powerControl_1kwr6_145",IW="_gameInfo_1kwr6_274",MW="_resetButton_1kwr6_291",AW="_pushOutModal_1kwr6_710",DW="_pushOutContent_1kwr6_723",RW="_pushOutButtons_1kwr6_762",TW="_acceptButton_1kwr6_768",PW="_declineButton_1kwr6_769",Ua={simplePoolGame:bW,tableContainer:vW,tableCanvas:EW,aimingInstructions:xW,instructions:wW,controls:SW,shootButton:CW,buttonRow:NW,resetAimButton:_W,powerControl:kW,gameInfo:IW,resetButton:MW,pushOutModal:AW,pushOutContent:DW,pushOutButtons:RW,acceptButton:TW,declineButton:PW},zs={BREAK:"break",PLAY:"play"};function bs(a){return a===zs.BREAK}function Xh(a){return a===zs.PLAY}function LW(a,r){return a===zs.BREAK&&r?zs.PLAY:a}function BW(a,r){return a===zs.BREAK&&r}function nx(a,r){return a===zs.PLAY&&r}const zW="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHllbGxvdyAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGwxTWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZmZlYjNiIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZkZDgzNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNmNTdmMTciLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2U2NTEwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDFIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmOWM0IiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsMVNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsMVNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsMU1haW4pIiBzdHJva2U9IiNlNjUxMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGwxSGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsMVNwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgMSAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzAwMDAwMCI+MTwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGwxU2hhZG93KSIvPg0KPC9zdmc+IA==",OW="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGJsdWUgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsMk1haW4iIGN4PSIzMCUiIGN5PSIzMCUiIHI9IjcwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjOTBjYWY5Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjI1JSIgc3RvcC1jb2xvcj0iIzQyYTVmNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiMyMTk2ZjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNzUlIiBzdG9wLWNvbG9yPSIjMTk3NmQyIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwZDQ3YTEiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICAgIA0KICAgIDwhLS0gSGlnaGxpZ2h0IGZvciBkZXB0aCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGwySGlnaGxpZ2h0IiBjeD0iMjUlIiBjeT0iMjUlIiByPSI0NSUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2JiZGVmYiIgc3RvcC1vcGFjaXR5PSIwLjkiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjOTBjYWY5IiBzdG9wLW9wYWNpdHk9IjAuNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjOTBjYWY5IiBzdG9wLW9wYWNpdHk9IjAiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICAgIA0KICAgIDwhLS0gU3BlY3VsYXIgaGlnaGxpZ2h0IC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDJTcGVjdWxhciIgY3g9IjQwJSIgY3k9IjQwJSIgcj0iMjAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIiBzdG9wLW9wYWNpdHk9IjAuOCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICAgIA0KICAgIDwhLS0gU2hhZG93IGdyYWRpZW50IC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDJTaGFkb3ciIGN4PSI3MCUiIGN5PSI3MCUiIHI9IjMwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIiBzdG9wLW9wYWNpdHk9IjAuMyIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIiBzdG9wLW9wYWNpdHk9IjAiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICA8L2RlZnM+DQogIA0KICA8IS0tIE1haW4gYmFsbCAtLT4NCiAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDJNYWluKSIgc3Ryb2tlPSIjMGQ0N2ExIiBzdHJva2Utd2lkdGg9IjAuNSIvPg0KICANCiAgPCEtLSBQcmltYXJ5IGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iNSIgZmlsbD0idXJsKCNiYWxsMkhpZ2hsaWdodCkiLz4NCiAgDQogIDwhLS0gU3BlY3VsYXIgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxNCIgY3k9IjE0IiByPSIyLjUiIGZpbGw9InVybCgjYmFsbDJTcGVjdWxhcikiLz4NCiAgDQogIDwhLS0gTnVtYmVyIDIgLSBtdWNoIGxhcmdlciBhbmQgbW9yZSB2aXNpYmxlIC0tPg0KICA8dGV4dCB4PSIxNiIgeT0iMjIiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiNmZmZmZmYiPjI8L3RleHQ+DQogIA0KICA8IS0tIFN1YnRsZSBzaGFkb3cgZm9yIGRlcHRoIC0tPg0KICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjE4IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsMlNoYWRvdykiLz4NCjwvc3ZnPiA=",FW="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHJlZCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGwzTWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmNkZDIiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZjQ0MzM2Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2QzMmYyZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNiNzFjMWMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzhlMDAwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDNIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZlYmVlIiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmNkZDIiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmNkZDIiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsM1NwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsM1NoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsM01haW4pIiBzdHJva2U9IiM4ZTAwMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGwzSGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsM1NwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgMyAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iI2ZmZmZmZiI+MzwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGwzU2hhZG93KSIvPg0KPC9zdmc+IA==",WW="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHB1cnBsZSAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw0TWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNlMWJlZTciLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjYWI0N2JjIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzljMjdiMCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiM3YjFmYTIiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzRhMTQ4YyIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDRIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZjNlNWY1IiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNlMWJlZTciIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlMWJlZTciIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNFNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNFNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsNE1haW4pIiBzdHJva2U9IiM0YTE0OGMiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGw0SGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsNFNwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgNCAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iI2ZmZmZmZiI+NDwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw0U2hhZG93KSIvPg0KPC9zdmc+IA==",UW="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIG9yYW5nZSAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw1TWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmUwYjIiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZmY5ODAwIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2Y1N2MwMCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNlZjZjMDAiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2U2NTEwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDVIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmM2UwIiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmUwYjIiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmUwYjIiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNVNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNVNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsNU1haW4pIiBzdHJva2U9IiNlNjUxMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGw1SGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsNVNwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgNSAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzAwMDAwMCI+NTwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw1U2hhZG93KSIvPg0KPC9zdmc+IA==",$W="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGdyZWVuIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDZNYWluIiBjeD0iMzAlIiBjeT0iMzAlIiByPSI3MCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2M4ZTZjOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIyNSUiIHN0b3AtY29sb3I9IiM2NmJiNmEiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjNGNhZjUwIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9Ijc1JSIgc3RvcC1jb2xvcj0iIzM4OGUzYyIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMWI1ZTIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIEhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNkhpZ2hsaWdodCIgY3g9IjI1JSIgY3k9IjI1JSIgcj0iNDUlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNlOGY1ZTgiIHN0b3Atb3BhY2l0eT0iMC45Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2M4ZTZjOSIgc3RvcC1vcGFjaXR5PSIwLjUiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2M4ZTZjOSIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw2U3BlY3VsYXIiIGN4PSI0MCUiIGN5PSI0MCUiIHI9IjIwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNoYWRvdyBncmFkaWVudCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw2U2hhZG93IiBjeD0iNzAlIiBjeT0iNzAlIiByPSIzMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgPC9kZWZzPg0KICANCiAgPCEtLSBNYWluIGJhbGwgLS0+DQogIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw2TWFpbikiIHN0cm9rZT0iIzFiNWUyMCIgc3Ryb2tlLXdpZHRoPSIwLjUiLz4NCiAgDQogIDwhLS0gUHJpbWFyeSBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjUiIGZpbGw9InVybCgjYmFsbDZIaWdobGlnaHQpIi8+DQogIA0KICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMi41IiBmaWxsPSJ1cmwoI2JhbGw2U3BlY3VsYXIpIi8+DQogIA0KICA8IS0tIE51bWJlciA2IC0gbXVjaCBsYXJnZXIgYW5kIG1vcmUgdmlzaWJsZSAtLT4NCiAgPHRleHQgeD0iMTYiIHk9IjIyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjZmZmZmZmIj42PC90ZXh0Pg0KICANCiAgPCEtLSBTdWJ0bGUgc2hhZG93IGZvciBkZXB0aCAtLT4NCiAgPGNpcmNsZSBjeD0iMTgiIGN5PSIxOCIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDZTaGFkb3cpIi8+DQo8L3N2Zz4g",jW="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGJyb3duIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDdNYWluIiBjeD0iMzAlIiBjeT0iMzAlIiByPSI3MCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2Q3Y2NjOCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIyNSUiIHN0b3AtY29sb3I9IiNhMTg4N2YiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjOGQ2ZTYzIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9Ijc1JSIgc3RvcC1jb2xvcj0iIzZkNGM0MSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjM2UyNzIzIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIEhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsN0hpZ2hsaWdodCIgY3g9IjI1JSIgY3k9IjI1JSIgcj0iNDUlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNlZmViZTkiIHN0b3Atb3BhY2l0eT0iMC45Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2Q3Y2NjOCIgc3RvcC1vcGFjaXR5PSIwLjUiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2Q3Y2NjOCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw3U3BlY3VsYXIiIGN4PSI0MCUiIGN5PSI0MCUiIHI9IjIwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNoYWRvdyBncmFkaWVudCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw3U2hhZG93IiBjeD0iNzAlIiBjeT0iNzAlIiByPSIzMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgPC9kZWZzPg0KICANCiAgPCEtLSBNYWluIGJhbGwgLS0+DQogIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw3TWFpbikiIHN0cm9rZT0iIzNlMjcyMyIgc3Ryb2tlLXdpZHRoPSIwLjUiLz4NCiAgDQogIDwhLS0gUHJpbWFyeSBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjUiIGZpbGw9InVybCgjYmFsbDdIaWdobGlnaHQpIi8+DQogIA0KICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMi41IiBmaWxsPSJ1cmwoI2JhbGw3U3BlY3VsYXIpIi8+DQogIA0KICA8IS0tIE51bWJlciA3IC0gbXVjaCBsYXJnZXIgYW5kIG1vcmUgdmlzaWJsZSAtLT4NCiAgPHRleHQgeD0iMTYiIHk9IjIyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjZmZmZmZmIj43PC90ZXh0Pg0KICANCiAgPCEtLSBTdWJ0bGUgc2hhZG93IGZvciBkZXB0aCAtLT4NCiAgPGNpcmNsZSBjeD0iMTgiIGN5PSIxOCIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDdTaGFkb3cpIi8+DQo8L3N2Zz4g",lS="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGJsYWNrIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDhNYWluIiBjeD0iMzAlIiBjeT0iMzAlIiByPSI3MCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzQyNDI0MiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIyNSUiIHN0b3AtY29sb3I9IiMyMTIxMjEiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9Ijc1JSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIEhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsOEhpZ2hsaWdodCIgY3g9IjI1JSIgY3k9IjI1JSIgcj0iNDUlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiM3NTc1NzUiIHN0b3Atb3BhY2l0eT0iMC45Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzQyNDI0MiIgc3RvcC1vcGFjaXR5PSIwLjUiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzQyNDI0MiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw4U3BlY3VsYXIiIGN4PSI0MCUiIGN5PSI0MCUiIHI9IjIwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNoYWRvdyBncmFkaWVudCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw4U2hhZG93IiBjeD0iNzAlIiBjeT0iNzAlIiByPSIzMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgPC9kZWZzPg0KICANCiAgPCEtLSBNYWluIGJhbGwgLS0+DQogIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw4TWFpbikiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIwLjUiLz4NCiAgDQogIDwhLS0gUHJpbWFyeSBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjUiIGZpbGw9InVybCgjYmFsbDhIaWdobGlnaHQpIi8+DQogIA0KICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMi41IiBmaWxsPSJ1cmwoI2JhbGw4U3BlY3VsYXIpIi8+DQogIA0KICA8IS0tIE51bWJlciA4IC0gbXVjaCBsYXJnZXIgYW5kIG1vcmUgdmlzaWJsZSAtLT4NCiAgPHRleHQgeD0iMTYiIHk9IjIyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjZmZmZmZmIj44PC90ZXh0Pg0KICANCiAgPCEtLSBTdWJ0bGUgc2hhZG93IGZvciBkZXB0aCAtLT4NCiAgPGNpcmNsZSBjeD0iMTgiIGN5PSIxOCIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDhTaGFkb3cpIi8+DQo8L3N2Zz4g",HW="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHllbGxvdyAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw5TWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZmZlYjNiIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZkZDgzNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNmNTdmMTciLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2U2NTEwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDlIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmOWM0IiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsOVNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsOVNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBXaGl0ZSBzdHJpcGUgZ3JhZGllbnQgLS0+DQogICAgPGxpbmVhckdyYWRpZW50IGlkPSJiYWxsOVN0cmlwZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmOGY4ZjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgIDwvbGluZWFyR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsOU1haW4pIiBzdHJva2U9IiNlNjUxMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFJlYWxpc3RpYyBjdXJ2ZWQgd2hpdGUgc3RyaXBlIC0tPg0KICA8cGF0aCBkPSJNIDQgOCBBIDggOCAwIDAgMSAxMiA4IEwgMTIgMjQgQSA4IDggMCAwIDEgNCAyNCBaIiBmaWxsPSJ1cmwoI2JhbGw5U3RyaXBlKSIvPg0KICANCiAgPCEtLSBQcmltYXJ5IGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iNSIgZmlsbD0idXJsKCNiYWxsOUhpZ2hsaWdodCkiLz4NCiAgDQogIDwhLS0gU3BlY3VsYXIgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxNCIgY3k9IjE0IiByPSIyLjUiIGZpbGw9InVybCgjYmFsbDlTcGVjdWxhcikiLz4NCiAgDQogIDwhLS0gTnVtYmVyIDkgLSBtdWNoIGxhcmdlciBhbmQgbW9yZSB2aXNpYmxlIC0tPg0KICA8dGV4dCB4PSIxNiIgeT0iMjIiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMwMDAwMDAiPjk8L3RleHQ+DQogIA0KICA8IS0tIFN1YnRsZSBzaGFkb3cgZm9yIGRlcHRoIC0tPg0KICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjE4IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsOVNoYWRvdykiLz4NCjwvc3ZnPiA=",Da=600,Ja=300,Dt=15,Pt=Dt/2,$r=1.3,wi=.9,id=30,Kh=160,cd=24.5,e0=270.18,rx=Da*.75,ox=Ja/2,t0=Pt*.1,lx=.7,sx=.45,ix=.05,km=.99,Wl=.75,Ul=.75,jr=.95,$l=.3,YW=.8,rn=(...a)=>{},W0=({onGameEnd:a})=>{const r=h.useRef(null),[t,n]=h.useState({balls:[],cueBall:{x:100,y:150,originalX:100,originalY:150,vx:0,vy:0,visible:!0,isMoving:!1,rotation:0,rotationSpeed:0,spinX:0,spinY:0},isAnimating:!1,currentPlayer:1,gamePhase:zs.BREAK,ballInHand:!1,scratchOccurred:!1}),[o,i]=h.useState(!1),[c,u]=h.useState({x:0,y:0}),[m,g]=h.useState(0),[f,y]=h.useState(.5),[v,S]=h.useState(0),[w,x]=h.useState(0),[k,E]=h.useState(!0),[I,M]=h.useState(null),[N,_]=h.useState(null),[P,B]=h.useState(null),[R,W]=h.useState(!1),[L,F]=h.useState(!1),[j,J]=h.useState(0),[Y,D]=h.useState(!1),[A,U]=h.useState(null),[K,X]=h.useState(null),[O,Q]=h.useState(!1),[ne,T]=h.useState(!1),[re,G]=h.useState(!1),[se,pe]=h.useState(!1),[Se,at]=h.useState(!1),[be,Je]=h.useState(!1),[nt,Xe]=h.useState(null),[ct,Ot]=h.useState(!1),[Zt,ft]=h.useState({1:0,2:0}),[Ft,ra]=h.useState(null),[Wt,he]=h.useState(null),[bt,$]=h.useState(!1),[ye,V]=h.useState(null),[ce,ze]=h.useState(!1),[Re,Fe]=h.useState(!1),[We,tt]=h.useState(!1),[me,Ce]=h.useState(!1),[_e,Qe]=h.useState(null),[qe,He]=h.useState(0),[st,Mt]=h.useState([]),[Jt,Yt]=h.useState(!1),ua=h.useRef(null),ma={cue:x5,1:zW,2:OW,3:FW,4:WW,5:UW,6:$W,7:jW,8:lS,9:HW,10:Xi},Oa=h.useRef({}),Pa=h.useRef(null),ln=h.useRef(null),Fa=[{x:30,y:24.5,id:"top-left"},{x:570.77,y:24.5,id:"top-right"},{x:30,y:270.18,id:"bottom-left"},{x:570.77,y:270.18,id:"bottom-right"},{x:300.385,y:24.5,id:"top-center"},{x:300.385,y:270.18,id:"bottom-center"}],cr=h.useCallback(le=>{if(!ne)return;const H=r.current.getBoundingClientRect(),ke=H.width/Da,Ne=(le.clientX-H.left)/ke,Le=(le.clientY-H.top)/ke,et=t.balls.find(pt=>pt.visible&&!pt.pocketed&&Math.sqrt((pt.x-Ne)**2+(pt.y-Le)**2)<Pt*1.5);if(et){U(et.id);return}const ot=Fa.find(pt=>Math.sqrt((pt.x-Ne)**2+(pt.y-Le)**2)<60);if(ot){X(ot.id);return}},[ne,t.balls,Fa]),Rr=h.useCallback((le,H)=>{const pt=[{x:30,y:24.5,id:"top-left"},{x:570.77,y:24.5,id:"top-right"},{x:30,y:270.18,id:"bottom-left"},{x:570.77,y:270.18,id:"bottom-right"},{x:300.385,y:24.5,id:"top-center"},{x:300.385,y:270.18,id:"bottom-center"}];let Rt=null,xt=1/0;return pt.forEach(zt=>{const Nt=Math.hypot(le-zt.x,H-zt.y);Nt<xt&&(xt=Nt,Rt=zt)}),Rt?Rt.id:null},[]),hn=h.useCallback(le=>{const ot=[{x:30,y:24.5,margin:Dt*$r,type:"corner"},{x:570.77,y:24.5,margin:Dt*$r,type:"corner"},{x:30,y:270.18,margin:Dt*$r,type:"corner"},{x:570.77,y:270.18,margin:Dt*$r,type:"corner"},{x:300.385,y:24.5,margin:Dt*wi,type:"side"},{x:300.385,y:270.18,margin:Dt*wi,type:"side"}],pt=le.x,Rt=le.y,xt=le.vx??0,zt=le.vy??0,Nt=Math.hypot(xt,zt);return ot.some(lt=>{const Ie=lt.x-pt,Ve=lt.y-Rt,ut=Math.hypot(Ie,Ve);if(ut>=lt.margin+t0)return!1;if(Nt>0){const yt=(xt*Ie+zt*Ve)/(Nt*(ut||1)),ta=lt.type==="side"?lx:sx,pa=(xt*Ie+zt*Ve)/(ut||1);if(yt<ta||pa<ix)return!1}return!0})},[]),Xt=h.useCallback((le,H)=>le>=id&&le<=Kh&&H>=cd&&H<=e0,[]);h.useCallback(()=>{n(le=>({...le,scratchOccurred:!0,ballInHand:!0,currentPlayer:le.currentPlayer===1?2:1,cueBall:{...le.cueBall,x:100,y:150,vx:0,vy:0,visible:!0,isMoving:!1,rotation:0,rotationSpeed:0}}))},[]);const ga=h.useCallback(()=>{const le=t.balls.filter(ke=>ke.visible&&!ke.pocketed);if(rn("Visible balls on table:",le.map(ke=>ke.id).sort((ke,Ne)=>ke-Ne)),le.length===0)return null;const H=le.reduce((ke,Ne)=>Ne.id<ke.id?Ne:ke);return rn("Lowest numbered ball:",H.id),H},[t.balls]),Nn=h.useCallback(()=>{if(re)return null;const le=ye||ga();let H=null;if(t.cueBall.visible||(H="scratch"),t.gamePhase==="break"){Wt&&Wt!==1&&(H="break_wrong_ball_first");const ke=t.balls.filter(Le=>Le.pocketed&&!Le.wasPocketedBeforeShot),Ne=qe;ke.length===0&&Ne<4&&(H="break_insufficient_cushions")}return!H&&Wt&&le&&Wt!==le.id&&(rn("Wrong ball first foul - Hit:",Wt,"Lowest:",le.id),rn("Visible balls on table:",t.balls.filter(ke=>ke.visible&&!ke.pocketed).map(ke=>ke.id).sort((ke,Ne)=>ke-Ne)),H="wrong_ball_first"),!H&&!Re&&!re&&t.gamePhase!=="break"&&(H="no_contact"),!H&&Re&&!bt&&t.balls.filter(Ne=>Ne.pocketed&&!Ne.wasPocketedBeforeShot).length===0&&(H="no_rail_contact"),rn("Current lowest ball:",le?le.id:"none"),H},[re,Wt,bt,Re,ga,t.balls,ye,t.cueBall.visible,t.gamePhase,qe]),dr=h.useCallback(()=>{if(t.gamePhase==="break"||re)return[];const le=t.balls.filter(ke=>ke.pocketed&&!ke.wasPocketedBeforeShot);if(le.length===0)return[];const H=[];return le.forEach(ke=>{if(ke.id===A)ke.pocketedPocket!==K&&(rn("Illegally pocketed ball:",ke.id,"- called ball went in wrong pocket"),H.push(ke));else{const Ne=le.find(Le=>Le.id===A);(!Ne||Ne.pocketedPocket!==K)&&(rn("Illegally pocketed ball:",ke.id,"- not called ball and called ball not legally pocketed"),H.push(ke))}}),H},[t.gamePhase,re,A,K,t.balls]),gr=h.useCallback(le=>{const H=_e||t.currentPlayer;window.dispatchEvent(new CustomEvent("gameFoul",{detail:{foulType:le,player:H}})),le==="scratch"?window.dispatchEvent(new CustomEvent("scratchFoul",{detail:{player:H}})):le==="wrong_ball_first"?window.dispatchEvent(new CustomEvent("wrongBallFoul",{detail:{player:H}})):le==="no_rail_contact"&&window.dispatchEvent(new CustomEvent("noRailFoul",{detail:{player:H}})),window.dispatchEvent(new CustomEvent("ballInHand",{detail:{player:H}})),ft(ke=>{const Ne={...ke,[H]:ke[H]+1};return Ne[H]>=3&&(window.dispatchEvent(new CustomEvent("threeFoul",{detail:{player:H}})),alert(`Player ${H} loses due to 3 consecutive fouls!`)),Ne}),n(ke=>({...ke,ballInHand:!0,currentPlayer:ke.currentPlayer===1?2:1,scratchOccurred:le==="scratch"})),le==="scratch"&&n(ke=>({...ke,cueBall:{...ke.cueBall,visible:!0,x:100,y:150,vx:0,vy:0}})),ra(le)},[t.currentPlayer,_e]),_n=h.useCallback((le,H)=>{const ke=t.cueBall;return Math.hypot(le-ke.x,H-ke.y)<=Pt},[t.cueBall]),Z=h.useCallback((le,H)=>{(t.ballInHand||t.gamePhase==="break")&&_n(le,H)&&(i(!0),u({x:le-t.cueBall.x,y:H-t.cueBall.y}))},[t.ballInHand,t.gamePhase,t.cueBall,_n]),Pe=h.useCallback((le,H)=>{if(o){const ke=le-c.x,Ne=H-c.y;let Le,et;t.gamePhase==="break"?(Le=Math.max(id+Pt,Math.min(Kh-Pt,ke)),et=Math.max(cd+Pt,Math.min(e0-Pt,Ne))):(Le=Math.max(30+Pt,Math.min(570.77-Pt,ke)),et=Math.max(24.5+Pt,Math.min(270.18-Pt,Ne))),n(ot=>({...ot,cueBall:{...ot.cueBall,x:Le,y:et}}))}},[o,c,t.gamePhase]),Ke=h.useCallback(()=>{o&&i(!1)},[o]);h.useCallback((le,H)=>{Xt(le,H)&&n(ke=>({...ke,cueBall:{...ke.cueBall,x:le,y:H,vx:0,vy:0,visible:!0,isMoving:!1},ballInHand:!1}))},[Xt]),h.useCallback((le,H)=>{let ke=null,Ne=1/0;return Fa.forEach(Le=>{const et=Math.hypot(le-Le.x,H-Le.y);et<Ne&&(Ne=et,ke=Le)}),ke},[]);const mt=h.useCallback((le,H,ke,Ne)=>{const Le=le-ke,et=H-Ne,ot=Math.sqrt(Le*Le+et*et);if(ot<Pt*2)return null;const pt=le-Le/ot*(Pt*2),Rt=H-et/ot*(Pt*2);return{x:pt,y:Rt}},[]);function Kt(le,H){return le>=15&&le<=30&&H>=Ja-75&&H<=Ja-60}function ba(le,H,ke,Ne,Le){nx(Le,Ne)&&(le.fillStyle="rgba(255, 215, 0, 0.2)",le.fillRect(10,H-80,200,25),le.strokeStyle="rgba(255, 215, 0, 0.5)",le.lineWidth=1,le.strokeRect(10,H-80,200,25),le.fillStyle="rgba(255, 215, 0, 0.9)",le.font="12px Arial",le.textAlign="left",le.fillText("Push Out Available",15,H-65),le.fillStyle=ke?"rgba(255, 215, 0, 0.9)":"rgba(255, 255, 255, 0.3)",le.fillRect(15,H-75,15,15),le.strokeStyle="rgba(255, 215, 0, 0.8)",le.lineWidth=2,le.strokeRect(15,H-75,15,15),ke&&(le.fillStyle="rgba(255, 215, 0, 0.9)",le.font="bold 16px Arial",le.textAlign="center",le.fillText("✓",22,H-65)))}function La(le,H){le.setLineDash([]),le.beginPath(),le.moveTo(H[0].x,H[0].y);for(let ke=1;ke<H.length;ke++){const Ne=H[ke];le.lineTo(Ne.x,Ne.y)}le.stroke()}function sa(le){let H="rgba(255, 255, 255, 0.8)";R?H="rgba(0, 255, 0, 0.95)":L&&(H="rgba(255, 255, 0, 0.9)"),Math.abs(v)>.1&&(v>0?H="rgba(76, 175, 80, 0.9)":H="rgba(244, 67, 54, 0.9)"),le.strokeStyle=H,le.lineWidth=R?4:L?2:3,le.setLineDash([]),le.globalAlpha=.9}function tr(le){const H=Da*.3,ke=Da*.5*le;return H+ke}function qn(le,H){let ke=le-H;for(;ke>Math.PI;)ke-=Math.PI*2;for(;ke<-Math.PI;)ke+=Math.PI*2;return ke}const Ra=h.useCallback((le,H)=>{const pt=[{x:30,y:24.5,id:"top-left"},{x:570.77,y:24.5,id:"top-right"},{x:30,y:270.18,id:"bottom-left"},{x:570.77,y:270.18,id:"bottom-right"},{x:300.385,y:24.5,id:"top-center"},{x:300.385,y:270.18,id:"bottom-center"}];let Rt=null,xt=1/0;if(pt.forEach(zt=>{const Nt=Math.hypot(le-zt.x,H-zt.y);Nt<xt&&(xt=Nt,Rt=zt)}),Rt&&xt<80){const zt=Math.max(0,(80-xt)/80),Nt=le+(Rt.x-le)*zt*.3,lt=H+(Rt.y-H)*zt*.3;return{x:Nt,y:lt,assisted:!0}}return{x:le,y:H,assisted:!1}},[]),En=h.useCallback((le,H,ke=null,Ne={})=>{const{ignoreCuePocket:Le=!0}=Ne,et={},ot=.99,pt=16,Rt=30.77,xt=570.77,zt=24.5,Nt=270.18,lt={1:"#ffff00",2:"#0000ff",3:"#ff0000",4:"#800080",5:"#ffa500",6:"#008000",7:"#8b4513",8:"#000000",9:"#ffff00",10:"#ff0000"};return(()=>{const Ve=new Map;t.balls.forEach(yt=>{yt.visible&&!yt.pocketed&&Ve.set(yt.id,{id:yt.id,x:yt.x,y:yt.y,vx:0,vy:0,visible:!0,isMoving:!1,trajectory:[{x:yt.x,y:yt.y}]})});const ut=ke||t.cueBall;Ve.set("cue",{id:"cue",x:ut.x,y:ut.y,vx:le,vy:H,visible:!0,isMoving:!0,trajectory:[{x:ut.x,y:ut.y}]});for(let yt=0;yt<300;yt++){const ta=Array.from(Ve.values()).filter(la=>la.visible);for(let la=0;la<pt;la++)ta.forEach(vt=>{if(Math.abs(vt.vx)<.03&&Math.abs(vt.vy)<.03){vt.vx=0,vt.vy=0;return}vt.vx*=Math.pow(ot,1/pt),vt.vy*=Math.pow(ot,1/pt);let Ea=vt.x+vt.vx/pt,_a=vt.y+vt.vy/pt,sn=!1;Ea<Rt+Pt?(vt.x=Rt+Pt,vt.vx=Math.abs(vt.vx)*.85,sn=!0):Ea>xt-Pt?(vt.x=xt-Pt,vt.vx=-Math.abs(vt.vx)*.8,sn=!0):vt.x=Ea,_a<zt+Pt?(vt.y=zt+Pt,vt.vy=Math.abs(vt.vy)*.85,sn=!0):_a>Nt-Pt?(vt.y=Nt-Pt,vt.vy=-Math.abs(vt.vy)*.8,sn=!0):vt.y=_a;let Zn=!1;const Va=(Rt+xt)/2,Wa=[{x:Rt,y:zt,margin:Dt*$r},{x:xt,y:zt,margin:Dt*$r},{x:Rt,y:Nt,margin:Dt*$r},{x:xt,y:Nt,margin:Dt*$r},{x:Va,y:zt,margin:Dt*wi},{x:Va,y:Nt,margin:Dt*wi}],In=vt.x,Mn=vt.y,An=vt.vx??0,hr=vt.vy??0,cn=Math.hypot(An,hr);let en=!1;if(Le||(en=Wa.some(ar=>{const yr=ar.x-In,ao=ar.y-Mn,dn=Math.hypot(yr,ao),no=ar.margin+t0;if(dn>=no)return!1;if(cn>0){const pl=(An*yr+hr*ao)/(cn*(dn||1)),Po=ar.x===Va?lx:sx,Us=(An*yr+hr*ao)/(dn||1);if(pl<Po||Us<ix)return!1}return!0})),en&&!(Le&&vt.id==="cue")&&(Zn=!0),!Zn&&vt.id!=="cue"){const ar=Ra(vt.x,vt.y);if(ar.assisted){const yr=ar.x-vt.x,ao=ar.y-vt.y;Math.sqrt(yr*yr+ao*ao)<5&&(Zn=!0)}}if(Zn){vt.visible=!1,vt.trajectory.push({x:vt.x,y:vt.y,pocketed:!0});return}vt.isMoving&&Math.abs(vt.vx)<.03&&Math.abs(vt.vy)<.03&&(vt.vx=0,vt.vy=0,vt.isMoving=!1),vt.trajectory.push({x:vt.x,y:vt.y,bounced:sn})});const pa=Ve.get("cue");pa&&pa.visible&&Ve.forEach((la,vt)=>{if(vt!=="cue"&&la.visible){const Ea=la.x-pa.x,_a=la.y-pa.y,sn=Math.sqrt(Ea*Ea+_a*_a);if(sn>0&&sn<Dt+.5){const Zn=Dt-sn+.01,Va=Ea/sn,Wa=_a/sn,In=Math.max(Zn/2,.1);pa.x-=Va*In,pa.y-=Wa*In,la.x+=Va*In,la.y+=Wa*In;const Mn=pa.vx-la.vx,An=pa.vy-la.vy,cn=-(Mn*Va+An*Wa)||.01;pa.vx+=cn*Va,pa.vy+=cn*Wa,la.vx-=cn*Va,la.vy-=cn*Wa,pa.trajectory.length>0&&(pa.trajectory[pa.trajectory.length-1].collision=!0),la.trajectory.length>0&&(la.trajectory[la.trajectory.length-1].collision=!0)}}});const Gn=Array.from(Ve.values()).filter(la=>la.id!=="cue"&&la.visible);for(let la=0;la<Gn.length;la++)for(let vt=la+1;vt<Gn.length;vt++){const Ea=Gn[la],_a=Gn[vt],sn=_a.x-Ea.x,Zn=_a.y-Ea.y,Va=Math.sqrt(sn*sn+Zn*Zn);if(Va>0&&Va<Dt){const Wa=Dt-Va+.01,In=sn/Va,Mn=Zn/Va;Ea.x-=In*(Wa/2),Ea.y-=Mn*(Wa/2),_a.x+=In*(Wa/2),_a.y+=Mn*(Wa/2);const An=Ea.vx-_a.vx,hr=Ea.vy-_a.vy,en=-(An*In+hr*Mn)||.01;Ea.vx+=en*In,Ea.vy+=en*Mn,_a.vx-=en*In,_a.vy-=en*Mn,Ea.isMoving=!0,_a.isMoving=!0,Ea.trajectory.length>0&&(Ea.trajectory[Ea.trajectory.length-1].collision=!0),_a.trajectory.length>0&&(_a.trajectory[_a.trajectory.length-1].collision=!0)}}if(ta.every(la=>Math.abs(la.vx)<.028&&Math.abs(la.vy)<.028))break}Ve.forEach((yt,ta)=>{yt.trajectory.length>1&&(et[ta]={points:yt.trajectory,color:lt[ta]||"#ffffff"})})})(),et},[t.balls,t.cueBall,hn]),kn=h.useCallback((le,H)=>{const ke=H.x-le.x,Ne=H.y-le.y,Le=Math.sqrt(ke*ke+Ne*Ne);if(Le===0||Le>=Dt)return!1;const et=Dt-Le+.01,ot=ke/Le,pt=Ne/Le;le.x-=ot*(et/2),le.y-=pt*(et/2),H.x+=ot*(et/2),H.y+=pt*(et/2);const Rt=le.vx-H.vx,xt=le.vy-H.vy,Nt=-(Rt*ot+xt*pt)||.01;le.vx+=Nt*ot,le.vy+=Nt*pt,H.vx-=Nt*ot,H.vy-=Nt*pt;const lt=YW,Ie=le.spinX||0,Ve=le.spinY||0,ut=H.spinX||0,yt=H.spinY||0,ta=(Ie-ut)*lt*ot,pa=(Ve-yt)*lt*pt;return le.spinX=(Ie-ta)*.9,le.spinY=(Ve-pa)*.9,H.spinX=(ut+ta)*.9,H.spinY=(yt+pa)*.9,le.isMoving=!0,H.isMoving=!0,!0},[]),xn=h.useCallback(()=>{const le=[],H=Da*.75,ke=Ja/2;function Ne(){return(Math.random()-.5)*1.5}const Le=[{x:H,y:ke},{x:H+Dt*.95,y:ke-Dt*.48},{x:H+Dt*.95,y:ke+Dt*.48},{x:H+2*Dt*.95,y:ke-Dt*.95},{x:H+2*Dt*.95,y:ke},{x:H+2*Dt*.95,y:ke+Dt*.95},{x:H+3*Dt*.95,y:ke-Dt*1.43},{x:H+3*Dt*.95,y:ke-Dt*.48},{x:H+3*Dt*.95,y:ke+Dt*.48},{x:H+3*Dt*.95,y:ke+Dt*1.43}],et=[{x:H+3*Dt*.95,y:ke-Dt*1.43},{x:H+3*Dt*.95,y:ke+Dt*1.43}],pt=[2,3].sort(()=>Math.random()-.5),xt=[4,5,6,7,8,9].sort(()=>Math.random()-.5);return[1,10,...pt,...xt].forEach((Nt,lt)=>{let Ie;if(lt===0)Ie=Le[0];else if(lt===1)Ie=Le[4];else if(lt===2||lt===3){const Ve=lt-2;Ie=et[Ve]}else Ie=[Le[1],Le[2],Le[3],Le[5],Le[7],Le[8]][lt-4];Ie&&le.push({id:Nt,x:Ie.x+Ne(),y:Ie.y+Ne(),vx:0,vy:0,visible:!0,pocketed:!1,wasPocketedBeforeShot:!1,isMoving:!1,rotation:0,rotationSpeed:0,spinX:0,spinY:0})}),le},[]),Ln=h.useCallback(()=>{function et(){let ot=[];for(let lt=0;lt<16;lt++){if(t.cueBall.visible){let Ie=t.cueBall.x+t.cueBall.vx/16,Ve=t.cueBall.y+t.cueBall.vy/16;Ie<30+Pt?(t.cueBall.x=30+Pt,t.cueBall.vx=Math.abs(t.cueBall.vx)*Wl*Ul,t.cueBall.spinY*=jr,Re&&$(!0)):Ie>570.77-Pt?(t.cueBall.x=570.77-Pt,t.cueBall.vx=-Math.abs(t.cueBall.vx)*Wl*Ul,t.cueBall.spinY*=jr,Re&&$(!0)):t.cueBall.x=Ie,Ve<24.5+Pt?(t.cueBall.y=24.5+Pt,t.cueBall.vy=Math.abs(t.cueBall.vy)*Wl*Ul,t.cueBall.spinX*=jr,Re&&$(!0)):Ve>270.18-Pt?(t.cueBall.y=270.18-Pt,t.cueBall.vy=-Math.abs(t.cueBall.vy)*Wl*Ul,t.cueBall.spinX*=jr,Re&&$(!0)):t.cueBall.y=Ve,t.cueBall.vx*=Math.pow(km,1/16),t.cueBall.vy*=Math.pow(km,1/16),t.cueBall.vx+=t.cueBall.spinX*$l,t.cueBall.vy+=t.cueBall.spinY*$l,t.cueBall.spinX*=Math.pow(jr,1/16),t.cueBall.spinY*=Math.pow(jr,1/16);const ut=Math.sqrt(t.cueBall.vx*t.cueBall.vx+t.cueBall.vy*t.cueBall.vy);ut>.01?(t.cueBall.rotationSpeed=ut/Pt,Math.abs(t.cueBall.vx)>Math.abs(t.cueBall.vy)?t.cueBall.rotation+=t.cueBall.rotationSpeed/16*Math.sign(t.cueBall.vx):t.cueBall.rotation+=t.cueBall.rotationSpeed/16*Math.sign(t.cueBall.vy)):t.cueBall.rotationSpeed=0,hn(t.cueBall)&&(t.cueBall.isMoving=!1,t.cueBall.visible=!1),t.cueBall.isMoving&&Math.abs(t.cueBall.vx)<.03&&Math.abs(t.cueBall.vy)<.03&&(t.cueBall.vx=0,t.cueBall.vy=0,t.cueBall.isMoving=!1)}t.balls.forEach(Ie=>{if(!Ie.visible)return;let Ve=Ie.x+Ie.vx/16,ut=Ie.y+Ie.vy/16;Ve<30+Pt?(Ie.x=30+Pt,Ie.vx=Math.abs(Ie.vx)*Wl*Ul,Ie.spinY*=jr,Re&&(rn("Rail contact detected for ball:",Ie.id),$(!0)),t.gamePhase==="break"&&Ie.id!=="cue"&&He(ta=>ta+1)):Ve>570.77-Pt?(Ie.x=570.77-Pt,Ie.vx=-Math.abs(Ie.vx)*Wl*Ul,Ie.spinY*=jr,Re&&$(!0),t.gamePhase==="break"&&Ie.id!=="cue"&&He(ta=>ta+1)):Ie.x=Ve,ut<24.5+Pt?(Ie.y=24.5+Pt,Ie.vy=Math.abs(Ie.vy)*Wl*Ul,Ie.spinX*=jr,Re&&$(!0),t.gamePhase==="break"&&Ie.id!=="cue"&&He(ta=>ta+1)):ut>270.18-Pt?(Ie.y=270.18-Pt,Ie.vy=-Math.abs(Ie.vy)*Wl*Ul,Ie.spinX*=jr,Re&&$(!0),t.gamePhase==="break"&&Ie.id!=="cue"&&He(ta=>ta+1)):Ie.y=ut,Ie.vx*=Math.pow(km,1/16),Ie.vy*=Math.pow(km,1/16),Ie.vx+=Ie.spinX*$l,Ie.vy+=Ie.spinY*$l,Ie.spinX*=Math.pow(jr,1/16),Ie.spinY*=Math.pow(jr,1/16);const yt=Math.sqrt(Ie.vx*Ie.vx+Ie.vy*Ie.vy);yt>.01?(Ie.rotationSpeed=yt/Pt,Math.abs(Ie.vx)>Math.abs(Ie.vy)?Ie.rotation+=Ie.rotationSpeed/16*Math.sign(Ie.vx):Ie.rotation+=Ie.rotationSpeed/16*Math.sign(Ie.vy)):Ie.rotationSpeed=0,hn(Ie)&&(Ie.isMoving=!1,Ie.visible=!1,Ie.pocketed=!0,Ie.pocketedPocket=Rr(Ie.x,Ie.y),ot.includes(Ie.id)||ot.push(Ie.id)),Ie.isMoving&&Math.abs(Ie.vx)<.03&&Math.abs(Ie.vy)<.03&&(Ie.vx=0,Ie.vy=0,Ie.isMoving=!1)}),t.cueBall.visible&&t.balls.forEach(Ie=>{if(Ie.visible){const Ve=kn(t.cueBall,Ie);!We&&Ve&&t.cueBall.isMoving&&(rn("First contact made with ball:",Ie.id),he(Ie.id),Fe(!0),tt(!0))}}),t.balls.forEach((Ie,Ve)=>{Ie.visible&&t.balls.slice(Ve+1).forEach(ut=>{ut.visible&&kn(Ie,ut)})})}const pt=t.balls.every(lt=>!lt.isMoving)&&!t.cueBall.isMoving;if(pt&&nt&&(Ot(!0),Xe(null)),pt&&re&&!ce&&!me&&_e===t.currentPlayer&&(rn("currentPlayer:",t.currentPlayer),rn("cueBall visible:",t.cueBall.visible),t.cueBall.visible?(Ce(!0),G(!1)):(ze(!0),Ce(!0),G(!1),gr("scratch"))),pt&&!re&&t.gamePhase!=="break"&&!ce&&!me&&_e===t.currentPlayer&&_e!==null&&!be){rn("currentPlayer:",t.currentPlayer),rn("gamePhase:",t.gamePhase),rn("Checking for fouls - Current player:",t.currentPlayer,"First ball hit:",Wt);const lt=Nn();if(lt)rn("Foul detected:",lt,"by player:",t.currentPlayer),ze(!0),Ce(!0),U(null),X(null),G(!1),gr(lt);else{if(!be){const Ve=dr();if(Ve.length>0){rn("Illegally pocketed balls detected:",Ve.map(ut=>ut.id)),Mt(Ve),Yt(!0),Ce(!0),U(null),X(null);return}}Ce(!0),U(null),X(null),G(!1),ft(Ve=>{const ut={...Ve,[_e]:0};return rn(`Resetting fouls for player ${_e} only. Player 1 fouls: ${ut[1]}, Player 2 fouls: ${ut[2]}`),ut}),t.balls.filter(Ve=>Ve.pocketed&&!Ve.wasPocketedBeforeShot).length===0&&n(Ve=>({...Ve,currentPlayer:Ve.currentPlayer===1?2:1}))}}if(pt&&be&&!ce&&!me){Ce(!0),Je(!1);const lt=Nn();lt?(rn("Break foul detected:",lt,"by player:",t.currentPlayer),ze(!0),gr(lt)):t.balls.filter(Ve=>Ve.pocketed&&!Ve.wasPocketedBeforeShot).length===0&&n(Ve=>({...Ve,currentPlayer:Ve.currentPlayer===1?2:1}))}const Rt=t.balls.find(lt=>lt.id===10&&lt.pocketed),xt=t.balls.filter(lt=>lt.visible&&!lt.pocketed),zt=xt.length>0?xt.reduce((lt,Ie)=>Ie.id<lt.id?Ie:lt):null;if(pt&&zt&&zt.id===10&&window.dispatchEvent(new CustomEvent("tenBallTarget",{detail:{player:t.currentPlayer}})),pt&&zt&&Xh(t.gamePhase)&&window.dispatchEvent(new CustomEvent("lowestBall",{detail:{player:t.currentPlayer,lowestBall:zt.id}})),pt&&Xh(t.gamePhase)&&Math.random()<.1&&window.dispatchEvent(new CustomEvent("safetyOpportunity",{detail:{player:t.currentPlayer}})),pt&&Rt){const lt=A===10,Ie=K&&Rt.pocketedPocket===K;if(lt&&Ie){const Ve=_e;a&&a(Ve),window.dispatchEvent(new CustomEvent("gameWinning",{detail:{player:Ve}})),setTimeout(()=>{n(ut=>({...ut,balls:xn(),cueBall:{x:100,y:150,originalX:100,originalY:150,vx:0,vy:0,visible:!0,isMoving:!1},isAnimating:!1,gamePhase:"break",ballInHand:!1,scratchOccurred:!1})),setIsDragging(!1),E(!0),ft({1:0,2:0}),n(ut=>({...ut,_foulReset:Date.now()})),window.tipManager&&window.tipManager.resetTips&&window.tipManager.resetTips()},2e3)}else{n(ut=>({...ut,balls:ut.balls.map(yt=>yt.id===10?{...yt,pocketed:!1,visible:!0,x:rx,y:ox,vx:0,vy:0,isMoving:!1}:yt)}));const Ve=t.balls.find(ut=>ut.id===A&&ut.pocketed&&!ut.wasPocketedBeforeShot);Ve&&Ve.pocketedPocket===K||n(ut=>({...ut,currentPlayer:ut.currentPlayer===1?2:1})),U(null),X(null)}}const Nt=bs(t.gamePhase);rn("Step function - wasBreakPhase:",Nt,"allStopped:",pt,"gamePhase:",t.gamePhase),n(lt=>({...lt,isAnimating:!pt,gamePhase:LW(lt.gamePhase,pt)})),BW(t.gamePhase,pt)&&(pe(!0),at(!1),setTimeout(()=>{window.dispatchEvent(new CustomEvent("pushOutStrategy",{detail:{player:t.currentPlayer}}))},500),setTimeout(()=>{window.dispatchEvent(new CustomEvent("pushOutAvailable",{detail:{player:t.currentPlayer}}))},1e3)),pt||(ua.current=requestAnimationFrame(et))}ua.current=requestAnimationFrame(et)},[t,hn,kn,Wt,re,Nn,gr,nt,ce,_e,me,dr,be]),Bn=h.useCallback(()=>{if(t.isAnimating||!R)return;if(!bs(t.gamePhase)){if(!re){if(!A&&!K){T(!0),W(!1);return}}}t.cueBall;const le=f*18,H=w*Math.PI/180,ke=Math.cos(H)*v*$l*le*.05,Ne=Math.sin(H)*v*$l*le*.05;he(null),$(!1),ra(null),ze(!1),Fe(!1),tt(!1),Ce(!1),Qe(t.currentPlayer),He(0);const Le=t.balls.filter(ot=>ot.visible&&!ot.pocketed),et=Le.length>0?Le.reduce((ot,pt)=>pt.id<ot.id?pt:ot):null;V(et),n(ot=>({...ot,balls:ot.balls.map(pt=>({...pt,wasPocketedBeforeShot:pt.pocketed}))})),n(ot=>({...ot,cueBall:{...ot.cueBall,vx:Math.cos(m)*le,vy:Math.sin(m)*le,isMoving:!0,spinX:ke,spinY:Ne},isAnimating:!0,ballInHand:!1,gamePhase:ot.gamePhase})),bs(t.gamePhase)&&setTimeout(()=>{window.dispatchEvent(new CustomEvent("callPocket",{detail:{player:t.currentPlayer}}))},500),bs(t.gamePhase)&&Je(!0),W(!1),E(!0),M(null),_(null),B(null),re&&Xe({ballsPocketed:t.balls.filter(ot=>ot.pocketed).length,cueBallPosition:{x:t.cueBall.x,y:t.cueBall.y},player:t.currentPlayer}),T(!1),se&&!Se&&t.gamePhase!=="break"&&(at(!0),pe(!1)),re&&(pe(!1),at(!0))},[t.isAnimating,R,t.cueBall,f,m,re,A,K,t.gamePhase,se,Se]),zn=h.useCallback(le=>{if(t.isAnimating)return;if(le.button===2){F(!0);return}const H=r.current.getBoundingClientRect(),ke=H.width/Da,Ne=(le.clientX-H.left)/ke,Le=(le.clientY-H.top)/ke;if(Ne>=0&&Ne<=Da&&Le>=0&&Le<=Ja){if(ne){if(Xh(t.gamePhase)&&se&&Kt(Ne,Le)){G(!re);return}if(A&&K||re){if(Ne>=Da/2-80&&Ne<=Da/2-10&&Le>=Ja-30&&Le<=Ja-5){T(!1),W(!0);return}if(Ne>=Da/2+10&&Ne<=Da/2+80&&Le>=Ja-30&&Le<=Ja-5){T(!1),U(null),X(null),G(!1),W(!0);return}}const pt=t.balls.find(xt=>xt.visible&&!xt.pocketed&&Math.sqrt((Ne-xt.x)**2+(Le-xt.y)**2)<Pt),Rt=Fa.find(xt=>Math.sqrt((Ne-xt.x)**2+(Le-xt.y)**2)<50);if(pt||Rt){cr(le);return}else{T(!1),U(null),X(null),W(!1);return}}if((t.ballInHand||bs(t.gamePhase))&&_n(Ne,Le)){Z(Ne,Le);return}const ot=!R;W(ot),ot&&!bs(t.gamePhase)&&!re&&T(!0),ot||(T(!1),U(null),X(null))}},[t.isAnimating,t.ballInHand,t.gamePhase,_n,Z,R,ne,A,K,cr,se,re]),On=h.useCallback(le=>{o&&Ke(),le.button===2&&(F(!1),!R&&!t.isAnimating&&(W(!0),t.gamePhase!=="break"&&!re&&T(!0)))},[o,Ke,R,t.isAnimating,t.gamePhase,re]),wn=h.useCallback(le=>{if(t.isAnimating)return;const H=r.current.getBoundingClientRect(),ke=H.width/Da,Ne=(le.clientX-H.left)/ke,Le=(le.clientY-H.top)/ke;if(o){Pe(Ne,Le);return}if(R&&!(ne&&(Y||le.altKey)))return;const et={x:t.cueBall.x,y:t.cueBall.y},ot={x:Math.max(30,Math.min(570,et.x)),y:Math.max(24,Math.min(270,et.y))},pt=Math.atan2(Le-ot.y,Ne-ot.x);let Rt=!1,xt=null,zt=1/0;t.balls.forEach(Ve=>{if(Ve.visible&&!Ve.pocketed){const ut=Ve.x-ot.x,yt=Ve.y-ot.y,ta=Math.sqrt(ut*ut+yt*yt),pa=Math.atan2(yt,ut);Math.abs(pt-pa)<.25&&ta<zt&&(zt=ta,xt=Ve,Rt=!0)}});let Nt=pt;if(L){let Ve=2e-5;Rt&&xt&&(Ve=1e-5*(Math.sqrt((xt.x-ot.x)**2+(xt.y-ot.y)**2)/100));const ut=ot.x,yt=ot.y,ta=(Ne-ut)*Ve,pa=(Le-yt)*Ve;Nt=Math.atan2(pa,ta)}else if(Rt){const ut=ot.x,yt=ot.y,ta=(Ne-ut)*.25,pa=(Le-yt)*.25;Nt=Math.atan2(pa,ta)}else{const Ve=.9*Math.PI/180;Nt=Math.round(pt/Ve)*Ve}if(R&&ne&&(Y||le.altKey)){const Ve=qn(Nt,j),yt=Math.max(-.001,Math.min(.001,Ve));Nt=j+yt}if((Math.abs(qn(Nt,j))>2e-4||!L)&&(g(Nt),J(Nt)),Rt&&xt){const Ve=mt(xt.x,xt.y,ot.x,ot.y);M(Ve),_(xt)}else M(null),_(null)},[t.isAnimating,o,Pe,t.cueBall,t.balls,mt,R,ne]),ue=h.useCallback(()=>{},[]);h.useCallback(()=>{E(!0),y(.5),S(0),x(0),B(null),W(!1)},[]),h.useCallback(()=>{const le=t.cueBall;let H=null,ke=1/0;return t.balls.forEach(Ne=>{Ne.visible&&!Ne.pocketed&&Ne.id<ke&&(ke=Ne.id,H=Ne)}),H?Math.atan2(H.y-le.y,H.x-le.x):Math.atan2(Ja/2-le.y,Da/2-le.x)},[t.cueBall,t.balls]),h.useEffect(()=>{n(le=>({...le,balls:xn()}))},[xn]),h.useEffect(()=>{if(t.isAnimating)return Ln(),()=>{ua.current&&cancelAnimationFrame(ua.current)}},[t.isAnimating,Ln]),h.useEffect(()=>{const le=H=>{H.key==="Escape"&&ne&&(T(!1),U(null),X(null),W(!1))};return document.addEventListener("keydown",le),()=>{document.removeEventListener("keydown",le)}},[ne]);const Ge=h.useCallback(()=>{const le=r.current;if(!le)return;const H=le.getContext("2d");if(H.clearRect(0,0,Da,Ja),Pa.current?H.drawImage(Pa.current,0,0,Da,Ja):(H.fillStyle="#0d5c0d",H.fillRect(0,0,Da,Ja)),ln.current){H.save(),H.globalAlpha=.25;const Ne=Da*.305,Le=Ne*(ln.current.height/ln.current.width),et=(Da-Ne)/2,ot=(Ja-Le)/2;H.shadowColor="rgba(0, 0, 0, 0.3)",H.shadowBlur=4,H.shadowOffsetX=0,H.shadowOffsetY=1,H.drawImage(ln.current,et,ot,Ne,Le),H.restore()}bs(t.gamePhase)&&!t.isAnimating&&(H.save(),H.strokeStyle="rgba(255, 0, 0, 0.5)",H.lineWidth=2,H.setLineDash([10,5]),H.strokeRect(id,cd,Kh-id,e0-cd),H.fillStyle="rgba(255, 0, 0, 0.8)",H.font="12px Arial",H.fillText("KITCHEN",id+10,cd+20),H.restore());const ke=(Ne,Le)=>{if(Oa.current[Le]){const et=Oa.current[Le];H.save(),H.translate(Ne.x,Ne.y),H.rotate(Ne.rotation||0),H.shadowColor="rgba(0, 0, 0, 0.3)",H.shadowBlur=3,H.shadowOffsetX=1,H.shadowOffsetY=1,H.beginPath(),H.arc(0,0,Pt,0,2*Math.PI),H.clip(),H.drawImage(et,-7.5,-7.5,Dt,Dt),H.shadowColor="transparent",H.globalAlpha=.3,H.fillStyle="rgba(255, 255, 255, 0.8)",H.beginPath(),H.arc(-7.5*.3,-7.5*.3,Pt*.4,0,2*Math.PI),H.fill(),H.restore()}else{const et=new Image;et.onload=()=>{Oa.current[Le]=et,ke(Ne,Le)},et.src=Le}};if(t.balls.forEach(Ne=>{Ne.visible&&!Ne.pocketed&&ke(Ne,ma[Ne.id])}),k&&!t.isAnimating){const Ne={x:Math.max(30,Math.min(570,t.cueBall.x)),y:Math.max(24,Math.min(270,t.cueBall.y))},Le=m,et=f*18,ot=Math.cos(Le)*et,pt=Math.sin(Le)*et,Rt=w*Math.PI/180,xt=Math.cos(Rt)*v*$l*et*.05,zt=Math.sin(Rt)*v*$l*et*.05,Nt=En(ot+xt,pt+zt,Ne,{ignoreCuePocket:!0});if(Nt.cue&&Nt.cue.points.length>1){const lt=Nt.cue.points.find(Ie=>Ie.collision);if(lt){rn("Trajectory collision at:",lt.x.toFixed(2),lt.y.toFixed(2));const Ie=t.balls.find(Ve=>Ve.visible&&!Ve.pocketed&&Ve.id===1);Ie&&rn("Actual ball 1 position:",Ie.x.toFixed(2),Ie.y.toFixed(2))}}Object.entries(Nt).forEach(([lt,Ie])=>{const Ve=lt==="cue"?1:3;if(Ie.points.length>Ve){if(H.save(),lt==="cue"?sa(H):(H.strokeStyle=Ie.color,H.lineWidth=2,H.globalAlpha=.7),lt==="cue"){const ut=Ie.points,yt=ut[0],ta=ut[ut.length-1]||yt;if(Math.hypot(ta.x-yt.x,ta.y-yt.y)<20){const to=tr(f);H.beginPath(),H.moveTo(yt.x,yt.y),H.lineTo(yt.x+Math.cos(Le)*to,yt.y+Math.sin(Le)*to),H.stroke()}else La(H,ut)}else La(H,Ie.points);H.restore();for(let ut=1;ut<Ie.points.length;ut++){const yt=Ie.points[ut];if(yt.collision&&(H.save(),H.fillStyle=Ie.color,H.globalAlpha=.6,H.beginPath(),H.arc(yt.x,yt.y,4,0,2*Math.PI),H.fill(),H.restore()),yt.pocketed){H.save(),H.fillStyle="#00ff00",H.globalAlpha=.8,H.beginPath(),H.arc(yt.x,yt.y,6,0,2*Math.PI),H.fill(),H.restore();break}}}else if(lt==="cue"){H.save(),sa(H);const ut=Ie.points[0],yt=tr(f),ta=ut.x+Math.cos(Le)*yt,pa=ut.y+Math.sin(Le)*yt;H.beginPath(),H.moveTo(ut.x,ut.y),H.lineTo(ta,pa),H.stroke(),H.restore()}})}if(P&&!t.isAnimating&&(H.save(),H.strokeStyle="rgba(255, 255, 0, 0.8)",H.lineWidth=3,H.setLineDash([5,5]),H.beginPath(),H.arc(P.x,P.y,25,0,2*Math.PI),H.stroke(),H.restore()),!t.isAnimating&&!R){const Rt=[{x:30,y:24.5,margin:Dt*$r},{x:570.77,y:24.5,margin:Dt*$r},{x:30,y:270.18,margin:Dt*$r},{x:570.77,y:270.18,margin:Dt*$r},{x:300.385,y:24.5,margin:Dt*wi},{x:300.385,y:270.18,margin:Dt*wi}],xt=t.cueBall.x+Math.cos(m)*100,zt=t.cueBall.y+Math.sin(m)*100;let Nt=null,lt=1/0;if(Rt.forEach(Ie=>{const Ve=Math.hypot(xt-Ie.x,zt-Ie.y);Ve<lt&&(lt=Ve,Nt=Ie)}),Nt&&lt<120){const Ie=Nt.margin+t0;H.save(),H.strokeStyle="rgba(0, 255, 0, 0.18)",H.lineWidth=1.5,H.setLineDash([]),H.beginPath(),H.arc(Nt.x,Nt.y,Ie,0,2*Math.PI),H.stroke(),H.fillStyle="rgba(0, 255, 0, 0.15)",H.beginPath(),H.arc(Nt.x,Nt.y,2,0,2*Math.PI),H.fill(),H.restore()}}if(ne&&!t.isAnimating){if(H.save(),H.fillStyle="rgba(0, 0, 0, 0.4)",H.fillRect(0,0,Da,Ja),H.fillStyle="rgba(255, 215, 0, 0.9)",H.font="bold 16px Arial",H.textAlign="center",H.fillText("CALL YOUR SHOT",Da/2,30),H.font="14px Arial",H.fillStyle="rgba(255, 255, 255, 0.9)",H.fillText("Click a ball, then click a pocket",Da/2,50),A&&(H.fillStyle="rgba(0, 255, 0, 0.8)",H.font="bold 14px Arial",H.fillText(`Selected Ball: ${A}`,Da/2,Ja-60)),K&&(H.fillStyle="rgba(0, 255, 0, 0.8)",H.font="bold 14px Arial",H.fillText(`Selected Pocket: ${K.replace("-"," ")}`,Da/2,Ja-40)),A){const Ne=t.balls.find(Le=>Le.id===A&&Le.visible&&!Le.pocketed);Ne&&(H.strokeStyle="rgba(0, 255, 0, 0.8)",H.lineWidth=3,H.setLineDash([5,5]),H.beginPath(),H.arc(Ne.x,Ne.y,Pt+5,0,2*Math.PI),H.stroke())}if(K){const Ne=Fa.find(Le=>Le.id===K);Ne&&(H.strokeStyle="rgba(0, 255, 0, 0.8)",H.lineWidth=3,H.setLineDash([5,5]),H.beginPath(),H.arc(Ne.x,Ne.y,30,0,2*Math.PI),H.stroke())}rn("Draw function - gamePhase:",t.gamePhase,"pushOutAvailable:",se,"isCallShotMode:",ne),ba(H,Ja,re,se,t.gamePhase),(A&&K||re)&&(H.fillStyle="rgba(76, 175, 80, 0.9)",H.fillRect(Da/2-80,Ja-30,70,25),H.fillStyle="white",H.font="bold 12px Arial",H.textAlign="center",H.fillText("CONFIRM",Da/2-45,Ja-15),H.fillStyle="rgba(244, 67, 54, 0.9)",H.fillRect(Da/2+10,Ja-30,70,25),H.fillStyle="white",H.font="bold 12px Arial",H.textAlign="center",H.fillText("CANCEL",Da/2+45,Ja-15)),H.restore()}if(t.cueBall.visible){const Ne=t.cueBall,Le=ma.cue;if(Oa.current[Le]){const et=Oa.current[Le];H.save(),H.translate(Ne.x,Ne.y),H.rotate(Ne.rotation||0),H.beginPath(),H.arc(0,0,Pt,0,2*Math.PI),H.clip(),H.drawImage(et,-7.5,-7.5,Dt,Dt),v!==0&&!t.isAnimating&&(H.restore(),H.save(),H.strokeStyle=v>0?"rgba(76, 175, 80, 0.8)":"rgba(244, 67, 54, 0.8)",H.lineWidth=3,H.setLineDash([5,5]),H.beginPath(),H.arc(Ne.x,Ne.y,Pt+5,0,2*Math.PI),H.stroke(),H.strokeStyle=v>0?"rgba(76, 175, 80, 0.9)":"rgba(244, 67, 54, 0.9)",H.lineWidth=2,H.setLineDash([]),H.beginPath(),H.moveTo(Ne.x,Ne.y),H.lineTo(Ne.x+Math.cos(w*Math.PI/180)*(Pt+10),Ne.y+Math.sin(w*Math.PI/180)*(Pt+10)),H.stroke()),H.restore()}else{const et=new Image;et.onload=()=>{Oa.current[Le]=et,Ge()},et.src=Le}}H.globalAlpha=1},[t,k,m,ma,f,P,R,En,ne,A,K,Fa,se,re]);h.useEffect(()=>{Ge()},[t.isAnimating,k,m,f,P,R,ne,A,K,se,re]),h.useEffect(()=>{const le=new Image;le.onload=()=>{Pa.current=le,Ge()},le.src=E5},[Ge]),h.useEffect(()=>{const le=new Image;le.onload=()=>{ln.current=le,Ge()},le.src=uy},[Ge]),h.useEffect(()=>{const le=ke=>{ke.altKey&&D(!0)},H=ke=>{ke.altKey||D(!1),ke.key==="Alt"&&D(!1)};return window.addEventListener("keydown",le),window.addEventListener("keyup",H),()=>{window.removeEventListener("keydown",le),window.removeEventListener("keyup",H)}},[]);const[$e,Me]=h.useState(!1),je=h.useCallback(le=>{le.preventDefault(),Me(!0),console.log("English drag started")},[]),ge=h.useCallback(le=>{if(!$e)return;const H=le.currentTarget.getBoundingClientRect(),ke=le.clientX-H.left,Ne=le.clientY-H.top,Le=ke/H.width,et=Ne/H.height,ot=.5,pt=.5,Rt=Math.sqrt((Le-ot)**2+(et-pt)**2),xt=Math.min(Rt,.4),zt=Math.min(xt/.4,1),lt=(Math.atan2(et-pt,Le-ot)*180/Math.PI+360)%360;S(zt),x(lt),console.log(`English updated: ${Math.round(zt*100)}% at ${Math.round(lt)}°`)},[$e]),rt=h.useCallback(()=>{Me(!1),console.log("English drag ended")},[]),ht=h.useCallback(le=>{const H=le%360;return H>=247.5&&H<=292.5?"#4CAF50":H>=67.5&&H<=112.5?"#F44336":H>=157.5&&H<=202.5?"#9C27B0":H>=337.5||H<=22.5?"#FF9800":H>292.5&&H<337.5?"#00BCD4":H>202.5&&H<247.5?"#CDDC39":H>22.5&&H<67.5?"#E91E63":"#FFC107"},[]),_t=h.useCallback(le=>{const H=le%360;return H>=247.5&&H<=292.5?"Top Spin":H>=67.5&&H<=112.5?"Back Spin":H>=157.5&&H<=202.5?"Left Spin":H>=337.5||H<=22.5?"Right Spin":H>292.5&&H<337.5?"Top-Right Spin":H>202.5&&H<247.5?"Top-Left Spin":H>22.5&&H<67.5?"Bottom-Right Spin":"Bottom-Left Spin"},[]);return e.createElement("div",{className:Ua.simplePoolGame},e.createElement("div",{className:Ua.aimingInstructions},e.createElement("div",{className:Ua.instructions},e.createElement("strong",null,"How To Aim:"),e.createElement("br",null),"Move mouse to aim • Click table to lock aim • Call Shot • Adjust power • Drag English ball • Click SHOOT",e.createElement("br",null),e.createElement("small",{style:{color:"#888",fontSize:"12px"}},"💡 ",e.createElement("strong",null,"Aim Line Colors:")," White = Aiming • Green = Locked & ready • Yellow = Fine-tuning • Green/Red = English spin • Colored = Object ball paths",e.createElement("br",null),"💡 ",e.createElement("strong",null,"Fine-tuning:")," Hold right-click for precise aiming, release to lock aim",e.createElement("br",null),"💡 ",e.createElement("strong",null,"English:")," Click and drag on the English ball to set spin direction and intensity"))),nx(t.gamePhase,se)&&e.createElement("div",{style:{alignSelf:"center",margin:"8px 0 14px 0",padding:"6px 14px",background:"rgba(255, 215, 0, 0.95)",color:"#000",fontWeight:700,fontSize:"15px",borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.25)"}},"Push Out Available"),e.createElement("div",{className:Ua.tableContainer},e.createElement("canvas",{ref:r,width:Da,height:Ja,onPointerDown:zn,onPointerUp:On,onPointerMove:wn,onPointerLeave:ue,onContextMenu:le=>le.preventDefault(),className:Ua.tableCanvas})),e.createElement("div",{className:Ua.controls},e.createElement("div",{className:Ua.powerControl},e.createElement("label",null,"Power: ",Math.round(f*100),"%"),e.createElement("div",{style:{position:"relative",width:"100%",height:"8px",background:"#ffffff",borderRadius:"4px",border:"1px solid #e0e0e0",overflow:"hidden"}},e.createElement("div",{style:{position:"absolute",top:0,left:0,width:`${f*100}%`,height:"100%",background:"#2196F3",borderRadius:"3px"}}),e.createElement("div",{style:{position:"absolute",top:"-4px",left:`${f*100}%`,width:"16px",height:"16px",background:"#2196F3",borderRadius:"50%",border:"1px solid #1976D2",cursor:"pointer",transform:"translateX(-50%)"}}),e.createElement("input",{type:"range",min:"0.1",max:"1",step:"0.01",value:f,onChange:le=>y(parseFloat(le.target.value)),style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"transparent",outline:"none",cursor:"pointer",opacity:0}}))),e.createElement("div",{className:Ua.englishControl},e.createElement("label",null,"English: Drag to set spin"),e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"5px"}},e.createElement("div",{onMouseDown:je,onMouseMove:ge,onMouseUp:rt,onMouseLeave:rt,style:{width:"60px",height:"60px",borderRadius:"50%",border:"2px solid #333",background:"linear-gradient(135deg, #fff 0%, #f0f0f0 100%)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",color:"#333",cursor:$e?"grabbing":"grab",userSelect:"none"}},v>0?"+":"",Math.round(v*100),"%",v!==0&&e.createElement(e.Fragment,null,e.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) translate(${Math.cos(w*Math.PI/180)*20}px, ${Math.sin(w*Math.PI/180)*20}px)`,width:"8px",height:"8px",borderRadius:"50%",background:ht(w),border:"1px solid #fff"}}),e.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) rotate(${w}deg)`,width:"2px",height:"20px",background:ht(w),borderRadius:"1px"}}))),v!==0&&e.createElement("div",{style:{fontSize:"12px",color:ht(w),fontWeight:"bold"}},_t(w)),v===0&&e.createElement("div",{style:{fontSize:"12px",color:"#666"}},"No Spin"),v!==0&&e.createElement("button",{onClick:()=>{S(0),x(0)},style:{fontSize:"10px",padding:"2px 6px",background:"#666",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",marginLeft:"5px"}},"Reset"))),e.createElement("div",{className:Ua.shootButton},e.createElement("button",{className:Ua.shootButton,onClick:Bn,disabled:t.isAnimating||!R},R?t.gamePhase==="break"||A&&K||re?"SHOOT!":"CALL SHOT":"LOCK AIM FIRST")),e.createElement("div",{className:Ua.gameInfo},e.createElement("span",null,"Player: ",t.currentPlayer),e.createElement("span",null,"Phase: ",t.gamePhase),e.createElement("span",null,"Status: ",t.isAnimating?"Animating":t.ballInHand||t.gamePhase==="break"?o?"Drag Cue Ball to Position":t.gamePhase==="break"?"Click Cue Ball to Move (Kitchen Only)":"Click Cue Ball to Move (Anywhere)":R?"Aim Locked - Ready to Shoot":P?"Pocket assistance active - Click to lock!":"Move Mouse to Aim"),Ft&&e.createElement("span",{style:{color:"#ff6b6b",fontWeight:"bold"}},"FOUL: ",Ft==="scratch"?"Scratch":Ft==="wrong_ball_first"?"Wrong Ball First":Ft==="no_rail_contact"?"No Rail Contact":Ft),e.createElement("span",null,"Consecutive Fouls P1: ",Zt[1]," | P2: ",Zt[2])),e.createElement("div",{className:Ua.buttonRow},e.createElement("button",{className:Ua.resetAimButton,onClick:()=>{setIsDragging(!1),E(!1),y(.5)},disabled:t.isAnimating},"Reset Aim"),e.createElement("button",{className:Ua.resetButton,onClick:()=>{n(le=>({...le,balls:xn(),cueBall:{x:100,y:150,originalX:100,originalY:150,vx:0,vy:0,visible:!0,isMoving:!1,rotation:0,rotationSpeed:0},isAnimating:!1,gamePhase:"break",ballInHand:!1,scratchOccurred:!1,currentPlayer:1})),E(!0),i(!1),B(null),W(!1),S(0),x(0),pe(!1),at(!1),G(!1),Xe(null),Ot(!1),V(null),console.log("Resetting foul counters via reset button"),ft({1:0,2:0}),ra(null),ze(!1),Ce(!1),Qe(null),He(0),Mt([]),Yt(!1),window.tipManager&&window.tipManager.resetTips&&window.tipManager.resetTips()}},"Reset Game"),e.createElement("button",{className:Ua.resetButton,onClick:()=>{n(le=>({...le,ballInHand:!0,currentPlayer:le.currentPlayer===1?2:1}))},style:{marginLeft:"10px",backgroundColor:"#ff6b6b"}},"Test Ball-in-Hand"))),ct&&e.createElement("div",{className:Ua.pushOutModal},e.createElement("div",{className:Ua.pushOutContent},e.createElement("h3",null,"Push Out Result"),e.createElement("p",null,"Player ",t.currentPlayer===1?2:1,", do you want to accept this push out result?"),e.createElement("div",{className:Ua.pushOutButtons},e.createElement("button",{onClick:()=>{Ot(!1),n(le=>({...le,currentPlayer:le.currentPlayer===1?2:1}))},className:Ua.acceptButton},"Accept"),e.createElement("button",{onClick:()=>{Ot(!1)},className:Ua.declineButton},"Decline")))),Jt&&e.createElement("div",{className:Ua.pushOutModal},e.createElement("div",{className:Ua.pushOutContent},e.createElement("h3",null,"Illegally Pocketed Balls"),e.createElement("p",null,"Player ",t.currentPlayer===1?2:1,", balls were illegally pocketed:"),e.createElement("ul",null,st.map(le=>e.createElement("li",{key:le.id},"Ball ",le.id," ",le.id===10?"(will be spotted)":"(remains pocketed)"))),e.createElement("p",null,"Do you want to:"),e.createElement("div",{className:Ua.pushOutButtons},e.createElement("button",{onClick:()=>{Yt(!1),n(H=>({...H,currentPlayer:H.currentPlayer===1?2:1})),st.find(H=>H.id===10)&&n(H=>({...H,balls:H.balls.map(ke=>ke.id===10?{...ke,pocketed:!1,visible:!0,x:rx,y:ox}:ke)})),Mt([])},className:Ua.acceptButton},"Accept Table"),e.createElement("button",{onClick:()=>{Yt(!1),Mt([])},className:Ua.declineButton},"Require Re-Shot")))))},qW="_tutorialRules_use5n_1",GW="_header_use5n_14",ZW="_progressContainer_use5n_25",VW="_progressBar_use5n_31",QW="_progressFill_use5n_39",JW="_progressText_use5n_46",XW="_content_use5n_52",KW="_stepContent_use5n_56",eU="_highlightBox_use5n_73",tU="_highlightIcon_use5n_86",aU="_tipSection_use5n_90",nU="_navigation_use5n_110",rU="_navButton_use5n_119",oU="_disabled_use5n_135",lU="_centerButtons_use5n_145",sU="_skipButton_use5n_153",iU="_nextButton_use5n_171",cU="_startButton_use5n_171",dU="_quickRules_use5n_193",uU="_ruleGrid_use5n_205",mU="_ruleItem_use5n_211",pU="_ruleNumber_use5n_231",Aa={tutorialRules:qW,header:GW,progressContainer:ZW,progressBar:VW,progressFill:QW,progressText:JW,content:XW,stepContent:KW,highlightBox:eU,highlightIcon:tU,tipSection:aU,navigation:nU,navButton:rU,disabled:oU,centerButtons:lU,skipButton:sU,nextButton:iU,startButton:cU,quickRules:dU,ruleGrid:uU,ruleItem:mU,ruleNumber:pU},fU=({step:a,currentStep:r,totalSteps:t,onNext:n,onBack:o,onSkip:i})=>{const c=(r+1)/t*100,u=["Remember: Always hit the lowest numbered ball first!","Call your shots clearly - specify ball and pocket.","The 10-ball is the money ball - pocket it legally to win!","Use the push out strategically to improve your position.","Three consecutive fouls result in loss of game.","Practice your break shot - it sets up the entire game.","Defensive play is just as important as offensive play.","Watch for safety opportunities when you can't make a shot."];return e.createElement("div",{className:Aa.tutorialRules},e.createElement("div",{className:Aa.header},e.createElement("h3",null,"10-Ball Rules Tutorial"),e.createElement("div",{className:Aa.progressContainer},e.createElement("div",{className:Aa.progressBar},e.createElement("div",{className:Aa.progressFill,style:{width:`${c}%`}})),e.createElement("span",{className:Aa.progressText},"Step ",r+1," of ",t))),e.createElement("div",{className:Aa.content},e.createElement("div",{className:Aa.stepContent},e.createElement("h4",null,a.title),e.createElement("p",null,a.content),a.highlight&&e.createElement("div",{className:Aa.highlightBox},e.createElement(_z,{className:Aa.highlightIcon}),e.createElement("span",null,"This concept will be highlighted on the table"))),e.createElement("div",{className:Aa.tipSection},e.createElement("h5",null,"💡 Pro Tip"),e.createElement("p",null,u[r%u.length]))),e.createElement("div",{className:Aa.navigation},e.createElement("button",{className:`${Aa.navButton} ${r===0?Aa.disabled:""}`,onClick:o,disabled:r===0},e.createElement(yz,null),"Previous"),e.createElement("div",{className:Aa.centerButtons},e.createElement("button",{className:Aa.skipButton,onClick:i},"Skip Tutorial"),r===t-1?e.createElement("button",{className:Aa.startButton,onClick:n},e.createElement(Mz,null),"Start Playing"):e.createElement("button",{className:Aa.nextButton,onClick:n},"Next",e.createElement($w,null)))),e.createElement("div",{className:Aa.quickRules},e.createElement("h5",null,"Quick Reference"),e.createElement("div",{className:Aa.ruleGrid},e.createElement("div",{className:Aa.ruleItem},e.createElement("span",{className:Aa.ruleNumber},"1"),e.createElement("span",null,"Hit lowest ball first")),e.createElement("div",{className:Aa.ruleItem},e.createElement("span",{className:Aa.ruleNumber},"2"),e.createElement("span",null,"Call your shots")),e.createElement("div",{className:Aa.ruleItem},e.createElement("span",{className:Aa.ruleNumber},"3"),e.createElement("span",null,"10-ball wins the game")),e.createElement("div",{className:Aa.ruleItem},e.createElement("span",{className:Aa.ruleNumber},"4"),e.createElement("span",null,"Push out after break")))))},gU="_gameModeSelector_s58nb_29",hU="_header_s58nb_67",yU="_backToDashboardButton_s58nb_113",bU="_modesGrid_s58nb_277",vU="_modeCard_s58nb_291",EU="_recommended_s58nb_333",xU="_recommendedBadge_s58nb_353",wU="_modeIcon_s58nb_379",SU="_modeContent_s58nb_403",CU="_modeArrow_s58nb_441",NU="_whatYoullLearn_s58nb_539",co={gameModeSelector:gU,header:hU,backToDashboardButton:yU,modesGrid:bU,modeCard:vU,recommended:EU,recommendedBadge:xU,modeIcon:wU,modeContent:SU,modeArrow:CU,whatYoullLearn:NU},cx=({onModeSelect:a,fromLogin:r=!1})=>{const t=[{id:"tutorial",title:"Interactive Tutorial",description:"Learn the official CSI 10-Ball rules step by step with interactive examples and tips.",icon:Sz,color:"#4CAF50",recommended:!0}];return e.createElement("div",{className:co.gameModeSelector,style:{maxWidth:"280px",width:"280px",margin:"0 auto",overflowX:"hidden",boxSizing:"border-box"}},e.createElement("div",{className:co.header},!r&&e.createElement("button",{className:co.backToDashboardButton,onClick:()=>window.location.href="/dashboard"},"← Back to Dashboard"),e.createElement("h2",null,"10-Ball Tutorial"),e.createElement("p",null,"Learn and master the official CSI 10-Ball rules")),e.createElement("div",{className:co.modesGrid},t.map(n=>{const o=n.icon;return e.createElement("div",{key:n.id,className:`${co.modeCard} ${n.recommended?co.recommended:""}`,onClick:()=>a(n.id)},n.recommended&&e.createElement("div",{className:co.recommendedBadge},"Recommended"),e.createElement("div",{className:co.modeIcon,style:{backgroundColor:n.color}},e.createElement(o,null)),e.createElement("div",{className:co.modeContent},e.createElement("h3",null,n.title),e.createElement("p",null,n.description)),e.createElement("div",{className:co.modeArrow},"→"))})),e.createElement("div",{className:co.whatYoullLearn},e.createElement("h3",null,"What You'll Learn"),e.createElement("ul",null,e.createElement("li",null,"Official CSI 10-Ball Rules"),e.createElement("li",null,"Break/Push Out Requirements"),e.createElement("li",null,"Call Shot/Ball in Hand Requirements"),e.createElement("li",null,"Illegally Pocketed Balls/Opponent's Option"),e.createElement("li",null,"Foul Detection and Penalties"),e.createElement("li",null,"Advanced Shot Planning"))))},_U="_tipContainer_1z0xf_1",kU="_show_1z0xf_27",IU="_dragging_1z0xf_35",MU="_tipContent_1z0xf_47",AU="_tipHeader_1z0xf_71",DU="_tipIcon_1z0xf_89",RU="_tipTitle_1z0xf_99",TU="_closeButton_1z0xf_113",PU="_tipText_1z0xf_155",Ko={tipContainer:_U,show:kU,dragging:IU,tipContent:MU,tipHeader:AU,tipIcon:DU,tipTitle:RU,closeButton:TU,tipText:PU},LU=({tip:a,isVisible:r,onClose:t})=>{const[n,o]=h.useState(!1),[i,c]=h.useState({x:0,y:0}),[u,m]=h.useState(!1),[g,f]=h.useState({x:0,y:0}),y=h.useRef(null);h.useEffect(()=>{if(r){o(!0);const x=setTimeout(()=>{t()},8e3);return()=>clearTimeout(x)}},[r,t]);const v=x=>{if(x.target.closest("button"))return;m(!0);const k=y.current.getBoundingClientRect();f({x:x.clientX-k.left,y:x.clientY-k.top})},S=x=>{if(!u)return;const k=x.clientX-g.x,E=x.clientY-g.y,I=window.innerWidth-250,M=window.innerHeight-100;c({x:Math.max(0,Math.min(k,I)),y:Math.max(0,Math.min(E,M))})},w=()=>{m(!1)};return h.useEffect(()=>{if(u)return document.addEventListener("mousemove",S),document.addEventListener("mouseup",w),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",w)}},[u,g]),r?e.createElement("div",{ref:y,className:`${Ko.tipContainer} ${n?Ko.show:""} ${u?Ko.dragging:""}`,style:{maxWidth:"250px",width:"250px",minWidth:"250px",top:i.y||20,left:i.x||"50%",transform:i.x?"none":"translateX(-50%)",right:"auto",cursor:u?"grabbing":"grab"},onMouseDown:v},e.createElement("div",{className:Ko.tipContent},e.createElement("div",{className:Ko.tipHeader},e.createElement("span",{className:Ko.tipIcon},"💡"),e.createElement("span",{className:Ko.tipTitle},"Pro Tip"),e.createElement("button",{className:Ko.closeButton,onClick:t},"×")),e.createElement("div",{className:Ko.tipText},a))):null},BU=h.forwardRef(({gameState:a,onTipShown:r},t)=>{const[n,o]=h.useState(null),[i,c]=h.useState(!1),[u,m]=h.useState(new Set),g=w=>{v(w)},f=()=>{m(new Set)};h.useImperativeHandle(t,()=>({triggerTip:g,resetTips:f}));const y={breakShot:{title:"Break Shot",tip:"Always hit the lowest numbered ball first! A good break can set up your entire game!"},callShot:{title:"Call Shot",tip:"Be specific about which pocket you're aiming for! If you don't call it, it doesn't count!"},pushOut:{title:"Push Out Opportunity",tip:"Use push out to improve your position when the table is difficult!"},foul:{title:"Foul Committed",tip:"Three consecutive fouls by the same player results in loss of game!"},tenBall:{title:"10-Ball Target",tip:"The 10-ball is the only ball that matters for winning!"},defensive:{title:"Defensive Play",tip:"Sometimes the best shot is the one that leaves your opponent nothing!"},practice:{title:"Keep Learning",tip:"Practice makes perfect - keep playing and learning!"},scratch:{title:"Scratch Foul",tip:"The cue ball went in a pocket! Your opponent gets ball-in-hand."},wrongBall:{title:"Wrong Ball First",tip:"You must hit the lowest numbered ball first! This is a foul."},noRail:{title:"No Rail Contact",tip:"After contact, a ball must hit a rail or be pocketed. This is a foul."},ballInHand:{title:"Ball-in-Hand",tip:"You can place the cue ball anywhere on the table after a foul."},kitchen:{title:"Kitchen Rule",tip:"During break, the cue ball must start in the kitchen (behind the head string)."},threeFoul:{title:"Three Foul Rule",tip:"Three consecutive fouls by the same player results in loss of game!"},pushOutStrategy:{title:"Push Out Strategy",tip:"After a legal break, you can push out to improve position. Opponent then chooses to shoot or pass."},callPocket:{title:"Call Pocket",tip:"You must call both the ball and the pocket for every shot after the break."},lowestBall:{title:"Lowest Ball First",tip:"Always hit the lowest numbered ball on the table first!"},safety:{title:"Safety Shot",tip:"A safety shot is when you don't expect to pocket a ball but leave your opponent in a difficult position."},jumpShot:{title:"Jump Shot",tip:"Jump shots are legal in 10-ball, but be careful not to jump the cue ball off the table!"},gameWinning:{title:"Game Winner",tip:"Legally pocket the 10-ball to win! Remember to call it and the pocket."}},v=w=>{if(u.has(w))return;const x=y[w];x&&(o(x),c(!0),m(k=>new Set([...k,w])),r==null||r(w))},S=()=>{c(!1)};return h.useEffect(()=>{a&&(a.gamePhase==="break"&&!u.has("breakShot")&&(v("breakShot"),window.dispatchEvent(new CustomEvent("kitchenRule"))),a.gamePhase==="play"&&!u.has("callShot")&&v("callShot"))},[a,u]),h.useEffect(()=>{const w=J=>{u.has("foul")||v("foul")},x=J=>{u.has("scratch")||v("scratch")},k=J=>{u.has("wrongBall")||v("wrongBall")},E=J=>{u.has("noRail")||v("noRail")},I=J=>{u.has("ballInHand")||v("ballInHand")},M=J=>{u.has("kitchen")||v("kitchen")},N=J=>{u.has("threeFoul")||v("threeFoul")},_=J=>{u.has("pushOut")||v("pushOut")},P=J=>{u.has("pushOutStrategy")||v("pushOutStrategy")},B=J=>{u.has("callPocket")||v("callPocket")},R=J=>{u.has("lowestBall")||v("lowestBall")},W=J=>{u.has("safety")||v("safety")},L=J=>{u.has("jumpShot")||v("jumpShot")},F=J=>{u.has("tenBall")||v("tenBall")},j=J=>{u.has("gameWinning")||v("gameWinning")};return window.addEventListener("gameFoul",w),window.addEventListener("scratchFoul",x),window.addEventListener("wrongBallFoul",k),window.addEventListener("noRailFoul",E),window.addEventListener("ballInHand",I),window.addEventListener("kitchenRule",M),window.addEventListener("threeFoul",N),window.addEventListener("pushOutAvailable",_),window.addEventListener("pushOutStrategy",P),window.addEventListener("callPocket",B),window.addEventListener("lowestBall",R),window.addEventListener("safetyOpportunity",W),window.addEventListener("jumpShot",L),window.addEventListener("tenBallTarget",F),window.addEventListener("gameWinning",j),()=>{window.removeEventListener("gameFoul",w),window.removeEventListener("scratchFoul",x),window.removeEventListener("wrongBallFoul",k),window.removeEventListener("noRailFoul",E),window.removeEventListener("ballInHand",I),window.removeEventListener("kitchenRule",M),window.removeEventListener("threeFoul",N),window.removeEventListener("pushOutAvailable",_),window.removeEventListener("pushOutStrategy",P),window.removeEventListener("callPocket",B),window.removeEventListener("lowestBall",R),window.removeEventListener("safetyOpportunity",W),window.removeEventListener("jumpShot",L),window.removeEventListener("tenBallTarget",F),window.removeEventListener("gameWinning",j)}},[u]),e.createElement(LU,{tip:n==null?void 0:n.tip,isVisible:i,onClose:S})}),zU="_container_1jm20_1",OU="_backButton_1jm20_53",FU="_tutorialContainer_1jm20_79",jl={container:zU,backButton:OU,tutorialContainer:FU},WU=({fromLogin:a=!1,onBackToLogin:r})=>{const[t,n]=h.useState("menu"),[o,i]=h.useState(0),[c,u]=h.useState(!0),[m,g]=h.useState({player1Score:0,player2Score:0,currentPlayer:1,gamePhase:"break",rules:{callPocket:!0,pushOut:!0,threeFoulRule:!0,jumpShots:!0}}),f=[{title:"The Break Shot",content:"Start the game with a legal break shot. You must break from the kitchen hitting the 1-ball first and drive at least 4 balls to the rails or pocket a ball.",proTip:"A good break can set up your entire game!"},{title:"Welcome to 10-Ball!",content:"10-Ball is a call-shot game where you must hit the lowest numbered ball first and call your shots. The 10-ball is the game-winning ball!",proTip:"Always hit the lowest numbered ball first!"},{title:"Call Shot Rules",content:"After the break, you must call both the ball and the pocket for every shot. If you don't call it, it doesn't count!",proTip:"CSI rules state that you do not have to call obvious shots. Banks, Kicks, and Caroms should always be called. Be specific about which pocket you're aiming for! Make sure your opponent acknowledges your called shot."},{title:"Push Out Option",content:"After a legal break, the incoming player may choose to 'push out' - shoot the cue ball anywhere without hitting any ball. The opponent then chooses to shoot or pass.",proTip:"Use push out to improve your position when the table is difficult!"},{title:"Fouls and Penalties",content:"Common fouls include: scratching (cue ball in pocket), hitting wrong ball first, not hitting any rail after contact, and jumping the cue ball off the table.",proTip:"Three consecutive fouls by the same player results in loss of game!"},{title:"Winning the Game",content:"Legally pocket the 10-ball to win! Yes, you can win with an early ten ball...Remember, you must call the 10-ball and the pocket, and hit the lowest numbered ball first.",proTip:"The 10-ball is the only ball that matters for winning!"},{title:"Strategy Tips",content:"Plan your shots ahead, use defensive play when needed, and always consider your opponent's options after your shot.",proTip:"Sometimes the best shot is the one that leaves your opponent nothing!"},{title:"Ready to Play!",content:"You now know the basics of 10-Ball! Practice these rules and strategies to improve your game.",proTip:"Practice makes perfect - keep playing and learning!"}],y=k=>{n(k),k==="tutorial"&&(i(0),u(!0))},v=()=>{o<f.length-1?i(o+1):n("game")},S=()=>{o>0&&i(o-1)},w=k=>{g(E=>({...E,gamePhase:"end",player1Score:k===1?E.player1Score+1:E.player1Score,player2Score:k===2?E.player2Score+1:E.player2Score}))},x=()=>{switch(t){case"menu":return e.createElement(cx,{onModeSelect:y,fromLogin:a});case"tutorial":return e.createElement("div",{className:jl.tutorialContainer},e.createElement(fU,{step:f[o],currentStep:o,totalSteps:f.length,onNext:v,onBack:S,onSkip:()=>n("game")}),e.createElement(W0,{onGameEnd:w}));case"game":return e.createElement(W0,{onGameEnd:w});default:return e.createElement(cx,{onModeSelect:y})}};return e.createElement("div",{className:jl.container},x(),(t==="game"||t==="tutorial")&&e.createElement(BU,{gameState:m,onTipShown:k=>console.log(`Tip shown: ${k}`),ref:k=>{k&&(window.tipManager=k)}}),t!=="menu"&&!a&&e.createElement("div",{className:jl.navigation},e.createElement("button",{className:jl.backButton,onClick:()=>n("menu")},"← Back to Menu")),t!=="menu"&&e.createElement("div",{className:jl.gameInfo},e.createElement("div",{className:jl.scoreBoard},e.createElement("div",{className:jl.playerScore},e.createElement("span",null,"Player 1: ",m.player1Score)),e.createElement("div",{className:jl.playerScore},e.createElement("span",null,"Player 2: ",m.player2Score)))))},UU=""+new URL("bcapl_logo-BvvUeHn5.png",import.meta.url).href,$U=""+new URL("csi_logo-ChVaLM6t.png",import.meta.url).href,jU=""+new URL("usapl_logo-jJ_LE_Bw.png",import.meta.url).href,HU=""+new URL("fargorate-logo-BVCRpqvV.png",import.meta.url).href,sS=""+new URL("LBC logo with address-Dg7KP2ok.png",import.meta.url).href;function YU(){const[a,r]=h.useState(window.innerWidth),[t,n]=h.useState(window.innerHeight),[o]=h.useState(()=>[0,1,2,3,4,5,6,7,8].map(N=>{const _=.1+Math.random()*.15,P=Math.random()*Math.PI*2;return{x:Math.random()*a,y:Math.random()*t,vx:Math.cos(P)*_*1.2,vy:Math.sin(P)*_*1.2,baseSize:.8+Math.random()*.4,sizePhase:Math.random()*Math.PI*2,isSizeChanger:!1,speedCategory:"base",lastChange:Date.now(),changeInterval:8e3+Math.random()*12e3,rotationDirection:N>=5?Math.random()>.5?1:-1:0}}));h.useEffect(()=>{const N=()=>{r(window.innerWidth),n(window.innerHeight)};return window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[]);function i(N,_,P){const[B,R]=h.useState(N);h.useRef(null);const W=h.useRef(N);return h.useEffect(()=>{let L,F=Date.now();const j=()=>{const J=Date.now(),Y=J-F,D=W.current;if(J-D.lastChange>D.changeInterval){const re=P.includes(_)?"fast":"base",G={...D,speedCategory:re,lastChange:J,changeInterval:3e3+Math.random()*6e3};W.current=G,R(G)}if(Math.random()<.003){const T=Math.atan2(D.vy,D.vx),re=(Math.random()-.5)*Math.PI*.3,G=T+re,se=.3+Math.random()*1,pe=D.speedCategory==="fast"?.6:.2;D.vx=Math.cos(G)*se*pe,D.vy=Math.sin(G)*se*pe}let A=D.x+D.vx*(Y/16),U=D.y+D.vy*(Y/16);(A<0||A>a||U<0||U>t)&&(D.edgeShrink||(D.edgeShrink=!0,D.edgeShrinkTime=J));const K=J/1e3;let X=D.baseSize;const O=Math.sin(K*.07+D.sizePhase)*.1,Q=Math.sin(K*.35+D.sizePhase*2)*.05;if(X=D.baseSize+O+Q,X<D.baseSize*.3&&!D.sizeShrink&&(D.sizeShrink=!0,D.sizeShrinkTime=J),D.edgeShrink){const T=J-D.edgeShrinkTime;if(T<2e3){const G=1-T/2e3;D.edgeOpacity=G,X=D.baseSize+O+Q}else if(T<4e3)D.edgeOpacity=.01,X=.01;else if(T<4100)A=Math.random()*a,U=Math.random()*t,D.x=A,D.y=U,X=.01,D.edgeOpacity=.01;else if(T<12500){const G=.01+.99*((T-4100)/8400);X*=G,D.edgeOpacity=G}else D.edgeShrink=!1,D.edgeOpacity=1}else D.edgeOpacity=1;if(D.sizeShrink){const T=J-D.sizeShrinkTime;if(T<2e3){const G=1-T/2e3;D.sizeOpacity=G}else if(T<4e3)D.sizeOpacity=.01,X=.01;else if(T<4100)A=Math.random()*a,U=Math.random()*t,D.x=A,D.y=U,X=.01,D.sizeOpacity=.01;else if(T<12500){const G=.01+.99*((T-4100)/8400);X*=G,D.sizeOpacity=G}else D.sizeShrink=!1,D.sizeOpacity=1}else D.sizeOpacity=1;let ne=D.rotation||0;if(_>=5){const re=(Math.sqrt(D.vx*D.vx+D.vy*D.vy)*2+.3)*(Y/16)*(D.rotationDirection||1);ne+=re}W.current={...D,x:A,y:U,size:X,rotation:ne},J-F>100&&(R(W.current),F=J),L=requestAnimationFrame(j)};return j(),()=>cancelAnimationFrame(L)},[a,t,P]),B}const[c]=h.useState(()=>{const N=[];for(;N.length<3;){const P=Math.floor(Math.random()*9);N.includes(P)||N.push(P)}const _=[];for(;_.length<3;){const P=Math.floor(Math.random()*9);!_.includes(P)&&!N.includes(P)&&_.push(P)}return o.forEach((P,B)=>{N.includes(B)?(P.speedCategory="fast",P.vx=(Math.random()-.5)*2,P.vy=(Math.random()-.5)*2):(P.speedCategory="base",P.vx=(Math.random()-.5)*.5,P.vy=(Math.random()-.5)*.5),_.includes(B)&&(P.isSizeChanger=!0)}),!0}),[u,m]=h.useState(()=>{const N=[];for(;N.length<3;){const _=Math.floor(Math.random()*9);N.includes(_)||N.push(_)}return N}),g=()=>{const N=[];for(;N.length<3;){const _=Math.floor(Math.random()*9);N.includes(_)||N.push(_)}m(N)};h.useEffect(()=>{const N=setInterval(()=>{g(),console.log("Speed reassignment triggered")},4e3+Math.random()*4e3);return()=>clearInterval(N)},[]);const f=i(o[0],0,u),y=i(o[1],1,u),v=i(o[2],2,u),S=i(o[3],3,u),w=i(o[4],4,u),x=i(o[5],5,u),k=i(o[6],6,u),E=i(o[7],7,u),I=i(o[8],8,u),M=(N,_,P,B,R=!1)=>{const W=R&&N.rotation||0;return{position:"absolute",left:N.x,top:N.y,transform:`translate(-50%, -50%) scale(${N.size}) rotate(${W}deg)`,width:_,height:"auto",opacity:P*(N.edgeOpacity||1)*(N.sizeOpacity||1),zIndex:1,pointerEvents:"none",filter:B,transition:"none"}};return e.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:1,pointerEvents:"none",overflow:"hidden"}},e.createElement("img",{src:uy,alt:"League Logo Background",style:M(f,150,.75,"drop-shadow(0 0 24px rgba(245, 30, 30, 0.2))")}),e.createElement("img",{src:UU,alt:"BCAPL Logo Background",style:M(y,120,.75,"drop-shadow(0 0 18px rgba(245, 30, 30, 0.2))")}),e.createElement("img",{src:$U,alt:"CSI Logo Background",style:M(v,120,.75,"drop-shadow(0 0 12px rgba(245, 30, 30, 0.2))")}),e.createElement("img",{src:jU,alt:"USAPL Logo Background",style:M(S,140,.8,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.2))")}),e.createElement("img",{src:HU,alt:"Fargorate Logo Background",style:M(w,140,.8,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.2))")}),e.createElement("img",{src:Ad,alt:"8 Ball Background",style:M(x,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))",!0)}),e.createElement("img",{src:Kp,alt:"9 Ball Background",style:M(k,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))",!0)}),e.createElement("img",{src:Xi,alt:"10 Ball Background",style:M(E,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))",!0)}),e.createElement("img",{src:sS,alt:"Legends Logo Background",style:M(I,160,.75,"drop-shadow(0 0 20px rgba(245, 30, 30, 0.2))")}))}function qU(){const{isMobile:a,isTablet:r,screenSize:t,touchCapable:n,orientation:o,getBreakpoint:i}=Ty(),[c,u]=e.useState("overview");return e.createElement("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a1a 0%, #2d1b69 100%)",color:"#fff",padding:"16px",paddingBottom:"100px"}},e.createElement(Yr,{title:"Mobile Detection Test"},e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"8px"}},e.createElement("div",null,"📱 Is Mobile: ",e.createElement("strong",null,a?"YES":"NO")),e.createElement("div",null,"📱 Is Tablet: ",e.createElement("strong",null,r?"YES":"NO")),e.createElement("div",null,"📱 Touch Capable: ",e.createElement("strong",null,n?"YES":"NO")),e.createElement("div",null,"📱 Orientation: ",e.createElement("strong",null,o)),e.createElement("div",null,"📱 Screen Size: ",e.createElement("strong",null,t.width," x ",t.height)),e.createElement("div",null,"📱 Breakpoint: ",e.createElement("strong",null,i())))),e.createElement(Yr,{title:"Touch Interaction Test"},e.createElement(Nd,{title:"Swipe Test Card",subtitle:"Try swiping left or right",onTap:()=>alert("Card tapped!"),onSwipeLeft:()=>alert("Swiped left!"),onSwipeRight:()=>alert("Swiped right!")},e.createElement("div",{style:{padding:"8px 0"}},e.createElement("p",null,"This card supports swipe gestures. Try swiping left or right to see the action indicators."))),e.createElement(Nd,{title:"Tap Test Card",subtitle:"Tap to test touch response",onTap:()=>alert("Touch response working!")},e.createElement("div",{style:{padding:"8px 0"}},e.createElement("p",null,"Tap this card to test touch responsiveness and visual feedback.")))),e.createElement(Yr,{title:"Stats Grid Test"},e.createElement(Zw,{columns:2},e.createElement(ki,{title:"Test Stat 1",value:"42",subtitle:"Sample data",color:"#e53e3e",onClick:()=>alert("Stat 1 clicked!")}),e.createElement(ki,{title:"Test Stat 2",value:"17",subtitle:"More data",color:"#10b981",onClick:()=>alert("Stat 2 clicked!")}))),e.createElement(Gw,{activeTab:c,onTabChange:u,onQuickAction:()=>alert("Quick action!"),pendingCount:3,sentCount:5,matchesCount:12}))}const iS=({isAuthenticated:a,userFirstName:r,userLastName:t,userEmail:n,userPin:o,userType:i,handleLogout:c,onOpenProfile:u})=>{const m=er(),[g,f]=h.useState(null),[y,v]=h.useState("league"),[S,w]=h.useState(!0);h.useEffect(()=>{n&&(async()=>{try{console.log("🔍 Hub: Starting player type detection for:",n),w(!0);const I=await fetch(`${de}/api/unified-auth/profile-data?email=${encodeURIComponent(n)}&appType=league`);if(console.log("🔍 Hub: API response status:",I.status),I.ok){const M=await I.json();if(console.log("🔍 Hub: API response data:",M),M.success&&M.profile){const N=M.profile.divisions&&M.profile.divisions.length>0,_=M.profile.ladderInfo&&M.profile.ladderInfo.ladderName;console.log("🔍 Hub: Profile analysis:",{hasLeagueProfile:N,hasLadderProfile:_,divisions:M.profile.divisions,ladderInfo:M.profile.ladderInfo}),N&&_?(console.log("✅ Hub: Setting user type to BOTH"),v("both")):N?(console.log("✅ Hub: Setting user type to LEAGUE"),v("league")):_?(console.log("✅ Hub: Setting user type to LADDER"),v("ladder")):(console.log("⚠️ Hub: No profiles found, defaulting to LEAGUE"),v("league"))}else console.log("⚠️ Hub: API response not successful or no profile data")}else console.log("❌ Hub: API response not ok:",I.status)}catch(I){console.error("❌ Hub: Error detecting player type:",I),v("league")}finally{w(!1),console.log("🔍 Hub: Player type detection complete. Final type:",y)}})()},[n]);const x=[{id:"ladder",name:"Ladder App",description:"Challenge-based ladder system with rankings",icon:"⚔️",color:"#2196F3",status:"active",route:"/ladder"},{id:"league",name:"League App",description:"Manage league matches, schedules, and standings",icon:"🏆",color:"#4CAF50",status:"active",route:"/league"}],k=async E=>{E.status==="active"?(f(E),m(E.route)):alert(`${E.name} is coming soon!`)};return e.createElement("div",{className:"app-hub-container"},e.createElement("div",{className:"pool-simulation-background"},e.createElement(my,{aspectWidth:800,aspectHeight:400},e.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},e.createElement(Dd,null)))),e.createElement("div",{className:"app-hub-content"},e.createElement("div",{className:"app-hub-header"},a&&e.createElement("div",{style:{fontSize:"1.6rem",fontWeight:"600",color:"white",marginBottom:"0.3rem",textAlign:"center",textShadow:"0 2px 4px rgba(0,0,0,0.3)",paddingTop:"0.5rem"}},"Hello, ",r),a&&e.createElement("div",{className:"user-info"},e.createElement("div",{style:{color:"rgba(255,255,255,0.95)",fontSize:"0.9rem",fontWeight:"500",textAlign:"center",letterSpacing:"0.2px",textShadow:"0 1px 2px rgba(0,0,0,0.2)",marginBottom:"0.4rem"}},S?"Detecting your player type...":`Thank you for being a ${y==="both"?"League & Ladder":y==="league"?"League":y==="ladder"?"Ladder":"Unknown"} player`),S?e.createElement("span",{style:{background:"#666",padding:"6px 18px",borderRadius:"16px",fontSize:"0.9rem",fontWeight:"600",display:"inline-block",boxShadow:"0 3px 12px rgba(102, 102, 102, 0.4), inset 0 1px 2px rgba(255, 255, 255, 0.4), inset 0 -1px 1px rgba(0, 0, 0, 0.2)",border:"1px solid rgba(255,255,255,0.35)",textShadow:"0 1px 2px rgba(0,0,0,0.2)",position:"relative",backdropFilter:"blur(4px)",letterSpacing:"0.3px"}},"Detecting..."):e.createElement("span",{style:{background:y==="both"||y==="league"?"linear-gradient(135deg, #4CAF50 20%, #2E7D32 80%)":y==="ladder"?"linear-gradient(135deg, #2196F3 20%, #1565C0 80%)":"#666",padding:"6px 18px",borderRadius:"16px",fontSize:"0.9rem",fontWeight:"600",display:"inline-block",boxShadow:`
                    0 3px 12px ${y.includes("league")?"rgba(76, 175, 80, 0.4)":"rgba(33, 150, 243, 0.4)"},
                    inset 0 1px 2px rgba(255, 255, 255, 0.4),
                    inset 0 -1px 1px rgba(0, 0, 0, 0.2)
                  `,border:"1px solid rgba(255,255,255,0.35)",textShadow:"0 1px 2px rgba(0,0,0,0.2)",position:"relative",backdropFilter:"blur(4px)",letterSpacing:"0.3px"}},y==="both"?"League & Ladder Player":y==="league"?"League Player":y==="ladder"?"Ladder Player":"Unknown")),e.createElement("div",{className:"hub-subtitle"},e.createElement("p",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"white",marginTop:"0.1rem",marginBottom:"0rem"}},"Where would you like to go today?")),e.createElement("div",{className:"apps-section"},e.createElement("div",{className:"apps-grid active-apps"},x.map(E=>e.createElement("div",{key:E.id,className:`app-card ${E.status} ${E.id==="league"?"league-app":""}`,onClick:()=>k(E),style:{"--app-color":E.color},"data-app-id":E.id},e.createElement("div",{className:"app-icon"},E.icon),e.createElement("div",{className:"app-info"},e.createElement("h3",null,E.name),e.createElement("p",null,E.description),e.createElement("div",{className:"app-status"},e.createElement("span",{className:"status-active"},"Available"))))))))))};function GU({onSuccess:a,onShowSignup:r}){const[t,n]=h.useState(""),[o,i]=h.useState(""),[c,u]=h.useState(!1),[m,g]=h.useState(!1),[f,y]=h.useState(null),v=window.innerWidth<=768,S=async()=>{if(!t||t.trim()===""){i("Please enter your email or PIN.");return}const x=t.trim();i(""),u(!0),y(null);try{const k=await lW.login(x);u(!1),k.success?(i(""),a(`${k.user.firstName} ${k.user.lastName}`.trim(),k.user.email,k.user.pin,k.userType,k.user,k.profileStatus)):i(k.message||"Login failed. Please try again or contact frbcapl@gmail.com for help.")}catch(k){u(!1),console.error("Login verification error:",k),k.name==="TypeError"&&k.message.includes("Failed to fetch")?i("Cannot connect to server. Please check your connection and try again."):i("An unexpected error occurred. Please try again.")}},w=x=>{x.key==="Enter"&&S()};return f?e.createElement("div",{style:{padding:"20px",color:"white"}},e.createElement("h3",null,"Error"),e.createElement("p",null,"Something went wrong. Please refresh the page and try again.")):e.createElement("div",{className:"embedded-login-frame",style:{position:"relative",width:"100%",height:v?"350px":"450px",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"}},e.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%",zIndex:1}},e.createElement(my,{aspectWidth:v?350:800,aspectHeight:v?200:400},e.createElement(Dd,null))),e.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,width:v?"180px":"420px",maxWidth:v?"60%":"90%",pointerEvents:"auto",touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",transformOrigin:"center center",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",willChange:"auto",transition:"none",animation:"none",WebkitTransform:"translate(-50%, -50%)",MozTransform:"translate(-50%, -50%)",msTransform:"translate(-50%, -50%)",OTransform:"translate(-50%, -50%)",contain:"layout style paint"}},e.createElement("div",{style:{padding:v?"8px":"24px",background:"rgba(0, 0, 0, 0.85)",border:"2px solid #e53e3e",borderRadius:"12px",width:"100%",backdropFilter:"blur(10px)"}},e.createElement("h3",{style:{color:"white",textAlign:"center",marginBottom:v?"4px":"20px",fontSize:v?"0.7rem":"1.4rem",fontWeight:"bold",whiteSpace:"nowrap"}},"🔒 Front Range Pool League"),e.createElement("div",{style:{marginBottom:v?"4px":"20px",position:"relative"}},e.createElement("input",{type:m?"text":"password",value:t,onChange:x=>n(x.target.value),onKeyDown:w,placeholder:"Enter Email or PIN",disabled:c,style:{width:"100%",padding:v?"6px 40px 6px 16px":"16px 40px 16px 16px",border:"2px solid #e53e3e",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:v?"16px":"1rem",boxSizing:"border-box",minHeight:v?"28px":"auto",transition:"none",outline:"none"}}),e.createElement("button",{type:"button",onClick:()=>g(!m),style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",fontSize:v?"14px":"16px",color:"#666",display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":m?"Hide password":"Show password"},m?"🙈":"👁️")),e.createElement("button",{onClick:S,disabled:c,type:"button",style:{width:"100%",background:"#e53e3e",color:"white",border:"none",padding:v?"6px":"16px",fontSize:v?"0.6rem":"1.1rem",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",marginBottom:v?"3px":"12px",minHeight:v?"28px":"auto",transition:"none",outline:"none"}},c?"Verifying...":"Login to Access Hub"),e.createElement("button",{onClick:r,type:"button",style:{width:"100%",background:"transparent",color:"#FF6B35",border:"2px solid #FF6B35",padding:v?"4px":"14px",fontSize:v?"0.5rem":"1rem",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",marginBottom:v?"3px":"16px",transition:"none",minHeight:v?"24px":"auto",outline:"none"}},"🎯 Join Front Range Pool Hub"),o&&e.createElement("p",{style:{color:"#ff6b6b",textAlign:"center",margin:"0 0 4px 0",fontSize:v?"0.4rem":"0.9rem",padding:"2px",borderRadius:"4px",background:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.3)"}},o),e.createElement("p",{style:{color:"#ccc",fontSize:v?"0.3rem":"0.8rem",textAlign:"center",margin:"0"}},"Access league matches, ladder challenges, and more"))))}const cS=({onClose:a,onSuccess:r,userContext:t={}})=>{var Y,D,A;const[n,o]=h.useState(t.isLeaguePlayer||t.isUnknownUser?2:1),[i,c]=h.useState({firstName:((Y=t.prefillData)==null?void 0:Y.firstName)||"",lastName:((D=t.prefillData)==null?void 0:D.lastName)||"",email:((A=t.prefillData)==null?void 0:A.email)||"",phone:"",fargoRate:"",experience:"beginner",currentLeague:"",currentRanking:"",interests:[],payNow:!1,paymentMethod:"",message:""}),[u,m]=h.useState(!1),[g,f]=h.useState(""),[y,v]=h.useState(""),[S,w]=h.useState(!1),[x,k]=h.useState(null),[E,I]=h.useState(null),[M,N]=h.useState(!1),[_,P]=h.useState(null),B=async()=>{try{const U=await fetch(`${de}/api/payment-config`);if(U.ok){const K=await U.json();k(K.config)}}catch(U){console.error("Error loading payment config:",U)}},R=async()=>{try{const U=await fetch(`${de}/api/monetization/promotional-config`);if(U.ok){const K=await U.json();P(K.config)}}catch(U){console.error("Error loading promotional config:",U)}};h.useEffect(()=>{B(),R()},[]);const W=U=>{const{name:K,value:X,type:O,checked:Q}=U.target;c(O==="checkbox"?ne=>({...ne,interests:Q?[...ne.interests,X]:ne.interests.filter(T=>T!==X)}):ne=>({...ne,[K]:X}))},L=async()=>{if(!i.firstName||!i.lastName||!i.email){f("Please fill in at least First Name, Last Name, and Email to check your status");return}N(!0),f("");try{const K=await(await fetch(`${de}/api/ladder/player-status/${i.email}`)).json(),Q=(await(await fetch(`${de}/api/ladder/players`)).json()).find(ne=>{var T,re;return((T=ne.firstName)==null?void 0:T.toLowerCase())===i.firstName.toLowerCase()&&((re=ne.lastName)==null?void 0:re.toLowerCase())===i.lastName.toLowerCase()});Q&&console.log("Found ladder player:",Q),I({isLeaguePlayer:K.isLeaguePlayer||!1,isLadderPlayer:!!Q,leagueInfo:K.leagueInfo,ladderInfo:Q,existingUser:K.isLeaguePlayer||!!Q}),o(2)}catch(U){console.error("Error checking user status:",U),f("Error checking your status. Please try again.")}finally{N(!1)}},F=async U=>{var K,X,O,Q,ne,T,re;U.preventDefault(),m(!0),f("");try{let G="",se=!1;if(t.isLeaguePlayer||E!=null&&E.existingUser)if((t.isLeaguePlayer||E!=null&&E.isLeaguePlayer)&&!(E!=null&&E.isLadderPlayer))if(i.payNow&&(i.paymentMethod||_!=null&&_.isPromotionalPeriod)){const pe=await fetch(`${de}/api/monetization/create-membership-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerName:`${i.firstName} ${i.lastName}`,playerEmail:i.email,paymentMethod:i.paymentMethod||(_!=null&&_.isPromotionalPeriod?"free":""),amount:_!=null&&_.isPromotionalPeriod?0:5,purpose:"ladder_access"})});if(pe.ok){const Je=await pe.json();if(Je.paymentType==="square_redirect"&&Je.paymentUrl){window.location.href=Je.paymentUrl;return}}const Se={firstName:i.firstName,lastName:i.lastName,email:i.email,phone:i.phone||"",fargoRate:i.fargoRate||null,experience:i.experience||"beginner",currentLeague:((X=(K=t.leagueInfo)==null?void 0:K.divisions)==null?void 0:X.length)>0?t.leagueInfo.divisions.join(", "):"Front Range Pool Hub",currentRanking:i.currentRanking||"",payNow:i.payNow,paymentMethod:i.paymentMethod||""};console.log("🔍 DEBUG: Sending signup data:",Se),console.log("🔍 DEBUG: userContext:",t),console.log("🔍 DEBUG: userContext.leagueInfo:",t==null?void 0:t.leagueInfo),console.log("🔍 DEBUG: userContext.leagueInfo.divisions:",(O=t==null?void 0:t.leagueInfo)==null?void 0:O.divisions),console.log("🔍 DEBUG: divisions length:",(ne=(Q=t==null?void 0:t.leagueInfo)==null?void 0:Q.divisions)==null?void 0:ne.length),console.log("🔍 DEBUG: currentLeague value:",Se.currentLeague);const at=await fetch(`${de}/api/ladder/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)}),be=await at.json();if(at.ok)G=`📋 Ladder application submitted!

Thank you for your interest in joining the ladder, ${i.firstName}!

We'll review your application and contact you at ${i.email} within 24-48 hours.

Once approved, you'll be able to participate in ladder challenges!`;else throw new Error(be.error||"Failed to submit ladder application")}else _!=null&&_.isPromotionalPeriod?G=`🎉 Welcome back, ${i.firstName}!

You have full league access. You can view ladder standings as a guest.

🎉 FREE Monthly Membership until October 1st, 2025! Join the ladder now with no monthly fee - only $5 per match when you play!`:G=`🎉 Welcome back, ${i.firstName}!

You have full league access. You can view ladder standings as a guest.

To join the ladder and participate in challenges, you can pay the $5/month fee anytime.`;else E!=null&&E.isLadderPlayer?_!=null&&_.isPromotionalPeriod?G=`🎉 Welcome back, ${i.firstName}!

You have access to your ladder account and can view standings.

🎉 FREE Monthly Membership until October 1st, 2025! You can participate in challenges and defenses with no monthly fee - only $5 per match when you play!`:G=`🎉 Welcome back, ${i.firstName}!

You have access to your ladder account and can view standings. To participate in challenges and defenses, you'll need to ensure your $5/month payment is current.`:E!=null&&E.isLeaguePlayer&&(G=`🎉 Welcome back, ${i.firstName}!

You have access to league features and can check your ladder status. You can view ladder standings as a guest, but need to ${_!=null&&_.isPromotionalPeriod?"join during our FREE membership promotion":"pay $5/month"} to participate in ladder challenges.`);else{if(i.payNow&&(i.paymentMethod||_!=null&&_.isPromotionalPeriod)){const at=await fetch(`${de}/api/monetization/create-membership-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerName:`${i.firstName} ${i.lastName}`,playerEmail:i.email,paymentMethod:i.paymentMethod||(_!=null&&_.isPromotionalPeriod?"free":""),amount:_!=null&&_.isPromotionalPeriod?0:5,purpose:"new_membership"})});if(at.ok){const be=await at.json();if(be.paymentType==="square_redirect"&&be.paymentUrl){window.location.href=be.paymentUrl;return}}}const pe=await fetch(`${de}/api/unified-auth/claim-account`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:i.firstName,lastName:i.lastName,email:i.email,pin:i.pin||"",fargoRate:i.fargoRate||"",experience:i.experience||"",currentLeague:i.currentLeague||"",interests:i.interests||[],payNow:i.payNow,paymentMethod:i.paymentMethod||"",ladderName:((T=E==null?void 0:E.ladderInfo)==null?void 0:T.ladderName)||null,position:((re=E==null?void 0:E.ladderInfo)==null?void 0:re.position)||null})}),Se=await pe.json();if(!pe.ok)throw new Error(Se.message||"Failed to sign up. Please try again.");i.payNow&&i.paymentMethod?_!=null&&_.isPromotionalPeriod?G=`🎉 Welcome to Front Range Pool Hub!

Your application has been submitted!

🎉 FREE Monthly Membership until October 1st, 2025! You'll have full ladder access with no monthly fee - only $5 per match when you play! We'll contact you at ${i.email} within 24-48 hours!`:t.isUnknownUser?G=`🎉 Welcome to Front Range Pool Hub!

Your application has been submitted and payment is being processed.

You'll have full ladder access once payment is confirmed. We'll contact you at ${i.email} within 24-48 hours!`:G=`🎉 Welcome to Front Range Pool Hub!

Your application has been submitted and payment is being processed.

You'll have full ladder access once payment is confirmed. We'll contact you at ${i.email} within 24-48 hours!`:_!=null&&_.isPromotionalPeriod?G=`📋 Application submitted!

Thank you for your interest in joining Front Range Pool Hub!

🎉 FREE Monthly Membership until October 1st, 2025! You'll have guest access to view standings, and can join the ladder with no monthly fee - only $5 per match when you play! We'll contact you at ${i.email} within 24-48 hours to set up your account.`:t.isUnknownUser?G=`📋 Application submitted!

Thank you for your interest in joining Front Range Pool Hub!

You'll have guest access to view standings. We'll contact you at ${i.email} within 24-48 hours to set up your account.`:G=`📋 Application submitted!

Thank you for your interest in joining Front Range Pool Hub!

You'll have guest access to view standings. We'll contact you at ${i.email} within 24-48 hours to set up your account.`}v(G),w(!0)}catch(G){console.error("Signup error:",G),f(G.message||"Network error. Please check your connection and try again.")}finally{m(!1)}},j=()=>e.createElement("div",null,e.createElement("h3",{style:{color:"#fff",marginBottom:"1rem",textAlign:"center"}},"🎯 Join Front Range Pool Hub"),e.createElement("p",{style:{color:"#ccc",textAlign:"center",marginBottom:"1.5rem",fontSize:"0.95rem"}},"Tell us about yourself and what you're interested in. We'll check if you already have an account!"),e.createElement("div",{style:{display:"grid",gap:"1rem"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"}},e.createElement("input",{type:"text",name:"firstName",placeholder:"First Name *",value:i.firstName,onChange:W,required:!0,style:{padding:"12px",borderRadius:"6px",border:"1px solid #555",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"14px"}}),e.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name *",value:i.lastName,onChange:W,required:!0,style:{padding:"12px",borderRadius:"6px",border:"1px solid #555",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"14px"}})),e.createElement("input",{type:"email",name:"email",placeholder:"Email Address *",value:i.email,onChange:W,required:!0,style:{padding:"12px",borderRadius:"6px",border:"1px solid #555",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"14px"}}),e.createElement("input",{type:"tel",name:"phone",placeholder:"Phone Number (optional)",value:i.phone,onChange:W,style:{padding:"12px",borderRadius:"6px",border:"1px solid #555",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"14px"}}),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",marginBottom:"0.5rem",display:"block"}},"What are you interested in?"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"}},["league","ladder","both","exploring"].map(U=>e.createElement("label",{key:U,style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#ccc",fontSize:"14px",cursor:"pointer"}},e.createElement("input",{type:"checkbox",value:U,checked:i.interests.includes(U),onChange:W}),U==="league"&&"🏆 League Matches",U==="ladder"&&"🎯 Ladder Challenges",U==="both"&&"🎮 Both",U==="exploring"&&"👀 Just Looking")))),e.createElement("button",{type:"button",onClick:L,disabled:M||!i.firstName||!i.lastName||!i.email,style:{padding:"12px",borderRadius:"6px",border:"none",background:M?"#666":"#4CAF50",color:"white",fontSize:"16px",fontWeight:"bold",cursor:M?"not-allowed":"pointer",marginTop:"1rem"}},M?"🔍 Checking...":"🔍 Check My Status"))),J=()=>{var U,K,X,O,Q,ne,T,re,G,se,pe,Se,at,be,Je,nt,Xe,ct,Ot,Zt;return e.createElement("div",null,e.createElement("h3",{style:{color:"#fff",marginBottom:"1rem",textAlign:"center"}},t.isLeaguePlayer?"🎯 Join the Ladder!":t.isUnknownUser?"👋 Welcome to Front Range Pool Hub!":E!=null&&E.existingUser?"🎉 We Found You!":"👋 Welcome!"),(_==null?void 0:_.isPromotionalPeriod)&&e.createElement("div",{style:{background:"linear-gradient(135deg, #10b981, #059669)",color:"white",borderRadius:"8px",padding:"12px",marginBottom:"1rem",textAlign:"center",border:"1px solid rgba(16, 185, 129, 0.3)"}},e.createElement("div",{style:{fontWeight:"bold",marginBottom:"4px"}},"🎉 ",_.promotionalMessage),e.createElement("div",{style:{fontSize:"0.9rem",opacity:.9}},"Match fees apply. ",_.daysUntilPromotionEnds>0&&`${_.daysUntilPromotionEnds} days left!`)),t.isLeaguePlayer?e.createElement("div",{style:{background:"rgba(33, 150, 243, 0.1)",border:"1px solid rgba(33, 150, 243, 0.3)",borderRadius:"6px",padding:"0.6rem",marginBottom:"0.6rem"}},e.createElement("p",{style:{color:"#2196F3",margin:"0 0 0.5rem 0"}},"🏆 Thank you for Being a League Player 🏆",e.createElement("br",null),"Ready to join the ladder?"),e.createElement("p",{style:{color:"#ffc107",margin:"0",fontSize:"14px",fontWeight:"bold"}},"💡 Ladder Membership Required 💡"),e.createElement("p",{style:{color:"#ccc",margin:"0 0 0.5rem 0",fontSize:"14px"}},"Participation in the Ladder of Legends, requires a $5 monthly membership.")):t.isUnknownUser?e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"6px",padding:"0.6rem",marginBottom:"0.6rem"}},e.createElement("p",{style:{color:"#ffc107",margin:"0 0 0.5rem 0"}},"🆕 New to Front Range Pool Hub?"),e.createElement("p",{style:{color:"#ccc",margin:"0 0 0.5rem 0",fontSize:"14px"}},"Join our community! You can start with free guest access to view standings, or get full ladder access for $5/month."),e.createElement("p",{style:{color:"#4caf50",margin:"0",fontSize:"14px",fontWeight:"bold"}},"🎯 Choose your membership level below")):E!=null&&E.existingUser?e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"6px",padding:"0.6rem",marginBottom:"0.6rem"}},e.createElement("p",{style:{color:"#4caf50",margin:"0 0 0.5rem 0"}},"✅ We found your account in our system!"),E.isLeaguePlayer&&e.createElement("p",{style:{color:"#ccc",margin:"0 0 0.5rem 0",fontSize:"14px"}},"🏆 League Player: ",(U=E.leagueInfo)==null?void 0:U.firstName," ",(K=E.leagueInfo)==null?void 0:K.lastName),E.isLadderPlayer&&e.createElement("p",{style:{color:"#ccc",margin:"0 0 0.5rem 0",fontSize:"14px"}},"🎯 Ladder Player: ",(X=E.ladderInfo)==null?void 0:X.firstName," ",(O=E.ladderInfo)==null?void 0:O.lastName," - Position #",(Q=E.ladderInfo)==null?void 0:Q.position," in ",(ne=E.ladderInfo)==null?void 0:ne.ladderName),E.isLeaguePlayer&&!E.isLadderPlayer&&e.createElement("p",{style:{color:"#ffc107",margin:"0",fontSize:"14px",fontWeight:"bold"}},"💡 You can check if you have a ladder position or upgrade to ladder access")):e.createElement("div",{style:{background:"rgba(33, 150, 243, 0.1)",border:"1px solid rgba(33, 150, 243, 0.3)",borderRadius:"6px",padding:"0.6rem",marginBottom:"0.6rem"}},e.createElement("p",{style:{color:"#2196F3",margin:"0 0 0.5rem 0"}},"👋 Welcome to Front Range Pool Hub!"),e.createElement("p",{style:{color:"#ccc",margin:"0",fontSize:"14px"}},"We'll set up your account and get you started with pool matches and challenges.")),!t.isLeaguePlayer&&e.createElement("div",null,e.createElement("label",{style:{color:"#fff",marginBottom:"0.5rem",display:"block"}},"Experience Level"),e.createElement("select",{name:"experience",value:i.experience,onChange:W,style:{width:"100%",padding:"12px",borderRadius:"6px",border:"1px solid #555",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"14px",marginBottom:"0.6rem"}},e.createElement("option",{value:"beginner"},"Beginner"),e.createElement("option",{value:"intermediate"},"Intermediate"),e.createElement("option",{value:"advanced"},"Advanced"),e.createElement("option",{value:"expert"},"Expert"))),!t.isLeaguePlayer&&e.createElement("div",null,e.createElement("label",{style:{color:"#fff",marginBottom:"0.5rem",display:"block"}},"Fargo Rate (if known)"),e.createElement("input",{type:"number",name:"fargoRate",placeholder:"e.g., 450",value:i.fargoRate,onChange:W,style:{width:"100%",padding:"12px",borderRadius:"6px",border:"1px solid #555",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"14px",marginBottom:"0.6rem"}})),!t.isLeaguePlayer&&e.createElement("div",null,e.createElement("label",{style:{color:"#fff",marginBottom:"0.5rem",display:"block"}},"Current League (if any)"),e.createElement("input",{type:"text",name:"currentLeague",placeholder:"e.g., APA, BCA, Local League",value:i.currentLeague,onChange:W,style:{width:"100%",padding:"12px",borderRadius:"6px",border:"1px solid #555",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"14px",marginBottom:"0.6rem"}})),e.createElement("div",null,e.createElement("label",{style:{color:"#fff",marginBottom:"0.5rem",display:"block"}},"Access Level"),e.createElement("div",{style:{display:"grid",gap:"0.2rem",marginBottom:"0.6rem"}},t.isLeaguePlayer?e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#ccc",fontSize:"14px",cursor:"pointer",padding:"8px",borderRadius:"6px",border:"1px solid #555",background:i.payNow?"rgba(76, 175, 80, 0.1)":"transparent"}},e.createElement("input",{type:"checkbox",name:"payNow",checked:i.payNow,onChange:()=>c(ft=>({...ft,payNow:!ft.payNow}))}),"💳 ",_!=null&&_.isPromotionalPeriod?"FREE Monthly Membership":"Pay $5/month"," - Join the Ladder + Challenge Access"):t.isUnknownUser?e.createElement(e.Fragment,null,e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#ccc",fontSize:"14px",cursor:"pointer",padding:"8px",borderRadius:"6px",border:"1px solid #555",background:i.payNow?"rgba(76, 175, 80, 0.1)":"transparent"}},e.createElement("input",{type:"radio",name:"paymentOption",value:"pay",checked:i.payNow,onChange:()=>c(ft=>({...ft,payNow:!0}))}),"💳 ",_!=null&&_.isPromotionalPeriod?"FREE Monthly Membership":"Pay $5/month"," - Full Ladder Access + Challenges"),e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#ccc",fontSize:"14px",cursor:"pointer",padding:"8px",borderRadius:"6px",border:"1px solid #555",background:i.payNow?"transparent":"rgba(33, 150, 243, 0.1)"}},e.createElement("input",{type:"radio",name:"paymentOption",value:"free",checked:!i.payNow,onChange:()=>c(ft=>({...ft,payNow:!1}))}),"🆓 Free - Guest Access (View Only)")):E!=null&&E.isLeaguePlayer&&!(E!=null&&E.isLadderPlayer)?e.createElement(e.Fragment,null,e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#ccc",fontSize:"14px",cursor:"pointer",padding:"8px",borderRadius:"6px",border:"1px solid #555",background:i.payNow?"rgba(76, 175, 80, 0.1)":"transparent"}},e.createElement("input",{type:"radio",name:"paymentOption",value:"pay",checked:i.payNow,onChange:()=>c(ft=>({...ft,payNow:!0}))}),"💳 ",_!=null&&_.isPromotionalPeriod?"FREE Monthly Membership":"Pay $5/month"," - Ladder Account + Challenge Access"),e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#ccc",fontSize:"14px",cursor:"pointer",padding:"8px",borderRadius:"6px",border:"1px solid #555",background:i.payNow?"transparent":"rgba(33, 150, 243, 0.1)"}},e.createElement("input",{type:"radio",name:"paymentOption",value:"free",checked:!i.payNow,onChange:()=>c(ft=>({...ft,payNow:!1}))}),"🆓 Free - League Access + Check Ladder Status")):e.createElement(e.Fragment,null,e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#ccc",fontSize:"14px",cursor:"pointer",padding:"8px",borderRadius:"6px",border:"1px solid #555",background:i.payNow?"rgba(76, 175, 80, 0.1)":"transparent"}},e.createElement("input",{type:"radio",name:"paymentOption",value:"pay",checked:i.payNow,onChange:()=>c(ft=>({...ft,payNow:!0}))}),"💳 ",_!=null&&_.isPromotionalPeriod?"FREE Monthly Membership":"Pay $5/month"," - Ladder Account + Challenge Access"),e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#ccc",fontSize:"14px",cursor:"pointer",padding:"8px",borderRadius:"6px",border:"1px solid #555",background:i.payNow?"transparent":"rgba(33, 150, 243, 0.1)"}},e.createElement("input",{type:"radio",name:"paymentOption",value:"free",checked:!i.payNow,onChange:()=>c(ft=>({...ft,payNow:!1}))}),"🆓 Free - Guest Access Only")))),i.payNow&&e.createElement("div",null,e.createElement("label",{style:{color:"#fff",marginBottom:"0.5rem",display:"block"}},"Payment Method"),e.createElement("select",{name:"paymentMethod",value:i.paymentMethod,onChange:W,required:i.payNow,style:{width:"100%",padding:"12px",borderRadius:"6px",border:"1px solid #555",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"14px",marginBottom:"0.6rem"}},e.createElement("option",{value:"",style:{background:"#333",color:"#fff"}},"Select Payment Method"),((re=(T=x==null?void 0:x.paymentMethods)==null?void 0:T.venmo)==null?void 0:re.enabled)&&e.createElement("option",{value:"venmo",style:{background:"#333",color:"#fff"}},"💜 Venmo"),((se=(G=x==null?void 0:x.paymentMethods)==null?void 0:G.cashapp)==null?void 0:se.enabled)&&e.createElement("option",{value:"cashapp",style:{background:"#333",color:"#fff"}},"💚 Cash App"),((Se=(pe=x==null?void 0:x.paymentMethods)==null?void 0:pe.creditCard)==null?void 0:Se.enabled)&&e.createElement("option",{value:"creditCard",style:{background:"#333",color:"#fff"}},"💳 Credit/Debit Card"),((be=(at=x==null?void 0:x.paymentMethods)==null?void 0:at.applePay)==null?void 0:be.enabled)&&e.createElement("option",{value:"applePay",style:{background:"#333",color:"#fff"}},"🍎 Apple Pay"),((nt=(Je=x==null?void 0:x.paymentMethods)==null?void 0:Je.googlePay)==null?void 0:nt.enabled)&&e.createElement("option",{value:"googlePay",style:{background:"#333",color:"#fff"}},"📱 Google Pay"),((ct=(Xe=x==null?void 0:x.paymentMethods)==null?void 0:Xe.cash)==null?void 0:ct.enabled)&&e.createElement("option",{value:"cash",style:{background:"#333",color:"#fff"}},"💵 Cash"),((Zt=(Ot=x==null?void 0:x.paymentMethods)==null?void 0:Ot.check)==null?void 0:Zt.enabled)&&e.createElement("option",{value:"check",style:{background:"#333",color:"#fff"}},"📝 Check"),!x&&e.createElement(e.Fragment,null,e.createElement("option",{value:"venmo",style:{background:"#333",color:"#fff"}},"💜 Venmo"),e.createElement("option",{value:"cashapp",style:{background:"#333",color:"#fff"}},"💚 Cash App"),e.createElement("option",{value:"creditCard",style:{background:"#333",color:"#fff"}},"💳 Credit/Debit Card"),e.createElement("option",{value:"cash",style:{background:"#333",color:"#fff"}},"💵 Cash")))),e.createElement("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"}},e.createElement("button",{type:"button",onClick:()=>o(1),style:{flex:1,padding:"12px",borderRadius:"6px",border:"1px solid #555",background:"transparent",color:"#ccc",fontSize:"14px",cursor:"pointer"}},"← Back"),e.createElement("button",{type:"submit",disabled:u,style:{flex:2,padding:"12px",borderRadius:"6px",border:"none",background:u?"#666":"#4CAF50",color:"white",fontSize:"16px",fontWeight:"bold",cursor:u?"not-allowed":"pointer"}},u?"⏳ Processing...":"🎯 Complete Signup")))};return e.createElement(Bt,{open:!0,onClose:a,title:"Join Front Range Pool Hub",maxWidth:"600px"},e.createElement("div",{style:{padding:"0.3rem 0"}},g&&e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"6px",padding:"12px",marginBottom:"0.6rem",color:"#ffc107"}},"⚠️ ",g),S?e.createElement("div",{style:{textAlign:"center",padding:"2rem"}},e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"8px",padding:"2rem",marginBottom:"1rem",color:"#4caf50"}},e.createElement("div",{style:{fontSize:"3rem",marginBottom:"1rem"}},"✅"),e.createElement("div",{style:{fontSize:"1.1rem",lineHeight:"1.6",whiteSpace:"pre-line"}},y)),e.createElement("button",{type:"button",onClick:a,style:{padding:"12px 24px",borderRadius:"6px",border:"none",background:"#4CAF50",color:"white",fontSize:"16px",fontWeight:"bold",cursor:"pointer"}},"Close")):e.createElement("form",{onSubmit:F},n===1?j():J())))};function dS({isOpen:a,onClose:r,isMobile:t}){return a?e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"flex-start",zIndex:1e3,padding:"120px 10px 10px 10px"}},e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"2px solid #ff4444",borderRadius:"12px",width:t?"98%":"50%",maxWidth:"500px",height:t?"98%":"90vh",maxHeight:"800px",display:"flex",flexDirection:"column",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",color:"#ffffff"}},e.createElement("div",{style:{padding:"20px",borderBottom:"1px solid #ff4444",display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("h2",{style:{color:"#ff4444",margin:0}},"🏆 Ladder of Legends Rules"),e.createElement("button",{onClick:r,style:{background:"none",border:"none",color:"#ff4444",fontSize:"24px",cursor:"pointer",padding:"5px"}},"×")),e.createElement("div",{style:{flex:1,overflowY:"auto",padding:"15px",lineHeight:"1.6",fontSize:"1.3rem"}},e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"🎯 Ladder of Legends Introduction"),e.createElement("p",{style:{color:"#e0e0e0",fontSize:"1.3rem"}},"Please see official rules for full details. ",e.createElement("br",null),'Join the Facebook group: "Top Colorado Springs Pool Players - The Ladder of Legends."'),e.createElement("p",{style:{color:"#e0e0e0",fontSize:"1.3rem"}},e.createElement("strong",null,"Player Responsibility:")," Players must know the rules before participating.")),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"🏆 Three Brackets/Ladders"),e.createElement("p",{style:{color:"#e0e0e0",marginBottom:"10px",fontSize:"1.3rem"}},"Players are placed in brackets based on skill levels:"),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"10px"}},e.createElement("h4",{style:{color:"#ffc107",margin:"0 0 8px 0",fontSize:"1.6rem"}},"499 and under")),e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"10px"}},e.createElement("h4",{style:{color:"#ffc107",margin:"0 0 8px 0",fontSize:"1.6rem"}},"500-549")),e.createElement("div",{style:{background:"rgba(0, 255, 0, 0.1)",border:"1px solid rgba(0, 255, 0, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"10px"}},e.createElement("h4",{style:{color:"#ffc107",margin:"0 0 8px 0",fontSize:"1.6rem"}},"550+"))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"📋 Challenge Acceptance"),e.createElement("p",{style:{color:"#e0e0e0",fontSize:"1.3rem"}},"For all match types, players must accept a challenge when called out.")),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"⚔️ Types of Matches"),e.createElement("h4",{style:{color:"#ffc107",marginBottom:"3px",fontSize:"1.6rem"}},"CHALLENGE MATCH:"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,"Players can challenge opponents up to 4 spots above them"),e.createElement("li",null,"Challenger wins: Players switch positions"),e.createElement("li",null,"Defender wins: Ladder positions remain unchanged")),e.createElement("h4",{style:{color:"#ffc107",marginBottom:"3px",fontSize:"1.6rem"}},"SMACKDOWN MATCH:"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,'Any player can call out a "SmackDown"'),e.createElement("li",null,"Player calls out an opponent no more than 5 spots below them"),e.createElement("li",null,"The Challenger ",e.createElement("em",null,"(Person calling out the SmackDown)")," pays the full entry fee; the Defender pays 50% of the entry fee"),e.createElement("li",null,e.createElement("strong",null,"If Challenger Wins:")," Opponent moves THREE spots down, challenger moves TWO spots up (but not into first place)"),e.createElement("li",null,e.createElement("strong",null,"If Challenger Loses:")," Players switch positions"),e.createElement("li",null,"First place must be earned via a Challenge Match or SmackBack match")),e.createElement("h4",{style:{color:"#ffc107",marginBottom:"3px",fontSize:"1.6rem"}},"SMACKBACK MATCH:"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,"If the SmackDown defender wins, they can challenge for 1st place in their next match with a SmackBack"),e.createElement("li",null,"The Challenger ",e.createElement("em",null,"(Person calling out the SmackBack)")," pays the full entry fee; the Defender pays 50% of the entry fee"),e.createElement("li",null,e.createElement("strong",null,"If Challenger Wins:")," Moves into 1st place, all other positions move down one spot"),e.createElement("li",null,e.createElement("strong",null,"If Defender Wins:")," Ladder positions remain unchanged"))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"📜 OFFICIAL RULES"),e.createElement("h4",{style:{color:"#ffc107",marginBottom:"3px",fontSize:"1.6rem"}},"Player Responsibility"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,"Players are responsible for knowing the rules"),e.createElement("li",null,"Players under 18 require parental approval"),e.createElement("li",null,"Participation implies agreement to the following rules")),e.createElement("h4",{style:{color:"#ffc107",marginBottom:"3px",fontSize:"1.6rem"}},"Match Scheduling"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,"Matches can be played anyday, any time, at any safe mutually agreed upon location")),e.createElement("h4",{style:{color:"#ffc107",marginBottom:"3px",fontSize:"1.6rem"}},"TOP 5 EXCEPTION"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,"Matches involving top 5 players will be played on SATURDAYS OR SUNDAYS",e.createElement("br",null)," At Legends Brews & Cues (2790 Hancock Expwy, Colorado Springs)"),e.createElement("li",null,"Match start times: Between 2pm-8pm, by mutual agreement"),e.createElement("li",null,"Top 5 matches will be live-streamed on the Legends Facebook page"),e.createElement("li",null,"Tables for top 5 matches are open - No Greens Fees"),e.createElement("li",null,"An admin/TD will be present at top 5 matches to referee and make final decisions on disputes"))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"🏆 Brackets/Minimum Races"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,"Brackets are determined using FargoRate"),e.createElement("li",null,"If no FargoRate, known skill level equivalent applies"),e.createElement("li",null,"499 and under = $20 entry fee per match. Race to 5"),e.createElement("li",null,"500-549 = $25 entry fee per match. Race to 7"),e.createElement("li",null,"550+ = $50 entry fee per match. Race to 7"),e.createElement("li",null,"Higher fees/races are allowed by mutual agreement, with exceptions for SmackDown & SmackBack Matches"))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"💳 Membership & Payment Structure"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,e.createElement("strong",null,"Ladder Membership:")," $5/month (required to participate)"),e.createElement("li",null,e.createElement("strong",null,"Match Fees:")," $5 per match (total, not per player)"),e.createElement("li",null,e.createElement("strong",null,"Who Pays:")," The WINNER reports the match and pays the $5 fee"),e.createElement("li",null,e.createElement("strong",null,"Important:")," Only ONE $5 fee per match - not per player!"),e.createElement("li",null,e.createElement("strong",null,"Fee Distribution:")," $3 to prize pool, $2 to platform"),e.createElement("li",null,e.createElement("strong",null,"Payment Methods:")," Credit card (Stripe) or manual payment"),e.createElement("li",null,e.createElement("strong",null,"Billing:")," Monthly automatic renewal for membership"),e.createElement("li",null,e.createElement("strong",null,"Match Reporting:")," Requires active membership and match fee payment"))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"💰 Winner Takes All"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,"Entry fees"),e.createElement("li",null,"Any added sponsor prizes/money (TBD)"),e.createElement("li",null,"Ladder position"),e.createElement("li",null,"Bragging rights"))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"🛡️ Immunity"),e.createElement("p",{style:{color:"#e0e0e0",fontSize:"1.3rem"}},"Winners receive 7 day immunity from new challenges.")),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"5px",fontSize:"1.8rem"}},"🏆 Prize Distribution"),e.createElement("ul",{style:{color:"#e0e0e0",paddingLeft:"15px",marginBottom:"12px",fontSize:"1.25rem"}},e.createElement("li",null,e.createElement("strong",null,"Prize Period:")," Every 2 months (6 times per year)"),e.createElement("li",null,e.createElement("strong",null,"Separate Prize Pools:")," Each ladder (499-under, 500-549, 550+) has its own prize pool"),e.createElement("li",null,e.createElement("strong",null,"Prize Split:")," 50% to 1st place, 50% to most improved player"),e.createElement("li",null,e.createElement("strong",null,"Most Improved:")," Player who climbed the most ladder positions during the 2-month period"),e.createElement("li",null,e.createElement("strong",null,"Eligibility:")," Must have active membership and played at least 1 match during the period"))),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"8px",padding:"12px"}},e.createElement("h4",{style:{color:"#ffc107",margin:"0 0 3px 0",fontSize:"1.6rem"}},"📞 Questions?"),e.createElement("p",{style:{color:"#e0e0e0",margin:0,fontSize:"1.25rem"}},'Join the Facebook group: "Top Colorado Springs Pool Players - The Ladder of Legends" for more information and to participate.'))))):null}const ZU=async a=>{try{const r=await fetch(`${de}/api/monetization/payment-status/${a}`);if(!r.ok)throw new Error("Failed to check payment status");const t=await r.json();return{isCurrent:t.isCurrent||!1,message:t.message||"Payment status unknown",lastPayment:t.lastPayment,nextDue:t.nextDue}}catch(r){return console.error("Error checking payment status:",r),{isCurrent:!1,message:"Unable to verify payment status. Please contact support.",lastPayment:null,nextDue:null}}},VU=(a,r)=>{confirm(`💳 Payment Required

To participate in ladder challenges and defenses, you need a current $5/month subscription.

Would you like to update your payment now?`)?a():r()},Bi=a=>typeof a!="string"?a:a.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").trim(),Hl=a=>{if(typeof a!="string")return"";const r=a.trim().toLowerCase();if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))throw new Error("Invalid email format");return r},QU=a=>{const r=Number(a);if(isNaN(r)||!isFinite(r))throw new Error("Invalid number format");return r},jn=a=>{const r={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"};return a&&typeof a=="string"&&(r.Authorization=`Bearer ${Bi(a)}`),r},Im=a=>{if(!a||typeof a!="object")throw new Error("Invalid player data");return{...a,firstName:a.firstName?Bi(a.firstName):"",lastName:a.lastName?Bi(a.lastName):"",email:a.email?Hl(a.email):"",fargoRate:a.fargoRate?QU(a.fargoRate):0}};function JU(){const[a,r]=h.useState(window.innerWidth),[t,n]=h.useState(window.innerHeight),[o]=h.useState(()=>[0,1,2,3].map(x=>{const k=.1+Math.random()*.15,E=Math.random()*Math.PI*2;return{x:Math.random()*a,y:Math.random()*t,vx:Math.cos(E)*k*1.2,vy:Math.sin(E)*k*1.2,baseSize:.8+Math.random()*.4,sizePhase:Math.random()*Math.PI*2,isSizeChanger:!1,speedCategory:"base",lastChange:Date.now(),changeInterval:8e3+Math.random()*12e3,rotationDirection:x>=1?Math.random()>.5?1:-1:0}}));h.useEffect(()=>{const x=()=>{r(window.innerWidth),n(window.innerHeight)};return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);function i(x,k,E){const[I,M]=h.useState(x);h.useRef(null);const N=h.useRef(x);return h.useEffect(()=>{let _,P=Date.now();const B=()=>{const R=Date.now(),W=R-P,L=N.current;if(R-L.lastChange>L.changeInterval){const X=E.includes(k)?"fast":"base",O={...L,speedCategory:X,lastChange:R,changeInterval:3e3+Math.random()*6e3};N.current=O,M(O)}if(Math.random()<.003){const K=Math.atan2(L.vy,L.vx),X=(Math.random()-.5)*Math.PI*.3,O=K+X,Q=.3+Math.random()*1,ne=L.speedCategory==="fast"?.6:.2;L.vx=Math.cos(O)*Q*ne,L.vy=Math.sin(O)*Q*ne}let F=L.x+L.vx*(W/16),j=L.y+L.vy*(W/16);(F<0||F>a||j<0||j>t)&&(L.edgeShrink||(L.edgeShrink=!0,L.edgeShrinkTime=R));const J=R/1e3;let Y=L.baseSize;const D=Math.sin(J*.07+L.sizePhase)*.1,A=Math.sin(J*.35+L.sizePhase*2)*.05;if(Y=L.baseSize+D+A,Y<L.baseSize*.3&&!L.sizeShrink&&(L.sizeShrink=!0,L.sizeShrinkTime=R),L.edgeShrink){const K=R-L.edgeShrinkTime;if(K<2e3){const O=1-K/2e3;L.edgeOpacity=O,Y=L.baseSize+D+A}else if(K<4e3)L.edgeOpacity=.01,Y=.01;else if(K<4100)F=Math.random()*a,j=Math.random()*t,L.x=F,L.y=j,Y=.01,L.edgeOpacity=.01;else if(K<12500){const O=.01+.99*((K-4100)/8400);Y*=O,L.edgeOpacity=O}else L.edgeShrink=!1,L.edgeOpacity=1}else L.edgeOpacity=1;if(L.sizeShrink){const K=R-L.sizeShrinkTime;if(K<2e3){const O=1-K/2e3;L.sizeOpacity=O}else if(K<4e3)L.sizeOpacity=.01,Y=.01;else if(K<4100)F=Math.random()*a,j=Math.random()*t,L.x=F,L.y=j,Y=.01,L.sizeOpacity=.01;else if(K<12500){const O=.01+.99*((K-4100)/8400);Y*=O,L.sizeOpacity=O}else L.sizeShrink=!1,L.sizeOpacity=1}else L.sizeOpacity=1;let U=L.rotation||0;if(k>=1){const X=(Math.sqrt(L.vx*L.vx+L.vy*L.vy)*2+.3)*(W/16)*(L.rotationDirection||1);U+=X}N.current={...L,x:F,y:j,size:Y,rotation:U},R-P>100&&(M(N.current),P=R),_=requestAnimationFrame(B)};return B(),()=>cancelAnimationFrame(_)},[a,t,E]),I}const[c]=h.useState(()=>{const x=[];for(;x.length<2;){const E=Math.floor(Math.random()*4);x.includes(E)||x.push(E)}const k=[];for(;k.length<2;){const E=Math.floor(Math.random()*4);!k.includes(E)&&!x.includes(E)&&k.push(E)}return o.forEach((E,I)=>{x.includes(I)?(E.speedCategory="fast",E.vx=(Math.random()-.5)*2,E.vy=(Math.random()-.5)*2):(E.speedCategory="base",E.vx=(Math.random()-.5)*.5,E.vy=(Math.random()-.5)*.5),k.includes(I)&&(E.isSizeChanger=!0)}),!0}),[u,m]=h.useState(()=>{const x=[];for(;x.length<2;){const k=Math.floor(Math.random()*4);x.includes(k)||x.push(k)}return x}),g=()=>{const x=[];for(;x.length<2;){const k=Math.floor(Math.random()*4);x.includes(k)||x.push(k)}m(x)};h.useEffect(()=>{const x=setInterval(()=>{g(),console.log("Speed reassignment triggered")},4e3+Math.random()*4e3);return()=>clearInterval(x)},[]);const f=i(o[0],0,u),y=i(o[1],1,u),v=i(o[2],2,u),S=i(o[3],3,u),w=(x,k,E,I,M=!1)=>{const N=M&&x.rotation||0;return{position:"absolute",left:x.x,top:x.y,transform:`translate(-50%, -50%) scale(${x.size}) rotate(${N}deg)`,width:k,height:"auto",opacity:E*(x.edgeOpacity||1)*(x.sizeOpacity||1),zIndex:1,pointerEvents:"none",filter:I,transition:"none"}};return e.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none",overflow:"hidden"}},e.createElement("img",{src:sS,alt:"Legends Logo Background",style:w(f,160,.75,"drop-shadow(0 0 20px rgba(245, 30, 30, 0.2))")}),e.createElement("img",{src:Ad,alt:"8 Ball Background",style:w(y,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))",!0)}),e.createElement("img",{src:Kp,alt:"9 Ball Background",style:w(v,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))",!0)}),e.createElement("img",{src:Xi,alt:"10 Ball Background",style:w(S,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))",!0)}))}const uS=h.memo(({selectedLadder:a,setSelectedLadder:r,setHasManuallySelectedLadder:t,currentView:n,setCurrentView:o,isPublicView:i,setShowMatchCalendar:c})=>{const u=m=>{switch(m){case"499-under":return"499 & Under";case"500-549":return"500-549";case"550-plus":return"550+";default:return m}};return e.createElement("div",{className:"ladder-header-section",style:{position:"relative"}},!i&&n!=="main"&&e.createElement("button",{onClick:()=>o("main"),style:{position:"absolute",top:"5px",left:"5px",background:"transparent",color:"#8B5CF6",border:"2px solid #8B5CF6",borderRadius:"6px",padding:"6px 12px",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(139, 92, 246, 0.3)",zIndex:10},onMouseEnter:m=>{m.target.style.background="rgba(139, 92, 246, 0.1)",m.target.style.transform="translateY(-1px)",m.target.style.boxShadow="0 4px 12px rgba(139, 92, 246, 0.4)"},onMouseLeave:m=>{m.target.style.background="transparent",m.target.style.transform="translateY(0)",m.target.style.boxShadow="0 2px 8px rgba(139, 92, 246, 0.3)"}},"🏠 Back to Ladder Home"),e.createElement("div",{className:"calendar-button-container",style:{display:"flex",justifyContent:"center",marginBottom:"1rem"}},e.createElement("button",{className:"calendar-button",onClick:()=>c(!0),style:{background:"transparent",color:"#10b981",border:"2px solid #10b981",borderRadius:"6px",padding:"12px 36px",fontSize:"1.2rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.3)",zIndex:10},onMouseEnter:m=>{m.target.style.background="rgba(16, 185, 129, 0.1)",m.target.style.transform="translateY(-1px)",m.target.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.4)"},onMouseLeave:m=>{m.target.style.background="transparent",m.target.style.transform="translateY(0)",m.target.style.boxShadow="0 2px 8px rgba(16, 185, 129, 0.3)"}},"📅 Match Calendar")),e.createElement("h1",{className:"ladder-main-title",style:{color:"#000000",WebkitTextStroke:"0.5px #8B5CF6",textShadow:"0 0 20px rgba(139, 92, 246, 0.8), 0 0 40px rgba(139, 92, 246, 0.6), 0 0 60px rgba(139, 92, 246, 0.4), 0 0 80px rgba(139, 92, 246, 0.2)",fontWeight:"bold",fontSize:"3.5rem",letterSpacing:"3px",fontFamily:'"Bebas Neue", "Orbitron", "Exo 2", "Arial Black", sans-serif',textTransform:"uppercase",marginBottom:"0rem"}},"Ladder of Legends"),e.createElement("p",{className:"ladder-subtitle",style:{marginBottom:"1.5rem",marginTop:"0rem",fontSize:"0.9rem"}},"Tournament Series"),e.createElement("h2",{className:"ladder-selection-title",style:{color:"#8B5CF6",WebkitTextStroke:"1.5px #000000",textShadow:"0 0 8px rgba(139, 92, 246, 0.7)",fontWeight:"bold",letterSpacing:"2px",textTransform:"uppercase",fontSize:"2rem",marginBottom:"0.5rem",fontFamily:'"Orbitron", "Exo 2", "Rajdhani", "Arial Black", sans-serif'}},u(a)),e.createElement("p",{className:"ladder-selection-subtitle",style:{fontSize:"0.9rem"}},"Current rankings and positions"),e.createElement("div",{className:"ladder-selector",style:{marginTop:"1rem",padding:"1rem",background:"rgba(0, 0, 0, 0.3)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",gap:"1rem",alignItems:"center",justifyContent:"center",flexWrap:"wrap"}},e.createElement("label",{style:{color:"#fff",fontWeight:"bold",whiteSpace:"nowrap",flexShrink:0,fontSize:"0.9rem"}},"Select Ladder:"),e.createElement("select",{value:a,onChange:m=>{r(m.target.value),t(!0)},style:{background:"rgba(0, 0, 0, 0.8)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"white",padding:"0.5rem 0.8rem",borderRadius:"8px",fontSize:"0.9rem",cursor:"pointer",minWidth:"120px",flexShrink:0}},e.createElement("option",{value:"499-under"},"499 & Under"),e.createElement("option",{value:"500-549"},"500-549"),e.createElement("option",{value:"550-plus"},"550+"))))});uS.displayName="LadderHeader";const mS="America/Denver";function gd(){return new Date().toISOString().split("T")[0]}function XU(a){if(!a)return null;const[r,t,n]=a.split("-");return new Date(parseInt(r),parseInt(t)-1,parseInt(n),12,0,0)}function a0(a){if(!a)return"";const r=a.getFullYear(),t=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0");return`${r}-${t}-${n}`}function Jl(a,r={}){if(!a)return"";const t={year:"numeric",month:"short",day:"numeric",timeZone:mS};return(typeof a=="string"?new Date(a):a).toLocaleDateString("en-US",{...t,...r})}function KU(a,r={}){if(!a)return"";const t={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",timeZone:mS};return(typeof a=="string"?new Date(a):a).toLocaleString("en-US",{...t,...r})}function e$(a){if(!a)return!1;const r=typeof a=="string"?new Date(a):a,t=new Date;return r.toDateString()===t.toDateString()}function t$(){return gd()}const pS=({isOpen:a,onClose:r})=>{const[t,n]=h.useState([]),[o,i]=h.useState(!1),[c,u]=h.useState(""),[m,g]=h.useState(new Date),[f,y]=h.useState(null),[v,S]=h.useState(!1),w=async()=>{i(!0),u("");try{const N=await fetch(`${de}/api/ladder/front-range-pool-hub/ladders/499-under/matches`);if(!N.ok)throw new Error("Failed to fetch matches");const _=await N.json();console.log("Calendar matches data:",_.matches),n(_.matches||[])}catch(N){u("Failed to load matches"),console.error("Error fetching matches:",N)}finally{i(!1)}};h.useEffect(()=>{a&&w()},[a]);const x=()=>{const N=m.getFullYear(),_=m.getMonth(),P=new Date(N,_,1),B=new Date(P);B.setDate(B.getDate()-P.getDay());const R=[],W=new Date(B);for(let L=0;L<42;L++)R.push(new Date(W)),W.setDate(W.getDate()+1);return R},k=N=>{const _=N.getFullYear()+"-"+String(N.getMonth()+1).padStart(2,"0")+"-"+String(N.getDate()).padStart(2,"0"),P=t.filter(B=>{const R=new Date(B.scheduledDate||B.completedDate);return R.getFullYear()+"-"+String(R.getMonth()+1).padStart(2,"0")+"-"+String(R.getDate()).padStart(2,"0")===_});return console.log("Matches for date:",_,P),P},E=N=>{const _=new Date(m);_.setMonth(_.getMonth()+N),g(_)},I=x(),M=m.toLocaleDateString("en-US",{month:"long",year:"numeric"});return Jr.createPortal(e.createElement(Bt,{open:a,onClose:r,title:e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}},e.createElement("img",{src:"/src/assets/LBC logo with address.png",alt:"LEGENDS",style:{height:"32px",width:"auto",verticalAlign:"middle"}}),e.createElement("span",null,"Ladder Match Calendar"),e.createElement("span",{style:{fontSize:"24px"}},"⚔️")),maxWidth:"1100px",maxHeight:"750px",borderColor:"#064e3b",glowColor:"#8B5CF6",textColor:"#FFD700",className:"glossy-calendar-modal"},e.createElement("div",{className:"ladder-match-calendar",style:{maxHeight:"calc(750px - 100px)",overflowY:"auto"}},e.createElement("div",{className:"calendar-header"},e.createElement("button",{className:"nav-button",onClick:()=>E(-1)},"←"),e.createElement("h2",{className:"month-year"},M),e.createElement("button",{className:"nav-button",onClick:()=>E(1)},"→")),e.createElement("div",{className:"calendar-grid"},e.createElement("div",{className:"day-headers"},["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(N=>e.createElement("div",{key:N,className:"day-header"},N))),e.createElement("div",{className:"calendar-days"},I.map((N,_)=>{const P=N.getMonth()===m.getMonth(),B=e$(N),R=k(N),W=R.length>0;return e.createElement("div",{key:`${N.getTime()}-${t.length}`,className:`calendar-day ${P?"":"other-month"} ${B?"today":""}  ${W?"has-matches":""}`,onClick:()=>{y(N),S(!0)}},e.createElement("div",{className:"day-number"},N.getDate()),W&&e.createElement("div",{className:"match-indicator"},e.createElement("span",{className:"match-count"},R.length)),W&&e.createElement("div",{className:"match-players"},R.slice(0,4).map((L,F)=>{var J,Y,D,A;const j=((J=L.player1)==null?void 0:J.ladderRank)&&L.player1.ladderRank<=5||((Y=L.player2)==null?void 0:Y.ladderRank)&&L.player2.ladderRank<=5;return e.createElement("div",{key:F,className:`player-names ${j?"top5-match":""}`},j&&e.createElement("span",{className:"crown-icon"},"👑"),e.createElement("div",{className:"player-name"},((D=L.player1)==null?void 0:D.firstName)||"TBD"),e.createElement("div",{className:"vs"},"vs"),e.createElement("div",{className:"player-name"},((A=L.player2)==null?void 0:A.firstName)||"TBD"))})))}))),o&&e.createElement("div",{className:"loading-state"},e.createElement("p",null,"Loading matches...")),c&&e.createElement("div",{className:"error-state"},e.createElement("p",null,"⚠️ ",c),e.createElement("button",{onClick:w,className:"retry-button"},"Try Again"),e.createElement("button",{onClick:()=>u(""),className:"dismiss-button"},"Dismiss")),e.createElement("div",{className:"calendar-legend"},e.createElement("div",{className:"legend-item"},e.createElement("div",{className:"legend-dot has-matches"}),e.createElement("span",null,"Has matches")),e.createElement("div",{className:"legend-item"},e.createElement("div",{className:"legend-dot today"}),e.createElement("span",null,"Today")))),e.createElement(Bt,{open:v,onClose:()=>S(!1),title:e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}},e.createElement("img",{src:"/src/assets/LBC logo with address.png",alt:"LEGENDS",style:{height:"50px",width:"auto",verticalAlign:"middle"}}),e.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},e.createElement("span",null,"Matches for ",f?f.toLocaleDateString("en-US",{weekday:"long"}):""),e.createElement("span",{style:{fontSize:"0.9em",opacity:.9}},f?f.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"")),e.createElement("span",{style:{fontSize:"24px"}},"⚔️")),maxWidth:"600px",maxHeight:"500px",borderColor:"#064e3b",glowColor:"#8B5CF6",textColor:"#FFD700",className:"glossy-calendar-modal"},e.createElement("div",{className:"day-matches-modal"},f&&e.createElement(e.Fragment,null,k(f).length>0?e.createElement("div",{className:"matches-list"},k(f).map((N,_)=>{var P,B,R,W,L,F;return e.createElement("div",{key:_,className:"match-item"},e.createElement("div",{className:"match-players"},e.createElement("div",{className:"player-section"},e.createElement("span",{className:"player-role challenger"},"⚔️ Challenger"),e.createElement("div",{className:"player-name-row"},e.createElement("span",{className:"player-name"},(P=N.player1)==null?void 0:P.firstName," ",(B=N.player1)==null?void 0:B.lastName),e.createElement("span",{className:"player-rank"},"#",((R=N.player1)==null?void 0:R.position)||"N/A"))),e.createElement("span",{className:"vs"},"vs"),e.createElement("div",{className:"player-section"},e.createElement("span",{className:"player-role defender"},"🛡️ Defender"),e.createElement("div",{className:"player-name-row"},e.createElement("span",{className:"player-name"},(W=N.player2)==null?void 0:W.firstName," ",(L=N.player2)==null?void 0:L.lastName),e.createElement("span",{className:"player-rank"},"#",((F=N.player2)==null?void 0:F.position)||"N/A")))),e.createElement("div",{className:"match-details"},e.createElement("span",{className:"match-type"},N.matchType),N.venue&&e.createElement("span",{className:"venue"},"📍 ",N.venue),N.scheduledTime&&e.createElement("span",{className:"time"},"🕐 ",N.scheduledTime)))})):e.createElement("p",{className:"no-matches"},"No matches scheduled for this date"))))),document.body)},fS=h.memo(({ladderData:a,isPublicView:r,userLadderData:t,canChallengePlayer:n,getChallengeReason:o,handleChallengePlayer:i,handlePlayerClick:c,getPlayerStatus:u,isPositionClaimed:m,selectedLadder:g})=>e.createElement("div",{className:"ladder-table-modal"},e.createElement("div",{className:`ladder-table ${r?"":"logged-in-view"}`,style:{position:"relative"}},e.createElement("div",{className:"table-header"},e.createElement("div",{className:"header-cell"},"Rank"),e.createElement("div",{className:"header-cell"},"Player"),r?window.innerWidth<=768?e.createElement("div",{className:"header-cell"},"W/L"):e.createElement(e.Fragment,null,e.createElement("div",{className:"header-cell"},"W"),e.createElement("div",{className:"header-cell"},"L")):window.innerWidth<=768?e.createElement("div",{className:"header-cell"},"W/L"):e.createElement(e.Fragment,null,e.createElement("div",{className:"header-cell"},"W"),e.createElement("div",{className:"header-cell"},"L")),r&&window.innerWidth>768?e.createElement("div",{className:"header-cell"},"Last Match"):r&&window.innerWidth<=768?e.createElement("div",{className:"header-cell"},"Last Match"):e.createElement("div",{className:"header-cell"},"Status"),!r&&e.createElement("div",{className:"header-cell last-match-header",style:{whiteSpace:window.innerWidth<=768?"normal":"nowrap",wordBreak:"keep-all",justifyContent:"flex-start",textAlign:"left",paddingLeft:"30px"}},"Last Match")),a.map((f,y)=>{var v;return e.createElement("div",{key:f._id||y,className:`table-row ${f.lastMatch&&f.lastMatch.opponent?"has-last-match":""}`},e.createElement("div",{className:"table-cell rank"},"#",f.position),e.createElement("div",{className:"table-cell name"},e.createElement("div",{className:"player-name-clickable",onClick:()=>c(f)},(()=>{const S=f.firstName||"",w=f.lastName||"";if(r){const x=w?w.charAt(0)+".":"";if(S.length>8)return S.substring(0,6)+".. "+x;const k=S+" "+x;return k.length>12?S.substring(0,Math.max(4,12-x.length-3))+".. "+x:k}else{if(window.innerWidth>768)return S+" "+w;{const x=w?w.charAt(0)+".":"";return S+" "+x}}})(),!r&&!((v=f.unifiedAccount)!=null&&v.hasUnifiedAccount)&&e.createElement("span",{className:"no-account"},"*")),!r&&m({ladder:g,position:f.position})&&e.createElement("div",{style:{display:"inline-block",width:"fit-content",flexShrink:"0"}},e.createElement("div",{style:{background:"#4CAF50",color:"white",borderRadius:"1px",padding:"0px",fontSize:"0.6rem",marginTop:"0px",fontWeight:"400",textAlign:"center",height:"12px",lineHeight:"12px",display:"block",whiteSpace:"nowrap",width:"45px",boxSizing:"border-box",overflow:"hidden"}},"✅ Claimed")),(t==null?void 0:t.canChallenge)&&e.createElement("div",{style:{marginTop:"4px"}},n(t,f)?e.createElement(e.Fragment,null,e.createElement("button",{onClick:()=>i(f,"challenge"),style:{background:"#ff4444",color:"white",border:"none",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",cursor:"pointer",marginRight:"4px"}},"Challenge"),e.createElement("button",{onClick:()=>i(f,"smackdown"),style:{background:"#f59e0b",color:"white",border:"none",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",cursor:"pointer"}},"SmackDown")):e.createElement("div",{className:"challenge-reason-text",style:{fontSize:"0.6rem",color:"#888",fontStyle:"italic",marginTop:"2px"}},o(t,f)))),r?window.innerWidth<=768?e.createElement("div",{className:"table-cell wins-losses-combined",style:{transform:"translateX(-5px)",marginLeft:"8px",paddingLeft:"8px",position:"relative",textAlign:"center"}},f.wins||0,"/",f.losses||0):e.createElement(e.Fragment,null,e.createElement("div",{className:"table-cell wins"},f.wins||0),e.createElement("div",{className:"table-cell losses"},f.losses||0)):window.innerWidth<=768?e.createElement("div",{className:"table-cell wins-losses-combined",style:{transform:"translateX(-5px)",marginLeft:"8px",paddingLeft:"8px",position:"relative",textAlign:"center"}},f.wins||0,"/",f.losses||0):e.createElement(e.Fragment,null,e.createElement("div",{className:"table-cell wins"},f.wins||0),e.createElement("div",{className:"table-cell losses"},f.losses||0)),r&&window.innerWidth>768?e.createElement("div",{className:"table-cell last-match"},f.lastMatch?e.createElement("div",{style:{fontSize:"0.9rem",fontWeight:"bold",color:f.lastMatch.result==="W"?"#4CAF50":"#f44336"}},f.lastMatch.result==="W"?"W":"L"," vs ",r?(()=>{const S=f.lastMatch.opponent.split(" ");return S.length>=2?S[0]+" "+S[1].charAt(0)+".":f.lastMatch.opponent})():f.lastMatch.opponent):e.createElement("span",{style:{color:"#999",fontSize:"0.9rem"}},"No matches")):r&&window.innerWidth<=768?e.createElement("div",{className:"table-cell last-match-mobile",style:{padding:"0 3px",fontSize:"0.6rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"}},f.lastMatch&&f.lastMatch.opponent?e.createElement("div",{className:"last-match-mobile-details",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"}},e.createElement("div",{className:"last-match-result-mobile",style:{fontWeight:"bold",color:f.lastMatch.result==="W"?"#4CAF50":"#f44336",fontSize:"0.6rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"}},f.lastMatch.result==="W"?"W":"L"," vs ",r?(()=>{const S=f.lastMatch.opponent.split(" ");return S.length>=2?S[0]+" "+S[1].charAt(0)+".":f.lastMatch.opponent})():f.lastMatch.opponent)):e.createElement("span",{className:"no-matches-mobile",style:{color:"#999",fontSize:"0.7rem"}},"No matches")):e.createElement("div",{className:"table-cell status"},(()=>{const S=u(f);return e.createElement("span",{className:S.className},S.text)})()),!r&&e.createElement("div",{className:"table-cell last-match"},f.lastMatch?e.createElement("div",{style:{fontSize:"1.0rem",lineHeight:"1.2"}},e.createElement("div",{style:{fontWeight:"bold",color:f.lastMatch.result==="W"?"#4CAF50":"#f44336"}},f.lastMatch.result==="W"?"W":"L"," vs ",window.innerWidth<=768?(()=>{const S=f.lastMatch.opponent.split(" ");return S.length>=2?S[0]+" "+S[1].charAt(0)+".":f.lastMatch.opponent})():f.lastMatch.opponent),e.createElement("div",{style:{color:"#666",fontSize:"0.7rem"}},Jl(f.lastMatch.date)),f.lastMatch.venue&&e.createElement("div",{style:{color:"#888",fontSize:"0.65rem"}},f.lastMatch.venue)):e.createElement("span",{style:{color:"#999",fontSize:"1.0rem"}},"No matches")))}))));fS.displayName="LadderTable";const gS=h.memo(({isPublicView:a,navigateToView:r,userLadderData:t,handleSmartMatch:n,setCurrentView:o,pendingChallenges:i,setShowMatchReportingModal:c,setShowPaymentDashboard:u,setShowPrizePoolModal:m,setShowUnifiedSignup:g,setShowRulesModal:f,isAdmin:y,setShowApplicationsManager:v,setShowMatchCalendar:S})=>{const w=er();return console.log("🔍 NavigationMenu - isPublicView:",a),e.createElement("div",{className:"ladder-navigation"},e.createElement("div",{className:"nav-grid"},!a&&e.createElement("div",{className:"nav-card",onClick:()=>r("ladders")},e.createElement("div",{className:"nav-icon"},"📊"),e.createElement("h3",null,"View Ladders"),e.createElement("p",null,"See all ladder positions and rankings")),e.createElement("div",{className:"nav-card",onClick:()=>S(!0)},e.createElement("div",{className:"nav-icon"},"📅"),e.createElement("h3",null,"Match Calendar"),e.createElement("p",null,"View confirmed matches and schedule")),!a&&(t==null?void 0:t.canChallenge)&&e.createElement("div",{className:"nav-card",onClick:n},e.createElement("div",{className:"nav-icon"},"🧠"),e.createElement("h3",null,"Smart Match"),e.createElement("p",null,"AI-powered challenge suggestions")),!a&&(t==null?void 0:t.canChallenge)&&e.createElement("div",{className:"nav-card",onClick:()=>o("challenges")},e.createElement("div",{className:"nav-icon"},"⚔️"),e.createElement("h3",null,"My Challenges"),e.createElement("p",null,"Manage your challenges and responses"),i.length>0&&e.createElement("div",{style:{position:"absolute",top:"-8px",right:"-8px",background:"#ff4444",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:"bold"}},i.length)),!a&&e.createElement("div",{className:"nav-card",onClick:()=>c(!0)},e.createElement("div",{className:"nav-icon"},"🏓"),e.createElement("h3",null,"Report Match"),e.createElement("p",null,"Report match results and pay fees")),!a&&(t==null?void 0:t.playerId)==="ladder"&&e.createElement("div",{className:"nav-card",onClick:()=>r("matches")},e.createElement("div",{className:"nav-icon"},"🎯"),e.createElement("h3",null,"My Completed Matches"),e.createElement("p",null,"View your completed match history")),e.createElement("div",{className:"nav-card",onClick:()=>m(!0)},e.createElement("div",{className:"nav-icon"},"💰"),e.createElement("h3",null,"Prize Pools"),e.createElement("p",null,"View current prize pools and winners")),e.createElement("div",{className:"nav-card",onClick:()=>u(!0)},e.createElement("div",{className:"nav-icon"},"💳"),e.createElement("h3",null,"Payment Dashboard"),e.createElement("p",null,"Manage credits, membership, and payments")),!(t!=null&&t.canChallenge)&&(t==null?void 0:t.playerId)!=="guest"&&e.createElement("div",{className:"nav-card",style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",cursor:"default"}},e.createElement("div",{className:"nav-icon"},"🔒"),e.createElement("h3",null,"Challenge Features"),e.createElement("p",null,"Login to access Smart Match and challenge other players"),e.createElement("button",{onClick:()=>g(!0),style:{background:"#ff4444",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",marginTop:"8px",cursor:"pointer",fontSize:"0.9rem"}},"Login Now")),e.createElement("div",{className:"nav-card",onClick:()=>f(!0)},e.createElement("div",{className:"nav-icon"},"📋"),e.createElement("h3",null,"Ladder Rules"),e.createElement("p",null,"Read the complete ladder rules")),y&&e.createElement(e.Fragment,null,e.createElement("div",{className:"nav-card admin-card",onClick:()=>v(!0)},e.createElement("div",{className:"nav-icon"},"📋"),e.createElement("h3",null,"Applications"),e.createElement("p",null,"Review ladder signup applications")),e.createElement("div",{className:"nav-card admin-card",onClick:()=>w("/ladder/admin")},e.createElement("div",{className:"nav-icon"},"⚙️"),e.createElement("h3",null,"Ladder Admin"),e.createElement("p",null,"Manage ladder players and settings")))))});gS.displayName="NavigationMenu";const hS=h.memo(({showMobilePlayerStats:a,selectedPlayerForStats:r,setShowMobilePlayerStats:t,updatedPlayerData:n,lastMatchData:o,playerMatchHistory:i,showFullMatchHistory:c,setShowFullMatchHistory:u,getPlayerStatus:m,fetchUpdatedPlayerData:g,setShowUnifiedSignup:f,isPublicView:y})=>{var M;if(!a||!r)return null;const v=n||r,S=o||null,w=i||[],x=S?{result:S.result,opponentName:S.opponent,matchDate:S.date,venue:S.venue,matchType:S.matchType||"challenge",playerRole:S.playerRole||"player",score:S.score||"N/A"}:null,k=w.map(N=>({result:N.result,opponentName:N.opponent,matchDate:N.date,venue:N.venue,matchType:N.matchType||"challenge",playerRole:N.playerRole||"player",score:N.score||"N/A"}));console.log("🔍 PlayerStatsModal - safeMatchHistory:",w),console.log("🔍 PlayerStatsModal - transformedMatchHistory:",k),console.log("🔍 PlayerStatsModal - transformedMatchHistory.length:",k.length);const E=e.createElement("div",{className:"player-stats-modal",style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",width:"100vw",height:"100vh",background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999,backdropFilter:"blur(5px)",padding:"10px",boxSizing:"border-box",overflow:"hidden",transform:"none",margin:"0",inset:"0",willChange:"auto"}},e.createElement("div",{className:"player-stats-content",style:{background:"rgba(35, 35, 42, 0.16)",borderRadius:"18px",maxWidth:"95vw",width:window.innerWidth<=768?"320px":"600px",maxHeight:"85vh",overflowY:"auto",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 4px 32px #e53e3e22, 0 0 16px #e53e3e11",boxSizing:"border-box",position:"relative"}},e.createElement("div",{className:"player-stats-header"},e.createElement("h3",null,y?`${r.firstName} ${r.lastName?r.lastName.charAt(0)+".":""}`:`${r.firstName} ${r.lastName}`),e.createElement("div",{style:{display:"flex",gap:"10px",alignItems:"center"}},e.createElement("button",{className:"stats-close-btn",onClick:()=>t(!1)},"×"))),!((M=r.unifiedAccount)!=null&&M.hasUnifiedAccount)&&e.createElement("div",{style:{padding:"0 20px 15px 20px",textAlign:"center"}},e.createElement("button",{onClick:()=>{t(!1),f(!0)},style:{background:"#4CAF50",color:"white",border:"none",borderRadius:"8px",padding:window.innerWidth<=768?"10px 16px":"12px 24px",fontSize:window.innerWidth<=768?"14px":"16px",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 12px rgba(76, 175, 80, 0.3)",transition:"all 0.3s ease",width:window.innerWidth<=768?"100%":"auto",boxSizing:"border-box"},onMouseOver:N=>{N.target.style.background="#45a049",N.target.style.transform="translateY(-2px)"},onMouseOut:N=>{N.target.style.background="#4CAF50",N.target.style.transform="translateY(0)"}},"✅ Complete Profile & Subscribe ($5/month)"),e.createElement("p",{style:{fontSize:window.innerWidth<=768?"10px":"12px",color:"#888",margin:window.innerWidth<=768?"6px 0 0 0":"8px 0 0 0",fontStyle:"italic",lineHeight:window.innerWidth<=768?"1.3":"normal"}},"Verify your profile details and subscribe for full ladder access")),e.createElement("div",{className:"player-stats-body"},e.createElement("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap"}},e.createElement("div",{style:{flex:"1",minWidth:"200px"}},e.createElement("div",{className:"stats-grid"},e.createElement("div",{className:"stat-item"},e.createElement("div",{className:"stat-label"},"Rank"),e.createElement("div",{className:"stat-value"},"#",v.position||"N/A")),e.createElement("div",{className:"stat-item"},e.createElement("div",{className:"stat-label"},"FargoRate"),e.createElement("div",{className:"stat-value"},v.fargoRate===0?"No FargoRate":v.fargoRate||"N/A")),e.createElement("div",{className:"stat-item"},e.createElement("div",{className:"stat-label"},"Wins"),e.createElement("div",{className:"stat-value wins"},v.wins||0)),e.createElement("div",{className:"stat-item"},e.createElement("div",{className:"stat-label"},"Losses"),e.createElement("div",{className:"stat-value losses"},v.losses||0)),e.createElement("div",{className:"stat-item"},e.createElement("div",{className:"stat-label"},"Status"),e.createElement("div",{className:"stat-value status"},(()=>{const N=m(r);return e.createElement("span",{className:N.className},N.text)})())),r.immunityUntil&&new Date(r.immunityUntil)>new Date&&e.createElement("div",{className:"stat-item"},e.createElement("div",{className:"stat-label"},"Immunity Until"),e.createElement("div",{className:"stat-value"},Jl(r.immunityUntil))))),e.createElement("div",{style:{flex:"1",minWidth:"200px"}},e.createElement("div",{className:"stat-item"},e.createElement("div",{className:"stat-label"},"Last Match"),e.createElement("div",{className:"stat-value"},x?e.createElement("div",{className:"last-match-info"},e.createElement("div",{className:"match-opponent"},"vs ",y?(()=>{const N=x.opponentName.split(" ");return N.length>=2?N[0]+" "+N[1].charAt(0)+".":x.opponentName})():x.opponentName),e.createElement("div",{className:`match-result ${x.result==="W"?"win":"loss"}`},x.result==="W"?"Won":"Lost"," ",x.score),e.createElement("div",{className:"match-type"},x.matchType==="challenge"?"Challenge Match":x.matchType==="ladder-jump"?"Ladder Jump":x.matchType==="smackdown"?"SmackDown":x.matchType==="smackback"?"SmackBack":x.matchType),e.createElement("div",{className:"player-role"},x.playerRole==="challenger"?"Challenger":x.playerRole==="defender"?"Defender":"Player"),e.createElement("div",{className:"match-date"},Jl(x.matchDate))):e.createElement("span",{className:"no-match"},"No recent matches"))),e.createElement("div",{className:"stat-item"},e.createElement("div",{className:"stat-label"},"Match History"),e.createElement("div",{className:"stat-value"},k.length>1?e.createElement("div",{className:"match-history-list",style:{maxHeight:"150px",overflowY:"auto"}},console.log("🔍 Rendering match history, slice(1,3):",k.slice(1,3)),k.slice(1,3).map((N,_)=>e.createElement("div",{key:_,className:"match-history-item",style:{padding:"6px",borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:"11px",marginBottom:"2px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("span",{className:`match-result ${N.result==="W"?"win":"loss"}`},N.result==="W"?"W":"L"),e.createElement("span",{style:{color:"#ccc"}},"vs ",y?(()=>{const P=N.opponentName.split(" ");return P.length>=2?P[0]+" "+P[1].charAt(0)+".":N.opponentName})():N.opponentName),e.createElement("span",{style:{color:"#888",fontSize:"10px"}},Jl(N.matchDate))),e.createElement("div",{style:{fontSize:"10px",color:"#888",marginTop:"2px"}},N.score," • ",N.matchType," • ",KU(N.matchDate)))),k.length>3&&e.createElement("div",{style:{textAlign:"center",padding:"8px"}},e.createElement("button",{onClick:()=>{console.log("🔍 Show More button clicked! Setting showFullMatchHistory to true"),console.log("🔍 Current showFullMatchHistory state:",c),t(!1),u(!0),console.log("🔍 After setting showFullMatchHistory to true")},style:{background:"rgba(255, 68, 68, 0.2)",border:"1px solid #ff4444",color:"#ff4444",padding:"4px 8px",borderRadius:"4px",fontSize:"10px",cursor:"pointer"}},"Show More (",k.length-3," more)"))):k.length===1?e.createElement("span",{className:"no-match"},"No previous matches"):e.createElement("span",{className:"no-match"},"No match history available")))))))),I=document.body;return I?Jr.createPortal(E,I):(console.error("🔍 No portal target found, rendering inline"),E)});hS.displayName="PlayerStatsModal";const yS=h.memo(({showFullMatchHistory:a,selectedPlayerForStats:r,setShowFullMatchHistory:t,setShowMobilePlayerStats:n,playerMatchHistory:o,isPublicView:i})=>{if(!a||!r)return null;const c=e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.9)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:999999,padding:"20px",backdropFilter:"blur(10px)"}},e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"2px solid #8B5CF6",borderRadius:"12px",width:"auto",maxWidth:"500px",minWidth:"400px",maxHeight:"80vh",display:"flex",flexDirection:"column",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",color:"#ffffff"}},e.createElement("div",{style:{padding:"20px",borderBottom:"1px solid #ff4444",display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("h2",{style:{color:"#ff4444",margin:0}},"🏆 ",r.firstName," ",r.lastName," - Full Match History"),e.createElement("button",{onClick:()=>{t(!1),n(!0)},style:{background:"none",border:"none",color:"#ff4444",fontSize:"24px",cursor:"pointer",padding:"5px"}},"×")),e.createElement("div",{style:{flex:1,overflowY:"auto",padding:"20px"}},o.length>0?e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",overflow:"hidden"}},o.map((u,m)=>(console.log("🔍 Match data:",u),console.log("🔍 Match location:",u.location),console.log("🔍 Match positionBefore:",u.positionBefore),console.log("🔍 Match positionAfter:",u.positionAfter),console.log("🔍 All match keys:",Object.keys(u)),console.log("🔍 Match venue (raw):",u.venue),console.log("🔍 Match player1OldPosition (raw):",u.player1OldPosition),console.log("🔍 Match player1NewPosition (raw):",u.player1NewPosition),e.createElement("div",{key:m,style:{padding:"15px",borderBottom:m<o.length-1?"1px solid rgba(255, 255, 255, 0.1)":"none",display:"flex",alignItems:"center",gap:"15px"}},e.createElement("div",{style:{minWidth:"60px"}},e.createElement("span",{style:{background:u.result==="W"?"rgba(34, 197, 94, 0.2)":"rgba(239, 68, 68, 0.2)",color:u.result==="W"?"#22c55e":"#ef4444",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",display:"block",textAlign:"center"}},u.result==="W"?"WIN":"LOSS")),e.createElement("div",{style:{minWidth:"120px"}},e.createElement("div",{style:{color:"#fff",fontWeight:"bold"}},"vs ",u.opponentName)),e.createElement("div",{style:{flex:1,textAlign:"center"}},e.createElement("div",{style:{color:"#ccc",fontSize:"15px",marginBottom:"3px"}},u.score," • ",u.matchType," • ",u.playerRole),e.createElement("div",{style:{color:"#999",fontSize:"13px"}},u.location||"Location TBD"," • Pos ",u.positionBefore||"?"," → ",u.positionAfter||"?")),e.createElement("div",{style:{minWidth:"80px",textAlign:"right"}},e.createElement("div",{style:{color:"#888",fontSize:"12px"}},new Date(u.matchDate).toLocaleDateString())))))):e.createElement("div",{style:{textAlign:"center",color:"#ccc",padding:"40px",fontSize:"16px"}},"No match history available"))));return i?c:h.createPortal(c,document.body)});yS.displayName="FullMatchHistoryModal";const bS=h.memo(({userLadderData:a,setShowUnifiedSignup:r,setShowProfileModal:t,isAdmin:n})=>{const o=er();return e.createElement("div",{className:"user-status-card"},e.createElement("div",{className:"status-info"},e.createElement("h3",null,"Your Ladder Status"),e.createElement("div",{className:"status-details"},e.createElement("div",{className:"status-item"},e.createElement("span",{className:"label"},"Ladder:"),e.createElement("span",{className:"value"},a!=null&&a.needsClaim||(a==null?void 0:a.playerId)==="unknown"?"None":(a==null?void 0:a.ladder)==="499-under"?"499 & Under":(a==null?void 0:a.ladder)==="500-549"?"500-549":(a==null?void 0:a.ladder)==="550+"?"550+":"None")),e.createElement("div",{className:"status-item"},e.createElement("span",{className:"label"},"Position:"),e.createElement("span",{className:"value"},a!=null&&a.needsClaim||(a==null?void 0:a.playerId)==="unknown"?"Not on ladder":(a==null?void 0:a.position)||"Not on ladder")),e.createElement("div",{className:"status-item"},e.createElement("span",{className:"label"},"FargoRate:"),e.createElement("span",{className:"value"},a!=null&&a.needsClaim||(a==null?void 0:a.playerId)==="unknown"?"N/A":(a==null?void 0:a.fargoRate)===0?"No FargoRate":(a==null?void 0:a.fargoRate)||"N/A")),(a==null?void 0:a.immunityUntil)&&e.createElement("div",{className:"status-item immunity"},e.createElement("span",{className:"label"},"Immunity Until:"),e.createElement("span",{className:"value"},Jl(a.immunityUntil))),(a==null?void 0:a.playerId)==="ladder"&&e.createElement("div",{className:"status-item payment-status"},e.createElement("span",{className:"label"},"Challenge Access:"),e.createElement("span",{className:"value",style:{color:"#ffc107",cursor:"pointer"},onClick:async()=>{(await ZU(a.email)).isCurrent?alert(`✅ Payment Current!

Your $5/month subscription is active.
You can participate in challenges and defenses.`):VU(()=>o("/"),()=>console.log("User cancelled payment"))}},"💳 Payment Required - Click to verify status")),(a==null?void 0:a.needsClaim)&&!n&&e.createElement("div",{className:"status-item claim-notice",style:{cursor:"pointer"},onClick:()=>t(!0),onMouseOver:i=>{i.currentTarget.style.backgroundColor="rgba(33, 150, 243, 0.1)",i.currentTarget.style.transform="translateY(-1px)"},onMouseOut:i=>{i.currentTarget.style.backgroundColor="",i.currentTarget.style.transform="translateY(0)"}},e.createElement("span",{className:"label"},"Account Status:"),e.createElement("span",{className:"value",style:{color:"#2196F3"}},"Not Active - Click to join ladder")),(a==null?void 0:a.playerId)==="unknown"&&e.createElement("div",{className:"status-item unknown-notice",style:{cursor:"pointer"},onClick:()=>r(!0),onMouseOver:i=>{i.currentTarget.style.backgroundColor="rgba(255, 193, 7, 0.1)",i.currentTarget.style.transform="translateY(-1px)"},onMouseOut:i=>{i.currentTarget.style.backgroundColor="",i.currentTarget.style.transform="translateY(0)"}},e.createElement("span",{className:"label"},"Account Status:"),e.createElement("span",{className:"value",style:{color:"#ffc107"}},"Not Active - Click to join ladder")))))});bS.displayName="UserStatusCard";class vs extends h.Component{constructor(t){super(t);gt(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,n){console.error("LadderErrorBoundary caught an error:",t),console.error("Error message:",t==null?void 0:t.message),console.error("Error stack:",t==null?void 0:t.stack),console.error("Component stack:",n==null?void 0:n.componentStack),this.setState({error:t,errorInfo:n})}render(){return this.state.hasError?e.createElement("div",{style:{padding:"20px",margin:"20px",border:"2px solid #8B5CF6",borderRadius:"12px",backgroundColor:"rgba(139, 92, 246, 0.1)",color:"#8B5CF6",textAlign:"center"}},e.createElement("h3",{style:{margin:"0 0 12px 0",color:"#8B5CF6"}},"🏆 Ladder System Error"),e.createElement("p",{style:{margin:"0 0 16px 0",color:"#666"}},"There was an issue loading the ladder data. This won't affect other parts of the app."),!1,e.createElement("button",{onClick:this.handleRetry,style:{background:"#8B5CF6",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",cursor:"pointer",fontSize:"14px",marginRight:"8px"}},"Retry"),e.createElement("button",{onClick:()=>window.location.reload(),style:{background:"#666",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",cursor:"pointer",fontSize:"14px"}},"Refresh")):this.props.children}}const vS=({isOpen:a,onClose:r,challenger:t,defender:n,challengeType:o="challenge",onChallengeComplete:i})=>{const[c,u]=h.useState({entryFee:"",raceLength:"",gameType:"9-ball",tableSize:"9-foot",preferredDates:[],preferredTimes:{},postContent:"",location:"Legends Brews & Cues"}),[m,g]=h.useState(!1),[f,y]=h.useState(!1),[v,S]=h.useState("");h.useEffect(()=>{if(n&&n.ladderName){const P={"499-under":{entryFee:20,raceLength:5},"500-549":{entryFee:25,raceLength:7},"550-plus":{entryFee:50,raceLength:7}},B=P[n.ladderName]||P["499-under"];u(R=>({...R,entryFee:B.entryFee.toString(),raceLength:B.raceLength.toString()}))}},[n]);const w=P=>{const{name:B,value:R}=P.target;u(W=>({...W,[B]:R}))},x=()=>{const P=document.getElementById("preferredDate").value,B=document.getElementById("preferredTime").value||"19:00";P&&(u(R=>({...R,preferredDates:[...R.preferredDates,P],preferredTimes:{...R.preferredTimes,[P]:B}})),document.getElementById("preferredDate").value="",document.getElementById("preferredTime").value="19:00")},k=P=>{const B=c.preferredDates[P];u(R=>{const W={...R.preferredTimes};return delete W[B],{...R,preferredDates:R.preferredDates.filter((L,F)=>F!==P),preferredTimes:W}})},E=(P,B)=>{u(R=>({...R,preferredTimes:{...R.preferredTimes,[P]:B}}))},I=P=>{var F,j;const B=new Date(P).toLocaleDateString("en-US",{weekday:"lowercase"}),R=((F=t.availability)==null?void 0:F[B])||[],W=((j=n.availability)==null?void 0:j[B])||[],L=R.filter(J=>W.includes(J));return{challengerTimes:R,defenderTimes:W,overlappingTimes:L}},M=()=>{const B={challenge:"Challenge Match",smackdown:"SmackDown Match",smackback:"SmackBack Match"}[o]||"Challenge Match",R=c.preferredDates.map(W=>{const L=c.preferredTimes[W]||"19:00",F=new Date(W).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),j=new Date(`2000-01-01T${L}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return`${F} at ${j}`}).join(", ");return`🏆 ${B} 🏆

${t.firstName} ${t.lastName} (Position ${t.position}) is calling out ${n.firstName} ${n.lastName} (Position ${n.position}) for a ${B.toLowerCase()}!

💰 Entry Fee: $${c.entryFee}
🎯 Race to: ${c.raceLength}
🎱 Game: ${c.gameType}
🏓 Table: ${c.tableSize}
📍 Location: ${c.location}
⏰ Proposed Times: ${R}

${c.postContent?`
💬 Message: ${c.postContent}`:""}

${n.firstName}, you have 3 days to respond! ⏰`},N=async P=>{P.preventDefault(),g(!0),S("");try{const B={challengerEmail:t.email,defenderEmail:n.email,challengeType:o,entryFee:parseInt(c.entryFee),raceLength:parseInt(c.raceLength),gameType:c.gameType,tableSize:c.tableSize,preferredDates:c.preferredDates,preferredTimes:c.preferredTimes,postContent:M(),location:c.location},R=await fetch(`${de}/api/ladder/challenge`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)}),W=await R.json();if(!R.ok)throw new Error(W.error||"Failed to create challenge");y(!0),i&&i(W)}catch(B){console.error("Error creating challenge:",B),S(B.message)}finally{g(!1)}},_=()=>{y(!1),r()};return a?f?e.createElement(Bt,{open:!0,onClose:_,title:"🎯 Challenge Sent!",maxWidth:"500px"},e.createElement("div",{style:{padding:"20px",textAlign:"center"}},e.createElement("div",{style:{fontSize:"48px",marginBottom:"16px"}},"✅"),e.createElement("h3",{style:{color:"#ff4444",marginBottom:"16px"}},"Challenge Successfully Sent!"),e.createElement("p",{style:{color:"#e0e0e0",marginBottom:"20px"}},"Your ",o," challenge has been sent to ",n.firstName," ",n.lastName,"."),e.createElement("p",{style:{color:"#ccc",fontSize:"0.9rem",marginBottom:"20px"}},"They have 3 days to respond. You'll be notified when they accept, decline, or counter-propose."),e.createElement("button",{onClick:_,style:{background:"linear-gradient(135deg, #ff4444, #cc3333)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"}},"Close"))):e.createElement(Bt,{open:!0,onClose:r,title:`⚔️ ${o.charAt(0).toUpperCase()+o.slice(1)} Challenge`,maxWidth:"600px",className:"ladder-challenge-modal",borderColor:"#5b21b6",glowColor:"#5b21b6"},e.createElement("div",{style:{padding:"16px"}},e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"6px",padding:"8px",marginBottom:"12px"}},e.createElement("h3",{style:{color:"#ff4444",margin:"0 0 6px 0",textAlign:"center",fontSize:"1rem"}},t.firstName," ",t.lastName," vs ",n.firstName," ",n.lastName),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",color:"#e0e0e0",fontSize:"0.8rem"}},e.createElement("div",{style:{textAlign:"left"}},e.createElement("strong",null,"Challenger:")," Pos ",t.position," • ",t.ladderName),e.createElement("div",{style:{fontSize:"16px",color:"#ff4444",margin:"0 8px"}},"⚔️"),e.createElement("div",{style:{textAlign:"right"}},e.createElement("strong",null,"Defender:")," Pos ",n.position," • ",n.ladderName))),e.createElement("form",{onSubmit:N},e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("h4",{style:{color:"#ffc107",marginBottom:"8px",fontSize:"1rem"}},"Match Details"),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-column"},e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px",fontSize:"0.9rem"}},"Entry Fee ($)"),e.createElement("input",{type:"number",name:"entryFee",value:c.entryFee,onChange:w,required:!0,min:"1",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",fontSize:"0.9rem"}})),e.createElement("div",{className:"form-column"},e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px",fontSize:"0.9rem"}},"Race Length"),e.createElement("select",{name:"raceLength",value:c.raceLength,onChange:w,required:!0,style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",fontSize:"0.9rem"}},Array.from({length:16},(P,B)=>B+5).map(P=>e.createElement("option",{key:P,value:P},P))))),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-column"},e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px",fontSize:"0.9rem"}},"Game Type"),e.createElement("select",{name:"gameType",value:c.gameType,onChange:w,style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",fontSize:"0.9rem"}},e.createElement("option",{value:"9-ball"},"9-Ball"),e.createElement("option",{value:"8-ball"},"8-Ball"),e.createElement("option",{value:"10-ball"},"10-Ball"),e.createElement("option",{value:"mixed"},"Mixed"))),e.createElement("div",{className:"form-column"},e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px",fontSize:"0.9rem"}},"Table Size"),e.createElement("select",{name:"tableSize",value:c.tableSize,onChange:w,style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",fontSize:"0.9rem"}},e.createElement("option",{value:"9-foot"},"9-Foot"),e.createElement("option",{value:"7-foot"},"7-Foot")))),e.createElement("div",null,e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px",fontSize:"0.9rem"}},"Location"),e.createElement("select",{name:"location",value:c.location,onChange:w,style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",fontSize:"0.9rem"}},e.createElement("option",{value:"Legends Brews & Cues"},"Legends Brews & Cues"),e.createElement("option",{value:"Antiques"},"Antiques"),e.createElement("option",{value:"Rac m"},"Rac m"),e.createElement("option",{value:"Westside Billiards"},"Westside Billiards"),e.createElement("option",{value:"Bijou Billiards"},"Bijou Billiards"),e.createElement("option",{value:"Crooked Cue"},"Crooked Cue"),e.createElement("option",{value:"Back on the Boulevard"},"Back on the Boulevard"),e.createElement("option",{value:"Main Street Tavern"},"Main Street Tavern"),e.createElement("option",{value:"Murray Street Darts"},"Murray Street Darts"),e.createElement("option",{value:"My House"},"My House")))),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("h4",{style:{color:"#ffc107",marginBottom:"8px",fontSize:"1rem"}},"Preferred Dates & Times"),e.createElement("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"}},e.createElement("input",{type:"date",id:"preferredDate",style:{flex:1,padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",fontSize:"0.9rem"}}),e.createElement("input",{type:"time",id:"preferredTime",defaultValue:"19:00",style:{padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",fontSize:"0.9rem",width:"120px"}}),e.createElement("button",{type:"button",onClick:x,style:{padding:"8px 16px",background:"#ff4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"}},"Add")),c.preferredDates.length>0&&e.createElement("div",{style:{marginTop:"8px"}},e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"8px",fontSize:"0.9rem"}},"Selected Dates & Times:"),c.preferredDates.map((P,B)=>{const R=I(P),W=c.preferredTimes[P]||"19:00";return e.createElement("div",{key:B,style:{padding:"12px",background:"rgba(255, 68, 68, 0.1)",borderRadius:"6px",marginBottom:"8px",border:"1px solid rgba(255, 68, 68, 0.3)"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"12px"}},e.createElement("span",{style:{color:"#e0e0e0",fontSize:"0.9rem",fontWeight:"bold"}},new Date(P).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})),e.createElement("input",{type:"time",value:W,onChange:L=>E(P,L.target.value),style:{padding:"4px 8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",fontSize:"0.85rem",width:"100px"}})),e.createElement("button",{type:"button",onClick:()=>k(B),style:{background:"none",border:"none",color:"#ff4444",cursor:"pointer",fontSize:"16px",padding:"4px"}},"×")),R.overlappingTimes.length>0&&e.createElement("div",{style:{marginBottom:"6px"}},e.createElement("div",{style:{color:"#4CAF50",fontSize:"0.8rem",marginBottom:"4px"}},"✅ Both available at: ",R.overlappingTimes.join(", "))),e.createElement("div",{style:{display:"flex",gap:"12px",fontSize:"0.75rem"}},e.createElement("div",{style:{color:"#81C784"}},"You: ",R.challengerTimes.length>0?R.challengerTimes.join(", "):"No availability set"),e.createElement("div",{style:{color:"#FFB74D"}},n.firstName,": ",R.defenderTimes.length>0?R.defenderTimes.join(", "):"No availability set")))}))),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px",fontSize:"0.9rem"}},"Additional Message (Optional)"),e.createElement("textarea",{name:"postContent",value:c.postContent,onChange:w,rows:"2",placeholder:"Add any additional message for your challenge...",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",resize:"vertical",fontSize:"0.9rem"}})),v&&e.createElement("div",{style:{background:"rgba(255, 0, 0, 0.1)",border:"1px solid #ff0000",borderRadius:"4px",padding:"8px",marginBottom:"12px",color:"#ff6666",fontSize:"0.9rem"}},v),e.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"}},e.createElement("button",{type:"button",onClick:r,style:{padding:"10px 20px",background:"#666",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem"}},"Cancel"),e.createElement("button",{type:"submit",disabled:m,style:{padding:"10px 20px",background:m?"#666":"linear-gradient(135deg, #ff4444, #cc3333)",color:"white",border:"none",borderRadius:"8px",cursor:m?"not-allowed":"pointer",fontSize:"0.9rem",fontWeight:"bold"}},m?"Sending...":"Send Challenge"))))):null},a$=({isOpen:a,onClose:r,challenge:t,currentUser:n,onCounterProposalSubmitted:o})=>{var P,B,R,W,L;const[i,c]=h.useState({entryFee:((P=t==null?void 0:t.matchDetails)==null?void 0:P.entryFee)||5,raceLength:((B=t==null?void 0:t.matchDetails)==null?void 0:B.raceLength)||5,gameType:((R=t==null?void 0:t.matchDetails)==null?void 0:R.gameType)||"8-ball",tableSize:((W=t==null?void 0:t.matchDetails)==null?void 0:W.tableSize)||"7-foot",location:((L=t==null?void 0:t.matchDetails)==null?void 0:L.location)||"Legends Brews & Cues",preferredDates:[],note:""}),[u,m]=h.useState(!1),[g,f]=h.useState(""),[y,v]=h.useState(""),S=["8-ball","9-ball","10-ball","mixed"],w=["7-foot","9-foot"],x=["Legends Brews & Cues","Shooters Pool Hall","Rack Em Up","The Break Room","Corner Pocket","Cue Club","Pool Palace","Billiards & Brews","The Rack","My House"],k=[3,5,7,9,11,13,15,17,19,21],E=(F,j)=>{c(J=>({...J,[F]:j}))},I=()=>{y&&!i.preferredDates.includes(y)&&(c(F=>({...F,preferredDates:[...F.preferredDates,y]})),v(""))},M=F=>{c(j=>({...j,preferredDates:j.preferredDates.filter(J=>J!==F)}))},N=async()=>{m(!0),f("");try{const F=await fetch(`${de}/api/ladder/challenge/${t._id}/counter-proposal`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({counterProposal:{...i,preferredDates:i.preferredDates}})}),j=await F.json();if(!F.ok)throw new Error(j.error||"Failed to submit counter-proposal");await _({to_email:t.challenger.email,to_name:`${t.challenger.firstName} ${t.challenger.lastName}`,from_name:`${n.firstName} ${n.lastName}`,original_challenge_type:t.challengeType,original_entry_fee:t.matchDetails.entryFee,original_race_length:t.matchDetails.raceLength,original_game_type:t.matchDetails.gameType,original_location:t.matchDetails.location,counter_entry_fee:i.entryFee,counter_race_length:i.raceLength,counter_game_type:i.gameType,counter_location:i.location,counter_dates:i.preferredDates,counter_note:i.note,challenge_id:t._id}),o&&o("counter-proposed",j),r()}catch(F){console.error("Error submitting counter-proposal:",F),f(F.message)}finally{m(!1)}},_=async F=>{try{(await fetch(`${de}/api/email/send-counter-proposal`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)})).ok||console.error("Failed to send counter-proposal email")}catch(j){console.error("Error sending counter-proposal email:",j)}};return!a||!t?null:e.createElement(Bt,{open:!0,onClose:r,title:"🔄 Counter-Proposal",maxWidth:"700px"},e.createElement("div",{style:{padding:"20px"}},e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"8px",padding:"16px",marginBottom:"20px"}},e.createElement("h4",{style:{color:"#ff4444",margin:"0 0 12px 0"}},"Original Challenge"),e.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.9rem"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"}},e.createElement("div",null,e.createElement("strong",null,"Entry Fee:")," $",t.matchDetails.entryFee),e.createElement("div",null,e.createElement("strong",null,"Race Length:")," ",t.matchDetails.raceLength),e.createElement("div",null,e.createElement("strong",null,"Game Type:")," ",t.matchDetails.gameType),e.createElement("div",null,e.createElement("strong",null,"Location:")," ",t.matchDetails.location)))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h4",{style:{color:"#10b981",marginBottom:"16px"}},"Your Counter-Proposal"),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px"}},"Entry Fee ($)"),e.createElement("input",{type:"number",value:i.entryFee,onChange:F=>E("entryFee",parseInt(F.target.value)||0),min:"0",max:"50",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff"}})),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px"}},"Race Length"),e.createElement("select",{value:i.raceLength,onChange:F=>E("raceLength",parseInt(F.target.value)),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff"}},k.map(F=>e.createElement("option",{key:F,value:F},"Race to ",F)))),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px"}},"Game Type"),e.createElement("select",{value:i.gameType,onChange:F=>E("gameType",F.target.value),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff"}},S.map(F=>e.createElement("option",{key:F,value:F},F.charAt(0).toUpperCase()+F.slice(1))))),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px"}},"Table Size"),e.createElement("select",{value:i.tableSize,onChange:F=>E("tableSize",F.target.value),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff"}},w.map(F=>e.createElement("option",{key:F,value:F},F)))),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px"}},"Location"),e.createElement("select",{value:i.location,onChange:F=>E("location",F.target.value),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff"}},x.map(F=>e.createElement("option",{key:F,value:F},F)))),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px"}},"Preferred Dates"),e.createElement("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"}},e.createElement("input",{type:"date",value:y,onChange:F=>v(F.target.value),min:t$(),style:{flex:1,padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff"}}),e.createElement("button",{type:"button",onClick:I,disabled:!y,style:{padding:"8px 16px",background:y?"#10b981":"#666",color:"white",border:"none",borderRadius:"4px",cursor:y?"pointer":"not-allowed"}},"Add")),i.preferredDates.length>0&&e.createElement("div",{style:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"4px",padding:"8px",maxHeight:"120px",overflowY:"auto"}},i.preferredDates.map((F,j)=>e.createElement("div",{key:j,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0",borderBottom:j<i.preferredDates.length-1?"1px solid #444":"none"}},e.createElement("span",{style:{color:"#e0e0e0",fontSize:"0.9rem"}},new Date(F).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})),e.createElement("button",{type:"button",onClick:()=>M(F),style:{background:"#dc2626",color:"white",border:"none",borderRadius:"3px",padding:"2px 6px",cursor:"pointer",fontSize:"0.8rem"}},"Remove"))))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px"}},"Counter-Proposal Note"),e.createElement("textarea",{value:i.note,onChange:F=>E("note",F.target.value),rows:"3",placeholder:"Explain your counter-proposal...",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",resize:"vertical"}}))),g&&e.createElement("div",{style:{background:"rgba(255, 0, 0, 0.1)",border:"1px solid #ff0000",borderRadius:"4px",padding:"8px",marginBottom:"16px",color:"#ff6666"}},g),e.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"}},e.createElement("button",{onClick:r,disabled:u,style:{padding:"12px 24px",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:u?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"}},"Cancel"),e.createElement("button",{onClick:N,disabled:u||i.preferredDates.length===0,style:{padding:"12px 24px",background:u||i.preferredDates.length===0?"#666":"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"8px",cursor:u||i.preferredDates.length===0?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"}},u?"Submitting...":i.preferredDates.length===0?"Add Dates First":"Submit Counter-Proposal"))))},n$=({isOpen:a,onClose:r,challenge:t,currentUser:n,onChallengeResponse:o})=>{const[i,c]=h.useState(""),[u,m]=h.useState(!1),[g,f]=h.useState(""),[y,v]=h.useState(!1),[S,w]=h.useState(""),x=async()=>{m(!0),f("");try{const _=await fetch(`${de}/api/ladder/challenge/${t._id}/accept`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:i,selectedDate:S})}),P=await _.json();if(!_.ok)throw new Error(P.error||"Failed to accept challenge");await I({to_email:t.challenger.email,to_name:`${t.challenger.firstName} ${t.challenger.lastName}`,from_name:`${n.firstName} ${n.lastName}`,challenge_type:t.challengeType,entry_fee:t.matchDetails.entryFee,race_length:t.matchDetails.raceLength,game_type:t.matchDetails.gameType,location:t.matchDetails.location,note:i,challenge_id:t._id,match_date:S}),o&&o("accepted",P),r()}catch(_){console.error("Error accepting challenge:",_),f(_.message)}finally{m(!1)}},k=async()=>{m(!0),f("");try{const _=await fetch(`${de}/api/ladder/challenge/${t._id}/decline`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:i})}),P=await _.json();if(!_.ok)throw new Error(P.error||"Failed to decline challenge");o&&o("declined",P),r()}catch(_){console.error("Error declining challenge:",_),f(_.message)}finally{m(!1)}},E=()=>{v(!0)},I=async _=>{try{(await fetch(`${de}/api/email/send-challenge-confirmation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).ok||console.error("Failed to send confirmation email")}catch(P){console.error("Error sending confirmation email:",P)}},M=_=>({challenge:"Challenge Match",smackdown:"SmackDown Match",smackback:"SmackBack Match"})[_]||_,N=()=>t.challengeType==="challenge"?"If you win: Positions remain unchanged. If challenger wins: You switch positions.":t.challengeType==="smackdown"?"If challenger wins: You move 3 spots down, challenger moves 2 spots up. If you win: You switch positions.":t.challengeType==="smackback"?"If challenger wins: They move to 1st place, all others move down. If you win: Positions remain unchanged.":"";return!a||!t?null:e.createElement(Bt,{open:!0,onClose:r,title:`🎯 ${M(t.challengeType)}`,maxWidth:"600px"},e.createElement("div",{style:{padding:"20px"}},e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"8px",padding:"16px",marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ff4444",margin:"0 0 12px 0",textAlign:"center"}},t.challenger.firstName," ",t.challenger.lastName," vs ",t.defender.firstName," ",t.defender.lastName),e.createElement("div",{style:{display:"flex",justifyContent:"space-around",color:"#e0e0e0"}},e.createElement("div",null,e.createElement("strong",null,"Challenger:"),e.createElement("br",null),"Position ",t.challenger.position,e.createElement("br",null),t.challenger.ladderName),e.createElement("div",{style:{fontSize:"24px",color:"#ff4444"}},"⚔️"),e.createElement("div",null,e.createElement("strong",null,"Defender:"),e.createElement("br",null),"Position ",t.defender.position,e.createElement("br",null),t.defender.ladderName))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h4",{style:{color:"#ffc107",marginBottom:"12px"}},"Match Details"),e.createElement("div",{style:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",padding:"16px",color:"#e0e0e0"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"12px"}},e.createElement("div",null,e.createElement("strong",null,"Entry Fee:")," $",t.matchDetails.entryFee),e.createElement("div",null,e.createElement("strong",null,"Race Length:")," ",t.matchDetails.raceLength)),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"12px"}},e.createElement("div",null,e.createElement("strong",null,"Game Type:")," ",t.matchDetails.gameType),e.createElement("div",null,e.createElement("strong",null,"Table Size:")," ",t.matchDetails.tableSize)),e.createElement("div",null,e.createElement("strong",null,"Location:")," ",t.matchDetails.location)),e.createElement("div",{style:{background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"8px",padding:"12px",marginTop:"12px",textAlign:"center"}},e.createElement("div",{style:{color:"#10b981",fontWeight:"bold",marginBottom:"4px"}},"💰 Match Fee Information"),e.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.9rem"}},"The ",e.createElement("strong",null,"winner")," reports the match and pays the ",e.createElement("strong",null,"$5 match fee"),".",e.createElement("br",null),e.createElement("em",null,"Only one $5 fee per match - not per player!")))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h4",{style:{color:"#ffc107",marginBottom:"12px"}},"Position Changes"),e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",padding:"12px",color:"#e0e0e0",fontSize:"0.9rem",lineHeight:"1.4"}},N())),t.challengePost.postContent&&e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h4",{style:{color:"#ffc107",marginBottom:"12px"}},"Challenge Message"),e.createElement("div",{style:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",padding:"12px",color:"#e0e0e0",fontSize:"0.9rem",lineHeight:"1.4",whiteSpace:"pre-line"}},t.challengePost.postContent)),t.matchDetails.preferredDates&&t.matchDetails.preferredDates.length>0&&e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h4",{style:{color:"#ffc107",marginBottom:"12px"}},"Select Match Date"),e.createElement("div",{style:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",padding:"12px",color:"#e0e0e0"}},e.createElement("p",{style:{marginBottom:"12px",fontSize:"0.9rem",color:"#ccc"}},"Choose from the challenger's preferred dates:"),t.matchDetails.preferredDates.map((_,P)=>e.createElement("label",{key:P,style:{display:"block",marginBottom:"8px",cursor:"pointer",padding:"8px",borderRadius:"4px",background:S===_?"rgba(16, 185, 129, 0.2)":"transparent",border:S===_?"1px solid #10b981":"1px solid transparent",transition:"all 0.2s ease"}},e.createElement("input",{type:"radio",name:"selectedDate",value:_,checked:S===_,onChange:B=>w(B.target.value),style:{marginRight:"8px"}}),new Date(_).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))),S&&e.createElement("div",{style:{marginTop:"12px",padding:"8px",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"4px",color:"#10b981",fontSize:"0.9rem"}},"✅ Match scheduled for: ",new Date(S).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})))),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("label",{style:{color:"#e0e0e0",display:"block",marginBottom:"4px"}},"Your Response Note (Optional)"),e.createElement("textarea",{value:i,onChange:_=>c(_.target.value),rows:"3",placeholder:"Add a note to your response...",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#333",color:"#fff",resize:"vertical"}})),g&&e.createElement("div",{style:{background:"rgba(255, 0, 0, 0.1)",border:"1px solid #ff0000",borderRadius:"4px",padding:"8px",marginBottom:"16px",color:"#ff6666"}},g),e.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"space-between"}},e.createElement("button",{onClick:k,disabled:u,style:{padding:"12px 24px",background:u?"#666":"#dc2626",color:"white",border:"none",borderRadius:"8px",cursor:u?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"}},u?"Processing...":"Decline"),e.createElement("div",{style:{display:"flex",gap:"8px"}},e.createElement("button",{onClick:E,disabled:u,style:{padding:"12px 24px",background:u?"#666":"#f59e0b",color:"white",border:"none",borderRadius:"8px",cursor:u?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"}},"Counter"),e.createElement("button",{onClick:x,disabled:u||t.matchDetails.preferredDates&&t.matchDetails.preferredDates.length>0&&!S,style:{padding:"12px 24px",background:u||t.matchDetails.preferredDates&&t.matchDetails.preferredDates.length>0&&!S?"#666":"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"8px",cursor:u||t.matchDetails.preferredDates&&t.matchDetails.preferredDates.length>0&&!S?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"}},u?"Processing...":t.matchDetails.preferredDates&&t.matchDetails.preferredDates.length>0&&!S?"Select Date First":"Accept"))),e.createElement("div",{style:{marginTop:"16px",padding:"12px",background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"4px",color:"#ffc107",fontSize:"0.9rem",textAlign:"center"}},"⏰ This challenge expires on ",new Date(t.deadline).toLocaleDateString())),e.createElement(a$,{isOpen:y,onClose:()=>v(!1),challenge:t,currentUser:n,onCounterProposalSubmitted:o}))},r$=({isOpen:a,onClose:r,challenger:t,availableDefenders:n=[],ladderData:o=[],onChallengeComplete:i,userPin:c})=>{const[u,m]=h.useState([]),[g,f]=h.useState(!1),[y,v]=h.useState(null),[S,w]=h.useState(!1),[x,k]=h.useState("challenge"),[E,I]=h.useState(null),[M,N]=h.useState(!1),[_,P]=h.useState(!1),[B,R]=h.useState(""),[W,L]=h.useState([]),[F,j]=h.useState(null),[J,Y]=h.useState(!1),[D,A]=h.useState(!1),[U,K]=h.useState(null),[X,O]=h.useState(!1);h.useEffect(()=>{console.log("🧠 Smart Match Modal useEffect triggered:",{isOpen:a,challenger:t?"Present":"Missing",availableDefendersCount:n.length,availableDefenders:n}),a&&t&&n.length>0?Q():a&&t&&n.length===0&&(console.warn("⚠️ Smart Match: No available defenders found!"),console.log("Available defenders array:",n))},[a,t,n]);const Q=async()=>{f(!0),m([]);try{await new Promise(ye=>setTimeout(ye,1e3));const $=Se(t,n);m($)}catch($){console.error("Error generating suggestions:",$)}finally{f(!1)}},ne=($,ye)=>{const V=$.availability||{},ce=ye.availability||{};if(Object.keys(V).length===0||Object.keys(ce).length===0)return{score:.5,reason:"No availability data",details:"No availability information available"};const ze=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],Re=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];let Fe=0,We=0,tt=[];ze.forEach((Qe,qe)=>{if(V[Qe]&&ce[Qe]){We++;const He=V[Qe],st=ce[Qe];if(Array.isArray(He)&&Array.isArray(st)){const Mt=He.filter(Jt=>st.includes(Jt));Mt.length>0&&(Fe++,tt.push(`${Re[qe]}: ${Mt.join(", ")}`))}}});const me=We>0?Fe/We:.5,Ce=We>0?`${Fe}/${We} days with matching availability`:"No availability overlap",_e=tt.length>0?tt.join("; "):"No overlapping free time found";return{score:me,reason:Ce,details:_e}},T=($,ye)=>{const V=$.locations||"",ce=ye.locations||"";if(!V||!ce)return{score:.5,reason:"No location preferences",details:"No location preferences set"};const ze=V.toLowerCase().split(/[,;|]/).map(_e=>_e.trim()),Re=ce.toLowerCase().split(/[,;|]/).map(_e=>_e.trim()),Fe=ze.filter(_e=>Re.some(Qe=>Qe.includes(_e)||_e.includes(Qe))),We=Fe.map(_e=>{const Qe=ze.find(He=>He.toLowerCase()===_e.toLowerCase()),qe=Re.find(He=>He.toLowerCase()===_e.toLowerCase());return Qe||qe||_e}),tt=Fe.length>0?Math.min(1,Fe.length/Math.max(ze.length,Re.length)):.2,me=Fe.length>0?`Both prefer: ${We.join(", ")}`:"No location preferences match",Ce=We.length>0?We.join(", "):"No common pool halls found";return{score:tt,reason:me,details:Ce}},re=($,ye)=>{const V=new Date,ce=new Date(V.getTime()+7*24*60*60*1e3),ze=$.scheduledMatches||[],Re=ye.scheduledMatches||[],Fe=ze.some(tt=>{const me=new Date(tt.scheduledDate);return me>=V&&me<=ce}),We=Re.some(tt=>{const me=new Date(tt.scheduledDate);return me>=V&&me<=ce});return Fe&&We?{score:.3,reason:"Both players have scheduled matches this week"}:Fe||We?{score:.6,reason:"One player has scheduled matches this week"}:{score:1,reason:"No schedule conflicts"}},G=$=>{try{const V=JSON.parse(localStorage.getItem("smartMatchLearning")||"[]").filter(We=>We.challengerId===$||We.defenderId===$);if(V.length===0)return{};const ce={preferredMatchTypes:{},preferredTimeSlots:{},responseRate:0,averageConfidence:0,successRate:0};V.forEach(We=>{(We.outcome==="accepted"||We.outcome==="played")&&(ce.preferredMatchTypes[We.matchType]=(ce.preferredMatchTypes[We.matchType]||0)+1)});const ze=V.length,Re=V.filter(We=>We.outcome!=="no_response").length;ce.responseRate=ze>0?Re/ze:0;const Fe=V.filter(We=>We.outcome==="accepted"||We.outcome==="played");return ce.averageConfidence=Fe.length>0?Fe.reduce((We,tt)=>We+tt.confidence,0)/Fe.length:0,ce.successRate=ze>0?Fe.length/ze:0,ce}catch(ye){return console.error("Error getting learned preferences:",ye),{}}},se=async($,ye)=>{try{console.log("🔍 Fetching head-to-head record:",{challenger:$,defender:ye});let V=$._id||$.id||$.playerId;if(!V||V==="ladder"||!V.match(/^[0-9a-fA-F]{24}$/)){const _e=o.find(Qe=>Qe.firstName===$.firstName&&Qe.lastName===$.lastName);_e&&(V=_e._id,console.log("🔍 Found challenger in ladder data:",V))}const ce=ye._id||ye.id||ye.playerId;if(console.log("🆔 Using IDs:",{challengerId:V,defenderId:ce}),console.log("🔍 Challenger object keys:",Object.keys($)),console.log("🔍 Defender object keys:",Object.keys(ye)),!V)return console.log("❌ Missing challenger ID for head-to-head lookup"),{wins:0,losses:0,totalMatches:0,lastMatch:null};if(!ce)return console.log("❌ Missing defender ID for head-to-head lookup"),{wins:0,losses:0,totalMatches:0,lastMatch:null};const[ze,Re]=await Promise.all([fetch(`${de}/api/ladder/player/${encodeURIComponent(V)}/matches`,{headers:jn(c)}).then(_e=>(console.log("🔍 Challenger API response status:",_e.status),_e.ok?_e.json():(console.log("❌ Challenger API error:",_e.status,_e.statusText),[]))),fetch(`${de}/api/ladder/player/${encodeURIComponent(ce)}/matches`,{headers:jn(c)}).then(_e=>(console.log("🔍 Defender API response status:",_e.status),_e.ok?_e.json():(console.log("❌ Defender API error:",_e.status,_e.statusText),[])))]);console.log("📊 Challenger matches:",ze.length),console.log("📊 Defender matches:",Re.length);const Fe=[];if(ze.forEach(_e=>{if(_e.result){const Qe=_e.opponentName===`${ye.firstName} ${ye.lastName}`;console.log("🔍 Checking challenger match:",{matchId:_e._id,opponentName:_e.opponentName,defenderName:`${ye.firstName} ${ye.lastName}`,isAgainstDefender:Qe}),Qe&&(Fe.push(_e),console.log("✅ Found head-to-head match in challenger data"))}}),Re.forEach(_e=>{if(_e.result){const Qe=_e.opponentName===`${$.firstName} ${$.lastName}`;console.log("🔍 Checking defender match:",{matchId:_e._id,opponentName:_e.opponentName,challengerName:`${$.firstName} ${$.lastName}`,isAgainstChallenger:Qe}),Qe&&(Fe.find(qe=>qe._id===_e._id)||(Fe.push(_e),console.log("✅ Found head-to-head match in defender data")))}}),console.log("📈 Head-to-head matches found:",Fe.length),Fe.length===0)return{wins:0,losses:0,totalMatches:0,lastMatch:null};let We=0,tt=0,me=null;Fe.sort((_e,Qe)=>new Date(Qe.completedDate||Qe.scheduledDate)-new Date(_e.completedDate||_e.scheduledDate)),Fe.forEach(_e=>{if((_e.playerRole==="challenger"||_e.playerRole==="defender")&&(_e.result==="W"?We++:_e.result==="L"&&tt++),!me){let qe=_e.matchDate||_e.completedDate||_e.scheduledDate||_e.date||_e.createdAt;if(qe)try{const He=new Date(qe);isNaN(He.getTime())?qe="Match completed":qe=He.toLocaleDateString()}catch{qe="Match completed"}else qe="Match completed";me={date:qe,winner:_e.result==="W"?`${$.firstName} ${$.lastName}`:_e.opponentName,loser:_e.result==="W"?_e.opponentName:`${$.firstName} ${$.lastName}`,score:_e.score||"N/A"}}});const Ce={wins:We,losses:tt,totalMatches:We+tt,lastMatch:me};return console.log("📈 Calculated head-to-head record:",Ce),Ce}catch(V){return console.error("❌ Error getting head-to-head record:",V),console.error("❌ Error details:",V.message),{wins:0,losses:0,totalMatches:0,lastMatch:null}}},pe=($,ye,V)=>{const ce=V.confidence,ze=G($._id||$.email),Re=G(ye._id||ye.email);let Fe=0;return ze.preferredMatchTypes&&ze.preferredMatchTypes[V.type]&&(Fe+=5),Re.responseRate>.7?Fe+=8:Re.responseRate>.5&&(Fe+=4),Re.successRate>.8?Fe+=6:Re.successRate>.6&&(Fe+=3),Re.responseRate<.3&&(Fe-=10),Math.min(Math.max(ce+Fe,10),95)},Se=($,ye)=>{const V=[],ce=new Map,ze=$.ladder||$.ladderName,Re=ye.filter(Ce=>Ce.ladderName===ze);Re.filter(Ce=>Ce.position<$.position&&Ce.position>=$.position-4).forEach(Ce=>{const _e=ne($,Ce),Qe=T($,Ce),qe=re($,Ce),He=at($,Ce),st=Math.min(1,He*.2+_e.score*.5+Qe.score*.25+qe.score*.05),Mt={type:"challenge",confidence:st,availabilityScore:_e.score,locationScore:Qe.score,scheduleScore:qe.score,positionDiff:$.position-Ce.position},Jt=pe($,Ce,Mt),Yt=$.position-Ce.position;let ua=`Challenge Match: ${Ce.firstName} is ${Yt} spot${Yt>1?"s":""} above you`;Yt===1?ua+=" - Perfect for a quick climb!":Yt===2?ua+=" - Great opportunity to advance":Yt>=3&&(ua+=" - High reward challenge"),_e.score>.7&&(ua+=` | 📅 ${_e.reason}`),Qe.score>.7&&(ua+=` | 📍 ${Qe.reason}`),qe.score<.5&&(ua+=` | ⚠️ ${qe.reason}`);const ma=`${Ce.firstName}-${Ce.lastName}`;ce.has(ma)||ce.set(ma,{defender:Ce,matchTypes:[],availabilityScore:_e.score,locationScore:Qe.score,scheduleScore:qe.score,availabilityDetails:_e.details,locationDetails:Qe.details}),ce.get(ma).matchTypes.push({type:"challenge",confidence:Jt,reason:ua,priority:1,positionDiff:Yt,learnedBonus:Jt-st})}),Re.filter(Ce=>Ce.position>$.position&&Ce.position<=$.position+5).forEach(Ce=>{const _e=ne($,Ce),Qe=T($,Ce),qe=re($,Ce),He=at($,Ce),st=Math.min(1,He*.2+_e.score*.5+Qe.score*.25+qe.score*.05),Mt=Ce.position-$.position;let Jt=`SmackDown Match: ${Ce.firstName} is ${Mt} spot${Mt>1?"s":""} below you`;Mt===1?Jt+=" - Defend your position":Mt<=3?Jt+=" - Maintain your ranking":Jt+=" - Show your dominance",_e.score>.7&&(Jt+=` | 📅 ${_e.reason}`),Qe.score>.7&&(Jt+=` | 📍 ${Qe.reason}`),qe.score<.5&&(Jt+=` | ⚠️ ${qe.reason}`);const Yt=`${Ce.firstName}-${Ce.lastName}`;ce.has(Yt)||ce.set(Yt,{defender:Ce,matchTypes:[],availabilityScore:_e.score,locationScore:Qe.score,scheduleScore:qe.score,availabilityDetails:_e.details,locationDetails:Qe.details}),ce.get(Yt).matchTypes.push({type:"smackdown",confidence:st,reason:Jt,priority:2,positionDiff:Mt})}),$.ladderName==="499-under"&&$.position<=3&&ye.filter(_e=>["500-549","550-plus"].includes(_e.ladderName)).slice(-4).forEach(_e=>{const Qe=at($,_e),qe=`Ladder Jump: ${_e.firstName} is in ${_e.ladderName} ladder - Big opportunity to advance!`;V.push({defender:_e,type:"ladder-jump",confidence:Qe,reason:qe,priority:3})}),Re.filter(Ce=>{const _e=ne($,Ce),Qe=T($,Ce),qe=re($,Ce);return _e.score>=.7&&Qe.score>=.6&&qe.score>=.8}).forEach(Ce=>{const _e=ne($,Ce),Qe=T($,Ce),qe=re($,Ce),He=Math.abs($.position-Ce.position);$.position>Ce.position;const st=.9,Mt=`Perfect Match: ${Ce.firstName} - Great availability & location compatibility! | 📅 ${_e.reason} | 📍 ${Qe.reason}`;V.push({defender:Ce,type:"perfect-match",confidence:st,reason:Mt,priority:0,positionDiff:He,availabilityScore:_e.score,locationScore:Qe.score,scheduleScore:qe.score,availabilityDetails:_e.details,locationDetails:Qe.details})});const me=Array.from(ce.values()).map(Ce=>{const _e=Ce.matchTypes.sort((qe,He)=>qe.priority!==He.priority?qe.priority-He.priority:He.confidence-qe.confidence),Qe=_e[0];return{defender:Ce.defender,type:Qe.type,confidence:Qe.confidence,reason:Qe.reason,priority:Qe.priority,positionDiff:Qe.positionDiff,availabilityScore:Ce.availabilityScore,locationScore:Ce.locationScore,scheduleScore:Ce.scheduleScore,availabilityDetails:Ce.availabilityDetails,locationDetails:Ce.locationDetails,allMatchTypes:_e,learnedBonus:Qe.learnedBonus||0}}).sort((Ce,_e)=>Ce.priority!==_e.priority?Ce.priority-_e.priority:_e.confidence-Ce.confidence).slice(0,10);return console.log("Final suggestions:",me.length),console.log("Final suggestions:",me),me},at=($,ye,V)=>{let ce=50;const ze=Math.abs($.position-ye.position);if(ze===1?ce+=25:ze===2?ce+=20:ze===3?ce+=15:ze<=5?ce+=10:ze<=8&&(ce+=5),ye.recentMatches&&ye.recentMatches.length>0){const Fe=new Date(ye.recentMatches[0].date),We=(new Date-Fe)/(1e3*60*60*24);We<=1?ce+=20:We<=3?ce+=18:We<=7?ce+=15:We<=14?ce+=12:We<=30?ce+=8:We<=60?ce+=3:ce-=5}else ce-=10;if(ye.wins&&ye.totalMatches){const Fe=ye.wins/ye.totalMatches,We=ye.totalMatches;We>=10?Fe>=.7?ce+=15:Fe>=.6?ce+=12:Fe>=.5?ce+=8:Fe>=.4?ce+=3:ce-=5:We>=5?Fe>=.6?ce+=10:Fe>=.4?ce+=5:ce-=2:ce+=5}if($.ladderName===ye.ladderName&&(ce+=5),ye.totalMatches&&(ye.totalMatches>=20?ce+=3:ye.totalMatches>=10?ce+=2:ye.totalMatches>=5&&(ce+=1)),ye.recentMatches&&ye.recentMatches.length>=3){const Fe=ye.recentMatches.slice(0,3).filter(We=>We.winner===ye.email||We.winner===ye.firstName).length;Fe>=2?ce+=8:Fe===1?ce+=3:ce-=5}const Re=new Date().getHours();return Re>=18&&Re<=22?ce+=3:Re>=12&&Re<=17&&(ce+=2),Math.min(Math.max(ce,10),95)},be=$=>{v($.defender),k($.type),w(!0)},Je=async($,ye)=>{ye.stopPropagation(),I($),N(!0),Y(!0);try{const V=await se(t,$.defender);j(V)}catch(V){console.error("Error loading head-to-head record:",V),j({wins:0,losses:0,totalMatches:0,lastMatch:null})}finally{Y(!1)}},nt=($,ye)=>{ye.stopPropagation(),console.log("🎯 Match type clicked:",$),console.log("🎯 Setting selectedMatchType to:",$),console.log("🎯 Setting showMatchTypeModal to true"),K($),A(!0),console.log("🎯 Modal state should be updated now")},Xe=$=>{v($.defender),k($.type),w(!0)},ct=$=>{N(!1),v($.defender),k($.type),w(!0)},Ot=()=>{if(!B.trim())return;const $=B.toLowerCase().trim();let ye=[...u];$.includes("challenge")||$.includes("above")?ye=u.filter(V=>V.type==="challenge"):$.includes("smackdown")||$.includes("below")?ye=u.filter(V=>V.type==="smackdown"):($.includes("perfect match")||$.includes("perfect"))&&(ye=u.filter(V=>V.type==="perfect-match")),$.includes("1 position")||$.includes("one position")?ye=ye.filter(V=>V.positionDiff===1):$.includes("2 position")||$.includes("two position")?ye=ye.filter(V=>V.positionDiff===2):($.includes("3 position")||$.includes("three position"))&&(ye=ye.filter(V=>V.positionDiff===3)),$.includes("tonight")||$.includes("evening")?ye=ye.filter(V=>V.availabilityScore>.6):($.includes("weekend")||$.includes("saturday")||$.includes("sunday"))&&(ye=ye.filter(V=>V.availabilityScore>.5)),($.includes("available")||$.includes("free"))&&(ye=ye.filter(V=>V.availabilityScore>.7&&V.scheduleScore>.7)),($.includes("location")||$.includes("nearby")||$.includes("close"))&&(ye=ye.filter(V=>V.locationScore>.6)),ye.sort((V,ce)=>ce.confidence-V.confidence),L(ye),R(""),console.log("🤖 AI Query processed:",{query:$,results:ye.length})},Zt=()=>{m([]),v(null),w(!1),r()},ft=$=>$>=80?"#10b981":$>=60?"#3b82f6":$>=40?"#f59e0b":"#6b7280",Ft=$=>$>=80?"Easy Smart Match":$>=60?"Possible Smart Match":$>=40?"Unlikely Smart Match":"Very Unlikely Smart Match",ra=$=>({challenge:"⚔️",smackdown:"💥","ladder-jump":"🆙",smackback:"🔄"})[$]||"⚔️",Wt=$=>({challenge:"⚔️ Challenge Match",smackdown:"💥 SmackDown Match","ladder-jump":"🆙 Ladder Jump",smackback:"🔄 SmackBack Match"})[$]||$,he=$=>{if(!$.recentMatches||$.recentMatches.length===0)return!1;let ye=0;for(let V=0;V<$.recentMatches.length&&$.recentMatches[V].result==="win";V++)if(ye++,ye>=3)return!0;return!1},bt=$=>({challenge:{title:"Challenge Match",description:"A standard ladder challenge where you challenge a player above you on the ladder. Win to move up in position!",rules:["Players can challenge opponents up to 4 spots above them","Challenger wins: Players switch positions","Defender wins: Ladder positions remain unchanged","Must be accepted when called out"]},smackdown:{title:"SmackDown Match",description:"An intense match with special rules and higher stakes. The challenger pays full entry fee, defender pays 50%.",rules:['Any player can call out a "SmackDown"',"Player calls out an opponent no more than 5 spots below them","The Challenger pays the full entry fee; the Defender pays 50% of the entry fee","If Challenger Wins: Opponent moves THREE spots down, challenger moves TWO spots up (but not into first place)","If Challenger Loses: Players switch positions","First place must be earned via a Challenge Match or SmackBack match"]},"ladder-jump":{title:"Ladder Jump",description:"Challenge a player much higher on the ladder to jump multiple positions at once. High risk, high reward! (Currently not available in UI)",rules:["Challenge players significantly above your current position","Win to jump multiple positions at once","Lose and you stay in your current position","Requires mutual agreement on the jump distance","Must be accepted when called out","Note: This feature is not yet available in the user interface"]},smackback:{title:"SmackBack Match",description:"A special match where a SmackDown defender can challenge for 1st place in their next match.",rules:["If the SmackDown defender wins, they can challenge for 1st place in their next match with a SmackBack","The Challenger pays the full entry fee; the Defender pays 50% of the entry fee","If Challenger Wins: Moves into 1st place, all other positions move down one spot","If Defender Wins: Ladder positions remain unchanged"]}})[$]||{title:"Unknown Match Type",description:"This match type is not recognized.",rules:["Contact an administrator for more information."]};return a?Jr.createPortal(e.createElement(e.Fragment,null,e.createElement(Bt,{open:!0,onClose:Zt,title:`🧠 Smart Match: ${t.firstName} ${t.lastName}`,maxWidth:"1200px",maxHeight:"80vh",className:"ladder-smart-match-modal",borderColor:"#5b21b6",glowColor:"#5b21b6"},e.createElement("div",{className:"ladder-smart-match-content"},e.createElement("div",{className:"ladder-smart-match-header"},e.createElement("h3",{className:"ladder-smart-match-title"},"Smart Match Suggestions"),e.createElement("p",{className:"ladder-smart-match-subtitle"},"AI-powered suggestions based on ladder rules, player activity, and match history"),e.createElement("div",{style:{marginTop:"12px",textAlign:"center"}},e.createElement("button",{onClick:()=>P(!0),style:{background:"linear-gradient(135deg, #6b46c1 0%, #a855f7 100%)",border:"1px solid #5b21b6",color:"#ffffff",padding:"8px 16px",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(91, 33, 182, 0.3)"}},"🤖 Ask AI Assistant"))),g&&e.createElement("div",{className:"ladder-smart-match-loading"},e.createElement("div",{className:"ladder-smart-match-spinner"}),e.createElement("p",{className:"ladder-smart-match-loading-text"},"Analyzing ladder data and generating suggestions...")),!g&&u.length===0&&e.createElement("div",{className:"ladder-smart-match-empty"},e.createElement("div",{className:"ladder-smart-match-empty-icon"},"🤔"),e.createElement("h3",{className:"ladder-smart-match-empty-title"},"No Suggestions Available"),e.createElement("p",{className:"ladder-smart-match-empty-message"},n.length===0?e.createElement(e.Fragment,null,"No opponents found on this ladder.",e.createElement("br",null),e.createElement("small",{style:{color:"#9ca3af",fontSize:"0.9rem"}},"This could mean the ladder data hasn't loaded yet or there's a connection issue.")):"No suitable opponents found for smart match suggestions."),n.length===0&&e.createElement("button",{onClick:()=>window.location.reload(),style:{marginTop:"10px",padding:"8px 16px",background:"#5b21b6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}},"Refresh Page")),!g&&u.length>0&&e.createElement("div",{className:"ladder-smart-match-suggestions"},e.createElement("h4",{className:"ladder-smart-match-suggestions-title"},"Top Suggestions (",u.length,")"),e.createElement("div",{className:"ladder-smart-match-suggestions-list"},u.map(($,ye)=>{var V;return e.createElement("div",{key:`${$.defender._id}-${$.type}`,className:"ladder-smart-match-suggestion",onClick:()=>be($)},e.createElement("div",{className:"ladder-smart-match-suggestion-header"},e.createElement("div",{className:"ladder-smart-match-suggestion-info"},e.createElement("h4",{className:"ladder-smart-match-suggestion-title"},$.defender.firstName," ",$.defender.lastName,!((V=$.defender.unifiedAccount)!=null&&V.hasUnifiedAccount)&&e.createElement("span",{className:"ladder-smart-match-asterisk",title:"Incomplete profile - limited contact options"},"*"),he($.defender)&&e.createElement("span",{className:"ladder-smart-match-hot-streak-badge",title:"Hot Streak: 3+ consecutive wins!"},"🔥")),e.createElement("span",{className:"ladder-smart-match-suggestion-details"},"Position ",$.defender.position," • ",$.defender.ladderName)),e.createElement("div",{className:"ladder-smart-match-confidence"},e.createElement("div",{className:"ladder-smart-match-confidence-badge",style:{background:ft($.confidence)}},Ft($.confidence)))),e.createElement("div",{style:{marginBottom:"12px",padding:"8px 12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},$.availabilityDetails&&$.availabilityDetails!=="No overlapping free time found"&&e.createElement("div",{style:{marginBottom:"6px",textAlign:"center"}},e.createElement("div",{style:{color:"#4CAF50",fontSize:"0.75rem",fontWeight:"600",marginBottom:"2px",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"}},"📅 ",e.createElement("span",null,"Overlapping Availability:")),e.createElement("div",{style:{color:"#81C784",fontSize:"0.7rem",lineHeight:"1.3",textAlign:"center"}},$.availabilityDetails)),$.locationDetails&&$.locationDetails!=="No location data"&&e.createElement("div",{style:{textAlign:"center"}},e.createElement("div",{style:{color:"#FFB74D",fontSize:"0.75rem",fontWeight:"600",marginBottom:"2px",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"}},"📍 ",e.createElement("span",null,"Location Match:")),e.createElement("div",{style:{color:"#FFCC80",fontSize:"0.7rem",lineHeight:"1.3",textAlign:"center"}},$.locationDetails))),e.createElement("div",{className:"ladder-smart-match-suggestion-footer"},e.createElement("div",{className:"ladder-smart-match-tags"},$.allMatchTypes&&$.allMatchTypes.map((ce,ze)=>e.createElement("button",{key:ze,className:"ladder-smart-match-tag ladder-smart-match-tag-primary",title:"Click to learn more about this match type",onClick:Re=>nt(ce.type,Re),style:{cursor:"pointer",userSelect:"none",border:"none",background:"transparent",color:"white",padding:"2px 8px",borderRadius:"4px",fontSize:"0.7rem",fontWeight:"600",display:"flex",flexDirection:"column",alignItems:"center",gap:"0px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",textAlign:"center",minHeight:"auto",marginRight:"3px",marginBottom:"2px"}},e.createElement("div",{style:{fontSize:"0.65rem"}},"Learn About"),e.createElement("div",{style:{fontSize:"0.65rem"}},Wt(ce.type)," ",ra(ce.type)))),$.availabilityScore>.7&&e.createElement("span",{className:"ladder-smart-match-tag ladder-smart-match-tag-success"},"📅 Good Availability"),$.locationScore>.7&&e.createElement("span",{className:"ladder-smart-match-tag ladder-smart-match-tag-info"},"📍 Location Match")),e.createElement("div",{className:"ladder-smart-match-actions"},$.allMatchTypes&&$.allMatchTypes.length>1?e.createElement("button",{className:"ladder-smart-match-action-btn ladder-smart-match-action-btn-primary",onClick:ce=>{ce.stopPropagation(),I($),O(!0)},style:{marginRight:"8px"}},"Schedule Match (",$.allMatchTypes.length," options)"):e.createElement("button",{className:"ladder-smart-match-action-btn ladder-smart-match-action-btn-primary",onClick:ce=>{ce.stopPropagation(),Xe($)},style:{marginRight:"8px"}},"Schedule ",Wt($.type).replace("⚔️ ","").replace("💥 ","").replace("🆙 ","").replace("🔄 ","").replace("🔥 ","").replace("⭐ ","")),e.createElement("button",{className:"ladder-smart-match-action-btn ladder-smart-match-action-btn-secondary",onClick:ce=>Je($,ce)},"📊 View Details"))))})),e.createElement("div",{style:{marginTop:"16px",padding:"12px",background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"4px",color:"#ffc107",fontSize:"0.9rem"}},"💡 ",e.createElement("strong",null,"Tip:")," Click on any suggestion to create a challenge. The confidence score indicates how likely the opponent is to respond positively.")),e.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"}},e.createElement("div",{className:"ladder-smart-match-legend"},e.createElement("p",{className:"ladder-smart-match-legend-text"},e.createElement("span",{className:"ladder-smart-match-asterisk"},"*")," = Incomplete profile (limited contact options)")),e.createElement("button",{onClick:Zt,style:{padding:"12px 24px",background:"#666",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",marginLeft:"auto"}},"Close")))),S&&y&&e.createElement(vS,{isOpen:S,onClose:()=>w(!1),challenger:t,defender:y,challengeType:x,onChallengeComplete:$=>{w(!1),v(null),i&&i($),Zt()}}),M&&E&&e.createElement(Bt,{open:M,onClose:()=>N(!1),title:`📊 Match Analysis: ${E.defender.firstName} ${E.defender.lastName}`,maxWidth:"500px",maxHeight:"80vh",className:"ladder-smart-match-details-modal",borderColor:"#5b21b6",glowColor:"#5b21b6"},e.createElement("div",{style:{padding:"20px",maxHeight:"70vh",overflowY:"auto"}},e.createElement("div",{style:{background:"rgba(91, 33, 182, 0.15)",border:"1px solid rgba(91, 33, 182, 0.4)",borderRadius:"8px",padding:"16px",marginBottom:"20px"}},e.createElement("h3",{style:{color:"#ffffff",margin:"0 0 8px 0",fontSize:"1.2rem",fontWeight:"bold"}},ra(E.type)," ",Wt(E.type)),e.createElement("p",{style:{color:"#e0e0e0",margin:"0",fontSize:"1rem",fontWeight:"500"}},"Position ",E.defender.position," • ",E.defender.ladderName)),e.createElement("div",{style:{marginBottom:"24px"}},e.createElement("h4",{style:{color:"#ffc107",marginBottom:"12px",fontSize:"1.1rem",fontWeight:"bold"}},"Match Compatibility"),e.createElement("p",{style:{color:"#d1d5db",fontSize:"0.95rem",marginBottom:"16px",fontStyle:"italic"}},"How easy this match will be to schedule and coordinate:"),e.createElement("div",{style:{background:"rgba(0, 0, 0, 0.4)",border:"1px solid #555",borderRadius:"8px",padding:"16px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",alignItems:"flex-start"}},e.createElement("div",{style:{flex:1}},e.createElement("span",{style:{color:"#ffffff",fontSize:"1rem",fontWeight:"600"}},"Scheduling Ease:"),e.createElement("div",{style:{fontSize:"0.85rem",color:"#d1d5db",marginTop:"4px"}},E.confidence>=80?"🟢 Very easy to coordinate":E.confidence>=60?"🟡 Some coordination needed":"🔵 Requires more planning")),e.createElement("span",{style:{color:ft(E.confidence),fontWeight:"bold",fontSize:"1rem",padding:"4px 8px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"4px"}},Ft(E.confidence))),E.availabilityScore!==void 0&&e.createElement("div",{style:{marginBottom:"16px",padding:"12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",alignItems:"flex-start"}},e.createElement("div",{style:{flex:1}},e.createElement("span",{style:{color:"#ffffff",fontSize:"1rem",fontWeight:"600"}},"📅 Availability Match:"),e.createElement("div",{style:{fontSize:"0.85rem",color:"#d1d5db",marginTop:"4px"}},E.availabilityScore===.5?"⚪ No availability data set":E.availabilityScore>.7?"🟢 You have similar free times":E.availabilityScore>.4?"🟡 Some matching availability":"🔴 Very different free time schedules")),e.createElement("span",{style:{color:E.availabilityScore===.5?"#9ca3af":E.availabilityScore>.7?"#10b981":"#f59e0b",fontSize:"1rem",fontWeight:"bold",padding:"4px 8px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"4px"}},Math.round(E.availabilityScore*100),"%")),E.availabilityDetails&&e.createElement("div",{style:{fontSize:"0.85rem",color:"#e0e0e0",background:"rgba(91, 33, 182, 0.15)",border:"1px solid rgba(91, 33, 182, 0.3)",borderRadius:"6px",padding:"8px 12px",marginTop:"8px"}},e.createElement("strong",{style:{color:"#ffffff"}},"Overlapping times:")," ",E.availabilityDetails)),E.locationScore!==void 0&&e.createElement("div",{style:{marginBottom:"16px",padding:"12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",alignItems:"flex-start"}},e.createElement("div",{style:{flex:1}},e.createElement("span",{style:{color:"#ffffff",fontSize:"1rem",fontWeight:"600"}},"📍 Location Match:"),e.createElement("div",{style:{fontSize:"0.85rem",color:"#d1d5db",marginTop:"4px"}},E.locationScore>.7?"🟢 You prefer the same pool halls":E.locationScore>.4?"🟡 Some overlapping preferred venues":"🔴 You prefer different pool halls")),e.createElement("span",{style:{color:E.locationScore>.7?"#10b981":"#f59e0b",fontSize:"1rem",fontWeight:"bold",padding:"4px 8px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"4px"}},Math.round(E.locationScore*100),"%")),E.locationDetails&&e.createElement("div",{style:{fontSize:"0.85rem",color:"#e0e0e0",background:"rgba(59, 130, 246, 0.15)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"6px",padding:"8px 12px",marginTop:"8px"}},e.createElement("strong",{style:{color:"#ffffff"}},"Common venues:")," ",E.locationDetails)),E.scheduleScore!==void 0&&e.createElement("div",{style:{padding:"12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}},e.createElement("div",{style:{flex:1}},e.createElement("span",{style:{color:"#ffffff",fontSize:"1rem",fontWeight:"600"}},"📅 Schedule Conflicts:"),e.createElement("div",{style:{fontSize:"0.85rem",color:"#d1d5db",marginTop:"4px"}},E.scheduleScore>.7?"🟢 No upcoming matches - both players free":E.scheduleScore>.4?"🟡 One player has upcoming matches":"🔴 Both players have upcoming matches")),e.createElement("span",{style:{color:E.scheduleScore>.7?"#10b981":"#f59e0b",fontSize:"1rem",fontWeight:"bold",padding:"4px 8px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"4px"}},Math.round(E.scheduleScore*100),"%"))))),e.createElement("div",{style:{marginBottom:"24px"}},e.createElement("h4",{style:{color:"#ffc107",marginBottom:"12px",fontSize:"1.1rem",fontWeight:"bold"}},"Why This Match?"),e.createElement("p",{style:{color:"#d1d5db",fontSize:"0.95rem",marginBottom:"12px",fontStyle:"italic"}},"AI reasoning:"),e.createElement("div",{style:{color:"#e0e0e0",lineHeight:"1.5",background:"rgba(0, 0, 0, 0.4)",border:"1px solid #555",borderRadius:"8px",padding:"16px",fontSize:"1rem"}},E.reason)),e.createElement("div",{style:{marginBottom:"24px"}},e.createElement("h4",{style:{color:"#ffc107",marginBottom:"12px",fontSize:"1.1rem",fontWeight:"bold"}},"Your Record vs ",E.defender.firstName),e.createElement("p",{style:{color:"#d1d5db",fontSize:"0.95rem",marginBottom:"12px",fontStyle:"italic"}},"Your history against this opponent:"),e.createElement("div",{style:{background:"rgba(0, 0, 0, 0.4)",border:"1px solid #555",borderRadius:"8px",padding:"16px"}},J?e.createElement("div",{style:{textAlign:"center",color:"#d1d5db",fontSize:"1rem"}},"🔄 Loading head-to-head record..."):F&&F.totalMatches===0?e.createElement("div",{style:{textAlign:"center",color:"#d1d5db",fontSize:"1rem"}},"🆕 No previous matches - This would be your first game!"):F?e.createElement(e.Fragment,null,e.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",alignItems:"flex-start"}},e.createElement("div",{style:{flex:1}},e.createElement("span",{style:{color:"#ffffff",fontSize:"1rem",fontWeight:"600"}},"Your Record:"),e.createElement("div",{style:{fontSize:"0.85rem",color:"#d1d5db",marginTop:"4px"}},(()=>{const $=Math.round(F.wins/F.totalMatches*100);return $>=70?"🟢 You dominate this matchup":$>=50?"🟡 Even matchup":"🔴 They have your number"})())),e.createElement("span",{style:{color:Math.round(F.wins/F.totalMatches*100)>=50?"#10b981":"#ef4444",fontSize:"1.2rem",fontWeight:"bold",padding:"4px 8px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"4px"}},F.wins,"-",F.losses)),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",alignItems:"flex-start"}},e.createElement("div",{style:{flex:1}},e.createElement("span",{style:{color:"#ffffff",fontSize:"1rem",fontWeight:"600"}},"Win Rate:"),e.createElement("div",{style:{fontSize:"0.85rem",color:"#d1d5db",marginTop:"4px"}},(()=>{const $=Math.round(F.wins/F.totalMatches*100);return $>=70?"🟢 Strong advantage":$>=50?"🟡 Competitive":"🔴 Tough opponent"})())),e.createElement("span",{style:{color:Math.round(F.wins/F.totalMatches*100)>=50?"#10b981":"#ef4444",fontSize:"1rem",fontWeight:"bold",padding:"4px 8px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"4px"}},Math.round(F.wins/F.totalMatches*100),"%")),F.lastMatch&&e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}},e.createElement("div",{style:{flex:1}},e.createElement("span",{style:{color:"#ffffff",fontSize:"1rem",fontWeight:"600"}},"Last Match:"),e.createElement("div",{style:{fontSize:"0.85rem",color:"#d1d5db",marginTop:"4px"}},F.lastMatch.winner===`${t.firstName} ${t.lastName}`?"🟢 You won":"🔴 They won")),e.createElement("span",{style:{color:"#e0e0e0",fontSize:"1rem",fontWeight:"500",padding:"4px 8px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"4px"}},F.lastMatch.date==="Match completed"?"Match completed":(()=>{try{const $=new Date(F.lastMatch.date);return isNaN($.getTime())?"Match completed":$.toLocaleDateString()}catch{return"Match completed"}})()))):e.createElement("div",{style:{textAlign:"center",color:"#d1d5db",fontSize:"1rem"}},"❌ Error loading head-to-head record"))),e.createElement("div",{style:{marginBottom:"16px"}},e.createElement("h4",{style:{color:"#ffc107",marginBottom:"8px",fontSize:"0.95rem"}},"💡 Match Planning Guide"),e.createElement("div",{style:{background:E.confidence>=70?"rgba(16, 185, 129, 0.1)":E.confidence>=50?"rgba(245, 158, 11, 0.1)":"rgba(59, 130, 246, 0.1)",border:E.confidence>=70?"1px solid rgba(16, 185, 129, 0.3)":E.confidence>=50?"1px solid rgba(245, 158, 11, 0.3)":"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"6px",padding:"10px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"}},e.createElement("span",{style:{fontSize:"1rem"}},E.confidence>=70?"🟢":E.confidence>=50?"🟡":"🔵"),e.createElement("span",{style:{color:E.confidence>=70?"#10b981":E.confidence>=50?"#f59e0b":"#3b82f6",fontWeight:"bold",fontSize:"0.9rem"}},E.confidence>=70?"EASY TO SCHEDULE":E.confidence>=50?"GOOD MATCH":"REQUIRES PLANNING")),e.createElement("p",{style:{color:"#e0e0e0",fontSize:"0.8rem",margin:"0",lineHeight:"1.3"}},E.confidence>=70?"Great compatibility - scheduling should be smooth!":E.confidence>=50?"Good match - some coordination needed for details.":"Challenging to coordinate - may need more back-and-forth to schedule."))),e.createElement("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"}},e.createElement("button",{onClick:()=>N(!1),style:{padding:"8px 16px",background:"#666",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem"}},"Close"),e.createElement("button",{onClick:()=>ct(E),style:{padding:"8px 16px",background:E.confidence>=70?"linear-gradient(135deg, #10b981 0%, #059669 100%)":E.confidence>=50?"linear-gradient(135deg, #6b46c1 0%, #a855f7 100%)":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"0.9rem"}},E.confidence>=70?"🚀 Create Challenge":E.confidence>=50?"Create Challenge":"⚠️ Create Challenge")))),_&&e.createElement(Bt,{open:_,onClose:()=>P(!1),title:"🤖 AI Match Assistant",maxWidth:"800px",className:"ladder-ai-assistant-modal",borderColor:"#5b21b6",glowColor:"#5b21b6"},e.createElement("div",{style:{padding:"20px"}},e.createElement("div",{style:{background:"rgba(91, 33, 182, 0.1)",border:"1px solid rgba(91, 33, 182, 0.3)",borderRadius:"8px",padding:"16px",marginBottom:"20px"}},e.createElement("h4",{style:{color:"#ffffff",margin:"0 0 12px 0",display:"flex",alignItems:"center",gap:"8px"}},"🤖 AI Match Assistant"),e.createElement("p",{style:{color:"#e0e0e0",fontSize:"0.9rem",margin:"0 0 12px 0"}},`Ask me to find matches in natural language! Try: "Find me someone to challenge tonight" or "Who's available this weekend?"`),e.createElement("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"}},e.createElement("input",{type:"text",value:B,onChange:$=>R($.target.value),placeholder:"Ask me to find a match...",style:{flex:1,padding:"8px 12px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid #444",borderRadius:"6px",color:"#ffffff",fontSize:"0.9rem"},onKeyPress:$=>{$.key==="Enter"&&Ot()}}),e.createElement("button",{onClick:Ot,style:{background:"linear-gradient(135deg, #6b46c1 0%, #a855f7 100%)",border:"none",color:"#ffffff",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem"}},"Ask")),e.createElement("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"}},["Find me a challenge match","Who's available tonight?","Find someone 2 positions above me"].map(($,ye)=>e.createElement("button",{key:ye,onClick:()=>R($),style:{background:"rgba(91, 33, 182, 0.2)",border:"1px solid rgba(91, 33, 182, 0.4)",color:"#c4b5fd",padding:"4px 8px",borderRadius:"12px",cursor:"pointer",fontSize:"0.8rem",transition:"all 0.2s ease"}},$)))),W.length>0&&e.createElement("div",{className:"ladder-smart-match-suggestions"},e.createElement("h4",{className:"ladder-smart-match-suggestions-title"},"🤖 AI Results (",W.length," matches found)"),e.createElement("div",{className:"ladder-smart-match-suggestions-list"},W.map(($,ye)=>{var V;return e.createElement("div",{key:`ai-${$.defender._id}-${$.type}`,className:"ladder-smart-match-suggestion",onClick:()=>{P(!1),be($)},style:{border:"2px solid #5b21b6"}},e.createElement("div",{className:"ladder-smart-match-suggestion-header"},e.createElement("div",{className:"ladder-smart-match-suggestion-info"},e.createElement("span",{className:"ladder-smart-match-suggestion-icon"},"🤖 ",ra($.type)),e.createElement("div",null,e.createElement("h4",{className:"ladder-smart-match-suggestion-title"},$.defender.firstName," ",$.defender.lastName,!((V=$.defender.unifiedAccount)!=null&&V.hasUnifiedAccount)&&e.createElement("span",{className:"ladder-smart-match-asterisk",title:"Incomplete profile - limited contact options"},"*")),e.createElement("p",{className:"ladder-smart-match-suggestion-details"},"Position ",$.defender.position," • ",$.defender.ladderName))),e.createElement("div",{className:"ladder-smart-match-confidence"},e.createElement("div",{className:"ladder-smart-match-confidence-badge",style:{background:ft($.confidence)}},Ft($.confidence)))),e.createElement("div",{className:"ladder-smart-match-suggestion-footer"},e.createElement("div",{className:"ladder-smart-match-tags"},e.createElement("span",{className:`ladder-smart-match-tag ladder-smart-match-tag-${$.type}`},Wt($.type)),$.availabilityScore>.7&&e.createElement("span",{className:"ladder-smart-match-tag ladder-smart-match-tag-success"},"📅 Good Availability"),$.locationScore>.7&&e.createElement("span",{className:"ladder-smart-match-tag ladder-smart-match-tag-info"},"📍 Location Match"),$.learnedBonus>0&&e.createElement("span",{className:"ladder-smart-match-tag ladder-smart-match-tag-success"},"🧠 AI Enhanced")),e.createElement("button",{className:"ladder-smart-match-details-btn",onClick:ce=>{ce.stopPropagation(),P(!1),Je($,ce)},title:"View detailed match analysis"},"View Details")))}))),W.length===0&&B&&e.createElement("div",{style:{textAlign:"center",padding:"40px",color:"#9ca3af"}},e.createElement("div",{style:{fontSize:"48px",marginBottom:"16px"}},"🤔"),e.createElement("h3",{style:{marginBottom:"8px"}},"No matches found"),e.createElement("p",null,"Try a different query or check the main suggestions below.")),e.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"20px"}},e.createElement("button",{onClick:()=>P(!1),style:{padding:"10px 20px",background:"#666",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"}},"Close")))),e.createElement("style",null,`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        
        /* Fallback styles for GoDaddy hosting issues */
        .ladder-smart-match-modal {
          background: linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98)) !important;
          border: 2px solid #5b21b6 !important;
          border-radius: 12px !important;
          color: #ffffff !important;
        }
        
        .ladder-smart-match-content {
          background: transparent !important;
          color: #ffffff !important;
        }
        
        .ladder-smart-match-header {
          background: rgba(91, 33, 182, 0.1) !important;
          border: 1px solid rgba(91, 33, 182, 0.3) !important;
          border-radius: 6px !important;
          padding: 6px !important;
          margin-bottom: 8px !important;
        }
        
        .ladder-smart-match-title {
          color: #ffffff !important;
          margin: 0 0 2px 0 !important;
          text-align: center !important;
          font-size: 1.1rem !important;
          font-weight: bold !important;
          text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5) !important;
        }
        
        .ladder-smart-match-subtitle {
          color: #e0e0e0 !important;
          text-align: center !important;
          margin: 0 !important;
          font-size: 0.8rem !important;
        }
        
        /* Compact card layout */
        .ladder-smart-match-suggestion-footer {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-top: 12px;
          padding-top: 12px;
          border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .ladder-smart-match-details-btn {
          background: rgba(91, 33, 182, 0.8) !important;
          border: 1px solid #5b21b6 !important;
          color: #ffffff !important;
          padding: 6px 12px !important;
          border-radius: 4px !important;
          cursor: pointer !important;
          font-size: 0.85rem !important;
          transition: all 0.2s ease !important;
        }
        
        .ladder-smart-match-details-btn:hover {
          background: rgba(91, 33, 182, 1) !important;
          border-color: #7c3aed !important;
          transform: translateY(-1px) !important;
        }
        
        .ladder-smart-match-tag-info {
          background: rgba(59, 130, 246, 0.2) !important;
          color: #60a5fa !important;
          border: 1px solid rgba(59, 130, 246, 0.3) !important;
        }
        
        /* Mobile responsive adjustments for compact cards */
        @media (max-width: 768px) {
          .ladder-smart-match-suggestion-footer {
            flex-direction: column;
            gap: 8px;
            align-items: stretch;
          }
          
          .ladder-smart-match-details-btn {
            width: 100% !important;
            text-align: center !important;
          }
        }
        
        .ladder-smart-match-hot-streak-badge {
          display: inline-block;
          margin-left: 6px;
          font-size: 0.9rem;
          animation: hotStreakPulse 2s infinite;
          filter: drop-shadow(0 0 4px rgba(255, 69, 0, 0.6));
        }
        
        @keyframes hotStreakPulse {
          0%, 100% { 
            transform: scale(1);
            filter: drop-shadow(0 0 4px rgba(255, 69, 0, 0.6));
          }
          50% { 
            transform: scale(1.1);
            filter: drop-shadow(0 0 8px rgba(255, 69, 0, 0.8));
          }
        }
      `),console.log("🎯 Modal render check - showMatchTypeModal:",D,"selectedMatchType:",U),D&&U&&Jr.createPortal(e.createElement("div",{className:"modal-overlay",onClick:()=>A(!1),style:{zIndex:100001,position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center"}},e.createElement("div",{className:"modal-content",onClick:$=>$.stopPropagation(),style:{position:"relative",backgroundColor:"#1a1a1a",padding:"20px",borderRadius:"8px",maxWidth:"400px",width:"40%",maxHeight:"80vh",overflow:"auto",border:"2px solid #a855f7",boxShadow:"0 10px 30px rgba(168, 85, 247, 0.3)"}},e.createElement("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"}},e.createElement("h2",{style:{color:"#ffffff",margin:0,fontSize:"1.5rem"}},ra(U)," ",bt(U).title),e.createElement("button",{className:"modal-close-btn",onClick:()=>A(!1),style:{background:"none",border:"none",color:"#ffffff",fontSize:"24px",cursor:"pointer",padding:"0",width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center"}},"×")),e.createElement("div",{className:"modal-body"},e.createElement("p",{style:{color:"#e0e0e0",fontSize:"1rem",marginBottom:"16px",lineHeight:"1.5"}},bt(U).description),e.createElement("h4",{style:{color:"#a855f7",marginBottom:"12px",fontSize:"1.1rem"}},"Match Rules:"),e.createElement("ul",{style:{color:"#ccc",paddingLeft:"20px",marginBottom:"20px"}},bt(U).rules.map(($,ye)=>e.createElement("li",{key:ye,style:{marginBottom:"8px",lineHeight:"1.4"}},$)))),e.createElement("div",{className:"modal-footer",style:{textAlign:"center"}},e.createElement("button",{className:"btn btn-primary",onClick:()=>A(!1),style:{background:"linear-gradient(135deg, #a855f7, #7c3aed)",border:"none",color:"white",padding:"10px 20px",borderRadius:"6px",fontSize:"1rem",cursor:"pointer",fontWeight:"600"}},"Got it!")))),document.body),X&&E&&Jr.createPortal(e.createElement("div",{className:"modal-overlay",onClick:()=>O(!1),style:{zIndex:100001,position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center"}},e.createElement("div",{className:"modal-content",onClick:$=>$.stopPropagation(),style:{position:"relative",backgroundColor:"#1a1a1a",padding:"20px",borderRadius:"8px",maxWidth:"400px",width:"40%",maxHeight:"80vh",overflow:"auto",border:"2px solid #a855f7",boxShadow:"0 10px 30px rgba(168, 85, 247, 0.3)"}},e.createElement("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"}},e.createElement("h2",{style:{color:"#ffffff",margin:0,fontSize:"1.5rem"}},"Choose Match Type"),e.createElement("button",{className:"modal-close-btn",onClick:()=>O(!1),style:{background:"none",border:"none",color:"#ffffff",fontSize:"24px",cursor:"pointer",padding:"0",width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center"}},"×")),e.createElement("div",{className:"modal-body"},e.createElement("p",{style:{color:"#e0e0e0",fontSize:"1rem",marginBottom:"16px",lineHeight:"1.5"}},"Select the type of match you want to schedule with ",E.defender.firstName,":"),e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"12px"}},E.allMatchTypes.map(($,ye)=>e.createElement("button",{key:ye,onClick:()=>{const V={...E,type:$.type,confidence:$.confidence};Xe(V),O(!1)},style:{background:"linear-gradient(135deg, #a855f7, #7c3aed)",border:"none",color:"white",padding:"12px 16px",borderRadius:"6px",fontSize:"1rem",cursor:"pointer",fontWeight:"600",textAlign:"left",display:"flex",alignItems:"center",justifyContent:"space-between"}},e.createElement("span",null,Wt($.type)," ",ra($.type)),e.createElement("span",{style:{fontSize:"0.9rem",opacity:.8}},Math.round($.confidence*100),"% confidence"))))))),document.body)),document.body):null},o$=({isOpen:a,onClose:r,selectedLadder:t})=>{const[n,o]=h.useState(t),[i,c]=h.useState(null),[u,m]=h.useState(!0),[g,f]=h.useState(null),[y,v]=h.useState([]),[S,w]=h.useState([]),[x,k]=h.useState(!1),[E,I]=h.useState(!1);h.useEffect(()=>{a&&o(t)},[a,t]),h.useEffect(()=>{if(a){M(),N(),_();const F=setInterval(()=>{M()},3e4);return()=>clearInterval(F)}},[a,n]);const M=async()=>{try{m(!0),f(null);const F=await fetch(`${de}/api/ladder/prize-pool/${n}`);if(F.ok){const j=await F.json();c(j)}else{const j=P();c(j)}}catch(F){console.error("Error fetching prize pool data:",F);const j=P();c(j),f("Using estimated data - API connection failed")}finally{m(!1)}},N=async()=>{try{const F=await fetch(`${de}/api/ladder/prize-pool/${n}/history`);if(F.ok){const j=await F.json();v(j)}}catch(F){console.error("Error fetching historical data:",F)}},_=async()=>{try{const F=await fetch(`${de}/api/ladder/prize-pool/${n}/winners`);if(F.ok){const j=await F.json();w(j)}}catch(F){console.error("Error fetching winners:",F)}},P=()=>{const F=new Date,j=new Date(F.getFullYear(),Math.floor(F.getMonth()/2)*2,1),J=Math.floor((F-j)/(1e3*60*60*24)),Y=Math.floor(J/7*3),D=Y*3,A=new Date(j);return A.setMonth(A.getMonth()+2),{currentPrizePool:D,totalMatches:Y,nextDistribution:A.toISOString(),isEstimated:!0}},B=F=>{switch(F){case"499-under":return"499 & Under";case"500-549":return"500-549";case"550-plus":return"550+";default:return F}},R=F=>{o(F),k(!1),I(!1)},W=F=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(F),L=F=>new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return a?e.createElement("div",{className:"prize-pool-modal"},e.createElement("div",{className:"prize-pool-modal-content"},e.createElement("div",{className:"modal-header"},e.createElement("h2",{style:{color:"#ff4444",margin:"0",fontSize:"1.8rem",textAlign:"center"}},"🏆 Prize Pool Tracker"),e.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem",marginTop:"1rem"}},e.createElement("label",{style:{color:"#ccc",fontWeight:"bold",fontSize:"1rem"}},"Select Ladder:"),e.createElement("select",{value:n,onChange:F=>R(F.target.value),style:{background:"rgba(0, 0, 0, 0.8)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",minWidth:"150px"}},e.createElement("option",{value:"499-under"},"499 & Under"),e.createElement("option",{value:"500-549"},"500-549"),e.createElement("option",{value:"550-plus"},"550+"))),e.createElement("div",{style:{marginTop:"0.5rem",textAlign:"center",color:"#ff4444",fontSize:"1.2rem",fontWeight:"bold"}},B(n)," Ladder"),e.createElement("div",{style:{position:"absolute",top:"20px",right:"20px",display:"flex",alignItems:"center",gap:"5px",fontSize:"0.8rem",color:"#00ff00"}},e.createElement("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#00ff00",animation:"pulse 2s infinite"}}),"Live"),e.createElement("button",{onClick:r,style:{position:"absolute",top:"15px",left:"20px",background:"none",border:"none",color:"#ccc",fontSize:"1.5rem",cursor:"pointer",padding:"5px",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:F=>{F.target.style.background="rgba(255, 255, 255, 0.1)",F.target.style.color="#fff"},onMouseLeave:F=>{F.target.style.background="none",F.target.style.color="#ccc"}},"×")),e.createElement("div",{className:"modal-body"},u&&!i?e.createElement("div",{style:{textAlign:"center",padding:"2rem"}},e.createElement("div",{className:"loading-spinner"}),e.createElement("p",{style:{color:"#ccc",marginTop:"1rem"}},"Loading prize pool data...")):e.createElement(e.Fragment,null,g&&e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"6px",padding:"8px",marginBottom:"1rem",fontSize:"0.9rem",color:"#ffc107"}},"⚠️ ",g),e.createElement("div",{style:{marginBottom:"2rem"}},e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"12px",padding:"1.5rem",textAlign:"center"}},e.createElement("div",{style:{fontSize:"2.5rem",fontWeight:"bold",color:"#ff4444"}},W((i==null?void 0:i.currentPrizePool)||0)),e.createElement("div",{style:{color:"#ccc",fontSize:"1rem"}},"Current Prize Pool"),(i==null?void 0:i.isEstimated)&&e.createElement("div",{style:{color:"#ffc107",fontSize:"0.9rem",marginTop:"8px"}},"(Estimated)"))),e.createElement("div",{style:{marginBottom:"2rem"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"1rem",fontSize:"1.3rem"}},"Prize Pool Details"),e.createElement("div",{style:{display:"grid",gap:"0.75rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",padding:"1rem"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},e.createElement("span",{style:{color:"#ccc"}},"Total Matches:"),e.createElement("span",{style:{color:"#fff",fontWeight:"bold"}},(i==null?void 0:i.totalMatches)||0)),e.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},e.createElement("span",{style:{color:"#ccc"}},"Next Distribution:"),e.createElement("span",{style:{color:"#fff"}},i!=null&&i.nextDistribution?L(i.nextDistribution):"TBD")),e.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},e.createElement("span",{style:{color:"#ccc"}},"Prize Split:"),e.createElement("span",{style:{color:"#fff"}},"50% 1st Place, 50% Most Improved")))),e.createElement("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"2rem"}},e.createElement("button",{onClick:()=>I(!E),style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",color:"#ffc107",padding:"12px 16px",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},onMouseEnter:F=>{F.target.style.background="rgba(255, 193, 7, 0.2)"},onMouseLeave:F=>{F.target.style.background="rgba(255, 193, 7, 0.1)"}},"🏅 ",E?"Hide":"Show"," Winners"),e.createElement("button",{onClick:()=>k(!x),style:{background:"rgba(0, 123, 255, 0.1)",border:"1px solid rgba(0, 123, 255, 0.3)",color:"#007bff",padding:"12px 16px",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},onMouseEnter:F=>{F.target.style.background="rgba(0, 123, 255, 0.2)"},onMouseLeave:F=>{F.target.style.background="rgba(0, 123, 255, 0.1)"}},"📊 ",x?"Hide":"Show"," History")),E&&e.createElement("div",{style:{marginBottom:"2rem"}},e.createElement("h3",{style:{color:"#ffc107",marginBottom:"1rem",fontSize:"1.3rem"}},"🏅 Recent Winners"),e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.05)",borderRadius:"8px",padding:"1rem"}},S.length>0?e.createElement("div",{style:{display:"grid",gap:"0.75rem"}},S.slice(0,5).map((F,j)=>e.createElement("div",{key:j,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px"}},e.createElement("div",null,e.createElement("div",{style:{color:"#fff",fontWeight:"bold"}},F.playerName),e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},F.category," - ",L(F.date))),e.createElement("div",{style:{color:"#ffc107",fontWeight:"bold"}},W(F.amount))))):e.createElement("div",{style:{color:"#ccc",fontStyle:"italic",textAlign:"center"}},"No winners recorded yet"))),x&&e.createElement("div",{style:{marginBottom:"2rem"}},e.createElement("h3",{style:{color:"#007bff",marginBottom:"1rem",fontSize:"1.3rem"}},"📊 Prize Pool History"),e.createElement("div",{style:{background:"rgba(0, 123, 255, 0.05)",borderRadius:"8px",padding:"1rem"}},y.length>0?e.createElement("div",{style:{display:"grid",gap:"0.75rem"}},y.slice(0,5).map((F,j)=>e.createElement("div",{key:j,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px"}},e.createElement("div",null,e.createElement("div",{style:{color:"#fff",fontWeight:"bold"}},F.period),e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},F.matches," matches")),e.createElement("div",{style:{color:"#007bff",fontWeight:"bold"}},W(F.prizePool))))):e.createElement("div",{style:{color:"#ccc",fontStyle:"italic",textAlign:"center"}},"No historical data available"))))))):null},l$=({isOpen:a,onClose:r,playerName:t,selectedLadder:n,onMatchReported:o})=>{const[i,c]=h.useState([]),[u,m]=h.useState({_id:"test-match",senderName:"John Doe",receiverName:"Jane Smith",date:"2024-01-15",time:"7:00 PM",location:"Legends Brews & Cues"}),[g,f]=h.useState(!0),[y,v]=h.useState(!1),[S,w]=h.useState(""),[x,k]=h.useState(""),[E,I]=h.useState(""),[M,N]=h.useState(""),[_,P]=h.useState("race-to-5"),[B,R]=h.useState(""),[W,L]=h.useState(""),[F,j]=h.useState(""),[J,Y]=h.useState(""),[D,A]=h.useState(""),[U,K]=h.useState(!1),[X,O]=h.useState(!1),[Q,ne]=h.useState(""),[T,re]=h.useState(!1),[G,se]=h.useState(null),[pe,Se]=h.useState(null),[at,be]=h.useState(0),[Je,nt]=h.useState([]),[Xe,ct]=h.useState(null);h.useEffect(()=>{a&&(Zt(),ft(),Ot(),Ft())},[a,t,n]);const Ot=async()=>{try{const me=await fetch(`${de}/api/monetization/payment-methods`);if(me.ok){const Ce=await me.json();nt(Ce.paymentMethods),ct(Ce),Ce.paymentMethods.length>0&&ne(Ce.paymentMethods[0].id)}}catch(me){console.error("Error loading payment methods:",me)}},Zt=async()=>{try{f(!0),w("");const me=await fetch(`${de}/api/ladder/front-range-pool-hub/ladders/${n}/matches?status=scheduled`);if(me.ok){const Qe=((await me.json()).matches||[]).filter(qe=>{var Mt,Jt,Yt,ua,ma,Oa;const He=((Mt=qe.player1)==null?void 0:Mt.email)||((Yt=(Jt=qe.player1)==null?void 0:Jt.unifiedAccount)==null?void 0:Yt.email),st=((ua=qe.player2)==null?void 0:ua.email)||((Oa=(ma=qe.player2)==null?void 0:ma.unifiedAccount)==null?void 0:Oa.email);return He===t||st===t}).map(qe=>{var He,st,Mt,Jt;return{_id:qe._id,senderName:((He=qe.player1)==null?void 0:He.firstName)+" "+((st=qe.player1)==null?void 0:st.lastName),receiverName:((Mt=qe.player2)==null?void 0:Mt.firstName)+" "+((Jt=qe.player2)==null?void 0:Jt.lastName),date:qe.scheduledDate?new Date(qe.scheduledDate).toISOString().split("T")[0]:"",time:qe.scheduledDate?new Date(qe.scheduledDate).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"",location:qe.location||"TBD",status:qe.status,createdAt:qe.createdAt||new Date().toISOString(),matchFormat:qe.matchFormat,raceLength:qe.raceLength}});c(Qe)}else console.error("Failed to fetch scheduled matches:",me.status,me.statusText),c([])}catch(me){console.error("Error fetching pending matches:",me),w("Failed to load pending matches"),c([])}finally{f(!1)}},ft=async()=>{try{const me=await fetch(`${de}/api/monetization/membership/${t}`);if(me.ok){const Ce=await me.json();se(Ce.membership)}}catch(me){console.error("Error fetching membership:",me)}},Ft=async()=>{try{const me=await fetch(`${de}/api/monetization/user-payment-data/${t}`);if(me.ok){const Ce=await me.json();Se(Ce.paymentHistory),be(Ce.credits||0)}}catch(me){console.error("Error loading user payment data:",me)}},ra=me=>{m(me),I(""),N(""),P("race-to-5"),R(""),L(""),j(""),Y(""),A(""),K(!1),w(""),k("")},Wt=(me,Ce,_e)=>{const Qe=parseInt(me),qe=parseInt(Ce);if(!me||!Ce||isNaN(Qe)||isNaN(qe))return{valid:!1,error:"Please enter valid numbers for both scores"};if(Qe<=0||qe<=0)return{valid:!1,error:"Scores must be greater than 0"};if(Qe===qe)return{valid:!1,error:"Winner and loser cannot have the same score"};let He;return _e==="other"?He=parseInt(B)||5:He=parseInt(_e.split("-")[2])||5,Qe>He||qe>He?{valid:!1,error:`Scores cannot exceed ${He} games for ${_e.replace("-"," ")}`}:Qe<qe?{valid:!1,error:"Winner must have more games than loser"}:{valid:!0,error:""}},he=(me,Ce)=>`${me}-${Ce}`,bt=(me,Ce)=>{if(me==="winner"?L(Ce):j(Ce),A(""),Ce&&(me==="winner"?F:W)){const _e=Wt(me==="winner"?Ce:W,me==="winner"?F:Ce,_);_e.valid?N(he(me==="winner"?Ce:W,me==="winner"?F:Ce)):(A(_e.error),N(""))}},$=()=>{let me;_==="other"?me=parseInt(B)||5:me=parseInt(_.split("-")[2])||5;const Ce=[];for(let _e=0;_e<=me;_e++)Ce.push(_e);return Ce},ye=()=>{if(!pe)return"new";const me=pe.totalPayments||0,Ce=pe.failedPayments||0,_e=me>0?(me-Ce)/me:0;return me>=10&&_e>=.95?"trusted":me>=3&&_e>=.8?"verified":"new"},V=()=>at>=5,ce=async me=>{if(me.preventDefault(),!E){w("Please select a winner");return}if(_==="other"&&(!B||parseInt(B)<1)){w("Please enter a valid custom race number (1 or higher)");return}const Ce=Wt(W,F,_);if(!Ce.valid){A(Ce.error),w("Please fix the score before submitting");return}if(N(he(W,F)),!G||!G.isActive){w("❌ Active membership required to report matches. Please renew your membership first."),K(!0);return}V()?await ze():K(!0)},ze=async()=>{try{if((await fetch(`${de}/api/monetization/use-credits`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerEmail:t,amount:5,description:"Ladder Match Fee"})})).ok)await Fe(),be(Ce=>Ce-5);else throw new Error("Failed to use credits")}catch(me){console.error("Credit payment error:",me),w("Credit payment failed. Please try again.")}},Re=async me=>{re(!0),w("");try{const Ce=!G||!G.isActive,_e=Ce?10:5,Qe=[];if(Qe.push(fetch(`${de}/api/monetization/record-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"match_fee",email:t,playerName:t,amount:5,paymentMethod:me,matchId:u._id,playerId:t,notes:`Match fee for ${u.senderName} vs ${u.receiverName}`,status:"completed"})})),Ce&&Qe.push(fetch(`${de}/api/monetization/record-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"membership",email:t,playerName:t,amount:5,paymentMethod:me,playerId:t,notes:`Membership renewal for ${t}`,status:"completed"})})),(await Promise.all(Qe)).every(st=>st.ok))ye()==="new"?(k("✅ Payment recorded! Your match is pending admin verification."),setTimeout(()=>{r(),o()},2e3)):await Fe();else throw new Error("Failed to record payment(s)")}catch(Ce){console.error("Payment error:",Ce),w("Payment processing failed. Please try again.")}finally{re(!1)}},Fe=async()=>{try{v(!0),w("");const me={challengeId:u._id,winner:E,loser:E===u.senderName?u.receiverName:u.senderName,score:M,notes:J,reportedBy:t},Ce=await fetch(`${de}/api/challenges/report-result`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)});if(Ce.ok){const _e=await Ce.json();k("Match result reported successfully!"),c(Qe=>Qe.filter(qe=>qe._id!==u._id)),o&&o(_e.challenge),setTimeout(()=>{r()},2e3)}else{const _e=await Ce.json();throw new Error(_e.message||"Failed to report match result")}}catch(me){console.error("Error reporting match result:",me),w(me.message||"Failed to report match result")}finally{v(!1)}},We=me=>new Date(me).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),tt=me=>{switch(me){case"499-under":return"499 & Under";case"500-549":return"500-549";case"550-plus":return"550+";default:return me}};return a?e.createElement("div",{className:"prize-pool-modal"},e.createElement("div",{className:"prize-pool-modal-content"},e.createElement("div",{className:"modal-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"0.5rem"}},e.createElement("div",{style:{color:"#ff4444",fontSize:"1.2rem",fontWeight:"bold",flex:"1"}},tt(n)," Ladder"),e.createElement("h2",{style:{color:"#ff4444",margin:"0",fontSize:"1.8rem",textAlign:"center",flex:"2"}},"⚔️ Report Match Result"),e.createElement("div",{style:{flex:"1",display:"flex",justifyContent:"flex-end"}},e.createElement("button",{onClick:r,style:{background:"none",border:"none",color:"#ccc",fontSize:"1.5rem",cursor:"pointer",padding:"5px",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:me=>{me.target.style.background="rgba(255, 255, 255, 0.1)",me.target.style.color="#fff"},onMouseLeave:me=>{me.target.style.background="none",me.target.style.color="#ccc"}},"×"))),e.createElement("div",{className:"modal-body"},g?e.createElement("div",{style:{textAlign:"center",padding:"2rem"}},e.createElement("div",{className:"loading-spinner"}),e.createElement("p",{style:{color:"#ccc",marginTop:"1rem"}},"Loading pending matches...")):e.createElement(e.Fragment,null,S&&e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"6px",padding:"8px",marginBottom:"1rem",fontSize:"0.9rem",color:"#ffc107"}},"⚠️ ",S),x&&e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"6px",padding:"8px",marginBottom:"1rem",fontSize:"0.9rem",color:"#4caf50"}},"✅ ",x),!u&&e.createElement("div",{style:{marginBottom:"2rem"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"1rem",fontSize:"1.3rem"}},"📋 Pending Matches to Report"),i.length===0?e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",padding:"2rem",textAlign:"center",color:"#ccc"}},e.createElement("div",{style:{fontSize:"2rem",marginBottom:"1rem"}},"🎉"),e.createElement("div",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"}},"No pending matches!"),e.createElement("div",{style:{fontSize:"0.9rem"}},"All your matches have been reported.")):e.createElement("div",{style:{display:"grid",gap:"0.75rem"}},i.map(me=>e.createElement("div",{key:me._id,style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"1rem",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:Ce=>{Ce.target.style.background="rgba(255, 255, 255, 0.08)",Ce.target.style.borderColor="rgba(255, 68, 68, 0.3)"},onMouseLeave:Ce=>{Ce.target.style.background="rgba(255, 255, 255, 0.05)",Ce.target.style.borderColor="rgba(255, 255, 255, 0.1)"},onClick:()=>ra(me)},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("div",null,e.createElement("div",{style:{color:"#fff",fontWeight:"bold",fontSize:"1.1rem"}},me.senderName," vs ",me.receiverName),e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem",marginTop:"0.25rem"}},"📅 ",We(me.date)," at ",me.time),me.location&&e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},"📍 ",me.location)),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.2)",color:"#ff4444",padding:"0.5rem 1rem",borderRadius:"6px",fontSize:"0.9rem",fontWeight:"bold"}},"Report Result")))))),u&&!U&&e.createElement("div",{style:{marginBottom:"2rem"}},e.createElement("div",{style:{background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"8px",padding:"0.5rem",marginBottom:"1.5rem",textAlign:"center"}},e.createElement("div",{style:{color:"#10b981",fontWeight:"bold",marginBottom:"4px"}},"💰 Match Fee Information"),e.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.9rem",marginBottom:"8px"}},"The ",e.createElement("strong",null,"winner")," reports the match and pays the ",e.createElement("strong",null,"$5 match fee"),".",e.createElement("br",null),e.createElement("em",null,"Only one $5 fee per match - not per player!")),e.createElement("button",{onClick:()=>O(!0),style:{background:"rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.4)",color:"#10b981",padding:"6px 12px",borderRadius:"4px",fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:me=>{me.target.style.background="rgba(16, 185, 129, 0.3)"},onMouseLeave:me=>{me.target.style.background="rgba(16, 185, 129, 0.2)"}},"📋 View Payment Details")),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",padding:"0.5rem",marginBottom:"0.75rem"}},e.createElement("h4",{style:{color:"#fff",margin:"0 0 0.75rem 0"}},"Match Details"),e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},e.createElement("div",null,e.createElement("strong",null,u.senderName)," vs ",e.createElement("strong",null,u.receiverName)),e.createElement("div",null,"📅 ",We(u.date)," at ",u.time),u.location&&e.createElement("div",null,"📍 ",u.location))),e.createElement("form",{onSubmit:ce},e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",color:"#ccc",marginBottom:"0.5rem",fontWeight:"bold"}},"Match Format *"),e.createElement("select",{value:_,onChange:me=>{P(me.target.value),A(""),N(""),R(""),L(""),j("")},style:{width:"100%",padding:"0.5rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(0, 0, 0, 0.8)",color:"#fff",fontSize:"1rem"}},e.createElement("option",{value:"race-to-5",style:{background:"#000",color:"#fff"}},"Race to 5"),e.createElement("option",{value:"race-to-7",style:{background:"#000",color:"#fff"}},"Race to 7"),e.createElement("option",{value:"race-to-9",style:{background:"#000",color:"#fff"}},"Race to 9"),e.createElement("option",{value:"race-to-11",style:{background:"#000",color:"#fff"}},"Race to 11"),e.createElement("option",{value:"race-to-13",style:{background:"#000",color:"#fff"}},"Race to 13"),e.createElement("option",{value:"race-to-15",style:{background:"#000",color:"#fff"}},"Race to 15"),e.createElement("option",{value:"race-to-17",style:{background:"#000",color:"#fff"}},"Race to 17"),e.createElement("option",{value:"race-to-19",style:{background:"#000",color:"#fff"}},"Race to 19"),e.createElement("option",{value:"race-to-21",style:{background:"#000",color:"#fff"}},"Race to 21"),e.createElement("option",{value:"other",style:{background:"#000",color:"#fff"}},"Other (Custom)"))),_==="other"&&e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",color:"#ccc",marginBottom:"0.5rem",fontWeight:"bold"}},"Custom Race to *"),e.createElement("input",{type:"number",value:B,onChange:me=>{R(me.target.value),A(""),N(""),L(""),j("")},placeholder:"Enter number (e.g., 25, 50, 100)",min:"1",max:"999",style:{width:"100%",padding:"0.5rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(0, 0, 0, 0.8)",color:"#fff",fontSize:"1rem"}}),e.createElement("div",{style:{color:"#999",fontSize:"0.8rem",marginTop:"0.25rem"}},"Enter the number of games needed to win (1-999)")),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",color:"#ccc",marginBottom:"0.5rem",fontWeight:"bold"}},"Winner *"),e.createElement("select",{value:E,onChange:me=>I(me.target.value),style:{width:"100%",padding:"0.5rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(0, 0, 0, 0.8)",color:"#fff",fontSize:"1rem"},required:!0},e.createElement("option",{value:"",style:{background:"#000",color:"#fff"}},"Select winner"),e.createElement("option",{value:u.senderName,style:{background:"#000",color:"#fff"}},u.senderName),e.createElement("option",{value:u.receiverName,style:{background:"#000",color:"#fff"}},u.receiverName))),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",color:"#ccc",marginBottom:"0.5rem",fontWeight:"bold"}},"Final Score *"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"0.75rem",alignItems:"center",marginBottom:"0.5rem"},className:"score-input-grid"},e.createElement("div",null,e.createElement("label",{style:{display:"block",color:"#4caf50",fontSize:"0.9rem",marginBottom:"0.25rem",fontWeight:"bold"}},"Winner Games"),e.createElement("select",{value:W,onChange:me=>bt("winner",me.target.value),style:{width:"100%",padding:"0.5rem",borderRadius:"6px",border:D?"2px solid #f44336":"1px solid rgba(76, 175, 80, 0.3)",background:"rgba(0, 0, 0, 0.8)",color:"#4caf50",fontSize:"1.2rem",fontWeight:"bold",textAlign:"center"}},e.createElement("option",{value:"",style:{background:"#000",color:"#fff"}},"Select"),$().map(me=>e.createElement("option",{key:me,value:me,style:{background:"#000",color:"#fff"}},me)))),e.createElement("div",{style:{color:"#ccc",fontSize:"1.5rem",fontWeight:"bold",textAlign:"center",marginTop:"1.5rem"}},"-"),e.createElement("div",null,e.createElement("label",{style:{display:"block",color:"#f44336",fontSize:"0.9rem",marginBottom:"0.25rem",fontWeight:"bold"}},"Loser Games"),e.createElement("select",{value:F,onChange:me=>bt("loser",me.target.value),style:{width:"100%",padding:"0.5rem",borderRadius:"6px",border:D?"2px solid #f44336":"1px solid rgba(244, 67, 54, 0.3)",background:"rgba(0, 0, 0, 0.8)",color:"#f44336",fontSize:"1.2rem",fontWeight:"bold",textAlign:"center"}},e.createElement("option",{value:"",style:{background:"#000",color:"#fff"}},"Select"),$().map(me=>e.createElement("option",{key:me,value:me,style:{background:"#000",color:"#fff"}},me))))),M&&E&&e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"6px",padding:"0.5rem",textAlign:"center",marginBottom:"0.5rem"}},e.createElement("div",{style:{color:"#4caf50",fontWeight:"bold",fontSize:"1.1rem"}},"🏆 ",E," wins: ",M)),D&&e.createElement("div",{style:{background:"rgba(244, 67, 54, 0.1)",border:"1px solid rgba(244, 67, 54, 0.3)",borderRadius:"6px",padding:"0.5rem",color:"#f44336",fontSize:"0.9rem",textAlign:"center"}},"⚠️ ",D)),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{display:"block",color:"#ccc",marginBottom:"0.5rem",fontWeight:"bold"}},"Notes (optional)"),e.createElement("textarea",{value:J,onChange:me=>Y(me.target.value),placeholder:"Any additional notes about the match...",rows:"3",style:{width:"100%",padding:"0.5rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(0, 0, 0, 0.3)",color:"#fff",fontSize:"1rem",resize:"vertical"}})),e.createElement("div",{style:{display:"grid",gap:"0.75rem"}},e.createElement("button",{type:"submit",disabled:y||!E||!W||!F||D||_==="other"&&!B,style:{background:"rgba(255, 68, 68, 0.8)",border:"none",color:"#fff",padding:"12px 16px",borderRadius:"8px",cursor:y||!E||!W||!F||D||_==="other"&&!B?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold",opacity:y||!E||!W||!F||D||_==="other"&&!B?.6:1,transition:"all 0.2s ease"},onMouseEnter:me=>{!y&&E&&W&&F&&!D&&!(_==="other"&&!B)&&(me.target.style.background="rgba(255, 68, 68, 1)")},onMouseLeave:me=>{me.target.style.background="rgba(255, 68, 68, 0.8)"}},y?"Submitting...":"🏆 Report Match & Pay $5 Fee"),e.createElement("button",{type:"button",onClick:()=>{m(null),I(""),N(""),P("race-to-5"),R(""),L(""),j(""),Y(""),A("")},style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#ccc",padding:"12px 16px",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",transition:"all 0.2s ease"},onMouseEnter:me=>{me.target.style.background="rgba(255, 255, 255, 0.15)",me.target.style.color="#fff"},onMouseLeave:me=>{me.target.style.background="rgba(255, 255, 255, 0.1)",me.target.style.color="#ccc"}},"← Back to Matches")))),U&&e.createElement("div",{style:{marginBottom:"2rem"}},e.createElement("h3",{style:{color:"#ff4444",marginBottom:"1rem",fontSize:"1.3rem",textAlign:"center"}},"💳 Pay Match Fee"),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",padding:"1.5rem",marginBottom:"1.5rem",textAlign:"center"}},e.createElement("div",{style:{color:"#fff",fontSize:"1.2rem",fontWeight:"bold",marginBottom:"0.5rem"}},"Total Amount Due"),e.createElement("div",{style:{color:"#4caf50",fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"}},"$",!G||!G.isActive?"10.00":"5.00"),e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},!G||!G.isActive?"Match Fee ($5) + Membership Renewal ($5)":"Match Fee ($5)")),V()&&e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("button",{onClick:ze,style:{background:"linear-gradient(135deg, #4caf50, #45a049)",color:"#fff",border:"none",padding:"1rem 2rem",borderRadius:"8px",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",width:"100%",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(76, 175, 80, 0.3)"},onMouseEnter:me=>{me.target.style.transform="translateY(-2px)",me.target.style.boxShadow="0 6px 16px rgba(76, 175, 80, 0.4)"},onMouseLeave:me=>{me.target.style.transform="translateY(0)",me.target.style.boxShadow="0 4px 12px rgba(76, 175, 80, 0.3)"}},"💳 Pay with Credits ($",at.toFixed(2)," available)")),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("div",{style:{color:"#ccc",fontSize:"1rem",marginBottom:"1rem",textAlign:"center"}},"Or pay with one of these methods:"),e.createElement("div",{style:{display:"grid",gap:"0.75rem"}},Je.map(me=>e.createElement("div",{key:me.id,style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"1rem",transition:"all 0.2s ease"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("div",null,e.createElement("div",{style:{color:"#fff",fontWeight:"bold",fontSize:"1rem"}},me.name),me.username&&e.createElement("div",{style:{color:"#4caf50",fontSize:"0.9rem",marginTop:"0.25rem"}},me.username)),me.paymentLink?e.createElement("a",{href:me.paymentLink,target:"_blank",rel:"noopener noreferrer",style:{background:"rgba(76, 175, 80, 0.8)",color:"#fff",padding:"0.75rem 1.5rem",borderRadius:"6px",fontSize:"0.9rem",fontWeight:"bold",textDecoration:"none",transition:"all 0.2s ease"},onMouseEnter:Ce=>{Ce.target.style.background="rgba(76, 175, 80, 1)"},onMouseLeave:Ce=>{Ce.target.style.background="rgba(76, 175, 80, 0.8)"}},"Pay $",!G||!G.isActive?"10":"5"):e.createElement("button",{onClick:()=>Re(me.id),disabled:T,style:{background:T?"rgba(255, 255, 255, 0.1)":"rgba(76, 175, 80, 0.8)",color:"#fff",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px",fontSize:"0.9rem",fontWeight:"bold",cursor:T?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:T?.6:1},onMouseEnter:Ce=>{T||(Ce.target.style.background="rgba(76, 175, 80, 1)")},onMouseLeave:Ce=>{Ce.target.style.background=T?"rgba(255, 255, 255, 0.1)":"rgba(76, 175, 80, 0.8)"}},T?"Processing...":`Mark Paid $${!G||!G.isActive?"10":"5"}`)))))),e.createElement("button",{type:"button",onClick:()=>K(!1),style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#ccc",padding:"12px 16px",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",transition:"all 0.2s ease",width:"100%"},onMouseEnter:me=>{me.target.style.background="rgba(255, 255, 255, 0.15)",me.target.style.color="#fff"},onMouseLeave:me=>{me.target.style.background="rgba(255, 255, 255, 0.1)",me.target.style.color="#ccc"}},"← Back to Match Form"))))),X&&e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4}},e.createElement("div",{style:{background:"rgba(20, 20, 20, 0.95)",border:"2px solid rgba(255, 68, 68, 0.3)",borderRadius:"12px",padding:"1.5rem",maxWidth:"95vw",width:"95vw",maxHeight:"95vh",overflowY:"auto",position:"relative"}},e.createElement("button",{onClick:()=>O(!1),style:{position:"absolute",top:"15px",right:"20px",background:"none",border:"none",color:"#ccc",fontSize:"1.5rem",cursor:"pointer",padding:"5px",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:me=>{me.target.style.background="rgba(255, 255, 255, 0.1)",me.target.style.color="#fff"},onMouseLeave:me=>{me.target.style.background="none",me.target.style.color="#ccc"}},"×"),e.createElement("div",{style:{textAlign:"center",marginBottom:"1.5rem"}},e.createElement("h2",{style:{color:"#ff4444",margin:"0 0 0.5rem 0",fontSize:"1.8rem"}},"💳 Payment Information"),e.createElement("p",{style:{color:"#ccc",margin:0,fontSize:"1rem"}},"Understanding subscription and match reporting fees")),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"}},e.createElement("div",{style:{background:"rgba(33, 150, 243, 0.1)",border:"1px solid rgba(33, 150, 243, 0.3)",borderRadius:"8px",padding:"1.5rem"}},e.createElement("h3",{style:{color:"#2196f3",margin:"0 0 1rem 0",fontSize:"1.3rem"}},"📅 Monthly Membership - $5/month"),e.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.95rem",lineHeight:"1.6"}},e.createElement("p",{style:{margin:"0 0 0.75rem 0"}},e.createElement("strong",null,"What it includes:")),e.createElement("ul",{style:{margin:"0 0 0.75rem 0",paddingLeft:"1.5rem"}},e.createElement("li",null,"Access to all ladder divisions"),e.createElement("li",null,"Challenge other players"),e.createElement("li",null,"View ladder standings and statistics"),e.createElement("li",null,"Participate in tournaments and events"),e.createElement("li",null,"Receive notifications and updates")),e.createElement("p",{style:{margin:0,fontStyle:"italic",color:"#4caf50"}},e.createElement("strong",null,"Note:")," Membership is required to report match results. If your membership expires, you'll need to renew it ($5) plus pay the match fee ($5) = $10 total."))),e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"8px",padding:"1.5rem"}},e.createElement("h3",{style:{color:"#4caf50",margin:"0 0 1rem 0",fontSize:"1.3rem"}},"🏆 Match Reporting Fee - $5 per match"),e.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.95rem",lineHeight:"1.6"}},e.createElement("p",{style:{margin:"0 0 0.75rem 0"}},e.createElement("strong",null,"How it works:")),e.createElement("ul",{style:{margin:"0 0 0.75rem 0",paddingLeft:"1.5rem"}},e.createElement("li",null,"Only the ",e.createElement("strong",null,"winner")," pays the $5 fee"),e.createElement("li",null,"One fee per match (not per player)"),e.createElement("li",null,"Fee is paid when reporting the match result"),e.createElement("li",null,"Supports the ladder system and prize pools")),e.createElement("p",{style:{margin:0,fontStyle:"italic",color:"#ff9800"}},e.createElement("strong",null,"Example:")," If you win a match, you pay $5 to report the result. The loser pays nothing."))),e.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",padding:"1.5rem"}},e.createElement("h3",{style:{color:"#ffc107",margin:"0 0 1rem 0",fontSize:"1.3rem"}},"💳 Payment Methods"),e.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.95rem",lineHeight:"1.6"}},e.createElement("p",{style:{margin:"0 0 0.75rem 0"}},e.createElement("strong",null,"We accept:")),e.createElement("ul",{style:{margin:"0 0 0.75rem 0",paddingLeft:"1.5rem"}},e.createElement("li",null,"CashApp"),e.createElement("li",null,"Venmo"),e.createElement("li",null,"PayPal"),e.createElement("li",null,"Credit/Debit Cards (via Square)"),e.createElement("li",null,"Credits (pre-purchased balance)")),e.createElement("p",{style:{margin:0,fontStyle:"italic",color:"#4caf50"}},e.createElement("strong",null,"Tip:")," Buy credits in advance for instant match reporting without verification delays!"))),e.createElement("div",{style:{background:"rgba(156, 39, 176, 0.1)",border:"1px solid rgba(156, 39, 176, 0.3)",borderRadius:"8px",padding:"1.5rem"}},e.createElement("h3",{style:{color:"#9c27b0",margin:"0 0 1rem 0",fontSize:"1.3rem"}},"🛡️ Trust & Verification System"),e.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.95rem",lineHeight:"1.6"}},e.createElement("p",{style:{margin:"0 0 0.75rem 0"}},e.createElement("strong",null,"How verification works:")),e.createElement("ul",{style:{margin:"0 0 0.75rem 0",paddingLeft:"1.5rem"}},e.createElement("li",null,e.createElement("strong",null,"New users:")," Payments require admin verification (24-48 hours)"),e.createElement("li",null,e.createElement("strong",null,"Verified users:")," 3+ successful payments = auto-approval"),e.createElement("li",null,e.createElement("strong",null,"Trusted users:")," 10+ successful payments = instant processing")),e.createElement("p",{style:{margin:0,fontStyle:"italic",color:"#4caf50"}},e.createElement("strong",null,"Build trust:")," Make successful payments to earn faster processing!")))),e.createElement("div",{style:{textAlign:"center",marginTop:"1.5rem"}},e.createElement("button",{onClick:()=>O(!1),style:{background:"rgba(255, 68, 68, 0.8)",color:"#fff",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:me=>{me.target.style.background="rgba(255, 68, 68, 1)"},onMouseLeave:me=>{me.target.style.background="rgba(255, 68, 68, 0.8)"}},"Got it! Close"))))):null},s$=({isOpen:a,onClose:r,playerEmail:t})=>{const[n,o]=h.useState("overview"),[i,c]=h.useState(!1),[u,m]=h.useState(""),[g,f]=h.useState(""),[y,v]=h.useState({credits:0,membership:null,paymentHistory:[],trustLevel:"new",stats:{}}),[S,w]=h.useState({amount:20,paymentMethod:"",customAmount:""}),[x,k]=h.useState({paymentMethod:"",duration:"monthly"}),[E,I]=h.useState([]),[M,N]=h.useState({x:0,y:0}),[_,P]=h.useState(!1),B=h.useRef({x:0,y:0});h.useEffect(()=>{a&&t&&(F(),j(),N({x:0,y:0}))},[a,t]);const R=T=>{P(!0),B.current={x:T.clientX-M.x,y:T.clientY-M.y},document.body.style.userSelect="none"},W=T=>{_&&N({x:T.clientX-B.current.x,y:T.clientY-B.current.y})},L=()=>{P(!1),document.body.style.userSelect=""};h.useEffect(()=>(_?(window.addEventListener("mousemove",W),window.addEventListener("mouseup",L)):(window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",L)),()=>{window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",L)}),[_]);const F=async()=>{var T,re;try{c(!0),console.log(`🔍 Loading account data for: ${t}`),console.log(`📡 URL: ${de}/api/monetization/user-payment-data/${t}`);const G=await fetch(`${de}/api/monetization/user-payment-data/${t}`);if(console.log(`📊 Response status: ${G.status}`),G.ok){const se=await G.json();console.log("📊 Account data loaded:",se),v({credits:se.credits||0,membership:se.membership||null,paymentHistory:((T=se.paymentHistory)==null?void 0:T.recentPayments)||[],trustLevel:((re=se.paymentHistory)==null?void 0:re.trustLevel)||"new",stats:se.paymentHistory||{}}),m("")}else{const se=await G.json().catch(()=>({}));console.error("❌ Failed to load account data:",G.status,se),v({credits:0,membership:null,paymentHistory:[],trustLevel:"new",stats:{totalPayments:0,failedPayments:0,successRate:0}}),m("Payment system temporarily unavailable. Using default settings.")}}catch(G){console.error("❌ Network error loading account data:",G),v({credits:0,membership:null,paymentHistory:[],trustLevel:"new",stats:{totalPayments:0,failedPayments:0,successRate:0}}),m("Network error. Using default settings.")}finally{c(!1)}},j=async()=>{try{const T=await fetch(`${de}/api/monetization/payment-methods`);if(T.ok){const re=await T.json();I(re.paymentMethods||[]),re.paymentMethods.length>0&&(w(G=>({...G,paymentMethod:re.paymentMethods[0].id})),k(G=>({...G,paymentMethod:re.paymentMethods[0].id})))}}catch(T){console.error("Error loading payment methods:",T)}},J=async()=>{try{c(!0),m("");const T=S.customAmount?parseFloat(S.customAmount):S.amount;if(!T||T<5){m("Minimum purchase amount is $5.00");return}const re=await fetch(`${de}/api/monetization/purchase-credits`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerEmail:t,amount:T,paymentMethod:S.paymentMethod,paymentData:{source:"payment_dashboard"}})});if(re.ok)f(`✅ Successfully purchased $${T.toFixed(2)} in credits!`),await F(),w({amount:20,paymentMethod:S.paymentMethod,customAmount:""});else{const G=await re.json();m(G.message||"Failed to purchase credits")}}catch(T){console.error("Error purchasing credits:",T),m("Network error purchasing credits")}finally{c(!1)}},Y=async()=>{try{c(!0),m("");const T=await fetch(`${de}/api/monetization/record-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerEmail:t,amount:5,paymentMethod:x.paymentMethod,description:"Monthly Ladder Membership",type:"membership",requiresVerification:y.trustLevel==="new",notes:`Membership purchase via dashboard - ${x.duration}`})});if(T.ok)(await T.json()).requiresVerification?f("✅ Membership payment recorded! Pending admin verification."):f("✅ Membership activated successfully!"),await F();else{const re=await T.json();m(re.message||"Failed to purchase membership")}}catch(T){console.error("Error purchasing membership:",T),m("Network error purchasing membership")}finally{c(!1)}},D=T=>{switch(T){case"trusted":return"#4caf50";case"verified":return"#ff9800";default:return"#f44336"}},A=T=>{switch(T){case"trusted":return"🟢";case"verified":return"🟡";default:return"🔴"}},U=T=>{switch(T){case"trusted":return"Instant Process";case"verified":return"Auto Process";default:return"Needs Admin Approval"}},K=T=>new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),X=()=>{var T,re,G,se,pe;return e.createElement("div",null,e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"}},e.createElement("h3",{style:{color:"#fff",margin:"0 0 1rem 0",fontSize:"1.2rem"}},"📊 Account Status"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"}},e.createElement("div",null,e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem",marginBottom:"0.25rem"}},"Available Credits"),e.createElement("div",{style:{color:"#4caf50",fontSize:"1.5rem",fontWeight:"bold"}},"$",y.credits.toFixed(2))),e.createElement("div",null,e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem",marginBottom:"0.25rem"}},"Payment Status"),e.createElement("div",{style:{color:D(y.trustLevel),fontSize:"0.8rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"}},A(y.trustLevel)," ",U(y.trustLevel)))),e.createElement("div",{style:{background:(T=y.membership)!=null&&T.isActive?"rgba(76, 175, 80, 0.1)":"rgba(255, 152, 0, 0.1)",border:`1px solid ${(re=y.membership)!=null&&re.isActive?"rgba(76, 175, 80, 0.3)":"rgba(255, 152, 0, 0.3)"}`,borderRadius:"8px",padding:"1rem"}},e.createElement("div",{style:{color:(G=y.membership)!=null&&G.isActive?"#4caf50":"#ff9800",fontWeight:"bold",marginBottom:"0.5rem"}},(se=y.membership)!=null&&se.isActive?"✅ Active Membership":"⚠️ Membership Expired"),(pe=y.membership)!=null&&pe.isActive?e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},"Expires: ",K(y.membership.expiresAt)):e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},"Renew your membership to report matches"))),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"}},e.createElement("h3",{style:{color:"#fff",margin:"0 0 1rem 0",fontSize:"1.2rem"}},"⚡ Quick Actions"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"}},e.createElement("button",{onClick:()=>o("credits"),style:{background:"linear-gradient(45deg, #4CAF50, #45a049)",color:"white",border:"none",borderRadius:"8px",padding:"1rem",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"}},"💳 Buy Credits"),e.createElement("button",{onClick:()=>o("membership"),style:{background:"linear-gradient(45deg, #ff9800, #f57c00)",color:"white",border:"none",borderRadius:"8px",padding:"1rem",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"}},"🎯 Renew Membership"))),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"1rem"}},e.createElement("h3",{style:{color:"#fff",margin:"0 0 1rem 0",fontSize:"1.2rem"}},"📈 Payment Statistics"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem",color:"#ccc",fontSize:"0.9rem"}},e.createElement("div",null,e.createElement("div",{style:{color:"#4caf50",fontSize:"1.2rem",fontWeight:"bold"}},y.stats.totalPayments||0),e.createElement("div",null,"Total Payments")),e.createElement("div",null,e.createElement("div",{style:{color:"#ff9800",fontSize:"1.2rem",fontWeight:"bold"}},((y.stats.successRate||0)*100).toFixed(0),"%"),e.createElement("div",null,"Success Rate")),e.createElement("div",null,e.createElement("div",{style:{color:"#2196f3",fontSize:"1.2rem",fontWeight:"bold"}},y.stats.failedPayments||0),e.createElement("div",null,"Failed Payments")))))},O=()=>e.createElement("div",null,e.createElement("h3",{style:{color:"#fff",margin:"0 0 1rem 0",fontSize:"1.2rem"}},"💳 Purchase Credits"),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"}},e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{color:"#ccc",display:"block",marginBottom:"0.5rem"}},"Credit Amount"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginBottom:"1rem"}},[20,50,100,200].map(T=>e.createElement("button",{key:T,onClick:()=>w(re=>({...re,amount:T,customAmount:""})),style:{background:S.amount===T?"rgba(76, 175, 80, 0.8)":"rgba(255, 255, 255, 0.1)",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",padding:"0.75rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold"}},"$",T))),e.createElement("input",{type:"number",placeholder:"Custom amount (min $5)",value:S.customAmount,onChange:T=>w(re=>({...re,customAmount:T.target.value,amount:0})),style:{width:"100%",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem"}})),e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{color:"#ccc",display:"block",marginBottom:"0.5rem"}},"Payment Method"),e.createElement("select",{value:S.paymentMethod,onChange:T=>w(re=>({...re,paymentMethod:T.target.value})),style:{width:"100%",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem"}},E.map(T=>e.createElement("option",{key:T.id,value:T.id},T.name)))),e.createElement("button",{onClick:J,disabled:i,style:{width:"100%",background:i?"rgba(255, 255, 255, 0.1)":"linear-gradient(45deg, #4CAF50, #45a049)",color:"white",border:"none",borderRadius:"8px",padding:"1rem",cursor:i?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"}},i?"Processing...":`Purchase $${S.customAmount||S.amount} Credits`)),e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"8px",padding:"1rem"}},e.createElement("h4",{style:{color:"#4caf50",margin:"0 0 0.5rem 0"}},"💡 Why Buy Credits?"),e.createElement("ul",{style:{color:"#ccc",fontSize:"0.9rem",margin:0,paddingLeft:"1.5rem"}},e.createElement("li",null,"Instant match fee payments - no waiting for verification"),e.createElement("li",null,"No need to enter payment details for each match"),e.createElement("li",null,"Bulk discounts available for larger purchases"),e.createElement("li",null,"Credits never expire")))),Q=()=>e.createElement("div",null,e.createElement("h3",{style:{color:"#fff",margin:"0 0 1rem 0",fontSize:"1.2rem"}},"🎯 Membership Management"),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"}},e.createElement("div",{style:{marginBottom:"1rem"}},e.createElement("label",{style:{color:"#ccc",display:"block",marginBottom:"0.5rem"}},"Payment Method"),e.createElement("select",{value:x.paymentMethod,onChange:T=>k(re=>({...re,paymentMethod:T.target.value})),style:{width:"100%",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem"}},E.map(T=>e.createElement("option",{key:T.id,value:T.id},T.name)))),e.createElement("div",{style:{background:"rgba(255, 152, 0, 0.1)",border:"1px solid rgba(255, 152, 0, 0.3)",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"}},e.createElement("div",{style:{color:"#ff9800",fontWeight:"bold",marginBottom:"0.5rem"}},"💰 Membership Fee: $5.00/month"),e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},y.trustLevel==="new"&&e.createElement("div",{style:{color:"#ff9800",fontWeight:"bold",marginBottom:"0.5rem"}},"⚠️ New users require admin verification"),"Active membership is required to report match results")),e.createElement("button",{onClick:Y,disabled:i,style:{width:"100%",background:i?"rgba(255, 255, 255, 0.1)":"linear-gradient(45deg, #ff9800, #f57c00)",color:"white",border:"none",borderRadius:"8px",padding:"1rem",cursor:i?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"}},i?"Processing...":"Purchase Monthly Membership ($5.00)"))),ne=()=>e.createElement("div",null,e.createElement("h3",{style:{color:"#fff",margin:"0 0 1rem 0",fontSize:"1.2rem"}},"📋 Payment History"),y.paymentHistory.length===0?e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"2rem",textAlign:"center",color:"#ccc"}},"No payment history found"):e.createElement("div",{style:{maxHeight:"400px",overflowY:"auto"}},y.paymentHistory.map((T,re)=>e.createElement("div",{key:re,style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"}},e.createElement("div",null,e.createElement("strong",{style:{color:"#fff"}},T.description),e.createElement("span",{style:{marginLeft:"1rem",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"bold",background:T.type==="membership"?"rgba(76, 175, 80, 0.2)":T.type==="match_fee"?"rgba(255, 152, 0, 0.2)":"rgba(156, 39, 176, 0.2)",color:T.type==="membership"?"#4caf50":T.type==="match_fee"?"#ff9800":"#9c27b0"}},T.type==="membership"?"MEMBERSHIP":T.type==="match_fee"?"MATCH FEE":"CREDITS")),e.createElement("span",{style:{color:"#4caf50",fontWeight:"bold",fontSize:"1.1rem"}},"$",T.amount.toFixed(2))),e.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},e.createElement("div",null,e.createElement("strong",null,"Method:")," ",T.paymentMethod),e.createElement("div",null,e.createElement("strong",null,"Date:")," ",K(T.createdAt)),e.createElement("div",null,e.createElement("strong",null,"Status:"),e.createElement("span",{style:{color:T.status==="completed"?"#4caf50":T.status==="failed"?"#f44336":"#ff9800",marginLeft:"0.5rem"}},T.status.toUpperCase())))))));return e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:a?"flex":"none",alignItems:"flex-start",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)",paddingTop:"120px",paddingBottom:"20px"},onClick:r},e.createElement("div",{style:{transform:`translate(${M.x}px, ${M.y}px)`,cursor:_?"grabbing":"default",background:"linear-gradient(120deg, #232323 80%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"1.2rem",boxShadow:"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",width:"800px",maxWidth:"95vw",maxHeight:"calc(100vh - 160px)",display:"flex",flexDirection:"column",animation:"modalBounceIn 0.5s cubic-bezier(.21,1.02,.73,1.01)",position:"relative",fontFamily:"inherit",boxSizing:"border-box"},onClick:T=>T.stopPropagation()},e.createElement("div",{onMouseDown:R,style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#e53e3e",padding:"0.3rem .5rem",borderTopLeftRadius:"1.2rem",borderTopRightRadius:"1.2rem",cursor:_?"grabbing":"grab",userSelect:"none",gap:"1rem"}},e.createElement("h2",{style:{margin:0,fontSize:"1rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.02em",color:"#fff",textShadow:"0 1px 12px #000a",flex:1}},"💳 Payment Dashboard"),e.createElement("button",{onClick:r,style:{background:"transparent",border:"none",color:"#fff",fontSize:"1.2rem",cursor:"pointer",padding:"0.2rem",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px"},onMouseEnter:T=>{T.target.style.background="rgba(255, 255, 255, 0.2)"},onMouseLeave:T=>{T.target.style.background="transparent"}},"×")),e.createElement("div",{style:{padding:"1rem 0",maxHeight:"calc(100vh - 240px)",overflowY:"auto"}},u&&e.createElement("div",{style:{background:"rgba(244, 67, 54, 0.1)",border:"1px solid rgba(244, 67, 54, 0.3)",borderRadius:"6px",padding:"12px",marginBottom:"1rem",color:"#f44336"}},"⚠️ ",u),g&&e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"6px",padding:"12px",marginBottom:"1rem",color:"#4caf50"}},g),e.createElement("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"}},[{id:"overview",label:"📊 Overview",icon:"📊"},{id:"credits",label:"💳 Credits",icon:"💳"},{id:"membership",label:"🎯 Membership",icon:"🎯"},{id:"history",label:"📋 History",icon:"📋"}].map(T=>e.createElement("button",{key:T.id,onClick:()=>o(T.id),style:{background:n===T.id?"rgba(76, 175, 80, 0.8)":"transparent",color:n===T.id?"#fff":"#ccc",border:"none",borderRadius:"6px 6px 0 0",padding:"0.75rem 1rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold",transition:"all 0.2s ease"}},T.label))),n==="overview"&&X(),n==="credits"&&O(),n==="membership"&&Q(),n==="history"&&ne())))},i$=({isOpen:a,onClose:r,onPermissionGranted:t})=>{const[n,o]=h.useState(null),[i,c]=h.useState(!1);h.useEffect(()=>{a&&o(Hn.getStatus())},[a]);const u=async()=>{c(!0);try{const g=await Hn.requestPermission();o(Hn.getStatus()),g&&(Hn.showNotification("🎉 Notifications Enabled!","You'll now receive instant alerts for challenges and counter-proposals!",{requireInteraction:!0}),t&&t())}catch(g){console.error("Error requesting notification permission:",g)}finally{c(!1)}},m=()=>{Hn.disableNotifications(),o(Hn.getStatus()),r()};return!a||!n?null:e.createElement("div",{className:"notification-modal-overlay",onClick:r,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"flex-start",justifyContent:"center",paddingTop:window.innerWidth<=768?"180px":"120px",zIndex:1e5,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)"}},e.createElement("div",{className:"notification-modal-container",onClick:g=>g.stopPropagation(),style:{background:"linear-gradient(120deg, #232323 80%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:window.innerWidth<=768?"0.5rem":"1.2rem",boxShadow:"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",width:window.innerWidth<=768?"95vw":"400px",maxWidth:window.innerWidth<=768?"95vw":"400px",minWidth:window.innerWidth<=768?"320px":"400px",margin:"0 auto",animation:"modalBounceIn 0.5s cubic-bezier(.21,1.02,.73,1.01)",padding:0,position:"relative",fontFamily:"inherit",boxSizing:"border-box",maxHeight:"60vh",display:"flex",flexDirection:"column",overflowY:"auto"},role:"dialog","aria-modal":"true","aria-label":"Enable Notifications",tabIndex:-1},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#e53e3e",padding:"0.5rem 1rem",borderTopLeftRadius:window.innerWidth<=768?"0.5rem":"1.2rem",borderTopRightRadius:window.innerWidth<=768?"0.5rem":"1.2rem",position:"relative",userSelect:"none",gap:"1rem"}},e.createElement("h2",{style:{margin:0,fontSize:window.innerWidth<=768?"1rem":"1.1rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.02em",textShadow:"0 1px 12px #000a",zIndex:2,flex:1,wordBreak:"break-word",minWidth:0,color:"#fff"}},"🔔 Enable Notifications")),e.createElement("div",{className:"notification-permission-modal"},e.createElement("div",{className:"notification-header"},e.createElement("div",{className:"notification-icon"},"🔔"),e.createElement("h3",null,"Stay Updated with Instant Alerts!")),e.createElement("div",{className:"notification-benefits"},e.createElement("h4",null,"Get notified instantly when:"),e.createElement("ul",null,e.createElement("li",null,"🎯 Someone challenges you to a match"),e.createElement("li",null,"✅ Your challenges are accepted or declined"),e.createElement("li",null,"🔄 Players submit counter-proposals"),e.createElement("li",null,"📅 You have upcoming matches"),e.createElement("li",null,"📈 Your ladder position changes"))),e.createElement("div",{className:"notification-status"},n.permission==="granted"&&e.createElement("div",{className:"status-success"},"✅ Notifications are enabled! You'll receive instant alerts."),n.permission==="denied"&&e.createElement("div",{className:"status-error"},"❌ Notifications are blocked. You can enable them in your browser settings."),n.permission==="default"&&e.createElement("div",{className:"status-pending"},'⏳ Click "Enable Notifications" to get instant alerts!')),e.createElement("div",{className:"notification-actions"},n.permission==="default"&&e.createElement("button",{onClick:u,disabled:i,className:"enable-notifications-btn"},i?"Requesting...":"🔔 Enable Notifications"),n.permission==="granted"&&e.createElement("button",{onClick:r,className:"close-btn"},"✅ All Set!"),n.permission==="denied"&&e.createElement("button",{onClick:r,className:"close-btn"},"Maybe Later"),e.createElement("button",{onClick:m,className:"dismiss-btn"},"Don't Ask Again")),e.createElement("div",{className:"notification-footer"},e.createElement("p",null,e.createElement("small",null,"You can change notification settings anytime in your browser or app preferences."))))))},c$=()=>{const[a,r]=h.useState(null),[t,n]=h.useState(!0),[o,i]=h.useState(!0);h.useEffect(()=>{c()},[]);const c=async()=>{try{const m=await fetch(`${de}/api/monetization/promotional-config`);if(m.ok){const g=await m.json();r(g.config)}}catch(m){console.error("Error fetching promotional config:",m)}finally{n(!1)}},u=()=>{i(!1)};return t||!a||!a.isPromotionalPeriod||!o?null:e.createElement("div",{className:"promotional-pricing-banner"},e.createElement("div",{className:"promotional-content"},e.createElement("div",{className:"promotional-text"},e.createElement("div",{className:"promotional-title"},a.promotionalMessage),e.createElement("div",{className:"match-fees-note"},"Match fees apply."),e.createElement("div",{className:"promotional-details"},e.createElement("div",{className:"pricing-info"},e.createElement("span",{className:"free-membership"},"FREE Monthly Membership"),e.createElement("span",{className:"match-fee"},"$5 per match only")))),e.createElement("div",{className:"promotional-actions"},e.createElement("button",{onClick:u,className:"dismiss-btn",title:"Dismiss this banner"},"✕"))),e.createElement("div",{className:"promotional-footer"},e.createElement("div",{className:"prize-pool-info"},a.daysUntilPrizePoolStarts>0?e.createElement("span",{className:"prize-pool-countdown"},"Prize fund starts in ",a.daysUntilPrizePoolStarts," days"):e.createElement("span",{className:"prize-pool-active"},"🏆 Prize fund is now active!"))))},Bd=({playerName:a,playerLastName:r,senderEmail:t,userPin:n,userType:o,isAdmin:i=!1,showClaimForm:c=!1,initialView:u="main",isPublicView:m=!1,onClaimLadderPosition:g,claimedPositions:f=new Set,isPositionClaimed:y=()=>!1,setShowProfileModal:v})=>{er();const[S,w]=h.useState(u),[x,k]=h.useState(null),[E,I]=h.useState([]),[M,N]=h.useState(!0),[_,P]=h.useState(null),[B,R]=h.useState(null),[W,L]=h.useState(!1),[F,j]=h.useState("499-under"),[J,Y]=h.useState(!1),[D,A]=h.useState(!1),[U,K]=h.useState([]),[X,O]=h.useState(!1),[Q,ne]=h.useState(!1),[T,re]=h.useState(!0),[G,se]=h.useState(!1),[pe,Se]=h.useState(!1),[at,be]=h.useState(!1),[Je,nt]=h.useState(null),[Xe,ct]=h.useState(null),[Ot,Zt]=h.useState("challenge"),[ft,Ft]=h.useState([]),[ra,Wt]=h.useState([]),[he,bt]=h.useState([]),[$,ye]=h.useState(!1),[V,ce]=h.useState(!1),[ze,Re]=h.useState(!1),[Fe,We]=h.useState(!1),[tt,me]=h.useState(null),[Ce,_e]=h.useState(!1),[Qe,qe]=h.useState(null),[He,st]=h.useState([]),[Mt,Jt]=h.useState(!1),[Yt,ua]=h.useState(null),[ma,Oa]=h.useState([]),[Pa,ln]=h.useState(!1),[Fa,cr]=h.useState(!1),[Rr,hn]=h.useState(!1),Xt=h.useRef(null),ga=h.useCallback(async()=>{Xt.current&&clearTimeout(Xt.current),Xt.current=setTimeout(async()=>{try{N(!0);const ue=await fetch(`${de}/api/ladder/ladders/${Bi(F)}/players`,{headers:jn(n)});if(!ue.ok)throw new Error(`Failed to load ladder data: ${ue.status} ${ue.statusText}`);const Ge=await ue.json();console.log("Ladder API response:",Ge),Ge&&Array.isArray(Ge)?(I(Ge),console.log(`Loaded ${Ge.length} players from ${F} ladder`)):(console.error("Invalid ladder data format:",Ge),I([]));const $e=localStorage.getItem("unifiedUserData");if($e)try{const Me=JSON.parse($e);if(console.log("🔍 Found unified user data:",Me),Me.ladderProfile){const je=Me.ladderProfile;k({playerId:"ladder",name:`${Me.firstName} ${Me.lastName}`,firstName:Me.firstName,lastName:Me.lastName,email:Me.email,fargoRate:je.fargoRate,ladder:je.ladderName,position:je.position,immunityUntil:je.immunityUntil,activeChallenges:je.activeChallenges||[],canChallenge:je.canChallenge||!0})}else await _n(Me.email)}catch(Me){console.error("Error parsing unified user data:",Me),await _n(email)}else await _n(email,"","")}catch(ue){console.error("Error loading ladder data:",ue),I([])}finally{N(!1)}},300)},[F,n,t]);h.useEffect(()=>(ga(),gr(),mt(),dr(),()=>{Xt.current&&clearTimeout(Xt.current)}),[F,ga]);const Nn=h.useCallback(async()=>{if(console.log("🔍 loadPlayerMatches called for:",x==null?void 0:x.email),!(x!=null&&x.email)){console.log("🔍 No email, skipping loadPlayerMatches"),ln(!1);return}try{ln(!0),console.log("🔍 Calling matches API...");const ue=await fetch(`${de}/api/ladder/front-range-pool-hub/ladders/499-under/matches`,{headers:jn(n)});if(console.log("🔍 API response status:",ue.status),ue.ok){const Ge=await ue.json();console.log("🔍 API response data:",Ge);const $e=Ge.matches||[];console.log("🔍 All matches count:",$e.length);const Me=x.email.toLowerCase();console.log("🔍 Looking for player email:",Me);const je=$e.filter(ge=>{var rt,ht,_t,le,H,ke;if((rt=ge.player1)!=null&&rt.email&&((ht=ge.player2)!=null&&ht.email)){const Ne=ge.player1.email.toLowerCase(),Le=ge.player2.email.toLowerCase();return console.log("🔍 Checking match with player1/player2 emails:",{player1Email:Ne,player2Email:Le,playerEmail:Me,match:ge}),Ne===Me||Le===Me}if((_t=ge.player1)!=null&&_t.firstName&&((le=ge.player2)!=null&&le.firstName)){const Ne=`${ge.player1.firstName} ${ge.player1.lastName}`.toLowerCase(),Le=`${ge.player2.firstName} ${ge.player2.lastName}`.toLowerCase(),et=`${x.firstName} ${x.lastName}`.toLowerCase();return console.log("🔍 Checking match with player1/player2 names:",{player1Name:Ne,player2Name:Le,targetPlayerName:et,match:ge}),Ne===et||Le===et}if(ge.playerEmail){const Ne=ge.playerEmail.toLowerCase();return console.log("🔍 Checking match with playerEmail field:",{matchPlayerEmail:Ne,playerEmail:Me,match:ge}),Ne===Me}if((H=ge.challenger)!=null&&H.email&&((ke=ge.defender)!=null&&ke.email)){const Ne=ge.challenger.email.toLowerCase(),Le=ge.defender.email.toLowerCase();return console.log("🔍 Checking match with challenger/defender emails:",{challengerEmail:Ne,defenderEmail:Le,playerEmail:Me,match:ge}),Ne===Me||Le===Me}return console.log("🔍 Match structure not recognized:",ge),console.log("🔍 player1 structure:",ge.player1),console.log("🔍 player2 structure:",ge.player2),!1});console.log("🔍 Filtered player matches:",je),Oa(je)}else console.error("Failed to load player matches:",ue.status),Oa([])}catch(ue){console.error("Error loading player matches:",ue),Oa([])}finally{ln(!1)}},[x==null?void 0:x.email,n]);h.useEffect(()=>{S==="matches"&&Nn()},[S,x==null?void 0:x.email,Nn]),h.useEffect(()=>{S==="challenges"&&mt()},[S,x==null?void 0:x.email,F]),h.useEffect(()=>{x&&x.ladder&&x.ladder!=="Guest"&&x.ladder!=="League Player - Claim Account"&&x.ladder!=="Not Recognized"&&F==="499-under"&&!D&&(console.log("🔄 Setting selectedLadder to user ladder:",x.ladder),j(x.ladder))},[x]);const dr=async()=>{if(t){console.log("Loading profile data for email:",t);try{const ue=Hl(t),Ge=await fetch(`${de}/api/unified-auth/profile-data?email=${encodeURIComponent(ue)}&appType=ladder&t=${Date.now()}`,{headers:jn(n)});if(console.log("Profile data response status:",Ge.status),Ge.ok){const $e=await Ge.json();if(console.log("Loaded profile data:",$e),$e.success&&$e.profile){const Me={firstName:a,lastName:r,email:t,phone:"",preferredContacts:[],locations:$e.profile.locations||"",availability:$e.profile.availability||{}};console.log("Setting new playerInfo:",Me),console.log("playerInfo.locations:",Me.locations),R(Me)}else console.log("No profile data found, setting default playerInfo"),R({firstName:a,lastName:r,email:t,phone:"",preferredContacts:[],locations:"",availability:{}})}else console.log("Profile data response not ok:",Ge.status)}catch(ue){console.error("Error loading profile data:",ue)}}};h.useEffect(()=>{c&&O(!0)},[c]),h.useEffect(()=>{(async()=>{if(!(!t||!(x!=null&&x.canChallenge)))try{const Ge=Hl(t),$e=await fetch(`${de}/api/unified-auth/profile-data?email=${encodeURIComponent(Ge)}&appType=ladder&t=${Date.now()}`,{headers:jn(n)});if($e.ok){const Me=await $e.json();if(Me.success&&Me.profile){const je=Me.profile.phone&&Me.profile.phone.trim()!=="",ge=Me.profile.locations&&Me.profile.locations.trim()!=="",rt=Me.profile.availability&&Object.keys(Me.profile.availability).length>0,ht=je&&ge&&rt;re(ht),console.log("Profile completion status:",{hasPhone:je,hasLocations:ge,hasAvailability:rt,profileComplete:ht})}}}catch(Ge){console.error("Error checking profile completion:",Ge)}})()},[t,x==null?void 0:x.canChallenge]),h.useEffect(()=>{(()=>{if(!Rr&&(x!=null&&x.canChallenge)){const Ge=Hn.getStatus();Ge.isSupported&&Ge.permission==="default"&&cr(!0),hn(!0)}})()},[x==null?void 0:x.canChallenge,Rr]),h.useEffect(()=>{Xt.current&&clearTimeout(Xt.current),Xt.current=setTimeout(async()=>{var ue;try{N(!0);const Ge=await fetch(`${de}/api/ladder/ladders/${Bi(F)}/players`,{headers:jn(n)});if(!Ge.ok)throw new Error(`Failed to load ladder data: ${Ge.status} ${Ge.statusText}`);const $e=await Ge.json();console.log("Ladder API response:",$e),$e&&Array.isArray($e)?(I($e),console.log(`Loaded ${$e.length} players from ${F} ladder`)):(console.error("Invalid ladder data format:",$e),I([]));const Me=localStorage.getItem("unifiedUserData");if(Me)try{const je=JSON.parse(Me);if(console.log("🔍 Found unified user data:",je),je.ladderProfile){const ge=je.ladderProfile;k({playerId:"ladder",name:`${je.firstName} ${je.lastName}`,firstName:je.firstName,lastName:je.lastName,email:je.email,fargoRate:ge.fargoRate,ladder:ge.ladderName,position:ge.position,immunityUntil:ge.immunityUntil,activeChallenges:[],canChallenge:ge.isActive&&!!((ue=je.unifiedAccount)!=null&&ue.hasUnifiedAccount),unifiedAccount:je.unifiedAccount,stats:{wins:ge.wins,losses:ge.losses,totalMatches:ge.totalMatches}}),console.log("✅ Set user ladder data from unified profile")}}catch(je){console.error("Error parsing unified user data:",je)}console.log("🔍 senderEmail exists:",!!t,"Value:",t),t?(console.log("🚀 Calling checkPlayerStatus for:",t),await _n(t)):k({playerId:"guest",name:`${a} ${r}`,firstName:a,lastName:r,email:null,fargoRate:450,ladder:"499-under",position:"Guest",immunityUntil:null,activeChallenges:[],canChallenge:!1})}catch(Ge){console.error("Error loading ladder data:",Ge),I([]),k({playerId:"guest",name:`${a} ${r}`,firstName:a,lastName:r,email:t,fargoRate:450,ladder:"499-under",position:"Guest",immunityUntil:null,activeChallenges:[],canChallenge:!1}),console.warn("Ladder data could not be loaded. Please check your connection and try again.")}finally{N(!1)}},300)},[F,n,t]);const gr=async()=>{K(["Legends Brews & Cues","Antiques","Rac m","Westside Billiards","Bijou Billiards","Crooked Cue","Back on the Boulevard","Main Street Tavern","Murray Street Darts","My House"])},_n=async ue=>{var Ge;try{console.log("🔍 Checking player status for email:",ue);const $e=Hl(ue),je=await(await fetch(`${de}/api/ladder/player-status/${encodeURIComponent($e)}`,{headers:jn(n)})).json();console.log("📋 Player status response:",je),P(je),je.isLadderPlayer?k({playerId:"ladder",name:`${je.ladderInfo.firstName} ${je.ladderInfo.lastName}`,firstName:je.ladderInfo.firstName,lastName:je.ladderInfo.lastName,email:ue,fargoRate:je.ladderInfo.fargoRate,ladder:je.ladderInfo.ladderName,position:je.ladderInfo.position,immunityUntil:je.ladderInfo.immunityUntil,activeChallenges:[],canChallenge:je.ladderInfo.isActive&&!!((Ge=je.unifiedAccount)!=null&&Ge.hasUnifiedAccount),unifiedAccount:je.unifiedAccount,stats:je.ladderInfo.stats}):je.isLeaguePlayer?k({playerId:"league",name:`${je.leagueInfo.firstName} ${je.leagueInfo.lastName}`,firstName:je.leagueInfo.firstName,lastName:je.leagueInfo.lastName,email:ue,fargoRate:450,ladder:"499-under",position:"League Player - Claim Account",immunityUntil:null,activeChallenges:[],canChallenge:!1,needsClaim:!0,leagueInfo:je.leagueInfo}):k({playerId:"unknown",name:`${a} ${r}`,firstName:a,lastName:r,email:ue,fargoRate:450,ladder:"499-under",position:"Not Recognized",immunityUntil:null,activeChallenges:[],canChallenge:!1})}catch($e){console.error("Error checking player status:",$e)}},Z=h.useCallback(ue=>{w(ue)},[]);h.useMemo(()=>{switch(F){case"499-under":return"499 & Under";case"500-549":return"500-549";case"550-plus":return"550+";default:return F}},[F]);const Pe=(ue,Ge)=>{var ht,_t,le,H;const $e=Im(ue),Me=Im(Ge);if(console.log(`🔍 Ladder comparison: Challenger ${$e.firstName} ${$e.lastName} ladder="${$e.ladder}", Defender ${Me.firstName} ${Me.lastName} ladderName="${Me.ladderName}"`),console.log("🔍 Challenger unifiedAccount:",$e.unifiedAccount),console.log("🔍 Defender unifiedAccount:",Me.unifiedAccount),console.log("🔍 Challenger canChallenge:",$e.canChallenge),console.log("🔍 Defender hasUnifiedAccount:",(ht=Me.unifiedAccount)==null?void 0:ht.hasUnifiedAccount),$e.ladder!==Me.ladderName)return console.log(`🚫 Challenge blocked: ${$e.firstName} ${$e.lastName} (${$e.ladder}) cannot challenge ${Me.firstName} ${Me.lastName} (${Me.ladderName}) - Different ladder`),!1;if(!((_t=$e.unifiedAccount)!=null&&_t.hasUnifiedAccount)||!((le=Me.unifiedAccount)!=null&&le.hasUnifiedAccount))return console.log(`🚫 Challenge blocked: ${$e.firstName} ${$e.lastName} cannot challenge ${Me.firstName} ${Me.lastName} - Unified account required`),!1;if($e.email===((H=Me.unifiedAccount)==null?void 0:H.email))return console.log(`🚫 Challenge blocked: ${$e.firstName} ${$e.lastName} cannot challenge themselves`),!1;if(!$e.isActive)return console.log(`🚫 Challenge blocked: ${$e.firstName} ${$e.lastName} is not active`),!1;if(!Me.isActive)return console.log(`🚫 Challenge blocked: ${Me.firstName} ${Me.lastName} is not active`),!1;if(Me.immunityUntil&&new Date(Me.immunityUntil)>new Date)return console.log(`🚫 Challenge blocked: ${Me.firstName} ${Me.lastName} has immunity until ${Me.immunityUntil}`),!1;const je=sanitizeNumber($e.position),ge=sanitizeNumber(Me.position),rt=je-ge;return rt>=-4&&rt<=0?(console.log(`✅ Standard Challenge allowed: ${$e.firstName} ${$e.lastName} (Position ${je}) can challenge ${Me.firstName} ${Me.lastName} (Position ${ge}) - ${Math.abs(rt)} positions above`),!0):rt>0&&rt<=5?(console.log(`✅ SmackDown allowed: ${$e.firstName} ${$e.lastName} (Position ${je}) can challenge ${Me.firstName} ${Me.lastName} (Position ${ge}) - ${rt} positions below`),!0):(console.log(`🚫 Challenge blocked: ${$e.firstName} ${$e.lastName} (Position ${je}) cannot challenge ${Me.firstName} ${Me.lastName} (Position ${ge}) - Position difference ${rt} is outside allowed range (-4 to +5)`),!1)},Ke=(ue,Ge)=>{var $e,Me,je;try{const ge=Im(ue),rt=Im(Ge);if(!(($e=ge.unifiedAccount)!=null&&$e.hasUnifiedAccount)||!((Me=rt.unifiedAccount)!=null&&Me.hasUnifiedAccount))return"No unified account";if(ge.email===((je=rt.unifiedAccount)==null?void 0:je.email))return"Same player";if(!ge.isActive)return"Challenger inactive";if(!rt.isActive)return"Defender inactive";if(rt.immunityUntil&&new Date(rt.immunityUntil)>new Date)return"Defender immune";const ht=sanitizeNumber(ge.position),_t=sanitizeNumber(rt.position),le=ht-_t;return le<-4?`Too far above (${Math.abs(le)} positions) - Max 4 positions above allowed`:le>5?`Too far below (${le} positions) - Max 5 positions below allowed for SmackDown`:"Eligible"}catch(ge){return console.error("Error in getChallengeReason:",ge),"Invalid data"}},mt=async()=>{var ue;if(t)try{const Ge=Hl(t),$e=await fetch(`${de}/api/ladder/challenges/pending/${encodeURIComponent(Ge)}`,{headers:jn(n)});if($e.ok){const ge=await $e.json();Ft(ge)}const Me=await fetch(`${de}/api/ladder/challenges/sent/${encodeURIComponent(Ge)}`,{headers:jn(n)});if(Me.ok){const rt=(await Me.json()).filter(ht=>{var _t,le,H;return!(((_t=ht.matchDetails)==null?void 0:_t.entryFee)===0&&((H=(le=ht.challengePost)==null?void 0:le.postContent)!=null&&H.toLowerCase().includes("admin")))});Wt(rt)}const je=await fetch(`${de}/api/ladder/front-range-pool-hub/ladders/${Bi(F)}/matches?status=scheduled`,{headers:jn(n)});if(je.ok){const rt=((ue=(await je.json()).matches)==null?void 0:ue.filter(ht=>{var _t,le;return((_t=ht.player1)==null?void 0:_t.email)===Ge||((le=ht.player2)==null?void 0:le.email)===Ge}))||[];bt(rt)}}catch(Ge){console.error("Error loading challenges:",Ge)}},Kt=h.useCallback((ue,Ge="challenge")=>{nt(ue),Zt(Ge),se(!0)},[]),ba=ue=>ue.isActive?ue.immunityUntil&&new Date(ue.immunityUntil)>new Date?{status:"immune",text:"Immune",className:"immune"}:ft.some(Me=>Me.challenger.email===ue.email||Me.defender.email===ue.email)||ra.some(Me=>Me.challenger.email===ue.email||Me.defender.email===ue.email)?{status:"proposal",text:"Proposal",className:"proposal"}:he.some(Me=>{var je,ge;return((je=Me.player1)==null?void 0:je.email)===ue.email||((ge=Me.player2)==null?void 0:ge.email)===ue.email})?{status:"scheduled",text:"Scheduled",className:"scheduled"}:{status:"active",text:"Active",className:"active"}:{status:"inactive",text:"Inactive",className:"inactive"},La=h.useCallback(ue=>{var Ge,$e;console.log("🎯 Player clicked:",ue),console.log("🎯 Player has unified account:",(Ge=ue.unifiedAccount)==null?void 0:Ge.hasUnifiedAccount),console.log("🎯 Player unified account email:",($e=ue.unifiedAccount)==null?void 0:$e.email),console.log("🎯 Player direct email:",ue.email),console.log("🎯 Player lastMatch:",ue.lastMatch),console.log("🎯 Full player object:",JSON.stringify(ue,null,2)),console.log("📊 Setting modal state..."),console.log("📊 Current showMobilePlayerStats state:",Ce),console.log("📊 Current selectedPlayerForStats state:",tt),me(ue),_e(!0),console.log("📊 Modal should now be visible"),console.log("📊 New showMobilePlayerStats state should be true"),ue.lastMatch?(console.log("🔍 Using existing lastMatch data from player object:",ue.lastMatch),qe(ue.lastMatch)):(console.log("🔍 No lastMatch data in player object, trying to fetch..."),sa(ue)),ue.recentMatches&&ue.recentMatches.length>0?(console.log("🔍 Using existing recentMatches data from player object:",ue.recentMatches),console.log("🔍 Number of recent matches:",ue.recentMatches.length),st(ue.recentMatches)):(console.log("🔍 No recentMatches data in player object, trying to fetch..."),tr(ue)),qn(ue)},[Ce,tt]),sa=async ue=>{var $e;console.log("🔍 Fetching last match data for player:",ue),console.log("🔍 Player unifiedAccount:",ue.unifiedAccount),console.log("🔍 Player email:",ue.email),console.log("🔍 Player firstName:",ue.firstName),console.log("🔍 Player lastName:",ue.lastName),console.log("🔍 Player _id:",ue._id);const Ge=(($e=ue.unifiedAccount)==null?void 0:$e.email)||ue.email;if(console.log("🔍 Using email for last match:",Ge),!Ge){console.log("🔍 No email found anywhere, cannot fetch last match data"),qe(null);return}try{if(ue._id){console.log("🔍 Trying to fetch match data by player ID:",ue._id);const rt=`${de}/api/ladder/player/${ue._id}/matches?limit=1`;console.log("🔍 Last match API URL by ID:",rt);const ht=await fetch(rt,{headers:jn(n)});if(ht.ok){const _t=await ht.json();if(_t&&_t.length>0){console.log("🔍 Found match data by ID:",_t[0]),qe(_t[0]);return}}}const Me=Hl(Ge),je=`${de}/api/ladder/matches/last-match/${encodeURIComponent(Me)}`;console.log("🔍 Last match API URL by email:",je),console.log("🔍 Original email:",Ge),console.log("🔍 Sanitized email:",Me);const ge=await fetch(je,{headers:jn(n)});if(console.log("🔍 Last match response status:",ge.status),ge.ok){const rt=await ge.json();console.log("🔍 Last match data:",rt),qe(rt)}else{const rt=await ge.text();console.error("🔍 Last match API Error:",ge.status,rt),qe(null)}}catch(Me){console.error("Error fetching last match data:",Me),qe(null)}},tr=async ue=>{var $e;console.log("🔍 Fetching match history for player:",ue),console.log("🔍 Player unifiedAccount:",ue.unifiedAccount);const Ge=(($e=ue.unifiedAccount)==null?void 0:$e.email)||ue.email;if(console.log("🔍 Using email:",Ge),!Ge){console.log("🔍 No email found anywhere, cannot fetch match history"),st([]);return}try{if(ue._id){console.log("🔍 Trying to fetch match history by player ID:",ue._id);const rt=`${de}/api/ladder/player/${ue._id}/matches?limit=10`;console.log("🔍 Match history API URL by ID:",rt);const ht=await fetch(rt,{headers:jn(n)});if(ht.ok){const _t=await ht.json();console.log("🔍 Found match history by ID:",_t),st(_t);return}}const Me=Hl(Ge),je=`${de}/api/ladder/player/${encodeURIComponent(Me)}/matches?limit=10`;console.log("🔍 Match history API URL by email:",je);const ge=await fetch(je,{headers:jn(n)});if(console.log("🔍 Response status:",ge.status),ge.ok){const rt=await ge.json();console.log("🔍 Match history data:",rt),st(rt)}else{const rt=await ge.text();console.error("🔍 API Error:",ge.status,rt),st([])}}catch(Me){console.error("Error fetching player match history:",Me),st([])}},qn=async ue=>{var $e;console.log("🔍 Fetching updated player data for:",ue);const Ge=(($e=ue.unifiedAccount)==null?void 0:$e.email)||ue.email;if(console.log("🔍 Using email for player data:",Ge),!Ge){console.log("🔍 No email found anywhere, using original player data"),ua(ue);return}try{if(ue._id){console.log("🔍 Trying to fetch updated player data by ID:",ue._id);const rt=`${de}/api/ladder/player/${ue._id}`;console.log("🔍 Player data API URL by ID:",rt);const ht=await fetch(rt,{headers:jn(n)});if(ht.ok){const _t=await ht.json();console.log("🔍 Found updated player data by ID:",_t),ua(_t);return}}const Me=Hl(Ge),je=`${de}/api/ladder/player/${encodeURIComponent(Me)}`;console.log("🔍 Player data API URL by email:",je);const ge=await fetch(je,{headers:jn(n)});if(console.log("🔍 Player data response status:",ge.status),ge.ok){const rt=await ge.json();console.log("🔍 Player data received:",rt),console.log("🔍 Updated wins:",rt.wins),console.log("🔍 Updated losses:",rt.losses);const ht={...ue,...rt,wins:rt.wins,losses:rt.losses,position:rt.position};ua(ht)}else{const rt=await ge.text();console.log("🔍 Failed to fetch player data:",ge.status,rt),ua(ue)}}catch(Me){console.error("Error fetching updated player data:",Me),ua(ue)}},Ra=h.useMemo(()=>E.filter(ue=>{var $e,Me;return($e=ue.unifiedAccount)==null||$e.hasUnifiedAccount,((Me=ue.unifiedAccount)==null?void 0:Me.email)!==(x==null?void 0:x.email)&&ue.email!==(x==null?void 0:x.email)&&ue.firstName!==(x==null?void 0:x.firstName)}),[E,x==null?void 0:x.email,x==null?void 0:x.firstName]),En=h.useCallback(()=>{console.log("🧠 Smart Match clicked"),console.log("📊 Current ladder data:",E),console.log("👤 User ladder data:",x),console.log("🎯 Available defenders:",Ra),be(!0)},[E,x,Ra]),kn=h.useCallback(ue=>{mt(),ga()},[]),xn=h.useCallback((ue,Ge)=>{ue==="accepted"&&Xe?Hn.showChallengeAcceptedNotification(Xe):ue==="declined"&&Xe?Hn.showChallengeDeclinedNotification(Xe):ue==="counter-proposed"&&Xe&&Hn.showCounterProposalNotification(Xe),mt(),ga()},[Xe]),Ln=h.useCallback(ue=>{ct(ue),Se(!0)},[]),Bn=()=>e.createElement("div",{className:"ladder-view"},e.createElement(vs,null,e.createElement(uS,{selectedLadder:F,setSelectedLadder:j,setHasManuallySelectedLadder:A,currentView:S,setCurrentView:w,isPublicView:m,setShowMatchCalendar:We})),e.createElement(c$,null),!m&&e.createElement("div",{className:"match-fee-container"},e.createElement("div",{className:"match-fee-info-bar sticky-match-fee"},e.createElement("span",{style:{color:"#10b981",fontWeight:"bold"}},"💰 Match Fee Info:"),e.createElement("span",{style:{marginLeft:"8px"}},"Winner reports match and pays ",e.createElement("strong",null,"$5 match fee")," (one fee per match, not per player)"))),e.createElement(vs,null,e.createElement(fS,{ladderData:E,isPublicView:m,userLadderData:x,canChallengePlayer:Pe,getChallengeReason:Ke,handleChallengePlayer:Kt,handlePlayerClick:La,getPlayerStatus:ba,isPositionClaimed:y,selectedLadder:F})),!m&&e.createElement("button",{onClick:()=>w("main"),className:"back-btn"},"← Back to Main Menu")),zn=()=>e.createElement("div",{className:"challenges-view"},e.createElement("div",{className:"challenges-header-section"},e.createElement("h2",null,"⚔️ My Challenges"),e.createElement("p",null,"Manage your challenges and responses")),e.createElement("div",{className:"challenges-section"},e.createElement("h3",null,"📥 Pending Challenges (",ft.length,")"),ft.length===0?e.createElement("div",{className:"no-challenges"},e.createElement("div",{className:"no-challenges-icon"},"📭"),e.createElement("h4",null,"No Pending Challenges"),e.createElement("p",null,"You don't have any challenges waiting for your response.")):e.createElement("div",{className:"challenges-list"},ft.map(ue=>{var Ge,$e,Me,je,ge,rt,ht,_t;return e.createElement("div",{key:ue._id,className:"challenge-card pending"},e.createElement("div",{className:"challenge-header"},e.createElement("h4",null,(Ge=ue.challenger)==null?void 0:Ge.firstName," ",($e=ue.challenger)==null?void 0:$e.lastName,e.createElement("span",{className:"vs-text"}," vs "),(Me=ue.defender)==null?void 0:Me.firstName," ",(je=ue.defender)==null?void 0:je.lastName),e.createElement("span",{className:`challenge-type challenge-${ue.challengeType}`},ue.challengeType==="challenge"?"⚔️ Challenge":ue.challengeType==="smackdown"?"💥 SmackDown":ue.challengeType==="ladder-jump"?"🚀 Ladder Jump":"🎯 Match")),e.createElement("div",{className:"challenge-details"},e.createElement("p",null,e.createElement("strong",null,"💰 Entry Fee:")," $",((ge=ue.matchDetails)==null?void 0:ge.entryFee)||"0"),e.createElement("p",null,e.createElement("strong",null,"🏁 Race Length:")," ",((rt=ue.matchDetails)==null?void 0:rt.raceLength)||"5"),e.createElement("p",null,e.createElement("strong",null,"🎮 Game Type:")," ",((ht=ue.matchDetails)==null?void 0:ht.gameType)||"8-Ball"),e.createElement("p",null,e.createElement("strong",null,"📍 Location:")," ",((_t=ue.matchDetails)==null?void 0:_t.location)||"TBD"),e.createElement("p",null,e.createElement("strong",null,"⏰ Expires:")," ",ue.deadline?new Date(ue.deadline).toLocaleDateString():"N/A")),e.createElement("div",{className:"challenge-actions"},e.createElement("button",{onClick:()=>Ln(ue),className:"action-btn respond-btn"},"📝 Respond to Challenge")))}))),e.createElement("div",{className:"challenges-section"},e.createElement("h3",null,"📤 Sent Challenges (",ra.length,")"),ra.length===0?e.createElement("div",{className:"no-challenges"},e.createElement("div",{className:"no-challenges-icon"},"📤"),e.createElement("h4",null,"No Sent Challenges"),e.createElement("p",null,"You haven't sent any challenges yet. Challenge another player to get started!")):e.createElement("div",{className:"challenges-list"},ra.map(ue=>{var Ge,$e,Me,je,ge,rt,ht,_t;return e.createElement("div",{key:ue._id,className:"challenge-card sent"},e.createElement("div",{className:"challenge-header"},e.createElement("h4",null,(Ge=ue.challenger)==null?void 0:Ge.firstName," ",($e=ue.challenger)==null?void 0:$e.lastName,e.createElement("span",{className:"vs-text"}," vs "),(Me=ue.defender)==null?void 0:Me.firstName," ",(je=ue.defender)==null?void 0:je.lastName),e.createElement("span",{className:`challenge-type challenge-${ue.challengeType}`},ue.challengeType==="challenge"?"⚔️ Challenge":ue.challengeType==="smackdown"?"💥 SmackDown":ue.challengeType==="ladder-jump"?"🚀 Ladder Jump":"🎯 Match")),e.createElement("div",{className:"challenge-details"},e.createElement("p",null,e.createElement("strong",null,"📊 Status:")," ",e.createElement("span",{className:`status-${ue.status}`},ue.status)),e.createElement("p",null,e.createElement("strong",null,"💰 Entry Fee:")," $",((ge=ue.matchDetails)==null?void 0:ge.entryFee)||"0"),e.createElement("p",null,e.createElement("strong",null,"🏁 Race Length:")," ",((rt=ue.matchDetails)==null?void 0:rt.raceLength)||"5"),e.createElement("p",null,e.createElement("strong",null,"🎮 Game Type:")," ",((ht=ue.matchDetails)==null?void 0:ht.gameType)||"8-Ball"),e.createElement("p",null,e.createElement("strong",null,"📍 Location:")," ",((_t=ue.matchDetails)==null?void 0:_t.location)||"TBD"),e.createElement("p",null,e.createElement("strong",null,"⏰ Expires:")," ",ue.deadline?new Date(ue.deadline).toLocaleDateString():"N/A")),e.createElement("div",{className:"challenge-actions"},e.createElement("button",{className:"action-btn view-btn",onClick:()=>Ln(ue)},"👁️ View Details")))}))),e.createElement("div",{className:"challenges-section"},e.createElement("h3",null,"📅 Scheduled Matches (",he.length,")"),he.length===0?e.createElement("div",{className:"no-challenges"},e.createElement("div",{className:"no-challenges-icon"},"📅"),e.createElement("h4",null,"No Scheduled Matches"),e.createElement("p",null,"You don't have any matches scheduled yet.")):e.createElement("div",{className:"challenges-list"},he.map(ue=>{var Ge,$e,Me,je;return e.createElement("div",{key:ue._id,className:"challenge-card scheduled"},e.createElement("div",{className:"challenge-header"},e.createElement("h4",null,(Ge=ue.player1)==null?void 0:Ge.firstName," ",($e=ue.player1)==null?void 0:$e.lastName,e.createElement("span",{className:"vs-text"}," vs "),(Me=ue.player2)==null?void 0:Me.firstName," ",(je=ue.player2)==null?void 0:je.lastName),e.createElement("span",{className:`challenge-type challenge-${ue.matchType}`},ue.matchType==="challenge"?"⚔️ Challenge":ue.matchType==="smackdown"?"💥 SmackDown":ue.matchType==="ladder-jump"?"🚀 Ladder Jump":"🎯 Match")),e.createElement("div",{className:"challenge-details"},e.createElement("p",null,e.createElement("strong",null,"📊 Status:")," ",e.createElement("span",{className:"status-scheduled"},ue.challengeId?"Created by Admin":"Scheduled")),e.createElement("p",null,e.createElement("strong",null,"🏁 Race Length:")," ",ue.raceLength||"5"),e.createElement("p",null,e.createElement("strong",null,"🎮 Game Type:")," ",ue.gameType||"8-Ball"),e.createElement("p",null,e.createElement("strong",null,"📏 Table Size:")," ",ue.tableSize||"9ft"),e.createElement("p",null,e.createElement("strong",null,"📅 Scheduled Date:")," ",ue.scheduledDate?new Date(ue.scheduledDate).toLocaleDateString():"TBD"),ue.venue&&e.createElement("p",null,e.createElement("strong",null,"📍 Location:")," ",ue.venue)),e.createElement("div",{className:"challenge-actions"},e.createElement("button",{className:"action-btn view-btn",onClick:()=>{console.log("View match details:",ue)}},"👁️ View Match Details")))}))),!m&&e.createElement("button",{onClick:()=>w("main"),className:"back-btn"},"← Back to Main Menu")),On=()=>{console.log("🔍 renderMatchesView - playerMatches:",ma),console.log("🔍 renderMatchesView - playerMatches length:",ma.length);const ue=[...ma].sort((ge,rt)=>{const ht=new Date(ge.scheduledDate||ge.completedDate);return new Date(rt.scheduledDate||rt.completedDate)-ht});console.log("🔍 sortedMatches:",ue);const Ge=[...new Set(ue.map(ge=>ge.status))];console.log("🔍 Available status values:",Ge);const $e=ue.filter(ge=>ge.status==="scheduled"||ge.status==="pending"),Me=ue.filter(ge=>ge.status==="completed"),je=ue.filter(ge=>ge.status==="cancelled");return console.log("🔍 completedMatches count:",Me.length),console.log("🔍 completedMatches:",Me),e.createElement("div",{className:"matches-view"},e.createElement("div",{className:"view-header"},e.createElement("h2",null,"🎯 My Matches"),e.createElement("p",null,"View your active and completed matches")),Pa?e.createElement("div",{className:"loading-container"},e.createElement("div",{className:"loading-spinner"}),e.createElement("p",null,"Loading your matches...")):ma.length===0?e.createElement("div",{className:"no-matches"},e.createElement("div",{className:"no-matches-icon"},"🎱"),e.createElement("h3",null,"No Matches Yet"),e.createElement("p",null,"You haven't played any matches yet. Challenge another player to get started!"),e.createElement("button",{onClick:()=>Z("ladders"),className:"challenge-button"},"View Ladder & Challenge Players")):e.createElement("div",{className:"matches-list"},$e.length>0&&e.createElement(e.Fragment,null,e.createElement("div",{className:"matches-section-header"},e.createElement("h3",null,"📅 Upcoming Matches (",$e.length,")")),$e.map((ge,rt)=>{var ht,_t,le,H,ke,Ne;return e.createElement("div",{key:ge._id||rt,className:"match-card upcoming"},e.createElement("div",{className:"match-header"},e.createElement("div",{className:"match-type"},ge.matchType==="challenge"?"⚔️ Challenge":ge.matchType==="ladder-jump"?"🚀 Ladder Jump":ge.matchType==="smackdown"?"💥 SmackDown":"🎯 Match"),e.createElement("div",{className:`match-status ${ge.status}`},ge.status==="scheduled"?"📅 Scheduled":ge.status==="pending"?"⏳ Pending":"📋 Active")),e.createElement("div",{className:"match-players"},e.createElement("div",{className:"player"},e.createElement("span",{className:"player-name"},(ht=ge.player1)==null?void 0:ht.firstName," ",(_t=ge.player1)==null?void 0:_t.lastName),e.createElement("span",{className:"player-position"},"#",((le=ge.player1)==null?void 0:le.position)||"N/A")),e.createElement("div",{className:"vs"},"VS"),e.createElement("div",{className:"player"},e.createElement("span",{className:"player-name"},(H=ge.player2)==null?void 0:H.firstName," ",(ke=ge.player2)==null?void 0:ke.lastName),e.createElement("span",{className:"player-position"},"#",((Ne=ge.player2)==null?void 0:Ne.position)||"N/A"))),e.createElement("div",{className:"match-details"},e.createElement("div",{className:"detail"},e.createElement("span",{className:"label"},"📅 Date:"),e.createElement("span",{className:"value"},ge.scheduledDate?new Date(ge.scheduledDate).toLocaleDateString():"TBD")),ge.scheduledTime&&e.createElement("div",{className:"detail"},e.createElement("span",{className:"label"},"🕐 Time:"),e.createElement("span",{className:"value"},ge.scheduledTime)),e.createElement("div",{className:"detail"},e.createElement("span",{className:"label"},"🎮 Game:"),e.createElement("span",{className:"value"},ge.gameType||"8-Ball")),e.createElement("div",{className:"detail"},e.createElement("span",{className:"label"},"🏁 Race to:"),e.createElement("span",{className:"value"},ge.raceLength||"5")),ge.venue&&e.createElement("div",{className:"detail"},e.createElement("span",{className:"label"},"📍 Location:"),e.createElement("span",{className:"value"},ge.venue))),e.createElement("div",{className:"match-actions"},e.createElement("button",{className:"action-btn report-btn",onClick:()=>{setSelectedMatch(ge),ce(!0)}},"📝 Report Result")))})),Me.length>0&&e.createElement(e.Fragment,null,e.createElement("div",{className:"matches-section-header"},e.createElement("h3",null,"✅ Completed Matches (",Me.length,")")),Me.map((ge,rt)=>{var Le,et,ot,pt,Rt,xt,zt,Nt,lt,Ie,Ve,ut,yt,ta;const ht=(Le=x==null?void 0:x.email)==null?void 0:Le.toLowerCase(),_t=`${x==null?void 0:x.firstName} ${x==null?void 0:x.lastName}`.toLowerCase();console.log("🔍 Match winner check:",{matchId:ge._id,winner:ge.winner,currentUserEmail:ht,currentUserName:_t,player1:ge.player1,player2:ge.player2});let le=!1;(et=ge.winner)!=null&&et.email?le=ge.winner.email.toLowerCase()===ht:(ot=ge.winner)!=null&&ot.firstName&&((pt=ge.winner)!=null&&pt.lastName)&&(le=`${ge.winner.firstName} ${ge.winner.lastName}`.toLowerCase()===_t);const H=((xt=(Rt=ge.player1)==null?void 0:Rt.email)==null?void 0:xt.toLowerCase())===ht||`${(zt=ge.player1)==null?void 0:zt.firstName} ${(Nt=ge.player1)==null?void 0:Nt.lastName}`.toLowerCase()===_t,ke=((Ie=(lt=ge.player2)==null?void 0:lt.email)==null?void 0:Ie.toLowerCase())===ht||`${(Ve=ge.player2)==null?void 0:Ve.firstName} ${(ut=ge.player2)==null?void 0:ut.lastName}`.toLowerCase()===_t;console.log("🔍 Winner determination:",{isCurrentUserWinner:le,isCurrentUserPlayer1:H,isCurrentUserPlayer2:ke});const Ne=H?ge.player2:ge.player1;return e.createElement("div",{key:ge._id||rt,className:`match-card completed ${le?"win":"loss"}`},e.createElement("div",{className:"match-header"},e.createElement("div",{className:"match-type"},ge.matchType==="challenge"?"⚔️ Challenge":ge.matchType==="ladder-jump"?"🚀 Ladder Jump":ge.matchType==="smackdown"?"💥 SmackDown":"🎯 Match"),e.createElement("div",{className:"match-status completed"},"✅ Completed"),e.createElement("div",{className:"match-date"},"📅 ",ge.completedDate?new Date(ge.completedDate).toLocaleDateString():ge.scheduledDate?new Date(ge.scheduledDate).toLocaleDateString():"N/A")),e.createElement("div",{className:"opponent-info"},e.createElement("div",{className:"opponent-name"},e.createElement("span",{className:"vs"},"vs")," ",Ne==null?void 0:Ne.firstName," ",Ne==null?void 0:Ne.lastName," ",e.createElement("span",{className:"rank"},"#",(Ne==null?void 0:Ne.position)||"N/A"))),e.createElement("div",{className:"match-result"},e.createElement("div",{className:"result-icon"},le?"🏆":"💔"),e.createElement("div",{className:"result-text"},le?"Winner: Brett Gonzalez":`Winner: ${(yt=ge.winner)==null?void 0:yt.firstName} ${(ta=ge.winner)==null?void 0:ta.lastName}`),ge.score&&e.createElement("div",{className:"score-display"},"Score: ",ge.score)),e.createElement("div",{className:"match-details-grid"},e.createElement("div",{className:"detail-item"},e.createElement("div",{className:"detail-icon"},"📅"),e.createElement("div",{className:"detail-content"},e.createElement("div",{className:"detail-label"},"Date"),e.createElement("div",{className:"detail-value"},ge.completedDate?new Date(ge.completedDate).toLocaleDateString():ge.scheduledDate?new Date(ge.scheduledDate).toLocaleDateString():"N/A"))),e.createElement("div",{className:"detail-item"},e.createElement("div",{className:"detail-icon"},"🎮"),e.createElement("div",{className:"detail-content"},e.createElement("div",{className:"detail-label"},"Game"),e.createElement("div",{className:"detail-value"},ge.gameType||"8-Ball"))),e.createElement("div",{className:"detail-item"},e.createElement("div",{className:"detail-icon"},"🏁"),e.createElement("div",{className:"detail-content"},e.createElement("div",{className:"detail-label"},"Race to"),e.createElement("div",{className:"detail-value"},ge.raceLength||"5"))),ge.venue&&e.createElement("div",{className:"detail-item"},e.createElement("div",{className:"detail-icon"},"📍"),e.createElement("div",{className:"detail-content"},e.createElement("div",{className:"detail-label"},"Location"),e.createElement("div",{className:"detail-value"},ge.venue)))))})),je.length>0&&e.createElement(e.Fragment,null,e.createElement("div",{className:"matches-section-header"},e.createElement("h3",null,"❌ Cancelled Matches (",je.length,")")),je.map((ge,rt)=>{var ht,_t,le,H,ke,Ne,Le;return e.createElement("div",{key:ge._id||rt,className:"match-card cancelled"},e.createElement("div",{className:"match-header"},e.createElement("div",{className:"match-type"},ge.matchType==="challenge"?"⚔️ Challenge":ge.matchType==="ladder-jump"?"🚀 Ladder Jump":ge.matchType==="smackdown"?"💥 SmackDown":"🎯 Match"),e.createElement("div",{className:"match-status cancelled"},"❌ Cancelled")),e.createElement("div",{className:"match-players"},e.createElement("div",{className:"player"},e.createElement("span",{className:"player-name"},(ht=ge.player1)==null?void 0:ht.firstName," ",(_t=ge.player1)==null?void 0:_t.lastName),e.createElement("span",{className:"player-position"},"#",((le=ge.player1)==null?void 0:le.position)||"N/A")),e.createElement("div",{className:"vs"},"VS"),e.createElement("div",{className:"player"},e.createElement("span",{className:"player-name"},(H=ge.player2)==null?void 0:H.firstName," ",(ke=ge.player2)==null?void 0:ke.lastName),e.createElement("span",{className:"player-position"},"#",((Ne=ge.player2)==null?void 0:Ne.position)||"N/A"))),e.createElement("div",{className:"match-details"},e.createElement("div",{className:"detail"},e.createElement("span",{className:"label"},"📅 Date:"),e.createElement("span",{className:"value"},ge.scheduledDate?new Date(ge.scheduledDate).toLocaleDateString():"N/A")),e.createElement("div",{className:"detail"},e.createElement("span",{className:"label"},"🎮 Game:"),e.createElement("span",{className:"value"},ge.gameType||"8-Ball")),((Le=ge.cancellation)==null?void 0:Le.reason)&&e.createElement("div",{className:"detail"},e.createElement("span",{className:"label"},"📝 Reason:"),e.createElement("span",{className:"value"},ge.cancellation.reason))))}))))},wn=()=>e.createElement(e.Fragment,null,e.createElement(vs,null,e.createElement(bS,{userLadderData:x,setShowUnifiedSignup:O,setShowProfileModal:v,isAdmin:i})),((x==null?void 0:x.needsClaim)||(x==null?void 0:x.playerId)==="unknown"||(x==null?void 0:x.playerId)==="ladder"&&!T)&&!i&&e.createElement(vs,null,e.createElement("div",{className:"profile-completion-timeline"},e.createElement("div",{className:"timeline-header"},e.createElement("h3",null,"⚔️ Complete Your Profile To Participate in the Ladder!"),e.createElement("p",null,"Follow these steps to start challenging other players:")),e.createElement("div",{className:"timeline-steps"},e.createElement("div",{className:"timeline-step"},e.createElement("div",{className:"step-circle"},e.createElement("span",{className:"step-number"},"1")),e.createElement("div",{className:"step-content"},e.createElement("h4",null,"Add Profile Info"),e.createElement("p",null,"Availability & locations")),e.createElement("div",{className:"step-connector"})),e.createElement("div",{className:"timeline-step"},e.createElement("div",{className:"step-circle"},e.createElement("span",{className:"step-number"},"2")),e.createElement("div",{className:"step-content"},e.createElement("h4",null,"Get Approved"),e.createElement("p",null,"Admin review")),e.createElement("div",{className:"step-connector"})),e.createElement("div",{className:"timeline-step"},e.createElement("div",{className:"step-circle"},e.createElement("span",{className:"step-number"},"3")),e.createElement("div",{className:"step-content"},e.createElement("h4",null,"Start Playing"),e.createElement("p",null,"Challenge others!")))),e.createElement("div",{className:"timeline-action"},e.createElement("button",{className:"complete-profile-btn",onClick:()=>v(!0)},"🚀 Complete My Profile")))),e.createElement(vs,null,e.createElement(gS,{isPublicView:m,navigateToView:Z,userLadderData:x,handleSmartMatch:En,setCurrentView:w,pendingChallenges:ft,setShowMatchReportingModal:ce,setShowPaymentDashboard:Re,setShowPrizePoolModal:ye,setShowUnifiedSignup:O,setShowRulesModal:Y,isAdmin:i,setShowApplicationsManager:L,setShowMatchCalendar:We})));return M?e.createElement("div",{className:"ladder-app-container"},e.createElement("div",{className:"loading-spinner"},e.createElement("div",{className:"spinner"}),e.createElement("p",null,"Loading ladder data..."))):e.createElement(e.Fragment,null,e.createElement("div",{className:"ladder-app-container"},e.createElement(JU,null),e.createElement("div",{className:"tournament-disclaimer"},e.createElement("p",null,e.createElement("strong",null,"▲ INDEPENDENT TOURNAMENT SERIES ▲"),e.createElement("br",null),"This ladder system is ",e.createElement("strong",null,"NOT")," affiliated with, endorsed by, or sanctioned by the Front Range Pool League, CueSports International, BCA Pool League, or USA Pool League.",e.createElement("br",null),"It is an independent tournament series operated by ",e.createElement("strong",null,"Legends Brews and Cues"),".")),S==="ladders"&&Bn(),S==="challenges"&&zn(),S==="challenge"&&renderChallengeView(),S==="matches"&&On(),S==="main"&&wn(),e.createElement("div",{className:"ladder-legend"},!m&&e.createElement("p",null,e.createElement("span",{className:"no-account"},"*")," = Complete profile verification and subscribe for full ladder access"),e.createElement("p",null,e.createElement("strong",null,"🏆 Welcome to the Ladder of Legends!")),e.createElement("p",null,"This is a competitive pool ladder system where players challenge each other to climb the ranks. Players are organized by skill level (FargoRate) into three brackets: 499 & Under, 500-549, and 550+."),e.createElement("p",null,e.createElement("strong",null,"How to Join:")," Visit ",e.createElement("a",{href:"https://frontrangepool.com",style:{color:"#ffc107",textDecoration:"underline"}},"FrontRangePool.com")," to create your account and start competing!"),e.createElement("p",null,e.createElement("strong",null,"Challenge Rules:")," Standard challenges up to 4 positions above, SmackDown up to 5 positions below"),e.createElement("p",null,e.createElement("strong",null,"Anyone can view the ladder - no account required!")),!m&&g&&e.createElement("p",{style:{color:"#4CAF50",fontWeight:"bold",marginTop:"8px",padding:"8px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"4px"}},"🎯 ",e.createElement("strong",null,"Claim Available Positions:"),' Click the green "Claim" button next to any position marked with * to claim it'),!m&&!(x!=null&&x.canChallenge)&&e.createElement("div",{style:{marginTop:"16px",padding:"12px",background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",color:"#ffc107"}},e.createElement("p",{style:{margin:"0 0 8px 0",fontWeight:"bold"}},"🔒 Challenge Features Locked"),e.createElement("p",{style:{margin:"0 0 8px 0",fontSize:"0.9rem"}},"To challenge other players, you need a unified account."),e.createElement("button",{onClick:()=>setShowClaimFormState(!0),style:{background:"#ff4444",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:"pointer",fontSize:"0.8rem"}},"Get Unified Account"))),e.createElement("div",{className:"ladder-footer"},m?e.createElement("div",{style:{textAlign:"center",padding:"20px",color:"#fff"}},e.createElement("h3",{style:{color:"#8B5CF6",marginBottom:"15px"}},"🏆 Ladder of Legends 🏆"),e.createElement("p",{style:{marginBottom:"10px",fontSize:"16px"}},e.createElement("strong",null,"Ready to join the competition?")),e.createElement("p",{style:{marginBottom:"15px",fontSize:"14px",color:"#ccc"}},"Challenge players, climb the ranks, and compete for prizes!"),e.createElement("p",{style:{fontSize:"14px",color:"#ffc107"}},e.createElement("strong",null,"Visit ",e.createElement("a",{href:"https://frontrangepool.com",style:{color:"#ffc107",textDecoration:"underline"}},"FrontRangePool.com")," to get started!"))):e.createElement("p",null,"Challenge your way to the top! 🏆")),X&&e.createElement(cS,{onClose:()=>O(!1),onSuccess:ue=>{console.log("Signup successful:",ue),O(!1),window.location.reload()},userContext:{isLadderPlayer:!0,isLeaguePlayer:!1,isUnknownUser:!1,currentEmail:t,currentName:a?`${a} ${r}`:null,purpose:"profile_verification",requiresEmailVerification:!0,ladderInfo:{firstName:(tt==null?void 0:tt.firstName)||a,lastName:(tt==null?void 0:tt.lastName)||r,position:tt==null?void 0:tt.position,fargoRate:tt==null?void 0:tt.fargoRate,ladder:F,currentEmail:(tt==null?void 0:tt.email)||t},prefillData:{firstName:(tt==null?void 0:tt.firstName)||a||"",lastName:(tt==null?void 0:tt.lastName)||r||"",email:(tt==null?void 0:tt.email)||t||"",fargoRate:(tt==null?void 0:tt.fargoRate)||""}}}),Q&&e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999,padding:"20px"}},e.createElement("div",{style:{background:"white",borderRadius:"12px",padding:"30px",maxWidth:"500px",width:"100%",textAlign:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.3)"}},e.createElement("h2",{style:{margin:"0 0 16px 0",color:"#333"}},"📝 Complete Your Profile"),e.createElement("p",{style:{margin:"0 0 24px 0",color:"#666",lineHeight:"1.5"}},"Please complete your profile with contact information, availability, and preferred locations to get full ladder access."),e.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"center"}},e.createElement("button",{onClick:()=>ne(!1),style:{padding:"12px 24px",border:"1px solid #ddd",borderRadius:"6px",background:"#f5f5f5",cursor:"pointer",fontSize:"14px"}},"Later"),e.createElement("button",{onClick:()=>{ne(!1),O(!0)},style:{padding:"12px 24px",border:"none",borderRadius:"6px",background:"#4CAF50",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"bold"}},"Complete Profile")))),W&&e.createElement(Py,{onClose:()=>L(!1)}),e.createElement(dS,{isOpen:J,onClose:()=>Y(!1),isMobile:!1}),G&&Je&&e.createElement(vS,{isOpen:G,onClose:()=>se(!1),challenger:x,defender:Je,challengeType:Ot,onChallengeComplete:kn}),pe&&Xe&&e.createElement(n$,{isOpen:pe,onClose:()=>Se(!1),challenge:Xe,currentUser:x,onChallengeResponse:xn}),at&&e.createElement(r$,{isOpen:at,onClose:()=>be(!1),challenger:x,availableDefenders:Ra,ladderData:E,onChallengeComplete:kn,userPin:n}),$&&e.createElement(o$,{isOpen:$,onClose:()=>ye(!1),selectedLadder:F}),ze&&e.createElement(s$,{isOpen:ze,onClose:()=>Re(!1),playerEmail:(x==null?void 0:x.email)||`${a}@example.com`}),Fe&&e.createElement(pS,{isOpen:Fe,onClose:()=>We(!1)}),e.createElement(vs,null,e.createElement(hS,{showMobilePlayerStats:Ce,selectedPlayerForStats:tt,setShowMobilePlayerStats:_e,updatedPlayerData:Yt,lastMatchData:Qe,playerMatchHistory:He,showFullMatchHistory:Mt,setShowFullMatchHistory:Jt,getPlayerStatus:ba,fetchUpdatedPlayerData:qn,setShowUnifiedSignup:O,isPublicView:m})),e.createElement(vs,null,e.createElement(yS,{showFullMatchHistory:Mt,selectedPlayerForStats:tt,setShowFullMatchHistory:Jt,setShowMobilePlayerStats:_e,playerMatchHistory:He,isPublicView:m})),Fa&&e.createElement(i$,{isOpen:Fa,onClose:()=>cr(!1),onPermissionGranted:()=>{cr(!1),console.log("✅ Notification permission granted!")}})),V&&e.createElement(l$,{isOpen:V,onClose:()=>ce(!1),playerName:(x==null?void 0:x.email)||`${a} ${r}`,selectedLadder:F,onMatchReported:ue=>{ga(),mt()}}))},d$=()=>{const a=er(),[r,t]=h.useState("info"),[n,o]=h.useState(null),[i,c]=h.useState(!0),[u,m]=h.useState(null),[g,f]=h.useState(!1),[y,v]=h.useState(!1),[S,w]=h.useState({firstName:"",lastName:"",email:"",phone:"",experience:"beginner",fargoRate:"",currentLeague:"",currentRanking:"",message:"",payNow:!1,paymentMethod:"",availability:"",locations:""}),[x,k]=h.useState(!1),[E,I]=h.useState(null),[M,N]=h.useState(!1),[_,P]=h.useState(!1),[B,R]=h.useState(null),[W,L]=h.useState("");h.useEffect(()=>{D(),j(),F(),new URLSearchParams(window.location.search).get("openModal")==="true"&&(console.log("Auto-opening ladder modal from URL parameter"),v(!0),window.history.replaceState({},document.title,window.location.pathname))},[]);const F=async()=>{try{if(new URLSearchParams(window.location.search).get("paymentSuccess")==="true"){console.log("🎉 User returned from successful payment!"),alert("🎉 Welcome back! Your payment was successful and your ladder position has been claimed. You now have access to all ladder features!"),window.history.replaceState({},document.title,window.location.pathname);const pe=JSON.parse(localStorage.getItem("lastClaimedPosition")||"{}");pe.ladder&&pe.position&&(T(pe.ladder,pe.position),localStorage.removeItem("lastClaimedPosition"))}}catch(G){console.error("Error checking payment status:",G)}},j=async()=>{try{const G=await fetch(`${de}/api/payment-config`);if(G.ok){const se=await G.json();console.log("Payment config loaded:",se),console.log("Config structure:",se.config),console.log("Promotional message:",se.promotionalMessage),I(se)}else console.error("Failed to load payment config:",G.status)}catch(G){console.error("Error loading payment config:",G)}},J=G=>{const se=G.target.value;w(pe=>({...pe,paymentMethod:se})),N(!!se)},Y=G=>{var Se,at,be,Je,nt,Xe,ct;if(!E||!E.config)return"Loading payment instructions...";const se=E.config.paymentMethods,pe=E.config.contactInfo;switch(G){case"venmo":return(Se=se.venmo)!=null&&Se.enabled?`Send $5 to: ${se.venmo.username}
Note: "Ladder Membership - ${S.firstName} ${S.lastName}"`:"Venmo payments are currently unavailable";case"cashapp":return(at=se.cashapp)!=null&&at.enabled?`Send $5 to: ${se.cashapp.username}
Note: "Ladder Membership - ${S.firstName} ${S.lastName}"`:"CashApp payments are currently unavailable";case"creditCard":return(be=se.creditCard)!=null&&be.enabled?`Credit/Debit card payments available. Contact: ${(pe==null?void 0:pe.adminPhone)||"frbcapl@gmail.com"}`:"Credit card payments are currently unavailable";case"applePay":return(Je=se.applePay)!=null&&Je.enabled?`Apple Pay available. Contact: ${(pe==null?void 0:pe.adminPhone)||"frbcapl@gmail.com"}`:"Apple Pay is currently unavailable";case"googlePay":return(nt=se.googlePay)!=null&&nt.enabled?`Google Pay available. Contact: ${(pe==null?void 0:pe.adminPhone)||"frbcapl@gmail.com"}`:"Google Pay is currently unavailable";case"cash":return(Xe=se.cash)!=null&&Xe.enabled?`Cash payments accepted. Contact: ${(pe==null?void 0:pe.adminPhone)||"frbcapl@gmail.com"}`:"Cash payments are currently unavailable";case"check":return(ct=se.check)!=null&&ct.enabled?`Check payments accepted. Contact: ${(pe==null?void 0:pe.adminPhone)||"frbcapl@gmail.com"}`:"Check payments are currently unavailable";default:return"Please select a payment method"}},D=async()=>{try{c(!0);const G=await fetch(`${de}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:"guest@frontrangepool.com"})});if(G.ok){const se=await G.json();o(se.user),console.log("Guest user authenticated:",se.user)}else{const se=await G.json();console.error("Guest authentication failed:",se),m("Failed to authenticate guest user")}}catch(G){console.error("Error authenticating guest:",G),m("Network error during authentication")}finally{c(!1)}},A=()=>{a("/")},U=()=>{console.log("Opening join modal..."),P(!1),f(!0)},K=G=>{console.log("Opening claim modal for position:",G),R(G),P(!0);const se=Math.floor(1e3+Math.random()*9e3).toString();L(se),w({firstName:G.firstName,lastName:G.lastName,email:"",phone:"",experience:"beginner",fargoRate:G.fargoRate||"",currentLeague:"",currentRanking:"",message:"",payNow:!1,paymentMethod:"",availability:"",locations:""}),f(!0)},X=async G=>{if(G.preventDefault(),!S.firstName||!S.lastName||!S.email){alert("Please fill in all required fields (First Name, Last Name, and Email)");return}k(!0);try{let se="";if(_)if(S.payNow&&S.paymentMethod){console.log("🔍 Creating payment session for claim..."),console.log("Payment Method:",S.paymentMethod),console.log("🚀 About to call payment API for claim..."),console.log("🔍 Request body for claim:",{playerName:`${S.firstName} ${S.lastName}`,email:S.email,paymentMethod:S.paymentMethod,amount:5,claimData:{ladder:B.ladder,position:B.position,generatedPin:W}});const pe=await fetch(`${de}/api/monetization/create-membership-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerName:`${S.firstName} ${S.lastName}`,email:S.email,paymentMethod:S.paymentMethod,amount:5,claimData:{ladder:B.ladder,position:B.position,generatedPin:W}})});console.log("Payment Response Status:",pe.status);const Se=await pe.json();if(console.log("Payment Response Data:",Se),!pe.ok)throw new Error("Failed to create payment session. Please try again.");if(console.log("Payment session created for claim:",Se),Se.paymentType==="square_redirect"&&Se.paymentUrl){localStorage.setItem("lastClaimedPosition",JSON.stringify({ladder:B.ladder,position:B.position})),window.location.href=Se.paymentUrl;return}se=`🎯 Ladder Position Claim Submitted!

You have submitted a claim for Position #${B.position} in the ${B.ladder} ladder.

Name: ${S.firstName} ${S.lastName}
Email: ${S.email}
Generated PIN: ${W}

Please complete your payment using the instructions above. Once payment is verified, you'll have immediate access to all ladder features!`}else{const pe=await fetch(`${de}/api/ladder/submit-claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:S.firstName,lastName:S.lastName,email:S.email,phone:S.phone,ladder:B.ladder,position:B.position,generatedPin:W,fargoRate:S.fargoRate,message:S.message})});if(!pe.ok)throw new Error("Failed to submit claim request. Please try again.");const Se=await pe.json();console.log("Claim submitted:",Se),se=`🎯 Ladder Position Claim Submitted!

You have submitted a claim for Position #${B.position} in the ${B.ladder} ladder.

Name: ${S.firstName} ${S.lastName}
Email: ${S.email}
Generated PIN: ${W}

Your claim has been sent to admin for approval. Since you did not pay the $5 monthly fee, admin approval is required before you can access ladder features.

We'll contact you at ${S.email} within 24-48 hours with the approval decision.`}else{if(S.payNow&&S.paymentMethod){console.log("🔍 Creating payment session for new player..."),console.log("Payment Method:",S.paymentMethod);const pe=await fetch(`${de}/api/monetization/create-membership-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerName:`${S.firstName} ${S.lastName}`,email:S.email,paymentMethod:S.paymentMethod,amount:5})});if(!pe.ok)throw new Error("Failed to create payment session. Please try again.");const Se=await pe.json();if(console.log("Payment session created:",Se),console.log("Payment Type:",Se.paymentType),console.log("Payment URL:",Se.paymentUrl),Se.paymentType==="square_redirect"&&Se.paymentUrl){window.location.href=Se.paymentUrl;return}}se=`📈 Thank you for your interest in joining the Ladder of Legends!

We've received your application:

Name: ${S.firstName} ${S.lastName}
Email: ${S.email}
Experience: ${S.experience}${S.fargoRate?`
FargoRate: ${S.fargoRate}`:""}${S.currentLeague?`
Current League: ${S.currentLeague}`:""}${S.currentRanking?`
Current Ranking: ${S.currentRanking}`:""}`,S.payNow&&S.paymentMethod&&(se+=`

Payment Method: ${S.paymentMethod}
Please complete your payment using the instructions above.`),se+=`

We'll contact you at ${S.email} within 24-48 hours to set up your ladder profile and get you started challenging players!

In the meantime, you can also reach us directly at: frbcapl@gmail.com`}alert(se),w({firstName:"",lastName:"",email:"",phone:"",experience:"beginner",fargoRate:"",currentLeague:"",currentRanking:"",message:"",payNow:!1,paymentMethod:"",availability:"",locations:""}),f(!1),P(!1),R(null),L("")}catch{alert("There was an error submitting your application. Please try again or contact us directly at frbcapl@gmail.com")}finally{k(!1)}},[O,Q]=h.useState(new Set),ne=G=>O.has(`${G.ladder}-${G.position}`),T=(G,se)=>{Q(pe=>new Set([...pe,`${G}-${se}`]))},re={onLogout:()=>{a("/")}};return i?e.createElement("div",{className:"guest-app-container"},e.createElement("div",{className:"guest-app-header"},e.createElement("h1",null,"📈 Ladder of Legends - Guest Preview"),e.createElement("p",null,"Loading guest access..."),e.createElement("div",{className:"guest-badge"},"👀 Guest Mode - Limited Access")),e.createElement("div",{className:"loading-spinner"},"Authenticating guest user...")):u?e.createElement("div",{className:"guest-app-container"},e.createElement("div",{className:"guest-app-header"},e.createElement("h1",null,"📈 Ladder of Legends - Guest Preview"),e.createElement("p",null,"Error loading guest access"),e.createElement("div",{className:"guest-badge"},"👀 Guest Mode - Limited Access")),e.createElement("div",{className:"error-message"},e.createElement("p",null,"Error: ",u),e.createElement("button",{onClick:A,className:"back-btn"},"← Back to Hub"))):e.createElement("div",{className:"guest-app-container"},e.createElement("div",{className:"guest-app-header"},e.createElement("h1",null,"📈 Ladder of Legends - Guest Preview"),e.createElement("p",null,"Experience the actual Ladder of Legends interface with limited functionality"),e.createElement("div",{className:"guest-badge"},"👀 Guest Mode - Limited Access"),e.createElement("div",{className:"guest-actions"},e.createElement("div",{className:"guest-actions-top"},e.createElement("button",{type:"button",onClick:A,className:"back-btn"},"← Back to Hub"),e.createElement("button",{type:"button",onClick:()=>v(!0),className:"view-ladder-btn"},"View Ladder"),e.createElement("button",{type:"button",onClick:()=>t("info"),className:"info-btn"},"ℹ️ Ladder Info"),e.createElement("button",{type:"button",onClick:()=>t("app"),className:"app-btn"},"🎮 Try App Interface")),e.createElement("button",{type:"button",onClick:U,className:"join-btn"},"Join Ladder"))),e.createElement("div",{className:"content-area"},console.log("Current view is:",r),r==="app"&&e.createElement("div",{className:"app-preview-section"},e.createElement("div",{className:"guest-notice"},e.createElement("h3",null,"🎮 Interactive App Preview"),e.createElement("p",null,"You can explore the actual Ladder of Legends interface below. Try clicking buttons and opening modals to see how it works!"),e.createElement("div",{className:"guest-limitations",style:{textAlign:"center"}},e.createElement("strong",null,"Guest Limitations:"),e.createElement("ul",{style:{textAlign:"left",display:"inline-block",margin:"0.5rem auto"}},e.createElement("li",null,"• Can view all interfaces and modals"),e.createElement("li",null,"• Cannot submit forms or save data"),e.createElement("li",null,"• Cannot send real challenges"),e.createElement("li",null,"• Cannot access admin features"),e.createElement("li",null,"• Cannot claim ladder positions")))),e.createElement("div",{className:"ladder-preview"},e.createElement(Bd,{playerName:(n==null?void 0:n.firstName)||"Guest",playerLastName:(n==null?void 0:n.lastName)||"User",senderEmail:(n==null?void 0:n.email)||"guest@frontrangepool.com",userPin:(n==null?void 0:n.pin)||"GUEST",onLogout:re.onLogout,isAdmin:!1,onClaimLadderPosition:K,claimedPositions:O,isPositionClaimed:ne}))),r==="info"&&e.createElement("div",{className:"info-section"},e.createElement("h2",null,"Ladder of Legends Tournament Series Information"),e.createElement("div",{className:"info-cards"},e.createElement("div",{className:"info-card"},e.createElement("h3",null,"⚔️ Challenge Matches"),e.createElement("p",null,"Standard ladder climbing system"),e.createElement("ul",null,e.createElement("li",null,"Challenge  other players",e.createElement("br",null),"up to 4 spots above you on the ladder"),e.createElement("li",null,"Challenger wins:",e.createElement("br",null)," Players switch positions"),e.createElement("li",null,"Defender wins:",e.createElement("br",null)," Positions remain unchanged"),e.createElement("li",null,"7-day immunity for winners"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"💥 SmackDown Matches"),e.createElement("p",null,"Shuffle up the ladder system"),e.createElement("ul",null,e.createElement("li",null,"Call out players up to 5 spots below you on the ladder"),e.createElement("li",null,"Challenger pays full entry",e.createElement("br",null)," Defender pays 50%"),e.createElement("li",null,"Challenger wins: ",e.createElement("br",null),"Defender moves 3 down",e.createElement("br",null)," Challenger moves 2 up"),e.createElement("li",null,"Defender wins: Players switch positions"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"👑 SmackBack Matches"),e.createElement("p",null,"Jump to 1st place opportunity"),e.createElement("ul",null,e.createElement("li",null,"Only available after winning a SmackDown as Defender"),e.createElement("li",null,"Must call out 1st place within 7 days"),e.createElement("li",null,"Challenger wins:",e.createElement("br",null)," Challenger claims 1st place",e.createElement("br",null),"All others move down"),e.createElement("li",null,"Defender wins: Positions unchanged"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"📅 Top 5 Exception"),e.createElement("p",null,"Special rules for top-ranked players"),e.createElement("ul",null,e.createElement("li",null,"Top 5 matches:",e.createElement("br",null)," Saturdays/Sundays only"),e.createElement("li",null,"Location: Legends Brews & Cues (2pm-8pm)"),e.createElement("li",null,"Live streamed on Legends Facebook page"),e.createElement("li",null,"Admin/TD present as referee"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"🎯 Match Rules"),e.createElement("p",null,"Flexible format with minimum requirements"),e.createElement("ul",null,e.createElement("li",null,"All races are even - No handicaps"),e.createElement("li",null,"CSI rule set (8, 9, or 10 ball allowed)"),e.createElement("li",null,"7 or 9-foot tables by agreement"),e.createElement("li",null,"Winner takes all entry fees and prizes"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"💳 Payment Structure"),e.createElement("p",null,"Simple and transparent pricing"),e.createElement("ul",null,e.createElement("li",null,e.createElement("strong",null,"Ladder Membership:")," $5/month"),e.createElement("li",null,e.createElement("strong",null,"Match Fees:")," $5 per match (total)"),e.createElement("li",null,e.createElement("strong",null,"Fee Distribution:")," $3 to prize pool",e.createElement("br",null),"$2 to platform"),e.createElement("li",null,e.createElement("strong",null,"Payment Methods:")," Venmo, Cashapp, CC/Debit, Cash"),e.createElement("li",null,e.createElement("strong",null,"Billing:")," Monthly automatic renewal"))),e.createElement("div",{className:"info-card disclaimer-section"},e.createElement("h3",{className:"disclaimer-title",style:{fontSize:"1.2rem",lineHeight:"1.3",marginBottom:"0.5rem",wordWrap:"break-word"}},"⚠️ Independent",e.createElement("br",null),"Tournament Series ⚠️"),e.createElement("p",{className:"disclaimer-subtitle",style:{fontSize:"0.9rem",marginBottom:"0.75rem",fontStyle:"italic"}},"Important legal disclaimer"),e.createElement("ul",{className:"disclaimer-list",style:{fontSize:"0.85rem",lineHeight:"1.4",paddingLeft:"1.2rem"}},e.createElement("li",null,e.createElement("strong",null,"NOT affiliated")," with Front Range Pool League"),e.createElement("li",null,e.createElement("strong",null,"NOT endorsed")," by CSI, BCAPL, or USAPL"),e.createElement("li",null,e.createElement("strong",null,"NOT sanctioned")," by any governing body"),e.createElement("li",null,"Independent tournament series operated by ",e.createElement("strong",null,"Legends Brews and Cues")),e.createElement("li",null,"Front Range Pool just assists ",e.createElement("strong",null,"Legends Brews and Cues")," with their ladder system")))),e.createElement("div",{className:"join-section"},e.createElement("h3",null,"Ready to Challenge?"),e.createElement("p",null,"Join the ladder and start climbing the rankings!"),e.createElement("button",{onClick:U,className:"join-btn-large"},"📈 Join the Ladder Today"),e.createElement("p",{className:"contact-info"},"Contact: ",e.createElement("strong",null,"frbcapl@gmail.com"))))),g&&e.createElement(Bt,{open:g,onClose:()=>f(!1),title:_?"🎯 Claim Ladder Position":"📈 Join Ladder of Legends",maxWidth:"700px",maxHeight:"90vh",borderColor:"#5B21B6",glowColor:"#5B21B6",style:{maxHeight:"90vh",overflowY:"auto"}},_&&B&&e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(76, 175, 80, 0.15) 0%, rgba(76, 175, 80, 0.08) 100%)",border:"1px solid rgba(76, 175, 80, 0.4)",borderRadius:"8px",padding:"0.6rem",marginBottom:"0.8rem",textAlign:"center",boxShadow:"0 2px 8px rgba(76, 175, 80, 0.2)"}},e.createElement("div",{style:{color:"#fff",fontSize:"0.8rem",lineHeight:"1.2",display:"flex",justifyContent:"space-around",alignItems:"center",flexWrap:"wrap",gap:"0.8rem"}},e.createElement("span",{style:{fontWeight:"600"}},e.createElement("strong",null,"Position:")," #",B.position),e.createElement("span",{style:{fontWeight:"600"}},e.createElement("strong",null,"Ladder:")," ",B.ladder),e.createElement("span",{style:{fontWeight:"600"}},e.createElement("strong",null,"PIN:"),e.createElement("span",{style:{background:"linear-gradient(135deg, #ffd700 0%, #ffed4e 100%)",color:"#000",padding:"0.2rem 0.4rem",borderRadius:"4px",marginLeft:"0.3rem",fontWeight:"bold",boxShadow:"0 1px 3px rgba(255, 215, 0, 0.3)"}},W))),e.createElement("p",{style:{color:"#a0a0a0",fontSize:"0.7rem",margin:"0.3rem 0 0 0",fontStyle:"italic"}},"This PIN will be used to verify your claim and can also be used to log into your account.")),e.createElement("form",{onSubmit:X,style:{maxHeight:"70vh",overflowY:"auto"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.8rem",marginBottom:"0.8rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"firstName",style:{display:"block",color:"#fff",marginBottom:"0.3rem",fontWeight:"600",fontSize:"0.8rem"}},"First Name *"),e.createElement("input",{type:"text",id:"firstName",value:S.firstName,onChange:G=>w({...S,firstName:G.target.value}),required:!0,disabled:_,placeholder:"Enter your first name",style:{width:"100%",padding:"0.4rem 0.6rem",border:"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"6px",background:_?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.08)",color:_?"#888":"#fff",fontSize:"0.8rem",boxSizing:"border-box",height:"28px",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"lastName",style:{display:"block",color:"#fff",marginBottom:"0.3rem",fontWeight:"600",fontSize:"0.8rem"}},"Last Name *"),e.createElement("input",{type:"text",id:"lastName",value:S.lastName,onChange:G=>w({...S,lastName:G.target.value}),required:!0,disabled:_,placeholder:"Enter your last name",style:{width:"100%",padding:"0.4rem 0.6rem",border:"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"6px",background:_?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.08)",color:_?"#888":"#fff",fontSize:"0.8rem",boxSizing:"border-box",height:"28px",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}}))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.3rem",marginBottom:"0.25rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"email",style:{display:"block",color:"#fff",marginBottom:"0.3rem",fontWeight:"600",fontSize:"0.8rem"}},"Email Address *"),e.createElement("input",{type:"email",id:"email",value:S.email,onChange:G=>w({...S,email:G.target.value}),required:!0,placeholder:"Enter your email address",style:{width:"100%",padding:"0.4rem 0.6rem",border:"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.08)",color:"#fff",fontSize:"0.8rem",boxSizing:"border-box",height:"28px",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"phone",style:{display:"block",color:"#fff",marginBottom:"0.3rem",fontWeight:"600",fontSize:"0.8rem"}},"Phone Number (Optional)"),e.createElement("input",{type:"tel",id:"phone",value:S.phone,onChange:G=>w({...S,phone:G.target.value}),placeholder:"Enter your phone number (optional)",style:{width:"100%",padding:"0.4rem 0.6rem",border:"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.08)",color:"#fff",fontSize:"0.8rem",boxSizing:"border-box",height:"28px",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}}))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.8rem",marginBottom:"0.8rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"fargoRate",style:{display:"block",color:"#fff",marginBottom:"0.3rem",fontWeight:"600",fontSize:"0.75rem"}},"Fargo Rate (Optional)"),e.createElement("input",{type:"number",id:"fargoRate",value:S.fargoRate,onChange:G=>w({...S,fargoRate:G.target.value}),min:"0",max:"850",placeholder:"Optional",style:{width:"60%",padding:"0.2rem 0.4rem",border:"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.08)",color:"#fff",fontSize:"0.75rem",boxSizing:"border-box",height:"18px",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"experience",style:{display:"block",color:"#fff",marginBottom:"0.3rem",fontWeight:"600",fontSize:"0.75rem"}},"Experience *"),e.createElement("select",{id:"experience",value:S.experience,onChange:G=>w({...S,experience:G.target.value}),required:!0,style:{width:"100%",padding:"0.4rem 0.6rem",border:"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.08)",color:"#fff",fontSize:"0.8rem",boxSizing:"border-box",height:"28px",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",cursor:"pointer"}},e.createElement("option",{value:"beginner",style:{color:"#000",background:"#fff"}},"Beginner"),e.createElement("option",{value:"intermediate",style:{color:"#000",background:"#fff"}},"Intermediate"),e.createElement("option",{value:"advanced",style:{color:"#000",background:"#fff"}},"Advanced"),e.createElement("option",{value:"expert",style:{color:"#000",background:"#fff"}},"Expert")))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.8rem",marginBottom:"0.8rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"currentLeague",style:{display:"block",color:"#fff",marginBottom:"0.3rem",fontWeight:"600",fontSize:"0.75rem"}},"Current League (Optional)"),e.createElement("input",{type:"text",id:"currentLeague",value:S.currentLeague,onChange:G=>w({...S,currentLeague:G.target.value}),placeholder:"Optional",style:{width:"100%",padding:"0.3rem 0.5rem",border:"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.08)",color:"#fff",fontSize:"0.75rem",boxSizing:"border-box",height:"20px",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"currentRanking",style:{display:"block",color:"#fff",marginBottom:"0.3rem",fontWeight:"600",fontSize:"0.75rem"}},"Current Ranking (Optional)"),e.createElement("input",{type:"text",id:"currentRanking",value:S.currentRanking,onChange:G=>w({...S,currentRanking:G.target.value}),placeholder:"Optional",style:{width:"100%",padding:"0.3rem 0.5rem",border:"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.08)",color:"#fff",fontSize:"0.75rem",boxSizing:"border-box",height:"20px",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}}))),e.createElement("div",{style:{marginBottom:"0.8rem"}},e.createElement("label",{htmlFor:"message",style:{display:"block",color:"#fff",marginBottom:"0.3rem",fontWeight:"600",fontSize:"0.75rem"}},"Additional Message"),e.createElement("textarea",{id:"message",value:S.message,onChange:G=>w({...S,message:G.target.value}),placeholder:"Optional - Tell us about your pool experience, goals, or questions...",style:{width:"100%",padding:"0.4rem 0.6rem",border:"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.08)",color:"#fff",fontSize:"0.75rem",minHeight:"24px",maxHeight:"32px",resize:"vertical",boxSizing:"border-box",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}})),!(E!=null&&E.promotionalMessage)&&e.createElement("div",{style:{marginBottom:"0.8rem",padding:"0.6rem",background:"linear-gradient(135deg, rgba(76, 175, 80, 0.12) 0%, rgba(76, 175, 80, 0.06) 100%)",border:"1px solid rgba(76, 175, 80, 0.35)",borderRadius:"8px",boxShadow:"0 2px 6px rgba(76, 175, 80, 0.15)"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.4rem"}},e.createElement("input",{type:"checkbox",checked:S.payNow,onChange:G=>w({...S,payNow:G.target.checked}),style:{cursor:"pointer",width:"16px",height:"16px",margin:"0",accentColor:"#4CAF50"}}),e.createElement("label",{style:{color:"#4caf50",fontWeight:"600",fontSize:"0.85rem"}},"💳 Pay $5 Monthly Fee Now (Optional)")),e.createElement("p",{style:{color:"#b0b0b0",fontSize:"0.75rem",margin:"0",fontStyle:"italic",lineHeight:"1.3"}},"If you pay now, you'll be added to the ladder immediately after approval.",e.createElement("br",null)," If not, you'll need to pay before being added to the ladder system."),S.payNow&&e.createElement("div",{style:{marginTop:"0.5rem"}},e.createElement("label",{style:{display:"block",color:"#4caf50",marginBottom:"0.3rem",fontWeight:"bold",fontSize:"0.85rem"}},"Select Payment Method: *"),e.createElement("select",{value:S.paymentMethod,onChange:J,required:S.payNow,style:{width:"100%",padding:"0.4rem",border:"2px solid rgba(76, 175, 80, 0.3)",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"0.85rem",boxSizing:"border-box"}},e.createElement("option",{value:"",style:{color:"#000",background:"#fff"}},"Choose payment method..."),e.createElement("option",{value:"venmo",style:{color:"#000",background:"#fff"}},"Venmo"),e.createElement("option",{value:"cashapp",style:{color:"#000",background:"#fff"}},"CashApp"),e.createElement("option",{value:"creditCard",style:{color:"#000",background:"#fff"}},"Credit/Debit Card"),e.createElement("option",{value:"applePay",style:{color:"#000",background:"#fff"}},"Apple Pay"),e.createElement("option",{value:"googlePay",style:{color:"#000",background:"#fff"}},"Google Pay"),e.createElement("option",{value:"cash",style:{color:"#000",background:"#fff"}},"Cash"),e.createElement("option",{value:"check",style:{color:"#000",background:"#fff"}},"Check")),M&&S.paymentMethod&&e.createElement("div",{style:{marginTop:"0.5rem",padding:"0.5rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px"}},e.createElement("h4",{style:{color:"#4CAF50",margin:"0 0 0.3rem 0",fontSize:"0.85rem",fontWeight:"bold"}},"💳 Payment Instructions"),e.createElement("div",{style:{color:"#fff",fontSize:"0.75rem",lineHeight:"1.2",whiteSpace:"pre-line"}},Y(S.paymentMethod)),e.createElement("div",{style:{marginTop:"0.3rem",padding:"0.3rem",background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"3px",color:"#ffc107",fontSize:"0.75rem"}},"⚠️ Please complete your payment before submitting this form. Your application will be processed once payment is received.")))),(E==null?void 0:E.promotionalMessage)&&e.createElement("div",{style:{marginBottom:"0.8rem",padding:"0.8rem",background:"rgba(255, 215, 0, 0.15)",border:"1px solid rgba(255, 215, 0, 0.4)",borderRadius:"8px",textAlign:"center",boxShadow:"0 2px 8px rgba(255, 215, 0, 0.2)"}},e.createElement("p",{style:{color:"#ffd700",fontSize:"0.8rem",margin:"0",fontWeight:"600",lineHeight:"1.3"}},"🎉 ",E.promotionalMessage),e.createElement("p",{style:{color:"#ffd700",fontSize:"0.65rem",margin:"0.3rem 0 0 0",fontWeight:"400",opacity:.9}},"No membership fee required during promotional period!",e.createElement("br",null),"Match fees still apply.")),e.createElement("div",{style:{display:"flex",gap:"0.8rem",marginTop:"0.8rem"}},e.createElement("button",{type:"button",onClick:()=>f(!1),disabled:x,style:{flex:1,padding:"0.6rem 1rem",background:"rgba(255, 255, 255, 0.08)",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.4)",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}},"Cancel"),e.createElement("button",{type:"submit",disabled:x,style:{flex:1,padding:"0.6rem 1rem",background:"linear-gradient(135deg, #4CAF50 0%, #45a049 100%)",color:"white",border:"none",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 6px rgba(76, 175, 80, 0.3)"}},x?"Submitting...":_?"🎯 Claim Position":"📈 Join Ladder of Legends"))),e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(76, 175, 80, 0.12) 0%, rgba(76, 175, 80, 0.06) 100%)",border:"1px solid rgba(76, 175, 80, 0.35)",borderRadius:"8px",padding:"0.6rem",marginTop:"0.8rem",boxShadow:"0 2px 6px rgba(76, 175, 80, 0.15)"}},e.createElement("h3",{style:{color:"#4CAF50",margin:"0 0 0.4rem 0",fontSize:"0.85rem",fontWeight:"600"}},"📋 What to Expect"),e.createElement("ul",{style:{margin:"0",paddingLeft:"1rem",color:"#b0b0b0",fontSize:"0.75rem",lineHeight:"1.3"}},e.createElement("li",null,"If you paid the monthly membership now:",e.createElement("br",null),"If claiming an account, you will be added immediatly.",e.createElement("br",null),"New users will be added to the appropriate ladder upon admin approval",e.createElement("br",null)),e.createElement("br",null),e.createElement("li",null,"If not paid now, your application will be processed after payment is received"),e.createElement("li",null,e.createElement("br",null),"Once added to the ladder, you can start challenging players and climbing the rankings",e.createElement("br",null),"Issue challenges, defend your position, and compete in the ladder system")))),y&&e.createElement(Bt,{open:y,onClose:()=>v(!1),title:"📊 Ladder Rankings - Public View",maxHeight:"90vh",borderColor:"#8A8A8A",textColor:"#000000",glowColor:"#8B5CF6",style:{maxHeight:"85vh",height:"85vh",overflowY:"auto"}},e.createElement("div",{className:"public-ladder-view"},e.createElement("div",{className:"public-view-notice",style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid rgba(229, 62, 62, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",textAlign:"center"}},e.createElement("span",{className:"public-view-text",style:{color:"#e53e3e",fontWeight:"600"}},"👁️ Public View - Anyone can view the ladder rankings")),e.createElement(Bd,{playerName:(n==null?void 0:n.firstName)||"Guest",playerLastName:(n==null?void 0:n.lastName)||"User",senderEmail:(n==null?void 0:n.email)||"guest@frontrangepool.com",userPin:(n==null?void 0:n.pin)||"GUEST",onLogout:re.onLogout,isAdmin:!1,showClaimForm:!1,initialView:"ladders",isPublicView:!0,onClaimLadderPosition:K,claimedPositions:O,isPositionClaimed:ne}))))},u$=({onLoginSuccess:a})=>{const[r,t]=h.useState(!1),[n,o]=h.useState(!1),[i,c]=h.useState(!1),[u,m]=h.useState(!1),[g,f]=h.useState(!1),[y,v]=h.useState(!1),[S,w]=h.useState(!1),[x,k]=h.useState(!1),[E,I]=h.useState({singlesLeague:!1,ladderOfLegends:!1,keyDifferences:!1,instructions:!1}),M=er(),N=L=>{I(F=>({...F,[L]:!F[L]}))},_=[{id:"ladder",name:"Ladder of Legends Tournament Series",description:"Independently run, challenge-based ladder system",icon:"⚔️",color:"#2196F3",status:"active"},{id:"league",name:"Front Range BCAPL Singles League",description:"Manage league matches, schedules, and standings",icon:"🏆",color:"#4CAF50",status:"active"}],P=(L,F,j,J)=>{F==="guest@frontrangepool.com"&&j==="GUEST"?t(!0):a(L,F,j,J)},B=L=>{L==="league"?M("/guest/league"):L==="ladder"&&M("/guest/ladder")},R=()=>{t(!1),M("/")},W=()=>{w(!0)};return r?e.createElement("div",{className:"logged-out-hub-container"},e.createElement("div",{className:"logged-out-hub-header"},e.createElement("div",{className:"hub-title",style:{textAlign:window.innerWidth<=768?"center":"left"}},e.createElement("h1",null,"Front Range Pool Hub"),e.createElement("p",null,"Guest Preview Mode"),e.createElement("div",{style:{marginTop:"10px",padding:"8px 16px",background:"rgba(229, 62, 62, 0.2)",border:"1px solid #e53e3e",borderRadius:"20px",fontSize:"0.9rem",color:"#e53e3e"}},"👀 Exploring as Guest - Limited functionality")),e.createElement("div",{className:"apps-section"},e.createElement("h2",{className:"section-title"},"Available Apps"),e.createElement("div",{className:"apps-grid active-apps"},_.filter(L=>L.status==="active").map(L=>e.createElement("div",{key:L.id,className:`app-card ${L.status} guest-mode`,style:{"--app-color":L.color},onClick:()=>B(L.id)},e.createElement("div",{className:"app-icon"},L.icon),e.createElement("div",{className:"app-info"},e.createElement("h3",null,L.name),e.createElement("p",null,L.description),e.createElement("div",{className:"app-status"},e.createElement("span",{className:"status-guest-preview"},"Try Demo"))))))),e.createElement("div",{style:{textAlign:"center",marginTop:"20px"}},e.createElement("button",{onClick:R,style:{background:"transparent",color:"#e53e3e",border:"2px solid #e53e3e",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:L=>{L.target.style.background="#e53e3e",L.target.style.color="white"},onMouseLeave:L=>{L.target.style.background="transparent",L.target.style.color="#e53e3e"}},"← Back to Login")))):e.createElement("div",{className:"logged-out-hub-container"},e.createElement("div",{className:"instruction-button"},e.createElement("div",{className:"instruction-button-header",onClick:()=>N("instructions")},e.createElement("div",{className:"instruction-button-content"},e.createElement("span",{className:"instruction-button-icon"},"📋"),e.createElement("h3",{className:"instruction-button-title"},"How to Get Started")),e.createElement("span",{className:`instruction-button-arrow ${E.instructions?"expanded":""}`},"▼")),E.instructions&&e.createElement("div",{className:"instruction-modal"},e.createElement("div",{className:"instruction-modal-content"},e.createElement("div",{className:"instruction-section"},e.createElement("span",{className:"instruction-section-icon"},"🔑"),e.createElement("div",null,e.createElement("strong",{className:"instruction-section-title"},"Already have an account? ",e.createElement("br",null),"(Beta Users)"),e.createElement("div",{className:"instruction-section-text"},"Use your email OR PIN to sign in. You only need one of them to log in.",e.createElement("br",null),"One log in grants access to all apps."))),e.createElement("div",{className:"instruction-section"},e.createElement("span",{className:"instruction-section-icon"},"👤"),e.createElement("div",null,e.createElement("strong",{className:"instruction-section-title",style:{color:"#9C27B0"}},"Current ladder player?"),e.createElement("div",{className:"instruction-section-text"},"If you're already on the ladder, but NOT a Beta user, you need to claim your position. ",e.createElement("br",null),e.createElement("br",null),e.createElement("strong",null,"You can either:"),e.createElement("br",null),'• Click your name on the ladder(marked with *). In your stats screen that will open, click the green "Claim" button.',e.createElement("br",null),'• Use the "Sign Up" process to check your status.',e.createElement("br",null),"An admin will review your registration."))),e.createElement("div",{className:"instruction-section"},e.createElement("span",{className:"instruction-section-icon"},"🆕"),e.createElement("div",null,e.createElement("strong",{className:"instruction-section-title",style:{color:"#FF9800"}},"New to the system?"),e.createElement("div",{className:"instruction-section-text"},`Click "Sign Up" to create a new account. You'll provide your contact information and other details.`,e.createElement("br",null),"The system will assign you a PIN and and admin will review your registration."))),e.createElement("div",{className:"instruction-section"},e.createElement("span",{className:"instruction-section-icon"},"👀"),e.createElement("div",null,e.createElement("strong",{className:"instruction-section-title",style:{color:"#2196F3"}},"Just want to look around?"),e.createElement("div",{className:"instruction-section-text"},'Use the "Guest Access" buttons below to preview the ladder and apps without creating an account.',e.createElement("br",null)," Anyone can view the ladder rankings!")))),e.createElement("div",{className:"instruction-footer"},"💡 ",e.createElement("strong",null,"Need help?")," Contact the Front Range Pool Hub administrators for assistance with account setup or technical issues."))),e.createElement("div",{className:"login-section"},e.createElement(GU,{onSuccess:P,onShowSignup:()=>o(!0)})),e.createElement("div",{style:{textAlign:"center",marginTop:"10px",marginBottom:"55px",padding:"0 10px",width:"100%",boxSizing:"border-box"}},e.createElement("button",{onClick:()=>c(!0),style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",border:"none",padding:window.innerWidth<=768?"8px 12px":"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:window.innerWidth<=768?"0.8rem":"1.2rem",fontWeight:"bold",boxShadow:"0 4px 15px rgba(245, 158, 11, 0.3)",transition:"all 0.3s ease",maxWidth:window.innerWidth<=768?"calc(100vw - 40px)":"400px",width:window.innerWidth<=768?"100%":"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxSizing:"border-box"},onMouseEnter:L=>{L.target.style.transform="translateY(-2px)",L.target.style.boxShadow="0 6px 20px rgba(245, 158, 11, 0.4)"},onMouseLeave:L=>{L.target.style.transform="translateY(0)",L.target.style.boxShadow="0 4px 15px rgba(245, 158, 11, 0.3)"}},"❓   Singles League vs Ladder of Legends - What's the Difference    ❓")),e.createElement("div",{className:"logged-out-hub-header"},e.createElement("div",{className:"hub-title"},e.createElement("h1",null,"Guest Access")),e.createElement("div",{className:"apps-section"},e.createElement("div",{className:"apps-grid active-apps"},_.filter(L=>L.status==="active").map(L=>e.createElement("div",{key:L.id,className:`app-card ${L.status} logged-out ${L.id==="ladder"?"ladder-card":""}`,style:{"--app-color":L.color}},L.id==="ladder"&&e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"}},e.createElement("button",{className:"view-ladder-btn",onClick:W,style:{background:"transparent",color:"#4CAF50",border:"2px solid #4CAF50",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:window.innerWidth<=768?"0.75rem":"0.8rem",fontWeight:"bold",transition:"all 0.3s ease",whiteSpace:"nowrap"},onMouseEnter:F=>{F.target.style.background="#4CAF50",F.target.style.color="white"},onMouseLeave:F=>{F.target.style.background="transparent",F.target.style.color="#4CAF50"}},"👀 View Ladder"),e.createElement("button",{className:"calendar-btn",onClick:()=>k(!0),style:{background:"rgba(139, 92, 246, 0.1)",color:"#8B5CF6",border:"2px solid #8B5CF6",padding:window.innerWidth<=768?"8px 16px":"10px 20px",borderRadius:"8px",cursor:"pointer",fontSize:window.innerWidth<=768?"0.9rem":"1rem",fontWeight:"600",transition:"all 0.2s ease",whiteSpace:"nowrap"},onMouseEnter:F=>{F.target.style.background="rgba(139, 92, 246, 0.2)",F.target.style.transform="translateY(-1px)"},onMouseLeave:F=>{F.target.style.background="rgba(139, 92, 246, 0.1)",F.target.style.transform="translateY(0)"}},"📅 Calendar")),e.createElement("div",{className:"app-icon",style:{fontSize:window.innerWidth<=768?"1.5rem":"3rem",marginBottom:window.innerWidth<=768?"0.5rem":"1rem",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",minHeight:window.innerWidth<=768?"2rem":"4rem"}},L.icon),e.createElement("div",{className:"app-info"},e.createElement("h3",{style:{fontSize:window.innerWidth<=768?"0.9rem":"1.5rem",lineHeight:window.innerWidth<=768?"1.2":"1.3",marginBottom:window.innerWidth<=768?"0.3rem":"0.5rem"}},L.id==="ladder"?e.createElement(e.Fragment,null,"Ladder of Legends",e.createElement("br",null),"Tournament Series"):L.name),e.createElement("p",{style:{fontSize:window.innerWidth<=768?"0.8rem":"1rem",lineHeight:window.innerWidth<=768?"1.3":"1.4",marginBottom:window.innerWidth<=768?"0.5rem":"1rem"}},L.description),e.createElement("div",{className:"app-actions"},e.createElement("button",{className:"guest-access-btn",onClick:()=>B(L.id),style:{background:"transparent",color:L.id==="ladder"?"#4CAF50":L.color,border:`2px solid ${L.id==="ladder"?"#4CAF50":L.color}`,padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:window.innerWidth<=768?"0.8rem":"0.9rem",fontWeight:"bold",marginTop:"8px",marginBottom:"8px",transition:"all 0.3s ease"},onMouseEnter:F=>{F.target.style.background=L.id==="ladder"?"#4CAF50":L.color,F.target.style.color="white"},onMouseLeave:F=>{F.target.style.background="transparent",F.target.style.color=L.id==="ladder"?"#4CAF50":L.color}},"👀 Access as Guest")))))))),n&&e.createElement(cS,{onClose:()=>o(!1),onSuccess:L=>{console.log("Signup successful:",L)}}),i&&e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:window.innerWidth<=768?"flex-start":"center",zIndex:1e3,padding:window.innerWidth<=768?"160px 5px 30px 5px":"20px",overflowY:"auto",WebkitOverflowScrolling:"touch"}},e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"2px solid #f59e0b",borderRadius:"15px",width:window.innerWidth<=768?"95%":"55%",maxWidth:window.innerWidth<=768?"100%":"700px",minWidth:window.innerWidth<=768?"auto":"700px",height:window.innerWidth<=768?"auto":"90vh",maxHeight:window.innerWidth<=768?"calc(100vh - 280px)":"800px",display:"flex",flexDirection:"column",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",color:"#ffffff",marginTop:window.innerWidth<=768?"0px":"20px"}},e.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",padding:window.innerWidth<=768?"8px":"15px",borderBottom:"2px solid #f59e0b",flexShrink:0}},e.createElement("h2",{style:{margin:0,fontSize:window.innerWidth<=768?"1.2rem":"1.5rem",color:"#ffffff",fontWeight:"bold",textAlign:"center",lineHeight:window.innerWidth<=768?"1.3":"1.4"}},"🏆 Singles League vs Ladder of Legends ⚔️",e.createElement("br",null),"Seperate & Different Formats"),e.createElement("button",{onClick:()=>c(!1),style:{position:"absolute",right:"85px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ffffff",fontSize:"2rem",cursor:"pointer",padding:"5px",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s ease"},onMouseEnter:L=>L.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:L=>L.target.style.backgroundColor="transparent"},"×")),e.createElement("div",{style:{flex:1,overflowY:"auto",padding:window.innerWidth<=768?"8px 5px 5px 5px":"20px",fontSize:window.innerWidth<=768?"0.8rem":"0.95rem",lineHeight:window.innerWidth<=768?"1.3":"1.4"}},e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"2px solid #4CAF50",borderRadius:"10px",padding:window.innerWidth<=768?"6px":"15px",marginBottom:window.innerWidth<=768?"8px":"20px",textAlign:"center"}},e.createElement("p",{style:{margin:"0 0 8px 0",color:"#4CAF50",fontSize:window.innerWidth<=768?"0.9rem":"1.1rem",fontWeight:"bold"}},"🔑 ONE LOGIN FOR BOTH FORMATS"),e.createElement("p",{style:{margin:0,color:"#e0e0e0",fontSize:window.innerWidth<=768?"0.8rem":"1rem"}},"Use the Front Range Pool Hub to access both the Singles League and Ladder of Legends with a single login.",e.createElement("br",null),"Your account works across both systems, making it easy to participate in whichever format interests you most.")),e.createElement("div",{style:{background:"rgba(245, 158, 11, 0.1)",border:"2px solid #f59e0b",borderRadius:"10px",padding:window.innerWidth<=768?"6px":"15px",marginBottom:window.innerWidth<=768?"8px":"20px",textAlign:"center"}},e.createElement("h3",{style:{margin:"0 0 15px 0",color:"#f59e0b",fontSize:window.innerWidth<=768?"0.9rem":"1.2rem"}},"⚠️ IMPORTANT: These are TWO SEPARATE COMPETITION SYSTEMS"),e.createElement("p",{style:{margin:0,color:"#e0e0e0",fontSize:window.innerWidth<=768?"0.8rem":"1rem"}},"This detailed comparison helps explain the key differences between these completely separate formats.")),e.createElement("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"1fr 1fr",gap:window.innerWidth<=768?"6px":"20px",marginBottom:window.innerWidth<=768?"8px":"20px"}},e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"10px",padding:window.innerWidth<=768?"6px":"18px",border:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("h3",{onClick:()=>N("singlesLeague"),style:{color:"#ff4444",margin:window.innerWidth<=768?"0 0 8px 0":"0 0 15px 0",fontSize:window.innerWidth<=768?"1.1rem":"1.3rem",textAlign:"center",borderBottom:"2px solid #ff4444",paddingBottom:"10px",cursor:"pointer",userSelect:"none"}},"🏆 Singles League 🏆 ",E.singlesLeague?"▼":"▶"),E.singlesLeague&&e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:window.innerWidth<=768?"4px":"12px"}},e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",padding:window.innerWidth<=768?"4px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#ff4444",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"🏗️ League Structure"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Season Length:")," 10 weeks total"),e.createElement("li",null,e.createElement("strong",null,"Phase 1:")," Weeks 1-6 (6 mandatory matches)"),e.createElement("li",null,e.createElement("strong",null,"Phase 2:")," Weeks 7-10 (2-4 challenge matches)"),e.createElement("li",null,e.createElement("strong",null,"Format:")," BCAPL Singles Division - Hybrid"),e.createElement("li",null,e.createElement("strong",null,"Max Players:")," 30 players per session"))),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",padding:window.innerWidth<=768?"6px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#ff4444",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"📅 Phase 1 - Scheduled Matches"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"6 MANDATORY MATCHES")," against assigned opponents"),e.createElement("li",null,e.createElement("strong",null,"Flexible Scheduling:")," Any day, any time, any location"),e.createElement("li",null,e.createElement("strong",null,"Deadline:")," Must complete by end of Week 6"),e.createElement("li",null,e.createElement("strong",null,"Scoring:")," BCAPL scoring app required"),e.createElement("li",null,e.createElement("strong",null,"FargoRate:")," All matches integrated for ratings"))),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",padding:window.innerWidth<=768?"6px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#ff4444",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"⚔️ Phase 2 - Challenge System"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Total Required:")," 2-4 matches (minimum 2)"),e.createElement("li",null,e.createElement("strong",null,"Challenge Limit:")," Up to 4 spots higher in standings"),e.createElement("li",null,e.createElement("strong",null,"Weekly Limit:")," Only 1 match per week"),e.createElement("li",null,e.createElement("strong",null,"Defense Rules:")," Must accept until 2 defenses completed"),e.createElement("li",null,e.createElement("strong",null,"Dynamic Limits:")," Based on times challenged"))),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",padding:window.innerWidth<=768?"6px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#ff4444",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"🎱 Match Rules"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Race Length:")," Race to 5 games per match"),e.createElement("li",null,e.createElement("strong",null,"Scoring:")," 10 points per game + 10 bonus for match winner"),e.createElement("li",null,e.createElement("strong",null,"Rules:")," Official CSI rule book"),e.createElement("li",null,e.createElement("strong",null,"Payment:")," Standard league fees apply"),e.createElement("li",null,e.createElement("strong",null,"Communication:")," League Scheduling Hub required"))),e.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",padding:window.innerWidth<=768?"6px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#ff4444",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"🔑 Key Features"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Season-based:")," Structured competition with deadlines"),e.createElement("li",null,e.createElement("strong",null,"Standings-driven:")," Phase 1 results determine Phase 2 eligibility"),e.createElement("li",null,e.createElement("strong",null,"League Affiliation:")," Official BCAPL division"),e.createElement("li",null,e.createElement("strong",null,"Website:")," https://frusapl.com"),e.createElement("li",null,e.createElement("strong",null,"Chat System:")," League-wide communication"))))),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"10px",padding:window.innerWidth<=768?"6px":"18px",border:"1px solid rgba(255, 255, 255, 0.1)"}},e.createElement("h3",{onClick:()=>N("ladderOfLegends"),style:{color:"#a855f7",margin:window.innerWidth<=768?"0 0 8px 0":"0 0 15px 0",fontSize:window.innerWidth<=768?"1.1rem":"1.3rem",textAlign:"center",borderBottom:"2px solid #a855f7",paddingBottom:"10px",cursor:"pointer",userSelect:"none"}},"⚔️ Ladder of Legends ⚔️ ",E.ladderOfLegends?"▼":"▶"),E.ladderOfLegends&&e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:window.innerWidth<=768?"4px":"12px"}},e.createElement("div",{style:{background:"rgba(168, 85, 247, 0.1)",padding:window.innerWidth<=768?"4px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#a855f7",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"🏗️ Ladder Structure"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Format:")," Independent tournament series"),e.createElement("li",null,e.createElement("strong",null,"Divisions:")," 3 skill-based ladders"),e.createElement("li",null,e.createElement("strong",null,"499 & Under:")," Beginner to intermediate"),e.createElement("li",null,e.createElement("strong",null,"500-549:")," Intermediate to advanced"),e.createElement("li",null,e.createElement("strong",null,"550+:")," Advanced to expert"))),e.createElement("div",{style:{background:"rgba(168, 85, 247, 0.1)",padding:window.innerWidth<=768?"6px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#a855f7",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"⚔️ Match Types"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Challenge Match:")," Up to 4 spots above, switch positions"),e.createElement("li",null,e.createElement("strong",null,"SmackDown:")," Call out below, special positioning rules"),e.createElement("li",null,e.createElement("strong",null,"SmackBack:")," Jump to 1st place opportunity"),e.createElement("li",null,e.createElement("strong",null,"No Minimum:")," Play as many or few as you want"),e.createElement("li",null,e.createElement("strong",null,"Flexible:")," Any time, any location by agreement"))),e.createElement("div",{style:{background:"rgba(168, 85, 247, 0.1)",padding:window.innerWidth<=768?"6px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#a855f7",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"💰 Payment Structure"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Membership:")," $5/month (required)"),e.createElement("li",null,e.createElement("strong",null,"Match Fee:")," $5 per match (total)"),e.createElement("li",null,e.createElement("strong",null,"Distribution:")," $3 to prize pool, $2 to platform"),e.createElement("li",null,e.createElement("strong",null,"Prize Periods:")," Every 2 months"),e.createElement("li",null,e.createElement("strong",null,"Winner Takes All:")," Entry fees + sponsor prizes"))),e.createElement("div",{style:{background:"rgba(168, 85, 247, 0.1)",padding:window.innerWidth<=768?"6px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#a855f7",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"🛡️ Special Rules"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Immunity:")," 7 days after winning any match"),e.createElement("li",null,e.createElement("strong",null,"Top 5 Exception:")," Saturdays/Sundays at Legends only"),e.createElement("li",null,e.createElement("strong",null,"Live Streaming:")," Top 5 matches on Facebook"),e.createElement("li",null,e.createElement("strong",null,"Referee:")," Admin present for top 5 matches"),e.createElement("li",null,e.createElement("strong",null,"No Greens Fees:")," Tables open for top 5 matches"))),e.createElement("div",{style:{background:"rgba(168, 85, 247, 0.1)",padding:window.innerWidth<=768?"6px":"10px",borderRadius:"8px"}},e.createElement("h4",{style:{color:"#a855f7",margin:"0 0 8px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"🔑 Key Features"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Independent:")," Not affiliated with any league"),e.createElement("li",null,e.createElement("strong",null,"Challenge-based:")," No mandatory match requirements"),e.createElement("li",null,e.createElement("strong",null,"Prize-focused:")," Bi-monthly prize distributions"),e.createElement("li",null,e.createElement("strong",null,"Facebook Group:"),' "Top Colorado Springs Pool Players"'),e.createElement("li",null,e.createElement("strong",null,"Skill-based:")," FargoRate integrated divisions")))))),e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"2px solid #4CAF50",borderRadius:"10px",padding:window.innerWidth<=768?"10px":"18px",marginBottom:window.innerWidth<=768?"12px":"20px"}},e.createElement("h3",{onClick:()=>N("keyDifferences"),style:{margin:window.innerWidth<=768?"0 0 8px 0":"0 0 15px 0",color:"#4CAF50",fontSize:window.innerWidth<=768?"1.1rem":"1.2rem",textAlign:"center",cursor:"pointer",userSelect:"none"}},"💡 Key Differences Summary ",E.keyDifferences?"▼":"▶"),E.keyDifferences&&e.createElement("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"1fr 1fr",gap:window.innerWidth<=768?"6px":"20px"}},e.createElement("div",null,e.createElement("h4",{style:{color:"#4CAF50",margin:"0 0 10px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"🎯 Singles League"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Structure:")," Season-based with deadlines"),e.createElement("li",null,e.createElement("strong",null,"Requirements:")," 6+ mandatory matches per season"),e.createElement("li",null,e.createElement("strong",null,"Pressure:")," Must complete matches to advance"),e.createElement("li",null,e.createElement("strong",null,"Affiliation:")," Official BCAPL division"),e.createElement("li",null,e.createElement("strong",null,"Focus:")," League competition and standings"))),e.createElement("div",null,e.createElement("h4",{style:{color:"#a855f7",margin:"0 0 10px 0",fontSize:window.innerWidth<=768?"0.9rem":"1rem"}},"🏆 Ladder of Legends"),e.createElement("ul",{style:{margin:0,paddingLeft:"18px",color:"#e0e0e0",fontSize:"0.85rem"}},e.createElement("li",null,e.createElement("strong",null,"Structure:")," Challenge-based with no deadlines"),e.createElement("li",null,e.createElement("strong",null,"Requirements:")," No minimum matches required"),e.createElement("li",null,e.createElement("strong",null,"Pressure:")," Play at your own pace"),e.createElement("li",null,e.createElement("strong",null,"Affiliation:")," Independent tournament series"),e.createElement("li",null,e.createElement("strong",null,"Focus:")," Individual challenges and prizes"))))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"1fr 1fr 1fr",gap:window.innerWidth<=768?"4px":"15px",marginTop:window.innerWidth<=768?"8px":"20px"}},e.createElement("button",{onClick:()=>{c(!1),m(!0)},style:{background:"linear-gradient(135deg, #ff4444 0%, #cc0000 100%)",color:"white",border:"none",padding:window.innerWidth<=768?"6px 8px":"12px 18px",borderRadius:"8px",cursor:"pointer",fontSize:window.innerWidth<=768?"0.8rem":"0.9rem",fontWeight:"bold",boxShadow:"0 4px 15px rgba(255, 68, 68, 0.3)",transition:"all 0.3s ease"},onMouseEnter:L=>{L.target.style.transform="translateY(-2px)",L.target.style.boxShadow="0 6px 20px rgba(255, 68, 68, 0.4)"},onMouseLeave:L=>{L.target.style.transform="translateY(0)",L.target.style.boxShadow="0 4px 15px rgba(255, 68, 68, 0.3)"}},"📖 View Singles League",e.createElement("br",null)," Phase 1 Rules"),e.createElement("button",{onClick:()=>{c(!1),f(!0)},style:{background:"linear-gradient(135deg, #ff8800 0%, #ff6600 100%)",color:"white",border:"none",padding:window.innerWidth<=768?"6px 8px":"12px 18px",borderRadius:"8px",cursor:"pointer",fontSize:window.innerWidth<=768?"0.8rem":"0.9rem",fontWeight:"bold",boxShadow:"0 4px 15px rgba(255, 136, 0, 0.3)",transition:"all 0.3s ease"},onMouseEnter:L=>{L.target.style.transform="translateY(-2px)",L.target.style.boxShadow="0 6px 20px rgba(255, 136, 0, 0.4)"},onMouseLeave:L=>{L.target.style.transform="translateY(0)",L.target.style.boxShadow="0 4px 15px rgba(255, 136, 0, 0.3)"}},"📖 View Single League",e.createElement("br",null),"Phase 2 Rules"),e.createElement("button",{onClick:()=>{c(!1),v(!0)},style:{background:"linear-gradient(135deg, #a855f7 0%, #9333ea 100%)",color:"white",border:"none",padding:window.innerWidth<=768?"6px 8px":"12px 18px",borderRadius:"8px",cursor:"pointer",fontSize:window.innerWidth<=768?"0.8rem":"0.9rem",fontWeight:"bold",boxShadow:"0 4px 15px rgba(168, 85, 247, 0.3)",transition:"all 0.3s ease"},onMouseEnter:L=>{L.target.style.transform="translateY(-2px)",L.target.style.boxShadow="0 6px 20px rgba(168, 85, 247, 0.4)"},onMouseLeave:L=>{L.target.style.transform="translateY(0)",L.target.style.boxShadow="0 4px 15px rgba(168, 85, 247, 0.3)"}},"📖 View Ladder Rules"))))),u&&e.createElement(Ow,{isOpen:u,onClose:()=>{m(!1),c(!0)}}),g&&e.createElement(zw,{isOpen:g,onClose:()=>{f(!1),c(!0)}}),y&&e.createElement(dS,{isOpen:y,onClose:()=>{v(!1),c(!0)},isMobile:!1}),S&&e.createElement(Bt,{open:S,onClose:()=>w(!1),title:"📊 Ladder Rankings - Public View",maxWidth:"1000px",maxHeight:"90vh",borderColor:"#8A8A8A",textColor:"#000000",glowColor:"#8B5CF6",style:{maxHeight:"85vh",height:"85vh",overflowY:"auto"}},e.createElement("div",{className:"public-ladder-view"},e.createElement("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid rgba(229, 62, 62, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",textAlign:"center"}},e.createElement("span",{style:{color:"#e53e3e",fontWeight:"600",fontSize:"0.9rem"}},"👁️ Public View - Anyone can view the ladder rankings")),e.createElement(Bd,{playerName:"Guest",playerLastName:"User",senderEmail:"guest@frontrangepool.com",userPin:"GUEST",onLogout:()=>w(!1),isAdmin:!1,showClaimForm:!1,initialView:"ladders",isPublicView:!0,onClaimLadderPosition:()=>{},claimedPositions:[],isPositionClaimed:()=>!1}))),e.createElement(pS,{isOpen:x,onClose:()=>k(!1)}))},m$=({currentAppName:a,isAdmin:r,isSuperAdmin:t,onLogout:n,userFirstName:o,userLastName:i,onProfileClick:c})=>{const u=er(),m=fo(),g=()=>{u("/hub")},f=()=>{u("/hub")},y=()=>{u("/admin")},v=()=>{u("/admin/players")},S=()=>{u("/platform-admin")},w=()=>{u("/dues-tracker")},x=()=>{n&&n(),u("/")},k=m.pathname==="/guest/ladder"||m.pathname==="/ladder"||a==="Ladder of Legends";return e.createElement("div",{className:`hub-navigation ${k?"ladder-app":""}`},e.createElement("div",{className:"nav-content"},e.createElement("div",{className:"nav-left",style:{display:"flex",alignItems:"center",justifyContent:"center",flex:"0 0 auto",order:1}},e.createElement("div",{className:`hub-brand ${o?"hub-brand-clickable":""}`,onClick:o?g:void 0,style:{cursor:o?"pointer":"default"}},e.createElement("img",{src:lS,alt:"8-ball",className:"nav-ball"}),"Front Range",e.createElement("img",{src:Kp,alt:"9-ball",className:"nav-ball"}),"Pool Hub",e.createElement("img",{src:Xi,alt:"10-ball",className:"nav-ball"}))),e.createElement("div",{className:"nav-center",style:{order:2}},e.createElement("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%"}},e.createElement("span",{className:"app-title",style:{color:"white",fontWeight:"bold",textAlign:"center",textShadow:m.pathname==="/guest/ladder"||m.pathname==="/ladder"||a==="Ladder of Legends"?"0 0 20px rgba(107, 70, 193, 0.5) !important":"0 0 20px rgba(229, 62, 62, 0.5)",margin:0,padding:0,display:"block",lineHeight:"1.2",fontFamily:"inherit"}},!o&&(m.pathname==="/"||m.pathname==="/login")?"THE HUB - Login":m.pathname==="/guest/ladder"?"Ladder of Legends":m.pathname==="/hub"?"Front Range Pool":a||"Front Range Pool"),o&&e.createElement("div",{style:{color:"white",fontSize:"1.5rem",fontWeight:"600",marginTop:"0.3rem",opacity:.9,lineHeight:"1.1"}},"Welcome to the Hub, ",o," ",i))),o?e.createElement("div",{className:"nav-right",style:{display:"flex",alignItems:"center",justifyContent:"center",flex:"0 0 auto",gap:"0.5rem",order:3}},r&&e.createElement(e.Fragment,null,e.createElement("button",{onClick:v,className:"admin-btn"},"👥 Players"),e.createElement("button",{onClick:w,className:"admin-btn"},"💰 Dues"),e.createElement("button",{onClick:y,className:"admin-btn"},"⚙️ Admin")),t&&e.createElement("button",{onClick:S,className:"super-admin-btn"},"🔧 Platform Admin"),e.createElement("button",{onClick:c,className:"profile-btn"},"👤 Profile"),e.createElement("button",{onClick:f,className:"switch-app-btn"},"🔄 Switch App"),e.createElement("button",{onClick:x,className:"logout-btn"},"🚪 Logout")):e.createElement("div",{className:"nav-right",style:{display:"flex",alignItems:"center",justifyContent:"center",flex:"0 0 auto",order:3}},e.createElement("div",{className:"login-nav-info",style:{display:"none"}},"🎯  Front Range Pool Hub"))))},_r=({appName:a,children:r})=>(h.useEffect(()=>{a&&window.dispatchEvent(new CustomEvent("appNameChange",{detail:a}))},[a]),r),p$=(a,r={})=>{const t=a.trim().split(`
`),n=t[0].split(",").map(c=>c.trim().replace(/"/g,"")),o={position:"Position",firstName:"First Name",lastName:"Last Name",name:"Name",email:"Email",fargoRate:"FargoRate",...r},i=[];for(let c=1;c<t.length;c++){const u=t[c].split(",").map(g=>g.trim().replace(/"/g,"")),m={};n.forEach((g,f)=>{const y=u[f];let v=null;for(const[S,w]of Object.entries(o))if(g.toLowerCase()===w.toLowerCase()){v=S;break}if(v)switch(v){case"position":case"fargoRate":m[v]=parseInt(y)||0;break;case"firstName":case"lastName":case"email":m[v]=y||"";break;case"name":const S=y.split(" ");m.firstName=S[0]||"",m.lastName=S.slice(1).join(" ")||"";break;default:m[v]=y}}),m.email&&i.push(m)}return i},f$=()=>`Position,Name,Email,FargoRate
1,John Doe,john@example.com,485
2,Jane Smith,jane@example.com,472
3,Bob Johnson,bob@example.com,458`,g$=a=>{const r={valid:[],errors:[]};return a.forEach((t,n)=>{const o=[];t.email||o.push("Email is required"),!t.firstName&&!t.name&&o.push("Name is required"),t.email&&!h$(t.email)&&o.push("Invalid email format"),t.fargoRate&&(t.fargoRate<0||t.fargoRate>9999)&&o.push("FargoRate must be between 0 and 9999"),o.length>0?r.errors.push({row:n+1,player:t,errors:o}):r.valid.push(t)}),r},h$=a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),y$=({userEmail:a,userPin:r})=>{var ct,Ot,Zt,ft,Ft,ra,Wt,he,bt;const t="front-range-pool-hub",[n,o]=h.useState("499-under"),[i,c]=h.useState([]),[u,m]=h.useState(""),[g,f]=h.useState("json"),[y,v]=h.useState(!1),[S,w]=h.useState(""),[x,k]=h.useState(!1),[E,I]=h.useState({player1Id:"",player1Name:"",player1Position:"",player2Id:"",player2Name:"",player2Position:"",winnerId:"",score:"",matchDate:new Date().toISOString().split("T")[0],matchFormat:"best-of-5",location:"",notes:""}),[M,N]=h.useState([]),[_,P]=h.useState(!1),[B,R]=h.useState(null),[W,L]=h.useState(!1),[F,j]=h.useState({}),[J,Y]=h.useState(!1),[D,A]=h.useState(null),U=[{name:"499-under",displayName:"499 & Under"},{name:"500-549",displayName:"500-549"},{name:"550-plus",displayName:"550+"}];h.useEffect(()=>{K()},[n]);const K=async()=>{try{v(!0);const $=await fetch(`${de}/api/ladder/admin/${n}`);if($.ok){const ye=await $.json();c(ye)}else w("Failed to load ladder data")}catch($){console.error("Error loading ladder data:",$),w("Error loading ladder data")}finally{v(!1)}},X=async()=>{try{v(!0),w("");let $;if(g==="csv")try{const ce=p$(u),ze=g$(ce);if(ze.errors.length>0){w(`Validation errors found: ${ze.errors.length} errors. Please check your data.`);return}$=ze.valid}catch{w("Invalid CSV format. Please check your data.");return}else try{$=JSON.parse(u)}catch{w("Invalid JSON format. Please check your data.");return}const ye=await fetch(`${de}/api/ladder/import`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ladderData:$,ladderName:n})}),V=await ye.json();ye.ok?(w(`Import completed! Imported: ${V.results.imported}, Skipped: ${V.results.skipped}`),m(""),K()):w(`Import failed: ${V.error}`)}catch($){console.error("Error importing data:",$),w("Error importing data")}finally{v(!1)}},O=async()=>{try{v(!0),w("");const $=i.map((ce,ze)=>({email:ce.email,position:ze+1})),ye=await fetch(`${de}/api/ladder/update-positions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ladderName:n,positions:$})}),V=await ye.json();ye.ok?(w(`Positions updated! Updated: ${V.results.updated}`),K()):w(`Update failed: ${V.error}`)}catch($){console.error("Error updating positions:",$),w("Error updating positions")}finally{v(!1)}},Q=()=>{const $=[["Position","Name","Email","FargoRate","Status"],...i.map(ze=>[ze.position,`${ze.firstName} ${ze.lastName}`,ze.email,ze.fargoRate,ze.isActive?"Active":"Inactive"])].map(ze=>ze.join(",")).join(`
`),ye=new Blob([$],{type:"text/csv"}),V=window.URL.createObjectURL(ye),ce=document.createElement("a");ce.href=V,ce.download=`${n}-ladder.csv`,ce.click(),window.URL.revokeObjectURL(V)},ne=()=>{const $=`${de.replace("/api","")}/static/fargo-updater.html`;window.open($,"_blank","width=1200,height=800,scrollbars=yes,resizable=yes")},T=$=>{const{name:ye,value:V}=$.target;I(ce=>({...ce,[ye]:V}))},re=$=>{const ye=$.target.value,V=i.find(ce=>ce._id===ye);V&&I(ce=>({...ce,player1Id:ye,player1Name:`${V.firstName} ${V.lastName}`,player1Position:V.position}))},G=$=>{const ye=$.target.value,V=i.find(ce=>ce._id===ye);V&&I(ce=>({...ce,player2Id:ye,player2Name:`${V.firstName} ${V.lastName}`,player2Position:V.position}))},se=$=>{const ye=$.target.value;I(V=>({...V,winnerId:ye}))},pe=async $=>{if($.preventDefault(),!E.player1Id||!E.player2Id||!E.winnerId){w("Please select both players and a winner");return}if(E.player1Id===E.player2Id){w("Players must be different");return}try{v(!0),w("");const ye=await fetch(`${de}/api/ladder/${t}/ladders/${n}/matches`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...E,matchDate:new Date(E.matchDate).toISOString()})}),V=await ye.json();ye.ok?(w(`Match result recorded successfully! ${V.message}`),k(!1),I({player1Id:"",player1Name:"",player1Position:"",player2Id:"",player2Name:"",player2Position:"",winnerId:"",score:"",matchDate:new Date().toISOString().split("T")[0],matchFormat:"best-of-5",location:"",notes:""}),K()):w(`Match recording failed: ${V.message||V.error}`)}catch(ye){console.error("Error recording match result:",ye),w("Error recording match result")}finally{v(!1)}},Se=async()=>{try{v(!0);const $=await fetch(`${de}/api/ladder/${t}/ladders/${n}/matches`);if($.ok){const ye=await $.json();N(ye.matches||[])}else w("Failed to load match history")}catch($){console.error("Error loading match history:",$),w("Error loading match history")}finally{v(!1)}},at=async $=>{var ye;try{const V=await fetch(`${de}/api/ladder/${t}/ladders/${n}/matches/${$.id}`);if(V.ok){const ce=await V.json();R(ce.match),j({winner:((ye=ce.match.winner)==null?void 0:ye.id)||"",score:ce.match.score||"",notes:ce.match.notes||"",adminNotes:ce.match.adminNotes||"",completedDate:ce.match.completedDate?new Date(ce.match.completedDate).toISOString().split("T")[0]:"",scheduledDate:ce.match.scheduledDate?new Date(ce.match.scheduledDate).toISOString().split("T")[0]:"",venue:ce.match.venue||"",entryFee:ce.match.entryFee||0,raceLength:ce.match.raceLength||5,gameType:ce.match.gameType||"8-ball",tableSize:ce.match.tableSize||"7-foot",status:ce.match.status||"scheduled"}),L(!0)}else w("Failed to load match details")}catch(V){console.error("Error loading match details:",V),w("Error loading match details")}},be=$=>{A($),Y(!0)},Je=async()=>{if(D)try{v(!0);const $=await fetch(`${de}/api/ladder/${t}/ladders/${n}/matches/${D.id}`,{method:"DELETE"});if($.ok)w("Match deleted successfully"),await Se(),await K();else{const ye=await $.json();w(`Failed to delete match: ${ye.message||"Unknown error"}`)}}catch($){console.error("Error deleting match:",$),w("Error deleting match")}finally{v(!1),Y(!1),A(null)}},nt=async $=>{if($.preventDefault(),!!B)try{v(!0);const ye=await fetch(`${de}/api/ladder/${t}/ladders/${n}/matches/${B.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(ye.ok)w("Match updated successfully"),L(!1),R(null),await Se(),await K();else{const V=await ye.json();w(`Failed to update match: ${V.message||"Unknown error"}`)}}catch(ye){console.error("Error updating match:",ye),w("Error updating match")}finally{v(!1)}},Xe=$=>{const{name:ye,value:V}=$.target;j(ce=>({...ce,[ye]:V}))};return e.createElement("div",{className:"ladder-management"},e.createElement("div",{className:"management-header"},e.createElement("h2",null,"Ladder Management"),e.createElement("p",null,"Import and manage ladder data from Google Sheets")),e.createElement("div",{className:"ladder-selector"},e.createElement("label",null,"Select Ladder:"),e.createElement("select",{value:n,onChange:$=>o($.target.value)},U.map($=>e.createElement("option",{key:$.name,value:$.name},$.displayName)))),e.createElement("div",{className:"import-section"},e.createElement("h3",null,"Import Data from Google Sheets"),e.createElement("div",{className:"import-instructions"},e.createElement("p",null,e.createElement("strong",null,"Instructions:")),e.createElement("ol",null,e.createElement("li",null,"Export your Google Sheet as CSV"),e.createElement("li",null,"Choose your import format below"),e.createElement("li",null,"Paste the data and click Import")),e.createElement("div",{className:"import-mode-selector"},e.createElement("label",null,e.createElement("input",{type:"radio",value:"csv",checked:g==="csv",onChange:$=>f($.target.value)}),"CSV Format (from Google Sheets)"),e.createElement("label",null,e.createElement("input",{type:"radio",value:"json",checked:g==="json",onChange:$=>f($.target.value)}),"JSON Format")),g==="csv"?e.createElement("div",null,e.createElement("p",null,e.createElement("strong",null,"Expected CSV format:")),e.createElement("pre",null,f$()),e.createElement("p",null,"Supported columns: Position, Name, Email, FargoRate")):e.createElement("div",null,e.createElement("p",null,e.createElement("strong",null,"Expected JSON format:")),e.createElement("pre",null,`[
  {
    "firstName": "John",
    "lastName": "Doe", 
    "email": "john@example.com",
    "fargoRate": 485,
    "position": 1
  }
]`))),e.createElement("div",{className:"import-form"},e.createElement("textarea",{value:u,onChange:$=>m($.target.value),placeholder:g==="csv"?"Paste your CSV data here...":"Paste your JSON data here...",rows:10}),e.createElement("button",{onClick:X,disabled:y||!u.trim(),className:"import-btn"},y?"Importing...":"Import Data"))),e.createElement("div",{className:"ladder-data-section"},e.createElement("div",{className:"section-header"},e.createElement("h3",null,"Current ",(ct=U.find($=>$.name===n))==null?void 0:ct.displayName," Ladder"),e.createElement("div",{className:"action-buttons"},e.createElement("button",{onClick:Q,className:"export-btn"},"Export to CSV"),e.createElement("button",{onClick:O,disabled:y,className:"update-btn"},y?"Updating...":"Update Positions"),e.createElement("button",{onClick:ne,className:"fargo-btn"},"🎯 Update Fargo Ratings"))),S&&e.createElement("div",{className:`message ${S.includes("Error")?"error":"success"}`},S),y?e.createElement("div",{className:"loading"},"Loading ladder data..."):e.createElement("div",{className:"ladder-table"},e.createElement("table",null,e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Position"),e.createElement("th",null,"Name"),e.createElement("th",null,"Email"),e.createElement("th",null,"FargoRate"),e.createElement("th",null,"Status"),e.createElement("th",null,"Immunity"))),e.createElement("tbody",null,i.map(($,ye)=>e.createElement("tr",{key:$._id||ye},e.createElement("td",null,$.position),e.createElement("td",null,$.firstName," ",$.lastName),e.createElement("td",null,$.email),e.createElement("td",null,$.fargoRate),e.createElement("td",null,e.createElement("span",{className:`status ${$.isActive?"active":"inactive"}`},$.isActive?"Active":"Inactive")),e.createElement("td",null,$.immunityUntil?Jl($.immunityUntil):"None"))))),i.length===0&&e.createElement("div",{className:"no-data"},"No players found in this ladder. Import some data to get started!"))),e.createElement("div",{className:"match-management-section"},e.createElement("div",{className:"section-header"},e.createElement("h3",null,"Match Result Management"),e.createElement("div",{className:"action-buttons"},e.createElement("button",{onClick:()=>k(!0),className:"add-match-btn",disabled:i.length<2},"Report Match Result"),e.createElement("button",{onClick:()=>{P(!_),_||Se()},className:"view-history-btn"},_?"Hide Match History":"View Match History"))),i.length<2&&e.createElement("div",{className:"message warning"},"Need at least 2 players on the ladder to report match results."),x&&e.createElement("div",{className:"match-form-overlay"},e.createElement("div",{className:"match-form"},e.createElement("h4",null,"Report Match Result"),e.createElement("form",{onSubmit:pe},e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Player 1:"),e.createElement("select",{value:E.player1Id,onChange:re,required:!0},e.createElement("option",{value:""},"Select Player 1"),i.map($=>e.createElement("option",{key:$._id,value:$._id},"#",$.position," - ",$.firstName," ",$.lastName)))),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Player 2:"),e.createElement("select",{value:E.player2Id,onChange:G,required:!0},e.createElement("option",{value:""},"Select Player 2"),i.map($=>e.createElement("option",{key:$._id,value:$._id},"#",$.position," - ",$.firstName," ",$.lastName))))),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Winner:"),e.createElement("select",{value:E.winnerId,onChange:se,required:!0},e.createElement("option",{value:""},"Select Winner"),E.player1Id&&e.createElement("option",{value:E.player1Id},E.player1Name),E.player2Id&&e.createElement("option",{value:E.player2Id},E.player2Name))),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Score:"),e.createElement("input",{type:"text",name:"score",value:E.score,onChange:T,placeholder:"e.g., 3-1, 5-3",required:!0}))),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Match Date:"),e.createElement("input",{type:"date",name:"matchDate",value:E.matchDate,onChange:T,required:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Match Format:"),e.createElement("select",{name:"matchFormat",value:E.matchFormat,onChange:T,required:!0},e.createElement("option",{value:"best-of-3"},"Best of 3"),e.createElement("option",{value:"best-of-5"},"Best of 5"),e.createElement("option",{value:"best-of-7"},"Best of 7"),e.createElement("option",{value:"best-of-9"},"Best of 9")))),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Location:"),e.createElement("input",{type:"text",name:"location",value:E.location,onChange:T,placeholder:"Pool hall or venue"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Notes:"),e.createElement("input",{type:"text",name:"notes",value:E.notes,onChange:T,placeholder:"Optional match notes"}))),e.createElement("div",{className:"form-buttons"},e.createElement("button",{type:"submit",disabled:y,className:"submit-btn"},y?"Recording...":"Record Match Result"),e.createElement("button",{type:"button",onClick:()=>k(!1),className:"cancel-btn"},"Cancel"))))),W&&B&&e.createElement("div",{className:"modal-overlay"},e.createElement("div",{className:"modal-content"},e.createElement("h3",null,"Edit Match"),e.createElement("form",{onSubmit:nt},e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Player 1:"),e.createElement("input",{type:"text",value:((Ot=B.player1)==null?void 0:Ot.name)||"",disabled:!0})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Player 2:"),e.createElement("input",{type:"text",value:((Zt=B.player2)==null?void 0:Zt.name)||"",disabled:!0}))),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Winner:"),e.createElement("select",{name:"winner",value:F.winner,onChange:Xe},e.createElement("option",{value:""},"Select Winner"),e.createElement("option",{value:(ft=B.player1)==null?void 0:ft.id},(Ft=B.player1)==null?void 0:Ft.name),e.createElement("option",{value:(ra=B.player2)==null?void 0:ra.id},(Wt=B.player2)==null?void 0:Wt.name))),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Score:"),e.createElement("input",{type:"text",name:"score",value:F.score,onChange:Xe,placeholder:"e.g., 3-1"}))),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Status:"),e.createElement("select",{name:"status",value:F.status,onChange:Xe},e.createElement("option",{value:"scheduled"},"Scheduled"),e.createElement("option",{value:"completed"},"Completed"),e.createElement("option",{value:"cancelled"},"Cancelled"),e.createElement("option",{value:"forfeited"},"Forfeited"))),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Completed Date:"),e.createElement("input",{type:"date",name:"completedDate",value:F.completedDate,onChange:Xe}))),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Venue:"),e.createElement("input",{type:"text",name:"venue",value:F.venue,onChange:Xe,placeholder:"Pool hall or venue"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Entry Fee:"),e.createElement("input",{type:"number",name:"entryFee",value:F.entryFee,onChange:Xe,min:"0",step:"0.01"}))),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Race Length:"),e.createElement("input",{type:"number",name:"raceLength",value:F.raceLength,onChange:Xe,min:"1"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Game Type:"),e.createElement("select",{name:"gameType",value:F.gameType,onChange:Xe},e.createElement("option",{value:"8-ball"},"8-ball"),e.createElement("option",{value:"9-ball"},"9-ball"),e.createElement("option",{value:"10-ball"},"10-ball"),e.createElement("option",{value:"mixed"},"Mixed")))),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Table Size:"),e.createElement("select",{name:"tableSize",value:F.tableSize,onChange:Xe},e.createElement("option",{value:"7-foot"},"7-foot"),e.createElement("option",{value:"9-foot"},"9-foot"))),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Scheduled Date:"),e.createElement("input",{type:"date",name:"scheduledDate",value:F.scheduledDate,onChange:Xe}))),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Notes:"),e.createElement("textarea",{name:"notes",value:F.notes,onChange:Xe,placeholder:"Match notes",rows:"3"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Admin Notes:"),e.createElement("textarea",{name:"adminNotes",value:F.adminNotes,onChange:Xe,placeholder:"Admin-only notes",rows:"3"}))),e.createElement("div",{className:"form-buttons"},e.createElement("button",{type:"submit",disabled:y,className:"submit-btn"},y?"Updating...":"Update Match"),e.createElement("button",{type:"button",onClick:()=>{L(!1),R(null)},className:"cancel-btn"},"Cancel"))))),J&&D&&e.createElement("div",{className:"modal-overlay"},e.createElement("div",{className:"modal-content"},e.createElement("h3",null,"Confirm Delete Match"),e.createElement("p",null,"Are you sure you want to delete this match?"),e.createElement("div",{className:"match-details"},e.createElement("p",null,e.createElement("strong",null,"Players:")," ",(he=D.winner)==null?void 0:he.name," vs ",(bt=D.loser)==null?void 0:bt.name),e.createElement("p",null,e.createElement("strong",null,"Score:")," ",D.score),e.createElement("p",null,e.createElement("strong",null,"Date:")," ",Jl(D.matchDate))),e.createElement("p",{className:"warning-text"},"⚠️ This action cannot be undone and will reverse any position changes."),e.createElement("div",{className:"form-buttons"},e.createElement("button",{onClick:Je,disabled:y,className:"delete-btn"},y?"Deleting...":"Delete Match"),e.createElement("button",{onClick:()=>{Y(!1),A(null)},className:"cancel-btn"},"Cancel")))),_&&e.createElement("div",{className:"match-history-section"},e.createElement("h4",null,"Match History"),M.length===0?e.createElement("div",{className:"no-data"},"No matches recorded yet."):e.createElement("div",{className:"match-history-table"},e.createElement("table",null,e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Date"),e.createElement("th",null,"Winner"),e.createElement("th",null,"Loser"),e.createElement("th",null,"Score"),e.createElement("th",null,"Format"),e.createElement("th",null,"Location"),e.createElement("th",null,"Status"),e.createElement("th",null,"Actions"))),e.createElement("tbody",null,M.map(($,ye)=>e.createElement("tr",{key:$.id||ye},e.createElement("td",null,Jl($.matchDate)),e.createElement("td",null,e.createElement("strong",null,$.winner.name)," (#",$.winner.position,")"),e.createElement("td",null,$.loser.name," (#",$.loser.position,")"),e.createElement("td",null,$.score),e.createElement("td",null,$.matchFormat||"N/A"),e.createElement("td",null,$.location||"N/A"),e.createElement("td",null,e.createElement("span",{className:`status ${$.verificationStatus}`},$.verificationStatus)),e.createElement("td",null,e.createElement("div",{className:"match-actions"},e.createElement("button",{className:"edit-btn",onClick:()=>at($),title:"Edit Match"},"✏️"),e.createElement("button",{className:"delete-btn",onClick:()=>be($),title:"Delete Match"},"🗑️")))))))))))},b$="_container_v5qw2_1",v$="_header_v5qw2_27",E$="_headerContent_v5qw2_45",x$="_ladderSelector_v5qw2_59",w$="_ladderSelect_v5qw2_59",S$="_headerButtons_v5qw2_125",C$="_addButton_v5qw2_149",N$="_createMatchButton_v5qw2_181",_$="_pendingMatchesButton_v5qw2_225",k$="_matchButton_v5qw2_257",I$="_historyButton_v5qw2_301",M$="_formOverlay_v5qw2_333",A$="_form_v5qw2_333",D$="_formRow_v5qw2_513",R$="_formGroup_v5qw2_527",T$="_checkboxes_v5qw2_595",P$="_formButtons_v5qw2_633",L$="_playersList_v5qw2_693",B$="_laddersContainer_v5qw2_703",z$="_ladderSection_v5qw2_715",O$="_ladderTitle_v5qw2_729",F$="_noPlayers_v5qw2_749",W$="_table_v5qw2_771",U$="_status_v5qw2_829",$$="_active_v5qw2_847",j$="_inactive_v5qw2_857",H$="_pending_v5qw2_225",Y$="_matchType_v5qw2_879",q$="_challenge_v5qw2_899",G$="_smackdown_v5qw2_911",Z$="_smackback_v5qw2_923",V$="_editButton_v5qw2_935",Q$="_deleteButton_v5qw2_937",J$="_reportResultButton_v5qw2_1003",X$="_moreOptionsButton_v5qw2_1039",K$="_pendingMatchesSection_v5qw2_1075",ej="_pendingMatchesTable_v5qw2_1099",tj="_matchHistorySection_v5qw2_1159",aj="_matchHistoryTable_v5qw2_1183",nj="_noData_v5qw2_1241",rj="_messageDisplay_v5qw2_1383",oj="_error_v5qw2_1405",lj="_matchActions_v5qw2_1419",sj="_editPendingMatchForm_v5qw2_1519",ij="_submitButton_v5qw2_1641",cj="_cancelButton_v5qw2_1685",dj="_deleteConfirmModal_v5qw2_1721",uj="_matchDetails_v5qw2_1743",mj="_warningText_v5qw2_1773",Ze={container:b$,header:v$,headerContent:E$,ladderSelector:x$,ladderSelect:w$,headerButtons:S$,addButton:C$,createMatchButton:N$,pendingMatchesButton:_$,matchButton:k$,historyButton:I$,formOverlay:M$,form:A$,formRow:D$,formGroup:R$,checkboxes:T$,formButtons:P$,playersList:L$,laddersContainer:B$,ladderSection:z$,ladderTitle:O$,noPlayers:F$,table:W$,status:U$,active:$$,inactive:j$,pending:H$,matchType:Y$,challenge:q$,smackdown:G$,smackback:Z$,editButton:V$,deleteButton:Q$,reportResultButton:J$,moreOptionsButton:X$,pendingMatchesSection:K$,pendingMatchesTable:ej,matchHistorySection:tj,matchHistoryTable:aj,noData:nj,messageDisplay:rj,error:oj,matchActions:lj,editPendingMatchForm:sj,submitButton:ij,cancelButton:cj,deleteConfirmModal:dj,matchDetails:uj,warningText:mj};function pj(){var Rr,hn,Xt,ga,Nn,dr,gr,_n;const a="front-range-pool-hub",[r,t]=h.useState([]),[n,o]=h.useState([]),[i,c]=h.useState(!0),[u,m]=h.useState(null),[g,f]=h.useState(!1),[y,v]=h.useState({firstName:"",lastName:"",email:"",phone:"",fargoRate:"",location:"",isActive:!0,ladderName:"499-under"}),[S,w]=h.useState(!1),[x,k]=h.useState({matchId:"",challengerId:"",challengerName:"",challengerPosition:"",defenderId:"",defenderName:"",defenderPosition:"",winnerId:"",score:"",matchDate:gd(),matchFormat:"race-to-5",location:"",notes:""}),[E,I]=h.useState([]),[M,N]=h.useState(!1),[_,P]=h.useState(!1),[B,R]=h.useState({matchType:"challenge",challengerId:"",defenderId:"",matchFormat:"race-to-5",proposedDate:gd(),location:"",notes:""}),[W,L]=h.useState([]),[F,j]=h.useState(!1),[J,Y]=h.useState(!1),[D,A]=h.useState("499-under"),[U,K]=h.useState(!1),[X,O]=h.useState(null),[Q,ne]=h.useState(!1),[T,re]=h.useState({}),[G,se]=h.useState(!1),[pe,Se]=h.useState(null),[at,be]=h.useState(""),[Je,nt]=h.useState(!1),[Xe,ct]=h.useState([]),[Ot,Zt]=h.useState(0),ft=()=>{setTimeout(()=>{be("")},5e3)},Ft=Z=>Jr.createPortal(Z,document.body),ra=async()=>{try{const Pe=await(await fetch(`${de}/api/locations`)).json();Pe.success&&Array.isArray(Pe.locations)?(t(Pe.locations),console.log(`Loaded ${Pe.locations.length} locations from backend`)):(console.error("Invalid locations response format:",Pe),t([]))}catch(Z){console.error("Error fetching locations:",Z),t([])}},Wt=async()=>{try{const Pe=await(await fetch(`${de}/api/ladder/ladders/${D}/players`)).json();Array.isArray(Pe)?(o(Pe),console.log(`Loaded ${Pe.length} ladder players from ladder endpoint`)):(console.error("Invalid response format:",Pe),o([]))}catch(Z){console.error("Error fetching ladder players:",Z),o([])}finally{c(!1)}};h.useEffect(()=>{window.scrollTo(0,0),ra(),Wt()},[]);const he=Z=>{const{name:Pe,value:Ke,type:mt,checked:Kt}=Z.target;v(ba=>({...ba,[Pe]:mt==="checkbox"?Kt:Ke}))},bt=async Z=>{Z.preventDefault();try{const Ke=await(await fetch(`${de}/api/ladder/player/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)})).json();Ke.success?(f(!1),v({firstName:"",lastName:"",email:"",phone:"",fargoRate:"",location:"",isActive:!0,ladderName:"499-under"}),Wt(),alert("Ladder player added successfully!")):alert("Error adding ladder player: "+(Ke.error||Ke.message))}catch(Pe){console.error("Error adding ladder player:",Pe),alert("Error adding ladder player")}},$=async Z=>{Z.preventDefault();try{const Ke=await(await fetch(`${de}/api/ladder/player/${u._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:y.email,firstName:y.firstName,lastName:y.lastName,isActive:y.isActive,fargoRate:y.fargoRate})})).json();Ke.success?(m(null),v({name:"",email:"",phone:"",skillLevel:"",location:"",isActive:!0}),Wt(),alert("Ladder player updated successfully!")):alert("Error updating ladder player: "+Ke.message)}catch(Pe){console.error("Error updating ladder player:",Pe),alert("Error updating ladder player")}},ye=Z=>{var Pe;m(Z),v({firstName:Z.firstName||"",lastName:Z.lastName||"",email:((Pe=Z.unifiedAccount)==null?void 0:Pe.email)||"",phone:Z.phone||"",fargoRate:Z.fargoRate||"",location:Z.location||"",isActive:Z.isActive!==!1,ladderName:Z.ladderName||"499-under"})},V=async Z=>{if(confirm("Are you sure you want to remove this player from the ladder?"))try{const Ke=await(await fetch(`${de}/api/ladder/player/${Z}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ladderName:"General"})})).json();Ke.success?(Wt(),alert("Player removed from ladder successfully!")):alert("Error removing player: "+Ke.message)}catch(Pe){console.error("Error removing ladder player:",Pe),alert("Error removing ladder player")}},ce=Z=>{const{name:Pe,value:Ke}=Z.target;k(mt=>({...mt,[Pe]:Ke}))},ze=Z=>{const Pe=Z.target.value,Ke=n.find(mt=>mt._id===Pe);Ke&&k(mt=>({...mt,player1Id:Pe,player1Name:`${Ke.firstName} ${Ke.lastName}`,player1Position:Ke.position}))},Re=Z=>{const Pe=Z.target.value,Ke=n.find(mt=>mt._id===Pe);Ke&&k(mt=>({...mt,player2Id:Pe,player2Name:`${Ke.firstName} ${Ke.lastName}`,player2Position:Ke.position}))},Fe=Z=>{const Pe=Z.target.value;k(Ke=>({...Ke,winnerId:Pe}))},We=Z=>{var Pe,Ke,mt,Kt,ba,La,sa,tr,qn,Ra,En,kn,xn,Ln,Bn,zn,On,wn,ue,Ge,$e,Me,je,ge,rt,ht,_t,le;k({matchId:Z._id,player1Id:((Pe=Z.challenger)==null?void 0:Pe._id)||((Ke=Z.player1)==null?void 0:Ke._id)||"",player1Name:`${((mt=Z.challenger)==null?void 0:mt.firstName)||((Kt=Z.player1)==null?void 0:Kt.firstName)} ${((ba=Z.challenger)==null?void 0:ba.lastName)||((La=Z.player1)==null?void 0:La.lastName)}`,challengerId:((sa=Z.challenger)==null?void 0:sa._id)||((tr=Z.player1)==null?void 0:tr._id)||"",challengerName:`${((qn=Z.challenger)==null?void 0:qn.firstName)||((Ra=Z.player1)==null?void 0:Ra.firstName)} ${((En=Z.challenger)==null?void 0:En.lastName)||((kn=Z.player1)==null?void 0:kn.lastName)}`,challengerPosition:((xn=Z.challenger)==null?void 0:xn.position)||((Ln=Z.player1)==null?void 0:Ln.position),player2Id:((Bn=Z.defender)==null?void 0:Bn._id)||((zn=Z.player2)==null?void 0:zn._id)||"",player2Name:`${((On=Z.defender)==null?void 0:On.firstName)||((wn=Z.player2)==null?void 0:wn.firstName)} ${((ue=Z.defender)==null?void 0:ue.lastName)||((Ge=Z.player2)==null?void 0:Ge.lastName)}`,defenderId:(($e=Z.defender)==null?void 0:$e._id)||((Me=Z.player2)==null?void 0:Me._id)||"",defenderName:`${((je=Z.defender)==null?void 0:je.firstName)||((ge=Z.player2)==null?void 0:ge.firstName)} ${((rt=Z.defender)==null?void 0:rt.lastName)||((ht=Z.player2)==null?void 0:ht.lastName)}`,defenderPosition:((_t=Z.defender)==null?void 0:_t.position)||((le=Z.player2)==null?void 0:le.position),winnerId:"",score:"",matchDate:Z.scheduledDate?a0(new Date(Z.scheduledDate)):gd(),matchFormat:Z.matchFormat||Z.raceLength||"best-of-5",location:Z.location||Z.venue||"",notes:Z.notes||""}),w(!0)},tt=async Z=>{if(Z.preventDefault(),!x.player1Id||!x.player2Id||!x.winnerId){alert("Please select both players and a winner");return}if(x.player1Id===x.player2Id){alert("Players must be different");return}try{c(!0);const Pe=x.matchId,Ke=Pe?`${de}/api/ladder/${a}/ladders/${D}/matches/${x.matchId}`:`${de}/api/ladder/${a}/ladders/${D}/matches`,mt=Pe?"PUT":"POST",Kt=Pe?{winner:x.winnerId,score:x.score,notes:x.notes,completedDate:new Date().toISOString(),reportedBy:x.winnerId}:{challengerId:x.player1Id,defenderId:x.player2Id,matchType:"challenge",proposedDate:new Date(x.matchDate).toISOString(),matchFormat:x.matchFormat,location:x.location,notes:x.notes},ba=await fetch(Ke,{method:mt,headers:{"Content-Type":"application/json"},body:JSON.stringify(Kt)}),La=await ba.json();ba.ok?(alert(`Match result recorded successfully! ${La.message}`),w(!1),k({player1Id:"",player1Name:"",player1Position:"",player2Id:"",player2Name:"",player2Position:"",winnerId:"",score:"",matchDate:new Date().toISOString().split("T")[0],matchFormat:"race-to-5",location:"",notes:""}),Wt()):alert(`Match recording failed: ${La.message||La.error}`)}catch(Pe){console.error("Error recording match result:",Pe),alert("Error recording match result")}finally{c(!1)}},me=async()=>{try{c(!0),console.log("🔍 Loading match history for ladder:",D);const Z=`${de}/api/ladder/${a}/ladders/${D}/matches`;console.log("🔍 API URL:",Z);const Pe=await fetch(Z);if(console.log("🔍 Response status:",Pe.status),Pe.ok){const Ke=await Pe.json();console.log("🔍 Match history data:",Ke),I(Ke.matches||[])}else{const Ke=await Pe.text();console.error("🔍 API Error:",Pe.status,Ke),alert(`Failed to load match history: ${Pe.status} - ${Ke}`)}}catch(Z){console.error("Error loading match history:",Z),alert(`Error loading match history: ${Z.message}`)}finally{c(!1)}},Ce=async()=>{try{c(!0);const Z=await fetch(`${de}/api/ladder/${a}/ladders/${D}/matches?status=scheduled`);if(Z.ok){const Pe=await Z.json();console.log("Loaded pending matches:",Pe.matches),L(Pe.matches||[])}else alert("Failed to load pending matches")}catch(Z){console.error("Error loading pending matches:",Z),alert("Error loading pending matches")}finally{c(!1)}},_e=async Z=>{try{const Pe=await fetch(`${de}/api/ladder/${a}/ladders/${D}/matches?playerId=${Z}&limit=5`);return Pe.ok?!!((await Pe.json()).matches||[]).find(ba=>{var La,sa;return ba.status==="completed"&&ba.matchType==="smackdown"&&((La=ba.player2)==null?void 0:La._id)===Z&&((sa=ba.winner)==null?void 0:sa._id)===Z&&new Date(ba.completedDate)>new Date(Date.now()-7*24*60*60*1e3)}):!1}catch(Pe){return console.error("Error checking SmackBack eligibility:",Pe),!1}},Qe=async Z=>{if(Z.preventDefault(),!B.challengerId||!B.defenderId){alert("Please select both challenger and defender");return}if(B.challengerId===B.defenderId){alert("Challenger and defender must be different players");return}const Pe=n.find(mt=>mt._id===B.challengerId),Ke=n.find(mt=>mt._id===B.defenderId);if(Pe&&Ke){const mt=Pe.position||0,Kt=Ke.position||0;switch(B.matchType){case"challenge":if(mt<=Kt){alert("For Challenge Matches: Challenger must have a lower position number than defender");return}break;case"smackdown":if(mt>=Kt||Kt-mt>5){alert("For SmackDown Matches: Challenger must have a higher position number than defender (up to 5 positions below)");return}break;case"smackback":if(Kt!==1){alert("For SmackBack Matches: Can only challenge the player in 1st place");return}if(!await _e(B.challengerId)){alert("For SmackBack Matches: Challenger must have just won a SmackDown match as a defender within the last 7 days");return}break;case"defense":if(mt>=Kt){alert("For Defense Matches: Challenger must have a higher position number than defender");return}break;case"position":if(mt!==Kt){alert("For Position Matches: Both players must be at the same position");return}break;case"exhibition":break;default:alert("Please select a valid match type");return}}try{c(!0);const mt=await fetch(`${de}/api/ladder/${a}/ladders/${D}/matches`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...B,status:"scheduled",proposedDate:XU(B.proposedDate)})}),Kt=await mt.json();mt.ok?(alert("Match created successfully! Players can now play and report the result."),P(!1),R({matchType:"challenge",challengerId:"",defenderId:"",matchFormat:"race-to-5",proposedDate:gd(),location:"",notes:""}),Ce()):alert(`Match creation failed: ${Kt.message||Kt.error}`)}catch(mt){console.error("Error creating match:",mt),alert("Error creating match")}finally{c(!1)}},qe=Z=>{const{name:Pe,value:Ke}=Z.target;R(mt=>({...mt,[Pe]:Ke}))},He=Z=>{const Pe=Z.target.value;R(Ke=>({...Ke,challengerId:Pe}))},st=Z=>{const Pe=Z.target.value;R(Ke=>({...Ke,defenderId:Pe}))},Mt=()=>{const Z=`${de.replace("/api","")}/static/fargo-updater.html`;window.open(Z,"_blank","width=1200,height=800,scrollbars=yes,resizable=yes")},Jt=()=>{const Z=`${de.replace("/api","")}/static/ladder-promotion.html`;window.open(Z,"_blank","width=1200,height=800,scrollbars=yes,resizable=yes")},Yt=Z=>{O(Z),re({matchType:Z.matchType||"challenge",matchFormat:Z.matchFormat||"race-to-5",scheduledDate:Z.scheduledDate?a0(new Date(Z.scheduledDate)):Z.proposedDate?a0(new Date(Z.proposedDate)):"",location:Z.location||Z.venue||"",notes:Z.notes||"",entryFee:Z.entryFee||0,gameType:Z.gameType||"8-ball",tableSize:Z.tableSize||"7-foot"}),ne(!0)},ua=Z=>{Se(Z),se(!0)},ma=async()=>{if(pe)try{c(!0);const Z=pe._id||pe.id;console.log("Deleting match ID:",Z);const Pe=await fetch(`${de}/api/ladder/${a}/ladders/${D}/matches/${Z}`,{method:"DELETE"});if(Pe.ok)await Ce(),be("Pending match deleted successfully");else{const Ke=await Pe.json();be(`Failed to delete pending match: ${Ke.message||"Unknown error"}`)}}catch(Z){console.error("Error deleting pending match:",Z),be("Error deleting pending match")}finally{c(!1),se(!1),Se(null)}},Oa=async Z=>{if(Z.preventDefault(),!!X)try{c(!0);const Pe={scheduledDate:T.scheduledDate?new Date(T.scheduledDate+"T12:00:00").toISOString():null,venue:T.location||null,notes:T.notes||null,entryFee:T.entryFee||0,gameType:T.gameType||"8-ball",tableSize:T.tableSize||"7-foot"};console.log("Sending update data:",JSON.stringify(Pe,null,2)),console.log("Original form data:",JSON.stringify(T,null,2));const Ke=X._id||X.id;console.log("Editing match ID:",Ke);const mt=await fetch(`${de}/api/ladder/${a}/ladders/${D}/matches/${Ke}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Pe)});if(mt.ok){const Kt=await mt.json();console.log("Match update successful:",Kt),be("✅ Pending match updated successfully"),ft(),ne(!1),O(null),await Ce()}else{const Kt=await mt.json();console.error("Failed to update pending match:",JSON.stringify(Kt,null,2)),console.error("Response status:",mt.status),console.error("Response statusText:",mt.statusText),be(`❌ Failed to update pending match: ${Kt.message||"Unknown error"}`),ft()}}catch(Pe){console.error("Error updating pending match:",Pe),be("❌ Error updating pending match"),ft()}finally{c(!1)}},Pa=Z=>{const{name:Pe,value:Ke}=Z.target;re(mt=>({...mt,[Pe]:Ke}))},ln=async()=>{try{const Z=await fetch(`${de}/api/ladder/${a}/ladders/${D}/matches`);if(Z.ok){const Ke=(await Z.json()).matches.filter(mt=>mt.status==="completed"&&(!mt.lmsStatus||mt.lmsStatus==="not_entered"||mt.lmsStatus==="scheduled"));console.log("LMS Matches data:",Ke),Ke.length>0&&console.log("First match date data:",{completedDate:Ke[0].completedDate,scheduledDate:Ke[0].scheduledDate,completedDateType:typeof Ke[0].completedDate,scheduledDateType:typeof Ke[0].scheduledDate,fullMatch:Ke[0]}),ct(Ke),Zt(Date.now())}}catch(Z){console.error("Error loading LMS matches:",Z)}},Fa=async Z=>{try{(await fetch(`${de}/api/ladder/${a}/ladders/${D}/matches/${Z}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({lmsStatus:"scheduled",lmsScheduledAt:new Date().toISOString()})})).ok&&(be("✅ Match marked as scheduled in LMS"),ft(),await ln())}catch(Pe){console.error("Error updating LMS status:",Pe),be("❌ Error updating LMS status"),ft()}},cr=async Z=>{try{(await fetch(`${de}/api/ladder/${a}/ladders/${D}/matches/${Z}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({lmsStatus:"completed",lmsCompletedAt:new Date().toISOString()})})).ok&&(be("✅ Match marked as scored in LMS"),ft(),await ln())}catch(Pe){console.error("Error updating LMS status:",Pe),be("❌ Error updating LMS status"),ft()}};return i?e.createElement("div",{className:Ze.container},"Loading ladder players..."):e.createElement("div",{className:Ze.container},e.createElement("div",{className:Ze.header},e.createElement("h2",null,"Ladder Player Management"),e.createElement("div",{className:Ze.headerContent},e.createElement("div",{className:Ze.ladderSelector},e.createElement("label",{htmlFor:"ladderSelect"},"Select Ladder:"),e.createElement("select",{id:"ladderSelect",value:D,onChange:Z=>A(Z.target.value),className:Ze.ladderSelect},e.createElement("option",{value:"499-under"},"499 & Under"),e.createElement("option",{value:"500-549"},"500-549"),e.createElement("option",{value:"550-plus"},"550+"))),e.createElement("div",{className:Ze.headerButtons},e.createElement("button",{className:Ze.addButton,onClick:()=>{window.scrollTo(0,0),f(!0)}},"Add New Ladder Player"),e.createElement("button",{className:Ze.createMatchButton,onClick:()=>{window.scrollTo(0,0),P(!0)},disabled:n.filter(Z=>Z.ladderName===D).length<2},"Create Match"),e.createElement("button",{className:Ze.pendingMatchesButton,onClick:()=>{j(!0),Ce()}},"View Pending Matches"),e.createElement("button",{className:Ze.matchButton,onClick:()=>{window.scrollTo(0,0),w(!0)},disabled:n.filter(Z=>Z.ladderName===D).length<2},"Report Match Result"),e.createElement("button",{className:Ze.historyButton,onClick:()=>{N(!M),M||me()}},M?"Hide Match History":"View Match History"),e.createElement("button",{className:Ze.applicationsButton,onClick:()=>K(!0),style:{background:"linear-gradient(135deg, #ff6b6b, #ee5a24)",color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"bold",transition:"all 0.3s ease",margin:"5px"}},"🏆 View Pending Applications"),e.createElement("button",{onClick:Mt,style:{background:"linear-gradient(135deg, #ff6b6b, #ee5a24)",color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"bold",transition:"all 0.3s ease",margin:"5px"}},"🎯 Update Fargo Ratings"),e.createElement("button",{onClick:Jt,style:{background:"linear-gradient(135deg, #28a745, #20c997)",color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"bold",transition:"all 0.3s ease",margin:"5px"}},"⬆️ Promote Players"),e.createElement("button",{onClick:()=>{nt(!0),ct([]),setTimeout(()=>{ln()},100)},style:{background:"linear-gradient(135deg, #6c5ce7, #a29bfe)",color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"bold",transition:"all 0.3s ease",margin:"5px"}},"📊 LMS Tracking")))),at&&e.createElement("div",{className:Ze.messageDisplay},at),g&&Ft(e.createElement(Bt,{open:g,onClose:()=>f(!1),title:"Add New Ladder Player",maxWidth:"600px",maxHeight:"90vh"},e.createElement("form",{onSubmit:bt},e.createElement("input",{type:"text",name:"firstName",placeholder:"First Name",value:y.firstName,onChange:he,required:!0}),e.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name",value:y.lastName,onChange:he,required:!0}),e.createElement("input",{type:"email",name:"email",placeholder:"Email",value:y.email,onChange:he,required:!0}),e.createElement("input",{type:"text",name:"phone",placeholder:"Phone",value:y.phone,onChange:he}),e.createElement("input",{type:"number",name:"fargoRate",placeholder:"Fargo Rate",value:y.fargoRate,onChange:he,required:!0}),e.createElement("select",{name:"ladderName",value:y.ladderName,onChange:he,required:!0},e.createElement("option",{value:"499-under"},"499 & Under"),e.createElement("option",{value:"500-549"},"500-549"),e.createElement("option",{value:"550-plus"},"550+")),e.createElement("select",{name:"location",value:y.location,onChange:he,required:!0},e.createElement("option",{value:""},"Select Preferred Location"),r.length>0?r.map(Z=>e.createElement("option",{key:Z._id,value:Z.name},Z.name)):e.createElement("option",{value:"",disabled:!0},"Loading locations...")),e.createElement("div",{className:Ze.checkboxes},e.createElement("label",null,e.createElement("input",{type:"checkbox",name:"isActive",checked:y.isActive,onChange:he}),"Active on Ladder")),e.createElement("div",{className:Ze.formButtons},e.createElement("button",{type:"submit"},"Add Player"),e.createElement("button",{type:"button",onClick:()=>f(!1)},"Cancel"))))),_&&Ft(e.createElement(Bt,{open:_,onClose:()=>P(!1),title:"Create New Match",maxWidth:"700px",maxHeight:"90vh"},e.createElement("form",{onSubmit:Qe},e.createElement("div",{className:Ze.formRow},e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Match Type:"),e.createElement("select",{name:"matchType",value:B.matchType,onChange:qe,required:!0},e.createElement("option",{value:"challenge"},"Challenge Match"),e.createElement("option",{value:"smackdown"},"SmackDown"),e.createElement("option",{value:"smackback"},"SmackBack"))),e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Race to:"),e.createElement("select",{name:"matchFormat",value:B.matchFormat,onChange:qe,required:!0},e.createElement("option",{value:"race-to-5"},"Race to 5"),e.createElement("option",{value:"race-to-7"},"Race to 7"),e.createElement("option",{value:"race-to-9"},"Race to 9"),J&&e.createElement(e.Fragment,null,e.createElement("option",{value:"race-to-6"},"Race to 6"),e.createElement("option",{value:"race-to-8"},"Race to 8"),e.createElement("option",{value:"race-to-10"},"Race to 10"),e.createElement("option",{value:"race-to-11"},"Race to 11"),e.createElement("option",{value:"race-to-12"},"Race to 12"),e.createElement("option",{value:"race-to-13"},"Race to 13"),e.createElement("option",{value:"race-to-14"},"Race to 14"),e.createElement("option",{value:"race-to-15"},"Race to 15"),e.createElement("option",{value:"race-to-16"},"Race to 16"),e.createElement("option",{value:"race-to-17"},"Race to 17"),e.createElement("option",{value:"race-to-18"},"Race to 18"),e.createElement("option",{value:"race-to-19"},"Race to 19"),e.createElement("option",{value:"race-to-20"},"Race to 20"),e.createElement("option",{value:"race-to-21"},"Race to 21"))),e.createElement("button",{type:"button",className:Ze.moreOptionsButton,onClick:()=>Y(!J)},J?"Hide Options":"More Options"))),e.createElement("div",{className:Ze.formRow},e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Challenger :"),e.createElement("select",{value:B.challengerId,onChange:He,required:!0},e.createElement("option",{value:""},"Select Challenger"),n.filter(Z=>Z.ladderName===D).sort((Z,Pe)=>(Z.position||0)-(Pe.position||0)).map(Z=>e.createElement("option",{key:Z._id,value:Z._id},"#",Z.position," - ",Z.firstName," ",Z.lastName)))),e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Defender :"),e.createElement("select",{value:B.defenderId,onChange:st,required:!0},e.createElement("option",{value:""},"Select Defender"),n.filter(Z=>Z.ladderName===D).sort((Z,Pe)=>(Z.position||0)-(Pe.position||0)).map(Z=>e.createElement("option",{key:Z._id,value:Z._id},"#",Z.position," - ",Z.firstName," ",Z.lastName))))),e.createElement("div",{className:Ze.formRow},e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Match Date:"),e.createElement("input",{type:"date",name:"proposedDate",value:B.proposedDate,onChange:qe,required:!0})),e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Location:"),e.createElement("select",{name:"location",value:B.location,onChange:qe,required:!0},e.createElement("option",{value:""},"Select Location"),r.length>0?r.map(Z=>e.createElement("option",{key:Z._id,value:Z.name},Z.name)):e.createElement("option",{value:"",disabled:!0},"Loading locations..."))),e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Notes:"),e.createElement("input",{type:"text",name:"notes",value:B.notes,onChange:qe,placeholder:"Optional match notes"}))),e.createElement("div",{className:Ze.formButtons},e.createElement("button",{type:"submit",disabled:i},i?"Creating...":"Create Match"),e.createElement("button",{type:"button",onClick:()=>P(!1)},"Cancel"))))),u&&Ft(e.createElement("div",{className:Ze.formOverlay},e.createElement("div",{className:Ze.form},e.createElement("h3",null,"Edit Ladder Player: ",u.name),e.createElement("form",{onSubmit:$},e.createElement("input",{type:"text",name:"firstName",placeholder:"First Name",value:y.firstName,onChange:he,required:!0}),e.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name",value:y.lastName,onChange:he,required:!0}),e.createElement("input",{type:"email",name:"email",placeholder:"Email",value:y.email,onChange:he,required:!0}),e.createElement("input",{type:"text",name:"phone",placeholder:"Phone",value:y.phone,onChange:he}),e.createElement("input",{type:"number",name:"fargoRate",placeholder:"Fargo Rate",value:y.fargoRate,onChange:he,required:!0}),e.createElement("select",{name:"ladderName",value:y.ladderName,onChange:he,required:!0},e.createElement("option",{value:"499-under"},"499 & Under"),e.createElement("option",{value:"500-549"},"500-549"),e.createElement("option",{value:"550-plus"},"550+")),e.createElement("select",{name:"location",value:y.location,onChange:he},e.createElement("option",{value:""},"Select Preferred Location"),r.length>0?r.map(Z=>e.createElement("option",{key:Z._id,value:Z.name},Z.name)):e.createElement("option",{value:"",disabled:!0},"Loading locations...")),e.createElement("div",{className:Ze.checkboxes},e.createElement("label",null,e.createElement("input",{type:"checkbox",name:"isActive",checked:y.isActive,onChange:he}),"Active on Ladder")),e.createElement("div",{className:Ze.formButtons},e.createElement("button",{type:"submit"},"Update Player"),e.createElement("button",{type:"button",onClick:()=>m(null)},"Cancel")))))),S&&Ft(e.createElement(Bt,{open:S,onClose:()=>w(!1),title:"Report Match Result",maxWidth:"700px",maxHeight:"90vh"},e.createElement("form",{onSubmit:tt},e.createElement("div",{className:Ze.formRow},e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Player 1:"),e.createElement("select",{value:x.player1Id,onChange:ze,required:!0},e.createElement("option",{value:""},"Select Player 1"),n.filter(Z=>Z.ladderName===D).map(Z=>e.createElement("option",{key:Z._id,value:Z._id},"#",Z.position," - ",Z.firstName," ",Z.lastName)))),e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Player 2:"),e.createElement("select",{value:x.player2Id,onChange:Re,required:!0},e.createElement("option",{value:""},"Select Player 2"),n.filter(Z=>Z.ladderName===D).map(Z=>e.createElement("option",{key:Z._id,value:Z._id},"#",Z.position," - ",Z.firstName," ",Z.lastName))))),e.createElement("div",{className:Ze.formRow},e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Winner:"),e.createElement("select",{value:x.winnerId,onChange:Fe,required:!0},e.createElement("option",{value:""},"Select Winner"),x.player1Id&&e.createElement("option",{value:x.player1Id},x.player1Name),x.player2Id&&e.createElement("option",{value:x.player2Id},x.player2Name))),e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Score:"),e.createElement("input",{type:"text",name:"score",value:x.score,onChange:ce,placeholder:"e.g., 3-1, 5-3",required:!0}))),e.createElement("div",{className:Ze.formRow},e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Match Date:"),e.createElement("input",{type:"date",name:"matchDate",value:x.matchDate,onChange:ce,required:!0})),e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Race to:"),e.createElement("select",{name:"matchFormat",value:x.matchFormat,onChange:ce,required:!0},e.createElement("option",{value:"race-to-5"},"Race to 5"),e.createElement("option",{value:"race-to-7"},"Race to 7"),e.createElement("option",{value:"race-to-9"},"Race to 9"),J&&e.createElement(e.Fragment,null,e.createElement("option",{value:"race-to-6"},"Race to 6"),e.createElement("option",{value:"race-to-8"},"Race to 8"),e.createElement("option",{value:"race-to-10"},"Race to 10"),e.createElement("option",{value:"race-to-11"},"Race to 11"),e.createElement("option",{value:"race-to-12"},"Race to 12"),e.createElement("option",{value:"race-to-13"},"Race to 13"),e.createElement("option",{value:"race-to-14"},"Race to 14"),e.createElement("option",{value:"race-to-15"},"Race to 15"),e.createElement("option",{value:"race-to-16"},"Race to 16"),e.createElement("option",{value:"race-to-17"},"Race to 17"),e.createElement("option",{value:"race-to-18"},"Race to 18"),e.createElement("option",{value:"race-to-19"},"Race to 19"),e.createElement("option",{value:"race-to-20"},"Race to 20"),e.createElement("option",{value:"race-to-21"},"Race to 21"))),e.createElement("button",{type:"button",className:Ze.moreOptionsButton,onClick:()=>Y(!J)},J?"Hide Options":"More Options"))),e.createElement("div",{className:Ze.formRow},e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Location:"),e.createElement("select",{name:"location",value:x.location,onChange:ce,required:!0},e.createElement("option",{value:""},"Select Location"),r.length>0?r.map(Z=>e.createElement("option",{key:Z._id,value:Z.name},Z.name)):e.createElement("option",{value:"",disabled:!0},"Loading locations..."))),e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Notes:"),e.createElement("input",{type:"text",name:"notes",value:x.notes,onChange:ce,placeholder:"Optional match notes"}))),e.createElement("div",{className:Ze.formButtons},e.createElement("button",{type:"submit",disabled:i},i?"Recording...":"Record Match Result"),e.createElement("button",{type:"button",onClick:()=>w(!1)},"Cancel"))))),F&&Ft(e.createElement(Bt,{open:F,onClose:()=>j(!1),title:"Pending Matches",maxWidth:"65vw"},e.createElement("div",{className:Ze.pendingMatchesModal},W.length===0?e.createElement("div",{className:Ze.noData},"No pending matches for this ladder."):e.createElement("div",{className:Ze.pendingMatchesTable},e.createElement("table",null,e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Date"),e.createElement("th",null,"Type"),e.createElement("th",null,"Challenger"),e.createElement("th",null,"Defender"),e.createElement("th",null,"Format"),e.createElement("th",null,"Location"),e.createElement("th",null,"Notes"),e.createElement("th",null,"Status"),e.createElement("th",null,"Actions"))),e.createElement("tbody",null,W.map((Z,Pe)=>{var Ke,mt,Kt,ba,La,sa,tr,qn,Ra,En,kn,xn,Ln,Bn,zn,On;return e.createElement("tr",{key:Z._id||Z.id||Pe},e.createElement("td",null,Z.scheduledDate?new Date(Z.scheduledDate).toLocaleDateString():Z.proposedDate?new Date(Z.proposedDate).toLocaleDateString():"TBD"),e.createElement("td",null,e.createElement("span",{className:`${Ze.matchType} ${Ze[Z.matchType||"challenge"]}`},Z.matchType==="challenge"?"Challenge":Z.matchType==="smackdown"?"SmackDown":Z.matchType==="smackback"?"SmackBack":"Challenge")),e.createElement("td",null,e.createElement("strong",null,((Ke=Z.challenger)==null?void 0:Ke.firstName)||((mt=Z.player1)==null?void 0:mt.firstName)," ",((Kt=Z.challenger)==null?void 0:Kt.lastName)||((ba=Z.player1)==null?void 0:ba.lastName)),(((La=Z.challenger)==null?void 0:La.position)||((sa=Z.player1)==null?void 0:sa.position))&&` (#${((tr=Z.challenger)==null?void 0:tr.position)||((qn=Z.player1)==null?void 0:qn.position)})`,e.createElement("br",null),e.createElement("small",{style:{color:"#06b6d4"}},"Challenger")),e.createElement("td",null,e.createElement("strong",null,((Ra=Z.defender)==null?void 0:Ra.firstName)||((En=Z.player2)==null?void 0:En.firstName)," ",((kn=Z.defender)==null?void 0:kn.lastName)||((xn=Z.player2)==null?void 0:xn.lastName)),(((Ln=Z.defender)==null?void 0:Ln.position)||((Bn=Z.player2)==null?void 0:Bn.position))&&` (#${((zn=Z.defender)==null?void 0:zn.position)||((On=Z.player2)==null?void 0:On.position)})`,e.createElement("br",null),e.createElement("small",{style:{color:"#f59e0b"}},"Defender")),e.createElement("td",null,Z.matchFormat||Z.raceLength||"N/A"),e.createElement("td",null,Z.location||Z.venue||"N/A"),e.createElement("td",null,Z.notes||"N/A"),e.createElement("td",null,e.createElement("span",{className:`${Ze.status} ${Ze.pending}`},"Pending")),e.createElement("td",null,e.createElement("div",{className:Ze.matchActions},e.createElement("button",{className:Ze.reportResultButton,onClick:()=>{We(Z),j(!1)},title:"Report Result"},"📊"),e.createElement("button",{className:Ze.editButton,onClick:()=>Yt(Z),title:"Edit Match"},"✏️"),e.createElement("button",{className:Ze.deleteButton,onClick:()=>ua(Z),title:"Delete Match"},"🗑️"))))}))))))),Q&&X&&Ft(e.createElement(Bt,{open:Q,onClose:()=>{ne(!1),O(null)},title:"Edit Pending Match",maxWidth:"60vw"},e.createElement("div",{className:Ze.editPendingMatchForm},e.createElement("form",{onSubmit:Oa},e.createElement("div",{className:Ze.formRow},e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Match Type:"),e.createElement("select",{name:"matchType",value:T.matchType,onChange:Pa},e.createElement("option",{value:"challenge"},"Challenge"),e.createElement("option",{value:"smackdown"},"SmackDown"),e.createElement("option",{value:"smackback"},"SmackBack"),e.createElement("option",{value:"defense"},"Defense"))),e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Match Format:"),e.createElement("select",{name:"matchFormat",value:T.matchFormat,onChange:Pa},e.createElement("option",{value:"race-to-3"},"Race to 3"),e.createElement("option",{value:"race-to-5"},"Race to 5"),e.createElement("option",{value:"race-to-7"},"Race to 7"),e.createElement("option",{value:"race-to-9"},"Race to 9"),e.createElement("option",{value:"best-of-3"},"Best of 3"),e.createElement("option",{value:"best-of-5"},"Best of 5"),e.createElement("option",{value:"best-of-7"},"Best of 7")))),e.createElement("div",{className:Ze.formRow},e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Scheduled Date:"),e.createElement("input",{type:"date",name:"scheduledDate",value:T.scheduledDate,onChange:Pa})),e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Location:"),e.createElement("select",{name:"location",value:T.location,onChange:Pa},e.createElement("option",{value:""},"Select Location"),r.map((Z,Pe)=>e.createElement("option",{key:Pe,value:Z.name},Z.name))))),e.createElement("div",{className:Ze.formRow},e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Entry Fee:"),e.createElement("input",{type:"number",name:"entryFee",value:T.entryFee,onChange:Pa,min:"0",step:"0.01"})),e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Table Size:"),e.createElement("select",{name:"tableSize",value:T.tableSize,onChange:Pa},e.createElement("option",{value:"7-foot"},"7-foot"),e.createElement("option",{value:"9-foot"},"9-foot")))),e.createElement("div",{className:Ze.formRow},e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Game Type:"),e.createElement("select",{name:"gameType",value:T.gameType,onChange:Pa},e.createElement("option",{value:"8-ball"},"8-ball"),e.createElement("option",{value:"9-ball"},"9-ball"),e.createElement("option",{value:"10-ball"},"10-ball"),e.createElement("option",{value:"mixed"},"Mixed")))),e.createElement("div",{className:Ze.formRow},e.createElement("div",{className:Ze.formGroup},e.createElement("label",null,"Notes:"),e.createElement("textarea",{name:"notes",value:T.notes,onChange:Pa,placeholder:"Match notes",rows:"3"}))),e.createElement("div",{className:Ze.formButtons},e.createElement("button",{type:"submit",disabled:i,className:Ze.submitButton},i?"Updating...":"Update Match"),e.createElement("button",{type:"button",onClick:()=>{ne(!1),O(null)},className:Ze.cancelButton},"Cancel")))))),G&&pe&&Ft(e.createElement(Bt,{open:G,onClose:()=>{se(!1),Se(null)},title:"Confirm Delete Pending Match",maxWidth:"40vw"},e.createElement("div",{className:Ze.deleteConfirmModal},e.createElement("p",null,"Are you sure you want to delete this pending match?"),e.createElement("div",{className:Ze.matchDetails},e.createElement("p",null,e.createElement("strong",null,"Players:")," ",((Rr=pe.challenger)==null?void 0:Rr.firstName)||((hn=pe.player1)==null?void 0:hn.firstName)," ",((Xt=pe.challenger)==null?void 0:Xt.lastName)||((ga=pe.player1)==null?void 0:ga.lastName)," vs ",((Nn=pe.defender)==null?void 0:Nn.firstName)||((dr=pe.player2)==null?void 0:dr.firstName)," ",((gr=pe.defender)==null?void 0:gr.lastName)||((_n=pe.player2)==null?void 0:_n.lastName)),e.createElement("p",null,e.createElement("strong",null,"Type:")," ",pe.matchType||"Challenge"),e.createElement("p",null,e.createElement("strong",null,"Date:")," ",pe.scheduledDate?new Date(pe.scheduledDate).toLocaleDateString():pe.proposedDate?new Date(pe.proposedDate).toLocaleDateString():"TBD")),e.createElement("p",{className:Ze.warningText},"⚠️ This action cannot be undone."),e.createElement("div",{className:Ze.formButtons},e.createElement("button",{onClick:ma,disabled:i,className:Ze.deleteButton},i?"Deleting...":"Delete Match"),e.createElement("button",{onClick:()=>{se(!1),Se(null)},className:Ze.cancelButton},"Cancel"))))),e.createElement("div",{className:Ze.ladderSection},e.createElement("h3",{className:Ze.ladderTitle},D==="499-under"?"499 & Under":D==="500-549"?"500-549":D==="550-plus"?"550+":D," Ladder"),e.createElement("div",{className:Ze.playersList},n.filter(Z=>Z.ladderName===D).length>0?e.createElement("table",{className:Ze.table},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",{style:{width:"8%"}},"Position"),e.createElement("th",{style:{width:"18%"}},"Name"),e.createElement("th",{style:{width:"25%"}},"Email"),e.createElement("th",{style:{width:"12%"}},"Phone"),e.createElement("th",{style:{width:"10%"}},"Fargo Rate"),e.createElement("th",{style:{width:"12%"}},"Location"),e.createElement("th",{style:{width:"8%"}},"Status"),e.createElement("th",{style:{width:"7%"}},"Actions"))),e.createElement("tbody",null,n.filter(Z=>Z.ladderName===D).sort((Z,Pe)=>(Z.position||0)-(Pe.position||0)).map((Z,Pe)=>{var Ke;return e.createElement("tr",{key:Z._id||Z.email},e.createElement("td",null,Z.position||Pe+1),e.createElement("td",null,Z.firstName," ",Z.lastName),e.createElement("td",{style:{whiteSpace:"normal",wordBreak:"break-all"}},(Ke=Z.unifiedAccount)!=null&&Ke.email?e.createElement("span",{style:{color:/@(ladder\.local|ladder\.temp|test|temp|local|fake|example|dummy)/i.test(Z.unifiedAccount.email)?"#dc2626":"inherit"}},Z.unifiedAccount.email):"No email"),e.createElement("td",null,Z.phone),e.createElement("td",null,Z.fargoRate),e.createElement("td",null,Z.location),e.createElement("td",null,e.createElement("span",{className:`${Ze.status} ${Z.isActive?Ze.active:Ze.inactive}`},Z.isActive?"Active":"Inactive")),e.createElement("td",null,e.createElement("button",{className:Ze.editButton,onClick:()=>ye(Z)},"Edit"),e.createElement("button",{className:Ze.deleteButton,onClick:()=>V(Z.email)},"Remove")))}))):e.createElement("div",{className:Ze.noPlayers},"No players in this ladder yet"))),M&&Jr.createPortal(e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e5,padding:"20px"}},e.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"2px solid #8B5CF6",borderRadius:"12px",width:"90%",maxWidth:"1200px",maxHeight:"80vh",display:"flex",flexDirection:"column",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",color:"#ffffff"}},e.createElement("div",{style:{padding:"20px",borderBottom:"1px solid #8B5CF6",display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("h2",{style:{color:"#8B5CF6",margin:0}},"🏆 Match History - ",D==="499-under"?"499 & Under":D==="500-549"?"500-549":D==="550-plus"?"550+":D," Ladder"),e.createElement("button",{onClick:()=>N(!1),style:{background:"none",border:"none",color:"#8B5CF6",fontSize:"24px",cursor:"pointer",padding:"5px"}},"×")),e.createElement("div",{style:{flex:1,overflowY:"auto",padding:"20px"}},i?e.createElement("div",{style:{textAlign:"center",color:"#ccc",padding:"40px",fontSize:"16px"}},"Loading match history..."):E.length===0?e.createElement("div",{style:{textAlign:"center",color:"#ccc",padding:"40px",fontSize:"16px"}},"No matches recorded yet."):e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",overflow:"hidden"}},e.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},e.createElement("thead",null,e.createElement("tr",{style:{background:"rgba(139, 92, 246, 0.2)"}},e.createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid rgba(139, 92, 246, 0.3)"}},"Date"),e.createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid rgba(139, 92, 246, 0.3)"}},"Winner"),e.createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid rgba(139, 92, 246, 0.3)"}},"Loser"),e.createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid rgba(139, 92, 246, 0.3)"}},"Score"),e.createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid rgba(139, 92, 246, 0.3)"}},"Type"),e.createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid rgba(139, 92, 246, 0.3)"}},"Location"),e.createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid rgba(139, 92, 246, 0.3)"}},"Status"))),e.createElement("tbody",null,E.map((Z,Pe)=>e.createElement("tr",{key:Z.id||Pe,style:{borderBottom:Pe<E.length-1?"1px solid rgba(255, 255, 255, 0.1)":"none"}},e.createElement("td",{style:{padding:"12px"}},new Date(Z.completedDate||Z.scheduledDate).toLocaleDateString()),e.createElement("td",{style:{padding:"12px"}},e.createElement("strong",{style:{color:"#22c55e"}},Z.winner?`${Z.winner.firstName} ${Z.winner.lastName}`:"N/A"),Z.winner?` (#${Z.winner.position})`:""),e.createElement("td",{style:{padding:"12px"}},e.createElement("span",{style:{color:"#ef4444"}},Z.loser?`${Z.loser.firstName} ${Z.loser.lastName}`:"N/A"),Z.loser?` (#${Z.loser.position})`:""),e.createElement("td",{style:{padding:"12px"}},Z.score),e.createElement("td",{style:{padding:"12px"}},Z.matchType||"N/A"),e.createElement("td",{style:{padding:"12px"}},Z.venue||"N/A"),e.createElement("td",{style:{padding:"12px"}},e.createElement("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",background:Z.status==="completed"?"rgba(34, 197, 94, 0.2)":Z.status==="scheduled"?"rgba(59, 130, 246, 0.2)":"rgba(107, 114, 128, 0.2)",color:Z.status==="completed"?"#22c55e":Z.status==="scheduled"?"#3b82f6":"#6b7280"}},Z.status)))))))))),document.body),U&&Ft(e.createElement(Bt,{open:U,onClose:()=>K(!1),title:"Pending Ladder Applications",maxWidth:"90vw",maxHeight:"90vh"},e.createElement(Py,{onClose:()=>K(!1)}))),Je&&Ft(e.createElement(Bt,{open:Je,onClose:()=>nt(!1),title:"LMS Tracking - Matches Status",maxWidth:"90vw",maxHeight:"90vh"},e.createElement("div",{style:{padding:"20px"}},e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("h3",{style:{color:"#6c5ce7",marginBottom:"10px"}},"📊 LMS Match Status Tracking"),e.createElement("p",{style:{color:"#666",fontSize:"14px"}},"Track which completed matches need to be entered into LMS for FargoRate reporting.")),Xe.length===0?e.createElement("div",{style:{textAlign:"center",padding:"40px",color:"#22c55e",fontSize:"16px"}},"✅ All matches are up to date with LMS!"):e.createElement("div",{style:{overflowX:"auto"}},e.createElement("table",{style:{width:"100%",borderCollapse:"collapse",backgroundColor:"white",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"}},e.createElement("thead",null,e.createElement("tr",{style:{backgroundColor:"#6c5ce7",color:"white"}},e.createElement("th",{style:{padding:"12px",textAlign:"left"}},"Date"),e.createElement("th",{style:{padding:"12px",textAlign:"left"}},"Winner"),e.createElement("th",{style:{padding:"12px",textAlign:"left"}},"Loser"),e.createElement("th",{style:{padding:"12px",textAlign:"left"}},"Score"),e.createElement("th",{style:{padding:"12px",textAlign:"left"}},"Location"),e.createElement("th",{style:{padding:"12px",textAlign:"left"}},"LMS Status"),e.createElement("th",{style:{padding:"12px",textAlign:"left"}},"Actions"))),e.createElement("tbody",null,Xe.map((Z,Pe)=>e.createElement("tr",{key:`${Z._id||Z.id}-${Ot}`,style:{borderBottom:"1px solid #e5e7eb",backgroundColor:Pe%2===0?"#f9fafb":"white"}},e.createElement("td",{style:{padding:"12px"}},e.createElement("div",{style:{fontSize:"14px",fontWeight:"bold",color:"blue"}},Z.completedDate?new Date(Z.completedDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):new Date(Z.scheduledDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})),e.createElement("div",{style:{fontSize:"12px",color:"#666"}},Z.completedDate?"Played":"Scheduled")),e.createElement("td",{style:{padding:"12px"}},e.createElement("strong",{style:{color:"#22c55e"}},Z.winner?typeof Z.winner=="object"?`${Z.winner.firstName} ${Z.winner.lastName}`:Z.winner:"N/A")),e.createElement("td",{style:{padding:"12px"}},e.createElement("span",{style:{color:"#ef4444"}},Z.loser?typeof Z.loser=="object"?`${Z.loser.firstName} ${Z.loser.lastName}`:Z.loser:"N/A")),e.createElement("td",{style:{padding:"12px"}},e.createElement("span",{style:{fontSize:"14px",fontWeight:"bold",color:Z.score?"#1f2937":"#9ca3af"}},Z.score||"No Score")),e.createElement("td",{style:{padding:"12px"}},e.createElement("span",{style:{fontSize:"13px",color:Z.venue?"#1f2937":"#9ca3af"}},Z.venue||"No Location")),e.createElement("td",{style:{padding:"12px"}},e.createElement("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",backgroundColor:Z.lmsStatus==="scheduled"?"#dbeafe":Z.lmsStatus==="completed"?"#dcfce7":"#fef3c7",color:Z.lmsStatus==="scheduled"?"#1d4ed8":Z.lmsStatus==="completed"?"#16a34a":"#d97706"}},Z.lmsStatus==="scheduled"?"📅 Scheduled in LMS":Z.lmsStatus==="completed"?"✅ Scored in LMS":"⚠️ Not Entered")),e.createElement("td",{style:{padding:"12px"}},e.createElement("div",{style:{display:"flex",gap:"8px"}},(!Z.lmsStatus||Z.lmsStatus==="not_entered")&&e.createElement("button",{onClick:()=>Fa(Z._id||Z.id),style:{background:"#3b82f6",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"📅 Mark as Scheduled"),Z.lmsStatus==="scheduled"&&e.createElement("button",{onClick:()=>cr(Z._id||Z.id),style:{background:"#22c55e",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"📊 Scored in LMS"),Z.lmsStatus==="completed"&&e.createElement("span",{style:{color:"#16a34a",fontSize:"12px",fontWeight:"bold"}},"✅ Done")))))))),e.createElement("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#f0f9ff",borderRadius:"8px",border:"1px solid #0ea5e9"}},e.createElement("h4",{style:{color:"#0ea5e9",marginBottom:"10px"}},"📋 LMS Entry Instructions:"),e.createElement("ol",{style:{color:"#374151",fontSize:"14px",lineHeight:"1.6"}},e.createElement("li",null,"Log into your LMS account"),e.createElement("li",null,"Go to your division/league"),e.createElement("li",null,"Add each match to the schedule"),e.createElement("li",null,"After the match is played, enter the winner and score"),e.createElement("li",null,`Click "Scheduled" when you've added it to LMS`),e.createElement("li",null,`Click "Completed" when you've entered the result`)))))))}const fj=()=>e.createElement("div",{style:{width:"100%",minHeight:"100vh",background:"#000",overflow:"auto",padding:"20px",margin:0,position:"relative",top:0,left:0,boxSizing:"border-box"}},e.createElement(Bd,{playerName:"Guest",playerLastName:"User",senderEmail:"guest@frontrangepool.com",userPin:"GUEST",onLogout:()=>{},isAdmin:!1,showClaimForm:!1,initialView:"ladders",isPublicView:!0,onClaimLadderPosition:()=>{},claimedPositions:[],isPositionClaimed:()=>!1})),dx=()=>{const[a]=V0(),r=a.get("ladder")||"499-under",[t,n]=h.useState([]),[o,i]=h.useState(!0),[c,u]=h.useState(null);h.useEffect(()=>{m()},[r]);const m=async()=>{try{i(!0);const f=await fetch(`${de}/api/ladder/embed/${r}`);if(f.ok){const y=await f.json();n(y.players||[])}else u("Failed to load ladder data")}catch(f){console.error("Error loading ladder data:",f),u("Error loading ladder data")}finally{i(!1)}},g=f=>{switch(f){case"499-under":return"499 & Under";case"500-549":return"500-549";case"550-plus":return"550+";default:return f}};return o?e.createElement("div",{style:{padding:"20px",textAlign:"center",color:"#666",fontFamily:"Arial, sans-serif",background:"#1a1a1a",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"}},e.createElement("div",null,e.createElement("div",{style:{fontSize:"24px",marginBottom:"10px"}},"🏆"),e.createElement("div",null,"Loading ladder data..."))):c?e.createElement("div",{style:{padding:"20px",textAlign:"center",color:"#e53e3e",fontFamily:"Arial, sans-serif",background:"#1a1a1a",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"}},e.createElement("div",null,e.createElement("div",{style:{fontSize:"24px",marginBottom:"10px"}},"❌"),e.createElement("div",null,c))):e.createElement("div",{style:{fontFamily:"Arial, sans-serif",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",color:"#fff",minHeight:"100vh",padding:"10px",boxSizing:"border-box"}},e.createElement("div",{style:{textAlign:"center",marginBottom:"20px",borderBottom:"2px solid #e53e3e",paddingBottom:"15px"}},e.createElement("h1",{style:{margin:"0 0 5px 0",fontSize:"24px",color:"#e53e3e",textShadow:"2px 2px 4px rgba(0,0,0,0.8)"}},"Ladder of Legends"),e.createElement("h2",{style:{margin:"0",fontSize:"18px",color:"#ccc",fontWeight:"normal"}},g(r)," Ladder")),e.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)"}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"60px 1fr 80px 50px 50px 80px",background:"linear-gradient(135deg, #e53e3e, #c53030)",color:"white",fontWeight:"bold",fontSize:"14px",padding:"12px 8px",textAlign:"center"}},e.createElement("div",null,"Rank"),e.createElement("div",null,"Player"),e.createElement("div",null,"Fargo"),e.createElement("div",null,"W"),e.createElement("div",null,"L"),e.createElement("div",null,"Status")),t.map((f,y)=>e.createElement("div",{key:f._id||y,style:{display:"grid",gridTemplateColumns:"60px 1fr 80px 50px 50px 80px",padding:"10px 8px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",fontSize:"14px",alignItems:"center",background:y%2===0?"rgba(255, 255, 255, 0.02)":"transparent",transition:"background-color 0.2s ease"},onMouseEnter:v=>{v.currentTarget.style.background="rgba(229, 62, 62, 0.1)"},onMouseLeave:v=>{v.currentTarget.style.background=y%2===0?"rgba(255, 255, 255, 0.02)":"transparent"}},e.createElement("div",{style:{textAlign:"center",fontWeight:"bold",color:"#e53e3e"}},"#",f.position),e.createElement("div",{style:{paddingLeft:"8px",fontWeight:"500"}},f.firstName," ",f.lastName),e.createElement("div",{style:{textAlign:"center",color:"#ccc"}},f.fargoRate===0?"N/A":f.fargoRate),e.createElement("div",{style:{textAlign:"center",color:"#4CAF50",fontWeight:"bold"}},f.wins||0),e.createElement("div",{style:{textAlign:"center",color:"#f44336",fontWeight:"bold"}},f.losses||0),e.createElement("div",{style:{textAlign:"center"}},f.isActive?f.immunityUntil&&new Date(f.immunityUntil)>new Date?e.createElement("span",{style:{color:"#ff9800",fontSize:"12px"}},"Immune"):e.createElement("span",{style:{color:"#4CAF50",fontSize:"12px"}},"Active"):e.createElement("span",{style:{color:"#f44336",fontSize:"12px"}},"Inactive"))))),e.createElement("div",{style:{textAlign:"center",marginTop:"20px",fontSize:"12px",color:"#888",borderTop:"1px solid rgba(255, 255, 255, 0.1)",paddingTop:"15px"}},e.createElement("p",{style:{margin:"5px 0"}},e.createElement("strong",null,"Challenge Rules:")," Standard challenges up to 4 positions above, SmackDown up to 5 positions below"),e.createElement("p",{style:{margin:"5px 0"}},e.createElement("strong",null,"Anyone can view the ladder - no account required!")),e.createElement("p",{style:{margin:"5px 0",color:"#e53e3e"}},e.createElement("strong",null,"⚠️ INDEPENDENT TOURNAMENT SERIES ⚠️")),e.createElement("p",{style:{margin:"5px 0",fontSize:"11px"}},"This ladder system is ",e.createElement("strong",null,"NOT")," affiliated with, endorsed by, or sanctioned by the Front Range Pool League,",e.createElement("br",null),"CueSports International, BCA Pool League, or USA Pool League.",e.createElement("br",null),"It is an independent tournament series operated by ",e.createElement("strong",null,"Legends Brews and Cues"),".")))},gj=()=>e.createElement(_x,null,e.createElement(wx,null,e.createElement(Xa,{path:"/ladder-embed",element:e.createElement("div",{style:{position:"relative",minHeight:"100vh",width:"100%",background:"#000",padding:0,margin:0}},e.createElement(dx,null))}),e.createElement(Xa,{path:"*",element:e.createElement("div",{style:{position:"relative",minHeight:"100vh",width:"100%",background:"#000",padding:0,margin:0}},e.createElement(dx,null))}))),hj="_container_1uhx5_1",yj="_header_1uhx5_23",bj="_addButton_1uhx5_53",vj="_formOverlay_1uhx5_85",Ej="_form_1uhx5_85",xj="_formRow_1uhx5_145",wj="_checkboxes_1uhx5_201",Sj="_formButtons_1uhx5_239",Cj="_playersList_1uhx5_299",Nj="_table_1uhx5_307",_j="_status_1uhx5_357",kj="_approved_1uhx5_375",Ij="_pending_1uhx5_385",Mj="_active_1uhx5_395",Aj="_inactive_1uhx5_405",Dj="_editButton_1uhx5_415",Rj="_deleteButton_1uhx5_417",qa={container:hj,header:yj,addButton:bj,formOverlay:vj,form:Ej,formRow:xj,checkboxes:wj,formButtons:Sj,playersList:Cj,table:Nj,status:_j,approved:kj,pending:Ij,active:Mj,inactive:Aj,editButton:Dj,deleteButton:Rj};function Tj(){const[a,r]=h.useState([]),[t,n]=h.useState(!0),[o,i]=h.useState(null),[c,u]=h.useState(!1),[m,g]=h.useState({firstName:"",lastName:"",email:"",phone:"",pin:"",division:"",locations:"",isApproved:!0,isActive:!0}),f=async()=>{try{const E=await(await fetch(`${de}/api/unified-auth/all-users`)).json();E.success&&r(E.users)}catch(k){console.error("Error fetching unified players:",k)}finally{n(!1)}};h.useEffect(()=>{f()},[]);const y=k=>{const{name:E,value:I,type:M,checked:N}=k.target;g(_=>({..._,[E]:M==="checkbox"?N:I}))},v=async k=>{k.preventDefault();try{const I=await(await fetch(`${de}/api/unified-auth/admin/add-user`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).json();I.success?(u(!1),g({firstName:"",lastName:"",email:"",phone:"",pin:"",division:"",locations:"",isApproved:!0,isActive:!0}),f(),alert("Player added successfully!")):alert("Error adding player: "+I.message)}catch(E){console.error("Error adding player:",E),alert("Error adding player")}},S=async k=>{k.preventDefault();try{const I=await(await fetch(`${de}/api/unified-auth/admin/update-user/${o._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).json();I.success?(i(null),g({firstName:"",lastName:"",email:"",phone:"",pin:"",division:"",locations:"",isApproved:!0,isActive:!0}),f(),alert("Player updated successfully!")):alert("Error updating player: "+I.message)}catch(E){console.error("Error updating player:",E),alert("Error updating player")}},w=k=>{i(k),g({firstName:k.firstName||"",lastName:k.lastName||"",email:k.email||"",phone:k.phone||"",pin:k.pin||"",division:k.division||"",locations:k.locations||"",isApproved:k.isApproved||!1,isActive:k.isActive||!0})},x=async k=>{if(confirm("Are you sure you want to delete this player?"))try{const I=await(await fetch(`${de}/api/unified-auth/admin/delete-user/${k}`,{method:"DELETE"})).json();I.success?(f(),alert("Player deleted successfully!")):alert("Error deleting player: "+I.message)}catch(E){console.error("Error deleting player:",E),alert("Error deleting player")}};return t?e.createElement("div",{className:qa.container},"Loading unified players..."):e.createElement("div",{className:qa.container},e.createElement("div",{className:qa.header},e.createElement("h2",null,"Unified Player Management"),e.createElement("button",{className:qa.addButton,onClick:()=>u(!0)},"Add New Player")),c&&e.createElement("div",{className:qa.formOverlay},e.createElement("div",{className:qa.form},e.createElement("h3",null,"Add New Unified Player"),e.createElement("form",{onSubmit:v},e.createElement("div",{className:qa.formRow},e.createElement("input",{type:"text",name:"firstName",placeholder:"First Name",value:m.firstName,onChange:y,required:!0}),e.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name",value:m.lastName,onChange:y,required:!0})),e.createElement("input",{type:"email",name:"email",placeholder:"Email",value:m.email,onChange:y,required:!0}),e.createElement("input",{type:"text",name:"phone",placeholder:"Phone",value:m.phone,onChange:y,required:!0}),e.createElement("input",{type:"text",name:"pin",placeholder:"PIN",value:m.pin,onChange:y,required:!0}),e.createElement("input",{type:"text",name:"division",placeholder:"Division",value:m.division,onChange:y}),e.createElement("input",{type:"text",name:"locations",placeholder:"Locations",value:m.locations,onChange:y}),e.createElement("div",{className:qa.checkboxes},e.createElement("label",null,e.createElement("input",{type:"checkbox",name:"isApproved",checked:m.isApproved,onChange:y}),"Approved"),e.createElement("label",null,e.createElement("input",{type:"checkbox",name:"isActive",checked:m.isActive,onChange:y}),"Active")),e.createElement("div",{className:qa.formButtons},e.createElement("button",{type:"submit"},"Add Player"),e.createElement("button",{type:"button",onClick:()=>u(!1)},"Cancel"))))),o&&Jr.createPortal(e.createElement("div",{className:qa.formOverlay},e.createElement("div",{className:qa.form},e.createElement("h3",null,"Edit Unified Player: ",o.firstName," ",o.lastName),e.createElement("form",{onSubmit:S},e.createElement("div",{className:qa.formRow},e.createElement("input",{type:"text",name:"firstName",placeholder:"First Name",value:m.firstName,onChange:y,required:!0}),e.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name",value:m.lastName,onChange:y,required:!0})),e.createElement("input",{type:"email",name:"email",placeholder:"Email",value:m.email,onChange:y,required:!0}),e.createElement("input",{type:"text",name:"phone",placeholder:"Phone",value:m.phone,onChange:y,required:!0}),e.createElement("input",{type:"text",name:"pin",placeholder:"PIN",value:m.pin,onChange:y,required:!0}),e.createElement("input",{type:"text",name:"division",placeholder:"Division",value:m.division,onChange:y}),e.createElement("input",{type:"text",name:"locations",placeholder:"Locations",value:m.locations,onChange:y}),e.createElement("div",{className:qa.checkboxes},e.createElement("label",null,e.createElement("input",{type:"checkbox",name:"isApproved",checked:m.isApproved,onChange:y}),"Approved"),e.createElement("label",null,e.createElement("input",{type:"checkbox",name:"isActive",checked:m.isActive,onChange:y}),"Active")),e.createElement("div",{className:qa.formButtons},e.createElement("button",{type:"submit"},"Update Player"),e.createElement("button",{type:"button",onClick:()=>i(null)},"Cancel"))))),document.body),e.createElement("div",{className:qa.playersList},e.createElement("table",{className:qa.table},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Name"),e.createElement("th",null,"Email"),e.createElement("th",null,"Phone"),e.createElement("th",null,"PIN"),e.createElement("th",null,"Role"),e.createElement("th",null,"Status"),e.createElement("th",null,"Actions"))),e.createElement("tbody",null,a.map(k=>e.createElement("tr",{key:k._id},e.createElement("td",null,k.firstName," ",k.lastName),e.createElement("td",null,k.email),e.createElement("td",null,k.phone),e.createElement("td",null,k.pin?"***":"Not Set"),e.createElement("td",null,k.role||"player"),e.createElement("td",null,e.createElement("span",{className:`${qa.status} ${k.isApproved?qa.approved:qa.pending}`},k.isApproved?"Approved":"Pending"),e.createElement("span",{className:`${qa.status} ${k.isActive?qa.active:qa.inactive}`},k.isActive?"Active":"Inactive")),e.createElement("td",null,e.createElement("button",{className:qa.editButton,onClick:()=>w(k)},"Edit"),e.createElement("button",{className:qa.deleteButton,onClick:()=>x(k._id)},"Delete"))))))))}const Pj=()=>(h.useEffect(()=>{(()=>{const r=document.createElement("iframe");r.src="/dues-tracker/index.html",r.style.width="100%",r.style.height="100vh",r.style.border="none",r.style.overflow="auto";const t=document.getElementById("dues-tracker-container");t&&(t.innerHTML="",t.appendChild(r))})()},[]),e.createElement("div",{id:"dues-tracker-container",style:{width:"100%",height:"100vh",overflow:"auto"}},e.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"1.2rem"}},"Loading original dues tracker..."))),Lj=()=>{const a=er(),[r,t]=h.useState("info"),[n,o]=h.useState(null),[i,c]=h.useState(!0),[u,m]=h.useState(null),[g,f]=h.useState(!1),[y,v]=h.useState({firstName:"",lastName:"",email:"",phone:"",experience:"beginner",fargoRate:"",currentLeague:"",currentRanking:"",message:""}),[S,w]=h.useState(!1);h.useEffect(()=>{x()},[]);const x=async()=>{try{c(!0);const N=await fetch(`${de}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:"guest@frontrangepool.com"})});if(N.ok){const _=await N.json();o(_.user),console.log("Guest user authenticated:",_.user)}else{const _=await N.json();console.error("Guest authentication failed:",_),m("Failed to authenticate guest user")}}catch(N){console.error("Error authenticating guest:",N),m("Network error during authentication")}finally{c(!1)}},k=()=>{a("/")},E=()=>{console.log("Opening join modal..."),f(!0)},I=async N=>{if(N.preventDefault(),!y.firstName||!y.lastName||!y.email){alert("Please fill in all required fields (First Name, Last Name, and Email)");return}w(!0);try{await new Promise(_=>setTimeout(_,1e3)),alert(`🏆 Thank you for your interest in joining the Front Range Pool League BCAPL Singles Division!

We've received your application:

Name: ${y.firstName} ${y.lastName}
Email: ${y.email}
Experience: ${y.experience}${y.fargoRate?`
FargoRate: ${y.fargoRate}`:""}${y.currentLeague?`
Current League: ${y.currentLeague}`:""}${y.currentRanking?`
Current Ranking: ${y.currentRanking}`:""}

We'll contact you at ${y.email} within 24-48 hours to set up your player profile and get you started in the BCAPL singles division!

In the meantime, you can also reach us directly at: frbcapl@gmail.com`),v({firstName:"",lastName:"",email:"",phone:"",experience:"beginner",fargoRate:"",currentLeague:"",currentRanking:"",message:""}),f(!1)}catch{alert("There was an error submitting your application. Please try again or contact us directly at frbcapl@gmail.com")}finally{w(!1)}},M={onScheduleMatch:()=>{alert(`📅 Schedule Match

This feature is available to members only.

Contact frbcapl@gmail.com to join and start scheduling matches!`)},onOpenChat:()=>{alert(`💬 Chat System

This feature is available to members only.

Contact frbcapl@gmail.com to join and start chatting with opponents!`)},onLogout:()=>{a("/")},onGoToAdmin:()=>{alert(`🔧 Admin Access

Admin features are only available to approved administrators.

Contact frbcapl@gmail.com for admin access requests.`)},onGoToPlatformAdmin:()=>{alert(`🔧 Platform Admin

Platform admin features are only available to super administrators.

Contact frbcapl@gmail.com for platform admin access requests.`)},onOpenOpponentsModal:()=>{alert(`👥 Opponents Modal

This feature is available to members only.

Contact frbcapl@gmail.com to join and view your opponents!`)},onOpenCompletedMatchesModal:()=>{alert(`✅ Completed Matches

This feature is available to members only.

Contact frbcapl@gmail.com to join and view your completed matches!`)},onOpenStandingsModal:()=>{alert(`📊 Standings

This feature is available to members only.

Contact frbcapl@gmail.com to join and view the standings!`)},onOpenAllMatchesModal:()=>{alert(`📋 All Matches

This feature is available to members only.

Contact frbcapl@gmail.com to join and view all matches!`)},onOpenProposalListModal:()=>{alert(`📝 Proposals

This feature is available to members only.

Contact frbcapl@gmail.com to join and view your proposals!`)},onOpenSentProposalListModal:()=>{alert(`📤 Sent Proposals

This feature is available to members only.

Contact frbcapl@gmail.com to join and view your sent proposals!`)},onMatchClick:()=>{alert(`🎯 Match Details

This feature is available to members only.

Contact frbcapl@gmail.com to join and view match details!`)},onOpenMessageCenter:()=>{alert(`💬 Message Center

This feature is available to members only.

Contact frbcapl@gmail.com to join and access the message center!`)},onSmartMatchClick:()=>{alert(`🧠 Smart Match

This feature is available to members only.

Contact frbcapl@gmail.com to join and use smart matchmaking!`)},onOpenCalendar:()=>{alert(`📅 Calendar

This feature is available to members only.

Contact frbcapl@gmail.com to join and access the calendar!`)}};return i?e.createElement("div",{className:"guest-app-container"},e.createElement("div",{className:"guest-app-header"},e.createElement("h1",null,"🏆 League App - Guest Preview"),e.createElement("p",null,"Loading guest access..."),e.createElement("div",{className:"guest-badge"},"👀 Guest Mode - Limited Access")),e.createElement("div",{className:"loading-spinner"},"Authenticating guest user...")):u?e.createElement("div",{className:"guest-app-container"},e.createElement("div",{className:"guest-app-header"},e.createElement("h1",null,"🏆 League App - Guest Preview"),e.createElement("p",null,"Error loading guest access"),e.createElement("div",{className:"guest-badge"},"👀 Guest Mode - Limited Access")),e.createElement("div",{className:"error-message"},e.createElement("p",null,"Error: ",u),e.createElement("button",{onClick:k,className:"back-btn"},"← Back to Hub"))):e.createElement("div",{className:"guest-app-container"},e.createElement("div",{className:"guest-app-header"},e.createElement("h1",null,"🏆 League App - Guest Preview"),e.createElement("p",null,"Experience the actual League App interface with limited functionality"),e.createElement("div",{className:"guest-badge"},"👀 Guest Mode - Limited Access"),e.createElement("div",{className:"guest-actions"},e.createElement("button",{onClick:k,className:"back-btn"},"← Back to Hub"),e.createElement("button",{onClick:E,className:"join-btn"},"Join League"))),e.createElement("div",{className:"view-tabs"},e.createElement("button",{className:`tab-btn ${r==="info"?"active":""}`,onClick:()=>t("info")},"ℹ️ League Info"),e.createElement("button",{className:`tab-btn ${r==="app"?"active":""}`,onClick:()=>t("app")},"🎮 Try App Interface")),e.createElement("div",{className:"content-area"},r==="app"&&e.createElement("div",{className:"app-preview-section"},e.createElement("div",{className:"guest-notice"},e.createElement("h3",null,"🎮 Interactive App Preview"),e.createElement("p",null,"You can explore the actual League App interface below. Try clicking buttons and opening modals to see how it works!"),e.createElement("div",{className:"guest-limitations",style:{textAlign:"center"}},e.createElement("strong",null,"Guest Limitations:"),e.createElement("ul",{style:{textAlign:"left",display:"inline-block",margin:"0.5rem auto"}},e.createElement("li",null,"• Can view all interfaces and modals"),e.createElement("li",null,"• Cannot submit forms or save data"),e.createElement("li",null,"• Cannot access chat or messaging"),e.createElement("li",null,"• Cannot schedule real matches"),e.createElement("li",null,"• Cannot access admin features")))),e.createElement("div",{className:"dashboard-preview"},(console.log("🎮 Guest App Debug - Dashboard Props:",{effectivePhase:"scheduled",hasSeasonData:!0,completedMatches:[{_id:"guest-match-1",player1Id:"Guest User",player2Id:"John Smith",winner:"Guest User",score:"5-3",matchDate:new Date(Date.now()-7*24*60*60*1e3),status:"completed"},{_id:"guest-match-2",player1Id:"Guest User",player2Id:"Jane Doe",winner:"Jane Doe",score:"3-5",matchDate:new Date(Date.now()-14*24*60*60*1e3),status:"completed"}],totalRequiredMatches:6,pendingCount:2,sentCount:1}),null),e.createElement(rS,{playerName:(n==null?void 0:n.firstName)||"Guest",playerLastName:(n==null?void 0:n.lastName)||"User",senderEmail:(n==null?void 0:n.email)||"guest@frontrangepool.com",onScheduleMatch:M.onScheduleMatch,onOpenChat:M.onOpenChat,onLogout:M.onLogout,userPin:(n==null?void 0:n.pin)||"GUEST",onGoToAdmin:M.onGoToAdmin,onGoToPlatformAdmin:M.onGoToPlatformAdmin,effectivePhase:"scheduled",seasonData:{_id:"guest-season-1",name:"BCAPL Singles Division - Guest Preview",division:"FRBCAPL TEST",startDate:new Date,endDate:new Date(Date.now()+60*24*60*60*1e3),phase1EndDate:new Date(Date.now()+42*24*60*60*1e3),totalWeeks:10,currentWeek:3,isActive:!0},completedMatches:[{_id:"guest-match-1",player1Id:"Guest User",player2Id:"John Smith",winner:"Guest User",score:"5-3",matchDate:new Date(Date.now()-7*24*60*60*1e3),status:"completed"},{_id:"guest-match-2",player1Id:"Guest User",player2Id:"Jane Doe",winner:"Jane Doe",score:"3-5",matchDate:new Date(Date.now()-14*24*60*60*1e3),status:"completed"}],totalRequiredMatches:6,selectedDivision:"FRBCAPL TEST",pendingCount:2,sentCount:1,upcomingMatches:[{_id:"guest-upcoming-1",player1Id:"Guest User",player2Id:"Mike Johnson",proposedDate:new Date(Date.now()+7*24*60*60*1e3),status:"pending"}],allPlayers:[{firstName:"Guest",lastName:"User",email:"guest@frontrangepool.com"},{firstName:"John",lastName:"Smith",email:"john@example.com"},{firstName:"Jane",lastName:"Doe",email:"jane@example.com"},{firstName:"Mike",lastName:"Johnson",email:"mike@example.com"}],standings:[{rank:1,playerName:"John Smith",points:120,matchesPlayed:6},{rank:2,playerName:"Jane Doe",points:110,matchesPlayed:6},{rank:3,playerName:"Guest User",points:100,matchesPlayed:6},{rank:4,playerName:"Mike Johnson",points:90,matchesPlayed:6}],onOpenOpponentsModal:M.onOpenOpponentsModal,onOpenCompletedMatchesModal:M.onOpenCompletedMatchesModal,onOpenStandingsModal:M.onOpenStandingsModal,onOpenAllMatchesModal:M.onOpenAllMatchesModal,onOpenProposalListModal:M.onOpenProposalListModal,onOpenSentProposalListModal:M.onOpenSentProposalListModal,onMatchClick:M.onMatchClick,onOpenMessageCenter:M.onOpenMessageCenter,onSmartMatchClick:M.onSmartMatchClick,onOpenCalendar:M.onOpenCalendar}))),r==="info"&&e.createElement("div",{className:"info-section"},e.createElement("h2",null,"League Information"),e.createElement("div",{className:"info-cards"},e.createElement("div",{className:"info-card"},e.createElement("h3",null,"🏆 League Structure"),e.createElement("p",null,"BCAPL Singles Division - Hybrid Format"),e.createElement("ul",null,e.createElement("li",null,"Maximum 30 players per session"),e.createElement("li",null,"10-week sessions with two phases"),e.createElement("li",null,"Phase 1 - Weeks 1-6: ",e.createElement("br",null),"Scheduled opponents (6 matches)"),e.createElement("li",null,"Phase 2 - Weeks 7-10: ",e.createElement("br",null),"Challenge matches (2-4 matches)"),e.createElement("li",null,"FargoRate integrated rankings"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"📅 Match System"),e.createElement("p",null,"Flexible scheduling with two distinct phases"),e.createElement("ul",null,e.createElement("li",null,"Phase 1: 6 assigned opponents (any time, any location)"),e.createElement("li",null,"Phase 2: Challenge matches (up to 4 spots higher)"),e.createElement("li",null,"Race to 5 games per match"),e.createElement("li",null,"10 points per game won + 10 bonus for match winner"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"💬 Communication"),e.createElement("p",null,"Official scheduling hub and coordination system"),e.createElement("ul",null,e.createElement("li",null,"League website: https://frusapl.com"),e.createElement("li",null,"Scheduling Hub for match coordination"),e.createElement("li",null,"Direct messaging between players"),e.createElement("li",null,"League chat room for announcements"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"📊 Statistics & Rankings"),e.createElement("p",null,"FargoRate integrated scoring and tracking"),e.createElement("ul",null,e.createElement("li",null,"BCAPL scoring app for all matches"),e.createElement("li",null,"FargoRate standings and statistics"),e.createElement("li",null,"Total points determine final rankings"),e.createElement("li",null,"Handicapping based on FargoRate difference"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"💰 Fee Structure"),e.createElement("p",null,"Transparent pricing for BCAPL singles division"),e.createElement("ul",null,e.createElement("li",null,"Registration: $30 per player per division"),e.createElement("li",null,"Weekly dues: $10 per week"),e.createElement("li",null,"Sessions: 10 weeks long"),e.createElement("li",null,"Maximum: 30 players per division"))),e.createElement("div",{className:"info-card"},e.createElement("h3",null,"🏆 Prize Payouts"),e.createElement("p",null,"Estimated payouts for BCAPL singles division based on 30 players"),e.createElement("h4",{style:{marginTop:"0.5rem",color:"#4CAF50",fontSize:"1rem"}},"🏅 Main Payouts"),e.createElement("ul",null,e.createElement("li",null,"1st Place: $600"),e.createElement("li",null,"2nd Place: $500"),e.createElement("li",null,"3rd Place: $400"),e.createElement("li",null,"4th Place: $300")),e.createElement("h4",{style:{marginTop:"0.5rem",color:"#4CAF50",fontSize:"1rem"}},"🎁 Special Awards ($100 each)"),e.createElement("ul",null,e.createElement("li",null,"Most Challenge Positions Gained (most spots climbed during challenge phase)"),e.createElement("li",null,"Biggest FargoRate Increase (min. 200+ robustness at end)"),e.createElement("li",null,"Sportsmanship Award (by player vote)"),e.createElement("li",null,"Random Drawing for Full Participation (all 10 matches completed)"),e.createElement("li",null,"Random Drawing for Full Pre-payment (paid in full before week 2)")),e.createElement("p",{style:{marginTop:"1rem",fontSize:"0.85rem",color:"#ccc",fontStyle:"italic",borderTop:"1px solid rgba(255, 255, 255, 0.2)",paddingTop:"0.5rem"}},e.createElement("strong",null,"Note:")," Places paid, amounts, and special prizes subject to change based on number of players in division."))),e.createElement("div",{className:"join-section"},e.createElement("h3",null,"Ready to Join?"),e.createElement("p",null,"Become a member to access all features and start competing!"),e.createElement("button",{onClick:E,className:"join-btn-large"},"🏆 Join the League Today"),e.createElement("p",{className:"contact-info"},"Contact: ",e.createElement("strong",null,"frbcapl@gmail.com"))))),g&&e.createElement(Bt,{open:g,onClose:()=>f(!1),title:"🏆 Join Front Range Pool League - BCAPL Singles Division",maxWidth:"700px"},e.createElement("form",{onSubmit:I},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"0.75rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"firstName",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"First Name *"),e.createElement("input",{type:"text",id:"firstName",value:y.firstName,onChange:N=>v({...y,firstName:N.target.value}),required:!0,placeholder:"Enter your first name",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"lastName",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Last Name *"),e.createElement("input",{type:"text",id:"lastName",value:y.lastName,onChange:N=>v({...y,lastName:N.target.value}),required:!0,placeholder:"Enter your last name",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}}))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"0.75rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"email",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Email Address *"),e.createElement("input",{type:"email",id:"email",value:y.email,onChange:N=>v({...y,email:N.target.value}),required:!0,placeholder:"Enter your email address",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"phone",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Phone Number"),e.createElement("input",{type:"tel",id:"phone",value:y.phone,onChange:N=>v({...y,phone:N.target.value}),placeholder:"Enter your phone number (optional)",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}}))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"0.75rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"fargoRate",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Fargo Rate, if applicable"),e.createElement("input",{type:"number",id:"fargoRate",value:y.fargoRate,onChange:N=>v({...y,fargoRate:N.target.value}),min:"0",max:"850",placeholder:"Enter your Fargo rate (optional)",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"experience",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Experience Level"),e.createElement("select",{id:"experience",value:y.experience,onChange:N=>v({...y,experience:N.target.value}),style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}},e.createElement("option",{value:"beginner"},"Beginner"),e.createElement("option",{value:"intermediate"},"Intermediate"),e.createElement("option",{value:"advanced"},"Advanced"),e.createElement("option",{value:"expert"},"Expert")))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"0.75rem"}},e.createElement("div",null,e.createElement("label",{htmlFor:"currentLeague",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Current League (Optional)"),e.createElement("input",{type:"text",id:"currentLeague",value:y.currentLeague,onChange:N=>v({...y,currentLeague:N.target.value}),placeholder:"e.g., APA, BCA, Local League",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"currentRanking",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Current Ranking (Optional)"),e.createElement("input",{type:"text",id:"currentRanking",value:y.currentRanking,onChange:N=>v({...y,currentRanking:N.target.value}),placeholder:"e.g., 5, 6, 7, 8, 9",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",boxSizing:"border-box"}}))),e.createElement("div",{style:{marginBottom:"0.75rem"}},e.createElement("label",{htmlFor:"message",style:{display:"block",color:"#fff",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"1rem"}},"Additional Message (Optional)"),e.createElement("textarea",{id:"message",value:y.message,onChange:N=>v({...y,message:N.target.value}),placeholder:"Tell us about your pool experience, goals, or any questions you have...",style:{width:"100%",padding:"0.8rem",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"1rem",minHeight:"60px",maxHeight:"80px",resize:"vertical",boxSizing:"border-box"}})),e.createElement("div",{style:{display:"flex",gap:"1rem",marginTop:"0.5rem"}},e.createElement("button",{type:"button",onClick:()=>f(!1),disabled:S,style:{flex:1,padding:"0.8rem 1.2rem",background:"transparent",color:"#ccc",border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease"}},"Cancel"),e.createElement("button",{type:"submit",disabled:S,style:{flex:1,padding:"0.8rem 1.2rem",background:"linear-gradient(45deg, #4CAF50, #45a049)",color:"white",border:"2px solid #4CAF50",borderRadius:"8px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease"}},S?"Submitting...":"🏆 Join BCAPL Singles Division"))),e.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"8px",padding:"0.6rem",marginTop:"0.5rem"}},e.createElement("h3",{style:{color:"#4CAF50",margin:"0 0 0.5rem 0",fontSize:"1rem",fontWeight:"bold"}},"📋 What to Expect"),e.createElement("ul",{style:{margin:"0",paddingLeft:"1rem",color:"#ccc",fontSize:"0.9rem",lineHeight:"1.3"}},e.createElement("li",null,"We'll review your application and contact you as soon as possible"),e.createElement("li",null,"After registration fee is received, you'll be placed in an appropriate BCAPL singles division based on division availability"),e.createElement("li",null,"Start competing in regular season matches and BCAPL tournaments"),e.createElement("li",null,"Track your standings and statistics throughout the BCAPL season")))))},Bj=()=>{const a=er(),[r]=V0(),[t,n]=h.useState(!0),[o,i]=h.useState(null),[c,u]=h.useState(null);h.useEffect(()=>{m()},[]);const m=async()=>{try{const y=r.get("email"),v=r.get("type"),S=r.get("claimData");if(!y||!v||!S){u("Missing payment information. Please contact support."),n(!1);return}const w=JSON.parse(decodeURIComponent(S));console.log("🔍 Verifying payment for:",y),console.log("📋 Claim data:",w);const x=await fetch(`${de}/api/monetization/check-payment-status`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:y,claimData:w})});if(x.ok){const k=await x.json();console.log("✅ Payment verification result:",k),k.success&&k.paymentStatus==="completed"?i({success:!0,message:`🎉 Payment successful! Your claim for Position #${w.position} in the ${w.ladder} ladder has been approved.`,claimData:k.claimData}):u("Payment verification failed. Please contact support.")}else u("Failed to verify payment. Please contact support.")}catch(y){console.error("Error verifying payment:",y),u("An error occurred while verifying payment. Please contact support.")}finally{n(!1)}},g=()=>{a("/guest/ladder?paymentSuccess=true")},f=()=>{window.location.href="mailto:frbcapl@gmail.com?subject=Payment Verification Issue"};return t?e.createElement("div",{className:"payment-success-container"},e.createElement("div",{className:"verification-section"},e.createElement("div",{className:"loading-spinner"},"⏳"),e.createElement("h2",null,"Verifying Payment..."),e.createElement("p",null,"Please wait while we verify your payment with Square."))):c?e.createElement("div",{className:"payment-success-container"},e.createElement("div",{className:"error-section"},e.createElement("div",{className:"error-icon"},"❌"),e.createElement("h2",null,"Payment Verification Failed"),e.createElement("p",{className:"error-message"},c),e.createElement("div",{className:"action-buttons"},e.createElement("button",{onClick:g,className:"return-btn"},"← Return to Ladder"),e.createElement("button",{onClick:f,className:"contact-btn"},"📧 Contact Support")))):o!=null&&o.success?e.createElement("div",{className:"payment-success-container"},e.createElement("div",{className:"success-section"},e.createElement("div",{className:"success-icon"},"🎉"),e.createElement("h2",null,"Payment Successful!"),e.createElement("div",{className:"success-message"},e.createElement("p",null,o.message),e.createElement("div",{className:"claim-details"},e.createElement("h3",null,"Claim Details:"),e.createElement("ul",null,e.createElement("li",null,e.createElement("strong",null,"Position:")," #",o.claimData.position),e.createElement("li",null,e.createElement("strong",null,"Ladder:")," ",o.claimData.ladder),e.createElement("li",null,e.createElement("strong",null,"Email:")," ",o.claimData.email),e.createElement("li",null,e.createElement("strong",null,"Player:")," ",o.claimData.playerName))),e.createElement("div",{className:"next-steps"},e.createElement("h3",null,"Next Steps:"),e.createElement("ol",null,e.createElement("li",null,"Your claim has been approved and recorded"),e.createElement("li",null,"You now have access to all ladder features"),e.createElement("li",null,"You can start challenging other players"),e.createElement("li",null,"Your membership will be automatically renewed monthly")))),e.createElement("div",{className:"action-buttons"},e.createElement("button",{onClick:g,className:"return-btn"},"🎯 Return to Ladder")))):e.createElement("div",{className:"payment-success-container"},e.createElement("div",{className:"unknown-section"},e.createElement("div",{className:"unknown-icon"},"❓"),e.createElement("h2",null,"Payment Status Unknown"),e.createElement("p",null,"We couldn't determine the status of your payment. Please contact support."),e.createElement("div",{className:"action-buttons"},e.createElement("button",{onClick:g,className:"return-btn"},"← Return to Ladder"),e.createElement("button",{onClick:f,className:"contact-btn"},"📧 Contact Support"))))};function zj({isAuthenticated:a,userFirstName:r,userLastName:t,userEmail:n,userPin:o,userType:i,handleLoginSuccess:c,handleLogout:u}){return er(),e.createElement("main",{className:"main-app-content"},a?e.createElement(iS,{isAuthenticated:a,userFirstName:r,userLastName:t,userEmail:n,userPin:o,userType:i,handleLogout:u}):e.createElement(u$,{onLoginSuccess:c}))}function Oj(){const a=fo(),[r,t]=h.useState(!1);h.useEffect(()=>{},[]);const[n,o]=h.useState(""),[i,c]=h.useState(""),[u,m]=h.useState(""),[g,f]=h.useState(""),[y,v]=h.useState("league"),[S,w]=h.useState("");h.useEffect(()=>{localStorage.getItem("isAuthenticated")==="true"&&(o(localStorage.getItem("userFirstName")||""),c(localStorage.getItem("userLastName")||""),m(localStorage.getItem("userEmail")||""),f(localStorage.getItem("userPin")||""),v(localStorage.getItem("userType")||"league"),t(!0))},[]),h.useEffect(()=>{const J=D=>{w(D.detail)},Y=D=>{console.log("App.jsx received ladderLoginSuccess event:",D.detail);const{name:A,email:U,pin:K,userType:X}=D.detail;x(A,U,K,X)};return window.addEventListener("appNameChange",J),window.addEventListener("ladderLoginSuccess",Y),()=>{window.removeEventListener("appNameChange",J),window.removeEventListener("ladderLoginSuccess",Y)}},[]);const x=(J,Y,D,A,U=null)=>{let K="",X="";if(J){const O=J.trim().split(" ");K=O[0],X=O.slice(1).join(" ")}o(K),c(X),m(Y),f(D),v(A||"league"),t(!0),localStorage.setItem("userFirstName",K),localStorage.setItem("userLastName",X),localStorage.setItem("userEmail",Y),localStorage.setItem("userPin",D),localStorage.setItem("userType",A||"league"),localStorage.setItem("isAuthenticated","true"),U&&localStorage.setItem("unifiedUserData",JSON.stringify(U)),console.log("🔐 Unified Login Success:",{firstName:K,lastName:X,email:Y,userType:A,pin:D?"***":"none",hasUserData:!!U})},[k,E]=h.useState(!1),[I,M]=h.useState(!1),[N,_]=h.useState(!1),[P,B]=h.useState(!1),R=()=>k,W=()=>I;h.useEffect(()=>{(async()=>{if(r&&u&&g){_(!0);try{const Y=await Kl.isSuperAdmin(u,g);E(Y);const D=await Kl.isAdmin(u,g);M(D),console.log("🔍 Admin Status Check:",{userEmail:u,isSuperAdmin:Y,isAdmin:D})}catch(Y){console.log("🔍 Admin check failed:",Y.message),E(!1),M(!1)}finally{_(!1)}}})()},[r,u,g]);const L=()=>{B(!0)},F=()=>{o(""),c(""),m(""),f(""),v("league"),w(""),t(!1),M(!1),E(!1),localStorage.removeItem("userFirstName"),localStorage.removeItem("userLastName"),localStorage.removeItem("userEmail"),localStorage.removeItem("userPin"),localStorage.removeItem("userType"),localStorage.removeItem("isAuthenticated")},j=J=>{console.log("Claiming ladder position:",J)};return a.pathname==="/ladder-embed"?e.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",padding:0,margin:0,zIndex:9999,overflow:"auto"}},e.createElement(fj,null)):e.createElement("div",{style:{position:"relative",minHeight:"100vh",width:"100%",overflowX:"hidden",background:"#000"}},(()=>{const J=a.pathname.startsWith("/ladder");return console.log("🔍 Current pathname:",a.pathname),console.log("🔍 Is ladder route:",J),console.log("🔍 Should show global FloatingLogos:",!J),!J&&e.createElement(YU,null)})(),e.createElement(m$,{currentAppName:S,isAdmin:I,isSuperAdmin:k,onLogout:F,userFirstName:n,userLastName:i,onProfileClick:L}),e.createElement("div",{style:{position:"relative",zIndex:3,maxWidth:900,margin:"0 auto",width:"100%",background:"none",minHeight:"100vh",paddingTop:"20px"}},e.createElement(wx,null,e.createElement(Xa,{path:"/hub",element:r?e.createElement(_r,{appName:"Front Range Pool Hub"},e.createElement("main",{className:"main-app-content"},e.createElement(iS,{isAuthenticated:r,userFirstName:n,userLastName:i,userEmail:u,userPin:g,userType:y,handleLogout:F}))):e.createElement(io,{to:"/"})}),e.createElement(Xa,{path:"/league",element:r?e.createElement(_r,{appName:"Front Range Pool League"},e.createElement("main",{className:"main-app-content"},e.createElement(rS,{playerName:n,playerLastName:i,senderEmail:u,onScheduleMatch:()=>{},onOpenChat:()=>window.location.hash="#/league/chat",userPin:g,onGoToAdmin:()=>{},onGoToPlatformAdmin:()=>navigate("/platform-admin"),isAdmin:I}))):e.createElement(io,{to:"/"})}),e.createElement(Xa,{path:"/league/chat",element:r?e.createElement(_r,{appName:"Front Range Pool League - Chat"},e.createElement("main",{className:"main-app-content"},e.createElement(Lw,{userName:`${n} ${i}`,userEmail:u,userPin:g}))):e.createElement(io,{to:"/"})}),e.createElement(Xa,{path:"/ladder",element:r?e.createElement(_r,{appName:"Ladder of Legends"},e.createElement("main",{className:"main-app-content"},e.createElement(Bd,{playerName:n,playerLastName:i,senderEmail:u,userPin:g,isAdmin:I,userType:y,onClaimLadderPosition:j,setShowProfileModal:B}))):e.createElement(io,{to:"/"})}),e.createElement(Xa,{path:"/guest/league",element:e.createElement(_r,{appName:"League App - Guest Preview"},e.createElement("main",{className:"main-app-content"},e.createElement(Lj,null)))}),e.createElement(Xa,{path:"/guest/ladder",element:e.createElement(_r,{appName:"Ladder of Legends - Guest Preview"},e.createElement("main",{className:"main-app-content"},e.createElement(d$,null)))}),e.createElement(Xa,{path:"/ladder/manage",element:r&&W()?e.createElement(_r,{appName:"Ladder of Legends Management"},e.createElement("main",{className:"main-app-content"},e.createElement(y$,{userEmail:u,userPin:g}))):e.createElement(io,{to:"/"})}),e.createElement(Xa,{path:"/ladder/admin",element:r&&W()?e.createElement(_r,{appName:"Ladder of Legends Player Management"},e.createElement("main",{className:"main-app-content"},e.createElement(pj,null))):e.createElement(io,{to:"/"})}),e.createElement(Xa,{path:"/embed/*",element:e.createElement(gj,null)}),e.createElement(Xa,{path:"/admin",element:r&&W()?e.createElement(_r,{appName:"Admin Dashboard"},e.createElement("div",{className:"admin-app-content"},e.createElement(hW,null))):e.createElement(io,{to:"/"})}),e.createElement(Xa,{path:"/dues-tracker",element:r&&W()?e.createElement(_r,{appName:"USA Pool League Dues Tracker"},e.createElement("main",{className:"main-app-content"},e.createElement(Pj,null))):e.createElement(io,{to:"/"})}),e.createElement(Xa,{path:"/admin/players",element:r&&W()?e.createElement(_r,{appName:"Player Management"},e.createElement("div",{className:"admin-app-content"},e.createElement(Tj,null))):e.createElement(io,{to:"/"})}),e.createElement(Xa,{path:"/platform-admin",element:r&&R()?e.createElement(_r,{appName:"Platform Admin"},e.createElement("div",{className:"platform-admin-app-content"},e.createElement(yW,null))):e.createElement(io,{to:"/"})}),e.createElement(Xa,{path:"/confirm-match",element:e.createElement(hI,null)}),e.createElement(Xa,{path:"/payment-success",element:e.createElement(Bj,null)}),e.createElement(Xa,{path:"/simple-pool",element:e.createElement(W0,null)}),e.createElement(Xa,{path:"/tenball-tutorial",element:e.createElement(WU,null)}),e.createElement(Xa,{path:"/mobile-test",element:e.createElement(qU,null)}),e.createElement(Xa,{path:"/",element:e.createElement(_r,{appName:r?"Front Range Pool Hub":""},e.createElement(zj,{isAuthenticated:r,userFirstName:n,userLastName:i,userEmail:u,userPin:g,userType:y,handleLoginSuccess:x,handleLogout:F}))}),e.createElement(Xa,{path:"*",element:e.createElement(io,{to:"/"})}))),r&&e.createElement(aS,{isOpen:P,onClose:()=>B(!1),currentUser:{firstName:n,lastName:i,email:u,phone:"",locations:"",availability:{}},isMobile:!1,onUserUpdate:()=>{console.log("Profile updated from global modal")}}))}function Fj(){return e.createElement(_x,null,e.createElement(Oj,null))}try{QC(async()=>{const{default:a}=await import("./ResizeObserver.es-EPYnRShv.js");return{default:a}},[],import.meta.url).then(({default:a})=>{window.ResizeObserver||(window.ResizeObserver=a)}).catch(()=>{console.warn("ResizeObserver polyfill not available")})}catch(a){console.warn("ResizeObserver polyfill setup failed:",a)}if(typeof window<"u"){const a=window.self!==window.top;console.log("🔍 DEBUG - Iframe detection:",a),console.log("🔍 DEBUG - window.self:",window.self),console.log("🔍 DEBUG - window.top:",window.top),console.log("🔍 DEBUG - window.location:",window.location.href),console.log("🔍 DEBUG - document.referrer:",document.referrer),console.log("✅ Running in normal mode (iframe detection disabled)")}r3.createRoot(document.getElementById("root")).render(e.createElement(e.StrictMode,null,e.createElement(Fj,null)));
