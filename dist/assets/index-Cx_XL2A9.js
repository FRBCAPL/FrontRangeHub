var W5=Object.defineProperty;var j5=(t,a,e)=>a in t?W5(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e;var Be=(t,a,e)=>j5(t,typeof a!="symbol"?a+"":a,e);function H5(t,a){for(var e=0;e<a.length;e++){const n=a[e];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const l=Object.getOwnPropertyDescriptor(n,s);l&&Object.defineProperty(t,s,l.get?l:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=e(s);fetch(s.href,l)}})();function o0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rh={exports:{}},mt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hv;function Y5(){if(hv)return mt;hv=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.iterator;function x(R){return R===null||typeof R!="object"?null:(R=b&&R[b]||R["@@iterator"],typeof R=="function"?R:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function _(R,j,ne){this.props=R,this.context=j,this.refs=S,this.updater=ne||E}_.prototype.isReactComponent={},_.prototype.setState=function(R,j){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,j,"setState")},_.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function C(){}C.prototype=_.prototype;function D(R,j,ne){this.props=R,this.context=j,this.refs=S,this.updater=ne||E}var I=D.prototype=new C;I.constructor=D,w(I,_.prototype),I.isPureReactComponent=!0;var A=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function J(R,j,ne,ae,se,V){return ne=V.ref,{$$typeof:t,type:R,key:j,ref:ne!==void 0?ne:null,props:V}}function H(R,j){return J(R.type,j,void 0,void 0,void 0,R.props)}function Z(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function K(R){var j={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ne){return j[ne]})}var X=/\/+/g;function W(R,j){return typeof R=="object"&&R!==null&&R.key!=null?K(""+R.key):j.toString(36)}function O(){}function B(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(O,O):(R.status="pending",R.then(function(j){R.status==="pending"&&(R.status="fulfilled",R.value=j)},function(j){R.status==="pending"&&(R.status="rejected",R.reason=j)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function U(R,j,ne,ae,se){var V=typeof R;(V==="undefined"||V==="boolean")&&(R=null);var pe=!1;if(R===null)pe=!0;else switch(V){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(R.$$typeof){case t:case a:pe=!0;break;case m:return pe=R._init,U(pe(R._payload),j,ne,ae,se)}}if(pe)return se=se(R),pe=ae===""?"."+W(R,0):ae,A(se)?(ne="",pe!=null&&(ne=pe.replace(X,"$&/")+"/"),U(se,j,ne,"",function(Fe){return Fe})):se!=null&&(Z(se)&&(se=H(se,ne+(se.key==null||R&&R.key===se.key?"":(""+se.key).replace(X,"$&/")+"/")+pe)),j.push(se)),1;pe=0;var Ie=ae===""?".":ae+":";if(A(R))for(var fe=0;fe<R.length;fe++)ae=R[fe],V=Ie+W(ae,fe),pe+=U(ae,j,ne,V,se);else if(fe=x(R),typeof fe=="function")for(R=fe.call(R),fe=0;!(ae=R.next()).done;)ae=ae.value,V=Ie+W(ae,fe++),pe+=U(ae,j,ne,V,se);else if(V==="object"){if(typeof R.then=="function")return U(B(R),j,ne,ae,se);throw j=String(R),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return pe}function M(R,j,ne){if(R==null)return R;var ae=[],se=0;return U(R,ae,"","",function(V){return j.call(ne,V,se++)}),ae}function z(R){if(R._status===-1){var j=R._result;j=j(),j.then(function(ne){(R._status===0||R._status===-1)&&(R._status=1,R._result=ne)},function(ne){(R._status===0||R._status===-1)&&(R._status=2,R._result=ne)}),R._status===-1&&(R._status=0,R._result=j)}if(R._status===1)return R._result.default;throw R._result}var G=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function q(){}return mt.Children={map:M,forEach:function(R,j,ne){M(R,function(){j.apply(this,arguments)},ne)},count:function(R){var j=0;return M(R,function(){j++}),j},toArray:function(R){return M(R,function(j){return j})||[]},only:function(R){if(!Z(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},mt.Component=_,mt.Fragment=e,mt.Profiler=s,mt.PureComponent=D,mt.StrictMode=n,mt.Suspense=p,mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,mt.__COMPILER_RUNTIME={__proto__:null,c:function(R){return T.H.useMemoCache(R)}},mt.cache=function(R){return function(){return R.apply(null,arguments)}},mt.cloneElement=function(R,j,ne){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var ae=w({},R.props),se=R.key,V=void 0;if(j!=null)for(pe in j.ref!==void 0&&(V=void 0),j.key!==void 0&&(se=""+j.key),j)!F.call(j,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&j.ref===void 0||(ae[pe]=j[pe]);var pe=arguments.length-2;if(pe===1)ae.children=ne;else if(1<pe){for(var Ie=Array(pe),fe=0;fe<pe;fe++)Ie[fe]=arguments[fe+2];ae.children=Ie}return J(R.type,se,void 0,void 0,V,ae)},mt.createContext=function(R){return R={$$typeof:c,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:l,_context:R},R},mt.createElement=function(R,j,ne){var ae,se={},V=null;if(j!=null)for(ae in j.key!==void 0&&(V=""+j.key),j)F.call(j,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(se[ae]=j[ae]);var pe=arguments.length-2;if(pe===1)se.children=ne;else if(1<pe){for(var Ie=Array(pe),fe=0;fe<pe;fe++)Ie[fe]=arguments[fe+2];se.children=Ie}if(R&&R.defaultProps)for(ae in pe=R.defaultProps,pe)se[ae]===void 0&&(se[ae]=pe[ae]);return J(R,V,void 0,void 0,null,se)},mt.createRef=function(){return{current:null}},mt.forwardRef=function(R){return{$$typeof:d,render:R}},mt.isValidElement=Z,mt.lazy=function(R){return{$$typeof:m,_payload:{_status:-1,_result:R},_init:z}},mt.memo=function(R,j){return{$$typeof:h,type:R,compare:j===void 0?null:j}},mt.startTransition=function(R){var j=T.T,ne={};T.T=ne;try{var ae=R(),se=T.S;se!==null&&se(ne,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(q,G)}catch(V){G(V)}finally{T.T=j}},mt.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},mt.use=function(R){return T.H.use(R)},mt.useActionState=function(R,j,ne){return T.H.useActionState(R,j,ne)},mt.useCallback=function(R,j){return T.H.useCallback(R,j)},mt.useContext=function(R){return T.H.useContext(R)},mt.useDebugValue=function(){},mt.useDeferredValue=function(R,j){return T.H.useDeferredValue(R,j)},mt.useEffect=function(R,j,ne){var ae=T.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(R,j)},mt.useId=function(){return T.H.useId()},mt.useImperativeHandle=function(R,j,ne){return T.H.useImperativeHandle(R,j,ne)},mt.useInsertionEffect=function(R,j){return T.H.useInsertionEffect(R,j)},mt.useLayoutEffect=function(R,j){return T.H.useLayoutEffect(R,j)},mt.useMemo=function(R,j){return T.H.useMemo(R,j)},mt.useOptimistic=function(R,j){return T.H.useOptimistic(R,j)},mt.useReducer=function(R,j,ne){return T.H.useReducer(R,j,ne)},mt.useRef=function(R){return T.H.useRef(R)},mt.useState=function(R){return T.H.useState(R)},mt.useSyncExternalStore=function(R,j,ne){return T.H.useSyncExternalStore(R,j,ne)},mt.useTransition=function(){return T.H.useTransition()},mt.version="19.1.0",mt}var gv;function l0(){return gv||(gv=1,Rh.exports=Y5()),Rh.exports}var v=l0();const i=o0(v),Ax=H5({__proto__:null,default:i},[v]);var Lh={exports:{}},wc={},Ph={exports:{}},Bh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv;function G5(){return yv||(yv=1,function(t){function a(M,z){var G=M.length;M.push(z);e:for(;0<G;){var q=G-1>>>1,R=M[q];if(0<s(R,z))M[q]=z,M[G]=R,G=q;else break e}}function e(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var z=M[0],G=M.pop();if(G!==z){M[0]=G;e:for(var q=0,R=M.length,j=R>>>1;q<j;){var ne=2*(q+1)-1,ae=M[ne],se=ne+1,V=M[se];if(0>s(ae,G))se<R&&0>s(V,ae)?(M[q]=V,M[se]=G,q=se):(M[q]=ae,M[ne]=G,q=ne);else if(se<R&&0>s(V,G))M[q]=V,M[se]=G,q=se;else break e}}return z}function s(M,z){var G=M.sortIndex-z.sortIndex;return G!==0?G:M.id-z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var p=[],h=[],m=1,b=null,x=3,E=!1,w=!1,S=!1,_=!1,C=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function A(M){for(var z=e(h);z!==null;){if(z.callback===null)n(h);else if(z.startTime<=M)n(h),z.sortIndex=z.expirationTime,a(p,z);else break;z=e(h)}}function T(M){if(S=!1,A(M),!w)if(e(p)!==null)w=!0,F||(F=!0,W());else{var z=e(h);z!==null&&U(T,z.startTime-M)}}var F=!1,J=-1,H=5,Z=-1;function K(){return _?!0:!(t.unstable_now()-Z<H)}function X(){if(_=!1,F){var M=t.unstable_now();Z=M;var z=!0;try{e:{w=!1,S&&(S=!1,D(J),J=-1),E=!0;var G=x;try{t:{for(A(M),b=e(p);b!==null&&!(b.expirationTime>M&&K());){var q=b.callback;if(typeof q=="function"){b.callback=null,x=b.priorityLevel;var R=q(b.expirationTime<=M);if(M=t.unstable_now(),typeof R=="function"){b.callback=R,A(M),z=!0;break t}b===e(p)&&n(p),A(M)}else n(p);b=e(p)}if(b!==null)z=!0;else{var j=e(h);j!==null&&U(T,j.startTime-M),z=!1}}break e}finally{b=null,x=G,E=!1}z=void 0}}finally{z?W():F=!1}}}var W;if(typeof I=="function")W=function(){I(X)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,B=O.port2;O.port1.onmessage=X,W=function(){B.postMessage(null)}}else W=function(){C(X,0)};function U(M,z){J=C(function(){M(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(M){switch(x){case 1:case 2:case 3:var z=3;break;default:z=x}var G=x;x=z;try{return M()}finally{x=G}},t.unstable_requestPaint=function(){_=!0},t.unstable_runWithPriority=function(M,z){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var G=x;x=M;try{return z()}finally{x=G}},t.unstable_scheduleCallback=function(M,z,G){var q=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?q+G:q):G=q,M){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=G+R,M={id:m++,callback:z,priorityLevel:M,startTime:G,expirationTime:R,sortIndex:-1},G>q?(M.sortIndex=G,a(h,M),e(p)===null&&M===e(h)&&(S?(D(J),J=-1):S=!0,U(T,G-q))):(M.sortIndex=R,a(p,M),w||E||(w=!0,F||(F=!0,W()))),M},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(M){var z=x;return function(){var G=x;x=z;try{return M.apply(this,arguments)}finally{x=G}}}}(Bh)),Bh}var bv;function $5(){return bv||(bv=1,Ph.exports=G5()),Ph.exports}var Oh={exports:{}},pa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv;function Z5(){if(vv)return pa;vv=1;var t=l0();function a(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(a(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(p,h,m){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:b==null?null:""+b,children:p,containerInfo:h,implementation:m}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return pa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,pa.createPortal=function(p,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(a(299));return l(p,h,null,m)},pa.flushSync=function(p){var h=c.T,m=n.p;try{if(c.T=null,n.p=2,p)return p()}finally{c.T=h,n.p=m,n.d.f()}},pa.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(p,h))},pa.prefetchDNS=function(p){typeof p=="string"&&n.d.D(p)},pa.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var m=h.as,b=d(m,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,E=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?n.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:E}):m==="script"&&n.d.X(p,{crossOrigin:b,integrity:x,fetchPriority:E,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},pa.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=d(h.as,h.crossOrigin);n.d.M(p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(p)},pa.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,b=d(m,h.crossOrigin);n.d.L(p,m,{crossOrigin:b,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},pa.preloadModule=function(p,h){if(typeof p=="string")if(h){var m=d(h.as,h.crossOrigin);n.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(p)},pa.requestFormReset=function(p){n.d.r(p)},pa.unstable_batchedUpdates=function(p,h){return p(h)},pa.useFormState=function(p,h,m){return c.H.useFormState(p,h,m)},pa.useFormStatus=function(){return c.H.useHostTransitionStatus()},pa.version="19.1.0",pa}var xv;function Mx(){if(xv)return Oh.exports;xv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Oh.exports=Z5(),Oh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function q5(){if(wv)return wc;wv=1;var t=$5(),a=l0(),e=Mx();function n(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function c(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(n(188))}function p(r){var o=r.alternate;if(!o){if(o=l(r),o===null)throw Error(n(188));return o!==r?null:r}for(var u=r,f=o;;){var g=u.return;if(g===null)break;var y=g.alternate;if(y===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===u)return d(g),r;if(y===f)return d(g),o;y=y.sibling}throw Error(n(188))}if(u.return!==f.return)u=g,f=y;else{for(var k=!1,N=g.child;N;){if(N===u){k=!0,u=g,f=y;break}if(N===f){k=!0,f=g,u=y;break}N=N.sibling}if(!k){for(N=y.child;N;){if(N===u){k=!0,u=y,f=g;break}if(N===f){k=!0,f=y,u=g;break}N=N.sibling}if(!k)throw Error(n(189))}}if(u.alternate!==f)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?r:o}function h(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=h(r),o!==null)return o;r=r.sibling}return null}var m=Object.assign,b=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),I=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function W(r){return r===null||typeof r!="object"?null:(r=X&&r[X]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function B(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case w:return"Fragment";case _:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case F:return"SuspenseList";case Z:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case E:return"Portal";case I:return(r.displayName||"Context")+".Provider";case D:return(r._context.displayName||"Context")+".Consumer";case A:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case J:return o=r.displayName||null,o!==null?o:B(r.type)||"Memo";case H:o=r._payload,r=r._init;try{return B(r(o))}catch{}}return null}var U=Array.isArray,M=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},q=[],R=-1;function j(r){return{current:r}}function ne(r){0>R||(r.current=q[R],q[R]=null,R--)}function ae(r,o){R++,q[R]=r.current,r.current=o}var se=j(null),V=j(null),pe=j(null),Ie=j(null);function fe(r,o){switch(ae(pe,o),ae(V,r),ae(se,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?Hb(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=Hb(o),r=Yb(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ne(se),ae(se,r)}function Fe(){ne(se),ne(V),ne(pe)}function Ve(r){r.memoizedState!==null&&ae(Ie,r);var o=se.current,u=Yb(o,r.type);o!==u&&(ae(V,r),ae(se,u))}function He(r){V.current===r&&(ne(se),ne(V)),Ie.current===r&&(ne(Ie),gc._currentValue=G)}var Qe=Object.prototype.hasOwnProperty,ut=t.unstable_scheduleCallback,Pt=t.unstable_cancelCallback,xt=t.unstable_shouldYield,Hn=t.unstable_requestPaint,Kt=t.unstable_now,Yn=t.unstable_getCurrentPriorityLevel,Zn=t.unstable_ImmediatePriority,pt=t.unstable_UserBlockingPriority,de=t.unstable_NormalPriority,nt=t.unstable_LowPriority,Ye=t.unstable_IdlePriority,Dt=t.log,zt=t.unstable_setDisableYieldValue,$=null,Re=null;function at(r){if(typeof Dt=="function"&&zt(r),Re&&typeof Re.setStrictMode=="function")try{Re.setStrictMode($,r)}catch{}}var Ge=Math.clz32?Math.clz32:Bn,Vt=Math.log,Ct=Math.LN2;function Bn(r){return r>>>=0,r===0?32:31-(Vt(r)/Ct|0)|0}var mn=256,rt=4194304;function On(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function zn(r,o,u){var f=r.pendingLanes;if(f===0)return 0;var g=0,y=r.suspendedLanes,k=r.pingedLanes;r=r.warmLanes;var N=f&134217727;return N!==0?(f=N&~y,f!==0?g=On(f):(k&=N,k!==0?g=On(k):u||(u=N&~r,u!==0&&(g=On(u))))):(N=f&~y,N!==0?g=On(N):k!==0?g=On(k):u||(u=f&~r,u!==0&&(g=On(u)))),g===0?0:o!==0&&o!==g&&(o&y)===0&&(y=g&-g,u=o&-o,y>=u||y===32&&(u&4194048)!==0)?o:g}function wn(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function sn(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ia(){var r=mn;return mn<<=1,(mn&4194048)===0&&(mn=256),r}function Yt(){var r=rt;return rt<<=1,(rt&62914560)===0&&(rt=4194304),r}function ya(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function Un(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function br(r,o,u,f,g,y){var k=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var N=r.entanglements,Y=r.expirationTimes,oe=r.hiddenUpdates;for(u=k&~u;0<u;){var ge=31-Ge(u),we=1<<ge;N[ge]=0,Y[ge]=-1;var le=oe[ge];if(le!==null)for(oe[ge]=null,ge=0;ge<le.length;ge++){var ce=le[ge];ce!==null&&(ce.lane&=-536870913)}u&=~we}f!==0&&na(r,f,0),y!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=y&~(k&~o))}function na(r,o,u){r.pendingLanes|=o,r.suspendedLanes&=~o;var f=31-Ge(o);r.entangledLanes|=o,r.entanglements[f]=r.entanglements[f]|1073741824|u&4194090}function Ws(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var f=31-Ge(u),g=1<<f;g&o|r[f]&o&&(r[f]|=o),u&=~g}}function vr(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function qn(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function is(){var r=z.p;return r!==0?r:(r=window.event,r===void 0?32:cv(r.type))}function Ri(r,o){var u=z.p;try{return z.p=r,o()}finally{z.p=u}}var ua=Math.random().toString(36).slice(2),hn="__reactFiber$"+ua,En="__reactProps$"+ua,ba="__reactContainer$"+ua,js="__reactEvents$"+ua,os="__reactListeners$"+ua,xr="__reactHandles$"+ua,ls="__reactResources$"+ua,wr="__reactMarker$"+ua;function Hs(r){delete r[hn],delete r[En],delete r[js],delete r[os],delete r[xr]}function qa(r){var o=r[hn];if(o)return o;for(var u=r.parentNode;u;){if(o=u[ba]||u[hn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=qb(r);r!==null;){if(u=r[hn])return u;r=qb(r)}return o}r=u,u=r.parentNode}return null}function Rr(r){if(r=r[hn]||r[ba]){var o=r.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return r}return null}function Er(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(n(33))}function Da(r){var o=r[ls];return o||(o=r[ls]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function on(r){r[wr]=!0}var cs=new Set,us={};function Qa(r,o){va(r,o),va(r+"Capture",o)}function va(r,o){for(us[r]=o,r=0;r<o.length;r++)cs.add(o[r])}var Ys=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lr={},Gs={};function Li(r){return Qe.call(Gs,r)?!0:Qe.call(Lr,r)?!1:Ys.test(r)?Gs[r]=!0:(Lr[r]=!0,!1)}function ds(r,o,u){if(Li(o))if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+u)}}function Pi(r,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+u)}}function Va(r,o,u,f){if(f===null)r.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(o,u,""+f)}}var Bi,ka;function Ra(r){if(Bi===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Bi=o&&o[1]||"",ka=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bi+r+ka}var $s=!1;function So(r,o){if(!r||$s)return"";$s=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var we=function(){throw Error()};if(Object.defineProperty(we.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(we,[])}catch(ce){var le=ce}Reflect.construct(r,[],we)}else{try{we.call()}catch(ce){le=ce}r.call(we.prototype)}}else{try{throw Error()}catch(ce){le=ce}(we=r())&&typeof we.catch=="function"&&we.catch(function(){})}}catch(ce){if(ce&&le&&typeof ce.stack=="string")return[ce.stack,le.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=f.DetermineComponentFrameRoot(),k=y[0],N=y[1];if(k&&N){var Y=k.split(`
`),oe=N.split(`
`);for(g=f=0;f<Y.length&&!Y[f].includes("DetermineComponentFrameRoot");)f++;for(;g<oe.length&&!oe[g].includes("DetermineComponentFrameRoot");)g++;if(f===Y.length||g===oe.length)for(f=Y.length-1,g=oe.length-1;1<=f&&0<=g&&Y[f]!==oe[g];)g--;for(;1<=f&&0<=g;f--,g--)if(Y[f]!==oe[g]){if(f!==1||g!==1)do if(f--,g--,0>g||Y[f]!==oe[g]){var ge=`
`+Y[f].replace(" at new "," at ");return r.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",r.displayName)),ge}while(1<=f&&0<=g);break}}}finally{$s=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?Ra(u):""}function Il(r){switch(r.tag){case 26:case 27:case 5:return Ra(r.type);case 16:return Ra("Lazy");case 13:return Ra("Suspense");case 19:return Ra("SuspenseList");case 0:case 15:return So(r.type,!1);case 11:return So(r.type.render,!1);case 1:return So(r.type,!0);case 31:return Ra("Activity");default:return""}}function Oi(r){try{var o="";do o+=Il(r),r=r.return;while(r);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function An(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Pr(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ee(r){var o=Pr(r)?"checked":"value",u=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),f=""+r[o];if(!r.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return g.call(this)},set:function(k){f=""+k,y.call(this,k)}}),Object.defineProperty(r,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(k){f=""+k},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function L(r){r._valueTracker||(r._valueTracker=ee(r))}function he(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return r&&(f=Pr(r)?r.checked?"true":"false":r.value),r=f,r!==u?(o.setValue(r),!0):!1}function ye(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ee=/[\n"\\]/g;function Ae(r){return r.replace(Ee,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ke(r,o,u,f,g,y,k,N){r.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?r.type=k:r.removeAttribute("type"),o!=null?k==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+An(o)):r.value!==""+An(o)&&(r.value=""+An(o)):k!=="submit"&&k!=="reset"||r.removeAttribute("value"),o!=null?st(r,k,An(o)):u!=null?st(r,k,An(u)):f!=null&&r.removeAttribute("value"),g==null&&y!=null&&(r.defaultChecked=!!y),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?r.name=""+An(N):r.removeAttribute("name")}function Le(r,o,u,f,g,y,k,N){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),o!=null||u!=null){if(!(y!=="submit"&&y!=="reset"||o!=null))return;u=u!=null?""+An(u):"",o=o!=null?""+An(o):u,N||o===r.value||(r.value=o),r.defaultValue=o}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,r.checked=N?r.checked:!!f,r.defaultChecked=!!f,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(r.name=k)}function st(r,o,u){o==="number"&&ye(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function We(r,o,u,f){if(r=r.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<r.length;u++)g=o.hasOwnProperty("$"+r[u].value),r[u].selected!==g&&(r[u].selected=g),g&&f&&(r[u].defaultSelected=!0)}else{for(u=""+An(u),o=null,g=0;g<r.length;g++){if(r[g].value===u){r[g].selected=!0,f&&(r[g].defaultSelected=!0);return}o!==null||r[g].disabled||(o=r[g])}o!==null&&(o.selected=!0)}}function dt(r,o,u){if(o!=null&&(o=""+An(o),o!==r.value&&(r.value=o),u==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=u!=null?""+An(u):""}function Ze(r,o,u,f){if(o==null){if(f!=null){if(u!=null)throw Error(n(92));if(U(f)){if(1<f.length)throw Error(n(93));f=f[0]}u=f}u==null&&(u=""),o=u}u=An(o),r.defaultValue=u,f=r.textContent,f===u&&f!==""&&f!==null&&(r.value=f)}function Te(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var me=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _e(r,o,u){var f=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":f?r.setProperty(o,u):typeof u!="number"||u===0||me.has(o)?o==="float"?r.cssFloat=u:r[o]=(""+u).trim():r[o]=u+"px"}function Ne(r,o,u){if(o!=null&&typeof o!="object")throw Error(n(62));if(r=r.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?r.setProperty(f,""):f==="float"?r.cssFloat="":r[f]="");for(var g in o)f=o[g],o.hasOwnProperty(g)&&u[g]!==f&&_e(r,g,f)}else for(var y in o)o.hasOwnProperty(y)&&_e(r,y,o[y])}function Ue(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function aa(r){return Tt.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Br=null;function It(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ze=null,Bt=null;function Jt(r){var o=Rr(r);if(o&&(r=o.stateNode)){var u=r[En]||null;e:switch(r=o.stateNode,o.type){case"input":if(ke(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Ae(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==r&&f.form===r.form){var g=f[En]||null;if(!g)throw Error(n(90));ke(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<u.length;o++)f=u[o],f.form===r.form&&he(f)}break e;case"textarea":dt(r,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&We(r,!!u.multiple,o,!1)}}}var Sn=!1;function xa(r,o,u){if(Sn)return r(o,u);Sn=!0;try{var f=r(o);return f}finally{if(Sn=!1,(ze!==null||Bt!==null)&&(cd(),ze&&(o=ze,r=Bt,Bt=ze=null,Jt(o),r)))for(o=0;o<r.length;o++)Jt(r[o])}}function gn(r,o){var u=r.stateNode;if(u===null)return null;var f=u[En]||null;if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qn=!1;if(ln)try{var ra={};Object.defineProperty(ra,"passive",{get:function(){Qn=!0}}),window.addEventListener("test",ra,ra),window.removeEventListener("test",ra,ra)}catch{Qn=!1}var Vn=null,Xa=null,wa=null;function Xn(){if(wa)return wa;var r,o=Xa,u=o.length,f,g="value"in Vn?Vn.value:Vn.textContent,y=g.length;for(r=0;r<u&&o[r]===g[r];r++);var k=u-r;for(f=1;f<=k&&o[u-f]===g[y-f];f++);return wa=g.slice(r,1<f?1-f:void 0)}function Se(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function La(){return!0}function Pa(){return!1}function yn(r){function o(u,f,g,y,k){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=y,this.target=k,this.currentTarget=null;for(var N in r)r.hasOwnProperty(N)&&(u=r[N],this[N]=u?u(y):y[N]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?La:Pa,this.isPropagationStopped=Pa,this}return m(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=La)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=La)},persist:function(){},isPersistent:La}),o}var Ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zs=yn(Ka),fs=m({},Ka,{view:0,detail:0}),Dl=yn(fs),kl,Al,zi,Ui=m({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rl,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==zi&&(zi&&r.type==="mousemove"?(kl=r.screenX-zi.screenX,Al=r.screenY-zi.screenY):Al=kl=0,zi=r),kl)},movementY:function(r){return"movementY"in r?r.movementY:Al}}),Eu=yn(Ui),Pp=m({},Ui,{dataTransfer:0}),ey=yn(Pp),Su=m({},fs,{relatedTarget:0}),Ml=yn(Su),Bp=m({},Ka,{animationName:0,elapsedTime:0,pseudoElement:0}),Op=yn(Bp),ty=m({},Ka,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Or=yn(ty),Tl=m({},Ka,{data:0}),Cu=yn(Tl),_u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ny={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nl(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=zp[r])?!!o[r]:!1}function Rl(){return Nl}var Iu=m({},fs,{key:function(r){if(r.key){var o=_u[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Se(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?ny[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rl,charCode:function(r){return r.type==="keypress"?Se(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Se(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),en=yn(Iu),Du=m({},Ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ja=yn(Du),ku=m({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rl}),Up=yn(ku),Fp=m({},Ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),Au=yn(Fp),Co=m({},Ui,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Wp=yn(Co),P=m({},Ka,{newState:0,oldState:0}),ve=yn(P),De=[9,13,27,32],qe=ln&&"CompositionEvent"in window,ht=null;ln&&"documentMode"in document&&(ht=document.documentMode);var lt=ln&&"TextEvent"in window&&!ht,tn=ln&&(!qe||ht&&8<ht&&11>=ht),Sr=" ",Xe=!1;function da(r,o){switch(r){case"keyup":return De.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zr(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Cr=!1;function jp(r,o){switch(r){case"compositionend":return zr(o);case"keypress":return o.which!==32?null:(Xe=!0,Sr);case"textInput":return r=o.data,r===Sr&&Xe?null:r;default:return null}}function mS(r,o){if(Cr)return r==="compositionend"||!qe&&da(r,o)?(r=Xn(),wa=Xa=Vn=null,Cr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return tn&&o.locale!=="ko"?null:o.data;default:return null}}var hS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ay(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!hS[r.type]:o==="textarea"}function ry(r,o,u,f){ze?Bt?Bt.push(f):Bt=[f]:ze=f,o=hd(o,"onChange"),0<o.length&&(u=new Zs("onChange","change",null,u,f),r.push({event:u,listeners:o}))}var Ll=null,Pl=null;function gS(r){zb(r,0)}function Mu(r){var o=Er(r);if(he(o))return r}function sy(r,o){if(r==="change")return o}var iy=!1;if(ln){var Hp;if(ln){var Yp="oninput"in document;if(!Yp){var oy=document.createElement("div");oy.setAttribute("oninput","return;"),Yp=typeof oy.oninput=="function"}Hp=Yp}else Hp=!1;iy=Hp&&(!document.documentMode||9<document.documentMode)}function ly(){Ll&&(Ll.detachEvent("onpropertychange",cy),Pl=Ll=null)}function cy(r){if(r.propertyName==="value"&&Mu(Pl)){var o=[];ry(o,Pl,r,It(r)),xa(gS,o)}}function yS(r,o,u){r==="focusin"?(ly(),Ll=o,Pl=u,Ll.attachEvent("onpropertychange",cy)):r==="focusout"&&ly()}function bS(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Mu(Pl)}function vS(r,o){if(r==="click")return Mu(o)}function xS(r,o){if(r==="input"||r==="change")return Mu(o)}function wS(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Ba=typeof Object.is=="function"?Object.is:wS;function Bl(r,o){if(Ba(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!Qe.call(o,g)||!Ba(r[g],o[g]))return!1}return!0}function uy(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function dy(r,o){var u=uy(r);r=0;for(var f;u;){if(u.nodeType===3){if(f=r+u.textContent.length,r<=o&&f>=o)return{node:u,offset:o-r};r=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=uy(u)}}function fy(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?fy(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function py(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=ye(r.document);o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=ye(r.document)}return o}function Gp(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var ES=ln&&"documentMode"in document&&11>=document.documentMode,_o=null,$p=null,Ol=null,Zp=!1;function my(r,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Zp||_o==null||_o!==ye(f)||(f=_o,"selectionStart"in f&&Gp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ol&&Bl(Ol,f)||(Ol=f,f=hd($p,"onSelect"),0<f.length&&(o=new Zs("onSelect","select",null,o,u),r.push({event:o,listeners:f}),o.target=_o)))}function Fi(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var Io={animationend:Fi("Animation","AnimationEnd"),animationiteration:Fi("Animation","AnimationIteration"),animationstart:Fi("Animation","AnimationStart"),transitionrun:Fi("Transition","TransitionRun"),transitionstart:Fi("Transition","TransitionStart"),transitioncancel:Fi("Transition","TransitionCancel"),transitionend:Fi("Transition","TransitionEnd")},qp={},hy={};ln&&(hy=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function Wi(r){if(qp[r])return qp[r];if(!Io[r])return r;var o=Io[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in hy)return qp[r]=o[u];return r}var gy=Wi("animationend"),yy=Wi("animationiteration"),by=Wi("animationstart"),SS=Wi("transitionrun"),CS=Wi("transitionstart"),_S=Wi("transitioncancel"),vy=Wi("transitionend"),xy=new Map,Qp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qp.push("scrollEnd");function _r(r,o){xy.set(r,o),Qa(o,[r])}var wy=new WeakMap;function er(r,o){if(typeof r=="object"&&r!==null){var u=wy.get(r);return u!==void 0?u:(o={value:r,source:o,stack:Oi(o)},wy.set(r,o),o)}return{value:r,source:o,stack:Oi(o)}}var tr=[],Do=0,Vp=0;function Tu(){for(var r=Do,o=Vp=Do=0;o<r;){var u=tr[o];tr[o++]=null;var f=tr[o];tr[o++]=null;var g=tr[o];tr[o++]=null;var y=tr[o];if(tr[o++]=null,f!==null&&g!==null){var k=f.pending;k===null?g.next=g:(g.next=k.next,k.next=g),f.pending=g}y!==0&&Ey(u,g,y)}}function Nu(r,o,u,f){tr[Do++]=r,tr[Do++]=o,tr[Do++]=u,tr[Do++]=f,Vp|=f,r.lanes|=f,r=r.alternate,r!==null&&(r.lanes|=f)}function Xp(r,o,u,f){return Nu(r,o,u,f),Ru(r)}function ko(r,o){return Nu(r,null,null,o),Ru(r)}function Ey(r,o,u){r.lanes|=u;var f=r.alternate;f!==null&&(f.lanes|=u);for(var g=!1,y=r.return;y!==null;)y.childLanes|=u,f=y.alternate,f!==null&&(f.childLanes|=u),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(g=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,g&&o!==null&&(g=31-Ge(u),r=y.hiddenUpdates,f=r[g],f===null?r[g]=[o]:f.push(o),o.lane=u|536870912),y):null}function Ru(r){if(50<lc)throw lc=0,ah=null,Error(n(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Ao={};function IS(r,o,u,f){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oa(r,o,u,f){return new IS(r,o,u,f)}function Kp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ps(r,o){var u=r.alternate;return u===null?(u=Oa(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function Sy(r,o){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,o=u.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Lu(r,o,u,f,g,y){var k=0;if(f=r,typeof r=="function")Kp(r)&&(k=1);else if(typeof r=="string")k=k5(r,u,se.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case Z:return r=Oa(31,u,o,g),r.elementType=Z,r.lanes=y,r;case w:return ji(u.children,g,y,o);case S:k=8,g|=24;break;case _:return r=Oa(12,u,o,g|2),r.elementType=_,r.lanes=y,r;case T:return r=Oa(13,u,o,g),r.elementType=T,r.lanes=y,r;case F:return r=Oa(19,u,o,g),r.elementType=F,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case C:case I:k=10;break e;case D:k=9;break e;case A:k=11;break e;case J:k=14;break e;case H:k=16,f=null;break e}k=29,u=Error(n(130,r===null?"null":typeof r,"")),f=null}return o=Oa(k,u,o,g),o.elementType=r,o.type=f,o.lanes=y,o}function ji(r,o,u,f){return r=Oa(7,r,f,o),r.lanes=u,r}function Jp(r,o,u){return r=Oa(6,r,null,o),r.lanes=u,r}function em(r,o,u){return o=Oa(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var Mo=[],To=0,Pu=null,Bu=0,nr=[],ar=0,Hi=null,ms=1,hs="";function Yi(r,o){Mo[To++]=Bu,Mo[To++]=Pu,Pu=r,Bu=o}function Cy(r,o,u){nr[ar++]=ms,nr[ar++]=hs,nr[ar++]=Hi,Hi=r;var f=ms;r=hs;var g=32-Ge(f)-1;f&=~(1<<g),u+=1;var y=32-Ge(o)+g;if(30<y){var k=g-g%5;y=(f&(1<<k)-1).toString(32),f>>=k,g-=k,ms=1<<32-Ge(o)+g|u<<g|f,hs=y+r}else ms=1<<y|u<<g|f,hs=r}function tm(r){r.return!==null&&(Yi(r,1),Cy(r,1,0))}function nm(r){for(;r===Pu;)Pu=Mo[--To],Mo[To]=null,Bu=Mo[--To],Mo[To]=null;for(;r===Hi;)Hi=nr[--ar],nr[ar]=null,hs=nr[--ar],nr[ar]=null,ms=nr[--ar],nr[ar]=null}var Ea=null,Cn=null,Rt=!1,Gi=null,Ur=!1,am=Error(n(519));function $i(r){var o=Error(n(418,""));throw Fl(er(o,r)),am}function _y(r){var o=r.stateNode,u=r.type,f=r.memoizedProps;switch(o[hn]=r,o[En]=f,u){case"dialog":St("cancel",o),St("close",o);break;case"iframe":case"object":case"embed":St("load",o);break;case"video":case"audio":for(u=0;u<uc.length;u++)St(uc[u],o);break;case"source":St("error",o);break;case"img":case"image":case"link":St("error",o),St("load",o);break;case"details":St("toggle",o);break;case"input":St("invalid",o),Le(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),L(o);break;case"select":St("invalid",o);break;case"textarea":St("invalid",o),Ze(o,f.value,f.defaultValue,f.children),L(o)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||f.suppressHydrationWarning===!0||jb(o.textContent,u)?(f.popover!=null&&(St("beforetoggle",o),St("toggle",o)),f.onScroll!=null&&St("scroll",o),f.onScrollEnd!=null&&St("scrollend",o),f.onClick!=null&&(o.onclick=gd),o=!0):o=!1,o||$i(r)}function Iy(r){for(Ea=r.return;Ea;)switch(Ea.tag){case 5:case 13:Ur=!1;return;case 27:case 3:Ur=!0;return;default:Ea=Ea.return}}function zl(r){if(r!==Ea)return!1;if(!Rt)return Iy(r),Rt=!0,!1;var o=r.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||vh(r.type,r.memoizedProps)),u=!u),u&&Cn&&$i(r),Iy(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8)if(u=r.data,u==="/$"){if(o===0){Cn=Dr(r.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++;r=r.nextSibling}Cn=null}}else o===27?(o=Cn,ci(r.type)?(r=Sh,Sh=null,Cn=r):Cn=o):Cn=Ea?Dr(r.stateNode.nextSibling):null;return!0}function Ul(){Cn=Ea=null,Rt=!1}function Dy(){var r=Gi;return r!==null&&(Ta===null?Ta=r:Ta.push.apply(Ta,r),Gi=null),r}function Fl(r){Gi===null?Gi=[r]:Gi.push(r)}var rm=j(null),Zi=null,gs=null;function qs(r,o,u){ae(rm,o._currentValue),o._currentValue=u}function ys(r){r._currentValue=rm.current,ne(rm)}function sm(r,o,u){for(;r!==null;){var f=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),r===u)break;r=r.return}}function im(r,o,u,f){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var y=g.dependencies;if(y!==null){var k=g.child;y=y.firstContext;e:for(;y!==null;){var N=y;y=g;for(var Y=0;Y<o.length;Y++)if(N.context===o[Y]){y.lanes|=u,N=y.alternate,N!==null&&(N.lanes|=u),sm(y.return,u,r),f||(k=null);break e}y=N.next}}else if(g.tag===18){if(k=g.return,k===null)throw Error(n(341));k.lanes|=u,y=k.alternate,y!==null&&(y.lanes|=u),sm(k,u,r),k=null}else k=g.child;if(k!==null)k.return=g;else for(k=g;k!==null;){if(k===r){k=null;break}if(g=k.sibling,g!==null){g.return=k.return,k=g;break}k=k.return}g=k}}function Wl(r,o,u,f){r=null;for(var g=o,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var k=g.alternate;if(k===null)throw Error(n(387));if(k=k.memoizedProps,k!==null){var N=g.type;Ba(g.pendingProps.value,k.value)||(r!==null?r.push(N):r=[N])}}else if(g===Ie.current){if(k=g.alternate,k===null)throw Error(n(387));k.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(gc):r=[gc])}g=g.return}r!==null&&im(o,r,u,f),o.flags|=262144}function Ou(r){for(r=r.firstContext;r!==null;){if(!Ba(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function qi(r){Zi=r,gs=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function fa(r){return ky(Zi,r)}function zu(r,o){return Zi===null&&qi(r),ky(r,o)}function ky(r,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},gs===null){if(r===null)throw Error(n(308));gs=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else gs=gs.next=o;return u}var DS=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(u,f){r.push(f)}};this.abort=function(){o.aborted=!0,r.forEach(function(u){return u()})}},kS=t.unstable_scheduleCallback,AS=t.unstable_NormalPriority,Gn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function om(){return{controller:new DS,data:new Map,refCount:0}}function jl(r){r.refCount--,r.refCount===0&&kS(AS,function(){r.controller.abort()})}var Hl=null,lm=0,No=0,Ro=null;function MS(r,o){if(Hl===null){var u=Hl=[];lm=0,No=uh(),Ro={status:"pending",value:void 0,then:function(f){u.push(f)}}}return lm++,o.then(Ay,Ay),o}function Ay(){if(--lm===0&&Hl!==null){Ro!==null&&(Ro.status="fulfilled");var r=Hl;Hl=null,No=0,Ro=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function TS(r,o){var u=[],f={status:"pending",value:null,reason:null,then:function(g){u.push(g)}};return r.then(function(){f.status="fulfilled",f.value=o;for(var g=0;g<u.length;g++)(0,u[g])(o)},function(g){for(f.status="rejected",f.reason=g,g=0;g<u.length;g++)(0,u[g])(void 0)}),f}var My=M.S;M.S=function(r,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&MS(r,o),My!==null&&My(r,o)};var Qi=j(null);function cm(){var r=Qi.current;return r!==null?r:nn.pooledCache}function Uu(r,o){o===null?ae(Qi,Qi.current):ae(Qi,o.pool)}function Ty(){var r=cm();return r===null?null:{parent:Gn._currentValue,pool:r}}var Yl=Error(n(460)),Ny=Error(n(474)),Fu=Error(n(542)),um={then:function(){}};function Ry(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Wu(){}function Ly(r,o,u){switch(u=r[u],u===void 0?r.push(o):u!==o&&(o.then(Wu,Wu),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,By(r),r;default:if(typeof o.status=="string")o.then(Wu,Wu);else{if(r=nn,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=o,r.status="pending",r.then(function(f){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=f}},function(f){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,By(r),r}throw Gl=o,Yl}}var Gl=null;function Py(){if(Gl===null)throw Error(n(459));var r=Gl;return Gl=null,r}function By(r){if(r===Yl||r===Fu)throw Error(n(483))}var Qs=!1;function dm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fm(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Vs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Xs(r,o,u){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(Ut&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,o=Ru(r),Ey(r,null,u),o}return Nu(r,f,o,u),Ru(r)}function $l(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var f=o.lanes;f&=r.pendingLanes,u|=f,o.lanes=u,Ws(r,u)}}function pm(r,o){var u=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var k={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};y===null?g=y=k:y=y.next=k,u=u.next}while(u!==null);y===null?g=y=o:y=y.next=o}else g=y=o;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:f.shared,callbacks:f.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}var mm=!1;function Zl(){if(mm){var r=Ro;if(r!==null)throw r}}function ql(r,o,u,f){mm=!1;var g=r.updateQueue;Qs=!1;var y=g.firstBaseUpdate,k=g.lastBaseUpdate,N=g.shared.pending;if(N!==null){g.shared.pending=null;var Y=N,oe=Y.next;Y.next=null,k===null?y=oe:k.next=oe,k=Y;var ge=r.alternate;ge!==null&&(ge=ge.updateQueue,N=ge.lastBaseUpdate,N!==k&&(N===null?ge.firstBaseUpdate=oe:N.next=oe,ge.lastBaseUpdate=Y))}if(y!==null){var we=g.baseState;k=0,ge=oe=Y=null,N=y;do{var le=N.lane&-536870913,ce=le!==N.lane;if(ce?(kt&le)===le:(f&le)===le){le!==0&&le===No&&(mm=!0),ge!==null&&(ge=ge.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var it=r,Ke=N;le=o;var Zt=u;switch(Ke.tag){case 1:if(it=Ke.payload,typeof it=="function"){we=it.call(Zt,we,le);break e}we=it;break e;case 3:it.flags=it.flags&-65537|128;case 0:if(it=Ke.payload,le=typeof it=="function"?it.call(Zt,we,le):it,le==null)break e;we=m({},we,le);break e;case 2:Qs=!0}}le=N.callback,le!==null&&(r.flags|=64,ce&&(r.flags|=8192),ce=g.callbacks,ce===null?g.callbacks=[le]:ce.push(le))}else ce={lane:le,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ge===null?(oe=ge=ce,Y=we):ge=ge.next=ce,k|=le;if(N=N.next,N===null){if(N=g.shared.pending,N===null)break;ce=N,N=ce.next,ce.next=null,g.lastBaseUpdate=ce,g.shared.pending=null}}while(!0);ge===null&&(Y=we),g.baseState=Y,g.firstBaseUpdate=oe,g.lastBaseUpdate=ge,y===null&&(g.shared.lanes=0),si|=k,r.lanes=k,r.memoizedState=we}}function Oy(r,o){if(typeof r!="function")throw Error(n(191,r));r.call(o)}function zy(r,o){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)Oy(u[r],o)}var Lo=j(null),ju=j(0);function Uy(r,o){r=Cs,ae(ju,r),ae(Lo,o),Cs=r|o.baseLanes}function hm(){ae(ju,Cs),ae(Lo,Lo.current)}function gm(){Cs=ju.current,ne(Lo),ne(ju)}var Ks=0,bt=null,Gt=null,Fn=null,Hu=!1,Po=!1,Vi=!1,Yu=0,Ql=0,Bo=null,NS=0;function Mn(){throw Error(n(321))}function ym(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!Ba(r[u],o[u]))return!1;return!0}function bm(r,o,u,f,g,y){return Ks=y,bt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,M.H=r===null||r.memoizedState===null?E1:S1,Vi=!1,y=u(f,g),Vi=!1,Po&&(y=Wy(o,u,f,g)),Fy(r),y}function Fy(r){M.H=Vu;var o=Gt!==null&&Gt.next!==null;if(Ks=0,Fn=Gt=bt=null,Hu=!1,Ql=0,Bo=null,o)throw Error(n(300));r===null||Kn||(r=r.dependencies,r!==null&&Ou(r)&&(Kn=!0))}function Wy(r,o,u,f){bt=r;var g=0;do{if(Po&&(Bo=null),Ql=0,Po=!1,25<=g)throw Error(n(301));if(g+=1,Fn=Gt=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}M.H=US,y=o(u,f)}while(Po);return y}function RS(){var r=M.H,o=r.useState()[0];return o=typeof o.then=="function"?Vl(o):o,r=r.useState()[0],(Gt!==null?Gt.memoizedState:null)!==r&&(bt.flags|=1024),o}function vm(){var r=Yu!==0;return Yu=0,r}function xm(r,o,u){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~u}function wm(r){if(Hu){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Hu=!1}Ks=0,Fn=Gt=bt=null,Po=!1,Ql=Yu=0,Bo=null}function Aa(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?bt.memoizedState=Fn=r:Fn=Fn.next=r,Fn}function Wn(){if(Gt===null){var r=bt.alternate;r=r!==null?r.memoizedState:null}else r=Gt.next;var o=Fn===null?bt.memoizedState:Fn.next;if(o!==null)Fn=o,Gt=r;else{if(r===null)throw bt.alternate===null?Error(n(467)):Error(n(310));Gt=r,r={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Fn===null?bt.memoizedState=Fn=r:Fn=Fn.next=r}return Fn}function Em(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vl(r){var o=Ql;return Ql+=1,Bo===null&&(Bo=[]),r=Ly(Bo,r,o),o=bt,(Fn===null?o.memoizedState:Fn.next)===null&&(o=o.alternate,M.H=o===null||o.memoizedState===null?E1:S1),r}function Gu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Vl(r);if(r.$$typeof===I)return fa(r)}throw Error(n(438,String(r)))}function Sm(r){var o=null,u=bt.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var f=bt.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Em(),bt.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(r),f=0;f<r;f++)u[f]=K;return o.index++,u}function bs(r,o){return typeof o=="function"?o(r):o}function $u(r){var o=Wn();return Cm(o,Gt,r)}function Cm(r,o,u){var f=r.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=u;var g=r.baseQueue,y=f.pending;if(y!==null){if(g!==null){var k=g.next;g.next=y.next,y.next=k}o.baseQueue=g=y,f.pending=null}if(y=r.baseState,g===null)r.memoizedState=y;else{o=g.next;var N=k=null,Y=null,oe=o,ge=!1;do{var we=oe.lane&-536870913;if(we!==oe.lane?(kt&we)===we:(Ks&we)===we){var le=oe.revertLane;if(le===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),we===No&&(ge=!0);else if((Ks&le)===le){oe=oe.next,le===No&&(ge=!0);continue}else we={lane:0,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},Y===null?(N=Y=we,k=y):Y=Y.next=we,bt.lanes|=le,si|=le;we=oe.action,Vi&&u(y,we),y=oe.hasEagerState?oe.eagerState:u(y,we)}else le={lane:we,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},Y===null?(N=Y=le,k=y):Y=Y.next=le,bt.lanes|=we,si|=we;oe=oe.next}while(oe!==null&&oe!==o);if(Y===null?k=y:Y.next=N,!Ba(y,r.memoizedState)&&(Kn=!0,ge&&(u=Ro,u!==null)))throw u;r.memoizedState=y,r.baseState=k,r.baseQueue=Y,f.lastRenderedState=y}return g===null&&(f.lanes=0),[r.memoizedState,f.dispatch]}function _m(r){var o=Wn(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=r;var f=u.dispatch,g=u.pending,y=o.memoizedState;if(g!==null){u.pending=null;var k=g=g.next;do y=r(y,k.action),k=k.next;while(k!==g);Ba(y,o.memoizedState)||(Kn=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,f]}function jy(r,o,u){var f=bt,g=Wn(),y=Rt;if(y){if(u===void 0)throw Error(n(407));u=u()}else u=o();var k=!Ba((Gt||g).memoizedState,u);k&&(g.memoizedState=u,Kn=!0),g=g.queue;var N=Gy.bind(null,f,g,r);if(Xl(2048,8,N,[r]),g.getSnapshot!==o||k||Fn!==null&&Fn.memoizedState.tag&1){if(f.flags|=2048,Oo(9,Zu(),Yy.bind(null,f,g,u,o),null),nn===null)throw Error(n(349));y||(Ks&124)!==0||Hy(f,o,u)}return u}function Hy(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=bt.updateQueue,o===null?(o=Em(),bt.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function Yy(r,o,u,f){o.value=u,o.getSnapshot=f,$y(o)&&Zy(r)}function Gy(r,o,u){return u(function(){$y(o)&&Zy(r)})}function $y(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!Ba(r,u)}catch{return!0}}function Zy(r){var o=ko(r,2);o!==null&&ja(o,r,2)}function Im(r){var o=Aa();if(typeof r=="function"){var u=r;if(r=u(),Vi){at(!0);try{u()}finally{at(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:r},o}function qy(r,o,u,f){return r.baseState=u,Cm(r,Gt,typeof f=="function"?f:bs)}function LS(r,o,u,f,g){if(Qu(r))throw Error(n(485));if(r=o.action,r!==null){var y={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){y.listeners.push(k)}};M.T!==null?u(!0):y.isTransition=!1,f(y),u=o.pending,u===null?(y.next=o.pending=y,Qy(o,y)):(y.next=u.next,o.pending=u.next=y)}}function Qy(r,o){var u=o.action,f=o.payload,g=r.state;if(o.isTransition){var y=M.T,k={};M.T=k;try{var N=u(g,f),Y=M.S;Y!==null&&Y(k,N),Vy(r,o,N)}catch(oe){Dm(r,o,oe)}finally{M.T=y}}else try{y=u(g,f),Vy(r,o,y)}catch(oe){Dm(r,o,oe)}}function Vy(r,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){Xy(r,o,f)},function(f){return Dm(r,o,f)}):Xy(r,o,u)}function Xy(r,o,u){o.status="fulfilled",o.value=u,Ky(o),r.state=u,o=r.pending,o!==null&&(u=o.next,u===o?r.pending=null:(u=u.next,o.next=u,Qy(r,u)))}function Dm(r,o,u){var f=r.pending;if(r.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=u,Ky(o),o=o.next;while(o!==f)}r.action=null}function Ky(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function Jy(r,o){return o}function e1(r,o){if(Rt){var u=nn.formState;if(u!==null){e:{var f=bt;if(Rt){if(Cn){t:{for(var g=Cn,y=Ur;g.nodeType!==8;){if(!y){g=null;break t}if(g=Dr(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Cn=Dr(g.nextSibling),f=g.data==="F!";break e}}$i(f)}f=!1}f&&(o=u[0])}}return u=Aa(),u.memoizedState=u.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jy,lastRenderedState:o},u.queue=f,u=v1.bind(null,bt,f),f.dispatch=u,f=Im(!1),y=Nm.bind(null,bt,!1,f.queue),f=Aa(),g={state:o,dispatch:null,action:r,pending:null},f.queue=g,u=LS.bind(null,bt,g,y,u),g.dispatch=u,f.memoizedState=r,[o,u,!1]}function t1(r){var o=Wn();return n1(o,Gt,r)}function n1(r,o,u){if(o=Cm(r,o,Jy)[0],r=$u(bs)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=Vl(o)}catch(k){throw k===Yl?Fu:k}else f=o;o=Wn();var g=o.queue,y=g.dispatch;return u!==o.memoizedState&&(bt.flags|=2048,Oo(9,Zu(),PS.bind(null,g,u),null)),[f,y,r]}function PS(r,o){r.action=o}function a1(r){var o=Wn(),u=Gt;if(u!==null)return n1(o,u,r);Wn(),o=o.memoizedState,u=Wn();var f=u.queue.dispatch;return u.memoizedState=r,[o,f,!1]}function Oo(r,o,u,f){return r={tag:r,create:u,deps:f,inst:o,next:null},o=bt.updateQueue,o===null&&(o=Em(),bt.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=r.next=r:(f=u.next,u.next=r,r.next=f,o.lastEffect=r),r}function Zu(){return{destroy:void 0,resource:void 0}}function r1(){return Wn().memoizedState}function qu(r,o,u,f){var g=Aa();f=f===void 0?null:f,bt.flags|=r,g.memoizedState=Oo(1|o,Zu(),u,f)}function Xl(r,o,u,f){var g=Wn();f=f===void 0?null:f;var y=g.memoizedState.inst;Gt!==null&&f!==null&&ym(f,Gt.memoizedState.deps)?g.memoizedState=Oo(o,y,u,f):(bt.flags|=r,g.memoizedState=Oo(1|o,y,u,f))}function s1(r,o){qu(8390656,8,r,o)}function i1(r,o){Xl(2048,8,r,o)}function o1(r,o){return Xl(4,2,r,o)}function l1(r,o){return Xl(4,4,r,o)}function c1(r,o){if(typeof o=="function"){r=r();var u=o(r);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function u1(r,o,u){u=u!=null?u.concat([r]):null,Xl(4,4,c1.bind(null,o,r),u)}function km(){}function d1(r,o){var u=Wn();o=o===void 0?null:o;var f=u.memoizedState;return o!==null&&ym(o,f[1])?f[0]:(u.memoizedState=[r,o],r)}function f1(r,o){var u=Wn();o=o===void 0?null:o;var f=u.memoizedState;if(o!==null&&ym(o,f[1]))return f[0];if(f=r(),Vi){at(!0);try{r()}finally{at(!1)}}return u.memoizedState=[f,o],f}function Am(r,o,u){return u===void 0||(Ks&1073741824)!==0?r.memoizedState=o:(r.memoizedState=u,r=hb(),bt.lanes|=r,si|=r,u)}function p1(r,o,u,f){return Ba(u,o)?u:Lo.current!==null?(r=Am(r,u,f),Ba(r,o)||(Kn=!0),r):(Ks&42)===0?(Kn=!0,r.memoizedState=u):(r=hb(),bt.lanes|=r,si|=r,o)}function m1(r,o,u,f,g){var y=z.p;z.p=y!==0&&8>y?y:8;var k=M.T,N={};M.T=N,Nm(r,!1,o,u);try{var Y=g(),oe=M.S;if(oe!==null&&oe(N,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ge=TS(Y,f);Kl(r,o,ge,Wa(r))}else Kl(r,o,f,Wa(r))}catch(we){Kl(r,o,{then:function(){},status:"rejected",reason:we},Wa())}finally{z.p=y,M.T=k}}function BS(){}function Mm(r,o,u,f){if(r.tag!==5)throw Error(n(476));var g=h1(r).queue;m1(r,g,o,G,u===null?BS:function(){return g1(r),u(f)})}function h1(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:G},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:u},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function g1(r){var o=h1(r).next.queue;Kl(r,o,{},Wa())}function Tm(){return fa(gc)}function y1(){return Wn().memoizedState}function b1(){return Wn().memoizedState}function OS(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var u=Wa();r=Vs(u);var f=Xs(o,r,u);f!==null&&(ja(f,o,u),$l(f,o,u)),o={cache:om()},r.payload=o;return}o=o.return}}function zS(r,o,u){var f=Wa();u={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Qu(r)?x1(o,u):(u=Xp(r,o,u,f),u!==null&&(ja(u,r,f),w1(u,o,f)))}function v1(r,o,u){var f=Wa();Kl(r,o,u,f)}function Kl(r,o,u,f){var g={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Qu(r))x1(o,g);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var k=o.lastRenderedState,N=y(k,u);if(g.hasEagerState=!0,g.eagerState=N,Ba(N,k))return Nu(r,o,g,0),nn===null&&Tu(),!1}catch{}finally{}if(u=Xp(r,o,g,f),u!==null)return ja(u,r,f),w1(u,o,f),!0}return!1}function Nm(r,o,u,f){if(f={lane:2,revertLane:uh(),action:f,hasEagerState:!1,eagerState:null,next:null},Qu(r)){if(o)throw Error(n(479))}else o=Xp(r,u,f,2),o!==null&&ja(o,r,2)}function Qu(r){var o=r.alternate;return r===bt||o!==null&&o===bt}function x1(r,o){Po=Hu=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function w1(r,o,u){if((u&4194048)!==0){var f=o.lanes;f&=r.pendingLanes,u|=f,o.lanes=u,Ws(r,u)}}var Vu={readContext:fa,use:Gu,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useLayoutEffect:Mn,useInsertionEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useSyncExternalStore:Mn,useId:Mn,useHostTransitionStatus:Mn,useFormState:Mn,useActionState:Mn,useOptimistic:Mn,useMemoCache:Mn,useCacheRefresh:Mn},E1={readContext:fa,use:Gu,useCallback:function(r,o){return Aa().memoizedState=[r,o===void 0?null:o],r},useContext:fa,useEffect:s1,useImperativeHandle:function(r,o,u){u=u!=null?u.concat([r]):null,qu(4194308,4,c1.bind(null,o,r),u)},useLayoutEffect:function(r,o){return qu(4194308,4,r,o)},useInsertionEffect:function(r,o){qu(4,2,r,o)},useMemo:function(r,o){var u=Aa();o=o===void 0?null:o;var f=r();if(Vi){at(!0);try{r()}finally{at(!1)}}return u.memoizedState=[f,o],f},useReducer:function(r,o,u){var f=Aa();if(u!==void 0){var g=u(o);if(Vi){at(!0);try{u(o)}finally{at(!1)}}}else g=o;return f.memoizedState=f.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},f.queue=r,r=r.dispatch=zS.bind(null,bt,r),[f.memoizedState,r]},useRef:function(r){var o=Aa();return r={current:r},o.memoizedState=r},useState:function(r){r=Im(r);var o=r.queue,u=v1.bind(null,bt,o);return o.dispatch=u,[r.memoizedState,u]},useDebugValue:km,useDeferredValue:function(r,o){var u=Aa();return Am(u,r,o)},useTransition:function(){var r=Im(!1);return r=m1.bind(null,bt,r.queue,!0,!1),Aa().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,u){var f=bt,g=Aa();if(Rt){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),nn===null)throw Error(n(349));(kt&124)!==0||Hy(f,o,u)}g.memoizedState=u;var y={value:u,getSnapshot:o};return g.queue=y,s1(Gy.bind(null,f,y,r),[r]),f.flags|=2048,Oo(9,Zu(),Yy.bind(null,f,y,u,o),null),u},useId:function(){var r=Aa(),o=nn.identifierPrefix;if(Rt){var u=hs,f=ms;u=(f&~(1<<32-Ge(f)-1)).toString(32)+u,o="«"+o+"R"+u,u=Yu++,0<u&&(o+="H"+u.toString(32)),o+="»"}else u=NS++,o="«"+o+"r"+u.toString(32)+"»";return r.memoizedState=o},useHostTransitionStatus:Tm,useFormState:e1,useActionState:e1,useOptimistic:function(r){var o=Aa();o.memoizedState=o.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Nm.bind(null,bt,!0,u),u.dispatch=o,[r,o]},useMemoCache:Sm,useCacheRefresh:function(){return Aa().memoizedState=OS.bind(null,bt)}},S1={readContext:fa,use:Gu,useCallback:d1,useContext:fa,useEffect:i1,useImperativeHandle:u1,useInsertionEffect:o1,useLayoutEffect:l1,useMemo:f1,useReducer:$u,useRef:r1,useState:function(){return $u(bs)},useDebugValue:km,useDeferredValue:function(r,o){var u=Wn();return p1(u,Gt.memoizedState,r,o)},useTransition:function(){var r=$u(bs)[0],o=Wn().memoizedState;return[typeof r=="boolean"?r:Vl(r),o]},useSyncExternalStore:jy,useId:y1,useHostTransitionStatus:Tm,useFormState:t1,useActionState:t1,useOptimistic:function(r,o){var u=Wn();return qy(u,Gt,r,o)},useMemoCache:Sm,useCacheRefresh:b1},US={readContext:fa,use:Gu,useCallback:d1,useContext:fa,useEffect:i1,useImperativeHandle:u1,useInsertionEffect:o1,useLayoutEffect:l1,useMemo:f1,useReducer:_m,useRef:r1,useState:function(){return _m(bs)},useDebugValue:km,useDeferredValue:function(r,o){var u=Wn();return Gt===null?Am(u,r,o):p1(u,Gt.memoizedState,r,o)},useTransition:function(){var r=_m(bs)[0],o=Wn().memoizedState;return[typeof r=="boolean"?r:Vl(r),o]},useSyncExternalStore:jy,useId:y1,useHostTransitionStatus:Tm,useFormState:a1,useActionState:a1,useOptimistic:function(r,o){var u=Wn();return Gt!==null?qy(u,Gt,r,o):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:Sm,useCacheRefresh:b1},zo=null,Jl=0;function Xu(r){var o=Jl;return Jl+=1,zo===null&&(zo=[]),Ly(zo,r,o)}function ec(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Ku(r,o){throw o.$$typeof===b?Error(n(525)):(r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function C1(r){var o=r._init;return o(r._payload)}function _1(r){function o(te,Q){if(r){var re=te.deletions;re===null?(te.deletions=[Q],te.flags|=16):re.push(Q)}}function u(te,Q){if(!r)return null;for(;Q!==null;)o(te,Q),Q=Q.sibling;return null}function f(te){for(var Q=new Map;te!==null;)te.key!==null?Q.set(te.key,te):Q.set(te.index,te),te=te.sibling;return Q}function g(te,Q){return te=ps(te,Q),te.index=0,te.sibling=null,te}function y(te,Q,re){return te.index=re,r?(re=te.alternate,re!==null?(re=re.index,re<Q?(te.flags|=67108866,Q):re):(te.flags|=67108866,Q)):(te.flags|=1048576,Q)}function k(te){return r&&te.alternate===null&&(te.flags|=67108866),te}function N(te,Q,re,be){return Q===null||Q.tag!==6?(Q=Jp(re,te.mode,be),Q.return=te,Q):(Q=g(Q,re),Q.return=te,Q)}function Y(te,Q,re,be){var Oe=re.type;return Oe===w?ge(te,Q,re.props.children,be,re.key):Q!==null&&(Q.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===H&&C1(Oe)===Q.type)?(Q=g(Q,re.props),ec(Q,re),Q.return=te,Q):(Q=Lu(re.type,re.key,re.props,null,te.mode,be),ec(Q,re),Q.return=te,Q)}function oe(te,Q,re,be){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==re.containerInfo||Q.stateNode.implementation!==re.implementation?(Q=em(re,te.mode,be),Q.return=te,Q):(Q=g(Q,re.children||[]),Q.return=te,Q)}function ge(te,Q,re,be,Oe){return Q===null||Q.tag!==7?(Q=ji(re,te.mode,be,Oe),Q.return=te,Q):(Q=g(Q,re),Q.return=te,Q)}function we(te,Q,re){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=Jp(""+Q,te.mode,re),Q.return=te,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:return re=Lu(Q.type,Q.key,Q.props,null,te.mode,re),ec(re,Q),re.return=te,re;case E:return Q=em(Q,te.mode,re),Q.return=te,Q;case H:var be=Q._init;return Q=be(Q._payload),we(te,Q,re)}if(U(Q)||W(Q))return Q=ji(Q,te.mode,re,null),Q.return=te,Q;if(typeof Q.then=="function")return we(te,Xu(Q),re);if(Q.$$typeof===I)return we(te,zu(te,Q),re);Ku(te,Q)}return null}function le(te,Q,re,be){var Oe=Q!==null?Q.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return Oe!==null?null:N(te,Q,""+re,be);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case x:return re.key===Oe?Y(te,Q,re,be):null;case E:return re.key===Oe?oe(te,Q,re,be):null;case H:return Oe=re._init,re=Oe(re._payload),le(te,Q,re,be)}if(U(re)||W(re))return Oe!==null?null:ge(te,Q,re,be,null);if(typeof re.then=="function")return le(te,Q,Xu(re),be);if(re.$$typeof===I)return le(te,Q,zu(te,re),be);Ku(te,re)}return null}function ce(te,Q,re,be,Oe){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return te=te.get(re)||null,N(Q,te,""+be,Oe);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case x:return te=te.get(be.key===null?re:be.key)||null,Y(Q,te,be,Oe);case E:return te=te.get(be.key===null?re:be.key)||null,oe(Q,te,be,Oe);case H:var wt=be._init;return be=wt(be._payload),ce(te,Q,re,be,Oe)}if(U(be)||W(be))return te=te.get(re)||null,ge(Q,te,be,Oe,null);if(typeof be.then=="function")return ce(te,Q,re,Xu(be),Oe);if(be.$$typeof===I)return ce(te,Q,re,zu(Q,be),Oe);Ku(Q,be)}return null}function it(te,Q,re,be){for(var Oe=null,wt=null,$e=Q,et=Q=0,ea=null;$e!==null&&et<re.length;et++){$e.index>et?(ea=$e,$e=null):ea=$e.sibling;var Nt=le(te,$e,re[et],be);if(Nt===null){$e===null&&($e=ea);break}r&&$e&&Nt.alternate===null&&o(te,$e),Q=y(Nt,Q,et),wt===null?Oe=Nt:wt.sibling=Nt,wt=Nt,$e=ea}if(et===re.length)return u(te,$e),Rt&&Yi(te,et),Oe;if($e===null){for(;et<re.length;et++)$e=we(te,re[et],be),$e!==null&&(Q=y($e,Q,et),wt===null?Oe=$e:wt.sibling=$e,wt=$e);return Rt&&Yi(te,et),Oe}for($e=f($e);et<re.length;et++)ea=ce($e,te,et,re[et],be),ea!==null&&(r&&ea.alternate!==null&&$e.delete(ea.key===null?et:ea.key),Q=y(ea,Q,et),wt===null?Oe=ea:wt.sibling=ea,wt=ea);return r&&$e.forEach(function(mi){return o(te,mi)}),Rt&&Yi(te,et),Oe}function Ke(te,Q,re,be){if(re==null)throw Error(n(151));for(var Oe=null,wt=null,$e=Q,et=Q=0,ea=null,Nt=re.next();$e!==null&&!Nt.done;et++,Nt=re.next()){$e.index>et?(ea=$e,$e=null):ea=$e.sibling;var mi=le(te,$e,Nt.value,be);if(mi===null){$e===null&&($e=ea);break}r&&$e&&mi.alternate===null&&o(te,$e),Q=y(mi,Q,et),wt===null?Oe=mi:wt.sibling=mi,wt=mi,$e=ea}if(Nt.done)return u(te,$e),Rt&&Yi(te,et),Oe;if($e===null){for(;!Nt.done;et++,Nt=re.next())Nt=we(te,Nt.value,be),Nt!==null&&(Q=y(Nt,Q,et),wt===null?Oe=Nt:wt.sibling=Nt,wt=Nt);return Rt&&Yi(te,et),Oe}for($e=f($e);!Nt.done;et++,Nt=re.next())Nt=ce($e,te,et,Nt.value,be),Nt!==null&&(r&&Nt.alternate!==null&&$e.delete(Nt.key===null?et:Nt.key),Q=y(Nt,Q,et),wt===null?Oe=Nt:wt.sibling=Nt,wt=Nt);return r&&$e.forEach(function(F5){return o(te,F5)}),Rt&&Yi(te,et),Oe}function Zt(te,Q,re,be){if(typeof re=="object"&&re!==null&&re.type===w&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case x:e:{for(var Oe=re.key;Q!==null;){if(Q.key===Oe){if(Oe=re.type,Oe===w){if(Q.tag===7){u(te,Q.sibling),be=g(Q,re.props.children),be.return=te,te=be;break e}}else if(Q.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===H&&C1(Oe)===Q.type){u(te,Q.sibling),be=g(Q,re.props),ec(be,re),be.return=te,te=be;break e}u(te,Q);break}else o(te,Q);Q=Q.sibling}re.type===w?(be=ji(re.props.children,te.mode,be,re.key),be.return=te,te=be):(be=Lu(re.type,re.key,re.props,null,te.mode,be),ec(be,re),be.return=te,te=be)}return k(te);case E:e:{for(Oe=re.key;Q!==null;){if(Q.key===Oe)if(Q.tag===4&&Q.stateNode.containerInfo===re.containerInfo&&Q.stateNode.implementation===re.implementation){u(te,Q.sibling),be=g(Q,re.children||[]),be.return=te,te=be;break e}else{u(te,Q);break}else o(te,Q);Q=Q.sibling}be=em(re,te.mode,be),be.return=te,te=be}return k(te);case H:return Oe=re._init,re=Oe(re._payload),Zt(te,Q,re,be)}if(U(re))return it(te,Q,re,be);if(W(re)){if(Oe=W(re),typeof Oe!="function")throw Error(n(150));return re=Oe.call(re),Ke(te,Q,re,be)}if(typeof re.then=="function")return Zt(te,Q,Xu(re),be);if(re.$$typeof===I)return Zt(te,Q,zu(te,re),be);Ku(te,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,Q!==null&&Q.tag===6?(u(te,Q.sibling),be=g(Q,re),be.return=te,te=be):(u(te,Q),be=Jp(re,te.mode,be),be.return=te,te=be),k(te)):u(te,Q)}return function(te,Q,re,be){try{Jl=0;var Oe=Zt(te,Q,re,be);return zo=null,Oe}catch($e){if($e===Yl||$e===Fu)throw $e;var wt=Oa(29,$e,null,te.mode);return wt.lanes=be,wt.return=te,wt}finally{}}}var Uo=_1(!0),I1=_1(!1),rr=j(null),Fr=null;function Js(r){var o=r.alternate;ae($n,$n.current&1),ae(rr,r),Fr===null&&(o===null||Lo.current!==null||o.memoizedState!==null)&&(Fr=r)}function D1(r){if(r.tag===22){if(ae($n,$n.current),ae(rr,r),Fr===null){var o=r.alternate;o!==null&&o.memoizedState!==null&&(Fr=r)}}else ei()}function ei(){ae($n,$n.current),ae(rr,rr.current)}function vs(r){ne(rr),Fr===r&&(Fr=null),ne($n)}var $n=j(0);function Ju(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Eh(u)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Rm(r,o,u,f){o=r.memoizedState,u=u(f,o),u=u==null?o:m({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Lm={enqueueSetState:function(r,o,u){r=r._reactInternals;var f=Wa(),g=Vs(f);g.payload=o,u!=null&&(g.callback=u),o=Xs(r,g,f),o!==null&&(ja(o,r,f),$l(o,r,f))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var f=Wa(),g=Vs(f);g.tag=1,g.payload=o,u!=null&&(g.callback=u),o=Xs(r,g,f),o!==null&&(ja(o,r,f),$l(o,r,f))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=Wa(),f=Vs(u);f.tag=2,o!=null&&(f.callback=o),o=Xs(r,f,u),o!==null&&(ja(o,r,u),$l(o,r,u))}};function k1(r,o,u,f,g,y,k){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,y,k):o.prototype&&o.prototype.isPureReactComponent?!Bl(u,f)||!Bl(g,y):!0}function A1(r,o,u,f){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==r&&Lm.enqueueReplaceState(o,o.state,null)}function Xi(r,o){var u=o;if("ref"in o){u={};for(var f in o)f!=="ref"&&(u[f]=o[f])}if(r=r.defaultProps){u===o&&(u=m({},u));for(var g in r)u[g]===void 0&&(u[g]=r[g])}return u}var ed=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function M1(r){ed(r)}function T1(r){console.error(r)}function N1(r){ed(r)}function td(r,o){try{var u=r.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function R1(r,o,u){try{var f=r.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Pm(r,o,u){return u=Vs(u),u.tag=3,u.payload={element:null},u.callback=function(){td(r,o)},u}function L1(r){return r=Vs(r),r.tag=3,r}function P1(r,o,u,f){var g=u.type.getDerivedStateFromError;if(typeof g=="function"){var y=f.value;r.payload=function(){return g(y)},r.callback=function(){R1(o,u,f)}}var k=u.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(r.callback=function(){R1(o,u,f),typeof g!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var N=f.stack;this.componentDidCatch(f.value,{componentStack:N!==null?N:""})})}function FS(r,o,u,f,g){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=u.alternate,o!==null&&Wl(o,u,g,!0),u=rr.current,u!==null){switch(u.tag){case 13:return Fr===null?sh():u.alternate===null&&_n===0&&(_n=3),u.flags&=-257,u.flags|=65536,u.lanes=g,f===um?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([f]):o.add(f),oh(r,f,g)),!1;case 22:return u.flags|=65536,f===um?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([f]):u.add(f)),oh(r,f,g)),!1}throw Error(n(435,u.tag))}return oh(r,f,g),sh(),!1}if(Rt)return o=rr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,f!==am&&(r=Error(n(422),{cause:f}),Fl(er(r,u)))):(f!==am&&(o=Error(n(423),{cause:f}),Fl(er(o,u))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,f=er(f,u),g=Pm(r.stateNode,f,g),pm(r,g),_n!==4&&(_n=2)),!1;var y=Error(n(520),{cause:f});if(y=er(y,u),oc===null?oc=[y]:oc.push(y),_n!==4&&(_n=2),o===null)return!0;f=er(f,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,r=g&-g,u.lanes|=r,r=Pm(u.stateNode,f,r),pm(u,r),!1;case 1:if(o=u.type,y=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ii===null||!ii.has(y))))return u.flags|=65536,g&=-g,u.lanes|=g,g=L1(g),P1(g,r,u,f),pm(u,g),!1}u=u.return}while(u!==null);return!1}var B1=Error(n(461)),Kn=!1;function sa(r,o,u,f){o.child=r===null?I1(o,null,u,f):Uo(o,r.child,u,f)}function O1(r,o,u,f,g){u=u.render;var y=o.ref;if("ref"in f){var k={};for(var N in f)N!=="ref"&&(k[N]=f[N])}else k=f;return qi(o),f=bm(r,o,u,k,y,g),N=vm(),r!==null&&!Kn?(xm(r,o,g),xs(r,o,g)):(Rt&&N&&tm(o),o.flags|=1,sa(r,o,f,g),o.child)}function z1(r,o,u,f,g){if(r===null){var y=u.type;return typeof y=="function"&&!Kp(y)&&y.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=y,U1(r,o,y,f,g)):(r=Lu(u.type,null,f,o,o.mode,g),r.ref=o.ref,r.return=o,o.child=r)}if(y=r.child,!Hm(r,g)){var k=y.memoizedProps;if(u=u.compare,u=u!==null?u:Bl,u(k,f)&&r.ref===o.ref)return xs(r,o,g)}return o.flags|=1,r=ps(y,f),r.ref=o.ref,r.return=o,o.child=r}function U1(r,o,u,f,g){if(r!==null){var y=r.memoizedProps;if(Bl(y,f)&&r.ref===o.ref)if(Kn=!1,o.pendingProps=f=y,Hm(r,g))(r.flags&131072)!==0&&(Kn=!0);else return o.lanes=r.lanes,xs(r,o,g)}return Bm(r,o,u,f,g)}function F1(r,o,u){var f=o.pendingProps,g=f.children,y=r!==null?r.memoizedState:null;if(f.mode==="hidden"){if((o.flags&128)!==0){if(f=y!==null?y.baseLanes|u:u,r!==null){for(g=o.child=r.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;o.childLanes=y&~f}else o.childLanes=0,o.child=null;return W1(r,o,f,u)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Uu(o,y!==null?y.cachePool:null),y!==null?Uy(o,y):hm(),D1(o);else return o.lanes=o.childLanes=536870912,W1(r,o,y!==null?y.baseLanes|u:u,u)}else y!==null?(Uu(o,y.cachePool),Uy(o,y),ei(),o.memoizedState=null):(r!==null&&Uu(o,null),hm(),ei());return sa(r,o,g,u),o.child}function W1(r,o,u,f){var g=cm();return g=g===null?null:{parent:Gn._currentValue,pool:g},o.memoizedState={baseLanes:u,cachePool:g},r!==null&&Uu(o,null),hm(),D1(o),r!==null&&Wl(r,o,f,!0),null}function nd(r,o){var u=o.ref;if(u===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(r===null||r.ref!==u)&&(o.flags|=4194816)}}function Bm(r,o,u,f,g){return qi(o),u=bm(r,o,u,f,void 0,g),f=vm(),r!==null&&!Kn?(xm(r,o,g),xs(r,o,g)):(Rt&&f&&tm(o),o.flags|=1,sa(r,o,u,g),o.child)}function j1(r,o,u,f,g,y){return qi(o),o.updateQueue=null,u=Wy(o,f,u,g),Fy(r),f=vm(),r!==null&&!Kn?(xm(r,o,y),xs(r,o,y)):(Rt&&f&&tm(o),o.flags|=1,sa(r,o,u,y),o.child)}function H1(r,o,u,f,g){if(qi(o),o.stateNode===null){var y=Ao,k=u.contextType;typeof k=="object"&&k!==null&&(y=fa(k)),y=new u(f,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Lm,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=f,y.state=o.memoizedState,y.refs={},dm(o),k=u.contextType,y.context=typeof k=="object"&&k!==null?fa(k):Ao,y.state=o.memoizedState,k=u.getDerivedStateFromProps,typeof k=="function"&&(Rm(o,u,k,f),y.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(k=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),k!==y.state&&Lm.enqueueReplaceState(y,y.state,null),ql(o,f,y,g),Zl(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(r===null){y=o.stateNode;var N=o.memoizedProps,Y=Xi(u,N);y.props=Y;var oe=y.context,ge=u.contextType;k=Ao,typeof ge=="object"&&ge!==null&&(k=fa(ge));var we=u.getDerivedStateFromProps;ge=typeof we=="function"||typeof y.getSnapshotBeforeUpdate=="function",N=o.pendingProps!==N,ge||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(N||oe!==k)&&A1(o,y,f,k),Qs=!1;var le=o.memoizedState;y.state=le,ql(o,f,y,g),Zl(),oe=o.memoizedState,N||le!==oe||Qs?(typeof we=="function"&&(Rm(o,u,we,f),oe=o.memoizedState),(Y=Qs||k1(o,u,Y,f,le,oe,k))?(ge||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=oe),y.props=f,y.state=oe,y.context=k,f=Y):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{y=o.stateNode,fm(r,o),k=o.memoizedProps,ge=Xi(u,k),y.props=ge,we=o.pendingProps,le=y.context,oe=u.contextType,Y=Ao,typeof oe=="object"&&oe!==null&&(Y=fa(oe)),N=u.getDerivedStateFromProps,(oe=typeof N=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(k!==we||le!==Y)&&A1(o,y,f,Y),Qs=!1,le=o.memoizedState,y.state=le,ql(o,f,y,g),Zl();var ce=o.memoizedState;k!==we||le!==ce||Qs||r!==null&&r.dependencies!==null&&Ou(r.dependencies)?(typeof N=="function"&&(Rm(o,u,N,f),ce=o.memoizedState),(ge=Qs||k1(o,u,ge,f,le,ce,Y)||r!==null&&r.dependencies!==null&&Ou(r.dependencies))?(oe||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(f,ce,Y),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(f,ce,Y)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||k===r.memoizedProps&&le===r.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&le===r.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ce),y.props=f,y.state=ce,y.context=Y,f=ge):(typeof y.componentDidUpdate!="function"||k===r.memoizedProps&&le===r.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&le===r.memoizedState||(o.flags|=1024),f=!1)}return y=f,nd(r,o),f=(o.flags&128)!==0,y||f?(y=o.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,r!==null&&f?(o.child=Uo(o,r.child,null,g),o.child=Uo(o,null,u,g)):sa(r,o,u,g),o.memoizedState=y.state,r=o.child):r=xs(r,o,g),r}function Y1(r,o,u,f){return Ul(),o.flags|=256,sa(r,o,u,f),o.child}var Om={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zm(r){return{baseLanes:r,cachePool:Ty()}}function Um(r,o,u){return r=r!==null?r.childLanes&~u:0,o&&(r|=sr),r}function G1(r,o,u){var f=o.pendingProps,g=!1,y=(o.flags&128)!==0,k;if((k=y)||(k=r!==null&&r.memoizedState===null?!1:($n.current&2)!==0),k&&(g=!0,o.flags&=-129),k=(o.flags&32)!==0,o.flags&=-33,r===null){if(Rt){if(g?Js(o):ei(),Rt){var N=Cn,Y;if(Y=N){e:{for(Y=N,N=Ur;Y.nodeType!==8;){if(!N){N=null;break e}if(Y=Dr(Y.nextSibling),Y===null){N=null;break e}}N=Y}N!==null?(o.memoizedState={dehydrated:N,treeContext:Hi!==null?{id:ms,overflow:hs}:null,retryLane:536870912,hydrationErrors:null},Y=Oa(18,null,null,0),Y.stateNode=N,Y.return=o,o.child=Y,Ea=o,Cn=null,Y=!0):Y=!1}Y||$i(o)}if(N=o.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return Eh(N)?o.lanes=32:o.lanes=536870912,null;vs(o)}return N=f.children,f=f.fallback,g?(ei(),g=o.mode,N=ad({mode:"hidden",children:N},g),f=ji(f,g,u,null),N.return=o,f.return=o,N.sibling=f,o.child=N,g=o.child,g.memoizedState=zm(u),g.childLanes=Um(r,k,u),o.memoizedState=Om,f):(Js(o),Fm(o,N))}if(Y=r.memoizedState,Y!==null&&(N=Y.dehydrated,N!==null)){if(y)o.flags&256?(Js(o),o.flags&=-257,o=Wm(r,o,u)):o.memoizedState!==null?(ei(),o.child=r.child,o.flags|=128,o=null):(ei(),g=f.fallback,N=o.mode,f=ad({mode:"visible",children:f.children},N),g=ji(g,N,u,null),g.flags|=2,f.return=o,g.return=o,f.sibling=g,o.child=f,Uo(o,r.child,null,u),f=o.child,f.memoizedState=zm(u),f.childLanes=Um(r,k,u),o.memoizedState=Om,o=g);else if(Js(o),Eh(N)){if(k=N.nextSibling&&N.nextSibling.dataset,k)var oe=k.dgst;k=oe,f=Error(n(419)),f.stack="",f.digest=k,Fl({value:f,source:null,stack:null}),o=Wm(r,o,u)}else if(Kn||Wl(r,o,u,!1),k=(u&r.childLanes)!==0,Kn||k){if(k=nn,k!==null&&(f=u&-u,f=(f&42)!==0?1:vr(f),f=(f&(k.suspendedLanes|u))!==0?0:f,f!==0&&f!==Y.retryLane))throw Y.retryLane=f,ko(r,f),ja(k,r,f),B1;N.data==="$?"||sh(),o=Wm(r,o,u)}else N.data==="$?"?(o.flags|=192,o.child=r.child,o=null):(r=Y.treeContext,Cn=Dr(N.nextSibling),Ea=o,Rt=!0,Gi=null,Ur=!1,r!==null&&(nr[ar++]=ms,nr[ar++]=hs,nr[ar++]=Hi,ms=r.id,hs=r.overflow,Hi=o),o=Fm(o,f.children),o.flags|=4096);return o}return g?(ei(),g=f.fallback,N=o.mode,Y=r.child,oe=Y.sibling,f=ps(Y,{mode:"hidden",children:f.children}),f.subtreeFlags=Y.subtreeFlags&65011712,oe!==null?g=ps(oe,g):(g=ji(g,N,u,null),g.flags|=2),g.return=o,f.return=o,f.sibling=g,o.child=f,f=g,g=o.child,N=r.child.memoizedState,N===null?N=zm(u):(Y=N.cachePool,Y!==null?(oe=Gn._currentValue,Y=Y.parent!==oe?{parent:oe,pool:oe}:Y):Y=Ty(),N={baseLanes:N.baseLanes|u,cachePool:Y}),g.memoizedState=N,g.childLanes=Um(r,k,u),o.memoizedState=Om,f):(Js(o),u=r.child,r=u.sibling,u=ps(u,{mode:"visible",children:f.children}),u.return=o,u.sibling=null,r!==null&&(k=o.deletions,k===null?(o.deletions=[r],o.flags|=16):k.push(r)),o.child=u,o.memoizedState=null,u)}function Fm(r,o){return o=ad({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function ad(r,o){return r=Oa(22,r,null,o),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Wm(r,o,u){return Uo(o,r.child,null,u),r=Fm(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function $1(r,o,u){r.lanes|=o;var f=r.alternate;f!==null&&(f.lanes|=o),sm(r.return,o,u)}function jm(r,o,u,f,g){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=u,y.tailMode=g)}function Z1(r,o,u){var f=o.pendingProps,g=f.revealOrder,y=f.tail;if(sa(r,o,f.children,u),f=$n.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&$1(r,u,o);else if(r.tag===19)$1(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}f&=1}switch(ae($n,f),g){case"forwards":for(u=o.child,g=null;u!==null;)r=u.alternate,r!==null&&Ju(r)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),jm(o,!1,g,u,y);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(r=g.alternate,r!==null&&Ju(r)===null){o.child=g;break}r=g.sibling,g.sibling=u,u=g,g=r}jm(o,!0,u,null,y);break;case"together":jm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function xs(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),si|=o.lanes,(u&o.childLanes)===0)if(r!==null){if(Wl(r,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,u=ps(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=ps(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function Hm(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Ou(r)))}function WS(r,o,u){switch(o.tag){case 3:fe(o,o.stateNode.containerInfo),qs(o,Gn,r.memoizedState.cache),Ul();break;case 27:case 5:Ve(o);break;case 4:fe(o,o.stateNode.containerInfo);break;case 10:qs(o,o.type,o.memoizedProps.value);break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(Js(o),o.flags|=128,null):(u&o.child.childLanes)!==0?G1(r,o,u):(Js(o),r=xs(r,o,u),r!==null?r.sibling:null);Js(o);break;case 19:var g=(r.flags&128)!==0;if(f=(u&o.childLanes)!==0,f||(Wl(r,o,u,!1),f=(u&o.childLanes)!==0),g){if(f)return Z1(r,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ae($n,$n.current),f)break;return null;case 22:case 23:return o.lanes=0,F1(r,o,u);case 24:qs(o,Gn,r.memoizedState.cache)}return xs(r,o,u)}function q1(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps)Kn=!0;else{if(!Hm(r,u)&&(o.flags&128)===0)return Kn=!1,WS(r,o,u);Kn=(r.flags&131072)!==0}else Kn=!1,Rt&&(o.flags&1048576)!==0&&Cy(o,Bu,o.index);switch(o.lanes=0,o.tag){case 16:e:{r=o.pendingProps;var f=o.elementType,g=f._init;if(f=g(f._payload),o.type=f,typeof f=="function")Kp(f)?(r=Xi(f,r),o.tag=1,o=H1(null,o,f,r,u)):(o.tag=0,o=Bm(null,o,f,r,u));else{if(f!=null){if(g=f.$$typeof,g===A){o.tag=11,o=O1(null,o,f,r,u);break e}else if(g===J){o.tag=14,o=z1(null,o,f,r,u);break e}}throw o=B(f)||f,Error(n(306,o,""))}}return o;case 0:return Bm(r,o,o.type,o.pendingProps,u);case 1:return f=o.type,g=Xi(f,o.pendingProps),H1(r,o,f,g,u);case 3:e:{if(fe(o,o.stateNode.containerInfo),r===null)throw Error(n(387));f=o.pendingProps;var y=o.memoizedState;g=y.element,fm(r,o),ql(o,f,null,u);var k=o.memoizedState;if(f=k.cache,qs(o,Gn,f),f!==y.cache&&im(o,[Gn],u,!0),Zl(),f=k.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:k.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=Y1(r,o,f,u);break e}else if(f!==g){g=er(Error(n(424)),o),Fl(g),o=Y1(r,o,f,u);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Cn=Dr(r.firstChild),Ea=o,Rt=!0,Gi=null,Ur=!0,u=I1(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Ul(),f===g){o=xs(r,o,u);break e}sa(r,o,f,u)}o=o.child}return o;case 26:return nd(r,o),r===null?(u=Kb(o.type,null,o.pendingProps,null))?o.memoizedState=u:Rt||(u=o.type,r=o.pendingProps,f=yd(pe.current).createElement(u),f[hn]=o,f[En]=r,oa(f,u,r),on(f),o.stateNode=f):o.memoizedState=Kb(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return Ve(o),r===null&&Rt&&(f=o.stateNode=Qb(o.type,o.pendingProps,pe.current),Ea=o,Ur=!0,g=Cn,ci(o.type)?(Sh=g,Cn=Dr(f.firstChild)):Cn=g),sa(r,o,o.pendingProps.children,u),nd(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&Rt&&((g=f=Cn)&&(f=h5(f,o.type,o.pendingProps,Ur),f!==null?(o.stateNode=f,Ea=o,Cn=Dr(f.firstChild),Ur=!1,g=!0):g=!1),g||$i(o)),Ve(o),g=o.type,y=o.pendingProps,k=r!==null?r.memoizedProps:null,f=y.children,vh(g,y)?f=null:k!==null&&vh(g,k)&&(o.flags|=32),o.memoizedState!==null&&(g=bm(r,o,RS,null,null,u),gc._currentValue=g),nd(r,o),sa(r,o,f,u),o.child;case 6:return r===null&&Rt&&((r=u=Cn)&&(u=g5(u,o.pendingProps,Ur),u!==null?(o.stateNode=u,Ea=o,Cn=null,r=!0):r=!1),r||$i(o)),null;case 13:return G1(r,o,u);case 4:return fe(o,o.stateNode.containerInfo),f=o.pendingProps,r===null?o.child=Uo(o,null,f,u):sa(r,o,f,u),o.child;case 11:return O1(r,o,o.type,o.pendingProps,u);case 7:return sa(r,o,o.pendingProps,u),o.child;case 8:return sa(r,o,o.pendingProps.children,u),o.child;case 12:return sa(r,o,o.pendingProps.children,u),o.child;case 10:return f=o.pendingProps,qs(o,o.type,f.value),sa(r,o,f.children,u),o.child;case 9:return g=o.type._context,f=o.pendingProps.children,qi(o),g=fa(g),f=f(g),o.flags|=1,sa(r,o,f,u),o.child;case 14:return z1(r,o,o.type,o.pendingProps,u);case 15:return U1(r,o,o.type,o.pendingProps,u);case 19:return Z1(r,o,u);case 31:return f=o.pendingProps,u=o.mode,f={mode:f.mode,children:f.children},r===null?(u=ad(f,u),u.ref=o.ref,o.child=u,u.return=o,o=u):(u=ps(r.child,f),u.ref=o.ref,o.child=u,u.return=o,o=u),o;case 22:return F1(r,o,u);case 24:return qi(o),f=fa(Gn),r===null?(g=cm(),g===null&&(g=nn,y=om(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=u),g=y),o.memoizedState={parent:f,cache:g},dm(o),qs(o,Gn,g)):((r.lanes&u)!==0&&(fm(r,o),ql(o,null,null,u),Zl()),g=r.memoizedState,y=o.memoizedState,g.parent!==f?(g={parent:f,cache:f},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),qs(o,Gn,f)):(f=y.cache,qs(o,Gn,f),f!==g.cache&&im(o,[Gn],u,!0))),sa(r,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function ws(r){r.flags|=4}function Q1(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!av(o)){if(o=rr.current,o!==null&&((kt&4194048)===kt?Fr!==null:(kt&62914560)!==kt&&(kt&536870912)===0||o!==Fr))throw Gl=um,Ny;r.flags|=8192}}function rd(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Yt():536870912,r.lanes|=o,Ho|=o)}function tc(r,o){if(!Rt)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function bn(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,f=0;if(o)for(var g=r.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=f,r.childLanes=u,o}function jS(r,o,u){var f=o.pendingProps;switch(nm(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(o),null;case 1:return bn(o),null;case 3:return u=o.stateNode,f=null,r!==null&&(f=r.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),ys(Gn),Fe(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(zl(o)?ws(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Dy())),bn(o),null;case 26:return u=o.memoizedState,r===null?(ws(o),u!==null?(bn(o),Q1(o,u)):(bn(o),o.flags&=-16777217)):u?u!==r.memoizedState?(ws(o),bn(o),Q1(o,u)):(bn(o),o.flags&=-16777217):(r.memoizedProps!==f&&ws(o),bn(o),o.flags&=-16777217),null;case 27:He(o),u=pe.current;var g=o.type;if(r!==null&&o.stateNode!=null)r.memoizedProps!==f&&ws(o);else{if(!f){if(o.stateNode===null)throw Error(n(166));return bn(o),null}r=se.current,zl(o)?_y(o):(r=Qb(g,f,u),o.stateNode=r,ws(o))}return bn(o),null;case 5:if(He(o),u=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==f&&ws(o);else{if(!f){if(o.stateNode===null)throw Error(n(166));return bn(o),null}if(r=se.current,zl(o))_y(o);else{switch(g=yd(pe.current),r){case 1:r=g.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:r=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":r=g.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":r=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof f.is=="string"?g.createElement("select",{is:f.is}):g.createElement("select"),f.multiple?r.multiple=!0:f.size&&(r.size=f.size);break;default:r=typeof f.is=="string"?g.createElement(u,{is:f.is}):g.createElement(u)}}r[hn]=o,r[En]=f;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=r;e:switch(oa(r,u,f),u){case"button":case"input":case"select":case"textarea":r=!!f.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ws(o)}}return bn(o),o.flags&=-16777217,null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==f&&ws(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(n(166));if(r=pe.current,zl(o)){if(r=o.stateNode,u=o.memoizedProps,f=null,g=Ea,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}r[hn]=o,r=!!(r.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||jb(r.nodeValue,u)),r||$i(o)}else r=yd(r).createTextNode(f),r[hn]=o,o.stateNode=r}return bn(o),null;case 13:if(f=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=zl(o),f!==null&&f.dehydrated!==null){if(r===null){if(!g)throw Error(n(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[hn]=o}else Ul(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;bn(o),g=!1}else g=Dy(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(vs(o),o):(vs(o),null)}if(vs(o),(o.flags&128)!==0)return o.lanes=u,o;if(u=f!==null,r=r!==null&&r.memoizedState!==null,u){f=o.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool);var y=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==g&&(f.flags|=2048)}return u!==r&&u&&(o.child.flags|=8192),rd(o,o.updateQueue),bn(o),null;case 4:return Fe(),r===null&&mh(o.stateNode.containerInfo),bn(o),null;case 10:return ys(o.type),bn(o),null;case 19:if(ne($n),g=o.memoizedState,g===null)return bn(o),null;if(f=(o.flags&128)!==0,y=g.rendering,y===null)if(f)tc(g,!1);else{if(_n!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(y=Ju(r),y!==null){for(o.flags|=128,tc(g,!1),r=y.updateQueue,o.updateQueue=r,rd(o,r),o.subtreeFlags=0,r=u,u=o.child;u!==null;)Sy(u,r),u=u.sibling;return ae($n,$n.current&1|2),o.child}r=r.sibling}g.tail!==null&&Kt()>od&&(o.flags|=128,f=!0,tc(g,!1),o.lanes=4194304)}else{if(!f)if(r=Ju(y),r!==null){if(o.flags|=128,f=!0,r=r.updateQueue,o.updateQueue=r,rd(o,r),tc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!Rt)return bn(o),null}else 2*Kt()-g.renderingStartTime>od&&u!==536870912&&(o.flags|=128,f=!0,tc(g,!1),o.lanes=4194304);g.isBackwards?(y.sibling=o.child,o.child=y):(r=g.last,r!==null?r.sibling=y:o.child=y,g.last=y)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=Kt(),o.sibling=null,r=$n.current,ae($n,f?r&1|2:r&1),o):(bn(o),null);case 22:case 23:return vs(o),gm(),f=o.memoizedState!==null,r!==null?r.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(u&536870912)!==0&&(o.flags&128)===0&&(bn(o),o.subtreeFlags&6&&(o.flags|=8192)):bn(o),u=o.updateQueue,u!==null&&rd(o,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048),r!==null&&ne(Qi),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),ys(Gn),bn(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function HS(r,o){switch(nm(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return ys(Gn),Fe(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return He(o),null;case 13:if(vs(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Ul()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return ne($n),null;case 4:return Fe(),null;case 10:return ys(o.type),null;case 22:case 23:return vs(o),gm(),r!==null&&ne(Qi),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return ys(Gn),null;case 25:return null;default:return null}}function V1(r,o){switch(nm(o),o.tag){case 3:ys(Gn),Fe();break;case 26:case 27:case 5:He(o);break;case 4:Fe();break;case 13:vs(o);break;case 19:ne($n);break;case 10:ys(o.type);break;case 22:case 23:vs(o),gm(),r!==null&&ne(Qi);break;case 24:ys(Gn)}}function nc(r,o){try{var u=o.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&r)===r){f=void 0;var y=u.create,k=u.inst;f=y(),k.destroy=f}u=u.next}while(u!==g)}}catch(N){Xt(o,o.return,N)}}function ti(r,o,u){try{var f=o.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var y=g.next;f=y;do{if((f.tag&r)===r){var k=f.inst,N=k.destroy;if(N!==void 0){k.destroy=void 0,g=o;var Y=u,oe=N;try{oe()}catch(ge){Xt(g,Y,ge)}}}f=f.next}while(f!==y)}}catch(ge){Xt(o,o.return,ge)}}function X1(r){var o=r.updateQueue;if(o!==null){var u=r.stateNode;try{zy(o,u)}catch(f){Xt(r,r.return,f)}}}function K1(r,o,u){u.props=Xi(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(f){Xt(r,o,f)}}function ac(r,o){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var f=r.stateNode;break;case 30:f=r.stateNode;break;default:f=r.stateNode}typeof u=="function"?r.refCleanup=u(f):u.current=f}}catch(g){Xt(r,o,g)}}function Wr(r,o){var u=r.ref,f=r.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(g){Xt(r,o,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(g){Xt(r,o,g)}else u.current=null}function J1(r){var o=r.type,u=r.memoizedProps,f=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(g){Xt(r,r.return,g)}}function Ym(r,o,u){try{var f=r.stateNode;u5(f,r.type,u,o),f[En]=o}catch(g){Xt(r,r.return,g)}}function eb(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ci(r.type)||r.tag===4}function Gm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||eb(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ci(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function $m(r,o,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(r),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=gd));else if(f!==4&&(f===27&&ci(r.type)&&(u=r.stateNode,o=null),r=r.child,r!==null))for($m(r,o,u),r=r.sibling;r!==null;)$m(r,o,u),r=r.sibling}function sd(r,o,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(f!==4&&(f===27&&ci(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(sd(r,o,u),r=r.sibling;r!==null;)sd(r,o,u),r=r.sibling}function tb(r){var o=r.stateNode,u=r.memoizedProps;try{for(var f=r.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);oa(o,f,u),o[hn]=r,o[En]=u}catch(y){Xt(r,r.return,y)}}var Es=!1,Tn=!1,Zm=!1,nb=typeof WeakSet=="function"?WeakSet:Set,Jn=null;function YS(r,o){if(r=r.containerInfo,yh=Sd,r=py(r),Gp(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var k=0,N=-1,Y=-1,oe=0,ge=0,we=r,le=null;t:for(;;){for(var ce;we!==u||g!==0&&we.nodeType!==3||(N=k+g),we!==y||f!==0&&we.nodeType!==3||(Y=k+f),we.nodeType===3&&(k+=we.nodeValue.length),(ce=we.firstChild)!==null;)le=we,we=ce;for(;;){if(we===r)break t;if(le===u&&++oe===g&&(N=k),le===y&&++ge===f&&(Y=k),(ce=we.nextSibling)!==null)break;we=le,le=we.parentNode}we=ce}u=N===-1||Y===-1?null:{start:N,end:Y}}else u=null}u=u||{start:0,end:0}}else u=null;for(bh={focusedElem:r,selectionRange:u},Sd=!1,Jn=o;Jn!==null;)if(o=Jn,r=o.child,(o.subtreeFlags&1024)!==0&&r!==null)r.return=o,Jn=r;else for(;Jn!==null;){switch(o=Jn,y=o.alternate,r=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,u=o,g=y.memoizedProps,y=y.memoizedState,f=u.stateNode;try{var it=Xi(u.type,g,u.elementType===u.type);r=f.getSnapshotBeforeUpdate(it,y),f.__reactInternalSnapshotBeforeUpdate=r}catch(Ke){Xt(u,u.return,Ke)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,u=r.nodeType,u===9)wh(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":wh(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=o.sibling,r!==null){r.return=o.return,Jn=r;break}Jn=o.return}}function ab(r,o,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:ni(r,u),f&4&&nc(5,u);break;case 1:if(ni(r,u),f&4)if(r=u.stateNode,o===null)try{r.componentDidMount()}catch(k){Xt(u,u.return,k)}else{var g=Xi(u.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(g,o,r.__reactInternalSnapshotBeforeUpdate)}catch(k){Xt(u,u.return,k)}}f&64&&X1(u),f&512&&ac(u,u.return);break;case 3:if(ni(r,u),f&64&&(r=u.updateQueue,r!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{zy(r,o)}catch(k){Xt(u,u.return,k)}}break;case 27:o===null&&f&4&&tb(u);case 26:case 5:ni(r,u),o===null&&f&4&&J1(u),f&512&&ac(u,u.return);break;case 12:ni(r,u);break;case 13:ni(r,u),f&4&&ib(r,u),f&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=JS.bind(null,u),y5(r,u))));break;case 22:if(f=u.memoizedState!==null||Es,!f){o=o!==null&&o.memoizedState!==null||Tn,g=Es;var y=Tn;Es=f,(Tn=o)&&!y?ai(r,u,(u.subtreeFlags&8772)!==0):ni(r,u),Es=g,Tn=y}break;case 30:break;default:ni(r,u)}}function rb(r){var o=r.alternate;o!==null&&(r.alternate=null,rb(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Hs(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var cn=null,Ma=!1;function Ss(r,o,u){for(u=u.child;u!==null;)sb(r,o,u),u=u.sibling}function sb(r,o,u){if(Re&&typeof Re.onCommitFiberUnmount=="function")try{Re.onCommitFiberUnmount($,u)}catch{}switch(u.tag){case 26:Tn||Wr(u,o),Ss(r,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Tn||Wr(u,o);var f=cn,g=Ma;ci(u.type)&&(cn=u.stateNode,Ma=!1),Ss(r,o,u),fc(u.stateNode),cn=f,Ma=g;break;case 5:Tn||Wr(u,o);case 6:if(f=cn,g=Ma,cn=null,Ss(r,o,u),cn=f,Ma=g,cn!==null)if(Ma)try{(cn.nodeType===9?cn.body:cn.nodeName==="HTML"?cn.ownerDocument.body:cn).removeChild(u.stateNode)}catch(y){Xt(u,o,y)}else try{cn.removeChild(u.stateNode)}catch(y){Xt(u,o,y)}break;case 18:cn!==null&&(Ma?(r=cn,Zb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),xc(r)):Zb(cn,u.stateNode));break;case 4:f=cn,g=Ma,cn=u.stateNode.containerInfo,Ma=!0,Ss(r,o,u),cn=f,Ma=g;break;case 0:case 11:case 14:case 15:Tn||ti(2,u,o),Tn||ti(4,u,o),Ss(r,o,u);break;case 1:Tn||(Wr(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"&&K1(u,o,f)),Ss(r,o,u);break;case 21:Ss(r,o,u);break;case 22:Tn=(f=Tn)||u.memoizedState!==null,Ss(r,o,u),Tn=f;break;default:Ss(r,o,u)}}function ib(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{xc(r)}catch(u){Xt(o,o.return,u)}}function GS(r){switch(r.tag){case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new nb),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new nb),o;default:throw Error(n(435,r.tag))}}function qm(r,o){var u=GS(r);o.forEach(function(f){var g=e5.bind(null,r,f);u.has(f)||(u.add(f),f.then(g,g))})}function za(r,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f],y=r,k=o,N=k;e:for(;N!==null;){switch(N.tag){case 27:if(ci(N.type)){cn=N.stateNode,Ma=!1;break e}break;case 5:cn=N.stateNode,Ma=!1;break e;case 3:case 4:cn=N.stateNode.containerInfo,Ma=!0;break e}N=N.return}if(cn===null)throw Error(n(160));sb(y,k,g),cn=null,Ma=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)ob(o,r),o=o.sibling}var Ir=null;function ob(r,o){var u=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:za(o,r),Ua(r),f&4&&(ti(3,r,r.return),nc(3,r),ti(5,r,r.return));break;case 1:za(o,r),Ua(r),f&512&&(Tn||u===null||Wr(u,u.return)),f&64&&Es&&(r=r.updateQueue,r!==null&&(f=r.callbacks,f!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var g=Ir;if(za(o,r),Ua(r),f&512&&(Tn||u===null||Wr(u,u.return)),f&4){var y=u!==null?u.memoizedState:null;if(f=r.memoizedState,u===null)if(f===null)if(r.stateNode===null){e:{f=r.type,u=r.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":y=g.getElementsByTagName("title")[0],(!y||y[wr]||y[hn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(f),g.head.insertBefore(y,g.querySelector("head > title"))),oa(y,f,u),y[hn]=r,on(y),f=y;break e;case"link":var k=tv("link","href",g).get(f+(u.href||""));if(k){for(var N=0;N<k.length;N++)if(y=k[N],y.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&y.getAttribute("rel")===(u.rel==null?null:u.rel)&&y.getAttribute("title")===(u.title==null?null:u.title)&&y.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){k.splice(N,1);break t}}y=g.createElement(f),oa(y,f,u),g.head.appendChild(y);break;case"meta":if(k=tv("meta","content",g).get(f+(u.content||""))){for(N=0;N<k.length;N++)if(y=k[N],y.getAttribute("content")===(u.content==null?null:""+u.content)&&y.getAttribute("name")===(u.name==null?null:u.name)&&y.getAttribute("property")===(u.property==null?null:u.property)&&y.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&y.getAttribute("charset")===(u.charSet==null?null:u.charSet)){k.splice(N,1);break t}}y=g.createElement(f),oa(y,f,u),g.head.appendChild(y);break;default:throw Error(n(468,f))}y[hn]=r,on(y),f=y}r.stateNode=f}else nv(g,r.type,r.stateNode);else r.stateNode=ev(g,f,r.memoizedProps);else y!==f?(y===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):y.count--,f===null?nv(g,r.type,r.stateNode):ev(g,f,r.memoizedProps)):f===null&&r.stateNode!==null&&Ym(r,r.memoizedProps,u.memoizedProps)}break;case 27:za(o,r),Ua(r),f&512&&(Tn||u===null||Wr(u,u.return)),u!==null&&f&4&&Ym(r,r.memoizedProps,u.memoizedProps);break;case 5:if(za(o,r),Ua(r),f&512&&(Tn||u===null||Wr(u,u.return)),r.flags&32){g=r.stateNode;try{Te(g,"")}catch(ce){Xt(r,r.return,ce)}}f&4&&r.stateNode!=null&&(g=r.memoizedProps,Ym(r,g,u!==null?u.memoizedProps:g)),f&1024&&(Zm=!0);break;case 6:if(za(o,r),Ua(r),f&4){if(r.stateNode===null)throw Error(n(162));f=r.memoizedProps,u=r.stateNode;try{u.nodeValue=f}catch(ce){Xt(r,r.return,ce)}}break;case 3:if(xd=null,g=Ir,Ir=bd(o.containerInfo),za(o,r),Ir=g,Ua(r),f&4&&u!==null&&u.memoizedState.isDehydrated)try{xc(o.containerInfo)}catch(ce){Xt(r,r.return,ce)}Zm&&(Zm=!1,lb(r));break;case 4:f=Ir,Ir=bd(r.stateNode.containerInfo),za(o,r),Ua(r),Ir=f;break;case 12:za(o,r),Ua(r);break;case 13:za(o,r),Ua(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(eh=Kt()),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,qm(r,f)));break;case 22:g=r.memoizedState!==null;var Y=u!==null&&u.memoizedState!==null,oe=Es,ge=Tn;if(Es=oe||g,Tn=ge||Y,za(o,r),Tn=ge,Es=oe,Ua(r),f&8192)e:for(o=r.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(u===null||Y||Es||Tn||Ki(r)),u=null,o=r;;){if(o.tag===5||o.tag===26){if(u===null){Y=u=o;try{if(y=Y.stateNode,g)k=y.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{N=Y.stateNode;var we=Y.memoizedProps.style,le=we!=null&&we.hasOwnProperty("display")?we.display:null;N.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(ce){Xt(Y,Y.return,ce)}}}else if(o.tag===6){if(u===null){Y=o;try{Y.stateNode.nodeValue=g?"":Y.memoizedProps}catch(ce){Xt(Y,Y.return,ce)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=r.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,qm(r,u))));break;case 19:za(o,r),Ua(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,qm(r,f)));break;case 30:break;case 21:break;default:za(o,r),Ua(r)}}function Ua(r){var o=r.flags;if(o&2){try{for(var u,f=r.return;f!==null;){if(eb(f)){u=f;break}f=f.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var g=u.stateNode,y=Gm(r);sd(r,y,g);break;case 5:var k=u.stateNode;u.flags&32&&(Te(k,""),u.flags&=-33);var N=Gm(r);sd(r,N,k);break;case 3:case 4:var Y=u.stateNode.containerInfo,oe=Gm(r);$m(r,oe,Y);break;default:throw Error(n(161))}}catch(ge){Xt(r,r.return,ge)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function lb(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;lb(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function ni(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)ab(r,o.alternate,o),o=o.sibling}function Ki(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:ti(4,o,o.return),Ki(o);break;case 1:Wr(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&K1(o,o.return,u),Ki(o);break;case 27:fc(o.stateNode);case 26:case 5:Wr(o,o.return),Ki(o);break;case 22:o.memoizedState===null&&Ki(o);break;case 30:Ki(o);break;default:Ki(o)}r=r.sibling}}function ai(r,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,g=r,y=o,k=y.flags;switch(y.tag){case 0:case 11:case 15:ai(g,y,u),nc(4,y);break;case 1:if(ai(g,y,u),f=y,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(oe){Xt(f,f.return,oe)}if(f=y,g=f.updateQueue,g!==null){var N=f.stateNode;try{var Y=g.shared.hiddenCallbacks;if(Y!==null)for(g.shared.hiddenCallbacks=null,g=0;g<Y.length;g++)Oy(Y[g],N)}catch(oe){Xt(f,f.return,oe)}}u&&k&64&&X1(y),ac(y,y.return);break;case 27:tb(y);case 26:case 5:ai(g,y,u),u&&f===null&&k&4&&J1(y),ac(y,y.return);break;case 12:ai(g,y,u);break;case 13:ai(g,y,u),u&&k&4&&ib(g,y);break;case 22:y.memoizedState===null&&ai(g,y,u),ac(y,y.return);break;case 30:break;default:ai(g,y,u)}o=o.sibling}}function Qm(r,o){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&jl(u))}function Vm(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&jl(r))}function jr(r,o,u,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)cb(r,o,u,f),o=o.sibling}function cb(r,o,u,f){var g=o.flags;switch(o.tag){case 0:case 11:case 15:jr(r,o,u,f),g&2048&&nc(9,o);break;case 1:jr(r,o,u,f);break;case 3:jr(r,o,u,f),g&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&jl(r)));break;case 12:if(g&2048){jr(r,o,u,f),r=o.stateNode;try{var y=o.memoizedProps,k=y.id,N=y.onPostCommit;typeof N=="function"&&N(k,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(Y){Xt(o,o.return,Y)}}else jr(r,o,u,f);break;case 13:jr(r,o,u,f);break;case 23:break;case 22:y=o.stateNode,k=o.alternate,o.memoizedState!==null?y._visibility&2?jr(r,o,u,f):rc(r,o):y._visibility&2?jr(r,o,u,f):(y._visibility|=2,Fo(r,o,u,f,(o.subtreeFlags&10256)!==0)),g&2048&&Qm(k,o);break;case 24:jr(r,o,u,f),g&2048&&Vm(o.alternate,o);break;default:jr(r,o,u,f)}}function Fo(r,o,u,f,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var y=r,k=o,N=u,Y=f,oe=k.flags;switch(k.tag){case 0:case 11:case 15:Fo(y,k,N,Y,g),nc(8,k);break;case 23:break;case 22:var ge=k.stateNode;k.memoizedState!==null?ge._visibility&2?Fo(y,k,N,Y,g):rc(y,k):(ge._visibility|=2,Fo(y,k,N,Y,g)),g&&oe&2048&&Qm(k.alternate,k);break;case 24:Fo(y,k,N,Y,g),g&&oe&2048&&Vm(k.alternate,k);break;default:Fo(y,k,N,Y,g)}o=o.sibling}}function rc(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=r,f=o,g=f.flags;switch(f.tag){case 22:rc(u,f),g&2048&&Qm(f.alternate,f);break;case 24:rc(u,f),g&2048&&Vm(f.alternate,f);break;default:rc(u,f)}o=o.sibling}}var sc=8192;function Wo(r){if(r.subtreeFlags&sc)for(r=r.child;r!==null;)ub(r),r=r.sibling}function ub(r){switch(r.tag){case 26:Wo(r),r.flags&sc&&r.memoizedState!==null&&M5(Ir,r.memoizedState,r.memoizedProps);break;case 5:Wo(r);break;case 3:case 4:var o=Ir;Ir=bd(r.stateNode.containerInfo),Wo(r),Ir=o;break;case 22:r.memoizedState===null&&(o=r.alternate,o!==null&&o.memoizedState!==null?(o=sc,sc=16777216,Wo(r),sc=o):Wo(r));break;default:Wo(r)}}function db(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function ic(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];Jn=f,pb(f,r)}db(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)fb(r),r=r.sibling}function fb(r){switch(r.tag){case 0:case 11:case 15:ic(r),r.flags&2048&&ti(9,r,r.return);break;case 3:ic(r);break;case 12:ic(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,id(r)):ic(r);break;default:ic(r)}}function id(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];Jn=f,pb(f,r)}db(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:ti(8,o,o.return),id(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,id(o));break;default:id(o)}r=r.sibling}}function pb(r,o){for(;Jn!==null;){var u=Jn;switch(u.tag){case 0:case 11:case 15:ti(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:jl(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,Jn=f;else e:for(u=r;Jn!==null;){f=Jn;var g=f.sibling,y=f.return;if(rb(f),f===u){Jn=null;break e}if(g!==null){g.return=y,Jn=g;break e}Jn=y}}}var $S={getCacheForType:function(r){var o=fa(Gn),u=o.data.get(r);return u===void 0&&(u=r(),o.data.set(r,u)),u}},ZS=typeof WeakMap=="function"?WeakMap:Map,Ut=0,nn=null,Et=null,kt=0,Ft=0,Fa=null,ri=!1,jo=!1,Xm=!1,Cs=0,_n=0,si=0,Ji=0,Km=0,sr=0,Ho=0,oc=null,Ta=null,Jm=!1,eh=0,od=1/0,ld=null,ii=null,ia=0,oi=null,Yo=null,Go=0,th=0,nh=null,mb=null,lc=0,ah=null;function Wa(){if((Ut&2)!==0&&kt!==0)return kt&-kt;if(M.T!==null){var r=No;return r!==0?r:uh()}return is()}function hb(){sr===0&&(sr=(kt&536870912)===0||Rt?Ia():536870912);var r=rr.current;return r!==null&&(r.flags|=32),sr}function ja(r,o,u){(r===nn&&(Ft===2||Ft===9)||r.cancelPendingCommit!==null)&&($o(r,0),li(r,kt,sr,!1)),Un(r,u),((Ut&2)===0||r!==nn)&&(r===nn&&((Ut&2)===0&&(Ji|=u),_n===4&&li(r,kt,sr,!1)),Hr(r))}function gb(r,o,u){if((Ut&6)!==0)throw Error(n(327));var f=!u&&(o&124)===0&&(o&r.expiredLanes)===0||wn(r,o),g=f?VS(r,o):ih(r,o,!0),y=f;do{if(g===0){jo&&!f&&li(r,o,0,!1);break}else{if(u=r.current.alternate,y&&!qS(u)){g=ih(r,o,!1),y=!1;continue}if(g===2){if(y=o,r.errorRecoveryDisabledLanes&y)var k=0;else k=r.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){o=k;e:{var N=r;g=oc;var Y=N.current.memoizedState.isDehydrated;if(Y&&($o(N,k).flags|=256),k=ih(N,k,!1),k!==2){if(Xm&&!Y){N.errorRecoveryDisabledLanes|=y,Ji|=y,g=4;break e}y=Ta,Ta=g,y!==null&&(Ta===null?Ta=y:Ta.push.apply(Ta,y))}g=k}if(y=!1,g!==2)continue}}if(g===1){$o(r,0),li(r,o,0,!0);break}e:{switch(f=r,y=g,y){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:li(f,o,sr,!ri);break e;case 2:Ta=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(g=eh+300-Kt(),10<g)){if(li(f,o,sr,!ri),zn(f,0,!0)!==0)break e;f.timeoutHandle=Gb(yb.bind(null,f,u,Ta,ld,Jm,o,sr,Ji,Ho,ri,y,2,-0,0),g);break e}yb(f,u,Ta,ld,Jm,o,sr,Ji,Ho,ri,y,0,-0,0)}}break}while(!0);Hr(r)}function yb(r,o,u,f,g,y,k,N,Y,oe,ge,we,le,ce){if(r.timeoutHandle=-1,we=o.subtreeFlags,(we&8192||(we&16785408)===16785408)&&(hc={stylesheets:null,count:0,unsuspend:A5},ub(o),we=T5(),we!==null)){r.cancelPendingCommit=we(Cb.bind(null,r,o,y,u,f,g,k,N,Y,ge,1,le,ce)),li(r,y,k,!oe);return}Cb(r,o,y,u,f,g,k,N,Y)}function qS(r){for(var o=r;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var g=u[f],y=g.getSnapshot;g=g.value;try{if(!Ba(y(),g))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function li(r,o,u,f){o&=~Km,o&=~Ji,r.suspendedLanes|=o,r.pingedLanes&=~o,f&&(r.warmLanes|=o),f=r.expirationTimes;for(var g=o;0<g;){var y=31-Ge(g),k=1<<y;f[y]=-1,g&=~k}u!==0&&na(r,u,o)}function cd(){return(Ut&6)===0?(cc(0),!1):!0}function rh(){if(Et!==null){if(Ft===0)var r=Et.return;else r=Et,gs=Zi=null,wm(r),zo=null,Jl=0,r=Et;for(;r!==null;)V1(r.alternate,r),r=r.return;Et=null}}function $o(r,o){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,f5(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),rh(),nn=r,Et=u=ps(r.current,null),kt=o,Ft=0,Fa=null,ri=!1,jo=wn(r,o),Xm=!1,Ho=sr=Km=Ji=si=_n=0,Ta=oc=null,Jm=!1,(o&8)!==0&&(o|=o&32);var f=r.entangledLanes;if(f!==0)for(r=r.entanglements,f&=o;0<f;){var g=31-Ge(f),y=1<<g;o|=r[g],f&=~y}return Cs=o,Tu(),u}function bb(r,o){bt=null,M.H=Vu,o===Yl||o===Fu?(o=Py(),Ft=3):o===Ny?(o=Py(),Ft=4):Ft=o===B1?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Fa=o,Et===null&&(_n=1,td(r,er(o,r.current)))}function vb(){var r=M.H;return M.H=Vu,r===null?Vu:r}function xb(){var r=M.A;return M.A=$S,r}function sh(){_n=4,ri||(kt&4194048)!==kt&&rr.current!==null||(jo=!0),(si&134217727)===0&&(Ji&134217727)===0||nn===null||li(nn,kt,sr,!1)}function ih(r,o,u){var f=Ut;Ut|=2;var g=vb(),y=xb();(nn!==r||kt!==o)&&(ld=null,$o(r,o)),o=!1;var k=_n;e:do try{if(Ft!==0&&Et!==null){var N=Et,Y=Fa;switch(Ft){case 8:rh(),k=6;break e;case 3:case 2:case 9:case 6:rr.current===null&&(o=!0);var oe=Ft;if(Ft=0,Fa=null,Zo(r,N,Y,oe),u&&jo){k=0;break e}break;default:oe=Ft,Ft=0,Fa=null,Zo(r,N,Y,oe)}}QS(),k=_n;break}catch(ge){bb(r,ge)}while(!0);return o&&r.shellSuspendCounter++,gs=Zi=null,Ut=f,M.H=g,M.A=y,Et===null&&(nn=null,kt=0,Tu()),k}function QS(){for(;Et!==null;)wb(Et)}function VS(r,o){var u=Ut;Ut|=2;var f=vb(),g=xb();nn!==r||kt!==o?(ld=null,od=Kt()+500,$o(r,o)):jo=wn(r,o);e:do try{if(Ft!==0&&Et!==null){o=Et;var y=Fa;t:switch(Ft){case 1:Ft=0,Fa=null,Zo(r,o,y,1);break;case 2:case 9:if(Ry(y)){Ft=0,Fa=null,Eb(o);break}o=function(){Ft!==2&&Ft!==9||nn!==r||(Ft=7),Hr(r)},y.then(o,o);break e;case 3:Ft=7;break e;case 4:Ft=5;break e;case 7:Ry(y)?(Ft=0,Fa=null,Eb(o)):(Ft=0,Fa=null,Zo(r,o,y,7));break;case 5:var k=null;switch(Et.tag){case 26:k=Et.memoizedState;case 5:case 27:var N=Et;if(!k||av(k)){Ft=0,Fa=null;var Y=N.sibling;if(Y!==null)Et=Y;else{var oe=N.return;oe!==null?(Et=oe,ud(oe)):Et=null}break t}}Ft=0,Fa=null,Zo(r,o,y,5);break;case 6:Ft=0,Fa=null,Zo(r,o,y,6);break;case 8:rh(),_n=6;break e;default:throw Error(n(462))}}XS();break}catch(ge){bb(r,ge)}while(!0);return gs=Zi=null,M.H=f,M.A=g,Ut=u,Et!==null?0:(nn=null,kt=0,Tu(),_n)}function XS(){for(;Et!==null&&!xt();)wb(Et)}function wb(r){var o=q1(r.alternate,r,Cs);r.memoizedProps=r.pendingProps,o===null?ud(r):Et=o}function Eb(r){var o=r,u=o.alternate;switch(o.tag){case 15:case 0:o=j1(u,o,o.pendingProps,o.type,void 0,kt);break;case 11:o=j1(u,o,o.pendingProps,o.type.render,o.ref,kt);break;case 5:wm(o);default:V1(u,o),o=Et=Sy(o,Cs),o=q1(u,o,Cs)}r.memoizedProps=r.pendingProps,o===null?ud(r):Et=o}function Zo(r,o,u,f){gs=Zi=null,wm(o),zo=null,Jl=0;var g=o.return;try{if(FS(r,g,o,u,kt)){_n=1,td(r,er(u,r.current)),Et=null;return}}catch(y){if(g!==null)throw Et=g,y;_n=1,td(r,er(u,r.current)),Et=null;return}o.flags&32768?(Rt||f===1?r=!0:jo||(kt&536870912)!==0?r=!1:(ri=r=!0,(f===2||f===9||f===3||f===6)&&(f=rr.current,f!==null&&f.tag===13&&(f.flags|=16384))),Sb(o,r)):ud(o)}function ud(r){var o=r;do{if((o.flags&32768)!==0){Sb(o,ri);return}r=o.return;var u=jS(o.alternate,o,Cs);if(u!==null){Et=u;return}if(o=o.sibling,o!==null){Et=o;return}Et=o=r}while(o!==null);_n===0&&(_n=5)}function Sb(r,o){do{var u=HS(r.alternate,r);if(u!==null){u.flags&=32767,Et=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(r=r.sibling,r!==null)){Et=r;return}Et=r=u}while(r!==null);_n=6,Et=null}function Cb(r,o,u,f,g,y,k,N,Y){r.cancelPendingCommit=null;do dd();while(ia!==0);if((Ut&6)!==0)throw Error(n(327));if(o!==null){if(o===r.current)throw Error(n(177));if(y=o.lanes|o.childLanes,y|=Vp,br(r,u,y,k,N,Y),r===nn&&(Et=nn=null,kt=0),Yo=o,oi=r,Go=u,th=y,nh=g,mb=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,t5(de,function(){return Ab(),null})):(r.callbackNode=null,r.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=M.T,M.T=null,g=z.p,z.p=2,k=Ut,Ut|=4;try{YS(r,o,u)}finally{Ut=k,z.p=g,M.T=f}}ia=1,_b(),Ib(),Db()}}function _b(){if(ia===1){ia=0;var r=oi,o=Yo,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=M.T,M.T=null;var f=z.p;z.p=2;var g=Ut;Ut|=4;try{ob(o,r);var y=bh,k=py(r.containerInfo),N=y.focusedElem,Y=y.selectionRange;if(k!==N&&N&&N.ownerDocument&&fy(N.ownerDocument.documentElement,N)){if(Y!==null&&Gp(N)){var oe=Y.start,ge=Y.end;if(ge===void 0&&(ge=oe),"selectionStart"in N)N.selectionStart=oe,N.selectionEnd=Math.min(ge,N.value.length);else{var we=N.ownerDocument||document,le=we&&we.defaultView||window;if(le.getSelection){var ce=le.getSelection(),it=N.textContent.length,Ke=Math.min(Y.start,it),Zt=Y.end===void 0?Ke:Math.min(Y.end,it);!ce.extend&&Ke>Zt&&(k=Zt,Zt=Ke,Ke=k);var te=dy(N,Ke),Q=dy(N,Zt);if(te&&Q&&(ce.rangeCount!==1||ce.anchorNode!==te.node||ce.anchorOffset!==te.offset||ce.focusNode!==Q.node||ce.focusOffset!==Q.offset)){var re=we.createRange();re.setStart(te.node,te.offset),ce.removeAllRanges(),Ke>Zt?(ce.addRange(re),ce.extend(Q.node,Q.offset)):(re.setEnd(Q.node,Q.offset),ce.addRange(re))}}}}for(we=[],ce=N;ce=ce.parentNode;)ce.nodeType===1&&we.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<we.length;N++){var be=we[N];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}Sd=!!yh,bh=yh=null}finally{Ut=g,z.p=f,M.T=u}}r.current=o,ia=2}}function Ib(){if(ia===2){ia=0;var r=oi,o=Yo,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=M.T,M.T=null;var f=z.p;z.p=2;var g=Ut;Ut|=4;try{ab(r,o.alternate,o)}finally{Ut=g,z.p=f,M.T=u}}ia=3}}function Db(){if(ia===4||ia===3){ia=0,Hn();var r=oi,o=Yo,u=Go,f=mb;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?ia=5:(ia=0,Yo=oi=null,kb(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(ii=null),qn(u),o=o.stateNode,Re&&typeof Re.onCommitFiberRoot=="function")try{Re.onCommitFiberRoot($,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=M.T,g=z.p,z.p=2,M.T=null;try{for(var y=r.onRecoverableError,k=0;k<f.length;k++){var N=f[k];y(N.value,{componentStack:N.stack})}}finally{M.T=o,z.p=g}}(Go&3)!==0&&dd(),Hr(r),g=r.pendingLanes,(u&4194090)!==0&&(g&42)!==0?r===ah?lc++:(lc=0,ah=r):lc=0,cc(0)}}function kb(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,jl(o)))}function dd(r){return _b(),Ib(),Db(),Ab()}function Ab(){if(ia!==5)return!1;var r=oi,o=th;th=0;var u=qn(Go),f=M.T,g=z.p;try{z.p=32>u?32:u,M.T=null,u=nh,nh=null;var y=oi,k=Go;if(ia=0,Yo=oi=null,Go=0,(Ut&6)!==0)throw Error(n(331));var N=Ut;if(Ut|=4,fb(y.current),cb(y,y.current,k,u),Ut=N,cc(0,!1),Re&&typeof Re.onPostCommitFiberRoot=="function")try{Re.onPostCommitFiberRoot($,y)}catch{}return!0}finally{z.p=g,M.T=f,kb(r,o)}}function Mb(r,o,u){o=er(u,o),o=Pm(r.stateNode,o,2),r=Xs(r,o,2),r!==null&&(Un(r,2),Hr(r))}function Xt(r,o,u){if(r.tag===3)Mb(r,r,u);else for(;o!==null;){if(o.tag===3){Mb(o,r,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ii===null||!ii.has(f))){r=er(u,r),u=L1(2),f=Xs(o,u,2),f!==null&&(P1(u,f,o,r),Un(f,2),Hr(f));break}}o=o.return}}function oh(r,o,u){var f=r.pingCache;if(f===null){f=r.pingCache=new ZS;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(u)||(Xm=!0,g.add(u),r=KS.bind(null,r,o,u),o.then(r,r))}function KS(r,o,u){var f=r.pingCache;f!==null&&f.delete(o),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,nn===r&&(kt&u)===u&&(_n===4||_n===3&&(kt&62914560)===kt&&300>Kt()-eh?(Ut&2)===0&&$o(r,0):Km|=u,Ho===kt&&(Ho=0)),Hr(r)}function Tb(r,o){o===0&&(o=Yt()),r=ko(r,o),r!==null&&(Un(r,o),Hr(r))}function JS(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),Tb(r,u)}function e5(r,o){var u=0;switch(r.tag){case 13:var f=r.stateNode,g=r.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=r.stateNode;break;case 22:f=r.stateNode._retryCache;break;default:throw Error(n(314))}f!==null&&f.delete(o),Tb(r,u)}function t5(r,o){return ut(r,o)}var fd=null,qo=null,lh=!1,pd=!1,ch=!1,eo=0;function Hr(r){r!==qo&&r.next===null&&(qo===null?fd=qo=r:qo=qo.next=r),pd=!0,lh||(lh=!0,a5())}function cc(r,o){if(!ch&&pd){ch=!0;do for(var u=!1,f=fd;f!==null;){if(r!==0){var g=f.pendingLanes;if(g===0)var y=0;else{var k=f.suspendedLanes,N=f.pingedLanes;y=(1<<31-Ge(42|r)+1)-1,y&=g&~(k&~N),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(u=!0,Pb(f,y))}else y=kt,y=zn(f,f===nn?y:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(y&3)===0||wn(f,y)||(u=!0,Pb(f,y));f=f.next}while(u);ch=!1}}function n5(){Nb()}function Nb(){pd=lh=!1;var r=0;eo!==0&&(d5()&&(r=eo),eo=0);for(var o=Kt(),u=null,f=fd;f!==null;){var g=f.next,y=Rb(f,o);y===0?(f.next=null,u===null?fd=g:u.next=g,g===null&&(qo=u)):(u=f,(r!==0||(y&3)!==0)&&(pd=!0)),f=g}cc(r)}function Rb(r,o){for(var u=r.suspendedLanes,f=r.pingedLanes,g=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var k=31-Ge(y),N=1<<k,Y=g[k];Y===-1?((N&u)===0||(N&f)!==0)&&(g[k]=sn(N,o)):Y<=o&&(r.expiredLanes|=N),y&=~N}if(o=nn,u=kt,u=zn(r,r===o?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f=r.callbackNode,u===0||r===o&&(Ft===2||Ft===9)||r.cancelPendingCommit!==null)return f!==null&&f!==null&&Pt(f),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||wn(r,u)){if(o=u&-u,o===r.callbackPriority)return o;switch(f!==null&&Pt(f),qn(u)){case 2:case 8:u=pt;break;case 32:u=de;break;case 268435456:u=Ye;break;default:u=de}return f=Lb.bind(null,r),u=ut(u,f),r.callbackPriority=o,r.callbackNode=u,o}return f!==null&&f!==null&&Pt(f),r.callbackPriority=2,r.callbackNode=null,2}function Lb(r,o){if(ia!==0&&ia!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(dd()&&r.callbackNode!==u)return null;var f=kt;return f=zn(r,r===nn?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f===0?null:(gb(r,f,o),Rb(r,Kt()),r.callbackNode!=null&&r.callbackNode===u?Lb.bind(null,r):null)}function Pb(r,o){if(dd())return null;gb(r,o,!0)}function a5(){p5(function(){(Ut&6)!==0?ut(Zn,n5):Nb()})}function uh(){return eo===0&&(eo=Ia()),eo}function Bb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:aa(""+r)}function Ob(r,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,r.id&&u.setAttribute("form",r.id),o.parentNode.insertBefore(u,o),r=new FormData(r),u.parentNode.removeChild(u),r}function r5(r,o,u,f,g){if(o==="submit"&&u&&u.stateNode===g){var y=Bb((g[En]||null).action),k=f.submitter;k&&(o=(o=k[En]||null)?Bb(o.formAction):k.getAttribute("formAction"),o!==null&&(y=o,k=null));var N=new Zs("action","action",null,f,g);r.push({event:N,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(eo!==0){var Y=k?Ob(g,k):new FormData(g);Mm(u,{pending:!0,data:Y,method:g.method,action:y},null,Y)}}else typeof y=="function"&&(N.preventDefault(),Y=k?Ob(g,k):new FormData(g),Mm(u,{pending:!0,data:Y,method:g.method,action:y},y,Y))},currentTarget:g}]})}}for(var dh=0;dh<Qp.length;dh++){var fh=Qp[dh],s5=fh.toLowerCase(),i5=fh[0].toUpperCase()+fh.slice(1);_r(s5,"on"+i5)}_r(gy,"onAnimationEnd"),_r(yy,"onAnimationIteration"),_r(by,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(SS,"onTransitionRun"),_r(CS,"onTransitionStart"),_r(_S,"onTransitionCancel"),_r(vy,"onTransitionEnd"),va("onMouseEnter",["mouseout","mouseover"]),va("onMouseLeave",["mouseout","mouseover"]),va("onPointerEnter",["pointerout","pointerover"]),va("onPointerLeave",["pointerout","pointerover"]),Qa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uc));function zb(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var f=r[u],g=f.event;f=f.listeners;e:{var y=void 0;if(o)for(var k=f.length-1;0<=k;k--){var N=f[k],Y=N.instance,oe=N.currentTarget;if(N=N.listener,Y!==y&&g.isPropagationStopped())break e;y=N,g.currentTarget=oe;try{y(g)}catch(ge){ed(ge)}g.currentTarget=null,y=Y}else for(k=0;k<f.length;k++){if(N=f[k],Y=N.instance,oe=N.currentTarget,N=N.listener,Y!==y&&g.isPropagationStopped())break e;y=N,g.currentTarget=oe;try{y(g)}catch(ge){ed(ge)}g.currentTarget=null,y=Y}}}}function St(r,o){var u=o[js];u===void 0&&(u=o[js]=new Set);var f=r+"__bubble";u.has(f)||(Ub(o,r,2,!1),u.add(f))}function ph(r,o,u){var f=0;o&&(f|=4),Ub(u,r,f,o)}var md="_reactListening"+Math.random().toString(36).slice(2);function mh(r){if(!r[md]){r[md]=!0,cs.forEach(function(u){u!=="selectionchange"&&(o5.has(u)||ph(u,!1,r),ph(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[md]||(o[md]=!0,ph("selectionchange",!1,o))}}function Ub(r,o,u,f){switch(cv(o)){case 2:var g=L5;break;case 8:g=P5;break;default:g=kh}u=g.bind(null,o,u,r),g=void 0,!Qn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?r.addEventListener(o,u,{capture:!0,passive:g}):r.addEventListener(o,u,!0):g!==void 0?r.addEventListener(o,u,{passive:g}):r.addEventListener(o,u,!1)}function hh(r,o,u,f,g){var y=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var k=f.tag;if(k===3||k===4){var N=f.stateNode.containerInfo;if(N===g)break;if(k===4)for(k=f.return;k!==null;){var Y=k.tag;if((Y===3||Y===4)&&k.stateNode.containerInfo===g)return;k=k.return}for(;N!==null;){if(k=qa(N),k===null)return;if(Y=k.tag,Y===5||Y===6||Y===26||Y===27){f=y=k;continue e}N=N.parentNode}}f=f.return}xa(function(){var oe=y,ge=It(u),we=[];e:{var le=xy.get(r);if(le!==void 0){var ce=Zs,it=r;switch(r){case"keypress":if(Se(u)===0)break e;case"keydown":case"keyup":ce=en;break;case"focusin":it="focus",ce=Ml;break;case"focusout":it="blur",ce=Ml;break;case"beforeblur":case"afterblur":ce=Ml;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Eu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=ey;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=Up;break;case gy:case yy:case by:ce=Op;break;case vy:ce=Au;break;case"scroll":case"scrollend":ce=Dl;break;case"wheel":ce=Wp;break;case"copy":case"cut":case"paste":ce=Or;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Ja;break;case"toggle":case"beforetoggle":ce=ve}var Ke=(o&4)!==0,Zt=!Ke&&(r==="scroll"||r==="scrollend"),te=Ke?le!==null?le+"Capture":null:le;Ke=[];for(var Q=oe,re;Q!==null;){var be=Q;if(re=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||re===null||te===null||(be=gn(Q,te),be!=null&&Ke.push(dc(Q,be,re))),Zt)break;Q=Q.return}0<Ke.length&&(le=new ce(le,it,null,u,ge),we.push({event:le,listeners:Ke}))}}if((o&7)===0){e:{if(le=r==="mouseover"||r==="pointerover",ce=r==="mouseout"||r==="pointerout",le&&u!==Br&&(it=u.relatedTarget||u.fromElement)&&(qa(it)||it[ba]))break e;if((ce||le)&&(le=ge.window===ge?ge:(le=ge.ownerDocument)?le.defaultView||le.parentWindow:window,ce?(it=u.relatedTarget||u.toElement,ce=oe,it=it?qa(it):null,it!==null&&(Zt=l(it),Ke=it.tag,it!==Zt||Ke!==5&&Ke!==27&&Ke!==6)&&(it=null)):(ce=null,it=oe),ce!==it)){if(Ke=Eu,be="onMouseLeave",te="onMouseEnter",Q="mouse",(r==="pointerout"||r==="pointerover")&&(Ke=Ja,be="onPointerLeave",te="onPointerEnter",Q="pointer"),Zt=ce==null?le:Er(ce),re=it==null?le:Er(it),le=new Ke(be,Q+"leave",ce,u,ge),le.target=Zt,le.relatedTarget=re,be=null,qa(ge)===oe&&(Ke=new Ke(te,Q+"enter",it,u,ge),Ke.target=re,Ke.relatedTarget=Zt,be=Ke),Zt=be,ce&&it)t:{for(Ke=ce,te=it,Q=0,re=Ke;re;re=Qo(re))Q++;for(re=0,be=te;be;be=Qo(be))re++;for(;0<Q-re;)Ke=Qo(Ke),Q--;for(;0<re-Q;)te=Qo(te),re--;for(;Q--;){if(Ke===te||te!==null&&Ke===te.alternate)break t;Ke=Qo(Ke),te=Qo(te)}Ke=null}else Ke=null;ce!==null&&Fb(we,le,ce,Ke,!1),it!==null&&Zt!==null&&Fb(we,Zt,it,Ke,!0)}}e:{if(le=oe?Er(oe):window,ce=le.nodeName&&le.nodeName.toLowerCase(),ce==="select"||ce==="input"&&le.type==="file")var Oe=sy;else if(ay(le))if(iy)Oe=xS;else{Oe=bS;var wt=yS}else ce=le.nodeName,!ce||ce.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?oe&&Ue(oe.elementType)&&(Oe=sy):Oe=vS;if(Oe&&(Oe=Oe(r,oe))){ry(we,Oe,u,ge);break e}wt&&wt(r,le,oe),r==="focusout"&&oe&&le.type==="number"&&oe.memoizedProps.value!=null&&st(le,"number",le.value)}switch(wt=oe?Er(oe):window,r){case"focusin":(ay(wt)||wt.contentEditable==="true")&&(_o=wt,$p=oe,Ol=null);break;case"focusout":Ol=$p=_o=null;break;case"mousedown":Zp=!0;break;case"contextmenu":case"mouseup":case"dragend":Zp=!1,my(we,u,ge);break;case"selectionchange":if(ES)break;case"keydown":case"keyup":my(we,u,ge)}var $e;if(qe)e:{switch(r){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else Cr?da(r,u)&&(et="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(et="onCompositionStart");et&&(tn&&u.locale!=="ko"&&(Cr||et!=="onCompositionStart"?et==="onCompositionEnd"&&Cr&&($e=Xn()):(Vn=ge,Xa="value"in Vn?Vn.value:Vn.textContent,Cr=!0)),wt=hd(oe,et),0<wt.length&&(et=new Cu(et,r,null,u,ge),we.push({event:et,listeners:wt}),$e?et.data=$e:($e=zr(u),$e!==null&&(et.data=$e)))),($e=lt?jp(r,u):mS(r,u))&&(et=hd(oe,"onBeforeInput"),0<et.length&&(wt=new Cu("onBeforeInput","beforeinput",null,u,ge),we.push({event:wt,listeners:et}),wt.data=$e)),r5(we,r,oe,u,ge)}zb(we,o)})}function dc(r,o,u){return{instance:r,listener:o,currentTarget:u}}function hd(r,o){for(var u=o+"Capture",f=[];r!==null;){var g=r,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=gn(r,u),g!=null&&f.unshift(dc(r,g,y)),g=gn(r,o),g!=null&&f.push(dc(r,g,y))),r.tag===3)return f;r=r.return}return[]}function Qo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Fb(r,o,u,f,g){for(var y=o._reactName,k=[];u!==null&&u!==f;){var N=u,Y=N.alternate,oe=N.stateNode;if(N=N.tag,Y!==null&&Y===f)break;N!==5&&N!==26&&N!==27||oe===null||(Y=oe,g?(oe=gn(u,y),oe!=null&&k.unshift(dc(u,oe,Y))):g||(oe=gn(u,y),oe!=null&&k.push(dc(u,oe,Y)))),u=u.return}k.length!==0&&r.push({event:o,listeners:k})}var l5=/\r\n?/g,c5=/\u0000|\uFFFD/g;function Wb(r){return(typeof r=="string"?r:""+r).replace(l5,`
`).replace(c5,"")}function jb(r,o){return o=Wb(o),Wb(r)===o}function gd(){}function $t(r,o,u,f,g,y){switch(u){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||Te(r,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&Te(r,""+f);break;case"className":Pi(r,"class",f);break;case"tabIndex":Pi(r,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Pi(r,u,f);break;case"style":Ne(r,f,y);break;case"data":if(o!=="object"){Pi(r,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||u!=="href")){r.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=aa(""+f),r.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(u==="formAction"?(o!=="input"&&$t(r,o,"name",g.name,g,null),$t(r,o,"formEncType",g.formEncType,g,null),$t(r,o,"formMethod",g.formMethod,g,null),$t(r,o,"formTarget",g.formTarget,g,null)):($t(r,o,"encType",g.encType,g,null),$t(r,o,"method",g.method,g,null),$t(r,o,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=aa(""+f),r.setAttribute(u,f);break;case"onClick":f!=null&&(r.onclick=gd);break;case"onScroll":f!=null&&St("scroll",r);break;case"onScrollEnd":f!=null&&St("scrollend",r);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(u=f.__html,u!=null){if(g.children!=null)throw Error(n(60));r.innerHTML=u}}break;case"multiple":r.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":r.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){r.removeAttribute("xlink:href");break}u=aa(""+f),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""+f):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":f===!0?r.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,f):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?r.setAttribute(u,f):r.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?r.removeAttribute(u):r.setAttribute(u,f);break;case"popover":St("beforetoggle",r),St("toggle",r),ds(r,"popover",f);break;case"xlinkActuate":Va(r,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Va(r,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Va(r,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Va(r,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Va(r,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Va(r,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Va(r,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Va(r,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Va(r,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":ds(r,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=_t.get(u)||u,ds(r,u,f))}}function gh(r,o,u,f,g,y){switch(u){case"style":Ne(r,f,y);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(u=f.__html,u!=null){if(g.children!=null)throw Error(n(60));r.innerHTML=u}}break;case"children":typeof f=="string"?Te(r,f):(typeof f=="number"||typeof f=="bigint")&&Te(r,""+f);break;case"onScroll":f!=null&&St("scroll",r);break;case"onScrollEnd":f!=null&&St("scrollend",r);break;case"onClick":f!=null&&(r.onclick=gd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!us.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(g=u.endsWith("Capture"),o=u.slice(2,g?u.length-7:void 0),y=r[En]||null,y=y!=null?y[u]:null,typeof y=="function"&&r.removeEventListener(o,y,g),typeof f=="function")){typeof y!="function"&&y!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(o,f,g);break e}u in r?r[u]=f:f===!0?r.setAttribute(u,""):ds(r,u,f)}}}function oa(r,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":St("error",r),St("load",r);var f=!1,g=!1,y;for(y in u)if(u.hasOwnProperty(y)){var k=u[y];if(k!=null)switch(y){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:$t(r,o,y,k,u,null)}}g&&$t(r,o,"srcSet",u.srcSet,u,null),f&&$t(r,o,"src",u.src,u,null);return;case"input":St("invalid",r);var N=y=k=g=null,Y=null,oe=null;for(f in u)if(u.hasOwnProperty(f)){var ge=u[f];if(ge!=null)switch(f){case"name":g=ge;break;case"type":k=ge;break;case"checked":Y=ge;break;case"defaultChecked":oe=ge;break;case"value":y=ge;break;case"defaultValue":N=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(n(137,o));break;default:$t(r,o,f,ge,u,null)}}Le(r,y,N,Y,oe,k,g,!1),L(r);return;case"select":St("invalid",r),f=k=y=null;for(g in u)if(u.hasOwnProperty(g)&&(N=u[g],N!=null))switch(g){case"value":y=N;break;case"defaultValue":k=N;break;case"multiple":f=N;default:$t(r,o,g,N,u,null)}o=y,u=k,r.multiple=!!f,o!=null?We(r,!!f,o,!1):u!=null&&We(r,!!f,u,!0);return;case"textarea":St("invalid",r),y=g=f=null;for(k in u)if(u.hasOwnProperty(k)&&(N=u[k],N!=null))switch(k){case"value":f=N;break;case"defaultValue":g=N;break;case"children":y=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(n(91));break;default:$t(r,o,k,N,u,null)}Ze(r,f,g,y),L(r);return;case"option":for(Y in u)if(u.hasOwnProperty(Y)&&(f=u[Y],f!=null))switch(Y){case"selected":r.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:$t(r,o,Y,f,u,null)}return;case"dialog":St("beforetoggle",r),St("toggle",r),St("cancel",r),St("close",r);break;case"iframe":case"object":St("load",r);break;case"video":case"audio":for(f=0;f<uc.length;f++)St(uc[f],r);break;case"image":St("error",r),St("load",r);break;case"details":St("toggle",r);break;case"embed":case"source":case"link":St("error",r),St("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in u)if(u.hasOwnProperty(oe)&&(f=u[oe],f!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:$t(r,o,oe,f,u,null)}return;default:if(Ue(o)){for(ge in u)u.hasOwnProperty(ge)&&(f=u[ge],f!==void 0&&gh(r,o,ge,f,u,void 0));return}}for(N in u)u.hasOwnProperty(N)&&(f=u[N],f!=null&&$t(r,o,N,f,u,null))}function u5(r,o,u,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,k=null,N=null,Y=null,oe=null,ge=null;for(ce in u){var we=u[ce];if(u.hasOwnProperty(ce)&&we!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":Y=we;default:f.hasOwnProperty(ce)||$t(r,o,ce,null,f,we)}}for(var le in f){var ce=f[le];if(we=u[le],f.hasOwnProperty(le)&&(ce!=null||we!=null))switch(le){case"type":y=ce;break;case"name":g=ce;break;case"checked":oe=ce;break;case"defaultChecked":ge=ce;break;case"value":k=ce;break;case"defaultValue":N=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(n(137,o));break;default:ce!==we&&$t(r,o,le,ce,f,we)}}ke(r,k,N,Y,oe,ge,y,g);return;case"select":ce=k=N=le=null;for(y in u)if(Y=u[y],u.hasOwnProperty(y)&&Y!=null)switch(y){case"value":break;case"multiple":ce=Y;default:f.hasOwnProperty(y)||$t(r,o,y,null,f,Y)}for(g in f)if(y=f[g],Y=u[g],f.hasOwnProperty(g)&&(y!=null||Y!=null))switch(g){case"value":le=y;break;case"defaultValue":N=y;break;case"multiple":k=y;default:y!==Y&&$t(r,o,g,y,f,Y)}o=N,u=k,f=ce,le!=null?We(r,!!u,le,!1):!!f!=!!u&&(o!=null?We(r,!!u,o,!0):We(r,!!u,u?[]:"",!1));return;case"textarea":ce=le=null;for(N in u)if(g=u[N],u.hasOwnProperty(N)&&g!=null&&!f.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:$t(r,o,N,null,f,g)}for(k in f)if(g=f[k],y=u[k],f.hasOwnProperty(k)&&(g!=null||y!=null))switch(k){case"value":le=g;break;case"defaultValue":ce=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==y&&$t(r,o,k,g,f,y)}dt(r,le,ce);return;case"option":for(var it in u)if(le=u[it],u.hasOwnProperty(it)&&le!=null&&!f.hasOwnProperty(it))switch(it){case"selected":r.selected=!1;break;default:$t(r,o,it,null,f,le)}for(Y in f)if(le=f[Y],ce=u[Y],f.hasOwnProperty(Y)&&le!==ce&&(le!=null||ce!=null))switch(Y){case"selected":r.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:$t(r,o,Y,le,f,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in u)le=u[Ke],u.hasOwnProperty(Ke)&&le!=null&&!f.hasOwnProperty(Ke)&&$t(r,o,Ke,null,f,le);for(oe in f)if(le=f[oe],ce=u[oe],f.hasOwnProperty(oe)&&le!==ce&&(le!=null||ce!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(n(137,o));break;default:$t(r,o,oe,le,f,ce)}return;default:if(Ue(o)){for(var Zt in u)le=u[Zt],u.hasOwnProperty(Zt)&&le!==void 0&&!f.hasOwnProperty(Zt)&&gh(r,o,Zt,void 0,f,le);for(ge in f)le=f[ge],ce=u[ge],!f.hasOwnProperty(ge)||le===ce||le===void 0&&ce===void 0||gh(r,o,ge,le,f,ce);return}}for(var te in u)le=u[te],u.hasOwnProperty(te)&&le!=null&&!f.hasOwnProperty(te)&&$t(r,o,te,null,f,le);for(we in f)le=f[we],ce=u[we],!f.hasOwnProperty(we)||le===ce||le==null&&ce==null||$t(r,o,we,le,f,ce)}var yh=null,bh=null;function yd(r){return r.nodeType===9?r:r.ownerDocument}function Hb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Yb(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function vh(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var xh=null;function d5(){var r=window.event;return r&&r.type==="popstate"?r===xh?!1:(xh=r,!0):(xh=null,!1)}var Gb=typeof setTimeout=="function"?setTimeout:void 0,f5=typeof clearTimeout=="function"?clearTimeout:void 0,$b=typeof Promise=="function"?Promise:void 0,p5=typeof queueMicrotask=="function"?queueMicrotask:typeof $b<"u"?function(r){return $b.resolve(null).then(r).catch(m5)}:Gb;function m5(r){setTimeout(function(){throw r})}function ci(r){return r==="head"}function Zb(r,o){var u=o,f=0,g=0;do{var y=u.nextSibling;if(r.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"){if(0<f&&8>f){u=f;var k=r.ownerDocument;if(u&1&&fc(k.documentElement),u&2&&fc(k.body),u&4)for(u=k.head,fc(u),k=u.firstChild;k;){var N=k.nextSibling,Y=k.nodeName;k[wr]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&k.rel.toLowerCase()==="stylesheet"||u.removeChild(k),k=N}}if(g===0){r.removeChild(y),xc(o);return}g--}else u==="$"||u==="$?"||u==="$!"?g++:f=u.charCodeAt(0)-48;else f=0;u=y}while(u);xc(o)}function wh(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":wh(u),Hs(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function h5(r,o,u,f){for(;r.nodeType===1;){var g=u;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(f){if(!r[wr])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=Dr(r.nextSibling),r===null)break}return null}function g5(r,o,u){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=Dr(r.nextSibling),r===null))return null;return r}function Eh(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function y5(r,o){var u=r.ownerDocument;if(r.data!=="$?"||u.readyState==="complete")o();else{var f=function(){o(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),r._reactRetry=f}}function Dr(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return r}var Sh=null;function qb(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return r;o--}else u==="/$"&&o++}r=r.previousSibling}return null}function Qb(r,o,u){switch(o=yd(u),r){case"html":if(r=o.documentElement,!r)throw Error(n(452));return r;case"head":if(r=o.head,!r)throw Error(n(453));return r;case"body":if(r=o.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function fc(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Hs(r)}var ir=new Map,Vb=new Set;function bd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var _s=z.d;z.d={f:b5,r:v5,D:x5,C:w5,L:E5,m:S5,X:_5,S:C5,M:I5};function b5(){var r=_s.f(),o=cd();return r||o}function v5(r){var o=Rr(r);o!==null&&o.tag===5&&o.type==="form"?g1(o):_s.r(r)}var Vo=typeof document>"u"?null:document;function Xb(r,o,u){var f=Vo;if(f&&typeof o=="string"&&o){var g=Ae(o);g='link[rel="'+r+'"][href="'+g+'"]',typeof u=="string"&&(g+='[crossorigin="'+u+'"]'),Vb.has(g)||(Vb.add(g),r={rel:r,crossOrigin:u,href:o},f.querySelector(g)===null&&(o=f.createElement("link"),oa(o,"link",r),on(o),f.head.appendChild(o)))}}function x5(r){_s.D(r),Xb("dns-prefetch",r,null)}function w5(r,o){_s.C(r,o),Xb("preconnect",r,o)}function E5(r,o,u){_s.L(r,o,u);var f=Vo;if(f&&r&&o){var g='link[rel="preload"][as="'+Ae(o)+'"]';o==="image"&&u&&u.imageSrcSet?(g+='[imagesrcset="'+Ae(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(g+='[imagesizes="'+Ae(u.imageSizes)+'"]')):g+='[href="'+Ae(r)+'"]';var y=g;switch(o){case"style":y=Xo(r);break;case"script":y=Ko(r)}ir.has(y)||(r=m({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:r,as:o},u),ir.set(y,r),f.querySelector(g)!==null||o==="style"&&f.querySelector(pc(y))||o==="script"&&f.querySelector(mc(y))||(o=f.createElement("link"),oa(o,"link",r),on(o),f.head.appendChild(o)))}}function S5(r,o){_s.m(r,o);var u=Vo;if(u&&r){var f=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+Ae(f)+'"][href="'+Ae(r)+'"]',y=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ko(r)}if(!ir.has(y)&&(r=m({rel:"modulepreload",href:r},o),ir.set(y,r),u.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(mc(y)))return}f=u.createElement("link"),oa(f,"link",r),on(f),u.head.appendChild(f)}}}function C5(r,o,u){_s.S(r,o,u);var f=Vo;if(f&&r){var g=Da(f).hoistableStyles,y=Xo(r);o=o||"default";var k=g.get(y);if(!k){var N={loading:0,preload:null};if(k=f.querySelector(pc(y)))N.loading=5;else{r=m({rel:"stylesheet",href:r,"data-precedence":o},u),(u=ir.get(y))&&Ch(r,u);var Y=k=f.createElement("link");on(Y),oa(Y,"link",r),Y._p=new Promise(function(oe,ge){Y.onload=oe,Y.onerror=ge}),Y.addEventListener("load",function(){N.loading|=1}),Y.addEventListener("error",function(){N.loading|=2}),N.loading|=4,vd(k,o,f)}k={type:"stylesheet",instance:k,count:1,state:N},g.set(y,k)}}}function _5(r,o){_s.X(r,o);var u=Vo;if(u&&r){var f=Da(u).hoistableScripts,g=Ko(r),y=f.get(g);y||(y=u.querySelector(mc(g)),y||(r=m({src:r,async:!0},o),(o=ir.get(g))&&_h(r,o),y=u.createElement("script"),on(y),oa(y,"link",r),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(g,y))}}function I5(r,o){_s.M(r,o);var u=Vo;if(u&&r){var f=Da(u).hoistableScripts,g=Ko(r),y=f.get(g);y||(y=u.querySelector(mc(g)),y||(r=m({src:r,async:!0,type:"module"},o),(o=ir.get(g))&&_h(r,o),y=u.createElement("script"),on(y),oa(y,"link",r),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(g,y))}}function Kb(r,o,u,f){var g=(g=pe.current)?bd(g):null;if(!g)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Xo(u.href),u=Da(g).hoistableStyles,f=u.get(o),f||(f={type:"style",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=Xo(u.href);var y=Da(g).hoistableStyles,k=y.get(r);if(k||(g=g.ownerDocument||g,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,k),(y=g.querySelector(pc(r)))&&!y._p&&(k.instance=y,k.state.loading=5),ir.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ir.set(r,u),y||D5(g,r,u,k.state))),o&&f===null)throw Error(n(528,""));return k}if(o&&f!==null)throw Error(n(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ko(u),u=Da(g).hoistableScripts,f=u.get(o),f||(f={type:"script",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function Xo(r){return'href="'+Ae(r)+'"'}function pc(r){return'link[rel="stylesheet"]['+r+"]"}function Jb(r){return m({},r,{"data-precedence":r.precedence,precedence:null})}function D5(r,o,u,f){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=r.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),oa(o,"link",u),on(o),r.head.appendChild(o))}function Ko(r){return'[src="'+Ae(r)+'"]'}function mc(r){return"script[async]"+r}function ev(r,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var f=r.querySelector('style[data-href~="'+Ae(u.href)+'"]');if(f)return o.instance=f,on(f),f;var g=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(r.ownerDocument||r).createElement("style"),on(f),oa(f,"style",g),vd(f,u.precedence,r),o.instance=f;case"stylesheet":g=Xo(u.href);var y=r.querySelector(pc(g));if(y)return o.state.loading|=4,o.instance=y,on(y),y;f=Jb(u),(g=ir.get(g))&&Ch(f,g),y=(r.ownerDocument||r).createElement("link"),on(y);var k=y;return k._p=new Promise(function(N,Y){k.onload=N,k.onerror=Y}),oa(y,"link",f),o.state.loading|=4,vd(y,u.precedence,r),o.instance=y;case"script":return y=Ko(u.src),(g=r.querySelector(mc(y)))?(o.instance=g,on(g),g):(f=u,(g=ir.get(y))&&(f=m({},u),_h(f,g)),r=r.ownerDocument||r,g=r.createElement("script"),on(g),oa(g,"link",f),r.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,vd(f,u.precedence,r));return o.instance}function vd(r,o,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,y=g,k=0;k<f.length;k++){var N=f[k];if(N.dataset.precedence===o)y=N;else if(y!==g)break}y?y.parentNode.insertBefore(r,y.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(r,o.firstChild))}function Ch(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function _h(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var xd=null;function tv(r,o,u){if(xd===null){var f=new Map,g=xd=new Map;g.set(u,f)}else g=xd,f=g.get(u),f||(f=new Map,g.set(u,f));if(f.has(r))return f;for(f.set(r,null),u=u.getElementsByTagName(r),g=0;g<u.length;g++){var y=u[g];if(!(y[wr]||y[hn]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var k=y.getAttribute(o)||"";k=r+k;var N=f.get(k);N?N.push(y):f.set(k,[y])}}return f}function nv(r,o,u){r=r.ownerDocument||r,r.head.insertBefore(u,o==="title"?r.querySelector("head > title"):null)}function k5(r,o,u){if(u===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function av(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var hc=null;function A5(){}function M5(r,o,u){if(hc===null)throw Error(n(475));var f=hc;if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=Xo(u.href),y=r.querySelector(pc(g));if(y){r=y._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(f.count++,f=wd.bind(f),r.then(f,f)),o.state.loading|=4,o.instance=y,on(y);return}y=r.ownerDocument||r,u=Jb(u),(g=ir.get(g))&&Ch(u,g),y=y.createElement("link"),on(y);var k=y;k._p=new Promise(function(N,Y){k.onload=N,k.onerror=Y}),oa(y,"link",u),o.instance=y}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(f.count++,o=wd.bind(f),r.addEventListener("load",o),r.addEventListener("error",o))}}function T5(){if(hc===null)throw Error(n(475));var r=hc;return r.stylesheets&&r.count===0&&Ih(r,r.stylesheets),0<r.count?function(o){var u=setTimeout(function(){if(r.stylesheets&&Ih(r,r.stylesheets),r.unsuspend){var f=r.unsuspend;r.unsuspend=null,f()}},6e4);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u)}}:null}function wd(){if(this.count--,this.count===0){if(this.stylesheets)Ih(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Ed=null;function Ih(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Ed=new Map,o.forEach(N5,r),Ed=null,wd.call(r))}function N5(r,o){if(!(o.state.loading&4)){var u=Ed.get(r);if(u)var f=u.get(null);else{u=new Map,Ed.set(r,u);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var k=g[y];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(u.set(k.dataset.precedence,k),f=k)}f&&u.set(null,f)}g=o.instance,k=g.getAttribute("data-precedence"),y=u.get(k)||f,y===f&&u.set(null,g),u.set(k,g),this.count++,f=wd.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),y?y.parentNode.insertBefore(g,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),o.state.loading|=4}}var gc={$$typeof:I,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function R5(r,o,u,f,g,y,k,N){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ya(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ya(0),this.hiddenUpdates=ya(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function rv(r,o,u,f,g,y,k,N,Y,oe,ge,we){return r=new R5(r,o,u,k,N,Y,oe,we),o=1,y===!0&&(o|=24),y=Oa(3,null,null,o),r.current=y,y.stateNode=r,o=om(),o.refCount++,r.pooledCache=o,o.refCount++,y.memoizedState={element:f,isDehydrated:u,cache:o},dm(y),r}function sv(r){return r?(r=Ao,r):Ao}function iv(r,o,u,f,g,y){g=sv(g),f.context===null?f.context=g:f.pendingContext=g,f=Vs(o),f.payload={element:u},y=y===void 0?null:y,y!==null&&(f.callback=y),u=Xs(r,f,o),u!==null&&(ja(u,r,o),$l(u,r,o))}function ov(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function Dh(r,o){ov(r,o),(r=r.alternate)&&ov(r,o)}function lv(r){if(r.tag===13){var o=ko(r,67108864);o!==null&&ja(o,r,67108864),Dh(r,67108864)}}var Sd=!0;function L5(r,o,u,f){var g=M.T;M.T=null;var y=z.p;try{z.p=2,kh(r,o,u,f)}finally{z.p=y,M.T=g}}function P5(r,o,u,f){var g=M.T;M.T=null;var y=z.p;try{z.p=8,kh(r,o,u,f)}finally{z.p=y,M.T=g}}function kh(r,o,u,f){if(Sd){var g=Ah(f);if(g===null)hh(r,o,f,Cd,u),uv(r,f);else if(O5(g,r,o,u,f))f.stopPropagation();else if(uv(r,f),o&4&&-1<B5.indexOf(r)){for(;g!==null;){var y=Rr(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var k=On(y.pendingLanes);if(k!==0){var N=y;for(N.pendingLanes|=2,N.entangledLanes|=2;k;){var Y=1<<31-Ge(k);N.entanglements[1]|=Y,k&=~Y}Hr(y),(Ut&6)===0&&(od=Kt()+500,cc(0))}}break;case 13:N=ko(y,2),N!==null&&ja(N,y,2),cd(),Dh(y,2)}if(y=Ah(f),y===null&&hh(r,o,f,Cd,u),y===g)break;g=y}g!==null&&f.stopPropagation()}else hh(r,o,f,null,u)}}function Ah(r){return r=It(r),Mh(r)}var Cd=null;function Mh(r){if(Cd=null,r=qa(r),r!==null){var o=l(r);if(o===null)r=null;else{var u=o.tag;if(u===13){if(r=c(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Cd=r,null}function cv(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yn()){case Zn:return 2;case pt:return 8;case de:case nt:return 32;case Ye:return 268435456;default:return 32}default:return 32}}var Th=!1,ui=null,di=null,fi=null,yc=new Map,bc=new Map,pi=[],B5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uv(r,o){switch(r){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":di=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":yc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":bc.delete(o.pointerId)}}function vc(r,o,u,f,g,y){return r===null||r.nativeEvent!==y?(r={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:y,targetContainers:[g]},o!==null&&(o=Rr(o),o!==null&&lv(o)),r):(r.eventSystemFlags|=f,o=r.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),r)}function O5(r,o,u,f,g){switch(o){case"focusin":return ui=vc(ui,r,o,u,f,g),!0;case"dragenter":return di=vc(di,r,o,u,f,g),!0;case"mouseover":return fi=vc(fi,r,o,u,f,g),!0;case"pointerover":var y=g.pointerId;return yc.set(y,vc(yc.get(y)||null,r,o,u,f,g)),!0;case"gotpointercapture":return y=g.pointerId,bc.set(y,vc(bc.get(y)||null,r,o,u,f,g)),!0}return!1}function dv(r){var o=qa(r.target);if(o!==null){var u=l(o);if(u!==null){if(o=u.tag,o===13){if(o=c(u),o!==null){r.blockedOn=o,Ri(r.priority,function(){if(u.tag===13){var f=Wa();f=vr(f);var g=ko(u,f);g!==null&&ja(g,u,f),Dh(u,f)}});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function _d(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=Ah(r.nativeEvent);if(u===null){u=r.nativeEvent;var f=new u.constructor(u.type,u);Br=f,u.target.dispatchEvent(f),Br=null}else return o=Rr(u),o!==null&&lv(o),r.blockedOn=u,!1;o.shift()}return!0}function fv(r,o,u){_d(r)&&u.delete(o)}function z5(){Th=!1,ui!==null&&_d(ui)&&(ui=null),di!==null&&_d(di)&&(di=null),fi!==null&&_d(fi)&&(fi=null),yc.forEach(fv),bc.forEach(fv)}function Id(r,o){r.blockedOn===o&&(r.blockedOn=null,Th||(Th=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,z5)))}var Dd=null;function pv(r){Dd!==r&&(Dd=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Dd===r&&(Dd=null);for(var o=0;o<r.length;o+=3){var u=r[o],f=r[o+1],g=r[o+2];if(typeof f!="function"){if(Mh(f||u)===null)continue;break}var y=Rr(u);y!==null&&(r.splice(o,3),o-=3,Mm(y,{pending:!0,data:g,method:u.method,action:f},f,g))}}))}function xc(r){function o(Y){return Id(Y,r)}ui!==null&&Id(ui,r),di!==null&&Id(di,r),fi!==null&&Id(fi,r),yc.forEach(o),bc.forEach(o);for(var u=0;u<pi.length;u++){var f=pi[u];f.blockedOn===r&&(f.blockedOn=null)}for(;0<pi.length&&(u=pi[0],u.blockedOn===null);)dv(u),u.blockedOn===null&&pi.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var g=u[f],y=u[f+1],k=g[En]||null;if(typeof y=="function")k||pv(u);else if(k){var N=null;if(y&&y.hasAttribute("formAction")){if(g=y,k=y[En]||null)N=k.formAction;else if(Mh(g)!==null)continue}else N=k.action;typeof N=="function"?u[f+1]=N:(u.splice(f,3),f-=3),pv(u)}}}function Nh(r){this._internalRoot=r}kd.prototype.render=Nh.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));var u=o.current,f=Wa();iv(u,f,r,o,null,null)},kd.prototype.unmount=Nh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;iv(r.current,2,null,r,null,null),cd(),o[ba]=null}};function kd(r){this._internalRoot=r}kd.prototype.unstable_scheduleHydration=function(r){if(r){var o=is();r={blockedOn:null,target:r,priority:o};for(var u=0;u<pi.length&&o!==0&&o<pi[u].priority;u++);pi.splice(u,0,r),u===0&&dv(r)}};var mv=a.version;if(mv!=="19.1.0")throw Error(n(527,mv,"19.1.0"));z.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=p(o),r=r!==null?h(r):null,r=r===null?null:r.stateNode,r};var U5={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ad.isDisabled&&Ad.supportsFiber)try{$=Ad.inject(U5),Re=Ad}catch{}}return wc.createRoot=function(r,o){if(!s(r))throw Error(n(299));var u=!1,f="",g=M1,y=T1,k=N1,N=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(k=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(N=o.unstable_transitionCallbacks)),o=rv(r,1,!1,null,null,u,f,g,y,k,N,null),r[ba]=o.current,mh(r),new Nh(o)},wc.hydrateRoot=function(r,o,u){if(!s(r))throw Error(n(299));var f=!1,g="",y=M1,k=T1,N=N1,Y=null,oe=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(k=u.onCaughtError),u.onRecoverableError!==void 0&&(N=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(Y=u.unstable_transitionCallbacks),u.formState!==void 0&&(oe=u.formState)),o=rv(r,1,!0,o,u??null,f,g,y,k,N,Y,oe),o.context=sv(null),u=o.current,f=Wa(),f=vr(f),g=Vs(f),g.callback=null,Xs(u,g,f),u=f,o.current.lanes=u,Un(o,u),Hr(o),r[ba]=o.current,mh(r),new kd(o)},wc.version="19.1.0",wc}var Ev;function Q5(){if(Ev)return Lh.exports;Ev=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Lh.exports=q5(),Lh.exports}var V5=Q5();const X5=o0(V5);var Ec={},Sv;function K5(){if(Sv)return Ec;Sv=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.parse=c,Ec.serialize=h;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,a=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,l=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function c(x,E){const w=new l,S=x.length;if(S<2)return w;const _=(E==null?void 0:E.decode)||m;let C=0;do{const D=x.indexOf("=",C);if(D===-1)break;const I=x.indexOf(";",C),A=I===-1?S:I;if(D>A){C=x.lastIndexOf(";",D-1)+1;continue}const T=d(x,C,D),F=p(x,D,T),J=x.slice(T,F);if(w[J]===void 0){let H=d(x,D+1,A),Z=p(x,A,H);const K=_(x.slice(H,Z));w[J]=K}C=A+1}while(C<S);return w}function d(x,E,w){do{const S=x.charCodeAt(E);if(S!==32&&S!==9)return E}while(++E<w);return w}function p(x,E,w){for(;E>w;){const S=x.charCodeAt(--E);if(S!==32&&S!==9)return E+1}return w}function h(x,E,w){const S=(w==null?void 0:w.encode)||encodeURIComponent;if(!t.test(x))throw new TypeError(`argument name is invalid: ${x}`);const _=S(E);if(!a.test(_))throw new TypeError(`argument val is invalid: ${E}`);let C=x+"="+_;if(!w)return C;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);C+="; Max-Age="+w.maxAge}if(w.domain){if(!e.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);C+="; Domain="+w.domain}if(w.path){if(!n.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);C+="; Path="+w.path}if(w.expires){if(!b(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);C+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(C+="; HttpOnly"),w.secure&&(C+="; Secure"),w.partitioned&&(C+="; Partitioned"),w.priority)switch(typeof w.priority=="string"?w.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return C}function m(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function b(x){return s.call(x)==="[object Date]"}return Ec}K5();var Cv="popstate";function J5(t={}){function a(s,l){let{pathname:c="/",search:d="",hash:p=""}=vo(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Cg("",{pathname:c,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function e(s,l){let c=s.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let p=s.location.href,h=p.indexOf("#");d=h===-1?p:p.slice(0,h)}return d+"#"+(typeof l=="string"?l:eu(l))}function n(s,l){Za(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return tC(a,e,n,t)}function pn(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function Za(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function eC(){return Math.random().toString(36).substring(2,10)}function _v(t,a){return{usr:t.state,key:t.key,idx:a}}function Cg(t,a,e=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof a=="string"?vo(a):a,state:e,key:a&&a.key||n||eC()}}function eu({pathname:t="/",search:a="",hash:e=""}){return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),e&&e!=="#"&&(t+=e.charAt(0)==="#"?e:"#"+e),t}function vo(t){let a={};if(t){let e=t.indexOf("#");e>=0&&(a.hash=t.substring(e),t=t.substring(0,e));let n=t.indexOf("?");n>=0&&(a.search=t.substring(n),t=t.substring(0,n)),t&&(a.pathname=t)}return a}function tC(t,a,e,n={}){let{window:s=document.defaultView,v5Compat:l=!1}=n,c=s.history,d="POP",p=null,h=m();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function m(){return(c.state||{idx:null}).idx}function b(){d="POP";let _=m(),C=_==null?null:_-h;h=_,p&&p({action:d,location:S.location,delta:C})}function x(_,C){d="PUSH";let D=Cg(S.location,_,C);e&&e(D,_),h=m()+1;let I=_v(D,h),A=S.createHref(D);try{c.pushState(I,"",A)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(A)}l&&p&&p({action:d,location:S.location,delta:1})}function E(_,C){d="REPLACE";let D=Cg(S.location,_,C);e&&e(D,_),h=m();let I=_v(D,h),A=S.createHref(D);c.replaceState(I,"",A),l&&p&&p({action:d,location:S.location,delta:0})}function w(_){return nC(_)}let S={get action(){return d},get location(){return t(s,c)},listen(_){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(Cv,b),p=_,()=>{s.removeEventListener(Cv,b),p=null}},createHref(_){return a(s,_)},createURL:w,encodeLocation(_){let C=w(_);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:x,replace:E,go(_){return c.go(_)}};return S}function nC(t,a=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),pn(e,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:eu(t);return n=n.replace(/ $/,"%20"),!a&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function Tx(t,a,e="/"){return aC(t,a,e,!1)}function aC(t,a,e,n){let s=typeof a=="string"?vo(a):a,l=Os(s.pathname||"/",e);if(l==null)return null;let c=Nx(t);rC(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let h=hC(l);d=pC(c[p],h,n)}return d}function Nx(t,a=[],e=[],n=""){let s=(l,c,d)=>{let p={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(pn(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length));let h=Ms([n,p.relativePath]),m=e.concat(p);l.children&&l.children.length>0&&(pn(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),Nx(l.children,a,m,h)),!(l.path==null&&!l.index)&&a.push({path:h,score:dC(h,l.index),routesMeta:m})};return t.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))s(l,c);else for(let p of Rx(l.path))s(l,c,p)}),a}function Rx(t){let a=t.split("/");if(a.length===0)return[];let[e,...n]=a,s=e.endsWith("?"),l=e.replace(/\?$/,"");if(n.length===0)return s?[l,""]:[l];let c=Rx(n.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),s&&d.push(...c),d.map(p=>t.startsWith("/")&&p===""?"/":p)}function rC(t){t.sort((a,e)=>a.score!==e.score?e.score-a.score:fC(a.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var sC=/^:[\w-]+$/,iC=3,oC=2,lC=1,cC=10,uC=-2,Iv=t=>t==="*";function dC(t,a){let e=t.split("/"),n=e.length;return e.some(Iv)&&(n+=uC),a&&(n+=oC),e.filter(s=>!Iv(s)).reduce((s,l)=>s+(sC.test(l)?iC:l===""?lC:cC),n)}function fC(t,a){return t.length===a.length&&t.slice(0,-1).every((n,s)=>n===a[s])?t[t.length-1]-a[a.length-1]:0}function pC(t,a,e=!1){let{routesMeta:n}=t,s={},l="/",c=[];for(let d=0;d<n.length;++d){let p=n[d],h=d===n.length-1,m=l==="/"?a:a.slice(l.length)||"/",b=ff({path:p.relativePath,caseSensitive:p.caseSensitive,end:h},m),x=p.route;if(!b&&h&&e&&!n[n.length-1].route.index&&(b=ff({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},m)),!b)return null;Object.assign(s,b.params),c.push({params:s,pathname:Ms([l,b.pathname]),pathnameBase:vC(Ms([l,b.pathnameBase])),route:x}),b.pathnameBase!=="/"&&(l=Ms([l,b.pathnameBase]))}return c}function ff(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[e,n]=mC(t.path,t.caseSensitive,t.end),s=a.match(e);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:n.reduce((h,{paramName:m,isOptional:b},x)=>{if(m==="*"){let w=d[x]||"";c=l.slice(0,l.length-w.length).replace(/(.)\/+$/,"$1")}const E=d[x];return b&&!E?h[m]=void 0:h[m]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:c,pattern:t}}function mC(t,a=!1,e=!0){Za(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(n.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,a?void 0:"i"),n]}function hC(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Za(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),t}}function Os(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let e=a.endsWith("/")?a.length-1:a.length,n=t.charAt(e);return n&&n!=="/"?null:t.slice(e)||"/"}function gC(t,a="/"){let{pathname:e,search:n="",hash:s=""}=typeof t=="string"?vo(t):t;return{pathname:e?e.startsWith("/")?e:yC(e,a):a,search:xC(n),hash:wC(s)}}function yC(t,a){let e=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function zh(t,a,e,n){return`Cannot include a '${t}' character in a manually specified \`to.${a}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bC(t){return t.filter((a,e)=>e===0||a.route.path&&a.route.path.length>0)}function c0(t){let a=bC(t);return a.map((e,n)=>n===a.length-1?e.pathname:e.pathnameBase)}function u0(t,a,e,n=!1){let s;typeof t=="string"?s=vo(t):(s={...t},pn(!s.pathname||!s.pathname.includes("?"),zh("?","pathname","search",s)),pn(!s.pathname||!s.pathname.includes("#"),zh("#","pathname","hash",s)),pn(!s.search||!s.search.includes("#"),zh("#","search","hash",s)));let l=t===""||s.pathname==="",c=l?"/":s.pathname,d;if(c==null)d=e;else{let b=a.length-1;if(!n&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),b-=1;s.pathname=x.join("/")}d=b>=0?a[b]:"/"}let p=gC(s,d),h=c&&c!=="/"&&c.endsWith("/"),m=(l||c===".")&&e.endsWith("/");return!p.pathname.endsWith("/")&&(h||m)&&(p.pathname+="/"),p}var Ms=t=>t.join("/").replace(/\/\/+/g,"/"),vC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,wC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function EC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Lx=["POST","PUT","PATCH","DELETE"];new Set(Lx);var SC=["GET",...Lx];new Set(SC);var El=v.createContext(null);El.displayName="DataRouter";var fp=v.createContext(null);fp.displayName="DataRouterState";var Px=v.createContext({isTransitioning:!1});Px.displayName="ViewTransition";var CC=v.createContext(new Map);CC.displayName="Fetchers";var _C=v.createContext(null);_C.displayName="Await";var Nr=v.createContext(null);Nr.displayName="Navigation";var cu=v.createContext(null);cu.displayName="Location";var ns=v.createContext({outlet:null,matches:[],isDataRoute:!1});ns.displayName="Route";var d0=v.createContext(null);d0.displayName="RouteError";function IC(t,{relative:a}={}){pn(Sl(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=v.useContext(Nr),{hash:s,pathname:l,search:c}=uu(t,{relative:a}),d=l;return e!=="/"&&(d=l==="/"?e:Ms([e,l])),n.createHref({pathname:d,search:c,hash:s})}function Sl(){return v.useContext(cu)!=null}function Fs(){return pn(Sl(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(cu).location}var Bx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ox(t){v.useContext(Nr).static||v.useLayoutEffect(t)}function xo(){let{isDataRoute:t}=v.useContext(ns);return t?UC():DC()}function DC(){pn(Sl(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(El),{basename:a,navigator:e}=v.useContext(Nr),{matches:n}=v.useContext(ns),{pathname:s}=Fs(),l=JSON.stringify(c0(n)),c=v.useRef(!1);return Ox(()=>{c.current=!0}),v.useCallback((p,h={})=>{if(Za(c.current,Bx),!c.current)return;if(typeof p=="number"){e.go(p);return}let m=u0(p,JSON.parse(l),s,h.relative==="path");t==null&&a!=="/"&&(m.pathname=m.pathname==="/"?a:Ms([a,m.pathname])),(h.replace?e.replace:e.push)(m,h.state,h)},[a,e,l,s,t])}v.createContext(null);function uu(t,{relative:a}={}){let{matches:e}=v.useContext(ns),{pathname:n}=Fs(),s=JSON.stringify(c0(e));return v.useMemo(()=>u0(t,JSON.parse(s),n,a==="path"),[t,s,n,a])}function kC(t,a){return zx(t,a)}function zx(t,a,e,n){var C;pn(Sl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=v.useContext(Nr),{matches:l}=v.useContext(ns),c=l[l.length-1],d=c?c.params:{},p=c?c.pathname:"/",h=c?c.pathnameBase:"/",m=c&&c.route;{let D=m&&m.path||"";Ux(p,!m||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let b=Fs(),x;if(a){let D=typeof a=="string"?vo(a):a;pn(h==="/"||((C=D.pathname)==null?void 0:C.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${D.pathname}" was given in the \`location\` prop.`),x=D}else x=b;let E=x.pathname||"/",w=E;if(h!=="/"){let D=h.replace(/^\//,"").split("/");w="/"+E.replace(/^\//,"").split("/").slice(D.length).join("/")}let S=Tx(t,{pathname:w});Za(m||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Za(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=RC(S&&S.map(D=>Object.assign({},D,{params:Object.assign({},d,D.params),pathname:Ms([h,s.encodeLocation?s.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?h:Ms([h,s.encodeLocation?s.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),l,e,n);return a&&_?v.createElement(cu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function AC(){let t=zC(),a=EC(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),e=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=v.createElement(v.Fragment,null,v.createElement("p",null,"💿 Hey developer 👋"),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:l},"ErrorBoundary")," or"," ",v.createElement("code",{style:l},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},a),e?v.createElement("pre",{style:s},e):null,c)}var MC=v.createElement(AC,null),TC=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?v.createElement(ns.Provider,{value:this.props.routeContext},v.createElement(d0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function NC({routeContext:t,match:a,children:e}){let n=v.useContext(El);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),v.createElement(ns.Provider,{value:t},e)}function RC(t,a=[],e=null,n=null){if(t==null){if(!e)return null;if(e.errors)t=e.matches;else if(a.length===0&&!e.initialized&&e.matches.length>0)t=e.matches;else return null}let s=t,l=e==null?void 0:e.errors;if(l!=null){let p=s.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);pn(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let c=!1,d=-1;if(e)for(let p=0;p<s.length;p++){let h=s[p];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=p),h.route.id){let{loaderData:m,errors:b}=e,x=h.route.loader&&!m.hasOwnProperty(h.route.id)&&(!b||b[h.route.id]===void 0);if(h.route.lazy||x){c=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((p,h,m)=>{let b,x=!1,E=null,w=null;e&&(b=l&&h.route.id?l[h.route.id]:void 0,E=h.route.errorElement||MC,c&&(d<0&&m===0?(Ux("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,w=null):d===m&&(x=!0,w=h.route.hydrateFallbackElement||null)));let S=a.concat(s.slice(0,m+1)),_=()=>{let C;return b?C=E:x?C=w:h.route.Component?C=v.createElement(h.route.Component,null):h.route.element?C=h.route.element:C=p,v.createElement(NC,{match:h,routeContext:{outlet:p,matches:S,isDataRoute:e!=null},children:C})};return e&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?v.createElement(TC,{location:e.location,revalidation:e.revalidation,component:E,error:b,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):_()},null)}function f0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LC(t){let a=v.useContext(El);return pn(a,f0(t)),a}function PC(t){let a=v.useContext(fp);return pn(a,f0(t)),a}function BC(t){let a=v.useContext(ns);return pn(a,f0(t)),a}function p0(t){let a=BC(t),e=a.matches[a.matches.length-1];return pn(e.route.id,`${t} can only be used on routes that contain a unique "id"`),e.route.id}function OC(){return p0("useRouteId")}function zC(){var n;let t=v.useContext(d0),a=PC("useRouteError"),e=p0("useRouteError");return t!==void 0?t:(n=a.errors)==null?void 0:n[e]}function UC(){let{router:t}=LC("useNavigate"),a=p0("useNavigate"),e=v.useRef(!1);return Ox(()=>{e.current=!0}),v.useCallback(async(s,l={})=>{Za(e.current,Bx),e.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:a,...l}))},[t,a])}var Dv={};function Ux(t,a,e){!a&&!Dv[t]&&(Dv[t]=!0,Za(!1,e))}v.memo(FC);function FC({routes:t,future:a,state:e}){return zx(t,void 0,e,a)}function Md({to:t,replace:a,state:e,relative:n}){pn(Sl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=v.useContext(Nr);Za(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=v.useContext(ns),{pathname:c}=Fs(),d=xo(),p=u0(t,c0(l),c,n==="path"),h=JSON.stringify(p);return v.useEffect(()=>{d(JSON.parse(h),{replace:a,state:e,relative:n})},[d,h,n,a,e]),null}function Yr(t){pn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function WC({basename:t="/",children:a=null,location:e,navigationType:n="POP",navigator:s,static:l=!1}){pn(!Sl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=v.useMemo(()=>({basename:c,navigator:s,static:l,future:{}}),[c,s,l]);typeof e=="string"&&(e=vo(e));let{pathname:p="/",search:h="",hash:m="",state:b=null,key:x="default"}=e,E=v.useMemo(()=>{let w=Os(p,c);return w==null?null:{location:{pathname:w,search:h,hash:m,state:b,key:x},navigationType:n}},[c,p,h,m,b,x,n]);return Za(E!=null,`<Router basename="${c}"> is not able to match the URL "${p}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:v.createElement(Nr.Provider,{value:d},v.createElement(cu.Provider,{children:a,value:E}))}function kv({children:t,location:a}){return kC(_g(t),a)}function _g(t,a=[]){let e=[];return v.Children.forEach(t,(n,s)=>{if(!v.isValidElement(n))return;let l=[...a,s];if(n.type===v.Fragment){e.push.apply(e,_g(n.props.children,l));return}pn(n.type===Yr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=_g(n.props.children,l)),e.push(c)}),e}var Vd="get",Xd="application/x-www-form-urlencoded";function pp(t){return t!=null&&typeof t.tagName=="string"}function jC(t){return pp(t)&&t.tagName.toLowerCase()==="button"}function HC(t){return pp(t)&&t.tagName.toLowerCase()==="form"}function YC(t){return pp(t)&&t.tagName.toLowerCase()==="input"}function GC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $C(t,a){return t.button===0&&(!a||a==="_self")&&!GC(t)}function Ig(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,e)=>{let n=t[e];return a.concat(Array.isArray(n)?n.map(s=>[e,s]):[[e,n]])},[]))}function ZC(t,a){let e=Ig(t);return a&&a.forEach((n,s)=>{e.has(s)||a.getAll(s).forEach(l=>{e.append(s,l)})}),e}var Td=null;function qC(){if(Td===null)try{new FormData(document.createElement("form"),0),Td=!1}catch{Td=!0}return Td}var QC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Uh(t){return t!=null&&!QC.has(t)?(Za(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xd}"`),null):t}function VC(t,a){let e,n,s,l,c;if(HC(t)){let d=t.getAttribute("action");n=d?Os(d,a):null,e=t.getAttribute("method")||Vd,s=Uh(t.getAttribute("enctype"))||Xd,l=new FormData(t)}else if(jC(t)||YC(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||d.getAttribute("action");if(n=p?Os(p,a):null,e=t.getAttribute("formmethod")||d.getAttribute("method")||Vd,s=Uh(t.getAttribute("formenctype"))||Uh(d.getAttribute("enctype"))||Xd,l=new FormData(d,t),!qC()){let{name:h,type:m,value:b}=t;if(m==="image"){let x=h?`${h}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else h&&l.append(h,b)}}else{if(pp(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Vd,n=null,s=Xd,c=t}return l&&s==="text/plain"&&(c=l,l=void 0),{action:n,method:e.toLowerCase(),encType:s,formData:l,body:c}}function m0(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}async function XC(t,a){if(t.id in a)return a[t.id];try{let e=await import(t.module);return a[t.id]=e,e}catch(e){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function KC(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function JC(t,a,e){let n=await Promise.all(t.map(async s=>{let l=a.routes[s.route.id];if(l){let c=await XC(l,e);return c.links?c.links():[]}return[]}));return a_(n.flat(1).filter(KC).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Av(t,a,e,n,s,l){let c=(p,h)=>e[h]?p.route.id!==e[h].route.id:!0,d=(p,h)=>{var m;return e[h].pathname!==p.pathname||((m=e[h].route.path)==null?void 0:m.endsWith("*"))&&e[h].params["*"]!==p.params["*"]};return l==="assets"?a.filter((p,h)=>c(p,h)||d(p,h)):l==="data"?a.filter((p,h)=>{var b;let m=n.routes[p.route.id];if(!m||!m.hasLoader)return!1;if(c(p,h)||d(p,h))return!0;if(p.route.shouldRevalidate){let x=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((b=e[0])==null?void 0:b.params)||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function e_(t,a,{includeHydrateFallback:e}={}){return t_(t.map(n=>{let s=a.routes[n.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),e&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function t_(t){return[...new Set(t)]}function n_(t){let a={},e=Object.keys(t).sort();for(let n of e)a[n]=t[n];return a}function a_(t,a){let e=new Set;return new Set(a),t.reduce((n,s)=>{let l=JSON.stringify(n_(s));return e.has(l)||(e.add(l),n.push({key:l,link:s})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var r_=new Set([100,101,204,205]);function s_(t,a){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":a&&Os(e.pathname,a)==="/"?e.pathname=`${a.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function Fx(){let t=v.useContext(El);return m0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function i_(){let t=v.useContext(fp);return m0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var h0=v.createContext(void 0);h0.displayName="FrameworkContext";function Wx(){let t=v.useContext(h0);return m0(t,"You must render this element inside a <HydratedRouter> element"),t}function o_(t,a){let e=v.useContext(h0),[n,s]=v.useState(!1),[l,c]=v.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:h,onMouseLeave:m,onTouchStart:b}=a,x=v.useRef(null);v.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let S=C=>{C.forEach(D=>{c(D.isIntersecting)})},_=new IntersectionObserver(S,{threshold:.5});return x.current&&_.observe(x.current),()=>{_.disconnect()}}},[t]),v.useEffect(()=>{if(n){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[n]);let E=()=>{s(!0)},w=()=>{s(!1),c(!1)};return e?t!=="intent"?[l,x,{}]:[l,x,{onFocus:Sc(d,E),onBlur:Sc(p,w),onMouseEnter:Sc(h,E),onMouseLeave:Sc(m,w),onTouchStart:Sc(b,E)}]:[!1,x,{}]}function Sc(t,a){return e=>{t&&t(e),e.defaultPrevented||a(e)}}function l_({page:t,...a}){let{router:e}=Fx(),n=v.useMemo(()=>Tx(e.routes,t,e.basename),[e.routes,t,e.basename]);return n?v.createElement(u_,{page:t,matches:n,...a}):null}function c_(t){let{manifest:a,routeModules:e}=Wx(),[n,s]=v.useState([]);return v.useEffect(()=>{let l=!1;return JC(t,a,e).then(c=>{l||s(c)}),()=>{l=!0}},[t,a,e]),n}function u_({page:t,matches:a,...e}){let n=Fs(),{manifest:s,routeModules:l}=Wx(),{basename:c}=Fx(),{loaderData:d,matches:p}=i_(),h=v.useMemo(()=>Av(t,a,p,s,n,"data"),[t,a,p,s,n]),m=v.useMemo(()=>Av(t,a,p,s,n,"assets"),[t,a,p,s,n]),b=v.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let w=new Set,S=!1;if(a.forEach(C=>{var I;let D=s.routes[C.route.id];!D||!D.hasLoader||(!h.some(A=>A.route.id===C.route.id)&&C.route.id in d&&((I=l[C.route.id])!=null&&I.shouldRevalidate)||D.hasClientLoader?S=!0:w.add(C.route.id))}),w.size===0)return[];let _=s_(t,c);return S&&w.size>0&&_.searchParams.set("_routes",a.filter(C=>w.has(C.route.id)).map(C=>C.route.id).join(",")),[_.pathname+_.search]},[c,d,n,s,h,a,t,l]),x=v.useMemo(()=>e_(m,s),[m,s]),E=c_(m);return v.createElement(v.Fragment,null,b.map(w=>v.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...e})),x.map(w=>v.createElement("link",{key:w,rel:"modulepreload",href:w,...e})),E.map(({key:w,link:S})=>v.createElement("link",{key:w,...S})))}function d_(...t){return a=>{t.forEach(e=>{typeof e=="function"?e(a):e!=null&&(e.current=a)})}}var jx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jx&&(window.__reactRouterVersion="7.6.1")}catch{}function f_({basename:t,children:a,window:e}){let n=v.useRef();n.current==null&&(n.current=J5({window:e,v5Compat:!0}));let s=n.current,[l,c]=v.useState({action:s.action,location:s.location}),d=v.useCallback(p=>{v.startTransition(()=>c(p))},[c]);return v.useLayoutEffect(()=>s.listen(d),[s,d]),v.createElement(WC,{basename:t,children:a,location:l.location,navigationType:l.action,navigator:s})}var Hx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yx=v.forwardRef(function({onClick:a,discover:e="render",prefetch:n="none",relative:s,reloadDocument:l,replace:c,state:d,target:p,to:h,preventScrollReset:m,viewTransition:b,...x},E){let{basename:w}=v.useContext(Nr),S=typeof h=="string"&&Hx.test(h),_,C=!1;if(typeof h=="string"&&S&&(_=h,jx))try{let Z=new URL(window.location.href),K=h.startsWith("//")?new URL(Z.protocol+h):new URL(h),X=Os(K.pathname,w);K.origin===Z.origin&&X!=null?h=X+K.search+K.hash:C=!0}catch{Za(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=IC(h,{relative:s}),[I,A,T]=o_(n,x),F=g_(h,{replace:c,state:d,target:p,preventScrollReset:m,relative:s,viewTransition:b});function J(Z){a&&a(Z),Z.defaultPrevented||F(Z)}let H=v.createElement("a",{...x,...T,href:_||D,onClick:C||l?a:J,ref:d_(E,A),target:p,"data-discover":!S&&e==="render"?"true":void 0});return I&&!S?v.createElement(v.Fragment,null,H,v.createElement(l_,{page:D})):H});Yx.displayName="Link";var p_=v.forwardRef(function({"aria-current":a="page",caseSensitive:e=!1,className:n="",end:s=!1,style:l,to:c,viewTransition:d,children:p,...h},m){let b=uu(c,{relative:h.relative}),x=Fs(),E=v.useContext(fp),{navigator:w,basename:S}=v.useContext(Nr),_=E!=null&&E_(b)&&d===!0,C=w.encodeLocation?w.encodeLocation(b).pathname:b.pathname,D=x.pathname,I=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;e||(D=D.toLowerCase(),I=I?I.toLowerCase():null,C=C.toLowerCase()),I&&S&&(I=Os(I,S)||I);const A=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let T=D===C||!s&&D.startsWith(C)&&D.charAt(A)==="/",F=I!=null&&(I===C||!s&&I.startsWith(C)&&I.charAt(C.length)==="/"),J={isActive:T,isPending:F,isTransitioning:_},H=T?a:void 0,Z;typeof n=="function"?Z=n(J):Z=[n,T?"active":null,F?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let K=typeof l=="function"?l(J):l;return v.createElement(Yx,{...h,"aria-current":H,className:Z,ref:m,style:K,to:c,viewTransition:d},typeof p=="function"?p(J):p)});p_.displayName="NavLink";var m_=v.forwardRef(({discover:t="render",fetcherKey:a,navigate:e,reloadDocument:n,replace:s,state:l,method:c=Vd,action:d,onSubmit:p,relative:h,preventScrollReset:m,viewTransition:b,...x},E)=>{let w=x_(),S=w_(d,{relative:h}),_=c.toLowerCase()==="get"?"get":"post",C=typeof d=="string"&&Hx.test(d),D=I=>{if(p&&p(I),I.defaultPrevented)return;I.preventDefault();let A=I.nativeEvent.submitter,T=(A==null?void 0:A.getAttribute("formmethod"))||c;w(A||I.currentTarget,{fetcherKey:a,method:T,navigate:e,replace:s,state:l,relative:h,preventScrollReset:m,viewTransition:b})};return v.createElement("form",{ref:E,method:_,action:S,onSubmit:n?p:D,...x,"data-discover":!C&&t==="render"?"true":void 0})});m_.displayName="Form";function h_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Gx(t){let a=v.useContext(El);return pn(a,h_(t)),a}function g_(t,{target:a,replace:e,state:n,preventScrollReset:s,relative:l,viewTransition:c}={}){let d=xo(),p=Fs(),h=uu(t,{relative:l});return v.useCallback(m=>{if($C(m,a)){m.preventDefault();let b=e!==void 0?e:eu(p)===eu(h);d(t,{replace:b,state:n,preventScrollReset:s,relative:l,viewTransition:c})}},[p,d,h,e,n,a,t,s,l,c])}function y_(t){Za(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=v.useRef(Ig(t)),e=v.useRef(!1),n=Fs(),s=v.useMemo(()=>ZC(n.search,e.current?null:a.current),[n.search]),l=xo(),c=v.useCallback((d,p)=>{const h=Ig(typeof d=="function"?d(s):d);e.current=!0,l("?"+h,p)},[l,s]);return[s,c]}var b_=0,v_=()=>`__${String(++b_)}__`;function x_(){let{router:t}=Gx("useSubmit"),{basename:a}=v.useContext(Nr),e=OC();return v.useCallback(async(n,s={})=>{let{action:l,method:c,encType:d,formData:p,body:h}=VC(n,a);if(s.navigate===!1){let m=s.fetcherKey||v_();await t.fetch(m,e,s.action||l,{preventScrollReset:s.preventScrollReset,formData:p,body:h,formMethod:s.method||c,formEncType:s.encType||d,flushSync:s.flushSync})}else await t.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:p,body:h,formMethod:s.method||c,formEncType:s.encType||d,replace:s.replace,state:s.state,fromRouteId:e,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,a,e])}function w_(t,{relative:a}={}){let{basename:e}=v.useContext(Nr),n=v.useContext(ns);pn(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),l={...uu(t||".",{relative:a})},c=Fs();if(t==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(m=>m==="")){d.delete("index"),p.filter(b=>b).forEach(b=>d.append("index",b));let m=d.toString();l.search=m?`?${m}`:""}}return(!t||t===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(l.pathname=l.pathname==="/"?e:Ms([e,l.pathname])),eu(l)}function E_(t,a={}){let e=v.useContext(Px);pn(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Gx("useViewTransitionState"),s=uu(t,{relative:a.relative});if(!e.isTransitioning)return!1;let l=Os(e.currentLocation.pathname,n)||e.currentLocation.pathname,c=Os(e.nextLocation.pathname,n)||e.nextLocation.pathname;return ff(s.pathname,c)!=null||ff(s.pathname,l)!=null}[...r_];var $x=Mx();const du=o0($x);function mp({gameType:t,size:a=22}){const e={"8 Ball":{emoji:"🎱"},"9 Ball":{color:"#FFD700",number:9},"10 Ball":{color:"#2196F3",number:10}};if(t==="8 Ball")return i.createElement("span",{role:"img","aria-label":"8-ball",style:{fontSize:a,verticalAlign:"middle",marginRight:4}},e["8 Ball"].emoji);const{color:n,number:s}=e[t]||{};return!n||!s?null:i.createElement("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:a,height:a,borderRadius:"50%",background:n,color:"#222",fontWeight:"bold",fontSize:a*.65,border:"2px solid #fff",boxShadow:"0 1px 2px #0003",marginRight:4,verticalAlign:"middle"},"aria-label":`${s}-ball`},s)}function Rn({open:t,onClose:a,children:e,title:n="Modal",maxWidth:s="500px",className:l=""}){const[c,d]=v.useState({x:0,y:0}),[p,h]=v.useState(!1),m=v.useRef({x:0,y:0});v.useEffect(()=>{t&&d({x:0,y:0})},[t]);const b=w=>{h(!0),m.current={x:w.clientX-c.x,y:w.clientY-c.y},document.body.style.userSelect="none"},x=w=>{p&&d({x:w.clientX-m.current.x,y:w.clientY-m.current.y})},E=()=>{h(!1),document.body.style.userSelect=""};return v.useEffect(()=>(p?(window.addEventListener("mousemove",x),window.addEventListener("mouseup",E)):(window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",E)),()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",E)}),[p]),t?i.createElement("div",{className:"modal-overlay",onClick:a,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)"}},i.createElement("div",{className:`draggable-modal ${l}`,style:{transform:`translate(${c.x}px, ${c.y}px)`,cursor:p?"grabbing":"default",background:"linear-gradient(120deg, #232323 80%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:window.innerWidth<=400?"0":"1.2rem",boxShadow:"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",width:window.innerWidth<=400?"100vw":s,maxWidth:window.innerWidth<=400?"100vw":s,minWidth:0,margin:window.innerWidth<=400?"0":"0 auto",left:0,right:0,animation:"modalBounceIn 0.5s cubic-bezier(.21,1.02,.73,1.01)",padding:0,position:"relative",fontFamily:"inherit",boxSizing:"border-box",height:window.innerWidth<=500?"95vh":"auto",maxHeight:window.innerWidth<=500?"95vh":"85vh",display:"flex",flexDirection:"column"},onClick:w=>w.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":n,tabIndex:-1},i.createElement("div",{className:"modal-header",onMouseDown:b,style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#e53e3e",padding:"1.1rem 1.5rem 0.7rem 1.5rem",borderTopLeftRadius:"1.2rem",borderTopRightRadius:"1.2rem",position:"relative",cursor:"grab",userSelect:"none",gap:"1rem"}},i.createElement("span",{className:"modal-accent-bar",style:{position:"absolute",left:0,top:0,width:"100%",height:"5px",background:"linear-gradient(90deg, #fff0 0%, #e53e3e 60%, #fff0 100%)",borderTopLeftRadius:"1.2rem",borderTopRightRadius:"1.2rem",pointerEvents:"none"}}),i.createElement("h2",{className:"modal-title",style:{margin:0,fontSize:window.innerWidth<=500?"1.1rem":"1.3rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.02em",color:"#fff",textShadow:"0 1px 12px #000a",zIndex:2,flex:1,wordBreak:"break-word",minWidth:0}},n),i.createElement("button",{className:"modal-close-btn",onClick:a,"aria-label":"Close",style:{background:"none",border:"none",color:"#fff",fontSize:"2em",fontWeight:"bold",cursor:"pointer",zIndex:10,lineHeight:1,transition:"color 0.2s, transform 0.2s",padding:0,marginLeft:"1rem"},onMouseEnter:w=>{w.target.style.color="#ffd6d6",w.target.style.transform="scale(1.2) rotate(10deg)"},onMouseLeave:w=>{w.target.style.color="#fff",w.target.style.transform="scale(1) rotate(0deg)"}},"×")),i.createElement("div",{className:"modal-content",style:{...window.innerWidth<=500?{flex:"1 1 auto",minHeight:0,overflowY:"auto"}:{overflowY:"auto"},padding:window.innerWidth<=500?"1rem 1rem 0.8rem 1rem":"1.4rem 1.5rem 1.2rem 1.5rem",background:"none"}},e)),i.createElement("style",{jsx:!0},`
        @keyframes modalBounceIn {
          0% { opacity: 0; transform: scale(0.95) translateY(-40px);}
          70% { opacity: 1; transform: scale(1.02) translateY(8px);}
          100% { opacity: 1; transform: scale(1) translateY(0);}
        }
        
        @media (max-width: 500px) {
          .draggable-modal {
            max-width: 99vw !important;
            border-radius: 0.7rem !important;
          }
          .modal-header {
            padding: 0.7rem 0.7rem 0.5rem 0.7rem !important;
          }
          .modal-content {
            padding: 1rem 0.6rem 0.8rem 0.6rem !important;
          }
        }
        /* Custom scrollbar for modal-content */
        .modal-content::-webkit-scrollbar {
          width: 10px;
        }
        .modal-content::-webkit-scrollbar-thumb {
          background: #e53e3e;
          border-radius: 6px;
        }
        .modal-content::-webkit-scrollbar-track {
          background: #232323;
          border-radius: 6px;
        }
        .modal-content {
          scrollbar-width: thin;
          scrollbar-color: #e53e3e #232323;
        }
      `)):null}function S_(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[l,c,d]=t.split("-"),p=new Date(parseInt(l),parseInt(c)-1,parseInt(d)),h=String(p.getMonth()+1).padStart(2,"0"),m=String(p.getDate()).padStart(2,"0"),b=p.getFullYear();return`${h}-${m}-${b}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const l=t.split("/");if(l.length===3){const[c,d,p]=l;a=new Date(p,c-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}function Zx({open:t,message:a,gameType:e,raceLength:n,day:s,date:l,time:c,location:d,proposalNote:p,confirmationNote:h,phase:m,onClose:b}){if(!t)return null;const x=typeof window<"u"&&window.innerWidth<=500,E=x?"100%":"240px",w=x?"90vw":"240px",S=x?"100%":"220px";return i.createElement(Rn,{open:t,onClose:b,title:"Proposal Sent!",maxWidth:w,width:E},i.createElement("div",{style:{textAlign:"center"}},i.createElement("div",{style:{background:"#222",color:"#fff",borderRadius:6,padding:"0.6rem 0.7rem 0.6rem 0.7rem",margin:"0 auto 0.7rem auto",fontWeight:600,fontSize:"0.97rem",textAlign:"center",maxWidth:"220px",width:"100%",wordBreak:"break-word",whiteSpace:"pre-line"}},a),i.createElement("div",{style:{background:"#f8f8f8",color:"#222",borderRadius:8,padding:x?"0.4rem 0.2rem":"0.5rem 0.5rem",margin:"0.7rem auto 0.7rem auto",textAlign:"center",fontSize:x?"0.92rem":"0.95rem",border:"1px solid #ff0000",maxWidth:S,width:"100%"}},i.createElement("div",{style:{marginBottom:6}},i.createElement("strong",null,"Phase:")," ",m==="scheduled"?"Phase 1 (Scheduled)":m==="challenge"?"Phase 2 (challenge)":m),i.createElement("div",{style:{marginBottom:6}},i.createElement("strong",null,"Game Type:")," ",i.createElement(mp,{gameType:e,size:16})," ",e),i.createElement("div",{style:{marginBottom:6}},i.createElement("strong",null,"Race to:")," ",n),i.createElement("div",{style:{marginBottom:6}},i.createElement("strong",null,"Day:")," ",s),i.createElement("div",{style:{marginBottom:6}},i.createElement("strong",null,"Date:")," ",S_(l)),i.createElement("div",{style:{marginBottom:6}},i.createElement("strong",null,"Time:")," ",c),i.createElement("div",{style:{marginBottom:6}},i.createElement("strong",null,"Location:")," ",d),p&&i.createElement("div",{style:{marginTop:12,padding:"0.5rem 0.7rem",background:"#fffbe6",borderLeft:"3px solid #ffb300",borderRadius:4,color:"#a36c00",fontSize:"0.97rem"}},i.createElement("strong",null,"Opponent's note:")," ",p),h&&i.createElement("div",{style:{marginTop:10,padding:"0.5rem 0.7rem",background:"#e6fff0",borderLeft:"3px solid #00b36b",borderRadius:4,color:"#006b3c",fontSize:"0.97rem"}},i.createElement("strong",null,"Your note:")," ",h)),i.createElement("button",{style:{marginTop:"1.8rem",background:"#ff0000",color:"#fff",border:"none",borderRadius:"8px",padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer"},onClick:b},"Close")))}function qx(t){var a,e,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(a=0;a<s;a++)t[a]&&(e=qx(t[a]))&&(n&&(n+=" "),n+=e)}else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function ca(){for(var t,a,e=0,n="",s=arguments.length;e<s;e++)(t=arguments[e])&&(a=qx(t))&&(n&&(n+=" "),n+=a);return n}const Qx=6048e5,C_=864e5,hp=6e4,fu=36e5,__=1e3,Mv=Symbol.for("constructDateFrom");function Ht(t,a){return typeof t=="function"?t(a):t&&typeof t=="object"&&Mv in t?t[Mv](a):t instanceof Date?new t.constructor(a):new Date(a)}function je(t,a){return Ht(a||t,t)}function Mr(t,a,e){const n=je(t,e==null?void 0:e.in);return isNaN(a)?Ht((e==null?void 0:e.in)||t,NaN):(a&&n.setDate(n.getDate()+a),n)}function Tr(t,a,e){const n=je(t,e==null?void 0:e.in);if(isNaN(a))return Ht(t,NaN);if(!a)return n;const s=n.getDate(),l=Ht(t,n.getTime());l.setMonth(n.getMonth()+a+1,0);const c=l.getDate();return s>=c?l:(n.setFullYear(l.getFullYear(),l.getMonth(),s),n)}function Vx(t,a,e){return Ht(t,+je(t)+a)}function I_(t,a,e){return Vx(t,a*fu)}let D_={};function wo(){return D_}function zs(t,a){var d,p,h,m;const e=wo(),n=(a==null?void 0:a.weekStartsOn)??((p=(d=a==null?void 0:a.locale)==null?void 0:d.options)==null?void 0:p.weekStartsOn)??e.weekStartsOn??((m=(h=e.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??0,s=je(t,a==null?void 0:a.in),l=s.getDay(),c=(l<n?7:0)+l-n;return s.setDate(s.getDate()-c),s.setHours(0,0,0,0),s}function ul(t,a){return zs(t,{...a,weekStartsOn:1})}function Xx(t,a){const e=je(t,a==null?void 0:a.in),n=e.getFullYear(),s=Ht(e,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const l=ul(s),c=Ht(e,0);c.setFullYear(n,0,4),c.setHours(0,0,0,0);const d=ul(c);return e.getTime()>=l.getTime()?n+1:e.getTime()>=d.getTime()?n:n-1}function pf(t){const a=je(t),e=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return e.setUTCFullYear(a.getFullYear()),+t-+e}function as(t,...a){const e=Ht.bind(null,a.find(n=>typeof n=="object"));return a.map(e)}function ho(t,a){const e=je(t,a==null?void 0:a.in);return e.setHours(0,0,0,0),e}function dl(t,a,e){const[n,s]=as(e==null?void 0:e.in,t,a),l=ho(n),c=ho(s),d=+l-pf(l),p=+c-pf(c);return Math.round((d-p)/C_)}function k_(t,a){const e=Xx(t,a),n=Ht(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),ul(n)}function Dg(t,a,e){const n=je(t,e==null?void 0:e.in);return n.setTime(n.getTime()+a*hp),n}function g0(t,a,e){return Tr(t,a*3,e)}function A_(t,a,e){return Vx(t,a*1e3)}function mf(t,a,e){return Mr(t,a*7,e)}function Ts(t,a,e){return Tr(t,a*12,e)}function Tv(t,a){let e,n=a==null?void 0:a.in;return t.forEach(s=>{!n&&typeof s=="object"&&(n=Ht.bind(null,s));const l=je(s,n);(!e||e<l||isNaN(+l))&&(e=l)}),Ht(n,e||NaN)}function Nv(t,a){let e,n=a==null?void 0:a.in;return t.forEach(s=>{!n&&typeof s=="object"&&(n=Ht.bind(null,s));const l=je(s,n);(!e||e>l||isNaN(+l))&&(e=l)}),Ht(n,e||NaN)}function M_(t,a,e){const[n,s]=as(e==null?void 0:e.in,t,a);return+ho(n)==+ho(s)}function Ns(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function hf(t){return!(!Ns(t)&&typeof t!="number"||isNaN(+je(t)))}function gf(t,a,e){const[n,s]=as(e==null?void 0:e.in,t,a),l=n.getFullYear()-s.getFullYear(),c=n.getMonth()-s.getMonth();return l*12+c}function uo(t,a){const e=je(t,a==null?void 0:a.in);return Math.trunc(e.getMonth()/3)+1}function yf(t,a,e){const[n,s]=as(e==null?void 0:e.in,t,a),l=n.getFullYear()-s.getFullYear(),c=uo(n)-uo(s);return l*4+c}function bf(t,a,e){const[n,s]=as(e==null?void 0:e.in,t,a);return n.getFullYear()-s.getFullYear()}function Kx(t,a,e){const[n,s]=as(e==null?void 0:e.in,t,a),l=Rv(n,s),c=Math.abs(dl(n,s));n.setDate(n.getDate()-l*c);const d=+(Rv(n,s)===-l),p=l*(c-d);return p===0?0:p}function Rv(t,a){const e=t.getFullYear()-a.getFullYear()||t.getMonth()-a.getMonth()||t.getDate()-a.getDate()||t.getHours()-a.getHours()||t.getMinutes()-a.getMinutes()||t.getSeconds()-a.getSeconds()||t.getMilliseconds()-a.getMilliseconds();return e<0?-1:e>0?1:e}function T_(t){return a=>{const e=Math.trunc,n=e(a);return n===0?0:n}}function N_(t,a,e){const[n,s]=as(e==null?void 0:e.in,t,a),l=(+n-+s)/fu;return T_()(l)}function Jx(t,a){const e=je(t,a==null?void 0:a.in);return e.setHours(23,59,59,999),e}function ew(t,a){const e=je(t,a==null?void 0:a.in),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function kg(t,a){const e=je(t,a==null?void 0:a.in),n=e.getMonth(),s=n-n%3;return e.setMonth(s,1),e.setHours(0,0,0,0),e}function tw(t,a){const e=je(t,a==null?void 0:a.in);return e.setDate(1),e.setHours(0,0,0,0),e}function nw(t,a){const e=je(t,a==null?void 0:a.in),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function gp(t,a){const e=je(t,a==null?void 0:a.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}function R_(t,a){var d,p;const e=wo(),n=e.weekStartsOn??((p=(d=e.locale)==null?void 0:d.options)==null?void 0:p.weekStartsOn)??0,s=je(t,a==null?void 0:a.in),l=s.getDay(),c=(l<n?-7:0)+6-(l-n);return s.setDate(s.getDate()+c),s.setHours(23,59,59,999),s}const L_={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},P_=(t,a,e)=>{let n;const s=L_[t];return typeof s=="string"?n=s:a===1?n=s.one:n=s.other.replace("{{count}}",a.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+n:n+" ago":n};function Fh(t){return(a={})=>{const e=a.width?String(a.width):t.defaultWidth;return t.formats[e]||t.formats[t.defaultWidth]}}const B_={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},O_={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},z_={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},U_={date:Fh({formats:B_,defaultWidth:"full"}),time:Fh({formats:O_,defaultWidth:"full"}),dateTime:Fh({formats:z_,defaultWidth:"full"})},F_={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},W_=(t,a,e,n)=>F_[t];function Cc(t){return(a,e)=>{const n=e!=null&&e.context?String(e.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const c=t.defaultFormattingWidth||t.defaultWidth,d=e!=null&&e.width?String(e.width):c;s=t.formattingValues[d]||t.formattingValues[c]}else{const c=t.defaultWidth,d=e!=null&&e.width?String(e.width):t.defaultWidth;s=t.values[d]||t.values[c]}const l=t.argumentCallback?t.argumentCallback(a):a;return s[l]}}const j_={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},H_={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Y_={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},G_={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$_={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Z_={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},q_=(t,a)=>{const e=Number(t),n=e%100;if(n>20||n<10)switch(n%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},Q_={ordinalNumber:q_,era:Cc({values:j_,defaultWidth:"wide"}),quarter:Cc({values:H_,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Cc({values:Y_,defaultWidth:"wide"}),day:Cc({values:G_,defaultWidth:"wide"}),dayPeriod:Cc({values:$_,defaultWidth:"wide",formattingValues:Z_,defaultFormattingWidth:"wide"})};function _c(t){return(a,e={})=>{const n=e.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],l=a.match(s);if(!l)return null;const c=l[0],d=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],p=Array.isArray(d)?X_(d,b=>b.test(c)):V_(d,b=>b.test(c));let h;h=t.valueCallback?t.valueCallback(p):p,h=e.valueCallback?e.valueCallback(h):h;const m=a.slice(c.length);return{value:h,rest:m}}}function V_(t,a){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&a(t[e]))return e}function X_(t,a){for(let e=0;e<t.length;e++)if(a(t[e]))return e}function K_(t){return(a,e={})=>{const n=a.match(t.matchPattern);if(!n)return null;const s=n[0],l=a.match(t.parsePattern);if(!l)return null;let c=t.valueCallback?t.valueCallback(l[0]):l[0];c=e.valueCallback?e.valueCallback(c):c;const d=a.slice(s.length);return{value:c,rest:d}}}const J_=/^(\d+)(th|st|nd|rd)?/i,e3=/\d+/i,t3={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},n3={any:[/^b/i,/^(a|c)/i]},a3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},r3={any:[/1/i,/2/i,/3/i,/4/i]},s3={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},i3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},o3={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},l3={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},c3={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},u3={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},d3={ordinalNumber:K_({matchPattern:J_,parsePattern:e3,valueCallback:t=>parseInt(t,10)}),era:_c({matchPatterns:t3,defaultMatchWidth:"wide",parsePatterns:n3,defaultParseWidth:"any"}),quarter:_c({matchPatterns:a3,defaultMatchWidth:"wide",parsePatterns:r3,defaultParseWidth:"any",valueCallback:t=>t+1}),month:_c({matchPatterns:s3,defaultMatchWidth:"wide",parsePatterns:i3,defaultParseWidth:"any"}),day:_c({matchPatterns:o3,defaultMatchWidth:"wide",parsePatterns:l3,defaultParseWidth:"any"}),dayPeriod:_c({matchPatterns:c3,defaultMatchWidth:"any",parsePatterns:u3,defaultParseWidth:"any"})},aw={code:"en-US",formatDistance:P_,formatLong:U_,formatRelative:W_,localize:Q_,match:d3,options:{weekStartsOn:0,firstWeekContainsDate:1}};function f3(t,a){const e=je(t,a==null?void 0:a.in);return dl(e,gp(e))+1}function y0(t,a){const e=je(t,a==null?void 0:a.in),n=+ul(e)-+k_(e);return Math.round(n/Qx)+1}function b0(t,a){var m,b,x,E;const e=je(t,a==null?void 0:a.in),n=e.getFullYear(),s=wo(),l=(a==null?void 0:a.firstWeekContainsDate)??((b=(m=a==null?void 0:a.locale)==null?void 0:m.options)==null?void 0:b.firstWeekContainsDate)??s.firstWeekContainsDate??((E=(x=s.locale)==null?void 0:x.options)==null?void 0:E.firstWeekContainsDate)??1,c=Ht((a==null?void 0:a.in)||t,0);c.setFullYear(n+1,0,l),c.setHours(0,0,0,0);const d=zs(c,a),p=Ht((a==null?void 0:a.in)||t,0);p.setFullYear(n,0,l),p.setHours(0,0,0,0);const h=zs(p,a);return+e>=+d?n+1:+e>=+h?n:n-1}function p3(t,a){var d,p,h,m;const e=wo(),n=(a==null?void 0:a.firstWeekContainsDate)??((p=(d=a==null?void 0:a.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??e.firstWeekContainsDate??((m=(h=e.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,s=b0(t,a),l=Ht((a==null?void 0:a.in)||t,0);return l.setFullYear(s,0,n),l.setHours(0,0,0,0),zs(l,a)}function rw(t,a){const e=je(t,a==null?void 0:a.in),n=+zs(e,a)-+p3(e,a);return Math.round(n/Qx)+1}function Wt(t,a){const e=t<0?"-":"",n=Math.abs(t).toString().padStart(a,"0");return e+n}const hi={y(t,a){const e=t.getFullYear(),n=e>0?e:1-e;return Wt(a==="yy"?n%100:n,a.length)},M(t,a){const e=t.getMonth();return a==="M"?String(e+1):Wt(e+1,2)},d(t,a){return Wt(t.getDate(),a.length)},a(t,a){const e=t.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(t,a){return Wt(t.getHours()%12||12,a.length)},H(t,a){return Wt(t.getHours(),a.length)},m(t,a){return Wt(t.getMinutes(),a.length)},s(t,a){return Wt(t.getSeconds(),a.length)},S(t,a){const e=a.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,e-3));return Wt(s,a.length)}},Jo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Lv={G:function(t,a,e){const n=t.getFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return e.era(n,{width:"abbreviated"});case"GGGGG":return e.era(n,{width:"narrow"});case"GGGG":default:return e.era(n,{width:"wide"})}},y:function(t,a,e){if(a==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return e.ordinalNumber(s,{unit:"year"})}return hi.y(t,a)},Y:function(t,a,e,n){const s=b0(t,n),l=s>0?s:1-s;if(a==="YY"){const c=l%100;return Wt(c,2)}return a==="Yo"?e.ordinalNumber(l,{unit:"year"}):Wt(l,a.length)},R:function(t,a){const e=Xx(t);return Wt(e,a.length)},u:function(t,a){const e=t.getFullYear();return Wt(e,a.length)},Q:function(t,a,e){const n=Math.ceil((t.getMonth()+1)/3);switch(a){case"Q":return String(n);case"QQ":return Wt(n,2);case"Qo":return e.ordinalNumber(n,{unit:"quarter"});case"QQQ":return e.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,a,e){const n=Math.ceil((t.getMonth()+1)/3);switch(a){case"q":return String(n);case"qq":return Wt(n,2);case"qo":return e.ordinalNumber(n,{unit:"quarter"});case"qqq":return e.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,a,e){const n=t.getMonth();switch(a){case"M":case"MM":return hi.M(t,a);case"Mo":return e.ordinalNumber(n+1,{unit:"month"});case"MMM":return e.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(n,{width:"wide",context:"formatting"})}},L:function(t,a,e){const n=t.getMonth();switch(a){case"L":return String(n+1);case"LL":return Wt(n+1,2);case"Lo":return e.ordinalNumber(n+1,{unit:"month"});case"LLL":return e.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(n,{width:"wide",context:"standalone"})}},w:function(t,a,e,n){const s=rw(t,n);return a==="wo"?e.ordinalNumber(s,{unit:"week"}):Wt(s,a.length)},I:function(t,a,e){const n=y0(t);return a==="Io"?e.ordinalNumber(n,{unit:"week"}):Wt(n,a.length)},d:function(t,a,e){return a==="do"?e.ordinalNumber(t.getDate(),{unit:"date"}):hi.d(t,a)},D:function(t,a,e){const n=f3(t);return a==="Do"?e.ordinalNumber(n,{unit:"dayOfYear"}):Wt(n,a.length)},E:function(t,a,e){const n=t.getDay();switch(a){case"E":case"EE":case"EEE":return e.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(n,{width:"short",context:"formatting"});case"EEEE":default:return e.day(n,{width:"wide",context:"formatting"})}},e:function(t,a,e,n){const s=t.getDay(),l=(s-n.weekStartsOn+8)%7||7;switch(a){case"e":return String(l);case"ee":return Wt(l,2);case"eo":return e.ordinalNumber(l,{unit:"day"});case"eee":return e.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(s,{width:"short",context:"formatting"});case"eeee":default:return e.day(s,{width:"wide",context:"formatting"})}},c:function(t,a,e,n){const s=t.getDay(),l=(s-n.weekStartsOn+8)%7||7;switch(a){case"c":return String(l);case"cc":return Wt(l,a.length);case"co":return e.ordinalNumber(l,{unit:"day"});case"ccc":return e.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(s,{width:"narrow",context:"standalone"});case"cccccc":return e.day(s,{width:"short",context:"standalone"});case"cccc":default:return e.day(s,{width:"wide",context:"standalone"})}},i:function(t,a,e){const n=t.getDay(),s=n===0?7:n;switch(a){case"i":return String(s);case"ii":return Wt(s,a.length);case"io":return e.ordinalNumber(s,{unit:"day"});case"iii":return e.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(n,{width:"short",context:"formatting"});case"iiii":default:return e.day(n,{width:"wide",context:"formatting"})}},a:function(t,a,e){const s=t.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,a,e){const n=t.getHours();let s;switch(n===12?s=Jo.noon:n===0?s=Jo.midnight:s=n/12>=1?"pm":"am",a){case"b":case"bb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,a,e){const n=t.getHours();let s;switch(n>=17?s=Jo.evening:n>=12?s=Jo.afternoon:n>=4?s=Jo.morning:s=Jo.night,a){case"B":case"BB":case"BBB":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,a,e){if(a==="ho"){let n=t.getHours()%12;return n===0&&(n=12),e.ordinalNumber(n,{unit:"hour"})}return hi.h(t,a)},H:function(t,a,e){return a==="Ho"?e.ordinalNumber(t.getHours(),{unit:"hour"}):hi.H(t,a)},K:function(t,a,e){const n=t.getHours()%12;return a==="Ko"?e.ordinalNumber(n,{unit:"hour"}):Wt(n,a.length)},k:function(t,a,e){let n=t.getHours();return n===0&&(n=24),a==="ko"?e.ordinalNumber(n,{unit:"hour"}):Wt(n,a.length)},m:function(t,a,e){return a==="mo"?e.ordinalNumber(t.getMinutes(),{unit:"minute"}):hi.m(t,a)},s:function(t,a,e){return a==="so"?e.ordinalNumber(t.getSeconds(),{unit:"second"}):hi.s(t,a)},S:function(t,a){return hi.S(t,a)},X:function(t,a,e){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(a){case"X":return Bv(n);case"XXXX":case"XX":return no(n);case"XXXXX":case"XXX":default:return no(n,":")}},x:function(t,a,e){const n=t.getTimezoneOffset();switch(a){case"x":return Bv(n);case"xxxx":case"xx":return no(n);case"xxxxx":case"xxx":default:return no(n,":")}},O:function(t,a,e){const n=t.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+Pv(n,":");case"OOOO":default:return"GMT"+no(n,":")}},z:function(t,a,e){const n=t.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+Pv(n,":");case"zzzz":default:return"GMT"+no(n,":")}},t:function(t,a,e){const n=Math.trunc(+t/1e3);return Wt(n,a.length)},T:function(t,a,e){return Wt(+t,a.length)}};function Pv(t,a=""){const e=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),l=n%60;return l===0?e+String(s):e+String(s)+a+Wt(l,2)}function Bv(t,a){return t%60===0?(t>0?"-":"+")+Wt(Math.abs(t)/60,2):no(t,a)}function no(t,a=""){const e=t>0?"-":"+",n=Math.abs(t),s=Wt(Math.trunc(n/60),2),l=Wt(n%60,2);return e+s+a+l}const Ov=(t,a)=>{switch(t){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});case"PPPP":default:return a.date({width:"full"})}},sw=(t,a)=>{switch(t){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});case"pppp":default:return a.time({width:"full"})}},m3=(t,a)=>{const e=t.match(/(P+)(p+)?/)||[],n=e[1],s=e[2];if(!s)return Ov(t,a);let l;switch(n){case"P":l=a.dateTime({width:"short"});break;case"PP":l=a.dateTime({width:"medium"});break;case"PPP":l=a.dateTime({width:"long"});break;case"PPPP":default:l=a.dateTime({width:"full"});break}return l.replace("{{date}}",Ov(n,a)).replace("{{time}}",sw(s,a))},Ag={p:sw,P:m3},h3=/^D+$/,g3=/^Y+$/,y3=["D","DD","YY","YYYY"];function b3(t){return h3.test(t)}function v3(t){return g3.test(t)}function x3(t,a,e){const n=w3(t,a,e);if(console.warn(n),y3.includes(t))throw new RangeError(n)}function w3(t,a,e){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${a}\`) for formatting ${n} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const E3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,S3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,C3=/^'([^]*?)'?$/,_3=/''/g,I3=/[a-zA-Z]/;function Na(t,a,e){var m,b,x,E,w,S,_,C;const n=wo(),s=(e==null?void 0:e.locale)??n.locale??aw,l=(e==null?void 0:e.firstWeekContainsDate)??((b=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:b.firstWeekContainsDate)??n.firstWeekContainsDate??((E=(x=n.locale)==null?void 0:x.options)==null?void 0:E.firstWeekContainsDate)??1,c=(e==null?void 0:e.weekStartsOn)??((S=(w=e==null?void 0:e.locale)==null?void 0:w.options)==null?void 0:S.weekStartsOn)??n.weekStartsOn??((C=(_=n.locale)==null?void 0:_.options)==null?void 0:C.weekStartsOn)??0,d=je(t,e==null?void 0:e.in);if(!hf(d))throw new RangeError("Invalid time value");let p=a.match(S3).map(D=>{const I=D[0];if(I==="p"||I==="P"){const A=Ag[I];return A(D,s.formatLong)}return D}).join("").match(E3).map(D=>{if(D==="''")return{isToken:!1,value:"'"};const I=D[0];if(I==="'")return{isToken:!1,value:D3(D)};if(Lv[I])return{isToken:!0,value:D};if(I.match(I3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");return{isToken:!1,value:D}});s.localize.preprocessor&&(p=s.localize.preprocessor(d,p));const h={firstWeekContainsDate:l,weekStartsOn:c,locale:s};return p.map(D=>{if(!D.isToken)return D.value;const I=D.value;(!(e!=null&&e.useAdditionalWeekYearTokens)&&v3(I)||!(e!=null&&e.useAdditionalDayOfYearTokens)&&b3(I))&&x3(I,a,String(t));const A=Lv[I[0]];return A(d,I,s.localize,h)}).join("")}function D3(t){const a=t.match(C3);return a?a[1].replace(_3,"'"):t}function zv(t,a){return je(t,a==null?void 0:a.in).getDate()}function k3(t,a){return je(t,a==null?void 0:a.in).getDay()}function A3(t,a){const e=je(t,a==null?void 0:a.in),n=e.getFullYear(),s=e.getMonth(),l=Ht(e,0);return l.setFullYear(n,s+1,0),l.setHours(0,0,0,0),l.getDate()}function M3(){return Object.assign({},wo())}function Rs(t,a){return je(t,a==null?void 0:a.in).getHours()}function T3(t,a){const e=je(t,a==null?void 0:a.in).getDay();return e===0?7:e}function Ls(t,a){return je(t,a==null?void 0:a.in).getMinutes()}function ga(t,a){return je(t,a==null?void 0:a.in).getMonth()}function Di(t){return je(t).getSeconds()}function Mg(t){return+je(t)}function vt(t,a){return je(t,a==null?void 0:a.in).getFullYear()}function Us(t,a){return+je(t)>+je(a)}function go(t,a){return+je(t)<+je(a)}function N3(t,a){return+je(t)==+je(a)}function R3(t,a){const e=L3(a)?new a(0):Ht(a,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e}function L3(t){var a;return typeof t=="function"&&((a=t.prototype)==null?void 0:a.constructor)===t}const P3=10;class iw{constructor(){Be(this,"subPriority",0)}validate(a,e){return!0}}class B3 extends iw{constructor(a,e,n,s,l){super(),this.value=a,this.validateValue=e,this.setValue=n,this.priority=s,l&&(this.subPriority=l)}validate(a,e){return this.validateValue(a,this.value,e)}set(a,e,n){return this.setValue(a,e,this.value,n)}}class O3 extends iw{constructor(e,n){super();Be(this,"priority",P3);Be(this,"subPriority",-1);this.context=e||(s=>Ht(n,s))}set(e,n){return n.timestampIsSet?e:Ht(e,R3(e,this.context))}}class Lt{run(a,e,n,s){const l=this.parse(a,e,n,s);return l?{setter:new B3(l.value,this.validate,this.set,this.priority,this.subPriority),rest:l.rest}:null}validate(a,e,n){return!0}}class z3 extends Lt{constructor(){super(...arguments);Be(this,"priority",140);Be(this,"incompatibleTokens",["R","u","t","T"])}parse(e,n,s){switch(n){case"G":case"GG":case"GGG":return s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"});case"GGGGG":return s.era(e,{width:"narrow"});case"GGGG":default:return s.era(e,{width:"wide"})||s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"})}}set(e,n,s){return n.era=s,e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}}const Ln={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Qr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Pn(t,a){return t&&{value:a(t.value),rest:t.rest}}function xn(t,a){const e=a.match(t);return e?{value:parseInt(e[0],10),rest:a.slice(e[0].length)}:null}function Vr(t,a){const e=a.match(t);if(!e)return null;if(e[0]==="Z")return{value:0,rest:a.slice(1)};const n=e[1]==="+"?1:-1,s=e[2]?parseInt(e[2],10):0,l=e[3]?parseInt(e[3],10):0,c=e[5]?parseInt(e[5],10):0;return{value:n*(s*fu+l*hp+c*__),rest:a.slice(e[0].length)}}function ow(t){return xn(Ln.anyDigitsSigned,t)}function kn(t,a){switch(t){case 1:return xn(Ln.singleDigit,a);case 2:return xn(Ln.twoDigits,a);case 3:return xn(Ln.threeDigits,a);case 4:return xn(Ln.fourDigits,a);default:return xn(new RegExp("^\\d{1,"+t+"}"),a)}}function vf(t,a){switch(t){case 1:return xn(Ln.singleDigitSigned,a);case 2:return xn(Ln.twoDigitsSigned,a);case 3:return xn(Ln.threeDigitsSigned,a);case 4:return xn(Ln.fourDigitsSigned,a);default:return xn(new RegExp("^-?\\d{1,"+t+"}"),a)}}function v0(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function lw(t,a){const e=a>0,n=e?a:1-a;let s;if(n<=50)s=t||100;else{const l=n+50,c=Math.trunc(l/100)*100,d=t>=l%100;s=t+c-(d?100:0)}return e?s:1-s}function cw(t){return t%400===0||t%4===0&&t%100!==0}class U3 extends Lt{constructor(){super(...arguments);Be(this,"priority",130);Be(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,n,s){const l=c=>({year:c,isTwoDigitYear:n==="yy"});switch(n){case"y":return Pn(kn(4,e),l);case"yo":return Pn(s.ordinalNumber(e,{unit:"year"}),l);default:return Pn(kn(n.length,e),l)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,s){const l=e.getFullYear();if(s.isTwoDigitYear){const d=lw(s.year,l);return e.setFullYear(d,0,1),e.setHours(0,0,0,0),e}const c=!("era"in n)||n.era===1?s.year:1-s.year;return e.setFullYear(c,0,1),e.setHours(0,0,0,0),e}}class F3 extends Lt{constructor(){super(...arguments);Be(this,"priority",130);Be(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,n,s){const l=c=>({year:c,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Pn(kn(4,e),l);case"Yo":return Pn(s.ordinalNumber(e,{unit:"year"}),l);default:return Pn(kn(n.length,e),l)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,s,l){const c=b0(e,l);if(s.isTwoDigitYear){const p=lw(s.year,c);return e.setFullYear(p,0,l.firstWeekContainsDate),e.setHours(0,0,0,0),zs(e,l)}const d=!("era"in n)||n.era===1?s.year:1-s.year;return e.setFullYear(d,0,l.firstWeekContainsDate),e.setHours(0,0,0,0),zs(e,l)}}class W3 extends Lt{constructor(){super(...arguments);Be(this,"priority",130);Be(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,n){return vf(n==="R"?4:n.length,e)}set(e,n,s){const l=Ht(e,0);return l.setFullYear(s,0,4),l.setHours(0,0,0,0),ul(l)}}class j3 extends Lt{constructor(){super(...arguments);Be(this,"priority",130);Be(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,n){return vf(n==="u"?4:n.length,e)}set(e,n,s){return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}}class H3 extends Lt{constructor(){super(...arguments);Be(this,"priority",120);Be(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,n,s){switch(n){case"Q":case"QQ":return kn(n.length,e);case"Qo":return s.ordinalNumber(e,{unit:"quarter"});case"QQQ":return s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(e,{width:"wide",context:"formatting"})||s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}}class Y3 extends Lt{constructor(){super(...arguments);Be(this,"priority",120);Be(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,n,s){switch(n){case"q":case"qq":return kn(n.length,e);case"qo":return s.ordinalNumber(e,{unit:"quarter"});case"qqq":return s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(e,{width:"wide",context:"standalone"})||s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}}class G3 extends Lt{constructor(){super(...arguments);Be(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Be(this,"priority",110)}parse(e,n,s){const l=c=>c-1;switch(n){case"M":return Pn(xn(Ln.month,e),l);case"MM":return Pn(kn(2,e),l);case"Mo":return Pn(s.ordinalNumber(e,{unit:"month"}),l);case"MMM":return s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(e,{width:"wide",context:"formatting"})||s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}}class $3 extends Lt{constructor(){super(...arguments);Be(this,"priority",110);Be(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,n,s){const l=c=>c-1;switch(n){case"L":return Pn(xn(Ln.month,e),l);case"LL":return Pn(kn(2,e),l);case"Lo":return Pn(s.ordinalNumber(e,{unit:"month"}),l);case"LLL":return s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(e,{width:"wide",context:"standalone"})||s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}}function Z3(t,a,e){const n=je(t,e==null?void 0:e.in),s=rw(n,e)-a;return n.setDate(n.getDate()-s*7),je(n,e==null?void 0:e.in)}class q3 extends Lt{constructor(){super(...arguments);Be(this,"priority",100);Be(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,n,s){switch(n){case"w":return xn(Ln.week,e);case"wo":return s.ordinalNumber(e,{unit:"week"});default:return kn(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,s,l){return zs(Z3(e,s,l),l)}}function Q3(t,a,e){const n=je(t,e==null?void 0:e.in),s=y0(n,e)-a;return n.setDate(n.getDate()-s*7),n}class V3 extends Lt{constructor(){super(...arguments);Be(this,"priority",100);Be(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,n,s){switch(n){case"I":return xn(Ln.week,e);case"Io":return s.ordinalNumber(e,{unit:"week"});default:return kn(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,s){return ul(Q3(e,s))}}const X3=[31,28,31,30,31,30,31,31,30,31,30,31],K3=[31,29,31,30,31,30,31,31,30,31,30,31];class J3 extends Lt{constructor(){super(...arguments);Be(this,"priority",90);Be(this,"subPriority",1);Be(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,n,s){switch(n){case"d":return xn(Ln.date,e);case"do":return s.ordinalNumber(e,{unit:"date"});default:return kn(n.length,e)}}validate(e,n){const s=e.getFullYear(),l=cw(s),c=e.getMonth();return l?n>=1&&n<=K3[c]:n>=1&&n<=X3[c]}set(e,n,s){return e.setDate(s),e.setHours(0,0,0,0),e}}class e4 extends Lt{constructor(){super(...arguments);Be(this,"priority",90);Be(this,"subpriority",1);Be(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,n,s){switch(n){case"D":case"DD":return xn(Ln.dayOfYear,e);case"Do":return s.ordinalNumber(e,{unit:"date"});default:return kn(n.length,e)}}validate(e,n){const s=e.getFullYear();return cw(s)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,s){return e.setMonth(0,s),e.setHours(0,0,0,0),e}}function x0(t,a,e){var b,x,E,w;const n=wo(),s=(e==null?void 0:e.weekStartsOn)??((x=(b=e==null?void 0:e.locale)==null?void 0:b.options)==null?void 0:x.weekStartsOn)??n.weekStartsOn??((w=(E=n.locale)==null?void 0:E.options)==null?void 0:w.weekStartsOn)??0,l=je(t,e==null?void 0:e.in),c=l.getDay(),p=(a%7+7)%7,h=7-s,m=a<0||a>6?a-(c+h)%7:(p+h)%7-(c+h)%7;return Mr(l,m,e)}class t4 extends Lt{constructor(){super(...arguments);Be(this,"priority",90);Be(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,n,s){switch(n){case"E":case"EE":case"EEE":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,s,l){return e=x0(e,s,l),e.setHours(0,0,0,0),e}}class n4 extends Lt{constructor(){super(...arguments);Be(this,"priority",90);Be(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,n,s,l){const c=d=>{const p=Math.floor((d-1)/7)*7;return(d+l.weekStartsOn+6)%7+p};switch(n){case"e":case"ee":return Pn(kn(n.length,e),c);case"eo":return Pn(s.ordinalNumber(e,{unit:"day"}),c);case"eee":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeeee":return s.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,s,l){return e=x0(e,s,l),e.setHours(0,0,0,0),e}}class a4 extends Lt{constructor(){super(...arguments);Be(this,"priority",90);Be(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,n,s,l){const c=d=>{const p=Math.floor((d-1)/7)*7;return(d+l.weekStartsOn+6)%7+p};switch(n){case"c":case"cc":return Pn(kn(n.length,e),c);case"co":return Pn(s.ordinalNumber(e,{unit:"day"}),c);case"ccc":return s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"ccccc":return s.day(e,{width:"narrow",context:"standalone"});case"cccccc":return s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(e,{width:"wide",context:"standalone"})||s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,s,l){return e=x0(e,s,l),e.setHours(0,0,0,0),e}}function r4(t,a,e){const n=je(t,e==null?void 0:e.in),s=T3(n,e),l=a-s;return Mr(n,l,e)}class s4 extends Lt{constructor(){super(...arguments);Be(this,"priority",90);Be(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,n,s){const l=c=>c===0?7:c;switch(n){case"i":case"ii":return kn(n.length,e);case"io":return s.ordinalNumber(e,{unit:"day"});case"iii":return Pn(s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),l);case"iiiii":return Pn(s.day(e,{width:"narrow",context:"formatting"}),l);case"iiiiii":return Pn(s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),l);case"iiii":default:return Pn(s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),l)}}validate(e,n){return n>=1&&n<=7}set(e,n,s){return e=r4(e,s),e.setHours(0,0,0,0),e}}class i4 extends Lt{constructor(){super(...arguments);Be(this,"priority",80);Be(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,n,s){switch(n){case"a":case"aa":case"aaa":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,s){return e.setHours(v0(s),0,0,0),e}}class o4 extends Lt{constructor(){super(...arguments);Be(this,"priority",80);Be(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,n,s){switch(n){case"b":case"bb":case"bbb":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,s){return e.setHours(v0(s),0,0,0),e}}class l4 extends Lt{constructor(){super(...arguments);Be(this,"priority",80);Be(this,"incompatibleTokens",["a","b","t","T"])}parse(e,n,s){switch(n){case"B":case"BB":case"BBB":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,s){return e.setHours(v0(s),0,0,0),e}}class c4 extends Lt{constructor(){super(...arguments);Be(this,"priority",70);Be(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,n,s){switch(n){case"h":return xn(Ln.hour12h,e);case"ho":return s.ordinalNumber(e,{unit:"hour"});default:return kn(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,s){const l=e.getHours()>=12;return l&&s<12?e.setHours(s+12,0,0,0):!l&&s===12?e.setHours(0,0,0,0):e.setHours(s,0,0,0),e}}class u4 extends Lt{constructor(){super(...arguments);Be(this,"priority",70);Be(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,n,s){switch(n){case"H":return xn(Ln.hour23h,e);case"Ho":return s.ordinalNumber(e,{unit:"hour"});default:return kn(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,s){return e.setHours(s,0,0,0),e}}class d4 extends Lt{constructor(){super(...arguments);Be(this,"priority",70);Be(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,n,s){switch(n){case"K":return xn(Ln.hour11h,e);case"Ko":return s.ordinalNumber(e,{unit:"hour"});default:return kn(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,s){return e.getHours()>=12&&s<12?e.setHours(s+12,0,0,0):e.setHours(s,0,0,0),e}}class f4 extends Lt{constructor(){super(...arguments);Be(this,"priority",70);Be(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,n,s){switch(n){case"k":return xn(Ln.hour24h,e);case"ko":return s.ordinalNumber(e,{unit:"hour"});default:return kn(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,s){const l=s<=24?s%24:s;return e.setHours(l,0,0,0),e}}class p4 extends Lt{constructor(){super(...arguments);Be(this,"priority",60);Be(this,"incompatibleTokens",["t","T"])}parse(e,n,s){switch(n){case"m":return xn(Ln.minute,e);case"mo":return s.ordinalNumber(e,{unit:"minute"});default:return kn(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,s){return e.setMinutes(s,0,0),e}}class m4 extends Lt{constructor(){super(...arguments);Be(this,"priority",50);Be(this,"incompatibleTokens",["t","T"])}parse(e,n,s){switch(n){case"s":return xn(Ln.second,e);case"so":return s.ordinalNumber(e,{unit:"second"});default:return kn(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,s){return e.setSeconds(s,0),e}}class h4 extends Lt{constructor(){super(...arguments);Be(this,"priority",30);Be(this,"incompatibleTokens",["t","T"])}parse(e,n){const s=l=>Math.trunc(l*Math.pow(10,-n.length+3));return Pn(kn(n.length,e),s)}set(e,n,s){return e.setMilliseconds(s),e}}class g4 extends Lt{constructor(){super(...arguments);Be(this,"priority",10);Be(this,"incompatibleTokens",["t","T","x"])}parse(e,n){switch(n){case"X":return Vr(Qr.basicOptionalMinutes,e);case"XX":return Vr(Qr.basic,e);case"XXXX":return Vr(Qr.basicOptionalSeconds,e);case"XXXXX":return Vr(Qr.extendedOptionalSeconds,e);case"XXX":default:return Vr(Qr.extended,e)}}set(e,n,s){return n.timestampIsSet?e:Ht(e,e.getTime()-pf(e)-s)}}class y4 extends Lt{constructor(){super(...arguments);Be(this,"priority",10);Be(this,"incompatibleTokens",["t","T","X"])}parse(e,n){switch(n){case"x":return Vr(Qr.basicOptionalMinutes,e);case"xx":return Vr(Qr.basic,e);case"xxxx":return Vr(Qr.basicOptionalSeconds,e);case"xxxxx":return Vr(Qr.extendedOptionalSeconds,e);case"xxx":default:return Vr(Qr.extended,e)}}set(e,n,s){return n.timestampIsSet?e:Ht(e,e.getTime()-pf(e)-s)}}class b4 extends Lt{constructor(){super(...arguments);Be(this,"priority",40);Be(this,"incompatibleTokens","*")}parse(e){return ow(e)}set(e,n,s){return[Ht(e,s*1e3),{timestampIsSet:!0}]}}class v4 extends Lt{constructor(){super(...arguments);Be(this,"priority",20);Be(this,"incompatibleTokens","*")}parse(e){return ow(e)}set(e,n,s){return[Ht(e,s),{timestampIsSet:!0}]}}const x4={G:new z3,y:new U3,Y:new F3,R:new W3,u:new j3,Q:new H3,q:new Y3,M:new G3,L:new $3,w:new q3,I:new V3,d:new J3,D:new e4,E:new t4,e:new n4,c:new a4,i:new s4,a:new i4,b:new o4,B:new l4,h:new c4,H:new u4,K:new d4,k:new f4,m:new p4,s:new m4,S:new h4,X:new g4,x:new y4,t:new b4,T:new v4},w4=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,E4=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,S4=/^'([^]*?)'?$/,C4=/''/g,_4=/\S/,I4=/[a-zA-Z]/;function D4(t,a,e,n){var _,C,D,I,A,T,F,J;const s=()=>Ht((n==null?void 0:n.in)||e,NaN),l=M3(),c=(n==null?void 0:n.locale)??l.locale??aw,d=(n==null?void 0:n.firstWeekContainsDate)??((C=(_=n==null?void 0:n.locale)==null?void 0:_.options)==null?void 0:C.firstWeekContainsDate)??l.firstWeekContainsDate??((I=(D=l.locale)==null?void 0:D.options)==null?void 0:I.firstWeekContainsDate)??1,p=(n==null?void 0:n.weekStartsOn)??((T=(A=n==null?void 0:n.locale)==null?void 0:A.options)==null?void 0:T.weekStartsOn)??l.weekStartsOn??((J=(F=l.locale)==null?void 0:F.options)==null?void 0:J.weekStartsOn)??0;if(!a)return t?s():je(e,n==null?void 0:n.in);const h={firstWeekContainsDate:d,weekStartsOn:p,locale:c},m=[new O3(n==null?void 0:n.in,e)],b=a.match(E4).map(H=>{const Z=H[0];if(Z in Ag){const K=Ag[Z];return K(H,c.formatLong)}return H}).join("").match(w4),x=[];for(let H of b){const Z=H[0],K=x4[Z];if(K){const{incompatibleTokens:X}=K;if(Array.isArray(X)){const O=x.find(B=>X.includes(B.token)||B.token===Z);if(O)throw new RangeError(`The format string mustn't contain \`${O.fullToken}\` and \`${H}\` at the same time`)}else if(K.incompatibleTokens==="*"&&x.length>0)throw new RangeError(`The format string mustn't contain \`${H}\` and any other token at the same time`);x.push({token:Z,fullToken:H});const W=K.run(t,H,c.match,h);if(!W)return s();m.push(W.setter),t=W.rest}else{if(Z.match(I4))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Z+"`");if(H==="''"?H="'":Z==="'"&&(H=k4(H)),t.indexOf(H)===0)t=t.slice(H.length);else return s()}}if(t.length>0&&_4.test(t))return s();const E=m.map(H=>H.priority).sort((H,Z)=>Z-H).filter((H,Z,K)=>K.indexOf(H)===Z).map(H=>m.filter(Z=>Z.priority===H).sort((Z,K)=>K.subPriority-Z.subPriority)).map(H=>H[0]);let w=je(e,n==null?void 0:n.in);if(isNaN(+w))return s();const S={};for(const H of E){if(!H.validate(w,h))return s();const Z=H.set(w,S,h);Array.isArray(Z)?(w=Z[0],Object.assign(S,Z[1])):w=Z}return w}function k4(t){return t.match(S4)[1].replace(C4,"'")}function A4(t,a,e){const[n,s]=as(e==null?void 0:e.in,t,a);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function M4(t,a,e){const[n,s]=as(e==null?void 0:e.in,t,a);return+kg(n)==+kg(s)}function T4(t,a,e){const[n,s]=as(e==null?void 0:e.in,t,a);return n.getFullYear()===s.getFullYear()}function tu(t,a,e){const n=+je(t,e==null?void 0:e.in),[s,l]=[+je(a.start,e==null?void 0:e.in),+je(a.end,e==null?void 0:e.in)].sort((c,d)=>c-d);return n>=s&&n<=l}function N4(t,a,e){return Mr(t,-1,e)}function uw(t,a){const e=()=>Ht(a==null?void 0:a.in,NaN),s=B4(t);let l;if(s.date){const h=O4(s.date,2);l=z4(h.restDateString,h.year)}if(!l||isNaN(+l))return e();const c=+l;let d=0,p;if(s.time&&(d=U4(s.time),isNaN(d)))return e();if(s.timezone){if(p=F4(s.timezone),isNaN(p))return e()}else{const h=new Date(c+d),m=je(0,a==null?void 0:a.in);return m.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),m.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),m}return je(c+d+p,a==null?void 0:a.in)}const Nd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},R4=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,L4=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,P4=/^([+-])(\d{2})(?::?(\d{2}))?$/;function B4(t){const a={},e=t.split(Nd.dateTimeDelimiter);let n;if(e.length>2)return a;if(/:/.test(e[0])?n=e[0]:(a.date=e[0],n=e[1],Nd.timeZoneDelimiter.test(a.date)&&(a.date=t.split(Nd.timeZoneDelimiter)[0],n=t.substr(a.date.length,t.length))),n){const s=Nd.timezone.exec(n);s?(a.time=n.replace(s[1],""),a.timezone=s[1]):a.time=n}return a}function O4(t,a){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+a)+"})|(\\d{2}|[+-]\\d{"+(2+a)+"})$)"),n=t.match(e);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,l=n[2]?parseInt(n[2]):null;return{year:l===null?s:l*100,restDateString:t.slice((n[1]||n[2]).length)}}function z4(t,a){if(a===null)return new Date(NaN);const e=t.match(R4);if(!e)return new Date(NaN);const n=!!e[4],s=Ic(e[1]),l=Ic(e[2])-1,c=Ic(e[3]),d=Ic(e[4]),p=Ic(e[5])-1;if(n)return G4(a,d,p)?W4(a,d,p):new Date(NaN);{const h=new Date(0);return!H4(a,l,c)||!Y4(a,s)?new Date(NaN):(h.setUTCFullYear(a,l,Math.max(s,c)),h)}}function Ic(t){return t?parseInt(t):1}function U4(t){const a=t.match(L4);if(!a)return NaN;const e=Wh(a[1]),n=Wh(a[2]),s=Wh(a[3]);return $4(e,n,s)?e*fu+n*hp+s*1e3:NaN}function Wh(t){return t&&parseFloat(t.replace(",","."))||0}function F4(t){if(t==="Z")return 0;const a=t.match(P4);if(!a)return 0;const e=a[1]==="+"?-1:1,n=parseInt(a[2]),s=a[3]&&parseInt(a[3])||0;return Z4(n,s)?e*(n*fu+s*hp):NaN}function W4(t,a,e){const n=new Date(0);n.setUTCFullYear(t,0,4);const s=n.getUTCDay()||7,l=(a-1)*7+e+1-s;return n.setUTCDate(n.getUTCDate()+l),n}const j4=[31,null,31,30,31,30,31,31,30,31,30,31];function dw(t){return t%400===0||t%4===0&&t%100!==0}function H4(t,a,e){return a>=0&&a<=11&&e>=1&&e<=(j4[a]||(dw(t)?29:28))}function Y4(t,a){return a>=1&&a<=(dw(t)?366:365)}function G4(t,a,e){return a>=1&&a<=53&&e>=0&&e<=6}function $4(t,a,e){return t===24?a===0&&e===0:e>=0&&e<60&&a>=0&&a<60&&t>=0&&t<25}function Z4(t,a){return a>=0&&a<=59}function pr(t,a,e){const n=je(t,e==null?void 0:e.in),s=n.getFullYear(),l=n.getDate(),c=Ht(t,0);c.setFullYear(s,a,15),c.setHours(0,0,0,0);const d=A3(c);return n.setMonth(a,Math.min(l,d)),n}function Kd(t,a,e){const n=je(t,e==null?void 0:e.in);return n.setHours(a),n}function Jd(t,a,e){const n=je(t,e==null?void 0:e.in);return n.setMinutes(a),n}function nl(t,a,e){const n=je(t,e==null?void 0:e.in),s=Math.trunc(n.getMonth()/3)+1,l=a-s;return pr(n,n.getMonth()+l*3)}function ef(t,a,e){const n=je(t,e==null?void 0:e.in);return n.setSeconds(a),n}function Zr(t,a,e){const n=je(t,e==null?void 0:e.in);return isNaN(+n)?Ht(t,NaN):(n.setFullYear(a),n)}function fo(t,a,e){return Tr(t,-a,e)}function fw(t,a,e){return g0(t,-1,e)}function Uv(t,a,e){return mf(t,-1,e)}function fl(t,a,e){return Ts(t,-a,e)}function yp(){return typeof window<"u"}function Cl(t){return pw(t)?(t.nodeName||"").toLowerCase():"#document"}function $a(t){var a;return(t==null||(a=t.ownerDocument)==null?void 0:a.defaultView)||window}function rs(t){var a;return(a=(pw(t)?t.ownerDocument:t.document)||window.document)==null?void 0:a.documentElement}function pw(t){return yp()?t instanceof Node||t instanceof $a(t).Node:!1}function Ca(t){return yp()?t instanceof Element||t instanceof $a(t).Element:!1}function ts(t){return yp()?t instanceof HTMLElement||t instanceof $a(t).HTMLElement:!1}function Fv(t){return!yp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof $a(t).ShadowRoot}function pu(t){const{overflow:a,overflowX:e,overflowY:n,display:s}=gr(t);return/auto|scroll|overlay|hidden|clip/.test(a+n+e)&&!["inline","contents"].includes(s)}function q4(t){return["table","td","th"].includes(Cl(t))}function bp(t){return[":popover-open",":modal"].some(a=>{try{return t.matches(a)}catch{return!1}})}function w0(t){const a=E0(),e=Ca(t)?gr(t):t;return["transform","translate","scale","rotate","perspective"].some(n=>e[n]?e[n]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!a&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!a&&(e.filter?e.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(e.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(e.contain||"").includes(n))}function Q4(t){let a=Ti(t);for(;ts(a)&&!pl(a);){if(w0(a))return a;if(bp(a))return null;a=Ti(a)}return null}function E0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function pl(t){return["html","body","#document"].includes(Cl(t))}function gr(t){return $a(t).getComputedStyle(t)}function vp(t){return Ca(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ti(t){if(Cl(t)==="html")return t;const a=t.assignedSlot||t.parentNode||Fv(t)&&t.host||rs(t);return Fv(a)?a.host:a}function mw(t){const a=Ti(t);return pl(a)?t.ownerDocument?t.ownerDocument.body:t.body:ts(a)&&pu(a)?a:mw(a)}function nu(t,a,e){var n;a===void 0&&(a=[]),e===void 0&&(e=!0);const s=mw(t),l=s===((n=t.ownerDocument)==null?void 0:n.body),c=$a(s);if(l){const d=Tg(c);return a.concat(c,c.visualViewport||[],pu(s)?s:[],d&&e?nu(d):[])}return a.concat(s,nu(s,[],e))}function Tg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}const ml=Math.min,po=Math.max,xf=Math.round,Rd=Math.floor,Jr=t=>({x:t,y:t}),V4={left:"right",right:"left",bottom:"top",top:"bottom"},X4={start:"end",end:"start"};function K4(t,a,e){return po(t,ml(a,e))}function xp(t,a){return typeof t=="function"?t(a):t}function hl(t){return t.split("-")[0]}function mu(t){return t.split("-")[1]}function J4(t){return t==="x"?"y":"x"}function S0(t){return t==="y"?"height":"width"}function il(t){return["top","bottom"].includes(hl(t))?"y":"x"}function C0(t){return J4(il(t))}function eI(t,a,e){e===void 0&&(e=!1);const n=mu(t),s=C0(t),l=S0(s);let c=s==="x"?n===(e?"end":"start")?"right":"left":n==="start"?"bottom":"top";return a.reference[l]>a.floating[l]&&(c=wf(c)),[c,wf(c)]}function tI(t){const a=wf(t);return[Ng(t),a,Ng(a)]}function Ng(t){return t.replace(/start|end/g,a=>X4[a])}function nI(t,a,e){const n=["left","right"],s=["right","left"],l=["top","bottom"],c=["bottom","top"];switch(t){case"top":case"bottom":return e?a?s:n:a?n:s;case"left":case"right":return a?l:c;default:return[]}}function aI(t,a,e,n){const s=mu(t);let l=nI(hl(t),e==="start",n);return s&&(l=l.map(c=>c+"-"+s),a&&(l=l.concat(l.map(Ng)))),l}function wf(t){return t.replace(/left|right|bottom|top/g,a=>V4[a])}function rI(t){return{top:0,right:0,bottom:0,left:0,...t}}function hw(t){return typeof t!="number"?rI(t):{top:t,right:t,bottom:t,left:t}}function Ef(t){const{x:a,y:e,width:n,height:s}=t;return{width:n,height:s,top:e,left:a,right:a+n,bottom:e+s,x:a,y:e}}var Sf=typeof document<"u"?v.useLayoutEffect:v.useEffect;const sI={...Ax},iI=sI.useInsertionEffect,oI=iI||(t=>t());function lI(t){const a=v.useRef(()=>{});return oI(()=>{a.current=t}),v.useCallback(function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return a.current==null?void 0:a.current(...n)},[])}var jh={exports:{}},Dc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv;function cI(){if(Wv)return Dc;Wv=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function e(n,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:t,type:n,key:c,ref:s!==void 0?s:null,props:l}}return Dc.Fragment=a,Dc.jsx=e,Dc.jsxs=e,Dc}var jv;function uI(){return jv||(jv=1,jh.exports=cI()),jh.exports}var kc=uI();function Hv(t,a,e){let{reference:n,floating:s}=t;const l=il(a),c=C0(a),d=S0(c),p=hl(a),h=l==="y",m=n.x+n.width/2-s.width/2,b=n.y+n.height/2-s.height/2,x=n[d]/2-s[d]/2;let E;switch(p){case"top":E={x:m,y:n.y-s.height};break;case"bottom":E={x:m,y:n.y+n.height};break;case"right":E={x:n.x+n.width,y:b};break;case"left":E={x:n.x-s.width,y:b};break;default:E={x:n.x,y:n.y}}switch(mu(a)){case"start":E[c]-=x*(e&&h?-1:1);break;case"end":E[c]+=x*(e&&h?-1:1);break}return E}const dI=async(t,a,e)=>{const{placement:n="bottom",strategy:s="absolute",middleware:l=[],platform:c}=e,d=l.filter(Boolean),p=await(c.isRTL==null?void 0:c.isRTL(a));let h=await c.getElementRects({reference:t,floating:a,strategy:s}),{x:m,y:b}=Hv(h,n,p),x=n,E={},w=0;for(let S=0;S<d.length;S++){const{name:_,fn:C}=d[S],{x:D,y:I,data:A,reset:T}=await C({x:m,y:b,initialPlacement:n,placement:x,strategy:s,middlewareData:E,rects:h,platform:c,elements:{reference:t,floating:a}});m=D??m,b=I??b,E={...E,[_]:{...E[_],...A}},T&&w<=50&&(w++,typeof T=="object"&&(T.placement&&(x=T.placement),T.rects&&(h=T.rects===!0?await c.getElementRects({reference:t,floating:a,strategy:s}):T.rects),{x:m,y:b}=Hv(h,x,p)),S=-1)}return{x:m,y:b,placement:x,strategy:s,middlewareData:E}};async function fI(t,a){var e;a===void 0&&(a={});const{x:n,y:s,platform:l,rects:c,elements:d,strategy:p}=t,{boundary:h="clippingAncestors",rootBoundary:m="viewport",elementContext:b="floating",altBoundary:x=!1,padding:E=0}=xp(a,t),w=hw(E),_=d[x?b==="floating"?"reference":"floating":b],C=Ef(await l.getClippingRect({element:(e=await(l.isElement==null?void 0:l.isElement(_)))==null||e?_:_.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(d.floating)),boundary:h,rootBoundary:m,strategy:p})),D=b==="floating"?{x:n,y:s,width:c.floating.width,height:c.floating.height}:c.reference,I=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d.floating)),A=await(l.isElement==null?void 0:l.isElement(I))?await(l.getScale==null?void 0:l.getScale(I))||{x:1,y:1}:{x:1,y:1},T=Ef(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:D,offsetParent:I,strategy:p}):D);return{top:(C.top-T.top+w.top)/A.y,bottom:(T.bottom-C.bottom+w.bottom)/A.y,left:(C.left-T.left+w.left)/A.x,right:(T.right-C.right+w.right)/A.x}}const pI=t=>({name:"arrow",options:t,async fn(a){const{x:e,y:n,placement:s,rects:l,platform:c,elements:d,middlewareData:p}=a,{element:h,padding:m=0}=xp(t,a)||{};if(h==null)return{};const b=hw(m),x={x:e,y:n},E=C0(s),w=S0(E),S=await c.getDimensions(h),_=E==="y",C=_?"top":"left",D=_?"bottom":"right",I=_?"clientHeight":"clientWidth",A=l.reference[w]+l.reference[E]-x[E]-l.floating[w],T=x[E]-l.reference[E],F=await(c.getOffsetParent==null?void 0:c.getOffsetParent(h));let J=F?F[I]:0;(!J||!await(c.isElement==null?void 0:c.isElement(F)))&&(J=d.floating[I]||l.floating[w]);const H=A/2-T/2,Z=J/2-S[w]/2-1,K=ml(b[C],Z),X=ml(b[D],Z),W=K,O=J-S[w]-X,B=J/2-S[w]/2+H,U=K4(W,B,O),M=!p.arrow&&mu(s)!=null&&B!==U&&l.reference[w]/2-(B<W?K:X)-S[w]/2<0,z=M?B<W?B-W:B-O:0;return{[E]:x[E]+z,data:{[E]:U,centerOffset:B-U-z,...M&&{alignmentOffset:z}},reset:M}}}),mI=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(a){var e,n;const{placement:s,middlewareData:l,rects:c,initialPlacement:d,platform:p,elements:h}=a,{mainAxis:m=!0,crossAxis:b=!0,fallbackPlacements:x,fallbackStrategy:E="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:S=!0,..._}=xp(t,a);if((e=l.arrow)!=null&&e.alignmentOffset)return{};const C=hl(s),D=il(d),I=hl(d)===d,A=await(p.isRTL==null?void 0:p.isRTL(h.floating)),T=x||(I||!S?[wf(d)]:tI(d)),F=w!=="none";!x&&F&&T.push(...aI(d,S,w,A));const J=[d,...T],H=await fI(a,_),Z=[];let K=((n=l.flip)==null?void 0:n.overflows)||[];if(m&&Z.push(H[C]),b){const U=eI(s,c,A);Z.push(H[U[0]],H[U[1]])}if(K=[...K,{placement:s,overflows:Z}],!Z.every(U=>U<=0)){var X,W;const U=(((X=l.flip)==null?void 0:X.index)||0)+1,M=J[U];if(M){var O;const G=b==="alignment"?D!==il(M):!1,q=((O=K[0])==null?void 0:O.overflows[0])>0;if(!G||q)return{data:{index:U,overflows:K},reset:{placement:M}}}let z=(W=K.filter(G=>G.overflows[0]<=0).sort((G,q)=>G.overflows[1]-q.overflows[1])[0])==null?void 0:W.placement;if(!z)switch(E){case"bestFit":{var B;const G=(B=K.filter(q=>{if(F){const R=il(q.placement);return R===D||R==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(R=>R>0).reduce((R,j)=>R+j,0)]).sort((q,R)=>q[1]-R[1])[0])==null?void 0:B[0];G&&(z=G);break}case"initialPlacement":z=d;break}if(s!==z)return{reset:{placement:z}}}return{}}}};async function hI(t,a){const{placement:e,platform:n,elements:s}=t,l=await(n.isRTL==null?void 0:n.isRTL(s.floating)),c=hl(e),d=mu(e),p=il(e)==="y",h=["left","top"].includes(c)?-1:1,m=l&&p?-1:1,b=xp(a,t);let{mainAxis:x,crossAxis:E,alignmentAxis:w}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:b.mainAxis||0,crossAxis:b.crossAxis||0,alignmentAxis:b.alignmentAxis};return d&&typeof w=="number"&&(E=d==="end"?w*-1:w),p?{x:E*m,y:x*h}:{x:x*h,y:E*m}}const gI=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(a){var e,n;const{x:s,y:l,placement:c,middlewareData:d}=a,p=await hI(a,t);return c===((e=d.offset)==null?void 0:e.placement)&&(n=d.arrow)!=null&&n.alignmentOffset?{}:{x:s+p.x,y:l+p.y,data:{...p,placement:c}}}}};function gw(t){const a=gr(t);let e=parseFloat(a.width)||0,n=parseFloat(a.height)||0;const s=ts(t),l=s?t.offsetWidth:e,c=s?t.offsetHeight:n,d=xf(e)!==l||xf(n)!==c;return d&&(e=l,n=c),{width:e,height:n,$:d}}function _0(t){return Ca(t)?t:t.contextElement}function ol(t){const a=_0(t);if(!ts(a))return Jr(1);const e=a.getBoundingClientRect(),{width:n,height:s,$:l}=gw(a);let c=(l?xf(e.width):e.width)/n,d=(l?xf(e.height):e.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const yI=Jr(0);function yw(t){const a=$a(t);return!E0()||!a.visualViewport?yI:{x:a.visualViewport.offsetLeft,y:a.visualViewport.offsetTop}}function bI(t,a,e){return a===void 0&&(a=!1),!e||a&&e!==$a(t)?!1:a}function yo(t,a,e,n){a===void 0&&(a=!1),e===void 0&&(e=!1);const s=t.getBoundingClientRect(),l=_0(t);let c=Jr(1);a&&(n?Ca(n)&&(c=ol(n)):c=ol(t));const d=bI(l,e,n)?yw(l):Jr(0);let p=(s.left+d.x)/c.x,h=(s.top+d.y)/c.y,m=s.width/c.x,b=s.height/c.y;if(l){const x=$a(l),E=n&&Ca(n)?$a(n):n;let w=x,S=Tg(w);for(;S&&n&&E!==w;){const _=ol(S),C=S.getBoundingClientRect(),D=gr(S),I=C.left+(S.clientLeft+parseFloat(D.paddingLeft))*_.x,A=C.top+(S.clientTop+parseFloat(D.paddingTop))*_.y;p*=_.x,h*=_.y,m*=_.x,b*=_.y,p+=I,h+=A,w=$a(S),S=Tg(w)}}return Ef({width:m,height:b,x:p,y:h})}function I0(t,a){const e=vp(t).scrollLeft;return a?a.left+e:yo(rs(t)).left+e}function bw(t,a,e){e===void 0&&(e=!1);const n=t.getBoundingClientRect(),s=n.left+a.scrollLeft-(e?0:I0(t,n)),l=n.top+a.scrollTop;return{x:s,y:l}}function vI(t){let{elements:a,rect:e,offsetParent:n,strategy:s}=t;const l=s==="fixed",c=rs(n),d=a?bp(a.floating):!1;if(n===c||d&&l)return e;let p={scrollLeft:0,scrollTop:0},h=Jr(1);const m=Jr(0),b=ts(n);if((b||!b&&!l)&&((Cl(n)!=="body"||pu(c))&&(p=vp(n)),ts(n))){const E=yo(n);h=ol(n),m.x=E.x+n.clientLeft,m.y=E.y+n.clientTop}const x=c&&!b&&!l?bw(c,p,!0):Jr(0);return{width:e.width*h.x,height:e.height*h.y,x:e.x*h.x-p.scrollLeft*h.x+m.x+x.x,y:e.y*h.y-p.scrollTop*h.y+m.y+x.y}}function xI(t){return Array.from(t.getClientRects())}function wI(t){const a=rs(t),e=vp(t),n=t.ownerDocument.body,s=po(a.scrollWidth,a.clientWidth,n.scrollWidth,n.clientWidth),l=po(a.scrollHeight,a.clientHeight,n.scrollHeight,n.clientHeight);let c=-e.scrollLeft+I0(t);const d=-e.scrollTop;return gr(n).direction==="rtl"&&(c+=po(a.clientWidth,n.clientWidth)-s),{width:s,height:l,x:c,y:d}}function EI(t,a){const e=$a(t),n=rs(t),s=e.visualViewport;let l=n.clientWidth,c=n.clientHeight,d=0,p=0;if(s){l=s.width,c=s.height;const h=E0();(!h||h&&a==="fixed")&&(d=s.offsetLeft,p=s.offsetTop)}return{width:l,height:c,x:d,y:p}}function SI(t,a){const e=yo(t,!0,a==="fixed"),n=e.top+t.clientTop,s=e.left+t.clientLeft,l=ts(t)?ol(t):Jr(1),c=t.clientWidth*l.x,d=t.clientHeight*l.y,p=s*l.x,h=n*l.y;return{width:c,height:d,x:p,y:h}}function Yv(t,a,e){let n;if(a==="viewport")n=EI(t,e);else if(a==="document")n=wI(rs(t));else if(Ca(a))n=SI(a,e);else{const s=yw(t);n={x:a.x-s.x,y:a.y-s.y,width:a.width,height:a.height}}return Ef(n)}function vw(t,a){const e=Ti(t);return e===a||!Ca(e)||pl(e)?!1:gr(e).position==="fixed"||vw(e,a)}function CI(t,a){const e=a.get(t);if(e)return e;let n=nu(t,[],!1).filter(d=>Ca(d)&&Cl(d)!=="body"),s=null;const l=gr(t).position==="fixed";let c=l?Ti(t):t;for(;Ca(c)&&!pl(c);){const d=gr(c),p=w0(c);!p&&d.position==="fixed"&&(s=null),(l?!p&&!s:!p&&d.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||pu(c)&&!p&&vw(t,c))?n=n.filter(m=>m!==c):s=d,c=Ti(c)}return a.set(t,n),n}function _I(t){let{element:a,boundary:e,rootBoundary:n,strategy:s}=t;const c=[...e==="clippingAncestors"?bp(a)?[]:CI(a,this._c):[].concat(e),n],d=c[0],p=c.reduce((h,m)=>{const b=Yv(a,m,s);return h.top=po(b.top,h.top),h.right=ml(b.right,h.right),h.bottom=ml(b.bottom,h.bottom),h.left=po(b.left,h.left),h},Yv(a,d,s));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function II(t){const{width:a,height:e}=gw(t);return{width:a,height:e}}function DI(t,a,e){const n=ts(a),s=rs(a),l=e==="fixed",c=yo(t,!0,l,a);let d={scrollLeft:0,scrollTop:0};const p=Jr(0);function h(){p.x=I0(s)}if(n||!n&&!l)if((Cl(a)!=="body"||pu(s))&&(d=vp(a)),n){const E=yo(a,!0,l,a);p.x=E.x+a.clientLeft,p.y=E.y+a.clientTop}else s&&h();l&&!n&&s&&h();const m=s&&!n&&!l?bw(s,d):Jr(0),b=c.left+d.scrollLeft-p.x-m.x,x=c.top+d.scrollTop-p.y-m.y;return{x:b,y:x,width:c.width,height:c.height}}function Hh(t){return gr(t).position==="static"}function Gv(t,a){if(!ts(t)||gr(t).position==="fixed")return null;if(a)return a(t);let e=t.offsetParent;return rs(t)===e&&(e=e.ownerDocument.body),e}function xw(t,a){const e=$a(t);if(bp(t))return e;if(!ts(t)){let s=Ti(t);for(;s&&!pl(s);){if(Ca(s)&&!Hh(s))return s;s=Ti(s)}return e}let n=Gv(t,a);for(;n&&q4(n)&&Hh(n);)n=Gv(n,a);return n&&pl(n)&&Hh(n)&&!w0(n)?e:n||Q4(t)||e}const kI=async function(t){const a=this.getOffsetParent||xw,e=this.getDimensions,n=await e(t.floating);return{reference:DI(t.reference,await a(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function AI(t){return gr(t).direction==="rtl"}const MI={convertOffsetParentRelativeRectToViewportRelativeRect:vI,getDocumentElement:rs,getClippingRect:_I,getOffsetParent:xw,getElementRects:kI,getClientRects:xI,getDimensions:II,getScale:ol,isElement:Ca,isRTL:AI};function ww(t,a){return t.x===a.x&&t.y===a.y&&t.width===a.width&&t.height===a.height}function TI(t,a){let e=null,n;const s=rs(t);function l(){var d;clearTimeout(n),(d=e)==null||d.disconnect(),e=null}function c(d,p){d===void 0&&(d=!1),p===void 0&&(p=1),l();const h=t.getBoundingClientRect(),{left:m,top:b,width:x,height:E}=h;if(d||a(),!x||!E)return;const w=Rd(b),S=Rd(s.clientWidth-(m+x)),_=Rd(s.clientHeight-(b+E)),C=Rd(m),I={rootMargin:-w+"px "+-S+"px "+-_+"px "+-C+"px",threshold:po(0,ml(1,p))||1};let A=!0;function T(F){const J=F[0].intersectionRatio;if(J!==p){if(!A)return c();J?c(!1,J):n=setTimeout(()=>{c(!1,1e-7)},1e3)}J===1&&!ww(h,t.getBoundingClientRect())&&c(),A=!1}try{e=new IntersectionObserver(T,{...I,root:s.ownerDocument})}catch{e=new IntersectionObserver(T,I)}e.observe(t)}return c(!0),l}function NI(t,a,e,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:l=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:p=!1}=n,h=_0(t),m=s||l?[...h?nu(h):[],...nu(a)]:[];m.forEach(C=>{s&&C.addEventListener("scroll",e,{passive:!0}),l&&C.addEventListener("resize",e)});const b=h&&d?TI(h,e):null;let x=-1,E=null;c&&(E=new ResizeObserver(C=>{let[D]=C;D&&D.target===h&&E&&(E.unobserve(a),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var I;(I=E)==null||I.observe(a)})),e()}),h&&!p&&E.observe(h),E.observe(a));let w,S=p?yo(t):null;p&&_();function _(){const C=yo(t);S&&!ww(S,C)&&e(),S=C,w=requestAnimationFrame(_)}return e(),()=>{var C;m.forEach(D=>{s&&D.removeEventListener("scroll",e),l&&D.removeEventListener("resize",e)}),b==null||b(),(C=E)==null||C.disconnect(),E=null,p&&cancelAnimationFrame(w)}}const RI=gI,LI=mI,$v=pI,PI=(t,a,e)=>{const n=new Map,s={platform:MI,...e},l={...s.platform,_c:n};return dI(t,a,{...s,platform:l})};var tf=typeof document<"u"?v.useLayoutEffect:v.useEffect;function Cf(t,a){if(t===a)return!0;if(typeof t!=typeof a)return!1;if(typeof t=="function"&&t.toString()===a.toString())return!0;let e,n,s;if(t&&a&&typeof t=="object"){if(Array.isArray(t)){if(e=t.length,e!==a.length)return!1;for(n=e;n--!==0;)if(!Cf(t[n],a[n]))return!1;return!0}if(s=Object.keys(t),e=s.length,e!==Object.keys(a).length)return!1;for(n=e;n--!==0;)if(!{}.hasOwnProperty.call(a,s[n]))return!1;for(n=e;n--!==0;){const l=s[n];if(!(l==="_owner"&&t.$$typeof)&&!Cf(t[l],a[l]))return!1}return!0}return t!==t&&a!==a}function Ew(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Zv(t,a){const e=Ew(t);return Math.round(a*e)/e}function Yh(t){const a=v.useRef(t);return tf(()=>{a.current=t}),a}function BI(t){t===void 0&&(t={});const{placement:a="bottom",strategy:e="absolute",middleware:n=[],platform:s,elements:{reference:l,floating:c}={},transform:d=!0,whileElementsMounted:p,open:h}=t,[m,b]=v.useState({x:0,y:0,strategy:e,placement:a,middlewareData:{},isPositioned:!1}),[x,E]=v.useState(n);Cf(x,n)||E(n);const[w,S]=v.useState(null),[_,C]=v.useState(null),D=v.useCallback(G=>{G!==F.current&&(F.current=G,S(G))},[]),I=v.useCallback(G=>{G!==J.current&&(J.current=G,C(G))},[]),A=l||w,T=c||_,F=v.useRef(null),J=v.useRef(null),H=v.useRef(m),Z=p!=null,K=Yh(p),X=Yh(s),W=Yh(h),O=v.useCallback(()=>{if(!F.current||!J.current)return;const G={placement:a,strategy:e,middleware:x};X.current&&(G.platform=X.current),PI(F.current,J.current,G).then(q=>{const R={...q,isPositioned:W.current!==!1};B.current&&!Cf(H.current,R)&&(H.current=R,$x.flushSync(()=>{b(R)}))})},[x,a,e,X,W]);tf(()=>{h===!1&&H.current.isPositioned&&(H.current.isPositioned=!1,b(G=>({...G,isPositioned:!1})))},[h]);const B=v.useRef(!1);tf(()=>(B.current=!0,()=>{B.current=!1}),[]),tf(()=>{if(A&&(F.current=A),T&&(J.current=T),A&&T){if(K.current)return K.current(A,T,O);O()}},[A,T,O,K,Z]);const U=v.useMemo(()=>({reference:F,floating:J,setReference:D,setFloating:I}),[D,I]),M=v.useMemo(()=>({reference:A,floating:T}),[A,T]),z=v.useMemo(()=>{const G={position:e,left:0,top:0};if(!M.floating)return G;const q=Zv(M.floating,m.x),R=Zv(M.floating,m.y);return d?{...G,transform:"translate("+q+"px, "+R+"px)",...Ew(M.floating)>=1.5&&{willChange:"transform"}}:{position:e,left:q,top:R}},[e,d,M.floating,m.x,m.y]);return v.useMemo(()=>({...m,update:O,refs:U,elements:M,floatingStyles:z}),[m,O,U,M,z])}const OI=t=>{function a(e){return{}.hasOwnProperty.call(e,"current")}return{name:"arrow",options:t,fn(e){const{element:n,padding:s}=typeof t=="function"?t(e):t;return n&&a(n)?n.current!=null?$v({element:n.current,padding:s}).fn(e):{}:n?$v({element:n,padding:s}).fn(e):{}}}},zI=(t,a)=>({...RI(t),options:[t,a]}),UI=(t,a)=>({...LI(t),options:[t,a]}),FI=(t,a)=>({...OI(t),options:[t,a]}),WI={...Ax};let qv=!1,jI=0;const Qv=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+jI++;function HI(){const[t,a]=v.useState(()=>qv?Qv():void 0);return Sf(()=>{t==null&&a(Qv())},[]),v.useEffect(()=>{qv=!0},[]),t}const YI=WI.useId,Sw=YI||HI,GI=v.forwardRef(function(a,e){const{context:{placement:n,elements:{floating:s},middlewareData:{arrow:l,shift:c}},width:d=14,height:p=7,tipRadius:h=0,strokeWidth:m=0,staticOffset:b,stroke:x,d:E,style:{transform:w,...S}={},..._}=a,C=Sw(),[D,I]=v.useState(!1);if(Sf(()=>{if(!s)return;gr(s).direction==="rtl"&&I(!0)},[s]),!s)return null;const[A,T]=n.split("-"),F=A==="top"||A==="bottom";let J=b;(F&&c!=null&&c.x||!F&&c!=null&&c.y)&&(J=null);const H=m*2,Z=H/2,K=d/2*(h/-8+1),X=p/2*h/4,W=!!E,O=J&&T==="end"?"bottom":"top";let B=J&&T==="end"?"right":"left";J&&D&&(B=T==="end"?"left":"right");const U=(l==null?void 0:l.x)!=null?J||l.x:"",M=(l==null?void 0:l.y)!=null?J||l.y:"",z=E||"M0,0"+(" H"+d)+(" L"+(d-K)+","+(p-X))+(" Q"+d/2+","+p+" "+K+","+(p-X))+" Z",G={top:W?"rotate(180deg)":"",left:W?"rotate(90deg)":"rotate(-90deg)",bottom:W?"":"rotate(180deg)",right:W?"rotate(-90deg)":"rotate(90deg)"}[A];return kc.jsxs("svg",{..._,"aria-hidden":!0,ref:e,width:W?d:d+H,height:d,viewBox:"0 0 "+d+" "+(p>d?p:d),style:{position:"absolute",pointerEvents:"none",[B]:U,[O]:M,[A]:F||W?"100%":"calc(100% - "+H/2+"px)",transform:[G,w].filter(q=>!!q).join(" "),...S},children:[H>0&&kc.jsx("path",{clipPath:"url(#"+C+")",fill:"none",stroke:x,strokeWidth:H+(E?0:1),d:z}),kc.jsx("path",{stroke:H&&!E?_.fill:"none",d:z}),kc.jsx("clipPath",{id:C,children:kc.jsx("rect",{x:-Z,y:Z*(W?-1:1),width:d+H,height:d})})]})});function $I(){const t=new Map;return{emit(a,e){var n;(n=t.get(a))==null||n.forEach(s=>s(e))},on(a,e){t.has(a)||t.set(a,new Set),t.get(a).add(e)},off(a,e){var n;(n=t.get(a))==null||n.delete(e)}}}const ZI=v.createContext(null),qI=v.createContext(null),QI=()=>{var t;return((t=v.useContext(ZI))==null?void 0:t.id)||null},VI=()=>v.useContext(qI);function XI(t){const{open:a=!1,onOpenChange:e,elements:n}=t,s=Sw(),l=v.useRef({}),[c]=v.useState(()=>$I()),d=QI()!=null,[p,h]=v.useState(n.reference),m=lI((E,w,S)=>{l.current.openEvent=E?w:void 0,c.emit("openchange",{open:E,event:w,reason:S,nested:d}),e==null||e(E,w,S)}),b=v.useMemo(()=>({setPositionReference:h}),[]),x=v.useMemo(()=>({reference:p||n.reference||null,floating:n.floating||null,domReference:n.reference}),[p,n.reference,n.floating]);return v.useMemo(()=>({dataRef:l,open:a,onOpenChange:m,elements:x,events:c,floatingId:s,refs:b}),[a,m,x,c,s,b])}function KI(t){t===void 0&&(t={});const{nodeId:a}=t,e=XI({...t,elements:{reference:null,floating:null,...t.elements}}),n=t.rootContext||e,s=n.elements,[l,c]=v.useState(null),[d,p]=v.useState(null),m=(s==null?void 0:s.domReference)||l,b=v.useRef(null),x=VI();Sf(()=>{m&&(b.current=m)},[m]);const E=BI({...t,elements:{...s,...d&&{reference:d}}}),w=v.useCallback(I=>{const A=Ca(I)?{getBoundingClientRect:()=>I.getBoundingClientRect(),getClientRects:()=>I.getClientRects(),contextElement:I}:I;p(A),E.refs.setReference(A)},[E.refs]),S=v.useCallback(I=>{(Ca(I)||I===null)&&(b.current=I,c(I)),(Ca(E.refs.reference.current)||E.refs.reference.current===null||I!==null&&!Ca(I))&&E.refs.setReference(I)},[E.refs]),_=v.useMemo(()=>({...E.refs,setReference:S,setPositionReference:w,domReference:b}),[E.refs,S,w]),C=v.useMemo(()=>({...E.elements,domReference:m}),[E.elements,m]),D=v.useMemo(()=>({...E,...n,refs:_,elements:C,nodeId:a}),[E,_,C,a,n]);return Sf(()=>{n.dataRef.current.floatingContext=D;const I=x==null?void 0:x.nodesRef.current.find(A=>A.id===a);I&&(I.context=D)}),v.useMemo(()=>({...E,context:D,refs:_,elements:C}),[E,_,C,D])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var Rg=function(a,e){return Rg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(n[l]=s[l])},Rg(a,e)};function ta(t,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");Rg(t,a);function e(){this.constructor=t}t.prototype=a===null?Object.create(a):(e.prototype=a.prototype,new e)}var Mt=function(){return Mt=Object.assign||function(e){for(var n,s=1,l=arguments.length;s<l;s++){n=arguments[s];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},Mt.apply(this,arguments)};function Xr(t,a,e){if(e||arguments.length===2)for(var n=0,s=a.length,l;n<s;n++)(l||!(n in a))&&(l||(l=Array.prototype.slice.call(a,0,n)),l[n]=a[n]);return t.concat(l||Array.prototype.slice.call(a))}var JI=function(t){var a=t.showTimeSelectOnly,e=a===void 0?!1:a,n=t.showTime,s=n===void 0?!1:n,l=t.className,c=t.children,d=e?"Choose Time":"Choose Date".concat(s?" and Time":"");return i.createElement("div",{className:l,role:"dialog","aria-label":d,"aria-modal":"true"},c)},eD=function(t,a){var e=v.useRef(null),n=v.useRef(t);n.current=t;var s=v.useCallback(function(l){var c,d=l.composed&&l.composedPath&&l.composedPath().find(function(p){return p instanceof Node})||l.target;e.current&&!e.current.contains(d)&&(a&&d instanceof HTMLElement&&d.classList.contains(a)||(c=n.current)===null||c===void 0||c.call(n,l))},[a]);return v.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),e},wp=function(t){var a=t.children,e=t.onClickOutside,n=t.className,s=t.containerRef,l=t.style,c=t.ignoreClass,d=eD(e,c);return i.createElement("div",{className:n,style:l,ref:function(p){d.current=p,s&&(s.current=p)}},a)},Me;(function(t){t.ArrowUp="ArrowUp",t.ArrowDown="ArrowDown",t.ArrowLeft="ArrowLeft",t.ArrowRight="ArrowRight",t.PageUp="PageUp",t.PageDown="PageDown",t.Home="Home",t.End="End",t.Enter="Enter",t.Space=" ",t.Tab="Tab",t.Escape="Escape",t.Backspace="Backspace",t.X="x"})(Me||(Me={}));function Cw(){var t=typeof window<"u"?window:globalThis;return t}var hu=12;function Ot(t){if(t==null)return new Date;var a=typeof t=="string"?uw(t):je(t);return Ep(a)?a:new Date}function Gh(t,a,e,n,s){s===void 0&&(s=Ot());for(var l=gl(e)||gl(D0()),c=Array.isArray(a)?a:[a],d=0,p=c;d<p.length;d++){var h=p[d],m=D4(t,h,s,{locale:l});if(Ep(m)&&(!n||t===fn(m,h,e)))return m}return null}function Ep(t,a){return hf(t)&&!go(t,new Date("1/1/1800"))}function fn(t,a,e){if(e==="en")return Na(t,a,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=e?gl(e):void 0;return e&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(e,'"].')),n=n||gl(D0()),Na(t,a,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function fr(t,a){var e=a.dateFormat,n=a.locale,s=Array.isArray(e)&&e.length>0?e[0]:e;return t&&fn(t,s,n)||""}var _w=" - ";function tD(t,a,e){if(!t)return"";var n=fr(t,e),s=a?fr(a,e):"";return"".concat(n).concat(_w).concat(s)}function nD(t,a){if(!(t!=null&&t.length))return"";var e=t[0]?fr(t[0],a):"";if(t.length===1)return e;if(t.length===2&&t[1]){var n=fr(t[1],a);return"".concat(e,", ").concat(n)}var s=t.length-1;return"".concat(e," (+").concat(s,")")}function $h(t,a){var e=a.hour,n=e===void 0?0:e,s=a.minute,l=s===void 0?0:s,c=a.second,d=c===void 0?0:c;return Kd(Jd(ef(t,d),l),n)}function aD(t){return y0(t)}function rD(t,a){return fn(t,"ddd",a)}function nf(t){return ho(t)}function ki(t,a,e){var n=gl(a||D0());return zs(t,{locale:n,weekStartsOn:e})}function Ps(t){return tw(t)}function Uc(t){return gp(t)}function Vv(t){return kg(t)}function Xv(){return ho(Ot())}function Kv(t){return Jx(t)}function sD(t){return R_(t)}function iD(t){return ew(t)}function qr(t,a){return t&&a?T4(t,a):!t&&!a}function Sa(t,a){return t&&a?A4(t,a):!t&&!a}function _f(t,a){return t&&a?M4(t,a):!t&&!a}function At(t,a){return t&&a?M_(t,a):!t&&!a}function oo(t,a){return t&&a?N3(t,a):!t&&!a}function Fc(t,a,e){var n,s=ho(a),l=Jx(e);try{n=tu(t,{start:s,end:l})}catch{n=!1}return n}function D0(){var t=Cw();return t.__localeId__}function gl(t){if(typeof t=="string"){var a=Cw();return a.__localeData__?a.__localeData__[t]:void 0}else return t}function oD(t,a,e){return a(fn(t,"EEEE",e))}function lD(t,a){return fn(t,"EEEEEE",a)}function cD(t,a){return fn(t,"EEE",a)}function k0(t,a){return fn(pr(Ot(),t),"LLLL",a)}function Iw(t,a){return fn(pr(Ot(),t),"LLL",a)}function uD(t,a){return fn(nl(Ot(),t),"QQQ",a)}function mr(t,a){var e=a===void 0?{}:a,n=e.minDate,s=e.maxDate,l=e.excludeDates,c=e.excludeDateIntervals,d=e.includeDates,p=e.includeDateIntervals,h=e.filterDate;return gu(t,{minDate:n,maxDate:s})||l&&l.some(function(m){return m instanceof Date?At(t,m):At(t,m.date)})||c&&c.some(function(m){var b=m.start,x=m.end;return tu(t,{start:b,end:x})})||d&&!d.some(function(m){return At(t,m)})||p&&!p.some(function(m){var b=m.start,x=m.end;return tu(t,{start:b,end:x})})||h&&!h(Ot(t))||!1}function A0(t,a){var e=a===void 0?{}:a,n=e.excludeDates,s=e.excludeDateIntervals;return s&&s.length>0?s.some(function(l){var c=l.start,d=l.end;return tu(t,{start:c,end:d})}):n&&n.some(function(l){var c;return l instanceof Date?At(t,l):At(t,(c=l.date)!==null&&c!==void 0?c:new Date)})||!1}function Dw(t,a){var e=a===void 0?{}:a,n=e.minDate,s=e.maxDate,l=e.excludeDates,c=e.includeDates,d=e.filterDate;return gu(t,{minDate:n?tw(n):void 0,maxDate:s?ew(s):void 0})||(l==null?void 0:l.some(function(p){return Sa(t,p instanceof Date?p:p.date)}))||c&&!c.some(function(p){return Sa(t,p)})||d&&!d(Ot(t))||!1}function Ld(t,a,e,n){var s=vt(t),l=ga(t),c=vt(a),d=ga(a),p=vt(n);return s===c&&s===p?l<=e&&e<=d:s<c?p===s&&l<=e||p===c&&d>=e||p<c&&p>s:!1}function dD(t,a){var e=a===void 0?{}:a,n=e.minDate,s=e.maxDate,l=e.excludeDates,c=e.includeDates;return gu(t,{minDate:n,maxDate:s})||l&&l.some(function(d){return Sa(d instanceof Date?d:d.date,t)})||c&&!c.some(function(d){return Sa(d,t)})||!1}function Pd(t,a){var e=a===void 0?{}:a,n=e.minDate,s=e.maxDate,l=e.excludeDates,c=e.includeDates,d=e.filterDate;return gu(t,{minDate:n,maxDate:s})||(l==null?void 0:l.some(function(p){return _f(t,p instanceof Date?p:p.date)}))||c&&!c.some(function(p){return _f(t,p)})||d&&!d(Ot(t))||!1}function Bd(t,a,e){if(!a||!e||!hf(a)||!hf(e))return!1;var n=vt(a),s=vt(e);return n<=t&&s>=t}function af(t,a){var e=a===void 0?{}:a,n=e.minDate,s=e.maxDate,l=e.excludeDates,c=e.includeDates,d=e.filterDate,p=new Date(t,0,1);return gu(p,{minDate:n?gp(n):void 0,maxDate:s?nw(s):void 0})||(l==null?void 0:l.some(function(h){return qr(p,h instanceof Date?h:h.date)}))||c&&!c.some(function(h){return qr(p,h)})||d&&!d(Ot(p))||!1}function Od(t,a,e,n){var s=vt(t),l=uo(t),c=vt(a),d=uo(a),p=vt(n);return s===c&&s===p?l<=e&&e<=d:s<c?p===s&&l<=e||p===c&&d>=e||p<c&&p>s:!1}function gu(t,a){var e,n=a===void 0?{}:a,s=n.minDate,l=n.maxDate;return(e=s&&dl(t,s)<0||l&&dl(t,l)>0)!==null&&e!==void 0?e:!1}function Jv(t,a){return a.some(function(e){return Rs(e)===Rs(t)&&Ls(e)===Ls(t)&&Di(e)===Di(t)})}function e2(t,a){var e=a===void 0?{}:a,n=e.excludeTimes,s=e.includeTimes,l=e.filterTime;return n&&Jv(t,n)||s&&!Jv(t,s)||l&&!l(t)||!1}function t2(t,a){var e=a.minTime,n=a.maxTime;if(!e||!n)throw new Error("Both minTime and maxTime props required");var s=Ot();s=Kd(s,Rs(t)),s=Jd(s,Ls(t)),s=ef(s,Di(t));var l=Ot();l=Kd(l,Rs(e)),l=Jd(l,Ls(e)),l=ef(l,Di(e));var c=Ot();c=Kd(c,Rs(n)),c=Jd(c,Ls(n)),c=ef(c,Di(n));var d;try{d=!tu(s,{start:l,end:c})}catch{d=!1}return d}function n2(t,a){var e=a===void 0?{}:a,n=e.minDate,s=e.includeDates,l=fo(t,1);return n&&gf(n,l)>0||s&&s.every(function(c){return gf(c,l)>0})||!1}function a2(t,a){var e=a===void 0?{}:a,n=e.maxDate,s=e.includeDates,l=Tr(t,1);return n&&gf(l,n)>0||s&&s.every(function(c){return gf(l,c)>0})||!1}function fD(t,a){var e=a===void 0?{}:a,n=e.minDate,s=e.includeDates,l=gp(t),c=fw(l);return n&&yf(n,c)>0||s&&s.every(function(d){return yf(d,c)>0})||!1}function pD(t,a){var e=a===void 0?{}:a,n=e.maxDate,s=e.includeDates,l=nw(t),c=g0(l,1);return n&&yf(c,n)>0||s&&s.every(function(d){return yf(c,d)>0})||!1}function r2(t,a){var e=a===void 0?{}:a,n=e.minDate,s=e.includeDates,l=fl(t,1);return n&&bf(n,l)>0||s&&s.every(function(c){return bf(c,l)>0})||!1}function mD(t,a){var e=a===void 0?{}:a,n=e.minDate,s=e.yearItemNumber,l=s===void 0?hu:s,c=Uc(fl(t,l)),d=Ii(c,l).endPeriod,p=n&&vt(n);return p&&p>d||!1}function s2(t,a){var e=a===void 0?{}:a,n=e.maxDate,s=e.includeDates,l=Ts(t,1);return n&&bf(l,n)>0||s&&s.every(function(c){return bf(l,c)>0})||!1}function hD(t,a){var e=a===void 0?{}:a,n=e.maxDate,s=e.yearItemNumber,l=s===void 0?hu:s,c=Ts(t,l),d=Ii(c,l).startPeriod,p=n&&vt(n);return p&&p<d||!1}function kw(t){var a=t.minDate,e=t.includeDates;if(e&&a){var n=e.filter(function(s){return dl(s,a)>=0});return Nv(n)}else return e?Nv(e):a}function Aw(t){var a=t.maxDate,e=t.includeDates;if(e&&a){var n=e.filter(function(s){return dl(s,a)<=0});return Tv(n)}else return e?Tv(e):a}function i2(t,a){var e;t===void 0&&(t=[]),a===void 0&&(a="react-datepicker__day--highlighted");for(var n=new Map,s=0,l=t.length;s<l;s++){var c=t[s];if(Ns(c)){var d=fn(c,"MM.dd.yyyy"),p=n.get(d)||[];p.includes(a)||(p.push(a),n.set(d,p))}else if(typeof c=="object"){var h=Object.keys(c),m=(e=h[0])!==null&&e!==void 0?e:"",b=c[m];if(typeof m=="string"&&Array.isArray(b))for(var x=0,E=b.length;x<E;x++){var w=b[x];if(w){var d=fn(w,"MM.dd.yyyy"),p=n.get(d)||[];p.includes(m)||(p.push(m),n.set(d,p))}}}}return n}function gD(t,a){return t.length!==a.length?!1:t.every(function(e,n){return e===a[n]})}function yD(t,a){t===void 0&&(t=[]),a===void 0&&(a="react-datepicker__day--holidays");var e=new Map;return t.forEach(function(n){var s=n.date,l=n.holidayName;if(Ns(s)){var c=fn(s,"MM.dd.yyyy"),d=e.get(c)||{className:"",holidayNames:[]};if(!("className"in d&&d.className===a&&gD(d.holidayNames,[l]))){d.className=a;var p=d.holidayNames;d.holidayNames=p?Xr(Xr([],p,!0),[l],!1):[l],e.set(c,d)}}}),e}function bD(t,a,e,n,s){for(var l=s.length,c=[],d=0;d<l;d++){var p=t,h=s[d];h&&(p=I_(p,Rs(h)),p=Dg(p,Ls(h)),p=A_(p,Di(h)));var m=Dg(t,(e+1)*n);Us(p,a)&&go(p,m)&&h!=null&&c.push(h)}return c}function o2(t){return t<10?"0".concat(t):"".concat(t)}function Ii(t,a){a===void 0&&(a=hu);var e=Math.ceil(vt(t)/a)*a,n=e-(a-1);return{startPeriod:n,endPeriod:e}}function vD(t){var a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),24);return Math.round((+e-+a)/36e5)}function l2(t){var a=t.getSeconds(),e=t.getMilliseconds();return je(t.getTime()-a*1e3-e)}function xD(t,a){return l2(t).getTime()===l2(a).getTime()}function c2(t){if(!Ns(t))throw new Error("Invalid date");var a=new Date(t);return a.setHours(0,0,0,0),a}function u2(t,a){if(!Ns(t)||!Ns(a))throw new Error("Invalid date received");var e=c2(t),n=c2(a);return go(e,n)}function Mw(t){return t.key===Me.Space}var wD=function(t){ta(a,t);function a(e){var n=t.call(this,e)||this;return n.inputRef=i.createRef(),n.onTimeChange=function(s){var l,c;n.setState({time:s});var d=n.props.date,p=d instanceof Date&&!isNaN(+d),h=p?d:new Date;if(s!=null&&s.includes(":")){var m=s.split(":"),b=m[0],x=m[1];h.setHours(Number(b)),h.setMinutes(Number(x))}(c=(l=n.props).onChange)===null||c===void 0||c.call(l,h)},n.renderTimeInput=function(){var s=n.state.time,l=n.props,c=l.date,d=l.timeString,p=l.customTimeInput;return p?v.cloneElement(p,{date:c,value:s,onChange:n.onTimeChange}):i.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var h;(h=n.inputRef.current)===null||h===void 0||h.focus()},required:!0,value:s,onChange:function(h){n.onTimeChange(h.target.value||d)}})},n.state={time:n.props.timeString},n}return a.getDerivedStateFromProps=function(e,n){return e.timeString!==n.time?{time:e.timeString}:null},a.prototype.render=function(){return i.createElement("div",{className:"react-datepicker__input-time-container"},i.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),i.createElement("div",{className:"react-datepicker-time__input-container"},i.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},a}(v.Component),ED=function(t){ta(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.dayEl=v.createRef(),e.handleClick=function(n){!e.isDisabled()&&e.props.onClick&&e.props.onClick(n)},e.handleMouseEnter=function(n){!e.isDisabled()&&e.props.onMouseEnter&&e.props.onMouseEnter(n)},e.handleOnKeyDown=function(n){var s,l,c=n.key;c===Me.Space&&(n.preventDefault(),n.key=Me.Enter),(l=(s=e.props).handleOnKeyDown)===null||l===void 0||l.call(s,n)},e.isSameDay=function(n){return At(e.props.day,n)},e.isKeyboardSelected=function(){var n;if(e.props.disabledKeyboardNavigation)return!1;var s=e.props.selectsMultiple?(n=e.props.selectedDates)===null||n===void 0?void 0:n.some(function(c){return e.isSameDayOrWeek(c)}):e.isSameDayOrWeek(e.props.selected),l=e.props.preSelection&&e.isDisabled(e.props.preSelection);return!s&&e.isSameDayOrWeek(e.props.preSelection)&&!l},e.isDisabled=function(n){return n===void 0&&(n=e.props.day),mr(n,{minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDateIntervals:e.props.includeDateIntervals,includeDates:e.props.includeDates,filterDate:e.props.filterDate})},e.isExcluded=function(){return A0(e.props.day,{excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals})},e.isStartOfWeek=function(){return At(e.props.day,ki(e.props.day,e.props.locale,e.props.calendarStartDay))},e.isSameWeek=function(n){return e.props.showWeekPicker&&At(n,ki(e.props.day,e.props.locale,e.props.calendarStartDay))},e.isSameDayOrWeek=function(n){return e.isSameDay(n)||e.isSameWeek(n)},e.getHighLightedClass=function(){var n=e.props,s=n.day,l=n.highlightDates;if(!l)return!1;var c=fn(s,"MM.dd.yyyy");return l.get(c)},e.getHolidaysClass=function(){var n,s=e.props,l=s.day,c=s.holidays;if(!c)return[void 0];var d=fn(l,"MM.dd.yyyy");return c.has(d)?[(n=c.get(d))===null||n===void 0?void 0:n.className]:[void 0]},e.isInRange=function(){var n=e.props,s=n.day,l=n.startDate,c=n.endDate;return!l||!c?!1:Fc(s,l,c)},e.isInSelectingRange=function(){var n,s=e.props,l=s.day,c=s.selectsStart,d=s.selectsEnd,p=s.selectsRange,h=s.selectsDisabledDaysInRange,m=s.startDate,b=s.endDate,x=(n=e.props.selectingDate)!==null&&n!==void 0?n:e.props.preSelection;return!(c||d||p)||!x||!h&&e.isDisabled()?!1:c&&b&&(go(x,b)||oo(x,b))?Fc(l,x,b):d&&m&&(Us(x,m)||oo(x,m))||p&&m&&!b&&(Us(x,m)||oo(x,m))?Fc(l,m,x):!1},e.isSelectingRangeStart=function(){var n;if(!e.isInSelectingRange())return!1;var s=e.props,l=s.day,c=s.startDate,d=s.selectsStart,p=(n=e.props.selectingDate)!==null&&n!==void 0?n:e.props.preSelection;return d?At(l,p):At(l,c)},e.isSelectingRangeEnd=function(){var n;if(!e.isInSelectingRange())return!1;var s=e.props,l=s.day,c=s.endDate,d=s.selectsEnd,p=s.selectsRange,h=(n=e.props.selectingDate)!==null&&n!==void 0?n:e.props.preSelection;return d||p?At(l,h):At(l,c)},e.isRangeStart=function(){var n=e.props,s=n.day,l=n.startDate,c=n.endDate;return!l||!c?!1:At(l,s)},e.isRangeEnd=function(){var n=e.props,s=n.day,l=n.startDate,c=n.endDate;return!l||!c?!1:At(c,s)},e.isWeekend=function(){var n=k3(e.props.day);return n===0||n===6},e.isAfterMonth=function(){return e.props.month!==void 0&&(e.props.month+1)%12===ga(e.props.day)},e.isBeforeMonth=function(){return e.props.month!==void 0&&(ga(e.props.day)+1)%12===e.props.month},e.isCurrentDay=function(){return e.isSameDay(Ot())},e.isSelected=function(){var n;return e.props.selectsMultiple?(n=e.props.selectedDates)===null||n===void 0?void 0:n.some(function(s){return e.isSameDayOrWeek(s)}):e.isSameDayOrWeek(e.props.selected)},e.getClassNames=function(n){var s=e.props.dayClassName?e.props.dayClassName(n):void 0;return ca("react-datepicker__day",s,"react-datepicker__day--"+rD(e.props.day),{"react-datepicker__day--disabled":e.isDisabled(),"react-datepicker__day--excluded":e.isExcluded(),"react-datepicker__day--selected":e.isSelected(),"react-datepicker__day--keyboard-selected":e.isKeyboardSelected(),"react-datepicker__day--range-start":e.isRangeStart(),"react-datepicker__day--range-end":e.isRangeEnd(),"react-datepicker__day--in-range":e.isInRange(),"react-datepicker__day--in-selecting-range":e.isInSelectingRange(),"react-datepicker__day--selecting-range-start":e.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":e.isSelectingRangeEnd(),"react-datepicker__day--today":e.isCurrentDay(),"react-datepicker__day--weekend":e.isWeekend(),"react-datepicker__day--outside-month":e.isAfterMonth()||e.isBeforeMonth()},e.getHighLightedClass(),e.getHolidaysClass())},e.getAriaLabel=function(){var n=e.props,s=n.day,l=n.ariaLabelPrefixWhenEnabled,c=l===void 0?"Choose":l,d=n.ariaLabelPrefixWhenDisabled,p=d===void 0?"Not available":d,h=e.isDisabled()||e.isExcluded()?p:c;return"".concat(h," ").concat(fn(s,"PPPP",e.props.locale))},e.getTitle=function(){var n=e.props,s=n.day,l=n.holidays,c=l===void 0?new Map:l,d=n.excludeDates,p=fn(s,"MM.dd.yyyy"),h=[];return c.has(p)&&h.push.apply(h,c.get(p).holidayNames),e.isExcluded()&&h.push(d==null?void 0:d.filter(function(m){return m instanceof Date?At(m,s):At(m==null?void 0:m.date,s)}).map(function(m){if(!(m instanceof Date))return m==null?void 0:m.message})),h.join(", ")},e.getTabIndex=function(){var n=e.props.selected,s=e.props.preSelection,l=!(e.props.showWeekPicker&&(e.props.showWeekNumber||!e.isStartOfWeek()))&&(e.isKeyboardSelected()||e.isSameDay(n)&&At(s,n))?0:-1;return l},e.handleFocusDay=function(){var n;e.shouldFocusDay()&&((n=e.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},e.renderDayContents=function(){return e.props.monthShowsDuplicateDaysEnd&&e.isAfterMonth()||e.props.monthShowsDuplicateDaysStart&&e.isBeforeMonth()?null:e.props.renderDayContents?e.props.renderDayContents(zv(e.props.day),e.props.day):zv(e.props.day)},e.render=function(){return i.createElement("div",{ref:e.dayEl,className:e.getClassNames(e.props.day),onKeyDown:e.handleOnKeyDown,onClick:e.handleClick,onMouseEnter:e.props.usePointerEvent?void 0:e.handleMouseEnter,onPointerEnter:e.props.usePointerEvent?e.handleMouseEnter:void 0,tabIndex:e.getTabIndex(),"aria-label":e.getAriaLabel(),role:"option",title:e.getTitle(),"aria-disabled":e.isDisabled(),"aria-current":e.isCurrentDay()?"date":void 0,"aria-selected":e.isSelected()||e.isInRange()},e.renderDayContents(),e.getTitle()!==""&&i.createElement("span",{className:"overlay"},e.getTitle()))},e}return a.prototype.componentDidMount=function(){this.handleFocusDay()},a.prototype.componentDidUpdate=function(){this.handleFocusDay()},a.prototype.shouldFocusDay=function(){var e=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(e=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(e=!1),this.isDayActiveElement()&&(e=!0),this.isDuplicateDay()&&(e=!1)),e},a.prototype.isDayActiveElement=function(){var e,n,s;return((n=(e=this.props.containerRef)===null||e===void 0?void 0:e.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},a.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},a}(v.Component),SD=function(t){ta(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.weekNumberEl=v.createRef(),e.handleClick=function(n){e.props.onClick&&e.props.onClick(n)},e.handleOnKeyDown=function(n){var s,l,c=n.key;c===Me.Space&&(n.preventDefault(),n.key=Me.Enter),(l=(s=e.props).handleOnKeyDown)===null||l===void 0||l.call(s,n)},e.isKeyboardSelected=function(){return!e.props.disabledKeyboardNavigation&&!At(e.props.date,e.props.selected)&&At(e.props.date,e.props.preSelection)},e.getTabIndex=function(){return e.props.showWeekPicker&&e.props.showWeekNumber&&(e.isKeyboardSelected()||At(e.props.date,e.props.selected)&&At(e.props.preSelection,e.props.selected))?0:-1},e.handleFocusWeekNumber=function(n){var s=!1;e.getTabIndex()===0&&!(n!=null&&n.isInputFocused)&&At(e.props.date,e.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),e.props.inline&&!e.props.shouldFocusDayInline&&(s=!1),e.props.containerRef&&e.props.containerRef.current&&e.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&e.weekNumberEl.current&&e.weekNumberEl.current.focus({preventScroll:!0})},e}return Object.defineProperty(a,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),a.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},a.prototype.componentDidUpdate=function(e){this.handleFocusWeekNumber(e)},a.prototype.render=function(){var e=this.props,n=e.weekNumber,s=e.isWeekDisabled,l=e.ariaLabelPrefix,c=l===void 0?a.defaultProps.ariaLabelPrefix:l,d=e.onClick,p={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!d&&!s,"react-datepicker__week-number--selected":!!d&&At(this.props.date,this.props.selected)};return i.createElement("div",{ref:this.weekNumberEl,className:ca(p),"aria-label":"".concat(c," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},n)},a}(v.Component),CD=function(t){ta(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.isDisabled=function(n){return mr(n,{minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDateIntervals:e.props.includeDateIntervals,includeDates:e.props.includeDates,filterDate:e.props.filterDate})},e.handleDayClick=function(n,s){e.props.onDayClick&&e.props.onDayClick(n,s)},e.handleDayMouseEnter=function(n){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(n)},e.handleWeekClick=function(n,s,l){for(var c,d,p,h=new Date(n),m=0;m<7;m++){var b=new Date(n);b.setDate(b.getDate()+m);var x=!e.isDisabled(b);if(x){h=b;break}}typeof e.props.onWeekSelect=="function"&&e.props.onWeekSelect(h,s,l),e.props.showWeekPicker&&e.handleDayClick(h,l),((c=e.props.shouldCloseOnSelect)!==null&&c!==void 0?c:a.defaultProps.shouldCloseOnSelect)&&((p=(d=e.props).setOpen)===null||p===void 0||p.call(d,!1))},e.formatWeekNumber=function(n){return e.props.formatWeekNumber?e.props.formatWeekNumber(n):aD(n)},e.isWeekDisabled=function(){for(var n=e.startOfWeek(),s=Mr(n,6),l=new Date(n);l<=s;){if(!e.isDisabled(l))return!1;l=Mr(l,1)}return!0},e.renderDays=function(){var n=e.startOfWeek(),s=[],l=e.formatWeekNumber(n);if(e.props.showWeekNumber){var c=e.props.onWeekSelect||e.props.showWeekPicker?e.handleWeekClick.bind(e,n,l):void 0;s.push(i.createElement(SD,Mt({key:"W"},a.defaultProps,e.props,{weekNumber:l,isWeekDisabled:e.isWeekDisabled(),date:n,onClick:c})))}return s.concat([0,1,2,3,4,5,6].map(function(d){var p=Mr(n,d);return i.createElement(ED,Mt({},a.defaultProps,e.props,{ariaLabelPrefixWhenEnabled:e.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:e.props.disabledDayAriaLabelPrefix,key:p.valueOf(),day:p,onClick:e.handleDayClick.bind(e,p),onMouseEnter:e.handleDayMouseEnter.bind(e,p)}))}))},e.startOfWeek=function(){return ki(e.props.day,e.props.locale,e.props.calendarStartDay)},e.isKeyboardSelected=function(){return!e.props.disabledKeyboardNavigation&&!At(e.startOfWeek(),e.props.selected)&&At(e.startOfWeek(),e.props.preSelection)},e}return Object.defineProperty(a,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),a.prototype.render=function(){var e={"react-datepicker__week":!0,"react-datepicker__week--selected":At(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return i.createElement("div",{className:ca(e)},this.renderDays())},a}(v.Component),Ac,_D=6,ll={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},Zh=(Ac={},Ac[ll.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},Ac[ll.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},Ac[ll.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},Ac),zd=1;function d2(t,a){return t?ll.FOUR_COLUMNS:a?ll.TWO_COLUMNS:ll.THREE_COLUMNS}var ID=function(t){ta(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.MONTH_REFS=Xr([],Array(12),!0).map(function(){return v.createRef()}),e.QUARTER_REFS=Xr([],Array(4),!0).map(function(){return v.createRef()}),e.isDisabled=function(n){return mr(n,{minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDateIntervals:e.props.includeDateIntervals,includeDates:e.props.includeDates,filterDate:e.props.filterDate})},e.isExcluded=function(n){return A0(n,{excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals})},e.handleDayClick=function(n,s){var l,c;(c=(l=e.props).onDayClick)===null||c===void 0||c.call(l,n,s,e.props.orderInDisplay)},e.handleDayMouseEnter=function(n){var s,l;(l=(s=e.props).onDayMouseEnter)===null||l===void 0||l.call(s,n)},e.handleMouseLeave=function(){var n,s;(s=(n=e.props).onMouseLeave)===null||s===void 0||s.call(n)},e.isRangeStartMonth=function(n){var s=e.props,l=s.day,c=s.startDate,d=s.endDate;return!c||!d?!1:Sa(pr(l,n),c)},e.isRangeStartQuarter=function(n){var s=e.props,l=s.day,c=s.startDate,d=s.endDate;return!c||!d?!1:_f(nl(l,n),c)},e.isRangeEndMonth=function(n){var s=e.props,l=s.day,c=s.startDate,d=s.endDate;return!c||!d?!1:Sa(pr(l,n),d)},e.isRangeEndQuarter=function(n){var s=e.props,l=s.day,c=s.startDate,d=s.endDate;return!c||!d?!1:_f(nl(l,n),d)},e.isInSelectingRangeMonth=function(n){var s,l=e.props,c=l.day,d=l.selectsStart,p=l.selectsEnd,h=l.selectsRange,m=l.startDate,b=l.endDate,x=(s=e.props.selectingDate)!==null&&s!==void 0?s:e.props.preSelection;return!(d||p||h)||!x?!1:d&&b?Ld(x,b,n,c):p&&m||h&&m&&!b?Ld(m,x,n,c):!1},e.isSelectingMonthRangeStart=function(n){var s;if(!e.isInSelectingRangeMonth(n))return!1;var l=e.props,c=l.day,d=l.startDate,p=l.selectsStart,h=pr(c,n),m=(s=e.props.selectingDate)!==null&&s!==void 0?s:e.props.preSelection;return p?Sa(h,m):Sa(h,d)},e.isSelectingMonthRangeEnd=function(n){var s;if(!e.isInSelectingRangeMonth(n))return!1;var l=e.props,c=l.day,d=l.endDate,p=l.selectsEnd,h=l.selectsRange,m=pr(c,n),b=(s=e.props.selectingDate)!==null&&s!==void 0?s:e.props.preSelection;return p||h?Sa(m,b):Sa(m,d)},e.isInSelectingRangeQuarter=function(n){var s,l=e.props,c=l.day,d=l.selectsStart,p=l.selectsEnd,h=l.selectsRange,m=l.startDate,b=l.endDate,x=(s=e.props.selectingDate)!==null&&s!==void 0?s:e.props.preSelection;return!(d||p||h)||!x?!1:d&&b?Od(x,b,n,c):p&&m||h&&m&&!b?Od(m,x,n,c):!1},e.isWeekInMonth=function(n){var s=e.props.day,l=Mr(n,6);return Sa(n,s)||Sa(l,s)},e.isCurrentMonth=function(n,s){return vt(n)===vt(Ot())&&s===ga(Ot())},e.isCurrentQuarter=function(n,s){return vt(n)===vt(Ot())&&s===uo(Ot())},e.isSelectedMonth=function(n,s,l){return ga(l)===s&&vt(n)===vt(l)},e.isSelectMonthInList=function(n,s,l){return l.some(function(c){return e.isSelectedMonth(n,s,c)})},e.isSelectedQuarter=function(n,s,l){return uo(n)===s&&vt(n)===vt(l)},e.isMonthSelected=function(){var n=e.props,s=n.day,l=n.selected,c=n.selectedDates,d=n.selectsMultiple,p=ga(s);return d?c==null?void 0:c.some(function(h){return e.isSelectedMonth(s,p,h)}):!!l&&e.isSelectedMonth(s,p,l)},e.renderWeeks=function(){for(var n=[],s=e.props.fixedHeight,l=0,c=!1,d=ki(Ps(e.props.day),e.props.locale,e.props.calendarStartDay),p=function(w){return e.props.showWeekPicker?ki(w,e.props.locale,e.props.calendarStartDay):e.props.preSelection},h=function(w){return e.props.showWeekPicker?ki(w,e.props.locale,e.props.calendarStartDay):e.props.selected},m=e.props.selected?h(e.props.selected):void 0,b=e.props.preSelection?p(e.props.preSelection):void 0;n.push(i.createElement(CD,Mt({},e.props,{ariaLabelPrefix:e.props.weekAriaLabelPrefix,key:l,day:d,month:ga(e.props.day),onDayClick:e.handleDayClick,onDayMouseEnter:e.handleDayMouseEnter,selected:m,preSelection:b,showWeekNumber:e.props.showWeekNumbers}))),!c;){l++,d=mf(d,1);var x=s&&l>=_D,E=!s&&!e.isWeekInMonth(d);if(x||E)if(e.props.peekNextMonth)c=!0;else break}return n},e.onMonthClick=function(n,s){var l=e.isMonthDisabledForLabelDate(s),c=l.isDisabled,d=l.labelDate;c||e.handleDayClick(Ps(d),n)},e.onMonthMouseEnter=function(n){var s=e.isMonthDisabledForLabelDate(n),l=s.isDisabled,c=s.labelDate;l||e.handleDayMouseEnter(Ps(c))},e.handleMonthNavigation=function(n,s){var l,c,d,p;(c=(l=e.props).setPreSelection)===null||c===void 0||c.call(l,s),(p=(d=e.MONTH_REFS[n])===null||d===void 0?void 0:d.current)===null||p===void 0||p.focus()},e.handleKeyboardNavigation=function(n,s,l){var c,d=e.props,p=d.selected,h=d.preSelection,m=d.setPreSelection,b=d.minDate,x=d.maxDate,E=d.showFourColumnMonthYearPicker,w=d.showTwoColumnMonthYearPicker;if(h){var S=d2(E,w),_=e.getVerticalOffset(S),C=(c=Zh[S])===null||c===void 0?void 0:c.grid,D=function(J,H,Z){var K,X,W=H,O=Z;switch(J){case Me.ArrowRight:W=Tr(H,zd),O=Z===11?0:Z+zd;break;case Me.ArrowLeft:W=fo(H,zd),O=Z===0?11:Z-zd;break;case Me.ArrowUp:W=fo(H,_),O=!((K=C==null?void 0:C[0])===null||K===void 0)&&K.includes(Z)?Z+12-_:Z-_;break;case Me.ArrowDown:W=Tr(H,_),O=!((X=C==null?void 0:C[C.length-1])===null||X===void 0)&&X.includes(Z)?Z-12+_:Z+_;break}return{newCalculatedDate:W,newCalculatedMonth:O}},I=function(J,H,Z){for(var K=40,X=J,W=!1,O=0,B=D(X,H,Z),U=B.newCalculatedDate,M=B.newCalculatedMonth;!W;){if(O>=K){U=H,M=Z;break}if(b&&U<b){X=Me.ArrowRight;var z=D(X,U,M);U=z.newCalculatedDate,M=z.newCalculatedMonth}if(x&&U>x){X=Me.ArrowLeft;var z=D(X,U,M);U=z.newCalculatedDate,M=z.newCalculatedMonth}if(dD(U,e.props)){var z=D(X,U,M);U=z.newCalculatedDate,M=z.newCalculatedMonth}else W=!0;O++}return{newCalculatedDate:U,newCalculatedMonth:M}};if(s===Me.Enter){e.isMonthDisabled(l)||(e.onMonthClick(n,l),m==null||m(p));return}var A=I(s,h,l),T=A.newCalculatedDate,F=A.newCalculatedMonth;switch(s){case Me.ArrowRight:case Me.ArrowLeft:case Me.ArrowUp:case Me.ArrowDown:e.handleMonthNavigation(F,T);break}}},e.getVerticalOffset=function(n){var s,l;return(l=(s=Zh[n])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&l!==void 0?l:0},e.onMonthKeyDown=function(n,s){var l=e.props,c=l.disabledKeyboardNavigation,d=l.handleOnMonthKeyDown,p=n.key;p!==Me.Tab&&n.preventDefault(),c||e.handleKeyboardNavigation(n,p,s),d&&d(n)},e.onQuarterClick=function(n,s){var l=nl(e.props.day,s);Pd(l,e.props)||e.handleDayClick(Vv(l),n)},e.onQuarterMouseEnter=function(n){var s=nl(e.props.day,n);Pd(s,e.props)||e.handleDayMouseEnter(Vv(s))},e.handleQuarterNavigation=function(n,s){var l,c,d,p;e.isDisabled(s)||e.isExcluded(s)||((c=(l=e.props).setPreSelection)===null||c===void 0||c.call(l,s),(p=(d=e.QUARTER_REFS[n-1])===null||d===void 0?void 0:d.current)===null||p===void 0||p.focus())},e.onQuarterKeyDown=function(n,s){var l,c,d=n.key;if(!e.props.disabledKeyboardNavigation)switch(d){case Me.Enter:e.onQuarterClick(n,s),(c=(l=e.props).setPreSelection)===null||c===void 0||c.call(l,e.props.selected);break;case Me.ArrowRight:if(!e.props.preSelection)break;e.handleQuarterNavigation(s===4?1:s+1,g0(e.props.preSelection,1));break;case Me.ArrowLeft:if(!e.props.preSelection)break;e.handleQuarterNavigation(s===1?4:s-1,fw(e.props.preSelection));break}},e.isMonthDisabledForLabelDate=function(n){var s,l=e.props,c=l.day,d=l.minDate,p=l.maxDate,h=l.excludeDates,m=l.includeDates,b=pr(c,n);return{isDisabled:(s=(d||p||h||m)&&Dw(b,e.props))!==null&&s!==void 0?s:!1,labelDate:b}},e.isMonthDisabled=function(n){var s=e.isMonthDisabledForLabelDate(n).isDisabled;return s},e.getMonthClassNames=function(n){var s=e.props,l=s.day,c=s.startDate,d=s.endDate,p=s.preSelection,h=s.monthClassName,m=h?h(pr(l,n)):void 0,b=e.getSelection();return ca("react-datepicker__month-text","react-datepicker__month-".concat(n),m,{"react-datepicker__month-text--disabled":e.isMonthDisabled(n),"react-datepicker__month-text--selected":b?e.isSelectMonthInList(l,n,b):void 0,"react-datepicker__month-text--keyboard-selected":!e.props.disabledKeyboardNavigation&&p&&e.isSelectedMonth(l,n,p)&&!e.isMonthSelected()&&!e.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":e.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":c&&d?Ld(c,d,n,l):void 0,"react-datepicker__month-text--range-start":e.isRangeStartMonth(n),"react-datepicker__month-text--range-end":e.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":e.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":e.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":e.isCurrentMonth(l,n)})},e.getTabIndex=function(n){if(e.props.preSelection==null)return"-1";var s=ga(e.props.preSelection),l=e.isMonthDisabledForLabelDate(s).isDisabled,c=n===s&&!(l||e.props.disabledKeyboardNavigation)?"0":"-1";return c},e.getQuarterTabIndex=function(n){if(e.props.preSelection==null)return"-1";var s=uo(e.props.preSelection),l=Pd(e.props.day,e.props),c=n===s&&!(l||e.props.disabledKeyboardNavigation)?"0":"-1";return c},e.getAriaLabel=function(n){var s=e.props,l=s.chooseDayAriaLabelPrefix,c=l===void 0?"Choose":l,d=s.disabledDayAriaLabelPrefix,p=d===void 0?"Not available":d,h=s.day,m=s.locale,b=pr(h,n),x=e.isDisabled(b)||e.isExcluded(b)?p:c;return"".concat(x," ").concat(fn(b,"MMMM yyyy",m))},e.getQuarterClassNames=function(n){var s=e.props,l=s.day,c=s.startDate,d=s.endDate,p=s.selected,h=s.minDate,m=s.maxDate,b=s.excludeDates,x=s.includeDates,E=s.filterDate,w=s.preSelection,S=s.disabledKeyboardNavigation,_=(h||m||b||x||E)&&Pd(nl(l,n),e.props);return ca("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":_,"react-datepicker__quarter-text--selected":p?e.isSelectedQuarter(l,n,p):void 0,"react-datepicker__quarter-text--keyboard-selected":!S&&w&&e.isSelectedQuarter(l,n,w)&&!_,"react-datepicker__quarter-text--in-selecting-range":e.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":c&&d?Od(c,d,n,l):void 0,"react-datepicker__quarter-text--range-start":e.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":e.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":e.isCurrentQuarter(l,n)})},e.getMonthContent=function(n){var s=e.props,l=s.showFullMonthYearPicker,c=s.renderMonthContent,d=s.locale,p=s.day,h=Iw(n,d),m=k0(n,d);return c?c(n,h,m,p):l?m:h},e.getQuarterContent=function(n){var s,l=e.props,c=l.renderQuarterContent,d=l.locale,p=uD(n,d);return(s=c==null?void 0:c(n,p))!==null&&s!==void 0?s:p},e.renderMonths=function(){var n,s=e.props,l=s.showTwoColumnMonthYearPicker,c=s.showFourColumnMonthYearPicker,d=s.day,p=s.selected,h=(n=Zh[d2(c,l)])===null||n===void 0?void 0:n.grid;return h==null?void 0:h.map(function(m,b){return i.createElement("div",{className:"react-datepicker__month-wrapper",key:b},m.map(function(x,E){return i.createElement("div",{ref:e.MONTH_REFS[x],key:E,onClick:function(w){e.onMonthClick(w,x)},onKeyDown:function(w){Mw(w)&&(w.preventDefault(),w.key=Me.Enter),e.onMonthKeyDown(w,x)},onMouseEnter:e.props.usePointerEvent?void 0:function(){return e.onMonthMouseEnter(x)},onPointerEnter:e.props.usePointerEvent?function(){return e.onMonthMouseEnter(x)}:void 0,tabIndex:Number(e.getTabIndex(x)),className:e.getMonthClassNames(x),"aria-disabled":e.isMonthDisabled(x),role:"option","aria-label":e.getAriaLabel(x),"aria-current":e.isCurrentMonth(d,x)?"date":void 0,"aria-selected":p?e.isSelectedMonth(d,x,p):void 0},e.getMonthContent(x))}))})},e.renderQuarters=function(){var n=e.props,s=n.day,l=n.selected,c=[1,2,3,4];return i.createElement("div",{className:"react-datepicker__quarter-wrapper"},c.map(function(d,p){return i.createElement("div",{key:p,ref:e.QUARTER_REFS[p],role:"option",onClick:function(h){e.onQuarterClick(h,d)},onKeyDown:function(h){e.onQuarterKeyDown(h,d)},onMouseEnter:e.props.usePointerEvent?void 0:function(){return e.onQuarterMouseEnter(d)},onPointerEnter:e.props.usePointerEvent?function(){return e.onQuarterMouseEnter(d)}:void 0,className:e.getQuarterClassNames(d),"aria-selected":l?e.isSelectedQuarter(s,d,l):void 0,tabIndex:Number(e.getQuarterTabIndex(d)),"aria-current":e.isCurrentQuarter(s,d)?"date":void 0},e.getQuarterContent(d))}))},e.getClassNames=function(){var n=e.props,s=n.selectingDate,l=n.selectsStart,c=n.selectsEnd,d=n.showMonthYearPicker,p=n.showQuarterYearPicker,h=n.showWeekPicker;return ca("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(l||c)},{"react-datepicker__monthPicker":d},{"react-datepicker__quarterPicker":p},{"react-datepicker__weekPicker":h})},e}return a.prototype.getSelection=function(){var e=this.props,n=e.selected,s=e.selectedDates,l=e.selectsMultiple;if(l)return s;if(n)return[n]},a.prototype.render=function(){var e=this.props,n=e.showMonthYearPicker,s=e.showQuarterYearPicker,l=e.day,c=e.ariaLabelPrefix,d=c===void 0?"Month ":c,p=d?d.trim()+" ":"";return i.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(p).concat(fn(l,"MMMM, yyyy",this.props.locale)),role:"listbox"},n?this.renderMonths():s?this.renderQuarters():this.renderWeeks())},a}(v.Component),DD=function(t){ta(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.isSelectedMonth=function(n){return e.props.month===n},e.renderOptions=function(){return e.props.monthNames.map(function(n,s){return i.createElement("div",{className:e.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:e.onChange.bind(e,s),"aria-selected":e.isSelectedMonth(s)?"true":void 0},e.isSelectedMonth(s)?i.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",n)})},e.onChange=function(n){return e.props.onChange(n)},e.handleClickOutside=function(){return e.props.onCancel()},e}return a.prototype.render=function(){return i.createElement(wp,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},a}(v.Component),kD=function(t){ta(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.state={dropdownVisible:!1},e.renderSelectOptions=function(n){return n.map(function(s,l){return i.createElement("option",{key:s,value:l},s)})},e.renderSelectMode=function(n){return i.createElement("select",{value:e.props.month,className:"react-datepicker__month-select",onChange:function(s){return e.onChange(parseInt(s.target.value))}},e.renderSelectOptions(n))},e.renderReadView=function(n,s){return i.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:e.toggleDropdown},i.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),i.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[e.props.month]))},e.renderDropdown=function(n){return i.createElement(DD,Mt({key:"dropdown"},e.props,{monthNames:n,onChange:e.onChange,onCancel:e.toggleDropdown}))},e.renderScrollMode=function(n){var s=e.state.dropdownVisible,l=[e.renderReadView(!s,n)];return s&&l.unshift(e.renderDropdown(n)),l},e.onChange=function(n){e.toggleDropdown(),n!==e.props.month&&e.props.onChange(n)},e.toggleDropdown=function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})},e}return a.prototype.render=function(){var e=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(l){return Iw(l,e.props.locale)}:function(l){return k0(l,e.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(n);break;case"select":s=this.renderSelectMode(n);break}return i.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},a}(v.Component);function AD(t,a){for(var e=[],n=Ps(t),s=Ps(a);!Us(n,s);)e.push(Ot(n)),n=Tr(n,1);return e}var MD=function(t){ta(a,t);function a(e){var n=t.call(this,e)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(s){var l=Mg(s),c=qr(n.props.date,s)&&Sa(n.props.date,s);return i.createElement("div",{className:c?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:l,onClick:n.onChange.bind(n,l),"aria-selected":c?"true":void 0},c?i.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",fn(s,n.props.dateFormat,n.props.locale))})},n.onChange=function(s){return n.props.onChange(s)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:AD(n.props.minDate,n.props.maxDate)},n}return a.prototype.render=function(){var e=ca({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return i.createElement(wp,{className:e,onClickOutside:this.handleClickOutside},this.renderOptions())},a}(v.Component),TD=function(t){ta(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.state={dropdownVisible:!1},e.renderSelectOptions=function(){for(var n=Ps(e.props.minDate),s=Ps(e.props.maxDate),l=[];!Us(n,s);){var c=Mg(n);l.push(i.createElement("option",{key:c,value:c},fn(n,e.props.dateFormat,e.props.locale))),n=Tr(n,1)}return l},e.onSelectChange=function(n){e.onChange(parseInt(n.target.value))},e.renderSelectMode=function(){return i.createElement("select",{value:Mg(Ps(e.props.date)),className:"react-datepicker__month-year-select",onChange:e.onSelectChange},e.renderSelectOptions())},e.renderReadView=function(n){var s=fn(e.props.date,e.props.dateFormat,e.props.locale);return i.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:e.toggleDropdown},i.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),i.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},e.renderDropdown=function(){return i.createElement(MD,Mt({key:"dropdown"},e.props,{onChange:e.onChange,onCancel:e.toggleDropdown}))},e.renderScrollMode=function(){var n=e.state.dropdownVisible,s=[e.renderReadView(!n)];return n&&s.unshift(e.renderDropdown()),s},e.onChange=function(n){e.toggleDropdown();var s=Ot(n);qr(e.props.date,s)&&Sa(e.props.date,s)||e.props.onChange(s)},e.toggleDropdown=function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})},e}return a.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode();break}return i.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},e)},a}(v.Component),ND=function(t){ta(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.state={height:null},e.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,s,l;e.list&&(e.list.scrollTop=(l=e.centerLi&&a.calcCenterPosition(e.props.monthRef?e.props.monthRef.clientHeight-((s=(n=e.header)===null||n===void 0?void 0:n.clientHeight)!==null&&s!==void 0?s:0):e.list.clientHeight,e.centerLi))!==null&&l!==void 0?l:0)})},e.handleClick=function(n){var s,l;(e.props.minTime||e.props.maxTime)&&t2(n,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&e2(n,e.props)||(l=(s=e.props).onChange)===null||l===void 0||l.call(s,n)},e.isSelectedTime=function(n){return e.props.selected&&xD(e.props.selected,n)},e.isDisabledTime=function(n){return(e.props.minTime||e.props.maxTime)&&t2(n,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&e2(n,e.props)},e.liClasses=function(n){var s,l=["react-datepicker__time-list-item",e.props.timeClassName?e.props.timeClassName(n):void 0];return e.isSelectedTime(n)&&l.push("react-datepicker__time-list-item--selected"),e.isDisabledTime(n)&&l.push("react-datepicker__time-list-item--disabled"),e.props.injectTimes&&(Rs(n)*3600+Ls(n)*60+Di(n))%(((s=e.props.intervals)!==null&&s!==void 0?s:a.defaultProps.intervals)*60)!==0&&l.push("react-datepicker__time-list-item--injected"),l.join(" ")},e.handleOnKeyDown=function(n,s){var l,c;n.key===Me.Space&&(n.preventDefault(),n.key=Me.Enter),(n.key===Me.ArrowUp||n.key===Me.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===Me.ArrowDown||n.key===Me.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===Me.Enter&&e.handleClick(s),(c=(l=e.props).handleOnKeyDown)===null||c===void 0||c.call(l,n)},e.renderTimes=function(){for(var n,s=[],l=typeof e.props.format=="string"?e.props.format:"p",c=(n=e.props.intervals)!==null&&n!==void 0?n:a.defaultProps.intervals,d=e.props.selected||e.props.openToDate||Ot(),p=nf(d),h=e.props.injectTimes&&e.props.injectTimes.sort(function(_,C){return _.getTime()-C.getTime()}),m=60*vD(d),b=m/c,x=0;x<b;x++){var E=Dg(p,x*c);if(s.push(E),h){var w=bD(p,E,x,c,h);s=s.concat(w)}}var S=s.reduce(function(_,C){return C.getTime()<=d.getTime()?C:_},s[0]);return s.map(function(_){return i.createElement("li",{key:_.valueOf(),onClick:e.handleClick.bind(e,_),className:e.liClasses(_),ref:function(C){_===S&&(e.centerLi=C)},onKeyDown:function(C){e.handleOnKeyDown(C,_)},tabIndex:_===S?0:-1,role:"option","aria-selected":e.isSelectedTime(_)?"true":void 0,"aria-disabled":e.isDisabledTime(_)?"true":void 0},fn(_,l,e.props.locale))})},e.renderTimeCaption=function(){return e.props.showTimeCaption===!1?i.createElement(i.Fragment,null):i.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(e.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){e.header=n}},i.createElement("div",{className:"react-datepicker-time__header"},e.props.timeCaption))},e}return Object.defineProperty(a,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),a.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},a.prototype.componentWillUnmount=function(){var e;(e=this.resizeObserver)===null||e===void 0||e.disconnect()},a.prototype.observeDatePickerHeightChanges=function(){var e=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){e.updateContainerHeight()}),this.resizeObserver.observe(n))},a.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},a.prototype.render=function(){var e=this,n,s=this.state.height;return i.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:a.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),i.createElement("div",{className:"react-datepicker__time"},i.createElement("div",{className:"react-datepicker__time-box"},i.createElement("ul",{className:"react-datepicker__time-list",ref:function(l){e.list=l},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},a.calcCenterPosition=function(e,n){return n.offsetTop-(e/2-n.clientHeight/2)},a}(v.Component),f2=3,RD=function(t){ta(a,t);function a(e){var n=t.call(this,e)||this;return n.YEAR_REFS=Xr([],Array(n.props.yearItemNumber),!0).map(function(){return v.createRef()}),n.isDisabled=function(s){return mr(s,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(s){return A0(s,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var s;return(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection},n.updateFocusOnPaginate=function(s){var l=function(){var c,d;(d=(c=n.YEAR_REFS[s])===null||c===void 0?void 0:c.current)===null||d===void 0||d.focus()};window.requestAnimationFrame(l)},n.handleYearClick=function(s,l){n.props.onDayClick&&n.props.onDayClick(s,l)},n.handleYearNavigation=function(s,l){var c,d,p,h,m=n.props,b=m.date,x=m.yearItemNumber;if(!(b===void 0||x===void 0)){var E=Ii(b,x).startPeriod;n.isDisabled(l)||n.isExcluded(l)||((d=(c=n.props).setPreSelection)===null||d===void 0||d.call(c,l),s-E<0?n.updateFocusOnPaginate(x-(E-s)):s-E>=x?n.updateFocusOnPaginate(Math.abs(x-(s-E))):(h=(p=n.YEAR_REFS[s-E])===null||p===void 0?void 0:p.current)===null||h===void 0||h.focus())}},n.isSameDay=function(s,l){return At(s,l)},n.isCurrentYear=function(s){return s===vt(Ot())},n.isRangeStart=function(s){return n.props.startDate&&n.props.endDate&&qr(Zr(Ot(),s),n.props.startDate)},n.isRangeEnd=function(s){return n.props.startDate&&n.props.endDate&&qr(Zr(Ot(),s),n.props.endDate)},n.isInRange=function(s){return Bd(s,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(s){var l=n.props,c=l.selectsStart,d=l.selectsEnd,p=l.selectsRange,h=l.startDate,m=l.endDate;return!(c||d||p)||!n.selectingDate()?!1:c&&m?Bd(s,n.selectingDate(),m):d&&h||p&&h&&!m?Bd(s,h,n.selectingDate()):!1},n.isSelectingRangeStart=function(s){var l;if(!n.isInSelectingRange(s))return!1;var c=n.props,d=c.startDate,p=c.selectsStart,h=Zr(Ot(),s);return p?qr(h,(l=n.selectingDate())!==null&&l!==void 0?l:null):qr(h,d??null)},n.isSelectingRangeEnd=function(s){var l;if(!n.isInSelectingRange(s))return!1;var c=n.props,d=c.endDate,p=c.selectsEnd,h=c.selectsRange,m=Zr(Ot(),s);return p||h?qr(m,(l=n.selectingDate())!==null&&l!==void 0?l:null):qr(m,d??null)},n.isKeyboardSelected=function(s){if(!(n.props.date===void 0||n.props.selected==null||n.props.preSelection==null)){var l=n.props,c=l.minDate,d=l.maxDate,p=l.excludeDates,h=l.includeDates,m=l.filterDate,b=Uc(Zr(n.props.date,s)),x=(c||d||p||h||m)&&af(s,n.props);return!n.props.disabledKeyboardNavigation&&!n.props.inline&&!At(b,Uc(n.props.selected))&&At(b,Uc(n.props.preSelection))&&!x}},n.isSelectedYear=function(s){var l=n.props,c=l.selectsMultiple,d=l.selected,p=l.selectedDates;return c?p==null?void 0:p.some(function(h){return s===vt(h)}):!!d&&s===vt(d)},n.onYearClick=function(s,l){var c=n.props.date;c!==void 0&&n.handleYearClick(Uc(Zr(c,l)),s)},n.onYearKeyDown=function(s,l){var c,d,p=s.key,h=n.props,m=h.date,b=h.yearItemNumber,x=h.handleOnKeyDown;if(p!==Me.Tab&&s.preventDefault(),!n.props.disabledKeyboardNavigation)switch(p){case Me.Enter:if(n.props.selected==null)break;n.onYearClick(s,l),(d=(c=n.props).setPreSelection)===null||d===void 0||d.call(c,n.props.selected);break;case Me.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(l+1,Ts(n.props.preSelection,1));break;case Me.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(l-1,fl(n.props.preSelection,1));break;case Me.ArrowUp:{if(m===void 0||b===void 0||n.props.preSelection==null)break;var E=Ii(m,b).startPeriod,w=f2,S=l-w;if(S<E){var _=b%w;l>=E&&l<E+_?w=_:w+=_,S=l-w}n.handleYearNavigation(S,fl(n.props.preSelection,w));break}case Me.ArrowDown:{if(m===void 0||b===void 0||n.props.preSelection==null)break;var C=Ii(m,b).endPeriod,w=f2,S=l+w;if(S>C){var _=b%w;l<=C&&l>C-_?w=_:w+=_,S=l+w}n.handleYearNavigation(S,Ts(n.props.preSelection,w));break}}x&&x(s)},n.getYearClassNames=function(s){var l=n.props,c=l.date,d=l.minDate,p=l.maxDate,h=l.excludeDates,m=l.includeDates,b=l.filterDate,x=l.yearClassName;return ca("react-datepicker__year-text","react-datepicker__year-".concat(s),c?x==null?void 0:x(Zr(c,s)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(s),"react-datepicker__year-text--disabled":(d||p||h||m||b)&&af(s,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(s),"react-datepicker__year-text--range-start":n.isRangeStart(s),"react-datepicker__year-text--range-end":n.isRangeEnd(s),"react-datepicker__year-text--in-range":n.isInRange(s),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(s),"react-datepicker__year-text--today":n.isCurrentYear(s)})},n.getYearTabIndex=function(s){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var l=vt(n.props.preSelection),c=af(s,n.props);return s===l&&!c?"0":"-1"},n.getYearContent=function(s){return n.props.renderYearContent?n.props.renderYearContent(s):s},n}return a.prototype.render=function(){var e=this,n=[],s=this.props,l=s.date,c=s.yearItemNumber,d=s.onYearMouseEnter,p=s.onYearMouseLeave;if(l===void 0)return null;for(var h=Ii(l,c),m=h.startPeriod,b=h.endPeriod,x=function(S){n.push(i.createElement("div",{ref:E.YEAR_REFS[S-m],onClick:function(_){e.onYearClick(_,S)},onKeyDown:function(_){Mw(_)&&(_.preventDefault(),_.key=Me.Enter),e.onYearKeyDown(_,S)},tabIndex:Number(E.getYearTabIndex(S)),className:E.getYearClassNames(S),onMouseEnter:E.props.usePointerEvent?void 0:function(_){return d(_,S)},onPointerEnter:E.props.usePointerEvent?function(_){return d(_,S)}:void 0,onMouseLeave:E.props.usePointerEvent?void 0:function(_){return p(_,S)},onPointerLeave:E.props.usePointerEvent?function(_){return p(_,S)}:void 0,key:S,"aria-current":E.isCurrentYear(S)?"date":void 0},E.getYearContent(S)))},E=this,w=m;w<=b;w++)x(w);return i.createElement("div",{className:"react-datepicker__year"},i.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},a}(v.Component);function LD(t,a,e,n){for(var s=[],l=0;l<2*a+1;l++){var c=t+a-l,d=!0;e&&(d=vt(e)<=c),n&&d&&(d=vt(n)>=c),d&&s.push(c)}return s}var PD=function(t){ta(a,t);function a(e){var n=t.call(this,e)||this;n.renderOptions=function(){var d=n.props.year,p=n.state.yearsList.map(function(b){return i.createElement("div",{className:d===b?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:b,onClick:n.onChange.bind(n,b),"aria-selected":d===b?"true":void 0},d===b?i.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",b)}),h=n.props.minDate?vt(n.props.minDate):null,m=n.props.maxDate?vt(n.props.maxDate):null;return(!m||!n.state.yearsList.find(function(b){return b===m}))&&p.unshift(i.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},i.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!h||!n.state.yearsList.find(function(b){return b===h}))&&p.push(i.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},i.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),p},n.onChange=function(d){n.props.onChange(d)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(d){var p=n.state.yearsList.map(function(h){return h+d});n.setState({yearsList:p})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var s=e.yearDropdownItemNumber,l=e.scrollableYearDropdown,c=s||(l?10:5);return n.state={yearsList:LD(n.props.year,c,n.props.minDate,n.props.maxDate)},n.dropdownRef=v.createRef(),n}return a.prototype.componentDidMount=function(){var e=this.dropdownRef.current;if(e){var n=e.children?Array.from(e.children):null,s=n?n.find(function(l){return l.ariaSelected}):null;e.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-e.clientHeight)/2:(e.scrollHeight-e.clientHeight)/2}},a.prototype.render=function(){var e=ca({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return i.createElement(wp,{className:e,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},a}(v.Component),BD=function(t){ta(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.state={dropdownVisible:!1},e.renderSelectOptions=function(){for(var n=e.props.minDate?vt(e.props.minDate):1900,s=e.props.maxDate?vt(e.props.maxDate):2100,l=[],c=n;c<=s;c++)l.push(i.createElement("option",{key:c,value:c},c));return l},e.onSelectChange=function(n){e.onChange(parseInt(n.target.value))},e.renderSelectMode=function(){return i.createElement("select",{value:e.props.year,className:"react-datepicker__year-select",onChange:e.onSelectChange},e.renderSelectOptions())},e.renderReadView=function(n){return i.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(s){return e.toggleDropdown(s)}},i.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),i.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},e.props.year))},e.renderDropdown=function(){return i.createElement(PD,Mt({key:"dropdown"},e.props,{onChange:e.onChange,onCancel:e.toggleDropdown}))},e.renderScrollMode=function(){var n=e.state.dropdownVisible,s=[e.renderReadView(!n)];return n&&s.unshift(e.renderDropdown()),s},e.onChange=function(n){e.toggleDropdown(),n!==e.props.year&&e.props.onChange(n)},e.toggleDropdown=function(n){e.setState({dropdownVisible:!e.state.dropdownVisible},function(){e.props.adjustDateOnChange&&e.handleYearChange(e.props.date,n)})},e.handleYearChange=function(n,s){var l;(l=e.onSelect)===null||l===void 0||l.call(e,n,s),e.setOpen()},e.onSelect=function(n,s){var l,c;(c=(l=e.props).onSelect)===null||c===void 0||c.call(l,n,s)},e.setOpen=function(){var n,s;(s=(n=e.props).setOpen)===null||s===void 0||s.call(n,!0)},e}return a.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode();break}return i.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},e)},a}(v.Component),OD=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],zD=function(t){var a=(t.className||"").split(/\s+/);return OD.some(function(e){return a.indexOf(e)>=0})},UD=function(t){ta(a,t);function a(e){var n=t.call(this,e)||this;return n.monthContainer=void 0,n.handleClickOutside=function(s){n.props.onClickOutside(s)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(s){var l,c;zD(s.target)&&((c=(l=n.props).onDropdownFocus)===null||c===void 0||c.call(l,s))},n.getDateInView=function(){var s=n.props,l=s.preSelection,c=s.selected,d=s.openToDate,p=kw(n.props),h=Aw(n.props),m=Ot(),b=d||c||l;return b||(p&&go(m,p)?p:h&&Us(m,h)?h:m)},n.increaseMonth=function(){n.setState(function(s){var l=s.date;return{date:Tr(l,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(s){var l=s.date;return{date:fo(l,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(s,l,c){n.props.onSelect(s,l,c),n.props.setPreSelection&&n.props.setPreSelection(s)},n.handleDayMouseEnter=function(s){n.setState({selectingDate:s}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(s)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(s,l){n.setState({selectingDate:Zr(Ot(),l)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(s,l)},n.handleYearMouseLeave=function(s,l){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(s,l)},n.handleYearChange=function(s){var l,c,d,p;(c=(l=n.props).onYearChange)===null||c===void 0||c.call(l,s),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(s),(p=(d=n.props).setOpen)===null||p===void 0||p.call(d,!0)),n.props.setPreSelection&&n.props.setPreSelection(s)},n.getEnabledPreSelectionDateForMonth=function(s){if(!mr(s,n.props))return s;for(var l=Ps(s),c=iD(s),d=Kx(c,l),p=null,h=0;h<=d;h++){var m=Mr(l,h);if(!mr(m,n.props)){p=m;break}}return p},n.handleMonthChange=function(s){var l,c,d,p=(l=n.getEnabledPreSelectionDateForMonth(s))!==null&&l!==void 0?l:s;n.handleCustomMonthChange(p),n.props.adjustDateOnChange&&(n.props.onSelect(p),(d=(c=n.props).setOpen)===null||d===void 0||d.call(c,!0)),n.props.setPreSelection&&n.props.setPreSelection(p)},n.handleCustomMonthChange=function(s){var l,c;(c=(l=n.props).onMonthChange)===null||c===void 0||c.call(l,s),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(s){n.handleYearChange(s),n.handleMonthChange(s)},n.changeYear=function(s){n.setState(function(l){var c=l.date;return{date:Zr(c,Number(s))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(s){n.setState(function(l){var c=l.date;return{date:pr(c,Number(s))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(s){n.setState(function(l){var c=l.date;return{date:Zr(pr(c,ga(s)),vt(s))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(s){s===void 0&&(s=n.state.date);var l=ki(s,n.props.locale,n.props.calendarStartDay),c=[];return n.props.showWeekNumbers&&c.push(i.createElement("div",{key:"W",className:"react-datepicker__day-name"},n.props.weekLabel||"#")),c.concat([0,1,2,3,4,5,6].map(function(d){var p=Mr(l,d),h=n.formatWeekday(p,n.props.locale),m=n.props.weekDayClassName?n.props.weekDayClassName(p):void 0;return i.createElement("div",{key:d,"aria-label":fn(p,"EEEE",n.props.locale),className:ca("react-datepicker__day-name",m)},h)}))},n.formatWeekday=function(s,l){return n.props.formatWeekDay?oD(s,n.props.formatWeekDay,l):n.props.useWeekdaysShort?cD(s,l):lD(s,l)},n.decreaseYear=function(){n.setState(function(s){var l,c=s.date;return{date:fl(c,n.props.showYearPicker?(l=n.props.yearItemNumber)!==null&&l!==void 0?l:a.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var s,l,c;if(!n.props.renderCustomHeader){var d=(s=n.props.monthsShown)!==null&&s!==void 0?s:a.defaultProps.monthsShown,p=n.props.showPreviousMonths?d-1:0,h=(l=n.props.monthSelectedIn)!==null&&l!==void 0?l:p,m=fo(n.state.date,h),b;switch(!0){case n.props.showMonthYearPicker:b=r2(n.state.date,n.props);break;case n.props.showYearPicker:b=mD(n.state.date,n.props);break;case n.props.showQuarterYearPicker:b=fD(n.state.date,n.props);break;default:b=n2(m,n.props);break}if(!(!((c=n.props.forceShowMonthNavigation)!==null&&c!==void 0?c:a.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&b||n.props.showTimeSelectOnly)){var x=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],E=["react-datepicker__navigation","react-datepicker__navigation--previous"],w=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(w=n.decreaseYear),b&&n.props.showDisabledMonthNavigation&&(E.push("react-datepicker__navigation--previous--disabled"),w=void 0);var S=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,_=n.props,C=_.previousMonthButtonLabel,D=C===void 0?a.defaultProps.previousMonthButtonLabel:C,I=_.previousYearButtonLabel,A=I===void 0?a.defaultProps.previousYearButtonLabel:I,T=n.props,F=T.previousMonthAriaLabel,J=F===void 0?typeof D=="string"?D:"Previous Month":F,H=T.previousYearAriaLabel,Z=H===void 0?typeof A=="string"?A:"Previous Year":H;return i.createElement("button",{type:"button",className:E.join(" "),onClick:w,onKeyDown:n.props.handleOnKeyDown,"aria-label":S?Z:J},i.createElement("span",{className:x.join(" ")},S?A:D))}}},n.increaseYear=function(){n.setState(function(s){var l,c=s.date;return{date:Ts(c,n.props.showYearPicker?(l=n.props.yearItemNumber)!==null&&l!==void 0?l:a.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var s;if(!n.props.renderCustomHeader){var l;switch(!0){case n.props.showMonthYearPicker:l=s2(n.state.date,n.props);break;case n.props.showYearPicker:l=hD(n.state.date,n.props);break;case n.props.showQuarterYearPicker:l=pD(n.state.date,n.props);break;default:l=a2(n.state.date,n.props);break}if(!(!((s=n.props.forceShowMonthNavigation)!==null&&s!==void 0?s:a.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&l||n.props.showTimeSelectOnly)){var c=["react-datepicker__navigation","react-datepicker__navigation--next"],d=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&c.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&c.push("react-datepicker__navigation--next--with-today-button");var p=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(p=n.increaseYear),l&&n.props.showDisabledMonthNavigation&&(c.push("react-datepicker__navigation--next--disabled"),p=void 0);var h=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,m=n.props,b=m.nextMonthButtonLabel,x=b===void 0?a.defaultProps.nextMonthButtonLabel:b,E=m.nextYearButtonLabel,w=E===void 0?a.defaultProps.nextYearButtonLabel:E,S=n.props,_=S.nextMonthAriaLabel,C=_===void 0?typeof x=="string"?x:"Next Month":_,D=S.nextYearAriaLabel,I=D===void 0?typeof w=="string"?w:"Next Year":D;return i.createElement("button",{type:"button",className:c.join(" "),onClick:p,onKeyDown:n.props.handleOnKeyDown,"aria-label":h?I:C},i.createElement("span",{className:d.join(" ")},h?w:x))}}},n.renderCurrentMonth=function(s){s===void 0&&(s=n.state.date);var l=["react-datepicker__current-month"];return n.props.showYearDropdown&&l.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&l.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&l.push("react-datepicker__current-month--hasMonthYearDropdown"),i.createElement("h2",{className:l.join(" ")},fn(s,n.props.dateFormat,n.props.locale))},n.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showYearDropdown||s))return i.createElement(BD,Mt({},a.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:vt(n.state.date)}))},n.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthDropdown||s))return i.createElement(kD,Mt({},a.defaultProps,n.props,{month:ga(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthYearDropdown||s))return i.createElement(TD,Mt({},a.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(s){n.props.onSelect(Xv(),s),n.props.setPreSelection&&n.props.setPreSelection(Xv())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return i.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDefaultHeader=function(s){var l=s.monthDate,c=s.i;return i.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(l),i.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(c!==0),n.renderMonthYearDropdown(c!==0),n.renderYearDropdown(c!==0)),i.createElement("div",{className:"react-datepicker__day-names"},n.header(l)))},n.renderCustomHeader=function(s){var l,c,d=s.monthDate,p=s.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var h=n2(n.state.date,n.props),m=a2(n.state.date,n.props),b=r2(n.state.date,n.props),x=s2(n.state.date,n.props),E=!n.props.showMonthYearPicker&&!n.props.showQuarterYearPicker&&!n.props.showYearPicker;return i.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(c=(l=n.props).renderCustomHeader)===null||c===void 0?void 0:c.call(l,Mt(Mt({},n.state),{customHeaderCount:p,monthDate:d,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:h,nextMonthButtonDisabled:m,prevYearButtonDisabled:b,nextYearButtonDisabled:x})),E&&i.createElement("div",{className:"react-datepicker__day-names"},n.header(d)))},n.renderYearHeader=function(s){var l=s.monthDate,c=n.props,d=c.showYearPicker,p=c.yearItemNumber,h=p===void 0?a.defaultProps.yearItemNumber:p,m=Ii(l,h),b=m.startPeriod,x=m.endPeriod;return i.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},d?"".concat(b," - ").concat(x):vt(l))},n.renderHeader=function(s){var l=s.monthDate,c=s.i,d=c===void 0?0:c,p={monthDate:l,i:d};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(p);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(p);default:return n.renderDefaultHeader(p)}},n.renderMonths=function(){var s,l;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var c=[],d=(s=n.props.monthsShown)!==null&&s!==void 0?s:a.defaultProps.monthsShown,p=n.props.showPreviousMonths?d-1:0,h=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Ts(n.state.date,p):fo(n.state.date,p),m=(l=n.props.monthSelectedIn)!==null&&l!==void 0?l:p,b=0;b<d;++b){var x=b-m+p,E=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Ts(h,x):Tr(h,x),w="month-".concat(b),S=b<d-1,_=b>0;c.push(i.createElement("div",{key:w,ref:function(C){n.monthContainer=C??void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:E,i:b}),i.createElement(ID,Mt({},a.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:E,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:b,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:S,monthShowsDuplicateDaysStart:_}))))}return c}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return i.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),i.createElement(RD,Mt({},a.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return i.createElement(ND,Mt({},a.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var s=n.props.selected?new Date(n.props.selected):void 0,l=s&&Ep(s)&&!!n.props.selected,c=l?"".concat(o2(s.getHours()),":").concat(o2(s.getMinutes())):"";if(n.props.showTimeInput)return i.createElement(wD,Mt({},a.defaultProps,n.props,{date:s,timeString:c,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var s,l=Ii(n.state.date,(s=n.props.yearItemNumber)!==null&&s!==void 0?s:a.defaultProps.yearItemNumber),c=l.startPeriod,d=l.endPeriod,p;return n.props.showYearPicker?p="".concat(c," - ").concat(d):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?p=vt(n.state.date):p="".concat(k0(ga(n.state.date),n.props.locale)," ").concat(vt(n.state.date)),i.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&p)},n.renderChildren=function(){if(n.props.children)return i.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=v.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(a,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:hu}},enumerable:!1,configurable:!0}),a.prototype.componentDidMount=function(){var e=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){e.setState({monthContainer:e.monthContainer})}())},a.prototype.componentDidUpdate=function(e){var n=this;if(this.props.preSelection&&(!At(this.props.preSelection,e.preSelection)||this.props.monthSelectedIn!==e.monthSelectedIn)){var s=!Sa(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!At(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate})},a.prototype.render=function(){var e=this.props.container||JI;return i.createElement(wp,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},i.createElement("div",{style:{display:"contents"},ref:this.containerRef},i.createElement(e,{className:ca("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},a}(v.Component),FD=function(t){var a=t.icon,e=t.className,n=e===void 0?"":e,s=t.onClick,l="react-datepicker__calendar-icon";if(typeof a=="string")return i.createElement("i",{className:"".concat(l," ").concat(a," ").concat(n),"aria-hidden":"true",onClick:s});if(i.isValidElement(a)){var c=a;return i.cloneElement(c,{className:"".concat(c.props.className||""," ").concat(l," ").concat(n),onClick:function(d){typeof c.props.onClick=="function"&&c.props.onClick(d),typeof s=="function"&&s(d)}})}return i.createElement("svg",{className:"".concat(l," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},i.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},Tw=function(t){ta(a,t);function a(e){var n=t.call(this,e)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return a.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},a.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},a.prototype.render=function(){return du.createPortal(this.props.children,this.el)},a}(v.Component),WD="[tabindex], a, button, input, select, textarea",jD=function(t){return(t instanceof HTMLAnchorElement||!t.disabled)&&t.tabIndex!==-1},Nw=function(t){ta(a,t);function a(e){var n=t.call(this,e)||this;return n.getTabChildren=function(){var s;return Array.prototype.slice.call((s=n.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(WD),1,-1).filter(jD)},n.handleFocusStart=function(){var s=n.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},n.handleFocusEnd=function(){var s=n.getTabChildren();s&&s.length>1&&s[0].focus()},n.tabLoopRef=v.createRef(),n}return a.prototype.render=function(){var e;return((e=this.props.enableTabLoop)!==null&&e!==void 0?e:a.defaultProps.enableTabLoop)?i.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},i.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,i.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},a.defaultProps={enableTabLoop:!0},a}(v.Component);function HD(t){var a=function(e){var n,s=typeof e.hidePopper=="boolean"?e.hidePopper:!0,l=v.useRef(null),c=KI(Mt({open:!s,whileElementsMounted:NI,placement:e.popperPlacement,middleware:Xr([UI({padding:15}),zI(10),FI({element:l})],(n=e.popperModifiers)!==null&&n!==void 0?n:[],!0)},e.popperProps)),d=Mt(Mt({},e),{hidePopper:s,popperProps:Mt(Mt({},c),{arrowRef:l})});return i.createElement(t,Mt({},d))};return a}var YD=function(t){ta(a,t);function a(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(a,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),a.prototype.render=function(){var e=this.props,n=e.className,s=e.wrapperClassName,l=e.hidePopper,c=l===void 0?a.defaultProps.hidePopper:l,d=e.popperComponent,p=e.targetComponent,h=e.enableTabLoop,m=e.popperOnKeyDown,b=e.portalId,x=e.portalHost,E=e.popperProps,w=e.showArrow,S=void 0;if(!c){var _=ca("react-datepicker-popper",n);S=i.createElement(Nw,{enableTabLoop:h},i.createElement("div",{ref:E.refs.setFloating,style:E.floatingStyles,className:_,"data-placement":E.placement,onKeyDown:m},d,w&&i.createElement(GI,{ref:E.arrowRef,context:E.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(S=v.createElement(this.props.popperContainer,{},S)),b&&!c&&(S=i.createElement(Tw,{portalId:b,portalHost:x},S));var C=ca("react-datepicker-wrapper",s);return i.createElement(i.Fragment,null,i.createElement("div",{ref:E.refs.setReference,className:C},p),S)},a}(v.Component),GD=HD(YD),p2="react-datepicker-ignore-onclickoutside";function $D(t,a){return t&&a?ga(t)!==ga(a)||vt(t)!==vt(a):t!==a}var qh="Date input not valid.",Rw=function(t){ta(a,t);function a(e){var n=t.call(this,e)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:Ot()},n.modifyHolidays=function(){var s;return(s=n.props.holidays)===null||s===void 0?void 0:s.reduce(function(l,c){var d=new Date(c.date);return Ep(d)?Xr(Xr([],l,!0),[Mt(Mt({},c),{date:d})],!1):l},[])},n.calcInitialState=function(){var s,l=n.getPreSelection(),c=kw(n.props),d=Aw(n.props),p=c&&go(l,nf(c))?c:d&&Us(l,Kv(d))?d:l;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=n.props.selectsRange?n.props.startDate:n.props.selected)!==null&&s!==void 0?s:p,highlightDates:i2(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.resetHiddenStatus=function(){n.setState(Mt(Mt({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(Mt(Mt({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var s,l;(l=(s=n.input)===null||s===void 0?void 0:s.focus)===null||l===void 0||l.call(s,{preventScroll:!0})},n.setBlur=function(){var s,l;(l=(s=n.input)===null||s===void 0?void 0:s.blur)===null||l===void 0||l.call(s),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(s,l){l===void 0&&(l=!1),n.setState({open:s,preSelection:s&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:Qh},function(){s||n.setState(function(c){return{focused:l?c.focused:!1}},function(){!l&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return Ns(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(s){var l,c,d=n.state.wasHidden,p=d?n.state.open:!0;d&&n.resetHiddenStatus(),n.state.preventFocus||((c=(l=n.props).onFocus)===null||c===void 0||c.call(l,s),p&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.handleBlur=function(s){var l,c;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((c=(l=n.props).onBlur)===null||c===void 0||c.call(l,s)),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(s){var l,c;n.props.inline||n.setOpen(!1),(c=(l=n.props).onClickOutside)===null||c===void 0||c.call(l,s),n.props.withPortal&&s.preventDefault()},n.handleChange=function(){for(var s,l,c,d,p,h=[],m=0;m<arguments.length;m++)h[m]=arguments[m];var b=h[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,h),!b||typeof b.isDefaultPrevented!="function"||b.isDefaultPrevented()))){n.setState({inputValue:(b==null?void 0:b.target)instanceof HTMLInputElement?b.target.value:null,lastPreSelectChange:ZD});var x=n.props,E=x.selectsRange,w=x.startDate,S=x.endDate,_=(s=n.props.dateFormat)!==null&&s!==void 0?s:a.defaultProps.dateFormat,C=(l=n.props.strictParsing)!==null&&l!==void 0?l:a.defaultProps.strictParsing,D=(b==null?void 0:b.target)instanceof HTMLInputElement?b.target.value:"";if(E){var I=D.split(_.includes("-")?_w:"-",2).map(function(X){return X.trim()}),A=I[0],T=I[1],F=Gh(A??"",_,n.props.locale,C),J=Gh(T??"",_,n.props.locale,C),H=(w==null?void 0:w.getTime())!==(F==null?void 0:F.getTime()),Z=(S==null?void 0:S.getTime())!==(J==null?void 0:J.getTime());if(!H&&!Z||F&&mr(F,n.props)||J&&mr(J,n.props))return;(d=(c=n.props).onChange)===null||d===void 0||d.call(c,[F,J],b)}else{var K=Gh(D,_,n.props.locale,C,(p=n.props.selected)!==null&&p!==void 0?p:void 0);(K||!D)&&n.setSelected(K,b,!0)}}},n.handleSelect=function(s,l,c){if(!n.props.readOnly){if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&n.sendFocusBackToInput(),n.props.onChangeRaw&&n.props.onChangeRaw(l),n.setSelected(s,l,!1,c),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect)n.setPreSelection(s);else if(!n.props.inline){n.props.selectsRange||n.setOpen(!1);var d=n.props,p=d.startDate,h=d.endDate;p&&!h&&(n.props.swapRange||!u2(s,p))&&n.setOpen(!1)}}},n.setSelected=function(s,l,c,d){var p,h,m=s;if(n.props.showYearPicker){if(m!==null&&af(vt(m),n.props))return}else if(n.props.showMonthYearPicker){if(m!==null&&Dw(m,n.props))return}else if(m!==null&&mr(m,n.props))return;var b=n.props,x=b.onChange,E=b.selectsRange,w=b.startDate,S=b.endDate,_=b.selectsMultiple,C=b.selectedDates,D=b.minTime,I=b.swapRange;if(!oo(n.props.selected,m)||n.props.allowSameDay||E||_)if(m!==null&&(n.props.selected&&(!c||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(m=$h(m,{hour:Rs(n.props.selected),minute:Ls(n.props.selected),second:Di(n.props.selected)})),!c&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&D&&(m=$h(m,{hour:D.getHours(),minute:D.getMinutes(),second:D.getSeconds()})),n.props.inline||n.setState({preSelection:m}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:d})),E){var A=!w&&!S,T=w&&!S,F=w&&S;A?x==null||x([m,null],l):T&&(m===null?x==null||x([null,null],l):u2(m,w)?I?x==null||x([m,w],l):x==null||x([m,null],l):x==null||x([w,m],l)),F&&(x==null||x([m,null],l))}else if(_){if(m!==null)if(!(C!=null&&C.length))x==null||x([m],l);else{var J=C.some(function(Z){return At(Z,m)});if(J){var H=C.filter(function(Z){return!At(Z,m)});x==null||x(H,l)}else x==null||x(Xr(Xr([],C,!0),[m],!1),l)}}else x==null||x(m,l);c||((h=(p=n.props).onSelect)===null||h===void 0||h.call(p,m,l),n.setState({inputValue:null}))},n.setPreSelection=function(s){if(!n.props.readOnly){var l=Ns(n.props.minDate),c=Ns(n.props.maxDate),d=!0;if(s){var p=nf(s);if(l&&c)d=Fc(s,n.props.minDate,n.props.maxDate);else if(l){var h=nf(n.props.minDate);d=Us(s,h)||oo(p,h)}else if(c){var m=Kv(n.props.maxDate);d=go(s,m)||oo(p,m)}}d&&n.setState({preSelection:s})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(s){var l,c;if(!(n.props.selectsRange||n.props.selectsMultiple)){var d=n.props.selected?n.props.selected:n.getPreSelection(),p=n.props.selected?s:$h(d,{hour:Rs(s),minute:Ls(s)});n.setState({preSelection:p}),(c=(l=n.props).onChange)===null||c===void 0||c.call(l,p),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var s,l;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(l=(s=n.props).onInputClick)===null||l===void 0||l.call(s)},n.onInputKeyDown=function(s){var l,c,d,p,h,m;(c=(l=n.props).onKeyDown)===null||c===void 0||c.call(l,s);var b=s.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(b===Me.ArrowDown||b===Me.ArrowUp||b===Me.Enter)&&((d=n.onInputClick)===null||d===void 0||d.call(n));return}if(n.state.open){if(b===Me.ArrowDown||b===Me.ArrowUp){s.preventDefault();var x=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',E=((p=n.calendar)===null||p===void 0?void 0:p.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(x);E instanceof HTMLElement&&E.focus({preventScroll:!0});return}var w=Ot(n.state.preSelection);b===Me.Enter?(s.preventDefault(),s.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===Qh?(n.handleSelect(w,s),!n.props.shouldCloseOnSelect&&n.setPreSelection(w)):n.setOpen(!1)):b===Me.Escape?(s.preventDefault(),s.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):b===Me.Tab&&n.setOpen(!1),n.inputOk()||(m=(h=n.props).onInputError)===null||m===void 0||m.call(h,{code:1,msg:qh})}},n.onPortalKeyDown=function(s){var l=s.key;l===Me.Escape&&(s.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(s){var l,c,d,p,h,m,b=n.props,x=b.minDate,E=b.maxDate,w=b.disabledKeyboardNavigation,S=b.showWeekPicker,_=b.shouldCloseOnSelect,C=b.locale,D=b.calendarStartDay,I=b.adjustDateOnChange,A=b.inline;if((c=(l=n.props).onKeyDown)===null||c===void 0||c.call(l,s),!w){var T=s.key,F=s.shiftKey,J=Ot(n.state.preSelection),H=function(U,M){var z=M;switch(U){case Me.ArrowRight:z=S?mf(M,1):Mr(M,1);break;case Me.ArrowLeft:z=S?Uv(M):N4(M);break;case Me.ArrowUp:z=Uv(M);break;case Me.ArrowDown:z=mf(M,1);break;case Me.PageUp:z=F?fl(M,1):fo(M,1);break;case Me.PageDown:z=F?Ts(M,1):Tr(M,1);break;case Me.Home:z=ki(M,C,D);break;case Me.End:z=sD(M);break}return z},Z=function(U,M){for(var z=40,G=U,q=!1,R=0,j=H(U,M);!q;){if(R>=z){j=M;break}x&&j<x&&(G=Me.ArrowRight,j=mr(x,n.props)?H(G,j):x),E&&j>E&&(G=Me.ArrowLeft,j=mr(E,n.props)?H(G,j):E),mr(j,n.props)?((G===Me.PageUp||G===Me.Home)&&(G=Me.ArrowRight),(G===Me.PageDown||G===Me.End)&&(G=Me.ArrowLeft),j=H(G,j)):q=!0,R++}return j};if(T===Me.Enter){s.preventDefault(),n.handleSelect(J,s),!_&&n.setPreSelection(J);return}else if(T===Me.Escape){s.preventDefault(),n.setOpen(!1),n.inputOk()||(p=(d=n.props).onInputError)===null||p===void 0||p.call(d,{code:1,msg:qh});return}var K=null;switch(T){case Me.ArrowLeft:case Me.ArrowRight:case Me.ArrowUp:case Me.ArrowDown:case Me.PageUp:case Me.PageDown:case Me.Home:case Me.End:K=Z(T,J);break}if(!K){(m=(h=n.props).onInputError)===null||m===void 0||m.call(h,{code:1,msg:qh});return}if(s.preventDefault(),n.setState({lastPreSelectChange:Qh}),I&&n.setSelected(K),n.setPreSelection(K),A){var X=ga(J),W=ga(K),O=vt(J),B=vt(K);X!==W||O!==B?n.setState({shouldFocusDayInline:!0}):n.setState({shouldFocusDayInline:!1})}}},n.onPopperKeyDown=function(s){var l=s.key;l===Me.Escape&&(s.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),n.sendFocusBackToInput();var l=n.props,c=l.selectsRange,d=l.onChange;c?d==null||d([null,null],s):d==null||d(null,s),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(s){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(s)&&n.setOpen(!1)},n.renderCalendar=function(){var s,l;return!n.props.inline&&!n.isCalendarOpen()?null:i.createElement(UD,Mt({showMonthYearDropdown:void 0,ref:function(c){n.calendar=c}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(s=n.props.dateFormatCalendar)!==null&&s!==void 0?s:a.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:yD(n.modifyHolidays()),outsideClickIgnoreClass:p2,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(l=n.props.dropdownMode)!==null&&l!==void 0?l:a.defaultProps.dropdownMode}),n.props.children)},n.renderAriaLiveRegion=function(){var s=n.props,l=s.dateFormat,c=l===void 0?a.defaultProps.dateFormat:l,d=s.locale,p=n.props.showTimeInput||n.props.showTimeSelect,h=p?"PPPPp":"PPPP",m;return n.props.selectsRange?m="Selected start date: ".concat(fr(n.props.startDate,{dateFormat:h,locale:d}),". ").concat(n.props.endDate?"End date: "+fr(n.props.endDate,{dateFormat:h,locale:d}):""):n.props.showTimeSelectOnly?m="Selected time: ".concat(fr(n.props.selected,{dateFormat:c,locale:d})):n.props.showYearPicker?m="Selected year: ".concat(fr(n.props.selected,{dateFormat:"yyyy",locale:d})):n.props.showMonthYearPicker?m="Selected month: ".concat(fr(n.props.selected,{dateFormat:"MMMM yyyy",locale:d})):n.props.showQuarterYearPicker?m="Selected quarter: ".concat(fr(n.props.selected,{dateFormat:"yyyy, QQQ",locale:d})):m="Selected date: ".concat(fr(n.props.selected,{dateFormat:h,locale:d})),i.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},m)},n.renderDateInput=function(){var s,l,c,d=ca(n.props.className,(s={},s[p2]=n.state.open,s)),p=n.props.customInput||i.createElement("input",{type:"text"}),h=n.props.customInputRef||"ref",m=n.props,b=m.dateFormat,x=b===void 0?a.defaultProps.dateFormat:b,E=m.locale,w=typeof n.props.value=="string"?n.props.value:typeof n.state.inputValue=="string"?n.state.inputValue:n.props.selectsRange?tD(n.props.startDate,n.props.endDate,{dateFormat:x,locale:E}):n.props.selectsMultiple?nD((c=n.props.selectedDates)!==null&&c!==void 0?c:[],{dateFormat:x,locale:E}):fr(n.props.selected,{dateFormat:x,locale:E});return v.cloneElement(p,(l={},l[h]=function(S){n.input=S},l.value=w,l.onBlur=n.handleBlur,l.onChange=n.handleChange,l.onClick=n.onInputClick,l.onFocus=n.handleFocus,l.onKeyDown=n.onInputKeyDown,l.id=n.props.id,l.name=n.props.name,l.form=n.props.form,l.autoFocus=n.props.autoFocus,l.placeholder=n.props.placeholderText,l.disabled=n.props.disabled,l.autoComplete=n.props.autoComplete,l.className=ca(p.props.className,d),l.title=n.props.title,l.readOnly=n.props.readOnly,l.required=n.props.required,l.tabIndex=n.props.tabIndex,l["aria-describedby"]=n.props.ariaDescribedBy,l["aria-invalid"]=n.props.ariaInvalid,l["aria-labelledby"]=n.props.ariaLabelledBy,l["aria-required"]=n.props.ariaRequired,l))},n.renderClearButton=function(){var s=n.props,l=s.isClearable,c=s.disabled,d=s.selected,p=s.startDate,h=s.endDate,m=s.clearButtonTitle,b=s.clearButtonClassName,x=b===void 0?"":b,E=s.ariaLabelClose,w=E===void 0?"Close":E,S=s.selectedDates,_=s.readOnly;return l&&!_&&(d!=null||p!=null||h!=null||S!=null&&S.length)?i.createElement("button",{type:"button",className:ca("react-datepicker__close-icon",x,{"react-datepicker__close-icon--disabled":c}),disabled:c,"aria-label":w,onClick:n.onClearClick,title:m,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(a,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:hu,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),a.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},a.prototype.componentDidUpdate=function(e,n){var s,l,c,d;e.inline&&$D(e.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:i2(this.props.highlightDates)}),!n.focused&&!oo(e.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((l=(s=this.props).onCalendarOpen)===null||l===void 0||l.call(s)),n.open===!0&&this.state.open===!1&&((d=(c=this.props).onCalendarClose)===null||d===void 0||d.call(c)))},a.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},a.prototype.renderInputContainer=function(){var e=this.props,n=e.showIcon,s=e.icon,l=e.calendarIconClassname,c=e.calendarIconClassName,d=e.toggleCalendarOnIconClick,p=this.state.open;return l&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),i.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&i.createElement(FD,Mt({icon:s,className:ca(c,!c&&l,p&&"react-datepicker-ignore-onclickoutside")},d?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},a.prototype.render=function(){var e=this.renderCalendar();if(this.props.inline)return e;if(this.props.withPortal){var n=this.state.open?i.createElement(Nw,{enableTabLoop:this.props.enableTabLoop},i.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},e)):null;return this.state.open&&this.props.portalId&&(n=i.createElement(Tw,Mt({portalId:this.props.portalId},this.props),n)),i.createElement("div",null,this.renderInputContainer(),n)}return i.createElement(GD,Mt({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:e,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},a}(v.Component),ZD="input",Qh="navigate";function m2(t){if(!t||typeof t!="string"||!t.match(/\d/))return{h:0,m:0};const[a,e]=t.trim().split(/\s+/);let[n,s]=a.split(":").map(Number);return e&&e.toLowerCase()==="pm"&&n!==12&&(n+=12),e&&e.toLowerCase()==="am"&&n===12&&(n=0),{h:n,m:s}}function M0(t,a,e=30){const n=m2(t),s=m2(a),l=[];let c=new Date(0,0,0,n.h,n.m);const d=new Date(0,0,0,s.h,s.m);for(;c<=d;){const p=c.getHours(),h=c.getMinutes();let m=(p%12||12)+":"+(h<10?"0":"")+h+(p<12?" AM":" PM");l.push(m),c=new Date(c.getTime()+e*6e4)}return l}function qD(t){const a={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6},e=new Date,n=e.getDay();let l=(a[t]-n+7)%7;l===0&&(l=7);const c=new Date(e);return c.setDate(e.getDate()+l),c}function Lw({proposal:t,open:a,onClose:e,onSubmit:n,senderPlayer:s,phase:l,selectedDivision:c}){var G;const[d,p]=v.useState(new Date),[h,m]=v.useState(""),[b,x]=v.useState(""),[E,w]=v.useState(""),[S,_]=v.useState(""),[C,D]=v.useState(""),[I,A]=v.useState(""),[T,F]=v.useState("");v.useEffect(()=>{if(t&&a){if(t.date){const[q,R,j]=t.date.split("-");p(new Date(parseInt(q),parseInt(R)-1,parseInt(j)))}m(""),x(""),w(t.location||""),_(t.gameType||"8 Ball"),D(t.raceLength||(l==="scheduled"||l==="challenge"?5:7)),A("")}},[t,a,l]),["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][d.getDay()];const Z=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][d.getDay()],K=((G=s==null?void 0:s.availability)==null?void 0:G[Z])||[],X=["6:00 PM - 8:00 PM","8:00 PM - 10:00 PM","10:00 PM - 12:00 AM"],W=K.length>0?K:X,O=s!=null&&s.locations?s.locations.split(/\r?\n/).map(q=>q.trim()).filter(Boolean):[],B=v.useMemo(()=>{if(!h)return[];const q=h.replace(/[–—−]/g,"-").replace(/\s*-\s*/g," - ").trim();if(!q.includes(" - "))return[];let[R,j]=q.split(" - ").map(ne=>U(ne.trim()));return!R||!j?[]:M0(R,j,30)},[h]);function U(q){let R=q.trim();R=R.replace(/(\d{1,2}):(\d{2})\s*(am|pm)/i,(ne,ae,se,V)=>`${parseInt(ae,10)}:${se} ${V.toUpperCase()}`),R=R.replace(/^(\d{1,2})(\d{2})(am|pm)$/i,(ne,ae,se,V)=>`${parseInt(ae,10)}:${se} ${V.toUpperCase()}`),R=R.replace(/^(\d{1,2})(am|pm)$/i,(ne,ae,se)=>`${parseInt(ae,10)}:00 ${se.toUpperCase()}`),R=R.replace(/(am|pm)$/i," $1"),R=R.replace(/(am|pm)$/i,ne=>ne.toUpperCase());const j=R.match(/^(\d{1,2}):(\d{2}) (AM|PM)$/i);if(j){const ne=j[1],ae=j[2],se=j[3].toUpperCase();return`${ne}:${ae} ${se}`}return R}function M(q){if(!q)return"";const R=new Date(q),j=String(R.getMonth()+1).padStart(2,"0"),ne=String(R.getDate()).padStart(2,"0"),ae=R.getFullYear();return`${j}-${ne}-${ae}`}const z=q=>{if(q.preventDefault(),!d||!b||!E){F("Please fill in all required fields.");return}F(""),n({date:M(d),time:b,location:E,gameType:S,raceLength:C,note:I})};return!a||!t?null:i.createElement(Rn,{open:a,onClose:e,title:"🔄 Counter Proposal",maxWidth:"500px"},i.createElement("form",{onSubmit:z,style:{textAlign:"left"}},i.createElement("div",{style:{fontWeight:"bold",fontSize:"1.15rem",margin:"0 0 1rem 0",color:"#fff",textAlign:"center"}},"To: ",t.senderName||"Opponent"),i.createElement("div",{style:{marginBottom:"1rem"}},i.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Date:"),i.createElement(Rw,{selected:d,onChange:q=>p(q),dateFormat:"MM-dd-yyyy",className:"counter-proposal-date-input",required:!0})),i.createElement("div",{style:{marginBottom:"1rem"}},i.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Time Block:"),i.createElement("select",{value:h,onChange:q=>{m(q.target.value),x("")},required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},i.createElement("option",{value:""},"Select time block"),W.map((q,R)=>i.createElement("option",{key:R,value:q},q)))),i.createElement("div",{style:{marginBottom:"1rem"}},i.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Start Time:"),i.createElement("select",{value:b,onChange:q=>x(q.target.value),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},i.createElement("option",{value:""},"Select..."),B.map((q,R)=>i.createElement("option",{key:R,value:q},q)))),i.createElement("div",{style:{marginBottom:"1rem"}},i.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Location:"),i.createElement("select",{value:E,onChange:q=>w(q.target.value),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},i.createElement("option",{value:""},"Select location"),O.map((q,R)=>i.createElement("option",{key:R,value:q},q)))),i.createElement("div",{style:{marginBottom:"1rem"}},i.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Game Type:"),i.createElement("select",{value:S,onChange:q=>_(q.target.value),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},i.createElement("option",{value:"8 Ball"},"8 Ball"),i.createElement("option",{value:"9 Ball"},"9 Ball"),i.createElement("option",{value:"10 Ball"},"10 Ball"),i.createElement("option",{value:"Mixed"},"Mixed"))),i.createElement("div",{style:{marginBottom:"1rem"}},i.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Race Length:"),i.createElement("select",{value:C,onChange:q=>D(Number(q.target.value)),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},l==="scheduled"||l==="challenge"?i.createElement("option",{value:5},"5"):[...Array(13)].map((q,R)=>{const j=R+3;return i.createElement("option",{key:j,value:j},j)}))),i.createElement("div",{style:{marginBottom:"1.5rem"}},i.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Note (optional):"),i.createElement("textarea",{value:I,onChange:q=>A(q.target.value),placeholder:"Add a note explaining your counter proposal...",rows:3,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",resize:"vertical"}})),T&&i.createElement("div",{style:{color:"#e53e3e",marginBottom:"1rem"}},T),i.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"center"}},i.createElement("button",{type:"submit",style:{background:"#e53e3e",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px"}},"Submit Counter"),i.createElement("button",{type:"button",onClick:e,style:{background:"#6c757d",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px"}},"Cancel"))))}const au={_origin:"https://api.emailjs.com"},QD=(t,a="https://api.emailjs.com")=>{au._userID=t,au._origin=a},Pw=(t,a,e)=>{if(!t)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!a)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!e)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class h2{constructor(a){this.status=a.status,this.text=a.responseText}}const Bw=(t,a,e={})=>new Promise((n,s)=>{const l=new XMLHttpRequest;l.addEventListener("load",({target:c})=>{const d=new h2(c);d.status===200||d.text==="OK"?n(d):s(d)}),l.addEventListener("error",({target:c})=>{s(new h2(c))}),l.open("POST",au._origin+t,!0),Object.keys(e).forEach(c=>{l.setRequestHeader(c,e[c])}),l.send(a)}),VD=(t,a,e,n)=>{const s=n||au._userID;return Pw(s,t,a),Bw("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:s,service_id:t,template_id:a,template_params:e}),{"Content-type":"application/json"})},XD=t=>{let a;if(typeof t=="string"?a=document.querySelector(t):a=t,!a||a.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return a},KD=(t,a,e,n)=>{const s=n||au._userID,l=XD(e);Pw(s,t,a);const c=new FormData(l);return c.append("lib_version","3.2.0"),c.append("service_id",t),c.append("template_id",a),c.append("user_id",s),Bw("/api/v1.0/email/send-form",c)},Sp={init:QD,send:VD,sendForm:KD};function JD({to_email:t,to_name:a,from_name:e,from_email:n,day:s,date:l,time:c,location:d,note:p,gameType:h,raceLength:m,proposalId:b}){if(!t||t==="undefined")return alert("Recipient email is missing. Cannot send proposal."),Promise.reject(new Error("Recipient email is missing."));if(!n||n==="undefined")return alert("Your email is missing. Cannot send proposal."),Promise.reject(new Error("Sender email is missing."));const x=Na(uw(l),"MM-dd-yyyy"),w=Object.entries({from:e,to:a,day:s,date:x,time:c,location:d,note:p,proposerEmail:n,gameType:h,raceLength:m,proposalId:b}).map(([D,I])=>`${D}=${encodeURIComponent(I)}`).join("&"),S="https://newapp-1-ic1v.onrender.com",_=`${S}/#/confirm-match?${w}`,C=`${S}/#/confirm-match?${w}`;return Sp.send("service_l5q2047","template_xu0tl3i",{to_email:t,to_name:a,from_name:e,day:s,date:x,time:c,location:d,note:p,gameType:h,raceLength:m,confirm_link:_,counter_propose_link:C},"g6vqrOs_Jb6LL1VCZ")}function ek({to_email:t,to_name:a,day:e,date:n,time:s,location:l,proposal_note:c,confirmation_note:d,confirmed_by:p,gameType:h,raceLength:m}){return Sp.send("service_l5q2047","template_dtc43h8",{to_email:t,to_name:a,day:e,date:n,time:s,location:l,proposal_note:c,confirmation_note:d,confirmed_by:p,gameType:h,raceLength:m},"g6vqrOs_Jb6LL1VCZ")}function tk({to_email:t,to_name:a,division:e,daysUntilDeadline:n,completedMatches:s,totalRequiredMatches:l,deadlineDate:c,remainingMatches:d}){if(!t||t==="undefined")return console.error("Recipient email is missing. Cannot send deadline reminder."),Promise.reject(new Error("Recipient email is missing."));const p=Math.round(s/l*100),h=n<=1?"CRITICAL":n<=3?"URGENT":n<=7?"WARNING":"REMINDER";return Sp.send("service_l5q2047","template_xbpnbge",{to_email:t,to_name:a,division:e,days_until_deadline:n,completed_matches:s,total_required_matches:l,progress_percentage:p,deadline_date:c,remaining_matches:d,urgency_level:h,app_url:"https://newapp-1-ic1v.onrender.com"},"g6vqrOs_Jb6LL1VCZ")}function nk({to_email:t,to_name:a,registrationId:e,registrationDate:n,registrationFee:s,paymentMethods:l=[],additionalInstructions:c="",contactInfo:d={}}){if(!t||t==="undefined")return console.error("Recipient email is missing. Cannot send payment instructions."),Promise.reject(new Error("Recipient email is missing."));const p=l.length>0?l.map((m,b)=>{let x=m.instructions;return m.key==="venmo"&&m.username?x=`Send payment to @${m.username}`:m.key==="cashapp"&&m.username?x=`Send payment to $${m.username}`:m.key==="paypal"&&m.email?x=`Send payment to ${m.email}`:m.key==="creditCard"&&m.paymentLink?x=`Pay securely online: ${m.paymentLink}`:m.key==="applePay"&&m.paymentLink?x=`Pay with Apple Pay: ${m.paymentLink}`:m.key==="googlePay"&&m.paymentLink?x=`Pay with Google Pay: ${m.paymentLink}`:m.key==="check"&&m.payeeName&&(x=`Make check payable to ${m.payeeName}`),`${b+1}. **${m.displayName}:** ${x}`}).join(`
`):"1. **Cash:** Pay in person to league administrator",h=d&&(d.email||d.phone||d.name)?`

**For payment questions, contact:**
${d.name?`Name: ${d.name}
`:""}${d.email?`Email: ${d.email}
`:""}${d.phone?`Phone: ${d.phone}`:""}`:"";return Sp.send("service_l5q2047","template_payment_instructions",{to_email:t,to_name:a,registration_id:e,registration_date:n,registration_fee:s,payment_instructions:`
        **League Registration Payment Instructions**
        
        Registration Fee: $${s}
        Registration ID: ${e}
        
        **Payment Methods:**
${p}
        
        ${c?`
**Additional Instructions:**
${c}
`:""}
        
        **Important Notes:**
        • Include your Registration ID (${e}) in payment notes
        • Payment must be completed within 7 days
        • Your PIN will be sent once payment is confirmed
        • Contact league admin if you have payment issues${h}
        
        **Next Steps:**
        1. Complete payment using one of the methods above
        2. Wait for payment confirmation email
        3. You'll receive your unique PIN and full access
      `,app_url:"https://newapp-1-ic1v.onrender.com"},"g6vqrOs_Jb6LL1VCZ")}const ak="_confirmMatchCard_7heot_7",rk="_confirmMatchTitle_7heot_31",sk="_redTitle_7heot_45",ik="_confirmMatchDetails_7heot_55",ok="_detailRow_7heot_65",lk="_confirmBtn_7heot_173",un={confirmMatchCard:ak,confirmMatchTitle:rk,redTitle:sk,confirmMatchDetails:ik,detailRow:ok,confirmBtn:lk};function ck({text:t,query:a}){return a?t.split(new RegExp(`(${a})`,"gi")).map((n,s)=>n.toLowerCase()===a.toLowerCase()?i.createElement("mark",{key:s},n):n):i.createElement(i.Fragment,null,t)}const Pe="https://www.frontrangepool.com/api";console.log("BACKEND_URL in use:",Pe);console.log("Current origin:",window.location.origin);console.log("User agent:",navigator.userAgent);fetch(`${Pe}/health`).then(t=>{console.log("✅ Backend health check successful:",t.status)}).catch(t=>{console.error("❌ Backend health check failed:",t)});function uk(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[l,c,d]=t.split("-"),p=new Date(parseInt(l),parseInt(c)-1,parseInt(d)),h=String(p.getMonth()+1).padStart(2,"0"),m=String(p.getDate()).padStart(2,"0"),b=p.getFullYear();return`${h}-${m}-${b}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const l=t.split("/");if(l.length===3){const[c,d,p]=l;a=new Date(p,c-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}function dk(){const[t]=y_(),[a,e]=v.useState(!1),[n,s]=v.useState(""),[l,c]=v.useState(!1),p=t.get("action")==="counter",h=t.get("from"),m=t.get("to"),b=t.get("day"),x=t.get("date"),E=t.get("time"),w=t.get("location"),S=t.get("proposerEmail"),_=t.get("note"),C=t.get("gameType"),D=t.get("raceLength"),I=t.get("proposalId");v.useEffect(()=>{p&&c(!0)},[p]);const A=()=>{console.log("CONFIRM BUTTON CLICKED"),ek({to_email:S,to_name:h,day:b,date:x,time:E,location:w,confirmed_by:m,proposal_note:_||"",confirmation_note:n||"",gameType:C||"",raceLength:D||""}),I?fetch(`${Pe}/api/proposals/${I}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"confirmed",note:n})}).then(F=>{if(!F.ok)throw new Error("Failed to confirm proposal");console.log("Proposal confirmed successfully"),e(!0)}).catch(F=>{console.error("Error confirming proposal:",F),alert("Failed to confirm proposal: "+F.message)}):(console.log("No proposalId provided - showing confirmation modal"),e(!0))};return i.createElement("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)"}},i.createElement("div",{className:"draggable-modal",style:{background:"linear-gradient(120deg, #232323 80%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:window.innerWidth<=400?"0":"1.2rem",boxShadow:"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",width:window.innerWidth<=400?"100vw":"auto",maxWidth:window.innerWidth<=400?"100vw":"480px",minWidth:0,margin:window.innerWidth<=400?"0":"0 auto",left:0,right:0,animation:"modalBounceIn 0.5s cubic-bezier(.21,1.02,.73,1.01)",padding:"1.5rem 2rem 1rem 2rem",position:"relative",fontFamily:"inherit",boxSizing:"border-box",textAlign:"center",marginTop:"100px",maxHeight:"85vh",overflowY:"auto"}},i.createElement("div",{style:{position:"relative"}},i.createElement("button",{onClick:()=>window.location.href="/#/dashboard",style:{position:"absolute",top:"-0.5rem",right:"-0.5rem",background:"#333",color:"#fff",border:"1px solid #666",borderRadius:"50%",width:"2rem",height:"2rem",fontSize:"1.2rem",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s, border-color 0.2s",zIndex:10},onMouseEnter:T=>{T.target.style.background="#e53e3e",T.target.style.borderColor="#fff"},onMouseLeave:T=>{T.target.style.background="#333",T.target.style.borderColor="#666"}},"×"),i.createElement("h1",{style:{marginBottom:"1rem",fontSize:"1.4rem",fontWeight:"bold",letterSpacing:"0.01em",color:"#ff0000"}},"🎱 Front Range Pool League",i.createElement("br",null),"Confirm Match")),i.createElement("p",{style:{marginBottom:"1rem",fontSize:"0.95rem",color:"#faf6f6",textAlign:"center"}},"You are about to confirm this match. Your opponent will be notified by email and the match will be added to your app calendar!"),i.createElement("div",{style:{textAlign:"center",marginBottom:"0.8rem",background:"#1a1a1a",color:"#faf6f6",borderRadius:8,padding:"0.4rem 0.5rem",border:"1px solid #ff0000"}},i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},i.createElement("span",{role:"img","aria-label":"you"},"🧑")," ",i.createElement("strong",null,"You:")," ",m||"N/A"),i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},i.createElement("span",{role:"img","aria-label":"opponent"},"🤝")," ",i.createElement("strong",null,"Opponent:")," ",h||"N/A"),i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},i.createElement("span",{role:"img","aria-label":"calendar"},"📅")," ",i.createElement("strong",null,"Day:")," ",b||"N/A"),i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},i.createElement("span",{role:"img","aria-label":"date"},"🗓️")," ",i.createElement("strong",null,"Date:")," ",uk(x)),i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},i.createElement("span",{role:"img","aria-label":"clock"},"⏰")," ",i.createElement("strong",null,"Time:")," ",E||"N/A"),C&&i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},i.createElement(mp,{gameType:C,size:16})," ",i.createElement("strong",null,"Game Type:")," ",C),D&&i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},i.createElement("span",{role:"img","aria-label":"race"},"🏁")," ",i.createElement("strong",null,"Race to:")," ",D),i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.7em",marginBottom:"0.7em",fontSize:"1rem"}},i.createElement("span",{role:"img","aria-label":"location"},"📍")," ",i.createElement("strong",null,"Location:")," ",w||"N/A")),_&&i.createElement("div",{style:{margin:"12px 0 0 0",padding:"0.6rem 0.8rem",background:"#2a2a2a",borderLeft:"3px solid #ffb300",borderRadius:4,color:"#ffb300",fontSize:"0.98rem",textAlign:"left"}},i.createElement("span",{role:"img","aria-label":"note"},"📝")," ",i.createElement("strong",null,"Note from opponent:"),i.createElement("br",null),_),i.createElement("div",{style:{margin:"1rem 0 0.2rem 0",textAlign:"left"}},i.createElement("label",{htmlFor:"note",style:{fontWeight:500,color:"#faf6f6",marginBottom:"0.2rem",display:"block"}},"📝 Add a note (optional):"),i.createElement("textarea",{id:"note",value:n,onChange:T=>s(T.target.value),rows:2,placeholder:"Write a message to your opponent…",style:{width:"100%",minHeight:"54px",borderRadius:7,border:"1px solid #666",padding:"0.6em 0.8em",fontSize:"1rem",marginTop:"0.2rem",resize:"vertical",background:"#1a1a1a",color:"#faf6f6",boxSizing:"border-box",transition:"border 0.2s"},onFocus:T=>T.target.style.border="1.5px solid #ff0000",onBlur:T=>T.target.style.border="1px solid #666"})),i.createElement("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"1rem",flexWrap:"wrap"}},i.createElement("button",{style:{background:"#ff0000",color:"#fff",border:"none",borderRadius:8,padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px",transition:"background 0.18s, color 0.18s, border 0.18s, box-shadow 0.18s",boxShadow:"0 2px 6px #0001"},onMouseEnter:T=>T.target.style.background="#c90000",onMouseLeave:T=>T.target.style.background="#ff0000",onClick:A},"✅ Confirm Match"),i.createElement("button",{style:{background:"#fff",color:"#ff0000",border:"2px solid #ff0000",borderRadius:8,padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px",transition:"background 0.18s, color 0.18s, border 0.18s, box-shadow 0.18s",boxShadow:"0 2px 6px #0001"},onMouseEnter:T=>{T.target.style.background="#ff0000",T.target.style.color="#fff"},onMouseLeave:T=>{T.target.style.background="#fff",T.target.style.color="#ff0000"},onClick:()=>c(!0)},"🔄 Counter Propose")),i.createElement("div",{style:{textAlign:"center",marginTop:"1rem"}},i.createElement("button",{onClick:()=>window.location.href="/#/dashboard",style:{background:"#333",color:"#fff",border:"1px solid #666",borderRadius:6,padding:"0.5rem 1rem",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"background 0.2s, border-color 0.2s"},onMouseEnter:T=>{T.target.style.background="#444",T.target.style.borderColor="#888"},onMouseLeave:T=>{T.target.style.background="#333",T.target.style.borderColor="#666"}},"📊 Go to Dashboard")),i.createElement(Zx,{open:a,message:"Match confirmed! The opponent has been notified and the match has been added to your app calendar.",proposalNote:_,confirmationNote:n,gameType:C,raceLength:D,day:b,date:x,time:E,location:w,onClose:()=>e(!1)}),i.createElement(Lw,{open:l,onClose:()=>c(!1),proposal:{senderName:h,receiverName:m,senderEmail:S,receiverEmail:"",date:x,time:E,location:w,message:_,gameType:C,raceLength:D,_id:I},onSubmit:T=>{console.log("Counter proposal submitted:",T),c(!1)},senderPlayer:{firstName:(m==null?void 0:m.split(" ")[0])||"",lastName:(m==null?void 0:m.split(" ").slice(1).join(" "))||"",email:""},phase:"scheduled",selectedDivision:""})))}const fk="_dashboardBg_2cp8a_18",pk="_dashboardFrame_2cp8a_36",mk="_dashboardCard_2cp8a_52",hk="_dashboardTitle_2cp8a_82",gk="_dashboardUserName_2cp8a_90",yk="_dashboardSection_2cp8a_100",bk="_newsUpdatesSection_2cp8a_112",vk="_dashboardSectionBox_2cp8a_116",xk="_dashboardSectionTitle_2cp8a_128",wk="_matchesSection_2cp8a_145",Ek="_dashboardList_2cp8a_157",Sk="_matchCard_2cp8a_168",Ck="_dashboardBtn_2cp8a_271",_k="_errorBox_2cp8a_408",Ik="_dashboardAdminBtn_2cp8a_418",Dk="_dashboardLogoutBtn_2cp8a_436",kk="_dashboardNoteItem_2cp8a_455",Ak="_simulationContainer_2cp8a_474",Mk="_modalOverlay_2cp8a_495",Tk="_dashboardModalContent_2cp8a_521",Nk="_modalHeader_2cp8a_549",Rk="_modalTitle_2cp8a_562",Lk="_closeBtn_2cp8a_571",Pk="_poolTableContainer_2cp8a_914",Bk="_modalDetailRowSnazzy_2cp8a_979",Ok="_proposalModalContent_2cp8a_1016",zk="_matchCardDoneBtn_2cp8a_1222",Uk="_inputField_2cp8a_1324",Fk="_proposalModalHeaderBar_2cp8a_1348",Wk="_phasePill_2cp8a_1357",jk="_divisionPill_2cp8a_1367",Hk="_proposalModalToRow_2cp8a_1375",Yk="_toOpponentLabel_2cp8a_1382",Gk="_toOpponentName_2cp8a_1388",$k="_proposalModalDayRow_2cp8a_1393",Zk="_dayLabel_2cp8a_1400",qk="_dayValue_2cp8a_1406",Qk="_proposalModalFieldRow_2cp8a_1411",Vk="_fieldLabel_2cp8a_1416",Xk="_proposalModalButtonRow_2cp8a_1438",Kk="_matchManager_2cp8a_2287",Jk="_matchStats_2cp8a_2294",eA="_statsGrid_2cp8a_2309",tA="_statItem_2cp8a_2315",nA="_statNumber_2cp8a_2323",aA="_statLabel_2cp8a_2331",rA="_matchSection_2cp8a_2338",sA="_noMatches_2cp8a_1877",iA="_matchList_2cp8a_2360",oA="_completedMatch_2cp8a_2380",lA="_matchHeader_2cp8a_2389",cA="_matchStatus_2cp8a_2396",uA="_matchDate_2cp8a_2405",dA="_matchPlayers_2cp8a_2410",fA="_player1_2cp8a_2419",pA="_player2_2cp8a_2419",mA="_winner_2cp8a_2426",hA="_vs_2cp8a_2432",gA="_matchDetails_2cp8a_2437",yA="_location_2cp8a_2446",bA="_type_2cp8a_2446",vA="_matchResult_2cp8a_2452",xA="_score_2cp8a_2461",wA="_matchNotes_2cp8a_2466",EA="_notesLabel_2cp8a_2472",SA="_notesText_2cp8a_2479",CA="_matchActions_2cp8a_2485",_A="_actionButton_2cp8a_2493",IA="_cancelButton_2cp8a_2511",DA="_modal_2cp8a_495",kA="_formGroup_2cp8a_2553",AA="_modalActions_2cp8a_2589",MA="_loading_2cp8a_2629",ue={dashboardBg:fk,dashboardFrame:pk,dashboardCard:mk,dashboardTitle:hk,dashboardUserName:gk,dashboardSection:yk,newsUpdatesSection:bk,dashboardSectionBox:vk,dashboardSectionTitle:xk,matchesSection:wk,dashboardList:Ek,matchCard:Sk,dashboardBtn:Ck,errorBox:_k,dashboardAdminBtn:Ik,dashboardLogoutBtn:Dk,dashboardNoteItem:kk,simulationContainer:Ak,modalOverlay:Mk,dashboardModalContent:Tk,modalHeader:Nk,modalTitle:Rk,closeBtn:Lk,poolTableContainer:Pk,modalDetailRowSnazzy:Bk,proposalModalContent:Ok,matchCardDoneBtn:zk,inputField:Uk,proposalModalHeaderBar:Fk,phasePill:Wk,divisionPill:jk,proposalModalToRow:Hk,toOpponentLabel:Yk,toOpponentName:Gk,proposalModalDayRow:$k,dayLabel:Zk,dayValue:qk,proposalModalFieldRow:Qk,fieldLabel:Vk,proposalModalButtonRow:Xk,matchManager:Kk,matchStats:Jk,statsGrid:eA,statItem:tA,statNumber:nA,statLabel:aA,matchSection:rA,noMatches:sA,matchList:iA,completedMatch:oA,matchHeader:lA,matchStatus:cA,matchDate:uA,matchPlayers:dA,player1:fA,player2:pA,winner:mA,vs:hA,matchDetails:gA,location:yA,type:bA,matchResult:vA,score:xA,matchNotes:wA,notesLabel:EA,notesText:SA,matchActions:CA,actionButton:_A,cancelButton:IA,modal:DA,formGroup:kA,modalActions:AA,loading:MA},Cp=""+new URL("tenball-I4UPjCSs.svg",import.meta.url).href,Ow=""+new URL("PredatorTable-CE1I7Bce.png",import.meta.url).href,zw=""+new URL("nineball-5ZBjRXm5.svg",import.meta.url).href,If=""+new URL("8ball-COe24mO4.svg",import.meta.url).href,Uw="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3c!--%20Main%20ball%20gradient%20with%20realistic%20lighting%20--%3e%3cradialGradient%20id='cueMain'%20cx='25%25'%20cy='25%25'%20r='75%25'%3e%3cstop%20offset='0%25'%20stop-color='%23ffffff'/%3e%3cstop%20offset='30%25'%20stop-color='%23f5f5f5'/%3e%3cstop%20offset='60%25'%20stop-color='%23e8e8e8'/%3e%3cstop%20offset='100%25'%20stop-color='%23d0d0d0'/%3e%3c/radialGradient%3e%3c!--%20Secondary%20highlight%20for%20depth%20--%3e%3cradialGradient%20id='cueHighlight'%20cx='20%25'%20cy='20%25'%20r='40%25'%3e%3cstop%20offset='0%25'%20stop-color='%23ffffff'%20stop-opacity='0.9'/%3e%3cstop%20offset='60%25'%20stop-color='%23ffffff'%20stop-opacity='0.3'/%3e%3cstop%20offset='100%25'%20stop-color='%23ffffff'%20stop-opacity='0'/%3e%3c/radialGradient%3e%3c!--%20Specular%20highlight%20--%3e%3cradialGradient%20id='cueSpecular'%20cx='35%25'%20cy='35%25'%20r='15%25'%3e%3cstop%20offset='0%25'%20stop-color='%23ffffff'/%3e%3cstop%20offset='100%25'%20stop-color='%23ffffff'%20stop-opacity='0'/%3e%3c/radialGradient%3e%3c!--%20Shadow%20gradient%20--%3e%3cradialGradient%20id='cueShadow'%20cx='75%25'%20cy='75%25'%20r='25%25'%3e%3cstop%20offset='0%25'%20stop-color='%23000000'%20stop-opacity='0.2'/%3e%3cstop%20offset='100%25'%20stop-color='%23000000'%20stop-opacity='0'/%3e%3c/radialGradient%3e%3c/defs%3e%3c!--%20Main%20ball%20--%3e%3ccircle%20cx='8'%20cy='8'%20r='7.5'%20fill='url(%23cueMain)'%20stroke='%23c0c0c0'%20stroke-width='0.3'/%3e%3c!--%20Primary%20highlight%20--%3e%3ccircle%20cx='6'%20cy='6'%20r='2.5'%20fill='url(%23cueHighlight)'/%3e%3c!--%20Specular%20highlight%20--%3e%3ccircle%20cx='7'%20cy='7'%20r='1.2'%20fill='url(%23cueSpecular)'/%3e%3c!--%20Subtle%20shadow%20for%20depth%20--%3e%3ccircle%20cx='9'%20cy='9'%20r='7.5'%20fill='url(%23cueShadow)'/%3e%3c/svg%3e",TA="_pinLoginBg_1hrzk_8",NA="_pinLoginFrame_1hrzk_21",RA="_pinLoginCard_1hrzk_43",LA="_simulationContainer_1hrzk_67",PA="_pinLoginSubtitle_1hrzk_111",BA="_pinLoginLock_1hrzk_118",OA="_pinInput_1hrzk_124",zA="_pinLoginBtn_1hrzk_148",UA="_signupBtn_1hrzk_174",FA="_pinLoginError_1hrzk_200",WA="_pinBallImg_1hrzk_212",Ha={pinLoginBg:TA,pinLoginFrame:NA,pinLoginCard:RA,simulationContainer:LA,pinLoginSubtitle:PA,pinLoginLock:BA,pinInput:OA,pinLoginBtn:zA,signupBtn:UA,pinLoginError:FA,pinBallImg:WA},T0=""+new URL("logo-CyezyYO7.png",import.meta.url).href,jA=[{key:"cue",src:Uw,alt:"Cue Ball"},{key:"8",src:If,alt:"8 Ball"},{key:"9",src:zw,alt:"9 Ball"},{key:"10",src:Cp,alt:"10 Ball"}],Fw=600,Ww=300,an=15,or=an/2;function HA(t,a,e,n=1){const s=e*n,l=a.x-t.x,c=a.y-t.y,d=Math.sqrt(l*l+c*c);if(d===0||d>=s)return;const p=s-d+.01,h=l/d,m=c/d;t.x-=h*(p/2),t.y-=m*(p/2),a.x+=h*(p/2),a.y+=m*(p/2);const b=t.vx-a.vx,x=t.vy-a.vy,w=-(b*h+x*m)||.01;t.vx+=w*h,t.vy+=w*m,a.vx-=w*h,a.vy-=w*m,t.isMoving=!0,a.isMoving=!0}function YA(t=Fw,a=Ww,e=1){const n=t/e,s=a/e;return[{x:0,y:0},{x:n,y:0},{x:0,y:s},{x:n,y:s},{x:n/2,y:0},{x:n/2,y:s}]}function Df({isRotated:t=!1}){console.log("PoolSimulation isRotated:",t);const a=v.useRef(null),e=v.useRef(null),n=v.useRef({cue:i.createRef(),8:i.createRef(),9:i.createRef(),10:i.createRef()}),s=v.useRef({}),l=v.useRef({}),c=v.useRef(null),d=v.useRef(null),p=v.useRef(0),h=v.useRef(1),[m,b]=v.useState(!1);function x(){Object.keys(s.current).forEach(D=>{l.current[D]={x:s.current[D].x,y:s.current[D].y}})}function E(){const D=a.current;if(!D)return;const I=D.offsetWidth,A=D.offsetHeight,T=I/h.current,F=A/h.current,J=T*.25,H=F/2,Z=an*.87,K=an*.5;function X(){return(Math.random()-.5)*1}s.current={8:{ref:n.current[8],x:J+X(),y:H+X(),vx:0,vy:0,isMoving:!1,visible:!0},9:{ref:n.current[9],x:J-Z+X(),y:H-K+X(),vx:0,vy:0,isMoving:!1,visible:!0},10:{ref:n.current[10],x:J-Z+X(),y:H+K+X(),vx:0,vy:0,isMoving:!1,visible:!0},cue:{ref:n.current.cue,x:T*.85,y:F/2,vx:0,vy:0,isMoving:!1,visible:!0}},Object.values(s.current).forEach(W=>{W.ref.current&&(W.ref.current.style.opacity=1)}),x()}function w(){E(),p.current=0,setTimeout(()=>{S()},1e3)}v.useEffect(()=>{if(a.current&&!m){const D=a.current,I=D.offsetWidth,A=D.offsetHeight;if(I<400||A<200)h.current=.55;else{const T=I/Fw,F=A/Ww;h.current=Math.min(T,F)}E(),setTimeout(()=>{S()},1e3),b(!0)}return()=>{cancelAnimationFrame(c.current),clearTimeout(d.current)}},[m]);function S(){if(!s.current.cue||s.current.cue.isMoving)return;const D=s.current.cue;if(p.current+=1,p.current===1){s.current[8];const I=s.current[9],A=a.current;if(!A)return;const T=A.offsetWidth,F=A.offsetHeight,J=T/h.current,H=F/h.current,Z=J*.85,K=H*.5;D.x=Z,D.y=K;const X=I.x+(Math.random()-.5)*an*.3,W=I.y+(Math.random()-.5)*an*.3,O=X-D.x,B=W-D.y,U=Math.atan2(B,O)+(Math.random()-.5)*(Math.PI/45),M=18+Math.random()*3;D.vx=Math.cos(U)*M,D.vy=Math.sin(U)*M,D.isMoving=!0,C();return}_()}function _(){var M;const D=["8","9","10"],I=D.find(z=>{var G;return(G=s.current[z])==null?void 0:G.visible});if(!I)return;const A=s.current.cue,T=s.current[I],F=a.current;if(!F)return;const J=F.offsetWidth,H=F.offsetHeight;J/h.current,H/h.current;const Z=YA(J,H,h.current);let K=null,X=1/0;for(const z of Z){z.x-T.x,z.y-T.y;let G=z.x,q=z.y;const R=G-T.x,j=q-T.y,ne=Math.hypot(R,j),ae=T.x-R/ne*an,se=T.y-j/ne*an;let V=!0;for(const Ve of D)if(Ve!==I&&(M=s.current[Ve])!=null&&M.visible){const He=s.current[Ve];if(Math.abs((se-A.y)*He.x-(ae-A.x)*He.y+ae*A.y-se*A.x)/Math.hypot(ae-A.x,se-A.y)<an*.6){V=!1;break}}if(!V)continue;const pe=Math.hypot(A.x-ae,A.y-se),Ie=Math.hypot(T.x-z.x,T.y-z.y);let fe=pe*.05;fe+=Ie*.02,pe<an*3?fe*=.01:pe<an*6?fe*=.1:pe<an*10&&(fe*=.3);const Fe=D.find(Ve=>{var He;return Ve!==I&&((He=s.current[Ve])==null?void 0:He.visible)});if(Fe){const Ve=s.current[Fe],He=ae+(ae-A.x)*.3,Qe=se+(se-A.y)*.3;Math.hypot(He-Ve.x,Qe-Ve.y)<an*8&&(fe*=.5)}fe+=Math.random()*.2,fe<X&&(X=fe,K={ghostX:ae,ghostY:se,targetToPocket:Ie,cueToGhost:pe,pocket:z})}if(!K){const z=Math.atan2(T.y-A.y,T.x-A.x),G=Math.hypot(T.x-A.x,T.y-A.y);K={ghostX:A.x+Math.cos(z)*G*.7,ghostY:A.y+Math.sin(z)*G*.7,targetToPocket:1e3,cueToGhost:G}}const W=K.ghostX-A.x,O=K.ghostY-A.y,B=Math.hypot(W,O);let U;B<an*2?U=3:B<an*4?U=4:B<an*8?U=5:B<an*12?U=6:U=7,K.targetToPocket>an*6&&(U+=1),U+=(Math.random()-.5)*.3,U=Math.max(2,Math.min(8,U)),A.vx=W/B*U,A.vy=O/B*U,A.isMoving=!0,C()}function C(){const A=a.current;if(!A)return;const T=A.offsetWidth,F=A.offsetHeight,J=or*3.5,H=or*4.5,Z=J,K=T/h.current-H,X=J,W=F/h.current-J;function O(){for(let B=0;B<16;B++){Object.entries(s.current).forEach(([M,z])=>{if(!z.visible)return;let G=z.x+z.vx/16,q=z.y+z.vy/16;const R=a.current;if(R){const j=R.offsetWidth,ne=R.offsetHeight,ae=j/h.current,se=ne/h.current;[{x:0,y:0},{x:ae,y:0},{x:0,y:se},{x:ae,y:se},{x:ae/2,y:0},{x:ae/2,y:se}].some(Ie=>Math.hypot(G-Ie.x,q-Ie.y)<an*4)?(console.log(`Ball ${M} pocketed! Position: (${G.toFixed(1)}, ${q.toFixed(1)})`),z.isMoving=!1,z.visible=!1,z.ref.current&&(z.ref.current.style.opacity=0)):(G<Z+or?(z.x=Z+or,z.vx=Math.abs(z.vx)*.75):G>K-or?(z.x=K-or,z.vx=-Math.abs(z.vx)*.75):z.x=G,q<X+or?(z.y=X+or,z.vy=Math.abs(z.vy)*.75):q>W-or?(z.y=W-or,z.vy=-Math.abs(z.vy)*.75):z.y=q,z.vx*=Math.pow(.99,1/16),z.vy*=Math.pow(.99,1/16))}z.isMoving&&Math.abs(z.vx)<.03&&Math.abs(z.vy)<.03&&(z.vx=0,z.vy=0,z.isMoving=!1)});const U=Object.keys(s.current);for(let M=0;M<U.length;M++)for(let z=M+1;z<U.length;z++){const G=s.current[U[M]],q=s.current[U[z]];!G.visible||!q.visible||HA(G,q,an,h.current)}}if(Object.entries(s.current).forEach(([B,U])=>{if(U.ref.current&&U.visible){const M=U.x*h.current-or*h.current,z=U.y*h.current-or*h.current,G=an*h.current,q=T-G,R=F-G;U.ref.current.style.left=Math.max(0,Math.min(M,q))+"px",U.ref.current.style.top=Math.max(0,Math.min(z,R))+"px",U.ref.current.style.width=G+"px",U.ref.current.style.height=G+"px",U.ref.current.style.opacity=1}}),!s.current.cue.visible){if(Object.values(s.current).some(R=>R.isMoving)){c.current=requestAnimationFrame(O);return}const B=a.current;if(!B)return;const U=B.offsetWidth,M=B.offsetHeight,z=U/h.current,G=M/h.current,q=["8","9","10"].filter(R=>{var j;return(j=s.current[R])==null?void 0:j.visible});if(q.length>0){const R=q[0],j=s.current[R],ne=(Math.random()-.5)*an*2,ae=(Math.random()-.5)*an*2;s.current.cue.x=j.x+ne,s.current.cue.y=j.y+ae}else s.current.cue.x=z*.5,s.current.cue.y=G*.5;s.current.cue.vx=0,s.current.cue.vy=0,s.current.cue.isMoving=!1,s.current.cue.visible=!0,s.current.cue.ref.current&&(s.current.cue.ref.current.style.opacity=1),setTimeout(()=>{_()},1500);return}if(!s.current[10].visible){setTimeout(()=>{w()},1200);return}Object.values(s.current).some(B=>B.isMoving)?c.current=requestAnimationFrame(O):d.current||(d.current=setTimeout(()=>{d.current=null,_()},2e3))}c.current=requestAnimationFrame(O)}return i.createElement("div",{ref:a,"data-pool-container":!0,style:{width:"100%",height:"100%",position:"relative",background:"linear-gradient(180deg, #1a1a1a 0%, #000000 100%)",zIndex:0,boxShadow:"inset 0 0 50px rgba(0,0,0,0.8)"}},i.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(ellipse 1200px 800px at center 60px, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0.04) 20%, rgba(255,255,255,0.02) 40%, rgba(255,255,255,0.01) 60%, transparent 80%)",zIndex:3,pointerEvents:"none"}}),i.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(circle 800px at center 40px, rgba(255,255,255,0.02) 0%, transparent 70%)",zIndex:3,pointerEvents:"none"}}),i.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(circle 800px at center 40px, rgba(255,255,255,0.02) 0%, transparent 70%)",zIndex:3,pointerEvents:"none"}}),i.createElement("img",{ref:e,src:Ow,alt:"Pool Table",style:{width:"100%",height:"100%",display:"block",objectFit:"fill",position:"absolute",top:1,left:0,zIndex:1,pointerEvents:"none",opacity:1,filter:"opacity(1) contrast(1.3) brightness(1.25) saturate(1.1)",boxShadow:"inset 0 0 30px rgba(0,0,0,0.3)",transform:t?"rotate(90deg)":"none",transformOrigin:"center center"},onLoad:()=>{console.log("Table image loaded, isRotated:",t,"transform:",t?"rotate(90deg)":"none")}}),i.createElement("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",userSelect:"none",zIndex:2}},i.createElement("img",{src:T0,alt:"League Logo",style:{position:"absolute",left:"50%",top:"50%",width:"30.5%",height:"auto",transform:t?"translate(-50%, -50%) rotate(-90deg)":"translate(-50%, -50%)",objectFit:"contain",zIndex:2,opacity:.25,filter:"drop-shadow(0 1px 4px rgba(0,0,0,0.3))",pointerEvents:"none",userSelect:"none"}})),jA.map(D=>{var I,A;return i.createElement(i.Fragment,{key:D.key},i.createElement("img",{src:D.src,alt:D.alt,ref:n.current[D.key],className:Ha.pinBallImg,style:{position:"absolute",left:0,top:0,width:an,height:an,zIndex:10,opacity:((I=s.current[D.key])==null?void 0:I.visible)===!1?0:1,transition:"none",pointerEvents:"none",filter:"opacity(1) contrast(1.3) brightness(1.2) saturate(1.1) drop-shadow(0 2px 4px rgba(0,0,0,0.3))",borderRadius:"50%",transform:t?"rotate(-90deg)":"none",transformOrigin:"center center"}}),i.createElement("div",{style:{position:"absolute",left:3,top:3,width:an-6,height:an-6,borderRadius:"50%",background:"radial-gradient(ellipse 8px 4px at 30% 30%, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.1) 50%, transparent 100%)",zIndex:11,opacity:((A=s.current[D.key])==null?void 0:A.visible)===!1?0:.8,pointerEvents:"none"}}))}))}function jw({aspectWidth:t,aspectHeight:a,children:e}){const n=v.useRef(null),[s,l]=v.useState(1);return v.useLayoutEffect(()=>{function c(){if(!n.current)return;const{width:p,height:h}=n.current.getBoundingClientRect();l(Math.min(p/t,h/a))}c();const d=new window.ResizeObserver(c);return d.observe(n.current),()=>d.disconnect()},[t,a]),i.createElement("div",{ref:n,style:{width:"100%",height:"100%",position:"relative",overflow:"visible"}},i.createElement("div",{style:{width:t,height:a,transform:`scale(${s})`,transformOrigin:"top left",position:"absolute",top:0,left:0}},e))}function GA({open:t,onClose:a,standingsUrl:e}){const[n,s]=v.useState(!0);return t?i.createElement(Rn,{open:t,onClose:a,title:"📊 League Standings",maxWidth:"90vw",className:"standings-modal"},i.createElement("div",{style:{height:"70vh",width:"100%",position:"relative"}},n&&i.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,color:"#e53e3e",fontSize:"1.2rem",fontWeight:"bold"}},"Loading standings..."),i.createElement("iframe",{src:e,style:{width:"100%",height:"100%",border:"none",borderRadius:"8px",background:"#fff"},title:"League Standings",onLoad:()=>s(!1)})),i.createElement("div",{style:{marginTop:"1rem",textAlign:"center",color:"#888",fontSize:"0.9rem"}},"Front Range Pool League")):null}function $A({open:t,onClose:a,playerName:e,playerLastName:n,selectedDivision:s}){const[l,c]=v.useState([]),[d,p]=v.useState(!0),[h,m]=v.useState(null),[b,x]=v.useState(null),[E,w]=v.useState([]),S=`${e} ${n}`;return v.useEffect(()=>{if(!t||!s)return;async function _(){try{p(!0),m(null);const C=s.replace(/[^A-Za-z0-9]/g,"_"),D=`${Pe}/static/standings_${C}.json`,I=await fetch(D);if(!I.ok)throw new Error(`Failed to fetch standings: ${I.status}`);const A=await I.json(),T=A.findIndex(F=>F.name&&F.name.toLowerCase().includes(S.toLowerCase()));if(T!==-1){x(T+1);const F=A.slice(T+1,T+5);w(F)}else m("Could not find user in standings")}catch(C){console.error("Error fetching standings:",C),m("Failed to load standings data")}finally{p(!1)}}_()},[t,s,S]),t?i.createElement("div",{className:ue.modalOverlay,onClick:a},i.createElement("div",{className:ue.dashboardModalContent,onClick:_=>_.stopPropagation()},i.createElement("div",{className:ue.modalHeader},i.createElement("h2",{className:ue.modalTitle},"🛡️ Potential Challengers"),i.createElement("button",{className:ue.closeBtn,onClick:a},"×")),i.createElement("div",{style:{padding:"20px",flex:1,overflowY:"auto",display:"flex",flexDirection:"column"}},i.createElement("p",{style:{margin:"0 0 20px 0",color:"#e0e0e0",fontSize:"0.9rem",fontStyle:"italic",textAlign:"center"}},"Players ranked below you who could challenge you in Phase 2"),d&&i.createElement("div",{style:{textAlign:"center",padding:"40px 20px",color:"#888",flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},i.createElement("div",{style:{fontSize:"1.2rem",marginBottom:"10px"}},"🔄"),"Loading potential challengers..."),h&&i.createElement("div",{style:{textAlign:"center",padding:"40px 20px",color:"#e53e3e",flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},i.createElement("div",{style:{fontSize:"1.2rem",marginBottom:"10px"}},"⚠️"),h),!d&&!h&&i.createElement(i.Fragment,null,i.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"8px",padding:"15px",marginBottom:"20px",border:"1px solid rgba(255,255,255,0.1)",textAlign:"center"}},i.createElement("div",{style:{color:"#ffffff",fontSize:"1.1rem",fontWeight:"bold",marginBottom:"5px"}},"Your Position: #",b),i.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.9rem"}},S)),i.createElement("div",{style:{marginBottom:"20px",flex:1}},i.createElement("h3",{style:{color:"#ffffff",fontSize:"1.2rem",marginBottom:"15px",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"Potential Challengers (",E.length,")"),E.length===0?i.createElement("div",{style:{textAlign:"center",padding:"20px",color:"#888",fontStyle:"italic"}},"No players ranked below you found in standings"):i.createElement("div",{style:{display:"grid",gap:"10px"}},E.map((_,C)=>i.createElement("div",{key:C,style:{background:"rgba(255,255,255,0.05)",borderRadius:"8px",padding:"15px",border:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"background-color 0.2s ease"},onMouseEnter:D=>D.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:D=>D.target.style.backgroundColor="rgba(255,255,255,0.05)"},i.createElement("div",{style:{flex:1}},i.createElement("div",{style:{color:"#ffffff",fontSize:"1rem",fontWeight:"bold",marginBottom:"5px"}},"#",b+C+1," - ",_.name||"Unknown Player"),_.record&&i.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.85rem"}},"Record: ",_.record),_.points&&i.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.85rem"}},"Points: ",_.points)),i.createElement("div",{style:{color:"#ff4444",fontSize:"1.5rem",marginLeft:"15px"}},"⚔️"))))),i.createElement("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"15px",border:"1px solid rgba(255,255,255,0.1)",marginBottom:"20px"}},i.createElement("div",{style:{color:"#ffffff",fontSize:"0.9rem",textAlign:"center",lineHeight:"1.4"}},i.createElement("strong",null,"Phase 2 Defense Rules:"),i.createElement("br",null),"• Players ranked below you can challenge you",i.createElement("br",null),"• You must accept at least 2 defense challenges",i.createElement("br",null),"• These are the players who could challenge you")))))):null}const ZA="_modalOverlay_1l7ua_7",qA="_modalContentSnazzy_1l7ua_33",QA="_modalHeaderSnazzy_1l7ua_69",VA="_modalAccentBar_1l7ua_89",XA="_modalTitleSnazzy_1l7ua_107",KA="_modalCloseBtnSnazzy_1l7ua_131",JA="_modalDetailsSnazzy_1l7ua_173",e8="_modalDetailRowSnazzy_1l7ua_189",t8="_modalDetailIcon_1l7ua_217",n8="_modalDetailLabelSnazzy_1l7ua_229",a8="_modalDetailValueSnazzy_1l7ua_243",r8="_modalOpponentName_1l7ua_263",s8="_modalVs_1l7ua_277",i8="_gameTypeIcon_1l7ua_293",o8="_modalActionBtn_1l7ua_397",ft={modalOverlay:ZA,modalContentSnazzy:qA,modalHeaderSnazzy:QA,modalAccentBar:VA,modalTitleSnazzy:XA,modalCloseBtnSnazzy:KA,modalDetailsSnazzy:JA,modalDetailRowSnazzy:e8,modalDetailIcon:t8,modalDetailLabelSnazzy:n8,modalDetailValueSnazzy:a8,modalOpponentName:r8,modalVs:s8,gameTypeIcon:i8,modalActionBtn:o8},g2=""+new URL("ball9-U9rUK9VA.jpg",import.meta.url).href,y2=""+new URL("ball10-pPX9kWaM.jpg",import.meta.url).href;function N0({open:t,onClose:a,player1:e,player2:n,onSelect:s}){return t?i.createElement(Rn,{open:t,onClose:a,title:"Who won?",maxWidth:"340px"},i.createElement("div",{style:{textAlign:"center",marginBottom:18,color:"#fff",fontSize:"1.1em"}},"Please select the winner:"),i.createElement("div",{style:{display:"flex",flexDirection:"column",gap:16,alignItems:"center"}},i.createElement("button",{style:{background:"#23232a",color:"#28a745",border:"2px solid #28a745",borderRadius:8,padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",minWidth:"160px"},onClick:()=>s(e)},e),i.createElement("button",{style:{background:"#23232a",color:"#e53e3e",border:"2px solid #e53e3e",borderRadius:8,padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",minWidth:"160px"},onClick:()=>s(n)},n)),i.createElement("button",{style:{marginTop:24,background:"#6c757d",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px",display:"block",marginLeft:"auto",marginRight:"auto"},onClick:a},"Cancel")):null}const l8=Pe;class Nn{static async request(a,e={}){const n=`${l8}${a}`,s={headers:{"Content-Type":"application/json",Accept:"application/json",...e.headers},signal:AbortSignal.timeout(3e4),credentials:"include",mode:"cors",...e},l=3;let c;for(let d=1;d<=l;d++)try{console.log(`API Request (attempt ${d}): ${n}`);const p=await fetch(n,s);if(!p.ok)throw new Error(`API Error: ${p.status} - ${p.statusText}`);const h=await p.json();return console.log(`API Success: ${n}`),h}catch(p){if(c=p,console.warn(`API Request failed (attempt ${d}/${l}): ${n}`,p),p.message.includes("400")||p.message.includes("401")||p.message.includes("403")||p.message.includes("404"))break;if(d<l){const h=Math.min(1e3*Math.pow(2,d-1),5e3);await new Promise(m=>setTimeout(m,h))}}throw console.error(`API Request failed after ${l} attempts: ${n}`,c),c}static get(a){return this.request(a)}static post(a,e){return this.request(a,{method:"POST",body:JSON.stringify(e)})}static patch(a,e){return this.request(a,{method:"PATCH",body:JSON.stringify(e)})}static delete(a){return this.request(a,{method:"DELETE"})}static async testConnection(){try{const a=await this.get("/health");return console.log("Backend connection test successful:",a),!0}catch(a){return console.error("Backend connection test failed:",a),!1}}}const es={async getPendingProposals(t,a){return Nn.get(`/api/proposals/by-name?receiverName=${encodeURIComponent(t)}&division=${encodeURIComponent(a)}`)},async getSentProposals(t,a){return Nn.get(`/api/proposals/by-sender?senderName=${encodeURIComponent(t)}&division=${encodeURIComponent(a)}`)},async updateProposalStatus(t,a,e){return Nn.patch(`/api/proposals/${t}/status`,{status:a,note:e})},async createProposal(t){return Nn.post("/api/proposals",t)},async counterProposal(t,a){return Nn.patch(`/api/proposals/${t}/counter`,a)},async markCompleted(t,a,e,n){return Nn.patch(`/api/matches/completed/${t}`,{winner:a,markedByName:e,markedByEmail:n})},async cancelProposal(t){return Nn.post(`/api/proposals/${t}/cancel`)},async getAllProposals(t){const a=t?`?division=${encodeURIComponent(t)}`:"";return Nn.get(`/api/proposals/debug-list${a}`)}};function c8(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[l,c,d]=t.split("-"),p=new Date(parseInt(l),parseInt(c)-1,parseInt(d)),h=String(p.getMonth()+1).padStart(2,"0"),m=String(p.getDate()).padStart(2,"0"),b=p.getFullYear();return`${h}-${m}-${b}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const l=t.split("/");if(l.length===3){const[c,d,p]=l;a=new Date(p,c-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}function u8({open:t,onClose:a,match:e,onCompleted:n,userPin:s,onMatchUpdated:l,senderName:c,senderEmail:d}){const[p,h]=v.useState({x:0,y:0}),[m,b]=v.useState(!1),x=v.useRef({x:0,y:0}),E=O=>{b(!0),x.current={x:O.clientX-p.x,y:O.clientY-p.y},document.body.style.userSelect="none"},w=O=>{m&&h({x:O.clientX-x.current.x,y:O.clientY-x.current.y})},S=()=>{b(!1),document.body.style.userSelect=""};v.useEffect(()=>(m?(window.addEventListener("mousemove",w),window.addEventListener("mouseup",S)):(window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",S)),()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",S)}),[m]);const[_,C]=v.useState(!1),[D,I]=v.useState(!1),[A,T]=v.useState({player1:"",player2:""}),[F,J]=v.useState(e);v.useEffect(()=>{J(e)},[e]);const H=()=>{let O=e.player||e.senderName,B=e.opponent||e.receiverName;T({player1:O,player2:B}),I(!0)},Z=async O=>{I(!1),C(!0);const B=c&&c.trim()?c:F.player||F.senderName||"Unknown",U=d&&d.trim()?d:F.senderEmail||"unknown@example.com";console.log("Marking winner with:",{winner:O,markedByName:B,markedByEmail:U});try{const M=await es.markCompleted(F._id,O,B,U);M&&M.proposal?(J(M.proposal),l&&l(M.proposal)):(J({...F,winner:O}),l&&l({...F,winner:O})),n&&n(F._id)}catch{alert("Failed to mark as completed.")}C(!1)};if(!t||!F)return null;let K=new Date,X="",W="";if(F.date&&F.time){const[O,B,U]=F.date.split("-"),M=`${O}-${B.padStart(2,"0")}-${U.padStart(2,"0")}`;let z=F.time.trim().toUpperCase(),[G,q]=z.split(" "),[R,j]=G.split(":").map(Number);q==="PM"&&R<12&&(R+=12),q==="AM"&&R===12&&(R=0);const ne=R.toString().padStart(2,"0"),ae=(j||0).toString().padStart(2,"0"),se=`${ne}:${ae}`;K=new Date(`${M}T${se}:00`),X=c8(F.date),W=K.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})}return i.createElement("div",{className:ft.modalOverlay,onClick:a},i.createElement("div",{className:ft.modalContentSnazzy,style:{transform:`translate(${p.x}px, ${p.y}px)`,cursor:m?"grabbing":"default"},onClick:O=>O.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Match Details",tabIndex:-1},i.createElement("button",{className:ft.modalCloseBtnSnazzy,onClick:a,"aria-label":"Close"},"×"),i.createElement("div",{className:ft.modalHeaderSnazzy,onMouseDown:E,style:{cursor:"grab",userSelect:"none"}},i.createElement("span",{className:ft.modalAccentBar}),i.createElement("h2",{className:ft.modalTitleSnazzy},"🎱 Match Details")),i.createElement("div",{className:ft.modalDetailsSnazzy},i.createElement("div",{className:ft.modalDetailRowSnazzy},i.createElement("span",{className:ft.modalDetailIcon},"🤝"),i.createElement("span",{className:ft.modalDetailLabelSnazzy},"Players:"),i.createElement("span",{className:ft.modalDetailValueSnazzy},i.createElement("span",{className:ft.modalOpponentName},F.player||F.senderName),i.createElement("span",{className:ft.modalVs},"vs"),i.createElement("span",{className:ft.modalOpponentName},F.opponent||F.receiverName))),i.createElement("div",{className:ft.modalDetailRowSnazzy},i.createElement("span",{className:ft.modalDetailIcon},"📅"),i.createElement("span",{className:ft.modalDetailLabelSnazzy},"Date:"),i.createElement("span",{className:ft.modalDetailValueSnazzy},X)),i.createElement("div",{className:ft.modalDetailRowSnazzy},i.createElement("span",{className:ft.modalDetailIcon},"⏰"),i.createElement("span",{className:ft.modalDetailLabelSnazzy},"Time:"),i.createElement("span",{className:ft.modalDetailValueSnazzy},W)),i.createElement("div",{className:ft.modalDetailRowSnazzy},i.createElement("span",{className:ft.modalDetailIcon},"��"),i.createElement("span",{className:ft.modalDetailLabelSnazzy},"Location:"),i.createElement("span",{className:ft.modalDetailValueSnazzy},F.location)),F.gameType&&i.createElement("div",{className:ft.modalDetailRowSnazzy},d8(F.gameType),i.createElement("span",{className:ft.modalDetailLabelSnazzy},"Game Type:"),i.createElement("span",{className:ft.modalDetailValueSnazzy},F.gameType)),F.raceLength&&i.createElement("div",{className:ft.modalDetailRowSnazzy},i.createElement("span",{className:ft.modalDetailIcon},"🏁"),i.createElement("span",{className:ft.modalDetailLabelSnazzy},"Race to:"),i.createElement("span",{className:ft.modalDetailValueSnazzy},F.raceLength)),F.winner&&i.createElement("div",{style:{color:"#ffd700",fontWeight:700,marginTop:6,fontSize:"1em"}},"🏆 Winner: ",F.winner,s==="777777"&&F.winnerChangedByName&&i.createElement("span",{style:{color:"#aaa",fontWeight:400,fontSize:"0.95em",marginLeft:8}},"(marked by ",F.winnerChangedByName,F.winnerChangedAt?` on ${new Date(F.winnerChangedAt).toLocaleString()}`:"",")"))),!F.completed&&i.createElement(i.Fragment,null,i.createElement("button",{className:ft.modalActionBtn,onClick:H,disabled:_,style:{marginTop:16,minWidth:180},type:"button"},_?"Marking...":"Mark as Completed"),i.createElement(N0,{open:D,onClose:()=>I(!1),player1:A.player1,player2:A.player2,onSelect:Z}))))}function d8(t){if(!t)return i.createElement("span",{className:ft.modalDetailIcon},"🎯");const a=t.trim().toLowerCase();return a==="8 ball"||a==="8-ball"||a==="8ball"?i.createElement("img",{src:If,alt:"8 Ball",className:ft.gameTypeIcon}):a==="9 ball"||a==="9-ball"||a==="9ball"?i.createElement("img",{src:g2,alt:"9 Ball",className:ft.gameTypeIcon}):a==="10 ball"||a==="10-ball"||a==="10ball"?i.createElement("img",{src:y2,alt:"10 Ball",className:ft.gameTypeIcon}):a==="mixed"||a==="mixed games"?i.createElement(i.Fragment,null,i.createElement("img",{src:If,alt:"8 Ball",className:ft.gameTypeIcon}),i.createElement("img",{src:g2,alt:"9 Ball",className:ft.gameTypeIcon}),i.createElement("img",{src:y2,alt:"10 Ball",className:ft.gameTypeIcon})):i.createElement("span",{className:ft.modalDetailIcon},"🎯")}const f8="_proposalList_1gl2k_39",p8="_proposalCardButton_1gl2k_169",m8="_proposalCardLabel_1gl2k_211",h8="_proposalCardMessage_1gl2k_223",g8="_modalContent_1gl2k_277",y8="_confirmDialogBox_1gl2k_345",la={proposalList:f8,proposalCardButton:p8,proposalCardLabel:m8,proposalCardMessage:h8,modalContent:g8,confirmDialogBox:y8};function b2(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[l,c,d]=t.split("-"),p=new Date(parseInt(l),parseInt(c)-1,parseInt(d)),h=String(p.getMonth()+1).padStart(2,"0"),m=String(p.getDate()).padStart(2,"0"),b=p.getFullYear();return`${h}-${m}-${b}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const l=t.split("/");if(l.length===3){const[c,d,p]=l;a=new Date(p,c-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}function b8(t){if(!t)return"N/A";if(t.includes(":")&&t.length===5){const[a,e]=t.split(":"),n=parseInt(a),s=n>=12?"PM":"AM";return`${n===0?12:n>12?n-12:n}:${e} ${s}`}return t}function Vh({proposals:t,onSelect:a,onClose:e,type:n="received",isAdmin:s=!1,senderEmail:l,senderName:c,onProposalUpdated:d}){console.log("Proposals:",t);const[p,h]=v.useState(null),[m,b]=v.useState(!1),[x,E]=v.useState(""),[w,S]=v.useState(t),[_,C]=v.useState("all"),D=t.filter(U=>U.isCounter),I=t.filter(U=>!U.isCounter),A=_==="counter"?D:I,[T,F]=v.useState(!1),[J,H]=v.useState(null),[Z,K]=v.useState({player1:"",player2:""}),[X,W]=v.useState(!1),O=async U=>{b(!0),E("");try{await es.cancelProposal(U),S(M=>M.filter(z=>z._id!==U)),h(null)}catch{E("Failed to cancel proposal. Please try again.")}finally{b(!1)}},B=n==="completed"?w:t;return i.createElement(Rn,{open:!0,onClose:e,title:n==="completed"?"Completed Matches":n==="sent"?"Matches You Proposed":"Pending Match Proposals",maxWidth:"600px"},i.createElement("div",{className:la.modalContent,style:{position:"relative",maxHeight:"none",overflowY:"visible"}},n!=="completed"&&i.createElement("div",{style:{display:"flex",gap:8,marginBottom:16}},i.createElement("button",{onClick:()=>C("all"),style:{background:_==="all"?"#e53e3e":"#333",color:"#fff",border:"none",borderRadius:"6px",padding:"0.5rem 1.2rem",fontWeight:"bold",cursor:"pointer",boxShadow:_==="all"?"0 2px 8px #e53e3e44":"none",position:"relative"}},"All Proposals (",I.length,")",I.length>0&&i.createElement("span",{style:{background:"#fff",color:"#e53e3e",borderRadius:"50%",padding:"2px 8px",fontSize:"0.85em",fontWeight:"bold",marginLeft:8,position:"absolute",top:"-8px",right:"-12px",minWidth:24,textAlign:"center",boxShadow:"0 1px 4px #0002"}},I.length)),i.createElement("button",{onClick:()=>C("counter"),style:{background:_==="counter"?"#ff9800":"#333",color:"#fff",border:"none",borderRadius:"6px",padding:"0.5rem 1.2rem",fontWeight:"bold",cursor:"pointer",boxShadow:_==="counter"?"0 2px 8px #ff980044":"none",position:"relative"}},"Counter Proposals (",D.length,")",D.length>0&&i.createElement("span",{style:{background:"#fff",color:"#ff9800",borderRadius:"50%",padding:"2px 8px",fontSize:"0.85em",fontWeight:"bold",marginLeft:8,position:"absolute",top:"-8px",right:"-12px",minWidth:24,textAlign:"center",boxShadow:"0 1px 4px #0002"}},D.length))),i.createElement("ul",{className:la.proposalList,style:{listStyle:"none",padding:0,margin:0}},n==="completed"?B.map(U=>i.createElement("li",{key:U._id,style:{position:"relative",marginBottom:12}},i.createElement("div",{className:la.proposalCardButton,style:{cursor:"default",background:"#23232a",color:"#28a745",border:"2px solid #28a745",borderRadius:8,padding:"1rem",fontWeight:600}},i.createElement("div",null,i.createElement("span",{className:la.proposalCardLabel},"Opponent:")," ",U.opponent||U.receiverName||U.senderName),i.createElement("div",null,i.createElement("span",{className:la.proposalCardLabel},"Date:")," ",b2(U.date),"  ",i.createElement("span",{className:la.proposalCardLabel},"Time:")," ",U.time),i.createElement("div",null,i.createElement("span",{className:la.proposalCardLabel},"Location:")," ",U.location),i.createElement("div",null,i.createElement("span",{className:la.proposalCardLabel},"Game Type:")," ",U.gameType),U.winner&&i.createElement("div",{style:{color:"#ffd700",fontWeight:700,marginTop:6,fontSize:"1em"}},"🏆 Winner: ",U.winner,s&&U.winnerChangedByName&&i.createElement("span",{style:{color:"#aaa",fontWeight:400,fontSize:"0.95em",marginLeft:8}},"(marked by ",U.winnerChangedByName,U.winnerChangedAt?` on ${new Date(U.winnerChangedAt).toLocaleString()}`:"",")")),s&&i.createElement("button",{style:{marginTop:10,background:"#444",color:"#fff",border:"1px solid #ffd700",borderRadius:6,padding:"4px 12px",fontWeight:600,cursor:"pointer",fontSize:"0.95em",display:"inline-block"},disabled:X,onClick:()=>{const M=U.player||U.senderName,z=U.opponent||U.receiverName;H(U),K({player1:M,player2:z}),F(!0)},type:"button"},X?"Saving...":U.winner?"Edit Winner":"Set Winner")))):A.map(U=>i.createElement("li",{key:U._id,style:{position:"relative"}},i.createElement("button",{onClick:()=>a(U),className:la.proposalCardButton},i.createElement("div",null,i.createElement("span",{className:la.proposalCardLabel},n==="sent"?"To:":"From:"),n==="sent"?U.receiverName:U.senderName,U.isCounter&&i.createElement("span",{style:{background:"#ff9800",color:"#fff",borderRadius:"6px",padding:"2px 8px",fontSize:"0.85em",marginLeft:"8px",fontWeight:"bold",display:"inline-block"}},"Counter Proposal")),i.createElement("div",null,i.createElement("span",{className:la.proposalCardLabel},"Date:")," ",b2(U.date),"  ",i.createElement("span",{className:la.proposalCardLabel},"Time:")," ",b8(U.time)),i.createElement("div",null,i.createElement("span",{className:la.proposalCardLabel},"Location:")," ",U.location),i.createElement("div",{className:la.proposalCardMessage},U.message),i.createElement("div",null,i.createElement("span",{className:la.proposalCardLabel},"Status:"),i.createElement("span",{style:{color:U.status==="pending"?"#d32f2f":U.status==="countered"?"#fbc02d":"#388e3c"}},U.status))),n==="sent"&&U.status==="pending"&&i.createElement("button",{className:la.cancelProposalBtn,style:{position:"absolute",top:10,right:10},onClick:M=>{M.stopPropagation(),h(U._id)},disabled:m},"Cancel")))),A.length===0&&i.createElement("div",{style:{color:"#ffecb3",textAlign:"center",marginTop:16}},"Nothing to see here."),p&&i.createElement("div",{className:la.confirmDialogBox,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1001,background:"#222",color:"#fff",borderRadius:"10px",padding:"2rem 2.5rem",boxShadow:"0 4px 32px #000a",maxWidth:"90vw",minWidth:"260px",textAlign:"center",border:"2px solid #e53e3e"}},i.createElement("p",null,"Are you sure you want to cancel this proposal?"),i.createElement("button",{onClick:()=>O(p),disabled:m,style:{marginRight:12}},m?"Cancelling...":"Yes, Cancel"),i.createElement("button",{onClick:()=>h(null),disabled:m},"No, Go Back"),x&&i.createElement("div",{style:{color:"red",marginTop:8}},x))),i.createElement(N0,{open:T,onClose:()=>F(!1),player1:Z.player1,player2:Z.player2,onSelect:async U=>{if(J){W(!0);try{const M=await es.markCompleted(J._id,U,c,l),z=M&&M.proposal?M.proposal:{...J,winner:U,winnerChangedByName:c,winnerChangedByEmail:l,winnerChangedAt:new Date().toISOString()};S(G=>G.map(q=>q._id===J._id?z:q)),d&&d(z),F(!1)}catch{alert("Failed to update winner.")}W(!1)}}}))}function v8(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[l,c,d]=t.split("-"),p=new Date(parseInt(l),parseInt(c)-1,parseInt(d)),h=String(p.getMonth()+1).padStart(2,"0"),m=String(p.getDate()).padStart(2,"0"),b=p.getFullYear();return`${h}-${m}-${b}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const l=t.split("/");if(l.length===3){const[c,d,p]=l;a=new Date(p,c-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}function x8({proposal:t,phase:a,userNote:e,setUserNote:n,onConfirm:s,onClose:l,onCounterPropose:c,showNote:d=!0,confirmLabel:p="✅ Confirm Match",currentUserName:h,currentUserEmail:m}){if(!t)return null;const{senderName:b,receiverName:x,senderEmail:E,receiverEmail:w,day:S,date:_,time:C,location:D,gameType:I,raceLength:A,message:T,proposalNote:F}=t,J=m&&E&&m.toLowerCase()===E.toLowerCase()||h&&b&&h.toLowerCase()===b.toLowerCase();return i.createElement("div",{className:un.confirmMatchCard},i.createElement("h1",{className:un.confirmMatchTitle},i.createElement("span",{className:un.redTitle},"🎱 Confirm Match")),i.createElement("div",{className:un.confirmMatchDetails},i.createElement("div",{className:un.detailRow},i.createElement("strong",{className:un.redTitle},"You:")," ",x||t.to||"N/A"),i.createElement("div",{className:un.detailRow},i.createElement("strong",{className:un.redTitle},"Opponent:")," ",b||t.from||"N/A"),S&&i.createElement("div",{className:un.detailRow},i.createElement("strong",{className:un.redTitle},"Day:")," ",S),i.createElement("div",{className:un.detailRow},i.createElement("strong",{className:un.redTitle},"Date:")," ",v8(_)),i.createElement("div",{className:un.detailRow},i.createElement("strong",{className:un.redTitle},"Time:")," ",C||"N/A"),i.createElement("div",{className:un.detailRow},i.createElement("strong",{className:un.redTitle},"Location:")," ",D||"N/A"),I&&i.createElement("div",{className:un.detailRow},i.createElement(mp,{gameType:I,size:16}),i.createElement("strong",{className:un.redTitle},"Game Type:")," ",I),A&&i.createElement("div",{className:un.detailRow},i.createElement("strong",{className:un.redTitle},"Race to:")," ",A),i.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:12,marginTop:18,justifyContent:"center",paddingBottom:8,width:"100%",boxSizing:"border-box"}},J?i.createElement(i.Fragment,null,i.createElement("span",{style:{color:"#888",fontWeight:500,fontSize:"1.1em"}},"You proposed this match. You can edit or message, but only your opponent can confirm/counter/cancel."),i.createElement("button",{className:un.confirmBtn,style:{background:"#aaa",minWidth:120,marginLeft:16},onClick:l},"OK")):i.createElement(i.Fragment,null,i.createElement("button",{className:un.confirmBtn,style:{minWidth:120},onClick:s},p),c&&i.createElement("button",{className:un.confirmBtn,style:{background:"#fff",color:"#d32f2f",border:"1.5px solid #d32f2f",minWidth:120},onClick:c,type:"button"},"Counter-Propose"),i.createElement("button",{className:un.confirmBtn,style:{background:"#aaa",minWidth:120},onClick:l},"Close")))))}function Lg(t){const a={Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat",Sunday:"Sun"},e={Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]};return t&&t.split(/\r?\n/).forEach(n=>{const s=n.match(/Day:\s*(\w+),\s*Available From:\s*([\w:]+),\s*Available Until:\s*([\w: ]+)/i);if(s){const[l,c,d,p]=s,h=a[c];h&&e[h].push(`${d} - ${p}`)}}),e}function Hw({open:t,onClose:a,opponents:e,onOpponentClick:n,phase:s,selectedCalendarDate:l,smartMatchMode:c=!1,allPlayers:d=[]}){if(!t)return null;const p=l?e.filter(h=>{if(!h.player||!h.player.availability)return!1;const b=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][l.getDay()],x=h.player.availability;return x[b]&&x[b].length>0}):e;return i.createElement(Rn,{open:t,onClose:a,title:c?`🧠 Smart Match - Select Opponent${l?` (${l.toLocaleDateString()})`:""}`:`🎱 Select Opponent - ${s==="scheduled"||s==="offseason"?"Phase 1":"Phase 2"}${l?` (${l.toLocaleDateString()})`:""}`,maxWidth:"500px"},i.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},p.length===0?i.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},l?`No opponents available for ${l.toLocaleDateString()} (${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][l.getDay()]}).`:"No opponents available for scheduling at this time."):i.createElement("div",{style:{display:"grid",gap:"8px"}},p.map((h,m)=>i.createElement("button",{key:h.player&&h.player.email||`${h.opponentName}-${m}`||`opponent-${m}`,onClick:()=>n(h.player&&h.player.name?h.player.name:h.opponentName),style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:b=>{b.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",b.target.style.transform="translateY(-2px)",b.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:b=>{b.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",b.target.style.transform="translateY(0)",b.target.style.boxShadow="none"}},h.player&&h.player.name?h.player.name:h.opponentName)))))}function _p({player:t,onClose:a,senderEmail:e,onProposeMatch:n,selectedDivision:s,phase:l}){if(!t)return null;const[c,d]=v.useState(!1),[p,h]=v.useState(10);return v.useEffect(()=>{let m;return c&&(h(10),m=setInterval(()=>{h(b=>b<=1?(clearInterval(m),d(!1),10):b-1)},1e3)),()=>clearInterval(m)},[c]),i.createElement(Rn,{open:!0,onClose:a,title:`👤 ${t.name||`${t.firstName} ${t.lastName}`}`,maxWidth:"600px"},i.createElement("div",{style:{textAlign:"left"}},i.createElement("div",{style:{fontSize:"0.9rem",color:"#888",marginBottom:"1.5rem",textAlign:"center"}},l==="scheduled"?"Phase 1 (Scheduled)":l==="challenge"?"Phase 2 (Challenge)":l),i.createElement("div",{style:{marginBottom:"1.5rem"}},i.createElement("h3",{style:{color:"#e53e3e",marginBottom:"0.5rem",fontSize:"1.1rem",textAlign:"center"}},"Preferred Locations:"),i.createElement("div",{style:{color:"#fff",textAlign:"center"}},t.locations?(()=>{const m=t.locations.split(/\r?\n/).filter(Boolean),b=[];for(let x=0;x<m.length;x+=5)b.push(m.slice(x,x+5));return b.map((x,E)=>i.createElement("div",{key:E,style:{display:"flex",justifyContent:"center",marginBottom:"0.5em",flexWrap:"wrap",gap:"0.2em"}},x.map((w,S)=>i.createElement("span",{key:w+S,style:{textAlign:"center"}},w,S<x.length-1&&i.createElement("span",{style:{color:"#e53e3e",margin:"0 0.3em"}}," • ")))))})():"No locations specified")),i.createElement("div",{style:{marginBottom:"1.5rem"}},i.createElement("h3",{style:{color:"#e53e3e",marginBottom:"0.5rem",fontSize:"1.1rem",textAlign:"center"}},"Availability:"),i.createElement("div",{style:{color:"#fff",fontSize:"0.9rem",marginBottom:"1rem",textAlign:"center",fontStyle:"italic"}},"Pick a timeblock within a day to schedule a match with this opponent."),i.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"8px"}},i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"}},["Mon","Tue","Wed"].map(m=>i.createElement("div",{key:m,style:{textAlign:"center"}},i.createElement("div",{style:{color:"#e53e3e",fontWeight:"bold",marginBottom:"0.5rem",fontSize:"0.9rem"}},m),!t.availability||!t.availability[m]||t.availability[m].length===0?i.createElement("div",{style:{color:"#666",fontSize:"0.8rem",padding:"0.5rem",background:"#222",borderRadius:"4px"}},"—"):(t.availability[m]||[]).map((b,x)=>i.createElement("div",{key:x,onClick:()=>{n&&n(m,b,l,s)},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"1px solid #e53e3e",borderRadius:"6px",padding:"0.5rem",fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"0.5rem"},onMouseEnter:E=>{E.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",E.target.style.transform="translateY(-1px)",E.target.style.boxShadow="0 2px 8px rgba(229, 62, 62, 0.3)"},onMouseLeave:E=>{E.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",E.target.style.transform="translateY(0)",E.target.style.boxShadow="none"},tabIndex:0,role:"button","aria-label":`Propose match on ${m} at ${b}`,onKeyPress:E=>{(E.key==="Enter"||E.key===" ")&&n&&n(m,b,l,s)}},b))))),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"}},["Thu","Fri","Sat"].map(m=>i.createElement("div",{key:m,style:{textAlign:"center"}},i.createElement("div",{style:{color:"#e53e3e",fontWeight:"bold",marginBottom:"0.5rem",fontSize:"0.9rem"}},m),!t.availability||!t.availability[m]||t.availability[m].length===0?i.createElement("div",{style:{color:"#666",fontSize:"0.8rem",padding:"0.5rem",background:"#222",borderRadius:"4px"}},"—"):(t.availability[m]||[]).map((b,x)=>i.createElement("div",{key:x,onClick:()=>{n&&n(m,b,l,s)},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"1px solid #e53e3e",borderRadius:"6px",padding:"0.5rem",fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"0.5rem"},onMouseEnter:E=>{E.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",E.target.style.transform="translateY(-1px)",E.target.style.boxShadow="0 2px 8px rgba(229, 62, 62, 0.3)"},onMouseLeave:E=>{E.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",E.target.style.transform="translateY(0)",E.target.style.boxShadow="none"},tabIndex:0,role:"button","aria-label":`Propose match on ${m} at ${b}`,onKeyPress:E=>{(E.key==="Enter"||E.key===" ")&&n&&n(m,b,l,s)}},b))))))),i.createElement("div",{style:{marginBottom:"1.5rem",textAlign:"center"}},i.createElement("h3",{style:{color:"#e53e3e",marginBottom:"0.5rem",fontSize:"1.1rem",textAlign:"center"}},"Contact Information:"),i.createElement("div",{style:{color:"#fff",textAlign:"center"}},c?i.createElement("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid #e53e3e",borderRadius:"6px",padding:"1rem"}},i.createElement("div",{style:{marginBottom:"0.5rem"}},i.createElement("strong",null,"Email:")," ",t.email||"Not provided"),t.phone&&i.createElement("div",{style:{marginBottom:"0.5rem"}},i.createElement("strong",null,"Phone:")," ",t.phone),t.text&&i.createElement("div",{style:{marginBottom:"0.5rem"}},i.createElement("strong",null,"Text:")," ",t.text),t.preferredContacts&&t.preferredContacts.length>0&&i.createElement("div",null,i.createElement("strong",null,"Preferred Contact:")," ",t.preferredContacts.join(", ")),i.createElement("div",{style:{color:"#ffc107",fontSize:"0.9rem",marginTop:"0.5rem"}},"Auto-hiding in ",p," seconds...")):i.createElement("button",{onClick:()=>d(!0),style:{background:"#e53e3e",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer"}},"Show Contact Info")))))}const w8="_opponentName_1wgqu_479",dn={"match-proposal-content":"_match-proposal-content_1wgqu_49","match-proposal-title":"_match-proposal-title_1wgqu_135","match-proposal-row":"_match-proposal-row_1wgqu_155","match-proposal-select":"_match-proposal-select_1wgqu_177","match-proposal-location-select":"_match-proposal-location-select_1wgqu_179","match-proposal-textarea":"_match-proposal-textarea_1wgqu_225","match-proposal-date-input":"_match-proposal-date-input_1wgqu_339","match-proposal-send-btn":"_match-proposal-send-btn_1wgqu_365","match-proposal-day-value":"_match-proposal-day-value_1wgqu_449",opponentName:w8,"match-proposal-division":"_match-proposal-division_1wgqu_493","match-proposal-phase":"_match-proposal-phase_1wgqu_493","match-proposal-label-red":"_match-proposal-label-red_1wgqu_501"};var Xh={},E8=Object.create,Yw=Object.defineProperty,S8=Object.getOwnPropertyDescriptor,Gw=Object.getOwnPropertyNames,C8=Object.getPrototypeOf,_8=Object.prototype.hasOwnProperty,yu=(t,a)=>function(){return a||(0,t[Gw(t)[0]])((a={exports:{}}).exports,a),a.exports},I8=(t,a,e,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let s of Gw(a))!_8.call(t,s)&&s!==e&&Yw(t,s,{get:()=>a[s],enumerable:!(n=S8(a,s))||n.enumerable});return t},bu=(t,a,e)=>(e=t!=null?E8(C8(t)):{},I8(!t||!t.__esModule?Yw(e,"default",{value:t,enumerable:!0}):e,t)),D8=yu({"node_modules/base64-js/index.js"(t){t.byteLength=p,t.toByteArray=m,t.fromByteArray=E;var a=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(l=0,c=s.length;l<c;++l)a[l]=s[l],e[s.charCodeAt(l)]=l;var l,c;e[45]=62,e[95]=63;function d(w){var S=w.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=w.indexOf("=");_===-1&&(_=S);var C=_===S?0:4-_%4;return[_,C]}function p(w){var S=d(w),_=S[0],C=S[1];return(_+C)*3/4-C}function h(w,S,_){return(S+_)*3/4-_}function m(w){var S,_=d(w),C=_[0],D=_[1],I=new n(h(w,C,D)),A=0,T=D>0?C-4:C,F;for(F=0;F<T;F+=4)S=e[w.charCodeAt(F)]<<18|e[w.charCodeAt(F+1)]<<12|e[w.charCodeAt(F+2)]<<6|e[w.charCodeAt(F+3)],I[A++]=S>>16&255,I[A++]=S>>8&255,I[A++]=S&255;return D===2&&(S=e[w.charCodeAt(F)]<<2|e[w.charCodeAt(F+1)]>>4,I[A++]=S&255),D===1&&(S=e[w.charCodeAt(F)]<<10|e[w.charCodeAt(F+1)]<<4|e[w.charCodeAt(F+2)]>>2,I[A++]=S>>8&255,I[A++]=S&255),I}function b(w){return a[w>>18&63]+a[w>>12&63]+a[w>>6&63]+a[w&63]}function x(w,S,_){for(var C,D=[],I=S;I<_;I+=3)C=(w[I]<<16&16711680)+(w[I+1]<<8&65280)+(w[I+2]&255),D.push(b(C));return D.join("")}function E(w){for(var S,_=w.length,C=_%3,D=[],I=16383,A=0,T=_-C;A<T;A+=I)D.push(x(w,A,A+I>T?T:A+I));return C===1?(S=w[_-1],D.push(a[S>>2]+a[S<<4&63]+"==")):C===2&&(S=(w[_-2]<<8)+w[_-1],D.push(a[S>>10]+a[S>>4&63]+a[S<<2&63]+"=")),D.join("")}}}),k8=yu({"(disabled):https"(){}}),A8=yu({"node_modules/form-data/lib/browser.js"(t,a){a.exports=typeof self=="object"?self.FormData:window.FormData}}),M8=yu({"(disabled):node_modules/jsonwebtoken/index.js"(){}}),T8=yu({"(disabled):crypto"(){}}),N8=bu(D8());function Pg(t){return typeof t=="string"}function v2(t,a){return!!a&&Pg(t)}function R8(t,a){const e=[];if(Pg(t)&&v2(t,a)){for(let n=0,s=t.length;n<s;n++)if(t.charAt(n)){const l=t.charAt(n),c=a(l,n,t);e[n]=c}}else if(!Pg(t)&&!v2(t,a)){for(let n=0,s=t.length;n<s;n++)if(n in t){const l=t[n],c=a(l,n,t);e[n]=c}}return e}var L8=t=>(0,N8.fromByteArray)(new Uint8Array(R8(t,a=>a.charCodeAt(0)))),P8=t=>{const a={},e=String.fromCharCode,n=t.length;let s,l=0,c,d,p=0,h,m="";const b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(s=0;s<64;s++)a[b.charAt(s)]=s;for(d=0;d<n;d++)for(c=a[t.charAt(d)],l=(l<<6)+c,p+=6;p>=8;)((h=l>>>(p-=8)&255)||d<n-2)&&(m+=e(h));return m},x2=class{constructor(t,a,e){this.client=t,this.id=a,this.data=e}async create(){var e,n,s,l,c,d,p,h,m,b,x,E;const t={id:this.id,message_template:(e=this.data)==null?void 0:e.message_template,segment_ids:(n=this.data)==null?void 0:n.segment_ids,sender_id:(s=this.data)==null?void 0:s.sender_id,sender_mode:(l=this.data)==null?void 0:l.sender_mode,channel_template:(c=this.data)==null?void 0:c.channel_template,create_channels:(d=this.data)==null?void 0:d.create_channels,show_channels:(p=this.data)==null?void 0:p.show_channels,description:(h=this.data)==null?void 0:h.description,name:(m=this.data)==null?void 0:m.name,skip_push:(b=this.data)==null?void 0:b.skip_push,skip_webhook:(x=this.data)==null?void 0:x.skip_webhook,user_ids:(E=this.data)==null?void 0:E.user_ids},a=await this.client.createCampaign(t);return this.id=a.campaign.id,this.data=a.campaign,a}verifyCampaignId(){if(!this.id)throw new Error("Campaign id is missing. Either create the campaign using campaign.create() or set the id during instantiation - const campaign = client.campaign(id)")}async start(t){return this.verifyCampaignId(),await this.client.startCampaign(this.id,t)}update(t){return this.verifyCampaignId(),this.client.updateCampaign(this.id,t)}async delete(){return this.verifyCampaignId(),await this.client.deleteCampaign(this.id)}stop(){return this.verifyCampaignId(),this.client.stopCampaign(this.id)}get(t){return this.verifyCampaignId(),this.client.getCampaign(this.id,t)}};function $w(t,a){return function(){return t.apply(a,arguments)}}var{toString:B8}=Object.prototype,{getPrototypeOf:R0}=Object,Ip=(t=>a=>{const e=B8.call(a);return t[e]||(t[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),ss=t=>(t=t.toLowerCase(),a=>Ip(a)===t),Dp=t=>a=>typeof a===t,{isArray:_l}=Array,ru=Dp("undefined");function O8(t){return t!==null&&!ru(t)&&t.constructor!==null&&!ru(t.constructor)&&hr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}var Zw=ss("ArrayBuffer");function z8(t){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(t):a=t&&t.buffer&&Zw(t.buffer),a}var U8=Dp("string"),hr=Dp("function"),qw=Dp("number"),kp=t=>t!==null&&typeof t=="object",F8=t=>t===!0||t===!1,rf=t=>{if(Ip(t)!=="object")return!1;const a=R0(t);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},W8=ss("Date"),j8=ss("File"),H8=ss("Blob"),Y8=ss("FileList"),G8=t=>kp(t)&&hr(t.pipe),$8=t=>{let a;return t&&(typeof FormData=="function"&&t instanceof FormData||hr(t.append)&&((a=Ip(t))==="formdata"||a==="object"&&hr(t.toString)&&t.toString()==="[object FormData]"))},Z8=ss("URLSearchParams"),q8=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function vu(t,a,{allOwnKeys:e=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),_l(t))for(n=0,s=t.length;n<s;n++)a.call(null,t[n],n,t);else{const l=e?Object.getOwnPropertyNames(t):Object.keys(t),c=l.length;let d;for(n=0;n<c;n++)d=l[n],a.call(null,t[d],d,t)}}function Qw(t,a){a=a.toLowerCase();const e=Object.keys(t);let n=e.length,s;for(;n-- >0;)if(s=e[n],a===s.toLowerCase())return s;return null}var Vw=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Xw=t=>!ru(t)&&t!==Vw;function Bg(){const{caseless:t}=Xw(this)&&this||{},a={},e=(n,s)=>{const l=t&&Qw(a,s)||s;rf(a[l])&&rf(n)?a[l]=Bg(a[l],n):rf(n)?a[l]=Bg({},n):_l(n)?a[l]=n.slice():a[l]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&vu(arguments[n],e);return a}var Q8=(t,a,e,{allOwnKeys:n}={})=>(vu(a,(s,l)=>{e&&hr(s)?t[l]=$w(s,e):t[l]=s},{allOwnKeys:n}),t),V8=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),X8=(t,a,e,n)=>{t.prototype=Object.create(a.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:a.prototype}),e&&Object.assign(t.prototype,e)},K8=(t,a,e,n)=>{let s,l,c;const d={};if(a=a||{},t==null)return a;do{for(s=Object.getOwnPropertyNames(t),l=s.length;l-- >0;)c=s[l],(!n||n(c,t,a))&&!d[c]&&(a[c]=t[c],d[c]=!0);t=e!==!1&&R0(t)}while(t&&(!e||e(t,a))&&t!==Object.prototype);return a},J8=(t,a,e)=>{t=String(t),(e===void 0||e>t.length)&&(e=t.length),e-=a.length;const n=t.indexOf(a,e);return n!==-1&&n===e},eM=t=>{if(!t)return null;if(_l(t))return t;let a=t.length;if(!qw(a))return null;const e=new Array(a);for(;a-- >0;)e[a]=t[a];return e},tM=(t=>a=>t&&a instanceof t)(typeof Uint8Array<"u"&&R0(Uint8Array)),nM=(t,a)=>{const n=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=n.next())&&!s.done;){const l=s.value;a.call(t,l[0],l[1])}},aM=(t,a)=>{let e;const n=[];for(;(e=t.exec(a))!==null;)n.push(e);return n},rM=ss("HTMLFormElement"),sM=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,s){return n.toUpperCase()+s}),w2=(({hasOwnProperty:t})=>(a,e)=>t.call(a,e))(Object.prototype),iM=ss("RegExp"),Kw=(t,a)=>{const e=Object.getOwnPropertyDescriptors(t),n={};vu(e,(s,l)=>{let c;(c=a(s,l,t))!==!1&&(n[l]=c||s)}),Object.defineProperties(t,n)},oM=t=>{Kw(t,(a,e)=>{if(hr(t)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=t[e];if(hr(n)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},lM=(t,a)=>{const e={},n=s=>{s.forEach(l=>{e[l]=!0})};return _l(t)?n(t):n(String(t).split(a)),e},cM=()=>{},uM=(t,a)=>(t=+t,Number.isFinite(t)?t:a),Kh="abcdefghijklmnopqrstuvwxyz",E2="0123456789",Jw={DIGIT:E2,ALPHA:Kh,ALPHA_DIGIT:Kh+Kh.toUpperCase()+E2},dM=(t=16,a=Jw.ALPHA_DIGIT)=>{let e="";const{length:n}=a;for(;t--;)e+=a[Math.random()*n|0];return e};function fM(t){return!!(t&&hr(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}var pM=t=>{const a=new Array(10),e=(n,s)=>{if(kp(n)){if(a.indexOf(n)>=0)return;if(!("toJSON"in n)){a[s]=n;const l=_l(n)?[]:{};return vu(n,(c,d)=>{const p=e(c,s+1);!ru(p)&&(l[d]=p)}),a[s]=void 0,l}}return n};return e(t,0)},mM=ss("AsyncFunction"),hM=t=>t&&(kp(t)||hr(t))&&hr(t.then)&&hr(t.catch),xe={isArray:_l,isArrayBuffer:Zw,isBuffer:O8,isFormData:$8,isArrayBufferView:z8,isString:U8,isNumber:qw,isBoolean:F8,isObject:kp,isPlainObject:rf,isUndefined:ru,isDate:W8,isFile:j8,isBlob:H8,isRegExp:iM,isFunction:hr,isStream:G8,isURLSearchParams:Z8,isTypedArray:tM,isFileList:Y8,forEach:vu,merge:Bg,extend:Q8,trim:q8,stripBOM:V8,inherits:X8,toFlatObject:K8,kindOf:Ip,kindOfTest:ss,endsWith:J8,toArray:eM,forEachEntry:nM,matchAll:aM,isHTMLForm:rM,hasOwnProperty:w2,hasOwnProp:w2,reduceDescriptors:Kw,freezeMethods:oM,toObjectSet:lM,toCamelCase:sM,noop:cM,toFiniteNumber:uM,findKey:Qw,global:Vw,isContextDefined:Xw,ALPHABET:Jw,generateString:dM,isSpecCompliantForm:fM,toJSONObject:pM,isAsyncFn:mM,isThenable:hM};function yl(t,a,e,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",a&&(this.code=a),e&&(this.config=e),n&&(this.request=n),s&&(this.response=s)}xe.inherits(yl,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xe.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var eE=yl.prototype,tE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{tE[t]={value:t}});Object.defineProperties(yl,tE);Object.defineProperty(eE,"isAxiosError",{value:!0});yl.from=(t,a,e,n,s,l)=>{const c=Object.create(eE);return xe.toFlatObject(t,c,function(p){return p!==Error.prototype},d=>d!=="isAxiosError"),yl.call(c,t.message,a,e,n,s),c.cause=t,c.name=t.name,l&&Object.assign(c,l),c};var jt=yl,gM=null;function Og(t){return xe.isPlainObject(t)||xe.isArray(t)}function nE(t){return xe.endsWith(t,"[]")?t.slice(0,-2):t}function S2(t,a,e){return t?t.concat(a).map(function(s,l){return s=nE(s),!e&&l?"["+s+"]":s}).join(e?".":""):a}function yM(t){return xe.isArray(t)&&!t.some(Og)}var bM=xe.toFlatObject(xe,{},null,function(a){return/^is[A-Z]/.test(a)});function vM(t,a,e){if(!xe.isObject(t))throw new TypeError("target must be an object");a=a||new FormData,e=xe.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,_){return!xe.isUndefined(_[S])});const n=e.metaTokens,s=e.visitor||m,l=e.dots,c=e.indexes,p=(e.Blob||typeof Blob<"u"&&Blob)&&xe.isSpecCompliantForm(a);if(!xe.isFunction(s))throw new TypeError("visitor must be a function");function h(w){if(w===null)return"";if(xe.isDate(w))return w.toISOString();if(!p&&xe.isBlob(w))throw new jt("Blob is not supported. Use a Buffer instead.");return xe.isArrayBuffer(w)||xe.isTypedArray(w)?p&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function m(w,S,_){let C=w;if(w&&!_&&typeof w=="object"){if(xe.endsWith(S,"{}"))S=n?S:S.slice(0,-2),w=JSON.stringify(w);else if(xe.isArray(w)&&yM(w)||(xe.isFileList(w)||xe.endsWith(S,"[]"))&&(C=xe.toArray(w)))return S=nE(S),C.forEach(function(I,A){!(xe.isUndefined(I)||I===null)&&a.append(c===!0?S2([S],A,l):c===null?S:S+"[]",h(I))}),!1}return Og(w)?!0:(a.append(S2(_,S,l),h(w)),!1)}const b=[],x=Object.assign(bM,{defaultVisitor:m,convertValue:h,isVisitable:Og});function E(w,S){if(!xe.isUndefined(w)){if(b.indexOf(w)!==-1)throw Error("Circular reference detected in "+S.join("."));b.push(w),xe.forEach(w,function(C,D){(!(xe.isUndefined(C)||C===null)&&s.call(a,C,xe.isString(D)?D.trim():D,S,x))===!0&&E(C,S?S.concat(D):[D])}),b.pop()}}if(!xe.isObject(t))throw new TypeError("data must be an object");return E(t),a}var Ap=vM;function C2(t){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return a[n]})}function aE(t,a){this._pairs=[],t&&Ap(t,this,a)}var rE=aE.prototype;rE.append=function(a,e){this._pairs.push([a,e])};rE.toString=function(a){const e=a?function(n){return a.call(this,n,C2)}:C2;return this._pairs.map(function(s){return e(s[0])+"="+e(s[1])},"").join("&")};var sE=aE;function xM(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function iE(t,a,e){if(!a)return t;const n=e&&e.encode||xM,s=e&&e.serialize;let l;if(s?l=s(a,e):l=xe.isURLSearchParams(a)?a.toString():new sE(a,e).toString(n),l){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}var wM=class{constructor(){this.handlers=[]}use(t,a,e){return this.handlers.push({fulfilled:t,rejected:a,synchronous:e?e.synchronous:!1,runWhen:e?e.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){xe.forEach(this.handlers,function(e){e!==null&&t(e)})}},_2=wM,oE={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},EM=typeof URLSearchParams<"u"?URLSearchParams:sE,SM=typeof FormData<"u"?FormData:null,CM=typeof Blob<"u"?Blob:null,_M=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),IM=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Kr={classes:{URLSearchParams:EM,FormData:SM,Blob:CM},isStandardBrowserEnv:_M,isStandardBrowserWebWorkerEnv:IM,protocols:["http","https","file","blob","url","data"]};function DM(t,a){return Ap(t,new Kr.classes.URLSearchParams,Object.assign({visitor:function(e,n,s,l){return Kr.isNode&&xe.isBuffer(e)?(this.append(n,e.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},a))}function kM(t){return xe.matchAll(/\w+|\[(\w*)]/g,t).map(a=>a[0]==="[]"?"":a[1]||a[0])}function AM(t){const a={},e=Object.keys(t);let n;const s=e.length;let l;for(n=0;n<s;n++)l=e[n],a[l]=t[l];return a}function MM(t){function a(e,n,s,l){let c=e[l++];const d=Number.isFinite(+c),p=l>=e.length;return c=!c&&xe.isArray(s)?s.length:c,p?(xe.hasOwnProp(s,c)?s[c]=[s[c],n]:s[c]=n,!d):((!s[c]||!xe.isObject(s[c]))&&(s[c]=[]),a(e,n,s[c],l)&&xe.isArray(s[c])&&(s[c]=AM(s[c])),!d)}if(xe.isFormData(t)&&xe.isFunction(t.entries)){const e={};return xe.forEachEntry(t,(n,s)=>{a(kM(n),s,e,0)}),e}return null}var lE=MM;function TM(t,a,e){if(xe.isString(t))try{return(a||JSON.parse)(t),xe.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(t)}var L0={transitional:oE,adapter:["xhr","http"],transformRequest:[function(a,e){const n=e.getContentType()||"",s=n.indexOf("application/json")>-1,l=xe.isObject(a);if(l&&xe.isHTMLForm(a)&&(a=new FormData(a)),xe.isFormData(a))return s&&s?JSON.stringify(lE(a)):a;if(xe.isArrayBuffer(a)||xe.isBuffer(a)||xe.isStream(a)||xe.isFile(a)||xe.isBlob(a))return a;if(xe.isArrayBufferView(a))return a.buffer;if(xe.isURLSearchParams(a))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let d;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return DM(a,this.formSerializer).toString();if((d=xe.isFileList(a))||n.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Ap(d?{"files[]":a}:a,p&&new p,this.formSerializer)}}return l||s?(e.setContentType("application/json",!1),TM(a)):a}],transformResponse:[function(a){const e=this.transitional||L0.transitional,n=e&&e.forcedJSONParsing,s=this.responseType==="json";if(a&&xe.isString(a)&&(n&&!this.responseType||s)){const c=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(a)}catch(d){if(c)throw d.name==="SyntaxError"?jt.from(d,jt.ERR_BAD_RESPONSE,this,null,this.response):d}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Kr.classes.FormData,Blob:Kr.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xe.forEach(["delete","get","head","post","put","patch"],t=>{L0.headers[t]={}});var P0=L0,NM=xe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),RM=t=>{const a={};let e,n,s;return t&&t.split(`
`).forEach(function(c){s=c.indexOf(":"),e=c.substring(0,s).trim().toLowerCase(),n=c.substring(s+1).trim(),!(!e||a[e]&&NM[e])&&(e==="set-cookie"?a[e]?a[e].push(n):a[e]=[n]:a[e]=a[e]?a[e]+", "+n:n)}),a},I2=Symbol("internals");function Mc(t){return t&&String(t).trim().toLowerCase()}function sf(t){return t===!1||t==null?t:xe.isArray(t)?t.map(sf):String(t)}function LM(t){const a=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(t);)a[n[1]]=n[2];return a}var PM=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Jh(t,a,e,n,s){if(xe.isFunction(n))return n.call(this,a,e);if(s&&(a=e),!!xe.isString(a)){if(xe.isString(n))return a.indexOf(n)!==-1;if(xe.isRegExp(n))return n.test(a)}}function BM(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,e,n)=>e.toUpperCase()+n)}function OM(t,a){const e=xe.toCamelCase(" "+a);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+e,{value:function(s,l,c){return this[n].call(this,a,s,l,c)},configurable:!0})})}var Mp=class{constructor(t){t&&this.set(t)}set(t,a,e){const n=this;function s(c,d,p){const h=Mc(d);if(!h)throw new Error("header name must be a non-empty string");const m=xe.findKey(n,h);(!m||n[m]===void 0||p===!0||p===void 0&&n[m]!==!1)&&(n[m||d]=sf(c))}const l=(c,d)=>xe.forEach(c,(p,h)=>s(p,h,d));return xe.isPlainObject(t)||t instanceof this.constructor?l(t,a):xe.isString(t)&&(t=t.trim())&&!PM(t)?l(RM(t),a):t!=null&&s(a,t,e),this}get(t,a){if(t=Mc(t),t){const e=xe.findKey(this,t);if(e){const n=this[e];if(!a)return n;if(a===!0)return LM(n);if(xe.isFunction(a))return a.call(this,n,e);if(xe.isRegExp(a))return a.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=Mc(t),t){const e=xe.findKey(this,t);return!!(e&&this[e]!==void 0&&(!a||Jh(this,this[e],e,a)))}return!1}delete(t,a){const e=this;let n=!1;function s(l){if(l=Mc(l),l){const c=xe.findKey(e,l);c&&(!a||Jh(e,e[c],c,a))&&(delete e[c],n=!0)}}return xe.isArray(t)?t.forEach(s):s(t),n}clear(t){const a=Object.keys(this);let e=a.length,n=!1;for(;e--;){const s=a[e];(!t||Jh(this,this[s],s,t,!0))&&(delete this[s],n=!0)}return n}normalize(t){const a=this,e={};return xe.forEach(this,(n,s)=>{const l=xe.findKey(e,s);if(l){a[l]=sf(n),delete a[s];return}const c=t?BM(s):String(s).trim();c!==s&&delete a[s],a[c]=sf(n),e[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return xe.forEach(this,(e,n)=>{e!=null&&e!==!1&&(a[n]=t&&xe.isArray(e)?e.join(", "):e)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const e=new this(t);return a.forEach(n=>e.set(n)),e}static accessor(t){const e=(this[I2]=this[I2]={accessors:{}}).accessors,n=this.prototype;function s(l){const c=Mc(l);e[c]||(OM(n,l),e[c]=!0)}return xe.isArray(t)?t.forEach(s):s(t),this}};Mp.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);xe.reduceDescriptors(Mp.prototype,({value:t},a)=>{let e=a[0].toUpperCase()+a.slice(1);return{get:()=>t,set(n){this[e]=n}}});xe.freezeMethods(Mp);var Bs=Mp;function eg(t,a){const e=this||P0,n=a||e,s=Bs.from(n.headers);let l=n.data;return xe.forEach(t,function(d){l=d.call(e,l,s.normalize(),a?a.status:void 0)}),s.normalize(),l}function cE(t){return!!(t&&t.__CANCEL__)}function uE(t,a,e){jt.call(this,t??"canceled",jt.ERR_CANCELED,a,e),this.name="CanceledError"}xe.inherits(uE,jt,{__CANCEL__:!0});var Tp=uE;function zM(t,a,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?t(e):a(new jt("Request failed with status code "+e.status,[jt.ERR_BAD_REQUEST,jt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}var UM=Kr.isStandardBrowserEnv?function(){return{write:function(e,n,s,l,c,d){const p=[];p.push(e+"="+encodeURIComponent(n)),xe.isNumber(s)&&p.push("expires="+new Date(s).toGMTString()),xe.isString(l)&&p.push("path="+l),xe.isString(c)&&p.push("domain="+c),d===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function FM(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function WM(t,a){return a?t.replace(/\/+$/,"")+"/"+a.replace(/^\/+/,""):t}function dE(t,a){return t&&!FM(a)?WM(t,a):a}var jM=Kr.isStandardBrowserEnv?function(){const a=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function s(l){let c=l;return a&&(e.setAttribute("href",c),c=e.href),e.setAttribute("href",c),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=s(window.location.href),function(c){const d=xe.isString(c)?s(c):c;return d.protocol===n.protocol&&d.host===n.host}}():function(){return function(){return!0}}();function HM(t){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return a&&a[1]||""}function YM(t,a){t=t||10;const e=new Array(t),n=new Array(t);let s=0,l=0,c;return a=a!==void 0?a:1e3,function(p){const h=Date.now(),m=n[l];c||(c=h),e[s]=p,n[s]=h;let b=l,x=0;for(;b!==s;)x+=e[b++],b=b%t;if(s=(s+1)%t,s===l&&(l=(l+1)%t),h-c<a)return;const E=m&&h-m;return E?Math.round(x*1e3/E):void 0}}var GM=YM;function D2(t,a){let e=0;const n=GM(50,250);return s=>{const l=s.loaded,c=s.lengthComputable?s.total:void 0,d=l-e,p=n(d),h=l<=c;e=l;const m={loaded:l,total:c,progress:c?l/c:void 0,bytes:d,rate:p||void 0,estimated:p&&c&&h?(c-l)/p:void 0,event:s};m[a?"download":"upload"]=!0,t(m)}}var $M=typeof XMLHttpRequest<"u",ZM=$M&&function(t){return new Promise(function(e,n){let s=t.data;const l=Bs.from(t.headers).normalize(),c=t.responseType;let d;function p(){t.cancelToken&&t.cancelToken.unsubscribe(d),t.signal&&t.signal.removeEventListener("abort",d)}let h;xe.isFormData(s)&&(Kr.isStandardBrowserEnv||Kr.isStandardBrowserWebWorkerEnv?l.setContentType(!1):l.getContentType(/^\s*multipart\/form-data/)?xe.isString(h=l.getContentType())&&l.setContentType(h.replace(/^\s*(multipart\/form-data);+/,"$1")):l.setContentType("multipart/form-data"));let m=new XMLHttpRequest;if(t.auth){const w=t.auth.username||"",S=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";l.set("Authorization","Basic "+btoa(w+":"+S))}const b=dE(t.baseURL,t.url);m.open(t.method.toUpperCase(),iE(b,t.params,t.paramsSerializer),!0),m.timeout=t.timeout;function x(){if(!m)return;const w=Bs.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),_={data:!c||c==="text"||c==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:w,config:t,request:m};zM(function(D){e(D),p()},function(D){n(D),p()},_),m=null}if("onloadend"in m?m.onloadend=x:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(x)},m.onabort=function(){m&&(n(new jt("Request aborted",jt.ECONNABORTED,t,m)),m=null)},m.onerror=function(){n(new jt("Network Error",jt.ERR_NETWORK,t,m)),m=null},m.ontimeout=function(){let S=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||oE;t.timeoutErrorMessage&&(S=t.timeoutErrorMessage),n(new jt(S,_.clarifyTimeoutError?jt.ETIMEDOUT:jt.ECONNABORTED,t,m)),m=null},Kr.isStandardBrowserEnv){const w=jM(b)&&t.xsrfCookieName&&UM.read(t.xsrfCookieName);w&&l.set(t.xsrfHeaderName,w)}s===void 0&&l.setContentType(null),"setRequestHeader"in m&&xe.forEach(l.toJSON(),function(S,_){m.setRequestHeader(_,S)}),xe.isUndefined(t.withCredentials)||(m.withCredentials=!!t.withCredentials),c&&c!=="json"&&(m.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&m.addEventListener("progress",D2(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&m.upload&&m.upload.addEventListener("progress",D2(t.onUploadProgress)),(t.cancelToken||t.signal)&&(d=w=>{m&&(n(!w||w.type?new Tp(null,t,m):w),m.abort(),m=null)},t.cancelToken&&t.cancelToken.subscribe(d),t.signal&&(t.signal.aborted?d():t.signal.addEventListener("abort",d)));const E=HM(b);if(E&&Kr.protocols.indexOf(E)===-1){n(new jt("Unsupported protocol "+E+":",jt.ERR_BAD_REQUEST,t));return}m.send(s||null)})},zg={http:gM,xhr:ZM};xe.forEach(zg,(t,a)=>{if(t){try{Object.defineProperty(t,"name",{value:a})}catch{}Object.defineProperty(t,"adapterName",{value:a})}});var k2=t=>`- ${t}`,qM=t=>xe.isFunction(t)||t===null||t===!1,fE={getAdapter:t=>{t=xe.isArray(t)?t:[t];const{length:a}=t;let e,n;const s={};for(let l=0;l<a;l++){e=t[l];let c;if(n=e,!qM(e)&&(n=zg[(c=String(e)).toLowerCase()],n===void 0))throw new jt(`Unknown adapter '${c}'`);if(n)break;s[c||"#"+l]=n}if(!n){const l=Object.entries(s).map(([d,p])=>`adapter ${d} `+(p===!1?"is not supported by the environment":"is not available in the build"));let c=a?l.length>1?`since :
`+l.map(k2).join(`
`):" "+k2(l[0]):"as no adapter specified";throw new jt("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n},adapters:zg};function tg(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Tp(null,t)}function A2(t){return tg(t),t.headers=Bs.from(t.headers),t.data=eg.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),fE.getAdapter(t.adapter||P0.adapter)(t).then(function(n){return tg(t),n.data=eg.call(t,t.transformResponse,n),n.headers=Bs.from(n.headers),n},function(n){return cE(n)||(tg(t),n&&n.response&&(n.response.data=eg.call(t,t.transformResponse,n.response),n.response.headers=Bs.from(n.response.headers))),Promise.reject(n)})}var M2=t=>t instanceof Bs?t.toJSON():t;function bl(t,a){a=a||{};const e={};function n(h,m,b){return xe.isPlainObject(h)&&xe.isPlainObject(m)?xe.merge.call({caseless:b},h,m):xe.isPlainObject(m)?xe.merge({},m):xe.isArray(m)?m.slice():m}function s(h,m,b){if(xe.isUndefined(m)){if(!xe.isUndefined(h))return n(void 0,h,b)}else return n(h,m,b)}function l(h,m){if(!xe.isUndefined(m))return n(void 0,m)}function c(h,m){if(xe.isUndefined(m)){if(!xe.isUndefined(h))return n(void 0,h)}else return n(void 0,m)}function d(h,m,b){if(b in a)return n(h,m);if(b in t)return n(void 0,h)}const p={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(h,m)=>s(M2(h),M2(m),!0)};return xe.forEach(Object.keys(Object.assign({},t,a)),function(m){const b=p[m]||s,x=b(t[m],a[m],m);xe.isUndefined(x)&&b!==d||(e[m]=x)}),e}var pE="1.6.0",B0={};["object","boolean","number","function","string","symbol"].forEach((t,a)=>{B0[t]=function(n){return typeof n===t||"a"+(a<1?"n ":" ")+t}});var T2={};B0.transitional=function(a,e,n){function s(l,c){return"[Axios v"+pE+"] Transitional option '"+l+"'"+c+(n?". "+n:"")}return(l,c,d)=>{if(a===!1)throw new jt(s(c," has been removed"+(e?" in "+e:"")),jt.ERR_DEPRECATED);return e&&!T2[c]&&(T2[c]=!0,console.warn(s(c," has been deprecated since v"+e+" and will be removed in the near future"))),a?a(l,c,d):!0}};function QM(t,a,e){if(typeof t!="object")throw new jt("options must be an object",jt.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const l=n[s],c=a[l];if(c){const d=t[l],p=d===void 0||c(d,l,t);if(p!==!0)throw new jt("option "+l+" must be "+p,jt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new jt("Unknown option "+l,jt.ERR_BAD_OPTION)}}var Ug={assertOptions:QM,validators:B0},gi=Ug.validators,kf=class{constructor(t){this.defaults=t,this.interceptors={request:new _2,response:new _2}}request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=bl(this.defaults,a);const{transitional:e,paramsSerializer:n,headers:s}=a;e!==void 0&&Ug.assertOptions(e,{silentJSONParsing:gi.transitional(gi.boolean),forcedJSONParsing:gi.transitional(gi.boolean),clarifyTimeoutError:gi.transitional(gi.boolean)},!1),n!=null&&(xe.isFunction(n)?a.paramsSerializer={serialize:n}:Ug.assertOptions(n,{encode:gi.function,serialize:gi.function},!0)),a.method=(a.method||this.defaults.method||"get").toLowerCase();let l=s&&xe.merge(s.common,s[a.method]);s&&xe.forEach(["delete","get","head","post","put","patch","common"],E=>{delete s[E]}),a.headers=Bs.concat(l,s);const c=[];let d=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(a)===!1||(d=d&&w.synchronous,c.unshift(w.fulfilled,w.rejected))});const p=[];this.interceptors.response.forEach(function(w){p.push(w.fulfilled,w.rejected)});let h,m=0,b;if(!d){const E=[A2.bind(this),void 0];for(E.unshift.apply(E,c),E.push.apply(E,p),b=E.length,h=Promise.resolve(a);m<b;)h=h.then(E[m++],E[m++]);return h}b=c.length;let x=a;for(m=0;m<b;){const E=c[m++],w=c[m++];try{x=E(x)}catch(S){w.call(this,S);break}}try{h=A2.call(this,x)}catch(E){return Promise.reject(E)}for(m=0,b=p.length;m<b;)h=h.then(p[m++],p[m++]);return h}getUri(t){t=bl(this.defaults,t);const a=dE(t.baseURL,t.url);return iE(a,t.params,t.paramsSerializer)}};xe.forEach(["delete","get","head","options"],function(a){kf.prototype[a]=function(e,n){return this.request(bl(n||{},{method:a,url:e,data:(n||{}).data}))}});xe.forEach(["post","put","patch"],function(a){function e(n){return function(l,c,d){return this.request(bl(d||{},{method:a,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}kf.prototype[a]=e(),kf.prototype[a+"Form"]=e(!0)});var of=kf,VM=class mE{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(l){e=l});const n=this;this.promise.then(s=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](s);n._listeners=null}),this.promise.then=s=>{let l;const c=new Promise(d=>{n.subscribe(d),l=d}).then(s);return c.cancel=function(){n.unsubscribe(l)},c},a(function(l,c,d){n.reason||(n.reason=new Tp(l,c,d),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const e=this._listeners.indexOf(a);e!==-1&&this._listeners.splice(e,1)}static source(){let a;return{token:new mE(function(s){a=s}),cancel:a}}},XM=VM;function KM(t){return function(e){return t.apply(null,e)}}function JM(t){return xe.isObject(t)&&t.isAxiosError===!0}var Fg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Fg).forEach(([t,a])=>{Fg[a]=t});var eT=Fg;function hE(t){const a=new of(t),e=$w(of.prototype.request,a);return xe.extend(e,of.prototype,a,{allOwnKeys:!0}),xe.extend(e,a,null,{allOwnKeys:!0}),e.create=function(s){return hE(bl(t,s))},e}var jn=hE(P0);jn.Axios=of;jn.CanceledError=Tp;jn.CancelToken=XM;jn.isCancel=cE;jn.VERSION=pE;jn.toFormData=Ap;jn.AxiosError=jt;jn.Cancel=jn.CanceledError;jn.all=function(a){return Promise.all(a)};jn.spread=KM;jn.isAxiosError=JM;jn.mergeConfig=bl;jn.AxiosHeaders=Bs;jn.formToJSON=t=>lE(xe.isHTMLForm(t)?new FormData(t):t);jn.getAdapter=fE.getAdapter;jn.HttpStatusCode=eT;jn.default=jn;var su=jn,{Axios:gz,AxiosError:yz,CanceledError:bz,isCancel:vz,CancelToken:xz,VERSION:wz,all:Ez,Cancel:Sz,isAxiosError:Cz,spread:_z,toFormData:Iz,AxiosHeaders:Dz,HttpStatusCode:kz,formToJSON:Az,getAdapter:Mz,mergeConfig:Tz}=su,tT=bu(k8()),nT=bu(A8()),aT=25,rT=100,ng={hasNext:!1,hasPrev:!1},sT=100*1024*1024,iT=10,oT=100,lT={created_at:!0,deleted_at:!0,pinned_at:!0,updated_at:!0,command:!0,mentioned_users:!0,quoted_message:!0,latest_reactions:!0,own_reactions:!0,reaction_counts:!0,reply_count:!0,i18n:!0,type:!0,html:!0,__html:!0,user:!0},cT={error:!0},uT=3,dT=1e3;function gE(t,a){t.then().catch(e=>{console.warn(`failed to do ${a}, ran into error: `,e)})}var Ai=t=>new Promise(a=>setTimeout(a,t));function Wg(t){return typeof t=="function"||t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}var Wc={TOKEN_EXPIRED:40,WS_CLOSED_SUCCESS:1e3};function fT(t){return t!==null&&typeof t=="object"&&(t.readable||typeof t._read=="function")}function pT(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function mT(t){return typeof window<"u"&&"File"in window&&t instanceof File}function hT(t){return typeof window<"u"&&"Blob"in window&&t instanceof Blob}function gT(t){return{channel_mutes:!0,devices:!0,mutes:!0,total_unread_count:!0,unread_channels:!0,unread_count:!0,unread_threads:!0,invisible:!0,privacy_settings:!0,roles:!0,push_preferences:!0}[t]}function yT(t,a,e){const n=new nT.default;return fT(t)||pT(t)||mT(t)||hT(t)?a?n.append("file",t,a):n.append("file",t):n.append("file",{uri:t,name:a||t.split("/").reverse()[0],contentType:e,type:e}),n}function ha(t){const a=[],e=Array.isArray(t)?t:[t];for(const n of e){const s=Object.entries(n);s.length>1&&console.warn("client._buildSort() - multiple fields in a single sort object detected. Object's field order is not guaranteed");for(const[l,c]of s)a.push({field:l,direction:c})}return a}function Af(t){const a=Math.min(500+t*2e3,25e3),e=Math.min(Math.max(250,(t-1)*2e3),25e3);return Math.floor(Math.random()*(a-e)+e)}function sl(){return yr()}function Tc(t){let a="";for(let e=0;e<t.length;e++)a+=t[e].toString(16).padStart(2,"0");return a}function yr(){const t=xT(16);return t[6]=t[6]&15|64,t[8]=t[8]&191|128,Tc(t.subarray(0,4))+"-"+Tc(t.subarray(4,6))+"-"+Tc(t.subarray(6,8))+"-"+Tc(t.subarray(8,10))+"-"+Tc(t.subarray(10,16))}function bT(t){const a=Math.pow(2,8*t.byteLength/t.length);for(let e=0;e<t.length;e++)t[e]=Math.random()*a}var vT=typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)<"u"?crypto.getRandomValues.bind(crypto):typeof msCrypto<"u"?msCrypto.getRandomValues.bind(msCrypto):bT;function xT(t){const a=new Uint8Array(t);return vT(a),a}function wT(t){const a={};if(!t)return a;try{Object.getOwnPropertyNames(t).forEach(e=>{a[e]=Object.getOwnPropertyDescriptor(t,e)})}catch{return{error:"failed to serialize the error"}}return a}function ET(){const t=typeof navigator<"u"?navigator:typeof window<"u"&&window.navigator?window.navigator:void 0;return t?typeof t.onLine!="boolean"?!0:t.onLine:(console.warn("isOnline failed to access window.navigator and assume browser is online"),!0)}function yE(t){typeof window<"u"&&window.addEventListener&&(window.addEventListener("offline",t),window.addEventListener("online",t))}function bE(t){typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("offline",t),window.removeEventListener("online",t))}var ST=t=>{const a=[];for(const e in t)t[e]!==void 0&&(Array.isArray(t[e])||typeof t[e]=="object"?a.push(`${e}=${encodeURIComponent(JSON.stringify(t[e]))}`):a.push(`${e}=${encodeURIComponent(t[e])}`));return a.join("&")};function Ya(t){const a=e=>e?{...e,created_at:t.created_at?new Date(t.created_at):new Date,deleted_at:t.deleted_at?new Date(t.deleted_at):null,pinned_at:t.pinned_at?new Date(t.pinned_at):null,reaction_groups:CT(t.reaction_groups,t.reaction_counts,t.reaction_scores),status:t.status||"received",updated_at:t.updated_at?new Date(t.updated_at):new Date}:null;return{...a(t),error:t.error??null,quoted_message:a(t.quoted_message)}}var vE=t=>{var n;const a={...lT,...cT};return{...Object.fromEntries(Object.entries(t).filter(([s])=>!a[s])),pinned:!!t.pinned_at,mentioned_users:(n=t.mentioned_users)==null?void 0:n.map(s=>typeof s=="string"?s:s.id)}},xE=({needle:t,sortedArray:a,selectKey:e,selectValueToCompare:n=l=>l,sortDirection:s="ascending"})=>{if(!a.length)return 0;let l=0,c=a.length-1,d=0;const p=()=>{d=Math.round((l+c)/2)},h=n(t);for(;l<=c;){p();const m=n(a[d]);s==="ascending"&&h<m||s==="descending"&&h>=m?c=d-1:l=d+1}if(e){const m=e(t),b=s==="ascending"?-1:1;for(let x=l+b;0<=x&&x<a.length&&n(a[x])===h;x+=b)if(e(a[x])===m)return x}return l};function wE(t,a,e=!1,n="created_at",s=!0){const l=s||e;let c=[...t];if(e&&(c=c.filter(m=>!(m.id&&a.id===m.id))),c.length===0&&l)return c.concat(a);if(c.length===0)return c;const d=a[n].getTime(),p=c.at(-1)[n].getTime()<d;if(p&&l)return c.concat(a);if(p)return c;const h=xE({needle:a,sortedArray:c,sortDirection:"ascending",selectValueToCompare:m=>m[n].getTime(),selectKey:m=>m.id});return!e&&a.id&&c[h]&&a.id===c[h].id?(c[h]=a,c):(l&&c.splice(h,0,a),c)}function CT(t,a,e){if(t)return t;if(a&&e){const n={};for(const s of Object.keys(a))n[s]={count:a[s],sum_scores:e[s]};return n}return null}var jg=(t,a=0,{leading:e=!1,trailing:n=!0}={})=>{let s=null,l=null,c;const d=(...p)=>(s?clearTimeout(s):e&&(c=t(...p)),n&&(l=p),s=setTimeout(()=>{l&&(c=t(...l),l=null),s=null},a),c);return d.cancel=()=>{s&&clearTimeout(s)},d.flush=()=>(s&&(clearTimeout(s),s=null,l&&(c=t(...l))),c),d},EE=(t,a=200,{leading:e=!0,trailing:n=!1}={})=>{let s=null,l=null;return(...c)=>{if(s){n&&(l=c);return}e&&t(...c);const d=()=>{if(l){t(...l),l=null,s=setTimeout(d,a);return}s=null};s=setTimeout(d,a)}},_T=(t,a)=>a.split(".").reduce((e,n)=>{if(e&&typeof e=="object"&&n in e)return e[n]},t),IT=(t,a)=>{if(!Array.isArray(t))return[];const e=new Set;return t.filter(n=>{const s=_T(n,a);return e.has(s)?!1:(e.add(s),!0)})};function DT(t,a){let e=0,n=t.length-1;for(;e<=n;){const s=Math.floor((e+n)/2),l=t[s].created_at;if(!l){e+=1;continue}const c=new Date(l);if(c.getTime()===a.getTime())return s;c.getTime()<a.getTime()?e=s+1:n=s-1}return e}var kT=({parentSet:t,requestedPageSize:a,returnedPage:e,messagePaginationOptions:n})=>{var _,C;const s={...t.pagination};if(!(n!=null&&n.created_at_around))return s;let l,c,d,p;const h=new Date(n.created_at_around),[m,b]=[e[0],e.slice(-1)[0]],x=!!(m!=null&&m.created_at)&&new Date(m.created_at)>h,E=!!(b!=null&&b.created_at)&&new Date(b.created_at)<h,w=a>t.messages.length&&a>e.length,S=(a>t.messages.length||t.messages.length>=e.length)&&a>e.length;if(x)l=!1,d=!0,w&&(c=!1,p=!0);else if(E)c=!1,p=!0,w&&(l=!1,d=!0);else if(S)c=l=!1,d=p=!0;else{const[D,I]=[(m==null?void 0:m.id)&&m.id===((_=t.messages[0])==null?void 0:_.id),(b==null?void 0:b.id)&&b.id===((C=t.messages.slice(-1)[0])==null?void 0:C.id)];d=D,p=I;const A=Math.floor(e.length/2),T=DT(e,h);T!==-1&&(l=A<=T,c=A>=T)}return d&&typeof l<"u"&&(s.hasPrev=l),p&&typeof c<"u"&&(s.hasNext=c),s},AT=({parentSet:t,requestedPageSize:a,returnedPage:e,messagePaginationOptions:n})=>{var _,C;const s={...t.pagination},{id_around:l}=n||{};if(!l)return s;let c,d;const[p,h]=[e[0],e.slice(-1)[0]],[m,b]=[(p==null?void 0:p.id)===((_=t.messages[0])==null?void 0:_.id),(h==null?void 0:h.id)===((C=t.messages.slice(-1)[0])==null?void 0:C.id)];let x=m,E=b;const w=Math.floor(e.length/2);if((a>t.messages.length||t.messages.length>=e.length)&&a>e.length)d=c=!1,x=E=!0;else if(e[w])if(e[w].id===l)c=d=!0;else{let D;const I=[e.slice(0,w),e.slice(w)];c=d=!0;for(let A=0;A<I.length;A++)D=I[A].find(T=>T.id===l),D&&A===0&&(c=!1),D&&A===1&&(d=!1)}else return s;return x&&typeof c<"u"&&(s.hasPrev=c),E&&typeof d<"u"&&(s.hasNext=d),s},MT=({parentSet:t,requestedPageSize:a,returnedPage:e,messagePaginationOptions:n})=>{var _,C;const s={...t.pagination};let l,c;const[d,p]=[e[0],e.slice(-1)[0]],[h,m]=[(d==null?void 0:d.id)&&d.id===((_=t.messages[0])==null?void 0:_.id),(p==null?void 0:p.id)&&p.id===((C=t.messages.slice(-1)[0])==null?void 0:C.id)],b=n&&(n.created_at_after_or_equal||n.created_at_after||n.id_gt||n.id_gte),x=typeof n>"u"?!0:n.created_at_before_or_equal||n.created_at_before||n.id_lt||n.id_lte||n.offset,E=!b&&!x&&!(n!=null&&n.id_around)&&!(n!=null&&n.created_at_around),w=e.length>=a;(typeof x<"u"||E)&&(l=w),typeof b<"u"&&(c=w);const S=e.length===0;return(h||S)&&typeof l<"u"&&(s.hasPrev=l),(m||S)&&typeof c<"u"&&(s.hasNext=c),s},SE=t=>{var a,e,n;return t.parentSet.messages.length<t.returnedPage.length?((a=t.logger)==null||a.call(t,"error","Corrupted message set state: parent set size < returned page size"),t.parentSet.pagination):(e=t.messagePaginationOptions)!=null&&e.created_at_around?kT(t):(n=t.messagePaginationOptions)!=null&&n.id_around?AT(t):MT(t)},Ud={},ag=async({channel:t,client:a,id:e,members:n,options:s,type:l})=>{if(!t&&!l)throw new Error("Channel or channel type have to be provided to query a channel.");const c=t||a.channel(l,e,{members:n}),d=c.id?c.cid:n&&n.length?O0(c.type,n):void 0;if(!d)throw new Error("Channel ID or channel members array have to be provided to query a channel.");const p=Ud[d];if(p)await p;else try{Ud[d]=c.watch(s),await Ud[d]}finally{delete Ud[d]}return c},O0=(t,a)=>{if(!a)return;const e=[...a].sort().join(",");if(e)return`${t}:!members-${e}`},Mf=t=>{if(!t)return!1;const a=t.state.membership;return!!(a!=null&&a.pinned_at)},Fd=t=>{if(!t)return!1;const a=t.state.membership;return!!(a!=null&&a.archived_at)},Wd=t=>t?typeof t.archived=="boolean":!1,CE=({atIndex:t,sort:a,targetKey:e})=>{if(!a)return null;let n=null;if(Array.isArray(a))n=a[t]??null;else for(const s in a){if(s!==e)return null;n=a;break}return(n==null?void 0:n[e])??null},Hg=t=>{const a=TT({sort:t});return typeof a!="number"?!1:Math.abs(a)===1},TT=({sort:t})=>CE({atIndex:0,sort:t,targetKey:"pinned_at"}),_E=({channels:t})=>{let a=null;for(const e of t){if(!Mf(e))break;typeof a=="number"?a++:a=0}return a},jd=({channels:t,channelToMove:a,channelToMoveIndexWithinChannels:e,sort:n})=>{const s=e??t.findIndex(b=>b.cid===a.cid),l=s>=0,c=s===0,d=Hg(n),p=Mf(a);if(c||d&&p)return t;const h=[...t];l&&h.splice(s,1);let m=null;return d&&(m=_E({channels:h})),h.splice(typeof m=="number"?m+1:0,0,a),h},NT=t=>!!t.getTime,IE=t=>NT(t.created_at),RT=class{constructor(t){var a;this.messageSets=[],this.formatMessage=e=>Ya(e),this.setIsUpToDate=e=>{this.isUpToDate=e},this.removeMessageFromArray=(e,n)=>{const s=e.filter(l=>!(l.id&&n.id&&l.id===n.id));return{removed:s.length<e.length,result:s}},this.updateUserMessages=e=>{const n=(s,l)=>{var c;for(let d=0;d<s.length;d++){const p=s[d];((c=p.user)==null?void 0:c.id)===l.id&&(s[d]={...p,user:l})}};this.messageSets.forEach(s=>n(s.messages,e));for(const s in this.threads)n(this.threads[s],e);n(this.pinnedMessages,e)},this.deleteUserMessages=(e,n=!1)=>{const s=(l,c,d=!1)=>{var p;for(let h=0;h<l.length;h++){const m=l[h];((p=m.user)==null?void 0:p.id)===c.id&&(d?l[h]={cid:m.cid,created_at:m.created_at,deleted_at:c.deleted_at,id:m.id,latest_reactions:[],mentioned_users:[],own_reactions:[],parent_id:m.parent_id,reply_count:m.reply_count,status:m.status,thread_participants:m.thread_participants,type:"deleted",updated_at:m.updated_at,user:m.user}:l[h]={...m,type:"deleted",deleted_at:c.deleted_at?new Date(c.deleted_at):null})}};this.messageSets.forEach(l=>s(l.messages,e,n));for(const l in this.threads)s(this.threads[l],e,n);s(this.pinnedMessages,e,n)},this._channel=t,this.watcher_count=0,this.typing={},this.read={},this.initMessages(),this.pinnedMessages=[],this.pending_messages=[],this.threads={},this.mutedUsers=[],this.watchers={},this.members={},this.membership={},this.unreadCount=0,this.isUpToDate=!0,this.last_message_at=((a=t==null?void 0:t.state)==null?void 0:a.last_message_at)!=null?new Date(t.state.last_message_at):null}get messages(){var t;return((t=this.messageSets.find(a=>a.isCurrent))==null?void 0:t.messages)||[]}set messages(t){const a=this.messageSets.findIndex(e=>e.isCurrent);this.messageSets[a].messages=t}get latestMessages(){var t;return((t=this.messageSets.find(a=>a.isLatest))==null?void 0:t.messages)||[]}set latestMessages(t){const a=this.messageSets.findIndex(e=>e.isLatest);this.messageSets[a].messages=t}get messagePagination(){var t;return((t=this.messageSets.find(a=>a.isCurrent))==null?void 0:t.pagination)||ng}addMessageSorted(t,a=!1,e=!0,n="latest"){return this.addMessagesSorted([t],a,!1,e,n)}addMessagesSorted(t,a=!1,e=!1,n=!0,s="current"){var d;const{messagesToAdd:l,targetMessageSetIndex:c}=this.findTargetMessageSet(t,n,s);for(let p=0;p<l.length;p+=1){if(l[p].shadowed)continue;const m=l[p].created_at instanceof Date;let b;m?b=l[p]:(b=this.formatMessage(l[p]),b.user&&((d=this._channel)!=null&&d.cid)&&this._channel.getClient().state.updateUserReference(b.user,this._channel.cid),e&&b.id&&this.threads[b.id]&&delete this.threads[b.id],this.last_message_at||(this.last_message_at=new Date(b.created_at.getTime())),b.created_at.getTime()>this.last_message_at.getTime()&&(this.last_message_at=new Date(b.created_at.getTime())));const x=b.parent_id;if((!x||b.show_in_channel)&&c!==-1&&(this.messageSets[c].messages=this._addToMessageList(this.messageSets[c].messages,b,a,"created_at",n)),x&&!e){const E=this.threads[x]||[];this.threads[x]=this._addToMessageList(E,b,a,"created_at",n)}}return{messageSet:this.messageSets[c]}}addPinnedMessages(t){for(let a=0;a<t.length;a+=1)this.addPinnedMessage(t[a])}addPinnedMessage(t){this.pinnedMessages=this._addToMessageList(this.pinnedMessages,this.formatMessage(t),!1,"pinned_at")}removePinnedMessage(t){const{result:a}=this.removeMessageFromArray(this.pinnedMessages,t);this.pinnedMessages=a}addReaction(t,a,e){const n=a;let s;if(n||(s=this.findMessage(t.message_id)),!n&&!s)return;const l=n??s,c={id:l==null?void 0:l.id,parent_id:l==null?void 0:l.parent_id,pinned:l==null?void 0:l.pinned,show_in_channel:l==null?void 0:l.show_in_channel};return this._updateMessage(c,d=>{if(n){const p={...n};return n.own_reactions=this._addOwnReactionToMessage(d.own_reactions,t,e),p.own_reactions=this._channel.getClient().userID===t.user_id?n.own_reactions:d.own_reactions,this.formatMessage(p)}return s?this._addReactionToState(s,t,e):d}),n??s}_addReactionToState(t,a,e){if(t.reaction_groups||(t.reaction_groups={}),e)for(const d of t.own_reactions??[]){const p=t.reaction_groups[d.type];t.reaction_groups[d.type]={...p,count:p.count-1,sum_scores:p.sum_scores-(d.score??1)},t.reaction_groups[d.type].count<1&&delete t.reaction_groups[d.type]}const s=t.reaction_groups[a.type],l=a.score??1;t.reaction_groups[a.type]=s?{...s,count:s.count+1,sum_scores:s.sum_scores+l,last_reaction_at:a.created_at}:{count:1,first_reaction_at:a.created_at,last_reaction_at:a.created_at,sum_scores:l},t.own_reactions=this._addOwnReactionToMessage(t.own_reactions,a,e);const c=this._channel.getClient().userID;return t.latest_reactions=e?[...(t.latest_reactions||[]).filter(d=>d.user_id!==c),a]:[...t.latest_reactions||[],a],t}_addOwnReactionToMessage(t,a,e){return e?t=[]:t=this._removeOwnReactionFromMessage(t,a),t=t||[],this._channel.getClient().userID===a.user_id&&t.push(a),t}_removeOwnReactionFromMessage(t,a){return t&&t.filter(e=>e.user_id!==a.user_id||e.type!==a.type)}removeReaction(t,a){const e=a;let n;if(e||(n=this.findMessage(t.message_id)),!e&&!n)return;const s=e??n,l={id:s==null?void 0:s.id,parent_id:s==null?void 0:s.parent_id,pinned:s==null?void 0:s.pinned,show_in_channel:s==null?void 0:s.show_in_channel};return this._updateMessage(l,c=>e?(e.own_reactions=this._removeOwnReactionFromMessage(c.own_reactions,t),this.formatMessage(e)):n?this._removeReactionFromState(n,t):c),e}_removeReactionFromState(t,a){var s,l,c,d;const e=(s=t.own_reactions)==null?void 0:s.find(p=>p.type===a.type);if(e&&((l=t.reaction_groups)!=null&&l[e.type])){const p=t.reaction_groups[e.type];t.reaction_groups[e.type]={...p,count:p.count-1,sum_scores:p.sum_scores-(e.score??1)},t.reaction_groups[e.type].count<1&&delete t.reaction_groups[e.type]}t.own_reactions=(c=t.own_reactions)==null?void 0:c.filter(p=>p.type!==a.type);const n=this._channel.getClient().userID;return t.latest_reactions=(d=t.latest_reactions)==null?void 0:d.filter(p=>!(p.user_id===n&&p.type===a.type)),t}_updateQuotedMessageReferences({message:t,remove:a}){const e=s=>{var l,c;return{...s,created_at:s.created_at.toISOString(),pinned_at:(l=s.pinned_at)==null?void 0:l.toISOString(),updated_at:(c=s.updated_at)==null?void 0:c.toISOString()}},n=s=>{const l=s.reduce((c,d)=>(d.quoted_message_id===t.id&&c.push({...e(d),quoted_message:a?{...t,attachments:[]}:t}),c),[]);this.addMessagesSorted(l,!0)};t.parent_id?t.parent_id&&this.threads[t.parent_id]&&n(this.threads[t.parent_id]):this.messageSets.forEach(s=>n(s.messages))}removeQuotedMessageReferences(t){this._updateQuotedMessageReferences({message:t,remove:!0})}_updateMessage(t,a){const{parent_id:e,show_in_channel:n,pinned:s}=t;if(e&&this.threads[e]){const l=this.threads[e],c=l.findIndex(d=>d.id===t.id);c!==-1&&(l[c]=a(l[c]),this.threads[e]=l)}if(!n&&!e||n){const l=this.findMessageSetIndex(t);if(l!==-1){const c=this.messageSets[l].messages.findIndex(d=>d.id===t.id);if(c!==-1){const d=a(this.messageSets[l].messages[c]);this.messageSets[l].messages[c]=d}}}if(s){const l=this.pinnedMessages.findIndex(c=>c.id===t.id);l!==-1&&(this.pinnedMessages[l]=a(this.pinnedMessages[l]))}}_addToMessageList(t,a,e=!1,n="created_at",s=!0){return wE(t,a,e,n,s)}removeMessage(t){let a=!1;if(t.parent_id&&this.threads[t.parent_id]){const{removed:e,result:n}=this.removeMessageFromArray(this.threads[t.parent_id],t);this.threads[t.parent_id]=n,a=e}else{const e=t.messageSetIndex??this.findMessageSetIndex(t);if(e!==-1){const{removed:n,result:s}=this.removeMessageFromArray(this.messageSets[e].messages,t);this.messageSets[e].messages=s,a=n}}return a}filterErrorMessages(){const t=this.latestMessages.filter(a=>a.type!=="error");this.latestMessages=t}clean(){const t=new Date;for(const[a,e]of Object.entries(this.typing)){const n=typeof e.received_at=="string"?new Date(e.received_at):e.received_at||new Date;t.getTime()-n.getTime()>7e3&&(delete this.typing[a],this._channel.getClient().dispatchEvent({cid:this._channel.cid,type:"typing.stop",user:{id:a}}))}}clearMessages(){this.initMessages(),this.pinnedMessages=[]}initMessages(){this.messageSets=[{messages:[],isLatest:!0,isCurrent:!0,pagination:ng}]}async loadMessageIntoState(t,a,e=25){var d;let n,s=!1,l=!1;const c=a||t;if(t==="latest"){if(this.messages===this.latestMessages)return;n=this.messageSets.findIndex(p=>p.isLatest)}else n=this.findMessageSetIndex({id:c});n!==-1&&(this.switchToMessageSet(n),s=!0),l=!a||!!((d=this.threads[a])!=null&&d.find(p=>p.id===t)),!(s&&l)&&(s||await this._channel.query({messages:{id_around:c,limit:e}},"new"),!l&&a&&await this._channel.getReplies(a,{id_around:t,limit:e}),n=this.findMessageSetIndex({id:c}),n!==-1&&this.switchToMessageSet(n))}findMessage(t,a){if(a){const n=this.threads[a];return n?n.find(s=>s.id===t):void 0}const e=this.findMessageSetIndex({id:t});if(e!==-1)return this.messageSets[e].messages.find(n=>n.id===t)}switchToMessageSet(t){const a=this.messageSets.find(e=>e.isCurrent);a&&(a.isCurrent=!1,this.messageSets[t].isCurrent=!0)}areMessageSetsOverlap(t,a){return t.some(e=>a.find(n=>e.id===n.id))}findMessageSetIndex(t){return this.messageSets.findIndex(a=>!!a.messages.find(e=>e.id===t.id))}findTargetMessageSet(t,a=!0,e="current"){let n=t,s;if(a){const l=this.messageSets.map((p,h)=>h).filter(p=>this.areMessageSetsOverlap(this.messageSets[p].messages,t));switch(e){case"new":l.length>0?s=l[0]:t.some(p=>!p.parent_id)&&(this.messageSets.push({messages:[],isCurrent:!1,isLatest:!1,pagination:ng}),s=this.messageSets.length-1);break;case"current":s=this.messageSets.findIndex(p=>p.isCurrent);break;case"latest":s=this.messageSets.findIndex(p=>p.isLatest);break;default:s=-1}const c=l.splice(0,1)[0],d=[...l];if(c!==void 0&&c!==s&&d.push(s),d.length>0){const p=this.messageSets[c],h=this.messageSets.filter((b,x)=>d.indexOf(x)!==-1);h.forEach(b=>{p.isLatest=p.isLatest||b.isLatest,p.isCurrent=p.isCurrent||b.isCurrent,p.pagination.hasPrev=b.messages[0].created_at<p.messages[0].created_at?b.pagination.hasPrev:p.pagination.hasPrev,p.pagination.hasNext=p.messages.slice(-1)[0].created_at<b.messages.slice(-1)[0].created_at?b.pagination.hasNext:p.pagination.hasNext,n=[...n,...b.messages]}),h.forEach(b=>this.messageSets.splice(this.messageSets.indexOf(b),1)),s=this.messageSets.findIndex(b=>this.areMessageSetsOverlap(b.messages,t))}}else s=this.findMessageSetIndex(t[0]);return{targetMessageSetIndex:s,messagesToAdd:n}}},LT=t=>!!(t!=null&&t.og_scrape_url)||!!(t!=null&&t.title_link),DE=t=>{var a;return!!((a=t==null?void 0:t.localMetadata)!=null&&a.id)},PT=(t,a=[])=>t.type==="file"||!!(t.mime_type&&a.indexOf(t.mime_type)===-1&&t.type!=="video"),kE=t=>t.type==="image"&&!LT(t),BT=t=>kE(t)&&DE(t),OT=t=>t.type==="audio",zT=t=>t.type==="voiceRecording",UT=(t,a=[])=>t.type==="video"||!!(t.mime_type&&a.indexOf(t.mime_type)!==-1),FT=t=>OT(t)||PT(t)||kE(t)||UT(t)||zT(t),lf=t=>!!t.lastModified&&!("uri"in t),WT=t=>t==null||typeof t!="object"?!1:typeof FileList<"u"&&t instanceof FileList||"item"in t&&"length"in t&&!Array.isArray(t),jT=t=>t instanceof Blob&&!(t instanceof File),el=t=>t!==null&&typeof t=="object"&&!lf(t)&&!jT(t)&&typeof t.name=="string"&&typeof t.uri=="string"&&typeof t.size=="number"&&typeof t.type=="string",N2=({blobsArray:t,fileName:a,mimeType:e})=>{const n=new Blob(t,{type:e});return new File([n],a,{type:n.type})},HT=t=>{const a=t.match(/\/([^/;]+)/);return a==null?void 0:a[1]},R2=t=>{const a=HT(t);return`file_${new Date().toISOString()}${a?"."+a:""}`},Nc=t=>{const a=t.type;return a.startsWith("image/")&&!a.endsWith(".photoshop")},YT=t=>t.startsWith("image/")&&!t.endsWith(".photoshop")?"image":t.includes("video/")?"video":t.includes("audio/")?"audio":"file",L2=t=>{if(!t)return null;if(DE(t))return t;const{localMetadata:a,...e}=t;return{localMetadata:{...a??{},id:(a==null?void 0:a.id)||yr()},...e}},AE=t=>typeof t=="function",_a=class{constructor(t){this.value=t,this.handlerSet=new Set,this.next=a=>{const e=AE(a)?a(this.value):a;if(e===this.value)return;const n=this.value;this.value=e,this.handlerSet.forEach(s=>s(this.value,n))},this.partialNext=a=>this.next(e=>({...e,...a})),this.getLatestValue=()=>this.value,this.subscribe=a=>(a(this.value,void 0),this.handlerSet.add(a),()=>{this.handlerSet.delete(a)}),this.subscribeWithSelector=(a,e)=>{let n;const s=l=>{const c=a(l);let d=typeof n>"u";for(const h in n)if(n[h]!==c[h]){d=!0;break}if(!d)return;const p=n;n=c,e(c,p)};return this.subscribe(s)}}},mo=t=>{if(!t||typeof t!="object"||Array.isArray(t))return!1;const a=Object.getPrototypeOf(t);return a===null||a===Object.prototype?!1:t.constructor&&t.constructor!==Object},Yg=(t,a,e=new Set,n=new WeakSet,s=new WeakSet)=>{if(t===a)return!0;if(t==null||a==null)return!1;const l=typeof t;if(l!==typeof a)return!1;if(l!=="object")return t!==t&&a!==a?!0:t===a;const d=t,p=a;if(n.has(d)||s.has(p))return n.has(d)&&s.has(p);if(n.add(d),s.add(p),t instanceof Date&&a instanceof Date)return n.delete(d),s.delete(p),t.getTime()===a.getTime();if(t instanceof RegExp&&a instanceof RegExp)return n.delete(d),s.delete(p),t.toString()===a.toString();if(mo(t)||mo(a))return n.delete(d),s.delete(p),!1;const h=Array.isArray(t),m=Array.isArray(a);if(h!==m)return n.delete(d),s.delete(p),!1;if(h&&m){const _=t,C=a;if(_.length!==C.length)return n.delete(d),s.delete(p),!1;const D=[t,a];if(e.has(D))return n.delete(d),s.delete(p),!0;e.add(D);for(let I=0;I<_.length;I++)if(!Yg(_[I],C[I],e,n,s))return e.delete(D),n.delete(d),s.delete(p),!1;return e.delete(D),n.delete(d),s.delete(p),!0}const b=t,x=a,E=Object.keys(b),w=Object.keys(x);if(E.length!==w.length)return n.delete(d),s.delete(p),!1;for(const _ of w)if(!Object.prototype.hasOwnProperty.call(b,_))return n.delete(d),s.delete(p),!1;const S=[t,a];if(e.has(S))return n.delete(d),s.delete(p),!0;e.add(S);for(const _ of E)if(!Yg(b[_],x[_],e,n,s))return e.delete(S),n.delete(d),s.delete(p),!1;return e.delete(S),n.delete(d),s.delete(p),!0};function GT(t,a){const e={children:{}};return ME(t,a,e),z0(e)}function ME(t,a,e,n,s=new Set,l=new Set){if(Yg(t,a,new Set(s)))return;if(t==null){n!==void 0&&(e.children[String(n)]={type:"added",value:a,children:{}});return}if(typeof t=="object"&&t!==null){if(l.has(t)){n!==void 0&&(e.children[String(n)]={type:"circular",value:a,oldValue:t,children:{}});return}l.add(t)}if(typeof t!="object"||typeof a!="object"||t===null||a===null||Array.isArray(t)!==Array.isArray(a)||mo(t)||mo(a)){n!==void 0&&(e.children[String(n)]={type:"updated",value:a,oldValue:t,children:{}}),typeof t=="object"&&t!==null&&l.delete(t);return}const d=t,p=a,h=n!==void 0?{type:"updated",children:{},oldValue:t,value:a}:e;n!==void 0&&(e.children[String(n)]=h);const m=[t,a];if(s.has(m)){typeof t=="object"&&t!==null&&l.delete(t);return}s.add(m);const b=new Set([...Object.keys(d),...Object.getOwnPropertySymbols(d),...Object.keys(p),...Object.getOwnPropertySymbols(p)]);for(const x of b){const E=d[x],w=p[x];if(x in p){if(!(x in d)){h.children[String(x)]={type:"added",value:w,children:{}};continue}ME(E,w,h,x,s,l)}}s.delete(m),typeof t=="object"&&t!==null&&l.delete(t)}function TE(t={}){const{trackDiff:a=!1}=t;return function({target:n,source:s,customizer:l}){const c=Array.isArray(s)?s:[s],d=a?structuredClone(n):void 0;function p(_,C,D,I,A,T){const F=l==null?void 0:l(_,C,D,I,A,T);return F!==void 0?(Object.defineProperty(I,D,{value:F,enumerable:!0,writable:!0,configurable:!0}),!0):!1}function h(_,C){if(_&&typeof _=="object"){const D=mo(_),I=mo(C);return D||I?I?C:_:Array.isArray(_)?[..._]:{..._}}return Array.isArray(C)?[]:{}}function m(_,C,D,I,A){const T=C[D],F=_[D];if(!p(F,T,D,_,C,I))if(T&&typeof T=="object"){if(!I.has(T)){const J=h(F,T);if(Object.defineProperty(_,D,{value:J,enumerable:!0,writable:!0,configurable:!0}),mo(J))return;A.push({target:J,source:T,sourceKey:D,parentTarget:_})}}else T!==void 0&&(_[D]=T)}function b(_,C,D,I){const A=[...Object.keys(C),...Object.getOwnPropertySymbols(C)];for(const T of A)m(_,C,T,D,I)}function x({target:_,source:C,sourceKey:D,parentTarget:I},A,T){if(A.has(C)){a&&D&&I&&Object.defineProperty(I,D,{value:_,enumerable:!0,writable:!0,configurable:!0});return}!A.has(_)&&!A.has(C)&&(A.add(_),A.add(C),b(_,C,A,T),A.delete(C),A.delete(_))}function E(_,C,D=new Set){if(D.has(_)||D.has(C))return{..._};const I={..._},A=[];for(D.add(I),D.add(C),b(I,C,D,A);A.length;)x(A.pop(),D,A);return D.delete(C),D.delete(I),I}const w=c.reduce((_,C)=>E(_,C),{...n}),S=a&&d?GT(d,w):null;return{result:w,diff:S}}}function z0(t){const a={};let e=!1;for(const n in t.children){const s=z0(t.children[n]);s&&(a[n]=s,e=!0)}return t.type||e?{...t,children:a}:null}function Tf(t,a,e){return TE()({target:t,source:a,customizer:e}).result}function NE(t,a,e){const n=TE({trackDiff:!0}),{result:s,diff:l}=n({target:t,source:a,customizer:e});return{result:s,diff:z0(l??{children:{}})||{children:{}}}}var P2=({message:t})=>{var a;return{attachments:(a=(t==null?void 0:t.attachments)??[])==null?void 0:a.filter(({og_scrape_url:e})=>!e).map(e=>{const n=FT(e)?{id:yr(),uploadState:"finished"}:{id:yr()};return{...e,localMetadata:n}})}},$T=class{constructor({composer:t,message:a}){this.setCustomUploadFn=e=>{this.composer.updateConfig({attachments:{doUploadRequest:e}})},this.initState=({message:e}={})=>{this.state.next(P2({message:e}))},this.getAttachmentIndex=e=>{const n=this.attachmentsById;return this.attachments.indexOf(n[e])},this.prepareAttachmentUpdate=e=>{const n=this.attachments,s=[...this.attachments],l=this.getAttachmentIndex(e.localMetadata.id);if(l===-1)return null;const c=NE(n[l],e);if(c.diff&&Object.keys(c.diff.children).length){const p=L2(c.result);if(p)return s.splice(l,1,p),s}return null},this.updateAttachment=e=>{const n=this.prepareAttachmentUpdate(e);n&&this.state.partialNext({attachments:n})},this.upsertAttachments=e=>{if(!e.length)return;let n=[...this.attachments],s=!1;e.forEach(l=>{const c=this.prepareAttachmentUpdate(l);if(c)n=c,s=!0;else{const d=L2(l);d&&(n.push(d),s=!0)}}),s&&this.state.partialNext({attachments:n})},this.removeAttachments=e=>{this.state.partialNext({attachments:this.attachments.filter(n=>{var s;return!e.includes((s=n.localMetadata)==null?void 0:s.id)})})},this.getUploadConfigCheck=async e=>{var E,w;const n=this.channel.getClient();let s;n.appSettingsPromise?s=await n.appSettingsPromise:s=await n.getAppSettings();const l=Nc(e)?(E=s==null?void 0:s.app)==null?void 0:E.image_upload_config:(w=s==null?void 0:s.app)==null?void 0:w.file_upload_config;if(!l)return{uploadBlocked:!1};const{allowed_file_extensions:c,allowed_mime_types:d,blocked_file_extensions:p,blocked_mime_types:h,size_limit:m}=l,b=m||sT,x=e.type;if(lf(e)||el(e)){if(c!=null&&c.length&&!c.some(S=>e.name.toLowerCase().endsWith(S.toLowerCase())))return{uploadBlocked:!0,reason:"allowed_file_extensions"};if(p!=null&&p.length&&p.some(S=>e.name.toLowerCase().endsWith(S.toLowerCase())))return{uploadBlocked:!0,reason:"blocked_file_extensions"}}return d!=null&&d.length&&!d.some(S=>S.toLowerCase()===(x==null?void 0:x.toLowerCase()))?{uploadBlocked:!0,reason:"allowed_mime_types"}:h!=null&&h.length&&h.some(S=>S.toLowerCase()===(x==null?void 0:x.toLowerCase()))?{uploadBlocked:!0,reason:"blocked_mime_types"}:e.size&&e.size>b?{uploadBlocked:!0,reason:"size_limit"}:{uploadBlocked:!1}},this.fileToLocalUploadAttachment=async e=>{var c;const n=el(e)||lf(e)?e:N2({blobsArray:[e],fileName:R2(e.type),mimeType:e.type}),s=await this.getUploadConfigCheck(n),l={file_size:n.size,mime_type:n.type,localMetadata:{file:n,id:yr(),uploadPermissionCheck:s,uploadState:s.uploadBlocked?"blocked":"pending"},type:YT(n.type)};return l[Nc(n)?"fallback":"title"]=n.name,Nc(n)&&(l.localMetadata.previewUri=el(e)?e.uri:(c=URL.createObjectURL)==null?void 0:c.call(URL,e),el(e)&&e.height&&e.width&&(l.original_height=e.height,l.original_width=e.width)),el(e)&&e.thumb_url&&(l.thumb_url=e.thumb_url),l},this.ensureLocalUploadAttachment=async e=>{var s;if(!((s=e.localMetadata)!=null&&s.file)||!e.localMetadata.id){this.client.notifications.addError({message:"File is required for upload attachment",origin:{emitter:"AttachmentManager",context:{attachment:e}}});return}if(!this.fileUploadFilter(e))return;const n=await this.fileToLocalUploadAttachment(e.localMetadata.file);return e.localMetadata.id&&(n.localMetadata.id=e.localMetadata.id),n},this.doDefaultUploadRequest=async e=>{if(el(e))return this.channel[Nc(e)?"sendImage":"sendFile"](e.uri,e.name,e.type);const n=lf(e)?e:N2({blobsArray:[e],fileName:R2(e.type),mimeType:e.type}),{duration:s,...l}=await this.channel[Nc(e)?"sendImage":"sendFile"](n);return l},this.doUploadRequest=async e=>{const n=this.config.doUploadRequest;return n?await n(e):this.doDefaultUploadRequest(e)},this.uploadAttachment=async e=>{if(!this.isUploadEnabled)return;const n=await this.ensureLocalUploadAttachment(e);if(typeof n>"u")return;if(n.localMetadata.uploadState==="blocked")return this.upsertAttachments([n]),this.client.notifications.addError({message:"Error uploading attachment",origin:{emitter:"AttachmentManager",context:{attachment:e}}}),n;this.upsertAttachments([{...e,localMetadata:{...e.localMetadata,uploadState:"uploading"}}]);let s;try{s=await this.doUploadRequest(n.localMetadata.file)}catch(c){let d={message:"Error uploading attachment",name:"Error"};typeof c.message=="string"?d=c:typeof c=="object"&&(d=Object.assign(d,c)),this.client.notifications.addError({message:d.message,origin:{emitter:"AttachmentManager",context:{attachment:e}}});const p={...e,localMetadata:{...e.localMetadata,uploadState:"failed"}};return this.updateAttachment(p),p}if(!s){this.removeAttachments([e.localMetadata.id]);return}const l={...e,localMetadata:{...e.localMetadata,uploadState:"finished"}};return BT(l)?(l.localMetadata.previewUri&&(URL.revokeObjectURL(l.localMetadata.previewUri),delete l.localMetadata.previewUri),l.image_url=s.file):l.asset_url=s.file,s.thumb_url&&(l.thumb_url=s.thumb_url),this.updateAttachment(l),l},this.uploadFiles=async e=>{if(!this.isUploadEnabled)return;const n=WT(e)?Array.from(e):e,s=await Promise.all(n.map(this.fileToLocalUploadAttachment));return Promise.all(s.filter(this.fileUploadFilter).slice(0,this.availableUploadSlots).map(this.uploadAttachment))},this.composer=t,this.state=new _a(P2({message:a})),this.attachmentsByIdGetterCache={attachmentsById:{},attachments:[]}}get attachmentsById(){const{attachments:t}=this.state.getLatestValue();return t!==this.attachmentsByIdGetterCache.attachments&&(this.attachmentsByIdGetterCache.attachments=t,this.attachmentsByIdGetterCache.attachmentsById=t.reduce((a,e)=>{var n;return e.localMetadata.id&&(a[n=e.localMetadata.id]??(a[n]=e)),a},{})),this.attachmentsByIdGetterCache.attachmentsById}get client(){return this.composer.client}get channel(){return this.composer.channel}get config(){return this.composer.config.attachments}get acceptedFiles(){return this.config.acceptedFiles}set acceptedFiles(t){this.composer.updateConfig({attachments:{acceptedFiles:t}})}get fileUploadFilter(){return this.config.fileUploadFilter}set fileUploadFilter(t){this.composer.updateConfig({attachments:{fileUploadFilter:t}})}get maxNumberOfFilesPerMessage(){return this.config.maxNumberOfFilesPerMessage}set maxNumberOfFilesPerMessage(t){t!==this.maxNumberOfFilesPerMessage&&this.composer.updateConfig({attachments:{maxNumberOfFilesPerMessage:t}})}get attachments(){return this.state.getLatestValue().attachments}get hasUploadPermission(){var t,a;return!!((a=(t=this.channel.data)==null?void 0:t.own_capabilities)!=null&&a.includes("upload-file"))}get isUploadEnabled(){return this.hasUploadPermission&&this.availableUploadSlots>0}get successfulUploads(){return this.getUploadsByState("finished")}get successfulUploadsCount(){return this.successfulUploads.length}get uploadsInProgressCount(){return this.getUploadsByState("uploading").length}get failedUploadsCount(){return this.getUploadsByState("failed").length}get blockedUploadsCount(){return this.getUploadsByState("blocked").length}get pendingUploadsCount(){return this.getUploadsByState("pending").length}get availableUploadSlots(){return this.config.maxNumberOfFilesPerMessage-this.successfulUploadsCount-this.uploadsInProgressCount}getUploadsByState(t){return Object.values(this.attachments).filter(({localMetadata:a})=>a.uploadState===t)}},ZT="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",qT="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",vl=(t,a)=>{for(const e in a)t[e]=a[e];return t},Gg="numeric",$g="ascii",Zg="alpha",Yc="asciinumeric",jc="alphanumeric",qg="domain",RE="emoji",QT="scheme",VT="slashscheme",rg="whitespace";function XT(t,a){return t in a||(a[t]=[]),a[t]}function lo(t,a,e){a[Gg]&&(a[Yc]=!0,a[jc]=!0),a[$g]&&(a[Yc]=!0,a[Zg]=!0),a[Yc]&&(a[jc]=!0),a[Zg]&&(a[jc]=!0),a[jc]&&(a[qg]=!0),a[RE]&&(a[qg]=!0);for(const n in a){const s=XT(n,e);s.indexOf(t)<0&&s.push(t)}}function KT(t,a){const e={};for(const n in a)a[n].indexOf(t)>=0&&(e[n]=!0);return e}function Ga(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Ga.groups={};Ga.prototype={accepts(){return!!this.t},go(t){const a=this,e=a.j[t];if(e)return e;for(let n=0;n<a.jr.length;n++){const s=a.jr[n][0],l=a.jr[n][1];if(l&&s.test(t))return l}return a.jd},has(t,a=!1){return a?t in this.j:!!this.go(t)},ta(t,a,e,n){for(let s=0;s<t.length;s++)this.tt(t[s],a,e,n)},tr(t,a,e,n){n=n||Ga.groups;let s;return a&&a.j?s=a:(s=new Ga(a),e&&n&&lo(a,e,n)),this.jr.push([t,s]),s},ts(t,a,e,n){let s=this;const l=t.length;if(!l)return s;for(let c=0;c<l-1;c++)s=s.tt(t[c]);return s.tt(t[l-1],a,e,n)},tt(t,a,e,n){n=n||Ga.groups;const s=this;if(a&&a.j)return s.j[t]=a,a;const l=a;let c,d=s.go(t);if(d?(c=new Ga,vl(c.j,d.j),c.jr.push.apply(c.jr,d.jr),c.jd=d.jd,c.t=d.t):c=new Ga,l){if(n)if(c.t&&typeof c.t=="string"){const p=vl(KT(c.t,n),e);lo(l,p,n)}else e&&lo(l,e,n);c.t=l}return s.j[t]=c,c}};var gt=(t,a,e,n,s)=>t.ta(a,e,n,s),In=(t,a,e,n,s)=>t.tr(a,e,n,s),B2=(t,a,e,n,s)=>t.ts(a,e,n,s),Ce=(t,a,e,n,s)=>t.tt(a,e,n,s),As="WORD",Qg="UWORD",LE="ASCIINUMERICAL",PE="ALPHANUMERICAL",iu="LOCALHOST",Vg="TLD",Xg="UTLD",cf="SCHEME",al="SLASH_SCHEME",U0="NUM",Kg="WS",F0="NL",Gc="OPENBRACE",$c="CLOSEBRACE",Nf="OPENBRACKET",Rf="CLOSEBRACKET",Lf="OPENPAREN",Pf="CLOSEPAREN",Bf="OPENANGLEBRACKET",Of="CLOSEANGLEBRACKET",zf="FULLWIDTHLEFTPAREN",Uf="FULLWIDTHRIGHTPAREN",Ff="LEFTCORNERBRACKET",Wf="RIGHTCORNERBRACKET",jf="LEFTWHITECORNERBRACKET",Hf="RIGHTWHITECORNERBRACKET",Yf="FULLWIDTHLESSTHAN",Gf="FULLWIDTHGREATERTHAN",$f="AMPERSAND",W0="APOSTROPHE",Zf="ASTERISK",Ci="AT",qf="BACKSLASH",Qf="BACKTICK",Vf="CARET",_i="COLON",j0="COMMA",Xf="DOLLAR",Gr="DOT",Kf="EQUALS",H0="EXCLAMATION",dr="HYPHEN",Zc="PERCENT",Jf="PIPE",ep="PLUS",tp="POUND",qc="QUERY",Y0="QUOTE",BE="FULLWIDTHMIDDLEDOT",G0="SEMI",$r="SLASH",Qc="TILDE",np="UNDERSCORE",OE="EMOJI",ap="SYM",zE=Object.freeze({__proto__:null,WORD:As,UWORD:Qg,ASCIINUMERICAL:LE,ALPHANUMERICAL:PE,LOCALHOST:iu,TLD:Vg,UTLD:Xg,SCHEME:cf,SLASH_SCHEME:al,NUM:U0,WS:Kg,NL:F0,OPENBRACE:Gc,CLOSEBRACE:$c,OPENBRACKET:Nf,CLOSEBRACKET:Rf,OPENPAREN:Lf,CLOSEPAREN:Pf,OPENANGLEBRACKET:Bf,CLOSEANGLEBRACKET:Of,FULLWIDTHLEFTPAREN:zf,FULLWIDTHRIGHTPAREN:Uf,LEFTCORNERBRACKET:Ff,RIGHTCORNERBRACKET:Wf,LEFTWHITECORNERBRACKET:jf,RIGHTWHITECORNERBRACKET:Hf,FULLWIDTHLESSTHAN:Yf,FULLWIDTHGREATERTHAN:Gf,AMPERSAND:$f,APOSTROPHE:W0,ASTERISK:Zf,AT:Ci,BACKSLASH:qf,BACKTICK:Qf,CARET:Vf,COLON:_i,COMMA:j0,DOLLAR:Xf,DOT:Gr,EQUALS:Kf,EXCLAMATION:H0,HYPHEN:dr,PERCENT:Zc,PIPE:Jf,PLUS:ep,POUND:tp,QUERY:qc,QUOTE:Y0,FULLWIDTHMIDDLEDOT:BE,SEMI:G0,SLASH:$r,TILDE:Qc,UNDERSCORE:np,EMOJI:OE,SYM:ap}),Is=/[a-z]/,Rc=new RegExp("\\p{L}","u"),sg=new RegExp("\\p{Emoji}","u"),Ds=/\d/,ig=/\s/,O2="\r",og=`
`,JT="️",eN="‍",lg="￼",Hd=null,Yd=null;function tN(t=[]){const a={};Ga.groups=a;const e=new Ga;Hd==null&&(Hd=z2(ZT)),Yd==null&&(Yd=z2(qT)),Ce(e,"'",W0),Ce(e,"{",Gc),Ce(e,"}",$c),Ce(e,"[",Nf),Ce(e,"]",Rf),Ce(e,"(",Lf),Ce(e,")",Pf),Ce(e,"<",Bf),Ce(e,">",Of),Ce(e,"（",zf),Ce(e,"）",Uf),Ce(e,"「",Ff),Ce(e,"」",Wf),Ce(e,"『",jf),Ce(e,"』",Hf),Ce(e,"＜",Yf),Ce(e,"＞",Gf),Ce(e,"&",$f),Ce(e,"*",Zf),Ce(e,"@",Ci),Ce(e,"`",Qf),Ce(e,"^",Vf),Ce(e,":",_i),Ce(e,",",j0),Ce(e,"$",Xf),Ce(e,".",Gr),Ce(e,"=",Kf),Ce(e,"!",H0),Ce(e,"-",dr),Ce(e,"%",Zc),Ce(e,"|",Jf),Ce(e,"+",ep),Ce(e,"#",tp),Ce(e,"?",qc),Ce(e,'"',Y0),Ce(e,"/",$r),Ce(e,";",G0),Ce(e,"~",Qc),Ce(e,"_",np),Ce(e,"\\",qf),Ce(e,"・",BE);const n=In(e,Ds,U0,{[Gg]:!0});In(n,Ds,n);const s=In(n,Is,LE,{[Yc]:!0}),l=In(n,Rc,PE,{[jc]:!0}),c=In(e,Is,As,{[$g]:!0});In(c,Ds,s),In(c,Is,c),In(s,Ds,s),In(s,Is,s);const d=In(e,Rc,Qg,{[Zg]:!0});In(d,Is),In(d,Ds,l),In(d,Rc,d),In(l,Ds,l),In(l,Is),In(l,Rc,l);const p=Ce(e,og,F0,{[rg]:!0}),h=Ce(e,O2,Kg,{[rg]:!0}),m=In(e,ig,Kg,{[rg]:!0});Ce(e,lg,m),Ce(h,og,p),Ce(h,lg,m),In(h,ig,m),Ce(m,O2),Ce(m,og),In(m,ig,m),Ce(m,lg,m);const b=In(e,sg,OE,{[RE]:!0});Ce(b,"#"),In(b,sg,b),Ce(b,JT,b);const x=Ce(b,eN);Ce(x,"#"),In(x,sg,b);const E=[[Is,c],[Ds,s]],w=[[Is,null],[Rc,d],[Ds,l]];for(let S=0;S<Hd.length;S++)yi(e,Hd[S],Vg,As,E);for(let S=0;S<Yd.length;S++)yi(e,Yd[S],Xg,Qg,w);lo(Vg,{tld:!0,ascii:!0},a),lo(Xg,{utld:!0,alpha:!0},a),yi(e,"file",cf,As,E),yi(e,"mailto",cf,As,E),yi(e,"http",al,As,E),yi(e,"https",al,As,E),yi(e,"ftp",al,As,E),yi(e,"ftps",al,As,E),lo(cf,{scheme:!0,ascii:!0},a),lo(al,{slashscheme:!0,ascii:!0},a),t=t.sort((S,_)=>S[0]>_[0]?1:-1);for(let S=0;S<t.length;S++){const _=t[S][0],D=t[S][1]?{[QT]:!0}:{[VT]:!0};_.indexOf("-")>=0?D[qg]=!0:Is.test(_)?Ds.test(_)?D[Yc]=!0:D[$g]=!0:D[Gg]=!0,B2(e,_,_,D)}return B2(e,"localhost",iu,{ascii:!0}),e.jd=new Ga(ap),{start:e,tokens:vl({groups:a},zE)}}function UE(t,a){const e=nN(a.replace(/[A-Z]/g,d=>d.toLowerCase())),n=e.length,s=[];let l=0,c=0;for(;c<n;){let d=t,p=null,h=0,m=null,b=-1,x=-1;for(;c<n&&(p=d.go(e[c]));)d=p,d.accepts()?(b=0,x=0,m=d):b>=0&&(b+=e[c].length,x++),h+=e[c].length,l+=e[c].length,c++;l-=b,c-=x,h-=b,s.push({t:m.t,v:a.slice(l-h,l),s:l-h,e:l})}return s}function nN(t){const a=[],e=t.length;let n=0;for(;n<e;){let s=t.charCodeAt(n),l,c=s<55296||s>56319||n+1===e||(l=t.charCodeAt(n+1))<56320||l>57343?t[n]:t.slice(n,n+2);a.push(c),n+=c.length}return a}function yi(t,a,e,n,s){let l;const c=a.length;for(let d=0;d<c-1;d++){const p=a[d];t.j[p]?l=t.j[p]:(l=new Ga(n),l.jr=s.slice(),t.j[p]=l),t=l}return l=new Ga(e),l.jr=s.slice(),t.j[a[c-1]]=l,l}function z2(t){const a=[],e=[];let n=0,s="0123456789";for(;n<t.length;){let l=0;for(;s.indexOf(t[n+l])>=0;)l++;if(l>0){a.push(e.join(""));for(let c=parseInt(t.substring(n,n+l),10);c>0;c--)e.pop();n+=l}else e.push(t[n]),n++}return a}var ou={defaultProtocol:"http",events:null,format:U2,formatHref:U2,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function $0(t,a=null){let e=vl({},ou);t&&(e=vl(e,t instanceof $0?t.o:t));const n=e.ignoreTags,s=[];for(let l=0;l<n.length;l++)s.push(n[l].toUpperCase());this.o=e,a&&(this.defaultRender=a),this.ignoreTags=s}$0.prototype={o:ou,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,a,e){const n=a!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=e.t in s?s[e.t]:ou[t],typeof s=="function"&&n&&(s=s(a,e))):typeof s=="function"&&n&&(s=s(a,e.t,e)),s)},getObj(t,a,e){let n=this.o[t];return typeof n=="function"&&a!=null&&(n=n(a,e.t,e)),n},render(t){const a=t.render(this);return(this.get("render",null,t)||this.defaultRender)(a,t.t,t)}};function U2(t){return t}function FE(t,a){this.t="token",this.v=t,this.tk=a}FE.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const a=this.toString(),e=t.get("truncate",a,this),n=t.get("format",a,this);return e&&n.length>e?n.substring(0,e)+"…":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=ou.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const a=this,e=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",e,this),s=t.get("tagName",e,a),l=this.toFormattedString(t),c={},d=t.get("className",e,a),p=t.get("target",e,a),h=t.get("rel",e,a),m=t.getObj("attributes",e,a),b=t.getObj("events",e,a);return c.href=n,d&&(c.class=d),p&&(c.target=p),h&&(c.rel=h),m&&vl(c,m),{tagName:s,attributes:c,content:l,eventListeners:b}}};function Np(t,a){class e extends FE{constructor(s,l){super(s,l),this.t=t}}for(const n in a)e.prototype[n]=a[n];return e.t=t,e}var F2=Np("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),W2=Np("text"),aN=Np("nl"),Gd=Np("url",{isLink:!0,toHref(t=ou.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==iu&&t[1].t===_i}}),lr=t=>new Ga(t);function rN({groups:t}){const a=t.domain.concat([$f,Zf,Ci,qf,Qf,Vf,Xf,Kf,dr,U0,Zc,Jf,ep,tp,$r,ap,Qc,np]),e=[_i,j0,Gr,H0,Zc,qc,Y0,G0,Bf,Of,Gc,$c,Rf,Nf,Lf,Pf,zf,Uf,Ff,Wf,jf,Hf,Yf,Gf],n=[$f,W0,Zf,qf,Qf,Vf,Xf,Kf,dr,Gc,$c,Zc,Jf,ep,tp,qc,$r,ap,Qc,np],s=lr(),l=Ce(s,Qc);gt(l,n,l),gt(l,t.domain,l);const c=lr(),d=lr(),p=lr();gt(s,t.domain,c),gt(s,t.scheme,d),gt(s,t.slashscheme,p),gt(c,n,l),gt(c,t.domain,c);const h=Ce(c,Ci);Ce(l,Ci,h),Ce(d,Ci,h),Ce(p,Ci,h);const m=Ce(l,Gr);gt(m,n,l),gt(m,t.domain,l);const b=lr();gt(h,t.domain,b),gt(b,t.domain,b);const x=Ce(b,Gr);gt(x,t.domain,b);const E=lr(F2);gt(x,t.tld,E),gt(x,t.utld,E),Ce(h,iu,E);const w=Ce(b,dr);Ce(w,dr,w),gt(w,t.domain,b),gt(E,t.domain,b),Ce(E,Gr,x),Ce(E,dr,w);const S=Ce(E,_i);gt(S,t.numeric,F2);const _=Ce(c,dr),C=Ce(c,Gr);Ce(_,dr,_),gt(_,t.domain,c),gt(C,n,l),gt(C,t.domain,c);const D=lr(Gd);gt(C,t.tld,D),gt(C,t.utld,D),gt(D,t.domain,c),gt(D,n,l),Ce(D,Gr,C),Ce(D,dr,_),Ce(D,Ci,h);const I=Ce(D,_i),A=lr(Gd);gt(I,t.numeric,A);const T=lr(Gd),F=lr();gt(T,a,T),gt(T,e,F),gt(F,a,T),gt(F,e,F),Ce(D,$r,T),Ce(A,$r,T);const J=Ce(d,_i),H=Ce(p,_i),Z=Ce(H,$r),K=Ce(Z,$r);gt(d,t.domain,c),Ce(d,Gr,C),Ce(d,dr,_),gt(p,t.domain,c),Ce(p,Gr,C),Ce(p,dr,_),gt(J,t.domain,T),Ce(J,$r,T),Ce(J,qc,T),gt(K,t.domain,T),gt(K,a,T),Ce(K,$r,T);const X=[[Gc,$c],[Nf,Rf],[Lf,Pf],[Bf,Of],[zf,Uf],[Ff,Wf],[jf,Hf],[Yf,Gf]];for(let W=0;W<X.length;W++){const[O,B]=X[W],U=Ce(T,O);Ce(F,O,U),Ce(U,B,T);const M=lr(Gd);gt(U,a,M);const z=lr();gt(U,e),gt(M,a,M),gt(M,e,z),gt(z,a,M),gt(z,e,z),Ce(M,B,T),Ce(z,B,T)}return Ce(s,iu,D),Ce(s,F0,aN),{start:s,tokens:zE}}function sN(t,a,e){let n=e.length,s=0,l=[],c=[];for(;s<n;){let d=t,p=null,h=null,m=0,b=null,x=-1;for(;s<n&&!(p=d.go(e[s].t));)c.push(e[s++]);for(;s<n&&(h=p||d.go(e[s].t));)p=null,d=h,d.accepts()?(x=0,b=d):x>=0&&x++,s++,m++;if(x<0)s-=m,s<n&&(c.push(e[s]),s++);else{c.length>0&&(l.push(cg(W2,a,c)),c=[]),s-=x,m-=x;const E=b.t,w=e.slice(s-m,s);l.push(cg(E,a,w))}}return c.length>0&&l.push(cg(W2,a,c)),l}function cg(t,a,e){const n=e[0].s,s=e[e.length-1].e,l=a.slice(n,s);return new t(l,e)}var ma={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function iN(){ma.scanner=tN(ma.customSchemes);for(let t=0;t<ma.tokenQueue.length;t++)ma.tokenQueue[t][1]({scanner:ma.scanner});ma.parser=rN(ma.scanner.tokens);for(let t=0;t<ma.pluginQueue.length;t++)ma.pluginQueue[t][1]({scanner:ma.scanner,parser:ma.parser});return ma.initialized=!0,ma}function WE(t){return ma.initialized||iN(),sN(ma.parser.start,t,UE(ma.scanner.start,t))}WE.scan=UE;function oN(t,a=null,e=null){if(a&&typeof a=="object"){if(e)throw Error(`linkifyjs: Invalid link type ${a}; must be a string`);e=a,a=null}const n=new $0(e),s=WE(t),l=[];for(let c=0;c<s.length;c++){const d=s[c];d.isLink&&(!a||d.t===a)&&n.check(d)&&l.push(d.toFormattedObject(n))}return l}var lN={debounceURLEnrichmentMs:1500,enabled:!1,findURLFn:t=>oN(t,"url",{defaultProtocol:"https"}).reduce((a,e)=>{try{const n=new URL(e.href);e.isLink&&/^[a-zA-Z0-9-.]+\.[a-zA-Z]{2,}$/.test(n.hostname)&&a.push(e.href)}catch{}return a},[])},cN={acceptedFiles:[],fileUploadFilter:()=>!0,maxNumberOfFilesPerMessage:iT},uN={enabled:!0,publishTypingEvents:!0},dN={attachments:cN,drafts:{enabled:!1},linkPreviews:lN,text:uN},j2=t=>t?{message:{},custom:{}}:{message:{},custom:{}},fN=class{constructor({composer:t,message:a}){this.isMessageDataEqual=(e,n)=>JSON.stringify(e.message)===JSON.stringify(n==null?void 0:n.message),this.initState=({message:e}={})=>{this.state.next(j2({composer:this.composer}))},this.composer=t,this.state=new _a(j2({}))}get customMessageData(){return this.state.getLatestValue().message}get customComposerData(){return this.state.getLatestValue().custom}setMessageData(t){this.state.partialNext({message:{...this.state.getLatestValue().message,...t}})}setCustomData(t){this.state.partialNext({custom:{...this.state.getLatestValue().custom,...t}})}},pN=t=>new Map(t.map(a=>[a.og_scrape_url,a])),H2=({message:t})=>{var a;return t?{previews:((a=t.attachments)==null?void 0:a.reduce((e,n)=>(n.og_scrape_url&&e.set(n.og_scrape_url,{...n,status:"loaded"}),e),new Map))??new Map}:{previews:new Map}},Eo=class ao{constructor({composer:a,message:e}){this.shouldDiscardEnrichQueries=!1,this.initState=({message:n}={})=>{this.state.next(H2({message:this.enabled?n:void 0}))},this._findAndEnrichUrls=async n=>{if(!this.enabled)return;const s=this.config.findURLFn(n);if(this.shouldDiscardEnrichQueries=!s.length,this.shouldDiscardEnrichQueries){this.state.next({previews:new Map});return}const l=new Map(Array.from(this.previews).filter(([d])=>s.includes(d)||s.includes(d+"/"))),c=s.filter(d=>{const p=this.previews;return!(p.get(d)||p.get(d+"/"))}).map(d=>({og_scrape_url:d.trim(),status:"loading"}));c.length&&(this.state.partialNext({previews:new Map([...l,...pN(c)])}),await Promise.all(c.map(async d=>{try{const{duration:p,...h}=await this.client.enrichURL(d.og_scrape_url);if(this.shouldDiscardEnrichQueries)return;this.previews.has(d.og_scrape_url)&&this.updatePreview(d.og_scrape_url,{status:"loaded",...h})}catch{this.previews.has(d.og_scrape_url)&&this.updatePreview(d.og_scrape_url,{status:"failed"})}return d})))},this.cancelURLEnrichment=()=>{this.findAndEnrichUrls.cancel(),this.findAndEnrichUrls.flush()},this.clearPreviews=()=>{const n=this.previews,s=new Map;n.forEach((l,c)=>{ao.previewIsDismissed(l)&&s.set(c,l)}),this.state.partialNext({previews:s})},this.updatePreview=(n,s)=>{var p;if(!n)return;const l=this.previews.get(n),c=s.status??((p=this.previews.get(n))==null?void 0:p.status)??"pending";let d=s;if(l){const h=NE(l,s);if(!h.diff||Object.keys(h.diff).length===0)return;d=h.result}this.state.partialNext({previews:new Map(this.previews).set(n,{...d,og_scrape_url:n,status:c})})},this.dismissPreview=n=>{var l;const s=this.previews.get(n);s&&((l=this.onLinkPreviewDismissed)==null||l.call(this,s),this.updatePreview(n,{status:"dismissed"}))},this.composer=a,this.state=new _a(H2({message:this.enabled?e:void 0})),this.findAndEnrichUrls=jg(this._findAndEnrichUrls.bind(this),this.config.debounceURLEnrichmentMs)}get client(){return this.composer.client}get channel(){return this.composer.channel}get previews(){return this.state.getLatestValue().previews}get loadingPreviews(){return Array.from(this.previews.values()).filter(a=>ao.previewIsLoading(a))}get loadedPreviews(){return Array.from(this.previews.values()).filter(a=>ao.previewIsLoaded(a))}get dismissedPreviews(){return Array.from(this.previews.values()).filter(a=>ao.previewIsDismissed(a))}get failedPreviews(){return Array.from(this.previews.values()).filter(a=>ao.previewIsFailed(a))}get pendingPreviews(){return Array.from(this.previews.values()).filter(a=>ao.previewIsPending(a))}get config(){return this.composer.config.linkPreviews}get debounceURLEnrichmentMs(){return this.config.debounceURLEnrichmentMs}set debounceURLEnrichmentMs(a){this.cancelURLEnrichment(),this.findAndEnrichUrls=jg(this._findAndEnrichUrls.bind(this),this.config.debounceURLEnrichmentMs),this.composer.updateConfig({linkPreviews:{debounceURLEnrichmentMs:a}})}get enabled(){var a;return!!((a=this.channel.getConfig())!=null&&a.url_enrichment)&&this.composer.config.linkPreviews.enabled}set enabled(a){a!==this.enabled&&this.composer.updateConfig({linkPreviews:{enabled:a}})}get findURLFn(){return this.config.findURLFn}set findURLFn(a){this.composer.updateConfig({linkPreviews:{findURLFn:a}})}get onLinkPreviewDismissed(){return this.config.onLinkPreviewDismissed}set onLinkPreviewDismissed(a){this.composer.updateConfig({linkPreviews:{onLinkPreviewDismissed:a}})}};Eo.previewIsLoading=t=>t.status==="loading";Eo.previewIsLoaded=t=>t.status==="loaded";Eo.previewIsDismissed=t=>t.status==="dismissed";Eo.previewIsFailed=t=>t.status==="failed";Eo.previewIsPending=t=>t.status==="pending";Eo.getPreviewData=t=>{const{status:a,...e}=t;return e};var Z0=Eo,mN=hN(gN),Jg=new Map;function hN(t){return function(e,n){const{cb:s,onContinued:l}=t(e,n),c=Jg.get(e);c==null||c.onContinued();const d=c?c.promise.then(s,s):s();return Jg.set(e,{promise:d,onContinued:l}),d}}function gN(t,a){const e=new AbortController;return{cb:()=>e.signal.aborted?Promise.resolve("canceled"):a(e.signal).finally(()=>{e.signal.aborted||Jg.delete(t)}),onContinued:()=>e.abort()}}var xu=class{constructor(){this.middleware=[],this.id=yr()}use(t){return this.middleware=this.middleware.concat(t),this}replace(t){const a=[...this.middleware];return t.forEach(e=>{const n=this.middleware.findIndex(s=>s.id===e.id);n>=0?a.splice(n,1,e):a.push(e)}),this.middleware=a,this}insert({middleware:t,position:a,unique:e}){e&&t.forEach(c=>{const d=this.middleware.findIndex(p=>p.id===c.id);d>=0&&this.middleware.splice(d,1)});const n=a.after||a.before,s=this.middleware.findIndex(c=>c.id===n),l=a.after?s+1:s;return this.middleware.splice(l,0,...t),this}setOrder(t){this.middleware=t.map(a=>this.middleware.find(e=>e.id===a)).filter(Boolean)}async executeMiddlewareChain({eventName:t,initialValue:a}){let e=-1;const n=async(l,c,d)=>{if(l<=e)throw new Error("next() called multiple times");if(e=l,l===this.middleware.length||d&&["complete","discard"].includes(d))return{state:c,status:d};const m=this.middleware[l].handlers[t];return m?await m({state:c,next:S=>n(l+1,S),complete:S=>n(l+1,S,"complete"),discard:()=>n(l+1,c,"discard"),forward:()=>n(l+1,c)}):n(l+1,c,d)},s=await mN(`middleware-execution-${this.id}-${t}`,async l=>{const c=await n(0,a);return l.aborted?"canceled":c});return s==="canceled"?{state:a,status:"discard"}:s}async execute({eventName:t,initialValue:a}){return await this.executeMiddlewareChain({eventName:t,initialValue:a})}},q0=/^([2-9]|10)$/,yN=100,Y2=t=>!t.trim(),Vc={enforce_unique_vote:()=>({max_votes_allowed:void 0}),max_votes_allowed:({data:t,value:a})=>t.enforce_unique_vote&&a?{max_votes_allowed:"Enforce unique vote is enabled"}:!a.match(/^[0-9]+$/)&&a?{max_votes_allowed:"Only numbers are allowed"}:(a==null?void 0:a.length)>1&&!a.match(q0)?{max_votes_allowed:"Type a number from 2 to 10"}:{max_votes_allowed:void 0},options:({value:t})=>{const a={},e=new Set;return t.forEach(n=>{const s=n.text.trim();e.has(s)?a[n.id]="Option already exists":e.add(s)}),Object.keys(a).length>0?{options:a}:{options:void 0}}},bN={name:({currentError:t,value:a})=>a&&t?{name:void 0}:{name:typeof t=="string"?t:void 0}},vN={max_votes_allowed:({value:t})=>t&&!t.match(q0)?{max_votes_allowed:"Type a number from 2 to 10"}:{max_votes_allowed:void 0},name:({value:t})=>Y2(t)?{name:"Question is required"}:{name:void 0},options:t=>{var n;const a=(n=Vc.options)==null?void 0:n.call(Vc,t),e=(a==null?void 0:a.options)??{};return t.value.forEach((s,l)=>{const c=l===t.value.length-1;Y2(s.text)&&!c&&(e[s.id]="Option is empty")}),Object.keys(e).length>0?{options:e}:{options:void 0}}},xN=t=>!Array.isArray(t)&&typeof(t==null?void 0:t.index)=="number"&&typeof(t==null?void 0:t.text)=="string",wN={enforce_unique_vote:({value:t})=>({enforce_unique_vote:t,max_votes_allowed:""}),options:({value:t,data:a})=>{if(Array.isArray(t))return{options:t.map(m=>({id:m.id,text:m.text.trim()}))};const{index:e,text:n}=t,s=a.options||[],l=s&&s.slice(e+1).length>0&&!n,c=s.slice(0,e),d=s.slice(e+1),p=[...c,...l?[]:[{...s[e],text:n}],...d];return s.length<yN&&!p.some(m=>!m.text.trim())&&p.push({id:yr(),text:""}),{options:p}}},EN=({processors:t,validators:a}={})=>{const e=({state:n,validators:s,processors:l})=>{const{previousState:c,targetFields:d}=n;let p;if(!l&&xN(d.options)){const m=[...c.data.options],b=c.data.options[d.options.index];b&&(b.text=d.options.text,m.splice(d.options.index,1,b)),p={...d,options:m}}else l?p=Object.entries(d).reduce((m,[b,x])=>{const E=l[b];return m={...m,...E?E({data:c.data,value:x}):{[b]:x}},m},{}):p=d;const h=Object.keys(d).reduce((m,b)=>{const x=s[b];if(x){const E=x({currentError:c.errors[b],data:c.data,value:p[b]});m={...m,...E}}return m},{});return{newData:p,newErrors:h}};return{id:"stream-io/poll-composer-state-processing",handlers:{handleFieldChange:({state:n,next:s,forward:l})=>{if(!n.targetFields)return l();const{previousState:c,injectedFieldErrors:d}=n,{newData:p,newErrors:h}=e({processors:{...wN,...t==null?void 0:t.handleFieldChange},state:n,validators:{...Vc,...bN,...a==null?void 0:a.handleFieldChange}});return s({...n,nextState:{...c,data:{...c.data,...p},errors:{...c.errors,...h,...d}}})},handleFieldBlur:({state:n,next:s,forward:l})=>{if(!n.targetFields)return l();const{previousState:c}=n,{newData:d,newErrors:p}=e({processors:t==null?void 0:t.handleFieldBlur,state:n,validators:{...Vc,...vN,...a==null?void 0:a.handleFieldBlur}});return s({...n,nextState:{...c,data:{...c.data,...d},errors:{...c.errors,...p,...n.injectedFieldErrors}}})}}}},SN=t=>({id:"stream-io/poll-composer-composition",handlers:{compose:({discard:a,forward:e})=>t.pollComposer.canCreatePoll?e():a()}}),CN=class extends xu{constructor({composer:t}){super(),this.use([SN(t)])}},_N=class extends xu{constructor(){super(),this.use([EN()])}},IN=class extends Error{constructor(t,{code:a,status:e,response:n}){super(t),this.name="ErrorFromResponse",this.code=a,this.response=n,this.status=e}toJSON(){const t=[["status",this.status],["code",this.code]],a=[];for(const[e,n]of t)typeof n<"u"&&n!==null&&a.push(`${e}: ${n}`);return{message:`(${a.join(", ")}) - ${this.message}`,stack:this.stack,name:this.name}}},DN=class{constructor({composer:t}){this.initState=()=>{this.state.next(this.initialState)},this.updateFields=async(a,e)=>{const{state:n,status:s}=await this.stateMiddlewareExecutor.execute({eventName:"handleFieldChange",initialValue:{nextState:{...this.state.getLatestValue()},previousState:{...this.state.getLatestValue()},targetFields:a,injectedFieldErrors:e}});s!=="discard"&&this.state.next(n.nextState)},this.handleFieldBlur=async a=>{const e=await this.stateMiddlewareExecutor.execute({eventName:"handleFieldBlur",initialValue:{nextState:{...this.state.getLatestValue()},previousState:{...this.state.getLatestValue()},targetFields:{[a]:this.state.getLatestValue().data[a]}}});e.status!=="discard"&&this.state.next(e.state.nextState)},this.compose=async()=>{var s;const{data:a,errors:e}=this.state.getLatestValue(),n=await this.compositionMiddlewareExecutor.execute({eventName:"compose",initialValue:{data:{...a,max_votes_allowed:a.max_votes_allowed?parseInt(a.max_votes_allowed):void 0,options:(s=a.options)==null?void 0:s.filter(l=>l.text.trim()).map(l=>({text:l.text}))},errors:e}});if(n.status!=="discard")return n.state},this.composer=t,this.state=new _a(this.initialState),this.compositionMiddlewareExecutor=new CN({composer:t}),this.stateMiddlewareExecutor=new _N}get initialState(){var t;return{data:{allow_answers:!1,allow_user_suggested_options:!1,description:"",enforce_unique_vote:!0,id:yr(),max_votes_allowed:"",name:"",options:[{id:yr(),text:""}],user_id:(t=this.composer.client.user)==null?void 0:t.id,voting_visibility:"public"},errors:{}}}get allow_answers(){return this.state.getLatestValue().data.allow_answers}get allow_user_suggested_options(){return this.state.getLatestValue().data.allow_user_suggested_options}get description(){return this.state.getLatestValue().data.description}get enforce_unique_vote(){return this.state.getLatestValue().data.enforce_unique_vote}get id(){return this.state.getLatestValue().data.id}get max_votes_allowed(){return this.state.getLatestValue().data.max_votes_allowed}get name(){return this.state.getLatestValue().data.name}get options(){return this.state.getLatestValue().data.options}get user_id(){return this.state.getLatestValue().data.user_id}get voting_visibility(){return this.state.getLatestValue().data.voting_visibility}get canCreatePoll(){var c,d;const{data:t,errors:a}=this.state.getLatestValue(),e=t.options.filter(p=>!!p.text).length>0,n=!!t.name,s=parseInt(((d=(c=t.max_votes_allowed)==null?void 0:c.match(q0))==null?void 0:d[0])||""),l=t.max_votes_allowed===""||!!s&&(2<=s||s<=10);return e&&n&&l&&Object.values(a).filter(p=>!!p).length===0}},jE=t=>{const{localMetadata:a,...e}=t;return e},kN=t=>({id:"stream-io/message-composer-middleware/attachments",handlers:{compose:({state:a,next:e,discard:n,forward:s})=>{const{attachmentManager:l}=t;if(!l)return s();if(l.uploadsInProgressCount>0)return t.client.notifications.addWarning({message:"Wait until all attachments have uploaded",origin:{emitter:"MessageComposer",context:{composer:t}}}),n();const c=(a.message.attachments??[]).concat(l.successfulUploads.map(jE));return c.length?e({...a,localMessage:{...a.localMessage,attachments:c},message:{...a.message,attachments:c}}):s()}}}),AN=t=>({id:"stream-io/message-composer-middleware/draft-attachments",handlers:{compose:({state:a,next:e,forward:n})=>{const{attachmentManager:s}=t;if(!s)return n();const l=s.successfulUploads,c=l.length?(a.draft.attachments??[]).concat(l.map(jE)):void 0;return e({...a,draft:{...a.draft,attachments:c}})}}}),MN=t=>({id:"stream-io/message-composer-middleware/data-cleanup",handlers:{compose:({state:a,next:e})=>{var l,c,d;const n={type:((l=t.editedMessage)==null?void 0:l.type)??"regular"},s=t.editedMessage?vE(t.editedMessage):void 0;return e({...a,localMessage:Ya({...t.editedMessage,...a.localMessage,...n,user:t.client.user}),message:{...s,...a.message,...n},sendOptions:t.editedMessage&&((c=a.sendOptions)!=null&&c.skip_enrich_url)?{skip_enrich_url:(d=a.sendOptions)==null?void 0:d.skip_enrich_url}:a.sendOptions})}}}),TN=t=>({id:"stream-io/message-composer-middleware/custom-data",handlers:{compose:({state:a,next:e,forward:n})=>{const s=t.customDataManager.customMessageData;return s?e({...a,localMessage:{...a.localMessage,...s},message:{...a.message,...s}}):n()}}}),NN=t=>({id:"stream-io/message-composer-middleware/draft-custom-data",handlers:{compose:({state:a,next:e,forward:n})=>{const s=t.customDataManager.customMessageData;return s?e({...a,draft:{...a.draft,...s}}):n()}}}),RN=t=>({id:"stream-io/message-composer-middleware/data-validation",handlers:{compose:async({state:a,discard:e,forward:n})=>{var h;const{maxLengthOnSend:s}=t.config.text??{},l=a.message.text??"",c=Q0(l)&&!((h=a.message.attachments)!=null&&h.length)&&!a.message.poll_id,d=typeof s=="number"&&l.length>s,p=t.editedMessage&&!t.lastChangeOriginIsLocal;return c||p||d?await e():await n()}}}),LN=t=>({id:"stream-io/message-composer-middleware/draft-data-validation",handlers:{compose:async({state:a,discard:e,forward:n})=>{var c;const s=!Q0(a.draft.text??"")||((c=a.draft.attachments)==null?void 0:c.length)||a.draft.poll_id||a.draft.quoted_message_id;return t.lastChangeOriginIsLocal&&s?await n():await e()}}}),PN=t=>({id:"stream-io/message-composer-middleware/link-previews",handlers:{compose:({state:a,next:e,forward:n})=>{const{linkPreviewsManager:s}=t;if(!s)return n();s.cancelURLEnrichment();const l=s.loadingPreviews.length>0,c=s.dismissedPreviews.length>0,d=s.loadingPreviews.length>0?[]:s.loadedPreviews.map(b=>Z0.getPreviewData(b)),p=(a.message.attachments??[]).concat(d);if(!p.length)return n();const h={...a.sendOptions};return(!l&&d.length>0||c)&&(h.skip_enrich_url=!0),e({...a,message:{...a.message,attachments:p},localMessage:{...a.localMessage,attachments:p},sendOptions:h})}}}),BN=t=>({id:"stream-io/message-composer-middleware/draft-link-previews",handlers:{compose:({state:a,next:e,forward:n})=>{const{linkPreviewsManager:s}=t;if(!s)return n();s.cancelURLEnrichment();const l=s.loadedPreviews.map(c=>Z0.getPreviewData(c));return l.length?e({...a,draft:{...a.draft,attachments:(a.draft.attachments??[]).concat(l)}}):n()}}}),ON=t=>({id:"stream-io/message-composer-middleware/text-composition",handlers:{compose:({state:a,next:e,forward:n})=>{if(!t.textComposer)return n();const{mentionedUsers:s,text:l}=t.textComposer,c=Array.from(new Set(s.filter(({id:d,name:p})=>l.includes(`@${d}`)||l.includes(`@${p}`))));return!l&&c.length===0?n():e({...a,localMessage:{...a.localMessage,mentioned_users:c,text:l},message:{...a.message,mentioned_users:c.map(d=>d.id),text:l}})}}}),zN=t=>({id:"stream-io/message-composer-middleware/draft-text-composition",handlers:{compose:({state:a,next:e,forward:n})=>{if(!t.textComposer)return n();const{maxLengthOnSend:s}=t.config.text??{},{mentionedUsers:l,text:c}=t.textComposer,d=l.length?Array.from(new Set(l.filter(({id:h,name:m})=>c.includes(`@${h}`)||c.includes(`@${m}`)))):void 0,p=typeof s=="number"&&c.length>s?c.slice(0,s):c;return e({...a,draft:{...a.draft,mentioned_users:d==null?void 0:d.map(h=>h.id),text:p}})}}}),UN=t=>({id:"stream-io/message-composer-middleware/own-state",handlers:{compose:({state:a,next:e})=>{const n={};return t.quotedMessage&&(n.quoted_message_id=t.quotedMessage.id),t.pollId&&(n.poll_id=t.pollId),e({...a,localMessage:{...a.localMessage,...n,quoted_message:t.quotedMessage??void 0},message:{...a.message,...n}})}}}),FN=t=>({id:"stream-io/message-composer-middleware/draft-own-state",handlers:{compose:({state:a,next:e})=>{const n={};return t.quotedMessage&&(n.quoted_message_id=t.quotedMessage.id),t.pollId&&(n.poll_id=t.pollId),e({...a,draft:{...a.draft,...n}})}}}),WN={attachments:[],mentioned_users:[],parent_id:void 0,quoted_message:void 0,text:""},jN=t=>({id:"stream-io/message-composer-middleware/poll-only",handlers:{compose:({state:a,complete:e,forward:n})=>{const s=t.pollId,l=!!t.editedMessage,c=!!t.threadId;return!s||c||l?n():e({...a,localMessage:{...a.localMessage,...WN,poll_id:s},message:{id:a.localMessage.id,poll_id:s}})}}}),HN=class extends xu{constructor({composer:t}){super(),this.use([jN(t),ON(t),kN(t),PN(t),UN(t),TN(t),RN(t),MN(t)])}},YN=class extends xu{constructor({composer:t}){super(),this.use([zN(t),AN(t),BN(t),FN(t),NN(t),LN(t)])}},GN={debounceMs:300,pageSize:10},HE=class{constructor(t){this.setDebounceOptions=({debounceMs:n})=>{this.searchDebounced=jg(this.executeQuery.bind(this),n)},this.activate=()=>{this.isActive||this.state.partialNext({isActive:!0})},this.deactivate=()=>{this.isActive&&this.state.partialNext({isActive:!1})},this.canExecuteQuery=n=>{const s=typeof n<"u",l=n??this.searchQuery;return!!(this.isActive&&!this.isLoading&&(this.hasNext||s)&&l)},this.search=n=>this.searchDebounced(n);const{debounceMs:a,pageSize:e}={...GN,...t};this.pageSize=e,this.state=new _a(this.initialState),this.setDebounceOptions({debounceMs:a})}get lastQueryError(){return this.state.getLatestValue().lastQueryError}get hasNext(){return this.state.getLatestValue().hasNext}get hasResults(){return Array.isArray(this.state.getLatestValue().items)}get isActive(){return this.state.getLatestValue().isActive}get isLoading(){return this.state.getLatestValue().isLoading}get initialState(){return{hasNext:!0,isActive:!1,isLoading:!1,items:void 0,lastQueryError:void 0,next:void 0,offset:0,searchQuery:""}}get items(){return this.state.getLatestValue().items}get next(){return this.state.getLatestValue().next}get offset(){return this.state.getLatestValue().offset}get searchQuery(){return this.state.getLatestValue().searchQuery}getStateBeforeFirstQuery(t){return{...this.initialState,isActive:this.isActive,isLoading:!0,searchQuery:t}}getStateAfterQuery(t,a){return{...this.state.getLatestValue(),lastQueryError:void 0,...t,isLoading:!1,items:a?t.items:[...this.items??[],...t.items||[]]}}async executeQuery(t){if(!this.canExecuteQuery(t))return;const a=typeof t<"u",e=t??this.searchQuery;a?this.state.next(this.getStateBeforeFirstQuery(t??"")):this.state.partialNext({isLoading:!0});const n={};try{const s=await this.query(e);if(!s)return;const{items:l,next:c}=s;c||c===null?(n.next=c,n.hasNext=!!c):(n.offset=(this.offset??0)+l.length,n.hasNext=l.length===this.pageSize),n.items=await this.filterQueryResults(l)}catch(s){n.lastQueryError=s}finally{this.state.next(this.getStateAfterQuery(n,a))}}cancelScheduledQuery(){this.searchDebounced.cancel()}resetState(){this.state.next(this.initialState)}resetStateAndActivate(){this.resetState(),this.activate()}},YE=({trigger:t,text:a,isCommand:e=!1,acceptTrailingSpaces:n=!0})=>{const s=`[^\\s${t}]*`,l=a.match(new RegExp(e?`^[${t}]${s}$`:n?`(?!^|\\W)?[${t}]${s}\\s?${s}$`:`(?!^|\\W)?[${t}]${s}$`,"g"));return l&&l[l.length-1].trim()},GE=({insertText:t,selection:a,text:e,trigger:n})=>{const s=e.slice(0,a.end),l=e.slice(a.end),c=s.lastIndexOf(n);return{text:s.slice(0,c)+t+l,selection:{start:c+t.length,end:c+t.length}}};function $N(t){return t.replace(/[-[\]{}()*+?.,/\\^$|#]/g,"\\$&")}var ZN=({displayName:t,searchToken:a})=>({tokenizedDisplayName:{token:a,parts:a?t.split(new RegExp(`(${$N(a)})`,"gi")).filter(Boolean):[t]}}),qN=class extends HE{constructor(t,a){super(a),this.type="commands",this.canExecuteQuery=e=>{const n=typeof e<"u";return this.isActive&&!this.isLoading&&(this.hasNext||n)},this.channel=t}getStateBeforeFirstQuery(t){const a=super.getStateBeforeFirstQuery(t),{items:e}=this.state.getLatestValue();return{...a,items:e}}query(t){const a=this.channel.getConfig(),n=((a==null?void 0:a.commands)||[]).filter(s=>!!(s.name&&s.name.toLowerCase().indexOf(t.toLowerCase())!==-1));return n.sort((s,l)=>{var p,h;let c=(p=s.name)==null?void 0:p.toLowerCase(),d=(h=l.name)==null?void 0:h.toLowerCase();if((c==null?void 0:c.indexOf(t))===0&&(c=`0${c}`),(d==null?void 0:d.indexOf(t))===0&&(d=`0${d}`),c!=null&&d!=null){if(c<d)return-1;if(c>d)return 1}return 0}),Promise.resolve({items:n.map(s=>({...s,id:s.name})),next:null})}filterQueryResults(t){return t}},QN={minChars:1,trigger:"/"},VN=(t,a)=>{const e=Tf(QN,{});let n=new qN(t);return n.activate(),{id:"stream-io/text-composer/commands-middleware",handlers:{onChange:({state:s,next:l,complete:c,forward:d})=>{var b;if(!s.selection)return d();const p=YE({trigger:e.trigger,text:s.text.slice(0,s.selection.end),acceptTrailingSpaces:!1,isCommand:!0});if(p&&p.length===e.minChars&&n.resetStateAndActivate(),!p||p.length<e.minChars){const x=((b=s.suggestions)==null?void 0:b.trigger)===e.trigger,E={...s};return x&&delete E.suggestions,l(E)}return c({...s,suggestions:{query:p.slice(1),searchSource:n,trigger:e.trigger}})},onSuggestionItemSelect:({state:s,complete:l,forward:c})=>{var p;const{selectedSuggestion:d}=s.change??{};return!d||((p=s.suggestions)==null?void 0:p.trigger)!==e.trigger?c():(n.resetStateAndActivate(),l({...s,...GE({insertText:`/${d.name} `,selection:s.selection,text:s.text,trigger:e.trigger}),suggestions:void 0}))}}}},G2={a:"á|à|ã|â|À|Á|Ã|Â",c:"ç|Ç",e:"é|è|ê|É|È|Ê",i:"í|ì|î|Í|Ì|Î",n:"ñ|Ñ",o:"ó|ò|ô|ő|õ|Ó|Ò|Ô|Õ",u:"ú|ù|û|ü|Ú|Ù|Û|Ü"},ug=t=>t?Object.keys(G2).reduce((a,e)=>a.replace(new RegExp(G2[e],"g"),e),t):"",$2=(t,a)=>{if(t.length===0)return a.length;if(a.length===0)return t.length;const e=[];let n;for(n=0;n<=a.length;n++)e[n]=[n];let s;for(s=0;s<=t.length;s++)e[0][s]=s;for(n=1;n<=a.length;n++)for(s=1;s<=t.length;s++)a.charAt(n-1)===t.charAt(s-1)?e[n][s]=e[n-1][s-1]:e[n][s]=Math.min(e[n-1][s-1]+1,Math.min(e[n][s-1]+1,e[n-1][s]+1));return e[a.length][t.length]},XN=class extends HE{constructor(t,a){const{mentionAllAppUsers:e,textComposerText:n,transliterate:s,...l}=a||{};super(l),this.type="mentions",this.canExecuteQuery=c=>{const d=typeof c<"u";return this.isActive&&!this.isLoading&&(d||this.hasNext)},this.transliterate=c=>c,this.getMembersAndWatchers=()=>{const c=Object.values(this.channel.state.members??{}).map(({user:m})=>m),d=Object.values(this.channel.state.watchers??{}),p=[...c,...d],h={};return p.forEach(m=>{m&&!h[m.id]&&(h[m.id]=m)}),Object.values(h)},this.searchMembersLocally=c=>{const{textComposerText:d}=this.config;return d?this.getMembersAndWatchers().filter(p=>{if(p.id===this.client.userID)return!1;if(!c)return!0;const h=this.transliterate(ug(p.id)).toLowerCase(),m=this.transliterate(ug(p.name)).toLowerCase(),b=this.transliterate(ug(c)).toLowerCase(),x=3,E=d.slice(-4).includes("@");if(m){const S=$2(b,m);if(m.includes(b)||S<=x&&E)return!0}const w=$2(b,h);return h.includes(b)||w<=x&&E}).sort((p,h)=>{if(!this.memberSort)return(p.name||"").localeCompare(h.name||"");for(const[m,b]of Object.entries(this.memberSort)){const x=p[m],E=h[m];if(x!==E)return b===1?String(x||"").localeCompare(String(E||"")):String(E||"").localeCompare(String(x||""))}return 0}):[]},this.prepareQueryUsersParams=c=>({filters:{$or:[{id:{$autocomplete:c}},{name:{$autocomplete:c}}],...this.userFilters},sort:this.userSort??[{name:1},{id:1}],options:{...this.searchOptions,limit:this.pageSize,offset:this.offset}}),this.prepareQueryMembersParams=c=>{let p=[{user_id:1}];return this.memberSort?Array.isArray(this.memberSort)?p=this.memberSort[0]:Object.keys(this.memberSort).length===1&&(p=this.memberSort):p=[{user_id:1}],{filters:this.memberFilters??{name:{$autocomplete:c}},sort:p,options:{...this.searchOptions,limit:this.pageSize,offset:this.offset}}},this.queryUsers=async c=>{const{filters:d,sort:p,options:h}=this.prepareQueryUsersParams(c),{users:m}=await this.client.queryUsers(d,p,h);return m},this.queryMembers=async c=>{const{filters:d,sort:p,options:h}=this.prepareQueryMembersParams(c);return(await this.channel.queryMembers(d,p,h)).members.map(b=>b.user)},this.filterMutes=c=>{const{textComposerText:d}=this.config;if(!d)return[];const{mutedUsers:p}=this.client;return d.includes("/unmute")&&!p.length?[]:p.length?d.includes("/unmute")?c.filter(h=>p.some(m=>m.target.id===h.id)):c.filter(h=>p.every(m=>m.target.id!==h.id)):c},this.client=t.getClient(),this.channel=t,this.config={mentionAllAppUsers:e,textComposerText:n},s&&(this.transliterate=s)}get allMembersLoadedWithInitialChannelQuery(){return Object.keys(this.channel.state.members||{}).length<oT}getStateBeforeFirstQuery(t){const a=super.getStateBeforeFirstQuery(t),{items:e}=this.state.getLatestValue();return{...a,items:e}}async query(t){let a;const e=this.allMembersLoadedWithInitialChannelQuery||!t;return this.config.mentionAllAppUsers?a=await this.queryUsers(t):e?a=this.searchMembersLocally(t):a=await this.queryMembers(t),{items:a.map(n=>({...n,...ZN({displayName:n.name||n.id,searchToken:this.searchQuery})}))}}filterQueryResults(t){return this.filterMutes(t)}},KN={minChars:1,trigger:"@"},JN=t=>{const{tokenizedDisplayName:a,...e}=t;return e},e6=(t,a)=>{const e=Tf(KN,{});let n;return n=new XN(t),n.activate(),{id:"stream-io/text-composer/mentions-middleware",handlers:{onChange:({state:s,next:l,complete:c,forward:d})=>{var b;if(!s.selection)return d();const p=YE({trigger:e.trigger,text:s.text.slice(0,s.selection.end)});if(p&&p.length===e.minChars&&n.resetStateAndActivate(),!p||p.length<e.minChars){const x=((b=s.suggestions)==null?void 0:b.trigger)===e.trigger,E={...s};return x&&delete E.suggestions,l(E)}return n.config.textComposerText=s.text,c({...s,suggestions:{query:p.slice(1),searchSource:n,trigger:e.trigger}})},onSuggestionItemSelect:({state:s,complete:l,forward:c})=>{var p;const{selectedSuggestion:d}=s.change??{};return!d||((p=s.suggestions)==null?void 0:p.trigger)!==e.trigger?c():(n.resetStateAndActivate(),l({...s,...GE({insertText:`@${d.name||d.id} `,selection:s.selection,text:s.text,trigger:e.trigger}),mentionedUsers:s.mentionedUsers.concat(JN(d)),suggestions:void 0}))}}}},t6=t=>({id:"stream-io/text-composer/pre-validation-middleware",handlers:{onChange:({state:a,next:e,forward:n})=>{const{maxLengthOnEdit:s}=t.config.text??{};return typeof s=="number"&&a.text.length>s?(a.text=a.text.slice(0,s),e({...a,text:a.text})):n()},onSuggestionItemSelect:({forward:a})=>a()}}),n6=class extends xu{constructor({composer:t}){super(),this.use([t6(t),e6(t.channel),VN(t.channel)])}async execute({eventName:t,initialValue:a}){var l;const e=await this.executeMiddlewareChain({eventName:t,initialValue:a}),{query:n,searchSource:s}=e.state.suggestions??{};return(l=s==null?void 0:s.search(n))==null||l.catch(console.error),e}},Q0=t=>{const a=t.trim();return a===""||a===">"||a==="``````"||a==="``"||a==="**"||a==="____"||a==="__"||a==="****"},Z2=({composer:t,message:a})=>{if(!a){const n=t.config.text.defaultValue??"";return{mentionedUsers:[],text:n,selection:{start:n.length,end:n.length}}}const e=a.text??"";return{mentionedUsers:(a.mentioned_users??[]).map(n=>typeof n=="string"?{id:n}:n),text:e,selection:{start:e.length,end:e.length}}},a6=class{constructor({composer:t,message:a}){this.initState=({message:e}={})=>{this.state.next(Z2({composer:this.composer,message:e}))},this.upsertMentionedUser=e=>{const n=[...this.mentionedUsers],s=n.findIndex(l=>l.id===e.id);s>=0?(n.splice(s,1,e),this.state.partialNext({mentionedUsers:n})):(n.push(e),this.state.partialNext({mentionedUsers:n}))},this.getMentionedUser=e=>this.state.getLatestValue().mentionedUsers.find(n=>n.id===e),this.removeMentionedUser=e=>{const n=this.mentionedUsers.findIndex(l=>l.id===e);if(n===-1)return;const s=[...this.mentionedUsers];s.splice(n,1),this.state.partialNext({mentionedUsers:s})},this.setText=e=>{!this.enabled||e===this.text||this.state.partialNext({text:e})},this.setSelection=e=>{const n=e.start!==this.selection.start||e.end!==this.selection.end;!this.enabled||!n||this.state.partialNext({selection:e})},this.insertText=({text:e,selection:n})=>{if(!this.enabled)return;const s=n??this.selection,{maxLengthOnEdit:l}=this.composer.config.text??{},c=this.text,d=[c.slice(0,s.start),e,c.slice(s.end)].join(""),p=d.slice(0,typeof l=="number"?l:d.length),h=c.slice(0,s.start).length+e.length,m=h>=p.length?p.length:c.slice(0,h).length;this.state.partialNext({text:p,selection:{start:m,end:m}})},this.wrapSelection=({head:e="",selection:n,tail:s=""})=>{if(!this.enabled)return;const l=n??this.selection,c=this.text.slice(0,l.start),d=this.text.slice(l.start,l.end),p=this.text.slice(l.end),h={start:c.length+e.length,end:c.length+e.length+d.length};this.state.partialNext({text:[c,e,d,s,p].join(""),selection:h})},this.setSuggestions=e=>{this.state.partialNext({suggestions:e})},this.closeSuggestions=()=>{const{suggestions:e}=this.state.getLatestValue();e&&this.state.partialNext({suggestions:void 0})},this.handleChange=async({text:e,selection:n})=>{if(!this.enabled)return;const s=await this.middlewareExecutor.execute({eventName:"onChange",initialValue:{...this.state.getLatestValue(),text:e,selection:n}});s.status!=="discard"&&(this.state.next(s.state),this.config.publishTypingEvents&&e&&gE(this.channel.keystroke(this.composer.threadId??void 0),"start typing event"))},this.handleSelect=async e=>{if(!this.enabled)return;const n=await this.middlewareExecutor.execute({eventName:"onSuggestionItemSelect",initialValue:{...this.state.getLatestValue(),change:{selectedSuggestion:e}}});(n==null?void 0:n.status)!=="discard"&&this.state.next(n.state)},this.composer=t,this.state=new _a(Z2({composer:t,message:a})),this.middlewareExecutor=new n6({composer:t})}get channel(){return this.composer.channel}get config(){return this.composer.config.text}get enabled(){return this.composer.config.text.enabled}set enabled(t){t!==this.enabled&&this.composer.updateConfig({text:{enabled:t}})}get defaultValue(){return this.composer.config.text.defaultValue}set defaultValue(t){t!==this.defaultValue&&this.composer.updateConfig({text:{defaultValue:t}})}get maxLengthOnEdit(){return this.composer.config.text.maxLengthOnEdit}set maxLengthOnEdit(t){t!==this.maxLengthOnEdit&&this.composer.updateConfig({text:{maxLengthOnEdit:t}})}get maxLengthOnSend(){return this.composer.config.text.maxLengthOnSend}set maxLengthOnSend(t){t!==this.maxLengthOnSend&&this.composer.updateConfig({text:{maxLengthOnSend:t}})}get publishTypingEvents(){return this.composer.config.text.publishTypingEvents}set publishTypingEvents(t){t!==this.publishTypingEvents&&this.composer.updateConfig({text:{publishTypingEvents:t}})}get mentionedUsers(){return this.state.getLatestValue().mentionedUsers}get selection(){return this.state.getLatestValue().selection}get suggestions(){return this.state.getLatestValue().suggestions}get text(){return this.state.getLatestValue().text}get textIsEmpty(){return Q0(this.text)}setMentionedUsers(t){this.state.partialNext({mentionedUsers:t})}},e0=class $E{constructor(){this.unsubscribeFunctions=new Set}get hasSubscriptions(){return this.unsubscribeFunctions.size>0}addUnsubscribeFunction(a){this.unsubscribeFunctions.add(a)}unregisterSubscriptions(){return this.unsubscribeFunctions.forEach(a=>a()),this.unsubscribeFunctions.clear(),$E.symbol}};e0.symbol=Symbol(e0.name);var wu=e0,dg=50,r6=[{created_at:-1}],s6=1e3,i6={active_participant_count:!0,channel:!0,channel_cid:!0,created_at:!0,created_by:!0,created_by_user_id:!0,deleted_at:!0,draft:!0,last_message_at:!0,latest_replies:!0,parent_message:!0,parent_message_id:!0,participant_count:!0,read:!0,reply_count:!0,thread_participants:!0,title:!0,updated_at:!0},q2=t=>{const a={};for(const e in t){if(i6[e])continue;const n=e;a[n]=t[n]}return a},Xc=class extends wu{constructor({client:t,threadData:a}){super(),this.failedRepliesMap=new Map,this.activate=()=>{this.state.partialNext({active:!0})},this.deactivate=()=>{this.state.partialNext({active:!1})},this.reload=async()=>{if(!this.state.getLatestValue().isLoading){this.state.partialNext({isLoading:!0});try{const s=await this.client.getThread(this.id,{watch:!0});this.hydrateState(s)}finally{this.state.partialNext({isLoading:!1})}}},this.hydrateState=s=>{if(s===this)return;if(s.id!==this.id)throw new Error("Cannot hydrate thread's state using thread with different threadId");const{createdAt:l,custom:c,title:d,deletedAt:p,parentMessage:h,participants:m,read:b,replyCount:x,replies:E,updatedAt:w}=s.state.getLatestValue(),S=Array.from(this.failedRepliesMap.values());this.state.partialNext({title:d,createdAt:l,custom:c,deletedAt:p,parentMessage:h,participants:m,read:b,replyCount:x,replies:S.length?E.concat(S):E,updatedAt:w,isStateStale:!1})},this.registerSubscriptions=()=>{this.hasSubscriptions||(this.addUnsubscribeFunction(this.subscribeThreadUpdated()),this.addUnsubscribeFunction(this.subscribeMarkActiveThreadRead()),this.addUnsubscribeFunction(this.subscribeReloadActiveStaleThread()),this.addUnsubscribeFunction(this.subscribeMarkThreadStale()),this.addUnsubscribeFunction(this.subscribeNewReplies()),this.addUnsubscribeFunction(this.subscribeRepliesRead()),this.addUnsubscribeFunction(this.subscribeMessageDeleted()),this.addUnsubscribeFunction(this.subscribeMessageUpdated()))},this.subscribeThreadUpdated=()=>this.client.on("thread.updated",s=>{if(!s.thread||s.thread.parent_message_id!==this.id)return;const l=s.thread;this.state.partialNext({title:l.title,updatedAt:new Date(l.updated_at),deletedAt:l.deleted_at?new Date(l.deleted_at):null,custom:q2(l)})}).unsubscribe,this.subscribeMarkActiveThreadRead=()=>this.state.subscribeWithSelector(s=>({active:s.active,unreadMessageCount:Q2(this.client.userID)(s)}),({active:s,unreadMessageCount:l})=>{!s||!l||this.throttledMarkAsRead()}),this.subscribeReloadActiveStaleThread=()=>this.state.subscribeWithSelector(s=>({active:s.active,isStateStale:s.isStateStale}),({active:s,isStateStale:l})=>{s&&l&&this.reload()}),this.subscribeMarkThreadStale=()=>this.client.on("user.watching.stop",s=>{var c,d;const{channel:l}=this.state.getLatestValue();!this.client.userID||this.client.userID!==((c=s.user)==null?void 0:c.id)||((d=s.channel)==null?void 0:d.cid)!==l.cid||this.state.partialNext({isStateStale:!0})}).unsubscribe,this.subscribeNewReplies=()=>this.client.on("message.new",s=>{var h,m,b;if(!this.client.userID||((h=s.message)==null?void 0:h.parent_id)!==this.id)return;const l=((m=s.message.user)==null?void 0:m.id)===this.client.userID,{active:c,read:d}=this.state.getLatestValue();this.upsertReplyLocally({message:s.message,timestampChanged:l}),c&&this.throttledMarkAsRead();const p={};for(const x of Object.keys(d)){const E=d[x];if(E){let w=E;x===((b=s.user)==null?void 0:b.id)?w={...w,lastReadAt:s.created_at?new Date(s.created_at):new Date,user:s.user,unreadMessageCount:0}:c&&x===this.client.userID||(w={...w,unreadMessageCount:E.unreadMessageCount+1}),p[x]=w}}this.state.partialNext({read:p})}).unsubscribe,this.subscribeRepliesRead=()=>this.client.on("message.read",s=>{if(!s.user||!s.created_at||!s.thread||s.thread.parent_message_id!==this.id)return;const l=s.user.id,c=s.created_at,d=s.user;this.state.next(p=>({...p,read:{...p.read,[l]:{lastReadAt:new Date(c),user:d,lastReadMessageId:s.last_read_message_id,unreadMessageCount:0}}}))}).unsubscribe,this.subscribeMessageDeleted=()=>this.client.on("message.deleted",s=>{s.message&&(s.message.parent_id===this.id&&(s.hard_delete?this.deleteReplyLocally({message:s.message}):this.upsertReplyLocally({message:s.message})),s.message.id===this.id&&this.updateParentMessageLocally({message:s.message}))}).unsubscribe,this.subscribeMessageUpdated=()=>{const l=["message.updated","reaction.new","reaction.deleted","reaction.updated"].map(c=>this.client.on(c,d=>{d.message&&this.updateParentMessageOrReplyLocally(d.message)}).unsubscribe);return()=>l.forEach(c=>c())},this.unregisterSubscriptions=()=>{const s=super.unregisterSubscriptions();return this.state.partialNext({isStateStale:!0}),s},this.deleteReplyLocally=({message:s})=>{var p;const{replies:l}=this.state.getLatestValue(),c=xE({needle:Ya(s),sortedArray:l,sortDirection:"ascending",selectValueToCompare:h=>h.created_at.getTime(),selectKey:h=>h.id});if(((p=l[c])==null?void 0:p.id)!==s.id)return;const d=[...l];d.splice(c,1),this.state.partialNext({replies:d})},this.upsertReplyLocally=({message:s,timestampChanged:l=!1})=>{if(s.parent_id!==this.id)throw new Error("Reply does not belong to this thread");const c=Ya(s);s.status==="failed"?this.failedRepliesMap.set(c.id,c):this.failedRepliesMap.has(s.id)&&this.failedRepliesMap.delete(s.id),this.state.next(d=>({...d,replies:wE(d.replies,c,l)}))},this.updateParentMessageLocally=({message:s})=>{if(s.id!==this.id)throw new Error("Message does not belong to this thread");this.state.next(l=>{const c=Ya(s);return{...l,deletedAt:c.deleted_at,parentMessage:c,replyCount:s.reply_count??l.replyCount}})},this.updateParentMessageOrReplyLocally=s=>{s.parent_id===this.id&&this.upsertReplyLocally({message:s}),!s.parent_id&&s.id===this.id&&this.updateParentMessageLocally({message:s})},this.markAsRead=async({force:s=!1}={})=>this.ownUnreadCount===0&&!s?null:await this.channel.markRead({thread_id:this.id}),this.throttledMarkAsRead=EE(()=>this.markAsRead(),s6,{trailing:!0}),this.queryReplies=({limit:s=dg,sort:l=r6,...c}={})=>this.channel.getReplies(this.id,{limit:s,...c},l),this.loadNextPage=({limit:s=dg}={})=>this.loadPage(s),this.loadPrevPage=({limit:s=dg}={})=>this.loadPage(-s),this.loadPage=async s=>{var b;const{pagination:l}=this.state.getLatestValue(),[c,d,p]=s>0?["isLoadingNext","nextCursor","push"]:["isLoadingPrev","prevCursor","unshift"];if(l[c]||l[d]===null)return;const h={[s>0?"id_gt":"id_lt"]:l[d]},m=Math.abs(s);this.state.partialNext({pagination:{...l,[c]:!0}});try{const x=await this.queryReplies({...h,limit:m}),E=x.messages.map(Ya),w=((b=E.at(s>0?-1:0))==null?void 0:b.id)??null;this.state.next(S=>{let _=S.replies;return E.length>0&&(_=[...S.replies],_[p](...E)),{...S,replies:_,pagination:{...S.pagination,[d]:x.messages.length<m?null:w,[c]:!1}}})}catch(x){this.client.logger("error",x.message),this.state.next(E=>({...E,pagination:{...E.pagination,[c]:!1}}))}};const e=t.channel(a.channel.type,a.channel.id,{name:a.channel.name});e._hydrateMembers({members:a.channel.members??[],overrideCurrentState:!1});const n=t.userID?[{user:{id:t.userID},unread_messages:0,last_read:new Date().toISOString()}]:[];this.state=new _a({active:!1,isLoading:!1,isStateStale:!1,channel:e,createdAt:new Date(a.created_at),deletedAt:a.deleted_at?new Date(a.deleted_at):null,pagination:l6(a),parentMessage:Ya(a.parent_message),participants:a.thread_participants,read:o6(!a.read||a.read.length===0?n:a.read),replies:a.latest_replies.map(Ya),replyCount:a.reply_count??0,updatedAt:a.updated_at?new Date(a.updated_at):null,title:a.title,custom:q2(a)}),this.id=a.parent_message_id,this.client=t,this.messageComposer=new rp({client:t,composition:a.draft,compositionContext:this})}get channel(){return this.state.getLatestValue().channel}get hasStaleState(){return this.state.getLatestValue().isStateStale}get ownUnreadCount(){return Q2(this.client.userID)(this.state.getLatestValue())}},o6=t=>t.reduce((a,e)=>(a[e.user.id]={user:e.user,lastReadMessageId:e.last_read_message_id,unreadMessageCount:e.unread_messages??0,lastReadAt:new Date(e.last_read)},a),{}),l6=t=>{var e;return{nextCursor:null,prevCursor:t.latest_replies.length===t.reply_count?null:((e=t.latest_replies.at(0))==null?void 0:e.id)??null,isLoadingNext:!1,isLoadingPrev:!1}},Q2=t=>a=>{var e;return t&&((e=a.read[t])==null?void 0:e.unreadMessageCount)||0},Kc=t=>!!(t!=null&&t.message),c6=t=>{let a=null,e=new Date().getTime();return Kc(t)?e=a=new Date(t.created_at).getTime():t&&IE(t)&&(e=new Date(t.updated_at).getTime()),{lastChange:{draftUpdate:a,stateUpdate:e}}},V2=t=>{if(!t)return{id:rp.generateId(),quotedMessage:null,pollId:null,draftId:null};const a=t.quoted_message;let e,n=null,s=rp.generateId();return Kc(t)?(e=t.message,n=t.message.id):(e=t,s=t.id),{draftId:n,id:s,quotedMessage:a?Ya(a):null,pollId:e.poll_id??null}},u6=()=>{},ZE=class t0 extends wu{constructor({composition:a,config:e,compositionContext:n,client:s}){if(super(),this.initState=({composition:c}={})=>{this.editingAuditState.partialNext(this.initEditingAuditState(c));const d=typeof c>"u"?c:Kc(c)?c.message:Ya(c);this.attachmentManager.initState({message:d}),this.linkPreviewsManager.initState({message:d}),this.textComposer.initState({message:d}),this.pollComposer.initState(),this.customDataManager.initState({message:d}),this.state.next(V2(c)),c&&!Kc(c)&&d&&IE(d)&&(this.editedMessage=d)},this.initEditingAuditState=c=>c6(c),this.registerSubscriptions=()=>this.hasSubscriptions?u6:(this.addUnsubscribeFunction(this.subscribeMessageComposerSetupStateChange()),this.addUnsubscribeFunction(this.subscribeMessageUpdated()),this.addUnsubscribeFunction(this.subscribeMessageDeleted()),this.addUnsubscribeFunction(this.subscribeTextComposerStateChanged()),this.addUnsubscribeFunction(this.subscribeAttachmentManagerStateChanged()),this.addUnsubscribeFunction(this.subscribeLinkPreviewsManagerStateChanged()),this.addUnsubscribeFunction(this.subscribePollComposerStateChanged()),this.addUnsubscribeFunction(this.subscribeCustomDataManagerStateChanged()),this.addUnsubscribeFunction(this.subscribeMessageComposerStateChanged()),this.addUnsubscribeFunction(this.subscribeMessageComposerConfigStateChanged()),this.unregisterSubscriptions.bind(this)),this.subscribeMessageUpdated=()=>{const d=["message.updated","reaction.new","reaction.deleted","reaction.updated"].map(p=>this.client.on(p,h=>{var m;h.message&&(h.message.id===this.id&&this.initState({composition:h.message}),(m=this.quotedMessage)!=null&&m.id&&h.message.id===this.quotedMessage.id&&this.setQuotedMessage(Ya(h.message)))}).unsubscribe);return()=>d.forEach(p=>p())},this.subscribeMessageComposerSetupStateChange=()=>{let c=null;const d=this.client._messageComposerSetupState.subscribeWithSelector(({setupFunction:p})=>({setup:p}),({setup:p})=>{c==null||c(),c=(p==null?void 0:p({composer:this}))??null});return()=>{c==null||c(),d()}},this.subscribeMessageDeleted=()=>this.client.on("message.deleted",c=>{c.message&&(c.message.id===this.id?this.clear():this.quotedMessage&&c.message.id===this.quotedMessage.id&&this.setQuotedMessage(null))}).unsubscribe,this.subscribeDraftUpdated=()=>this.client.on("draft.updated",c=>{const d=c.draft;!d||!!d.parent_id!=!!this.threadId||d.channel_cid!==this.channel.cid||this.initState({composition:d})}).unsubscribe,this.subscribeDraftDeleted=()=>this.client.on("draft.deleted",c=>{const d=c.draft;!d||!!d.parent_id!=!!this.threadId||d.channel_cid!==this.channel.cid||(this.logDraftUpdateTimestamp(),!this.compositionIsEmpty&&this.clear())}).unsubscribe,this.subscribeTextComposerStateChanged=()=>this.textComposer.state.subscribeWithSelector(({text:c})=>[c],([c],d)=>{if(!(typeof d>"u")){if(this.logStateUpdateTimestamp(),this.compositionIsEmpty){this.deleteDraft();return}this.linkPreviewsManager.enabled&&(c?this.linkPreviewsManager.findAndEnrichUrls(c):this.linkPreviewsManager.clearPreviews())}}),this.subscribeAttachmentManagerStateChanged=()=>this.attachmentManager.state.subscribe((c,d)=>{if(!(typeof d>"u")&&(this.logStateUpdateTimestamp(),this.compositionIsEmpty)){this.deleteDraft();return}}),this.subscribeLinkPreviewsManagerStateChanged=()=>this.linkPreviewsManager.state.subscribe((c,d)=>{if(!(typeof d>"u")&&(this.logStateUpdateTimestamp(),this.compositionIsEmpty)){this.deleteDraft();return}}),this.subscribePollComposerStateChanged=()=>this.pollComposer.state.subscribe((c,d)=>{if(!(typeof d>"u")&&(this.logStateUpdateTimestamp(),this.compositionIsEmpty)){this.deleteDraft();return}}),this.subscribeCustomDataManagerStateChanged=()=>this.customDataManager.state.subscribe((c,d)=>{typeof d<"u"&&!this.customDataManager.isMessageDataEqual(c,d)&&this.logStateUpdateTimestamp()}),this.subscribeMessageComposerStateChanged=()=>this.state.subscribe((c,d)=>{typeof d>"u"||(this.logStateUpdateTimestamp(),this.compositionIsEmpty&&this.deleteDraft())}),this.subscribeMessageComposerConfigStateChanged=()=>{let c;const d=this.configState.subscribeWithSelector(p=>({textDefaultValue:p.text.defaultValue,draftsEnabled:p.drafts.enabled}),({textDefaultValue:p,draftsEnabled:h})=>{this.textComposer.text===""&&p&&this.textComposer.insertText({text:p,selection:{start:0,end:0}}),h&&!c?c=[this.subscribeDraftUpdated(),this.subscribeDraftDeleted()]:!h&&c&&(c.forEach(m=>m()),c=null)});return()=>{c==null||c.forEach(p=>p()),d()}},this.setQuotedMessage=c=>{this.state.partialNext({quotedMessage:c})},this.clear=()=>{this.initState()},this.restore=()=>{const{editedMessage:c}=this;if(c){this.initState({composition:c});return}this.clear()},this.compose=async()=>{var h;const c=((h=this.editedMessage)==null?void 0:h.created_at)??new Date,p=await this.compositionMiddlewareExecutor.execute({eventName:"compose",initialValue:{message:{id:this.id,parent_id:this.threadId??void 0,type:"regular"},localMessage:{attachments:[],created_at:c,deleted_at:null,error:void 0,id:this.id,mentioned_users:[],parent_id:this.threadId??void 0,pinned_at:null,reaction_groups:null,status:this.editedMessage?this.editedMessage.status:"sending",text:"",type:"regular",updated_at:c},sendOptions:{}}});if(p.status!=="discard")return p.state},this.composeDraft=async()=>{const{state:c,status:d}=await this.draftCompositionMiddlewareExecutor.execute({eventName:"compose",initialValue:{draft:{id:this.id,parent_id:this.threadId??void 0,text:""}}});if(d!=="discard")return c},this.createDraft=async()=>{if(this.editedMessage||!this.config.drafts.enabled)return;const c=await this.composeDraft();if(!c)return;const{draft:d}=c;this.state.partialNext({draftId:d.id}),this.logDraftUpdateTimestamp(),await this.channel.createDraft(d)},this.deleteDraft=async()=>{this.editedMessage||!this.config.drafts.enabled||!this.draftId||(this.state.partialNext({draftId:null}),this.logDraftUpdateTimestamp(),await this.channel.deleteDraft({parent_id:this.threadId??void 0}))},this.createPoll=async()=>{const c=await this.pollComposer.compose();if(!(!c||!c.data.id))try{const{poll:d}=await this.client.createPoll(c.data);this.state.partialNext({pollId:d.id}),this.pollComposer.initState()}catch(d){throw this.client.notifications.add({message:"Failed to create the poll",origin:{emitter:"MessageComposer",context:{composer:this}}}),d}},this.compositionContext=n,this.configState=new _a(Tf(dN,e??{})),n instanceof cl)this.channel=n;else if(n instanceof Xc)this.channel=n.channel;else if(n.cid){const[c,d]=n.cid.split(":");this.channel=s.channel(c,d)}else throw new Error("MessageComposer requires composition context pointing to channel (channel or context.cid)");let l;Kc(a)?l=a.message:a&&(l=Ya(a),this.editedMessage=l),this.attachmentManager=new $T({composer:this,message:l}),this.linkPreviewsManager=new Z0({composer:this,message:l}),this.textComposer=new a6({composer:this,message:l}),this.pollComposer=new DN({composer:this}),this.customDataManager=new fN({composer:this,message:l}),this.editingAuditState=new _a(this.initEditingAuditState(a)),this.state=new _a(V2(a)),this.compositionMiddlewareExecutor=new HN({composer:this}),this.draftCompositionMiddlewareExecutor=new YN({composer:this})}static evaluateContextType(a){return a instanceof cl?"channel":a instanceof Xc?"thread":typeof a.legacyThreadId=="string"?"legacy_thread":"message"}static constructTag(a){return`${this.evaluateContextType(a)}_${a.id}`}get config(){return this.configState.getLatestValue()}updateConfig(a){this.configState.partialNext(Tf(this.config,a))}get contextType(){return t0.evaluateContextType(this.compositionContext)}get tag(){return t0.constructTag(this.compositionContext)}get threadId(){return this.compositionContext instanceof cl?null:this.compositionContext instanceof Xc?this.compositionContext.id:typeof this.compositionContext.legacyThreadId=="string"?this.compositionContext.legacyThreadId:typeof this.compositionContext.parent_id=="string"?this.compositionContext.parent_id:null}get client(){return this.channel.getClient()}get id(){return this.state.getLatestValue().id}get draftId(){return this.state.getLatestValue().draftId}get lastChange(){return this.editingAuditState.getLatestValue().lastChange}get quotedMessage(){return this.state.getLatestValue().quotedMessage}get pollId(){return this.state.getLatestValue().pollId}get hasSendableData(){return!!(!this.attachmentManager.uploadsInProgressCount&&(!this.textComposer.textIsEmpty||this.attachmentManager.successfulUploadsCount>0)||this.pollId)}get compositionIsEmpty(){return!this.quotedMessage&&this.textComposer.textIsEmpty&&!this.attachmentManager.attachments.length&&!this.pollId}get lastChangeOriginIsLocal(){var l;const e=this.lastChange.draftUpdate===null&&!this.editedMessage,n=!!((l=this.editedMessage)!=null&&l.updated_at)&&new Date(this.editedMessage.updated_at).getTime()<this.lastChange.stateUpdate,s=!!this.lastChange.draftUpdate&&this.lastChange.draftUpdate<this.lastChange.stateUpdate;return n||s||e}logStateUpdateTimestamp(){this.editingAuditState.partialNext({lastChange:{...this.lastChange,stateUpdate:new Date().getTime()}})}logDraftUpdateTimestamp(){if(!this.config.drafts.enabled)return;const a=new Date().getTime();this.editingAuditState.partialNext({lastChange:{draftUpdate:a,stateUpdate:a}})}};ZE.generateId=yr;var rp=ZE,cl=class{constructor(t,a,e,n){this.create=async c=>{const d={...c,watch:!1,state:!1,presence:!1};return await this.query(d,"latest")},this._callChannelListeners=c=>{const d=this,p=[];d.listeners.all&&p.push(...d.listeners.all),d.listeners[c.type]&&p.push(...d.listeners[c.type]);for(const h of p)typeof h!="string"&&h(c)},this._channelURL=()=>{if(!this.id)throw new Error("channel id is not defined");return`${this.getClient().baseURL}/channels/${encodeURIComponent(this.type)}/${encodeURIComponent(this.id)}`};const s=/^[\w_-]+$/,l=/^[\w!_-]+$/;if(!s.test(a))throw new Error(`Invalid chat type ${a}, letters, numbers and "_-" are allowed`);if(typeof e=="string"&&!l.test(e))throw new Error(`Invalid chat id ${e}, letters, numbers and "!-_" are allowed`);this._client=t,this.type=a,this.id=e,this.data=n,this._data={...n},this.cid=`${a}:${e}`,this.listeners={},this.state=new RT(this),this.initialized=!1,this.offlineMode=!1,this.lastTypingEvent=null,this.isTyping=!1,this.disconnected=!1,this.messageComposer=new rp({client:this._client,compositionContext:this})}getClient(){if(this.disconnected===!0)throw Error("You can't use a channel after client.disconnect() was called");return this._client}getConfig(){return this.getClient().configs[this.cid]}async _sendMessage(t,a){return await this.getClient().post(this._channelURL()+"/message",{message:t,...a})}async sendMessage(t,a){try{const e=this.getClient().offlineDb;if(e){const n=t.id;if(n)return await e.queueTask({task:{channelId:this.id,channelType:this.type,messageId:n,payload:[t,a],type:"send-message"}})}}catch(e){this._client.logger("error","offlineDb:send-message",{tags:["channel","offlineDb"],error:e})}return await this._sendMessage(t,a)}sendFile(t,a,e,n){return this.getClient().sendFile(`${this._channelURL()}/file`,t,a,e,n)}sendImage(t,a,e,n){return this.getClient().sendFile(`${this._channelURL()}/image`,t,a,e,n)}deleteFile(t){return this.getClient().delete(`${this._channelURL()}/file`,{url:t})}deleteImage(t){return this.getClient().delete(`${this._channelURL()}/image`,{url:t})}async sendEvent(t){return this._checkInitialized(),await this.getClient().post(this._channelURL()+"/event",{event:t})}async search(t,a={}){if(a.offset&&a.next)throw Error("Cannot specify offset with next");const e={filter_conditions:{cid:this.cid},...a,sort:a.sort?ha(a.sort):void 0};if(typeof t=="string")e.query=t;else if(typeof t=="object")e.message_filter_conditions=t;else throw Error(`Invalid type ${typeof t} for query parameter`);return await this.getClient().wsPromise,await this.getClient().get(this.getClient().baseURL+"/search",{payload:e})}async queryMembers(t,a=[],e={}){var c;let n;const s=this.type;let l;return this.id?n=this.id:(c=this.data)!=null&&c.members&&Array.isArray(this.data.members)&&(l=this.data.members),await this.getClient().get(this.getClient().baseURL+"/members",{payload:{type:s,id:n,members:l,sort:ha(a),filter_conditions:t,...e}})}async updateMemberPartial(t,a){const e=new URL(`${this._channelURL()}/member`);return a!=null&&a.userId&&e.searchParams.append("user_id",a.userId),await this.getClient().patch(e.toString(),t)}async partialUpdateMember(t,a){if(!t)throw Error("Please specify the user id");return await this.getClient().patch(this._channelURL()+`/member/${encodeURIComponent(t)}`,a)}async sendReaction(t,a,e){if(!t)throw Error("Message id is missing");if(!a||Object.keys(a).length===0)throw Error("Reaction object is missing");try{const n=this.getClient().offlineDb;if(n)return await n.queueTask({task:{channelId:this.id,channelType:this.type,messageId:t,payload:[t,a,e],type:"send-reaction"}})}catch(n){this._client.logger("error","offlineDb:send-reaction",{tags:["channel","offlineDb"],error:n})}return this._sendReaction(t,a,e)}async _sendReaction(t,a,e){if(!t)throw Error("Message id is missing");if(!a||Object.keys(a).length===0)throw Error("Reaction object is missing");return await this.getClient().post(this.getClient().baseURL+`/messages/${encodeURIComponent(t)}/reaction`,{reaction:a,...e})}async deleteReaction(t,a,e){if(this._checkInitialized(),!a||!t)throw Error("Deleting a reaction requires specifying both the message and reaction type");try{const n=this.getClient().offlineDb;if(n){const s=this.state.messages.find(({id:c})=>c===t),l={created_at:"",updated_at:"",message_id:t,type:a,user_id:this.getClient().userID??e};return s&&await n.deleteReaction({message:s,reaction:l}),await n.queueTask({task:{channelId:this.id,channelType:this.type,messageId:t,payload:[t,a],type:"delete-reaction"}})}}catch(n){this._client.logger("error","offlineDb:delete-reaction",{tags:["channel","offlineDb"],error:n})}return await this._deleteReaction(t,a,e)}async _deleteReaction(t,a,e){if(this._checkInitialized(),!a||!t)throw Error("Deleting a reaction requires specifying both the message and reaction type");const n=this.getClient().baseURL+`/messages/${encodeURIComponent(t)}/reaction/${encodeURIComponent(a)}`;return e?await this.getClient().delete(n,{user_id:e}):await this.getClient().delete(n,{})}async update(t={},a,e){return["config","cid","created_by","id","member_count","type","created_at","updated_at","last_message_at","own_capabilities"].forEach(s=>{delete t[s]}),await this._update({message:a,data:t,...e})}async updatePartial(t){var n,s;const a=await this.getClient().patch(this._channelURL(),t),e=[...a.channel.own_capabilities||[]].sort().join()!==[...Array.isArray((n=this.data)==null?void 0:n.own_capabilities)?(s=this.data)==null?void 0:s.own_capabilities:[]].sort().join();return this.data=a.channel,e&&this.getClient().dispatchEvent({type:"capabilities.changed",cid:this.cid,own_capabilities:a.channel.own_capabilities}),a}async enableSlowMode(t){const a=await this.getClient().post(this._channelURL(),{cooldown:t});return this.data=a.channel,a}async disableSlowMode(){const t=await this.getClient().post(this._channelURL(),{cooldown:0});return this.data=t.channel,t}async delete(t={}){return await this.getClient().delete(this._channelURL(),{...t})}async truncate(t={}){return await this.getClient().post(this._channelURL()+"/truncate",t)}async acceptInvite(t={}){return await this._update({accept_invite:!0,...t})}async rejectInvite(t={}){return await this._update({reject_invite:!0,...t})}async addMembers(t,a,e={}){return await this._update({add_members:t,message:a,...e})}async addModerators(t,a,e={}){return await this._update({add_moderators:t,message:a,...e})}async assignRoles(t,a,e={}){return await this._update({assign_roles:t,message:a,...e})}async inviteMembers(t,a,e={}){return await this._update({invites:t,message:a,...e})}async removeMembers(t,a,e={}){return await this._update({remove_members:t,message:a,...e})}async demoteModerators(t,a,e={}){return await this._update({demote_moderators:t,message:a,...e})}async _update(t){const a=await this.getClient().post(this._channelURL(),t);return this.data=a.channel,a}async mute(t={}){return await this.getClient().post(this.getClient().baseURL+"/moderation/mute/channel",{channel_cid:this.cid,...t})}async unmute(t={}){return await this.getClient().post(this.getClient().baseURL+"/moderation/unmute/channel",{channel_cid:this.cid,...t})}async archive(t={}){const a=this.getClient(),e=t.user_id||a.userID;if(!e)throw Error("A user_id is required for archiving a channel");return(await this.partialUpdateMember(e,{set:{archived:!0}})).channel_member}async unarchive(t={}){const a=this.getClient(),e=t.user_id||a.userID;if(!e)throw Error("A user_id is required for unarchiving a channel");return(await this.partialUpdateMember(e,{set:{archived:!1}})).channel_member}async pin(t={}){const a=this.getClient(),e=t.user_id||a.userID;if(!e)throw new Error("A user_id is required for pinning a channel");return(await this.partialUpdateMember(e,{set:{pinned:!0}})).channel_member}async unpin(t={}){const a=this.getClient(),e=t.user_id||a.userID;if(!e)throw new Error("A user_id is required for unpinning a channel");return(await this.partialUpdateMember(e,{set:{pinned:!1}})).channel_member}muteStatus(){return this._checkInitialized(),this.getClient()._muteStatus(this.cid)}sendAction(t,a){if(this._checkInitialized(),!t)throw Error("Message id is missing");return this.getClient().post(this.getClient().baseURL+`/messages/${encodeURIComponent(t)}/action`,{message_id:t,form_data:a,id:this.id,type:this.type})}async keystroke(t,a){if(!this._isTypingIndicatorsEnabled())return;const e=new Date,n=this.lastTypingEvent&&e.getTime()-this.lastTypingEvent.getTime();this.lastKeyStroke=e,this.isTyping=!0,(n===null||n>2e3)&&(this.lastTypingEvent=new Date,await this.sendEvent({type:"typing.start",parent_id:t,...a||{}}))}async updateAIState(t,a,e={}){await this.sendEvent({...e,type:"ai_indicator.update",message_id:t,ai_state:a})}async clearAIIndicator(){await this.sendEvent({type:"ai_indicator.clear"})}async stopAIResponse(){await this.sendEvent({type:"ai_indicator.stop"})}async stopTyping(t,a){this._isTypingIndicatorsEnabled()&&(this.lastTypingEvent=null,this.isTyping=!1,await this.sendEvent({type:"typing.stop",parent_id:t,...a||{}}))}_isTypingIndicatorsEnabled(){var t,a,e,n,s;return!((t=this.getConfig())!=null&&t.typing_events)||!((a=this.getClient().wsConnection)!=null&&a.isHealthy)?!1:((s=(n=(e=this.getClient().user)==null?void 0:e.privacy_settings)==null?void 0:n.typing_indicators)==null?void 0:s.enabled)??!0}lastMessage(){let t=this.state.latestMessages.length-5;t<0&&(t=0);const a=this.state.latestMessages.length+1,e=this.state.latestMessages.slice(t,a);return e.sort((n,s)=>s.created_at.getTime()-n.created_at.getTime()),e[0]}async markRead(t={}){var a;return this._checkInitialized(),!((a=this.getConfig())!=null&&a.read_events)&&!this.getClient()._isUsingServerAuth()?Promise.resolve(null):await this.getClient().post(this._channelURL()+"/read",{...t})}async markUnread(t){var a;return this._checkInitialized(),!((a=this.getConfig())!=null&&a.read_events)&&!this.getClient()._isUsingServerAuth()?Promise.resolve(null):await this.getClient().post(this._channelURL()+"/unread",{...t})}clean(){this.lastKeyStroke&&new Date().getTime()-this.lastKeyStroke.getTime()>1e3&&this.isTyping&&gE(this.stopTyping(),"stop typing event"),this.state.clean()}async watch(t){const a={state:!0,watch:!0,presence:!1};await this.getClient().wsPromise,this.getClient()._hasConnectionID()||(a.watch=!1);const e={...a,...t},n=await this.query(e,"latest");return this.initialized=!0,this.data=n.channel,this._client.logger("info",`channel:watch() - started watching channel ${this.cid}`,{tags:["channel"],channel:this}),n}async stopWatching(){const t=await this.getClient().post(this._channelURL()+"/stop-watching",{});return this._client.logger("info",`channel:watch() - stopped watching channel ${this.cid}`,{tags:["channel"],channel:this}),t}async getReplies(t,a,e){const n=e?ha(e):void 0,s=await this.getClient().get(this.getClient().baseURL+`/messages/${encodeURIComponent(t)}/replies`,{sort:n,...a});return s.messages&&this.state.addMessagesSorted(s.messages),s}async getPinnedMessages(t,a=[]){return await this.getClient().get(this._channelURL()+"/pinned_messages",{payload:{...t,sort:ha(a)}})}getReactions(t,a){return this.getClient().get(this.getClient().baseURL+`/messages/${encodeURIComponent(t)}/reactions`,{...a})}getMessagesById(t){return this.getClient().get(this._channelURL()+"/messages",{ids:t.join(",")})}lastRead(){const{userID:t}=this.getClient();if(t)return this.state.read[t]?this.state.read[t].last_read:null}_countMessageAsUnread(t){var a,e,n,s;return!(t.shadowed||t.silent||t.parent_id&&!t.show_in_channel||((a=t.user)==null?void 0:a.id)===this.getClient().userID||(e=t.user)!=null&&e.id&&this.getClient().userMuteStatus(t.user.id)||Array.isArray((n=this.data)==null?void 0:n.own_capabilities)&&!((s=this.data)!=null&&s.own_capabilities.includes("read-events"))||this.muteStatus().muted)}countUnread(t){if(!t)return this.state.unreadCount;let a=0;for(let e=0;e<this.state.latestMessages.length;e+=1){const n=this.state.latestMessages[e];n.created_at>t&&this._countMessageAsUnread(n)&&a++}return a}countUnreadMentions(){var n;const t=this.lastRead(),a=this.getClient().userID;let e=0;for(let s=0;s<this.state.latestMessages.length;s+=1){const l=this.state.latestMessages[s];this._countMessageAsUnread(l)&&(!t||l.created_at>t)&&((n=l.mentioned_users)!=null&&n.some(c=>c.id===a))&&e++}return e}async query(t={},a="current"){var d,p,h,m,b,x,E;await this.getClient().wsPromise;const e=((d=t.created_by)==null?void 0:d.id)??t.created_by_id??((h=(p=this._data)==null?void 0:p.created_by)==null?void 0:h.id)??((m=this._data)==null?void 0:m.created_by_id);this.getClient()._isUsingServerAuth()&&typeof e!="string"&&this.getClient().logger("warn","Either `created_by` (with `id` property) or `created_by_id` are missing from both `Channel._data` and `options` parameter");let n=`${this.getClient().baseURL}/channels/${encodeURIComponent(this.type)}`;this.id&&(n+=`/${encodeURIComponent(this.id)}`);const s=await this.getClient().post(n+"/query",{data:this._data,state:!0,...t});if(!this.id){this.id=s.channel.id,this.cid=s.channel.cid;const w=O0(this.type,s.members.map(S=>{var _;return S.user_id||((_=S.user)==null?void 0:_.id)||""}));w&&w in this.getClient().activeChannels&&delete this.getClient().activeChannels[w],!(this.cid in this.getClient().activeChannels)&&this.getClient()._cacheEnabled()&&(this.getClient().activeChannels[this.cid]=this)}this.getClient()._addChannelConfig(s.channel);const{messageSet:l}=this._initializeState(s,a);l.pagination={...l.pagination,...SE({parentSet:l,messagePaginationOptions:t==null?void 0:t.messages,requestedPageSize:((b=t==null?void 0:t.messages)==null?void 0:b.limit)??rT,returnedPage:s.messages,logger:this.getClient().logger})},this.getClient().polls.hydratePollCache(s.messages,!0),s.draft&&this.messageComposer.initState({composition:s.draft});const c=[...s.channel.own_capabilities||[]].sort().join()!==[...this.data&&Array.isArray((x=this.data)==null?void 0:x.own_capabilities)?this.data.own_capabilities:[]].sort().join();return this.data=s.channel,this.offlineMode=!1,c&&this.getClient().dispatchEvent({type:"capabilities.changed",cid:this.cid,own_capabilities:s.channel.own_capabilities}),this.getClient().dispatchEvent({type:"channels.queried",queriedChannels:{channels:[s],isLatestMessageSet:l.isLatest}}),(E=this.getClient().offlineDb)==null||E.executeQuerySafely(w=>{var S;return(S=w.upsertChannels)==null?void 0:S.call(w,{channels:[s],isLatestMessagesSet:l.isLatest})},{method:"upsertChannels"}),s}async banUser(t,a){return this._checkInitialized(),await this.getClient().banUser(t,{...a,type:this.type,id:this.id})}async hide(t=null,a=!1){return this._checkInitialized(),await this.getClient().post(`${this._channelURL()}/hide`,{user_id:t,clear_history:a})}async show(t=null){return this._checkInitialized(),await this.getClient().post(`${this._channelURL()}/show`,{user_id:t})}async unbanUser(t){return this._checkInitialized(),await this.getClient().unbanUser(t,{type:this.type,id:this.id})}async shadowBan(t,a){return this._checkInitialized(),await this.getClient().shadowBan(t,{...a,type:this.type,id:this.id})}async removeShadowBan(t){return this._checkInitialized(),await this.getClient().removeShadowBan(t,{type:this.type,id:this.id})}async vote(t,a,e){return await this.getClient().castPollVote(t,a,e)}async removeVote(t,a,e){return await this.getClient().removePollVote(t,a,e)}async createDraft(t){return await this.getClient().post(this._channelURL()+"/draft",{message:t})}async deleteDraft({parent_id:t}={}){return await this.getClient().delete(this._channelURL()+"/draft",{parent_id:t})}async getDraft({parent_id:t}={}){return await this.getClient().get(this._channelURL()+"/draft",{parent_id:t})}on(t,a){const e=a?t:"all",n=a||t;return e in this.listeners||(this.listeners[e]=[]),this._client.logger("info",`Attaching listener for ${e} event on channel ${this.cid}`,{tags:["event","channel"],channel:this}),this.listeners[e].push(n),{unsubscribe:()=>{this._client.logger("info",`Removing listener for ${e} event from channel ${this.cid}`,{tags:["event","channel"],channel:this}),this.listeners[e]=this.listeners[e].filter(s=>s!==n)}}}off(t,a){const e=a?t:"all",n=a||t;e in this.listeners||(this.listeners[e]=[]),this._client.logger("info",`Removing listener for ${e} event from channel ${this.cid}`,{tags:["event","channel"],channel:this}),this.listeners[e]=this.listeners[e].filter(s=>s!==n)}_handleChannelEvent(t){var n,s,l,c,d,p,h,m,b,x,E,w,S,_,C,D,I,A,T,F,J,H,Z,K,X,W,O,B;const a=this;this._client.logger("info",`channel:_handleChannelEvent - Received event of type { ${t.type} } on ${this.cid}`,{tags:["event","channel"],channel:this});const e=a.state;switch(t.type){case"typing.start":(n=t.user)!=null&&n.id&&(e.typing[t.user.id]=t);break;case"typing.stop":(s=t.user)!=null&&s.id&&delete e.typing[t.user.id];break;case"message.read":(l=t.user)!=null&&l.id&&t.created_at&&(e.read[t.user.id]={last_read:new Date(t.created_at),last_read_message_id:t.last_read_message_id,user:t.user,unread_messages:0},((c=t.user)==null?void 0:c.id)===((d=this.getClient().user)==null?void 0:d.id)&&(e.unreadCount=0));break;case"user.watching.start":case"user.updated":(p=t.user)!=null&&p.id&&(e.watchers[t.user.id]=t.user);break;case"user.watching.stop":(h=t.user)!=null&&h.id&&delete e.watchers[t.user.id];break;case"message.deleted":t.message&&(this._extendEventWithOwnReactions(t),t.hard_delete?e.removeMessage(t.message):e.addMessageSorted(t.message,!1,!1),e.removeQuotedMessageReferences(t.message),t.message.pinned&&e.removePinnedMessage(t.message));break;case"message.new":if(t.message){const U=((m=t.user)==null?void 0:m.id)===((b=this.getClient().user)==null?void 0:b.id),M=t.message.parent_id&&!t.message.show_in_channel;if((this.state.isUpToDate||M)&&e.addMessageSorted(t.message,U),t.message.pinned&&e.addPinnedMessage(t.message),U||M)break;if((x=t.user)!=null&&x.id)for(const G in e.read)G===t.user.id?e.read[t.user.id]={last_read:new Date(t.created_at),user:t.user,unread_messages:0}:e.read[G].unread_messages+=1;this._countMessageAsUnread(t.message)&&(e.unreadCount=e.unreadCount+1)}break;case"message.updated":case"message.undeleted":t.message&&(this._extendEventWithOwnReactions(t),e.addMessageSorted(t.message,!1,!1),e._updateQuotedMessageReferences({message:t.message}),t.message.pinned?e.addPinnedMessage(t.message):e.removePinnedMessage(t.message));break;case"channel.truncated":if((E=t.channel)!=null&&E.truncated_at){const U=+new Date(t.channel.truncated_at);e.messageSets.forEach((M,z)=>{M.messages.forEach(({created_at:G,id:q})=>{U>+G&&e.removeMessage({id:q,messageSetIndex:z})})}),e.pinnedMessages.forEach(({id:M,created_at:z})=>{U>+z&&e.removePinnedMessage({id:M})}),e.unreadCount=this.countUnread(new Date(t.channel.truncated_at))}else e.clearMessages(),e.unreadCount=0;t.message&&(e.addMessageSorted(t.message),t.message.pinned&&e.addPinnedMessage(t.message));break;case"member.added":case"member.updated":{const U={...t.member};U.pinned_at===null&&delete U.pinned_at,U.archived_at===null&&delete U.archived_at,U!=null&&U.user&&(e.members={...e.members,[U.user.id]:U},(w=a.data)!=null&&w.member_count&&t.type==="member.added"&&(a.data.member_count+=1));const M=this.getClient().userID;typeof M=="string"&&typeof((S=U==null?void 0:U.user)==null?void 0:S.id)=="string"&&U.user.id===M&&(e.membership=U);break}case"member.removed":if((_=t.user)!=null&&_.id){const U={...e.members};delete U[t.user.id],e.members=U,(C=a.data)!=null&&C.member_count&&(a.data.member_count=Math.max(a.data.member_count-1,0))}break;case"notification.mark_unread":{if(!(((D=t.user)==null?void 0:D.id)===((I=this.getClient().user)==null?void 0:I.id)&&t.user))break;const M=t.unread_messages??0;e.read[t.user.id]={first_unread_message_id:t.first_unread_message_id,last_read:new Date(t.last_read_at),last_read_message_id:t.last_read_message_id,user:t.user,unread_messages:M},e.unreadCount=M;break}case"channel.updated":if(t.channel){((A=t.channel)==null?void 0:A.frozen)!==void 0&&t.channel.frozen!==((T=a.data)==null?void 0:T.frozen)&&this.query({state:!1,messages:{limit:0},watchers:{limit:0}});const M={...t.channel,hidden:((F=t.channel)==null?void 0:F.hidden)??((J=a.data)==null?void 0:J.hidden),own_capabilities:((H=t.channel)==null?void 0:H.own_capabilities)??((Z=a.data)==null?void 0:Z.own_capabilities)};a.data=M}break;case"reaction.new":if(t.message&&t.reaction){const{message:U,reaction:M}=t;t.message=e.addReaction(M,U)}break;case"reaction.deleted":if(t.message&&t.reaction){const{message:U,reaction:M}=t;t.message=e.removeReaction(M,U)}break;case"reaction.updated":if(t.message&&t.reaction){const{message:U,reaction:M}=t;t.message=e.addReaction(M,U,!0)}break;case"channel.hidden":a.data={...a.data,hidden:!0},t.clear_history&&e.clearMessages();break;case"channel.visible":a.data={...a.data,hidden:!1},(K=this.getClient().offlineDb)==null||K.handleChannelVisibilityEvent({event:t});break;case"user.banned":if(!((X=t.user)!=null&&X.id))break;e.members[t.user.id]={...e.members[t.user.id]||{},shadow_banned:!!t.shadow,banned:!t.shadow,user:{...((W=e.members[t.user.id])==null?void 0:W.user)||{},...t.user}};break;case"user.unbanned":if(!((O=t.user)!=null&&O.id))break;e.members[t.user.id]={...e.members[t.user.id]||{},shadow_banned:!1,banned:!1,user:{...((B=e.members[t.user.id])==null?void 0:B.user)||{},...t.user}};break}t.watcher_count!==void 0&&(a.state.watcher_count=t.watcher_count)}_checkInitialized(){if(!this.initialized&&!this.offlineMode&&!this.getClient()._isUsingServerAuth())throw Error(`Channel ${this.cid} hasn't been initialized yet. Make sure to call .watch() and wait for it to resolve`)}_initializeState(t,a="latest"){const{state:e,user:n,userID:s}=this.getClient();if(t.members){this._hydrateMembers({members:t.members});for(const d of t.members)d.user&&e.updateUserReference(d.user,this.cid)}this.state.membership=t.membership||{};const l=t.messages||[];this.state.messages||this.state.initMessages();const{messageSet:c}=this.state.addMessagesSorted(l,!1,!0,!0,a);if(this.state.pinnedMessages||(this.state.pinnedMessages=[]),this.state.addPinnedMessages(t.pinned_messages||[]),t.pending_messages&&(this.state.pending_messages=t.pending_messages),t.watcher_count!==void 0&&(this.state.watcher_count=t.watcher_count),t.watchers)for(const d of t.watchers)d&&(e.updateUserReference(d,this.cid),this.state.watchers[d.id]=d);if(s!=null){const d=this.state.last_message_at||new Date;n&&(this.state.read[n.id]={user:n,last_read:d,unread_messages:0})}if(t.read)for(const d of t.read)this.state.read[d.user.id]={last_read:new Date(d.last_read),last_read_message_id:d.last_read_message_id,unread_messages:d.unread_messages??0,user:d.user},d.user.id===(n==null?void 0:n.id)&&(this.state.unreadCount=this.state.read[d.user.id].unread_messages);return{messageSet:c}}_extendEventWithOwnReactions(t){if(!t.message)return;const a=this.state.findMessage(t.message.id,t.message.parent_id);a&&(t.message.own_reactions=a.own_reactions)}_hydrateMembers({members:t,overrideCurrentState:a=!0}){const e=t.reduce((n,s)=>(s.user&&(n[s.user.id]=s),n),{});a?this.state.members=e:!a&&t.length&&(this.state.members={...this.state.members,...e})}_disconnect(){this._client.logger("info",`channel:disconnect() - Disconnecting the channel ${this.cid}`,{tags:["connection","channel"],channel:this}),this.disconnected=!0,this.state.setIsUpToDate(!1)}},X2=class{constructor({client:t}){this.client=t,this.users={},this.userChannelReferences={}}updateUsers(t){for(const a of t)this.updateUser(a)}updateUser(t){t!=null&&this.client._cacheEnabled()&&(this.users[t.id]=t)}updateUserReference(t,a){t==null||!this.client._cacheEnabled()||(this.updateUser(t),this.userChannelReferences[t.id]||(this.userChannelReferences[t.id]={}),this.userChannelReferences[t.id][a]=!0)}deleteAllChannelReference(t){for(const a in this.userChannelReferences)delete this.userChannelReferences[a][t]}},rl=null;typeof WebSocket<"u"?rl=WebSocket:typeof MozWebSocket<"u"?rl=MozWebSocket:typeof global<"u"?rl=global.WebSocket||global.MozWebSocket:typeof window<"u"?rl=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(rl=self.WebSocket||self.MozWebSocket);var d6=rl,f6=class{constructor(){this.connectionStartTimestamp=null,this.wsTotalFailures=0,this.wsConsecutiveFailures=0,this.instanceClientId=sl()}},Hc=async(t,a)=>{for(let n=0;n<3;n++){try{await su.post(`https://chat-insights.getstream.io/insights/${t}`,a)}catch{await Ai((n+1)*3e3);continue}break}};function p6(t,a){return{...a,...qE(t)}}function qE(t){var e;const{client:a}=t;return{ready_state:(e=t.ws)==null?void 0:e.readyState,url:t._buildUrl(),api_key:a.key,start_ts:a.insightMetrics.connectionStartTimestamp,end_ts:new Date().getTime(),auth_type:a.getAuthType(),token:a.tokenManager.token,user_id:a.userID,user_details:a._user,device:a.options.device,client_id:t.connectionID,ws_details:t.ws,ws_consecutive_failures:a.insightMetrics.wsConsecutiveFailures,ws_total_failures:a.insightMetrics.wsTotalFailures,request_id:t.requestID,online:typeof navigator<"u"?navigator==null?void 0:navigator.onLine:null,user_agent:typeof navigator<"u"?navigator==null?void 0:navigator.userAgent:null,instance_client_id:a.insightMetrics.instanceClientId}}function m6(t){return qE(t)}var h6=t=>t.code!==void 0,g6=t=>t.error!==void 0,y6=class{constructor({client:t}){this._buildUrl=()=>{const a=this.client._buildWSPayload(this.requestID),e=this.client.tokenManager.getToken(),n=this.client.options.wsUrlParams,s=new URLSearchParams(n);return s.set("json",a),s.set("api_key",this.client.key),s.set("authorization",`${e}`),s.set("stream-auth-type",this.client.getAuthType()),s.set("X-Stream-Client",this.client.getUserAgent()),`${this.client.wsBaseURL}/connect?${s.toString()}`},this.onlineStatusChanged=a=>{a.type==="offline"?(this._log("onlineStatusChanged() - Status changing to offline"),this._setHealth(!1)):a.type==="online"&&(this._log(`onlineStatusChanged() - Status changing to online. isHealthy: ${this.isHealthy}`),this.isHealthy||this._reconnect({interval:10}))},this.onopen=a=>{this.wsID===a&&this._log("onopen() - onopen callback",{wsID:a})},this.onmessage=(a,e)=>{var s,l;if(this.wsID!==a)return;this._log("onmessage() - onmessage callback",{event:e,wsID:a});const n=typeof e.data=="string"?JSON.parse(e.data):null;if(!this.isResolved&&n){if(this.isResolved=!0,n.error){(s=this.rejectPromise)==null||s.call(this,this._errorFromWSEvent(n,!1));return}(l=this.resolvePromise)==null||l.call(this,n),this._setHealth(!0)}this.lastEvent=new Date,n&&n.type==="health.check"&&this.scheduleNextPing(),this.client.handleEvent(e),this.scheduleConnectionCheck()},this.onclose=(a,e)=>{var n,s;if(this.wsID===a)if(this._log("onclose() - onclose callback - "+e.code,{event:e,wsID:a}),e.code===Wc.WS_CLOSED_SUCCESS){const l=new Error(`WS connection reject with error ${e.reason}`);l.reason=e.reason,l.code=e.code,l.wasClean=e.wasClean,l.target=e.target,(n=this.rejectPromise)==null||n.call(this,l),this._log(`onclose() - WS connection reject with error ${e.reason}`,{event:e})}else this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,(s=this.rejectPromise)==null||s.call(this,this._errorFromWSEvent(e)),this._log("onclose() - WS connection closed. Calling reconnect ...",{event:e}),this._reconnect()},this.onerror=(a,e)=>{var n;this.wsID===a&&(this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,(n=this.rejectPromise)==null||n.call(this,this._errorFromWSEvent(e)),this._log("onerror() - WS connection resulted into error",{event:e}),this._reconnect())},this._setHealth=a=>{if(a!==this.isHealthy){if(this.isHealthy=a,this.isHealthy){this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy});return}setTimeout(()=>{this.isHealthy||this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy})},5e3)}},this._errorFromWSEvent=(a,e=!0)=>{let n,s,l;h6(a)&&(n=a.code,s="unknown",l=a.reason),g6(a)&&(n=a.error.code,s=a.error.StatusCode,l=a.error.message),this._log(`_errorFromWSEvent() - WS failed with code ${n}`,{event:a},"warn");const c=new Error(`WS failed with code ${n} and reason - ${l}`);return c.code=n,c.StatusCode=s,c.isWSFailure=e,c},this._setupConnectionPromise=()=>{this.isResolved=!1,this.connectionOpen=new Promise((a,e)=>{this.resolvePromise=a,this.rejectPromise=e})},this.scheduleNextPing=()=>{this.healthCheckTimeoutRef&&clearTimeout(this.healthCheckTimeoutRef),this.healthCheckTimeoutRef=setTimeout(()=>{var e;const a=[{type:"health.check",client_id:this.client.clientID}];try{(e=this.ws)==null||e.send(JSON.stringify(a))}catch{}},this.pingInterval)},this.scheduleConnectionCheck=()=>{this.connectionCheckTimeoutRef&&clearTimeout(this.connectionCheckTimeoutRef),this.connectionCheckTimeoutRef=setTimeout(()=>{const a=new Date;this.lastEvent&&a.getTime()-this.lastEvent.getTime()>this.connectionCheckTimeout&&(this._log("scheduleConnectionCheck - going to reconnect"),this._setHealth(!1),this._reconnect())},this.connectionCheckTimeout)},this.client=t,this.consecutiveFailures=0,this.totalFailures=0,this.isConnecting=!1,this.isDisconnected=!1,this.isResolved=!1,this.isHealthy=!1,this.wsID=1,this.lastEvent=null,this.pingInterval=25*1e3,this.connectionCheckTimeout=this.pingInterval+10*1e3,yE(this.onlineStatusChanged)}_log(t,a={},e="info"){this.client.logger(e,"connection:"+t,{tags:["connection"],...a})}setClient(t){this.client=t}async connect(t=15e3){if(this.isConnecting)throw Error("You've called connect twice, can only attempt 1 connection at the time");this.isDisconnected=!1;try{const a=await this._connect();this.consecutiveFailures=0,this._log(`connect() - Established ws connection with healthcheck: ${a}`)}catch(a){this.isHealthy=!1,this.consecutiveFailures+=1;const e=a;if(e.code===Wc.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});else if(!e.isWSFailure)throw new Error(JSON.stringify({code:e.code,StatusCode:e.StatusCode,message:e.message,isWSFailure:e.isWSFailure}))}return await this._waitForHealthy(t)}_waitForHealthy(t=15e3){return Promise.race([(async()=>{for(let e=0;e<=t;e+=50)try{return await this.connectionOpen}catch(n){if(e===t)throw new Error(JSON.stringify({code:n.code,StatusCode:n.StatusCode,message:n.message,isWSFailure:n.isWSFailure}));await Ai(50)}})(),(async()=>{throw await Ai(t),this.isConnecting=!1,new Error(JSON.stringify({code:"",StatusCode:"",message:"initial WS connection could not be established",isWSFailure:!0}))})()])}disconnect(t){this._log(`disconnect() - Closing the websocket connection for wsID ${this.wsID}`),this.wsID+=1,this.isConnecting=!1,this.isDisconnected=!0,this.healthCheckTimeoutRef&&clearInterval(this.healthCheckTimeoutRef),this.connectionCheckTimeoutRef&&clearInterval(this.connectionCheckTimeoutRef),bE(this.onlineStatusChanged),this.isHealthy=!1,this.ws&&this.ws.removeAllListeners&&this.ws.removeAllListeners();let a;const{ws:e}=this;return e&&e.close&&e.readyState===e.OPEN?(a=new Promise(n=>{const s=l=>{this._log(`disconnect() - resolving isClosedPromise ${l?"with":"without"} close frame`,{event:l}),n()};e.onclose=s,setTimeout(s,t??1e3)}),this._log("disconnect() - Manually closed connection by calling client.disconnect()"),e.close(Wc.WS_CLOSED_SUCCESS,"Manually closed connection by calling client.disconnect()")):(this._log("disconnect() - ws connection doesn't exist or it is already closed."),a=Promise.resolve()),delete this.ws,a}async _connect(){if(this.isConnecting||this.isDisconnected&&this.client.options.enableWSFallback)return;this.isConnecting=!0,this.requestID=sl(),this.client.insightMetrics.connectionStartTimestamp=new Date().getTime();let t=!1;try{this._log("_connect() - waiting for token"),await this.client.tokenManager.tokenReady(),t=!0}catch{}try{t||(this._log("_connect() - tokenProvider failed before, so going to retry"),await this.client.tokenManager.loadToken()),this._setupConnectionPromise();const a=this._buildUrl();this._log(`_connect() - Connecting to ${a}`,{wsURL:a,requestID:this.requestID}),this.ws=new d6(a),this.ws.onopen=this.onopen.bind(this,this.wsID),this.ws.onclose=this.onclose.bind(this,this.wsID),this.ws.onerror=this.onerror.bind(this,this.wsID),this.ws.onmessage=this.onmessage.bind(this,this.wsID);const e=await this.connectionOpen;if(this.isConnecting=!1,e)return this.connectionID=e.connection_id,this.client.insightMetrics.wsConsecutiveFailures>0&&this.client.options.enableInsights&&(Hc("ws_success_after_failure",m6(this)),this.client.insightMetrics.wsConsecutiveFailures=0),e}catch(a){if(this.isConnecting=!1,this._log("_connect() - Error - ",a),this.client.options.enableInsights){this.client.insightMetrics.wsConsecutiveFailures++,this.client.insightMetrics.wsTotalFailures++;const e=p6(this,wT(a));Hc==null||Hc("ws_fatal",e)}throw a}}async _reconnect(t={}){if(this._log("_reconnect() - Initiating the reconnect"),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (1) since already connecting or healthy");return}let a=t.interval;if(a||(a=Af(this.consecutiveFailures)),await Ai(a),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (2) since already connecting or healthy");return}if(this.isDisconnected&&this.client.options.enableWSFallback){this._log("_reconnect() - Abort (3) since disconnect() is called");return}this._log("_reconnect() - Destroying current WS connection"),this._destroyCurrentWSConnection(),t.refreshToken&&await this.client.tokenManager.loadToken();try{await this._connect(),this._log("_reconnect() - Waiting for recoverCallBack"),await this.client.recoverState(),this._log("_reconnect() - Finished recoverCallBack"),this.consecutiveFailures=0}catch(e){if(this.isHealthy=!1,this.consecutiveFailures+=1,e.code===Wc.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())return this._log("_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});e.isWSFailure&&(this._log("_reconnect() - WS failure, so going to try to reconnect"),this._reconnect())}this._log("_reconnect() - == END ==")}_destroyCurrentWSConnection(){var t,a;this.wsID+=1;try{(t=this==null?void 0:this.ws)==null||t.removeAllListeners(),(a=this==null?void 0:this.ws)==null||a.close()}catch{}}},uf=bu(M8()),K2=bu(T8());function QE(t,a,e={},n={}){if(typeof a!="string")throw new TypeError("userId should be a string");const s={user_id:a,...e};if(uf.default==null||uf.default.sign==null)throw Error("Unable to find jwt crypto, if you are getting this error is probably because you are trying to generate tokens on browser or React Native (or other environment where crypto functions are not available). Please Note: token should only be generated server-side.");const l=Object.assign({algorithm:"HS256",noTimestamp:!0},n);return s.iat&&(l.noTimestamp=!1),uf.default.sign(s,t,l)}function J2(t,a={}){const e={server:!0},n=Object.assign({algorithm:"HS256",noTimestamp:!0},a);return uf.default.sign(e,t,n)}function b6(t){const a=t.split(".");if(a.length!==3)return"";const e=a[1],n=P8(e);return JSON.parse(n).user_id}function v6(t){return["eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",L8(JSON.stringify({user_id:t})),"devtoken"].join(".")}function x6(t,a,e){const n=Buffer.from(a,"utf8"),s=K2.default.createHmac("sha256",n).update(t).digest("hex");try{return K2.default.timingSafeEqual(Buffer.from(s),Buffer.from(e))}catch{return!1}}var w6=class{constructor(t){this.setTokenOrProvider=async(a,e)=>{this.validateToken(a,e),this.user=e,Wg(a)&&(this.tokenProvider=a,this.type="provider"),typeof a=="string"&&(this.token=a,this.type="static"),!a&&this.user&&this.secret&&(this.token=QE(this.secret,e.id,{},{}),this.type="static"),await this.loadToken()},this.reset=()=>{this.token=void 0,this.tokenProvider=void 0,this.type="static",this.user=void 0,this.loadTokenPromise=null},this.validateToken=(a,e)=>{if(!(e&&e.anon&&!a)){if(!this.secret&&!a)throw new Error("User token can not be empty");if(a&&typeof a!="string"&&!Wg(a))throw new Error("user token should either be a string or a function");if(typeof a=="string"){if(e.anon&&a==="")return;const n=b6(a);if(a!=null&&(n==null||n===""||n!==e.id))throw new Error("userToken does not have a user_id or is not matching with user.id")}}},this.tokenReady=()=>this.loadTokenPromise,this.loadToken=()=>(this.loadTokenPromise=new Promise(async(a,e)=>{if(this.type==="static")return a(this.token);if(this.tokenProvider&&typeof this.tokenProvider!="string"){try{this.token=await this.tokenProvider()}catch(n){return e(new Error(`Call to tokenProvider failed with message: ${n}`))}a(this.token)}}),this.loadTokenPromise),this.getToken=()=>{if(this.token)return this.token;if(this.user&&this.user.anon&&!this.token)return this.token;if(this.secret)return J2(this.secret);throw new Error("Both secret and user tokens are not set. Either client.connectUser wasn't called or client.disconnect was called")},this.isStatic=()=>this.type==="static",this.loadTokenPromise=null,t&&(this.secret=t),this.type="static",this.secret&&(this.token=J2(this.secret))}},E6={"-1":{name:"InternalSystemError",retryable:!0},2:{name:"AccessKeyError",retryable:!1},3:{name:"AuthenticationFailedError",retryable:!0},4:{name:"InputError",retryable:!1},6:{name:"DuplicateUsernameError",retryable:!1},9:{name:"RateLimitError",retryable:!0},16:{name:"DoesNotExistError",retryable:!1},17:{name:"NotAllowedError",retryable:!1},18:{name:"EventNotSupportedError",retryable:!1},19:{name:"ChannelFeatureNotSupportedError",retryable:!1},20:{name:"MessageTooLongError",retryable:!1},21:{name:"MultipleNestingLevelError",retryable:!1},22:{name:"PayloadTooBigError",retryable:!1},23:{name:"RequestTimeoutError",retryable:!0},24:{name:"MaxHeaderSizeExceededError",retryable:!1},40:{name:"AuthErrorTokenExpired",retryable:!1},41:{name:"AuthErrorTokenNotValidYet",retryable:!1},42:{name:"AuthErrorTokenUsedBeforeIssuedAt",retryable:!1},43:{name:"AuthErrorTokenSignatureInvalid",retryable:!1},44:{name:"CustomCommandEndpointMissingError",retryable:!1},45:{name:"CustomCommandEndpointCallError",retryable:!0},46:{name:"ConnectionIDNotFoundError",retryable:!1},60:{name:"CoolDownError",retryable:!0},69:{name:"ErrWrongRegion",retryable:!1},70:{name:"ErrQueryChannelPermissions",retryable:!1},71:{name:"ErrTooManyConnections",retryable:!0},99:{name:"AppSuspendedError",retryable:!1}};function S6(t){return t.code!==void 0}function ex(t){if(!t.code)return!1;const a=E6[`${t.code}`];return a?a.retryable:!1}function C6(t){return t.code===46}function _6(t){if(typeof t.isWSFailure=="boolean")return t.isWSFailure;try{return JSON.parse(t.message).isWSFailure}catch{return!1}}function I6(t){return!t.status||t.status<200||300<=t.status}var D6=class{constructor({client:t}){this._onlineStatusChanged=a=>{var e;if(this._log(`_onlineStatusChanged() - ${a.type}`),a.type==="offline"){this._setState("CLOSED"),(e=this.cancelToken)==null||e.cancel("disconnect() is called"),this.cancelToken=void 0;return}a.type==="online"&&this.state==="CLOSED"&&this.connect(!0)},this._req=async(a,e,n)=>{var s;!this.cancelToken&&!a.close&&(this.cancelToken=su.CancelToken.source());try{const l=await this.client.doAxiosRequest("get",this.client.baseURL.replace(":3030",":8900")+"/longpoll",void 0,{config:{...e,cancelToken:(s=this.cancelToken)==null?void 0:s.token},params:a});return this.consecutiveFailures=0,l}catch(l){if(this.consecutiveFailures+=1,n&&ex(l))return this._log("_req() - Retryable error, retrying request"),await Ai(Af(this.consecutiveFailures)),this._req(a,e,n);throw l}},this._poll=async()=>{var a;for(;this.state==="CONNECTED";)try{const e=await this._req({},{timeout:3e4},!0);if((a=e.events)!=null&&a.length)for(let n=0;n<e.events.length;n++)this.client.dispatchEvent(e.events[n])}catch(e){if(su.isCancel(e)){this._log("_poll() - axios canceled request");return}if(C6(e)){this._log("_poll() - ConnectionID error, connecting without ID..."),this._setState("DISCONNECTED"),this.connect(!0);return}if(S6(e)&&!ex(e)){this._setState("CLOSED");return}await Ai(Af(this.consecutiveFailures))}},this.connect=async(a=!1)=>{if(this.state==="CONNECTING"){this._log("connect() - connecting already in progress",{reconnect:a},"warn");return}if(this.state==="CONNECTED"){this._log("connect() - already connected and polling",{reconnect:a},"warn");return}this._setState("CONNECTING"),this.connectionID=void 0;try{const{event:e}=await this._req({json:this.client._buildWSPayload()},{timeout:8e3},a);return this._setState("CONNECTED"),this.connectionID=e.connection_id,this.client.dispatchEvent(e),this._poll(),a&&this.client.recoverState(),e}catch(e){throw this._setState("CLOSED"),e}},this.isHealthy=()=>!!this.connectionID&&this.state==="CONNECTED",this.disconnect=async(a=2e3)=>{var n;bE(this._onlineStatusChanged),this._setState("DISCONNECTED"),(n=this.cancelToken)==null||n.cancel("disconnect() is called"),this.cancelToken=void 0;const e=this.connectionID;this.connectionID=void 0;try{await this._req({close:!0,connection_id:e},{timeout:a},!1),this._log("disconnect() - Closed connectionID")}catch(s){this._log("disconnect() - Failed",{err:s},"error")}},this.client=t,this.state="INIT",this.consecutiveFailures=0,yE(this._onlineStatusChanged)}_log(t,a={},e="info"){this.client.logger(e,"WSConnectionFallback:"+t,{tags:["connection_fallback","connection"],...a})}_setState(t){this._log(`_setState() - ${t}`),this.state==="CONNECTING"&&t==="CONNECTED"&&this.client.dispatchEvent({type:"connection.changed",online:!0}),(t==="CLOSED"||t==="DISCONNECTED")&&this.client.dispatchEvent({type:"connection.changed",online:!1}),this.state=t}},tx=class{constructor(t,a,e,n){this.client=t,this.type=a,this.id=e,this.data=n}create(){var a,e,n,s,l;const t={name:(a=this.data)==null?void 0:a.name,filter:(e=this.data)==null?void 0:e.filter,description:(n=this.data)==null?void 0:n.description,all_sender_channels:(s=this.data)==null?void 0:s.all_sender_channels,all_users:(l=this.data)==null?void 0:l.all_users};return this.client.createSegment(this.type,this.id,t)}verifySegmentId(){if(!this.id)throw new Error("Segment id is missing. Either create the segment using segment.create() or set the id during instantiation - const segment = client.segment(id)")}get(){return this.verifySegmentId(),this.client.getSegment(this.id)}update(t){return this.verifySegmentId(),this.client.updateSegment(this.id,t)}addTargets(t){return this.verifySegmentId(),this.client.addSegmentTargets(this.id,t)}removeTargets(t){return this.verifySegmentId(),this.client.removeSegmentTargets(this.id,t)}delete(){return this.verifySegmentId(),this.client.deleteSegment(this.id)}targetExists(t){return this.verifySegmentId(),this.client.segmentTargetExists(this.id,t)}queryTargets(t={},a=[],e={}){return this.verifySegmentId(),this.client.querySegmentTargets(this.id,t,a,e)}},$d={user:"stream:user",message:"stream:chat:v1:message",userprofile:"stream:v1:user_profile"},k6=class{constructor(t){this.client=t}flagUser(t,a,e={}){return this.flag($d.user,t,"",a,e)}flagMessage(t,a,e={}){return this.flag($d.message,t,"",a,e)}async flag(t,a,e,n,s={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/flag",{entity_type:t,entity_id:a,entity_creator_id:e,reason:n,...s})}async muteUser(t,a={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/mute",{target_ids:[t],...a})}async unmuteUser(t,a){return await this.client.post(this.client.baseURL+"/api/v2/moderation/unmute",{target_ids:[t],...a})}async getUserModerationReport(t,a={}){return await this.client.get(this.client.baseURL+"/api/v2/moderation/user_report",{user_id:t,...a})}async queryReviewQueue(t={},a=[],e={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/review_queue",{filter:t,sort:ha(a),...e})}async upsertConfig(t){return await this.client.post(this.client.baseURL+"/api/v2/moderation/config",t)}async getConfig(t,a){return await this.client.get(this.client.baseURL+"/api/v2/moderation/config/"+t,a)}async deleteConfig(t,a){return await this.client.delete(this.client.baseURL+"/api/v2/moderation/config/"+t,a)}async queryConfigs(t,a,e={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/configs",{filter:t,sort:a,...e})}async submitAction(t,a,e={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/submit_action",{action_type:t,item_id:a,...e})}async check(t,a,e,n,s,l){return await this.client.post(this.client.baseURL+"/api/v2/moderation/check",{entity_type:t,entity_id:a,entity_creator_id:e,moderation_payload:n,config_key:s,options:l})}async checkUserProfile(t,a){if(!a.username&&!a.image)throw new Error("Either username or image must be provided");const e={};return a.username&&(e.texts=[a.username]),a.image&&(e.images=[a.image]),await this.check($d.userprofile,t,t,e,"user_profile:default",{force_sync:!0,test_mode:!0})}async addCustomFlags(t,a,e,n,s){return await this.client.post(this.client.baseURL+"/api/v2/moderation/custom_check",{entity_type:t,entity_id:a,entity_creator_id:e,moderation_payload:n,flags:s})}async addCustomMessageFlags(t,a){return await this.addCustomFlags($d.message,t,"",{},a)}},A6=1e3,nx=25,ax={active:!1,isThreadOrderStale:!1,threads:[],unreadThreadCount:0,unseenThreadIds:[],lastConnectionDropAt:null,pagination:{isLoading:!1,isLoadingNext:!1,nextCursor:null},ready:!1},M6=class extends wu{constructor({client:t}){super(),this.resetState=()=>{this.state.next(ax)},this.activate=()=>{this.state.partialNext({active:!0})},this.deactivate=()=>{this.state.partialNext({active:!1})},this.registerSubscriptions=()=>{this.hasSubscriptions||(this.addUnsubscribeFunction(this.subscribeUnreadThreadsCountChange()),this.addUnsubscribeFunction(this.subscribeManageThreadSubscriptions()),this.addUnsubscribeFunction(this.subscribeReloadOnActivation()),this.addUnsubscribeFunction(this.subscribeNewReplies()),this.addUnsubscribeFunction(this.subscribeRecoverAfterConnectionDrop()),this.addUnsubscribeFunction(this.subscribeChannelDeleted()))},this.subscribeUnreadThreadsCountChange=()=>{const{unread_threads:a=0}=this.client.user??{};this.state.partialNext({unreadThreadCount:a});const e=["health.check","notification.mark_read","notification.thread_message_new","notification.channel_deleted"].map(n=>this.client.on(n,s=>{const{unread_threads:l}=s.me??s;typeof l=="number"&&this.state.partialNext({unreadThreadCount:l})}).unsubscribe);return()=>e.forEach(n=>n())},this.subscribeChannelDeleted=()=>this.client.on("notification.channel_deleted",a=>{const{cid:e}=a,{threads:n}=this.state.getLatestValue(),s=n.filter(l=>l.channel.cid!==e);this.state.partialNext({threads:s})}).unsubscribe,this.subscribeManageThreadSubscriptions=()=>this.state.subscribeWithSelector(a=>({threads:a.threads}),({threads:a},e)=>{const{threads:n=[]}=e??{},s=n.filter(l=>l!==this.threadsById[l.id]);a.forEach(l=>l.registerSubscriptions()),s.forEach(l=>l.unregisterSubscriptions())}),this.subscribeReloadOnActivation=()=>this.state.subscribeWithSelector(a=>({active:a.active}),({active:a})=>{a&&this.reload()}),this.subscribeNewReplies=()=>this.client.on("notification.thread_message_new",a=>{var l;const e=(l=a.message)==null?void 0:l.parent_id;if(!e)return;const{unseenThreadIds:n,ready:s}=this.state.getLatestValue();s&&(this.threadsById[e]?this.state.partialNext({isThreadOrderStale:!0}):n.includes(e)||this.state.partialNext({unseenThreadIds:n.concat(e)}))}).unsubscribe,this.subscribeRecoverAfterConnectionDrop=()=>{const a=this.client.on("connection.changed",s=>{s.online===!1&&this.state.next(l=>l.lastConnectionDropAt?l:{...l,lastConnectionDropAt:new Date})}).unsubscribe,e=EE(()=>{const{lastConnectionDropAt:s}=this.state.getLatestValue();s&&this.reload({force:!0})},A6,{trailing:!0}),n=this.client.on("connection.recovered",e).unsubscribe;return()=>{a(),n()}},this.unregisterSubscriptions=()=>(this.state.getLatestValue().threads.forEach(a=>a.unregisterSubscriptions()),super.unregisterSubscriptions()),this.reload=async({force:a=!1}={})=>{const{threads:e,unseenThreadIds:n,isThreadOrderStale:s,pagination:l,ready:c}=this.state.getLatestValue();if(l.isLoading||!a&&c&&!n.length&&!s)return;const d=e.length+n.length;try{this.state.next(m=>({...m,pagination:{...m.pagination,isLoading:!0}}));const p=await this.queryThreads({limit:Math.min(d,nx)||nx}),h=[];for(const m of p.threads){const b=this.threadsById[m.id];b?(h.push(b),b.hasStaleState&&b.hydrateState(m)):h.push(m)}this.state.next(m=>({...m,threads:h,unseenThreadIds:[],isThreadOrderStale:!1,pagination:{...m.pagination,isLoading:!1,nextCursor:p.next??null},ready:!0}))}catch(p){this.client.logger("error",p.message),this.state.next(h=>({...h,pagination:{...h.pagination,isLoading:!1}}))}},this.queryThreads=(a={})=>this.client.queryThreads({limit:25,participant_limit:10,reply_limit:10,watch:!0,...a}),this.loadNextPage=async(a={})=>{const{pagination:e}=this.state.getLatestValue();if(!(e.isLoadingNext||!e.nextCursor))try{this.state.partialNext({pagination:{...e,isLoadingNext:!0}});const n=await this.queryThreads({...a,next:e.nextCursor});this.state.next(s=>({...s,threads:n.threads.length?s.threads.concat(n.threads):s.threads,pagination:{...s.pagination,nextCursor:n.next??null,isLoadingNext:!1}}))}catch(n){this.client.logger("error",n.message),this.state.next(s=>({...s,pagination:{...s.pagination,isLoadingNext:!1}}))}},this.client=t,this.state=new _a(ax),this.threadsByIdGetterCache={threads:[],threadsById:{}}}get threadsById(){const{threads:t}=this.state.getLatestValue();if(t===this.threadsByIdGetterCache.threads)return this.threadsByIdGetterCache.threadsById;const a=t.reduce((e,n)=>(e[n.id]=n,e),{});return this.threadsByIdGetterCache.threads=t,this.threadsByIdGetterCache.threadsById=a,a}},T6=t=>t.type==="poll.updated",N6=t=>t.type==="poll.closed",R6=t=>t.type==="poll.vote_casted",L6=t=>t.type==="poll.vote_changed",P6=t=>t.type==="poll.vote_removed",ro=t=>!!(t!=null&&t.answer_text),rx=class{constructor({client:t,poll:a}){this.getInitialStateFromPollResponse=e=>{const{own_votes:n,id:s,...l}=e,{ownAnswer:c,ownVotes:d}=(n==null?void 0:n.reduce((p,h)=>(ro(h)?p.ownAnswer=h:p.ownVotes.push(h),p),{ownVotes:[]}))??{ownVotes:[]};return{...l,lastActivityAt:new Date,maxVotedOptionIds:Lc(l.vote_counts_by_option),ownAnswer:c,ownVotesByOptionId:B6(d)}},this.upsertOfflineDb=()=>{var e;(e=this.client.offlineDb)==null||e.executeQuerySafely(n=>n.upsertPoll({poll:z6(this)}),{method:"upsertPoll"})},this.reinitializeState=e=>{this.state.partialNext(this.getInitialStateFromPollResponse(e))},this.handlePollUpdated=e=>{var l;if((l=e.poll)!=null&&l.id&&e.poll.id!==this.id||!T6(e))return;const{id:n,...s}=O6(e.poll);this.state.partialNext({...s,lastActivityAt:new Date(e.created_at)}),this.upsertOfflineDb()},this.handlePollClosed=e=>{var n;(n=e.poll)!=null&&n.id&&e.poll.id!==this.id||N6(e)&&(this.state.partialNext({is_closed:!0,lastActivityAt:new Date(e.created_at)}),this.upsertOfflineDb())},this.handleVoteCasted=e=>{var m;if((m=e.poll)!=null&&m.id&&e.poll.id!==this.id||!R6(e))return;const n=this.data,s=e.poll_vote.user_id===this.client.userID;let l=[...n.latest_answers],c=n.ownAnswer;const d=n.ownVotesByOptionId;let p=n.maxVotedOptionIds;s&&(ro(e.poll_vote)?c=e.poll_vote:e.poll_vote.option_id&&(d[e.poll_vote.option_id]=e.poll_vote)),ro(e.poll_vote)?l=[e.poll_vote,...l]:p=Lc(e.poll.vote_counts_by_option);const h=fg(e.poll);this.state.partialNext({...h,latest_answers:l,lastActivityAt:new Date(e.created_at),ownAnswer:c,ownVotesByOptionId:d,maxVotedOptionIds:p}),this.upsertOfflineDb()},this.handleVoteChanged=e=>{var m;if((m=e.poll)!=null&&m.id&&e.poll.id!==this.id||!L6(e))return;const n=this.data,s=e.poll_vote.user_id===this.client.userID;let l=[...n.latest_answers],c=n.ownAnswer,d=n.ownVotesByOptionId,p=n.maxVotedOptionIds;s?ro(e.poll_vote)?(l=[e.poll_vote,...l.filter(b=>b.id!==e.poll_vote.id)],c=e.poll_vote):e.poll_vote.option_id&&(e.poll.enforce_unique_vote?d={[e.poll_vote.option_id]:e.poll_vote}:(d=Object.entries(d).reduce((b,[x,E])=>(x!==e.poll_vote.option_id&&E.id===e.poll_vote.id||(b[x]=E),b),{}),d[e.poll_vote.option_id]=e.poll_vote),(c==null?void 0:c.id)===e.poll_vote.id&&(c=void 0),p=Lc(e.poll.vote_counts_by_option)):ro(e.poll_vote)?l=[e.poll_vote,...l]:p=Lc(e.poll.vote_counts_by_option);const h=fg(e.poll);this.state.partialNext({...h,latest_answers:l,lastActivityAt:new Date(e.created_at),ownAnswer:c,ownVotesByOptionId:d,maxVotedOptionIds:p}),this.upsertOfflineDb()},this.handleVoteRemoved=e=>{var m;if((m=e.poll)!=null&&m.id&&e.poll.id!==this.id||!P6(e))return;const n=this.data,s=e.poll_vote.user_id===this.client.userID;let l=[...n.latest_answers],c=n.ownAnswer;const d={...n.ownVotesByOptionId};let p=n.maxVotedOptionIds;ro(e.poll_vote)?(l=l.filter(b=>b.id!==e.poll_vote.id),s&&(c=void 0)):(p=Lc(e.poll.vote_counts_by_option),s&&e.poll_vote.option_id&&delete d[e.poll_vote.option_id]);const h=fg(e.poll);this.state.partialNext({...h,latest_answers:l,lastActivityAt:new Date(e.created_at),ownAnswer:c,ownVotesByOptionId:d,maxVotedOptionIds:p}),this.upsertOfflineDb()},this.query=async e=>{const{poll:n}=await this.client.getPoll(e);return this.state.partialNext({...n,lastActivityAt:new Date}),n},this.update=async e=>await this.client.updatePoll({...e,id:this.id}),this.partialUpdate=async e=>await this.client.partialUpdatePoll(this.id,e),this.close=async()=>await this.client.closePoll(this.id),this.delete=async()=>await this.client.deletePoll(this.id),this.createOption=async e=>await this.client.createPollOption(this.id,e),this.updateOption=async e=>await this.client.updatePollOption(this.id,e),this.deleteOption=async e=>await this.client.deletePollOption(this.id,e),this.castVote=async(e,n)=>{const{max_votes_allowed:s,ownVotesByOptionId:l}=this.data;if(s&&s===Object.keys(l).length){let d=Object.values(l)[0];Object.values(l).slice(1).forEach(p=>{(!(d!=null&&d.created_at)||new Date(p.created_at)<new Date(d.created_at))&&(d=p)}),d!=null&&d.id&&await this.removeVote(d.id,n)}return await this.client.castPollVote(n,this.id,{option_id:e})},this.removeVote=async(e,n)=>await this.client.removePollVote(n,this.id,e),this.addAnswer=async(e,n)=>await this.client.addPollAnswer(n,this.id,e),this.removeAnswer=async(e,n)=>await this.client.removePollVote(n,this.id,e),this.queryAnswers=async e=>await this.client.queryPollAnswers(this.id,e.filter,e.sort,e.options),this.queryOptionVotes=async e=>await this.client.queryPollVotes(this.id,e.filter,e.sort,e.options),this.client=t,this.id=a.id,this.state=new _a(this.getInitialStateFromPollResponse(a))}get data(){return this.state.getLatestValue()}};function Lc(t){let a=0,e=[];for(const[n,s]of Object.entries(t??{}))s>a?(e=[n],a=s):s===a&&e.push(n);return e}function B6(t){return t?t.reduce((a,e)=>(ro(e)||!e.option_id||(a[e.option_id]=e),a),{}):{}}function O6(t){return{allow_answers:t.allow_answers,allow_user_suggested_options:t.allow_user_suggested_options,description:t.description,enforce_unique_vote:t.enforce_unique_vote,id:t.id,is_closed:t.is_closed,max_votes_allowed:t.max_votes_allowed,name:t.name,options:t.options,voting_visibility:t.voting_visibility}}function z6(t){const{lastActivityAt:a,maxVotedOptionIds:e,ownVotesByOptionId:n,ownAnswer:s,...l}=t.data,c=[...Object.values(n),...s?[s]:[]].sort((d,p)=>Date.parse(d.created_at)-Date.parse(p.created_at));return{...l,own_votes:c,id:t.id}}function fg(t){return{answers_count:t.answers_count,latest_votes_by_option:t.latest_votes_by_option,vote_count:t.vote_count,vote_counts_by_option:t.vote_counts_by_option}}var U6=class extends wu{constructor({client:t}){super(),this.pollCache=new Map,this.fromState=a=>this.pollCache.get(a),this.registerSubscriptions=()=>{this.hasSubscriptions||(this.addUnsubscribeFunction(this.subscribeMessageNew()),this.addUnsubscribeFunction(this.subscribePollUpdated()),this.addUnsubscribeFunction(this.subscribePollClosed()),this.addUnsubscribeFunction(this.subscribeVoteCasted()),this.addUnsubscribeFunction(this.subscribeVoteChanged()),this.addUnsubscribeFunction(this.subscribeVoteRemoved()))},this.createPoll=async a=>{const{poll:e}=await this.client.createPoll(a);return new rx({client:this.client,poll:e})},this.getPoll=async a=>{const e=this.fromState(a);if(e)return this.client.getPoll(a).then(({poll:s})=>this.setOrOverwriteInCache(s,!0)),e;const{poll:n}=await this.client.getPoll(a);return this.setOrOverwriteInCache(n),this.fromState(a)},this.queryPolls=async(a,e=[],n={})=>{const{polls:s,next:l}=await this.client.queryPolls(a,e,n);return{polls:s.map(d=>(this.setOrOverwriteInCache(d,!0),this.fromState(d.id))),next:l}},this.hydratePollCache=(a,e)=>{for(const n of a){if(!n.poll)continue;const s=n.poll;this.setOrOverwriteInCache(s,e)}},this.setOrOverwriteInCache=(a,e)=>{if(!this.client._cacheEnabled())return;const n=this.fromState(a.id);if(n)e&&n.reinitializeState(a);else{const s=new rx({client:this.client,poll:a});this.pollCache.set(s.id,s)}},this.subscribePollUpdated=()=>this.client.on("poll.updated",a=>{var e,n;(e=a.poll)!=null&&e.id&&((n=this.fromState(a.poll.id))==null||n.handlePollUpdated(a))}).unsubscribe,this.subscribePollClosed=()=>this.client.on("poll.closed",a=>{var e,n;(e=a.poll)!=null&&e.id&&((n=this.fromState(a.poll.id))==null||n.handlePollClosed(a))}).unsubscribe,this.subscribeVoteCasted=()=>this.client.on("poll.vote_casted",a=>{var e,n;(e=a.poll)!=null&&e.id&&((n=this.fromState(a.poll.id))==null||n.handleVoteCasted(a))}).unsubscribe,this.subscribeVoteChanged=()=>this.client.on("poll.vote_changed",a=>{var e,n;(e=a.poll)!=null&&e.id&&((n=this.fromState(a.poll.id))==null||n.handleVoteChanged(a))}).unsubscribe,this.subscribeVoteRemoved=()=>this.client.on("poll.vote_removed",a=>{var e,n;(e=a.poll)!=null&&e.id&&((n=this.fromState(a.poll.id))==null||n.handleVoteRemoved(a))}).unsubscribe,this.subscribeMessageNew=()=>this.client.on("message.new",a=>{const{message:e}=a;if(e){const n=Ya(e);this.hydratePollCache([n])}}).unsubscribe,this.client=t}get data(){return this.pollCache}},sx={"channel.deleted":"channelDeletedHandler","channel.hidden":"channelHiddenHandler","channel.truncated":"channelTruncatedHandler","channel.updated":"channelUpdatedHandler","channel.visible":"channelVisibleHandler","message.new":"newMessageHandler","member.updated":"memberUpdatedHandler","notification.added_to_channel":"notificationAddedToChannelHandler","notification.message_new":"notificationNewMessageHandler","notification.removed_from_channel":"notificationRemovedFromChannelHandler"},F6={abortInFlightQuery:!1,allowNotLoadedChannelPromotionForEvent:{"channel.visible":!0,"message.new":!0,"notification.added_to_channel":!0,"notification.message_new":!0},lockChannelOrder:!1},pg={limit:10,offset:0},W6=class extends wu{constructor({client:t,eventHandlerOverrides:a={},options:e={}}){super(),this.eventHandlers=new Map,this.eventHandlerOverrides=new Map,this.options={},this.stateOptions={},this.setChannels=n=>{var d;this.state.next(p=>{const{channels:h}=p,m=AE(n)?n(h):n;return h===m?p:{...p,channels:m}});const{channels:s,pagination:{filters:l,sort:c}}=this.state.getLatestValue();(d=this.client.offlineDb)==null||d.executeQuerySafely(p=>p.upsertCidsForQuery({cids:s.map(h=>h.cid),filters:l,sort:c}),{method:"upsertCidsForQuery"})},this.setEventHandlerOverrides=(n={})=>{const s=Object.entries(n).reduce((l,[c,d])=>(d&&(l[c]=d),l),{});this.eventHandlerOverrides=new Map(Object.entries(s))},this.setOptions=(n={})=>{this.options={...F6,...n}},this.executeChannelsQuery=async(n,s=0)=>{var b;const{filters:l,sort:c,options:d,stateOptions:p}=n,{offset:h,limit:m}={...pg,...d};try{const x=await this.client.queryChannels(l,c,d,p),E=h+((x==null?void 0:x.length)??0),w={...d,offset:E},{pagination:S}=this.state.getLatestValue();this.state.partialNext({channels:x,pagination:{...S,hasNext:((x==null?void 0:x.length)??0)>=m,isLoading:!1,options:w},initialized:!0,error:void 0}),(b=this.client.offlineDb)==null||b.executeQuerySafely(_=>_.upsertCidsForQuery({cids:x.map(C=>C.cid),filters:S.filters,sort:S.sort}),{method:"upsertCidsForQuery"})}catch(x){if(s>=uT){console.warn(x);const E=new Error(`Maximum number of retries reached in queryChannels. Last error message is: ${x}`);this.state.partialNext({error:E});return}return await Ai(dT),this.executeChannelsQuery(n,s+1)}},this.queryChannels=async(n,s=[],l={},c={})=>{var b,x;const{pagination:{isLoading:d,filters:p},initialized:h}=this.state.getLatestValue();if(d&&!this.options.abortInFlightQuery&&JSON.stringify(p)===JSON.stringify(n))return;const m={filters:n,sort:s,options:l,stateOptions:c};try{if(this.stateOptions=c,this.state.next(E=>({...E,pagination:{...E.pagination,isLoading:!0,isLoadingNext:!1,filters:n,sort:s,options:l},error:void 0})),(b=this.client.offlineDb)!=null&&b.getChannelsForQuery&&((x=this.client.user)!=null&&x.id)){if(!h){const E=await this.client.offlineDb.getChannelsForQuery({userId:this.client.user.id,filters:n,sort:s});if(E){const w=this.client.hydrateActiveChannels(E,{offlineMode:!0,skipInitialization:[]});this.state.partialNext({channels:w})}}if(!this.client.offlineDb.syncManager.syncStatus){this.client.offlineDb.syncManager.scheduleSyncStatusChangeCallback(this.id,async()=>{await this.executeChannelsQuery(m)});return}}await this.executeChannelsQuery(m)}catch(E){throw this.client.logger("error",E.message),this.state.next(w=>({...w,pagination:{...w.pagination,isLoading:!1}})),E}},this.loadNext=async()=>{const{pagination:n,initialized:s}=this.state.getLatestValue(),{filters:l,sort:c,options:d,isLoadingNext:p,hasNext:h}=n;if(!(!s||p||!h))try{const{offset:m,limit:b}={...pg,...d};this.state.partialNext({pagination:{...n,isLoading:!1,isLoadingNext:!0}});const x=await this.client.queryChannels(l,c,d,this.stateOptions),{channels:E}=this.state.getLatestValue(),w=m+((x==null?void 0:x.length)??0),S={...d,offset:w};this.state.partialNext({channels:IT([...E||[],...x],"cid"),pagination:{...n,hasNext:((x==null?void 0:x.length)??0)>=b,isLoading:!1,isLoadingNext:!1,options:S}})}catch(m){throw this.client.logger("error",m.message),this.state.next(b=>({...b,pagination:{...b.pagination,isLoadingNext:!1}})),m}},this.notificationAddedToChannelHandler=async n=>{var b;const{id:s,type:l,members:c}=(n==null?void 0:n.channel)??{};if(!l||!((b=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&b["notification.added_to_channel"]))return;const d=await ag({client:this.client,id:s,members:c==null?void 0:c.reduce((x,{user:E,user_id:w})=>{const S=w||(E==null?void 0:E.id);return S&&x.push(S),x},[]),type:l}),{pagination:p,channels:h}=this.state.getLatestValue();if(!h)return;const{sort:m}=p??{};this.setChannels(jd({channels:h,channelToMove:d,sort:m}))},this.channelDeletedHandler=n=>{const{channels:s}=this.state.getLatestValue();if(!s)return;const l=[...s],c=l.findIndex(d=>{var p;return d.cid===(n.cid||((p=n.channel)==null?void 0:p.cid))});c<0||(l.splice(c,1),this.setChannels(l))},this.channelHiddenHandler=this.channelDeletedHandler,this.newMessageHandler=n=>{var C;const{pagination:s,channels:l}=this.state.getLatestValue();if(!l)return;const{filters:c,sort:d}=s??{},p=n.channel_type,h=n.channel_id;if(!p||!h)return;const m=this.client.channel(p,h),b=l.indexOf(m),x=b>=0,E=Mf(m),w=Fd(m),S=Wd(c),_=Hg(d);S&&w&&!c.archived||S&&!w&&c.archived||_&&E||this.options.lockChannelOrder||!x&&!((C=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&C["message.new"])||this.setChannels(jd({channels:l,channelToMove:m,channelToMoveIndexWithinChannels:b,sort:d}))},this.notificationNewMessageHandler=async n=>{var E;const{id:s,type:l}=(n==null?void 0:n.channel)??{};if(!s||!l)return;const c=await ag({client:this.client,id:s,type:l}),{channels:d,pagination:p}=this.state.getLatestValue(),{filters:h,sort:m}=p??{},b=Wd(h),x=Fd(c);!d||b&&x&&!h.archived||b&&!x&&h.archived||!((E=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&E["notification.message_new"])||this.setChannels(jd({channels:d,channelToMove:c,sort:m}))},this.channelVisibleHandler=async n=>{var E;const{channel_type:s,channel_id:l}=n;if(!s||!l)return;const c=await ag({client:this.client,id:n.channel_id,type:n.channel_type}),{channels:d,pagination:p}=this.state.getLatestValue(),{sort:h,filters:m}=p??{},b=Wd(m),x=Fd(c);!d||b&&x&&!m.archived||b&&!x&&m.archived||!((E=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&E["channel.visible"])||this.setChannels(jd({channels:d,channelToMove:c,sort:h}))},this.notificationRemovedFromChannelHandler=this.channelDeletedHandler,this.memberUpdatedHandler=n=>{var T;const{pagination:s,channels:l}=this.state.getLatestValue(),{filters:c,sort:d}=s;if(!((T=n.member)!=null&&T.user)||n.member.user.id!==this.client.userID||!n.channel_type||!n.channel_id)return;const p=n.channel_type,h=n.channel_id,m=Hg(d),b=Wd(c),x=CE({atIndex:0,sort:d,targetKey:"pinned_at"});if(!l||!m&&!b||this.options.lockChannelOrder)return;const E=this.client.channel(p,h),w=l.indexOf(E),S=w>=0,_=Mf(E),C=Fd(E),D=[...l];if(S&&D.splice(w,1),b&&!C&&(c!=null&&c.archived)||b&&C&&!(c!=null&&c.archived)){this.setChannels(D);return}let I=null;(x===1||x===-1&&!_)&&(I=_E({channels:D}));const A=typeof I=="number"?I+1:0;l[A]!==E&&(D.splice(A,0,E),this.setChannels(D))},this.subscriptionOrOverride=n=>{const s=sx[n.type],l=this.eventHandlers.get(s),c=this.eventHandlerOverrides.get(s);if(c&&typeof c=="function"){c(this.setChannels,n);return}l&&typeof l=="function"&&l(n)},this.registerSubscriptions=()=>{if(!this.hasSubscriptions)for(const n of Object.keys(sx))this.addUnsubscribeFunction(this.client.on(n,this.subscriptionOrOverride).unsubscribe)},this.id=`channel-manager-${yr()}`,this.client=t,this.state=new _a({channels:[],pagination:{isLoading:!1,isLoadingNext:!1,hasNext:!1,filters:{},sort:{},options:pg},initialized:!1,error:void 0}),this.setEventHandlerOverrides(a),this.setOptions(e),this.eventHandlers=new Map(Object.entries({channelDeletedHandler:this.channelDeletedHandler,channelHiddenHandler:this.channelHiddenHandler,channelVisibleHandler:this.channelVisibleHandler,memberUpdatedHandler:this.memberUpdatedHandler,newMessageHandler:this.newMessageHandler,notificationAddedToChannelHandler:this.notificationAddedToChannelHandler,notificationNewMessageHandler:this.notificationNewMessageHandler,notificationRemovedFromChannelHandler:this.notificationRemovedFromChannelHandler}))}},j6={error:1e4,warning:5e3,info:3e3,success:3e3},H6=class{constructor(t={}){this.timeouts=new Map,this.store=new _a({notifications:[]}),this.config={...t,durations:t.durations||j6}}get notifications(){return this.store.getLatestValue().notifications}get warning(){return this.notifications.filter(t=>t.severity==="warning")}get error(){return this.notifications.filter(t=>t.severity==="error")}get info(){return this.notifications.filter(t=>t.severity==="info")}get success(){return this.notifications.filter(t=>t.severity==="success")}add({message:t,origin:a,options:e={}}){const n=yr(),s=Date.now(),l={id:n,message:t,origin:a,severity:e.severity||"info",createdAt:s,expiresAt:e.duration?s+e.duration:void 0,autoClose:e.autoClose??!0,actions:e.actions,metadata:e.metadata};if(this.store.partialNext({notifications:[...this.store.getLatestValue().notifications,l]}),l.autoClose&&l.expiresAt){const c=setTimeout(()=>{this.remove(n)},e.duration||this.config.durations[l.severity]);this.timeouts.set(n,c)}return n}addError({message:t,origin:a,options:e}){return this.add({message:t,origin:a,options:{...e,severity:"error"}})}addWarning({message:t,origin:a,options:e}){return this.add({message:t,origin:a,options:{...e,severity:"warning"}})}addInfo({message:t,origin:a,options:e}){return this.add({message:t,origin:a,options:{...e,severity:"info"}})}addSuccess({message:t,origin:a,options:e}){return this.add({message:t,origin:a,options:{...e,severity:"success"}})}remove(t){const a=this.timeouts.get(t);a&&(clearTimeout(a),this.timeouts.delete(t)),this.store.partialNext({notifications:this.store.getLatestValue().notifications.filter(e=>e.id!==t)})}clear(){this.timeouts.forEach(t=>clearTimeout(t)),this.timeouts.clear(),this.store.partialNext({notifications:[]})}};function mg(t){return typeof t=="string"||t instanceof String}var V0=class so{constructor(a,e,n){var l;this.nextRequestAbortController=null,this._messageComposerSetupState=new _a({setupFunction:null}),this._getConnectionID=()=>{var c,d;return((c=this.wsConnection)==null?void 0:c.connectionID)||((d=this.wsFallback)==null?void 0:d.connectionID)},this._hasConnectionID=()=>!!this._getConnectionID(),this.connectUser=async(c,d)=>{if(!c.id)throw new Error('The "id" field on the user is missing');if(this.userID===c.id&&this.setUserPromise)return console.warn("Consecutive calls to connectUser is detected, ideally you should only call this function once in your app."),this.setUserPromise;if(this.userID)throw new Error("Use client.disconnect() before trying to connect as a different user. connectUser was called twice.");(this._isUsingServerAuth()||this.node)&&!this.options.allowServerSideConnect&&console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),this.userID=c.id,this.anonymous=!1;const p=this._setToken(c,d);this._setUser(c);const h=this.openConnection();this.setUserPromise=Promise.all([p,h]).then(m=>m[1]);try{return await this.setUserPromise}catch(m){throw this.persistUserOnConnectionFailure?this.closeConnection():this.disconnectUser(),m}},this.setUser=this.connectUser,this._setToken=(c,d)=>this.tokenManager.setTokenOrProvider(d,c),this.closeConnection=async c=>{var d,p,h;return this.cleaningIntervalRef!=null&&(clearInterval(this.cleaningIntervalRef),this.cleaningIntervalRef=void 0),await Promise.all([(d=this.wsConnection)==null?void 0:d.disconnect(c),(p=this.wsFallback)==null?void 0:p.disconnect(c)]),(h=this.offlineDb)==null||h.executeQuerySafely(async m=>{this.userID&&await m.upsertUserSyncStatus({userId:this.userID,lastSyncedAt:new Date().toString()})},{method:"upsertUserSyncStatus"}),Promise.resolve()},this.createChannelManager=({eventHandlerOverrides:c={},options:d={}})=>new W6({client:this,eventHandlerOverrides:c,options:d}),this.openConnection=()=>{var c,d,p;if(!this.userID)throw Error("User is not set on client, use client.connectUser or client.connectAnonymousUser instead");if((c=this.wsConnection)!=null&&c.isConnecting&&this.wsPromise)return this.logger("info","client:openConnection() - connection already in progress",{tags:["connection","client"]}),this.wsPromise;if(((d=this.wsConnection)!=null&&d.isHealthy||(p=this.wsFallback)!=null&&p.isHealthy())&&this._hasConnectionID()){this.logger("info","client:openConnection() - openConnection called twice, healthy connection already exists",{tags:["connection","client"]});return}return this.clientID=`${this.userID}--${sl()}`,this.wsPromise=this.connect(),this._startCleaning(),this.wsPromise},this._setupConnection=this.openConnection,this._normalizeDate=c=>{if(c instanceof Date&&(c=c.toISOString()),c==="")throw new Error("Don't pass blank string for since, use null instead if resetting the token revoke");return c},this.disconnectUser=c=>{this.logger("info","client:disconnect() - Disconnecting the client",{tags:["connection","client"]}),delete this.user,delete this._user,delete this.userID,this.anonymous=!1;const d=this.closeConnection(c);for(const p of Object.values(this.activeChannels))p._disconnect();return this.activeChannels={},this.state=new X2({client:this}),this.threads.resetState(),setTimeout(this.tokenManager.reset),d},this.disconnect=this.disconnectUser,this.connectAnonymousUser=()=>{(this._isUsingServerAuth()||this.node)&&!this.options.allowServerSideConnect&&console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),this.anonymous=!0,this.userID=sl();const c={id:this.userID,anon:!0};return this._setToken(c,""),this._setUser(c),this._setupConnection()},this.setAnonymousUser=this.connectAnonymousUser,this.doAxiosRequest=async(c,d,p,h={})=>{var b;await this.tokenManager.tokenReady();const m=this._enrichAxiosOptions(h);try{let x;switch(this._logApiRequest(c,d,p,m),c){case"get":x=await this.axiosInstance.get(d,m);break;case"delete":x=await this.axiosInstance.delete(d,m);break;case"post":x=await this.axiosInstance.post(d,p,m);break;case"postForm":x=await this.axiosInstance.postForm(d,p,m);break;case"put":x=await this.axiosInstance.put(d,p,m);break;case"patch":x=await this.axiosInstance.patch(d,p,m);break;case"options":x=await this.axiosInstance.options(d,m);break;default:throw new Error("Invalid request type")}return this._logApiResponse(c,d,x),this.consecutiveFailures=0,this.handleResponse(x)}catch(x){if(x.client_request_id=(b=m.headers)==null?void 0:b["x-client-request-id"],this._logApiError(c,d,x),this.consecutiveFailures+=1,x.response)return x.response.data.code===Wc.TOKEN_EXPIRED&&!this.tokenManager.isStatic()?(this.consecutiveFailures>1&&await Ai(Af(this.consecutiveFailures)),this.tokenManager.loadToken(),await this.doAxiosRequest(c,d,p,h)):this.handleResponse(x.response);throw x}},this.dispatchEvent=c=>{var m;c.received_at||(c.received_at=new Date);const d=this._handleClientEvent(c),p=c.cid,h=p?this.activeChannels[p]:void 0;h&&h._handleChannelEvent(c),this._callClientListeners(c),h&&h._callChannelListeners(c),d.forEach(b=>b()),(m=this.offlineDb)==null||m.executeQuerySafely(b=>b.handleEvent({event:c}),{method:`handleEvent;${c.type}`})},this.handleEvent=c=>{const d=c.data,p=JSON.parse(d);this.dispatchEvent(p)},this._updateMemberWatcherReferences=c=>{const d=this.state.userChannelReferences[c.id]||{};for(const p in d){const h=this.activeChannels[p];h!=null&&h.state&&(h.state.members[c.id]&&(h.state.members[c.id].user=c),h.state.watchers[c.id]&&(h.state.watchers[c.id]=c),h.state.read[c.id]&&(h.state.read[c.id].user=c))}},this._updateUserReferences=this._updateMemberWatcherReferences,this._updateUserMessageReferences=c=>{const d=this.state.userChannelReferences[c.id]||{};for(const p in d){const h=this.activeChannels[p];if(!h)continue;const m=h.state;m==null||m.updateUserMessages(c)}},this._deleteUserMessageReference=(c,d=!1)=>{const p=this.state.userChannelReferences[c.id]||{};for(const h in p){const m=this.activeChannels[h];if(m){const b=m.state;b==null||b.deleteUserMessages(c,d)}}},this._handleUserEvent=c=>{if(c.user){if(c.type==="user.presence.changed"||c.type==="user.updated"){if(c.user.id===this.userID){const d={...this.user},p={...this._user};for(const h in this.user){if(h in c.user||gT(h))continue;const m=h;delete d[m],delete p[m]}for(const h in p){const m=h;m in c.user&&(p[m]=c.user[m])}this._user=p,this.user={...d,...c.user}}this.state.updateUser(c.user),this._updateMemberWatcherReferences(c.user)}c.type==="user.updated"&&this._updateUserMessageReferences(c.user),c.type==="user.deleted"&&c.user.deleted_at&&(c.mark_messages_deleted||c.hard_delete)&&this._deleteUserMessageReference(c.user,c.hard_delete)}},this._callClientListeners=c=>{const d=this,p=[];d.listeners.all&&p.push(...d.listeners.all),d.listeners[c.type]&&p.push(...d.listeners[c.type]);for(const h of p)h(c)},this.recoverState=async()=>{this.logger("info",`client:recoverState() - Start of recoverState with connectionID ${this._getConnectionID()}`,{tags:["connection"]});const c=Object.keys(this.activeChannels);c.length&&this.recoverStateOnReconnect?(this.logger("info",`client:recoverState() - Start the querying of ${c.length} channels`,{tags:["connection","client"]}),await this.queryChannels({cid:{$in:c}},{last_message_at:-1},{limit:30}),this.logger("info","client:recoverState() - Querying channels finished",{tags:["connection","client"]}),this.dispatchEvent({type:"connection.recovered"})):this.dispatchEvent({type:"connection.recovered"}),this.wsPromise=Promise.resolve(),this.setUserPromise=Promise.resolve()},this.getChannelByMembers=(c,d)=>{const p=(d.members??[]).map(x=>typeof x=="string"?x:x.user_id??""),h=p.sort().join(","),m=O0(c,p);if(!m)throw Error("Please specify atleast one member when creating unique conversation");for(const x in this.activeChannels){const E=this.activeChannels[x];if(!E.disconnected&&(x===m||x.indexOf(`${c}:!members-`)===0&&Object.keys(E.state.members).sort().join(",")===h))return E}const b=new cl(this,c,void 0,d);return this._cacheEnabled()&&(this.activeChannels[m]=b),b},this.getChannelById=(c,d,p)=>{if(typeof d=="string"&&~d.indexOf(":"))throw Error(`Invalid channel id ${d}, can't contain the : character`);const h=`${c}:${d}`;if(h in this.activeChannels&&this.activeChannels[h]&&!this.activeChannels[h].disconnected){const b=this.activeChannels[h];return Object.keys(p).length>0&&(b.data={...b.data,...p},b._data={...b._data,...p}),b}const m=new cl(this,c,d,p);return this._cacheEnabled()&&(this.activeChannels[m.cid]=m),m},this.updateUsers=this.upsertUsers,this.updateUser=this.upsertUser,this._unblockMessage=this.unblockMessage,this.markAllRead=this.markChannelsRead,this._isUsingServerAuth=()=>!!this.secret,this._cacheEnabled=()=>!this._isUsingServerAuth()||!this.options.disableCache,this._buildWSPayload=c=>JSON.stringify({user_id:this.userID,user_details:this._user,device:this.options.device,client_request_id:c}),this.setMessageComposerSetupFunction=c=>{this._messageComposerSetupState.partialNext({setupFunction:c})},this.key=a,this.listeners={},this.state=new X2({client:this}),this.mutedChannels=[],this.mutedUsers=[],this.moderation=new k6(this),this.notifications=(n==null?void 0:n.notifications)??new H6,e&&mg(e)&&(this.secret=e);const s=n||(e&&!mg(e)?e:{});this.browser=typeof s.browser<"u"?s.browser:typeof window<"u",this.node=!this.browser,this.options={timeout:3e3,withCredentials:!1,warmUp:!1,recoverStateOnReconnect:!0,disableCache:!1,wsUrlParams:new URLSearchParams({}),...s},this.node&&!this.options.httpsAgent&&(this.options.httpsAgent=new tT.default.Agent({keepAlive:!0,keepAliveMsecs:3e3})),this.axiosInstance=su.create(this.options),this.setBaseURL(this.options.baseURL||"https://chat.stream-io-api.com"),typeof process<"u"&&"env"in process&&Xh.STREAM_LOCAL_TEST_RUN&&this.setBaseURL("http://localhost:3030"),typeof process<"u"&&"env"in process&&Xh.STREAM_LOCAL_TEST_HOST&&this.setBaseURL("http://"+Xh.STREAM_LOCAL_TEST_HOST),this.wsConnection=null,this.wsPromise=null,this.setUserPromise=null,this.activeChannels={},this.configs={},this.anonymous=!1,this.persistUserOnConnectionFailure=(l=this.options)==null?void 0:l.persistUserOnConnectionFailure,this.tokenManager=new w6(this.secret),this.consecutiveFailures=0,this.insightMetrics=new f6,this.defaultWSTimeoutWithFallback=6*1e3,this.defaultWSTimeout=15*1e3,this.axiosInstance.defaults.paramsSerializer=ST,this.logger=Wg(s.logger)?s.logger:()=>null,this.recoverStateOnReconnect=this.options.recoverStateOnReconnect,this.threads=new M6({client:this}),this.polls=new U6({client:this})}static getInstance(a,e,n){return so._instance||(typeof e=="string"?so._instance=new so(a,e,n):so._instance=new so(a,e)),so._instance}setOfflineDBApi(a){this.offlineDb||(this.offlineDb=a)}devToken(a){return v6(a)}getAuthType(){return this.anonymous?"anonymous":"jwt"}setBaseURL(a){this.baseURL=a,this.wsBaseURL=this.baseURL.replace("http","ws").replace(":3030",":8800")}_setUser(a){this.user=a,this.userID=a.id,this._user={...a}}async updateAppSettings(a){const e=a.apn_config;return e!=null&&e.p12_cert&&(a={...a,apn_config:{...e,p12_cert:Buffer.from(e.p12_cert).toString("base64")}}),await this.patch(this.baseURL+"/app",a)}async revokeTokens(a){return await this.updateAppSettings({revoke_tokens_issued_before:this._normalizeDate(a)})}async revokeUserToken(a,e){return await this.revokeUsersToken([a],e)}async revokeUsersToken(a,e){e===void 0?e=new Date().toISOString():e=this._normalizeDate(e);const n=[];for(const s of a)n.push({id:s,set:{revoke_tokens_issued_before:e}});return await this.partialUpdateUsers(n)}async getAppSettings(){return this.appSettingsPromise=this.get(this.baseURL+"/app"),await this.appSettingsPromise}async testPushSettings(a,e={}){return await this.post(this.baseURL+"/check_push",{user_id:a,...e.messageID?{message_id:e.messageID}:{},...e.apnTemplate?{apn_template:e.apnTemplate}:{},...e.firebaseTemplate?{firebase_template:e.firebaseTemplate}:{},...e.firebaseDataTemplate?{firebase_data_template:e.firebaseDataTemplate}:{},...e.skipDevices?{skip_devices:!0}:{},...e.pushProviderName?{push_provider_name:e.pushProviderName}:{},...e.pushProviderType?{push_provider_type:e.pushProviderType}:{}})}async testSQSSettings(a={}){return await this.post(this.baseURL+"/check_sqs",a)}async testSNSSettings(a={}){return await this.post(this.baseURL+"/check_sns",a)}async setGuestUser(a){let e;this.anonymous=!0;try{e=await this.post(this.baseURL+"/guest",{user:a})}catch(p){throw this.anonymous=!1,p}this.anonymous=!1;const{created_at:n,updated_at:s,last_active:l,online:c,...d}=e.user;return await this.connectUser(d,e.access_token)}createToken(a,e,n){if(this.secret==null)throw Error("tokens can only be created server-side using the API Secret");const s={};return e&&(s.exp=e),n&&(s.iat=n),QE(this.secret,a,s,{})}on(a,e){const n=e?a:"all",s=e||a;return n in this.listeners||(this.listeners[n]=[]),this.logger("info",`Attaching listener for ${n} event`,{tags:["event","client"]}),this.listeners[n].push(s),{unsubscribe:()=>{this.logger("info",`Removing listener for ${n} event`,{tags:["event","client"]}),this.listeners[n]=this.listeners[n].filter(l=>l!==s)}}}off(a,e){const n=e?a:"all",s=e||a;n in this.listeners||(this.listeners[n]=[]),this.logger("info",`Removing listener for ${n} event`,{tags:["event","client"]}),this.listeners[n]=this.listeners[n].filter(l=>l!==s)}_logApiRequest(a,e,n,s){this.logger("info",`client: ${a} - Request - ${e}`,{tags:["api","api_request","client"],url:e,payload:n,config:s})}_logApiResponse(a,e,n){this.logger("info",`client:${a} - Response - url: ${e} > status ${n.status}`,{tags:["api","api_response","client"],url:e,response:n})}_logApiError(a,e,n){this.logger("error",`client:${a} - Error - url: ${e}`,{tags:["api","api_response","client"],url:e,error:n})}get(a,e){return this.doAxiosRequest("get",a,null,{params:e})}put(a,e){return this.doAxiosRequest("put",a,e)}post(a,e){return this.doAxiosRequest("post",a,e)}patch(a,e){return this.doAxiosRequest("patch",a,e)}delete(a,e){return this.doAxiosRequest("delete",a,null,{params:e})}sendFile(a,e,n,s,l){const c=yT(e,n,s||"multipart/form-data");return l!=null&&c.append("user",JSON.stringify(l)),this.doAxiosRequest("postForm",a,c,{headers:c.getHeaders?c.getHeaders():{},config:{timeout:0,maxContentLength:1/0,maxBodyLength:1/0}})}errorFromResponse(a){const e=typeof a.data.code<"u"?`StreamChat error code ${a.data.code}: ${a.data.message}`:`StreamChat error HTTP code: ${a.status}`;return new IN(e,{code:a.data.code??null,response:a,status:a.status})}handleResponse(a){const e=a.data;if(I6(a))throw this.errorFromResponse(a);return e}_handleClientEvent(a){var s,l,c;const e=this,n=[];if(this.logger("info",`client:_handleClientEvent - Received event of type { ${a.type} }`,{tags:["event","client"],event:a}),(a.type==="user.presence.changed"||a.type==="user.updated"||a.type==="user.deleted")&&this._handleUserEvent(a),a.type==="health.check"&&a.me&&(e.user=a.me,e.state.updateUser(a.me),e.mutedChannels=a.me.channel_mutes,e.mutedUsers=a.me.mutes),a.channel&&a.type==="notification.message_new"){const{channel:d}=a;this._addChannelConfig(d)}if(a.type==="notification.channel_mutes_updated"&&((s=a.me)!=null&&s.channel_mutes)&&(this.mutedChannels=a.me.channel_mutes),a.type==="notification.mutes_updated"&&((l=a.me)!=null&&l.mutes)&&(this.mutedUsers=a.me.mutes),a.type==="notification.mark_read"&&a.unread_channels===0&&Object.keys(this.activeChannels).forEach(p=>this.activeChannels[p].state.unreadCount=0),(a.type==="channel.deleted"||a.type==="notification.channel_deleted")&&a.cid){const{cid:d}=a;e.state.deleteAllChannelReference(d),(c=this.activeChannels[a.cid])==null||c._disconnect(),n.push(()=>{d&&delete this.activeChannels[d]})}return n}_muteStatus(a){var n;let e;for(let s=0;s<this.mutedChannels.length;s++){const l=this.mutedChannels[s];if(((n=l.channel)==null?void 0:n.cid)===a){e={muted:l.expires?new Date(l.expires).getTime()>new Date().getTime():!0,createdAt:l.created_at?new Date(l.created_at):new Date,expiresAt:l.expires?new Date(l.expires):null};break}}return e||{muted:!1,createdAt:null,expiresAt:null}}async connect(){if(!this.userID||!this._user)throw Error("Call connectUser or connectAnonymousUser before starting the connection");if(!this.wsBaseURL)throw Error("Websocket base url not set");if(!this.clientID)throw Error("clientID is not set");!this.wsConnection&&(this.options.warmUp||this.options.enableInsights)&&this._sayHi(),this.options.wsConnection&&this.node?(this.options.wsConnection.setClient(this),this.wsConnection=this.options.wsConnection):this.wsConnection=new y6({client:this});try{return this.wsFallback?await this.wsFallback.connect():await this.wsConnection.connect(this.options.enableWSFallback?this.defaultWSTimeoutWithFallback:this.defaultWSTimeout)}catch(a){if(this.options.enableWSFallback&&_6(a)&&ET())return this.logger("info","client:connect() - WS failed, fallback to longpoll",{tags:["connection","client"]}),this.dispatchEvent({type:"transport.changed",mode:"longpoll"}),this.wsConnection._destroyCurrentWSConnection(),this.wsConnection.disconnect().then(),this.wsFallback=new D6({client:this}),await this.wsFallback.connect();throw a}}_sayHi(){const a=sl(),e={headers:{"x-client-request-id":a}};this.doAxiosRequest("get",this.baseURL+"/hi",null,e).catch(n=>{this.options.enableInsights&&Hc("http_hi_failed",{api_key:this.key,err:n,client_request_id:a})})}async queryUsers(a,e=[],n={}){const s={presence:!1};await this.wsPromise,this._hasConnectionID()||(s.presence=!1);const l=await this.get(this.baseURL+"/users",{payload:{filter_conditions:a,sort:ha(e),...s,...n}});return this.state.updateUsers(l.users),l}async queryBannedUsers(a={},e=[],n={}){return await this.get(this.baseURL+"/query_banned_users",{payload:{filter_conditions:a,sort:ha(e),...n}})}async queryMessageFlags(a={},e={}){return await this.get(this.baseURL+"/moderation/flags/message",{payload:{filter_conditions:a,...e}})}async queryChannelsRequest(a,e=[],n={}){const s={state:!0,watch:!0,presence:!1};await this.wsPromise,this._hasConnectionID()||(s.watch=!1);const l={filter_conditions:a,sort:ha(e),...s,...n};return(await this.post(this.baseURL+"/channels",l)).channels}async queryChannels(a,e=[],n={},s={}){var c;const l=await this.queryChannelsRequest(a,e,n);return this.dispatchEvent({type:"channels.queried",queriedChannels:{channels:l,isLatestMessageSet:!0}}),l!=null&&l.length&&((c=this.offlineDb)!=null&&c.upsertChannels)&&await this.offlineDb.upsertChannels({channels:l,isLatestMessagesSet:!0}),this.hydrateActiveChannels(l,s,n)}async queryReactions(a,e,n=[],s={}){var c;const l={filter:e,sort:ha(n),...s};if((c=this.offlineDb)!=null&&c.getReactions&&!s.next)try{const d=await this.offlineDb.getReactions({messageId:a,filters:e,sort:n,limit:s.limit});d&&this.dispatchEvent({type:"offline_reactions.queried",offlineReactions:d})}catch(d){this.logger("warn","An error has occurred while querying offline reactions",{error:d})}return await this.wsPromise,await this.post(this.baseURL+"/messages/"+encodeURIComponent(a)+"/reactions",l)}hydrateActiveChannels(a=[],e={},n){const{skipInitialization:s,offlineMode:l=!1}=e,c=[];for(const d of a){this._addChannelConfig(d.channel);const p=this.channel(d.channel.type,d.channel.id);p.data=d.channel,p.offlineMode=l,p.initialized=!l,p.push_preferences=d.push_preferences;let h;if(s===void 0){const{messageSet:m}=p._initializeState(d,"latest");h=m}else if(!s.includes(d.channel.id)){p.state.clearMessages();const{messageSet:m}=p._initializeState(d,"latest");h=m}h&&(h.pagination={...h.pagination,...SE({parentSet:h,requestedPageSize:(n==null?void 0:n.message_limit)||aT,returnedPage:d.messages,logger:this.logger})},this.polls.hydratePollCache(d.messages,!0)),d.draft&&p.messageComposer.initState({composition:d.draft}),c.push(p)}return c}async search(a,e,n={}){if(n.offset&&n.next)throw Error("Cannot specify offset with next");const s={filter_conditions:a,...n,sort:n.sort?ha(n.sort):void 0};if(typeof e=="string")s.query=e;else if(typeof e=="object")s.message_filter_conditions=e;else throw Error(`Invalid type ${typeof e} for query parameter`);return await this.wsPromise,await this.get(this.baseURL+"/search",{payload:s})}setLocalDevice(a){var e,n,s;if((e=this.wsConnection)!=null&&e.isConnecting&&this.wsPromise||((n=this.wsConnection)!=null&&n.isHealthy||(s=this.wsFallback)!=null&&s.isHealthy())&&this._hasConnectionID())throw new Error("you can only set device before opening a websocket connection");this.options.device=a}async addDevice(a,e,n,s){return await this.post(this.baseURL+"/devices",{id:a,push_provider:e,...n!=null?{user_id:n}:{},...s!=null?{push_provider_name:s}:{}})}async getDevices(a){return await this.get(this.baseURL+"/devices",a?{user_id:a}:{})}async getUnreadCount(a){return await this.get(this.baseURL+"/unread",a?{user_id:a}:{})}async getUnreadCountBatch(a){return await this.post(this.baseURL+"/unread_batch",{user_ids:a})}async setPushPreferences(a){return await this.post(this.baseURL+"/push_preferences",{preferences:a})}async removeDevice(a,e){return await this.delete(this.baseURL+"/devices",{id:a,...e?{user_id:e}:{}})}getRateLimits(a){const{serverSide:e,web:n,android:s,ios:l,endpoints:c}=a||{};return this.get(this.baseURL+"/rate_limits",{server_side:e,web:n,android:s,ios:l,endpoints:c?c.join(","):void 0})}_addChannelConfig({cid:a,config:e}){this._cacheEnabled()&&(this.configs[a]=e)}channel(a,e,n={}){var s;if(!this.userID&&!this._isUsingServerAuth())throw Error("Call connectUser or connectAnonymousUser before creating a channel");if(~a.indexOf(":"))throw new Error(`Invalid channel group ${a}, can't contain the : character`);return e&&typeof e=="object"?this.getChannelByMembers(a,e):!e&&typeof n=="object"&&((s=n.members)!=null&&s.length)?this.getChannelByMembers(a,n):e?this.getChannelById(a,e,n):new cl(this,a,void 0,n)}async partialUpdateUser(a){return await this.partialUpdateUsers([a])}async upsertUsers(a){const e={};for(const n of a){if(!n.id)throw Error("User ID is required when updating a user");e[n.id]=n}return await this.post(this.baseURL+"/users",{users:e})}upsertUser(a){return this.upsertUsers([a])}async partialUpdateUsers(a){for(const e of a)if(!e.id)throw Error("User ID is required when updating a user");return await this.patch(this.baseURL+"/users",{users:a})}async deleteUser(a,e){return await this.delete(this.baseURL+`/users/${encodeURIComponent(a)}`,e)}async restoreUsers(a){return await this.post(this.baseURL+"/users/restore",{user_ids:a})}async reactivateUser(a,e){return await this.post(this.baseURL+`/users/${encodeURIComponent(a)}/reactivate`,{...e})}async reactivateUsers(a,e){return await this.post(this.baseURL+"/users/reactivate",{user_ids:a,...e})}async deactivateUser(a,e){return await this.post(this.baseURL+`/users/${encodeURIComponent(a)}/deactivate`,{...e})}async deactivateUsers(a,e){return await this.post(this.baseURL+"/users/deactivate",{user_ids:a,...e})}async exportUser(a,e){return await this.get(this.baseURL+`/users/${encodeURIComponent(a)}/export`,{...e})}async banUser(a,e){return await this.post(this.baseURL+"/moderation/ban",{target_user_id:a,...e})}async unbanUser(a,e){return await this.delete(this.baseURL+"/moderation/ban",{target_user_id:a,...e})}async shadowBan(a,e){return await this.banUser(a,{shadow:!0,...e})}async removeShadowBan(a,e){return await this.unbanUser(a,{shadow:!0,...e})}async blockUser(a,e){return await this.post(this.baseURL+"/users/block",{blocked_user_id:a,...e?{user_id:e}:{}})}async getBlockedUsers(a){return await this.get(this.baseURL+"/users/block",{...a?{user_id:a}:{}})}async unBlockUser(a,e){return await this.post(this.baseURL+"/users/unblock",{blocked_user_id:a,...e?{user_id:e}:{}})}async muteUser(a,e,n={}){return await this.post(this.baseURL+"/moderation/mute",{target_id:a,...e?{user_id:e}:{},...n})}async unmuteUser(a,e){return await this.post(this.baseURL+"/moderation/unmute",{target_id:a,...e?{user_id:e}:{}})}userMuteStatus(a){if(!this.user||!this.wsPromise)throw new Error("Make sure to await connectUser() first.");for(let e=0;e<this.mutedUsers.length;e+=1)if(this.mutedUsers[e].target.id===a)return!0;return!1}async flagMessage(a,e={}){return await this.post(this.baseURL+"/moderation/flag",{target_message_id:a,...e})}async flagUser(a,e={}){return await this.post(this.baseURL+"/moderation/flag",{target_user_id:a,...e})}async unflagMessage(a,e={}){return await this.post(this.baseURL+"/moderation/unflag",{target_message_id:a,...e})}async unflagUser(a,e={}){return await this.post(this.baseURL+"/moderation/unflag",{target_user_id:a,...e})}async _queryFlags(a={},e={}){return await this.post(this.baseURL+"/moderation/flags",{filter_conditions:a,...e})}async _queryFlagReports(a={},e={}){return await this.post(this.baseURL+"/moderation/reports",{filter_conditions:a,...e})}async _reviewFlagReport(a,e,n={}){return await this.patch(this.baseURL+`/moderation/reports/${encodeURIComponent(a)}`,{review_result:e,...n})}async unblockMessage(a,e={}){return await this.post(this.baseURL+"/moderation/unblock_message",{target_message_id:a,...e})}async markChannelsRead(a={}){await this.post(this.baseURL+"/channels/read",{...a})}createCommand(a){return this.post(this.baseURL+"/commands",a)}getCommand(a){return this.get(this.baseURL+`/commands/${encodeURIComponent(a)}`)}updateCommand(a,e){return this.put(this.baseURL+`/commands/${encodeURIComponent(a)}`,e)}deleteCommand(a){return this.delete(this.baseURL+`/commands/${encodeURIComponent(a)}`)}listCommands(){return this.get(this.baseURL+"/commands")}createChannelType(a){const e=Object.assign({},{commands:["all"]},a);return this.post(this.baseURL+"/channeltypes",e)}getChannelType(a){return this.get(this.baseURL+`/channeltypes/${encodeURIComponent(a)}`)}updateChannelType(a,e){return this.put(this.baseURL+`/channeltypes/${encodeURIComponent(a)}`,e)}DBDeleteChannelType(a){return this.delete(this.baseURL+`/channeltypes/${encodeURIComponent(a)}`)}listChannelTypes(){return this.get(this.baseURL+"/channeltypes")}async translateMessage(a,e){return await this.post(this.baseURL+`/messages/${encodeURIComponent(a)}/translate`,{language:e})}async translate(a,e,n){return await this.post(this.baseURL+"/translate",{text:a,source_language:n,destination_language:e})}_normalizeExpiration(a){let e=null;if(typeof a=="number"){const n=new Date;n.setSeconds(n.getSeconds()+a),e=n.toISOString()}else mg(a)?e=a:a instanceof Date&&(e=a.toISOString());return e}_validateAndGetMessageId(a,e){let n;if(typeof a=="string")n=a;else{if(!a.id)throw Error(e);n=a.id}return n}pinMessage(a,e,n,s){const l=this._validateAndGetMessageId(a,"Please specify the message id when calling unpinMessage");return this.partialUpdateMessage(l,{set:{pinned:!0,pin_expires:this._normalizeExpiration(e),pinned_at:this._normalizeExpiration(s)}},n)}unpinMessage(a,e){const n=this._validateAndGetMessageId(a,"Please specify the message id when calling unpinMessage");return this.partialUpdateMessage(n,{set:{pinned:!1}},e)}async updateMessage(a,e,n){if(!a.id)throw Error("Please specify the message.id when calling updateMessage");const s=vE(a);return typeof e=="string"?s.user_id=e:typeof(e==null?void 0:e.id)=="string"&&(s.user_id=e.id),await this.post(this.baseURL+`/messages/${encodeURIComponent(a.id)}`,{message:s,...n})}async partialUpdateMessage(a,e,n,s){if(!a)throw Error("Please specify the message.id when calling partialUpdateMessage");let l;return typeof n=="string"?l={id:n}:typeof(n==null?void 0:n.id)=="string"&&(l={id:n.id}),await this.put(this.baseURL+`/messages/${encodeURIComponent(a)}`,{...e,...s,user:l})}async deleteMessage(a,e){try{if(this.offlineDb)return e?await this.offlineDb.hardDeleteMessage({id:a}):await this.offlineDb.softDeleteMessage({id:a}),await this.offlineDb.queueTask({task:{messageId:a,payload:[a,e],type:"delete-message"}})}catch(n){this.logger("error","offlineDb:deleteMessage",{tags:["channel","offlineDb"],error:n})}return this._deleteMessage(a,e)}async _deleteMessage(a,e){let n={};return e&&(n={hard:!0}),await this.delete(this.baseURL+`/messages/${encodeURIComponent(a)}`,n)}async undeleteMessage(a,e){return await this.post(this.baseURL+`/messages/${encodeURIComponent(a)}/undelete`,{undeleted_by:e})}async getMessage(a,e){return await this.get(this.baseURL+`/messages/${encodeURIComponent(a)}`,{...e})}async queryThreads(a={}){const e={limit:10,participant_limit:10,reply_limit:3,watch:!0,...a},n={...e};e.filter&&Object.keys(e.filter).length>0&&(n.filter=e.filter),e.sort&&(Array.isArray(e.sort)?e.sort.length>0:Object.keys(e.sort).length>0)&&(n.sort=ha(e.sort));const s=await this.post(`${this.baseURL}/threads`,n);return{threads:s.threads.map(l=>new Xc({client:this,threadData:l})),next:s.next}}async getThread(a,e={}){if(!a)throw new Error("Please specify the messageId when calling getThread");const n={participant_limit:100,reply_limit:3,watch:!0,...e},s=await this.get(`${this.baseURL}/threads/${encodeURIComponent(a)}`,n);return new Xc({client:this,threadData:s.thread})}async partialUpdateThread(a,e){if(!a)throw Error("Please specify the message id when calling partialUpdateThread");const n=["created_at","id","last_message_at","type","updated_at","user","reply_count","participants","channel","custom"];for(const s in{...e.set,...e.unset})if(n.includes(s))throw Error(`You cannot set ${s} field on Thread object. ${s} is reserved for server-side use. Please omit ${s} from your set object.`);return await this.patch(`${this.baseURL}/threads/${encodeURIComponent(a)}`,e)}getUserAgent(){if(this.userAgent)return this.userAgent;const a="9.2.0",e="browser-esm";let n="";this.sdkIdentifier?n=`stream-chat-${this.sdkIdentifier.name}-v${this.sdkIdentifier.version}-llc-v${a}`:n=`stream-chat-js-v${a}-${this.node?"node":"browser"}`;const{os:s,model:l}=this.deviceIdentifier??{};return[["os",s],["device_model",l],["client_bundle",e]].reduce((c,[d,p])=>p&&p.length>0?c.concat(`|${d}=${p}`):c,n)}setUserAgent(a){this.userAgent=a}_enrichAxiosOptions(a={params:{},headers:{},config:{}}){var p;const e=this._getToken(),n=e?{Authorization:e}:void 0;let s=null;this.nextRequestAbortController!==null&&(s=this.nextRequestAbortController.signal,this.nextRequestAbortController=null),(p=a.headers)!=null&&p["x-client-request-id"]||(a.headers={...a.headers,"x-client-request-id":sl()});const{params:l,headers:c,...d}=this.options.axiosRequestConfig||{};return{params:{user_id:this.userID,connection_id:this._getConnectionID(),api_key:this.key,...a.params,...l||{}},headers:{...n,"stream-auth-type":this.getAuthType(),"X-Stream-Client":this.getUserAgent(),...a.headers,...c||{}},...s?{signal:s}:{},...a.config,...d||{}}}_getToken(){return!this.tokenManager||this.anonymous?null:this.tokenManager.getToken()}_startCleaning(){const a=this;this.cleaningIntervalRef==null&&(this.cleaningIntervalRef=setInterval(()=>{for(const e of Object.values(a.activeChannels))e.clean()},500))}verifyWebhook(a,e){return!!this.secret&&x6(a,this.secret,e)}getPermission(a){return this.get(`${this.baseURL}/permissions/${encodeURIComponent(a)}`)}createPermission(a){return this.post(`${this.baseURL}/permissions`,{...a})}updatePermission(a,e){return this.put(`${this.baseURL}/permissions/${encodeURIComponent(a)}`,{...e})}deletePermission(a){return this.delete(`${this.baseURL}/permissions/${encodeURIComponent(a)}`)}listPermissions(){return this.get(`${this.baseURL}/permissions`)}createRole(a){return this.post(`${this.baseURL}/roles`,{name:a})}listRoles(){return this.get(`${this.baseURL}/roles`)}deleteRole(a){return this.delete(`${this.baseURL}/roles/${encodeURIComponent(a)}`)}sync(a,e,n={}){return this.post(`${this.baseURL}/sync`,{channel_cids:a,last_sync_at:e,...n})}async sendUserCustomEvent(a,e){return await this.post(`${this.baseURL}/users/${encodeURIComponent(a)}/event`,{event:e})}createBlockList(a){return this.post(`${this.baseURL}/blocklists`,a)}listBlockLists(a){return this.get(`${this.baseURL}/blocklists`,a)}getBlockList(a,e){return this.get(`${this.baseURL}/blocklists/${encodeURIComponent(a)}`,e)}updateBlockList(a,e){return this.put(`${this.baseURL}/blocklists/${encodeURIComponent(a)}`,e)}deleteBlockList(a,e){return this.delete(`${this.baseURL}/blocklists/${encodeURIComponent(a)}`,e)}exportChannels(a,e={}){const n={channels:a,...e};return this.post(`${this.baseURL}/export_channels`,n)}exportUsers(a){return this.post(`${this.baseURL}/export/users`,a)}exportChannel(a,e){return this.exportChannels([a],e)}getExportChannelStatus(a){return this.get(`${this.baseURL}/export_channels/${encodeURIComponent(a)}`)}campaign(a,e){return a&&typeof a=="object"?new x2(this,null,a):new x2(this,a,e)}segment(a,e,n){return typeof e=="string"?new tx(this,a,e,n):new tx(this,a,null,e)}validateServerSideAuth(){if(!this.secret)throw new Error("Campaigns is a server-side only feature. Please initialize the client with a secret to use this feature.")}createSegment(a,e,n){this.validateServerSideAuth();const s={id:e,type:a,...n};return this.post(this.baseURL+"/segments",s)}createUserSegment(a,e){return this.validateServerSideAuth(),this.createSegment("user",a,e)}createChannelSegment(a,e){return this.validateServerSideAuth(),this.createSegment("channel",a,e)}getSegment(a){return this.validateServerSideAuth(),this.get(this.baseURL+`/segments/${encodeURIComponent(a)}`)}updateSegment(a,e){return this.validateServerSideAuth(),this.put(this.baseURL+`/segments/${encodeURIComponent(a)}`,e)}addSegmentTargets(a,e){this.validateServerSideAuth();const n={target_ids:e};return this.post(this.baseURL+`/segments/${encodeURIComponent(a)}/addtargets`,n)}querySegmentTargets(a,e={},n=[],s={}){return this.validateServerSideAuth(),this.post(this.baseURL+`/segments/${encodeURIComponent(a)}/targets/query`,{filter:e||{},sort:n||[],...s})}removeSegmentTargets(a,e){this.validateServerSideAuth();const n={target_ids:e};return this.post(this.baseURL+`/segments/${encodeURIComponent(a)}/deletetargets`,n)}querySegments(a,e,n={}){return this.validateServerSideAuth(),this.post(this.baseURL+"/segments/query",{filter:a,sort:e,...n})}deleteSegment(a){return this.validateServerSideAuth(),this.delete(this.baseURL+`/segments/${encodeURIComponent(a)}`)}segmentTargetExists(a,e){return this.validateServerSideAuth(),this.get(this.baseURL+`/segments/${encodeURIComponent(a)}/target/${encodeURIComponent(e)}`)}createCampaign(a){return this.validateServerSideAuth(),this.post(this.baseURL+"/campaigns",{...a})}getCampaign(a,e){return this.validateServerSideAuth(),this.get(this.baseURL+`/campaigns/${encodeURIComponent(a)}`,{...e==null?void 0:e.users})}startCampaign(a,e){return this.validateServerSideAuth(),this.post(this.baseURL+`/campaigns/${encodeURIComponent(a)}/start`,{scheduled_for:e==null?void 0:e.scheduledFor,stop_at:e==null?void 0:e.stopAt})}async queryCampaigns(a,e,n){return this.validateServerSideAuth(),await this.post(this.baseURL+"/campaigns/query",{filter:a,sort:e,...n||{}})}updateCampaign(a,e){return this.validateServerSideAuth(),this.put(this.baseURL+`/campaigns/${encodeURIComponent(a)}`,e)}deleteCampaign(a){return this.validateServerSideAuth(),this.delete(this.baseURL+`/campaigns/${encodeURIComponent(a)}`)}stopCampaign(a){return this.validateServerSideAuth(),this.post(this.baseURL+`/campaigns/${encodeURIComponent(a)}/stop`)}enrichURL(a){return this.get(this.baseURL+"/og",{url:a})}getTask(a){return this.get(`${this.baseURL}/tasks/${encodeURIComponent(a)}`)}async deleteChannels(a,e={}){return await this.post(this.baseURL+"/channels/delete",{cids:a,...e})}async deleteUsers(a,e={}){if(typeof e.user<"u"&&!["soft","hard","pruning"].includes(e.user))throw new Error("Invalid delete user options. user must be one of [soft hard pruning]");if(typeof e.conversations<"u"&&!["soft","hard"].includes(e.conversations))throw new Error("Invalid delete user options. conversations must be one of [soft hard]");if(typeof e.messages<"u"&&!["soft","hard","pruning"].includes(e.messages))throw new Error("Invalid delete user options. messages must be one of [soft hard pruning]");return await this.post(this.baseURL+"/users/delete",{user_ids:a,...e})}async _createImportURL(a){return await this.post(this.baseURL+"/import_urls",{filename:a})}async _createImport(a,e={mode:"upsert"}){return await this.post(this.baseURL+"/imports",{path:a,...e})}async _getImport(a){return await this.get(this.baseURL+`/imports/${encodeURIComponent(a)}`)}async _listImports(a){return await this.get(this.baseURL+"/imports",a)}async upsertPushProvider(a){return await this.post(this.baseURL+"/push_providers",{push_provider:a})}async deletePushProvider({type:a,name:e}){return await this.delete(this.baseURL+`/push_providers/${encodeURIComponent(a)}/${encodeURIComponent(e)}`)}async listPushProviders(){return await this.get(this.baseURL+"/push_providers")}createAbortControllerForNextRequest(){return this.nextRequestAbortController=new AbortController}async commitMessage(a){return await this.post(this.baseURL+`/messages/${encodeURIComponent(a)}/commit`)}async createPoll(a,e){return await this.post(this.baseURL+"/polls",{...a,...e?{user_id:e}:{}})}async getPoll(a,e){return await this.get(this.baseURL+`/polls/${encodeURIComponent(a)}`,e?{user_id:e}:{})}async updatePoll(a,e){return await this.put(this.baseURL+"/polls",{...a,...e?{user_id:e}:{}})}async partialUpdatePoll(a,e,n){return await this.patch(this.baseURL+`/polls/${encodeURIComponent(a)}`,{...e,...n?{user_id:n}:{}})}async deletePoll(a,e){return await this.delete(this.baseURL+`/polls/${encodeURIComponent(a)}`,{...e?{user_id:e}:{}})}closePoll(a,e){return this.partialUpdatePoll(a,{set:{is_closed:!0}},e)}async createPollOption(a,e,n){return await this.post(this.baseURL+`/polls/${encodeURIComponent(a)}/options`,{...e,...n?{user_id:n}:{}})}async getPollOption(a,e,n){return await this.get(this.baseURL+`/polls/${encodeURIComponent(a)}/options/${encodeURIComponent(e)}`,n?{user_id:n}:{})}async updatePollOption(a,e,n){return await this.put(this.baseURL+`/polls/${encodeURIComponent(a)}/options`,{...e,...n?{user_id:n}:{}})}async deletePollOption(a,e,n){return await this.delete(this.baseURL+`/polls/${encodeURIComponent(a)}/options/${encodeURIComponent(e)}`,n?{user_id:n}:{})}async castPollVote(a,e,n,s){return await this.post(this.baseURL+`/messages/${encodeURIComponent(a)}/polls/${encodeURIComponent(e)}/vote`,{vote:n,...s?{user_id:s}:{}})}addPollAnswer(a,e,n,s){return this.castPollVote(a,e,{answer_text:n},s)}async removePollVote(a,e,n,s){return await this.delete(this.baseURL+`/messages/${encodeURIComponent(a)}/polls/${encodeURIComponent(e)}/vote/${encodeURIComponent(n)}`,{...s?{user_id:s}:{}})}async queryPolls(a={},e=[],n={},s){const l=s?`?user_id=${s}`:"";return await this.post(this.baseURL+`/polls/query${l}`,{filter:a,sort:ha(e),...n})}async queryPollVotes(a,e={},n=[],s={},l){const c=l?`?user_id=${l}`:"";return await this.post(this.baseURL+`/polls/${encodeURIComponent(a)}/votes${c}`,{filter:e,sort:ha(n),...s})}async queryPollAnswers(a,e={},n=[],s={},l){const c=l?`?user_id=${l}`:"";return await this.post(this.baseURL+`/polls/${encodeURIComponent(a)}/votes${c}`,{filter:{...e,is_answer:!0},sort:ha(n),...s})}async queryMessageHistory(a={},e=[],n={}){return await this.post(this.baseURL+"/messages/history",{filter:a,sort:ha(e),...n})}async updateFlags(a,e,n={}){return await this.post(this.baseURL+"/automod/v1/moderation/update_flags",{message_ids:a,reviewed_by:e,...n})}async queryDrafts(a={}){const e={...a,sort:a.sort?ha(a.sort):void 0};return await this.post(this.baseURL+"/drafts/query",e)}};const VE=(t,a)=>{const[e,n]=v.useState([]),[s,l]=v.useState([]),[c,d]=v.useState(!0),[p,h]=v.useState(null),[m,b]=v.useState(null),x=v.useRef(null),E=v.useRef(null),w=v.useCallback(async(C=!1)=>{E.current&&E.current.abort(),E.current=new AbortController;try{C||d(!0);const[D,I]=await Promise.all([es.getPendingProposals(t,a),es.getSentProposals(t,a)]);E.current.signal.aborted||(n(D.filter(A=>A.status==="pending")),l(I.filter(A=>["pending","countered"].includes(A.status))),h(null),b(new Date))}catch(D){if(D.name==="AbortError")return;h(D.message),C||(n([]),l([]))}finally{E.current.signal.aborted||d(!1)}},[t,a]);v.useEffect(()=>{if(t&&a)return w(),x.current=setInterval(()=>{w(!0)},3e4),()=>{x.current&&clearInterval(x.current),E.current&&E.current.abort()}},[t,a,w]);const S=v.useCallback(()=>{w()},[w]),_=v.useCallback((C,D="add")=>{D==="add"?l(I=>[C,...I]):D==="update"?(n(I=>I.map(A=>A._id===C._id?C:A)),l(I=>I.map(A=>A._id===C._id?C:A))):D==="remove"&&(n(I=>I.filter(A=>A._id!==C._id)),l(I=>I.filter(A=>A._id!==C._id))),b(new Date)},[]);return{pendingProposals:e,sentProposals:s,loading:c,error:p,lastUpdate:m,refetch:S,updateProposalLocally:_}},Y6="nbvut8j4y6se",G6="frbcaplgmailcom";function $6(t){if(!t)return"";const a=new Date(t),e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}function Pc(t){if(!t)return"";const a=new Date(t),e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0");return`${a.getFullYear()}-${e}-${n}`}function Z6(t){let a=t.trim();a=a.replace(/(\d{1,2}):(\d{2})\s*(am|pm)/i,(n,s,l,c)=>`${parseInt(s,10)}:${l} ${c.toUpperCase()}`),a=a.replace(/^(\d{1,2})(\d{2})(am|pm)$/i,(n,s,l,c)=>`${parseInt(s,10)}:${l} ${c.toUpperCase()}`),a=a.replace(/^(\d{1,2})(am|pm)$/i,(n,s,l)=>`${parseInt(s,10)}:00 ${l.toUpperCase()}`),a=a.replace(/(am|pm)$/i," $1"),a=a.replace(/(am|pm)$/i,n=>n.toUpperCase());const e=a.match(/^(\d{1,2}):(\d{2}) (AM|PM)$/i);if(e){const n=e[1],s=e[2],l=e[3].toUpperCase(),c=`${n}:${s} ${l}`;return console.log("normalizeTimeString final:",c),c}return console.log("normalizeTimeString fallback:",a),a}function Zd(t){return t.replace(/[^a-zA-Z0-9]/g,"")}async function q6({senderEmail:t,senderName:a,receiverEmail:e,receiverName:n,matchName:s}){try{const l=V0.getInstance(Y6),c=await fetch(`${Pe}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:Zd(t)})}),{token:d}=await c.json();if(!d)throw new Error("Could not get chat token");l.userID||await l.connectUser({id:Zd(t),name:a},d);const p=Array.from(new Set([Zd(t),Zd(e),G6])),h=l.channel("messaging",{members:p,name:s});await h.create(),await h.sendMessage({text:"Chat created for your match proposal!"})}catch(l){console.error("Failed to create chat channel:",l),alert("Failed to create chat channel: "+l.message)}}const hg=`This is a BETA test match. Matches that are created, scheduled, and confirmed will NOT be played.

`,Q6=t=>t.replace(/[–—−]/g,"-").replace(/\s*-\s*/g," - ").trim();function Rp({player:t,day:a,slot:e,onClose:n,senderName:s,senderEmail:l,onProposalComplete:c,selectedDivision:d,phase:p}){console.log("MatchProposalModal player prop:",t),console.log("MatchProposalModal phase prop:",p),console.log("MatchProposalModal slot prop:",e,JSON.stringify(e));const[h,m]=v.useState(e),[b,x]=v.useState(""),[E,w]=v.useState(""),[S,_]=v.useState(""),[C,D]=v.useState(!1),[I,A]=v.useState("8 Ball"),[T,F]=v.useState(p==="scheduled"||p==="challenge"?5:7),J=t.locations?t.locations.split(/\r?\n/).map(q=>q.trim()).filter(Boolean):[],H=qD(a),[Z,K]=v.useState(H),X=t.availability[a]||[],O=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][Z.getDay()],B=v.useMemo(()=>{if(!e)return[];const q=Q6(e);if(console.log("DEBUG: normalized slot:",q),!q.includes(" - "))return[];let[R,j]=q.split(" - ").map(ae=>Z6(ae.trim()));if(console.log("DEBUG: blockStart:",R,"blockEnd:",j),!R||!j)return[];const ne=M0(R,j,30);return console.log("DEBUG: generated times:",ne),ne},[e]);v.useEffect(()=>{x("")},[e]);const{sentProposals:U}=VE(s,d);function M(q){return U.some(R=>R.receiverName===(q.player?`${q.player.firstName} ${q.player.lastName}`:q.opponentName)&&R.date===Pc(Z)&&R.time===b&&R.location===E&&R.phase===p&&R.divisions&&R.divisions.includes(d)&&["pending","countered"].includes(R.status))}t.opponents&&t.opponents.filter(q=>!M(q));const z=()=>{if(!l||!t.email||!b||!E||!Z){alert("Please fill in all required fields.");return}if(p==="scheduled"){const R=new Date,j=new Date(Z),ne=Math.ceil((j-R)/(1e3*60*60*24));if(ne<0){alert("⚠️ You cannot schedule a match in the past.");return}if(ne<=2&&!window.confirm(`⚠️ WARNING: This match is scheduled for ${ne} day(s) from now.

Phase 1 matches must be completed by the end of week 6. Scheduling this close to the deadline may not give enough time to complete the match.

Do you want to continue with this schedule?`))return}const q={senderEmail:l,senderName:s,receiverEmail:t.email,receiverName:t.firstName?`${t.firstName} ${t.lastName}`:t.name,date:Pc(Z),time:b,location:E,message:S,gameType:I,raceLength:T,phase:p,divisions:[d]};console.log("Proposal data to send:",q),fetch(`${Pe}/api/proposals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)}).then(R=>R.json()).then(R=>{if(console.log("Backend response:",R),R.error)throw new Error(R.error);if(q6({senderEmail:l,senderName:s,receiverEmail:t.email,receiverName:t.firstName?`${t.firstName} ${t.lastName}`:t.name,matchName:`${s} vs ${t.firstName?`${t.firstName} ${t.lastName}`:t.name} - ${$6(Z)}`}),JD({to_email:t.email,to_name:t.firstName?`${t.firstName} ${t.lastName}`:t.name,from_name:s,from_email:l,day:O,date:Pc(Z),time:b,location:E,note:S,gameType:I,raceLength:T,proposalId:R.proposalId}),D(!0),c){const j={_id:R.proposalId,senderEmail:l,senderName:s,receiverEmail:t.email,receiverName:t.firstName?`${t.firstName} ${t.lastName}`:t.name,date:Pc(Z),time:b,location:E,message:S,gameType:I,raceLength:T,phase:p,divisions:[d],status:"pending",createdAt:new Date};c(j)}}).catch(R=>{console.error("Failed to send proposal:",R),alert("Failed to send proposal: "+R.message)})},G=()=>{D(!1),n(),c&&c()};return i.createElement(i.Fragment,null,i.createElement(Rn,{open:!0,onClose:n,title:i.createElement("span",{className:dn["match-proposal-title"]},"Propose a Match - BETA"),maxWidth:"500px",className:"proposal-modal"},i.createElement("div",{className:dn["match-proposal-content"]},i.createElement("div",{style:{display:"flex",justifyContent:"center",gap:12,marginBottom:12}},i.createElement("div",{className:dn["match-proposal-phase"]},i.createElement("b",null,i.createElement("span",{style:{color:"#fff"}},p==="scheduled"?"Phase 1:":p==="challenge"?"Phase 2:":""),i.createElement("span",{className:dn["match-proposal-label-red"],style:{marginLeft:4}},p==="scheduled"?"Scheduled Match Phase":p==="challenge"?"Challenge Phase":""))),i.createElement("div",{className:dn["match-proposal-division"]},i.createElement("b",null,i.createElement("span",{style:{color:"#fff"}},"Division:"))," ",i.createElement("span",{className:dn["match-proposal-label-red"]},d))),i.createElement("div",{className:dn["match-proposal-row"],style:{marginBottom:10}},i.createElement("b",null,"To Opponent:"),i.createElement("div",{className:dn.opponentName,style:{fontWeight:"bold",fontSize:"1.25rem",margin:"2px 0"}},t.firstName?`${t.firstName} ${t.lastName}`:t.name),i.createElement("span",{style:{color:"#fff",fontSize:"1rem"}},"Day: "),i.createElement("span",{className:dn["match-proposal-day-value"],style:{color:"#e53e3e",fontWeight:600}},O)),i.createElement("div",{className:dn["match-proposal-row"],style:{marginBottom:10}},i.createElement("b",null,"Date:"),i.createElement(Rw,{selected:Z,onChange:q=>K(q),dateFormat:"MM-dd-yyyy",className:dn["match-proposal-date-input"],required:!0})),i.createElement("div",{className:dn["match-proposal-row"],style:{marginBottom:10}},i.createElement("b",null,"Time Block:"),i.createElement("select",{className:dn["match-proposal-select"],value:h,onChange:q=>m(q.target.value)},i.createElement("option",{value:""},"Select time block"),X.map((q,R)=>i.createElement("option",{key:R,value:q},q)))),i.createElement("div",{className:dn["match-proposal-row"],style:{marginBottom:10}},i.createElement("b",null,"Start Time:"),i.createElement("select",{className:dn["match-proposal-select"],value:b,onChange:q=>x(q.target.value)},i.createElement("option",{value:""},"Select..."),B.map((q,R)=>i.createElement("option",{key:R,value:q},q)))),i.createElement("div",{className:dn["match-proposal-row"],style:{marginBottom:10}},i.createElement("b",null,"Game Type:"),i.createElement("select",{className:dn["match-proposal-select"],value:I,onChange:q=>A(q.target.value)},i.createElement("option",{value:"8 Ball"},"8 Ball"),i.createElement("option",{value:"9 Ball"},"9 Ball"),i.createElement("option",{value:"10 Ball"},"10 Ball"),i.createElement("option",{value:"Mixed"},"Mixed"))),i.createElement("div",{className:dn["match-proposal-row"],style:{marginBottom:10}},i.createElement("b",null,"Race Length:"),i.createElement("select",{className:dn["match-proposal-select"],value:T,onChange:q=>F(Number(q.target.value))},p==="scheduled"||p==="challenge"?i.createElement("option",{value:5},"5"):[...Array(13)].map((q,R)=>{const j=R+3;return i.createElement("option",{key:j,value:j},j)}))),i.createElement("div",{className:dn["match-proposal-row"],style:{marginBottom:10}},i.createElement("b",null,"Location:"),i.createElement("select",{className:dn["match-proposal-location-select"],value:E,onChange:q=>w(q.target.value)},i.createElement("option",{value:""},"Select..."),J.map((q,R)=>i.createElement("option",{key:R,value:q},q)))),i.createElement("div",{className:dn["match-proposal-row"],style:{marginBottom:10}},i.createElement("b",null,"Message to Opponent:"),i.createElement("textarea",{className:dn["match-proposal-textarea"],value:hg+S,onChange:q=>{const R=q.target.value;R.startsWith(hg)?_(R.slice(hg.length)):_("")},placeholder:"Add a comment to your opponent...",rows:5})),i.createElement("button",{className:dn["match-proposal-send-btn"],onClick:z,disabled:!b||!E},"Send Proposal"))),C&&i.createElement(Zx,{open:C,onClose:G,message:`Your match proposal has been sent to ${t.firstName?`${t.firstName} ${t.lastName}`:t.name}.
          They will receive an email notification and can respond through the app.`,phase:p,gameType:I,raceLength:T,day:O,date:Pc(Z),time:b,location:E,proposalNote:S}))}async function V6(t){try{if(!t)return console.warn("No division selected for standings"),[];const a=t.replace(/[^A-Za-z0-9]/g,"_"),e=`${Pe}/static/standings_${a}.json`,n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch standings: ${n.status}`);const s=await n.json();if(!Array.isArray(s))return console.error("Standings data is not an array:",s),[];const l=s.filter(c=>{if(!c||typeof c!="object")return console.warn("Invalid standings entry:",c),!1;if(!c.name||!c.rank)return console.warn("Standings entry missing name or rank:",c),!1;const d=parseInt(c.rank);return isNaN(d)||d<=0?(console.warn("Invalid rank in standings entry:",c),!1):!0});return console.log(`Loaded ${l.length} valid standings entries for division: ${t}`),l}catch(a){return console.error("Failed to load standings:",a),[]}}function xl(t,a){if(!a||typeof a!="string")return console.warn("getPlayerPosition: playerName is undefined or not a string:",a),null;const e=a.toLowerCase().trim(),n=t.find(s=>s.name&&s.name.toLowerCase().trim()===e);return n?parseInt(n.rank):null}function X6(t,a){return t.sort((e,n)=>{const s=e&&e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:"",l=n&&n.firstName&&n.lastName?`${n.firstName} ${n.lastName}`:"",c=xl(a,s),d=xl(a,l);return c!==null&&d!==null?c-d:c!==null&&d===null?-1:c===null&&d!==null?1:s.localeCompare(l)})}function K6(t,a,e){if(!a||a.length===0)return console.warn("No standings data available for Phase 2 filtering"),t;console.log("=== PHASE 2 FILTERING DEBUG ==="),console.log("Current player name:",e),console.log("Standings data:",a),console.log("All players from sheet:",t.map(l=>`${l.firstName} ${l.lastName}`));const n=xl(a,e);if(n===null)return console.warn(`Player ${e} not found in standings`),console.log("Available standings names:",a.map(l=>l.name)),t;console.log(`Phase 2 filtering: ${e} is at position ${n}`);const s=t.filter(l=>{if(!l||!l.firstName||!l.lastName)return console.warn("Player data incomplete, excluding from Phase 2 filtering:",l),!1;const c=`${l.firstName} ${l.lastName}`,d=xl(a,c);if(d===null)return console.warn(`Opponent ${c} not found in standings - excluding from Phase 2`),!1;const p=d-n,h=p<0&&p>=-4;return console.log(`${c} (${d}) - difference: ${p}, eligible: ${h}`),h});return console.log(`Phase 2 filtering complete: ${s.length} eligible opponents out of ${t.length} total players`),console.log("Eligible players:",s.map(l=>`${l.firstName} ${l.lastName}`)),console.log("=== END PHASE 2 DEBUG ==="),s}function n0({onClose:t,excludeName:a,senderName:e,senderEmail:n,onProposalComplete:s,selectedDivision:l,phase:c}){const[d,p]=v.useState([]),[h,m]=v.useState(""),[b,x]=v.useState(!0),[E,w]=v.useState([]),[S,_]=v.useState("search"),[C,D]=v.useState(null),[I,A]=v.useState(null);v.useEffect(()=>{},[d]),v.useEffect(()=>{let H=!0;async function Z(){try{const K=await V6(l);H&&w(K);const X=await fetch(`${Pe}/api/users/search?approved=true`);if(!X.ok)throw new Error("Failed to fetch players from database");const W=await X.json();if(!W.users||W.users.length===0){H&&p([]),x(!1);return}let O=W.users.map(B=>({firstName:B.firstName||"",lastName:B.lastName||"",email:B.email||"",phone:B.phone||"",locations:B.locations||"",availability:B.availability||{Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},pin:B.pin||"",preferredContacts:B.preferredContacts||[],division:B.division||"",divisions:B.divisions||[]})).filter(B=>B.email&&B.firstName&&B.lastName&&B.isApproved&&`${B.firstName} ${B.lastName}`.toLowerCase()!==(a==null?void 0:a.toLowerCase()));c==="challenge"&&K.length>0?(console.log("🔄 Phase value:",c),console.log("🔄 Standings data length:",K.length),console.log("🔄 Sender name:",e),O=K6(O,K,e),O=X6(O,K)):(console.log("🔄   - phase === 'challenge':",c==="challenge"),console.log("🔄   - standingsData.length > 0:",K.length>0),console.log("🔄   - phase value:",c),console.log("🔄   - standingsData length:",K.length)),H&&(p(O),setTimeout(()=>{},2e3))}catch(K){console.error("Error loading data:",K),H&&p([])}finally{H&&x(!1)}}return Z(),()=>{H=!1}},[a,c,e,l]);const T=h.length>=3?d.filter(H=>`${H.firstName} ${H.lastName}`.toLowerCase().includes(h.toLowerCase())&&`${H.firstName} ${H.lastName}`.toLowerCase()!==(a==null?void 0:a.toLowerCase())):[],F=xl(E,e),J=i.createElement(i.Fragment,null,S==="search"&&i.createElement(Rn,{open:!0,onClose:t,title:"🔍 Player Search",maxWidth:"500px"},c==="challenge"?i.createElement(i.Fragment,null,i.createElement("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid #e53e3e",borderRadius:"6px",padding:"1rem",marginBottom:"1.5rem",color:"#fff"}},i.createElement("strong",null,"Phase 2 (Challenge):")," You can only challenge players ranked 4 spots above in the standings.",i.createElement("br",null),i.createElement("span",{style:{fontSize:"1rem",color:"#fff",marginTop:8,display:"block"}},i.createElement("b",null,"Your Position:")," #",F??"N/A"),d.length>0&&i.createElement("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",opacity:.9}},d.length," eligible opponent",d.length!==1?"s":""," available")),b?i.createElement("p",{style:{color:"#fff",textAlign:"center"}},"Loading players..."):i.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},d.length===0?i.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},"No eligible opponents found within 4 spots above you in the standings."):i.createElement("div",{style:{display:"grid",gap:"8px"}},d.map((H,Z)=>{const K=`${H.firstName} ${H.lastName}`,X=xl(E,K);return i.createElement("button",{key:Z,onClick:()=>{D(H),_("availability")},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:W=>{W.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",W.target.style.transform="translateY(-2px)",W.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:W=>{W.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",W.target.style.transform="translateY(0)",W.target.style.boxShadow="none"}},i.createElement("span",{style:{fontWeight:"bold",color:"#fff"}},"#",X??"N/A"," ",K))})))):i.createElement(i.Fragment,null,h.length>=3&&T.length>0&&i.createElement("div",{style:{color:"#e53e3e",fontSize:"0.9rem",marginBottom:"1rem",textAlign:"center"}},"Click opponent's name to see availability."),i.createElement("input",{type:"text",placeholder:"Type at least 3 letters to search...",value:h,onChange:H=>m(H.target.value),autoFocus:!0,"aria-label":"Search for player",style:{width:"100%",padding:"0.75rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"6px",fontSize:"1rem",marginBottom:"1rem"}}),b?i.createElement("p",{style:{color:"#fff",textAlign:"center"}},"Loading players..."):i.createElement(i.Fragment,null,h.length<3?i.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},"Please enter at least 3 letters to search for a player."):i.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},T.length===0?i.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},"No players found."):i.createElement("div",{style:{display:"grid",gap:"8px"}},T.map((H,Z)=>i.createElement("button",{key:Z,onClick:()=>{D(H),_("availability")},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:K=>{K.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",K.target.style.transform="translateY(-2px)",K.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:K=>{K.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",K.target.style.transform="translateY(0)",K.target.style.boxShadow="none"}},i.createElement(ck,{text:`${H.firstName} ${H.lastName}`,query:h})))))))),S==="availability"&&C&&i.createElement(_p,{player:C,onClose:t,onProposeMatch:(H,Z,K,X)=>{A({player:C,day:H,slot:Z,phase:K,selectedDivision:X||l}),_("proposal")},phase:c,selectedDivision:l}),S==="proposal"&&I&&i.createElement(i.Fragment,null,i.createElement(Rp,{player:I.player,day:I.day,slot:I.slot,onClose:t,senderName:e,senderEmail:n,onProposalComplete:()=>{_("search"),A(null),D(null),s&&s(),t()},phase:I.phase,selectedDivision:I.selectedDivision||l})));return du.createPortal(J,document.body)}function XE({size:t="medium",color:a="#e53e3e",text:e="Loading...",showText:n=!0,variant:s="default"}){const l={small:"16px",medium:"24px",large:"32px",xlarge:"48px"},c=l[t]||l.medium,d=()=>{switch(s){case"pulse":return i.createElement("div",{style:{width:c,height:c,borderRadius:"50%",background:a,animation:"pulse 1.5s ease-in-out infinite"}});case"dots":return i.createElement("div",{style:{display:"flex",gap:"4px"}},[0,1,2].map(p=>i.createElement("div",{key:p,style:{width:"8px",height:"8px",borderRadius:"50%",background:a,animation:"bounce 1.4s ease-in-out infinite both",animationDelay:`${p*.16}s`}})));case"bars":return i.createElement("div",{style:{display:"flex",gap:"2px"}},[0,1,2,3,4].map(p=>i.createElement("div",{key:p,style:{width:"4px",height:"20px",background:a,animation:"bars 1.2s ease-in-out infinite",animationDelay:`${p*.1}s`}})));default:return i.createElement("div",{style:{width:c,height:c,border:"3px solid rgba(229, 62, 62, 0.2)",borderTop:`3px solid ${a}`,borderRadius:"50%",animation:"spin 1s linear infinite"}})}};return i.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"12px",padding:"20px"}},d(),n&&e&&i.createElement("div",{style:{color:a,fontSize:"0.9rem",fontWeight:"500",textAlign:"center",maxWidth:"200px"}},e),i.createElement("style",null,`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
          0%, 100% { 
            transform: scale(0.8);
            opacity: 0.5;
          }
          50% { 
            transform: scale(1);
            opacity: 1;
          }
        }
        
        @keyframes bounce {
          0%, 80%, 100% { 
            transform: scale(0);
          }
          40% { 
            transform: scale(1);
          }
        }
        
        @keyframes bars {
          0%, 40%, 100% { 
            transform: scaleY(0.4);
          }
          20% { 
            transform: scaleY(1);
          }
        }
      `))}function KE({loading:t,children:a,loadingText:e="Loading...",disabled:n=!1,variant:s="default",size:l="medium",...c}){const d={small:{padding:"8px 16px",fontSize:"0.875rem",minHeight:"36px"},medium:{padding:"12px 20px",fontSize:"1rem",minHeight:"48px"},large:{padding:"16px 24px",fontSize:"1.125rem",minHeight:"56px"}},p=d[l]||d.medium;return i.createElement("button",{...c,disabled:t||n,style:{...c.style,...p,position:"relative",opacity:t?.8:1,cursor:t?"not-allowed":"pointer",transition:"all 0.3s ease"}},t?i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}},i.createElement(XE,{size:"small",variant:s,showText:!1,color:"#fff"}),e):a)}function J6({lines:t=3,height:a="20px",width:e="100%",gap:n="8px",variant:s="default"}){const l=c=>{const p=c===t-1?"60%":e;switch(s){case"pulse":return i.createElement("div",{key:c,style:{height:a,width:p,background:"#444",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}});case"shimmer":return i.createElement("div",{key:c,style:{height:a,width:p,background:"linear-gradient(90deg, #333 25%, #444 50%, #333 75%)",backgroundSize:"200% 100%",borderRadius:"4px",animation:"shimmer 1.5s infinite"}});default:return i.createElement("div",{key:c,style:{height:a,width:p,background:"#333",borderRadius:"4px",opacity:.7}})}};return i.createElement("div",{style:{display:"flex",flexDirection:"column",gap:n,padding:"16px"}},Array.from({length:t}).map((c,d)=>l(d)),i.createElement("style",null,`
        @keyframes pulse {
          0%, 100% { 
            opacity: 0.7;
          }
          50% { 
            opacity: 1;
          }
        }
        
        @keyframes shimmer {
          0% { background-position: -200% 0; }
          100% { background-position: 200% 0; }
        }
      `))}function eR(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[l,c,d]=t.split("-"),p=new Date(parseInt(l),parseInt(c)-1,parseInt(d)),h=String(p.getMonth()+1).padStart(2,"0"),m=String(p.getDate()).padStart(2,"0"),b=p.getFullYear();return`${h}-${m}-${b}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const l=t.split("/");if(l.length===3){const[c,d,p]=l;a=new Date(p,c-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}function tR({proposal:t,open:a,onClose:e,onEdit:n,onMessage:s}){if(v.useEffect(()=>{a&&setTimeout(()=>{window.dispatchEvent(new Event("resize"))},50)},[a]),!a||!t)return null;const{senderName:l,receiverName:c,day:d,date:p,time:h,location:m,gameType:b,raceLength:x,message:E,proposalNote:w}=t,S=window.innerWidth<=500,[_,C]=v.useState(!1),[D,I]=v.useState("");async function A(){C(!0),I("");try{if(!(await fetch(`${Pe}/api/proposals/${t._id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"confirmed"})})).ok)throw new Error("Failed to confirm proposal");e&&e()}catch(F){I(F.message||"Failed to confirm proposal")}finally{C(!1)}}const T=i.createElement(Rn,{open:a,onClose:e,title:"🎱 Proposal Details",maxWidth:S?"99vw":"480px"},t.isCounter&&i.createElement("div",{style:{color:"#ff9800",fontWeight:"bold",marginBottom:8,fontSize:"1.05em",textAlign:"center"}},"This is a counter proposal from ",t.counteredBy||"your opponent"),i.createElement("div",{style:{textAlign:"left",marginBottom:S?"0.7rem":"1.5rem",fontSize:S?"0.95rem":"1.05rem",padding:S?"0.2rem 0.2rem":void 0}},i.createElement("div",{className:ue.modalDetailRowSnazzy,style:{padding:S?"0.2em 0.3em":void 0}},i.createElement("strong",{style:{color:"#e53e3e",minWidth:S?"80px":"120px",fontSize:S?"0.95em":void 0}},"You:"),i.createElement("span",{style:{color:"#fff",marginLeft:S?"4px":"8px"}},l||"N/A")),i.createElement("div",{className:ue.modalDetailRowSnazzy,style:{padding:S?"0.2em 0.3em":void 0}},i.createElement("strong",{style:{color:"#e53e3e",minWidth:S?"80px":"120px",fontSize:S?"0.95em":void 0}},"Opponent:"),i.createElement("span",{style:{color:"#fff",marginLeft:S?"4px":"8px"}},c||"N/A")),d&&i.createElement("div",{className:ue.modalDetailRowSnazzy,style:{padding:S?"0.2em 0.3em":void 0}},i.createElement("strong",{style:{color:"#e53e3e",minWidth:S?"80px":"120px",fontSize:S?"0.95em":void 0}},"Day:"),i.createElement("span",{style:{color:"#fff",marginLeft:S?"4px":"8px"}},d)),i.createElement("div",{className:ue.modalDetailRowSnazzy,style:{padding:S?"0.2em 0.3em":void 0}},i.createElement("strong",{style:{color:"#e53e3e",minWidth:S?"80px":"120px",fontSize:S?"0.95em":void 0}},"Date:"),i.createElement("span",{style:{color:"#fff",marginLeft:S?"4px":"8px"}},eR(p))),i.createElement("div",{className:ue.modalDetailRowSnazzy,style:{padding:S?"0.2em 0.3em":void 0}},i.createElement("strong",{style:{color:"#e53e3e",minWidth:S?"80px":"120px",fontSize:S?"0.95em":void 0}},"Time:"),i.createElement("span",{style:{color:"#fff",marginLeft:S?"4px":"8px"}},h||"N/A")),i.createElement("div",{className:ue.modalDetailRowSnazzy,style:{padding:S?"0.2em 0.3em":void 0}},i.createElement("strong",{style:{color:"#e53e3e",minWidth:S?"80px":"120px",fontSize:S?"0.95em":void 0}},"Location:"),i.createElement("span",{style:{color:"#fff",marginLeft:S?"4px":"8px"}},m||"N/A")),b&&i.createElement("div",{className:ue.modalDetailRowSnazzy,style:{padding:S?"0.2em 0.3em":void 0}},i.createElement(mp,{gameType:b,size:S?12:16}),i.createElement("strong",{style:{color:"#e53e3e",minWidth:S?"80px":"120px",fontSize:S?"0.95em":void 0}},"Game:"),i.createElement("span",{style:{color:"#fff",marginLeft:S?"4px":"8px"}},b)),x&&i.createElement("div",{className:ue.modalDetailRowSnazzy,style:{padding:S?"0.2em 0.3em":void 0}},i.createElement("strong",{style:{color:"#e53e3e",minWidth:S?"80px":"120px",fontSize:S?"0.95em":void 0}},"Race:"),i.createElement("span",{style:{color:"#fff",marginLeft:S?"4px":"8px"}},x)),w&&i.createElement("div",{style:{margin:S?"8px 0 0 0":"16px 0 0 0",padding:S?"0.4rem 0.5rem":"0.8rem 1rem",background:"rgba(255, 193, 7, 0.1)",borderLeft:"3px solid #ffc107",borderRadius:"6px",color:"#ffc107",fontSize:S?"0.9rem":"0.95rem",textAlign:"left"}},i.createElement("span",{role:"img","aria-label":"note"},"📝")," ",i.createElement("strong",null,"Note:"),i.createElement("br",null),w)),i.createElement("div",{style:{display:"flex",gap:S?6:12,justifyContent:"center",marginTop:S?10:24,flexDirection:S?"column":"row",alignItems:S?"stretch":"center"}},n&&i.createElement("button",{className:ue.dashboardBtn,onClick:n,style:{background:"#e53e3e",color:"#fff",minWidth:S?"90px":"120px",fontSize:S?"0.95em":void 0,padding:S?"0.5em 0.7em":void 0}},"Edit"),s&&i.createElement("button",{className:ue.dashboardBtn,onClick:s,style:{background:"#007bff",color:"#fff",minWidth:S?"90px":"120px",fontSize:S?"0.95em":void 0,padding:S?"0.5em 0.7em":void 0}},"Msg"),t.isCounter&&t.status==="countered"&&i.createElement(KE,{className:ue.dashboardBtn,onClick:A,loading:_,loadingText:"Confirming...",disabled:_,style:{background:"#43a047",color:"#fff",minWidth:S?"90px":"120px",fontSize:S?"0.95em":void 0,padding:S?"0.5em 0.7em":void 0}},"Confirm"),i.createElement("button",{className:ue.dashboardBtn,onClick:e,style:{background:"#6c757d",color:"#fff",minWidth:S?"90px":"120px",fontSize:S?"0.95em":void 0,padding:S?"0.5em 0.7em":void 0}},"Close")),D&&i.createElement("div",{style:{color:"red",marginTop:8}},D));return du.createPortal(T,document.body)}function gg(t){const a=t.getFullYear(),e=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${a}-${e}-${n}`}function nR(t){const e=t.trim().replace(/\s+/g,"").toLowerCase().match(/^(\d{1,2})(:\d{2})?(am|pm)$/);if(e){const s=e[1],l=e[2]?e[2]:":00",c=e[3].toUpperCase();return`${s}${l} ${c}`}const n=t.trim().match(/^(\d{1,2})(:\d{2})?\s?(am|pm)$/i);if(n){const s=n[1],l=n[2]?n[2]:":00",c=n[3].toUpperCase();return`${s}${l} ${c}`}return t.trim()}const aR=t=>t.replace(/[–—−]/g,"-").replace(/\s*-\s*/g," - ").trim();function rR({proposal:t,open:a,onClose:e,onSave:n,selectedDivision:s,phase:l,receiverPlayer:c}){var R;const[d,p]=v.useState(new Date),[h,m]=v.useState(""),[b,x]=v.useState(""),[E,w]=v.useState(""),[S,_]=v.useState(""),[C,D]=v.useState(""),[I,A]=v.useState(""),[T,F]=v.useState(""),[J,H]=v.useState(!1);v.useEffect(()=>{if(t&&a){if(t.date){const[j,ne,ae]=t.date.split("-");p(new Date(parseInt(j),parseInt(ne)-1,parseInt(ae)))}m(t.time||""),w(t.location||""),_(t.message||""),D(t.gameType||""),A(t.raceLength||"")}},[t,a]);const K=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][d.getDay()],W=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][d.getDay()],O=((R=c==null?void 0:c.availability)==null?void 0:R[W])||[];console.log("EditProposalModal - Receiver player:",c),console.log("EditProposalModal - Selected day short:",W),console.log("EditProposalModal - Opponent time blocks:",O);const B=["6:00 PM - 8:00 PM","8:00 PM - 10:00 PM","10:00 PM - 12:00 AM"],U=O.length>0?O:B;console.log("EditProposalModal - Available time blocks:",U);const M=!c&&a,z=i.useMemo(()=>{if(!h)return console.log("EditProposalModal - No time selected:",h),[];console.log("EditProposalModal - Selected time block:",h);const j=aR(h);if(console.log("EditProposalModal - Normalized slot:",j),!j.includes(" - "))return console.log("EditProposalModal - No dash found in normalized slot"),[];let[ne,ae]=j.split(" - ").map(V=>nR(V.trim()));if(console.log("EditProposalModal - Normalized times:",{blockStart:ne,blockEnd:ae}),!ne||!ae)return console.log("EditProposalModal - Failed to normalize times"),[];const se=M0(ne,ae,30);return console.log("EditProposalModal - Generated start times:",se),console.log("EditProposalModal - Times array length:",se.length),se},[h]);v.useEffect(()=>{x("")},[h]);const G=async()=>{if(!b||!E){F("Please fill in all required fields.");return}H(!0),F("");try{const j=await fetch(`${Pe}/api/proposals/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:gg(d),time:b,location:E,message:S,gameType:C,raceLength:I,phase:l,divisions:[s]})}),ne=await j.json();if(!j.ok)throw new Error(ne.error||"Failed to update proposal");n&&n({...t,date:gg(d),time:b,location:E,message:S,gameType:C,raceLength:I}),e()}catch(j){F(j.message||"Failed to update proposal")}finally{H(!1)}};if(!a||!t)return null;const q=i.createElement(Rn,{open:a,onClose:e,title:"✏️ Edit Proposal",maxWidth:"400px"},i.createElement("div",{className:ue.proposalModalContent,style:{width:"100%",maxWidth:400,margin:"0 auto"}},i.createElement("div",{className:ue.proposalModalHeaderBar},i.createElement("span",{className:ue.phasePill},"Phase 1: Scheduled Match Phase"),i.createElement("span",{className:ue.divisionPill},"Division: ",s||"N/A")),i.createElement("div",{className:ue.proposalModalToRow},i.createElement("span",{className:ue.toOpponentLabel},"To Opponent:"),i.createElement("span",{className:ue.toOpponentName},t.receiverName)),i.createElement("div",{className:ue.proposalModalDayRow},i.createElement("span",{className:ue.dayLabel},"Day:"),i.createElement("span",{className:ue.dayValue},K)),i.createElement("div",{className:ue.formGroup,style:{display:"flex",flexDirection:"column",alignItems:"center"}},i.createElement("label",{htmlFor:"proposal-date",style:{marginBottom:4,textAlign:"center"}},"Date"),i.createElement("input",{id:"proposal-date",type:"date",value:gg(d),onChange:j=>{const[ne,ae,se]=j.target.value.split("-");p(new Date(parseInt(ne),parseInt(ae)-1,parseInt(se)))},className:ue.input,required:!0,style:{textAlign:"center"}})),i.createElement("div",{className:ue.proposalModalFieldRow},i.createElement("span",{className:ue.fieldLabel},"Time Block:"),M&&i.createElement("div",{style:{color:"#ff6b6b",fontSize:"0.9rem",marginBottom:"0.5rem"}},"⚠️ Opponent availability data not available. Using default time blocks."),c&&O.length===0&&i.createElement("div",{style:{color:"#ffa500",fontSize:"0.9rem",marginBottom:"0.5rem"}},"ℹ️ No availability for ",K,". Using default time blocks."),i.createElement("select",{value:h,onChange:j=>m(j.target.value),className:ue.inputField},i.createElement("option",{value:""},"Select time block"),U.map(j=>i.createElement("option",{key:j,value:j},j)))),i.createElement("div",{className:ue.proposalModalFieldRow},i.createElement("span",{className:ue.fieldLabel},"Start Time:"),i.createElement("select",{value:b,onChange:j=>x(j.target.value),className:ue.inputField},i.createElement("option",{value:""},"Select start time"),z.map(j=>i.createElement("option",{key:j,value:j},j)))),i.createElement("div",{className:ue.proposalModalFieldRow},i.createElement("span",{className:ue.fieldLabel},"Game Type:"),i.createElement("select",{value:C,onChange:j=>D(j.target.value),className:ue.inputField},i.createElement("option",{value:""},"Select game type"),i.createElement("option",{value:"8 Ball"},"8 Ball"),i.createElement("option",{value:"9 Ball"},"9 Ball"),i.createElement("option",{value:"10 Ball"},"10 Ball"),i.createElement("option",{value:"Mixed"},"Mixed"))),i.createElement("div",{className:ue.proposalModalFieldRow},i.createElement("span",{className:ue.fieldLabel},"Race Length:"),i.createElement("select",{value:I,onChange:j=>A(j.target.value),className:ue.inputField},i.createElement("option",{value:""},"Select race length"),i.createElement("option",{value:"3"},"3"),i.createElement("option",{value:"5"},"5"),i.createElement("option",{value:"7"},"7"),i.createElement("option",{value:"9"},"9"))),i.createElement("div",{className:ue.proposalModalFieldRow},i.createElement("span",{className:ue.fieldLabel},"Location:"),i.createElement("input",{type:"text",value:E,onChange:j=>w(j.target.value),placeholder:"Enter location",className:ue.inputField})),i.createElement("div",{className:ue.proposalModalFieldRow},i.createElement("span",{className:ue.fieldLabel},"Message to Opponent:"),i.createElement("textarea",{value:S,onChange:j=>_(j.target.value),placeholder:"Message to opponent",rows:3,className:ue.inputField})),T&&i.createElement("div",{className:ue.errorBox},T),i.createElement("div",{className:ue.proposalModalButtonRow},i.createElement("button",{className:ue.dashboardBtn,onClick:G,disabled:J,style:{width:"48%"}},J?"Saving...":"Save Changes"),i.createElement("button",{className:ue.dashboardBtn,onClick:e,disabled:J,style:{width:"48%"}},"Cancel"))));return du.createPortal(q,document.body)}const sR="_container_qqpwh_3",iR="_header_qqpwh_23",oR="_headerButtons_qqpwh_57",lR="_newChatButton_qqpwh_69",cR="_closeButton_qqpwh_101",uR="_content_qqpwh_133",dR="_conversationsList_qqpwh_147",fR="_loading_qqpwh_181",pR="_emptyState_qqpwh_193",mR="_startChatButton_qqpwh_215",hR="_conversationItems_qqpwh_245",gR="_conversationItem_qqpwh_245",yR="_active_qqpwh_283",bR="_conversationInfo_qqpwh_293",vR="_conversationName_qqpwh_303",xR="_lastMessage_qqpwh_321",wR="_conversationMeta_qqpwh_345",ER="_timestamp_qqpwh_361",SR="_unreadBadge_qqpwh_379",CR="_messagesArea_qqpwh_407",_R="_messagesHeader_qqpwh_421",IR="_messagesList_qqpwh_447",DR="_messageItem_qqpwh_465",kR="_myMessage_qqpwh_475",AR="_theirMessage_qqpwh_483",MR="_messageBubble_qqpwh_491",TR="_messageContent_qqpwh_527",NR="_messageTime_qqpwh_539",RR="_readStatus_qqpwh_563",LR="_noConversation_qqpwh_571",PR="_messageInput_qqpwh_591",BR="_sendButton_qqpwh_647",OR="_playerList_qqpwh_769",zR="_playerItem_qqpwh_781",UR="_selected_qqpwh_807",FR="_playerName_qqpwh_817",WR="_modalActions_qqpwh_847",jR="_cancelButton_qqpwh_861",HR="_startButton_qqpwh_893",YR="_error_qqpwh_939",yt={container:sR,header:iR,headerButtons:oR,newChatButton:lR,closeButton:cR,content:uR,conversationsList:dR,loading:fR,emptyState:pR,startChatButton:mR,conversationItems:hR,conversationItem:gR,active:yR,conversationInfo:bR,conversationName:vR,lastMessage:xR,conversationMeta:wR,timestamp:ER,unreadBadge:SR,messagesArea:CR,messagesHeader:_R,messagesList:IR,messageItem:DR,myMessage:kR,theirMessage:AR,messageBubble:MR,messageContent:TR,messageTime:NR,readStatus:RR,noConversation:LR,messageInput:PR,sendButton:BR,playerList:OR,playerItem:zR,selected:UR,playerName:FR,modalActions:WR,cancelButton:jR,startButton:HR,error:YR};console.log("DirectMessagingModal BACKEND_URL in use:",Pe);function GR({userName:t,userEmail:a,userPin:e,selectedDivision:n,opponentEmails:s=[],onClose:l}){console.log("Opponent Emails:",s);const[c,d]=v.useState([]),[p,h]=v.useState(null),[m,b]=v.useState([]),[x,E]=v.useState(""),[w,S]=v.useState(!1),[_,C]=v.useState(!1),[D,I]=v.useState(""),[A,T]=v.useState([]),[F,J]=v.useState(!1),[H,Z]=v.useState(null),K=v.useRef(null);v.useEffect(()=>{async function M(){try{const G=await(await fetch(`${Pe}/api/users`)).json();Array.isArray(G)&&T(G.filter(q=>q.email!==a))}catch(z){console.error("Failed to load players:",z)}}M()},[a]),v.useEffect(()=>{async function M(){S(!0);try{const G=await(await fetch(`${Pe}/api/messages/conversations?user=${encodeURIComponent(a)}`)).json();console.log("Conversations fetch data:",G),Array.isArray(G)&&d(G)}catch(z){console.error("Failed to load conversations:",z),I("Failed to load conversations")}finally{S(!1)}}M()},[a]),v.useEffect(()=>{if(!p){b([]);return}async function M(){try{const G=await(await fetch(`${Pe}/api/messages?user1=${encodeURIComponent(a)}&user2=${encodeURIComponent(p.email)}`)).json();Array.isArray(G)&&(b(G),G.forEach(q=>{q.receiverEmail===a&&!q.read&&fetch(`${Pe}/api/messages/${q._id}/read`,{method:"PUT"})}))}catch(z){console.error("Failed to load messages:",z),I("Failed to load messages")}}M()},[p,a]),v.useEffect(()=>{K.current&&K.current.scrollIntoView({behavior:"smooth"})},[m]);const X=async()=>{if(!x.trim()||!p)return;C(!0),I("");let M=p.email;if(!M){const z=A.find(G=>G.name===p.name&&G.email);z&&(M=z.email)}if(console.log("Sending message to:",M),!M){I("No email found for selected opponent."),C(!1);return}try{const z=await fetch(`${Pe}/api/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderEmail:a,receiverEmail:M,content:x})});if(console.log("Send response:",z),!z.ok)throw new Error("Failed to send message");E("");const q=await(await fetch(`${Pe}/api/messages?user1=${encodeURIComponent(a)}&user2=${encodeURIComponent(M)}`)).json();Array.isArray(q)&&b(q)}catch(z){I(z.message||"Failed to send message")}finally{C(!1)}},W=async()=>{H&&(h(H),J(!1),Z(null))},O=M=>M.unreadCount||0,B=M=>{const z=new Date(M),q=(new Date-z)/(1e3*60*60);return q<24?z.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):q<48?"Yesterday":z.toLocaleDateString()},U=A.filter(M=>s.length>0?s.includes(M.name):n?Array.isArray(M.divisions)?M.divisions.includes(n):typeof M.divisions=="string"?M.divisions.split(",").map(z=>z.trim()).includes(n):!1:!0).sort((M,z)=>{const G=`${M.name||""}`.trim().toLowerCase(),q=`${z.name||""}`.trim().toLowerCase();return G.localeCompare(q)});return i.createElement("div",{className:yt.container},i.createElement("div",{className:yt.header},i.createElement("h2",null,"Direct Messages"),i.createElement("div",{className:yt.headerButtons},i.createElement("button",{className:yt.newChatButton,onClick:()=>J(!0),type:"button"},"💬 New Chat"),i.createElement("button",{className:yt.closeButton,onClick:l,type:"button"},"×"))),i.createElement("div",{className:yt.content},i.createElement("div",{className:yt.conversationsList},i.createElement("h3",null,"Conversations"),w?i.createElement("div",{className:yt.loading},"Loading conversations..."):c.length===0?i.createElement("div",{className:yt.emptyState},i.createElement("p",null,"No conversations yet"),i.createElement("button",{className:yt.startChatButton,onClick:()=>J(!0),type:"button"},"Start a conversation")):i.createElement("div",{className:yt.conversationItems},c.map(M=>i.createElement("div",{key:M.email,className:`${yt.conversationItem} ${(p==null?void 0:p.email)===M.email?yt.active:""}`,onClick:()=>h(M)},i.createElement("div",{className:yt.conversationInfo},i.createElement("div",{className:yt.conversationName},M.name||M.email),i.createElement("div",{className:yt.lastMessage},M.lastMessage||"No messages yet")),i.createElement("div",{className:yt.conversationMeta},i.createElement("div",{className:yt.timestamp},M.lastMessageTime?B(M.lastMessageTime):""),O(M)>0&&i.createElement("div",{className:yt.unreadBadge},O(M))))))),i.createElement("div",{className:yt.messagesArea},p?i.createElement(i.Fragment,null,i.createElement("div",{className:yt.messagesHeader},i.createElement("h3",null,"Chat with ",p.name||p.email)),i.createElement("div",{className:yt.messagesList},m.map(M=>i.createElement("div",{key:M._id,className:`${yt.messageItem} ${M.senderEmail===a?yt.myMessage:yt.theirMessage}`},i.createElement("div",{className:yt.messageBubble},i.createElement("div",{className:yt.messageContent},M.content),i.createElement("div",{className:yt.messageTime},B(M.timestamp),M.senderEmail===a&&i.createElement("span",{className:yt.readStatus},M.read?"✓✓":"✓"))))),i.createElement("div",{ref:K})),i.createElement("div",{className:yt.messageInput},i.createElement("input",{type:"text",value:x,onChange:M=>E(M.target.value),onKeyDown:M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),X())},placeholder:"Type a message...",disabled:_}),i.createElement("button",{onClick:X,disabled:_||!x.trim(),className:yt.sendButton,type:"button"},"Send"))):i.createElement("div",{className:yt.noConversation},i.createElement("p",null,"Select a conversation to start messaging")))),F&&i.createElement(Rn,{open:F,onClose:()=>{J(!1),Z(null)},title:"Start New Conversation",maxWidth:"400px"},i.createElement("button",{style:{position:"absolute",top:10,right:10,background:"none",border:"none",color:"#fff",fontSize:24,cursor:"pointer",zIndex:10001},onClick:()=>{J(!1),Z(null)},"aria-label":"Close",type:"button"},"×"),i.createElement("div",{className:yt.playerList},U.map(M=>i.createElement("div",{key:M._id||M.email,className:`${yt.playerItem} ${(H==null?void 0:H.email)===M.email?yt.selected:""}`,onClick:()=>Z(M)},i.createElement("div",{className:yt.playerName},M.name?M.name:M.email)))),i.createElement("div",{className:yt.modalActions},i.createElement("button",{onClick:()=>{J(!1),Z(null)},className:yt.cancelButton,type:"button"},"Cancel"),i.createElement("button",{onClick:W,disabled:!H,className:yt.startButton,type:"button"},"Start Chat"))),D&&i.createElement("div",{className:yt.error},D))}const $R="_customChannelHeader_1kvzt_1",ZR="_customChannelHeaderIcon_1kvzt_51",qR="_customChannelHeaderTitle_1kvzt_61",QR="_customChannelHeaderDate_1kvzt_71",VR="_customChannelHeaderOnline_1kvzt_83",XR="_customChannelHeaderOnlineLabel_1kvzt_97",KR="_customChannelHeaderNone_1kvzt_109",JR="_customChannelHeaderAvatar_1kvzt_119",bi={customChannelHeader:$R,customChannelHeaderIcon:ZR,customChannelHeaderTitle:qR,customChannelHeaderDate:QR,customChannelHeaderOnline:VR,customChannelHeaderOnlineLabel:XR,customChannelHeaderNone:KR,customChannelHeaderAvatar:JR};function eL(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[l,c,d]=t.split("-"),p=new Date(parseInt(l),parseInt(c)-1,parseInt(d)),h=String(p.getMonth()+1).padStart(2,"0"),m=String(p.getDate()).padStart(2,"0"),b=p.getFullYear();return`${h}-${m}-${b}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const l=t.split("/");if(l.length===3){const[c,d,p]=l;a=new Date(p,c-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}function tL(t){if(!t)return"";const a=t.trim().split(" ");if(a.length===1){const e=a[0].split(/[^a-zA-Z0-9]/).filter(Boolean);return e.length>1?(e[0][0]+e[1][0]).toUpperCase():a[0].slice(0,2).toUpperCase()}return(a[0][0]+a[a.length-1][0]).toUpperCase()}function nL({channel:t,currentUser:a}){var c,d,p;const e=((c=t==null?void 0:t.data)==null?void 0:c.name)||(t==null?void 0:t.id)||"General Chat",n=(d=t==null?void 0:t.data)==null?void 0:d.matchDate,s=a==null?void 0:a.id,l=(p=t==null?void 0:t.state)!=null&&p.members?Object.values(t.state.members).filter(h=>{var m,b;return((m=h.user)==null?void 0:m.online)||((b=h.user)==null?void 0:b.id)===s}).map(h=>{var m,b;return((m=h.user)==null?void 0:m.name)||((b=h.user)==null?void 0:b.id)}).filter(Boolean):[(a==null?void 0:a.name)||(a==null?void 0:a.id)].filter(Boolean);return i.createElement("div",{className:bi.customChannelHeader,style:{width:"100%",margin:"0",borderRadius:"0",marginTop:"0",marginBottom:"0"}},i.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",width:"100%"}},i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.8em",fontSize:"1.1em",textAlign:"center",width:"100%"}},i.createElement("span",{className:bi.customChannelHeaderIcon},"💬"),i.createElement("span",{style:{textAlign:"center"}},"You're in the"," ",i.createElement("span",{className:bi.customChannelHeaderTitle},'"',e,'"')," ","channel."),n&&i.createElement("span",{className:bi.customChannelHeaderDate},"Match Date: ",eL(n))),i.createElement("div",{className:bi.customChannelHeaderOnline},i.createElement("span",{className:bi.customChannelHeaderOnlineLabel},"Online:"),l.length===0&&i.createElement("span",{className:bi.customChannelHeaderNone},"No one online"),l.map(h=>i.createElement("span",{key:h,className:bi.customChannelHeaderAvatar,title:h},tL(h))))))}const JE={async getUser(t){return Nn.get(`/api/users/${encodeURIComponent(t)}`)},async syncUsers(){return Nn.post("/admin/sync-users")}};class aL{async getCurrentSeason(a){try{const e=await fetch(`${Pe}/api/seasons/current/${encodeURIComponent(a)}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){return console.error("Error fetching current season:",e),null}}async getCurrentPhaseAndWeek(a){try{const e=await fetch(`${Pe}/api/seasons/phase/${encodeURIComponent(a)}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){return console.error("Error fetching current phase and week:",e),{currentWeek:null,phase:"offseason",isActive:!1,season:null}}}async getAllSeasons(a){try{const e=await fetch(`${Pe}/api/seasons/${encodeURIComponent(a)}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){return console.error("Error fetching all seasons:",e),[]}}isMatchWithinPhase1Deadline(a,e){if(!e||!e.phase1End)return!0;const n=new Date(a),s=new Date(e.phase1End);return n<=s}getDaysUntilPhase1Deadline(a){if(!a||!a.phase1End)return null;const e=new Date,s=new Date(a.phase1End)-e;return Math.ceil(s/(1e3*60*60*24))}hasPhase1DeadlinePassed(a){if(!a||!a.phase1End)return!1;const e=new Date,n=new Date(a.phase1End);return e>n}hasPhase2Started(a){if(!a||!a.phase2Start)return!1;const e=new Date,n=new Date(a.phase2Start);return e>=n}getDaysUntilPhase2Deadline(a){if(!a||!a.phase2End)return null;const e=new Date,s=new Date(a.phase2End)-e;return Math.ceil(s/(1e3*60*60*24))}hasPhase2DeadlinePassed(a){if(!a||!a.phase2End)return!1;const e=new Date,n=new Date(a.phase2End);return e>n}getCurrentPhaseFromDates(a){if(!a)return"offseason";const e=new Date,n=new Date(a.phase1Start),s=new Date(a.phase1End),l=new Date(a.phase2Start),c=new Date(a.phase2End);return e<n?"offseason":e>=n&&e<=s?"scheduled":e>=l&&e<=c?"challenge":e>c?"completed":"transition"}}const Mi=new aL;function rL({userName:t,userEmail:a,userPin:e,onClose:n,fromChat:s=!1}){const[l,c]=v.useState([]),[d,p]=v.useState(!0),[h,m]=v.useState(""),[b,x]=v.useState("scheduled"),[E,w]=v.useState(!1),[S,_]=v.useState(!1),[C,D]=v.useState(!1),[I,A]=v.useState(!1),[T,F]=v.useState(null),[J,H]=v.useState(null),[Z,K]=v.useState([]),[X,W]=v.useState([]),[O,B]=v.useState(!1);v.useEffect(()=>{a&&JE.getUser(a).then(j=>{let ne=[];Array.isArray(j.divisions)?ne=j.divisions.map(ae=>ae.trim()).filter(Boolean):typeof j.divisions=="string"?ne=j.divisions.split(",").map(ae=>ae.trim()).filter(Boolean):ne=[],c(ne),p(!1)}).catch(()=>{c([]),p(!1)})},[a]);const U=async j=>{B(!0);try{const ne=`schedule_${j.replace(/[^A-Za-z0-9]/g,"_")}.json`,ae=Date.now(),se=`${Pe}/static/${ne}?t=${ae}`,V=await fetch(se,{method:"GET",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!V.ok)throw new Error("Schedule not found");const pe=await V.json();K(pe);const Ie=await fetch(`${Pe}/api/users/search?approved=true&division=${encodeURIComponent(j)}`,{method:"GET",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!Ie.ok)throw new Error("Players not found");const fe=await Ie.json();W(fe.users||[])}catch(ne){console.error("Failed to load schedule data:",ne),K([]),W([])}finally{B(!1)}},M=async j=>{m(j);try{const ne=await Mi.getCurrentPhaseAndWeek(j),ae=(ne==null?void 0:ne.phase)||"scheduled";x(ae),ae==="scheduled"||ae==="offseason"?(await U(j),w(!0)):_(!0)}catch(ne){console.error("Error fetching phase data:",ne),_(!0)}},z=()=>{if(!Z.length||!X.length||!h)return[];const j=`${t}`,ne=[];for(const V of Z)if(V.player1&&V.player2&&!V.scheduled){const pe=V.player1.trim(),Ie=V.player2.trim();(pe.toLowerCase()===j.toLowerCase()||Ie.toLowerCase()===j.toLowerCase())&&ne.push(V)}const ae=X.filter(V=>V.divisions&&V.divisions.includes(h));return ne.map(V=>{var fe,Fe;const pe=V.player1&&V.player1.trim().toLowerCase()===j.toLowerCase()?(fe=V.player2)==null?void 0:fe.trim():(Fe=V.player1)==null?void 0:Fe.trim();if(!pe)return null;const Ie=ae.find(Ve=>Ve.name&&Ve.name.trim().toLowerCase()===pe.toLowerCase());return{match:V,player:Ie,opponentName:pe}}).filter(Boolean)},G=async j=>{const ae=X.filter(se=>se.divisions&&se.divisions.includes(h)).find(se=>se.name&&se.name.trim().toLowerCase()===j.trim().toLowerCase());if(!ae){alert("Player data not found for: "+j);return}if(!ae.email){alert("This opponent does not have an email on file and cannot be proposed a match.");return}if(s){try{const se=await fetch(`${Pe}/api/users/search?approved=true`);if(!se.ok)throw new Error("Failed to fetch players from database");const pe=(await se.json()).users.find(Ie=>`${Ie.firstName} ${Ie.lastName}`.trim().toLowerCase()===j.trim().toLowerCase());if(pe){const Ie=typeof pe.availability=="string"?Lg(pe.availability):pe.availability,fe={...pe,availability:Ie};F(fe)}else F(ae)}catch(se){console.error("Error fetching detailed player data:",se),F(ae)}w(!1),D(!0)}else w(!1),_(!0)},q=(j,ne,ae,se)=>{H({day:j,slot:ne,phase:ae,division:se,opponent:T}),D(!1),A(!0)},R=()=>{w(!1),_(!1),D(!1),A(!1),F(null),H(null),m(""),n()};return d?i.createElement(Rn,{open:!0,onClose:n,title:"Loading Divisions...",maxWidth:"500px"},i.createElement("div",{style:{textAlign:"center",padding:"2rem"}},i.createElement("p",null,"Please wait while we load your divisions..."))):l.length===0?i.createElement(Rn,{open:!0,onClose:n,title:"No Divisions Found",maxWidth:"500px"},i.createElement("div",{style:{textAlign:"center",padding:"2rem"}},i.createElement("p",null,"You are not registered for any divisions. Please contact an administrator."),i.createElement("button",{onClick:n,style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"0.8rem 1.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",marginTop:"1rem"},onMouseEnter:j=>{j.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",j.target.style.transform="translateY(-2px)",j.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:j=>{j.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",j.target.style.transform="translateY(0)",j.target.style.boxShadow="none"}},"Close"))):i.createElement(i.Fragment,null,!E&&!S&&i.createElement(Rn,{open:!0,onClose:n,title:"Select Division",maxWidth:"500px"},i.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},i.createElement("p",{style:{color:"#fff",textAlign:"center",marginBottom:"1.5rem",fontSize:"1rem"}},"Choose a division to schedule a match:"),i.createElement("div",{style:{display:"grid",gap:"12px"}},l.map(j=>i.createElement("button",{key:j,onClick:()=>M(j),style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem 1.5rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:ne=>{ne.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",ne.target.style.transform="translateY(-2px)",ne.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:ne=>{ne.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",ne.target.style.transform="translateY(0)",ne.target.style.boxShadow="none"}},"🏆 ",j))))),E&&(O?i.createElement(Rn,{open:!0,onClose:R,title:"Loading Opponents...",maxWidth:"500px"},i.createElement("div",{style:{textAlign:"center",padding:"2rem"}},i.createElement("p",null,"Please wait while we load your scheduled opponents..."))):i.createElement(Hw,{open:E,onClose:R,opponents:z(),onOpponentClick:G,phase:b})),S&&i.createElement(n0,{onClose:R,excludeName:t,senderName:t,senderEmail:a,onProposalComplete:()=>{R()},selectedDivision:h,phase:b}),C&&T&&i.createElement(_p,{open:C,onClose:R,player:T,senderName:t,senderEmail:a,selectedDivision:h,onProposeMatch:q,phase:b}),I&&J&&i.createElement(Rp,{open:I,onClose:R,player:J.opponent,day:J.day,slot:J.slot,senderName:t,senderEmail:a,selectedDivision:J.division,phase:J.phase,onProposalComplete:()=>{R()}}))}const sL="_outerChatBg_4cwjy_29",iL="_chatContainer_4cwjy_85",oL="_topNavBar_4cwjy_125",lL="_chatGreeting_4cwjy_169",cL="_buttonRow_4cwjy_193",uL="_topChatButton_4cwjy_207",dL="_logoutWithTimer_4cwjy_297",fL="_timerBox_4cwjy_311",pL="_sectionHeader_4cwjy_339",mL="_channelListRow_4cwjy_411",hL="_announcements_4cwjy_411",gL="_divisions_4cwjy_421",yL="_gameButton_4cwjy_473",bL="_mainChatArea_4cwjy_509",vL="_mainChatWindow_4cwjy_527",xL="_poolBackground_4cwjy_587",wL="_chatContent_4cwjy_661",EL="_sidebar_4cwjy_675",SL="_hamburgerButton_4cwjy_729",CL="_hamburgerIcon_4cwjy_777",_L="_sidebarBackdrop_4cwjy_787",IL="_closeSidebarButton_4cwjy_813",DL="_mobileNavButtons_4cwjy_861",kL="_mobileNavButton_4cwjy_861",AL="_mobileTimerBox_4cwjy_923",ML="_generalChannelRow_4cwjy_949",TL="_active_4cwjy_1015",NL="_channelListName_4cwjy_1027",RL="_pinIcon_4cwjy_1039",LL="_pinned_4cwjy_1067",PL="_noPinnedChannels_4cwjy_1077",BL="_noChannelsFound_4cwjy_1079",OL="_sidebarSearch_4cwjy_1101",zL="_channelListWrapper_4cwjy_1181",UL="_customMessageUi_4cwjy_1225",FL="_onlineDot_4cwjy_1263",WL="_online_4cwjy_1263",jL="_messageContent_4cwjy_1319",HL="_messageUsername_4cwjy_1337",YL="_messageText_4cwjy_1357",GL="_loadingContainer_4cwjy_1377",$L="_spinner_4cwjy_1391",ZL="_spin_4cwjy_1391",qL="_open_4cwjy_1533",QL="_messagesArea_4cwjy_1775",VL="_messageInputContainer_4cwjy_1783",XL="_messageInput_4cwjy_1783",KL="_sendButton_4cwjy_1805",JL="_messageItem_4cwjy_1945",eP="_messageItemLeft_4cwjy_2591",tP="_messageItemRight_4cwjy_2601",nP="_messageListBackground_4cwjy_2615",aP="_poolTableImg_4cwjy_2645",rP="_poolTableSvg_4cwjy_2647",sP="_channelNamePreview_4cwjy_2675",iP="_messageHeader_4cwjy_3619",oP="_messageAuthor_4cwjy_3633",lP="_messageTime_4cwjy_3647",cP="_chatHeader_4cwjy_3885",uP="_chatMessages_4cwjy_3895",dP="_message_4cwjy_1319",fP="_sent_4cwjy_4001",pP="_received_4cwjy_4013",mP="_messageSender_4cwjy_4067",hP="_sending_4cwjy_4591",gP="_error_4cwjy_4607",yP="_typingIndicator_4cwjy_4619",bP="_messageGroup_4cwjy_4641",vP="_scrollToBottom_4cwjy_4719",Je={outerChatBg:sL,chatContainer:iL,topNavBar:oL,chatGreeting:lL,buttonRow:cL,topChatButton:uL,logoutWithTimer:dL,timerBox:fL,sectionHeader:pL,channelListRow:mL,announcements:hL,divisions:gL,"game-rooms":"_game-rooms_4cwjy_431",gameButton:yL,mainChatArea:bL,mainChatWindow:vL,poolBackground:xL,chatContent:wL,sidebar:EL,hamburgerButton:SL,hamburgerIcon:CL,sidebarBackdrop:_L,closeSidebarButton:IL,mobileNavButtons:DL,mobileNavButton:kL,mobileTimerBox:AL,generalChannelRow:ML,active:TL,channelListName:NL,pinIcon:RL,pinned:LL,noPinnedChannels:PL,noChannelsFound:BL,sidebarSearch:OL,channelListWrapper:zL,customMessageUi:UL,onlineDot:FL,online:WL,messageContent:jL,messageUsername:HL,messageText:YL,loadingContainer:GL,spinner:$L,spin:ZL,"str-chat__send-button":"_str-chat__send-button_4cwjy_1423",open:qL,messagesArea:QL,messageInputContainer:VL,messageInput:XL,sendButton:KL,messageItem:JL,messageItemLeft:eP,messageItemRight:tP,messageListBackground:nP,poolTableImg:aP,poolTableSvg:rP,"str-chat__main-panel":"_str-chat__main-panel_4cwjy_2663",channelNamePreview:sP,"str-chat":"_str-chat_4cwjy_1423","str-chat__container":"_str-chat__container_4cwjy_2727","str-chat__messenger":"_str-chat__messenger_4cwjy_2737","str-chat__messenger--main":"_str-chat__messenger--main_4cwjy_2747","str-chat__messenger--main-panel":"_str-chat__messenger--main-panel_4cwjy_2757","str-chat__messenger--main-panel-inner":"_str-chat__messenger--main-panel-inner_4cwjy_2767","str-chat__messenger--main-panel-inner-content":"_str-chat__messenger--main-panel-inner-content_4cwjy_2777","str-chat__messenger--main-panel-inner-content-inner":"_str-chat__messenger--main-panel-inner-content-inner_4cwjy_2787","str-chat__messenger--main-panel-inner-content-inner-inner":"_str-chat__messenger--main-panel-inner-content-inner-inner_4cwjy_2797","str-chat__message-list":"_str-chat__message-list_4cwjy_2809","str-chat__input-flat--wrapper":"_str-chat__input-flat--wrapper_4cwjy_2819","str-chat__input-flat":"_str-chat__input-flat_4cwjy_2819","str-chat__channel-header":"_str-chat__channel-header_4cwjy_2841","str-chat__thread":"_str-chat__thread_4cwjy_2853","str-chat__window":"_str-chat__window_4cwjy_2865","str-chat__channel":"_str-chat__channel_4cwjy_2841","str-chat__message":"_str-chat__message_4cwjy_2809","str-chat__message-text":"_str-chat__message-text_4cwjy_2939","str-chat__message-author":"_str-chat__message-author_4cwjy_2953","str-chat__message-timestamp":"_str-chat__message-timestamp_4cwjy_2969","str-chat__channel-header-title":"_str-chat__channel-header-title_4cwjy_3117","str-chat__channel-header-info":"_str-chat__channel-header-info_4cwjy_3139","str-chat__thread-header":"_str-chat__thread-header_4cwjy_3159","str-chat__thread-start":"_str-chat__thread-start_4cwjy_3171","str-chat__typing-indicator":"_str-chat__typing-indicator_4cwjy_3191","str-chat__avatar":"_str-chat__avatar_4cwjy_3209","str-chat__avatar-fallback":"_str-chat__avatar-fallback_4cwjy_3219","str-chat__channel-list":"_str-chat__channel-list_4cwjy_3253","str-chat__channel-list-messenger":"_str-chat__channel-list-messenger_4cwjy_3263","str-chat__channel-preview-messenger":"_str-chat__channel-preview-messenger_4cwjy_3271","str-chat__channel-preview-messenger--active":"_str-chat__channel-preview-messenger--active_4cwjy_3299","str-chat__channel-preview-messenger--title":"_str-chat__channel-preview-messenger--title_4cwjy_3311","str-chat__channel-preview-messenger--subtitle":"_str-chat__channel-preview-messenger--subtitle_4cwjy_3323",messageHeader:iP,messageAuthor:oP,messageTime:lP,chatHeader:cP,chatMessages:uP,message:dP,sent:fP,received:pP,messageSender:mP,sending:hP,error:gP,typingIndicator:yP,messageGroup:bP,scrollToBottom:vP},xP="nbvut8j4y6se",ix=Pe,ox="general",wP="announcements";let qd=!1;const EP=["FRBCAPL TEST","Singles Test"],lx={GENERAL:"general",DIVISIONS:"divisions",ANNOUNCEMENTS:"announcements",GAME_ROOMS:"game-rooms"};function cx(t){return t.toLowerCase().replace(/[^a-z0-9_-]/g,"")}const SP=({channel:t})=>{var a;return i.createElement("div",{className:Je.channelNamePreview},((a=t.data)==null?void 0:a.name)||t.id)};function CP(){return JSON.parse(localStorage.getItem("pinnedChannels")||"[]")}function _P(t){localStorage.setItem("pinnedChannels",JSON.stringify(t))}const IP=({pinned:t,onClick:a})=>i.createElement("span",{onClick:a,className:`${Je.pinIcon}${t?" "+Je.pinned:""}`,title:t?"Unpin channel":"Pin channel"},t?"📌":"📍"),yg=({children:t,icon:a})=>i.createElement("div",{className:Je.sectionHeader},a&&i.createElement("span",{style:{marginRight:"8px"}},a),t);function eS({userName:t,userEmail:a,userPin:e,channelId:n,onClose:s}){var Ie;const l=xo(),[c,d]=v.useState(!1),[p,h]=v.useState(null),[m,b]=v.useState(null),[x,E]=v.useState(null),[w,S]=v.useState({}),[_,C]=v.useState([]),[D,I]=v.useState(null),[A,T]=v.useState(CP()),[F,J]=v.useState(!1),[H,Z]=v.useState(!1),[K,X]=v.useState(1800),[W,O]=v.useState(""),[B,U]=v.useState([]),[M,z]=v.useState(""),[G,q]=v.useState(!0);v.useEffect(()=>{if(K<=0){R();return}const fe=setInterval(()=>{X(Fe=>Fe-1)},1e3);return()=>clearInterval(fe)},[K]),v.useEffect(()=>{if(qd){console.log("Global connection already in progress, skipping...");return}qd=!0;let fe=V0.getInstance(xP),Fe=!1,Ve=!0;async function He(){console.log("Starting chat initialization...");try{if(fe.userID){console.log("Already connected as:",fe.userID);try{await fe.disconnectUser(),console.log("Disconnected existing user")}catch(pt){console.log("Disconnect error (ignored):",pt.message)}}await new Promise(pt=>setTimeout(pt,300)),console.log("Delay completed, proceeding with token request...");const Qe=cx(a);console.log("Cleaned userId:",Qe),console.log("Making token request to:",`${ix}/token`);const ut=await fetch(`${ix}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:Qe})});console.log("Token response status:",ut.status);const{token:Pt,userId:xt}=await ut.json();if(console.log("Token received for userId:",xt),console.log("Connecting user to Stream Chat..."),console.log("Using actualUserId for connection:",xt),await fe.connectUser({id:xt,name:t,email:a},Pt),console.log("User connected successfully!"),Fe=!0,!Ve)return;console.log("Setting chat client..."),h(fe),console.log("Creating general channel...");const Hn=fe.channel("messaging",ox,{name:"General Chat",description:"General discussion for all players"});console.log("General channel object created, now watching..."),await Hn.watch({limit:30}),console.log("General channel created and watched"),console.log("Creating announcements channel...");const Kt=fe.channel("messaging",wP,{name:"📢 Announcements",description:"Important announcements and updates"});try{await Kt.watch({limit:30}),console.log("Announcements channel created and watched")}catch(pt){console.log("Could not load announcements channel:",pt.message)}console.log("Creating division channels...");const Yn={};for(const pt of EP){const de=cx(pt),nt=fe.channel("messaging",`division-${de}`,{name:`🏆 ${pt}`,description:`Discussion for ${pt} players`,category:lx.DIVISIONS});try{await nt.watch({limit:30}),Yn[pt]=nt,console.log(`Division channel created: ${pt}`)}catch(Ye){console.log(`Could not load division channel ${pt}:`,Ye.message)}}console.log("Creating game room channels...");const Zn=[];for(let pt=1;pt<=5;pt++){const de=`game-room-${pt}`,nt=fe.channel("messaging",de,{name:`🎮 Game Room ${pt}`,description:`Multiplayer game room ${pt} - for future online play`,category:lx.GAME_ROOMS});try{await nt.watch({limit:30}),Zn.push(nt),console.log(`Game room ${pt} created`)}catch(Ye){console.log(`Could not load game room ${pt}:`,Ye.message)}}console.log("Setting up channel states..."),Ve&&(b(Hn),E(Kt),S(Yn),C(Zn),I(Hn),console.log("Setting loading to false..."),q(!1),console.log("Chat initialization complete!"))}catch(Qe){console.error("Error initializing chat:",Qe),console.error("Error details:",{message:Qe.message,stack:Qe.stack,name:Qe.name}),Ve&&q(!1)}finally{qd=!1}}return He(),()=>{if(Ve=!1,fe&&Fe)try{fe.disconnectUser()}catch(Qe){console.log("Error during cleanup disconnect:",Qe.message)}qd=!1}},[a,t]),v.useEffect(()=>{_P(A)},[A]),v.useEffect(()=>{if(console.log("Channel changed:",D),D){const fe=D.state.messages||[];console.log("Channel messages:",fe),U(fe);const Fe=He=>{console.log("New message received:",He);const Qe=D.state.messages||[];console.log("Updated messages from new message:",Qe),U([...Qe])},Ve=()=>{console.log("Channel state updated");const He=D.state.messages||[];console.log("Updated messages from state update:",He),U([...He])};return D.on("message.new",Fe),D.on("message.updated",Ve),D.on("message.deleted",Ve),()=>{D.off("message.new",Fe),D.off("message.updated",Ve),D.off("message.deleted",Ve)}}else console.log("No channel available"),U([])},[D]);function R(){p&&p.disconnectUser(),localStorage.clear(),s?s():(l("/"),window.location.reload())}function j(){console.log("Schedule Match button clicked"),Z(!0)}const ne=async()=>{if(console.log("Send message called with:",M),console.log("Channel:",D),!M.trim()){console.log("Message is empty, returning");return}if(!D){console.log("No channel available, returning");return}try{console.log("Sending message to channel...");const fe=await D.sendMessage({text:M});console.log("Message sent successfully:",fe),z("")}catch(fe){console.error("Error sending message:",fe)}},ae=fe=>{fe.key==="Enter"&&!fe.shiftKey&&(fe.preventDefault(),ne())};if(G)return i.createElement("div",{className:Je.loadingContainer},i.createElement("div",{className:Je.spinner}),i.createElement("div",null,"Loading chat...Please wait"));(Ie=p==null?void 0:p.user)==null||Ie.id;const se=Math.floor(K/60),V=K%60,pe=(fe,Fe=null)=>!fe||!fe.cid?null:i.createElement("div",{key:fe.cid,className:`${Je.channelListRow} ${Fe?Je[Fe]:""} ${(D==null?void 0:D.id)===fe.id?Je.active:""}`,onClick:()=>{I(fe),d(!1)}},i.createElement("div",{className:Je.channelListName},i.createElement(SP,{channel:fe})),i.createElement(IP,{pinned:A.includes(fe.id),onClick:Ve=>{Ve.stopPropagation();let He;A.includes(fe.id)?He=A.filter(Qe=>Qe!==fe.id):He=[...A,fe.id],T(He)}}));return i.createElement("div",{className:Je.outerChatBg},i.createElement("div",{className:Je.chatContainer},i.createElement("button",{className:Je.hamburgerButton,onClick:()=>d(!0),"aria-label":"Open channel list"},i.createElement("span",{className:Je.hamburgerIcon},"☰")),c&&i.createElement("div",{className:Je.sidebarBackdrop,onClick:()=>d(!1)}),i.createElement("div",{className:Je.topNavBar},i.createElement("div",{className:Je.buttonRow},i.createElement("button",{className:Je.topChatButton,onClick:()=>{s?s():(l("/"),window.location.reload())}},"Dashboard"),i.createElement("button",{className:Je.topChatButton,onClick:j},"Schedule a Match")),i.createElement("span",{className:Je.chatGreeting},"Hello, ",t,"!"),i.createElement("div",{className:Je.logoutWithTimer},i.createElement("button",{className:Je.topChatButton,onClick:R},"Logout"),i.createElement("span",{className:Je.timerBox},"Auto Logout: ",se,":",V.toString().padStart(2,"0")))),i.createElement("div",{className:Je.mainChatArea},i.createElement("div",{className:`${Je.sidebar} ${c?Je.open:""}`},i.createElement("button",{className:Je.closeSidebarButton,onClick:()=>d(!1),"aria-label":"Close channel list"},"×"),i.createElement("div",{className:Je.mobileNavButtons},i.createElement("button",{className:Je.mobileNavButton,onClick:()=>{s?s():(l("/"),window.location.reload()),d(!1)}},"🏠 Dashboard"),i.createElement("button",{className:Je.mobileNavButton,onClick:()=>{j(),d(!1)}},"📅 Schedule a Match"),i.createElement("button",{className:Je.mobileNavButton,onClick:()=>{R(),d(!1)}},"🚪 Logout"),i.createElement("div",{className:Je.mobileTimerBox},"Auto Logout: ",se,":",V.toString().padStart(2,"0"))),i.createElement("div",{className:`${Je.generalChannelRow}${(D==null?void 0:D.id)===ox?" "+Je.active:""}`,onClick:()=>{I(m),d(!1)}},i.createElement("span",{style:{marginRight:8}},"#")," General Chat"),i.createElement("div",{className:Je.sidebarSearch},i.createElement("input",{type:"text",placeholder:"Search channels...",value:W,onChange:fe=>O(fe.target.value)})),i.createElement("div",{className:Je.channelListWrapper},i.createElement(yg,{icon:"📢"},"Announcements"),x&&pe(x,"announcements"),i.createElement(yg,{icon:"🏆"},"Division Channels"),Object.values(w).map(fe=>pe(fe,"divisions")),i.createElement(yg,{icon:"🎮"},"Game Rooms"),_.map(fe=>pe(fe,"game-rooms")),i.createElement("div",{className:`${Je.channelListRow} ${Je.gameButton}`,onClick:()=>{l("/tenball"),d(!1)}},i.createElement("span",{style:{marginRight:8}},"🎯"),"Play Pool Game"))),i.createElement("div",{className:Je.mainChatWindow},i.createElement("div",{className:Je.poolBackground},i.createElement(Df,null)),D&&i.createElement(i.Fragment,null,i.createElement(nL,{channel:D,currentUser:p==null?void 0:p.user}),i.createElement("div",{className:Je.messagesArea},B.map(fe=>{var Qe,ut,Pt,xt;const Fe=(Qe=fe.user)==null?void 0:Qe.id,Ve=(ut=p==null?void 0:p.user)==null?void 0:ut.id;let He=Fe===Ve;if(!He&&Fe&&Ve){const Hn=Fe.replace(/_\d+$/,"");He=Ve.startsWith(Hn)}return i.createElement("div",{key:fe.id,className:`${Je.messageItem} ${He?Je.messageItemRight:Je.messageItemLeft}`},i.createElement("div",{className:Je.messageHeader},i.createElement("span",{className:Je.messageAuthor},((Pt=fe.user)==null?void 0:Pt.name)||((xt=fe.user)==null?void 0:xt.id)),i.createElement("span",{className:Je.messageTime},new Date(fe.created_at).toLocaleTimeString())),i.createElement("div",{className:Je.messageText},fe.text))})),i.createElement("div",{className:Je.messageInputContainer},i.createElement("input",{type:"text",value:M,onChange:fe=>z(fe.target.value),onKeyPress:ae,placeholder:"Type your message...",className:Je.messageInput}),i.createElement("button",{onClick:ne,className:Je.sendButton,disabled:!M.trim()},"🚀 Send"))))),H&&i.createElement(rL,{userName:t,userEmail:a,userPin:e,onClose:()=>Z(!1),fromChat:!0})))}const DP=({isMobile:t})=>i.createElement("div",{style:{background:"rgba(0, 0, 0, 0.75)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:t?"12px":"16px",padding:t?"8px":"16px",margin:t?"-15px 0 0 0":"13px auto",width:t?"100%":"90%",maxWidth:t?"none":"1200px",boxShadow:"0 4px 16px rgba(0,0,0,0.3)",backdropFilter:"blur(4px)",height:t?"350px":"400px",position:"relative",overflow:"hidden"}},i.createElement("div",{style:{position:"relative",textAlign:"center",marginBottom:t?"0px":"4px",padding:t?"2px":"4px",borderRadius:"8px",background:"rgba(0, 0, 0, 0.6)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",minHeight:t?"2.5rem":"3rem"}},i.createElement("div",{style:{display:"inline-block",width:t?"80px":"100px",height:t?"24px":"32px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"6px",animation:"shimmer 1.5s infinite",margin:"8px"}}),i.createElement("div",{style:{display:"inline-block",width:t?"60px":"80px",height:t?"20px":"28px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"6px",animation:"shimmer 1.5s infinite",margin:"8px"}})),i.createElement("div",{style:{width:t?"200px":"300px",height:t?"16px":"20px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"4px",animation:"shimmer 1.5s infinite",margin:"8px auto"}}),i.createElement("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",marginTop:t?"20px":"30px",gap:t?"10px":"20px"}},i.createElement("div",{style:{width:t?"100px":"140px",height:t?"80px":"120px",background:"linear-gradient(90deg, rgba(0,255,0,0.1) 25%, rgba(0,255,0,0.2) 50%, rgba(0,255,0,0.1) 75%)",borderRadius:"12px",animation:"shimmer 1.5s infinite",border:"2px solid rgba(0,255,0,0.3)"}}),i.createElement("div",{style:{width:t?"80px":"140px",height:t?"60px":"100px",background:"linear-gradient(90deg, rgba(52,152,219,0.1) 25%, rgba(52,152,219,0.2) 50%, rgba(52,152,219,0.1) 75%)",borderRadius:"12px",animation:"shimmer 1.5s infinite",border:"2px solid rgba(52,152,219,0.3)"}})),i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"stretch",marginTop:t?"20px":"30px",gap:t?"6px":"12px",padding:t?"6px":"8px",borderRadius:"8px",background:"rgba(0, 0, 0, 0.5)",border:"1px solid rgba(255,255,255,0.15)"}},i.createElement("div",{style:{flex:1,height:t?"70px":"80px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}}),i.createElement("div",{style:{flex:1,height:t?"70px":"80px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}}),i.createElement("div",{style:{flex:1,height:t?"70px":"80px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}})),i.createElement("div",{style:{display:"flex",gap:t?"8px":"12px",marginTop:t?"10px":"15px"}},i.createElement("div",{style:{flex:t?"0 0 140px":"0 0 200px",height:t?"80px":"100px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}}),i.createElement("div",{style:{flex:1,height:t?"80px":"100px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}})),i.createElement("style",null,`
        @keyframes shimmer {
          0% {
            background-position: -200px 0;
          }
          100% {
            background-position: calc(200px + 100%) 0;
          }
        }
      `));function bg(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[l,c,d]=t.split("-");return`${c}-${d}-${l}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const l=t.split("/");if(l.length===3){const[c,d,p]=l;a=new Date(p,c-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}const kP=({currentPhase:t,seasonData:a,completedMatches:e,totalRequiredMatches:n,playerName:s,playerLastName:l,selectedDivision:c,onOpenOpponentsModal:d,onOpenCompletedMatchesModal:p,onOpenStandingsModal:h,onOpenAllMatchesModal:m,pendingCount:b,sentCount:x,onOpenProposalListModal:E,onOpenSentProposalListModal:w,upcomingMatches:S,onMatchClick:_,isMobile:C,onOpenMessageCenter:D,currentUser:I,allPlayers:A,onSmartMatchClick:T,showPhase1Rules:F,setShowPhase1Rules:J,showPhase1Overview:H,setShowPhase1Overview:Z,setPlayerStats:K,setTimeLeft:X,setDeadlineStatus:W,setPhase1EndDate:O})=>{const B=()=>!s||!l?(console.warn("Phase1Tracker: Missing player name information"),!1):c?!e||!Array.isArray(e)?(console.warn("Phase1Tracker: Invalid completedMatches prop"),!1):typeof n!="number"||n<=0?(console.warn("Phase1Tracker: Invalid totalRequiredMatches prop"),!1):!0:(console.warn("Phase1Tracker: Missing selected division"),!1);v.useEffect(()=>{B()},[s,l,c,e,n]);const[U,M]=v.useState(null),[z,G]=v.useState([]),[q,R]=v.useState(!1),[j,ne]=v.useState(!0),[ae,se]=v.useState(!1),[V,pe]=v.useState(new Date),[Ie,fe]=v.useState(null),[Fe,Ve]=v.useState(null),[He,Qe]=v.useState("normal"),[ut,Pt]=v.useState(null),[xt,Hn]=v.useState(null);v.useEffect(()=>{if(!c||t!=="scheduled"){Ve(null),X(null);return}const $=async()=>{try{const at=c.replace(/[^A-Za-z0-9]/g,"_"),Ge=Date.now(),Vt=`${Pe}/static/schedule_${at}.json?t=${Ge}`,Ct=await fetch(Vt,{method:"GET",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!Ct.ok){console.warn(`Failed to fetch schedule: ${Ct.status} - ${Ct.statusText}`);return}const Bn=await Ct.json();if(!Array.isArray(Bn)||Bn.length===0){console.warn("No schedule data available");return}const mn=Bn.filter(sn=>sn.date).sort((sn,Ia)=>new Date(sn.date)-new Date(Ia.date));if(mn.length===0){console.warn("No valid matches found in schedule");return}const rt=Math.min(47,mn.length-1),On=mn[rt];if(!On||!On.date){console.warn("Could not determine Phase 1 end date from schedule");return}const zn=new Date(On.date);zn.setHours(23,59,59,999),Pt(zn),O(zn);const wn=new Date;if(Us(wn,zn)){const sn={days:0,hours:0,passed:!0};Ve(sn),X(sn),Qe("passed"),W("passed")}else{const sn=Kx(zn,wn),Ia=N_(zn,wn)%24,Yt={days:sn,hours:Ia,passed:!1};Ve(Yt),X(Yt),sn<=0&&Ia<=24?(Qe("critical"),W("critical")):sn<=2?(Qe("urgent"),W("urgent")):sn<=7?(Qe("warning"),W("warning")):(Qe("normal"),W("normal"))}}catch(at){console.error("Error calculating Phase 1 deadline from schedule:",at)}};$();const Re=setInterval($,6e4);return()=>clearInterval(Re)},[c,t]),v.useEffect(()=>{t==="scheduled"&&c&&e&&(Zn(),pt())},[t,c,e,n,z]),v.useEffect(()=>{c&&t==="scheduled"&&Kt()},[c,t]);const Kt=async()=>{try{if(R(!0),!c){console.warn("No division selected for standings");return}const $=c.replace(/[^A-Za-z0-9]/g,"_"),Re=`${Pe}/static/standings_${$}.json`,at=await fetch(Re);if(!at.ok){console.warn(`Failed to fetch standings: ${at.status} - ${at.statusText}`);return}const Ge=await at.json();if(!Array.isArray(Ge)){console.error("Standings data is not an array:",Ge);return}const Vt=Ge.filter(Ct=>{if(!Ct||typeof Ct!="object")return console.warn("Invalid standings entry:",Ct),!1;if(!Ct.name||!Ct.rank)return console.warn("Standings entry missing name or rank:",Ct),!1;const Bn=parseInt(Ct.rank);return isNaN(Bn)||Bn<=0?(console.warn("Invalid rank in standings entry:",Ct),!1):!0});G(Vt)}catch($){console.error("Failed to load standings:",$)}finally{R(!1)}},Yn=($,Re)=>{if(!$||$.length===0)return null;const at=Re.toLowerCase().trim(),Ge=$.find(Vt=>Vt.name.toLowerCase().trim()===at);return Ge?parseInt(Ge.rank):null},Zn=()=>{const $=e.length,Re=n-$,at={completedCount:$,remainingCount:Re,deadlinePassed:Mi.hasPhase1DeadlinePassed(a)};M(at)},pt=()=>{let $=0,Re=0;const at=`${s} ${l}`;e&&e.length>0&&e.forEach(mn=>{mn.winner===at?$++:Re++});const Ge=e&&e.length>0?Math.round($/($+Re)*100):0,Vt=Yn(z,at);let Ct="N/A";Vt!==null?Ct=`${Vt}${de(Vt)}`:e&&e.length>=1&&(Ge>=80?Ct="1st-3rd":Ge>=60?Ct="4th-6th":Ge>=40?Ct="7th-9th":Ct="10th+");const Bn={wins:$,losses:Re,winRate:Ge,position:Ct,actualPosition:Vt};Hn(Bn),K(Bn)},de=$=>{const Re=$%10,at=$%100;return Re===1&&at!==11?"st":Re===2&&at!==12?"nd":Re===3&&at!==13?"rd":"th"};if(q||!Fe||!U||t!=="scheduled")return i.createElement(DP,{isMobile:C});const nt=()=>He==="passed"?"#e74c3c":He==="critical"?"#ff6b6b":He==="urgent"?"#ff8800":He==="warning"?"#ffaa00":"#4CAF50",Ye=()=>{if(He==="passed")return"⚠️ DEADLINE PASSED!";if(He==="critical"){const $=ut?Na(ut,C?"MMM d":"MMM d, yyyy"):"";return`🚨 CRITICAL: ENDS in ${Fe.hours} hours! (${$})`}else if(He==="urgent"){const $=ut?Na(ut,C?"MMM d":"MMM d, yyyy"):"";return`⚠️ URGENT: ENDS in ${Fe.days} days! (${$})`}else if(He==="warning"){const $=ut?Na(ut,C?"MMM d":"MMM d, yyyy"):"";return`⚠️ WARNING: ENDS in ${Fe.days} days. (${$})`}else{const $=ut?Na(ut,C?"MMM d":"MMM d, yyyy"):"";return`ENDS in ${Fe.days} days. (${$})`}},Dt=()=>Math.round(e.length/n*100),zt=nt();return i.createElement("div",{style:{background:"linear-gradient(135deg, rgba(0, 0, 0, 0.85), rgba(20, 20, 20, 0.9), rgba(0, 0, 0, 0.85))",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:C?"16px":"20px",padding:C?"8px 12px 12px 12px":"12px 20px 20px 20px",margin:C?"-15px 0 0 0":"13px auto",width:C?"100%":"98%",maxWidth:C?"none":"1600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4), 0 4px 16px rgba(255,255,255,0.1), inset 0 1px 0 rgba(255,255,255,0.1)",cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"flex-start",backdropFilter:"blur(8px)",overflow:C?"auto":"hidden",maxHeight:C?"none":"35vh",height:C?j?"350px":"60px":j?"400px":"160px",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"},onClick:()=>ne(!j),onKeyDown:$=>{($.key==="Enter"||$.key===" ")&&($.preventDefault(),ne(!j))},role:"button",tabIndex:"0","aria-label":j?"Collapse Phase 1 tracker":"Expand Phase 1 tracker"},i.createElement("div",{style:{position:"relative",textAlign:"center",marginBottom:C?"0px":"4px",padding:C?"2px":"4px",borderRadius:"12px",background:"linear-gradient(135deg, rgba(0, 0, 0, 0.7), rgba(20, 20, 20, 0.8))",border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 4px 16px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)"}},i.createElement("h3",{style:{margin:0,color:"#ffffff",fontSize:C?"0.8rem":"1.1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:C?"4px":"6px",flexWrap:"wrap",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",letterSpacing:"0.5px",minHeight:C?"2.5rem":"3rem"}},i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:C?"2px":"6px"}},He==="critical"&&"🚨",He==="urgent"&&"⚠️",He==="warning"&&"⚠️",He==="passed"&&"⏰",He==="normal"&&""),i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:C?"4px":"8px"}},i.createElement("button",{onClick:$=>{$.stopPropagation(),console.log("Smart match button clicked in Phase1Tracker"),console.log("onSmartMatchClick function:",T),T?(console.log("Calling onSmartMatchClick"),T()):console.log("onSmartMatchClick is not defined")},"aria-label":"Open smart match making",role:"button",tabIndex:"0",style:{background:"linear-gradient(135deg, rgba(255, 193, 7, 0.3), rgba(255, 193, 7, 0.2), rgba(255, 193, 7, 0.1))",border:"1px solid rgba(255, 193, 7, 0.4)",color:"#ffffff",fontSize:C?"0.5rem":"0.8rem",fontWeight:"bold",padding:C?"8px 12px":"10px 16px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",boxShadow:"0 2px 8px rgba(255, 193, 7, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)",zIndex:10},onMouseEnter:$=>{$.target.style.background="linear-gradient(135deg, rgba(255, 193, 7, 0.4), rgba(255, 193, 7, 0.3), rgba(255, 193, 7, 0.2))",$.target.style.transform="scale(1.02) translateY(-1px)",$.target.style.boxShadow="0 4px 12px rgba(255, 193, 7, 0.3), inset 0 1px 0 rgba(255,255,255,0.2)"},onMouseLeave:$=>{$.target.style.background="linear-gradient(135deg, rgba(255, 193, 7, 0.3), rgba(255, 193, 7, 0.2), rgba(255, 193, 7, 0.1))",$.target.style.transform="scale(1) translateY(0)",$.target.style.boxShadow="0 2px 8px rgba(255, 193, 7, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)"}},"🧠 SMART MATCH"),i.createElement("span",{onClick:$=>{$.stopPropagation(),Z(!0)},style:{fontSize:C?"0.5rem":"0.8rem",background:`linear-gradient(135deg, ${zt}, ${zt}dd, ${zt})`,padding:C?"8px 12px":"10px 16px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2), 0 0 10px rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.3)",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:$=>{$.target.style.transform="scale(1.02) translateY(-1px)",$.target.style.boxShadow="0 6px 16px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.3), 0 0 15px rgba(255,255,255,0.2)"},onMouseLeave:$=>{$.target.style.transform="scale(1) translateY(0)",$.target.style.boxShadow="0 4px 12px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2), 0 0 10px rgba(255,255,255,0.1)"},title:"Click to view Phase 1 overview",role:"button",tabIndex:"0","aria-label":"Open Phase 1 overview"},"PHASE 1"),i.createElement("button",{onClick:$=>{$.stopPropagation(),J(!0)},"aria-label":"Open Phase 1 rules and information",role:"button",tabIndex:"0",style:{background:"linear-gradient(135deg, rgba(255, 68, 68, 0.3), rgba(255, 68, 68, 0.2), rgba(255, 68, 68, 0.1))",border:"1px solid rgba(255, 68, 68, 0.4)",color:"#ffffff",fontSize:C?"0.5rem":"0.8rem",fontWeight:"bold",padding:C?"8px 12px":"10px 16px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",boxShadow:"0 2px 8px rgba(255, 68, 68, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)",zIndex:10},onMouseEnter:$=>{$.target.style.background="linear-gradient(135deg, rgba(255, 68, 68, 0.4), rgba(255, 68, 68, 0.3), rgba(255, 68, 68, 0.2))",$.target.style.transform="scale(1.02) translateY(-1px)",$.target.style.boxShadow="0 4px 12px rgba(255, 68, 68, 0.3), inset 0 1px 0 rgba(255,255,255,0.2)"},onMouseLeave:$=>{$.target.style.background="linear-gradient(135deg, rgba(255, 68, 68, 0.3), rgba(255, 68, 68, 0.2), rgba(255, 68, 68, 0.1))",$.target.style.transform="scale(1) translateY(0)",$.target.style.boxShadow="0 2px 8px rgba(255, 68, 68, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)"}},"⚔️ RULES"))),i.createElement("div",{style:{color:"#ffffff",fontSize:C?"0.7rem":"0.95rem",lineHeight:"1.1",marginTop:"2px",marginBottom:C?"2px":"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center"}},Ye()),i.createElement("div",{style:{position:C?"relative":"absolute",left:C?"auto":"15%",top:C?"auto":"50%",transform:C?"none":"translate(-50%, -50%)",cursor:"pointer",fontSize:C?"2.5rem":"3.2rem",transition:"all 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",minHeight:C?"90px":"140px",lineHeight:1,background:"linear-gradient(135deg, rgba(76, 175, 80, 0.35), rgba(76, 175, 80, 0.3), rgba(76, 175, 80, 0.25))",border:"1px solid rgba(76, 175, 80, 0.7)",padding:C?"4px":"6px",borderRadius:C?"12px":"18px",zIndex:1,boxShadow:"0 2px 8px rgba(76, 175, 80, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)",minWidth:C?"70px":"100px",minHeight:C?"90px":"140px",backdropFilter:"blur(8px)",margin:C?"8px auto":"0"},onClick:$=>{$.stopPropagation(),ne(!0),se(!0)},"aria-label":"Open calendar to schedule matches by date",role:"button",tabIndex:"0",onMouseEnter:$=>{$.currentTarget.style.transform="translate(-50%, -50%) scale(1.05)",$.currentTarget.style.background="linear-gradient(135deg, rgba(76, 175, 80, 0.45), rgba(76, 175, 80, 0.4), rgba(76, 175, 80, 0.35))",$.currentTarget.style.boxShadow="0 4px 12px rgba(76, 175, 80, 0.5), inset 0 1px 0 rgba(255,255,255,0.2)",$.currentTarget.style.border="1px solid rgba(76, 175, 80, 0.8)"},onMouseLeave:$=>{$.currentTarget.style.transform="translate(-50%, -50%) scale(1)",$.currentTarget.style.background="linear-gradient(135deg, rgba(76, 175, 80, 0.35), rgba(76, 175, 80, 0.3), rgba(76, 175, 80, 0.25))",$.currentTarget.style.boxShadow="0 2px 8px rgba(76, 175, 80, 0.4), inset 0 1px 0 rgba(255,255,255,0.1)",$.currentTarget.style.border="1px solid rgba(76, 175, 80, 0.7)"}},i.createElement("div",{style:{fontSize:C?"0.5rem":"0.7rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:C?"10px":"14px",textAlign:"center"}},"Today's Date"),i.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1}},i.createElement("div",{style:{fontSize:C?"0.8rem":"1.2rem"}},["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date().getDay()]),i.createElement("div",{style:{fontSize:C?"1.2rem":"2rem"}},(()=>{const $=new Date,Re=String($.getMonth()+1).padStart(2,"0"),at=String($.getDate()).padStart(2,"0"),Ge=String($.getFullYear()).slice(-2);return`${Re}/${at}/${Ge}`})())),i.createElement("div",{style:{fontSize:C?"0.3rem":"0.65rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginTop:"auto",textAlign:"center",whiteSpace:"nowrap",background:"rgba(0, 0, 0, 0.7)",padding:C?"1px 2px":"2px 4px",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.3)"}},C?"Schedule":"Click to Schedule Match by Date")),i.createElement("div",{style:{position:C?"relative":"absolute",right:C?"auto":"15%",top:C?"auto":"50%",transform:C?"none":"translate(50%, -50%)",transition:"all 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",lineHeight:1,background:"linear-gradient(135deg, rgba(52, 152, 219, 0.15), rgba(52, 152, 219, 0.1), rgba(52, 152, 219, 0.05))",border:"1px solid rgba(52, 152, 219, 0.3)",padding:C?"3px":"5px",borderRadius:C?"10px":"16px",zIndex:1,boxShadow:"0 2px 8px rgba(52, 152, 219, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)",minWidth:C?"70px":"100px",minHeight:C?"90px":"140px",backdropFilter:"blur(8px)",margin:C?"8px auto":"0"},title:"Proposal management - view pending and sent proposals",onMouseEnter:$=>{$.currentTarget.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.25), rgba(52, 152, 219, 0.2), rgba(52, 152, 219, 0.15))",$.currentTarget.style.boxShadow="0 4px 12px rgba(52, 152, 219, 0.3), inset 0 1px 0 rgba(255,255,255,0.2)",$.currentTarget.style.border="1px solid rgba(52, 152, 219, 0.5)",$.currentTarget.style.transform="translate(50%, -50%) scale(1.02)"},onMouseLeave:$=>{$.currentTarget.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.15), rgba(52, 152, 219, 0.1), rgba(52, 152, 219, 0.05))",$.currentTarget.style.boxShadow="0 2px 8px rgba(52, 152, 219, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)",$.currentTarget.style.border="1px solid rgba(52, 152, 219, 0.3)",$.currentTarget.style.transform="translate(50%, -50%) scale(1)"}},i.createElement("div",{style:{fontSize:C?"0.6rem":"0.85rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginBottom:C?"4px":"8px",textAlign:"center",whiteSpace:"nowrap"}},"📋 Proposals"),i.createElement("div",{style:{display:"flex",flexDirection:"column",gap:C?"3px":"6px",justifyContent:"center",width:"100%"}},i.createElement("button",{onClick:$=>{$.stopPropagation(),E&&E()},style:{background:"rgba(255, 255, 255, 0.1)",color:"#ffffff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",padding:C?"3px 4px":"6px 8px",fontSize:C?"0.5rem":"0.75rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:$=>{$.target.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.3), rgba(52, 152, 219, 0.25), rgba(52, 152, 219, 0.2))",$.target.style.transform="translateY(-1px) scale(1.01)",$.target.style.boxShadow="0 4px 12px rgba(52, 152, 219, 0.4), inset 0 1px 0 rgba(255,255,255,0.2)"},onMouseLeave:$=>{$.target.style.background="rgba(255, 255, 255, 0.1)",$.target.style.transform="translateY(0) scale(1)",$.target.style.boxShadow="0 2px 6px rgba(0,0,0,0.3)"}},"📥 ",b," waiting for you"),i.createElement("button",{onClick:$=>{$.stopPropagation(),w&&w()},style:{background:"rgba(255, 255, 255, 0.1)",color:"#ffffff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",padding:C?"3px 4px":"6px 8px",fontSize:C?"0.5rem":"0.75rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:$=>{$.target.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.3), rgba(52, 152, 219, 0.25), rgba(52, 152, 219, 0.2))",$.target.style.transform="translateY(-1px) scale(1.01)",$.target.style.boxShadow="0 4px 12px rgba(52, 152, 219, 0.4), inset 0 1px 0 rgba(255,255,255,0.2)"},onMouseLeave:$=>{$.target.style.background="rgba(255, 255, 255, 0.1)",$.target.style.transform="translateY(0) scale(1)",$.target.style.boxShadow="0 2px 6px rgba(0,0,0,0.3)"}},"📤 ",x," waiting for opponents"))),i.createElement("div",{style:{color:"#ffffff",fontSize:C?"0.75rem":"0.95rem",fontWeight:"bold",marginTop:C?"4px":"2px",marginBottom:C?"2px":"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",lineHeight:"1.1",textAlign:"center"}},e.length,"/",n," Matches Complete"),i.createElement("div",{style:{color:"#ffffff",fontSize:C?"0.75rem":"0.95rem",fontWeight:"bold",marginTop:"2px",marginBottom:C?"4px":"2px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",lineHeight:"1.1",textAlign:"center"}},n-e.length," to Schedule"),i.createElement("div",{style:{textAlign:"center",marginTop:C?"2px":"4px"}},i.createElement("div",{style:{fontSize:C?"0.5rem":"0.9rem",color:"#ffffff",fontWeight:"bold",cursor:"pointer",padding:C?"1px 3px":"4px 8px",borderRadius:"6px",display:"inline-block",transition:"background-color 0.2s ease",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},onMouseEnter:$=>$.target.style.backgroundColor=`${zt}20`,onMouseLeave:$=>$.target.style.backgroundColor="transparent"},j?"Hide Stats ▲":"Show Stats ▼"))),j&&i.createElement(i.Fragment,null,i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"stretch",marginBottom:C?"8px":"4px",gap:C?"6px":"12px",padding:C?"6px":"8px",borderRadius:"8px",background:"rgba(0, 0, 0, 0.5)",border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"}},i.createElement("div",{onClick:$=>{$.stopPropagation(),d&&d()},style:{background:"rgba(0, 0, 0, 0.4)",padding:C?"6px":"8px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",flex:1,textAlign:"center",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:C?"70px":"80px"},onMouseEnter:$=>{$.currentTarget.style.background="linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(76, 175, 80, 0.3))",$.currentTarget.style.transform="translateY(-2px) scale(1.02)",$.currentTarget.style.boxShadow="0 4px 16px rgba(76, 175, 80, 0.3), 0 2px 8px rgba(0,0,0,0.2)",$.currentTarget.style.border="1px solid rgba(76, 175, 80, 0.5)"},onMouseLeave:$=>{$.currentTarget.style.background="rgba(255,255,255,0.08)",$.currentTarget.style.transform="translateY(0) scale(1)",$.currentTarget.style.boxShadow="none",$.currentTarget.style.border="1px solid rgba(255,255,255,0.15)"}},i.createElement("div",{style:{fontSize:C?"0.6rem":"0.8rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:C?"4px":"2px"}},"Progress"),i.createElement("div",{style:{fontSize:C?"0.7rem":"0.9rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:C?"3px":"1px"}},e.length,"/",n),i.createElement("div",{style:{width:"100%",height:C?"3px":"6px",background:"rgba(255,255,255,0.15)",borderRadius:"3px",overflow:"hidden",marginBottom:"1px",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.3)"}},i.createElement("div",{style:{width:`${Dt()}%`,height:"100%",background:"linear-gradient(90deg, #4CAF50, #45a049, #4CAF50)",borderRadius:"3px",transition:"width 0.4s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 0 8px rgba(76, 175, 80, 0.5)",position:"relative"}},i.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent)",animation:"shimmer 2s infinite"}}))),i.createElement("div",{style:{fontSize:C?"0.55rem":"0.75rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click to see opponents")),i.createElement("div",{onClick:$=>{$.stopPropagation(),p&&p()},style:{background:"rgba(0, 0, 0, 0.4)",padding:C?"4px":"8px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",flex:1,textAlign:"center",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"80px"},onMouseEnter:$=>{$.currentTarget.style.background="linear-gradient(135deg, rgba(33, 150, 243, 0.2), rgba(33, 150, 243, 0.3))",$.currentTarget.style.transform="translateY(-2px) scale(1.02)",$.currentTarget.style.boxShadow="0 4px 16px rgba(33, 150, 243, 0.3), 0 2px 8px rgba(0,0,0,0.2)",$.currentTarget.style.border="1px solid rgba(33, 150, 243, 0.5)"},onMouseLeave:$=>{$.currentTarget.style.background="rgba(255,255,255,0.08)",$.currentTarget.style.transform="translateY(0) scale(1)",$.currentTarget.style.boxShadow="none",$.currentTarget.style.border="1px solid rgba(255,255,255,0.15)"}},i.createElement("div",{style:{fontSize:C?"0.35rem":"0.8rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:"1px"}},"Record"),i.createElement("div",{style:{fontSize:C?"0.5rem":"0.9rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:"1px"}},(xt==null?void 0:xt.wins)||0,"-",(xt==null?void 0:xt.losses)||0," (",(xt==null?void 0:xt.winRate)||0,"%)"),i.createElement("div",{style:{fontSize:C?"0.4rem":"0.75rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click to see results")),i.createElement("div",{onClick:$=>{$.stopPropagation(),h&&h()},style:{background:"rgba(0, 0, 0, 0.4)",padding:C?"4px":"8px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",flex:1,textAlign:"center",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"80px"},onMouseEnter:$=>{$.currentTarget.style.background="linear-gradient(135deg, rgba(156, 39, 176, 0.2), rgba(156, 39, 176, 0.3))",$.currentTarget.style.transform="translateY(-2px) scale(1.02)",$.currentTarget.style.boxShadow="0 4px 16px rgba(156, 39, 176, 0.3), 0 2px 8px rgba(0,0,0,0.2)",$.currentTarget.style.border="1px solid rgba(156, 39, 176, 0.5)"},onMouseLeave:$=>{$.currentTarget.style.background="rgba(0, 0, 0, 0.4)",$.currentTarget.style.transform="translateY(0) scale(1)",$.currentTarget.style.boxShadow="none",$.currentTarget.style.border="1px solid rgba(255,255,255,0.15)"}},i.createElement("div",{style:{fontSize:C?"0.35rem":"0.8rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:"1px"}},"Position"),i.createElement("div",{style:{fontSize:C?"0.4rem":"0.9rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:"1px"}},q?"...":(xt==null?void 0:xt.position)||"N/A"),i.createElement("div",{style:{fontSize:C?"0.4rem":"0.75rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click to view standings"))),i.createElement("div",{style:{display:"flex",gap:C?"8px":"12px",marginBottom:"4px"}},i.createElement("div",{style:{flex:C?"0 0 140px":"0 0 200px",background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",padding:"4px",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",display:"flex",flexDirection:"column",gap:"4px"}},i.createElement("div",{style:{fontSize:C?"0.5rem":"0.9rem",color:"#ffffff",fontWeight:"bold",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:"2px"}},"📨 ",C?"Messages":"Message Center"),i.createElement("button",{onClick:$=>{$.stopPropagation(),D&&D("direct")},style:{background:"linear-gradient(135deg, #ff4444 0%, #cc3333 50%, #aa2222 100%)",color:"#ffffff",border:"none",borderRadius:"6px",padding:"4px 6px",fontSize:C?"0.6rem":"0.7rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(255, 68, 68, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:$=>{$.target.style.background="linear-gradient(135deg, #cc3333 0%, #aa2222 50%, #881111 100%)",$.target.style.transform="translateY(-2px) scale(1.02)",$.target.style.boxShadow="0 4px 12px rgba(255, 68, 68, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.6), inset 0 -1px 0 rgba(0, 0, 0, 0.3)"},onMouseLeave:$=>{$.target.style.background="linear-gradient(135deg, #ff4444 0%, #cc3333 50%, #aa2222 100%)",$.target.style.transform="translateY(0) scale(1)",$.target.style.boxShadow="0 2px 6px rgba(255, 68, 68, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)"}},"💬 ",C?"DM":"Direct Messages"),i.createElement("button",{onClick:$=>{$.stopPropagation(),D&&D("league")},style:{background:"linear-gradient(135deg, #00bcd4 0%, #0097a7 50%, #00695c 100%)",color:"#ffffff",border:"none",borderRadius:"6px",padding:"4px 6px",fontSize:C?"0.6rem":"0.7rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(0, 188, 212, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:$=>{$.target.style.background="linear-gradient(135deg, #0097a7 0%, #00695c 50%, #004d40 100%)",$.target.style.transform="translateY(-2px) scale(1.02)",$.target.style.boxShadow="0 4px 12px rgba(0, 188, 212, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.6), inset 0 -1px 0 rgba(0, 0, 0, 0.3)"},onMouseLeave:$=>{$.target.style.background="linear-gradient(135deg, #00bcd4 0%, #0097a7 50%, #00695c 100%)",$.target.style.transform="translateY(0) scale(1)",$.target.style.boxShadow="0 2px 6px rgba(0, 188, 212, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)"}},"🚀 ",C?"Chat":"League Chat")),i.createElement("div",{onClick:$=>{$.stopPropagation(),m&&m()},style:{flex:"1",background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",padding:"4px",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:$=>{$.currentTarget.style.background="linear-gradient(135deg, rgba(255, 68, 68, 0.15), rgba(255, 68, 68, 0.1), rgba(255, 68, 68, 0.05))",$.currentTarget.style.border="1px solid rgba(255, 68, 68, 0.4)",$.currentTarget.style.transform="translateY(-1px) scale(1.01)",$.currentTarget.style.boxShadow="0 4px 12px rgba(255, 68, 68, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)"},onMouseLeave:$=>{$.currentTarget.style.background="rgba(0, 0, 0, 0.4)",$.currentTarget.style.border="1px solid rgba(255,255,255,0.15)",$.currentTarget.style.transform="translateY(0) scale(1)",$.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)"}},i.createElement("div",{style:{fontSize:C?"0.6rem":"1.1rem",color:"#ff4444",fontWeight:"bold",marginBottom:"0px",textAlign:"center",cursor:"pointer",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",letterSpacing:"0.5px"}},"🎯 Upcoming Matches"),i.createElement("div",{style:{fontSize:C?"0.45rem":"0.75rem",color:"#e0e0e0",textAlign:"center",fontStyle:"italic",fontWeight:"500",marginTop:"0px",marginBottom:"0px",padding:"0px"}},"click for match details"),(()=>{const $=S;return $&&$.length>0?i.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"1px",marginTop:C?"1px":"2px"}},$.slice(0,3).map((Re,at)=>i.createElement("div",{key:at,onClick:Ge=>{Ge.stopPropagation(),_&&Re&&_(Re)},style:{fontSize:C?"0.5rem":"0.8rem",color:"#ccc",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"pointer",padding:C?"1px 2px":"2px 3px",borderRadius:"2px",transition:"all 0.2s ease"},onMouseEnter:Ge=>{Ge.target.style.color="#ffffff",Ge.target.style.background="rgba(255,255,255,0.1)"},onMouseLeave:Ge=>{Ge.target.style.color="#ccc",Ge.target.style.background="transparent"}},(()=>{let Ge="",Vt="";if(Re.type==="proposal"||Re.status==="confirmed")Re.senderName&&Re.receiverName&&(Ge=Re.senderName.trim().toLowerCase()===`${s} ${l}`.trim().toLowerCase()?Re.receiverName:Re.senderName),Re.date&&(Vt=bg(Re.date));else if(Re.player1Id&&Re.player2Id&&(Ge=Re.player1Id.trim().toLowerCase()===`${s} ${l}`.trim().toLowerCase()?Re.player2Id:Re.player1Id),Re.scheduledDate){const Ct=new Date(Re.scheduledDate);isNaN(Ct.getTime())||(Vt=bg(Ct.toISOString().split("T")[0]))}else Re.date&&(Vt=bg(Re.date));return Ge?Vt?`vs ${Ge} (${Vt})`:`vs ${Ge}`:"No matches"})())),$.length>3&&i.createElement("div",{style:{fontSize:C?"0.25rem":"0.55rem",color:"#888",textAlign:"center",fontStyle:"italic",padding:C?"0px":"1px"}},"+",$.length-3," more")):i.createElement("div",{style:{fontSize:C?"0.4rem":"0.7rem",color:"#999",textAlign:"center"}},"No matches")})()))),ae&&i.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(4px)"},onClick:()=>se(!1)},i.createElement("div",{style:{background:"rgba(0, 0, 0, 0.75)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:C?"12px":"16px",padding:C?"6px":"16px",width:C?"100%":"90%",maxWidth:C?"none":"1200px",boxShadow:"0 4px 16px rgba(0,0,0,0.3)",backdropFilter:"blur(4px)",maxHeight:C?"none":"35vh",height:C?"200px":"400px",overflow:"auto"},onClick:$=>$.stopPropagation()},i.createElement("div",{style:{position:"relative",textAlign:"center",marginBottom:C?"0px":"4px",padding:C?"2px":"4px",borderRadius:"8px",background:"rgba(0, 0, 0, 0.6)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"}},i.createElement("h3",{style:{margin:0,color:"#ffffff",fontSize:C?"0.4rem":"1.1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"space-between",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",letterSpacing:"0.5px"}},i.createElement("div",{style:{flex:1}}),i.createElement("span",{style:{fontSize:C?"0.6rem":"1.1rem",background:"linear-gradient(45deg, #4CAF50, #4CAF50dd)",padding:C?"1px 4px":"2px 8px",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"}},"Phase 1 Calendar"),i.createElement("button",{onClick:()=>se(!1),style:{background:"none",border:"none",color:"#ffffff",fontSize:C?"0.8rem":"1.2rem",cursor:"pointer",padding:"0",width:C?"20px":"30px",height:C?"20px":"30px",display:"flex",alignItems:"center",justifyContent:"center",flex:1,justifyContent:"flex-end"}},"×"))),i.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"8px",padding:C?"6px":"10px",marginBottom:C?"4px":"8px",textAlign:"center"}},i.createElement("div",{style:{fontSize:C?"0.45rem":"0.85rem",color:"#ffffff",fontWeight:"bold",marginBottom:C?"3px":"5px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"📅 Click any date to see opponents available for that day"),i.createElement("div",{style:{fontSize:C?"0.4rem":"0.75rem",color:"#cccccc",fontStyle:"italic",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"💡 Or click the Progress meter on the home screen to see all available opponents")),i.createElement(AP,{phase1EndDate:ut,isMobile:C,currentMonth:V,onMonthChange:pe,onOpenOpponentsModal:d,upcomingMatches:S,playerName:s,playerLastName:l,onMatchClick:_,onDateSelect:$=>{fe($),d&&d($)}}))))},AP=({phase1EndDate:t,isMobile:a,currentMonth:e,onMonthChange:n,onOpenOpponentsModal:s,upcomingMatches:l,playerName:c,playerLastName:d,onDateSelect:p,onMatchClick:h})=>{const m=new Date,b=e.getMonth(),x=e.getFullYear(),E=new Date(x,b,1),S=new Date(x,b+1,0).getDate(),_=E.getDay(),C=[];for(let X=0;X<_;X++)C.push(null);for(let X=1;X<=S;X++)C.push(X);const D=X=>!t||!X?!1:X===t.getDate()&&b===t.getMonth()&&x===t.getFullYear(),I=X=>X===m.getDate()&&b===m.getMonth()&&x===m.getFullYear(),A=X=>X&&X<m.getDate()&&b===m.getMonth()&&x===m.getFullYear(),T=["January","February","March","April","May","June","July","August","September","October","November","December"],F=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],J=()=>{const X=new Date(x,b-1,1);n(X)},H=()=>{const X=new Date(x,b+1,1);n(X)},Z=X=>{if(!X||!l)return[];const O=new Date(x,b,X).toISOString().split("T")[0];return l.filter(B=>{let U=null;if(B.scheduledDate){const M=new Date(B.scheduledDate);isNaN(M.getTime())||(U=M.toISOString().split("T")[0])}else if(B.date){const M=B.date.split("-");if(M.length===3){const[z,G,q]=M;U=`${q}-${z.padStart(2,"0")}-${G.padStart(2,"0")}`}}return U===O})},K=X=>Z(X).length>0;return i.createElement("div",{style:{color:"#ffffff"}},i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:a?"2px":"4px"}},i.createElement("button",{onClick:J,style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"#ffffff",fontSize:a?"0.6rem":"0.8rem",cursor:"pointer",padding:a?"2px 4px":"4px 8px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:X=>X.target.style.background="rgba(255, 255, 255, 0.2)",onMouseLeave:X=>X.target.style.background="rgba(255, 255, 255, 0.1)"},"←"),i.createElement("div",{style:{textAlign:"center",fontSize:a?"0.7rem":"1rem",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},T[b]," ",x),i.createElement("button",{onClick:H,style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"#ffffff",fontSize:a?"0.6rem":"0.8rem",cursor:"pointer",padding:a?"2px 4px":"4px 8px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:X=>X.target.style.background="rgba(255, 255, 255, 0.2)",onMouseLeave:X=>X.target.style.background="rgba(255, 255, 255, 0.1)"},"→")),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0px",marginBottom:a?"1px":"2px"}},F.map(X=>i.createElement("div",{key:X,style:{textAlign:"center",fontSize:a?"0.5rem":"0.7rem",fontWeight:"bold",color:"#cccccc",padding:a?"0px":"1px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},X))),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0px"}},C.map((X,W)=>i.createElement("div",{key:W,onClick:()=>{if(X&&!K(X)&&p){const O=new Date(x,b,X);p(O)}},title:K(X)?Z(X).map(O=>{let B="";return O.player1Id&&O.player2Id?B=O.player1Id.trim().toLowerCase()===`${c} ${d}`.trim().toLowerCase()?O.player2Id:O.player1Id:O.senderName&&O.receiverName&&(B=O.senderName.trim().toLowerCase()===`${c} ${d}`.trim().toLowerCase()?O.receiverName:O.senderName),`Click to view match details vs ${B}`}).join(", "):"Click to schedule match",style:{aspectRatio:"1",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",fontSize:a?"0.6rem":"0.8rem",fontWeight:"bold",borderRadius:"1px",cursor:X?"pointer":"default",background:X?D(X)?"#e74c3c":A(X)?"rgba(255,255,255,0.1)":"transparent":"transparent",border:X?D(X)?"1px solid #c0392b":I(X)?"2px solid #4CAF50":"1px solid rgba(255,255,255,0.1)":"none",color:X?D(X)||I(X)?"#ffffff":A(X)?"#888888":"#ffffff":"transparent",transition:"all 0.2s ease",padding:"2px"},onMouseEnter:O=>{X&&(O.target.style.transform="scale(1.05)",O.target.style.boxShadow="0 2px 8px rgba(255,255,255,0.2)")},onMouseLeave:O=>{X&&(O.target.style.transform="scale(1)",O.target.style.boxShadow="none")}},i.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-between",width:"100%",height:"100%",position:"relative"}},i.createElement("span",{style:{position:"absolute",top:"2px",right:"2px",fontSize:a?"0.5rem":"0.7rem",fontWeight:"bold",color:"inherit"}},X||""),K(X)&&i.createElement("div",{style:{fontSize:a?"0.4rem":"0.5rem",color:"#4CAF50",fontWeight:"bold",textAlign:"center",cursor:"pointer",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginTop:"12px",padding:"1px",borderRadius:"2px",transition:"all 0.2s ease"},onMouseEnter:O=>{O.target.style.background="rgba(76, 175, 80, 0.2)",O.target.style.transform="scale(1.1)"},onMouseLeave:O=>{O.target.style.background="transparent",O.target.style.transform="scale(1)"},onClick:O=>{O.stopPropagation();const B=Z(X);if(B.length>0){const U=B[0];h&&h(U)}}},(()=>{const O=Z(X);if(O.length>0){const B=O[0];let U="";return B.player1Id&&B.player2Id?U=B.player1Id.trim().toLowerCase()===`${c} ${d}`.trim().toLowerCase()?B.player2Id:B.player1Id:B.senderName&&B.receiverName&&(U=B.senderName.trim().toLowerCase()===`${c} ${d}`.trim().toLowerCase()?B.receiverName:B.senderName),U}return""})()))))),i.createElement("div",{style:{marginTop:a?"2px":"4px",fontSize:a?"0.5rem":"0.7rem",display:"flex",flexDirection:"column",gap:"1px"}},i.createElement("div",{style:{display:"flex",alignItems:"center",gap:a?"2px":"4px"}},i.createElement("div",{style:{width:a?"6px":"8px",height:a?"6px":"8px",background:"transparent",border:"1px solid #4CAF50",borderRadius:"1px"}}),i.createElement("span",null,"Today (outline)")),t&&i.createElement("div",{style:{display:"flex",alignItems:"center",gap:a?"2px":"4px"}},i.createElement("div",{style:{width:a?"6px":"8px",height:a?"6px":"8px",background:"#e74c3c",border:"1px solid #c0392b",borderRadius:"1px"}}),i.createElement("span",null,"Phase 1 Deadline")),i.createElement("div",{style:{display:"flex",alignItems:"center",gap:a?"2px":"4px"}},i.createElement("div",{style:{width:a?"6px":"8px",height:a?"6px":"8px",background:"transparent",border:"1px solid #4CAF50",borderRadius:"50%",position:"relative"}},i.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"2px",height:"2px",background:"#4CAF50",borderRadius:"50%"}})),i.createElement("span",null,"Click scheduled opponent for match details"))))},ux={async validateChallenge(t,a,e,n=!1,s=null){return Nn.post("/api/challenges/validate",{senderName:t,receiverName:a,division:e,isRematch:n,originalChallengeId:s})},async validateDefenseAcceptance(t,a,e){return Nn.post("/api/challenges/validate-defense",{defenderName:t,challengerName:a,division:e})},async getChallengeStats(t,a){return Nn.get(`/api/challenges/stats/${encodeURIComponent(t)}/${encodeURIComponent(a)}`)},async getChallengeLimits(t,a){return Nn.get(`/api/challenges/limits/${encodeURIComponent(t)}/${encodeURIComponent(a)}`)},async getEligibleOpponents(t,a){return Nn.get(`/api/challenges/eligible-opponents/${encodeURIComponent(t)}/${encodeURIComponent(a)}`)},async getDivisionChallengeStats(t){return Nn.get(`/api/challenges/division-stats/${encodeURIComponent(t)}`)},async updateChallengeStats(t,a,e){return Nn.put(`/api/challenges/stats/${encodeURIComponent(t)}/${encodeURIComponent(a)}`,e)},async resetDivisionChallengeStats(t){return Nn.delete(`/api/challenges/division-stats/${encodeURIComponent(t)}`)}};function MP({isOpen:t,onClose:a,isMobile:e}){return t?i.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"10px"}},i.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"2px solid #ff4444",borderRadius:"12px",width:e?"98%":"90%",maxWidth:"800px",height:e?"98%":"95%",display:"flex",flexDirection:"column",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",color:"#ffffff"}},i.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderBottom:"2px solid #ff4444",flexShrink:0}},i.createElement("h2",{style:{margin:0,fontSize:e?"1.2rem":"1.5rem",color:"#ffffff",fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px",textAlign:"center"}},"⚔️ Phase 2 Challenge Rules"),i.createElement("button",{onClick:a,style:{position:"absolute",right:"20px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ffffff",fontSize:"2rem",cursor:"pointer",padding:"5px",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s ease"},onMouseEnter:n=>n.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:n=>n.target.style.backgroundColor="transparent"},"×")),i.createElement("div",{style:{flex:1,overflowY:"auto",padding:"25px",fontSize:e?"1rem":"1.1rem",lineHeight:"1.6"}},i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("h3",{style:{color:"#ff4444",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"🎯 Overview"),i.createElement("p",{style:{margin:"0 0 15px 0",color:"#e0e0e0"}},"Phase 2 is the challenge phase where players compete against each other based on standings from Phase 1."),i.createElement("p",null,"You must complete 2-4 total matches during this phase, as either a challenger or defender.")),i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("h3",{style:{color:"#ff4444",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"📊 Match Requirements"),i.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Total Matches:")," 2-4 matches (minimum 2, maximum 4)"),i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("p",null,i.createElement("strong",null,"Defenses:")," If challenged, at least 2 defensive matches are required(you may accept more voluntarily). "),i.createElement("li",null,i.createElement("p",null,"If not challenged no defensive matches are required."))),i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Weekly Limit:")," Only 1 match per week (as challenger or defender)"))),i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("h3",{style:{color:"#ff4444",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"⚔️ Dynamic Challenge Limits"),i.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",padding:"15px",marginBottom:"15px"}},i.createElement("p",{style:{margin:"0 0 10px 0",color:"#ffc107",fontWeight:"bold"}},"Your challenge limit depends on how many times you've been challenged:"),i.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},i.createElement("li",{style:{marginBottom:"5px"}},i.createElement("strong",null,"0 times challenged:")," You can issue 4 challenges"),i.createElement("li",{style:{marginBottom:"5px"}},i.createElement("strong",null,"1 time challenged:")," You can issue 3 challenges"),i.createElement("li",{style:{marginBottom:"5px"}},i.createElement("strong",null,"2 times challenged:")," You can issue 2 challenges")))),i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("h3",{style:{color:"#ff4444",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"🎯 Challenge Rules"),i.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Standings Limit:")," You can challenge players ranked up to 4 spots higher than you."),i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"One Challenge:")," You may challenge the same opponent only once."),i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Rematch Rule:")," If you lose a challenge as a defender, you may issue a rematch (if both remain eligible). Opponent is not required to accept the rematch if they have played the required 2 defensive matches."),i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Defense Priority:")," If you receive multiple challenges in the same week, the lowest-ranked challenger has priority."))),i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("h3",{style:{color:"#ff4444",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"🛡️ Defense Rules"),i.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Required Defenses:")," You must accept challenges until you've played at least 2 matches as a defender."),i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Defense Limit:")," No player may be required to defend more than 2 times."),i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Voluntary Defenses:")," You may accept additional defenses beyond the required 2."),i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Declining Challenges:")," After 2 defenses, declining further challenges is not a forfeit"))),i.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"8px",padding:"15px",marginTop:"20px"}},i.createElement("h4",{style:{color:"#ff4444",fontSize:e?"1rem":"1.1rem",margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"8px"}},"⚠️ Important Notes"),i.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0",fontSize:e?"0.85rem":"0.9rem"}},i.createElement("li",{style:{marginBottom:"5px"}},"All challenges and responses must be recorded in the League Scheduling Hub"),i.createElement("li",{style:{marginBottom:"5px"}},"Any attempt to exploit rules or collude will be treated as a sportsmanship violation"),i.createElement("li",{style:{marginBottom:"5px"}},"Once you complete 4 matches, you may not accept or issue further challenges")))),i.createElement("div",{style:{textAlign:"center",padding:"20px",borderTop:"1px solid rgba(255,255,255,0.2)",flexShrink:0}},i.createElement("button",{onClick:a,style:{background:"linear-gradient(135deg, #ff4444, #cc3333)",border:"none",color:"#ffffff",fontSize:e?"0.9rem":"1rem",fontWeight:"bold",padding:e?"10px 20px":"12px 25px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"},onMouseEnter:n=>{n.target.style.transform="translateY(-2px)",n.target.style.boxShadow="0 6px 12px rgba(0,0,0,0.4)"},onMouseLeave:n=>{n.target.style.transform="translateY(0)",n.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"}},"Got It! ✓")))):null}function TP({isOpen:t,onClose:a,phase1Stats:e,playerName:n,playerLastName:s,isMobile:l}){if(!t||!e)return null;const c=`${n} ${s}`;return i.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"flex-start",justifyContent:"center",zIndex:1e3,padding:l?"10px":"20px",overflowY:"auto"},onClick:a},i.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"3px solid #ff4444",borderRadius:l?"12px":"16px",padding:l?"20px":"30px",maxWidth:l?"90vw":"500px",width:"100%",maxHeight:l?"80vh":"70vh",overflowY:"auto",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",backdropFilter:"blur(5px)",position:"relative",marginTop:l?"20px":"40px",marginBottom:l?"20px":"40px"},onClick:d=>d.stopPropagation()},i.createElement("button",{onClick:a,style:{position:"absolute",top:l?"10px":"15px",right:l?"10px":"15px",background:"linear-gradient(135deg, #ff4444, #cc3333)",border:"3px solid #ffffff",color:"#ffffff",fontSize:l?"1.2rem":"1.5rem",fontWeight:"bold",width:l?"35px":"40px",height:l?"35px":"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease",zIndex:1e3,boxShadow:"0 4px 8px rgba(0,0,0,0.5)",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},onMouseEnter:d=>{d.target.style.background="linear-gradient(135deg, #ff6666, #dd4444)",d.target.style.transform="scale(1.1)",d.target.style.boxShadow="0 6px 12px rgba(0,0,0,0.7)"},onMouseLeave:d=>{d.target.style.background="linear-gradient(135deg, #ff4444, #cc3333)",d.target.style.transform="scale(1)",d.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.5)"}},"✕"),i.createElement("div",{style:{textAlign:"center",marginBottom:l?"20px":"25px"}},i.createElement("h2",{style:{color:"#ffffff",fontSize:l?"1.2rem":"1.5rem",fontWeight:"bold",margin:"0 0 5px 0",textShadow:"2px 2px 4px rgba(0,0,0,0.8)"}},"📊 Phase 1 Results"),i.createElement("div",{style:{color:"#e0e0e0",fontSize:l?"0.9rem":"1rem",fontStyle:"italic"}},c)),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:l?"12px":"16px",marginBottom:l?"20px":"25px"}},i.createElement("div",{style:{padding:l?"15px":"20px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",border:"2px solid rgba(255,255,255,0.2)",textAlign:"center"}},i.createElement("div",{style:{fontSize:l?"0.8rem":"1rem",color:"#e0e0e0",marginBottom:"8px",fontWeight:"bold"}},"Record"),i.createElement("div",{style:{fontSize:l?"1.5rem":"2rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",marginBottom:"5px"}},e.wins,"-",e.losses),i.createElement("div",{style:{fontSize:l?"0.9rem":"1.1rem",color:"#e0e0e0",fontStyle:"italic"}},e.winRate,"% Win Rate")),i.createElement("div",{style:{padding:l?"15px":"20px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",border:"2px solid rgba(255,255,255,0.2)",textAlign:"center"}},i.createElement("div",{style:{fontSize:l?"0.8rem":"1rem",color:"#e0e0e0",marginBottom:"8px",fontWeight:"bold"}},"Final Position"),i.createElement("div",{style:{fontSize:l?"1.5rem":"2rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",marginBottom:"5px"}},e.position),i.createElement("div",{style:{fontSize:l?"0.9rem":"1.1rem",color:"#e0e0e0",fontStyle:"italic"}},"in Division")),i.createElement("div",{style:{padding:l?"15px":"20px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",border:"2px solid rgba(255,255,255,0.2)",textAlign:"center"}},i.createElement("div",{style:{fontSize:l?"0.8rem":"1rem",color:"#e0e0e0",marginBottom:"8px",fontWeight:"bold"}},"Matches Played"),i.createElement("div",{style:{fontSize:l?"1.5rem":"2rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",marginBottom:"5px"}},e.totalMatches),i.createElement("div",{style:{fontSize:l?"0.9rem":"1.1rem",color:"#e0e0e0",fontStyle:"italic"}},"Total Games"))),i.createElement("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:l?"15px":"20px",border:"1px solid rgba(255,255,255,0.1)",marginBottom:l?"15px":"20px"}},i.createElement("h3",{style:{color:"#ffffff",fontSize:l?"1rem":"1.2rem",margin:"0 0 10px 0",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"Performance Summary"),i.createElement("div",{style:{color:"#e0e0e0",fontSize:l?"0.85rem":"1rem",lineHeight:"1.5",textAlign:"center"}},e.totalMatches===0?i.createElement("div",null,"No matches completed in Phase 1"):i.createElement("div",null,i.createElement("div",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Win Rate:")," ",e.winRate,"% (",e.wins," wins, ",e.losses," losses)"),i.createElement("div",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Final Standing:")," ",e.position," place"),i.createElement("div",null,i.createElement("strong",null,"Total Matches:")," ",e.totalMatches," games played")))),i.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",borderRadius:"8px",padding:l?"15px":"20px",border:"2px solid rgba(255, 68, 68, 0.3)",textAlign:"center"}},i.createElement("div",{style:{color:"#ff4444",fontSize:l?"0.9rem":"1rem",fontWeight:"bold",marginBottom:"5px"}},"🏆 Phase 2 Qualified"),i.createElement("div",{style:{color:"#e0e0e0",fontSize:l?"0.8rem":"0.9rem"}},"Ready for challenge matches and defenses"))))}function NP({playerName:t,playerLastName:a,selectedDivision:e,phase:n,isMobile:s,onOpenOpponentsModal:l,onOpenCompletedMatchesModal:c,onOpenStandingsModal:d,onOpenDefenseChallengersModal:p,onOpenAllMatchesModal:h,onOpenProposalListModal:m,onOpenSentProposalListModal:b,onOpenPlayerSearch:x,pendingCount:E=0,sentCount:w=0,upcomingMatches:S=[],onMatchClick:_,seasonData:C,completedMatches:D=[],standings:I=[]}){var Zn,pt;const[A,T]=v.useState(null),[F,J]=v.useState(null),[H,Z]=v.useState(!0),[K,X]=v.useState(null),[W,O]=v.useState(!0),[B,U]=v.useState(!1),[M,z]=v.useState(!1),[G,q]=v.useState(null),R=`${t} ${a}`,j=()=>{let de=0,nt=0;D&&D.length>0&&D.forEach(Ge=>{Ge.winner===R?de++:nt++});const Ye=D&&D.length>0?Math.round(de/(de+nt)*100):0,Dt=(Ge,Vt)=>{if(!Ge||Ge.length===0)return null;const Ct=Vt.toLowerCase().trim(),Bn=Ge.find(mn=>mn.name.toLowerCase().trim()===Ct);return Bn?parseInt(Bn.rank):null},zt=Ge=>{const Vt=Ge%10,Ct=Ge%100;return Vt===1&&Ct!==11?"st":Vt===2&&Ct!==12?"nd":Vt===3&&Ct!==13?"rd":"th"},$=Dt(I,R);let Re="N/A";$!==null?Re=`${$}${zt($)}`:D&&D.length>=1&&(Ye>=80?Re="1st-3rd":Ye>=60?Re="4th-6th":Ye>=40?Re="7th-9th":Re="10th+");const at={wins:de,losses:nt,winRate:Ye,position:Re,totalMatches:D?D.length:0};console.log("Phase2Tracker - Calculated Phase 1 stats:",at),q(at)};v.useEffect(()=>{console.log("Phase2Tracker - Calculating Phase 1 stats:"),console.log("  completedMatches:",D),console.log("  standings:",I),console.log("  fullPlayerName:",R),j()},[D,I,R]);const ae=(()=>{if(console.log("Phase2Tracker - Received seasonData:",C),console.log("Phase2Tracker - seasonData.phase1End:",C==null?void 0:C.phase1End),!C||!C.phase1End)return console.log("Phase2Tracker - No seasonData or phase1End found"),{days:null,status:"no_deadline"};const de=new Date,nt=new Date(C.phase1End);if(console.log("Phase2Tracker - Date comparison:"),console.log("  now:",de.toISOString()),console.log("  phase1End:",nt.toISOString()),console.log("  nowTime:",de.getTime()),console.log("  phase1EndTime:",nt.getTime()),console.log("  isPhase1Active:",de<=nt),console.log("  currentDate:",de.toLocaleDateString()),console.log("  phase1EndDate:",nt.toLocaleDateString()),de<=nt)return console.log("Phase2Tracker - Phase 1 is still active, returning phase1_active status"),{days:null,status:"phase1_active"};const Ye=new Date(nt);Ye.setDate(Ye.getDate()+28);const Dt=Ye-de,zt=Math.ceil(Dt/(1e3*60*60*24));return console.log("Phase2Tracker - Phase 2 calculation:"),console.log("  phase2End:",Ye.toISOString()),console.log("  diffTime:",Dt),console.log("  diffDays:",zt),console.log("  status:",zt<0?"passed":zt<=1?"critical":zt<=3?"urgent":zt<=7?"warning":"normal"),zt<0?{days:Math.abs(zt),status:"passed"}:zt<=1?{days:zt,status:"critical"}:zt<=3?{days:zt,status:"urgent"}:zt<=7?{days:zt,status:"warning"}:{days:zt,status:"normal"}})();if(console.log("Phase2Tracker - Final deadlineStatus:",ae),console.log("Phase2Tracker - Final deadlineStatus.status:",ae==null?void 0:ae.status),console.log("Phase2Tracker - Final deadlineStatus.days:",ae==null?void 0:ae.days),v.useEffect(()=>{if(!t||!a||!e||n!=="challenge"){Z(!1);return}async function de(){try{Z(!0),X(null);const[nt,Ye]=await Promise.all([ux.getChallengeStats(R,e),ux.getChallengeLimits(R,e)]);T(nt),J(Ye)}catch(nt){console.error("Error loading challenge data:",nt),X("Failed to load challenge statistics")}finally{Z(!1)}}de()},[t,a,e,n,R]),n!=="challenge")return null;if(H)return i.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.7), rgba(26, 26, 26, 0.8))",border:"2px solid #ff4444",borderRadius:s?"8px":"12px",padding:s?"1px":"18px",margin:s?"-15px 0 0 0":"16px 0",boxShadow:"0 6px 20px rgba(0,0,0,0.3), 0 2px 8px rgba(0,0,0,0.2)",backdropFilter:"blur(2px)",textAlign:"center",color:"#888"}},"Loading Phase 2 challenge statistics...");if(K)return i.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.7), rgba(26, 26, 26, 0.8))",border:"2px solid #e53e3e",borderRadius:s?"8px":"12px",padding:s?"1px":"18px",margin:s?"-15px 0 0 0":"16px 0",boxShadow:"0 6px 20px rgba(0,0,0,0.3), 0 2px 8px rgba(0,0,0,0.2)",backdropFilter:"blur(2px)",textAlign:"center",color:"#e53e3e"}},K);if(!A||!F)return null;const se=A.matchesAsChallenger+A.requiredDefenses,V=2,pe=4,Ie=se>=V,fe=se>=pe,Ve=(()=>{var nt;const de=((nt=F.dynamicLimits)==null?void 0:nt.timesChallenged)||0;return de===0?4:de===1?3:de===2?2:0})(),He=((Zn=F.dynamicLimits)==null?void 0:Zn.challengesIssued)||0,Qe=Ve-He,ut=A.requiredDefenses||0,Pt=()=>fe?"completed":Ie?"active":se>=1?"progressing":"ready",xt=(de,nt)=>{const Ye=de/nt*100;return Ye>=90?"#e53e3e":Ye>=75?"#ffc107":"#28a745"},Hn=()=>{if(ae.status==="phase1_active")return"#ffaa00";switch(Pt()){case"completed":return"#00aa00";case"active":return"#ff4444";case"progressing":return"#ff4444";case"ready":return"#ff4444";default:return"#ff4444"}},Kt=()=>{const de=Pt();if(ae.status==="phase1_active")return`⏳ Phase 1 still active until ${C&&C.phase1End?Na(new Date(C.phase1End),s?"MMM d":"MMM d, yyyy"):""}`;if(ae.status==="passed")return"⚠️ DEADLINE PASSED!";if(ae.status==="critical"){const nt=new Date(C.phase1End),Ye=new Date(nt);Ye.setDate(Ye.getDate()+28);const Dt=Na(Ye,s?"MMM d":"MMM d, yyyy");return`🚨 CRITICAL: ENDS in ${ae.days} hours! (${Dt})`}else if(ae.status==="urgent"){const nt=new Date(C.phase1End),Ye=new Date(nt);Ye.setDate(Ye.getDate()+28);const Dt=Na(Ye,s?"MMM d":"MMM d, yyyy");return`⚠️ URGENT: ENDS in ${ae.days} days! (${Dt})`}else if(ae.status==="warning"){const nt=new Date(C.phase1End),Ye=new Date(nt);Ye.setDate(Ye.getDate()+28);const Dt=Na(Ye,s?"MMM d":"MMM d, yyyy");return`⚠️ WARNING: ENDS in ${ae.days} days. (${Dt})`}else if(ae.status==="normal"){const nt=new Date(C.phase1End),Ye=new Date(nt);Ye.setDate(Ye.getDate()+28);const Dt=Na(Ye,s?"MMM d":"MMM d, yyyy");return`ENDS in ${ae.days} days. (${Dt})`}switch(de){case"completed":return"🎉 Phase 2 Complete! (4/4 matches)";case"active":return`🏆 Active in Phase 2! ${se}/4 matches (min met)`;case"progressing":return`📈 Phase 2 in progress! ${se}/4 matches (need ${V-se} more)`;case"ready":return"⚔️ Ready for Phase 2! Need 2-4 challenge matches.";default:return"Phase 2 Challenge Status"}},Yn=Hn();return i.createElement("div",{style:{background:"linear-gradient(135deg, rgba(0, 0, 0, 0.85), rgba(20, 20, 20, 0.9), rgba(0, 0, 0, 0.85))",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:s?"16px":"20px",padding:s?"6px":"12px",margin:s?"-15px 0 0 0":"13px auto",width:s?"100%":"98%",maxWidth:s?"none":"1600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4), 0 4px 16px rgba(255,255,255,0.1), inset 0 1px 0 rgba(255,255,255,0.1)",cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"flex-start",backdropFilter:"blur(8px)",overflow:"auto",maxHeight:"none",height:s?W?"auto":"60px":W?"380px":"160px",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"},onClick:()=>O(!W),onKeyDown:de=>{(de.key==="Enter"||de.key===" ")&&(de.preventDefault(),O(!W))},role:"button",tabIndex:"0","aria-label":W?"Collapse Phase 2 tracker":"Expand Phase 2 tracker"},i.createElement("div",{style:{position:"relative",textAlign:"center",marginBottom:s?"0px":"4px",padding:s?"6px":"8px",borderRadius:"12px",background:"linear-gradient(135deg, rgba(0, 0, 0, 0.7), rgba(20, 20, 20, 0.8))",border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 4px 16px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)"}},i.createElement("h3",{style:{margin:0,color:"#ffffff",fontSize:s?"0.8rem":"1.1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:s?"4px":"6px",flexWrap:"wrap",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",letterSpacing:"0.5px",minHeight:s?"2.5rem":"3rem"}},i.createElement("button",{onClick:de=>{de.stopPropagation(),z(!0)},"aria-label":"View Phase 1 results",role:"button",tabIndex:"0",style:{background:"linear-gradient(135deg, #22c55e, #16a34a, #15803d)",border:"2px solid rgba(255,255,255,0.8)",color:"#ffffff",fontSize:s?"0.5rem":"0.8rem",fontWeight:"bold",padding:s?"6px 10px":"8px 14px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",boxShadow:"0 4px 12px rgba(34, 197, 94, 0.4), inset 0 1px 0 rgba(255,255,255,0.3), 0 0 10px rgba(34, 197, 94, 0.2)",zIndex:10},onMouseEnter:de=>{de.target.style.background="linear-gradient(135deg, #4ade80, #22c55e, #16a34a)",de.target.style.transform="scale(1.05) translateY(-2px)",de.target.style.boxShadow="0 6px 16px rgba(34, 197, 94, 0.6), inset 0 1px 0 rgba(255,255,255,0.4), 0 0 15px rgba(34, 197, 94, 0.3)"},onMouseLeave:de=>{de.target.style.background="linear-gradient(135deg, #22c55e, #16a34a, #15803d)",de.target.style.transform="scale(1) translateY(0)",de.target.style.boxShadow="0 4px 12px rgba(34, 197, 94, 0.4), inset 0 1px 0 rgba(255,255,255,0.3), 0 0 10px rgba(34, 197, 94, 0.2)"}},"📊 PHASE 1 RESULTS"),i.createElement("span",{style:{fontSize:s?"0.9rem":"1.1rem",background:`linear-gradient(135deg, ${Yn}, ${Yn}dd, ${Yn})`,padding:s?"4px 8px":"6px 12px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2), 0 0 10px rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.3)",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontWeight:"bold"}},"Phase 2"),i.createElement("button",{onClick:de=>{de.stopPropagation(),U(!0)},"aria-label":"Open Phase 2 rules and information",role:"button",tabIndex:"0",style:{background:"linear-gradient(135deg, #ff4444, #cc3333, #aa2222)",border:"2px solid rgba(255,255,255,0.8)",color:"#ffffff",fontSize:s?"0.5rem":"0.8rem",fontWeight:"bold",padding:s?"6px 10px":"8px 14px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",boxShadow:"0 4px 12px rgba(255, 68, 68, 0.4), inset 0 1px 0 rgba(255,255,255,0.3), 0 0 10px rgba(255, 68, 68, 0.2)",zIndex:10},onMouseEnter:de=>{de.target.style.background="linear-gradient(135deg, #ff6666, #dd4444, #cc3333)",de.target.style.transform="scale(1.05) translateY(-2px)",de.target.style.boxShadow="0 6px 16px rgba(255, 68, 68, 0.6), inset 0 1px 0 rgba(255,255,255,0.4), 0 0 15px rgba(255, 68, 68, 0.3)"},onMouseLeave:de=>{de.target.style.background="linear-gradient(135deg, #ff4444, #cc3333, #aa2222)",de.target.style.transform="scale(1) translateY(0)",de.target.style.boxShadow="0 4px 12px rgba(255, 68, 68, 0.4), inset 0 1px 0 rgba(255,255,255,0.3), 0 0 10px rgba(255, 68, 68, 0.2)"}},"⚔️ RULES")),i.createElement("div",{style:{color:"#ffffff",fontSize:s?"0.7rem":"0.95rem",lineHeight:"1.1",marginTop:"2px",marginBottom:s?"2px":"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center"}},Kt()),i.createElement("div",{style:{position:s?"relative":"absolute",left:s?"auto":"8%",top:s?"auto":"50%",transform:s?"none":"translate(-50%, -50%)",cursor:"pointer",fontSize:s?"2.5rem":"3.2rem",transition:"all 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:s?"90px":"120px",lineHeight:1,background:"linear-gradient(135deg, rgba(255, 68, 68, 0.25), rgba(220, 53, 69, 0.2), rgba(200, 35, 51, 0.15))",border:"2px solid rgba(255, 68, 68, 0.6)",padding:s?"4px":"6px",borderRadius:s?"12px":"18px",zIndex:1,boxShadow:"0 6px 20px rgba(255, 68, 68, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 0 20px rgba(255, 68, 68, 0.2)",minWidth:s?"60px":"80px",minHeight:s?"75px":"90px",backdropFilter:"blur(8px)",margin:s?"8px auto":"0"},onClick:de=>{de.stopPropagation(),O(!0),x&&x()},"aria-label":"Open player search to schedule Phase 2 matches",role:"button",tabIndex:"0",onMouseEnter:de=>{de.currentTarget.style.transform="translate(-50%, -50%) scale(1.1)",de.currentTarget.style.background="rgba(255, 68, 68, 0.25)",de.currentTarget.style.boxShadow="0 4px 16px rgba(255, 68, 68, 0.5)",de.currentTarget.style.border="2px solid rgba(255, 68, 68, 0.6)"},onMouseLeave:de=>{de.currentTarget.style.transform="translate(-50%, -50%) scale(1)",de.currentTarget.style.background="rgba(255, 68, 68, 0.15)",de.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)",de.currentTarget.style.border="1px solid rgba(255, 68, 68, 0.4)"}},i.createElement("div",{style:{fontSize:s?"0.35rem":"0.5rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:s?"6px":"8px",textAlign:"center"}},"Today's Date"),i.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1}},i.createElement("div",{style:{fontSize:s?"0.6rem":"0.85rem"}},["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date().getDay()]),i.createElement("div",{style:{fontSize:s?"0.85rem":"1.4rem"}},(()=>{const de=new Date,nt=String(de.getMonth()+1).padStart(2,"0"),Ye=String(de.getDate()).padStart(2,"0"),Dt=String(de.getFullYear()).slice(-2);return`${nt}/${Ye}/${Dt}`})())),i.createElement("div",{style:{fontSize:s?"0.2rem":"0.45rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginTop:"auto",textAlign:"center",whiteSpace:"nowrap",background:"rgba(0, 0, 0, 0.7)",padding:s?"1px 2px":"2px 3px",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.3)"}},s?"Schedule":"Click to Schedule Match by Date")),i.createElement("div",{style:{position:s?"relative":"absolute",right:s?"auto":"8%",top:s?"auto":"50%",transform:s?"none":"translate(50%, -50%)",transition:"all 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",lineHeight:1,background:"linear-gradient(135deg, rgba(52, 152, 219, 0.25), rgba(41, 128, 185, 0.2), rgba(30, 100, 150, 0.15))",border:"2px solid rgba(52, 152, 219, 0.6)",padding:s?"3px":"5px",borderRadius:s?"10px":"16px",zIndex:1,boxShadow:"0 6px 20px rgba(52, 152, 219, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 0 20px rgba(52, 152, 219, 0.2)",minWidth:s?"60px":"80px",minHeight:s?"75px":"90px",backdropFilter:"blur(8px)",margin:s?"8px auto":"0"},title:"Proposal management - view pending and sent proposals",onMouseEnter:de=>{de.currentTarget.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.3), rgba(41, 128, 185, 0.25))",de.currentTarget.style.boxShadow="0 6px 20px rgba(52, 152, 219, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.2)",de.currentTarget.style.border="2px solid rgba(52, 152, 219, 0.7)",de.currentTarget.style.transform="translate(50%, -50%) scale(1.02)"},onMouseLeave:de=>{de.currentTarget.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.2), rgba(41, 128, 185, 0.15))",de.currentTarget.style.boxShadow="0 4px 16px rgba(52, 152, 219, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1)",de.currentTarget.style.border="2px solid rgba(52, 152, 219, 0.5)",de.currentTarget.style.transform="translate(50%, -50%) scale(1)"}},i.createElement("div",{style:{fontSize:s?"0.45rem":"0.65rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginBottom:s?"2px":"4px",textAlign:"center",whiteSpace:"nowrap"}},"📋 Proposals"),i.createElement("div",{style:{display:"flex",flexDirection:"column",gap:s?"2px":"4px",justifyContent:"center",width:"100%"}},i.createElement("button",{onClick:de=>{de.stopPropagation(),m&&m()},style:{background:"linear-gradient(135deg, #d35400 0%, #e67e22 50%, #f39c12 100%)",color:"#ffffff",border:"none",borderRadius:"6px",padding:s?"1px 2px":"3px 4px",fontSize:s?"0.35rem":"0.55rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(211, 84, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:de=>{de.target.style.background="linear-gradient(135deg, #e67e22 0%, #f39c12 50%, #f1c40f 100%)",de.target.style.transform="translateY(-2px) scale(1.02)",de.target.style.boxShadow="0 4px 12px rgba(211, 84, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.6), inset 0 -1px 0 rgba(0, 0, 0, 0.3)"},onMouseLeave:de=>{de.target.style.background="linear-gradient(135deg, #d35400 0%, #e67e22 50%, #f39c12 100%)",de.target.style.transform="translateY(0) scale(1)",de.target.style.boxShadow="0 2px 6px rgba(211, 84, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)"}},"📥 ",E," waiting for you"),i.createElement("button",{onClick:de=>{de.stopPropagation(),b&&b()},style:{background:"linear-gradient(135deg, #1e8449 0%, #27ae60 50%, #2ecc71 100%)",color:"#ffffff",border:"none",borderRadius:"6px",padding:s?"1px 2px":"3px 4px",fontSize:s?"0.35rem":"0.55rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(30, 132, 73, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:de=>{de.target.style.background="linear-gradient(135deg, #27ae60 0%, #2ecc71 50%, #58d68d 100%)",de.target.style.transform="translateY(-2px) scale(1.02)",de.target.style.boxShadow="0 4px 12px rgba(30, 132, 73, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.6), inset 0 -1px 0 rgba(0, 0, 0, 0.3)"},onMouseLeave:de=>{de.target.style.background="linear-gradient(135deg, #1e8449 0%, #27ae60 50%, #2ecc71 100%)",de.target.style.transform="translateY(0) scale(1)",de.target.style.boxShadow="0 2px 6px rgba(30, 132, 73, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)"}},"📤 ",w," waiting for opponents"))),i.createElement("div",{style:{color:"#ffffff",fontSize:s?"0.7rem":"0.9rem",fontWeight:"bold",marginTop:s?"4px":"2px",marginBottom:s?"2px":"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",lineHeight:"1.1",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",gap:s?"8px":"12px",flexWrap:"wrap"}},i.createElement("span",null,"⚔️ ",se,"/4 Matches"),i.createElement("span",null,"•"),i.createElement("span",{style:{color:Qe>0?"#4ade80":"#ef4444"}},Qe," Challenges Left"),i.createElement("span",null,"•"),i.createElement("span",{style:{color:Ie?"#4ade80":"#fbbf24"}},Ie?"Min ✅":`${V-se} to min`))),i.createElement("div",{style:{textAlign:"center",marginBottom:s?"0px":"4px"}},i.createElement("div",{style:{fontSize:s?"0.5rem":"0.9rem",color:"#ffffff",fontWeight:"bold",cursor:"pointer",padding:s?"1px 3px":"4px 8px",borderRadius:"6px",display:"inline-block",transition:"background-color 0.2s ease",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},onMouseEnter:de=>de.target.style.backgroundColor=`${Yn}20`,onMouseLeave:de=>de.target.style.backgroundColor="transparent"},W?"Hide Stats ▲":"Show Stats ▼")),W&&i.createElement(i.Fragment,null,i.createElement("div",{style:{marginBottom:s?"0.3rem":"0.5rem"}},i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:s?"0.4rem":"0.6rem",marginBottom:s?"0.3rem":"0.5rem"}},i.createElement("div",{onClick:de=>{de.stopPropagation(),x&&x()},style:{padding:s?"0.4rem":"0.6rem",background:"linear-gradient(135deg, rgba(255, 68, 68, 0.15), rgba(59, 130, 246, 0.1))",borderRadius:"8px",border:"1px solid rgba(255, 68, 68, 0.3)",textAlign:"center",cursor:"pointer",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},onMouseEnter:de=>{de.target.style.background="linear-gradient(135deg, rgba(255, 68, 68, 0.25), rgba(59, 130, 246, 0.2))",de.target.style.transform="translateY(-2px)",de.target.style.boxShadow="0 4px 12px rgba(255, 68, 68, 0.3)"},onMouseLeave:de=>{de.target.style.background="linear-gradient(135deg, rgba(255, 68, 68, 0.15), rgba(59, 130, 246, 0.1))",de.target.style.transform="translateY(0)",de.target.style.boxShadow="none"}},i.createElement("div",{style:{fontSize:s?"0.5rem":"0.85rem",fontWeight:"bold",color:"#ff4444",marginBottom:s?"3px":"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"⚔️ Phase 2 Progress"),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:s?"4px":"6px",fontSize:s?"0.4rem":"0.7rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginBottom:s?"3px":"4px"}},i.createElement("div",null,i.createElement("div",{style:{color:"#ff4444",fontSize:s?"0.35rem":"0.6rem"}},"Challenges"),i.createElement("div",null,se,"/4")),i.createElement("div",null,i.createElement("div",{style:{color:"#3b82f6",fontSize:s?"0.35rem":"0.6rem"}},"Defenses"),i.createElement("div",null,ut,"/2"))),i.createElement("div",{style:{width:"100%",height:s?"3px":"4px",background:"rgba(255,255,255,0.2)",borderRadius:"3px",overflow:"hidden",marginBottom:s?"2px":"3px",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.3)"}},i.createElement("div",{style:{width:`${se/pe*100}%`,height:"100%",background:`linear-gradient(90deg, ${xt(se,pe)}, ${xt(se,pe)}dd)`,borderRadius:"3px",transition:"width 0.4s ease",boxShadow:"0 0 4px rgba(255,255,255,0.3)"}})),i.createElement("div",{style:{fontSize:s?"0.35rem":"0.7rem",color:Ie?"#4ade80":"#fbbf24",fontWeight:"bold",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},Ie?"✅ Min met":`${V-se} to min`)),i.createElement("div",{style:{padding:s?"0.4rem":"0.6rem",background:"linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(255, 193, 7, 0.1))",borderRadius:"8px",border:"1px solid rgba(168, 85, 247, 0.3)",textAlign:"center",position:"relative",overflow:"hidden"}},i.createElement("div",{style:{fontSize:s?"0.5rem":"0.85rem",fontWeight:"bold",color:"#a855f7",marginBottom:s?"3px":"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"🎯 Challenge Limits"),i.createElement("div",{style:{fontSize:s?"0.45rem":"1rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginBottom:s?"3px":"4px"}},Qe," remaining"),i.createElement("div",{style:{fontSize:s?"0.35rem":"0.6rem",color:"#fbbf24",marginBottom:s?"2px":"3px"}},((pt=F.dynamicLimits)==null?void 0:pt.timesChallenged)||0," times challenged"),i.createElement("div",{style:{fontSize:s?"0.35rem":"0.7rem",color:Qe>0?"#4ade80":"#ef4444",fontWeight:"bold",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},He," issued")))),i.createElement("div",{style:{padding:s?"0.5rem":"0.8rem",background:"linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(22, 163, 74, 0.1))",border:"1px solid rgba(34, 197, 94, 0.4)",borderRadius:"8px",marginBottom:s?"0.4rem":"0.6rem",color:"#ffffff",boxShadow:"0 2px 8px rgba(34, 197, 94, 0.2)"}},i.createElement("div",{style:{fontSize:s?"0.45rem":"0.8rem",fontWeight:"bold",color:"#22c55e",marginBottom:s?"0.3rem":"0.5rem",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"📊 Current Record & Standings"),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:s?"0.4rem":"0.6rem",fontSize:s?"0.4rem":"0.7rem",color:"#ffffff",textAlign:"center",lineHeight:s?"1.3":"1.4"}},i.createElement("div",{style:{background:"rgba(255,255,255,0.1)",padding:s?"0.2rem":"0.3rem",borderRadius:"4px",border:"1px solid rgba(255,255,255,0.2)"}},i.createElement("div",{style:{fontWeight:"bold",color:"#22c55e",marginBottom:"2px"}},"Wins"),i.createElement("div",{style:{fontSize:s?"0.35rem":"0.6rem",fontWeight:"bold"}},(G==null?void 0:G.wins)||0)),i.createElement("div",{style:{background:"rgba(255,255,255,0.1)",padding:s?"0.2rem":"0.3rem",borderRadius:"4px",border:"1px solid rgba(255,255,255,0.2)"}},i.createElement("div",{style:{fontWeight:"bold",color:"#ef4444",marginBottom:"2px"}},"Losses"),i.createElement("div",{style:{fontSize:s?"0.35rem":"0.6rem",fontWeight:"bold"}},(G==null?void 0:G.losses)||0)),i.createElement("div",{style:{background:"rgba(255,255,255,0.1)",padding:s?"0.2rem":"0.3rem",borderRadius:"4px",border:"1px solid rgba(255,255,255,0.2)"}},i.createElement("div",{style:{fontWeight:"bold",color:"#3b82f6",marginBottom:"2px"}},"Win Rate"),i.createElement("div",{style:{fontSize:s?"0.35rem":"0.6rem",fontWeight:"bold"}},(G==null?void 0:G.winRate)||0,"%"))),i.createElement("div",{style:{marginTop:s?"0.3rem":"0.5rem",padding:s?"0.2rem":"0.3rem",background:"rgba(168, 85, 247, 0.2)",borderRadius:"4px",border:"1px solid rgba(168, 85, 247, 0.4)",textAlign:"center"}},i.createElement("div",{style:{fontWeight:"bold",color:"#a855f7",marginBottom:"2px",fontSize:s?"0.35rem":"0.6rem"}},"Current Standings Position"),i.createElement("div",{style:{fontSize:s?"0.4rem":"0.7rem",fontWeight:"bold"}},(G==null?void 0:G.position)||"N/A"))),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:s?"0.4rem":"0.6rem",marginBottom:s?"0.3rem":"0.5rem"}},i.createElement("div",{style:{padding:s?"0.4rem":"0.6rem",background:"rgba(255,255,255,0.1)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)",textAlign:"center",cursor:"pointer",transition:"background-color 0.2s ease"},onClick:de=>{de.stopPropagation(),x&&x()},onMouseEnter:de=>de.target.style.backgroundColor="rgba(255,255,255,0.15)",onMouseLeave:de=>de.target.style.backgroundColor="rgba(255,255,255,0.1)"},i.createElement("div",{style:{fontSize:s?"0.4rem":"0.7rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:s?"1px":"2px"}},"📅 Schedule Match"),i.createElement("div",{style:{fontSize:s?"0.35rem":"0.8rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:s?"1px":"2px"}},A.eligibleOpponentsCount," available"),i.createElement("div",{style:{fontSize:s?"0.35rem":"0.65rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click to schedule")),i.createElement("div",{style:{padding:s?"0.4rem":"0.6rem",background:"rgba(255,255,255,0.1)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)",textAlign:"center",cursor:"pointer",transition:"background-color 0.2s ease"},onClick:de=>{de.stopPropagation(),h&&h()},onMouseEnter:de=>de.target.style.backgroundColor="rgba(255,255,255,0.15)",onMouseLeave:de=>de.target.style.backgroundColor="rgba(255,255,255,0.1)"},i.createElement("div",{style:{fontSize:s?"0.4rem":"0.7rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:s?"1px":"2px"}},"🏆 View Matches"),i.createElement("div",{style:{fontSize:s?"0.35rem":"0.8rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:s?"1px":"2px"}},S.length," upcoming"),i.createElement("div",{style:{fontSize:s?"0.35rem":"0.65rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click for details"))),S.length>0&&i.createElement("div",{style:{marginBottom:s?"0.3rem":"0.5rem"}},i.createElement("div",{style:{fontSize:s?"0.4rem":"0.7rem",fontWeight:"bold",color:"#ffffff",marginBottom:s?"0.2rem":"0.4rem",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"Upcoming Matches"),i.createElement("div",{style:{maxHeight:s?"50px":"60px",overflowY:"auto",background:"rgba(0,0,0,0.3)",borderRadius:"4px",padding:s?"0.2rem":"0.4rem"}},S.slice(0,2).map((de,nt)=>{let Ye="";return de.senderName&&de.receiverName&&(Ye=de.senderName.trim().toLowerCase()===R.toLowerCase()?de.receiverName:de.senderName),i.createElement("div",{key:de._id||nt,style:{fontSize:s?"0.3rem":"0.6rem",color:"#ffffff",padding:s?"0.15rem 0.25rem":"0.25rem 0.4rem",marginBottom:s?"0.1rem":"0.15rem",background:"rgba(255,255,255,0.1)",borderRadius:"3px",cursor:"pointer",transition:"background-color 0.2s ease",textAlign:"center"},onClick:Dt=>{Dt.stopPropagation(),_&&_(de)},onMouseEnter:Dt=>Dt.target.style.backgroundColor="rgba(255,255,255,0.2)",onMouseLeave:Dt=>Dt.target.style.backgroundColor="rgba(255,255,255,0.1)"},"VS ",Ye||"Unknown"," - ",de.date||"No Date")}),S.length>2&&i.createElement("div",{style:{fontSize:s?"0.3rem":"0.6rem",color:"#e0e0e0",textAlign:"center",fontStyle:"italic",padding:s?"0.15rem":"0.25rem"}},"+",S.length-2," more..."))),i.createElement("div",{style:{padding:s?"0.4rem":"0.6rem",background:"linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(0,0,0,0.2))",borderRadius:"6px",border:"1px solid rgba(255, 193, 7, 0.3)",fontSize:s?"0.35rem":"0.65rem",color:"#ffffff",textAlign:"center",marginBottom:s?"0.3rem":"0.5rem"}},i.createElement("div",{style:{fontWeight:"bold",color:"#ffc107",marginBottom:"3px"}},"💡 Phase 2 Status"),i.createElement("div",{style:{fontSize:s?"0.3rem":"0.55rem",lineHeight:"1.3"}},Ie?i.createElement("span",{style:{color:"#4ade80"}},"✅ Minimum met (",se,"/4 matches)"):i.createElement("span",{style:{color:"#fbbf24"}},"📈 Need ",V-se," more to minimum"),Qe>0&&i.createElement("span",{style:{color:"#3b82f6"}}," • Can challenge ",Qe," more (max 4 spots higher)")))),i.createElement(MP,{isOpen:B,onClose:()=>U(!1),isMobile:s}),i.createElement(TP,{isOpen:M,onClose:()=>z(!1),phase1Stats:G,playerName:t,playerLastName:a,isMobile:s}))}const RP=({isOpen:t,onClose:a,match:e,onValidate:n,onReject:s})=>{const[l,c]=v.useState({actualDate:"",actualTime:"",actualLocation:"",winner:"",score:"",notes:"",witnesses:"",photos:null}),[d,p]=v.useState(!1);if(!t||!e)return null;const h=async b=>{b.preventDefault(),p(!0);try{if(!l.actualDate||!l.winner||!l.score){alert("Please fill in all required fields: Date, Winner, and Score");return}await n({matchId:e._id,...l}),a()}catch(x){console.error("Error validating match:",x),alert("Error validating match. Please try again.")}finally{p(!1)}},m=async()=>{if(window.confirm("Are you sure you want to reject this match completion? This will require the match to be replayed.")){p(!0);try{await s(e._id),a()}catch(b){console.error("Error rejecting match:",b),alert("Error rejecting match. Please try again.")}finally{p(!1)}}};return i.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3}},i.createElement("div",{style:{background:"#222",border:"2px solid #444",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"}},i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"}},i.createElement("h2",{style:{margin:0,color:"#fff"}},"🎯 Match Validation"),i.createElement("button",{onClick:a,style:{background:"none",border:"none",color:"#aaa",fontSize:"24px",cursor:"pointer"}},"×")),i.createElement("div",{style:{background:"#333",padding:"16px",borderRadius:"8px",marginBottom:"20px"}},i.createElement("h3",{style:{margin:"0 0 12px 0",color:"#fff"}},"Match Details"),i.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},i.createElement("div",null,i.createElement("strong",null,"Players:")," ",e.player1," vs ",e.player2),i.createElement("div",null,i.createElement("strong",null,"Scheduled Date:")," ",e.date),i.createElement("div",null,i.createElement("strong",null,"Location:")," ",e.location))),i.createElement("form",{onSubmit:h},i.createElement("div",{style:{marginBottom:"16px"}},i.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Actual Date Played * ",i.createElement("span",{style:{color:"#ff4444"}},"Required")),i.createElement("input",{type:"date",value:l.actualDate,onChange:b=>c({...l,actualDate:b.target.value}),style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"},required:!0})),i.createElement("div",{style:{marginBottom:"16px"}},i.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Actual Time Played"),i.createElement("input",{type:"time",value:l.actualTime,onChange:b=>c({...l,actualTime:b.target.value}),style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"}})),i.createElement("div",{style:{marginBottom:"16px"}},i.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Actual Location"),i.createElement("input",{type:"text",value:l.actualLocation,onChange:b=>c({...l,actualLocation:b.target.value}),placeholder:"Where was the match actually played?",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"}})),i.createElement("div",{style:{marginBottom:"16px"}},i.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Winner * ",i.createElement("span",{style:{color:"#ff4444"}},"Required")),i.createElement("select",{value:l.winner,onChange:b=>c({...l,winner:b.target.value}),style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"},required:!0},i.createElement("option",{value:""},"Select winner..."),i.createElement("option",{value:e.player1},e.player1),i.createElement("option",{value:e.player2},e.player2))),i.createElement("div",{style:{marginBottom:"16px"}},i.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Final Score * ",i.createElement("span",{style:{color:"#ff4444"}},"Required")),i.createElement("input",{type:"text",value:l.score,onChange:b=>c({...l,score:b.target.value}),placeholder:"e.g., 7-3, 8-2, etc.",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"},required:!0})),i.createElement("div",{style:{marginBottom:"16px"}},i.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Witnesses (optional)"),i.createElement("input",{type:"text",value:l.witnesses,onChange:b=>c({...l,witnesses:b.target.value}),placeholder:"Names of people who witnessed the match",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"}})),i.createElement("div",{style:{marginBottom:"20px"}},i.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Additional Notes"),i.createElement("textarea",{value:l.notes,onChange:b=>c({...l,notes:b.target.value}),placeholder:"Any additional details about the match...",rows:"3",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff",resize:"vertical"}})),i.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"}},i.createElement("button",{type:"button",onClick:m,disabled:d,style:{padding:"10px 16px",background:"#ff4444",border:"none",borderRadius:"6px",color:"#fff",cursor:d?"not-allowed":"pointer",opacity:d?.6:1}},d?"Rejecting...":"Reject Match"),i.createElement("button",{type:"submit",disabled:d,style:{padding:"10px 16px",background:"#00aa00",border:"none",borderRadius:"6px",color:"#fff",cursor:d?"not-allowed":"pointer",opacity:d?.6:1}},d?"Validating...":"Validate Match")))))};class LP extends i.Component{constructor(a){super(a),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(a){return{hasError:!0}}componentDidCatch(a,e){this.setState({error:a,errorInfo:e}),console.error("ErrorBoundary caught an error:",a,e)}render(){return this.state.hasError?i.createElement("div",{style:{padding:"20px",margin:"10px",border:"1px solid #ff6b6b",borderRadius:"8px",backgroundColor:"#fff5f5",color:"#d63031"}},i.createElement("h3",null,"Something went wrong."),i.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),i.createElement("br",null),this.state.errorInfo&&this.state.errorInfo.componentStack),i.createElement("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),style:{marginTop:"10px",padding:"8px 16px",backgroundColor:"#ff6b6b",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}},"Try again")):this.props.children}}function PP({isOpen:t,onClose:a,isMobile:e}){return t?i.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"10px"}},i.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"2px solid #4CAF50",borderRadius:"12px",width:e?"98%":"90%",maxWidth:"800px",height:e?"98%":"95%",display:"flex",flexDirection:"column",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",color:"#ffffff"}},i.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderBottom:"2px solid #4CAF50",flexShrink:0}},i.createElement("h2",{style:{margin:0,fontSize:e?"1.2rem":"1.5rem",color:"#ffffff",fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px",textAlign:"center"}},"🎯 Phase 1 Scheduled Opponents Rules"),i.createElement("button",{onClick:a,style:{position:"absolute",right:"20px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ffffff",fontSize:"2rem",cursor:"pointer",padding:"5px",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s ease"},onMouseEnter:n=>n.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:n=>n.target.style.backgroundColor="transparent"},"×")),i.createElement("div",{style:{flex:1,overflowY:"auto",padding:"25px",fontSize:e?"1rem":"1.1rem",lineHeight:"1.6"}},i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("h3",{style:{color:"#4CAF50",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"📅 Overview"),i.createElement("p",{style:{margin:"0 0 15px 0",color:"#e0e0e0"}},"Phase 1 covers Weeks 1-6 where each player is assigned specific opponents to schedule and complete matches with."),i.createElement("p",{style:{margin:"0 0 15px 0",color:"#e0e0e0"}},"This phase focuses on completing your assigned matches with maximum scheduling flexibility.")),i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("h3",{style:{color:"#4CAF50",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"👥 Opponent Assignment"),i.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Assigned Opponents:")," Each player is assigned 6 opponents at the start of the session"),i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Match Requirements:")," You must complete 1 match against each of your 6 assigned opponents"),i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Total Matches:")," 6 matches total during Phase 1"))),i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("h3",{style:{color:"#4CAF50",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"⏰ Scheduling Flexibility"),i.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"8px",padding:"15px",marginBottom:"15px"}},i.createElement("p",{style:{margin:"0 0 10px 0",color:"#4CAF50",fontWeight:"bold"}},"Maximum scheduling flexibility for your convenience:"),i.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},i.createElement("li",{style:{marginBottom:"5px"}},i.createElement("strong",null,"Any Day:")," Matches may be played on any day of the week"),i.createElement("li",{style:{marginBottom:"5px"}},i.createElement("strong",null,"Any Time:")," Matches may be played at any time that works for both players"),i.createElement("li",{style:{marginBottom:"5px"}},i.createElement("strong",null,"Any Location:")," Matches may be played at any safe, mutually agreed location")))),i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("h3",{style:{color:"#4CAF50",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"⏳ Completion Deadline"),i.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",padding:"15px",marginBottom:"15px"}},i.createElement("p",{style:{margin:"0 0 10px 0",color:"#ffc107",fontWeight:"bold"}},"All Phase 1 matches must be completed by the end of Week 6"),i.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},i.createElement("li",{style:{marginBottom:"5px"}},i.createElement("strong",null,"Deadline:")," End of Week 6 (Sunday at 11:59 PM)"),i.createElement("li",{style:{marginBottom:"5px"}},i.createElement("strong",null,"No Extensions:")," Phase 1 deadline is firm and cannot be extended"),i.createElement("li",{style:{marginBottom:"5px"}},i.createElement("strong",null,"Impact:")," Incomplete matches may affect your standings and Phase 2 eligibility")))),i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("h3",{style:{color:"#4CAF50",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"🎱 Match Rules"),i.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Standard Rules:")," All matches use the official CSI rule book"),i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Scoring:")," All scoring must be done with the BCAPL scoring app"),i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Payment:")," Standard match payment and fees apply"),i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"FargoRate:")," All matches are integrated with FargoRate for ratings"))),i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("h3",{style:{color:"#4CAF50",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}},"📋 Scheduling Process"),i.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Contact Opponents:")," Reach out to your assigned opponents to schedule matches"),i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Mutual Agreement:")," Both players must agree on date, time, and location"),i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Record Matches:")," All scheduled matches must be recorded in the League Scheduling Hub"),i.createElement("li",{style:{marginBottom:"8px"}},i.createElement("strong",null,"Communication:")," Use the message center to coordinate with opponents"))),i.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"8px",padding:"15px",marginTop:"20px"}},i.createElement("h4",{style:{color:"#ff4444",fontSize:e?"1rem":"1.1rem",margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"8px"}},"⚠️ Important Notes"),i.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0",fontSize:e?"0.85rem":"0.9rem"}},i.createElement("li",{style:{marginBottom:"5px"}},"Phase 1 results determine your standings position for Phase 2 challenges"),i.createElement("li",{style:{marginBottom:"5px"}},"Incomplete matches may result in forfeits and affect your overall standings"),i.createElement("li",{style:{marginBottom:"5px"}},"All matches must be completed and recorded before Phase 2 begins"),i.createElement("li",{style:{marginBottom:"5px"}},"Use the calendar feature to track your scheduled matches and deadlines")))),i.createElement("div",{style:{textAlign:"center",padding:"20px",borderTop:"1px solid rgba(255,255,255,0.2)",flexShrink:0}},i.createElement("button",{onClick:a,style:{background:"linear-gradient(135deg, #4CAF50, #45a049)",border:"none",color:"#ffffff",fontSize:e?"0.9rem":"1rem",fontWeight:"bold",padding:e?"10px 20px":"12px 25px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"},onMouseEnter:n=>{n.target.style.transform="translateY(-2px)",n.target.style.boxShadow="0 6px 12px rgba(0,0,0,0.4)"},onMouseLeave:n=>{n.target.style.transform="translateY(0)",n.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"}},"Got It! ✓")))):null}const BP=({isOpen:t,onClose:a,isMobile:e,playerName:n,playerLastName:s,completedMatches:l,totalRequiredMatches:c,playerStats:d,standings:p,timeLeft:h,deadlineStatus:m,phase1EndDate:b,allPlayers:x,selectedDivision:E})=>{const[w,S]=v.useState(null);v.useEffect(()=>{t&&x&&p&&_()},[t,x,p]);const _=()=>{if(!x||!p)return;const I=x.length,A=p.filter(K=>K.matchesCompleted&&K.matchesCompleted>0).length,T=p.reduce((K,X)=>K+(X.matchesCompleted||0),0),F=I*c,J=Math.round(T/F*100),H=Math.round(T/I/c*100),Z=p.filter(K=>K.matchesCompleted>0).sort((K,X)=>{const W=(K.matchesCompleted||0)/c;return(X.matchesCompleted||0)/c-W}).slice(0,5);S({totalPlayers:I,playersWithMatches:A,totalMatchesCompleted:T,totalMatchesRequired:F,leagueProgress:J,avgCompletion:H,topPerformers:Z})},C=()=>m==="passed"?"#e74c3c":m==="critical"?"#ff6b6b":m==="urgent"?"#ff8800":m==="warning"?"#ffaa00":"#4CAF50",D=()=>m==="passed"?"⏰":m==="critical"?"🚨":m==="urgent"||m==="warning"?"⚠️":"✅";return t?i.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(8px)"},onClick:a},i.createElement("div",{style:{background:"linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(20, 20, 20, 0.95))",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:e?"8px":"12px",padding:e?"8px":"12px",width:e?"88%":"75%",maxWidth:e?"none":"800px",maxHeight:e?"75vh":"70vh",overflow:"auto",boxShadow:"0 8px 32px rgba(0,0,0,0.5), 0 4px 16px rgba(255,255,255,0.1)",backdropFilter:"blur(12px)"},onClick:I=>I.stopPropagation()},i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e?"8px":"12px",paddingBottom:e?"6px":"8px",borderBottom:"1px solid rgba(255,255,255,0.2)"}},i.createElement("div",{style:{display:"flex",alignItems:"center",gap:e?"4px":"8px"}},i.createElement("div",{style:{fontSize:e?"1rem":"1.2rem",color:C()}},D()),i.createElement("h2",{style:{margin:0,color:"#ffffff",fontSize:e?"0.8rem":"1.1rem",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.8)"}},"Phase 1 Overview")),i.createElement("button",{onClick:a,style:{background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.3)",color:"#ffffff",fontSize:e?"0.9rem":"1.1rem",cursor:"pointer",padding:e?"4px 8px":"6px 10px",borderRadius:"4px",transition:"all 0.2s ease",fontWeight:"bold"},onMouseEnter:I=>I.target.style.background="rgba(255,255,255,0.2)",onMouseLeave:I=>I.target.style.background="rgba(255,255,255,0.1)"},"Close")),i.createElement("div",{style:{display:"grid",gridTemplateColumns:e?"1fr":"1fr 1fr",gap:e?"8px":"12px"}},i.createElement("div",{style:{background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",padding:e?"8px":"12px",border:"1px solid rgba(255,255,255,0.15)"}},i.createElement("h3",{style:{margin:"0 0 8px 0",color:"#ffffff",fontSize:e?"0.7rem":"0.9rem",fontWeight:"bold",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"Your Status"),i.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"4px",padding:e?"6px":"8px",marginBottom:e?"6px":"8px"}},i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"}},i.createElement("span",{style:{color:"#ffffff",fontSize:e?"0.7rem":"0.9rem",fontWeight:"600"}},"Progress"),i.createElement("span",{style:{color:"#4CAF50",fontSize:e?"0.7rem":"0.9rem",fontWeight:"bold"}},l.length,"/",c)),i.createElement("div",{style:{width:"100%",height:e?"6px":"8px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",overflow:"hidden"}},i.createElement("div",{style:{width:`${Math.round(l.length/c*100)}%`,height:"100%",background:`linear-gradient(90deg, ${C()}, ${C()}dd)`,borderRadius:"4px",transition:"width 0.4s ease"}}))),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:e?"6px":"8px"}},i.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"6px",padding:e?"6px":"8px",textAlign:"center"}},i.createElement("div",{style:{color:"#cccccc",fontSize:e?"0.6rem":"0.8rem",marginBottom:"3px"}},"Record"),i.createElement("div",{style:{color:"#ffffff",fontSize:e?"0.8rem":"1rem",fontWeight:"bold"}},(d==null?void 0:d.wins)||0,"-",(d==null?void 0:d.losses)||0),i.createElement("div",{style:{color:"#4CAF50",fontSize:e?"0.6rem":"0.8rem",fontWeight:"600"}},(d==null?void 0:d.winRate)||0,"%")),i.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"6px",padding:e?"6px":"8px",textAlign:"center"}},i.createElement("div",{style:{color:"#cccccc",fontSize:e?"0.6rem":"0.8rem",marginBottom:"3px"}},"Position"),i.createElement("div",{style:{color:"#ffffff",fontSize:e?"0.8rem":"1rem",fontWeight:"bold"}},(d==null?void 0:d.position)||"N/A"))),i.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"4px",padding:e?"6px":"8px",marginTop:e?"6px":"8px",textAlign:"center"}},i.createElement("div",{style:{color:"#cccccc",fontSize:e?"0.6rem":"0.8rem",marginBottom:"4px"}},"Time Remaining"),i.createElement("div",{style:{color:C(),fontSize:e?"0.8rem":"1rem",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},h!=null&&h.passed?"DEADLINE PASSED":(h==null?void 0:h.days)>0?`${h.days} days`:(h==null?void 0:h.hours)>0?`${h.hours} hours`:"Less than 1 hour"),b&&i.createElement("div",{style:{color:"#cccccc",fontSize:e?"0.5rem":"0.7rem",marginTop:"2px"}},"Ends: ",Na(b,"MMM d, yyyy")))),i.createElement("div",{style:{background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",padding:e?"8px":"12px",border:"1px solid rgba(255,255,255,0.15)"}},i.createElement("h3",{style:{margin:"0 0 8px 0",color:"#ffffff",fontSize:e?"0.7rem":"0.9rem",fontWeight:"bold",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"League Status"),w?i.createElement(i.Fragment,null,i.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"4px",padding:e?"6px":"8px",marginBottom:e?"6px":"8px"}},i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"}},i.createElement("span",{style:{color:"#ffffff",fontSize:e?"0.7rem":"0.9rem",fontWeight:"600"}},"League Progress"),i.createElement("span",{style:{color:"#4CAF50",fontSize:e?"0.7rem":"0.9rem",fontWeight:"bold"}},w.leagueProgress,"%")),i.createElement("div",{style:{width:"100%",height:e?"6px":"8px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",overflow:"hidden"}},i.createElement("div",{style:{width:`${w.leagueProgress}%`,height:"100%",background:"linear-gradient(90deg, #4CAF50, #45a049)",borderRadius:"4px",transition:"width 0.4s ease"}}))),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:e?"4px":"6px",marginBottom:e?"6px":"8px"}},i.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"4px",padding:e?"4px":"6px",textAlign:"center"}},i.createElement("div",{style:{color:"#cccccc",fontSize:e?"0.5rem":"0.7rem",marginBottom:"2px"}},"Active Players"),i.createElement("div",{style:{color:"#ffffff",fontSize:e?"0.7rem":"0.9rem",fontWeight:"bold"}},w.playersWithMatches,"/",w.totalPlayers)),i.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"4px",padding:e?"4px":"6px",textAlign:"center"}},i.createElement("div",{style:{color:"#cccccc",fontSize:e?"0.5rem":"0.7rem",marginBottom:"2px"}},"Avg Completion"),i.createElement("div",{style:{color:"#ffffff",fontSize:e?"0.7rem":"0.9rem",fontWeight:"bold"}},w.avgCompletion,"%"))),i.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"4px",padding:e?"6px":"8px"}},i.createElement("div",{style:{color:"#ffffff",fontSize:e?"0.7rem":"0.9rem",fontWeight:"600",marginBottom:"4px",textAlign:"center"}},"Top Performers"),i.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"4px"}},w.topPerformers.map((I,A)=>i.createElement("div",{key:A,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 8px",background:"rgba(255,255,255,0.03)",borderRadius:"4px"}},i.createElement("span",{style:{color:"#ffffff",fontSize:e?"0.5rem":"0.7rem",fontWeight:A===0?"bold":"normal"}},A+1,". ",I.name),i.createElement("span",{style:{color:"#4CAF50",fontSize:e?"0.5rem":"0.7rem",fontWeight:"600"}},Math.round(I.matchesCompleted/c*100),"%")))))):i.createElement("div",{style:{color:"#cccccc",textAlign:"center",fontSize:e?"0.9rem":"1.1rem",padding:"20px"}},"Loading league statistics..."))),i.createElement("div",{style:{marginTop:e?"8px":"12px",paddingTop:e?"6px":"8px",borderTop:"1px solid rgba(255,255,255,0.2)",textAlign:"center"}},i.createElement("div",{style:{color:"#cccccc",fontSize:e?"0.5rem":"0.7rem",fontStyle:"italic",marginBottom:e?"8px":"12px"}},"Phase 1 ends when all players complete ",c," matches or the deadline passes"),i.createElement("button",{onClick:a,style:{background:"linear-gradient(135deg, #4CAF50, #45a049)",border:"none",color:"#ffffff",fontSize:e?"0.8rem":"1rem",cursor:"pointer",padding:e?"8px 16px":"10px 20px",borderRadius:"6px",transition:"all 0.2s ease",fontWeight:"bold",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",minWidth:e?"100px":"120px"},onMouseEnter:I=>I.target.style.transform="translateY(-2px)",onMouseLeave:I=>I.target.style.transform="translateY(0)"},"Close Overview")))):null},dx={findOverlappingAvailability(t,a){try{console.log("Smart Match Debug - Parsing P1 availability:",t);let e;typeof t=="string"?e=Lg(t):typeof t=="object"&&t!==null?e=t:e={Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},console.log("Smart Match Debug - Parsed P1 availability:",e),console.log("Smart Match Debug - Parsing P2 availability:",a);let n;typeof a=="string"?n=Lg(a):typeof a=="object"&&a!==null?n=a:n={Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},console.log("Smart Match Debug - Parsed P2 availability:",n);const s={};return["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].forEach(l=>{s[l]=[],e[l]&&n[l]&&(console.log(`Smart Match Debug - Checking ${l}: P1 slots:`,e[l],"P2 slots:",n[l]),e[l].forEach(c=>{n[l].forEach(d=>{const p=this.findTimeOverlap(c,d);p&&(s[l].push(p),console.log(`Smart Match Debug - Found overlap on ${l}:`,p))})}))}),console.log("Smart Match Debug - Final overlapping slots:",s),s}catch(e){return console.error("Error parsing availability:",e),{Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]}}},findTimeOverlap(t,a){console.log("Smart Match Debug - Finding overlap between:",t,"and",a);const[e,n]=t.split(" - "),[s,l]=a.split(" - ");console.log("Smart Match Debug - Parsed times:",{start1:e,end1:n,start2:s,end2:l});const c=this.parseTime(e),d=this.parseTime(n),p=this.parseTime(s),h=this.parseTime(l);console.log("Smart Match Debug - Parsed minutes:",{start1Time:c,end1Time:d,start2Time:p,end2Time:h});const m=Math.max(c,p),b=Math.min(d,h);if(console.log("Smart Match Debug - Overlap calculation:",{overlapStart:m,overlapEnd:b}),m<b){const x=`${this.formatTime(m)} - ${this.formatTime(b)}`;return console.log("Smart Match Debug - Found overlap:",x),x}return console.log("Smart Match Debug - No overlap found"),null},parseTime(t){console.log("Smart Match Debug - Parsing time:",t);let a=t.trim().toLowerCase(),e="am";a.includes("pm")?(e="pm",a=a.replace("pm","")):a.includes("am")&&(e="am",a=a.replace("am",""));let n,s=0;a.includes(":")?[n,s]=a.split(":").map(Number):a.length<=2?(n=parseInt(a),s=0):(n=parseInt(a.slice(0,-2)),s=parseInt(a.slice(-2)));let l=n;e==="pm"&&n!==12&&(l+=12),e==="am"&&n===12&&(l=0);const c=l*60+s;return console.log("Smart Match Debug - Parsed time result:",{timeStr:t,hours:n,minutes:s,period:e,hour24:l,result:c}),c},formatTime(t){const a=Math.floor(t/60),e=t%60;let n="AM",s=a;return a>=12&&(n="PM",a>12&&(s=a-12)),s===0&&(s=12),`${s}:${e.toString().padStart(2,"0")} ${n}`},calculateConfidenceScore(t,a,e){let n=0;const s=Object.values(e).flat().length;n+=s*10;const l=Object.keys(e).filter(c=>e[c].length>0).length;if(n+=l*5,Object.values(e).flat().forEach(c=>{const[d,p]=c.split(" - "),h=this.parseTime(p)-this.parseTime(d);h>=120&&(n+=5),h>=180&&(n+=5)}),t.locations&&a.locations){const c=typeof t.locations=="string"?t.locations.split(`
`).map(h=>h.trim()).filter(Boolean):Array.isArray(t.locations)?t.locations:[],d=typeof a.locations=="string"?a.locations.split(`
`).map(h=>h.trim()).filter(Boolean):Array.isArray(a.locations)?a.locations:[],p=c.filter(h=>d.includes(h));n+=p.length*10}return Math.min(n,100)},findOptimalLocation(t,a){if(!t.locations||!a.locations)return null;const e=typeof t.locations=="string"?t.locations.split(`
`).map(l=>l.trim()).filter(Boolean):Array.isArray(t.locations)?t.locations:[],n=typeof a.locations=="string"?a.locations.split(`
`).map(l=>l.trim()).filter(Boolean):Array.isArray(a.locations)?a.locations:[],s=e.filter(l=>n.includes(l));return s.length>0?s[0]:null},checkForConflicts(t,a,e){const n=[];return e.forEach(s=>{(s.player1===t.firstName||s.player2===t.firstName||s.player1===a.firstName||s.player2===a.firstName)&&n.push(s)}),n},generateSuggestions(t,a,e=[]){console.log("Smart Match Debug - Player 1:",t),console.log("Smart Match Debug - Player 2:",a);const n=`Day: Monday, Available From: 6:00 PM, Available Until: 10:00 PM
Day: Tuesday, Available From: 6:00 PM, Available Until: 10:00 PM
Day: Wednesday, Available From: 6:00 PM, Available Until: 10:00 PM
Day: Thursday, Available From: 6:00 PM, Available Until: 10:00 PM
Day: Friday, Available From: 6:00 PM, Available Until: 10:00 PM
Day: Saturday, Available From: 2:00 PM, Available Until: 8:00 PM`,s=t.availability||n,l=a.availability||n;console.log("Smart Match Debug - P1 Availability:",s),console.log("Smart Match Debug - P2 Availability:",l);const c=this.findOverlappingAvailability(s,l);console.log("Smart Match Debug - Overlapping Slots:",c);const d=this.calculateConfidenceScore(t,a,c),p=this.findOptimalLocation(t,a),h=this.checkForConflicts(t,a,e),m=[];Object.entries(c).forEach(([E,w])=>{w.forEach(S=>{m.push({day:E,timeSlot:S,location:p,confidence:Math.min(d+w.length*2,100),player1:t.firstName,player2:a.firstName})})}),m.sort((E,w)=>w.confidence-E.confidence);const b=m.slice(0,3),x=!t.availability||!a.availability;return{suggestions:b,confidence:d,conflicts:h,message:b.length>0?`Found ${m.length} potential match times, showing top ${b.length}${x?" (using default availability)":""}`:"No overlapping availability found"}},generateQuickProposal(t,a,e){const n={Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday",Sun:"Sunday"};return{player1:a.firstName,player2:e.firstName,proposedDate:n[t.day],proposedTime:t.timeSlot,proposedLocation:t.location||"TBD",confidence:t.confidence,message:`Smart Match Suggestion: ${n[t.day]} at ${t.timeSlot}${t.location?` at ${t.location}`:""}`}}},OP=({isOpen:t,onClose:a,player1:e,player2:n,upcomingMatches:s=[],isMobile:l=!1,selectedDivision:c,phase:d,senderName:p,senderEmail:h,onProposalComplete:m})=>{const[b,x]=v.useState([]),[E,w]=v.useState(!1),[S,_]=v.useState(null),[C,D]=v.useState(!1),[I,A]=v.useState(!1),[T,F]=v.useState(null);v.useEffect(()=>{t&&e&&n&&J()},[t,e,n]);const J=async()=>{w(!0),x([]),_(null);try{await new Promise(O=>setTimeout(O,1e3));const W=dx.generateSuggestions(e,n,s);x(W.suggestions),w(!1)}catch(W){console.error("Error generating suggestions:",W),w(!1)}},H=W=>{_(W);const O=dx.generateQuickProposal(W,e,n);F({player:n,day:{Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat",Sunday:"Sun"}[O.proposedDate]||O.proposedDate,slot:O.proposedTime,selectedDivision:c,phase:d,prefilledData:O}),A(!0)},Z=()=>{x([]),_(null),a()},K=W=>W>=80?"#dc2626":W>=60?"#f59e0b":"#6b7280",X=W=>W>=80?"High":W>=60?"Medium":"Low";return t?i.createElement(Rn,{open:t,onClose:Z,title:`Smart Match: ${e==null?void 0:e.firstName} vs ${n==null?void 0:n.firstName}`,isMobile:l},i.createElement("div",{style:{padding:"20px",maxHeight:"70vh",overflowY:"auto",backgroundColor:"#1f2937",color:"#f9fafb"}},E&&i.createElement("div",{style:{textAlign:"center",padding:"40px"}},i.createElement(XE,null),i.createElement("p",{style:{marginTop:"16px",color:"#9ca3af"}},"Analyzing availability and generating suggestions...")),!E&&b.length===0&&i.createElement("div",{style:{textAlign:"center",padding:"40px",color:"#9ca3af"}},i.createElement("h3",{style:{color:"#f9fafb"}},"No Match Suggestions Found"),i.createElement("p",null,"No overlapping availability was found between the two players."),i.createElement("p",{style:{fontSize:"14px",marginTop:"8px"}},"Make sure both players have availability data in the system."),i.createElement("button",{onClick:()=>D(!0),style:{marginTop:"16px",padding:"10px 20px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"6px",fontWeight:"500",cursor:"pointer",fontSize:"14px",transition:"all 0.3s ease"},onMouseEnter:W=>W.target.style.backgroundColor="#b91c1c",onMouseLeave:W=>W.target.style.backgroundColor="#dc2626"},"📅 View ",n==null?void 0:n.firstName,"'s Availability & Send Proposal")),!E&&b.length>0&&i.createElement(i.Fragment,null,i.createElement("div",{style:{marginBottom:"20px",textAlign:"center"}},i.createElement("h3",{style:{margin:"0 0 8px 0",color:"#f9fafb"}},"Found ",b.length," potential match times"),i.createElement("p",{style:{margin:0,color:"#9ca3af",fontSize:"14px"}},"Select a suggestion below to create a match proposal")),i.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"12px"}},b.map((W,O)=>i.createElement("div",{key:O,style:{border:`2px solid ${S===W?"#dc2626":"#374151"}`,borderRadius:"8px",padding:"16px",cursor:"pointer",backgroundColor:"#374151",transition:"all 0.3s ease",boxShadow:S===W?"0 4px 12px rgba(220, 38, 38, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},onClick:()=>H(W)},i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}},i.createElement("div",{style:{flex:1}},i.createElement("h4",{style:{margin:"0 0 8px 0",color:"#f9fafb",fontWeight:"600"}},W.day==="Mon"?"Monday":W.day==="Tue"?"Tuesday":W.day==="Wed"?"Wednesday":W.day==="Thu"?"Thursday":W.day==="Fri"?"Friday":"Saturday"),i.createElement("p",{style:{margin:"0 0 4px 0",fontSize:"16px",fontWeight:"500",color:"#e5e7eb"}},W.timeSlot),W.location&&i.createElement("p",{style:{margin:0,color:"#9ca3af",fontSize:"14px"}},"📍 ",W.location)),i.createElement("div",{style:{padding:"6px 12px",borderRadius:"6px",backgroundColor:K(W.confidence),color:"white",fontSize:"12px",fontWeight:"600",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}},X(W.confidence)," (",W.confidence,"%)")))))),i.createElement("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid #374151",display:"flex",justifyContent:"space-between",alignItems:"center"}},i.createElement("button",{onClick:()=>D(!0),style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"6px",fontWeight:"500",cursor:"pointer",fontSize:"14px",transition:"all 0.3s ease"},onMouseEnter:W=>W.target.style.backgroundColor="#b91c1c",onMouseLeave:W=>W.target.style.backgroundColor="#dc2626"},"📅 View ",n==null?void 0:n.firstName,"'s Availability & Send Proposal"),i.createElement("button",{onClick:Z,style:{padding:"10px 20px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"6px",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:W=>W.target.style.backgroundColor="#4b5563",onMouseLeave:W=>W.target.style.backgroundColor="#6b7280"},"Close")),C&&n&&i.createElement(_p,{onClose:()=>{D(!1)},player:n,onProposeMatch:(W,O)=>{F({player:n,day:W,slot:O,selectedDivision:c,phase:d}),A(!0),D(!1)},selectedDivision:c,phase:d}),I&&T&&i.createElement(Rp,{player:T.player,day:T.day,slot:T.slot,selectedDivision:T.selectedDivision,phase:T.phase||d,onClose:()=>A(!1),senderName:p,senderEmail:h,onProposalComplete:()=>{A(!1),F(null),m&&m()}}))):null};function tS({isOpen:t,onClose:a,onSuccess:e,isMobile:n=!1,existingPlayer:s=null,isAdmin:l=!1}){const[c,d]=v.useState({firstName:"",lastName:"",email:"",phone:"",textNumber:"",preferredContacts:[],emergencyContactName:"",emergencyContactPhone:"",availability:{Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},locations:"",pin:"",paymentStatus:"pending",division:""}),[p,h]=v.useState(1),[m,b]=v.useState(!1),[x,E]=v.useState(""),[w,S]=v.useState(""),[_,C]=v.useState({}),[D,I]=v.useState([]),[A,T]=v.useState([]),[F,J]=v.useState(""),H=["10:00 AM - 12:00 PM","12:00 PM - 2:00 PM","2:00 PM - 4:00 PM","4:00 PM - 6:00 PM","6:00 PM - 8:00 PM","8:00 PM - 10:00 PM","10:00 PM - 12:00 AM","Other (specify)"],Z=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],K=[{value:"email",label:"Email"},{value:"phone",label:"Phone Call"},{value:"text",label:"Text Message"}],X=async()=>{let V=0;const pe=100;for(;V<pe;){const Ie=Math.floor(1e3+Math.random()*9e3).toString();try{const fe=await fetch(`${Pe}/api/users/check-pin/${Ie}`);if(fe.ok&&!(await fe.json()).exists)return Ie}catch(fe){return console.error("Error checking PIN uniqueness:",fe),Ie}V++}return Math.floor(1e3+Math.random()*9e3).toString()+Date.now().toString().slice(-1)};v.useEffect(()=>{W()},[]),v.useEffect(()=>{if(s&&(d({firstName:s.firstName||"",lastName:s.lastName||"",email:s.email||"",phone:s.phone||"",textNumber:s.textNumber||"",preferredContacts:s.preferredContacts||[],emergencyContactName:s.emergencyContactName||"",emergencyContactPhone:s.emergencyContactPhone||"",availability:s.availability||{Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},locations:s.locations||"",pin:s.pin||"",confirmPin:s.pin||"",division:s.division||""}),s.locations)){const V=s.locations.split(`
`).map(fe=>fe.trim()).filter(fe=>fe),pe=[],Ie=[];V.forEach(fe=>{D.some(Ve=>Ve.name===fe)?pe.push(fe):Ie.push(fe)}),T(pe),J(Ie.join(`
`))}},[s,D]);const W=async()=>{try{const V=await fetch(`${Pe}/api/locations`);if(V.ok){const pe=await V.json();I(pe.locations||[])}}catch(V){console.error("Failed to load locations:",V)}},O=(V,pe)=>{d(Ie=>({...Ie,[V]:pe})),E("")},B=(V,pe,Ie)=>{d(fe=>({...fe,availability:{...fe.availability,[V]:Ie?[...fe.availability[V],pe]:fe.availability[V].filter(Fe=>Fe!==pe)}}))},U=(V,pe,Ie)=>{d(fe=>{const Fe=fe.availability[V];if(Fe.includes("Other (specify)")&&pe&&Ie){const He=`${pe} - ${Ie}`,Qe=Fe.map(ut=>ut==="Other (specify)"?He:ut);return{...fe,availability:{...fe.availability,[V]:Qe}}}return fe})},M=(V,pe)=>{d(Ie=>({...Ie,preferredContacts:pe?[...Ie.preferredContacts,V]:Ie.preferredContacts.filter(fe=>fe!==V)}))},z=(V,pe)=>{T(Ie=>pe?[...Ie,V]:Ie.filter(fe=>fe!==V))},G=V=>{J(V)},q=()=>{const V=[...A];if(F.trim()){const pe=F.split(`
`).map(Ie=>Ie.trim()).filter(Ie=>Ie.length>0);V.push(...pe)}return V.join(`
`)},R=V=>{if(l)return null;switch(V){case 1:return c.firstName.trim()?c.lastName.trim()?c.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email)?c.phone.trim()?null:"Phone number is required":"Valid email is required":"Email is required":"Last name is required":"First name is required";case 2:return Object.values(c.availability).some(fe=>fe.length>0)?null:"Please select at least one time slot";case 3:return q().trim()?null:"At least one location is required";case 4:return c.preferredContacts.length===0?"Please select at least one contact preference":null;case 5:return null;default:return null}},j=()=>{const V=R(p);if(V){E(V);return}E(""),p<5?h(p+1):ae()},ne=()=>{E(""),p>1&&h(p-1)},ae=async()=>{var pe;const V=R(p);if(V){E(V);return}b(!0),E("");try{const Ie=await X(),Fe={...l?{firstName:c.firstName.trim()||"Test",lastName:c.lastName.trim()||"Player",email:c.email.trim()||`test${Date.now()}@example.com`,phone:c.phone.trim()||"555-1234",textNumber:c.textNumber||"",emergencyContactName:c.emergencyContactName||"",emergencyContactPhone:c.emergencyContactPhone||"",preferredContacts:c.preferredContacts.length>0?c.preferredContacts:["email"],availability:c.availability,locations:q()||"Test Location",pin:Ie,paymentStatus:"pending",division:"",notes:c.notes||"Created by admin for testing"}:{...c,pin:Ie,paymentStatus:"pending",division:""},confirmPin:void 0},Ve=s?`${Pe}/api/users/${s.id}/profile`:`${Pe}/api/users/register`,Qe=await fetch(Ve,{method:s?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fe)});if(!Qe.ok){const Pt=await Qe.json();throw new Error(Pt.message||"Registration failed")}const ut=await Qe.json();if(!s&&!l)try{const Pt=await fetch(`${Pe}/api/payment-config/enabled-methods`);let xt={enabledMethods:[],registrationFee:30,additionalInstructions:"",contactInfo:{}};Pt.ok&&(xt=await Pt.json()),await nk({to_email:c.email,to_name:`${c.firstName} ${c.lastName}`,registrationId:((pe=ut.user)==null?void 0:pe.id)||ut.id||`REG-${Date.now()}`,registrationDate:new Date().toLocaleDateString(),registrationFee:xt.registrationFee||30,paymentMethods:xt.enabledMethods||[],additionalInstructions:xt.additionalInstructions||"",contactInfo:xt.contactInfo||{}}),console.log("Payment instructions email sent successfully")}catch(Pt){console.error("Failed to send payment instructions email:",Pt)}S(s?"Profile updated successfully!":l?"Test player created successfully!":"Registration submitted successfully! Payment instructions have been sent to your email."),setTimeout(()=>{e&&e(ut),a()},1500)}catch(Ie){E(Ie.message||"An error occurred during registration")}finally{b(!1)}},se=()=>{switch(p){case 1:return i.createElement("div",{style:{padding:"10px"}},i.createElement("h3",{style:{color:"#e53e3e",marginBottom:"20px",textAlign:"center",fontSize:"20px"}},"Personal Information"),i.createElement("div",{style:{display:"grid",gap:"15px"}},i.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"1fr 1fr",gap:"15px"}},i.createElement("div",null,i.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold",fontSize:"16px"}},"First Name *"),i.createElement("input",{type:"text",value:c.firstName,onChange:V=>O("firstName",V.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"18px"},placeholder:"Enter first name"})),i.createElement("div",null,i.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold",fontSize:"16px"}},"Last Name *"),i.createElement("input",{type:"text",value:c.lastName,onChange:V=>O("lastName",V.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"18px"},placeholder:"Enter last name"}))),i.createElement("div",null,i.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold",fontSize:"16px"}},"Email Address *"),i.createElement("input",{type:"email",value:c.email,onChange:V=>O("email",V.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"18px"},placeholder:"Enter email address"})),i.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"1fr 1fr",gap:"15px"}},i.createElement("div",null,i.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold",fontSize:"16px"}},"Phone Number *"),i.createElement("input",{type:"tel",value:c.phone,onChange:V=>O("phone",V.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"18px"},placeholder:"Enter phone number"})),i.createElement("div",null,i.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold",fontSize:"16px"}},"Text Number (if different)"),i.createElement("input",{type:"tel",value:c.textNumber,onChange:V=>O("textNumber",V.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"18px"},placeholder:"Optional text number"}))),i.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"1fr 1fr",gap:"15px"}},i.createElement("div",null,i.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Emergency Contact Name"),i.createElement("input",{type:"text",value:c.emergencyContactName,onChange:V=>O("emergencyContactName",V.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"16px"},placeholder:"Emergency contact name"})),i.createElement("div",null,i.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Emergency Contact Phone"),i.createElement("input",{type:"tel",value:c.emergencyContactPhone,onChange:V=>O("emergencyContactPhone",V.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"16px"},placeholder:"Emergency contact phone"})))));case 2:return i.createElement("div",{style:{padding:"10px"}},i.createElement("h3",{style:{color:"#e53e3e",marginBottom:"15px",textAlign:"center",fontSize:"18px"}},"Availability Schedule"),i.createElement("p",{style:{color:"#ccc",textAlign:"center",marginBottom:"15px",fontSize:"14px"}},"Select the time slots when you're available to play matches"),i.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"repeat(2, 1fr)",gap:"10px",maxHeight:"50vh",overflowY:"auto"}},Z.map(V=>i.createElement("div",{key:V,style:{background:"rgba(255,255,255,0.05)",padding:"8px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}},i.createElement("h4",{style:{color:"#e53e3e",marginBottom:"6px",textAlign:"center",fontSize:"16px",fontWeight:"bold"}},V==="Mon"?"Monday":V==="Tue"?"Tuesday":V==="Wed"?"Wednesday":V==="Thu"?"Thursday":V==="Fri"?"Friday":V==="Sat"?"Saturday":"Sunday"),i.createElement("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"repeat(2, 1fr)",gap:"6px",justifyContent:"center",alignItems:"center",padding:"0 6px"}},H.map(pe=>{var Ie,fe,Fe,Ve;return i.createElement("div",{key:pe},i.createElement("label",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"4px 8px",borderRadius:"6px",background:c.availability[V].includes(pe)?"rgba(229, 62, 62, 0.2)":"rgba(255,255,255,0.05)",border:c.availability[V].includes(pe)?"1px solid #e53e3e":"1px solid rgba(255,255,255,0.1)",cursor:"pointer",transition:"all 0.2s ease",fontSize:"12px",width:"100%",minWidth:"110px",margin:"0 auto",boxShadow:c.availability[V].includes(pe)?"0 2px 4px rgba(229, 62, 62, 0.3)":"0 1px 2px rgba(0,0,0,0.1)"}},i.createElement("input",{type:"checkbox",checked:c.availability[V].includes(pe),onChange:He=>B(V,pe,He.target.checked),style:{marginRight:"4px",transform:"scale(1)"}}),i.createElement("span",{style:{color:"#fff",fontSize:"12px"}},pe)),pe==="Other (specify)"&&c.availability[V].includes(pe)&&i.createElement("div",{style:{marginTop:"6px",padding:"8px",background:"rgba(229, 62, 62, 0.1)",borderRadius:"4px",border:"1px solid rgba(229, 62, 62, 0.3)"}},i.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"6px",alignItems:"center",marginBottom:"4px"}},i.createElement("select",{value:((Ie=_[V])==null?void 0:Ie.start)||"",onChange:He=>{var ut;const Qe=He.target.value;C(Pt=>({...Pt,[V]:{...Pt[V],start:Qe}})),U(V,Qe,(ut=_[V])==null?void 0:ut.end)},style:{padding:"4px 6px",borderRadius:"3px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(0,0,0,0.3)",color:"#fff",fontSize:"14px",textAlign:"center"}},i.createElement("option",{value:""},"Start"),i.createElement("option",{value:"6:00 AM"},"6:00 AM"),i.createElement("option",{value:"7:00 AM"},"7:00 AM"),i.createElement("option",{value:"8:00 AM"},"8:00 AM"),i.createElement("option",{value:"9:00 AM"},"9:00 AM"),i.createElement("option",{value:"10:00 AM"},"10:00 AM"),i.createElement("option",{value:"11:00 AM"},"11:00 AM"),i.createElement("option",{value:"12:00 PM"},"12:00 PM"),i.createElement("option",{value:"1:00 PM"},"1:00 PM"),i.createElement("option",{value:"2:00 PM"},"2:00 PM"),i.createElement("option",{value:"3:00 PM"},"3:00 PM"),i.createElement("option",{value:"4:00 PM"},"4:00 PM"),i.createElement("option",{value:"5:00 PM"},"5:00 PM"),i.createElement("option",{value:"6:00 PM"},"6:00 PM"),i.createElement("option",{value:"7:00 PM"},"7:00 PM"),i.createElement("option",{value:"8:00 PM"},"8:00 PM"),i.createElement("option",{value:"9:00 PM"},"9:00 PM"),i.createElement("option",{value:"10:00 PM"},"10:00 PM"),i.createElement("option",{value:"11:00 PM"},"11:00 PM"),i.createElement("option",{value:"12:00 AM"},"12:00 AM")),i.createElement("span",{style:{color:"#fff",fontSize:"11px"}},"to"),i.createElement("select",{value:((fe=_[V])==null?void 0:fe.end)||"",onChange:He=>{var ut;const Qe=He.target.value;C(Pt=>({...Pt,[V]:{...Pt[V],end:Qe}})),U(V,(ut=_[V])==null?void 0:ut.start,Qe)},style:{padding:"4px 6px",borderRadius:"3px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(0,0,0,0.3)",color:"#fff",fontSize:"14px",textAlign:"center"}},i.createElement("option",{value:""},"End"),i.createElement("option",{value:"6:00 AM"},"6:00 AM"),i.createElement("option",{value:"7:00 AM"},"7:00 AM"),i.createElement("option",{value:"8:00 AM"},"8:00 AM"),i.createElement("option",{value:"9:00 AM"},"9:00 AM"),i.createElement("option",{value:"10:00 AM"},"10:00 AM"),i.createElement("option",{value:"11:00 AM"},"11:00 AM"),i.createElement("option",{value:"12:00 PM"},"12:00 PM"),i.createElement("option",{value:"1:00 PM"},"1:00 PM"),i.createElement("option",{value:"2:00 PM"},"2:00 PM"),i.createElement("option",{value:"3:00 PM"},"3:00 PM"),i.createElement("option",{value:"4:00 PM"},"4:00 PM"),i.createElement("option",{value:"5:00 PM"},"5:00 PM"),i.createElement("option",{value:"6:00 PM"},"6:00 PM"),i.createElement("option",{value:"7:00 PM"},"7:00 PM"),i.createElement("option",{value:"8:00 PM"},"8:00 PM"),i.createElement("option",{value:"9:00 PM"},"9:00 PM"),i.createElement("option",{value:"10:00 PM"},"10:00 PM"),i.createElement("option",{value:"11:00 PM"},"11:00 PM"),i.createElement("option",{value:"12:00 AM"},"12:00 AM"))),((Fe=_[V])==null?void 0:Fe.start)&&((Ve=_[V])==null?void 0:Ve.end)&&i.createElement("div",{style:{fontSize:"10px",color:"#4CAF50",textAlign:"center",fontWeight:"bold"}},"✓ Custom time set: ",_[V].start," - ",_[V].end)))}))))));case 3:return i.createElement("div",{style:{padding:"10px"}},i.createElement("h3",{style:{color:"#e53e3e",marginBottom:"15px",textAlign:"center"}},"Playing Locations"),i.createElement("p",{style:{color:"#ccc",textAlign:"center",marginBottom:"15px",fontSize:"13px"}},"Select from predefined locations and/or add your own custom locations"),D.length>0&&i.createElement("div",{style:{marginBottom:"15px"}},i.createElement("label",{style:{display:"block",marginBottom:"10px",color:"#fff",fontWeight:"bold",fontSize:"16px",textAlign:"center",width:"100%"}},"Select from Available Locations:"),i.createElement("div",{style:{display:"grid",gap:"3px",maxHeight:"180px",overflowY:"auto",padding:"6px",background:"rgba(0,0,0,0.3)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)"}},D.map(V=>i.createElement("label",{key:V._id,style:{display:"flex",alignItems:"center",padding:"4px 6px",borderRadius:"4px",background:A.includes(V.name)?"rgba(76, 175, 80, 0.2)":"rgba(255,255,255,0.05)",border:A.includes(V.name)?"1px solid #4CAF50":"1px solid rgba(255,255,255,0.1)",cursor:"pointer",transition:"all 0.2s ease"}},i.createElement("input",{type:"checkbox",checked:A.includes(V.name),onChange:pe=>z(V.name,pe.target.checked),style:{marginRight:"6px",transform:"scale(1)"}}),i.createElement("div",{style:{flex:1,textAlign:"center"}},i.createElement("div",{style:{color:"#fff",fontWeight:"bold",fontSize:"15px",textAlign:"center"}},V.name),V.address&&i.createElement("div",{style:{color:"#ccc",fontSize:"13px",marginTop:"1px",textAlign:"center"}},"📍 ",V.address),V.notes&&i.createElement("div",{style:{color:"#999",fontSize:"12px",marginTop:"1px",textAlign:"center"}},"📝 ",V.notes)))))),i.createElement("div",null,i.createElement("label",{style:{display:"block",marginBottom:"10px",color:"#fff",fontWeight:"bold",fontSize:"16px",textAlign:"center"}},"Add Custom Locations (Optional):"),i.createElement("textarea",{value:F,onChange:V=>G(V.target.value),style:{width:"100%",minHeight:"60px",padding:"8px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"16px",resize:"vertical"},placeholder:`Enter additional locations, one per line:
My Home Table
Friend's House
Local Bar`})),(A.length>0||F.trim())&&i.createElement("div",{style:{marginTop:"10px",padding:"10px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"6px",border:"1px solid rgba(76, 175, 80, 0.3)"}},i.createElement("h4",{style:{color:"#4CAF50",margin:"0 0 10px 0",fontSize:"14px",fontWeight:"bold"}},"📍 Your Selected Locations:"),i.createElement("div",{style:{color:"#ccc",fontSize:"13px"}},q().split(`
`).map((V,pe)=>i.createElement("div",{key:pe,style:{marginBottom:"2px"}},"• ",V)))),i.createElement("div",{style:{marginTop:"10px",padding:"8px",background:"rgba(229, 62, 62, 0.1)",borderRadius:"6px"}},i.createElement("p",{style:{color:"#ccc",fontSize:"14px",margin:0}},i.createElement("strong",null,"Tip:")," Select from the predefined locations above, or add your own custom locations. These will be used to help match you with other players in your area.")));case 4:return i.createElement("div",{style:{padding:"10px"}},i.createElement("h3",{style:{color:"#e53e3e",marginBottom:"20px",textAlign:"center"}},"Contact Preferences"),i.createElement("p",{style:{color:"#ccc",textAlign:"center",marginBottom:"20px",fontSize:"14px"}},"How would you prefer other players to contact you for match scheduling?"),i.createElement("div",{style:{display:"grid",gap:"15px"}},K.map(V=>i.createElement("label",{key:V.value,style:{display:"flex",alignItems:"center",padding:"15px",borderRadius:"8px",background:c.preferredContacts.includes(V.value)?"rgba(229, 62, 62, 0.2)":"rgba(255,255,255,0.05)",border:c.preferredContacts.includes(V.value)?"1px solid #e53e3e":"1px solid rgba(255,255,255,0.1)",cursor:"pointer",transition:"all 0.2s ease"}},i.createElement("input",{type:"checkbox",checked:c.preferredContacts.includes(V.value),onChange:pe=>M(V.value,pe.target.checked),style:{marginRight:"12px",transform:"scale(1.2)"}}),i.createElement("span",{style:{color:"#fff",fontSize:"16px",fontWeight:"bold"}},V.label)))),i.createElement("div",{style:{marginTop:"20px",padding:"15px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"8px",border:"1px solid rgba(76, 175, 80, 0.3)"}},i.createElement("p",{style:{color:"#ccc",fontSize:"14px",margin:0}},i.createElement("strong",null,"Note:")," Your contact information will only be shared with players who are scheduling matches with you. You can change these preferences later in your profile settings.")));case 5:return i.createElement("div",{style:{padding:"10px"}},i.createElement("h3",{style:{color:"#e53e3e",marginBottom:"20px",textAlign:"center"}},"Registration & Payment"),i.createElement("div",{style:{display:"grid",gap:"20px"}},i.createElement("div",{style:{padding:"15px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"8px",border:"1px solid rgba(76, 175, 80, 0.3)",textAlign:"center"}},i.createElement("h4",{style:{color:"#4CAF50",margin:"0 0 10px 0",fontSize:"16px",fontWeight:"bold"}},"🔐 Your PIN will be auto-generated"),i.createElement("p",{style:{color:"#ccc",fontSize:"14px",margin:0}},"A unique 4-digit PIN will be automatically generated for you. You'll receive it after payment is confirmed.")),i.createElement("div",{style:{padding:"15px",background:"rgba(255, 193, 7, 0.1)",borderRadius:"8px",border:"1px solid rgba(255, 193, 7, 0.3)",textAlign:"center"}},i.createElement("h4",{style:{color:"#ffc107",margin:"0 0 10px 0",fontSize:"16px",fontWeight:"bold"}},"🏆 Division Assignment"),i.createElement("p",{style:{color:"#ccc",fontSize:"14px",margin:0}},"Your division will be assigned by league administrators based on your skill level and availability. You'll be notified once assigned.")),i.createElement("div",{style:{padding:"15px",background:"rgba(229, 62, 62, 0.1)",borderRadius:"8px",border:"1px solid rgba(229, 62, 62, 0.3)",textAlign:"center"}},i.createElement("h4",{style:{color:"#e53e3e",margin:"0 0 10px 0",fontSize:"16px",fontWeight:"bold"}},"💳 Payment Required"),i.createElement("p",{style:{color:"#ccc",fontSize:"14px",margin:0}},"Registration fee: ",i.createElement("strong",null,"$30")," must be paid before you receive your PIN and can access the league system. Payment instructions will be sent to your email immediately after registration."))),i.createElement("div",{style:{marginTop:"20px",padding:"15px",background:"rgba(0, 123, 255, 0.1)",borderRadius:"8px",border:"1px solid rgba(0, 123, 255, 0.3)"}},i.createElement("p",{style:{color:"#ccc",fontSize:"14px",margin:0}},i.createElement("strong",null,"Next Steps:")," After registration, you'll receive payment instructions. Once payment is confirmed, you'll get your PIN and full access to the league system.")));default:return null}};return t?i.createElement(i.Fragment,null,i.createElement(Rn,{open:t,onClose:a,title:s?"Edit Player Profile":l?"Admin: Test Player Registration":"Player Registration",maxWidth:n?"95vw":"800px",className:"player-registration-modal"},i.createElement("div",{style:{background:"rgba(255,255,255,0.1)",height:"4px",position:"relative",marginBottom:"15px"}},i.createElement("div",{style:{background:"linear-gradient(90deg, #e53e3e, #ff6b6b)",height:"100%",width:`${p/5*100}%`,transition:"width 0.3s ease"}})),i.createElement("div",{style:{padding:"10px 15px",background:"rgba(0,0,0,0.8)",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:"15px",borderRadius:"6px"}},i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},i.createElement("span",{style:{color:"#fff",fontSize:"14px"}},"Step ",p," of 5"),i.createElement("span",{style:{color:"#e53e3e",fontSize:"14px",fontWeight:"bold"}},p===1&&"Personal Info",p===2&&"Availability",p===3&&"Locations",p===4&&"Contact Preferences",p===5&&"Registration & Payment")),l&&i.createElement("div",{style:{background:"rgba(255, 193, 7, 0.2)",border:"1px solid rgba(255, 193, 7, 0.5)",borderRadius:"4px",padding:"6px 10px",marginTop:"8px",textAlign:"center"}},i.createElement("span",{style:{color:"#ffc107",fontSize:"12px",fontWeight:"bold"}},"🔧 ADMIN MODE: Validation bypassed for testing"))),i.createElement("div",{style:{marginBottom:"25px",maxHeight:"60vh",overflowY:"auto",paddingRight:"10px"}},se()),x&&i.createElement("div",{style:{padding:"10px 15px",background:"rgba(229, 62, 62, 0.2)",border:"1px solid #e53e3e",color:"#ff6b6b",textAlign:"center",fontSize:"14px",borderRadius:"6px",marginBottom:"15px"}},x),w&&i.createElement("div",{style:{padding:"10px 15px",background:"rgba(76, 175, 80, 0.2)",border:"1px solid #4CAF50",color:"#4CAF50",textAlign:"center",fontSize:"14px",borderRadius:"6px",marginBottom:"15px"}},w),i.createElement("div",{style:{display:"flex",justifyContent:"space-between",gap:"10px"}},i.createElement("button",{onClick:p===1?a:ne,style:{padding:"12px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#fff",cursor:"pointer",fontSize:"16px",transition:"all 0.2s ease",flex:1},onMouseEnter:V=>{V.target.style.background="rgba(255,255,255,0.1)"},onMouseLeave:V=>{V.target.style.background="transparent"}},p===1?"Cancel":"Previous"),i.createElement("button",{onClick:j,disabled:m,style:{padding:"12px 20px",borderRadius:"6px",border:"none",background:m?"#666":"#e53e3e",color:"#fff",cursor:m?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",transition:"all 0.2s ease",flex:1},onMouseEnter:V=>{m||(V.target.style.background="#ff6b6b")},onMouseLeave:V=>{m||(V.target.style.background="#e53e3e")}},m?"Processing...":p===5?s?"Update Profile":"Complete Registration":"Next"))),i.createElement("style",{jsx:!0},`
               .player-registration-modal {
          max-height: 95vh !important;
          height: auto !important;
        }
        
        .player-registration-modal .draggable-modal {
          max-height: 95vh !important;
          height: auto !important;
        }
        
        .player-registration-modal .modal-content {
          max-height: 70vh !important;
          overflow-y: auto !important;
        }
       
       /* Custom scrollbar */
       .player-registration-modal .modal-content::-webkit-scrollbar {
         width: 6px;
       }
       
       .player-registration-modal .modal-content::-webkit-scrollbar-thumb {
         background: #e53e3e;
         border-radius: 3px;
       }
       
               .player-registration-modal .modal-content::-webkit-scrollbar-track {
          background: rgba(255,255,255,0.1);
          border-radius: 3px;
        }
        
                 /* Custom dropdown styling for dark theme */
         .player-registration-modal select option {
           background: #222 !important;
           color: #fff !important;
           border: none !important;
           font-size: 14px !important;
           padding: 4px 8px !important;
         }
        
        .player-registration-modal select:focus {
          outline: none !important;
          border-color: #e53e3e !important;
          box-shadow: 0 0 0 2px rgba(229, 62, 62, 0.2) !important;
        }
     `)):null}const sp=async(t,a)=>{const e=await fetch(`${Pe}/api/matches/status/${encodeURIComponent(t)}/${a}`);if(!e.ok)throw new Error("Failed to fetch matches by status");return e.json()},zP=async(t,a,e,n="")=>{const s=await fetch(`${Pe}/api/matches/${t}/complete`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({winner:a,score:e,notes:n})});if(!s.ok){const l=await s.json();throw new Error(l.error||"Failed to complete match")}return s.json()},UP=async(t,a="")=>{const e=await fetch(`${Pe}/api/matches/${t}/cancel`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:a})});if(!e.ok){const n=await e.json();throw new Error(n.error||"Failed to cancel match")}return e.json()},FP=async t=>{const a=await fetch(`${Pe}/api/matches/stats/${encodeURIComponent(t)}`);if(!a.ok)throw new Error("Failed to fetch match statistics");return a.json()},WP=(t,a,e)=>{const[n,s]=v.useState([]),[l,c]=v.useState([]),[d,p]=v.useState(!0),[h,m]=v.useState(null),[b,x]=v.useState(null),E=v.useRef(null),w=v.useRef(null),S=v.useCallback(async(D=!1)=>{w.current&&w.current.abort(),w.current=new AbortController;try{D||p(!0);const[I,A]=await Promise.all([sp(a,"scheduled"),sp(a,"completed")]),T=I.filter(H=>H.player1Id===t||H.player2Id===t).map(H=>{const Z=H.player1Id===t,K=Z?H.player1Id:H.player2Id,X=Z?H.player2Id:H.player1Id,W=new Date(H.scheduledDate),O=W.toISOString().split("T")[0],B=W.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return{...H,player:K,opponent:X,senderName:H.player1Id,receiverName:H.player2Id,date:O,time:B,gameType:H.gameType||"8 ball",raceLength:H.raceLength||5,type:"scheduled"}}),F=A.filter(H=>H.player1Id===t||H.player2Id===t).map(H=>{const Z=H.player1Id===t,K=Z?H.player1Id:H.player2Id,X=Z?H.player2Id:H.player1Id,W=new Date(H.scheduledDate),O=W.toISOString().split("T")[0],B=W.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return{...H,player:K,opponent:X,senderName:H.player1Id,receiverName:H.player2Id,date:O,time:B,gameType:H.gameType||"8 ball",raceLength:H.raceLength||5,type:"completed"}});let J=[];try{const H=await es.getPendingProposals(t,a),Z=await es.getSentProposals(t,a);J=[...H,...Z].filter(O=>O.status==="confirmed"&&(O.senderName===t||O.receiverName===t));const X=J.map(O=>{const B=O.senderName===t,U=B?O.senderName:O.receiverName,M=B?O.receiverName:O.senderName;return{_id:O._id,type:"proposal",status:"confirmed",player1Id:O.senderName,player2Id:O.receiverName,player:U,opponent:M,senderName:O.senderName,receiverName:O.receiverName,scheduledDate:O.date?new Date(O.date):new Date,date:O.date,time:O.time,location:O.location,message:O.message,gameType:O.gameType,raceLength:O.raceLength,completed:O.completed||!1,winner:O.winner||null}}),W=[...T,...X];W.sort((O,B)=>new Date(O.scheduledDate)-new Date(B.scheduledDate)),F.sort((O,B)=>new Date(B.completedDate)-new Date(O.completedDate)),w.current.signal.aborted||(s(W),c(F),m(null),x(new Date))}catch(H){console.warn("Error fetching confirmed proposals:",H),w.current.signal.aborted||(T.sort((Z,K)=>new Date(Z.scheduledDate)-new Date(K.scheduledDate)),F.sort((Z,K)=>new Date(K.completedDate)-new Date(Z.completedDate)),s(T),c(F),x(new Date))}}catch(I){if(I.name==="AbortError")return;console.error("Error fetching matches:",I),m(I.message),D||(s([]),c([]))}finally{w.current.signal.aborted||p(!1)}},[t,a,e]);v.useEffect(()=>{if(t&&a)return S(),E.current=setInterval(()=>{S(!0)},3e4),()=>{E.current&&clearInterval(E.current),w.current&&w.current.abort()}},[t,a,e,S]);const _=v.useCallback(()=>{S()},[S]),C=v.useCallback((D,I="add")=>{I==="add"?s(A=>[D,...A]):I==="update"?(s(A=>A.map(T=>T._id===D._id?D:T)),c(A=>A.map(T=>T._id===D._id?D:T))):I==="remove"&&(s(A=>A.filter(T=>T._id!==D._id)),c(A=>A.filter(T=>T._id!==D._id))),x(new Date)},[]);return{matches:n,completedMatches:l,scheduledConfirmedMatches:n,loading:d,error:h,lastUpdate:b,refetch:_,updateMatchLocally:C,markMatchCompleted:D=>{s(I=>I.filter(A=>A._id!==D._id)),c(I=>{const A={...D,completed:!0};return[...I,A]}),x(new Date)},updateCompletedMatch:D=>{c(I=>I.map(A=>A._id===D._id?D:A)),x(new Date)}}},jP=t=>{const[a,e]=v.useState(null),[n,s]=v.useState(null),[l,c]=v.useState(!0),[d,p]=v.useState(null),[h,m]=v.useState(null),b=v.useRef(null),x=v.useRef(null),E=v.useCallback(async(S=!1)=>{if(t){x.current&&x.current.abort(),x.current=new AbortController;try{S||c(!0),console.log("useSeasonData - Fetching season data for division:",t);const[_,C]=await Promise.all([Mi.getCurrentSeason(t),Mi.getCurrentPhaseAndWeek(t)]);console.log("useSeasonData - Season result:",_),console.log("useSeasonData - Phase result:",C),x.current.signal.aborted||(e((_==null?void 0:_.season)||null),s(C),p(null),m(new Date))}catch(_){if(_.name==="AbortError")return;console.error("Error fetching season data:",_),p(_.message),S||(e(null),s(null))}finally{x.current.signal.aborted||c(!1)}}},[t]);v.useEffect(()=>{if(t)return E(),b.current=setInterval(()=>{E(!0)},5*60*1e3),()=>{b.current&&clearInterval(b.current),x.current&&x.current.abort()}},[t,E]);const w=v.useCallback(()=>{E()},[E]);return{seasonData:a,currentPhaseInfo:n,loading:l,error:d,lastUpdate:h,refetch:w}},HP=t=>{const[a,e]=v.useState([]),[n,s]=v.useState(!0),[l,c]=v.useState(null),[d,p]=v.useState(null),h=v.useRef(null),m=v.useRef(null),b=v.useCallback(async(E=!1)=>{if(t){m.current&&m.current.abort(),m.current=new AbortController;try{E||s(!0);const w=t.replace(/[^A-Za-z0-9]/g,"_"),S=`${Pe}/static/standings_${w}.json`,_=await fetch(S,{signal:m.current.signal});if(!_.ok){console.warn(`Failed to fetch standings: ${_.status} - ${_.statusText}`),E||c(`Failed to fetch standings: ${_.status}`);return}const C=await _.json();if(!Array.isArray(C)){console.error("Standings data is not an array:",C),E||c("Invalid standings data format");return}const D=C.filter(I=>{if(!I||typeof I!="object")return console.warn("Invalid standings entry:",I),!1;if(!I.name||!I.rank)return console.warn("Standings entry missing name or rank:",I),!1;const A=parseInt(I.rank);return isNaN(A)||A<=0?(console.warn("Invalid rank in standings entry:",I),!1):!0});m.current.signal.aborted||(e(D),c(null),p(new Date))}catch(w){if(w.name==="AbortError")return;console.error("Failed to load standings:",w),c(w.message),E||e([])}finally{m.current.signal.aborted||s(!1)}}},[t]);v.useEffect(()=>{if(t)return b(),h.current=setInterval(()=>{b(!0)},10*60*1e3),()=>{h.current&&clearInterval(h.current),m.current&&m.current.abort()}},[t,b]);const x=v.useCallback(()=>{b()},[b]);return{standings:a,loading:n,error:l,lastUpdate:d,refetch:x}},df={async getAllNotes(){return Nn.get("/api/notes")},async createNote(t){return Nn.post("/api/notes",{text:t})},async deleteNote(t){return Nn.delete(`/api/notes/${t}`)}},YP=()=>{const[t,a]=v.useState([]),[e,n]=v.useState(!0),[s,l]=v.useState(null),[c,d]=v.useState(null),p=v.useRef(null),h=v.useRef(null),m=v.useCallback(async(E=!1)=>{h.current&&h.current.abort(),h.current=new AbortController;try{E||n(!0);const w=await df.getAllNotes();h.current.signal.aborted||(a(w),l(null),d(new Date))}catch(w){if(w.name==="AbortError")return;console.error("Error fetching notes:",w),l(w.message),E||a([])}finally{h.current.signal.aborted||n(!1)}},[]);v.useEffect(()=>(m(),p.current=setInterval(()=>{m(!0)},2*60*1e3),()=>{p.current&&clearInterval(p.current),h.current&&h.current.abort()}),[m]);const b=v.useCallback(()=>{m()},[m]),x=v.useCallback((E,w="add")=>{w==="add"?a(S=>[E,...S]):w==="update"?a(S=>S.map(_=>_._id===E._id?E:_)):w==="remove"&&a(S=>S.filter(_=>_._id!==E._id)),d(new Date)},[]);return{notes:t,loading:e,error:s,lastUpdate:c,refetch:b,updateNoteLocally:x}},GP=t=>{const[a,e]=v.useState([]),[n,s]=v.useState(!0),[l,c]=v.useState(null),[d,p]=v.useState(null),h=v.useRef(null),m=v.useRef(null),b=v.useCallback(async(E=!1)=>{if(!t){e([]);return}m.current&&m.current.abort(),m.current=new AbortController;try{E||s(!0);let w;t==="FRBCAPL TEST"?w="schedule_FRBCAPL_TEST.json":t==="Singles Test"?w="schedule_Singles_Test.json":w=`schedule_${t.replace(/[^A-Za-z0-9]/g,"_")}.json`;const S=`${Pe}/static/${w}`,_=await fetch(S,{signal:m.current.signal});if(!_.ok)throw new Error("Schedule not found");const C=await _.json();m.current.signal.aborted||(console.log("Schedule loaded for",t,":",C.length,"matches"),e(C),c(null),p(new Date))}catch(w){if(w.name==="AbortError")return;console.error("Failed to load schedule for",t,":",w),c(w.message),E||e([])}finally{m.current.signal.aborted||s(!1)}},[t]);v.useEffect(()=>{if(t)return b(),h.current=setInterval(()=>{b(!0)},15*60*1e3),()=>{h.current&&clearInterval(h.current),m.current&&m.current.abort()}},[t,b]);const x=v.useCallback(()=>{b()},[b]);return{scheduledMatches:a,loading:n,error:l,lastUpdate:d,refetch:x}};class $P{async checkAndSendDeadlineReminder(a,e,n){try{const s=await Mi.getCurrentSeason(n);if(!(s!=null&&s.season)){console.log("No current season found for division:",n);return}const l=s.season,c=new Date,d=new Date(l.phase1End);if(c>d){console.log("Phase 1 deadline has passed, no reminder needed");return}const p=Math.ceil((d-c)/(1e3*60*60*24));if(!this.shouldSendReminder(p))return;const m=await this.getUserMatchStatus(e,n);await tk({to_email:a,to_name:e,division:n,daysUntilDeadline:p,completedMatches:m.completedCount,totalRequiredMatches:m.totalRequired,deadlineDate:Na(d,"EEEE, MMMM d, yyyy"),remainingMatches:m.remainingCount}),console.log(`Deadline reminder sent to ${e} for ${n}`)}catch(s){console.error("Error sending deadline reminder:",s)}}shouldSendReminder(a){return[7,3,1,0].includes(a)}async getUserMatchStatus(a,e){try{return{completedCount:1,totalRequired:6,remainingCount:5}}catch(n){return console.error("Error getting user match status:",n),{completedCount:0,totalRequired:6,remainingCount:6}}}async sendBulkDeadlineReminders(a){try{console.log(`Sending bulk deadline reminders for ${a}`)}catch(e){console.error("Error sending bulk deadline reminders:",e)}}}const ZP=new $P,qP={"FRBCAPL TEST":"https://lms.fargorate.com/PublicReport/LeagueReports?leagueId=e05896bb-b0f4-4a80-bf99-b2ca012ceaaa&divisionId=b345a437-3415-4765-b19a-b2f7014f2cfa","Singles Test":"https://lms.fargorate.com/PublicReport/LeagueReports?leagueId=e05896bb-b0f4-4a80-bf99-b2ca012ceaaa&divisionId=9058a0cc-3231-4118-bd91-b305006fe578"};function fx(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[l,c,d]=t.split("-");return`${c}-${d}-${l}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const l=t.split("/");if(l.length===3){const[c,d,p]=l;a=new Date(p,c-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}function nS({playerName:t,playerLastName:a,onOpenChat:e,userPin:n,onGoToAdmin:s,onLogout:l,onScheduleMatch:c,senderEmail:d}){const[p,h]=v.useState([]),[m,b]=v.useState(""),[x,E]=v.useState(!1),[w,S]=v.useState(!1),[_,C]=v.useState(!1),[D,I]=v.useState(null),[A,T]=v.useState(""),[F,J]=v.useState(!1),[H,Z]=v.useState(!1),[K,X]=v.useState(null),[W,O]=v.useState(!1),[B,U]=v.useState(""),[M,z]=v.useState(""),[G,q]=v.useState(null),[R,j]=v.useState(!1),[ne,ae]=v.useState(!1),[se,V]=v.useState(!1),[pe,Ie]=v.useState("scheduled"),[fe,Fe]=v.useState(!1),[Ve,He]=v.useState(null),[Qe,ut]=v.useState(!1),[Pt,xt]=v.useState(!1),[Hn,Kt]=v.useState(null),[Yn,Zn]=v.useState(!1),[pt,de]=v.useState(null),[nt,Ye]=v.useState(!1),[Dt,zt]=v.useState(null),[$,Re]=v.useState([]),[at,Ge]=v.useState(0),[Vt,Ct]=v.useState(0),[Bn,mn]=v.useState(0),rt=`${t} ${a}`.trim(),{pendingProposals:On,sentProposals:zn,loading:wn,refetch:sn,updateProposalLocally:Ia}=VE(rt,m),Yt=Hn||pe,{matches:ya,completedMatches:Un,loading:br,refetch:na,markMatchCompleted:Ws,updateCompletedMatch:vr}=WP(rt,m,Yt),{seasonData:qn,currentPhaseInfo:is,loading:Ri}=jP(m),{standings:ua,loading:hn}=HP(m),{notes:En,loading:ba,refetch:js,updateNoteLocally:os}=YP(),{scheduledMatches:xr,loading:ls}=GP(m),[wr,Hs]=v.useState(0),[qa,Rr]=v.useState(0),[Er,Da]=v.useState(!1),[on,cs]=v.useState(!1),[us,Qa]=v.useState(""),[va,Ys]=v.useState("all"),[Lr,Gs]=v.useState("date"),[Li,ds]=v.useState(null),[Pi,Va]=v.useState(!1),[Bi,ka]=v.useState(!1),[Ra,$s]=v.useState("direct"),[So,Il]=v.useState(0),[Oi,An]=v.useState(!1),[Pr,ee]=v.useState(null),[L,he]=v.useState({player1:"",player2:""}),[ye,Ee]=v.useState(!1),[Ae,ke]=v.useState(null),[Le,st]=v.useState(!1),[We,dt]=v.useState({x:0,y:0}),[Ze,Te]=v.useState(!1),me=v.useRef({x:0,y:0}),[_e,Ne]=v.useState(!1),[Ue,_t]=v.useState(!1),[Tt,aa]=v.useState([]),[Br,It]=v.useState(!1),[ze,Bt]=v.useState(!1),[Jt,Sn]=v.useState(!1),[xa,gn]=v.useState(null),[ln,Qn]=v.useState(null),[ra,Vn]=v.useState("normal"),[Xa,wa]=v.useState(null),Xn=v.useRef(null);xo();const Se=typeof window<"u"&&window.innerWidth<=768||typeof navigator<"u"&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?!0:typeof window<"u"&&window.self!==window.top?window.innerWidth<=768||window.innerHeight<=600:!1;v.useEffect(()=>{(async()=>{try{const ve=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);console.log("Device Info:",{userAgent:navigator.userAgent,isMobile:ve,backendUrl:Pe,protocol:window.location.protocol,hostname:window.location.hostname}),console.log("Testing backend connection...");const De=await fetch(`${Pe}/health`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors",credentials:"include"});De.ok?console.log("✅ Backend connection successful"):console.error("❌ Backend connection failed:",De.status,De.statusText)}catch(ve){console.error("❌ Backend connection error:",ve),console.error("Error details:",{name:ve.name,message:ve.message,stack:ve.stack})}})()},[]),v.useEffect(()=>{Hs(On.length)},[On]),v.useEffect(()=>{Rr(zn.length)},[zn]);const La=P=>{Te(!0),me.current={x:P.clientX-We.x,y:P.clientY-We.y},document.body.style.userSelect="none"},Pa=P=>{Ze&&dt({x:P.clientX-me.current.x,y:P.clientY-me.current.y})},yn=()=>{Te(!1),document.body.style.userSelect=""};v.useEffect(()=>(Ze?(window.addEventListener("mousemove",Pa),window.addEventListener("mouseup",yn)):(window.removeEventListener("mousemove",Pa),window.removeEventListener("mouseup",yn)),()=>{window.removeEventListener("mousemove",Pa),window.removeEventListener("mouseup",yn)}),[Ze]),v.useEffect(()=>{Le&&dt({x:0,y:0})},[Le]),v.useEffect(()=>{async function P(){try{const De=await(await fetch(`${Pe}/api/messages/unread?user=${encodeURIComponent(d)}`)).json();Array.isArray(De)&&Il(De.length)}catch(ve){console.error("Failed to fetch unread messages:",ve)}}if(d){P();const ve=setInterval(P,3e4);return()=>clearInterval(ve)}},[d]),v.useEffect(()=>{if(!t||!a||!m||br||wn)return;const P=Yt==="challenge"?2:1,De=xr.filter(tn=>tn.division===m&&tn.phase===P&&(tn.player1&&tn.player1.trim().toLowerCase()===rt.toLowerCase()||tn.player2&&tn.player2.trim().toLowerCase()===rt.toLowerCase())).length;Ct(Un.length);const ht=ya.filter(tn=>tn.status==="confirmed"&&(tn.completed===!1||tn.completed===void 0)).length+Un.length,lt=Math.max(0,De-ht);Ge(lt),mn(De)},[t,a,m,xr,Un,ya,br,wn]);const Ka=(()=>{if(!t||!a||!m)return 0;const ve=xr.filter(De=>De.division===m&&(De.player1&&De.player1.trim().toLowerCase()===rt.toLowerCase()||De.player2&&De.player2.trim().toLowerCase()===rt.toLowerCase())).length;return ve===0&&Yt==="scheduled"?(console.log("No schedule matches found, using fallback of 6 matches for Phase 1"),6):ve})();v.useEffect(()=>{let P=!0;async function ve(){try{const De=await fetch(`${Pe}/api/users/search?approved=true`);if(!De.ok)throw new Error("Failed to fetch players from database");const qe=await De.json();if(!qe.users||qe.users.length===0){P&&Re([]);return}const ht=qe.users.map(lt=>({firstName:lt.firstName||"",lastName:lt.lastName||"",email:lt.email||"",phone:lt.phone||"",locations:lt.locations||"",availability:lt.availability||{Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},pin:lt.pin||"",preferredContacts:lt.preferredContacts||[],division:lt.division||"",divisions:lt.divisions||[]})).filter(lt=>lt.email&&lt.firstName&&lt.lastName);if(P){Re(ht),ku(ht);const lt=ht.find(tn=>tn.firstName===t&&tn.lastName===a);lt&&Du(lt)}}catch(De){console.error("Error loading players:",De),P&&(Re([]),ku([]),Du(null))}}return ve(),()=>{P=!1}},[]),v.useEffect(()=>{d&&JE.getUser(d).then(P=>{let ve=[];Array.isArray(P.divisions)?ve=P.divisions.map(De=>De.trim()).filter(Boolean):typeof P.divisions=="string"?ve=P.divisions.split(",").map(De=>De.trim()).filter(Boolean):ve=[],h(ve)}).catch(()=>{h([])})},[d]),v.useEffect(()=>{p.length>0?b(p[0]):b("")},[p]);const Zs=async()=>{z("");try{const P=await df.createNote(B.trim());os(P,"add"),U(""),O(!1)}catch{z("Failed to add note")}},fs=async P=>{if(window.confirm("Delete this note?"))try{await df.deleteNote(P),os({_id:P},"remove")}catch(ve){console.error("Failed to delete note:",ve)}},Dl=async()=>{if(window.confirm("Are you sure you want to clear all notes?"))try{for(const P of En)await df.deleteNote(P._id);setNotes([]),js()}catch(P){console.error("Failed to clear notes:",P)}};async function kl(P){if(K)try{await es.counterProposal(K._id,P),Z(!1),X(null),na(),sn()}catch(ve){console.error("Failed to counter proposal:",ve)}}function Al(){j(!1),q(null)}const zi=Yt==="challenge"?2:1,Ui=xr.filter(P=>P.division===m&&(!P.phase||P.phase===zi)&&(P.player1&&P.player1.trim().toLowerCase()===rt.toLowerCase()||P.player2&&P.player2.trim().toLowerCase()===rt.toLowerCase())),Eu=Array.from(new Set(Ui.map(P=>P.player1&&P.player1.trim().toLowerCase()===rt.toLowerCase()?P.player2Email||P.player2EmailAddress||P.player2Email||P.player2||null:P.player2&&P.player2.trim().toLowerCase()===rt.toLowerCase()&&(P.player1Email||P.player1EmailAddress||P.player1Email||P.player1)||null).filter(Boolean)));function Pp(){var De,qe;const P=new Set,ve=[];for(const ht of Ui){const lt=ht.player1&&ht.player1.trim().toLowerCase()===rt.toLowerCase()?ht.player2:ht.player1;if(Un.some(Xe=>{var zr,Cr;const da=[(zr=Xe.player1Id)==null?void 0:zr.trim().toLowerCase(),(Cr=Xe.player2Id)==null?void 0:Cr.trim().toLowerCase()];return Xe.division===m&&da.includes(rt.toLowerCase())&&da.includes(lt==null?void 0:lt.trim().toLowerCase())}))continue;let Sr=!1;for(let Xe=0;Xe<ya.length;Xe++){if(P.has(Xe))continue;const da=ya[Xe],zr=[(De=da.player1Id)==null?void 0:De.trim().toLowerCase(),(qe=da.player2Id)==null?void 0:qe.trim().toLowerCase()];if(da.division===m&&zr.includes(rt.toLowerCase())&&zr.includes(lt==null?void 0:lt.trim().toLowerCase())){P.add(Xe),Sr=!0;break}}Sr||ve.push(ht)}return ve}const Su=Pp().map(P=>{var qe,ht;const ve=P.player1&&P.player1.trim().toLowerCase()===rt.toLowerCase()?(qe=P.player2)==null?void 0:qe.trim():(ht=P.player1)==null?void 0:ht.trim();if(!ve)return null;const De=$.find(lt=>`${lt.firstName} ${lt.lastName}`.trim().toLowerCase()===ve.toLowerCase());return{match:P,player:De,opponentName:ve}}).filter(Boolean);function Ml(P){const ve=Su.find(qe=>qe.opponentName&&qe.opponentName.trim().toLowerCase()===P.trim().toLowerCase()),De=(ve==null?void 0:ve.player)||$.find(qe=>`${qe.firstName} ${qe.lastName}`.trim().toLowerCase()===P.trim().toLowerCase());if(!De){alert("Player data not found for: "+P);return}if(Au){Op(De);return}if(!De.email){alert("This opponent does not have an email on file and cannot be proposed a match.");return}de(De),Zn(!0),Fe(!1)}function Bp(){if(console.log("Smart match button clicked!"),console.log("currentUser:",en),console.log("allPlayers:",Ja),console.log("allPlayers length:",Ja==null?void 0:Ja.length),!en||!Ja||Ja.length===0){console.log("Player data not available, showing alert"),alert("Player data not available for smart match. Please try again.");return}Fe(!0),Co(!0)}function Op(P){Fp(P),Fe(!1),Co(!1),Iu(!0)}v.useEffect(()=>{if(!d||!t||!m||!qn||Yt!=="scheduled")return;const P=async()=>{try{await ZP.checkAndSendDeadlineReminder(d,`${t} ${a}`,m)}catch(De){console.error("Error checking deadline reminders:",De)}};P();const ve=setInterval(P,60*60*1e3);return()=>clearInterval(ve)},[d,t,a,m,qn,Yt]);const Or=ya.filter(P=>P.division===m).filter(P=>{if(us){let ve="";if(P.player1Id&&P.player2Id?P.player1Id.trim().toLowerCase()===rt.trim().toLowerCase()?ve=P.player2Id:ve=P.player1Id:P.senderName&&P.receiverName&&(P.senderName.trim().toLowerCase()===rt.trim().toLowerCase()?ve=P.receiverName:ve=P.senderName),!ve.toLowerCase().includes(us.toLowerCase()))return!1}return!(va!=="all"&&(va==="completed"&&P.status!=="completed"||va==="pending"&&P.status!=="pending"||va==="upcoming"&&P.status==="completed"))}).sort((P,ve)=>{switch(Lr){case"date":const De=P.scheduledDate?new Date(P.scheduledDate):new Date(P.date||0),qe=ve.scheduledDate?new Date(ve.scheduledDate):new Date(ve.date||0);return De-qe;case"opponent":let ht="",lt="";return P.player1Id&&P.player2Id?ht=P.player1Id.trim().toLowerCase()===rt.trim().toLowerCase()?P.player2Id:P.player1Id:P.senderName&&P.receiverName&&(ht=P.senderName.trim().toLowerCase()===rt.trim().toLowerCase()?P.receiverName:P.senderName),ve.player1Id&&ve.player2Id?lt=ve.player1Id.trim().toLowerCase()===rt.trim().toLowerCase()?ve.player2Id:ve.player1Id:ve.senderName&&ve.receiverName&&(lt=ve.senderName.trim().toLowerCase()===rt.trim().toLowerCase()?ve.receiverName:ve.senderName),ht.localeCompare(lt);case"status":const tn={pending:1,confirmed:2,completed:3},Sr=tn[P.status]||0,Xe=tn[ve.status]||0;return Sr-Xe;default:return 0}});function Tl(P){q(P),j(!0)}const Cu=se&&i.createElement(Rn,{open:se,onClose:()=>{V(!1),Qa(""),Ys("all"),Gs("date")},title:`🎯 All Upcoming Matches (${Or.length})`,maxWidth:"600px",maxHeight:"70vh"},i.createElement("div",{style:{display:"flex",gap:"12px",flexWrap:Se?"wrap":"nowrap",alignItems:"center",marginBottom:"16px"}},i.createElement("div",{style:{flex:1,minWidth:Se?"100%":"200px",position:"relative"}},i.createElement("input",{type:"text",placeholder:"Search by opponent name...",value:us,onChange:P=>Qa(P.target.value),style:{width:"100%",padding:"8px 12px 8px 36px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff",fontSize:"0.9rem",outline:"none",transition:"all 0.2s ease"},onFocus:P=>{P.target.style.border="1px solid rgba(255, 255, 255, 0.4)",P.target.style.background="rgba(0, 0, 0, 0.5)"},onBlur:P=>{P.target.style.border="1px solid rgba(255, 255, 255, 0.2)",P.target.style.background="rgba(0, 0, 0, 0.3)"}}),i.createElement("span",{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#888",fontSize:"0.9rem"}},"🔍")),i.createElement("select",{value:va,onChange:P=>Ys(P.target.value),style:{padding:"8px 12px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff",fontSize:"0.9rem",outline:"none",cursor:"pointer",minWidth:Se?"100%":"120px"},onFocus:P=>{P.target.style.border="1px solid rgba(255, 255, 255, 0.4)"},onBlur:P=>{P.target.style.border="1px solid rgba(255, 255, 255, 0.2)"}},i.createElement("option",{value:"all"},"All Matches"),i.createElement("option",{value:"upcoming"},"Upcoming"),i.createElement("option",{value:"completed"},"Completed"),i.createElement("option",{value:"pending"},"Pending")),i.createElement("select",{value:Lr,onChange:P=>Gs(P.target.value),style:{padding:"8px 12px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff",fontSize:"0.9rem",outline:"none",cursor:"pointer",minWidth:Se?"100%":"100px"},onFocus:P=>{P.target.style.border="1px solid rgba(255, 255, 255, 0.4)"},onBlur:P=>{P.target.style.border="1px solid rgba(255, 255, 255, 0.2)"}},i.createElement("option",{value:"date"},"Sort by Date"),i.createElement("option",{value:"opponent"},"Sort by Opponent"),i.createElement("option",{value:"status"},"Sort by Status"))),i.createElement("div",{style:{flex:1,overflowY:"auto",maxHeight:"50vh"}},Or.length===0?i.createElement("div",{style:{textAlign:"center",padding:"40px 20px",color:"#888",fontSize:"1.1rem"}},i.createElement("div",{style:{fontSize:"3rem",marginBottom:"16px"}},"📅"),i.createElement("div",{style:{marginBottom:"8px",fontWeight:"bold"}},"No matches found"),i.createElement("div",{style:{fontSize:"0.9rem"}},"You don't have any upcoming matches scheduled.")):i.createElement("div",{style:{display:"grid",gap:"12px",gridTemplateColumns:Se?"1fr":"repeat(auto-fill, minmax(300px, 1fr))"}},Or.map((P,ve)=>{let De="",qe="",ht="upcoming";if(P.player1Id&&P.player2Id)if(P.player1Id.trim().toLowerCase()===rt.trim().toLowerCase()?De=P.player2Id:De=P.player1Id,P.scheduledDate){const Xe=new Date(P.scheduledDate);isNaN(Xe.getTime())?qe="[Invalid Date]":qe=fx(Xe.toISOString().split("T")[0])}else qe="[No Date]";else if(P.senderName&&P.receiverName&&(P.senderName.trim().toLowerCase()===rt.trim().toLowerCase()?De=P.receiverName:De=P.senderName),P.date){const Xe=P.date.split("-");if(Xe.length===3){const[da,zr,Cr]=Xe,jp=new Date(`${da}-${zr}-${Cr}`);isNaN(jp.getTime())?qe="[Invalid Date]":qe=fx(P.date)}else qe="[Invalid Date]"}else qe="[No Date]";P.status;const lt=P.status==="completed";lt?ht="completed":P.status==="pending"&&(ht="pending");const tn=Xe=>{switch(Xe){case"completed":return"#10b981";case"pending":return"#f59e0b";default:return"var(--accent-red)"}},Sr=Xe=>{switch(Xe){case"completed":return"✅";case"pending":return"⏳";default:return"📅"}};return i.createElement("div",{key:P._id||ve,style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.04) 100%)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.15)",padding:"20px",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},onMouseEnter:Xe=>{Xe.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.06) 100%)",Xe.currentTarget.style.border="1px solid rgba(229, 62, 62, 0.3)",Xe.currentTarget.style.transform="translateY(-2px)",Xe.currentTarget.style.boxShadow="0 8px 24px rgba(229, 62, 62, 0.2)"},onMouseLeave:Xe=>{Xe.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.04) 100%)",Xe.currentTarget.style.border="1px solid rgba(255, 255, 255, 0.15)",Xe.currentTarget.style.transform="translateY(0)",Xe.currentTarget.style.boxShadow="none"}},i.createElement("div",{style:{position:"absolute",top:"16px",right:"16px",background:tn(ht),color:"#fff",padding:"6px 12px",borderRadius:"16px",fontSize:"0.8rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"}},Sr(ht)," ",ht),i.createElement("div",{style:{textAlign:"center",marginBottom:"16px",paddingRight:"100px"}},i.createElement("div",{style:{fontSize:"1.2rem",fontWeight:"700",color:"#fff",textShadow:"0 2px 4px rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",flexWrap:"wrap"}},i.createElement("span",null,t," ",a),i.createElement("span",{style:{color:"var(--accent-red)",fontSize:"1rem",fontWeight:"600"}},"VS"),i.createElement("span",null,De||"[Unknown Opponent]"))),i.createElement("div",{style:{display:"flex",justifyContent:"center",gap:"24px",marginBottom:"20px",fontSize:"0.9rem",color:"#ccc"}},i.createElement("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:"rgba(255, 255, 255, 0.1)",padding:"8px 12px",borderRadius:"8px"}},"📅 ",qe),P.location&&i.createElement("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:"rgba(255, 255, 255, 0.1)",padding:"8px 12px",borderRadius:"8px"}},"📍 ",P.location)),i.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"center"}},i.createElement("button",{onClick:()=>Tl(P),style:{padding:"12px 24px",background:"linear-gradient(135deg, var(--accent-red), var(--accent-red-dark))",border:"none",borderRadius:"8px",color:"#fff",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(229, 62, 62, 0.3)",minWidth:"120px"},onMouseEnter:Xe=>{Xe.target.style.transform="translateY(-1px)",Xe.target.style.boxShadow="0 4px 16px rgba(229, 62, 62, 0.5)"},onMouseLeave:Xe=>{Xe.target.style.transform="translateY(0)",Xe.target.style.boxShadow="0 2px 8px rgba(229, 62, 62, 0.3)"}},"📋 View Details"),!lt&&i.createElement(KE,{className:ue.dashboardBtn+" "+ue.matchCardDoneBtn,loading:Li===P._id,loadingText:"Completing...",style:{padding:"12px 24px",fontSize:"0.9rem",fontWeight:"600",background:"linear-gradient(135deg, #6c757d, #5a6268)",border:"none",borderRadius:"8px",color:"#fff",cursor:"pointer",transition:"all 0.2s ease",minWidth:"120px",boxShadow:"0 2px 8px rgba(108, 117, 125, 0.3)"},onMouseEnter:Xe=>{Li!==P._id&&(Xe.target.style.background="linear-gradient(135deg, #10b981, #059669)",Xe.target.style.transform="translateY(-1px)",Xe.target.style.boxShadow="0 4px 16px rgba(16, 185, 129, 0.5)")},onMouseLeave:Xe=>{Li!==P._id&&(Xe.target.style.background="linear-gradient(135deg, #6c757d, #5a6268)",Xe.target.style.transform="translateY(0)",Xe.target.style.boxShadow="0 2px 8px rgba(108, 117, 125, 0.3)")},onClick:()=>{let Xe="",da="";P.player1Id&&P.player2Id?(Xe=P.player1Id,da=P.player2Id):P.type==="scheduled"?(Xe=P.player1,da=P.player2):(Xe=P.senderName,da=P.receiverName),ee(P),he({player1:Xe,player2:da}),An(!0)},type:"button"},"✅ Mark as Complete")))}))),i.createElement("div",{style:{padding:"16px 0 0",borderTop:"1px solid rgba(255, 255, 255, 0.1)",marginTop:"16px",textAlign:"center"}},i.createElement("div",{style:{fontSize:"0.9rem",color:"#888"}},"Showing ",Or.length," match",Or.length!==1?"es":""))),_u=[...ya.filter(P=>{var ve,De;return P.division===m&&[(ve=P.player1Id)==null?void 0:ve.trim().toLowerCase(),(De=P.player2Id)==null?void 0:De.trim().toLowerCase()].includes(rt.toLowerCase())}),...Un.filter(P=>{var ve,De;return P.division===m&&[(ve=P.player1Id)==null?void 0:ve.trim().toLowerCase(),(De=P.player2Id)==null?void 0:De.trim().toLowerCase()].includes(rt.toLowerCase())})];Array.from(new Set(_u.map(P=>P._id))).map(P=>_u.find(ve=>ve._id===P)).length;const[zp,Nl]=v.useState(!1),[Rl,Iu]=v.useState(!1),[en,Du]=v.useState(null),[Ja,ku]=v.useState([]),[Up,Fp]=v.useState(null),[Au,Co]=v.useState(!1);[...On.filter(P=>P.status==="pending"&&P.receiverName===rt),...zn.filter(P=>P.status==="countered"&&P.senderName===rt)],[...zn.filter(P=>P.status==="pending"&&P.senderName===rt),...On.filter(P=>P.status==="countered"&&P.receiverName===rt)];const Wp=fe&&Xn.current?du.createPortal(i.createElement("div",{style:{position:"absolute",top:Xn.current.getBoundingClientRect().top+window.scrollY,left:Xn.current.getBoundingClientRect().left+window.scrollX,width:Xn.current.offsetWidth,height:Xn.current.offsetHeight,zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.6)",pointerEvents:"auto"}},i.createElement(Hw,{open:fe,onClose:()=>Fe(!1),opponents:Su,onOpponentClick:Ml,phase:Yt,selectedCalendarDate:Ve,smartMatchMode:Au,allPlayers:Ja})),document.body):null;return i.createElement("div",{className:ue.dashboardBg,style:{position:"relative"}},i.createElement("style",null,`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
          }
        `),i.createElement("div",{className:ue.dashboardFrame,style:{position:"relative",zIndex:1}},i.createElement("div",{className:ue.dashboardCard,style:{position:"relative",zIndex:1,padding:Se?"12px":"20px",margin:Se?"6px":"16px"}},i.createElement("div",{style:{textAlign:"center",marginBottom:Se?"8px":"16px"}},i.createElement("h1",{className:ue.dashboardTitle,style:{fontSize:Se?"1.6rem":"2rem",textAlign:"center",margin:0,cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>st(!0),onMouseEnter:P=>{P.target.style.color="#e53e3e",P.target.style.textShadow="0 0 8px rgba(229, 62, 62, 0.5)"},onMouseLeave:P=>{P.target.style.color="",P.target.style.textShadow=""}},"Welcome,",i.createElement("span",{className:ue.dashboardUserName,style:{fontSize:Se?"1.4rem":"1.8rem"}},t," ",a)),i.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",marginTop:Se?"4px":"8px",fontSize:Se?"0.7rem":"0.8rem",color:"#888"}},i.createElement("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:wn||br||ba||Ri||hn||ls?"#f59e0b":"#10b981",animation:wn||br||ba||Ri||hn||ls?"pulse 2s infinite":"none"}}),i.createElement("span",null,wn||br||ba||Ri||hn||ls?"Updating...":"Live")),i.createElement("button",{onClick:()=>st(!0),style:{background:"linear-gradient(135deg, #e53e3e, #c53030)",color:"#fff",border:"none",borderRadius:"8px",padding:Se?"8px 16px":"10px 20px",fontSize:Se?"0.8rem":"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(229, 62, 62, 0.3)",marginTop:Se?"6px":"10px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:P=>{P.target.style.background="linear-gradient(135deg, #c53030, #a52a2a)",P.target.style.transform="translateY(-1px)",P.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.4)"},onMouseLeave:P=>{P.target.style.background="linear-gradient(135deg, #e53e3e, #c53030)",P.target.style.transform="translateY(0)",P.target.style.boxShadow="0 2px 8px rgba(229, 62, 62, 0.3)"}},"👤 Profile")),i.createElement("div",{className:ue.announcement,style:{fontSize:Se?"0.75rem":"1rem",marginBottom:Se?"8px":"16px"}},i.createElement("p",null,"This is the BETA version. "),"Matches that are created, scheduled, and confirmed will NOT be played.",i.createElement("br",null),"This is for testing purposes only."),n==="777777"&&i.createElement("div",{style:{marginBottom:Se?12:16,textAlign:"center"}},i.createElement("button",{onClick:()=>window.location.hash="#/tenball-tutorial",style:{background:"linear-gradient(45deg, #4CAF50, #8BC34A)",border:"none",color:"white",padding:Se?"10px 16px":"12px 20px",borderRadius:"25px",cursor:"pointer",fontSize:Se?"0.9rem":"1rem",fontWeight:"bold",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(76, 175, 80, 0.3)"}},i.createElement("img",{src:Cp,alt:"10-Ball",style:{width:"20px",height:"20px",marginRight:"8px",display:"inline-block",verticalAlign:"text-bottom"}}),"Play 10-Ball Tutorial & Learn Official CSI Rules")),!Se&&i.createElement("br",null),p.length>0&&i.createElement("div",{style:{marginBottom:Se?8:16,display:"flex",flexDirection:"column",alignItems:Se?"flex-start":"center",gap:Se?"8px":"12px"}},i.createElement("div",{style:{display:"flex",flexDirection:Se?"column":"row",alignItems:Se?"flex-start":"center",gap:Se?"4px":"12px",width:"100%"}},i.createElement("label",{style:{fontSize:Se?"0.9rem":"1rem"}},"Division: ",p.length>1?i.createElement("select",{value:m,onChange:P=>b(P.target.value),style:{fontSize:Se?"0.9em":"1em",padding:Se?6:4,borderRadius:4}},p.map(P=>i.createElement("option",{key:P,value:P},P))):i.createElement("span",{style:{fontWeight:600}},p[0])))),i.createElement("section",{className:`${ue.dashboardSection} ${ue.dashboardSectionBox} ${ue.matchesSection}`,style:{position:"relative",overflow:"visible",backgroundColor:"rgba(0, 0, 0, .5)",minHeight:Se?"650px":"570px",marginBottom:Se?"16px":"36px",paddingBottom:"20px"}},i.createElement("div",{style:{display:"flex",justifyContent:"center",width:"100%"}},i.createElement("div",{className:ue.poolTableContainer,style:{marginBottom:Se?"12px":"24px",position:"relative",width:"100%",maxWidth:Se?"98%":"600px",height:Se?"400px":"auto",display:"flex",justifyContent:"center",alignItems:"center"}},Yt==="scheduled"&&qn&&i.createElement("div",{style:{position:"absolute",top:Se?"50px":"35px",left:"50%",transform:"translateX(-50%)",zIndex:10,width:Se?"95%":"90%",maxWidth:Se?"500px":"1200px",height:Se?"150px":"200px"}},i.createElement(LP,null,i.createElement(kP,{currentPhase:Yt,seasonData:qn,completedMatches:Un,totalRequiredMatches:Ka,playerName:t,playerLastName:a,selectedDivision:m,onOpenOpponentsModal:P=>{He(P),Co(!P),Fe(!0)},onOpenCompletedMatchesModal:()=>Nl(!0),onOpenStandingsModal:()=>E(!0),onOpenAllMatchesModal:()=>V(!0),pendingCount:wr,sentCount:qa,onOpenProposalListModal:()=>C(!0),onOpenSentProposalListModal:()=>J(!0),upcomingMatches:Or,onMatchClick:Tl,isMobile:Se,onOpenMessageCenter:P=>{$s(P),ka(!0)},currentUser:en,allPlayers:Ja,onSmartMatchClick:Bp,showPhase1Rules:ze,setShowPhase1Rules:Bt,showPhase1Overview:Jt,setShowPhase1Overview:Sn,setPlayerStats:gn,setTimeLeft:Qn,setDeadlineStatus:Vn,setPhase1EndDate:wa}))),Yt==="challenge"&&i.createElement("div",{style:{position:"absolute",top:Se?"50px":"35px",left:"50%",transform:"translateX(-50%)",zIndex:10,width:Se?"95%":"90%",maxWidth:Se?"500px":"1200px",height:Se?"150px":"200px"}},i.createElement(NP,{playerName:t,playerLastName:a,selectedDivision:m,phase:Yt,isMobile:Se,onOpenOpponentsModal:P=>{He(P),Fe(!0)},onOpenCompletedMatchesModal:()=>Nl(!0),onOpenStandingsModal:()=>E(!0),onOpenDefenseChallengersModal:()=>S(!0),onOpenAllMatchesModal:()=>V(!0),pendingCount:wr,sentCount:qa,onOpenProposalListModal:()=>C(!0),onOpenSentProposalListModal:()=>J(!0),onOpenPlayerSearch:()=>ut(!0),upcomingMatches:Or,onMatchClick:Tl,seasonData:qn,completedMatches:Un,standings:ua})),Se?i.createElement("div",{className:ue.simulationContainer,ref:Xn,style:{width:"100% !important",height:"400px !important",position:"relative",minWidth:"0 !important",maxWidth:"100% !important",minHeight:"400px !important",maxHeight:"400px !important"}},i.createElement(Df,{isRotated:!0})):i.createElement(jw,{aspectWidth:600,aspectHeight:300},i.createElement("div",{className:ue.simulationContainer,ref:Xn,style:{width:"100%",height:"100%",position:"relative"}},i.createElement(Df,null))),Wp))),i.createElement("section",{className:`${ue.dashboardSection} ${ue.dashboardSectionBox} ${ue.newsUpdatesSection}`},i.createElement("h2",{className:ue.dashboardSectionTitle},"News & Updates"),ba?i.createElement(J6,{lines:3,height:"16px"}):i.createElement("ul",{className:ue.dashboardList},En.length===0?i.createElement("li",{className:ue.dashboardNoteItem},"No news yet."):En.map((P,ve)=>i.createElement("li",{key:P._id||ve,className:ue.dashboardNoteItem},i.createElement("span",{style:{flex:1}},P.text),n==="777777"&&i.createElement("button",{onClick:()=>fs(P._id),style:{background:"#e53935",color:"#fff",border:"none",borderRadius:4,padding:"2px 8px",cursor:"pointer",fontSize:"0.95em"},"aria-label":"Delete note",title:"Delete note",type:"button"},"Delete")))),n==="777777"&&En.length>0&&i.createElement("button",{style:{marginTop:10,background:"#444",color:"#fff",border:"none",borderRadius:5,padding:"4px 14px",cursor:"pointer",fontSize:"0.98em"},onClick:Dl,type:"button"},"Clear All Notes"),M&&i.createElement("div",{style:{marginTop:10,padding:"10px",background:"#ffebee",color:"#c62828",border:"1px solid #ffcdd2",borderRadius:"4px",fontSize:"0.9em"}},"Error: ",M)),i.createElement("button",{className:ue.dashboardLogoutBtn,onClick:l,type:"button"},"Logout"),n==="777777"&&i.createElement(i.Fragment,null,i.createElement("button",{className:ue.dashboardAdminBtn,onClick:()=>Ne(!0),type:"button",style:{background:"#4CAF50"}},"Register Player"),i.createElement("button",{className:ue.dashboardAdminBtn,onClick:async()=>{It(!0);try{const P=await fetch(`${Pe}/api/users/pending-registrations`);if(P.ok){const ve=await P.json();aa(ve),_t(!0)}else alert("Failed to load pending registrations")}catch(P){console.error("Error loading pending registrations:",P),alert("Error loading pending registrations")}finally{It(!1)}},type:"button",style:{background:"#FF9800"},disabled:Br},Br?"Loading...":"Pending Registrations"),i.createElement("button",{className:ue.dashboardAdminBtn,onClick:async()=>{try{const P={firstName:"Test",lastName:"Player",email:`testplayer${Date.now()}@example.com`,phone:"555-1234",textNumber:"555-5678",emergencyContactName:"Emergency Contact",emergencyContactPhone:"555-9999",preferredContacts:["email","text"],availability:{Mon:["6:00 PM - 8:00 PM"],Tue:["8:00 PM - 10:00 PM"],Wed:[],Thu:["4:00 PM - 6:00 PM"],Fri:[],Sat:["2:00 PM - 4:00 PM"],Sun:["10:00 AM - 12:00 PM"]},locations:`Test Pool Hall
Community Center
Sports Bar`,pin:"1234",division:"FRBCAPL TEST",notes:"Test registration created by admin"},ve=await fetch(`${Pe}/api/users/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(ve.ok){const De=await ve.json();alert(`✅ Test registration created successfully!

Player: Test Player
Email: `+P.email+`

You can now approve this registration.`);const qe=await fetch(`${Pe}/api/users/pending-registrations`);if(qe.ok){const ht=await qe.json();aa(ht)}}else{const De=await ve.json();alert("Failed to create test registration: "+De.error)}}catch(P){console.error("Error creating test registration:",P),alert("Error creating test registration: "+P.message)}},type:"button",style:{background:"#9C27B0"}},"Create Test Registration"),i.createElement("button",{className:ue.dashboardAdminBtn,onClick:()=>O(!0),type:"button"},"Add Note"),i.createElement("button",{className:ue.dashboardAdminBtn,onClick:s,type:"button"},"Admin"),i.createElement("button",{className:ue.dashboardAdminBtn,onClick:async()=>{if(Hn==="challenge")Kt("scheduled");else try{const ve=await(await fetch(`${Pe}/api/seasons/activate-phase2/${encodeURIComponent(m)}`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();ve.success?(console.log("✅ Phase 2 activated successfully:",ve.message),Kt("challenge"),alert("✅ Phase 2 activated successfully! The system will now allow Phase 2 challenges."),m&&(async()=>{try{const[qe,ht]=await Promise.all([Mi.getCurrentSeason(m),Mi.getCurrentPhaseAndWeek(m)]);setSeasonData((qe==null?void 0:qe.season)||null),setCurrentPhaseInfo(ht)}catch(qe){console.error("Error refreshing season data:",qe)}})()):(console.error("❌ Failed to activate Phase 2:",ve.error),alert("Failed to activate Phase 2: "+ve.error))}catch(P){console.error("❌ Error activating Phase 2:",P),alert("Error activating Phase 2: "+P.message)}},type:"button"},Hn==="challenge"?"Switch to Phase 1 (Scheduled)":"Activate Phase 2 (Challenge)"),Hn&&i.createElement("button",{className:ue.dashboardAdminBtn,onClick:()=>Kt(null),type:"button",style:{background:"#888"}},"Clear Phase Override")))),Qe&&i.createElement(i.Fragment,null,i.createElement(n0,{onClose:()=>ut(!1),excludeName:rt,senderName:rt,senderEmail:d,selectedDivision:m,phase:Yt,onProposalComplete:()=>ut(!1)})),Pt&&i.createElement(n0,{onClose:()=>xt(!1),excludeName:null,senderName:rt,senderEmail:d,phase:Yt,onProposalComplete:()=>xt(!1)}),Yn&&pt&&i.createElement(_p,{onClose:()=>{Zn(!1),de(null)},player:pt,onProposeMatch:(P,ve)=>{zt({player:pt,day:P,slot:ve,selectedDivision:m,phase:Yt}),Ye(!0),Zn(!1),de(null)},selectedDivision:m,phase:Yt}),nt&&Dt&&i.createElement(Rp,{player:Dt.player,day:Dt.day,slot:Dt.slot,selectedDivision:Dt.selectedDivision,phase:Dt.phase||Yt,onClose:()=>Ye(!1),senderName:`${t} ${a}`,senderEmail:d,onProposalComplete:P=>{Ye(!1),zt(null),P&&Ia(P,"add"),na(),sn()}}),i.createElement(GA,{open:x,onClose:()=>E(!1),standingsUrl:qP[m]}),i.createElement($A,{open:w,onClose:()=>S(!1),playerName:t,playerLastName:a,selectedDivision:m}),i.createElement(u8,{open:R,onClose:Al,match:G,onCompleted:P=>setUpcomingMatches(ve=>ve.filter(De=>De._id!==P)),userPin:n,onMatchUpdated:P=>q(P),senderName:`${t} ${a}`,senderEmail:d}),W&&i.createElement("div",{className:ue.modalOverlay,style:{zIndex:99999}},i.createElement("div",{className:ue.modalContent,style:{maxWidth:400,margin:"auto"}},i.createElement("h2",null,"Add News/Note"),i.createElement("textarea",{value:B,onChange:P=>U(P.target.value),rows:4,style:{width:"100%",marginBottom:12,borderRadius:6,padding:8},placeholder:"Enter your note..."}),M&&i.createElement("div",{style:{color:"red",marginBottom:8}},M),i.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:8}},i.createElement("button",{className:ue.dashboardBtn,onClick:()=>O(!1),type:"button"},"Cancel"),i.createElement("button",{className:ue.dashboardBtn,disabled:!B.trim(),onClick:Zs,type:"button"},"Add Note")))),_&&i.createElement(Vh,{proposals:On,onSelect:P=>{const ve=d&&P.senderEmail&&d.toLowerCase()===P.senderEmail.toLowerCase()||`${t} ${a}`.toLowerCase()===(P.senderName||"").toLowerCase();I(P),T(""),C(!1),Da(ve)},onClose:()=>C(!1),type:"received"}),F&&i.createElement(Vh,{proposals:zn,onSelect:P=>{const ve=d&&P.senderEmail&&d.toLowerCase()===P.senderEmail.toLowerCase()||`${t} ${a}`.toLowerCase()===(P.senderName||"").toLowerCase();I(P),T(""),J(!1),Da(ve)},onClose:()=>J(!1),type:"sent"}),D&&!Er&&i.createElement("div",{className:ue.modalOverlay},i.createElement("div",{className:ue.modalContent,style:{maxWidth:420,margin:"auto"}},i.createElement(x8,{proposal:D,userNote:A,setUserNote:T,onConfirm:async()=>{await es.updateProposalStatus(D._id,"confirmed",A),I(null),T(""),na(),sn()},onClose:()=>{I(null),T("")},onCounterPropose:()=>{X(D),Z(!0),I(null)},phase:Yt,currentUserName:`${t} ${a}`,currentUserEmail:d}))),i.createElement(Lw,{proposal:K,open:H,onClose:()=>{Z(!1),X(null)},onSubmit:kl,senderPlayer:$.find(P=>{var ve,De;return`${P.firstName} ${P.lastName}`.trim().toLowerCase()===((K==null?void 0:K.senderName)||"").trim().toLowerCase()||((ve=P.email)==null?void 0:ve.toLowerCase())===((De=K==null?void 0:K.senderEmail)==null?void 0:De.toLowerCase())}),phase:Yt,selectedDivision:m}),D&&Er&&i.createElement(tR,{proposal:D,open:Er,onClose:()=>{Da(!1),I(null)},onEdit:()=>{D.isCounter?(Da(!1),setTimeout(()=>{I(null),X(D),Z(!0)},0)):cs(!0)},onMessage:()=>{alert("Message opponent coming soon!")}}),D&&on&&i.createElement(rR,{proposal:D,open:on,onClose:()=>{cs(!1)},onSave:P=>{I(P),sn(),cs(!1)},selectedDivision:m,phase:Yt,receiverPlayer:$.find(P=>{var ve,De;return`${P.firstName} ${P.lastName}`.trim().toLowerCase()===(D.receiverName||"").trim().toLowerCase()||((ve=P.email)==null?void 0:ve.toLowerCase())===((De=D.receiverEmail)==null?void 0:De.toLowerCase())})}),Cu,Bi&&i.createElement("div",{className:ue.modalOverlay,style:{zIndex:99999}},i.createElement("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"95vw",height:"95vh",maxWidth:"1400px",maxHeight:"900px",background:"#181818",borderRadius:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",overflow:"hidden"}},i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:"1px solid #333",background:"#222",borderRadius:"12px 12px 0 0"}},i.createElement("h2",{style:{margin:0,color:"#ffffff",fontSize:"1.2em"}},Ra==="league"?"League Chat":"Direct Messages"),i.createElement("button",{onClick:()=>ka(!1),style:{background:"none",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"background-color 0.2s"},onMouseOver:P=>P.target.style.background="#444",onMouseOut:P=>P.target.style.background="none",type:"button"},"×")),i.createElement("div",{style:{flex:1,overflow:"hidden",position:"relative"}},Ra==="league"?i.createElement(eS,{userName:`${t} ${a}`,userEmail:d,userPin:n,onClose:()=>ka(!1)}):i.createElement(GR,{userName:`${t} ${a}`,userEmail:d,userPin:n,selectedDivision:m,opponentEmails:Eu,onClose:()=>ka(!1)})))),zp&&i.createElement(Vh,{proposals:Un,onSelect:()=>{},onClose:()=>Nl(!1),type:"completed",isAdmin:n==="777777",senderEmail:d,senderName:`${t} ${a}`,onProposalUpdated:P=>{vr(P),sn()}}),i.createElement(N0,{open:Oi,onClose:()=>An(!1),player1:L.player1,player2:L.player2,onSelect:async P=>{if(Pr){if((is==null?void 0:is.phase)==="scheduled"&&qn&&Mi.hasPhase1DeadlinePassed(qn)&&!window.confirm(`⚠️ PHASE 1 DEADLINE HAS PASSED!

You are attempting to complete a match after the Phase 1 deadline. This may affect your standings or eligibility for Phase 2.

Do you want to continue marking this match as completed?`)){An(!1);return}An(!1),ds(Pr._id);try{const De=await(await fetch(`${Pe}/api/matches?proposalId=${Pr._id}`)).json();if(De.length>0){const qe=De[0]._id;await fetch(`${Pe}/api/matches/${qe}/complete`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({winner:P,score:"TBD",notes:`Completed by ${t} ${a}`})})}else await es.markCompleted(Pr._id,P);Ws({...Pr,winner:P}),na(),sn()}catch(ve){console.error("Error completing match:",ve),alert("Failed to mark as completed.")}ds(null)}}}),i.createElement(RP,{isOpen:ye,onClose:()=>{Ee(!1),ke(null)},match:Ae,onValidate:async P=>{console.log("Validating match:",P),na()},onReject:async P=>{console.log("Rejecting match:",P),na()}}),i.createElement(OP,{isOpen:Rl,onClose:()=>Iu(!1),player1:en,player2:Up,upcomingMatches:Or,isMobile:Se,selectedDivision:m,phase:Yt,senderName:`${t} ${a}`,senderEmail:d,onProposalComplete:()=>{na(),sn()}}),Le&&i.createElement("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)"}},i.createElement("div",{className:"draggable-modal",style:{transform:`translate(${We.x}px, ${We.y}px)`,cursor:Ze?"grabbing":"default",background:"linear-gradient(120deg, #232323 80%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:window.innerWidth<=400?"0":"1rem",boxShadow:"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",width:window.innerWidth<=400?"95vw":"auto",maxWidth:window.innerWidth<=400?"95vw":"350px",minWidth:0,margin:window.innerWidth<=400?"0":"0 auto",left:0,right:0,animation:"modalBounceIn 0.5s cubic-bezier(.21,1.02,.73,1.01)",padding:0,position:"relative",fontFamily:"inherit",boxSizing:"border-box",textAlign:"center",maxHeight:"80vh",overflowY:"auto"},onClick:P=>P.stopPropagation()},i.createElement("div",{className:"modal-header",onMouseDown:La,style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#e53e3e",padding:"0.8rem 1rem 0.6rem 1rem",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",position:"relative",cursor:"grab",userSelect:"none",gap:"0.8rem"}},i.createElement("span",{className:"modal-accent-bar",style:{position:"absolute",left:0,top:0,width:"100%",height:"4px",background:"linear-gradient(90deg, #fff0 0%, #e53e3e 60%, #fff0 100%)",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",pointerEvents:"none"}}),i.createElement("h2",{className:"modal-title",style:{margin:0,fontSize:window.innerWidth<=500?"0.9rem":"1rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.02em",color:"#fff",textShadow:"0 1px 12px #000a",zIndex:2,flex:1,wordBreak:"break-word",minWidth:0}},"👤 Profile Information"),i.createElement("button",{className:"modal-close-btn",onClick:()=>st(!1),"aria-label":"Close",style:{background:"none",border:"none",color:"#fff",fontSize:"1.3em",fontWeight:"bold",cursor:"pointer",zIndex:10,lineHeight:1,transition:"color 0.2s, transform 0.2s",padding:0,marginLeft:"0.3rem"},onMouseEnter:P=>{P.target.style.color="#ffd6d6",P.target.style.transform="scale(1.2) rotate(10deg)"},onMouseLeave:P=>{P.target.style.color="#fff",P.target.style.transform="scale(1) rotate(0deg)"}},"×")),i.createElement("div",{className:"modal-content",style:{padding:window.innerWidth<=500?"0.5rem 0.7rem 0.3rem 0.7rem":"0.7rem 0.9rem 0.5rem 0.9rem",overflowY:"auto",maxHeight:"calc(80vh - 60px)"}},i.createElement("div",{style:{display:"grid",gap:Se?"5px":"6px"}},i.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:Se?"5px 7px":"7px 9px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},i.createElement("div",{style:{fontWeight:"bold",color:"#ffffff",marginBottom:"3px",fontSize:Se?"0.85rem":"0.9rem"}},"📝 Basic Information"),i.createElement("div",{style:{color:"#cccccc",lineHeight:"1.3",fontSize:Se?"0.8rem":"0.85rem"}},i.createElement("div",{style:{marginBottom:"2px"}},i.createElement("strong",null,"Name:")," ",en?`${en.firstName} ${en.lastName}`:`${t} ${a}`),i.createElement("div",{style:{marginBottom:"2px"}},i.createElement("strong",null,"Email:")," ",en?en.email||"Not provided":d||"Not provided"),i.createElement("div",null,i.createElement("strong",null,"Phone:")," ",en&&en.phone||"Not provided"),!en&&i.createElement("div",{style:{marginTop:"8px",padding:"6px 10px",background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"4px",fontSize:Se?"0.7rem":"0.75rem",color:"#ffc107"}},"⚠️ Some profile details may not be fully loaded yet"))),en&&en.preferredContacts&&en.preferredContacts.length>0&&i.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:Se?"5px 7px":"7px 9px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},i.createElement("div",{style:{fontWeight:"bold",color:"#ffffff",marginBottom:"3px",fontSize:Se?"0.85rem":"0.9rem"}},"📞 Preferred Contact Methods"),i.createElement("div",{style:{color:"#cccccc",lineHeight:"1.3",fontSize:Se?"0.8rem":"0.85rem"}},en.preferredContacts.map((P,ve)=>i.createElement("div",{key:ve,style:{marginBottom:"2px"}},"• ",P.charAt(0).toUpperCase()+P.slice(1))))),en&&en.locations&&i.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:Se?"5px 7px":"7px 9px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},i.createElement("div",{style:{fontWeight:"bold",color:"#ffffff",marginBottom:"3px",fontSize:Se?"0.85rem":"0.9rem"}},"📍 Preferred Locations"),i.createElement("div",{style:{color:"#cccccc",lineHeight:"1.3",fontSize:Se?"0.8rem":"0.85rem"}},en.locations?i.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",alignItems:"center"}},en.locations.split(/\r?\n/).filter(Boolean).map((P,ve)=>i.createElement("div",{key:ve,style:{display:"flex",alignItems:"center",gap:"4px"}},i.createElement("span",{style:{background:"rgba(255, 255, 255, 0.1)",color:"#ffffff",padding:"3px 8px",borderRadius:"12px",fontSize:Se?"0.7rem":"0.75rem",fontWeight:"500",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.2)"}},P.trim()),ve<en.locations.split(/\r?\n/).filter(Boolean).length-1&&i.createElement("span",{style:{color:"#666",fontSize:Se?"0.6rem":"0.65rem"}},"•")))):"Not specified")),en&&en.availability&&i.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:Se?"5px 7px":"7px 9px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},i.createElement("div",{style:{fontWeight:"bold",color:"#ffffff",marginBottom:"3px",fontSize:Se?"0.85rem":"0.9rem"}},"📅 Availability"),i.createElement("div",{style:{display:"grid",gridTemplateColumns:Se?"repeat(2, 1fr)":"repeat(3, 1fr)",gap:Se?"5px":"6px",fontSize:Se?"0.75rem":"0.8rem"}},Object.entries(en.availability).map(([P,ve])=>i.createElement("div",{key:P,style:{background:"rgba(255, 255, 255, 0.08)",padding:Se?"5px 7px":"7px 9px",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.15)",textAlign:"center"}},i.createElement("div",{style:{fontWeight:"bold",color:"#ffffff",marginBottom:"2px",fontSize:Se?"0.75rem":"0.8rem"}},P),ve&&ve.length>0?i.createElement("div",{style:{color:"#cccccc",fontSize:Se?"0.7rem":"0.75rem"}},ve.map((De,qe)=>i.createElement("div",{key:qe,style:{marginBottom:"1px"}},De))):i.createElement("div",{style:{color:"#888",fontStyle:"italic",fontSize:Se?"0.7rem":"0.75rem"}},"No times"))))),i.createElement("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:Se?"5px 7px":"7px 9px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},i.createElement("div",{style:{fontWeight:"bold",color:"#ffffff",marginBottom:"3px",fontSize:Se?"0.85rem":"0.9rem"}},"🏆 Divisions"),i.createElement("div",{style:{color:"#cccccc",lineHeight:"1.3",fontSize:Se?"0.8rem":"0.85rem"}},p.length>0?p.join(", "):"No divisions assigned")),i.createElement("div",{style:{marginTop:Se?"5px":"6px",textAlign:"center",display:"flex",gap:"8px",justifyContent:"center"}},i.createElement("button",{style:{background:"linear-gradient(135deg, #4CAF50, #45a049)",color:"#fff",border:"none",borderRadius:"6px",padding:Se?"7px 14px":"9px 18px",fontSize:Se?"0.85rem":"0.95rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(76, 175, 80, 0.3)"},onMouseEnter:P=>{P.target.style.background="linear-gradient(135deg, #45a049, #3d8b40)",P.target.style.transform="translateY(-1px)",P.target.style.boxShadow="0 4px 12px rgba(76, 175, 80, 0.4)"},onMouseLeave:P=>{P.target.style.background="linear-gradient(135deg, #4CAF50, #45a049)",P.target.style.transform="translateY(0)",P.target.style.boxShadow="0 2px 8px rgba(76, 175, 80, 0.3)"},onClick:()=>{alert("Edit profile functionality coming soon!")}},"✏️ Edit Profile"),i.createElement("button",{style:{background:"linear-gradient(135deg, #6c757d, #5a6268)",color:"#fff",border:"none",borderRadius:"6px",padding:Se?"7px 14px":"9px 18px",fontSize:Se?"0.85rem":"0.95rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(108, 117, 125, 0.3)"},onMouseEnter:P=>{P.target.style.background="linear-gradient(135deg, #5a6268, #495057)",P.target.style.transform="translateY(-1px)",P.target.style.boxShadow="0 4px 12px rgba(108, 117, 125, 0.4)"},onMouseLeave:P=>{P.target.style.background="linear-gradient(135deg, #6c757d, #5a6268)",P.target.style.transform="translateY(0)",P.target.style.boxShadow="0 2px 8px rgba(108, 117, 125, 0.3)"},onClick:()=>st(!1)},"❌ Close")))))),i.createElement(PP,{isOpen:ze,onClose:()=>Bt(!1),isMobile:Se}),i.createElement(BP,{isOpen:Jt,onClose:()=>Sn(!1),isMobile:Se,playerName:t,playerLastName:a,completedMatches:Un,totalRequiredMatches:Ka,playerStats:xa,standings:ua,timeLeft:ln,deadlineStatus:ra,phase1EndDate:Xa,allPlayers:Ja,selectedDivision:m}),i.createElement(tS,{isOpen:_e,onClose:()=>Ne(!1),onSuccess:P=>{console.log("New player registered by admin:",P),Ne(!1),window.location.reload()},isMobile:Se,isAdmin:!0}),Ue&&i.createElement(Rn,{open:Ue,onClose:()=>_t(!1),title:"Pending Registrations",maxWidth:"800px"},i.createElement("div",{style:{padding:"20px",maxHeight:"70vh",overflowY:"auto"}},Tt.length===0?i.createElement("div",{style:{textAlign:"center",color:"#ccc",padding:"40px"}},i.createElement("h3",null,"No Pending Registrations"),i.createElement("p",null,"All registrations have been processed.")):i.createElement("div",{style:{display:"grid",gap:"15px"}},Tt.sort((P,ve)=>new Date(P.registrationDate)-new Date(ve.registrationDate)).map((P,ve)=>i.createElement("div",{key:P._id,style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",padding:"15px"}},i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"}},i.createElement("div",null,i.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"5px"}},i.createElement("span",{style:{background:"#e53e3e",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold",minWidth:"20px",textAlign:"center"}},"#",ve+1),i.createElement("h4",{style:{color:"#e53e3e",margin:"0"}},P.firstName," ",P.lastName)),i.createElement("p",{style:{color:"#ccc",margin:"0 0 5px 0"}},P.email," • ",P.phone),i.createElement("p",{style:{color:"#999",margin:"0 0 5px 0",fontSize:"12px"}},"Registered: ",new Date(P.registrationDate).toLocaleDateString()),i.createElement("p",{style:{color:"#999",margin:"0",fontSize:"12px"}},"Division: ",P.division||"Not assigned")),i.createElement("div",{style:{display:"flex",gap:"8px",flexDirection:"column",alignItems:"flex-end"}},i.createElement("div",{style:{marginBottom:"10px",textAlign:"right"}},i.createElement("label",{style:{color:"#ccc",fontSize:"12px",display:"block",marginBottom:"2px"}},"Assign Division:"),i.createElement("select",{id:`division-${P._id}`,defaultValue:P.division||"",style:{padding:"4px 8px",borderRadius:"4px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"12px",minWidth:"120px"}},i.createElement("option",{value:""},"Select Division"),i.createElement("option",{value:"FRBCAPL TEST"},"FRBCAPL TEST"),i.createElement("option",{value:"Singles Test"},"Singles Test"),i.createElement("option",{value:"Waiting List"},"Waiting List"))),i.createElement("div",{style:{display:"flex",gap:"8px"}},i.createElement("button",{onClick:async()=>{const qe=document.getElementById(`division-${P._id}`).value;if(!qe){alert("Please select a division before approving.");return}const ht={hasPaid:!0,paymentDate:new Date,paymentMethod:"Cash",paymentNotes:"Approved by admin"};try{const lt=await fetch(`${Pe}/api/users/admin/approve-registration/${P._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approvedBy:`${t} ${a}`,paymentInfo:ht,division:qe})});if(lt.ok)alert(`Registration approved successfully!

Player: ${P.firstName} ${P.lastName}
Division: ${qe}`),aa(tn=>tn.filter(Sr=>Sr._id!==P._id));else{const tn=await lt.json();alert("Failed to approve: "+tn.error)}}catch(lt){console.error("Error approving registration:",lt),alert("Error approving registration")}},style:{background:"#4CAF50",color:"white",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"Approve"),i.createElement("button",{onClick:async()=>{const De=prompt("Enter rejection reason (optional):");if(De!==null)try{const qe=await fetch(`${Pe}/api/users/admin/reject-registration/${P._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rejectedBy:`${t} ${a}`,notes:De})});if(qe.ok)alert("Registration rejected successfully!"),aa(ht=>ht.filter(lt=>lt._id!==P._id));else{const ht=await qe.json();alert("Failed to reject: "+ht.error)}}catch(qe){console.error("Error rejecting registration:",qe),alert("Error rejecting registration")}},style:{background:"#f44336",color:"white",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"Reject"))),i.createElement("div",{style:{marginTop:"10px"}},i.createElement("h5",{style:{color:"#e53e3e",margin:"0 0 5px 0",fontSize:"14px"}},"Availability:"),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"5px",fontSize:"12px"}},Object.entries(P.availability).map(([De,qe])=>i.createElement("div",{key:De,style:{color:"#ccc"}},i.createElement("strong",null,De,":")," ",qe.length>0?qe.join(", "):"None"))))),i.createElement("div",{style:{marginTop:"10px"}},i.createElement("h5",{style:{color:"#e53e3e",margin:"0 0 5px 0",fontSize:"14px"}},"Locations:"),i.createElement("p",{style:{color:"#ccc",margin:"0",fontSize:"12px"}},P.locations))))))))}const QP="_adminDashboardRoot_12miy_9",VP="_adminDashboardNav_12miy_25",XP="_navLeft_12miy_45",KP="_navRight_12miy_45",JP="_adminDashboardMainColumn_12miy_89",e9="_banner_12miy_103",t9="_slideIn_12miy_1",n9="_success_12miy_125",a9="_error_12miy_137",r9="_sectionNavigation_12miy_173",s9="_sectionButton_12miy_193",i9="_active_12miy_231",o9="_sectionContent_12miy_245",l9="_overviewSection_12miy_263",c9="_quickActions_12miy_301",u9="_quickActionButton_12miy_317",d9="_workflowContainer_12miy_383",f9="_workflowHeader_12miy_393",p9="_workflowProgress_12miy_427",m9="_workflowSteps_12miy_445",h9="_workflowStepIndicator_12miy_461",g9="_pending_12miy_483",y9="_completed_12miy_505",b9="_stepNumber_12miy_517",v9="_stepInfo_12miy_569",x9="_stepTitle_12miy_577",w9="_stepDescription_12miy_587",E9="_workflowContent_12miy_597",S9="_workflowStep_12miy_445",C9="_stepInstructions_12miy_621",_9="_instructionItem_12miy_637",I9="_stepActions_12miy_675",D9="_workflowButton_12miy_689",k9="_divisionForm_12miy_743",A9="_workflowInput_12miy_757",M9="_workflowNote_12miy_799",T9="_workflowResult_12miy_823",N9="_dataSyncTools_12miy_847",R9="_syncButton_12miy_863",L9="_syncResult_12miy_913",P9="_playerManagementContainer_12miy_941",B9="_tabHeader_12miy_951",O9="_tabButton_12miy_969",z9="_tabContent_12miy_1015",U9="_approvalSection_12miy_1029",F9="_loadingMessage_12miy_1039",W9="_emptyState_12miy_1053",j9="_registrationList_12miy_1075",H9="_registrationCard_12miy_1087",Y9="_registrationHeader_12miy_1115",G9="_registrationNumber_12miy_1129",$9="_registrationDetails_12miy_1159",Z9="_registrationActions_12miy_1185",q9="_divisionSelect_12miy_1199",Q9="_approveButton_12miy_1243",V9="_rejectButton_12miy_1283",X9="_userSearchContainer_12miy_1325",K9="_searchForm_12miy_1335",J9="_searchInput_12miy_1347",eB="_searchButton_12miy_1387",tB="_searchResults_12miy_1425",nB="_userCard_12miy_1437",aB="_userInfo_12miy_1463",rB="_userName_12miy_1475",sB="_userEmail_12miy_1491",iB="_userContactInfo_12miy_1503",oB="_userPhone_12miy_1519",lB="_userTextNumber_12miy_1519",cB="_userDetails_12miy_1531",uB="_userAvailability_12miy_1561",dB="_availabilityGrid_12miy_1569",fB="_availabilityDay_12miy_1583",pB="_dayLabel_12miy_1597",mB="_timeSlots_12miy_1609",hB="_userActions_12miy_1629",gB="_addButton_12miy_1645",yB="_removeButton_12miy_1695",bB="_matchManagementContainer_12miy_1743",vB="_sectionHeader_12miy_1753",xB="_systemStatusContainer_12miy_1797",wB="_statsGrid_12miy_1807",EB="_statCard_12miy_1821",SB="_statNumber_12miy_1849",CB="_statLabel_12miy_1863",_B="_systemActions_12miy_1877",IB="_systemButton_12miy_1891",ie={adminDashboardRoot:QP,adminDashboardNav:VP,navLeft:XP,navRight:KP,adminDashboardMainColumn:JP,banner:e9,slideIn:t9,success:n9,error:a9,sectionNavigation:r9,sectionButton:s9,active:i9,sectionContent:o9,overviewSection:l9,quickActions:c9,quickActionButton:u9,workflowContainer:d9,workflowHeader:f9,workflowProgress:p9,workflowSteps:m9,workflowStepIndicator:h9,pending:g9,completed:y9,stepNumber:b9,stepInfo:v9,stepTitle:x9,stepDescription:w9,workflowContent:E9,workflowStep:S9,stepInstructions:C9,instructionItem:_9,stepActions:I9,workflowButton:D9,divisionForm:k9,workflowInput:A9,workflowNote:M9,workflowResult:T9,dataSyncTools:N9,syncButton:R9,syncResult:L9,playerManagementContainer:P9,tabHeader:B9,tabButton:O9,tabContent:z9,approvalSection:U9,loadingMessage:F9,emptyState:W9,registrationList:j9,registrationCard:H9,registrationHeader:Y9,registrationNumber:G9,registrationDetails:$9,registrationActions:Z9,divisionSelect:q9,approveButton:Q9,rejectButton:V9,userSearchContainer:X9,searchForm:K9,searchInput:J9,searchButton:eB,searchResults:tB,userCard:nB,userInfo:aB,userName:rB,userEmail:sB,userContactInfo:iB,userPhone:oB,userTextNumber:lB,userDetails:cB,userAvailability:uB,availabilityGrid:dB,availabilityDay:fB,dayLabel:pB,timeSlots:mB,userActions:hB,addButton:gB,removeButton:yB,matchManagementContainer:bB,sectionHeader:vB,systemStatusContainer:xB,statsGrid:wB,statCard:EB,statNumber:SB,statLabel:CB,systemActions:_B,systemButton:IB};function DB(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[l,c,d]=t.split("-"),p=new Date(parseInt(l),parseInt(c)-1,parseInt(d)),h=String(p.getMonth()+1).padStart(2,"0"),m=String(p.getDate()).padStart(2,"0"),b=p.getFullYear();return`${h}-${m}-${b}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const l=t.split("/");if(l.length===3){const[c,d,p]=l;a=new Date(p,c-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}const px=Pe;function kB({open:t,onClose:a}){const[e,n]=v.useState([]),[s,l]=v.useState(!0);v.useEffect(()=>{t&&(l(!0),fetch(`${px}/admin/unentered-matches`).then(d=>d.json()).then(d=>{n(d),l(!1)}))},[t]);const c=d=>{fetch(`${px}/admin/mark-lms-entered/${d}`,{method:"PATCH"}).then(p=>p.json()).then(()=>n(e.filter(p=>p._id!==d)))};return t?i.createElement(Rn,{open:t,onClose:a,title:"Confirmed Challenge Matches Needing LMS Entry",maxWidth:"520px"},s?i.createElement("div",{style:{color:"#fff",textAlign:"center",padding:"2rem"}},"Loading unentered matches..."):e.length===0?i.createElement("div",{style:{color:"#fff",textAlign:"center",padding:"2rem"}},"All matches are entered!"):i.createElement("ul",{style:{padding:0,listStyle:"none"}},e.map(d=>i.createElement("li",{key:d._id,style:{marginBottom:12,background:"#222",borderRadius:8,padding:"12px 14px",display:"flex",alignItems:"center",justifyContent:"space-between",borderLeft:"4px solid #c00"}},i.createElement("span",null,i.createElement("span",{style:{color:"#fff"}},i.createElement("b",null,DB(d.date))," — ",i.createElement("span",{style:{color:"#c00"}},d.senderName)," vs ",i.createElement("span",{style:{color:"#c00"}},d.receiverName),d.location&&i.createElement("span",{style:{color:"#fff"}}," @ ",d.location))),i.createElement("button",{style:{marginLeft:16,background:"#c00",color:"#fff",border:"none",borderRadius:5,padding:"7px 14px",fontWeight:"bold",cursor:"pointer",fontSize:"1em",transition:"background 0.2s"},onClick:()=>c(d._id)},"Mark as Entered"))))):null}const AB=({division:t,isAdmin:a=!1})=>{const[e,n]=v.useState([]),[s,l]=v.useState([]),[c,d]=v.useState(!0),[p,h]=v.useState(null),[m,b]=v.useState(null),[x,E]=v.useState(!1),[w,S]=v.useState(!1),[_,C]=v.useState(""),[D,I]=v.useState(""),[A,T]=v.useState(""),[F,J]=v.useState("");v.useEffect(()=>{t&&(H(),Z())},[t]);const H=async()=>{try{d(!0);const[B,U]=await Promise.all([sp(t,"scheduled"),sp(t,"completed")]);n(B),l(U)}catch(B){console.error("Error loading matches:",B)}finally{d(!1)}},Z=async()=>{try{const B=await FP(t);h(B)}catch(B){console.error("Error loading match stats:",B)}},K=async()=>{if(!(!m||!_||!D))try{await zP(m._id,_,D,A),E(!1),b(null),C(""),I(""),T(""),H(),Z()}catch(B){console.error("Error completing match:",B),alert("Failed to complete match: "+B.message)}},X=async()=>{if(m)try{await UP(m._id,F),S(!1),b(null),J(""),H(),Z()}catch(B){console.error("Error cancelling match:",B),alert("Failed to cancel match: "+B.message)}},W=B=>new Date(B).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),O=B=>B.status==="completed"?"✅ Completed":B.status==="cancelled"?"❌ Cancelled":"⏳ Scheduled";return c?i.createElement("div",{className:ue.loading},"Loading matches..."):i.createElement("div",{className:ue.matchManager},p&&i.createElement("div",{className:ue.matchStats},i.createElement("h3",null,"Match Statistics"),i.createElement("div",{className:ue.statsGrid},i.createElement("div",{className:ue.statItem},i.createElement("span",{className:ue.statNumber},p.total),i.createElement("span",{className:ue.statLabel},"Total Matches")),i.createElement("div",{className:ue.statItem},i.createElement("span",{className:ue.statNumber},p.scheduled),i.createElement("span",{className:ue.statLabel},"Scheduled")),i.createElement("div",{className:ue.statItem},i.createElement("span",{className:ue.statNumber},p.completed),i.createElement("span",{className:ue.statLabel},"Completed")))),i.createElement("div",{className:ue.matchSection},i.createElement("h3",null,"Scheduled Matches (",e.length,")"),e.length===0?i.createElement("p",{className:ue.noMatches},"No scheduled matches"):i.createElement("div",{className:ue.matchList},e.map(B=>i.createElement("div",{key:B._id,className:ue.matchCard},i.createElement("div",{className:ue.matchHeader},i.createElement("span",{className:ue.matchStatus},O(B)),i.createElement("span",{className:ue.matchDate},W(B.scheduledDate))),i.createElement("div",{className:ue.matchPlayers},i.createElement("span",{className:ue.player1},B.player1Id),i.createElement("span",{className:ue.vs},"vs"),i.createElement("span",{className:ue.player2},B.player2Id)),i.createElement("div",{className:ue.matchDetails},i.createElement("span",{className:ue.location},"📍 ",B.location),i.createElement("span",{className:ue.type},"🎯 ",B.type)),a&&i.createElement("div",{className:ue.matchActions},i.createElement("button",{className:ue.actionButton,onClick:()=>{b(B),E(!0)}},"Complete"),i.createElement("button",{className:`${ue.actionButton} ${ue.cancelButton}`,onClick:()=>{b(B),S(!0)}},"Cancel")))))),i.createElement("div",{className:ue.matchSection},i.createElement("h3",null,"Completed Matches (",s.length,")"),s.length===0?i.createElement("p",{className:ue.noMatches},"No completed matches"):i.createElement("div",{className:ue.matchList},s.map(B=>i.createElement("div",{key:B._id,className:`${ue.matchCard} ${ue.completedMatch}`},i.createElement("div",{className:ue.matchHeader},i.createElement("span",{className:ue.matchStatus},O(B)),i.createElement("span",{className:ue.matchDate},W(B.completedDate))),i.createElement("div",{className:ue.matchPlayers},i.createElement("span",{className:`${ue.player1} ${B.winner===B.player1Id?ue.winner:""}`},B.player1Id),i.createElement("span",{className:ue.vs},"vs"),i.createElement("span",{className:`${ue.player2} ${B.winner===B.player2Id?ue.winner:""}`},B.player2Id)),i.createElement("div",{className:ue.matchResult},i.createElement("span",{className:ue.winner},"🏆 Winner: ",B.winner),i.createElement("span",{className:ue.score},"Score: ",B.score)),B.notes&&i.createElement("div",{className:ue.matchNotes},i.createElement("span",{className:ue.notesLabel},"Notes:"),i.createElement("span",{className:ue.notesText},B.notes)))))),x&&m&&i.createElement("div",{className:ue.modalOverlay},i.createElement("div",{className:ue.modal},i.createElement("h3",null,"Complete Match"),i.createElement("p",null,m.player1Id," vs ",m.player2Id),i.createElement("div",{className:ue.formGroup},i.createElement("label",null,"Winner:"),i.createElement("select",{value:_,onChange:B=>C(B.target.value)},i.createElement("option",{value:""},"Select winner"),i.createElement("option",{value:m.player1Id},m.player1Id),i.createElement("option",{value:m.player2Id},m.player2Id))),i.createElement("div",{className:ue.formGroup},i.createElement("label",null,"Score:"),i.createElement("input",{type:"text",value:D,onChange:B=>I(B.target.value),placeholder:"e.g., 7-5"})),i.createElement("div",{className:ue.formGroup},i.createElement("label",null,"Notes (optional):"),i.createElement("textarea",{value:A,onChange:B=>T(B.target.value),placeholder:"Any additional notes..."})),i.createElement("div",{className:ue.modalActions},i.createElement("button",{onClick:K,disabled:!_||!D},"Complete Match"),i.createElement("button",{onClick:()=>E(!1)},"Cancel")))),w&&m&&i.createElement("div",{className:ue.modalOverlay},i.createElement("div",{className:ue.modal},i.createElement("h3",null,"Cancel Match"),i.createElement("p",null,m.player1Id," vs ",m.player2Id),i.createElement("div",{className:ue.formGroup},i.createElement("label",null,"Reason for cancellation:"),i.createElement("textarea",{value:F,onChange:B=>J(B.target.value),placeholder:"Why is this match being cancelled?"})),i.createElement("div",{className:ue.modalActions},i.createElement("button",{onClick:X},"Cancel Match"),i.createElement("button",{onClick:()=>S(!1)},"Keep Match")))))};var aS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},mx=i.createContext&&i.createContext(aS),MB=["attr","size","title"];function TB(t,a){if(t==null)return{};var e=NB(t,a),n,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],!(a.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(e[n]=t[n])}return e}function NB(t,a){if(t==null)return{};var e={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(a.indexOf(n)>=0)continue;e[n]=t[n]}return e}function ip(){return ip=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},ip.apply(this,arguments)}function hx(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),e.push.apply(e,n)}return e}function op(t){for(var a=1;a<arguments.length;a++){var e=arguments[a]!=null?arguments[a]:{};a%2?hx(Object(e),!0).forEach(function(n){RB(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):hx(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function RB(t,a,e){return a=LB(a),a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}function LB(t){var a=PB(t,"string");return typeof a=="symbol"?a:a+""}function PB(t,a){if(typeof t!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var n=e.call(t,a);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function rS(t){return t&&t.map((a,e)=>i.createElement(a.tag,op({key:e},a.attr),rS(a.child)))}function ct(t){return a=>i.createElement(BB,ip({attr:op({},t.attr)},a),rS(t.child))}function BB(t){var a=e=>{var{attr:n,size:s,title:l}=t,c=TB(t,MB),d=s||e.size||"1em",p;return e.className&&(p=e.className),t.className&&(p=(p?p+" ":"")+t.className),i.createElement("svg",ip({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,n,c,{className:p,style:op(op({color:t.color||e.color},e.style),t.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&i.createElement("title",null,l),t.children)};return mx!==void 0?i.createElement(mx.Consumer,null,e=>a(e)):a(aS)}function OB(t){return ct({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z"},child:[]}]})(t)}function lp(t){return ct({attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(t)}function zB(t){return ct({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M111.4 295.9c-3.5 19.2-17.4 108.7-21.5 134-.3 1.8-1 2.5-3 2.5H12.3c-7.6 0-13.1-6.6-12.1-13.9L58.8 46.6c1.5-9.6 10.1-16.9 20-16.9 152.3 0 165.1-3.7 204 11.4 60.1 23.3 65.6 79.5 44 140.3-21.5 62.6-72.5 89.5-140.1 90.3-43.4.7-69.5-7-75.3 24.2zM357.1 152c-1.8-1.3-2.5-1.8-3 1.3-2 11.4-5.1 22.5-8.8 33.6-39.9 113.8-150.5 103.9-204.5 103.9-6.1 0-10.1 3.3-10.9 9.4-22.6 140.4-27.1 169.7-27.1 169.7-1 7.1 3.5 12.9 10.6 12.9h63.5c8.6 0 15.7-6.3 17.4-14.9.7-5.4-1.1 6.1 14.4-91.3 4.6-22 14.3-19.7 29.3-19.7 71 0 126.4-28.8 142.9-112.3 6.5-34.8 4.6-71.4-23.8-92.6z"},child:[]}]})(t)}function vg(t){return ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function co(t){return ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(t)}function lu(t){return ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function UB(t){return ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function Ar(t){return ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function sS(t){return ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function FB(t){return ct({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function WB(t){return ct({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function jB(t){return ct({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(t)}function HB(t){return ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function gx(t){return ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function yx(t){return ct({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(t)}function YB(t){return ct({attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"},child:[]}]})(t)}function GB(t){return ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function $B(t){return ct({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function X0(t){return ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function cp(t){return ct({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function bx(t){return ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"},child:[]}]})(t)}function ZB(t){return ct({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(t)}function iS(t){return ct({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(t)}function qB(t){return ct({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"},child:[]}]})(t)}function K0(t){return ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(t)}function QB(t){return ct({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"},child:[]}]})(t)}function a0(t){return ct({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(t)}function VB(t){return ct({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M272 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h224c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(t)}function XB(t){return ct({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(t)}function KB(t){return ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(t)}function Ni(t){return ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function JB(t){return ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"},child:[]}]})(t)}function io(t){return ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function eO(t){return ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function Si(t){return ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}function r0(t){return ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"},child:[]}]})(t)}function Bc(t){return ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"},child:[]}]})(t)}function tO(t){return ct({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function J0(t){return ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function vx(t){return ct({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 35.7 22.5 72.4 61.9 100.7 31.5 22.7 69.8 37.1 110 41.7C203.3 338.5 240 360 240 360v72h-48c-35.3 0-64 20.7-64 56v12c0 6.6 5.4 12 12 12h296c6.6 0 12-5.4 12-12v-12c0-35.3-28.7-56-64-56h-48v-72s36.7-21.5 68.1-73.6c40.3-4.6 78.6-19 110-41.7 39.3-28.3 61.9-65 61.9-100.7V88c0-13.3-10.7-24-24-24zM99.3 192.8C74.9 175.2 64 155.6 64 144v-16h64.2c1 32.6 5.8 61.2 12.8 86.2-15.1-5.2-29.2-12.4-41.7-21.4zM512 144c0 16.1-17.7 36.1-35.3 48.8-12.5 9-26.7 16.2-41.8 21.4 7-25 11.8-53.6 12.8-86.2H512v16z"},child:[]}]})(t)}function nO(t){return ct({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208H432c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h192c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function Jc(t){return ct({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function aO(t){return ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function oS(t){return ct({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}function rO({backendUrl:t}){const[a,e]=v.useState({enabled:!1,sheetId:"",sheetName:"Player Backup",apiKey:"",backupFrequency:"weekly",autoBackup:!0}),[n,s]=v.useState(!1),[l,c]=v.useState(""),[d,p]=v.useState(""),[h,m]=v.useState(null),[b,x]=v.useState(null),[E,w]=v.useState(1),[S,_]=v.useState(!1);v.useEffect(()=>{C(),D()},[]);const C=async()=>{try{const U=await fetch(`${t}/api/league-config`);if(!U.ok)throw new Error(`HTTP error! status: ${U.status}`);const M=await U.json();if(M.success&&M.config){const z=M.config.googleSheetsBackup||{};e({enabled:z.enabled||!1,sheetId:z.sheetId||"",sheetName:z.sheetName||"Player Backup",apiKey:z.apiKey==="***CONFIGURED***"?"":z.apiKey||"",backupFrequency:z.backupFrequency||"weekly",autoBackup:z.autoBackup!==void 0?z.autoBackup:!0}),z.sheetId&&z.apiKey==="***CONFIGURED***"&&m(G=>({...G,enabled:z.enabled,sheetId:z.sheetId,sheetName:z.sheetName,configured:!0,frequency:z.backupFrequency,autoBackup:z.autoBackup,lastBackup:z.lastBackupDate}))}}catch(U){console.error("Error loading config:",U)}},D=async()=>{try{const U=await fetch(`${t}/api/league-config/backup/status`);if(U.ok){const M=await U.json();M.success&&m(M.backup)}}catch(U){console.error("Error loading backup status:",U)}},I=(U,M)=>{p(U),c(M),setTimeout(()=>c(""),5e3)},A=(U,M)=>{e(z=>({...z,[U]:M})),(U==="sheetId"||U==="apiKey")&&x(null)},T=async()=>{if(!a.sheetId||!a.apiKey){I("error","Please fill in both fields first");return}s(!0),x(null);try{const M=await(await fetch(`${t}/api/league-config/backup/test-connection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetId:a.sheetId,apiKey:a.apiKey})})).json();M.success?(x({success:!0,message:"✅ Great! Connection successful!"}),I("success","Connection successful!")):(x({success:!1,message:`❌ Connection failed: ${M.error}`}),I("error",`Connection failed: ${M.error}`))}catch{x({success:!1,message:"Connection test failed - please check your internet"}),I("error","Connection test failed")}s(!1)},F=async()=>{if(!a.sheetId||!a.apiKey){I("error","Please fill in both fields");return}if(!(b!=null&&b.success)){I("error","Please test the connection first");return}s(!0);try{const M=await(await fetch(`${t}/api/league-config/backup/configure`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json();M.success?(I("success","✅ Backup setup complete!"),D(),w(4)):I("error",`Setup failed: ${M.error}`)}catch{I("error","Failed to save configuration")}s(!1)},J=async()=>{s(!0);try{const M=await(await fetch(`${t}/api/league-config/backup/run`,{method:"POST"})).json();M.success?(I("success",`✅ Backup completed! ${M.count} players backed up.`),D()):I("error",`Backup failed: ${M.error}`)}catch{I("error","Backup failed")}s(!1)},H=U=>`https://docs.google.com/spreadsheets/d/${U}`,Z=()=>i.createElement("div",{style:{textAlign:"center",padding:"40px 20px"}},i.createElement("div",{style:{fontSize:"64px",marginBottom:"20px"}},"📊"),i.createElement("h2",{style:{color:"white",marginBottom:"20px"}},"Backup Your League Data"),i.createElement("p",{style:{fontSize:"18px",color:"white",marginBottom:"30px",lineHeight:"1.6",opacity:.9}},"Keep a safe copy of all your player information in Google Sheets.",i.createElement("br",null),"It's free, secure, and takes just a few minutes to set up."),i.createElement("div",{style:{background:"#ffffff",padding:"20px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},i.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"15px"}},"What You'll Get:"),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"}},i.createElement("div",{style:{textAlign:"center",padding:"15px"}},i.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"🛡️"),i.createElement("strong",{style:{color:"#1a1a1a"}},"Data Safety"),i.createElement("br",null),i.createElement("small",{style:{color:"#2c2c2c"}},"Backup copy of all player info")),i.createElement("div",{style:{textAlign:"center",padding:"15px"}},i.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"📱"),i.createElement("strong",{style:{color:"#1a1a1a"}},"Easy Viewing"),i.createElement("br",null),i.createElement("small",{style:{color:"#2c2c2c"}},"View data in Google Sheets")),i.createElement("div",{style:{textAlign:"center",padding:"15px"}},i.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"🔄"),i.createElement("strong",{style:{color:"#1a1a1a"}},"Auto Backup"),i.createElement("br",null),i.createElement("small",{style:{color:"#2c2c2c"}},"Keeps data up to date")))),i.createElement("div",{style:{background:"#f8f9fa",padding:"25px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},i.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"}},i.createElement(JB,null)," Frequently Asked Questions"),i.createElement("div",{style:{display:"grid",gap:"15px"}},i.createElement("div",{style:{padding:"15px",background:"#ffffff",borderRadius:"8px",border:"1px solid #e0e0e0"}},i.createElement("strong",{style:{color:"#1a1a1a",display:"block",marginBottom:"8px"}},"Q: Is this free to use?"),i.createElement("span",{style:{color:"#2c2c2c"}},"A: Yes! Google Sheets is completely free. You only need a Google account.")),i.createElement("div",{style:{padding:"15px",background:"#ffffff",borderRadius:"8px",border:"1px solid #e0e0e0"}},i.createElement("strong",{style:{color:"#1a1a1a",display:"block",marginBottom:"8px"}},"Q: How often does it backup?"),i.createElement("span",{style:{color:"#2c2c2c"}},"A: By default, it backs up weekly, but you can run manual backups anytime.")),i.createElement("div",{style:{padding:"15px",background:"#ffffff",borderRadius:"8px",border:"1px solid #e0e0e0"}},i.createElement("strong",{style:{color:"#1a1a1a",display:"block",marginBottom:"8px"}},"Q: Is my data secure?"),i.createElement("span",{style:{color:"#2c2c2c"}},"A: Yes! Your API key only works with your specific Google Sheet and is stored securely.")),i.createElement("div",{style:{padding:"15px",background:"#ffffff",borderRadius:"8px",border:"1px solid #e0e0e0"}},i.createElement("strong",{style:{color:"#1a1a1a",display:"block",marginBottom:"8px"}},"Q: What if I change my mind?"),i.createElement("span",{style:{color:"#2c2c2c"}},"A: You can disable backup anytime, and your Google Sheet will remain as a backup copy.")))),i.createElement("button",{onClick:()=>w(2),style:{padding:"15px 30px",background:"#007bff",color:"white",border:"none",borderRadius:"8px",fontSize:"18px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",margin:"0 auto"}},"Get Started ",i.createElement(co,null))),K=()=>i.createElement("div",{style:{padding:"30px 20px"}},i.createElement("div",{style:{textAlign:"center",marginBottom:"30px"}},i.createElement("h2",{style:{color:"white",marginBottom:"10px"}},"Step 1: Create a Google Sheet"),i.createElement("p",{style:{color:"white",fontSize:"16px",opacity:.9}},"First, let's create a place to store your backup data")),i.createElement("div",{style:{background:"#ffffff",padding:"25px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},i.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"}},i.createElement(lp,null)," Create Your Google Sheet"),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"20px",alignItems:"center"}},i.createElement("div",null,i.createElement("p",{style:{marginBottom:"15px",color:"#1a1a1a"}},i.createElement("strong",null,"1.")," Go to ",i.createElement("a",{href:"https://sheets.google.com",target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",textDecoration:"underline"}},"Google Sheets")),i.createElement("p",{style:{marginBottom:"15px",color:"#1a1a1a"}},i.createElement("strong",null,"2."),' Click "Blank" to create a new sheet'),i.createElement("p",{style:{marginBottom:"15px",color:"#1a1a1a"}},i.createElement("strong",null,"3."),' Give it a name like "League Backup" or "Player Data"'),i.createElement("p",{style:{color:"#1a1a1a"}},i.createElement("strong",null,"4.")," Copy the Sheet ID from the URL (we'll show you how)")),i.createElement("div",{style:{textAlign:"center"}},i.createElement("div",{style:{fontSize:"48px",marginBottom:"10px"}},"📋"),i.createElement("button",{onClick:()=>window.open("https://sheets.google.com","_blank"),style:{padding:"10px 20px",background:"#28a745",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"}},"Open Google Sheets")))),i.createElement("div",{style:{background:"#fff8dc",padding:"20px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #ffd700"}},i.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"15px"}},"How to Find Your Sheet ID:"),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",alignItems:"center"}},i.createElement("div",null,i.createElement("p",{style:{marginBottom:"10px",color:"#1a1a1a"}},i.createElement("strong",null,"Look at your Google Sheet URL:")),i.createElement("div",{style:{background:"#f8f9fa",padding:"15px",borderRadius:"6px",border:"1px solid #dee2e6",fontFamily:"monospace",fontSize:"14px",wordBreak:"break-all",color:"#1a1a1a"}},"https://docs.google.com/spreadsheets/d/",i.createElement("span",{style:{background:"#ffeb3b",padding:"2px 4px",borderRadius:"3px"}},"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"),"/edit"),i.createElement("p",{style:{marginTop:"10px",color:"#2c2c2c",fontSize:"14px"}},"Copy the highlighted part (the long string of letters and numbers)")),i.createElement("div",{style:{textAlign:"center"}},i.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"🔍"),i.createElement("p",{style:{color:"#2c2c2c",fontSize:"14px"}},"It's the part between ",i.createElement("code",{style:{background:"#f0f0f0",padding:"2px 4px",borderRadius:"3px"}},"/d/")," and ",i.createElement("code",{style:{background:"#f0f0f0",padding:"2px 4px",borderRadius:"3px"}},"/edit"))))),i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("label",{style:{display:"block",marginBottom:"10px",fontWeight:"bold",color:"#1a1a1a"}},"Paste Your Sheet ID Here:"),i.createElement("input",{type:"text",value:a.sheetId,onChange:U=>A("sheetId",U.target.value),placeholder:"Example: 1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",style:{width:"100%",padding:"15px",border:"2px solid #ddd",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",color:"#1a1a1a",backgroundColor:"#ffffff"}}),a.sheetId&&i.createElement("div",{style:{marginTop:"10px",fontSize:"14px",color:"#2c2c2c"}},i.createElement("a",{href:H(a.sheetId),target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",textDecoration:"underline"}},"🔗 Open this sheet to verify"))),i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},i.createElement("button",{onClick:()=>w(1),style:{padding:"12px 24px",background:"#6c757d",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"}},i.createElement(vg,null)," Back"),i.createElement("button",{onClick:()=>w(3),disabled:!a.sheetId,style:{padding:"12px 24px",background:a.sheetId?"#007bff":"#ccc",color:"white",border:"none",borderRadius:"6px",cursor:a.sheetId?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"8px"}},"Next ",i.createElement(co,null)))),X=()=>i.createElement("div",{style:{padding:"30px 20px"}},i.createElement("div",{style:{textAlign:"center",marginBottom:"30px"}},i.createElement("h2",{style:{color:"white",marginBottom:"10px"}},"Step 2: Get Your API Key"),i.createElement("p",{style:{color:"white",fontSize:"16px",opacity:.9}},"This allows the app to write to your Google Sheet (it's free and secure)")),i.createElement("div",{style:{background:"#ffffff",padding:"25px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},i.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"20px"}},"Getting Your API Key (Takes 2 Minutes):"),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"20px",alignItems:"center"}},i.createElement("div",null,i.createElement("ol",{style:{margin:0,paddingLeft:"20px",lineHeight:"2"}},i.createElement("li",{style:{marginBottom:"10px",color:"#1a1a1a"}},i.createElement("strong",null,"Go to")," ",i.createElement("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",textDecoration:"underline"}},"Google Cloud Console")),i.createElement("li",{style:{marginBottom:"10px",color:"#1a1a1a"}},i.createElement("strong",null,'Click "Create Project"')," (or select an existing one)"),i.createElement("li",{style:{marginBottom:"10px",color:"#1a1a1a"}},i.createElement("strong",null,'Search for "Google Sheets API"'),' and click "Enable"'),i.createElement("li",{style:{marginBottom:"10px",color:"#1a1a1a"}},i.createElement("strong",null,'Go to "Credentials"'),' → "Create Credentials" → "API Key"'),i.createElement("li",{style:{color:"#1a1a1a"}},i.createElement("strong",null,"Copy the API key")," (it looks like: AIzaSyC...)"))),i.createElement("div",{style:{textAlign:"center"}},i.createElement("div",{style:{fontSize:"48px",marginBottom:"10px"}},"🔑"),i.createElement("button",{onClick:()=>window.open("https://console.cloud.google.com/apis/credentials","_blank"),style:{padding:"10px 20px",background:"#28a745",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"}},"Open Google Cloud Console")))),i.createElement("div",{style:{background:"#e8f5e8",padding:"20px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #28a745"}},i.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"15px"}},"🔒 Don't Worry About Security:"),i.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#1a1a1a"}},i.createElement("li",null,"Your API key only works with your specific Google Sheet"),i.createElement("li",null,"It can't access any other files or data"),i.createElement("li",null,"It's stored securely and encrypted"),i.createElement("li",null,"You can delete it anytime from Google Cloud Console"))),i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("label",{style:{display:"block",marginBottom:"10px",fontWeight:"bold",color:"#1a1a1a"}},"Paste Your API Key Here:"),i.createElement("div",{style:{position:"relative"}},i.createElement("input",{type:S?"text":"password",value:a.apiKey,onChange:U=>A("apiKey",U.target.value),placeholder:"Example: AIzaSyC...",style:{width:"100%",padding:"15px",paddingRight:"50px",border:"2px solid #ddd",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",color:"#1a1a1a",backgroundColor:"#ffffff"}}),i.createElement("button",{onClick:()=>_(!S),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666"}},S?i.createElement(ZB,null):i.createElement(iS,null)))),i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},i.createElement("button",{onClick:()=>w(2),style:{padding:"12px 24px",background:"#6c757d",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"}},i.createElement(vg,null)," Back"),i.createElement("button",{onClick:()=>w(4),disabled:!a.sheetId||!a.apiKey,style:{padding:"12px 24px",background:a.sheetId&&a.apiKey?"#007bff":"#ccc",color:"white",border:"none",borderRadius:"6px",cursor:a.sheetId&&a.apiKey?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"8px"}},"Test & Save ",i.createElement(co,null)))),W=()=>i.createElement("div",{style:{padding:"30px 20px"}},i.createElement("div",{style:{textAlign:"center",marginBottom:"30px"}},i.createElement("h2",{style:{color:"white",marginBottom:"10px"}},"Step 3: Test & Save"),i.createElement("p",{style:{color:"white",fontSize:"16px",opacity:.9}},"Let's make sure everything works before saving")),i.createElement("div",{style:{background:"#ffffff",padding:"25px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},i.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"20px"}},"Your Setup Summary:"),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"}},i.createElement("div",null,i.createElement("strong",{style:{color:"#1a1a1a"}},"Sheet ID:"),i.createElement("br",null),i.createElement("code",{style:{background:"#f8f9fa",padding:"5px 8px",borderRadius:"4px",fontSize:"14px",wordBreak:"break-all",color:"#1a1a1a",border:"1px solid #dee2e6"}},a.sheetId||"Not set")),i.createElement("div",null,i.createElement("strong",{style:{color:"#1a1a1a"}},"API Key:"),i.createElement("br",null),i.createElement("code",{style:{background:"#f8f9fa",padding:"5px 8px",borderRadius:"4px",fontSize:"14px",color:"#1a1a1a",border:"1px solid #dee2e6"}},a.apiKey?`${a.apiKey.substring(0,10)}...`:"Not set")))),i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("button",{onClick:T,disabled:n||!a.sheetId||!a.apiKey,style:{width:"100%",padding:"15px",background:"#17a2b8",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",opacity:n||!a.sheetId||!a.apiKey?.6:1}},n?i.createElement(Bc,{style:{animation:"spin 1s linear infinite"}}):i.createElement(Bc,null),n?"Testing Connection...":"Test Connection"),b&&i.createElement("div",{style:{marginTop:"15px",padding:"15px",borderRadius:"8px",background:b.success?"#d4edda":"#f8d7da",color:b.success?"#155724":"#721c24",border:`1px solid ${b.success?"#c3e6cb":"#f5c6cb"}`,display:"flex",alignItems:"center",gap:"10px"}},b.success?i.createElement(Ar,null):i.createElement(cp,null),b.message)),(b==null?void 0:b.success)&&i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("button",{onClick:F,disabled:n,style:{width:"100%",padding:"15px",background:"#28a745",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",opacity:n?.6:1}},n?i.createElement(Bc,{style:{animation:"spin 1s linear infinite"}}):i.createElement(Ar,null),n?"Saving...":"Save Configuration")),i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},i.createElement("button",{onClick:()=>w(3),style:{padding:"12px 24px",background:"#6c757d",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"}},i.createElement(vg,null)," Back"),(h==null?void 0:h.configured)&&i.createElement("button",{onClick:()=>w(5),style:{padding:"12px 24px",background:"#007bff",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"}},"Next ",i.createElement(co,null)))),O=()=>i.createElement("div",{style:{padding:"30px 20px",textAlign:"center"}},i.createElement("div",{style:{fontSize:"64px",marginBottom:"20px"}},"🎉"),i.createElement("h2",{style:{color:"#1a1a1a",marginBottom:"20px"}},"Setup Complete!"),i.createElement("p",{style:{fontSize:"18px",color:"#2c2c2c",marginBottom:"30px",lineHeight:"1.6"}},"Your Google Sheets backup is now configured and ready to use."),i.createElement("div",{style:{background:"#e8f5e8",padding:"25px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #28a745"}},i.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"20px"}},"✅ What's Working Now:"),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"}},i.createElement("div",null,i.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"🔄"),i.createElement("strong",{style:{color:"#1a1a1a"}},"Auto Backup"),i.createElement("br",null),i.createElement("small",{style:{color:"#2c2c2c"}},"Your data will be backed up automatically")),i.createElement("div",null,i.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"📊"),i.createElement("strong",{style:{color:"#1a1a1a"}},"Easy Viewing"),i.createElement("br",null),i.createElement("small",{style:{color:"#2c2c2c"}},"View your data in Google Sheets anytime")),i.createElement("div",null,i.createElement("div",{style:{fontSize:"32px",marginBottom:"10px"}},"🛡️"),i.createElement("strong",{style:{color:"#1a1a1a"}},"Data Safety"),i.createElement("br",null),i.createElement("small",{style:{color:"#2c2c2c"}},"Your data is now safely backed up")))),i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("button",{onClick:J,disabled:n,style:{padding:"15px 30px",background:"#007bff",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",margin:"0 auto"}},n?i.createElement(Bc,{style:{animation:"spin 1s linear infinite"}}):i.createElement(Bc,null),n?"Running Backup...":"Run Your First Backup"),i.createElement("p",{style:{marginTop:"10px",color:"#2c2c2c",fontSize:"14px"}},"This will copy all your current player data to your Google Sheet")),(h==null?void 0:h.sheetId)&&i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("a",{href:H(h.sheetId),target:"_blank",rel:"noopener noreferrer",style:{padding:"12px 24px",background:"#28a745",color:"white",textDecoration:"none",borderRadius:"6px",display:"inline-flex",alignItems:"center",gap:"8px",fontSize:"16px"}},i.createElement(bx,null)," View Your Backup Sheet")),i.createElement("div",{style:{background:"#fff8dc",padding:"20px",borderRadius:"12px",border:"2px solid #ffd700",textAlign:"left"}},i.createElement("h4",{style:{color:"#1a1a1a",marginBottom:"15px"}},"💡 What Happens Next:"),i.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#1a1a1a",lineHeight:"1.6"}},i.createElement("li",null,"Your data will be backed up automatically"),i.createElement("li",null,"You can view your data anytime in Google Sheets"),i.createElement("li",null,"You can run manual backups whenever you want"),i.createElement("li",null,"Your data is safe and secure")))),B=()=>i.createElement("div",{style:{background:"#ffffff",padding:"16px",borderRadius:"8px",marginBottom:"20px",border:"2px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},i.createElement("h4",{style:{margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"8px",color:"#1a1a1a"}},i.createElement(K0,null)," Current Status"),h?i.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"14px",color:"#1a1a1a"}},i.createElement("div",null,i.createElement("strong",null,"Status:")," ",h.enabled?"✅ Enabled":"❌ Disabled"),i.createElement("div",null,i.createElement("strong",null,"Last Backup:")," ",h.lastBackup?new Date(h.lastBackup).toLocaleString():"Never"),h.sheetId&&i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement("strong",null,"Sheet:")," ",h.sheetName||"Player Backup"),i.createElement("div",null,i.createElement("strong",null,"Sheet ID:")," ",h.sheetId.substring(0,20),"..."))):i.createElement("div",{style:{color:"#2c2c2c",fontStyle:"italic"}},"No backup configured"),i.createElement("div",{style:{marginTop:"15px",display:"flex",gap:"10px",flexWrap:"wrap",justifyContent:"center"}},(h==null?void 0:h.sheetId)&&i.createElement("a",{href:H(h.sheetId),target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"5px",padding:"8px 12px",border:"1px solid #007bff",borderRadius:"4px",fontSize:"14px"}},i.createElement(bx,null)," View Backup Sheet"),i.createElement("button",{onClick:()=>w(5),disabled:!(h!=null&&h.configured),style:{padding:"8px 12px",background:h!=null&&h.configured?"#007bff":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:h!=null&&h.configured?"pointer":"not-allowed",fontSize:"14px",opacity:h!=null&&h.configured?1:.6}},"Manage Backup Settings")));return i.createElement("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"20px"}},i.createElement("style",null,`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `),i.createElement("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"20px",borderRadius:"12px",marginBottom:"20px"}},i.createElement("h2",{style:{margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"10px",color:"white"}},i.createElement(lp,null)," Google Sheets Backup"),i.createElement("p",{style:{margin:0,opacity:.9,color:"white"}},"Keep your league data safe with automatic Google Sheets backup")),l&&i.createElement("div",{style:{padding:"12px 16px",borderRadius:"8px",marginBottom:"20px",background:d==="success"?"#d4edda":"#f8d7da",color:d==="success"?"#155724":"#721c24",border:`1px solid ${d==="success"?"#c3e6cb":"#f5c6cb"}`}},l),(h==null?void 0:h.configured)&&B(),E===1&&Z(),E===2&&K(),E===3&&X(),E===4&&W(),E===5&&O())}function sO({backendUrl:t}){const[a,e]=v.useState([]),[n,s]=v.useState(!0),[l,c]=v.useState(null),[d,p]=v.useState({name:"",address:"",notes:""}),[h,m]=v.useState(""),[b,x]=v.useState("");v.useEffect(()=>{E()},[]);const E=async()=>{try{s(!0);const I=await fetch(`${t}/api/locations`);if(!I.ok)throw new Error("Failed to load locations");const A=await I.json();e(A.locations||[])}catch(I){m("Failed to load locations: "+I.message)}finally{s(!1)}},w=async()=>{if(!d.name.trim()){m("Location name is required");return}try{const I=await fetch(`${t}/api/locations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!I.ok)throw new Error("Failed to add location");const A=await I.json();e([...a,A.location]),p({name:"",address:"",notes:""}),x("Location added successfully!"),setTimeout(()=>x(""),3e3)}catch(I){m("Failed to add location: "+I.message)}},S=async(I,A)=>{try{const T=await fetch(`${t}/api/locations/${I}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});if(!T.ok)throw new Error("Failed to update location");const F=await T.json();e(a.map(J=>J._id===I?F.location:J)),c(null),x("Location updated successfully!"),setTimeout(()=>x(""),3e3)}catch(T){m("Failed to update location: "+T.message)}},_=async I=>{if(window.confirm("Are you sure you want to delete this location? This will affect any players who have selected this location."))try{if(!(await fetch(`${t}/api/locations/${I}`,{method:"DELETE"})).ok)throw new Error("Failed to delete location");e(a.filter(T=>T._id!==I)),x("Location deleted successfully!"),setTimeout(()=>x(""),3e3)}catch(A){m("Failed to delete location: "+A.message)}},C=I=>{c(I._id)},D=()=>{c(null)};return n?i.createElement("div",{style:{textAlign:"center",padding:"20px"}},i.createElement("div",{style:{fontSize:"18px",color:"#ccc"}},"Loading locations...")):i.createElement("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"}},i.createElement("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px",borderRadius:"12px",marginBottom:"20px",color:"white"}},i.createElement("h2",{style:{margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"10px"}},i.createElement(a0,null)," Location Management"),i.createElement("p",{style:{margin:0,opacity:.9}},"Manage predefined locations that players can select during registration. Players can also add custom locations if needed.")),b&&i.createElement("div",{style:{background:"rgba(76, 175, 80, 0.2)",border:"1px solid #4CAF50",color:"#4CAF50",padding:"12px",borderRadius:"6px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"}},i.createElement(sS,null)," ",b),h&&i.createElement("div",{style:{background:"rgba(244, 67, 54, 0.2)",border:"1px solid #f44336",color:"#f44336",padding:"12px",borderRadius:"6px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"}},i.createElement(cp,null)," ",h),i.createElement("div",{style:{background:"rgba(255,255,255,0.05)",padding:"20px",borderRadius:"8px",marginBottom:"20px",border:"1px solid rgba(255,255,255,0.1)"}},i.createElement("h3",{style:{color:"#e53e3e",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"}},i.createElement(Ni,null)," Add New Location"),i.createElement("div",{style:{display:"grid",gap:"15px"}},i.createElement("div",null,i.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Location Name *"),i.createElement("input",{type:"text",value:d.name,onChange:I=>p({...d,name:I.target.value}),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"16px"},placeholder:"e.g., Pool Hall A, Community Center"})),i.createElement("div",null,i.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Address (Optional)"),i.createElement("input",{type:"text",value:d.address,onChange:I=>p({...d,address:I.target.value}),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"16px"},placeholder:"e.g., 123 Main St, City, State"})),i.createElement("div",null,i.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Notes (Optional)"),i.createElement("textarea",{value:d.notes,onChange:I=>p({...d,notes:I.target.value}),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"16px",minHeight:"80px",resize:"vertical"},placeholder:"Additional information about this location..."})),i.createElement("button",{onClick:w,style:{padding:"12px 20px",borderRadius:"6px",border:"none",background:"#e53e3e",color:"#fff",cursor:"pointer",fontSize:"16px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center"}},i.createElement(Ni,null)," Add Location"))),i.createElement("div",{style:{background:"rgba(255,255,255,0.05)",padding:"20px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)"}},i.createElement("h3",{style:{color:"#e53e3e",marginBottom:"15px"}},"Existing Locations (",a.length,")"),a.length===0?i.createElement("div",{style:{textAlign:"center",padding:"40px",color:"#ccc"}},i.createElement(a0,{style:{fontSize:"48px",marginBottom:"15px",opacity:.5}}),i.createElement("p",null,"No locations added yet. Add your first location above!")):i.createElement("div",{style:{display:"grid",gap:"15px"}},a.map(I=>i.createElement("div",{key:I._id,style:{background:"rgba(0,0,0,0.3)",padding:"15px",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)"}},l===I._id?i.createElement(oO,{location:I,onSave:A=>S(I._id,A),onCancel:D}):i.createElement(iO,{location:I,onEdit:()=>C(I),onDelete:()=>_(I._id)}))))))}function iO({location:t,onEdit:a,onDelete:e}){return i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},i.createElement("div",{style:{flex:1}},i.createElement("h4",{style:{color:"#fff",margin:"0 0 5px 0",fontSize:"18px"}},t.name),t.address&&i.createElement("p",{style:{color:"#ccc",margin:"0 0 5px 0",fontSize:"14px"}},"📍 ",t.address),t.notes&&i.createElement("p",{style:{color:"#999",margin:0,fontSize:"13px"}},"📝 ",t.notes)),i.createElement("div",{style:{display:"flex",gap:"8px"}},i.createElement("button",{onClick:a,style:{padding:"8px 12px",borderRadius:"4px",border:"1px solid #666",background:"transparent",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"}},i.createElement($B,null)," Edit"),i.createElement("button",{onClick:e,style:{padding:"8px 12px",borderRadius:"4px",border:"1px solid #f44336",background:"transparent",color:"#f44336",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"}},i.createElement(J0,null)," Delete")))}function oO({location:t,onSave:a,onCancel:e}){const[n,s]=v.useState({name:t.name,address:t.address||"",notes:t.notes||""}),l=()=>{if(!n.name.trim()){alert("Location name is required");return}a(n)};return i.createElement("div",{style:{display:"grid",gap:"10px"}},i.createElement("div",null,i.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Location Name *"),i.createElement("input",{type:"text",value:n.name,onChange:c=>s({...n,name:c.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"14px"}})),i.createElement("div",null,i.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Address"),i.createElement("input",{type:"text",value:n.address,onChange:c=>s({...n,address:c.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"14px"}})),i.createElement("div",null,i.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#fff",fontWeight:"bold"}},"Notes"),i.createElement("textarea",{value:n.notes,onChange:c=>s({...n,notes:c.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #444",background:"#222",color:"#fff",fontSize:"14px",minHeight:"60px",resize:"vertical"}})),i.createElement("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"}},i.createElement("button",{onClick:e,style:{padding:"8px 12px",borderRadius:"4px",border:"1px solid #666",background:"transparent",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"}},i.createElement(tO,null)," Cancel"),i.createElement("button",{onClick:l,style:{padding:"8px 12px",borderRadius:"4px",border:"none",background:"#4CAF50",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"}},i.createElement(io,null)," Save")))}function lO(){const[t,a]=v.useState({registrationFee:30,weeklyDues:10,totalWeeks:10,participationFee:100,phase1Weeks:6,penaltyStructure:{strike1:5,strike2:10,strike3:0},paymentMethods:{venmo:{enabled:!0,username:"",displayName:"Venmo",instructions:"Send payment to @username"},cashapp:{enabled:!0,username:"",displayName:"Cash App",instructions:"Send payment to $username"},creditCard:{enabled:!1,processor:"square",displayName:"Credit/Debit Card",instructions:"Pay online using the link below",paymentLink:"",squareAppId:"",squareLocationId:""},applePay:{enabled:!1,displayName:"Apple Pay",instructions:"Pay using Apple Pay",paymentLink:""},googlePay:{enabled:!1,displayName:"Google Pay",instructions:"Pay using Google Pay",paymentLink:""},cash:{enabled:!0,displayName:"Cash",instructions:"Pay in person to league administrator"},check:{enabled:!1,displayName:"Check",instructions:"Make check payable to [Payee Name]",payeeName:"",mailingAddress:""}},additionalInstructions:"",contactInfo:{adminName:"",adminEmail:"",adminPhone:""},currentSession:{name:"Current Session",startDate:"",endDate:"",isActive:!0}}),[e,n]=v.useState(!0),[s,l]=v.useState(!1),[c,d]=v.useState(""),[p,h]=v.useState({type:"",text:""}),[m,b]=v.useState({feeStructure:!1,penaltyStructure:!1,paymentMethods:!1,additionalInstructions:!1,contactInfo:!1});v.useEffect(()=>{x()},[]);const x=async()=>{try{const A=await fetch(`${Pe}/api/payment-config`);if(A.ok){const T=await A.json();if(T.config){const F={...T.config,penaltyStructure:{strike1:5,strike2:10,strike3:0,...T.config.penaltyStructure},currentSession:{name:"Current Session",startDate:"",endDate:"",isActive:!0,...T.config.currentSession}};a(F)}}}catch(A){console.error("Error loading payment config:",A),h({type:"error",text:"Failed to load payment configuration"})}finally{n(!1)}},E=async()=>{l(!0),h({type:"",text:""});try{(await fetch(`${Pe}/api/payment-config`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok?h({type:"success",text:"Payment configuration saved successfully!"}):h({type:"error",text:"Failed to save payment configuration"})}catch(A){console.error("Error saving payment config:",A),h({type:"error",text:"Error saving payment configuration"})}finally{l(!1)}},w=async(A,T)=>{d(A),h({type:"",text:""});try{if((await fetch(`${Pe}/api/payment-config`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,...T})})).ok){h({type:"success",text:`${A} saved successfully!`});let J=null;A==="Fee Structure"?J="feeStructure":A==="Penalty Structure"?J="penaltyStructure":A==="Payment Methods"?J="paymentMethods":A==="Additional Instructions"?J="additionalInstructions":A==="Contact Information"&&(J="contactInfo"),J&&b(H=>({...H,[J]:!1}))}else h({type:"error",text:`Failed to save ${A}`})}catch(F){console.error(`Error saving ${A}:`,F),h({type:"error",text:`Error saving ${A}`})}finally{d("")}},S=(A,T,F)=>{a(J=>({...J,paymentMethods:{...J.paymentMethods,[A]:{...J.paymentMethods[A],[T]:F}}}))},_=(A,T)=>{a(F=>({...F,contactInfo:{...F.contactInfo,[A]:T}}))},C=A=>{switch(A){case"venmo":return i.createElement(VB,null);case"cashapp":return i.createElement(YB,null);case"paypal":return i.createElement(zB,null);case"creditCard":return i.createElement(yx,null);case"applePay":return i.createElement(OB,null);case"googlePay":return i.createElement(lp,null);case"cash":return i.createElement(XB,null);case"check":return i.createElement(sS,null);default:return i.createElement(yx,null)}},D=A=>{b(T=>({...T,[A]:!T[A]}))},I=A=>{b(T=>({...T,[A]:!1})),x()};return e?i.createElement("div",{style:{textAlign:"center",padding:"20px"}},i.createElement(Si,{style:{animation:"spin 1s linear infinite"}}),i.createElement("p",null,"Loading payment configuration...")):i.createElement("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"}},i.createElement("h2",{style:{color:"#e53e3e",marginBottom:"20px",textAlign:"center"}},"💳 Payment Configuration"),p.text&&i.createElement("div",{style:{padding:"10px 15px",borderRadius:"6px",marginBottom:"20px",background:p.type==="success"?"rgba(76, 175, 80, 0.2)":"rgba(229, 62, 62, 0.2)",border:`1px solid ${p.type==="success"?"#4CAF50":"#e53e3e"}`,color:p.type==="success"?"#4CAF50":"#e53e3e",display:"flex",alignItems:"center",gap:"10px"}},p.type==="success"?i.createElement(Ar,null):i.createElement(X0,null),p.text),i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},i.createElement("h3",{style:{color:"#fff",margin:0}},"League Fee Structure"),i.createElement("button",{onClick:()=>D("feeStructure"),style:{padding:"6px 12px",borderRadius:"4px",border:"none",background:m.feeStructure?"#ff9800":"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},m.feeStructure?"🔒 Cancel Edit":"✏️ Edit")),i.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:m.feeStructure?"rgba(76, 175, 80, 0.05)":"rgba(255,255,255,0.02)",opacity:m.feeStructure?1:.8}},i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"}},i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Registration Fee ($)"),i.createElement("input",{type:"number",value:t.registrationFee,onChange:A=>a(T=>({...T,registrationFee:Number(A.target.value)})),disabled:!m.feeStructure,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:m.feeStructure?"#222":"#333",color:m.feeStructure?"#fff":"#888",cursor:m.feeStructure?"text":"not-allowed"},min:"0",step:"0.01"})),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Weekly Dues ($)"),i.createElement("input",{type:"number",value:t.weeklyDues,onChange:A=>a(T=>({...T,weeklyDues:Number(A.target.value)})),disabled:!m.feeStructure,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:m.feeStructure?"#222":"#333",color:m.feeStructure?"#fff":"#888",cursor:m.feeStructure?"text":"not-allowed"},min:"0",step:"0.01"})),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Total Weeks"),i.createElement("input",{type:"number",value:t.totalWeeks,onChange:A=>a(T=>({...T,totalWeeks:Number(A.target.value)})),disabled:!m.feeStructure,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:m.feeStructure?"#222":"#333",color:m.feeStructure?"#fff":"#888",cursor:m.feeStructure?"text":"not-allowed"},min:"1"})),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Participation Fee ($)"),i.createElement("div",{style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#333",color:"#4CAF50",fontWeight:"bold",textAlign:"center"}},"$",t.registrationFee+t.weeklyDues*t.totalWeeks,i.createElement("div",{style:{fontSize:"12px",color:"#888",marginTop:"2px"}},"Auto-calculated: $",t.registrationFee," + ($",t.weeklyDues," × ",t.totalWeeks,")"))))),i.createElement("div",{style:{marginTop:"10px",padding:"10px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"6px",border:"1px solid #4CAF50"}},i.createElement("div",{style:{color:"#4CAF50",fontSize:"14px"}},i.createElement("strong",null,"Total Session Cost:")," $",t.registrationFee+t.weeklyDues*t.totalWeeks,"(",t.registrationFee," + ",t.weeklyDues," × ",t.totalWeeks," weeks)")),m.feeStructure&&i.createElement("div",{style:{marginTop:"15px",textAlign:"center",display:"flex",gap:"10px",justifyContent:"center"}},i.createElement("button",{onClick:()=>w("Fee Structure",{registrationFee:t.registrationFee,weeklyDues:t.weeklyDues,totalWeeks:t.totalWeeks,participationFee:t.registrationFee+t.weeklyDues*t.totalWeeks}),disabled:c==="Fee Structure",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:c==="Fee Structure"?"#666":"#4CAF50",color:"#fff",cursor:c==="Fee Structure"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},c==="Fee Structure"?i.createElement(Si,{style:{animation:"spin 1s linear infinite"}}):i.createElement(io,null),c==="Fee Structure"?"Saving...":"Save Fee Structure"),i.createElement("button",{onClick:()=>I("feeStructure"),disabled:c==="Fee Structure",style:{padding:"8px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#ccc",cursor:c==="Fee Structure"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"}},"Cancel"))),i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},i.createElement("h3",{style:{color:"#fff",margin:0}},"Penalty Structure"),i.createElement("button",{onClick:()=>D("penaltyStructure"),style:{padding:"6px 12px",borderRadius:"4px",border:"none",background:m.penaltyStructure?"#ff9800":"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},m.penaltyStructure?"🔒 Cancel Edit":"✏️ Edit")),i.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:m.penaltyStructure?"rgba(76, 175, 80, 0.05)":"rgba(255,255,255,0.02)",opacity:m.penaltyStructure?1:.8}},i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"}},i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"1st Strike Fine ($)"),i.createElement("input",{type:"number",value:t.penaltyStructure.strike1,onChange:A=>a(T=>({...T,penaltyStructure:{...T.penaltyStructure,strike1:Number(A.target.value)}})),disabled:!m.penaltyStructure,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:m.penaltyStructure?"#222":"#333",color:m.penaltyStructure?"#fff":"#888",cursor:m.penaltyStructure?"text":"not-allowed"},min:"0",step:"0.01"})),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"2nd Strike Fine ($)"),i.createElement("input",{type:"number",value:t.penaltyStructure.strike2,onChange:A=>a(T=>({...T,penaltyStructure:{...T.penaltyStructure,strike2:Number(A.target.value)}})),disabled:!m.penaltyStructure,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:m.penaltyStructure?"#222":"#333",color:m.penaltyStructure?"#fff":"#888",cursor:m.penaltyStructure?"text":"not-allowed"},min:"0",step:"0.01"})),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"3rd Strike Fine ($)"),i.createElement("input",{type:"number",value:t.penaltyStructure.strike3,onChange:A=>a(T=>({...T,penaltyStructure:{...T.penaltyStructure,strike3:Number(A.target.value)}})),disabled:!m.penaltyStructure,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:m.penaltyStructure?"#222":"#333",color:m.penaltyStructure?"#fff":"#888",cursor:m.penaltyStructure?"text":"not-allowed"},min:"0",step:"0.01"})))),m.penaltyStructure&&i.createElement("div",{style:{marginTop:"15px",textAlign:"center",display:"flex",gap:"10px",justifyContent:"center"}},i.createElement("button",{onClick:()=>w("Penalty Structure",{penaltyStructure:t.penaltyStructure}),disabled:c==="Penalty Structure",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:c==="Penalty Structure"?"#666":"#4CAF50",color:"#fff",cursor:c==="Penalty Structure"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},c==="Penalty Structure"?i.createElement(Si,{style:{animation:"spin 1s linear infinite"}}):i.createElement(io,null),c==="Penalty Structure"?"Saving...":"Save Penalty Structure"),i.createElement("button",{onClick:()=>I("penaltyStructure"),disabled:c==="Penalty Structure",style:{padding:"8px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#ccc",cursor:c==="Penalty Structure"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"}},"Cancel"))),i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},i.createElement("h3",{style:{color:"#fff",margin:0}},"Payment Methods"),i.createElement("button",{onClick:()=>D("paymentMethods"),style:{padding:"6px 12px",borderRadius:"4px",border:"none",background:m.paymentMethods?"#ff9800":"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},m.paymentMethods?"🔒 Cancel Edit":"✏️ Edit")),i.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:m.paymentMethods?"rgba(76, 175, 80, 0.05)":"rgba(255,255,255,0.02)",opacity:m.paymentMethods?1:.8}},Object.entries(t.paymentMethods).map(([A,T])=>i.createElement("div",{key:A,style:{marginBottom:"20px",padding:"15px",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",background:"rgba(255,255,255,0.02)"}},i.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"}},C(A),i.createElement("h4",{style:{color:"#fff",margin:0,flex:1}},T.displayName),i.createElement("label",{style:{display:"flex",alignItems:"center",gap:"5px"}},i.createElement("input",{type:"checkbox",checked:T.enabled,onChange:F=>S(A,"enabled",F.target.checked),disabled:!m.paymentMethods,style:{cursor:m.paymentMethods?"pointer":"not-allowed"}}),i.createElement("span",{style:{color:"#fff",fontSize:"14px"}},"Enabled"))),T.enabled&&i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"10px"}},A==="venmo"&&i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Venmo Username"),i.createElement("input",{type:"text",value:T.username,onChange:F=>S(A,"username",F.target.value),disabled:!m.paymentMethods,placeholder:"@username",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:m.paymentMethods?"#222":"#333",color:m.paymentMethods?"#fff":"#888",cursor:m.paymentMethods?"text":"not-allowed"}})),A==="cashapp"&&i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Cash App Username"),i.createElement("input",{type:"text",value:T.username,onChange:F=>S(A,"username",F.target.value),disabled:!m.paymentMethods,placeholder:"$username",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:m.paymentMethods?"#222":"#333",color:m.paymentMethods?"#fff":"#888",cursor:m.paymentMethods?"text":"not-allowed"}})),(A==="creditCard"||A==="applePay"||A==="googlePay")&&i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Payment Link"),i.createElement("input",{type:"url",value:T.paymentLink,onChange:F=>S(A,"paymentLink",F.target.value),disabled:!m.paymentMethods,placeholder:"https://...",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:m.paymentMethods?"#222":"#333",color:m.paymentMethods?"#fff":"#888",cursor:m.paymentMethods?"text":"not-allowed"}})),A==="check"&&i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Payee Name"),i.createElement("input",{type:"text",value:T.payeeName,onChange:F=>S(A,"payeeName",F.target.value),disabled:!m.paymentMethods,placeholder:"Pay to the order of...",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:m.paymentMethods?"#222":"#333",color:m.paymentMethods?"#fff":"#888",cursor:m.paymentMethods?"text":"not-allowed"}})),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Mailing Address"),i.createElement("textarea",{value:T.mailingAddress,onChange:F=>S(A,"mailingAddress",F.target.value),disabled:!m.paymentMethods,placeholder:"Mailing address for checks...",rows:"3",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:m.paymentMethods?"#222":"#333",color:m.paymentMethods?"#fff":"#888",cursor:m.paymentMethods?"text":"not-allowed",resize:"vertical"}}))),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Instructions"),i.createElement("textarea",{value:T.instructions,onChange:F=>S(A,"instructions",F.target.value),disabled:!m.paymentMethods,placeholder:"Payment instructions...",rows:"2",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:m.paymentMethods?"#222":"#333",color:m.paymentMethods?"#fff":"#888",cursor:m.paymentMethods?"text":"not-allowed",resize:"vertical"}})))))),m.paymentMethods&&i.createElement("div",{style:{marginTop:"15px",textAlign:"center",display:"flex",gap:"10px",justifyContent:"center"}},i.createElement("button",{onClick:()=>w("Payment Methods",{paymentMethods:t.paymentMethods}),disabled:c==="Payment Methods",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:c==="Payment Methods"?"#666":"#4CAF50",color:"#fff",cursor:c==="Payment Methods"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},c==="Payment Methods"?i.createElement(Si,{style:{animation:"spin 1s linear infinite"}}):i.createElement(io,null),c==="Payment Methods"?"Saving...":"Save Payment Methods"),i.createElement("button",{onClick:()=>I("paymentMethods"),disabled:c==="Payment Methods",style:{padding:"8px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#ccc",cursor:c==="Payment Methods"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"}},"Cancel"))),i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},i.createElement("h3",{style:{color:"#fff",margin:0}},"Additional Instructions"),i.createElement("button",{onClick:()=>D("additionalInstructions"),style:{padding:"6px 12px",borderRadius:"4px",border:"none",background:m.additionalInstructions?"#ff9800":"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},m.additionalInstructions?"🔒 Cancel Edit":"✏️ Edit")),i.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:m.additionalInstructions?"rgba(76, 175, 80, 0.05)":"rgba(255,255,255,0.02)",opacity:m.additionalInstructions?1:.8}},i.createElement("textarea",{value:t.additionalInstructions,onChange:A=>a(T=>({...T,additionalInstructions:A.target.value})),disabled:!m.additionalInstructions,placeholder:"Enter any additional payment instructions or notes for players...",rows:"4",style:{width:"100%",padding:"12px",borderRadius:"6px",border:"1px solid #444",background:m.additionalInstructions?"#222":"#333",color:m.additionalInstructions?"#fff":"#888",cursor:m.additionalInstructions?"text":"not-allowed",resize:"vertical",fontFamily:"inherit"}})),m.additionalInstructions&&i.createElement("div",{style:{marginTop:"15px",textAlign:"center",display:"flex",gap:"10px",justifyContent:"center"}},i.createElement("button",{onClick:()=>w("Additional Instructions",{additionalInstructions:t.additionalInstructions}),disabled:c==="Additional Instructions",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:c==="Additional Instructions"?"#666":"#4CAF50",color:"#fff",cursor:c==="Additional Instructions"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},c==="Additional Instructions"?i.createElement(Si,{style:{animation:"spin 1s linear infinite"}}):i.createElement(io,null),c==="Additional Instructions"?"Saving...":"Save Additional Instructions"),i.createElement("button",{onClick:()=>I("additionalInstructions"),disabled:c==="Additional Instructions",style:{padding:"8px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#ccc",cursor:c==="Additional Instructions"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"}},"Cancel"))),i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},i.createElement("h3",{style:{color:"#fff",margin:0}},"Contact Information"),i.createElement("button",{onClick:()=>D("contactInfo"),style:{padding:"6px 12px",borderRadius:"4px",border:"none",background:m.contactInfo?"#ff9800":"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},m.contactInfo?"🔒 Cancel Edit":"✏️ Edit")),i.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:m.contactInfo?"rgba(76, 175, 80, 0.05)":"rgba(255,255,255,0.02)",opacity:m.contactInfo?1:.8}},i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"15px"}},i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Admin Name"),i.createElement("input",{type:"text",value:t.contactInfo.adminName,onChange:A=>_("adminName",A.target.value),disabled:!m.contactInfo,placeholder:"League Administrator Name",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:m.contactInfo?"#222":"#333",color:m.contactInfo?"#fff":"#888",cursor:m.contactInfo?"text":"not-allowed"}})),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Admin Email"),i.createElement("input",{type:"email",value:t.contactInfo.adminEmail,onChange:A=>_("adminEmail",A.target.value),disabled:!m.contactInfo,placeholder:"admin@example.com",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:m.contactInfo?"#222":"#333",color:m.contactInfo?"#fff":"#888",cursor:m.contactInfo?"text":"not-allowed"}})),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Admin Phone"),i.createElement("input",{type:"tel",value:t.contactInfo.adminPhone,onChange:A=>_("adminPhone",A.target.value),disabled:!m.contactInfo,placeholder:"(555) 123-4567",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:m.contactInfo?"#222":"#333",color:m.contactInfo?"#fff":"#888",cursor:m.contactInfo?"text":"not-allowed"}})))),m.contactInfo&&i.createElement("div",{style:{marginTop:"15px",textAlign:"center",display:"flex",gap:"10px",justifyContent:"center"}},i.createElement("button",{onClick:()=>w("Contact Information",{contactInfo:t.contactInfo}),disabled:c==="Contact Information",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:c==="Contact Information"?"#666":"#4CAF50",color:"#fff",cursor:c==="Contact Information"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},c==="Contact Information"?i.createElement(Si,{style:{animation:"spin 1s linear infinite"}}):i.createElement(io,null),c==="Contact Information"?"Saving...":"Save Contact Information"),i.createElement("button",{onClick:()=>I("contactInfo"),disabled:c==="Contact Information",style:{padding:"8px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#ccc",cursor:c==="Contact Information"?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"}},"Cancel"))),i.createElement("div",{style:{marginTop:"40px",padding:"20px",border:"2px solid rgba(76, 175, 80, 0.3)",borderRadius:"12px",background:"rgba(76, 175, 80, 0.05)",textAlign:"center"}},i.createElement("h3",{style:{color:"#4CAF50",marginBottom:"15px"}},"💾 Save All Changes"),i.createElement("p",{style:{color:"#ccc",marginBottom:"20px",fontSize:"14px"}},"Use this button to save all configuration changes at once, or use the individual save buttons for each section above."),i.createElement("button",{onClick:E,disabled:s,style:{padding:"12px 30px",borderRadius:"8px",border:"none",background:s?"#666":"linear-gradient(135deg, #4CAF50, #45a049)",color:"#fff",cursor:s?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px",margin:"0 auto",boxShadow:s?"none":"0 4px 15px rgba(76, 175, 80, 0.3)",transition:"all 0.2s ease"},onMouseEnter:A=>{s||(A.target.style.transform="translateY(-2px)",A.target.style.boxShadow="0 6px 20px rgba(76, 175, 80, 0.4)")},onMouseLeave:A=>{s||(A.target.style.transform="translateY(0)",A.target.style.boxShadow="0 4px 15px rgba(76, 175, 80, 0.3)")}},s?i.createElement(Si,{style:{animation:"spin 1s linear infinite"}}):i.createElement(io,null),s?"Saving All Changes...":"Save All Configuration")))}function cO(){const[t,a]=v.useState([]),[e,n]=v.useState(!0),[s,l]=v.useState(""),[c,d]=v.useState("all"),[p,h]=v.useState(null),[m,b]=v.useState(!1),[x,E]=v.useState(!1),[w,S]=v.useState({amount:"",paymentType:"weekly_dues",paymentMethod:"cash",notes:"",date:new Date().toISOString().split("T")[0]}),[_,C]=v.useState({amount:"",reason:"",strikeLevel:"1",notes:"",date:new Date().toISOString().split("T")[0]});v.useEffect(()=>{D()},[]);const D=async()=>{n(!0);try{const O=await fetch(`${Pe}/api/users/search?approved=true`);if(O.ok){const U=(await O.json()).users.map(M=>({...M,paymentHistory:M.paymentHistory||[],penalties:M.penalties||[],currentBalance:F(M),paymentStatus:J(M)}));a(U)}}catch(O){console.error("Error loading players:",O)}finally{n(!1)}},[I,A]=v.useState({registrationFee:30,weeklyDues:10,totalWeeks:10,penaltyStructure:{strike1:5,strike2:10,strike3:0}});v.useEffect(()=>{T()},[]);const T=async()=>{try{const O=await fetch(`${Pe}/api/payment-config`);if(O.ok){const B=await O.json();B.config&&A({registrationFee:B.config.registrationFee||30,weeklyDues:B.config.weeklyDues||10,totalWeeks:B.config.totalWeeks||10,penaltyStructure:B.config.penaltyStructure||{strike1:5,strike2:10,strike3:0}})}}catch(O){console.error("Error loading fee config:",O)}},F=O=>{const B=I.registrationFee+I.weeklyDues*I.totalWeeks,U=(O.paymentHistory||[]).reduce((z,G)=>G.paymentType==="registration_fee"||G.paymentType==="weekly_dues"?z+G.amount:z,0),M=(O.penalties||[]).reduce((z,G)=>z+G.amount,0);return B-U+M},J=O=>{const B=F(O);return B<=0?"paid":B<=20?"partial":"overdue"},H=t.filter(O=>{var M,z,G;const B=((M=O.firstName)==null?void 0:M.toLowerCase().includes(s.toLowerCase()))||((z=O.lastName)==null?void 0:z.toLowerCase().includes(s.toLowerCase()))||((G=O.email)==null?void 0:G.toLowerCase().includes(s.toLowerCase())),U=c==="all"||O.paymentStatus===c;return B&&U}),Z=async()=>{if(!(!p||!w.amount))try{(await fetch(`${Pe}/api/users/${p._id}/add-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)})).ok&&(b(!1),S({amount:"",paymentType:"weekly_dues",paymentMethod:"cash",notes:"",date:new Date().toISOString().split("T")[0]}),D())}catch(O){console.error("Error adding payment:",O)}},K=async()=>{if(!(!p||!_.amount))try{(await fetch(`${Pe}/api/users/${p._id}/add-penalty`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).ok&&(E(!1),C({amount:"",reason:"",strikeLevel:"1",notes:"",date:new Date().toISOString().split("T")[0]}),D())}catch(O){console.error("Error adding penalty:",O)}},X=O=>{switch(O){case"paid":return"#4CAF50";case"partial":return"#FF9800";case"overdue":return"#f44336";default:return"#666"}},W=O=>{switch(O){case"paid":return i.createElement(Ar,null);case"partial":return i.createElement(HB,null);case"overdue":return i.createElement(cp,null);default:return i.createElement(aO,null)}};return e?i.createElement("div",{style:{textAlign:"center",padding:"20px"}},i.createElement("div",{style:{animation:"spin 1s linear infinite"}},"🔄"),i.createElement("p",null,"Loading payment data...")):i.createElement("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"}},i.createElement("h2",{style:{color:"#e53e3e",marginBottom:"20px",textAlign:"center"}},"💰 Payment Tracker"),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginBottom:"30px"}},i.createElement("div",{style:{padding:"15px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"8px",border:"1px solid #4CAF50",textAlign:"center"}},i.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#4CAF50"}},t.filter(O=>O.paymentStatus==="paid").length),i.createElement("div",{style:{color:"#fff"}},"Fully Paid")),i.createElement("div",{style:{padding:"15px",background:"rgba(255, 152, 0, 0.1)",borderRadius:"8px",border:"1px solid #FF9800",textAlign:"center"}},i.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#FF9800"}},t.filter(O=>O.paymentStatus==="partial").length),i.createElement("div",{style:{color:"#fff"}},"Partial Payment")),i.createElement("div",{style:{padding:"15px",background:"rgba(244, 67, 54, 0.1)",borderRadius:"8px",border:"1px solid #f44336",textAlign:"center"}},i.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#f44336"}},t.filter(O=>O.paymentStatus==="overdue").length),i.createElement("div",{style:{color:"#fff"}},"Overdue")),i.createElement("div",{style:{padding:"15px",background:"rgba(102, 102, 102, 0.1)",borderRadius:"8px",border:"1px solid #666",textAlign:"center"}},i.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#666"}},"$",t.reduce((O,B)=>O+Math.max(0,B.currentBalance),0).toFixed(2)),i.createElement("div",{style:{color:"#fff"}},"Total Outstanding"))),i.createElement("div",{style:{display:"flex",gap:"15px",marginBottom:"20px",flexWrap:"wrap"}},i.createElement("div",{style:{flex:"1",minWidth:"200px"}},i.createElement("input",{type:"text",placeholder:"Search players...",value:s,onChange:O=>l(O.target.value),style:{width:"100%",padding:"10px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}})),i.createElement("select",{value:c,onChange:O=>d(O.target.value),style:{padding:"10px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",minWidth:"150px"}},i.createElement("option",{value:"all"},"All Status"),i.createElement("option",{value:"paid"},"Fully Paid"),i.createElement("option",{value:"partial"},"Partial Payment"),i.createElement("option",{value:"overdue"},"Overdue")),i.createElement("button",{onClick:()=>{},style:{padding:"10px 15px",borderRadius:"6px",border:"none",background:"#4CAF50",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"}},i.createElement(GB,null)," Export")),i.createElement("div",{style:{display:"grid",gap:"15px"}},H.map(O=>i.createElement("div",{key:O._id,style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"10px"}},i.createElement("div",{style:{flex:"1",minWidth:"200px"}},i.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"5px"}},i.createElement("span",{style:{color:X(O.paymentStatus),fontSize:"18px"}},W(O.paymentStatus)),i.createElement("h4",{style:{color:"#fff",margin:0}},O.firstName," ",O.lastName)),i.createElement("div",{style:{color:"#ccc",fontSize:"14px"}},O.email," • ",O.phone||"No phone")),i.createElement("div",{style:{textAlign:"center",minWidth:"120px"}},i.createElement("div",{style:{fontSize:"18px",fontWeight:"bold",color:O.currentBalance>0?"#f44336":"#4CAF50"}},"$",O.currentBalance.toFixed(2)),i.createElement("div",{style:{color:"#ccc",fontSize:"12px"}},O.currentBalance>0?"Owed":"Paid")),i.createElement("div",{style:{display:"flex",gap:"8px"}},i.createElement("button",{onClick:()=>{h(O),b(!0)},style:{padding:"8px 12px",borderRadius:"4px",border:"none",background:"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"5px"}},i.createElement(Ni,null)," Payment"),i.createElement("button",{onClick:()=>{h(O),E(!0)},style:{padding:"8px 12px",borderRadius:"4px",border:"none",background:"#f44336",color:"#fff",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"5px"}},i.createElement(cp,null)," Penalty"),i.createElement("button",{onClick:()=>{h(O)},style:{padding:"8px 12px",borderRadius:"4px",border:"1px solid #666",background:"transparent",color:"#fff",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"5px"}},i.createElement(iS,null)," Details"))))),m&&p&&i.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3}},i.createElement("div",{style:{background:"#333",padding:"20px",borderRadius:"8px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"}},i.createElement("h3",{style:{color:"#fff",marginBottom:"20px"}},"Add Payment - ",p.firstName," ",p.lastName),i.createElement("div",{style:{display:"grid",gap:"15px"}},i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Payment Type"),i.createElement("select",{value:w.paymentType,onChange:O=>{const B=O.target.value;let U=0;B==="registration_fee"?U=I.registrationFee:B==="weekly_dues"?U=I.weeklyDues:B==="participation_fee"&&(U=I.registrationFee+I.weeklyDues*I.totalWeeks),S(M=>({...M,paymentType:B,amount:U}))},style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}},i.createElement("option",{value:"registration_fee"},"Registration Fee ($",I.registrationFee,")"),i.createElement("option",{value:"weekly_dues"},"Weekly Dues ($",I.weeklyDues,")"),i.createElement("option",{value:"participation_fee"},"Participation Fee ($",I.registrationFee+I.weeklyDues*I.totalWeeks,")"),i.createElement("option",{value:"penalty"},"Penalty Payment"),i.createElement("option",{value:"other"},"Other"))),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Amount ($)"),i.createElement("input",{type:"number",value:w.amount,onChange:O=>S(B=>({...B,amount:O.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"},step:"0.01"})),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Payment Method"),i.createElement("select",{value:w.paymentMethod,onChange:O=>S(B=>({...B,paymentMethod:O.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}},i.createElement("option",{value:"cash"},"Cash"),i.createElement("option",{value:"venmo"},"Venmo"),i.createElement("option",{value:"credit_card"},"Credit/Debit Card"),i.createElement("option",{value:"check"},"Check"))),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Date"),i.createElement("input",{type:"date",value:w.date,onChange:O=>S(B=>({...B,date:O.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}})),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Notes"),i.createElement("textarea",{value:w.notes,onChange:O=>S(B=>({...B,notes:O.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",minHeight:"60px",resize:"vertical"},placeholder:"Optional notes about this payment..."}))),i.createElement("div",{style:{display:"flex",gap:"10px",marginTop:"20px"}},i.createElement("button",{onClick:Z,style:{padding:"10px 20px",borderRadius:"6px",border:"none",background:"#4CAF50",color:"#fff",cursor:"pointer",flex:"1"}},"Add Payment"),i.createElement("button",{onClick:()=>b(!1),style:{padding:"10px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#fff",cursor:"pointer",flex:"1"}},"Cancel")))),x&&p&&i.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3}},i.createElement("div",{style:{background:"#333",padding:"20px",borderRadius:"8px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"}},i.createElement("h3",{style:{color:"#fff",marginBottom:"20px"}},"Add Penalty - ",p.firstName," ",p.lastName),i.createElement("div",{style:{display:"grid",gap:"15px"}},i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Strike Level"),i.createElement("select",{value:_.strikeLevel,onChange:O=>{const B=O.target.value;C(U=>({...U,strikeLevel:B,amount:B==="1"?I.penaltyStructure.strike1:B==="2"?I.penaltyStructure.strike2:B==="3"?I.penaltyStructure.strike3:0}))},style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}},i.createElement("option",{value:"1"},"Strike 1 - $",I.penaltyStructure.strike1," fine"),i.createElement("option",{value:"2"},"Strike 2 - $",I.penaltyStructure.strike2," fine"),i.createElement("option",{value:"3"},"Strike 3 - ",I.penaltyStructure.strike3>0?`$${I.penaltyStructure.strike3} fine`:"Removal"))),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Fine Amount ($)"),i.createElement("input",{type:"number",value:_.amount,onChange:O=>C(B=>({...B,amount:O.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"},step:"0.01"})),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Reason"),i.createElement("input",{type:"text",value:_.reason,onChange:O=>C(B=>({...B,reason:O.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"},placeholder:"Reason for penalty..."})),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Date"),i.createElement("input",{type:"date",value:_.date,onChange:O=>C(B=>({...B,date:O.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}})),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Notes"),i.createElement("textarea",{value:_.notes,onChange:O=>C(B=>({...B,notes:O.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff",minHeight:"60px",resize:"vertical"},placeholder:"Additional details about the penalty..."}))),i.createElement("div",{style:{display:"flex",gap:"10px",marginTop:"20px"}},i.createElement("button",{onClick:K,style:{padding:"10px 20px",borderRadius:"6px",border:"none",background:"#f44336",color:"#fff",cursor:"pointer",flex:"1"}},"Add Penalty"),i.createElement("button",{onClick:()=>E(!1),style:{padding:"10px 20px",borderRadius:"6px",border:"1px solid #666",background:"transparent",color:"#fff",cursor:"pointer",flex:"1"}},"Cancel")))))}function uO(){const[t,a]=v.useState({phase1Weeks:6,currentSession:{name:"Current Session",startDate:"",endDate:"",isActive:!0}}),[e,n]=v.useState(!0),[s,l]=v.useState(!1),[c,d]=v.useState({type:"",text:""}),[p,h]=v.useState("phases"),[m,b]=v.useState([]),[x,E]=v.useState(""),[w,S]=v.useState([]),[_,C]=v.useState([]),[D,I]=v.useState({}),[A,T]=v.useState("");v.useEffect(()=>{F(),J(),H()},[]);const F=async()=>{try{const W=await fetch(`${Pe}/api/payment-config`);if(W.ok){const O=await W.json();O.config&&a({phase1Weeks:O.config.phase1Weeks||6,currentSession:{name:"Current Session",startDate:"",endDate:"",isActive:!0,...O.config.currentSession}})}}catch(W){console.error("Error loading league config:",W),d({type:"error",text:"Failed to load league configuration"})}finally{n(!1)}},J=async()=>{try{const W=await fetch(`${Pe}/admin/divisions`);if(W.ok){const O=await W.json();b(O),O.length>0&&E(O[0].name)}}catch(W){console.error("Error loading divisions:",W)}},H=async()=>{try{const W=await fetch(`${Pe}/api/users`);if(W.ok){const O=await W.json();S(O.filter(B=>B.isApproved)),C(O.filter(B=>B.isApproved&&(!B.divisions||B.divisions.length===0)))}}catch(W){console.error("Error loading players:",W)}},Z=async(W,O)=>{try{(await fetch(`${Pe}/admin/user/${W}/add-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:O})})).ok?(d({type:"success",text:"Player added to division successfully!"}),H()):d({type:"error",text:"Failed to add player to division"})}catch(B){console.error("Error adding player to division:",B),d({type:"error",text:"Error adding player to division"})}},K=async(W,O)=>{try{(await fetch(`${Pe}/admin/user/${W}/remove-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:O})})).ok?(d({type:"success",text:"Player removed from division successfully!"}),H()):d({type:"error",text:"Failed to remove player from division"})}catch(B){console.error("Error removing player from division:",B),d({type:"error",text:"Error removing player from division"})}};if(e)return i.createElement("div",{style:{textAlign:"center",padding:"20px"}},i.createElement(Si,{style:{animation:"spin 1s linear infinite"}}),i.createElement("p",null,"Loading league configuration..."));const X=()=>{switch(p){case"phases":return i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px"}},i.createElement(lu,{style:{color:"#4CAF50"}}),i.createElement("h3",{style:{color:"#fff",margin:0}},"Phase Configuration")),i.createElement("div",{style:{padding:"20px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"8px",border:"1px solid #4CAF50",textAlign:"center"}},i.createElement(K0,{style:{fontSize:"48px",color:"#4CAF50",marginBottom:"15px"}}),i.createElement("p",{style:{color:"#4CAF50",margin:0,fontSize:"16px"}},"Phase configuration is now part of the division creation process.",i.createElement("br",null),'Use the "Divisions" tab to create new divisions with phase settings.')));case"rosters":return i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px"}},i.createElement(Jc,{style:{color:"#4CAF50"}}),i.createElement("h3",{style:{color:"#fff",margin:0}},"Player Rosters")),i.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(255,255,255,0.02)"}},i.createElement("div",{style:{marginBottom:"20px"}},i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Select Division"),i.createElement("select",{value:x,onChange:W=>E(W.target.value),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}},i.createElement("option",{value:""},"Choose a division..."),m.map(W=>i.createElement("option",{key:W._id,value:W.name},W.name)))),x&&i.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"}},i.createElement("div",null,i.createElement("h4",{style:{color:"#fff",marginBottom:"15px"}},"Players in ",x),i.createElement("div",{style:{maxHeight:"400px",overflowY:"auto"}},w.filter(W=>W.divisions&&W.divisions.includes(x)).length===0?i.createElement("p",{style:{color:"#888",textAlign:"center"}},"No players in this division"):w.filter(W=>W.divisions&&W.divisions.includes(x)).map(W=>i.createElement("div",{key:W._id,style:{padding:"10px",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",background:"rgba(255,255,255,0.02)",marginBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"}},i.createElement("div",null,i.createElement("p",{style:{color:"#fff",margin:"0 0 5px 0"}},W.firstName," ",W.lastName),i.createElement("p",{style:{color:"#888",margin:0,fontSize:"12px"}},W.email)),i.createElement("button",{onClick:()=>K(W._id,x),style:{padding:"4px 8px",borderRadius:"4px",border:"none",background:"#e53e3e",color:"#fff",cursor:"pointer",fontSize:"12px"}},i.createElement(nO,null)))))),i.createElement("div",null,i.createElement("h4",{style:{color:"#fff",marginBottom:"15px"}},"Available Players"),i.createElement("div",{style:{maxHeight:"400px",overflowY:"auto"}},_.length===0?i.createElement("p",{style:{color:"#888",textAlign:"center"}},"No available players"):_.map(W=>i.createElement("div",{key:W._id,style:{padding:"10px",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",background:"rgba(255,255,255,0.02)",marginBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"}},i.createElement("div",null,i.createElement("p",{style:{color:"#fff",margin:"0 0 5px 0"}},W.firstName," ",W.lastName),i.createElement("p",{style:{color:"#888",margin:0,fontSize:"12px"}},W.email)),i.createElement("button",{onClick:()=>Z(W._id,x),style:{padding:"4px 8px",borderRadius:"4px",border:"none",background:"#4CAF50",color:"#fff",cursor:"pointer",fontSize:"12px"}},i.createElement(Jc,null)))))))));case"standings":return i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px"}},i.createElement(vx,{style:{color:"#4CAF50"}}),i.createElement("h3",{style:{color:"#fff",margin:0}},"Standings Tracking")),i.createElement("div",{style:{padding:"15px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(255,255,255,0.02)"}},i.createElement("div",{style:{marginBottom:"20px"}},i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px"}},"Select Division"),i.createElement("select",{value:A,onChange:W=>T(W.target.value),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #444",background:"#222",color:"#fff"}},i.createElement("option",{value:""},"Choose a division..."),m.map(W=>i.createElement("option",{key:W._id,value:W.name},W.name)))),A&&i.createElement("div",null,i.createElement("h4",{style:{color:"#fff",marginBottom:"15px"}},"Standings for ",A),i.createElement("div",{style:{padding:"15px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"6px",border:"1px solid #4CAF50",textAlign:"center"}},i.createElement(UB,{style:{fontSize:"48px",color:"#4CAF50",marginBottom:"10px"}}),i.createElement("p",{style:{color:"#4CAF50",margin:0}},"Standings tracking will be integrated with CSI LMS data.",i.createElement("br",null),'Use the "Divisions" tab to sync standings from CSI LMS.')))));default:return null}};return i.createElement("div",{style:{padding:"20px",maxWidth:"1000px",margin:"0 auto"}},i.createElement("h2",{style:{color:"#e53e3e",marginBottom:"20px",textAlign:"center"}},"📅 League Management"),c.text&&i.createElement("div",{style:{padding:"10px 15px",borderRadius:"6px",marginBottom:"20px",background:c.type==="success"?"rgba(76, 175, 80, 0.2)":"rgba(229, 62, 62, 0.2)",border:`1px solid ${c.type==="success"?"#4CAF50":"#e53e3e"}`,color:c.type==="success"?"#4CAF50":"#e53e3e",display:"flex",alignItems:"center",gap:"10px"}},c.type==="success"?i.createElement(Ar,null):i.createElement(X0,null),c.text),i.createElement("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap"}},i.createElement("button",{onClick:()=>h("phases"),style:{padding:"10px 20px",borderRadius:"6px",border:"none",background:p==="phases"?"#4CAF50":"#333",color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},i.createElement(lu,null)," Phase Configuration"),i.createElement("button",{onClick:()=>h("rosters"),style:{padding:"10px 20px",borderRadius:"6px",border:"none",background:p==="rosters"?"#4CAF50":"#333",color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},i.createElement(Jc,null)," Player Rosters"),i.createElement("button",{onClick:()=>h("standings"),style:{padding:"10px 20px",borderRadius:"6px",border:"none",background:p==="standings"?"#4CAF50":"#333",color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"}},i.createElement(vx,null)," Standings Tracking")),X())}const dO="nbvut8j4y6se",xx="frbcaplgmailcom";function fO({backendUrl:t,onComplete:a}){const[e,n]=v.useState(1),[s,l]=v.useState({name:"",description:"",scheduleUrl:"",standingsUrl:"",seasonStart:"",phase1Weeks:6,phase2Weeks:4,totalWeeks:10}),[c,d]=v.useState(!1),[p,h]=v.useState(""),m=[{id:1,title:"Create Division in CSI LMS",description:"First, create the division in the CSI LMS software",instructions:["1. Log into CSI LMS at https://lms.fargorate.com","2. Navigate to League Management","3. Create a new division with your desired name","4. Set up the division settings and rules","5. Make sure the division is active and ready for players"],completed:!1},{id:2,title:"Get Division URLs",description:"Copy the schedule and standings URLs from CSI LMS",instructions:["1. In CSI LMS, go to the division you just created","2. Click on the 'Reports' link in the navigation","3. Click the 'Schedule' button","4. Copy the URL from the schedule report page","5. Click the 'Teams' button","6. Copy the URL from the teams report page","7. Both URLs should look like: https://lms.fargorate.com/PublicReport/LeagueReports?..."],completed:!1},{id:3,title:"Configure Phase Settings",description:"Set up the division's phase structure and session dates",instructions:["1. Set the total number of weeks for the session","2. Configure how many weeks Phase 1 should last","3. Phase 2 weeks will be calculated automatically","4. Set the session start date","5. Review the calculated phase dates"],completed:!1},{id:4,title:"Add Division to App",description:"Create the division in your app with the URLs",instructions:["1. Enter the division name (exactly as in CSI LMS)","2. Add a description (optional)","3. Paste the schedule URL from CSI LMS","4. Paste the standings URL from CSI LMS","5. Click 'Create Division'"],completed:!1},{id:5,title:"Test Data Sync",description:"Verify the division is working correctly",instructions:["1. Click 'Update Schedule' to sync match data","2. Click 'Update Standings' to sync player rankings","3. Verify data appears correctly in the app","4. Test the division in the main dashboard"],completed:!1}],b=(w,S)=>{l(_=>({..._,[w]:S}))},x=async()=>{d(!0),h("");try{const w=await fetch(`${t}/api/seasons`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.name,division:s.name,description:s.description,scheduleUrl:s.scheduleUrl,standingsUrl:s.standingsUrl,seasonStart:s.seasonStart})}),S=await w.json();if(w.ok){try{const _=await fetch(`${t}/admin/divisions`);if(_.ok){const D=(await _.json()).find(I=>I.name===s.name);D&&await fetch(`${t}/api/division-config/${D._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({phase1Weeks:s.phase1Weeks,phase2Weeks:s.phase2Weeks,totalWeeks:s.totalWeeks,currentSession:{name:`${s.name} Session`,startDate:s.seasonStart,endDate:null,isActive:!0}})})}}catch(_){console.error("Error saving phase configuration:",_)}h("✅ Division created successfully with phase configuration!"),n(5),a&&a()}else h("❌ "+(S.error||"Failed to create division."))}catch(w){h("❌ Failed to create division: "+w.message)}d(!1)},E=()=>{switch(e){case 1:return i.createElement("div",{className:ie.workflowStep},i.createElement("div",{className:ie.stepInstructions},m[0].instructions.map((w,S)=>i.createElement("div",{key:S,className:ie.instructionItem},w))),i.createElement("div",{className:ie.stepActions},i.createElement("button",{className:ie.workflowButton,onClick:()=>n(2)},i.createElement(co,null)," I've Created the Division in CSI LMS")));case 2:return i.createElement("div",{className:ie.workflowStep},i.createElement("div",{className:ie.stepInstructions},m[1].instructions.map((w,S)=>i.createElement("div",{key:S,className:ie.instructionItem},w))),i.createElement("div",{className:ie.stepActions},i.createElement("button",{className:ie.workflowButton,onClick:()=>n(3)},i.createElement(co,null)," I Have the URLs Ready")));case 3:return i.createElement("div",{className:ie.workflowStep},i.createElement("div",{className:ie.stepInstructions},m[2].instructions.map((w,S)=>i.createElement("div",{key:S,className:ie.instructionItem},w))),i.createElement("div",{className:ie.divisionForm},i.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"15px"}},i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px",fontSize:"14px"}},"Total Weeks"),i.createElement("input",{type:"number",value:s.totalWeeks,onChange:w=>{const S=Number(w.target.value),_=s.phase1Weeks,C=Math.max(1,S-_);b("totalWeeks",S),b("phase2Weeks",C)},className:ie.workflowInput,min:"2",max:"40"})),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px",fontSize:"14px"}},"Phase 1 Weeks"),i.createElement("input",{type:"number",value:s.phase1Weeks,onChange:w=>{const S=Number(w.target.value);if(b("phase1Weeks",S),s.totalWeeks){const _=Math.max(1,s.totalWeeks-S);b("phase2Weeks",_)}},className:ie.workflowInput,min:"1",max:"20"}))),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"15px"}},i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px",fontSize:"14px"}},"Phase 2 Weeks"),i.createElement("input",{type:"number",value:s.phase2Weeks,onChange:w=>{const S=Number(w.target.value);b("phase2Weeks",S);const _=s.phase1Weeks+S;b("totalWeeks",_)},className:ie.workflowInput,min:"1",max:"20"})),i.createElement("div",null,i.createElement("label",{style:{color:"#fff",display:"block",marginBottom:"5px",fontSize:"14px"}},"Session Start Date"),i.createElement("input",{type:"date",value:s.seasonStart,onChange:w=>b("seasonStart",w.target.value),className:ie.workflowInput}))),s.seasonStart&&i.createElement("div",{style:{marginTop:"15px",padding:"15px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"6px",border:"1px solid #4CAF50"}},i.createElement("div",{style:{color:"#4CAF50",fontSize:"14px"}},i.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"10px"}},i.createElement(K0,null),i.createElement("strong",null,"Calculated Session Dates:")),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"10px"}},i.createElement("div",null,i.createElement("strong",null,"Phase 1:"),i.createElement("br",null),new Date(s.seasonStart).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})," to ",(()=>{const w=new Date(s.seasonStart),S=new Date(w);return S.setDate(w.getDate()+s.phase1Weeks*6-1),S.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})()),i.createElement("div",null,i.createElement("strong",null,"Phase 2:"),i.createElement("br",null),(()=>{const w=new Date(s.seasonStart),S=new Date(w);return S.setDate(w.getDate()+s.phase1Weeks*6),S.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})()," to ",(()=>{const w=new Date(s.seasonStart),S=new Date(w);return S.setDate(w.getDate()+s.phase1Weeks*6+s.phase2Weeks*6-1),S.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})())),i.createElement("div",{style:{marginTop:"10px",fontSize:"12px",opacity:.8}},"Total Session Length: ",s.totalWeeks," weeks (",s.phase1Weeks," weeks Phase 1 + ",s.phase2Weeks," weeks Phase 2)"))),i.createElement("button",{className:ie.workflowButton,onClick:()=>n(4),disabled:!s.seasonStart},i.createElement(co,null)," Continue to Division Setup")));case 4:return i.createElement("div",{className:ie.workflowStep},i.createElement("div",{className:ie.stepInstructions},m[3].instructions.map((w,S)=>i.createElement("div",{key:S,className:ie.instructionItem},w))),i.createElement("div",{className:ie.divisionForm},i.createElement("input",{type:"text",placeholder:"Division Name (exactly as in CSI LMS)",value:s.name,onChange:w=>b("name",w.target.value),className:ie.workflowInput}),i.createElement("input",{type:"text",placeholder:"Description (optional)",value:s.description,onChange:w=>b("description",w.target.value),className:ie.workflowInput}),i.createElement("input",{type:"url",placeholder:"Schedule URL from CSI LMS",value:s.scheduleUrl,onChange:w=>b("scheduleUrl",w.target.value),className:ie.workflowInput}),i.createElement("input",{type:"url",placeholder:"Standings URL from CSI LMS",value:s.standingsUrl,onChange:w=>b("standingsUrl",w.target.value),className:ie.workflowInput}),i.createElement("button",{className:ie.workflowButton,onClick:x,disabled:c||!s.name||!s.scheduleUrl||!s.standingsUrl},c?"Creating...":"Create Division")),p&&i.createElement("div",{className:ie.workflowResult},p));case 5:return i.createElement("div",{className:ie.workflowStep},i.createElement("div",{className:ie.stepInstructions},m[4].instructions.map((w,S)=>i.createElement("div",{key:S,className:ie.instructionItem},w))),i.createElement("div",{className:ie.stepActions},i.createElement(pO,{backendUrl:t,divisionName:s.name}),i.createElement("button",{className:ie.workflowButton,onClick:()=>{n(1),l({name:"",description:"",scheduleUrl:"",standingsUrl:"",seasonStart:"",phase1Weeks:6,phase2Weeks:4,totalWeeks:10}),h("")}},i.createElement(Ni,null)," Create Another Division")));default:return null}};return i.createElement("div",{className:ie.workflowContainer},i.createElement("div",{className:ie.workflowHeader},i.createElement("h3",null,i.createElement(Ni,null)," Create New Division"),i.createElement("div",{className:ie.workflowProgress},"Step ",e," of ",m.length)),i.createElement("div",{className:ie.workflowSteps},m.map((w,S)=>i.createElement("div",{key:w.id,className:`${ie.workflowStepIndicator} ${e>w.id?ie.completed:e===w.id?ie.active:ie.pending}`},i.createElement("div",{className:ie.stepNumber},w.id),i.createElement("div",{className:ie.stepInfo},i.createElement("div",{className:ie.stepTitle},w.title),i.createElement("div",{className:ie.stepDescription},w.description))))),i.createElement("div",{className:ie.workflowContent},E()))}function pO({backendUrl:t,divisionName:a}){const[e,n]=v.useState(!1),[s,l]=v.useState(""),c=async d=>{n(!0),l("");try{const h=await fetch(`${t}${d==="schedule"?"/admin/update-schedule":"/admin/update-standings"}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:a})}),m=await h.json();h.ok?l(`✅ ${d==="schedule"?"Schedule":"Standings"} updated successfully!`):l(`❌ Failed to update ${d}: ${m.error||"Unknown error"}`)}catch(p){l(`❌ Failed to update ${d}: ${p.message}`)}n(!1)};return i.createElement("div",{className:ie.dataSyncTools},i.createElement("button",{className:ie.syncButton,onClick:()=>c("schedule"),disabled:e},i.createElement(r0,null)," Update Schedule"),i.createElement("button",{className:ie.syncButton,onClick:()=>c("standings"),disabled:e},i.createElement(r0,null)," Update Standings"),s&&i.createElement("div",{className:ie.syncResult},s))}function mO({backendUrl:t}){const[a,e]=v.useState("approve"),[n,s]=v.useState([]),[l,c]=v.useState([]),[d,p]=v.useState(!1);v.useEffect(()=>{h(),m()},[]);const h=async()=>{p(!0);try{const w=await fetch(`${t}/api/users/pending-registrations`);if(w.ok){const S=await w.json();s(S.sort((_,C)=>new Date(_.registrationDate)-new Date(C.registrationDate)))}}catch(w){console.error("Error fetching pending registrations:",w)}p(!1)},m=async()=>{try{const w=await fetch(`${t}/api/users/pending-payment`);if(w.ok){const S=await w.json();c(S.users||[])}}catch(w){console.error("Error fetching pending payments:",w)}},b=async(w,S,_)=>{try{const C=await fetch(`${t}/api/users/${w}/confirm-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentMethod:S||"Admin Confirmed",paymentNotes:_||""})});if(C.ok){const D=await C.json();alert(`Payment confirmed! PIN: ${D.user.pin}`),m()}else alert("Failed to confirm payment")}catch(C){console.error("Error confirming payment:",C),alert("Error confirming payment")}},x=async(w,S)=>{try{(await fetch(`${t}/api/users/admin/approve-registration/${w}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approvedBy:"Admin",paymentInfo:{hasPaid:!0,paymentDate:new Date,paymentMethod:"Cash",paymentNotes:"Approved by admin"},division:S})})).ok?h():alert("Failed to approve registration")}catch(_){console.error("Error approving registration:",_),alert("Error approving registration")}},E=async(w,S)=>{try{(await fetch(`${t}/api/users/admin/reject-registration/${w}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rejectedBy:"Admin",notes:S})})).ok?h():alert("Failed to reject registration")}catch(_){console.error("Error rejecting registration:",_),alert("Error rejecting registration")}};return i.createElement("div",{className:ie.playerManagementContainer},i.createElement("div",{className:ie.tabHeader},i.createElement("button",{className:`${ie.tabButton} ${a==="approve"?ie.active:""}`,onClick:()=>e("approve")},i.createElement(Jc,null)," Approve New Players (",n.length,")"),i.createElement("button",{className:`${ie.tabButton} ${a==="payments"?ie.active:""}`,onClick:()=>e("payments")},i.createElement(Ar,null)," Pending Payments (",l.length,")"),i.createElement("button",{className:`${ie.tabButton} ${a==="manage"?ie.active:""}`,onClick:()=>e("manage")},i.createElement(oS,null)," Manage Existing Players")),i.createElement("div",{className:ie.tabContent},a==="approve"&&i.createElement("div",{className:ie.approvalSection},d?i.createElement("div",{className:ie.loadingMessage},"Loading pending registrations..."):n.length===0?i.createElement("div",{className:ie.emptyState},i.createElement(Ar,null)," No pending registrations"):i.createElement("div",{className:ie.registrationList},n.map((w,S)=>i.createElement("div",{key:w._id,className:ie.registrationCard},i.createElement("div",{className:ie.registrationHeader},i.createElement("span",{className:ie.registrationNumber},"#",S+1),i.createElement("h4",null,w.firstName," ",w.lastName)),i.createElement("div",{className:ie.registrationDetails},i.createElement("p",null,i.createElement("strong",null,"Email:")," ",w.email),i.createElement("p",null,i.createElement("strong",null,"Phone:")," ",w.phone),i.createElement("p",null,i.createElement("strong",null,"Registered:")," ",new Date(w.registrationDate).toLocaleDateString())),i.createElement("div",{className:ie.registrationActions},i.createElement("select",{id:`division-${w._id}`,className:ie.divisionSelect},i.createElement("option",{value:""},"Select Division"),i.createElement("option",{value:"FRBCAPL TEST"},"FRBCAPL TEST"),i.createElement("option",{value:"Singles Test"},"Singles Test"),i.createElement("option",{value:"Waiting List"},"Waiting List")),i.createElement("button",{className:ie.approveButton,onClick:()=>{const _=document.getElementById(`division-${w._id}`).value;if(!_){alert("Please select a division before approving.");return}x(w._id,_)}},i.createElement(Ar,null)," Approve"),i.createElement("button",{className:ie.rejectButton,onClick:()=>{const _=prompt("Enter rejection reason (optional):");_!==null&&E(w._id,_)}},i.createElement(J0,null)," Reject")))))),a==="payments"&&i.createElement("div",{className:ie.paymentSection},l.length===0?i.createElement("div",{className:ie.emptyState},i.createElement(Ar,null)," No pending payments"):i.createElement("div",{className:ie.paymentList},l.map((w,S)=>i.createElement("div",{key:w._id,className:ie.paymentCard},i.createElement("div",{className:ie.paymentHeader},i.createElement("span",{className:ie.paymentNumber},"#",S+1),i.createElement("h4",null,w.firstName," ",w.lastName)),i.createElement("div",{className:ie.paymentDetails},i.createElement("p",null,i.createElement("strong",null,"Email:")," ",w.email),i.createElement("p",null,i.createElement("strong",null,"Registered:")," ",new Date(w.registrationDate).toLocaleDateString()),i.createElement("p",null,i.createElement("strong",null,"Status:")," ",i.createElement("span",{className:ie.pendingStatus},"Payment Pending"))),i.createElement("div",{className:ie.paymentActions},i.createElement("select",{id:`payment-method-${w._id}`,className:ie.paymentMethodSelect},i.createElement("option",{value:"Cash"},"Cash"),i.createElement("option",{value:"Venmo"},"Venmo"),i.createElement("option",{value:"Cash App"},"Cash App"),i.createElement("option",{value:"PayPal"},"PayPal"),i.createElement("option",{value:"Credit Card"},"Credit Card"),i.createElement("option",{value:"Apple Pay"},"Apple Pay"),i.createElement("option",{value:"Google Pay"},"Google Pay"),i.createElement("option",{value:"Check"},"Check"),i.createElement("option",{value:"Admin Confirmed"},"Admin Confirmed")),i.createElement("button",{className:ie.confirmPaymentButton,onClick:()=>{const _=document.getElementById(`payment-method-${w._id}`).value,C=prompt("Payment notes (optional):");C!==null&&b(w._id,_,C)}},i.createElement(Ar,null)," Confirm Payment")))))),a==="manage"&&i.createElement("div",{className:ie.manageSection},i.createElement(hO,{backendUrl:t}))))}function hO({backendUrl:t}){const[a,e]=v.useState(""),[n,s]=v.useState([]),[l,c]=v.useState([]),[d,p]=v.useState({});v.useEffect(()=>{fetch(`${t}/admin/divisions`).then(E=>E.json()).then(E=>c(E.map(w=>w.name))).catch(()=>c([]))},[t]);const h=async E=>{if(E.preventDefault(),!!a.trim())try{const S=await(await fetch(`${t}/admin/search-users?query=${encodeURIComponent(a)}`)).json();s(S),p({})}catch{s([]),alert("Search failed")}},m=async(E,w)=>{try{await fetch(`${t}/admin/user/${E}/add-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:w})}),h({preventDefault:()=>{}})}catch{alert("Failed to add user to division")}},b=async(E,w)=>{try{await fetch(`${t}/admin/user/${E}/remove-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:w})}),h({preventDefault:()=>{}})}catch{alert("Failed to remove user from division")}},x=(E,w)=>{p(S=>({...S,[E]:w}))};return i.createElement("div",{className:ie.userSearchContainer},i.createElement("form",{onSubmit:h,className:ie.searchForm},i.createElement("input",{type:"text",placeholder:"Search by name or email...",value:a,onChange:E=>e(E.target.value),className:ie.searchInput}),i.createElement("button",{type:"submit",className:ie.searchButton},i.createElement(eO,null)," Search")),n.length>0&&i.createElement("div",{className:ie.searchResults},n.map(E=>{var w,S;return i.createElement("div",{key:E._id,className:ie.userCard},i.createElement("div",{className:ie.userInfo},i.createElement("h4",{className:ie.userName},E.firstName&&E.lastName?`${E.firstName} ${E.lastName}`:E.name||E.email||"Unknown User"),i.createElement("div",{className:ie.userContactInfo},i.createElement("p",{className:ie.userEmail},i.createElement("strong",null,"Email:")," ",E.email),i.createElement("p",{className:ie.userPhone},i.createElement("strong",null,"Phone:")," ",E.phone||"Not provided"),E.textNumber&&i.createElement("p",{className:ie.userTextNumber},i.createElement("strong",null,"Text:")," ",E.textNumber)),i.createElement("div",{className:ie.userDetails},i.createElement("p",null,i.createElement("strong",null,"Current Divisions:")," ",((w=E.divisions)==null?void 0:w.join(", "))||"None"),E.locations&&i.createElement("p",null,i.createElement("strong",null,"Playing Locations:")," ",E.locations),E.availability&&i.createElement("div",{className:ie.userAvailability},i.createElement("p",null,i.createElement("strong",null,"Availability:")),i.createElement("div",{className:ie.availabilityGrid},Object.entries(E.availability).map(([_,C])=>C&&C.length>0&&i.createElement("div",{key:_,className:ie.availabilityDay},i.createElement("span",{className:ie.dayLabel},_,":"),i.createElement("span",{className:ie.timeSlots},C.join(", ")))))),E.emergencyContactName&&i.createElement("p",null,i.createElement("strong",null,"Emergency Contact:")," ",E.emergencyContactName," (",E.emergencyContactPhone,")"),E.notes&&i.createElement("p",null,i.createElement("strong",null,"Notes:")," ",E.notes))),i.createElement("div",{className:ie.userActions},i.createElement("select",{value:d[E._id]||"",onChange:_=>x(E._id,_.target.value),className:ie.divisionSelect},i.createElement("option",{value:""},"Select Division"),l.map(_=>i.createElement("option",{key:_,value:_},_))),i.createElement("button",{onClick:()=>m(E._id,d[E._id]),disabled:!d[E._id],className:ie.addButton},i.createElement(Ni,null)," Add to Division"),(S=E.divisions)==null?void 0:S.map(_=>i.createElement("button",{key:_,onClick:()=>b(E._id,_),className:ie.removeButton},i.createElement(J0,null)," Remove from ",_))))})))}function gO({backendUrl:t}){const[a,e]=v.useState([]),[n,s]=v.useState("");return v.useEffect(()=>{fetch(`${t}/admin/divisions`).then(l=>l.json()).then(l=>{const c=l.map(d=>d.name);e(c),s(c[0]||"")}).catch(()=>e([]))},[t]),i.createElement("div",{className:ie.matchManagementContainer},i.createElement("div",{className:ie.sectionHeader},i.createElement("h3",null,i.createElement(lu,null)," Match Management"),i.createElement("select",{value:n,onChange:l=>s(l.target.value),className:ie.divisionSelect},a.map(l=>i.createElement("option",{key:l,value:l},l)))),n&&i.createElement(AB,{division:n,isAdmin:!0}))}function yO({backendUrl:t}){const[a,e]=v.useState(!1),[n,s]=v.useState({});v.useEffect(()=>{l()},[]);const l=async()=>{try{const[c,d]=await Promise.all([fetch(`${t}/api/users`),fetch(`${t}/admin/divisions`)]),p=await c.json(),h=await d.json();s({totalUsers:p.length,activeUsers:p.filter(m=>m.isActive).length,pendingRegistrations:p.filter(m=>!m.isApproved).length,totalDivisions:h.length})}catch(c){console.error("Error fetching system stats:",c)}};return i.createElement("div",{className:ie.systemStatusContainer},i.createElement("div",{className:ie.statsGrid},i.createElement("div",{className:ie.statCard},i.createElement("div",{className:ie.statNumber},n.totalUsers||0),i.createElement("div",{className:ie.statLabel},"Total Users")),i.createElement("div",{className:ie.statCard},i.createElement("div",{className:ie.statNumber},n.activeUsers||0),i.createElement("div",{className:ie.statLabel},"Active Users")),i.createElement("div",{className:ie.statCard},i.createElement("div",{className:ie.statNumber},n.pendingRegistrations||0),i.createElement("div",{className:ie.statLabel},"Pending Approvals")),i.createElement("div",{className:ie.statCard},i.createElement("div",{className:ie.statNumber},n.totalDivisions||0),i.createElement("div",{className:ie.statLabel},"Divisions"))),i.createElement("div",{className:ie.systemActions},i.createElement("button",{className:ie.systemButton,onClick:()=>e(!0)},i.createElement(jB,null)," View Unentered LMS Matches"),i.createElement("button",{className:ie.systemButton,onClick:l},i.createElement(r0,null)," Refresh Stats")),i.createElement(kB,{open:a,onClose:()=>e(!1)}))}function bO(){const[t,a]=v.useState(null),[e,n]=v.useState([]),[s,l]=v.useState(null),[c,d]=v.useState([]),[p,h]=v.useState(!1),[m,b]=v.useState(null),[x,E]=v.useState("overview"),w=xo();v.useEffect(()=>{const C=new V0(dO);return C.connectUser({id:xx,name:"Admin"},C.devToken(xx)),a(C),()=>C.disconnectUser()},[]),v.useEffect(()=>{if(!t)return;(async()=>{try{const D=await t.queryChannels({});n(D)}catch(D){console.error("Error fetching channels:",D)}})()},[t]),v.useEffect(()=>{if(!s)return;(async()=>{h(!0);try{const D=await s.getMessages();d(D.messages)}catch(D){console.error("Error fetching messages:",D)}h(!1)})()},[s]);const S=(C,D)=>{b({type:C,message:D}),setTimeout(()=>b(null),5e3)};if(!t)return i.createElement("div",null,"Loading admin dashboard...");const _=()=>{switch(x){case"overview":return i.createElement("div",{className:ie.overviewSection},i.createElement("h2",null,"Welcome to Admin Dashboard"),i.createElement("p",null,"Select a section below to manage your league:"),i.createElement("div",{className:ie.quickActions},i.createElement("button",{className:ie.quickActionButton,onClick:()=>E("divisions")},i.createElement(Ni,null)," Create New Division"),i.createElement("button",{className:ie.quickActionButton,onClick:()=>E("players")},i.createElement(Jc,null)," Manage Players"),i.createElement("button",{className:ie.quickActionButton,onClick:()=>E("matches")},i.createElement(lu,null)," Match Management"),i.createElement("button",{className:ie.quickActionButton,onClick:()=>E("system")},i.createElement(gx,null)," System Status")));case"divisions":return i.createElement(fO,{backendUrl:Pe,onComplete:()=>S("success","Division created successfully!")});case"players":return i.createElement(mO,{backendUrl:Pe});case"matches":return i.createElement(gO,{backendUrl:Pe});case"system":return i.createElement(yO,{backendUrl:Pe});case"backup":return i.createElement(rO,{backendUrl:Pe});case"locations":return i.createElement(sO,{backendUrl:Pe});case"payments":return i.createElement(lO,null);case"payment-tracker":return i.createElement(cO,null);case"league-management":return i.createElement(uO,null);default:return null}};return i.createElement("div",{className:ie.adminDashboardRoot},i.createElement("div",{className:ie.adminDashboardNav},i.createElement("div",{className:ie.navLeft},i.createElement("button",{onClick:()=>{w("/"),window.location.reload()}},"🏠 User Dashboard"),i.createElement("button",{onClick:()=>w("/chat")},"💬 Back to Chat")),i.createElement("div",{className:ie.navRight},i.createElement("button",{onClick:()=>{localStorage.clear(),w("/"),window.location.reload()}},"🚪 Logout"))),i.createElement("div",{className:ie.adminDashboardMainColumn},m&&i.createElement("div",{className:`${ie.banner} ${ie[m.type]}`},m.type==="success"?i.createElement(Ar,null):i.createElement(X0,null),m.message),i.createElement("div",{className:ie.sectionNavigation},i.createElement("button",{className:`${ie.sectionButton} ${x==="overview"?ie.active:""}`,onClick:()=>E("overview")},"📊 Overview"),i.createElement("button",{className:`${ie.sectionButton} ${x==="divisions"?ie.active:""}`,onClick:()=>E("divisions")},i.createElement(Ni,null)," Divisions"),i.createElement("button",{className:`${ie.sectionButton} ${x==="players"?ie.active:""}`,onClick:()=>E("players")},i.createElement(oS,null)," Players"),i.createElement("button",{className:`${ie.sectionButton} ${x==="matches"?ie.active:""}`,onClick:()=>E("matches")},i.createElement(lu,null)," Matches"),i.createElement("button",{className:`${ie.sectionButton} ${x==="system"?ie.active:""}`,onClick:()=>E("system")},i.createElement(gx,null)," System"),i.createElement("button",{className:`${ie.sectionButton} ${x==="backup"?ie.active:""}`,onClick:()=>E("backup")},i.createElement(lp,null)," Backup"),i.createElement("button",{className:`${ie.sectionButton} ${x==="locations"?ie.active:""}`,onClick:()=>E("locations")},i.createElement(a0,null)," Locations"),i.createElement("button",{className:`${ie.sectionButton} ${x==="payments"?ie.active:""}`,onClick:()=>E("payments")},"💳 Payments"),i.createElement("button",{className:`${ie.sectionButton} ${x==="payment-tracker"?ie.active:""}`,onClick:()=>E("payment-tracker")},"💰 Payment Tracker"),i.createElement("button",{className:`${ie.sectionButton} ${x==="league-management"?ie.active:""}`,onClick:()=>E("league-management")},"📅 League Management")),i.createElement("div",{className:ie.sectionContent},_())))}const vO="_simplePoolGame_1kwr6_1",xO="_tableContainer_1kwr6_11",wO="_tableCanvas_1kwr6_22",EO="_aimingInstructions_1kwr6_35",SO="_instructions_1kwr6_47",CO="_controls_1kwr6_52",_O="_shootButton_1kwr6_70",IO="_buttonRow_1kwr6_105",DO="_resetAimButton_1kwr6_111",kO="_powerControl_1kwr6_145",AO="_gameInfo_1kwr6_274",MO="_resetButton_1kwr6_291",TO="_pushOutModal_1kwr6_710",NO="_pushOutContent_1kwr6_723",RO="_pushOutButtons_1kwr6_762",LO="_acceptButton_1kwr6_768",PO="_declineButton_1kwr6_769",rn={simplePoolGame:vO,tableContainer:xO,tableCanvas:wO,aimingInstructions:EO,instructions:SO,controls:CO,shootButton:_O,buttonRow:IO,resetAimButton:DO,powerControl:kO,gameInfo:AO,resetButton:MO,pushOutModal:TO,pushOutContent:NO,pushOutButtons:RO,acceptButton:LO,declineButton:PO},bo={BREAK:"break",PLAY:"play"};function to(t){return t===bo.BREAK}function xg(t){return t===bo.PLAY}function BO(t,a){return t===bo.BREAK&&a?bo.PLAY:t}function OO(t,a){return t===bo.BREAK&&a}function wx(t,a){return t===bo.PLAY&&a}const zO="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHllbGxvdyAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGwxTWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZmZlYjNiIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZkZDgzNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNmNTdmMTciLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2U2NTEwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDFIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmOWM0IiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsMVNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsMVNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsMU1haW4pIiBzdHJva2U9IiNlNjUxMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGwxSGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsMVNwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgMSAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzAwMDAwMCI+MTwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGwxU2hhZG93KSIvPg0KPC9zdmc+IA==",UO="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGJsdWUgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsMk1haW4iIGN4PSIzMCUiIGN5PSIzMCUiIHI9IjcwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjOTBjYWY5Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjI1JSIgc3RvcC1jb2xvcj0iIzQyYTVmNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiMyMTk2ZjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNzUlIiBzdG9wLWNvbG9yPSIjMTk3NmQyIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwZDQ3YTEiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICAgIA0KICAgIDwhLS0gSGlnaGxpZ2h0IGZvciBkZXB0aCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGwySGlnaGxpZ2h0IiBjeD0iMjUlIiBjeT0iMjUlIiByPSI0NSUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2JiZGVmYiIgc3RvcC1vcGFjaXR5PSIwLjkiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjOTBjYWY5IiBzdG9wLW9wYWNpdHk9IjAuNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjOTBjYWY5IiBzdG9wLW9wYWNpdHk9IjAiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICAgIA0KICAgIDwhLS0gU3BlY3VsYXIgaGlnaGxpZ2h0IC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDJTcGVjdWxhciIgY3g9IjQwJSIgY3k9IjQwJSIgcj0iMjAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIiBzdG9wLW9wYWNpdHk9IjAuOCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICAgIA0KICAgIDwhLS0gU2hhZG93IGdyYWRpZW50IC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDJTaGFkb3ciIGN4PSI3MCUiIGN5PSI3MCUiIHI9IjMwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIiBzdG9wLW9wYWNpdHk9IjAuMyIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIiBzdG9wLW9wYWNpdHk9IjAiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICA8L2RlZnM+DQogIA0KICA8IS0tIE1haW4gYmFsbCAtLT4NCiAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDJNYWluKSIgc3Ryb2tlPSIjMGQ0N2ExIiBzdHJva2Utd2lkdGg9IjAuNSIvPg0KICANCiAgPCEtLSBQcmltYXJ5IGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iNSIgZmlsbD0idXJsKCNiYWxsMkhpZ2hsaWdodCkiLz4NCiAgDQogIDwhLS0gU3BlY3VsYXIgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxNCIgY3k9IjE0IiByPSIyLjUiIGZpbGw9InVybCgjYmFsbDJTcGVjdWxhcikiLz4NCiAgDQogIDwhLS0gTnVtYmVyIDIgLSBtdWNoIGxhcmdlciBhbmQgbW9yZSB2aXNpYmxlIC0tPg0KICA8dGV4dCB4PSIxNiIgeT0iMjIiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiNmZmZmZmYiPjI8L3RleHQ+DQogIA0KICA8IS0tIFN1YnRsZSBzaGFkb3cgZm9yIGRlcHRoIC0tPg0KICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjE4IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsMlNoYWRvdykiLz4NCjwvc3ZnPiA=",FO="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHJlZCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGwzTWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmNkZDIiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZjQ0MzM2Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2QzMmYyZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNiNzFjMWMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzhlMDAwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDNIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZlYmVlIiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmNkZDIiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmNkZDIiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsM1NwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsM1NoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsM01haW4pIiBzdHJva2U9IiM4ZTAwMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGwzSGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsM1NwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgMyAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iI2ZmZmZmZiI+MzwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGwzU2hhZG93KSIvPg0KPC9zdmc+IA==",WO="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHB1cnBsZSAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw0TWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNlMWJlZTciLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjYWI0N2JjIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzljMjdiMCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiM3YjFmYTIiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzRhMTQ4YyIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDRIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZjNlNWY1IiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNlMWJlZTciIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlMWJlZTciIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNFNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNFNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsNE1haW4pIiBzdHJva2U9IiM0YTE0OGMiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGw0SGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsNFNwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgNCAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iI2ZmZmZmZiI+NDwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw0U2hhZG93KSIvPg0KPC9zdmc+IA==",jO="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIG9yYW5nZSAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw1TWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmUwYjIiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZmY5ODAwIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2Y1N2MwMCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNlZjZjMDAiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2U2NTEwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDVIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmM2UwIiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmUwYjIiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmUwYjIiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNVNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNVNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsNU1haW4pIiBzdHJva2U9IiNlNjUxMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGw1SGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsNVNwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgNSAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzAwMDAwMCI+NTwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw1U2hhZG93KSIvPg0KPC9zdmc+IA==",HO="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGdyZWVuIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDZNYWluIiBjeD0iMzAlIiBjeT0iMzAlIiByPSI3MCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2M4ZTZjOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIyNSUiIHN0b3AtY29sb3I9IiM2NmJiNmEiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjNGNhZjUwIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9Ijc1JSIgc3RvcC1jb2xvcj0iIzM4OGUzYyIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMWI1ZTIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIEhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNkhpZ2hsaWdodCIgY3g9IjI1JSIgY3k9IjI1JSIgcj0iNDUlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNlOGY1ZTgiIHN0b3Atb3BhY2l0eT0iMC45Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2M4ZTZjOSIgc3RvcC1vcGFjaXR5PSIwLjUiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2M4ZTZjOSIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw2U3BlY3VsYXIiIGN4PSI0MCUiIGN5PSI0MCUiIHI9IjIwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNoYWRvdyBncmFkaWVudCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw2U2hhZG93IiBjeD0iNzAlIiBjeT0iNzAlIiByPSIzMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgPC9kZWZzPg0KICANCiAgPCEtLSBNYWluIGJhbGwgLS0+DQogIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw2TWFpbikiIHN0cm9rZT0iIzFiNWUyMCIgc3Ryb2tlLXdpZHRoPSIwLjUiLz4NCiAgDQogIDwhLS0gUHJpbWFyeSBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjUiIGZpbGw9InVybCgjYmFsbDZIaWdobGlnaHQpIi8+DQogIA0KICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMi41IiBmaWxsPSJ1cmwoI2JhbGw2U3BlY3VsYXIpIi8+DQogIA0KICA8IS0tIE51bWJlciA2IC0gbXVjaCBsYXJnZXIgYW5kIG1vcmUgdmlzaWJsZSAtLT4NCiAgPHRleHQgeD0iMTYiIHk9IjIyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjZmZmZmZmIj42PC90ZXh0Pg0KICANCiAgPCEtLSBTdWJ0bGUgc2hhZG93IGZvciBkZXB0aCAtLT4NCiAgPGNpcmNsZSBjeD0iMTgiIGN5PSIxOCIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDZTaGFkb3cpIi8+DQo8L3N2Zz4g",YO="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGJyb3duIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDdNYWluIiBjeD0iMzAlIiBjeT0iMzAlIiByPSI3MCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2Q3Y2NjOCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIyNSUiIHN0b3AtY29sb3I9IiNhMTg4N2YiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjOGQ2ZTYzIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9Ijc1JSIgc3RvcC1jb2xvcj0iIzZkNGM0MSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjM2UyNzIzIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIEhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsN0hpZ2hsaWdodCIgY3g9IjI1JSIgY3k9IjI1JSIgcj0iNDUlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNlZmViZTkiIHN0b3Atb3BhY2l0eT0iMC45Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2Q3Y2NjOCIgc3RvcC1vcGFjaXR5PSIwLjUiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2Q3Y2NjOCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw3U3BlY3VsYXIiIGN4PSI0MCUiIGN5PSI0MCUiIHI9IjIwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNoYWRvdyBncmFkaWVudCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw3U2hhZG93IiBjeD0iNzAlIiBjeT0iNzAlIiByPSIzMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgPC9kZWZzPg0KICANCiAgPCEtLSBNYWluIGJhbGwgLS0+DQogIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw3TWFpbikiIHN0cm9rZT0iIzNlMjcyMyIgc3Ryb2tlLXdpZHRoPSIwLjUiLz4NCiAgDQogIDwhLS0gUHJpbWFyeSBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjUiIGZpbGw9InVybCgjYmFsbDdIaWdobGlnaHQpIi8+DQogIA0KICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMi41IiBmaWxsPSJ1cmwoI2JhbGw3U3BlY3VsYXIpIi8+DQogIA0KICA8IS0tIE51bWJlciA3IC0gbXVjaCBsYXJnZXIgYW5kIG1vcmUgdmlzaWJsZSAtLT4NCiAgPHRleHQgeD0iMTYiIHk9IjIyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjZmZmZmZmIj43PC90ZXh0Pg0KICANCiAgPCEtLSBTdWJ0bGUgc2hhZG93IGZvciBkZXB0aCAtLT4NCiAgPGNpcmNsZSBjeD0iMTgiIGN5PSIxOCIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDdTaGFkb3cpIi8+DQo8L3N2Zz4g",GO="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGJsYWNrIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDhNYWluIiBjeD0iMzAlIiBjeT0iMzAlIiByPSI3MCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzQyNDI0MiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIyNSUiIHN0b3AtY29sb3I9IiMyMTIxMjEiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9Ijc1JSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIEhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsOEhpZ2hsaWdodCIgY3g9IjI1JSIgY3k9IjI1JSIgcj0iNDUlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiM3NTc1NzUiIHN0b3Atb3BhY2l0eT0iMC45Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzQyNDI0MiIgc3RvcC1vcGFjaXR5PSIwLjUiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzQyNDI0MiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw4U3BlY3VsYXIiIGN4PSI0MCUiIGN5PSI0MCUiIHI9IjIwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNoYWRvdyBncmFkaWVudCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw4U2hhZG93IiBjeD0iNzAlIiBjeT0iNzAlIiByPSIzMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgPC9kZWZzPg0KICANCiAgPCEtLSBNYWluIGJhbGwgLS0+DQogIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw4TWFpbikiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIwLjUiLz4NCiAgDQogIDwhLS0gUHJpbWFyeSBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjUiIGZpbGw9InVybCgjYmFsbDhIaWdobGlnaHQpIi8+DQogIA0KICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMi41IiBmaWxsPSJ1cmwoI2JhbGw4U3BlY3VsYXIpIi8+DQogIA0KICA8IS0tIE51bWJlciA4IC0gbXVjaCBsYXJnZXIgYW5kIG1vcmUgdmlzaWJsZSAtLT4NCiAgPHRleHQgeD0iMTYiIHk9IjIyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjZmZmZmZmIj44PC90ZXh0Pg0KICANCiAgPCEtLSBTdWJ0bGUgc2hhZG93IGZvciBkZXB0aCAtLT4NCiAgPGNpcmNsZSBjeD0iMTgiIGN5PSIxOCIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDhTaGFkb3cpIi8+DQo8L3N2Zz4g",$O="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHllbGxvdyAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw5TWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZmZlYjNiIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZkZDgzNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNmNTdmMTciLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2U2NTEwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDlIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmOWM0IiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsOVNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsOVNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBXaGl0ZSBzdHJpcGUgZ3JhZGllbnQgLS0+DQogICAgPGxpbmVhckdyYWRpZW50IGlkPSJiYWxsOVN0cmlwZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmOGY4ZjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgIDwvbGluZWFyR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsOU1haW4pIiBzdHJva2U9IiNlNjUxMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFJlYWxpc3RpYyBjdXJ2ZWQgd2hpdGUgc3RyaXBlIC0tPg0KICA8cGF0aCBkPSJNIDQgOCBBIDggOCAwIDAgMSAxMiA4IEwgMTIgMjQgQSA4IDggMCAwIDEgNCAyNCBaIiBmaWxsPSJ1cmwoI2JhbGw5U3RyaXBlKSIvPg0KICANCiAgPCEtLSBQcmltYXJ5IGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iNSIgZmlsbD0idXJsKCNiYWxsOUhpZ2hsaWdodCkiLz4NCiAgDQogIDwhLS0gU3BlY3VsYXIgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxNCIgY3k9IjE0IiByPSIyLjUiIGZpbGw9InVybCgjYmFsbDlTcGVjdWxhcikiLz4NCiAgDQogIDwhLS0gTnVtYmVyIDkgLSBtdWNoIGxhcmdlciBhbmQgbW9yZSB2aXNpYmxlIC0tPg0KICA8dGV4dCB4PSIxNiIgeT0iMjIiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMwMDAwMDAiPjk8L3RleHQ+DQogIA0KICA8IS0tIFN1YnRsZSBzaGFkb3cgZm9yIGRlcHRoIC0tPg0KICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjE4IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsOVNoYWRvdykiLz4NCjwvc3ZnPiA=",Qt=600,vn=300,tt=15,ot=tt/2,cr=1.3,tl=.9,Oc=30,wg=160,zc=24.5,Eg=270.18,Ex=Qt*.75,Sx=vn/2,Sg=ot*.1,Cx=.7,_x=.45,Ix=.05,Qd=.99,vi=.75,xi=.75,ur=.95,wi=.3,ZO=.8,Dn=(...t)=>{},s0=({onGameEnd:t})=>{const a=v.useRef(null),[e,n]=v.useState({balls:[],cueBall:{x:100,y:150,originalX:100,originalY:150,vx:0,vy:0,visible:!0,isMoving:!1,rotation:0,rotationSpeed:0,spinX:0,spinY:0},isAnimating:!1,currentPlayer:1,gamePhase:bo.BREAK,ballInHand:!1,scratchOccurred:!1}),[s,l]=v.useState(!1),[c,d]=v.useState({x:0,y:0}),[p,h]=v.useState(0),[m,b]=v.useState(.5),[x,E]=v.useState(0),[w,S]=v.useState(0),[_,C]=v.useState(!0),[D,I]=v.useState(null),[A,T]=v.useState(null),[F,J]=v.useState(null),[H,Z]=v.useState(!1),[K,X]=v.useState(!1),[W,O]=v.useState(0),[B,U]=v.useState(!1),[M,z]=v.useState(null),[G,q]=v.useState(null),[R,j]=v.useState(!1),[ne,ae]=v.useState(!1),[se,V]=v.useState(!1),[pe,Ie]=v.useState(!1),[fe,Fe]=v.useState(!1),[Ve,He]=v.useState(!1),[Qe,ut]=v.useState(null),[Pt,xt]=v.useState(!1),[Hn,Kt]=v.useState({1:0,2:0}),[Yn,Zn]=v.useState(null),[pt,de]=v.useState(null),[nt,Ye]=v.useState(!1),[Dt,zt]=v.useState(null),[$,Re]=v.useState(!1),[at,Ge]=v.useState(!1),[Vt,Ct]=v.useState(!1),[Bn,mn]=v.useState(!1),[rt,On]=v.useState(null),[zn,wn]=v.useState(0),[sn,Ia]=v.useState([]),[Yt,ya]=v.useState(!1),Un=v.useRef(null),br={cue:Uw,1:zO,2:UO,3:FO,4:WO,5:jO,6:HO,7:YO,8:GO,9:$O,10:Cp},na=v.useRef({}),Ws=v.useRef(null),vr=v.useRef(null),qn=[{x:30,y:24.5,id:"top-left"},{x:570.77,y:24.5,id:"top-right"},{x:30,y:270.18,id:"bottom-left"},{x:570.77,y:270.18,id:"bottom-right"},{x:300.385,y:24.5,id:"top-center"},{x:300.385,y:270.18,id:"bottom-center"}],is=v.useCallback(ee=>{if(!ne)return;const L=a.current.getBoundingClientRect(),he=L.width/Qt,ye=(ee.clientX-L.left)/he,Ee=(ee.clientY-L.top)/he,Ae=e.balls.find(Le=>Le.visible&&!Le.pocketed&&Math.sqrt((Le.x-ye)**2+(Le.y-Ee)**2)<ot*1.5);if(Ae){z(Ae.id);return}const ke=qn.find(Le=>Math.sqrt((Le.x-ye)**2+(Le.y-Ee)**2)<60);if(ke){q(ke.id);return}},[ne,e.balls,qn]),Ri=v.useCallback((ee,L)=>{const Le=[{x:30,y:24.5,id:"top-left"},{x:570.77,y:24.5,id:"top-right"},{x:30,y:270.18,id:"bottom-left"},{x:570.77,y:270.18,id:"bottom-right"},{x:300.385,y:24.5,id:"top-center"},{x:300.385,y:270.18,id:"bottom-center"}];let st=null,We=1/0;return Le.forEach(dt=>{const Ze=Math.hypot(ee-dt.x,L-dt.y);Ze<We&&(We=Ze,st=dt)}),st?st.id:null},[]),ua=v.useCallback(ee=>{const ke=[{x:30,y:24.5,margin:tt*cr,type:"corner"},{x:570.77,y:24.5,margin:tt*cr,type:"corner"},{x:30,y:270.18,margin:tt*cr,type:"corner"},{x:570.77,y:270.18,margin:tt*cr,type:"corner"},{x:300.385,y:24.5,margin:tt*tl,type:"side"},{x:300.385,y:270.18,margin:tt*tl,type:"side"}],Le=ee.x,st=ee.y,We=ee.vx??0,dt=ee.vy??0,Ze=Math.hypot(We,dt);return ke.some(Te=>{const me=Te.x-Le,_e=Te.y-st,Ne=Math.hypot(me,_e);if(Ne>=Te.margin+Sg)return!1;if(Ze>0){const Ue=(We*me+dt*_e)/(Ze*(Ne||1)),_t=Te.type==="side"?Cx:_x,Tt=(We*me+dt*_e)/(Ne||1);if(Ue<_t||Tt<Ix)return!1}return!0})},[]),hn=v.useCallback((ee,L)=>ee>=Oc&&ee<=wg&&L>=zc&&L<=Eg,[]);v.useCallback(()=>{n(ee=>({...ee,scratchOccurred:!0,ballInHand:!0,currentPlayer:ee.currentPlayer===1?2:1,cueBall:{...ee.cueBall,x:100,y:150,vx:0,vy:0,visible:!0,isMoving:!1,rotation:0,rotationSpeed:0}}))},[]);const En=v.useCallback(()=>{const ee=e.balls.filter(he=>he.visible&&!he.pocketed);if(Dn("Visible balls on table:",ee.map(he=>he.id).sort((he,ye)=>he-ye)),ee.length===0)return null;const L=ee.reduce((he,ye)=>ye.id<he.id?ye:he);return Dn("Lowest numbered ball:",L.id),L},[e.balls]),ba=v.useCallback(()=>{if(se)return null;const ee=Dt||En();let L=null;if(e.cueBall.visible||(L="scratch"),e.gamePhase==="break"){pt&&pt!==1&&(L="break_wrong_ball_first");const he=e.balls.filter(Ee=>Ee.pocketed&&!Ee.wasPocketedBeforeShot),ye=zn;he.length===0&&ye<4&&(L="break_insufficient_cushions")}return!L&&pt&&ee&&pt!==ee.id&&(Dn("Wrong ball first foul - Hit:",pt,"Lowest:",ee.id),Dn("Visible balls on table:",e.balls.filter(he=>he.visible&&!he.pocketed).map(he=>he.id).sort((he,ye)=>he-ye)),L="wrong_ball_first"),!L&&!at&&!se&&e.gamePhase!=="break"&&(L="no_contact"),!L&&at&&!nt&&e.balls.filter(ye=>ye.pocketed&&!ye.wasPocketedBeforeShot).length===0&&(L="no_rail_contact"),Dn("Current lowest ball:",ee?ee.id:"none"),L},[se,pt,nt,at,En,e.balls,Dt,e.cueBall.visible,e.gamePhase,zn]),js=v.useCallback(()=>{if(e.gamePhase==="break"||se)return[];const ee=e.balls.filter(he=>he.pocketed&&!he.wasPocketedBeforeShot);if(ee.length===0)return[];const L=[];return ee.forEach(he=>{if(he.id===M)he.pocketedPocket!==G&&(Dn("Illegally pocketed ball:",he.id,"- called ball went in wrong pocket"),L.push(he));else{const ye=ee.find(Ee=>Ee.id===M);(!ye||ye.pocketedPocket!==G)&&(Dn("Illegally pocketed ball:",he.id,"- not called ball and called ball not legally pocketed"),L.push(he))}}),L},[e.gamePhase,se,M,G,e.balls]),os=v.useCallback(ee=>{const L=rt||e.currentPlayer;window.dispatchEvent(new CustomEvent("gameFoul",{detail:{foulType:ee,player:L}})),ee==="scratch"?window.dispatchEvent(new CustomEvent("scratchFoul",{detail:{player:L}})):ee==="wrong_ball_first"?window.dispatchEvent(new CustomEvent("wrongBallFoul",{detail:{player:L}})):ee==="no_rail_contact"&&window.dispatchEvent(new CustomEvent("noRailFoul",{detail:{player:L}})),window.dispatchEvent(new CustomEvent("ballInHand",{detail:{player:L}})),Kt(he=>{const ye={...he,[L]:he[L]+1};return ye[L]>=3&&(window.dispatchEvent(new CustomEvent("threeFoul",{detail:{player:L}})),alert(`Player ${L} loses due to 3 consecutive fouls!`)),ye}),n(he=>({...he,ballInHand:!0,currentPlayer:he.currentPlayer===1?2:1,scratchOccurred:ee==="scratch"})),ee==="scratch"&&n(he=>({...he,cueBall:{...he.cueBall,visible:!0,x:100,y:150,vx:0,vy:0}})),Zn(ee)},[e.currentPlayer,rt]),xr=v.useCallback((ee,L)=>{const he=e.cueBall;return Math.hypot(ee-he.x,L-he.y)<=ot},[e.cueBall]),ls=v.useCallback((ee,L)=>{(e.ballInHand||e.gamePhase==="break")&&xr(ee,L)&&(l(!0),d({x:ee-e.cueBall.x,y:L-e.cueBall.y}))},[e.ballInHand,e.gamePhase,e.cueBall,xr]),wr=v.useCallback((ee,L)=>{if(s){const he=ee-c.x,ye=L-c.y;let Ee,Ae;e.gamePhase==="break"?(Ee=Math.max(Oc+ot,Math.min(wg-ot,he)),Ae=Math.max(zc+ot,Math.min(Eg-ot,ye))):(Ee=Math.max(30+ot,Math.min(570.77-ot,he)),Ae=Math.max(24.5+ot,Math.min(270.18-ot,ye))),n(ke=>({...ke,cueBall:{...ke.cueBall,x:Ee,y:Ae}}))}},[s,c,e.gamePhase]),Hs=v.useCallback(()=>{s&&l(!1)},[s]);v.useCallback((ee,L)=>{hn(ee,L)&&n(he=>({...he,cueBall:{...he.cueBall,x:ee,y:L,vx:0,vy:0,visible:!0,isMoving:!1},ballInHand:!1}))},[hn]),v.useCallback((ee,L)=>{let he=null,ye=1/0;return qn.forEach(Ee=>{const Ae=Math.hypot(ee-Ee.x,L-Ee.y);Ae<ye&&(ye=Ae,he=Ee)}),he},[]);const qa=v.useCallback((ee,L,he,ye)=>{const Ee=ee-he,Ae=L-ye,ke=Math.sqrt(Ee*Ee+Ae*Ae);if(ke<ot*2)return null;const Le=ee-Ee/ke*(ot*2),st=L-Ae/ke*(ot*2);return{x:Le,y:st}},[]);function Rr(ee,L){return ee>=15&&ee<=30&&L>=vn-75&&L<=vn-60}function Er(ee,L,he,ye,Ee){wx(Ee,ye)&&(ee.fillStyle="rgba(255, 215, 0, 0.2)",ee.fillRect(10,L-80,200,25),ee.strokeStyle="rgba(255, 215, 0, 0.5)",ee.lineWidth=1,ee.strokeRect(10,L-80,200,25),ee.fillStyle="rgba(255, 215, 0, 0.9)",ee.font="12px Arial",ee.textAlign="left",ee.fillText("Push Out Available",15,L-65),ee.fillStyle=he?"rgba(255, 215, 0, 0.9)":"rgba(255, 255, 255, 0.3)",ee.fillRect(15,L-75,15,15),ee.strokeStyle="rgba(255, 215, 0, 0.8)",ee.lineWidth=2,ee.strokeRect(15,L-75,15,15),he&&(ee.fillStyle="rgba(255, 215, 0, 0.9)",ee.font="bold 16px Arial",ee.textAlign="center",ee.fillText("✓",22,L-65)))}function Da(ee,L){ee.setLineDash([]),ee.beginPath(),ee.moveTo(L[0].x,L[0].y);for(let he=1;he<L.length;he++){const ye=L[he];ee.lineTo(ye.x,ye.y)}ee.stroke()}function on(ee){let L="rgba(255, 255, 255, 0.8)";H?L="rgba(0, 255, 0, 0.95)":K&&(L="rgba(255, 255, 0, 0.9)"),Math.abs(x)>.1&&(x>0?L="rgba(76, 175, 80, 0.9)":L="rgba(244, 67, 54, 0.9)"),ee.strokeStyle=L,ee.lineWidth=H?4:K?2:3,ee.setLineDash([]),ee.globalAlpha=.9}function cs(ee){const L=Qt*.3,he=Qt*.5*ee;return L+he}function us(ee,L){let he=ee-L;for(;he>Math.PI;)he-=Math.PI*2;for(;he<-Math.PI;)he+=Math.PI*2;return he}const Qa=v.useCallback((ee,L)=>{const Le=[{x:30,y:24.5,id:"top-left"},{x:570.77,y:24.5,id:"top-right"},{x:30,y:270.18,id:"bottom-left"},{x:570.77,y:270.18,id:"bottom-right"},{x:300.385,y:24.5,id:"top-center"},{x:300.385,y:270.18,id:"bottom-center"}];let st=null,We=1/0;if(Le.forEach(dt=>{const Ze=Math.hypot(ee-dt.x,L-dt.y);Ze<We&&(We=Ze,st=dt)}),st&&We<80){const dt=Math.max(0,(80-We)/80),Ze=ee+(st.x-ee)*dt*.3,Te=L+(st.y-L)*dt*.3;return{x:Ze,y:Te,assisted:!0}}return{x:ee,y:L,assisted:!1}},[]),va=v.useCallback((ee,L,he=null,ye={})=>{const{ignoreCuePocket:Ee=!0}=ye,Ae={},ke=.99,Le=16,st=30.77,We=570.77,dt=24.5,Ze=270.18,Te={1:"#ffff00",2:"#0000ff",3:"#ff0000",4:"#800080",5:"#ffa500",6:"#008000",7:"#8b4513",8:"#000000",9:"#ffff00",10:"#ff0000"};return(()=>{const _e=new Map;e.balls.forEach(Ue=>{Ue.visible&&!Ue.pocketed&&_e.set(Ue.id,{id:Ue.id,x:Ue.x,y:Ue.y,vx:0,vy:0,visible:!0,isMoving:!1,trajectory:[{x:Ue.x,y:Ue.y}]})});const Ne=he||e.cueBall;_e.set("cue",{id:"cue",x:Ne.x,y:Ne.y,vx:ee,vy:L,visible:!0,isMoving:!0,trajectory:[{x:Ne.x,y:Ne.y}]});for(let Ue=0;Ue<300;Ue++){const _t=Array.from(_e.values()).filter(It=>It.visible);for(let It=0;It<Le;It++)_t.forEach(ze=>{if(Math.abs(ze.vx)<.03&&Math.abs(ze.vy)<.03){ze.vx=0,ze.vy=0;return}ze.vx*=Math.pow(ke,1/Le),ze.vy*=Math.pow(ke,1/Le);let Bt=ze.x+ze.vx/Le,Jt=ze.y+ze.vy/Le,Sn=!1;Bt<st+ot?(ze.x=st+ot,ze.vx=Math.abs(ze.vx)*.85,Sn=!0):Bt>We-ot?(ze.x=We-ot,ze.vx=-Math.abs(ze.vx)*.8,Sn=!0):ze.x=Bt,Jt<dt+ot?(ze.y=dt+ot,ze.vy=Math.abs(ze.vy)*.85,Sn=!0):Jt>Ze-ot?(ze.y=Ze-ot,ze.vy=-Math.abs(ze.vy)*.8,Sn=!0):ze.y=Jt;let xa=!1;const gn=(st+We)/2,ln=[{x:st,y:dt,margin:tt*cr},{x:We,y:dt,margin:tt*cr},{x:st,y:Ze,margin:tt*cr},{x:We,y:Ze,margin:tt*cr},{x:gn,y:dt,margin:tt*tl},{x:gn,y:Ze,margin:tt*tl}],Qn=ze.x,ra=ze.y,Vn=ze.vx??0,Xa=ze.vy??0,wa=Math.hypot(Vn,Xa);let Xn=!1;if(Ee||(Xn=ln.some(Se=>{const La=Se.x-Qn,Pa=Se.y-ra,yn=Math.hypot(La,Pa),Ka=Se.margin+Sg;if(yn>=Ka)return!1;if(wa>0){const Zs=(Vn*La+Xa*Pa)/(wa*(yn||1)),fs=Se.x===gn?Cx:_x,Dl=(Vn*La+Xa*Pa)/(yn||1);if(Zs<fs||Dl<Ix)return!1}return!0})),Xn&&!(Ee&&ze.id==="cue")&&(xa=!0),!xa&&ze.id!=="cue"){const Se=Qa(ze.x,ze.y);if(Se.assisted){const La=Se.x-ze.x,Pa=Se.y-ze.y;Math.sqrt(La*La+Pa*Pa)<5&&(xa=!0)}}if(xa){ze.visible=!1,ze.trajectory.push({x:ze.x,y:ze.y,pocketed:!0});return}ze.isMoving&&Math.abs(ze.vx)<.03&&Math.abs(ze.vy)<.03&&(ze.vx=0,ze.vy=0,ze.isMoving=!1),ze.trajectory.push({x:ze.x,y:ze.y,bounced:Sn})});const Tt=_e.get("cue");Tt&&Tt.visible&&_e.forEach((It,ze)=>{if(ze!=="cue"&&It.visible){const Bt=It.x-Tt.x,Jt=It.y-Tt.y,Sn=Math.sqrt(Bt*Bt+Jt*Jt);if(Sn>0&&Sn<tt+.5){const xa=tt-Sn+.01,gn=Bt/Sn,ln=Jt/Sn,Qn=Math.max(xa/2,.1);Tt.x-=gn*Qn,Tt.y-=ln*Qn,It.x+=gn*Qn,It.y+=ln*Qn;const ra=Tt.vx-It.vx,Vn=Tt.vy-It.vy,wa=-(ra*gn+Vn*ln)||.01;Tt.vx+=wa*gn,Tt.vy+=wa*ln,It.vx-=wa*gn,It.vy-=wa*ln,Tt.trajectory.length>0&&(Tt.trajectory[Tt.trajectory.length-1].collision=!0),It.trajectory.length>0&&(It.trajectory[It.trajectory.length-1].collision=!0)}}});const aa=Array.from(_e.values()).filter(It=>It.id!=="cue"&&It.visible);for(let It=0;It<aa.length;It++)for(let ze=It+1;ze<aa.length;ze++){const Bt=aa[It],Jt=aa[ze],Sn=Jt.x-Bt.x,xa=Jt.y-Bt.y,gn=Math.sqrt(Sn*Sn+xa*xa);if(gn>0&&gn<tt){const ln=tt-gn+.01,Qn=Sn/gn,ra=xa/gn;Bt.x-=Qn*(ln/2),Bt.y-=ra*(ln/2),Jt.x+=Qn*(ln/2),Jt.y+=ra*(ln/2);const Vn=Bt.vx-Jt.vx,Xa=Bt.vy-Jt.vy,Xn=-(Vn*Qn+Xa*ra)||.01;Bt.vx+=Xn*Qn,Bt.vy+=Xn*ra,Jt.vx-=Xn*Qn,Jt.vy-=Xn*ra,Bt.isMoving=!0,Jt.isMoving=!0,Bt.trajectory.length>0&&(Bt.trajectory[Bt.trajectory.length-1].collision=!0),Jt.trajectory.length>0&&(Jt.trajectory[Jt.trajectory.length-1].collision=!0)}}if(_t.every(It=>Math.abs(It.vx)<.028&&Math.abs(It.vy)<.028))break}_e.forEach((Ue,_t)=>{Ue.trajectory.length>1&&(Ae[_t]={points:Ue.trajectory,color:Te[_t]||"#ffffff"})})})(),Ae},[e.balls,e.cueBall,ua]),Ys=v.useCallback((ee,L)=>{const he=L.x-ee.x,ye=L.y-ee.y,Ee=Math.sqrt(he*he+ye*ye);if(Ee===0||Ee>=tt)return!1;const Ae=tt-Ee+.01,ke=he/Ee,Le=ye/Ee;ee.x-=ke*(Ae/2),ee.y-=Le*(Ae/2),L.x+=ke*(Ae/2),L.y+=Le*(Ae/2);const st=ee.vx-L.vx,We=ee.vy-L.vy,Ze=-(st*ke+We*Le)||.01;ee.vx+=Ze*ke,ee.vy+=Ze*Le,L.vx-=Ze*ke,L.vy-=Ze*Le;const Te=ZO,me=ee.spinX||0,_e=ee.spinY||0,Ne=L.spinX||0,Ue=L.spinY||0,_t=(me-Ne)*Te*ke,Tt=(_e-Ue)*Te*Le;return ee.spinX=(me-_t)*.9,ee.spinY=(_e-Tt)*.9,L.spinX=(Ne+_t)*.9,L.spinY=(Ue+Tt)*.9,ee.isMoving=!0,L.isMoving=!0,!0},[]),Lr=v.useCallback(()=>{const ee=[],L=Qt*.75,he=vn/2;function ye(){return(Math.random()-.5)*1.5}const Ee=[{x:L,y:he},{x:L+tt*.95,y:he-tt*.48},{x:L+tt*.95,y:he+tt*.48},{x:L+2*tt*.95,y:he-tt*.95},{x:L+2*tt*.95,y:he},{x:L+2*tt*.95,y:he+tt*.95},{x:L+3*tt*.95,y:he-tt*1.43},{x:L+3*tt*.95,y:he-tt*.48},{x:L+3*tt*.95,y:he+tt*.48},{x:L+3*tt*.95,y:he+tt*1.43}],Ae=[{x:L+3*tt*.95,y:he-tt*1.43},{x:L+3*tt*.95,y:he+tt*1.43}],Le=[2,3].sort(()=>Math.random()-.5),We=[4,5,6,7,8,9].sort(()=>Math.random()-.5);return[1,10,...Le,...We].forEach((Ze,Te)=>{let me;if(Te===0)me=Ee[0];else if(Te===1)me=Ee[4];else if(Te===2||Te===3){const _e=Te-2;me=Ae[_e]}else me=[Ee[1],Ee[2],Ee[3],Ee[5],Ee[7],Ee[8]][Te-4];me&&ee.push({id:Ze,x:me.x+ye(),y:me.y+ye(),vx:0,vy:0,visible:!0,pocketed:!1,wasPocketedBeforeShot:!1,isMoving:!1,rotation:0,rotationSpeed:0,spinX:0,spinY:0})}),ee},[]),Gs=v.useCallback(()=>{function Ae(){let ke=[];for(let Te=0;Te<16;Te++){if(e.cueBall.visible){let me=e.cueBall.x+e.cueBall.vx/16,_e=e.cueBall.y+e.cueBall.vy/16;me<30+ot?(e.cueBall.x=30+ot,e.cueBall.vx=Math.abs(e.cueBall.vx)*vi*xi,e.cueBall.spinY*=ur,at&&Ye(!0)):me>570.77-ot?(e.cueBall.x=570.77-ot,e.cueBall.vx=-Math.abs(e.cueBall.vx)*vi*xi,e.cueBall.spinY*=ur,at&&Ye(!0)):e.cueBall.x=me,_e<24.5+ot?(e.cueBall.y=24.5+ot,e.cueBall.vy=Math.abs(e.cueBall.vy)*vi*xi,e.cueBall.spinX*=ur,at&&Ye(!0)):_e>270.18-ot?(e.cueBall.y=270.18-ot,e.cueBall.vy=-Math.abs(e.cueBall.vy)*vi*xi,e.cueBall.spinX*=ur,at&&Ye(!0)):e.cueBall.y=_e,e.cueBall.vx*=Math.pow(Qd,1/16),e.cueBall.vy*=Math.pow(Qd,1/16),e.cueBall.vx+=e.cueBall.spinX*wi,e.cueBall.vy+=e.cueBall.spinY*wi,e.cueBall.spinX*=Math.pow(ur,1/16),e.cueBall.spinY*=Math.pow(ur,1/16);const Ne=Math.sqrt(e.cueBall.vx*e.cueBall.vx+e.cueBall.vy*e.cueBall.vy);Ne>.01?(e.cueBall.rotationSpeed=Ne/ot,Math.abs(e.cueBall.vx)>Math.abs(e.cueBall.vy)?e.cueBall.rotation+=e.cueBall.rotationSpeed/16*Math.sign(e.cueBall.vx):e.cueBall.rotation+=e.cueBall.rotationSpeed/16*Math.sign(e.cueBall.vy)):e.cueBall.rotationSpeed=0,ua(e.cueBall)&&(e.cueBall.isMoving=!1,e.cueBall.visible=!1),e.cueBall.isMoving&&Math.abs(e.cueBall.vx)<.03&&Math.abs(e.cueBall.vy)<.03&&(e.cueBall.vx=0,e.cueBall.vy=0,e.cueBall.isMoving=!1)}e.balls.forEach(me=>{if(!me.visible)return;let _e=me.x+me.vx/16,Ne=me.y+me.vy/16;_e<30+ot?(me.x=30+ot,me.vx=Math.abs(me.vx)*vi*xi,me.spinY*=ur,at&&(Dn("Rail contact detected for ball:",me.id),Ye(!0)),e.gamePhase==="break"&&me.id!=="cue"&&wn(_t=>_t+1)):_e>570.77-ot?(me.x=570.77-ot,me.vx=-Math.abs(me.vx)*vi*xi,me.spinY*=ur,at&&Ye(!0),e.gamePhase==="break"&&me.id!=="cue"&&wn(_t=>_t+1)):me.x=_e,Ne<24.5+ot?(me.y=24.5+ot,me.vy=Math.abs(me.vy)*vi*xi,me.spinX*=ur,at&&Ye(!0),e.gamePhase==="break"&&me.id!=="cue"&&wn(_t=>_t+1)):Ne>270.18-ot?(me.y=270.18-ot,me.vy=-Math.abs(me.vy)*vi*xi,me.spinX*=ur,at&&Ye(!0),e.gamePhase==="break"&&me.id!=="cue"&&wn(_t=>_t+1)):me.y=Ne,me.vx*=Math.pow(Qd,1/16),me.vy*=Math.pow(Qd,1/16),me.vx+=me.spinX*wi,me.vy+=me.spinY*wi,me.spinX*=Math.pow(ur,1/16),me.spinY*=Math.pow(ur,1/16);const Ue=Math.sqrt(me.vx*me.vx+me.vy*me.vy);Ue>.01?(me.rotationSpeed=Ue/ot,Math.abs(me.vx)>Math.abs(me.vy)?me.rotation+=me.rotationSpeed/16*Math.sign(me.vx):me.rotation+=me.rotationSpeed/16*Math.sign(me.vy)):me.rotationSpeed=0,ua(me)&&(me.isMoving=!1,me.visible=!1,me.pocketed=!0,me.pocketedPocket=Ri(me.x,me.y),ke.includes(me.id)||ke.push(me.id)),me.isMoving&&Math.abs(me.vx)<.03&&Math.abs(me.vy)<.03&&(me.vx=0,me.vy=0,me.isMoving=!1)}),e.cueBall.visible&&e.balls.forEach(me=>{if(me.visible){const _e=Ys(e.cueBall,me);!Vt&&_e&&e.cueBall.isMoving&&(Dn("First contact made with ball:",me.id),de(me.id),Ge(!0),Ct(!0))}}),e.balls.forEach((me,_e)=>{me.visible&&e.balls.slice(_e+1).forEach(Ne=>{Ne.visible&&Ys(me,Ne)})})}const Le=e.balls.every(Te=>!Te.isMoving)&&!e.cueBall.isMoving;if(Le&&Qe&&(xt(!0),ut(null)),Le&&se&&!$&&!Bn&&rt===e.currentPlayer&&(Dn("currentPlayer:",e.currentPlayer),Dn("cueBall visible:",e.cueBall.visible),e.cueBall.visible?(mn(!0),V(!1)):(Re(!0),mn(!0),V(!1),os("scratch"))),Le&&!se&&e.gamePhase!=="break"&&!$&&!Bn&&rt===e.currentPlayer&&rt!==null&&!Ve){Dn("currentPlayer:",e.currentPlayer),Dn("gamePhase:",e.gamePhase),Dn("Checking for fouls - Current player:",e.currentPlayer,"First ball hit:",pt);const Te=ba();if(Te)Dn("Foul detected:",Te,"by player:",e.currentPlayer),Re(!0),mn(!0),z(null),q(null),V(!1),os(Te);else{if(!Ve){const _e=js();if(_e.length>0){Dn("Illegally pocketed balls detected:",_e.map(Ne=>Ne.id)),Ia(_e),ya(!0),mn(!0),z(null),q(null);return}}mn(!0),z(null),q(null),V(!1),Kt(_e=>{const Ne={..._e,[rt]:0};return Dn(`Resetting fouls for player ${rt} only. Player 1 fouls: ${Ne[1]}, Player 2 fouls: ${Ne[2]}`),Ne}),e.balls.filter(_e=>_e.pocketed&&!_e.wasPocketedBeforeShot).length===0&&n(_e=>({..._e,currentPlayer:_e.currentPlayer===1?2:1}))}}if(Le&&Ve&&!$&&!Bn){mn(!0),He(!1);const Te=ba();Te?(Dn("Break foul detected:",Te,"by player:",e.currentPlayer),Re(!0),os(Te)):e.balls.filter(_e=>_e.pocketed&&!_e.wasPocketedBeforeShot).length===0&&n(_e=>({..._e,currentPlayer:_e.currentPlayer===1?2:1}))}const st=e.balls.find(Te=>Te.id===10&&Te.pocketed),We=e.balls.filter(Te=>Te.visible&&!Te.pocketed),dt=We.length>0?We.reduce((Te,me)=>me.id<Te.id?me:Te):null;if(Le&&dt&&dt.id===10&&window.dispatchEvent(new CustomEvent("tenBallTarget",{detail:{player:e.currentPlayer}})),Le&&dt&&xg(e.gamePhase)&&window.dispatchEvent(new CustomEvent("lowestBall",{detail:{player:e.currentPlayer,lowestBall:dt.id}})),Le&&xg(e.gamePhase)&&Math.random()<.1&&window.dispatchEvent(new CustomEvent("safetyOpportunity",{detail:{player:e.currentPlayer}})),Le&&st){const Te=M===10,me=G&&st.pocketedPocket===G;if(Te&&me){const _e=rt;t&&t(_e),window.dispatchEvent(new CustomEvent("gameWinning",{detail:{player:_e}})),setTimeout(()=>{n(Ne=>({...Ne,balls:Lr(),cueBall:{x:100,y:150,originalX:100,originalY:150,vx:0,vy:0,visible:!0,isMoving:!1},isAnimating:!1,gamePhase:"break",ballInHand:!1,scratchOccurred:!1})),setIsDragging(!1),C(!0),Kt({1:0,2:0}),n(Ne=>({...Ne,_foulReset:Date.now()})),window.tipManager&&window.tipManager.resetTips&&window.tipManager.resetTips()},2e3)}else{n(Ne=>({...Ne,balls:Ne.balls.map(Ue=>Ue.id===10?{...Ue,pocketed:!1,visible:!0,x:Ex,y:Sx,vx:0,vy:0,isMoving:!1}:Ue)}));const _e=e.balls.find(Ne=>Ne.id===M&&Ne.pocketed&&!Ne.wasPocketedBeforeShot);_e&&_e.pocketedPocket===G||n(Ne=>({...Ne,currentPlayer:Ne.currentPlayer===1?2:1})),z(null),q(null)}}const Ze=to(e.gamePhase);Dn("Step function - wasBreakPhase:",Ze,"allStopped:",Le,"gamePhase:",e.gamePhase),n(Te=>({...Te,isAnimating:!Le,gamePhase:BO(Te.gamePhase,Le)})),OO(e.gamePhase,Le)&&(Ie(!0),Fe(!1),setTimeout(()=>{window.dispatchEvent(new CustomEvent("pushOutStrategy",{detail:{player:e.currentPlayer}}))},500),setTimeout(()=>{window.dispatchEvent(new CustomEvent("pushOutAvailable",{detail:{player:e.currentPlayer}}))},1e3)),Le||(Un.current=requestAnimationFrame(Ae))}Un.current=requestAnimationFrame(Ae)},[e,ua,Ys,pt,se,ba,os,Qe,$,rt,Bn,js,Ve]),Li=v.useCallback(()=>{if(e.isAnimating||!H)return;if(!to(e.gamePhase)){if(!se){if(!M&&!G){ae(!0),Z(!1);return}}}e.cueBall;const ee=m*18,L=w*Math.PI/180,he=Math.cos(L)*x*wi*ee*.05,ye=Math.sin(L)*x*wi*ee*.05;de(null),Ye(!1),Zn(null),Re(!1),Ge(!1),Ct(!1),mn(!1),On(e.currentPlayer),wn(0);const Ee=e.balls.filter(ke=>ke.visible&&!ke.pocketed),Ae=Ee.length>0?Ee.reduce((ke,Le)=>Le.id<ke.id?Le:ke):null;zt(Ae),n(ke=>({...ke,balls:ke.balls.map(Le=>({...Le,wasPocketedBeforeShot:Le.pocketed}))})),n(ke=>({...ke,cueBall:{...ke.cueBall,vx:Math.cos(p)*ee,vy:Math.sin(p)*ee,isMoving:!0,spinX:he,spinY:ye},isAnimating:!0,ballInHand:!1,gamePhase:ke.gamePhase})),to(e.gamePhase)&&setTimeout(()=>{window.dispatchEvent(new CustomEvent("callPocket",{detail:{player:e.currentPlayer}}))},500),to(e.gamePhase)&&He(!0),Z(!1),C(!0),I(null),T(null),J(null),se&&ut({ballsPocketed:e.balls.filter(ke=>ke.pocketed).length,cueBallPosition:{x:e.cueBall.x,y:e.cueBall.y},player:e.currentPlayer}),ae(!1),pe&&!fe&&e.gamePhase!=="break"&&(Fe(!0),Ie(!1)),se&&(Ie(!1),Fe(!0))},[e.isAnimating,H,e.cueBall,m,p,se,M,G,e.gamePhase,pe,fe]),ds=v.useCallback(ee=>{if(e.isAnimating)return;if(ee.button===2){X(!0);return}const L=a.current.getBoundingClientRect(),he=L.width/Qt,ye=(ee.clientX-L.left)/he,Ee=(ee.clientY-L.top)/he;if(ye>=0&&ye<=Qt&&Ee>=0&&Ee<=vn){if(ne){if(xg(e.gamePhase)&&pe&&Rr(ye,Ee)){V(!se);return}if(M&&G||se){if(ye>=Qt/2-80&&ye<=Qt/2-10&&Ee>=vn-30&&Ee<=vn-5){ae(!1),Z(!0);return}if(ye>=Qt/2+10&&ye<=Qt/2+80&&Ee>=vn-30&&Ee<=vn-5){ae(!1),z(null),q(null),V(!1),Z(!0);return}}const Le=e.balls.find(We=>We.visible&&!We.pocketed&&Math.sqrt((ye-We.x)**2+(Ee-We.y)**2)<ot),st=qn.find(We=>Math.sqrt((ye-We.x)**2+(Ee-We.y)**2)<50);if(Le||st){is(ee);return}else{ae(!1),z(null),q(null),Z(!1);return}}if((e.ballInHand||to(e.gamePhase))&&xr(ye,Ee)){ls(ye,Ee);return}const ke=!H;Z(ke),ke&&!to(e.gamePhase)&&!se&&ae(!0),ke||(ae(!1),z(null),q(null))}},[e.isAnimating,e.ballInHand,e.gamePhase,xr,ls,H,ne,M,G,is,pe,se]),Pi=v.useCallback(ee=>{s&&Hs(),ee.button===2&&(X(!1),!H&&!e.isAnimating&&(Z(!0),e.gamePhase!=="break"&&!se&&ae(!0)))},[s,Hs,H,e.isAnimating,e.gamePhase,se]),Va=v.useCallback(ee=>{if(e.isAnimating)return;const L=a.current.getBoundingClientRect(),he=L.width/Qt,ye=(ee.clientX-L.left)/he,Ee=(ee.clientY-L.top)/he;if(s){wr(ye,Ee);return}if(H&&!(ne&&(B||ee.altKey)))return;const Ae={x:e.cueBall.x,y:e.cueBall.y},ke={x:Math.max(30,Math.min(570,Ae.x)),y:Math.max(24,Math.min(270,Ae.y))},Le=Math.atan2(Ee-ke.y,ye-ke.x);let st=!1,We=null,dt=1/0;e.balls.forEach(_e=>{if(_e.visible&&!_e.pocketed){const Ne=_e.x-ke.x,Ue=_e.y-ke.y,_t=Math.sqrt(Ne*Ne+Ue*Ue),Tt=Math.atan2(Ue,Ne);Math.abs(Le-Tt)<.25&&_t<dt&&(dt=_t,We=_e,st=!0)}});let Ze=Le;if(K){let _e=2e-5;st&&We&&(_e=1e-5*(Math.sqrt((We.x-ke.x)**2+(We.y-ke.y)**2)/100));const Ne=ke.x,Ue=ke.y,_t=(ye-Ne)*_e,Tt=(Ee-Ue)*_e;Ze=Math.atan2(Tt,_t)}else if(st){const Ne=ke.x,Ue=ke.y,_t=(ye-Ne)*.25,Tt=(Ee-Ue)*.25;Ze=Math.atan2(Tt,_t)}else{const _e=.9*Math.PI/180;Ze=Math.round(Le/_e)*_e}if(H&&ne&&(B||ee.altKey)){const _e=us(Ze,W),Ue=Math.max(-.001,Math.min(.001,_e));Ze=W+Ue}if((Math.abs(us(Ze,W))>2e-4||!K)&&(h(Ze),O(Ze)),st&&We){const _e=qa(We.x,We.y,ke.x,ke.y);I(_e),T(We)}else I(null),T(null)},[e.isAnimating,s,wr,e.cueBall,e.balls,qa,H,ne]),Bi=v.useCallback(()=>{},[]);v.useCallback(()=>{C(!0),b(.5),E(0),S(0),J(null),Z(!1)},[]),v.useCallback(()=>{const ee=e.cueBall;let L=null,he=1/0;return e.balls.forEach(ye=>{ye.visible&&!ye.pocketed&&ye.id<he&&(he=ye.id,L=ye)}),L?Math.atan2(L.y-ee.y,L.x-ee.x):Math.atan2(vn/2-ee.y,Qt/2-ee.x)},[e.cueBall,e.balls]),v.useEffect(()=>{n(ee=>({...ee,balls:Lr()}))},[Lr]),v.useEffect(()=>{if(e.isAnimating)return Gs(),()=>{Un.current&&cancelAnimationFrame(Un.current)}},[e.isAnimating,Gs]),v.useEffect(()=>{const ee=L=>{L.key==="Escape"&&ne&&(ae(!1),z(null),q(null),Z(!1))};return document.addEventListener("keydown",ee),()=>{document.removeEventListener("keydown",ee)}},[ne]);const ka=v.useCallback(()=>{const ee=a.current;if(!ee)return;const L=ee.getContext("2d");if(L.clearRect(0,0,Qt,vn),Ws.current?L.drawImage(Ws.current,0,0,Qt,vn):(L.fillStyle="#0d5c0d",L.fillRect(0,0,Qt,vn)),vr.current){L.save(),L.globalAlpha=.25;const ye=Qt*.305,Ee=ye*(vr.current.height/vr.current.width),Ae=(Qt-ye)/2,ke=(vn-Ee)/2;L.shadowColor="rgba(0, 0, 0, 0.3)",L.shadowBlur=4,L.shadowOffsetX=0,L.shadowOffsetY=1,L.drawImage(vr.current,Ae,ke,ye,Ee),L.restore()}to(e.gamePhase)&&!e.isAnimating&&(L.save(),L.strokeStyle="rgba(255, 0, 0, 0.5)",L.lineWidth=2,L.setLineDash([10,5]),L.strokeRect(Oc,zc,wg-Oc,Eg-zc),L.fillStyle="rgba(255, 0, 0, 0.8)",L.font="12px Arial",L.fillText("KITCHEN",Oc+10,zc+20),L.restore());const he=(ye,Ee)=>{if(na.current[Ee]){const Ae=na.current[Ee];L.save(),L.translate(ye.x,ye.y),L.rotate(ye.rotation||0),L.shadowColor="rgba(0, 0, 0, 0.3)",L.shadowBlur=3,L.shadowOffsetX=1,L.shadowOffsetY=1,L.beginPath(),L.arc(0,0,ot,0,2*Math.PI),L.clip(),L.drawImage(Ae,-7.5,-7.5,tt,tt),L.shadowColor="transparent",L.globalAlpha=.3,L.fillStyle="rgba(255, 255, 255, 0.8)",L.beginPath(),L.arc(-7.5*.3,-7.5*.3,ot*.4,0,2*Math.PI),L.fill(),L.restore()}else{const Ae=new Image;Ae.onload=()=>{na.current[Ee]=Ae,he(ye,Ee)},Ae.src=Ee}};if(e.balls.forEach(ye=>{ye.visible&&!ye.pocketed&&he(ye,br[ye.id])}),_&&!e.isAnimating){const ye={x:Math.max(30,Math.min(570,e.cueBall.x)),y:Math.max(24,Math.min(270,e.cueBall.y))},Ee=p,Ae=m*18,ke=Math.cos(Ee)*Ae,Le=Math.sin(Ee)*Ae,st=w*Math.PI/180,We=Math.cos(st)*x*wi*Ae*.05,dt=Math.sin(st)*x*wi*Ae*.05,Ze=va(ke+We,Le+dt,ye,{ignoreCuePocket:!0});if(Ze.cue&&Ze.cue.points.length>1){const Te=Ze.cue.points.find(me=>me.collision);if(Te){Dn("Trajectory collision at:",Te.x.toFixed(2),Te.y.toFixed(2));const me=e.balls.find(_e=>_e.visible&&!_e.pocketed&&_e.id===1);me&&Dn("Actual ball 1 position:",me.x.toFixed(2),me.y.toFixed(2))}}Object.entries(Ze).forEach(([Te,me])=>{const _e=Te==="cue"?1:3;if(me.points.length>_e){if(L.save(),Te==="cue"?on(L):(L.strokeStyle=me.color,L.lineWidth=2,L.globalAlpha=.7),Te==="cue"){const Ne=me.points,Ue=Ne[0],_t=Ne[Ne.length-1]||Ue;if(Math.hypot(_t.x-Ue.x,_t.y-Ue.y)<20){const Br=cs(m);L.beginPath(),L.moveTo(Ue.x,Ue.y),L.lineTo(Ue.x+Math.cos(Ee)*Br,Ue.y+Math.sin(Ee)*Br),L.stroke()}else Da(L,Ne)}else Da(L,me.points);L.restore();for(let Ne=1;Ne<me.points.length;Ne++){const Ue=me.points[Ne];if(Ue.collision&&(L.save(),L.fillStyle=me.color,L.globalAlpha=.6,L.beginPath(),L.arc(Ue.x,Ue.y,4,0,2*Math.PI),L.fill(),L.restore()),Ue.pocketed){L.save(),L.fillStyle="#00ff00",L.globalAlpha=.8,L.beginPath(),L.arc(Ue.x,Ue.y,6,0,2*Math.PI),L.fill(),L.restore();break}}}else if(Te==="cue"){L.save(),on(L);const Ne=me.points[0],Ue=cs(m),_t=Ne.x+Math.cos(Ee)*Ue,Tt=Ne.y+Math.sin(Ee)*Ue;L.beginPath(),L.moveTo(Ne.x,Ne.y),L.lineTo(_t,Tt),L.stroke(),L.restore()}})}if(F&&!e.isAnimating&&(L.save(),L.strokeStyle="rgba(255, 255, 0, 0.8)",L.lineWidth=3,L.setLineDash([5,5]),L.beginPath(),L.arc(F.x,F.y,25,0,2*Math.PI),L.stroke(),L.restore()),!e.isAnimating&&!H){const st=[{x:30,y:24.5,margin:tt*cr},{x:570.77,y:24.5,margin:tt*cr},{x:30,y:270.18,margin:tt*cr},{x:570.77,y:270.18,margin:tt*cr},{x:300.385,y:24.5,margin:tt*tl},{x:300.385,y:270.18,margin:tt*tl}],We=e.cueBall.x+Math.cos(p)*100,dt=e.cueBall.y+Math.sin(p)*100;let Ze=null,Te=1/0;if(st.forEach(me=>{const _e=Math.hypot(We-me.x,dt-me.y);_e<Te&&(Te=_e,Ze=me)}),Ze&&Te<120){const me=Ze.margin+Sg;L.save(),L.strokeStyle="rgba(0, 255, 0, 0.18)",L.lineWidth=1.5,L.setLineDash([]),L.beginPath(),L.arc(Ze.x,Ze.y,me,0,2*Math.PI),L.stroke(),L.fillStyle="rgba(0, 255, 0, 0.15)",L.beginPath(),L.arc(Ze.x,Ze.y,2,0,2*Math.PI),L.fill(),L.restore()}}if(ne&&!e.isAnimating){if(L.save(),L.fillStyle="rgba(0, 0, 0, 0.4)",L.fillRect(0,0,Qt,vn),L.fillStyle="rgba(255, 215, 0, 0.9)",L.font="bold 16px Arial",L.textAlign="center",L.fillText("CALL YOUR SHOT",Qt/2,30),L.font="14px Arial",L.fillStyle="rgba(255, 255, 255, 0.9)",L.fillText("Click a ball, then click a pocket",Qt/2,50),M&&(L.fillStyle="rgba(0, 255, 0, 0.8)",L.font="bold 14px Arial",L.fillText(`Selected Ball: ${M}`,Qt/2,vn-60)),G&&(L.fillStyle="rgba(0, 255, 0, 0.8)",L.font="bold 14px Arial",L.fillText(`Selected Pocket: ${G.replace("-"," ")}`,Qt/2,vn-40)),M){const ye=e.balls.find(Ee=>Ee.id===M&&Ee.visible&&!Ee.pocketed);ye&&(L.strokeStyle="rgba(0, 255, 0, 0.8)",L.lineWidth=3,L.setLineDash([5,5]),L.beginPath(),L.arc(ye.x,ye.y,ot+5,0,2*Math.PI),L.stroke())}if(G){const ye=qn.find(Ee=>Ee.id===G);ye&&(L.strokeStyle="rgba(0, 255, 0, 0.8)",L.lineWidth=3,L.setLineDash([5,5]),L.beginPath(),L.arc(ye.x,ye.y,30,0,2*Math.PI),L.stroke())}Dn("Draw function - gamePhase:",e.gamePhase,"pushOutAvailable:",pe,"isCallShotMode:",ne),Er(L,vn,se,pe,e.gamePhase),(M&&G||se)&&(L.fillStyle="rgba(76, 175, 80, 0.9)",L.fillRect(Qt/2-80,vn-30,70,25),L.fillStyle="white",L.font="bold 12px Arial",L.textAlign="center",L.fillText("CONFIRM",Qt/2-45,vn-15),L.fillStyle="rgba(244, 67, 54, 0.9)",L.fillRect(Qt/2+10,vn-30,70,25),L.fillStyle="white",L.font="bold 12px Arial",L.textAlign="center",L.fillText("CANCEL",Qt/2+45,vn-15)),L.restore()}if(e.cueBall.visible){const ye=e.cueBall,Ee=br.cue;if(na.current[Ee]){const Ae=na.current[Ee];L.save(),L.translate(ye.x,ye.y),L.rotate(ye.rotation||0),L.beginPath(),L.arc(0,0,ot,0,2*Math.PI),L.clip(),L.drawImage(Ae,-7.5,-7.5,tt,tt),x!==0&&!e.isAnimating&&(L.restore(),L.save(),L.strokeStyle=x>0?"rgba(76, 175, 80, 0.8)":"rgba(244, 67, 54, 0.8)",L.lineWidth=3,L.setLineDash([5,5]),L.beginPath(),L.arc(ye.x,ye.y,ot+5,0,2*Math.PI),L.stroke(),L.strokeStyle=x>0?"rgba(76, 175, 80, 0.9)":"rgba(244, 67, 54, 0.9)",L.lineWidth=2,L.setLineDash([]),L.beginPath(),L.moveTo(ye.x,ye.y),L.lineTo(ye.x+Math.cos(w*Math.PI/180)*(ot+10),ye.y+Math.sin(w*Math.PI/180)*(ot+10)),L.stroke()),L.restore()}else{const Ae=new Image;Ae.onload=()=>{na.current[Ee]=Ae,ka()},Ae.src=Ee}}L.globalAlpha=1},[e,_,p,br,m,F,H,va,ne,M,G,qn,pe,se]);v.useEffect(()=>{ka()},[e.isAnimating,_,p,m,F,H,ne,M,G,pe,se]),v.useEffect(()=>{const ee=new Image;ee.onload=()=>{Ws.current=ee,ka()},ee.src=Ow},[ka]),v.useEffect(()=>{const ee=new Image;ee.onload=()=>{vr.current=ee,ka()},ee.src=T0},[ka]),v.useEffect(()=>{const ee=he=>{he.altKey&&U(!0)},L=he=>{he.altKey||U(!1),he.key==="Alt"&&U(!1)};return window.addEventListener("keydown",ee),window.addEventListener("keyup",L),()=>{window.removeEventListener("keydown",ee),window.removeEventListener("keyup",L)}},[]);const[Ra,$s]=v.useState(!1),So=v.useCallback(ee=>{ee.preventDefault(),$s(!0),console.log("English drag started")},[]),Il=v.useCallback(ee=>{if(!Ra)return;const L=ee.currentTarget.getBoundingClientRect(),he=ee.clientX-L.left,ye=ee.clientY-L.top,Ee=he/L.width,Ae=ye/L.height,ke=.5,Le=.5,st=Math.sqrt((Ee-ke)**2+(Ae-Le)**2),We=Math.min(st,.4),dt=Math.min(We/.4,1),Te=(Math.atan2(Ae-Le,Ee-ke)*180/Math.PI+360)%360;E(dt),S(Te),console.log(`English updated: ${Math.round(dt*100)}% at ${Math.round(Te)}°`)},[Ra]),Oi=v.useCallback(()=>{$s(!1),console.log("English drag ended")},[]),An=v.useCallback(ee=>{const L=ee%360;return L>=247.5&&L<=292.5?"#4CAF50":L>=67.5&&L<=112.5?"#F44336":L>=157.5&&L<=202.5?"#9C27B0":L>=337.5||L<=22.5?"#FF9800":L>292.5&&L<337.5?"#00BCD4":L>202.5&&L<247.5?"#CDDC39":L>22.5&&L<67.5?"#E91E63":"#FFC107"},[]),Pr=v.useCallback(ee=>{const L=ee%360;return L>=247.5&&L<=292.5?"Top Spin":L>=67.5&&L<=112.5?"Back Spin":L>=157.5&&L<=202.5?"Left Spin":L>=337.5||L<=22.5?"Right Spin":L>292.5&&L<337.5?"Top-Right Spin":L>202.5&&L<247.5?"Top-Left Spin":L>22.5&&L<67.5?"Bottom-Right Spin":"Bottom-Left Spin"},[]);return i.createElement("div",{className:rn.simplePoolGame},i.createElement("div",{className:rn.aimingInstructions},i.createElement("div",{className:rn.instructions},i.createElement("strong",null,"How To Aim:"),i.createElement("br",null),"Move mouse to aim • Click table to lock aim • Call Shot • Adjust power • Drag English ball • Click SHOOT",i.createElement("br",null),i.createElement("small",{style:{color:"#888",fontSize:"12px"}},"💡 ",i.createElement("strong",null,"Aim Line Colors:")," White = Aiming • Green = Locked & ready • Yellow = Fine-tuning • Green/Red = English spin • Colored = Object ball paths",i.createElement("br",null),"💡 ",i.createElement("strong",null,"Fine-tuning:")," Hold right-click for precise aiming, release to lock aim",i.createElement("br",null),"💡 ",i.createElement("strong",null,"English:")," Click and drag on the English ball to set spin direction and intensity"))),wx(e.gamePhase,pe)&&i.createElement("div",{style:{alignSelf:"center",margin:"8px 0 14px 0",padding:"6px 14px",background:"rgba(255, 215, 0, 0.95)",color:"#000",fontWeight:700,fontSize:"15px",borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.25)"}},"Push Out Available"),i.createElement("div",{className:rn.tableContainer},i.createElement("canvas",{ref:a,width:Qt,height:vn,onPointerDown:ds,onPointerUp:Pi,onPointerMove:Va,onPointerLeave:Bi,onContextMenu:ee=>ee.preventDefault(),className:rn.tableCanvas})),i.createElement("div",{className:rn.controls},i.createElement("div",{className:rn.powerControl},i.createElement("label",null,"Power: ",Math.round(m*100),"%"),i.createElement("div",{style:{position:"relative",width:"100%",height:"8px",background:"#ffffff",borderRadius:"4px",border:"1px solid #e0e0e0",overflow:"hidden"}},i.createElement("div",{style:{position:"absolute",top:0,left:0,width:`${m*100}%`,height:"100%",background:"#2196F3",borderRadius:"3px"}}),i.createElement("div",{style:{position:"absolute",top:"-4px",left:`${m*100}%`,width:"16px",height:"16px",background:"#2196F3",borderRadius:"50%",border:"1px solid #1976D2",cursor:"pointer",transform:"translateX(-50%)"}}),i.createElement("input",{type:"range",min:"0.1",max:"1",step:"0.01",value:m,onChange:ee=>b(parseFloat(ee.target.value)),style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"transparent",outline:"none",cursor:"pointer",opacity:0}}))),i.createElement("div",{className:rn.englishControl},i.createElement("label",null,"English: Drag to set spin"),i.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"5px"}},i.createElement("div",{onMouseDown:So,onMouseMove:Il,onMouseUp:Oi,onMouseLeave:Oi,style:{width:"60px",height:"60px",borderRadius:"50%",border:"2px solid #333",background:"linear-gradient(135deg, #fff 0%, #f0f0f0 100%)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",color:"#333",cursor:Ra?"grabbing":"grab",userSelect:"none"}},x>0?"+":"",Math.round(x*100),"%",x!==0&&i.createElement(i.Fragment,null,i.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) translate(${Math.cos(w*Math.PI/180)*20}px, ${Math.sin(w*Math.PI/180)*20}px)`,width:"8px",height:"8px",borderRadius:"50%",background:An(w),border:"1px solid #fff"}}),i.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) rotate(${w}deg)`,width:"2px",height:"20px",background:An(w),borderRadius:"1px"}}))),x!==0&&i.createElement("div",{style:{fontSize:"12px",color:An(w),fontWeight:"bold"}},Pr(w)),x===0&&i.createElement("div",{style:{fontSize:"12px",color:"#666"}},"No Spin"),x!==0&&i.createElement("button",{onClick:()=>{E(0),S(0)},style:{fontSize:"10px",padding:"2px 6px",background:"#666",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",marginLeft:"5px"}},"Reset"))),i.createElement("div",{className:rn.shootButton},i.createElement("button",{className:rn.shootButton,onClick:Li,disabled:e.isAnimating||!H},H?e.gamePhase==="break"||M&&G||se?"SHOOT!":"CALL SHOT":"LOCK AIM FIRST")),i.createElement("div",{className:rn.gameInfo},i.createElement("span",null,"Player: ",e.currentPlayer),i.createElement("span",null,"Phase: ",e.gamePhase),i.createElement("span",null,"Status: ",e.isAnimating?"Animating":e.ballInHand||e.gamePhase==="break"?s?"Drag Cue Ball to Position":e.gamePhase==="break"?"Click Cue Ball to Move (Kitchen Only)":"Click Cue Ball to Move (Anywhere)":H?"Aim Locked - Ready to Shoot":F?"Pocket assistance active - Click to lock!":"Move Mouse to Aim"),Yn&&i.createElement("span",{style:{color:"#ff6b6b",fontWeight:"bold"}},"FOUL: ",Yn==="scratch"?"Scratch":Yn==="wrong_ball_first"?"Wrong Ball First":Yn==="no_rail_contact"?"No Rail Contact":Yn),i.createElement("span",null,"Consecutive Fouls P1: ",Hn[1]," | P2: ",Hn[2])),i.createElement("div",{className:rn.buttonRow},i.createElement("button",{className:rn.resetAimButton,onClick:()=>{setIsDragging(!1),C(!1),b(.5)},disabled:e.isAnimating},"Reset Aim"),i.createElement("button",{className:rn.resetButton,onClick:()=>{n(ee=>({...ee,balls:Lr(),cueBall:{x:100,y:150,originalX:100,originalY:150,vx:0,vy:0,visible:!0,isMoving:!1,rotation:0,rotationSpeed:0},isAnimating:!1,gamePhase:"break",ballInHand:!1,scratchOccurred:!1,currentPlayer:1})),C(!0),l(!1),J(null),Z(!1),E(0),S(0),Ie(!1),Fe(!1),V(!1),ut(null),xt(!1),zt(null),console.log("Resetting foul counters via reset button"),Kt({1:0,2:0}),Zn(null),Re(!1),mn(!1),On(null),wn(0),Ia([]),ya(!1),window.tipManager&&window.tipManager.resetTips&&window.tipManager.resetTips()}},"Reset Game"),i.createElement("button",{className:rn.resetButton,onClick:()=>{n(ee=>({...ee,ballInHand:!0,currentPlayer:ee.currentPlayer===1?2:1}))},style:{marginLeft:"10px",backgroundColor:"#ff6b6b"}},"Test Ball-in-Hand"))),Pt&&i.createElement("div",{className:rn.pushOutModal},i.createElement("div",{className:rn.pushOutContent},i.createElement("h3",null,"Push Out Result"),i.createElement("p",null,"Player ",e.currentPlayer===1?2:1,", do you want to accept this push out result?"),i.createElement("div",{className:rn.pushOutButtons},i.createElement("button",{onClick:()=>{xt(!1),n(ee=>({...ee,currentPlayer:ee.currentPlayer===1?2:1}))},className:rn.acceptButton},"Accept"),i.createElement("button",{onClick:()=>{xt(!1)},className:rn.declineButton},"Decline")))),Yt&&i.createElement("div",{className:rn.pushOutModal},i.createElement("div",{className:rn.pushOutContent},i.createElement("h3",null,"Illegally Pocketed Balls"),i.createElement("p",null,"Player ",e.currentPlayer===1?2:1,", balls were illegally pocketed:"),i.createElement("ul",null,sn.map(ee=>i.createElement("li",{key:ee.id},"Ball ",ee.id," ",ee.id===10?"(will be spotted)":"(remains pocketed)"))),i.createElement("p",null,"Do you want to:"),i.createElement("div",{className:rn.pushOutButtons},i.createElement("button",{onClick:()=>{ya(!1),n(L=>({...L,currentPlayer:L.currentPlayer===1?2:1})),sn.find(L=>L.id===10)&&n(L=>({...L,balls:L.balls.map(he=>he.id===10?{...he,pocketed:!1,visible:!0,x:Ex,y:Sx}:he)})),Ia([])},className:rn.acceptButton},"Accept Table"),i.createElement("button",{onClick:()=>{ya(!1),Ia([])},className:rn.declineButton},"Require Re-Shot")))))},qO="_tutorialRules_use5n_1",QO="_header_use5n_14",VO="_progressContainer_use5n_25",XO="_progressBar_use5n_31",KO="_progressFill_use5n_39",JO="_progressText_use5n_46",e7="_content_use5n_52",t7="_stepContent_use5n_56",n7="_highlightBox_use5n_73",a7="_highlightIcon_use5n_86",r7="_tipSection_use5n_90",s7="_navigation_use5n_110",i7="_navButton_use5n_119",o7="_disabled_use5n_135",l7="_centerButtons_use5n_145",c7="_skipButton_use5n_153",u7="_nextButton_use5n_171",d7="_startButton_use5n_171",f7="_quickRules_use5n_193",p7="_ruleGrid_use5n_205",m7="_ruleItem_use5n_211",h7="_ruleNumber_use5n_231",qt={tutorialRules:qO,header:QO,progressContainer:VO,progressBar:XO,progressFill:KO,progressText:JO,content:e7,stepContent:t7,highlightBox:n7,highlightIcon:a7,tipSection:r7,navigation:s7,navButton:i7,disabled:o7,centerButtons:l7,skipButton:c7,nextButton:u7,startButton:d7,quickRules:f7,ruleGrid:p7,ruleItem:m7,ruleNumber:h7},g7=({step:t,currentStep:a,totalSteps:e,onNext:n,onBack:s,onSkip:l})=>{const c=(a+1)/e*100,d=["Remember: Always hit the lowest numbered ball first!","Call your shots clearly - specify ball and pocket.","The 10-ball is the money ball - pocket it legally to win!","Use the push out strategically to improve your position.","Three consecutive fouls result in loss of game.","Practice your break shot - it sets up the entire game.","Defensive play is just as important as offensive play.","Watch for safety opportunities when you can't make a shot."];return i.createElement("div",{className:qt.tutorialRules},i.createElement("div",{className:qt.header},i.createElement("h3",null,"10-Ball Rules Tutorial"),i.createElement("div",{className:qt.progressContainer},i.createElement("div",{className:qt.progressBar},i.createElement("div",{className:qt.progressFill,style:{width:`${c}%`}})),i.createElement("span",{className:qt.progressText},"Step ",a+1," of ",e))),i.createElement("div",{className:qt.content},i.createElement("div",{className:qt.stepContent},i.createElement("h4",null,t.title),i.createElement("p",null,t.content),t.highlight&&i.createElement("div",{className:qt.highlightBox},i.createElement(QB,{className:qt.highlightIcon}),i.createElement("span",null,"This concept will be highlighted on the table"))),i.createElement("div",{className:qt.tipSection},i.createElement("h5",null,"💡 Pro Tip"),i.createElement("p",null,d[a%d.length]))),i.createElement("div",{className:qt.navigation},i.createElement("button",{className:`${qt.navButton} ${a===0?qt.disabled:""}`,onClick:s,disabled:a===0},i.createElement(FB,null),"Previous"),i.createElement("div",{className:qt.centerButtons},i.createElement("button",{className:qt.skipButton,onClick:l},"Skip Tutorial"),a===e-1?i.createElement("button",{className:qt.startButton,onClick:n},i.createElement(KB,null),"Start Playing"):i.createElement("button",{className:qt.nextButton,onClick:n},"Next",i.createElement(WB,null)))),i.createElement("div",{className:qt.quickRules},i.createElement("h5",null,"Quick Reference"),i.createElement("div",{className:qt.ruleGrid},i.createElement("div",{className:qt.ruleItem},i.createElement("span",{className:qt.ruleNumber},"1"),i.createElement("span",null,"Hit lowest ball first")),i.createElement("div",{className:qt.ruleItem},i.createElement("span",{className:qt.ruleNumber},"2"),i.createElement("span",null,"Call your shots")),i.createElement("div",{className:qt.ruleItem},i.createElement("span",{className:qt.ruleNumber},"3"),i.createElement("span",null,"10-ball wins the game")),i.createElement("div",{className:qt.ruleItem},i.createElement("span",{className:qt.ruleNumber},"4"),i.createElement("span",null,"Push out after break")))))},y7="_gameModeSelector_s58nb_29",b7="_header_s58nb_67",v7="_backToDashboardButton_s58nb_113",x7="_modesGrid_s58nb_277",w7="_modeCard_s58nb_291",E7="_recommended_s58nb_333",S7="_recommendedBadge_s58nb_353",C7="_modeIcon_s58nb_379",_7="_modeContent_s58nb_403",I7="_modeArrow_s58nb_441",D7="_whatYoullLearn_s58nb_539",kr={gameModeSelector:y7,header:b7,backToDashboardButton:v7,modesGrid:x7,modeCard:w7,recommended:E7,recommendedBadge:S7,modeIcon:C7,modeContent:_7,modeArrow:I7,whatYoullLearn:D7},Dx=({onModeSelect:t,fromLogin:a=!1})=>{const e=[{id:"tutorial",title:"Interactive Tutorial",description:"Learn the official CSI 10-Ball rules step by step with interactive examples and tips.",icon:qB,color:"#4CAF50",recommended:!0}];return i.createElement("div",{className:kr.gameModeSelector,style:{maxWidth:"280px",width:"280px",margin:"0 auto",overflowX:"hidden",boxSizing:"border-box"}},i.createElement("div",{className:kr.header},!a&&i.createElement("button",{className:kr.backToDashboardButton,onClick:()=>window.location.href="/dashboard"},"← Back to Dashboard"),i.createElement("h2",null,"10-Ball Tutorial"),i.createElement("p",null,"Learn and master the official CSI 10-Ball rules")),i.createElement("div",{className:kr.modesGrid},e.map(n=>{const s=n.icon;return i.createElement("div",{key:n.id,className:`${kr.modeCard} ${n.recommended?kr.recommended:""}`,onClick:()=>t(n.id)},n.recommended&&i.createElement("div",{className:kr.recommendedBadge},"Recommended"),i.createElement("div",{className:kr.modeIcon,style:{backgroundColor:n.color}},i.createElement(s,null)),i.createElement("div",{className:kr.modeContent},i.createElement("h3",null,n.title),i.createElement("p",null,n.description)),i.createElement("div",{className:kr.modeArrow},"→"))})),i.createElement("div",{className:kr.whatYoullLearn},i.createElement("h3",null,"What You'll Learn"),i.createElement("ul",null,i.createElement("li",null,"Official CSI 10-Ball Rules"),i.createElement("li",null,"Break/Push Out Requirements"),i.createElement("li",null,"Call Shot/Ball in Hand Requirements"),i.createElement("li",null,"Illegally Pocketed Balls/Opponent's Option"),i.createElement("li",null,"Foul Detection and Penalties"),i.createElement("li",null,"Advanced Shot Planning"))))},k7="_tipContainer_1z0xf_1",A7="_show_1z0xf_27",M7="_dragging_1z0xf_35",T7="_tipContent_1z0xf_47",N7="_tipHeader_1z0xf_71",R7="_tipIcon_1z0xf_89",L7="_tipTitle_1z0xf_99",P7="_closeButton_1z0xf_113",B7="_tipText_1z0xf_155",ks={tipContainer:k7,show:A7,dragging:M7,tipContent:T7,tipHeader:N7,tipIcon:R7,tipTitle:L7,closeButton:P7,tipText:B7},O7=({tip:t,isVisible:a,onClose:e})=>{const[n,s]=v.useState(!1),[l,c]=v.useState({x:0,y:0}),[d,p]=v.useState(!1),[h,m]=v.useState({x:0,y:0}),b=v.useRef(null);v.useEffect(()=>{if(a){s(!0);const S=setTimeout(()=>{e()},8e3);return()=>clearTimeout(S)}},[a,e]);const x=S=>{if(S.target.closest("button"))return;p(!0);const _=b.current.getBoundingClientRect();m({x:S.clientX-_.left,y:S.clientY-_.top})},E=S=>{if(!d)return;const _=S.clientX-h.x,C=S.clientY-h.y,D=window.innerWidth-250,I=window.innerHeight-100;c({x:Math.max(0,Math.min(_,D)),y:Math.max(0,Math.min(C,I))})},w=()=>{p(!1)};return v.useEffect(()=>{if(d)return document.addEventListener("mousemove",E),document.addEventListener("mouseup",w),()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",w)}},[d,h]),a?i.createElement("div",{ref:b,className:`${ks.tipContainer} ${n?ks.show:""} ${d?ks.dragging:""}`,style:{maxWidth:"250px",width:"250px",minWidth:"250px",top:l.y||20,left:l.x||"50%",transform:l.x?"none":"translateX(-50%)",right:"auto",cursor:d?"grabbing":"grab"},onMouseDown:x},i.createElement("div",{className:ks.tipContent},i.createElement("div",{className:ks.tipHeader},i.createElement("span",{className:ks.tipIcon},"💡"),i.createElement("span",{className:ks.tipTitle},"Pro Tip"),i.createElement("button",{className:ks.closeButton,onClick:e},"×")),i.createElement("div",{className:ks.tipText},t))):null},z7=v.forwardRef(({gameState:t,onTipShown:a},e)=>{const[n,s]=v.useState(null),[l,c]=v.useState(!1),[d,p]=v.useState(new Set),h=w=>{x(w)},m=()=>{p(new Set)};v.useImperativeHandle(e,()=>({triggerTip:h,resetTips:m}));const b={breakShot:{title:"Break Shot",tip:"Always hit the lowest numbered ball first! A good break can set up your entire game!"},callShot:{title:"Call Shot",tip:"Be specific about which pocket you're aiming for! If you don't call it, it doesn't count!"},pushOut:{title:"Push Out Opportunity",tip:"Use push out to improve your position when the table is difficult!"},foul:{title:"Foul Committed",tip:"Three consecutive fouls by the same player results in loss of game!"},tenBall:{title:"10-Ball Target",tip:"The 10-ball is the only ball that matters for winning!"},defensive:{title:"Defensive Play",tip:"Sometimes the best shot is the one that leaves your opponent nothing!"},practice:{title:"Keep Learning",tip:"Practice makes perfect - keep playing and learning!"},scratch:{title:"Scratch Foul",tip:"The cue ball went in a pocket! Your opponent gets ball-in-hand."},wrongBall:{title:"Wrong Ball First",tip:"You must hit the lowest numbered ball first! This is a foul."},noRail:{title:"No Rail Contact",tip:"After contact, a ball must hit a rail or be pocketed. This is a foul."},ballInHand:{title:"Ball-in-Hand",tip:"You can place the cue ball anywhere on the table after a foul."},kitchen:{title:"Kitchen Rule",tip:"During break, the cue ball must start in the kitchen (behind the head string)."},threeFoul:{title:"Three Foul Rule",tip:"Three consecutive fouls by the same player results in loss of game!"},pushOutStrategy:{title:"Push Out Strategy",tip:"After a legal break, you can push out to improve position. Opponent then chooses to shoot or pass."},callPocket:{title:"Call Pocket",tip:"You must call both the ball and the pocket for every shot after the break."},lowestBall:{title:"Lowest Ball First",tip:"Always hit the lowest numbered ball on the table first!"},safety:{title:"Safety Shot",tip:"A safety shot is when you don't expect to pocket a ball but leave your opponent in a difficult position."},jumpShot:{title:"Jump Shot",tip:"Jump shots are legal in 10-ball, but be careful not to jump the cue ball off the table!"},gameWinning:{title:"Game Winner",tip:"Legally pocket the 10-ball to win! Remember to call it and the pocket."}},x=w=>{if(d.has(w))return;const S=b[w];S&&(s(S),c(!0),p(_=>new Set([..._,w])),a==null||a(w))},E=()=>{c(!1)};return v.useEffect(()=>{t&&(t.gamePhase==="break"&&!d.has("breakShot")&&(x("breakShot"),window.dispatchEvent(new CustomEvent("kitchenRule"))),t.gamePhase==="play"&&!d.has("callShot")&&x("callShot"))},[t,d]),v.useEffect(()=>{const w=O=>{d.has("foul")||x("foul")},S=O=>{d.has("scratch")||x("scratch")},_=O=>{d.has("wrongBall")||x("wrongBall")},C=O=>{d.has("noRail")||x("noRail")},D=O=>{d.has("ballInHand")||x("ballInHand")},I=O=>{d.has("kitchen")||x("kitchen")},A=O=>{d.has("threeFoul")||x("threeFoul")},T=O=>{d.has("pushOut")||x("pushOut")},F=O=>{d.has("pushOutStrategy")||x("pushOutStrategy")},J=O=>{d.has("callPocket")||x("callPocket")},H=O=>{d.has("lowestBall")||x("lowestBall")},Z=O=>{d.has("safety")||x("safety")},K=O=>{d.has("jumpShot")||x("jumpShot")},X=O=>{d.has("tenBall")||x("tenBall")},W=O=>{d.has("gameWinning")||x("gameWinning")};return window.addEventListener("gameFoul",w),window.addEventListener("scratchFoul",S),window.addEventListener("wrongBallFoul",_),window.addEventListener("noRailFoul",C),window.addEventListener("ballInHand",D),window.addEventListener("kitchenRule",I),window.addEventListener("threeFoul",A),window.addEventListener("pushOutAvailable",T),window.addEventListener("pushOutStrategy",F),window.addEventListener("callPocket",J),window.addEventListener("lowestBall",H),window.addEventListener("safetyOpportunity",Z),window.addEventListener("jumpShot",K),window.addEventListener("tenBallTarget",X),window.addEventListener("gameWinning",W),()=>{window.removeEventListener("gameFoul",w),window.removeEventListener("scratchFoul",S),window.removeEventListener("wrongBallFoul",_),window.removeEventListener("noRailFoul",C),window.removeEventListener("ballInHand",D),window.removeEventListener("kitchenRule",I),window.removeEventListener("threeFoul",A),window.removeEventListener("pushOutAvailable",T),window.removeEventListener("pushOutStrategy",F),window.removeEventListener("callPocket",J),window.removeEventListener("lowestBall",H),window.removeEventListener("safetyOpportunity",Z),window.removeEventListener("jumpShot",K),window.removeEventListener("tenBallTarget",X),window.removeEventListener("gameWinning",W)}},[d]),i.createElement(O7,{tip:n==null?void 0:n.tip,isVisible:l,onClose:E})}),U7="_container_1jm20_1",F7="_backButton_1jm20_53",W7="_tutorialContainer_1jm20_79",Ei={container:U7,backButton:F7,tutorialContainer:W7},lS=({fromLogin:t=!1,onBackToLogin:a})=>{const[e,n]=v.useState("menu"),[s,l]=v.useState(0),[c,d]=v.useState(!0),[p,h]=v.useState({player1Score:0,player2Score:0,currentPlayer:1,gamePhase:"break",rules:{callPocket:!0,pushOut:!0,threeFoulRule:!0,jumpShots:!0}}),m=[{title:"The Break Shot",content:"Start the game with a legal break shot. You must break from the kitchen hitting the 1-ball first and drive at least 4 balls to the rails or pocket a ball.",proTip:"A good break can set up your entire game!"},{title:"Welcome to 10-Ball!",content:"10-Ball is a call-shot game where you must hit the lowest numbered ball first and call your shots. The 10-ball is the game-winning ball!",proTip:"Always hit the lowest numbered ball first!"},{title:"Call Shot Rules",content:"After the break, you must call both the ball and the pocket for every shot. If you don't call it, it doesn't count!",proTip:"CSI rules state that you do not have to call obvious shots. Banks, Kicks, and Caroms should always be called. Be specific about which pocket you're aiming for! Make sure your opponent acknowledges your called shot."},{title:"Push Out Option",content:"After a legal break, the incoming player may choose to 'push out' - shoot the cue ball anywhere without hitting any ball. The opponent then chooses to shoot or pass.",proTip:"Use push out to improve your position when the table is difficult!"},{title:"Fouls and Penalties",content:"Common fouls include: scratching (cue ball in pocket), hitting wrong ball first, not hitting any rail after contact, and jumping the cue ball off the table.",proTip:"Three consecutive fouls by the same player results in loss of game!"},{title:"Winning the Game",content:"Legally pocket the 10-ball to win! Yes, you can win with an early ten ball...Remember, you must call the 10-ball and the pocket, and hit the lowest numbered ball first.",proTip:"The 10-ball is the only ball that matters for winning!"},{title:"Strategy Tips",content:"Plan your shots ahead, use defensive play when needed, and always consider your opponent's options after your shot.",proTip:"Sometimes the best shot is the one that leaves your opponent nothing!"},{title:"Ready to Play!",content:"You now know the basics of 10-Ball! Practice these rules and strategies to improve your game.",proTip:"Practice makes perfect - keep playing and learning!"}],b=_=>{n(_),_==="tutorial"&&(l(0),d(!0))},x=()=>{s<m.length-1?l(s+1):n("game")},E=()=>{s>0&&l(s-1)},w=_=>{h(C=>({...C,gamePhase:"end",player1Score:_===1?C.player1Score+1:C.player1Score,player2Score:_===2?C.player2Score+1:C.player2Score}))},S=()=>{switch(e){case"menu":return i.createElement(Dx,{onModeSelect:b,fromLogin:t});case"tutorial":return i.createElement("div",{className:Ei.tutorialContainer},i.createElement(g7,{step:m[s],currentStep:s,totalSteps:m.length,onNext:x,onBack:E,onSkip:()=>n("game")}),i.createElement(s0,{onGameEnd:w}));case"game":return i.createElement(s0,{onGameEnd:w});default:return i.createElement(Dx,{onModeSelect:b})}};return i.createElement("div",{className:Ei.container},S(),(e==="game"||e==="tutorial")&&i.createElement(z7,{gameState:p,onTipShown:_=>console.log(`Tip shown: ${_}`),ref:_=>{_&&(window.tipManager=_)}}),e!=="menu"&&!t&&i.createElement("div",{className:Ei.navigation},i.createElement("button",{className:Ei.backButton,onClick:()=>n("menu")},"← Back to Menu")),e!=="menu"&&i.createElement("div",{className:Ei.gameInfo},i.createElement("div",{className:Ei.scoreBoard},i.createElement("div",{className:Ei.playerScore},i.createElement("span",null,"Player 1: ",p.player1Score)),i.createElement("div",{className:Ei.playerScore},i.createElement("span",null,"Player 2: ",p.player2Score)))))};function j7({onSuccess:t}){const[a,e]=v.useState(""),[n,s]=v.useState(""),[l,c]=v.useState(!1),[d,p]=v.useState(!1),[h,m]=v.useState(!1),[b,x]=v.useState(!1),E=async()=>{if(!a){s("Please enter your email or PIN.");return}s(""),c(!0);try{const _=await(await fetch(`${Pe}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:a.trim()})})).json();c(!1),_.success?(s(""),t(`${_.user.firstName} ${_.user.lastName}`.trim(),_.user.email,_.user.pin)):s(_.message||"No user found with that email or PIN. Please try again or contact frbcapl@gmail.com for help.")}catch(S){c(!1),s("Error verifying login. Please try again later."),console.error("Login verification error:",S)}},w=S=>{S.key==="Enter"&&E()};return d?i.createElement("div",{style:{position:"relative",minHeight:"100vh",width:"100%",overflowX:"hidden",background:"#000"}},i.createElement("button",{onClick:()=>p(!1),style:{position:"fixed",top:"0px",left:"0px",zIndex:1e3,backgroundColor:"#e53e3e",color:"white",border:"none",padding:"12px 20px",borderRadius:"0 0 8px 0",fontSize:"14px",cursor:"pointer",fontWeight:"bold"}},"← Back to Login"),i.createElement(lS,{fromLogin:!0,onBackToLogin:()=>p(!1)})):i.createElement("div",{className:Ha.pinLoginBg},i.createElement("div",{className:Ha.pinLoginFrame},i.createElement("div",{style:{display:"flex",gap:"10px",marginBottom:"1.5rem",justifyContent:"center"}},i.createElement("a",{href:"https://frusapl.com/frbcapl-singles#3a534cc1-c4ac-4c04-8d7a-a0fe9ddfaca4",target:"_blank",rel:"noopener noreferrer",className:Ha.signupBtn},"Sign Up for Beta Test"),i.createElement("button",{onClick:()=>x(!0),className:Ha.signupBtn,style:{background:"#4CAF50",border:"none",cursor:"pointer",padding:"12px 20px",borderRadius:"6px",color:"white",fontSize:"14px",fontWeight:"bold",textDecoration:"none",display:"inline-block"}},"Register New Player")),i.createElement("div",{className:Ha.simulationContainer},i.createElement(jw,{aspectWidth:600,aspectHeight:300},i.createElement(Df,null))),i.createElement("div",{className:Ha.pinLoginCard},i.createElement("h3",{className:Ha.pinLoginSubtitle},i.createElement("span",{className:Ha.pinLoginLock,"aria-hidden":"true"},"🔒"),i.createElement("span",{className:Ha.pinOutlineText}," Enter Email or PIN")),i.createElement("div",{style:{position:"relative",width:"100%"}},i.createElement("input",{type:h?"text":"password",value:a,onChange:S=>e(S.target.value),onKeyDown:w,placeholder:"Email or PIN",autoFocus:!0,className:Ha.pinInput,"aria-label":"Email or PIN",disabled:l,style:{paddingRight:"50px"}}),i.createElement("button",{type:"button",onClick:()=>m(!h),style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",fontSize:"16px",color:"#666",display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":h?"Hide password":"Show password"},h?"🙈":"👁️")),i.createElement("button",{onClick:E,disabled:l,className:Ha.pinLoginBtn,type:"button"},l?"Verifying...":"Submit"),n&&i.createElement("p",{className:Ha.pinLoginError,role:"alert"},n))),i.createElement(tS,{isOpen:b,onClose:()=>x(!1),onSuccess:S=>{console.log("New player registered:",S),x(!1),S&&S.email&&t(`${S.firstName} ${S.lastName}`,S.email,S.pin)},isMobile:window.innerWidth<=768}))}const H7=""+new URL("bcapl_logo-BvvUeHn5.png",import.meta.url).href,Y7=""+new URL("csi_logo-ChVaLM6t.png",import.meta.url).href,G7=""+new URL("usapl_logo-jJ_LE_Bw.png",import.meta.url).href,$7=""+new URL("fargorate-logo-BVCRpqvV.png",import.meta.url).href;function Z7(){const[t,a]=v.useState(window.innerWidth),[e,n]=v.useState(window.innerHeight),[s]=v.useState(()=>[0,1,2,3,4,5,6,7].map(I=>{const A=.1+Math.random()*.15,T=Math.random()*Math.PI*2;return{x:Math.random()*t,y:Math.random()*e,vx:Math.cos(T)*A*1.2,vy:Math.sin(T)*A*1.2,baseSize:.8+Math.random()*.4,sizePhase:Math.random()*Math.PI*2,isSizeChanger:!1,speedCategory:"base",lastChange:Date.now(),changeInterval:8e3+Math.random()*12e3,rotationDirection:I>=5?Math.random()>.5?1:-1:0}}));v.useEffect(()=>{const I=()=>{a(window.innerWidth),n(window.innerHeight)};return window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]);function l(I,A,T){const[F,J]=v.useState(I);v.useRef(null);const H=v.useRef(I);return v.useEffect(()=>{let Z,K=Date.now();const X=()=>{const W=Date.now(),O=W-K,B=H.current;if(W-B.lastChange>B.changeInterval){const ae=T.includes(A)?"fast":"base",se={...B,speedCategory:ae,lastChange:W,changeInterval:3e3+Math.random()*6e3};H.current=se,J(se)}if(Math.random()<.003){const ne=Math.atan2(B.vy,B.vx),ae=(Math.random()-.5)*Math.PI*.3,se=ne+ae,V=.3+Math.random()*1,pe=B.speedCategory==="fast"?.6:.2;B.vx=Math.cos(se)*V*pe,B.vy=Math.sin(se)*V*pe}let U=B.x+B.vx*(O/16),M=B.y+B.vy*(O/16);(U<0||U>t||M<0||M>e)&&(B.edgeShrink||(B.edgeShrink=!0,B.edgeShrinkTime=W));const z=W/1e3;let G=B.baseSize;const q=Math.sin(z*.07+B.sizePhase)*.1,R=Math.sin(z*.35+B.sizePhase*2)*.05;if(G=B.baseSize+q+R,G<B.baseSize*.3&&!B.sizeShrink&&(B.sizeShrink=!0,B.sizeShrinkTime=W),B.edgeShrink){const ne=W-B.edgeShrinkTime;if(ne<2e3){const se=1-ne/2e3;B.edgeOpacity=se,G=B.baseSize+q+R}else if(ne<4e3)B.edgeOpacity=.01,G=.01;else if(ne<4100)U=Math.random()*t,M=Math.random()*e,B.x=U,B.y=M,G=.01,B.edgeOpacity=.01;else if(ne<12500){const se=.01+.99*((ne-4100)/8400);G*=se,B.edgeOpacity=se}else B.edgeShrink=!1,B.edgeOpacity=1}else B.edgeOpacity=1;if(B.sizeShrink){const ne=W-B.sizeShrinkTime;if(ne<2e3){const se=1-ne/2e3;B.sizeOpacity=se}else if(ne<4e3)B.sizeOpacity=.01,G=.01;else if(ne<4100)U=Math.random()*t,M=Math.random()*e,B.x=U,B.y=M,G=.01,B.sizeOpacity=.01;else if(ne<12500){const se=.01+.99*((ne-4100)/8400);G*=se,B.sizeOpacity=se}else B.sizeShrink=!1,B.sizeOpacity=1}else B.sizeOpacity=1;let j=B.rotation||0;if(A>=5){const ae=(Math.sqrt(B.vx*B.vx+B.vy*B.vy)*2+.3)*(O/16)*(B.rotationDirection||1);j+=ae}H.current={...B,x:U,y:M,size:G,rotation:j},W-K>100&&(J(H.current),K=W),Z=requestAnimationFrame(X)};return X(),()=>cancelAnimationFrame(Z)},[t,e,T]),F}const[c]=v.useState(()=>{const I=[];for(;I.length<3;){const T=Math.floor(Math.random()*8);I.includes(T)||I.push(T)}const A=[];for(;A.length<3;){const T=Math.floor(Math.random()*8);!A.includes(T)&&!I.includes(T)&&A.push(T)}return s.forEach((T,F)=>{I.includes(F)?(T.speedCategory="fast",T.vx=(Math.random()-.5)*2,T.vy=(Math.random()-.5)*2):(T.speedCategory="base",T.vx=(Math.random()-.5)*.5,T.vy=(Math.random()-.5)*.5),A.includes(F)&&(T.isSizeChanger=!0)}),!0}),[d,p]=v.useState(()=>{const I=[];for(;I.length<3;){const A=Math.floor(Math.random()*8);I.includes(A)||I.push(A)}return I}),h=()=>{const I=[];for(;I.length<3;){const A=Math.floor(Math.random()*8);I.includes(A)||I.push(A)}p(I)};v.useEffect(()=>{const I=setInterval(()=>{h(),console.log("Speed reassignment triggered")},4e3+Math.random()*4e3);return()=>clearInterval(I)},[]);const m=l(s[0],0,d),b=l(s[1],1,d),x=l(s[2],2,d),E=l(s[3],3,d),w=l(s[4],4,d),S=l(s[5],5,d),_=l(s[6],6,d),C=l(s[7],7,d),D=(I,A,T,F,J=!1)=>{const H=J&&I.rotation||0;return{position:"absolute",left:I.x,top:I.y,transform:`translate(-50%, -50%) scale(${I.size}) rotate(${H}deg)`,width:A,height:"auto",opacity:T*(I.edgeOpacity||1)*(I.sizeOpacity||1),zIndex:0,pointerEvents:"none",filter:F,transition:"none"}};return i.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none",overflow:"hidden"}},i.createElement("img",{src:T0,alt:"League Logo Background",style:D(m,150,.75,"drop-shadow(0 0 24px rgba(245, 30, 30, 0.2))")}),i.createElement("img",{src:H7,alt:"BCAPL Logo Background",style:D(b,120,.75,"drop-shadow(0 0 18px rgba(245, 30, 30, 0.2))")}),i.createElement("img",{src:Y7,alt:"CSI Logo Background",style:D(x,120,.75,"drop-shadow(0 0 12px rgba(245, 30, 30, 0.2))")}),i.createElement("img",{src:G7,alt:"USAPL Logo Background",style:D(E,140,.8,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.2))")}),i.createElement("img",{src:$7,alt:"Fargorate Logo Background",style:D(w,140,.8,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.2))")}),i.createElement("img",{src:If,alt:"8 Ball Background",style:D(S,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))",!0)}),i.createElement("img",{src:zw,alt:"9 Ball Background",style:D(_,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))",!0)}),i.createElement("img",{src:Cp,alt:"10 Ball Background",style:D(C,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))",!0)}))}function q7(){return i.createElement("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0 0.5rem 0",position:"fixed",top:0,left:0,zIndex:1e3,background:"rgba(0,0,0,0.8)",backdropFilter:"blur(6px)",boxShadow:"0 4px 20px rgba(0,0,0,0.5)"}},i.createElement("span",{className:"app-header-title"},"Front Range Pool League"))}function Q7({isAuthenticated:t,userFirstName:a,userLastName:e,userEmail:n,userPin:s,handleLoginSuccess:l,handleLogout:c}){const d=xo();return i.createElement("main",{className:"main-app-content"},t?i.createElement(nS,{playerName:a,playerLastName:e,senderEmail:n,onScheduleMatch:()=>{},onOpenChat:()=>window.location.hash="#/chat",onLogout:c,userPin:s,onGoToAdmin:()=>d("/admin")}):i.createElement(j7,{onSuccess:l}))}function V7(){const[t,a]=v.useState(!1),[e,n]=v.useState(""),[s,l]=v.useState(""),[c,d]=v.useState(""),[p,h]=v.useState("");v.useEffect(()=>{localStorage.getItem("isAuthenticated")==="true"&&(n(localStorage.getItem("userFirstName")||""),l(localStorage.getItem("userLastName")||""),d(localStorage.getItem("userEmail")||""),h(localStorage.getItem("userPin")||""),a(!0))},[]);const m=(x,E,w)=>{let S="",_="";if(x){const C=x.trim().split(" ");S=C[0],_=C.slice(1).join(" ")}n(S),l(_),d(E),h(w),a(!0),localStorage.setItem("userFirstName",S),localStorage.setItem("userLastName",_),localStorage.setItem("userEmail",E),localStorage.setItem("userPin",w),localStorage.setItem("isAuthenticated","true")},b=()=>{n(""),l(""),d(""),h(""),a(!1),localStorage.removeItem("userFirstName"),localStorage.removeItem("userLastName"),localStorage.removeItem("userEmail"),localStorage.removeItem("userPin"),localStorage.removeItem("isAuthenticated")};return i.createElement(f_,null,i.createElement("div",{style:{position:"relative",minHeight:"100vh",width:"100%",overflowX:"hidden",background:"#000"}},i.createElement(Z7,null),i.createElement(q7,null),i.createElement("div",{style:{position:"relative",zIndex:3,maxWidth:900,margin:"0 auto",width:"100%",background:"none",minHeight:"calc(100vh - 80px)",paddingTop:"0px"}},i.createElement(kv,null,i.createElement(Yr,{path:"/admin",element:t&&p==="777777"?i.createElement("div",{className:"admin-app-content"},i.createElement(bO,null)):i.createElement(Md,{to:"/"})}),i.createElement(Yr,{path:"/confirm-match",element:i.createElement(dk,null)}),i.createElement(Yr,{path:"*",element:i.createElement("main",{className:"main-app-content"},i.createElement(kv,null,i.createElement(Yr,{path:"/chat",element:t?i.createElement(eS,{userName:`${e} ${s}`,userEmail:c,userPin:p}):i.createElement(Md,{to:"/"})}),i.createElement(Yr,{path:"/simple-pool",element:i.createElement(s0,null)}),i.createElement(Yr,{path:"/tenball-tutorial",element:i.createElement(lS,null)}),i.createElement(Yr,{path:"/dashboard",element:t?i.createElement(nS,{playerName:e,playerLastName:s,senderEmail:c,onScheduleMatch:()=>{},onOpenChat:()=>window.location.hash="#/chat",onLogout:b,userPin:p,onGoToAdmin:()=>{}}):i.createElement(Md,{to:"/"})}),i.createElement(Yr,{path:"/",element:i.createElement(Q7,{isAuthenticated:t,userFirstName:e,userLastName:s,userEmail:c,userPin:p,handleLoginSuccess:m,handleLogout:b})}),i.createElement(Yr,{path:"*",element:i.createElement(Md,{to:"/"})})))})))))}var cS=function(){if(typeof Map<"u")return Map;function t(a,e){var n=-1;return a.some(function(s,l){return s[0]===e?(n=l,!0):!1}),n}return function(){function a(){this.__entries__=[]}return Object.defineProperty(a.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),a.prototype.get=function(e){var n=t(this.__entries__,e),s=this.__entries__[n];return s&&s[1]},a.prototype.set=function(e,n){var s=t(this.__entries__,e);~s?this.__entries__[s][1]=n:this.__entries__.push([e,n])},a.prototype.delete=function(e){var n=this.__entries__,s=t(n,e);~s&&n.splice(s,1)},a.prototype.has=function(e){return!!~t(this.__entries__,e)},a.prototype.clear=function(){this.__entries__.splice(0)},a.prototype.forEach=function(e,n){n===void 0&&(n=null);for(var s=0,l=this.__entries__;s<l.length;s++){var c=l[s];e.call(n,c[1],c[0])}},a}()}(),i0=typeof window<"u"&&typeof document<"u"&&window.document===document,up=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),X7=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(up):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),K7=2;function J7(t,a){var e=!1,n=!1,s=0;function l(){e&&(e=!1,t()),n&&d()}function c(){X7(l)}function d(){var p=Date.now();if(e){if(p-s<K7)return;n=!0}else e=!0,n=!1,setTimeout(c,a);s=p}return d}var ez=20,tz=["top","right","bottom","left","width","height","size","weight"],nz=typeof MutationObserver<"u",az=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=J7(this.refresh.bind(this),ez)}return t.prototype.addObserver=function(a){~this.observers_.indexOf(a)||this.observers_.push(a),this.connected_||this.connect_()},t.prototype.removeObserver=function(a){var e=this.observers_,n=e.indexOf(a);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var a=this.updateObservers_();a&&this.refresh()},t.prototype.updateObservers_=function(){var a=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return a.forEach(function(e){return e.broadcastActive()}),a.length>0},t.prototype.connect_=function(){!i0||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),nz?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!i0||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(a){var e=a.propertyName,n=e===void 0?"":e,s=tz.some(function(l){return!!~n.indexOf(l)});s&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),uS=function(t,a){for(var e=0,n=Object.keys(a);e<n.length;e++){var s=n[e];Object.defineProperty(t,s,{value:a[s],enumerable:!1,writable:!1,configurable:!0})}return t},wl=function(t){var a=t&&t.ownerDocument&&t.ownerDocument.defaultView;return a||up},dS=Lp(0,0,0,0);function dp(t){return parseFloat(t)||0}function kx(t){for(var a=[],e=1;e<arguments.length;e++)a[e-1]=arguments[e];return a.reduce(function(n,s){var l=t["border-"+s+"-width"];return n+dp(l)},0)}function rz(t){for(var a=["top","right","bottom","left"],e={},n=0,s=a;n<s.length;n++){var l=s[n],c=t["padding-"+l];e[l]=dp(c)}return e}function sz(t){var a=t.getBBox();return Lp(0,0,a.width,a.height)}function iz(t){var a=t.clientWidth,e=t.clientHeight;if(!a&&!e)return dS;var n=wl(t).getComputedStyle(t),s=rz(n),l=s.left+s.right,c=s.top+s.bottom,d=dp(n.width),p=dp(n.height);if(n.boxSizing==="border-box"&&(Math.round(d+l)!==a&&(d-=kx(n,"left","right")+l),Math.round(p+c)!==e&&(p-=kx(n,"top","bottom")+c)),!lz(t)){var h=Math.round(d+l)-a,m=Math.round(p+c)-e;Math.abs(h)!==1&&(d-=h),Math.abs(m)!==1&&(p-=m)}return Lp(s.left,s.top,d,p)}var oz=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof wl(t).SVGGraphicsElement}:function(t){return t instanceof wl(t).SVGElement&&typeof t.getBBox=="function"}}();function lz(t){return t===wl(t).document.documentElement}function cz(t){return i0?oz(t)?sz(t):iz(t):dS}function uz(t){var a=t.x,e=t.y,n=t.width,s=t.height,l=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,c=Object.create(l.prototype);return uS(c,{x:a,y:e,width:n,height:s,top:e,right:a+n,bottom:s+e,left:a}),c}function Lp(t,a,e,n){return{x:t,y:a,width:e,height:n}}var dz=function(){function t(a){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Lp(0,0,0,0),this.target=a}return t.prototype.isActive=function(){var a=cz(this.target);return this.contentRect_=a,a.width!==this.broadcastWidth||a.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var a=this.contentRect_;return this.broadcastWidth=a.width,this.broadcastHeight=a.height,a},t}(),fz=function(){function t(a,e){var n=uz(e);uS(this,{target:a,contentRect:n})}return t}(),pz=function(){function t(a,e,n){if(this.activeObservations_=[],this.observations_=new cS,typeof a!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=a,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(a){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(a instanceof wl(a).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(a)||(e.set(a,new dz(a)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(a){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(a instanceof wl(a).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(a)&&(e.delete(a),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var a=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&a.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var a=this.callbackCtx_,e=this.activeObservations_.map(function(n){return new fz(n.target,n.broadcastRect())});this.callback_.call(a,e,a),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),fS=typeof WeakMap<"u"?new WeakMap:new cS,pS=function(){function t(a){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=az.getInstance(),n=new pz(a,e,this);fS.set(this,n)}return t}();["observe","unobserve","disconnect"].forEach(function(t){pS.prototype[t]=function(){var a;return(a=fS.get(this))[t].apply(a,arguments)}});var mz=function(){return typeof up.ResizeObserver<"u"?up.ResizeObserver:pS}();window.ResizeObserver=window.ResizeObserver||mz;if(typeof window<"u"&&window.self!==window.top){document.documentElement.setAttribute("data-iframe","true"),document.body.setAttribute("data-iframe","true");const a=document.getElementById("root");a&&a.setAttribute("data-iframe","true")}X5.createRoot(document.getElementById("root")).render(i.createElement(i.StrictMode,null,i.createElement(V7,null)));
